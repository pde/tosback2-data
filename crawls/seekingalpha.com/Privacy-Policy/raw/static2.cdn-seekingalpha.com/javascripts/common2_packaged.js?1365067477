/*Created at: 04/04/13 05:24:34*/
var rxEmail=/^\w[\w#$\%^&*'\/=?_`{|}~+-]*(\.[\w#$\%^&*'\/=?_`{|}~+-]+)*@(\w[\w-]*\.)+[a-z]{2,4}$/i;var rxWebsite=/^(https?:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$/i;var rxFeed=/^((https?|feed):\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$/i;var refresh_time_in_milliseconds=60000;String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};String.prototype.indexOfIgnoreCase=function(str){return this.toLowerCase().indexOf(str.toLowerCase());}
String.prototype.toRx=function(str){return this.replace(/(\(|\)|\{|\}|\[|\]|\:|\^|\$|\!|\=|\+|\*|\/|\,|\-|\||\?|\.)/g,"\\$1");}
String.prototype.rjust=function(n,c){var result=this;while(result.length<n){result=c+result;};return result;}
var refreshed_ads_slots=['QuotePage_300x250_top','QuotePage_728x90_leaderboard','ETFs_Quotepage_728x90_leaderboard','ETFs_QuotePage_728x90_leaderboard','ETFs_QuotePage_300x250_top','Common_300x250_top','Common_160x600','Common_728x90_leaderboard','Shp_ETFs_728x90_leaderboard'];var bInProcees=false;var gTimeout;var oRefresher=null;var jspellRealtime=false;var jspellAutoAttach=false;var jspellShowOptionsMenu=false;var jspellIgnoreUpper=false;var user_following_users_from_cookie=readCookie('user_following_users');var user_watchlist_slugs_from_cookie=readCookie('user_watchlist_slugs');var wl_icon_html="<img src='http://static3.cdn-seekingalpha.com/images/WL-Icon.gif?2' onmouseover='wl_icon_mouseover(this)' onmouseout='wl_icon_mouseout(this)' onclick='wl_icon_onclick(this)' class='wl_icon' title='This article is in your Watchlist'/>"
var isRefresh=SA.Utils.SASource.isAutoRefreshed();var comment_edit_time=20;var NotificationCookiesExpiration=0.003;function getUserUri(){var userUri=null;if(is_users_cookie_exists()){var user_id=readCookie('user_id');var user_nick=readCookie('user_nick');if(user_nick==null||user_nick=="")user_nick="User "+user_id;if(readCookie('author_slug')==null||readCookie('author_slug')==''){userUri="/user/"+user_id;}else{userUri="/author/"+readCookie('author_slug');}}
return userUri;}
function isAuthor(){if(is_users_cookie_exists()&&cookieExists('author_slug'))return true;return false;}
function setHrefLink(aElement,dest){var userUri=getUserUri();aElement.href=userUri+"/"+dest;}
function flush_cookies_by_prefix(prefix){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(prefix)==0&&c.substring(0,c.indexOf('='))!='user_email'){eraseCookie(c.substring(0,c.indexOf('=')));}}}
function flush_all_notice_cookies(){flush_cookies_by_prefix("notice_");return null;}
function flush_all_user_cookies(){flush_cookies_by_prefix("notice_");flush_cookies_by_prefix("user_");eraseCookie('comments_rating');eraseCookie('author_slug');eraseCookie('last_comment');eraseCookie('last_comment_date');eraseCookie('mybbuser');eraseCookie('adminsid');eraseCookie('sapu');return null;}
function logout(){logout_completly();}
function logout_completly(){flush_all_user_cookies();if(/\/account\//.test(top.location.href)){top.location.href='/';}else{top.location.reload();}}
function setSelRange(inputEl,selStart,selEnd){if(inputEl.setSelectionRange){inputEl.focus();inputEl.setSelectionRange(selStart,selEnd);}else if(inputEl.createTextRange){var range=inputEl.createTextRange();range.collapse(true);range.moveEnd('character',selEnd);range.moveStart('character',selStart);range.select();}}
function scroll_top(){window.scrollTo(0,0);document.body.scrollTop=0;}
function article_page_kind(){if(typeof(article_dashboards)=="undefined")return"";if(article_dashboards)
return((article_dashboards=='transcript')?"transcript":"article");else return"";}
function getDomain(){/https?:\/\/(.+?)(?:\/|\?|$)/.test(location.href);return RegExp.$1;}
function do_nothing_at_all(){void(0);}
function getURLParam(strParamName){var strReturn="";var strHref=window.location.href;if(strHref.indexOf("?")>-1){var strQueryString=strHref.substr(strHref.indexOf("?")+1);var aQueryString=strQueryString.split(/&|#/);for(var iParam=0;iParam<aQueryString.length;iParam++){if(new RegExp("^"+strParamName+"=").test(aQueryString[iParam])){var aParam=aQueryString[iParam].split("=");strReturn=aParam[1];break;}}}
return unescape(strReturn);}
function setURLParam(key,value){key=escape(key);value=escape(value);var s=document.location.search;var kvp=key+"="+value;var r=new RegExp("(&|\\?)"+key+"=[^\&]*");s=s.replace(r,"$1"+kvp);if(!RegExp.$1){s+=(s.length>0?'&':'?')+kvp;};document.location.search=s;}
function open_close_described_nav(obj_id){if($(obj_id).className=='described_nav'){$(obj_id).className+='_open';}else if($(obj_id).open!='true'){$(obj_id).className=$(obj_id).className.replace('_open','');}}
function dont_close_vocation_group(group_id){for(var i=1;i<10;++i){if($('group_'+i).open=="true"){$('group_'+i).open="false";$('group_'+i).className=$('group_'+i).className.replace('_open','');}}
$('group_'+group_id).open="true";}
function auto_open_vocation_group(group_id){var group=$('group_'+group_id)
if(group){group.open="true";group.className+='_open';}}
function user_picture(id,picture_size){string_id=id.rjust(9,"0");return"http://seekingalpha.com/images/users_profile/"+string_id.substr(0,3)+"/"+string_id.substr(3,3)+"/"+string_id.substr(6,3)+"/"+picture_size+"_pic.png?rand="+Math.random()*10000;}
function sendMessageWithLocation(id_coding){var location=top.location.href;var source;if(location.indexOf('/followers')>-1){source='Mouseover Popup Follower';}else if(location.indexOf('/following')>-1){source='Mouseover Popup Following';}else if(location.indexOf('/comments')>-1){source='Mouseover Popup All Comments';}else if(location.indexOf('/article/')>-1){source='Mouseover Popup Article';}else{source='Mouseover Popup Leaderboard';}
Messaging.sendMessage(id_coding,source);}
function change_wrapper_to_promote_image(path,promote_page){var img_width=(promote_page=='book'?100:145)
$('img_wrapper').innerHTML="";image=document.createElement('img');image.style.cssText="visibility:hidden;";image.setAttribute('image_width',img_width);image.onload=function(){if(this.width>img_width){this.style.cssText='display:block;width:'+this.getAttribute('image_width')+'px;visibility:visible;'}else{this.style.cssText='visibility:visible;'}}
image.src=path;$('img_wrapper').appendChild(image);$('has_logo_remove_button').style.display='block';$('need_to_remove_image').value='no'
if($('upload_msg'))$('upload_msg').style.display='none';if($('save_button')){$('save_button').disabled=false;$('save_button').className='submit';}}
function delete_promote_image(oBtn,UserId,PageName){$('need_to_remove_image').value='yes';$('has_logo_remove_button').style.display='none';oDiv=document.createElement('div');oDiv.className="no_img";oDiv.innerHTML="You haven't uploaded a book image yet"
$('img_wrapper').innerHTML="";$('img_wrapper').appendChild(oDiv);}
function note_promote_afer_published(deleted,type){if(deleted)$('promote_saved_message').innerHTML="Your "+type+" promotion details have been removed successfully. What would you like to do now:";else $('promote_saved_message').innerHTML="Your "+type+" promotion settings were saved. What would you like to do now:";$('promote_confirmation').style.display='block';$("promote_section_name").innerHTML="";if($("description_intersts_trading"))$("description_intersts_trading").innerHTML="";scroll_top();}
function notice_to_element(address,howto){if(readCookie('notice_'+address)!=null){switch(howto){case'update':$('notice_'+address).update(readCookie('notice_'+address));break;case'innerhtml':$('notice_'+address).innerHTML=readCookie('notice_'+address);break;case'value':$('notice_'+address).value=readCookie('notice_'+address);break;default:$('notice_'+address).update(readCookie('notice_'+address));}
eraseCookie('notice_'+address);}}
function handleInput(obj,action){switch(action){case'focus':if(obj.title==obj.value)obj.value="";break;case'blur':if(obj.value=="")obj.value=obj.title;break;}}
function link_over(e,clr){$(e).setStyle({cursor:'pointer',textDecoration:'underline',color:clr||'red'});}
function link_out(e,clr){$(e).setStyle({textDecoration:'none',color:clr||'blue'});}
function is_users_cookie_exists(){return(readCookie('user_id')!=null&&readCookie('user_id')!='');}
function set_login_and_registration_header(){if(is_users_cookie_exists()){$('header').className='';}}
function submit_your_article(){var prefix="";if(document.location.protocol=="https:"){prefix="http://seekingalpha.com"}
var page_link="/page/become-a-seeking-alpha-contributor-new";if(isAuthor()){page_link='/account/write_post_new';}else if(SA.Data.User.loggedIn()){page_link='/page/become-a-seeking-alpha-contributor';}
top.location.href=prefix+page_link;}
function go_to_bac_page(){var prefix="";if(document.location.protocol=="https:"){prefix="http://seekingalpha.com"}
var bac="/page/become-a-seeking-alpha-contributor-new";if(isAuthor()){bac='/page/become-a-seeking-alpha-pro-contributor';}else if(SA.Data.User.loggedIn()){bac='/page/become-a-seeking-alpha-contributor';}
top.location.href=prefix+bac;}
function ajax_delete_notification(tracking_id,current_comments_count){var new_comments_count=(typeof(current_comments_count)!="undefined")?"&current_comments_count="+current_comments_count:"";new Ajax.Request('/user_comments_tracking/ajax_delete_notification',{asynchronous:true,evalScripts:true,parameters:"tracking_id="+tracking_id+new_comments_count});$('post_'+tracking_id).remove();}
function ajax_delete_notification_new_link(destination_id,source_id){new Ajax.Request('/user_comments_tracking/ajax_delete_notification_new_link',{asynchronous:true,evalScripts:true,parameters:"destination_id="+destination_id+"&source_id="+source_id});$('post_'+destination_id+source_id).remove();}
function ajax_create_user_notification_cookie_and_update_tool_bar(user_id){if(document.location.protocol=="https:")return;new Ajax.Request('/user_comments_tracking/ajax_create_notification_cookies',{asynchronous:true,evalScripts:true,method:"get",parameters:"user_id="+user_id,onComplete:function(transport){if(transport.status==200&&transport.responseText!='failed')
parse_cookies_result_and_update_toolbar_html(transport.responseText);}});}
function parse_cookies_result_and_update_toolbar_html(cookies_vals_str){var notifications_arr=cookies_vals_str.split("@");var c_count=notifications_arr[0];var e_count=notifications_arr[1];var new_count=notifications_arr[2];if(isNaN(parseInt(c_count)))c_count=false;if(isNaN(parseInt(e_count)))e_count=false;if(isNaN(parseInt(new_count)))new_count=false;if(c_count&&e_count&&new_count){$('inbox_number').innerHTML=(e_count*1>0?'&nbsp;('+e_count+')':'');if($("unread_count"))$("unread_count").innerHTML=(e_count*1>0?'&nbsp;('+e_count+')':"");if(new_count!='0'){$('notifications_alert').innerHTML="";$('notifications_alert').insert(new_count);$('notifications_alert').style.display='block';}else{$('notifications_alert').style.display='none';}
createCookie('user_notifications',c_count+"|"+e_count+"|"+new_count);createCookie('user_update_note_cookies','true',NotificationCookiesExpiration);}}
function ajax_pop_notifications(user_id){if($('notify_popup_button').getAttribute('open')=="true")minimize_pop_notifications(user_id);else{new Ajax.Request('/user_comments_tracking/ajax_toolbar_show',{asynchronous:true,evalScripts:true,onComplete:function(transport){if(transport.status==200&&transport.responseText!='failed'){$('notifications_list').innerHTML="";$('notifications_list').insert(transport.responseText);$('notifications_alert').style.display='none';$('notify_popup_button').setAttribute('open','true');$('notificiations_popup').style.display='block';var n_cookie_str=readCookie('user_notifications');if(n_cookie_str=='undefined'||n_cookie_str==null)n_cookie_str='';var n_cookie_arr=n_cookie_str.split("|");var new_cookie_str=(n_cookie_arr.length==3)?(n_cookie_arr[0]+"|"+n_cookie_arr[1]+"|0"):"";createCookie('user_notifications',new_cookie_str);}}});}}
function minimize_pop_notifications(user_id){if($('notificiations_popup')){$('notifications_alert').style.display='none';$('notificiations_popup').style.display='none';$('notify_popup_button').setAttribute('open','false');$('notify_popup_button').disabled=false;}}
Event.observe(document,'keydown',function(e){if(e.keyCode==27){var user_id=readCookie('user_id');if(!isNaN(user_id))minimize_pop_notifications(user_id);}});function makeMaxLength(field,maxlength,Alert){if(field.value.length>maxlength){field.value=field.value.slice(0,maxlength);if(Alert)alert(Alert);}}
function submit_account_preferences(obj){if($('current_email_fieldset2').style.display=='block'){if(!validate_email('new_email','notice_account_preferences')==true)return false;}
if($('new_password_information').style.display=='block'){if(!validate_password('old_password','notice_account_preferences','Please enter your current password for verification.',1,80)==true)return false;if(!validate_password('new_password','notice_account_preferences','Please enter a password with 4 to 40 characters.',4,40)==true)return false;}
$('account_preferences').submit();}
function nick_was_taken_alert(){if(confirm('The username you chose had already been taken.\nDo you want to go to your account preferences to choose a different username?')){location.href='/account/edit_bio'}else{return false;}}
function nick_was_taken_alert_by_querystring(){if(getURLParam('nick_was_taken')=='true'){nick_was_taken_alert();}}
function link_edit_user_profile(){var user_id=readCookie('user_id');if(user_id!=null&&user_id!=''){var profiles=document.getElementsByClassName('edit_user_profile_'+user_id);if(profiles){profiles.each(function(item){item.innerHTML="<a href=\"/account/edit_bio\">Edit your profile</a>";item.style.display="";});}}}
function application_init(){nick_was_taken_alert_by_querystring();flush_all_notice_cookies();}
function page_load(){SeekingAlpha.Initializer.RunAfterLoad.call(SeekingAlpha.Initializer);}
function change_location(href){location.href=href;}
var too_much_share=0;function change_location_after_share(href){if(socialSA&&socialSA.now_posting>0&&too_much_share<20){setTimeout(function(){change_location_after_share(href)},500);too_much_share++;}else{location.href=href;}}
function submit_form_if_has_proper_value(oForm,field){if(field.value==""||field.value==field.title)return false;oForm.submit();}
function validate_and_refresh_cookie(){new Ajax.Request('/account/validate_and_refresh_cookie/',{method:'get'});}
function change_user(){$('user_email').style.width='285px';$('user_email').style.color='black';$('user_email').style.borderWidth='1px';$('user_email').style.borderStyle='solid';$('user_email').style.borderColor='#999999 #d3d3d3 #d3d3d3 #999999';$('user_email').style.marginLeft='12px';$('change_user_email').style.display='none';$('current_email_fieldset2').style.display='block';$('email_change_warning').style.display='block';}
function account_preferences_change_password(){$('old_password_stars').style.display='none';$('new_password_information').style.display='block';}
function validate_interests_section_in_promote_page(){var oObj,iInp,bCol1,bCol2,bCol3;for(iInp=0;oObj=document.forms["promote_form"]["vocation"][iInp];iInp++){if(oObj.checked)bCol1=true;}
for(iInp=0;oObj=document.forms["promote_form"]["user_interests[]"][iInp];iInp++){if(oObj.checked)bCol2=true;}
for(iInp=0;oObj=document.forms["promote_form"]["user_trading_frequence_tag_id"][iInp];iInp++){if(oObj.checked)bCol3=true;}
if(bCol1&&bCol2&&bCol3)
return"";else
return"Please complete this section";}
function ajax_submit_form(obj,location){submit_button=obj.getElementsByClassName('submit')[0];loader_button=obj.getElementsByClassName('loader')[0];new Ajax.Request(location,{asynchronous:true,evalScripts:true,parameters:Form.serialize(obj),onLoading:function(transport){if(submit_button){submit_button.disabled=true};if(loader_button){loader_button.style.display='inline'};},onComplete:function(transport){if(loader_button){loader_button.style.display='none'};if(submit_button){submit_button.disabled=false};}});return false;}
function check_length(str,min,max){return((str.length>=min)&&(str.length<=max));}
function validate_field_confirmation(field_name,snd_field_name,notice_name,msg){field=$(field_name);snd_field=$(snd_field_name);notice=$(notice_name);if(field.value!=snd_field.value){notice.innerHTML=msg;snd_field.focus();return false;}else{return true;}}
function validate_email_confirmation(field_name,snd_field_name,notice_name){return validate_field_confirmation(field_name,snd_field_name,notice_name,"Email does not match confirmation.")}
function validate_email(field_name,notice_name,notice_message){field=$(field_name);notice=$(notice_name);if((field.value.gsub(' ','')=='')||!rxEmail.test(field.value)){notice.innerHTML=notice_message||'<span class="\inner_notice\">Please enter a valid email address.</span>';field.focus();return false;}else{return true;}}
function validate_password(field_name,notice_name,notice_message,min,max){var field=$(field_name);var notice=$(notice_name);if(!check_length(field.value.gsub(' ',''),min,max)||field.value==field.title){notice.innerHTML=notice_message;field.focus();return false;}else{return true;}}
function validate_nick(field_name,notice_name,notice_message){var obj=$(field_name);if(obj.value.trim()==''||obj.value==obj.title){$(notice_name).innerHTML=notice_message;$(field_name).focus();return false;}
return true;}
function submit_orthodox_registration_form(obj){if($("I_agree_to_Terms").checked==false){$('notice_registration').innerHTML="Terms must be agreed in order to confirm registration";$('I_agree_to_Terms').focus();return false;}
if(!validate_email('register_user_email','notice_registration')==true)return false;if(!validate_password('register_user_password','notice_registration','Please enter a password with 4 to 40 characters.',4,40)==true)return false;if(!validate_password('register_user_nick','notice_registration','Please enter a longer username',2,80)==true)return false;if(obj)obj.disabled=true;$('orthodox_registration').submit();}
function submit_orthodox_login_form(){if(!validate_email('login_user_email','notice_login')==true)return false;if(!validate_password('login_user_password','notice_login','Please enter your password.',1,80)==true)return false;$('orthodox_login').submit();}
function submit_orthodox_forgot_password(){if(!validate_email('user_email','notice_forgot_password')==true)return false;$('submit_btn_id').disabled=true;$('orthodox_forgot_password').submit();}
function addSeekingAlphaToolBar(){try{window.external.AddSearchProvider("http://"+document.domain+"/javascripts/seeking.xml?e=1");}catch(eX){if(70==(eX.number&0xFFFF)){alert("For security reasons, you must use the mouse\n(or the Enter key) to click the Install button.");}else{alert("Unable to add search provider. The Create Your\nOwn tool requires Internet Explorer.   ["+(eX.number&0xFFFF)+"]");}}}
function KEY_FORM_PRESS(event,f){var key=event.which||event.keyCode;if(key==13)f();}
function kknd_user(user_id){if(confirm("Are you sure you want to delete this user and all the associated content? This CANNOT BE UNDONE.")){new Ajax.Request('/moderator/ajax_kknd_user',{asynchronous:true,evalScripts:true,parameters:"user_id="+user_id,onComplete:function(transport){if(transport.status==200&&transport.responseText!="failed"){alert('Data for this user were fully removed.')}}});}}
function remove_unneeded_article_from_article_more_box(id){if(obj=($('recent_article_'+id)||$$('li.last_recent_article')[0])){obj.style.display='none';}}
function FindSymbol(oForm,bFromBtn){var oAC=AutoCompleteSAConfig.Packages.transcript_symbol;if(bFromBtn&&oAC.State=='open')oAC.AutoInsert();if(oForm.symbol.value.trim()==""||oForm.symbol.value==oForm.symbol.title){alert("Please enter a symbol");return false;}
if(symbols.indexOf("<"+oForm.symbol.value.toUpperCase()+">")==-1){alert("This symbol does not exist");return false;}
urchinTracker('event/transcripts_center/search_box/symbol_transcript');location.href="/symbol/"+oForm.symbol.value.toLowerCase()+"/transcripts";return false;}
function symbolToName(symbol){var res="",symbol=symbol.toUpperCase();var search_this=new RegExp("<"+symbol+">(.*?)<");if(search_this.test(symbols))
res=RegExp.$1
return res;}
function cleanSymbolString(symbol_string){var symbol_string=symbol_string.split(",");var result=[];symbol_string.each(function(sym){if(symbolToName(sym.trim().toUpperCase()))result.push(sym.trim().toLowerCase());});if(result)result=result.join(",");return result||""}
function symbolLinkAddAltAndTitle(target){if(target.getAttribute("alt")&&target.getAttribute("title"))return;var symbol_name=symbolToName(target.innerHTML.trim()).unescapeHTML();target.setAttribute("alt",symbol_name);target.setAttribute("title",symbol_name);}
function FindTermInAllTranscripts(oForm,page_name){if(oForm.term.value.trim()==""||oForm.term.value=='e.g. "this quarter"'||oForm.term.value=='type an expression or a keyword here...'||oForm.term.value=='Search for products, companies, themes'){return false;}
urchinTracker('event/'+page_name+'/search_box/search_all_transcripts');order_param=((top.location.href.indexOf("order_by=relevance")>-1)?"&order_by=relevance":"");top.location.href="/search/transcripts?term="+encodeURIComponent(oForm.term.value)+order_param+"&all=true";return false;}
function FindTermInSymbolTranscripts(oForm,page_name){if(oForm.term.value.trim()==""){return false;}
urchinTracker('event/'+page_name+'/search_box/search_symbol_transcripts');location.href="/search/transcripts?symbol="+oForm.symbol.value+"&term="+encodeURIComponent(oForm.term.value);return false;}
var wl_icon_articles=[];var non_wl_icon_articles=[];function adding_wl_icon_for_watchlist_link(article_id,article_slugs,article_slugs_content,sasource){var element=$("article_"+article_id),symbols=$("article_symbols_"+article_id),wl_icon_granted=false,aSymbols;if(aSymbols=is_this_article_symbols_in_my_watchlist(article_slugs,article_slugs_content,sasource)){if(aSymbols.length){wl_icon_granted=true;if(symbols)symbols.innerHTML=aSymbols.join(", ");}}
if(!wl_icon_granted){non_wl_icon_articles.push(element)}}
function add_stats_to_wl_icons(){if(wl_icon_articles.length>0){wl_icon_articles.each(function(e){e.onclick=function(){var aImgs=e.getElementsByTagName('img');if(aImgs.length==2)
urchinTracker('event/'+getWLIconPageName()+'/wl_and_editors_icons/clicked');else
urchinTracker('event/'+getWLIconPageName()+'/wl_icon/clicked');}})
non_wl_icon_articles.each(function(e){e.onclick=function(){var aImgs=e.getElementsByTagName('img');if(aImgs.length==1)
urchinTracker('event/'+getWLIconPageName()+'/editors_icon/clicked');else
urchinTracker('event/'+getWLIconPageName()+'/no_icon/clicked');}})}}
function getWLIconPageName(){if(top.location.href.indexOf("/author/")>-1){return'author_page';}else if(top.location.href.indexOf("/dashboard/")>-1){return'dashboard_page';}else{return'sector_page'}}
function wl_icon_mouseover(img){var oLink=img.parentNode.getElementsByTagName('A')[0];oLink.className="wl_hover_link";}
function wl_icon_mouseout(img){var oLink=img.parentNode.getElementsByTagName('A')[0];oLink.className="dashboard_article_link";}
function wl_icon_onclick(img){var oLink=img.parentNode.getElementsByTagName('A')[0];if(oLink.click)oLink.click();else top.location.href=oLink.href;}
function is_this_article_symbols_in_my_watchlist(slugs,slugsContent,sasource){var articles_symbols_array=slugs,aSymbolsWL=[],aSymbols=[],sSlug;if(user_watchlist_slugs_from_cookie&&slugs.length){for(var i=0;sSlug=articles_symbols_array[i];i++){if((","+user_watchlist_slugs_from_cookie+",").indexOf(","+sSlug+",")>-1){aSymbolsWL.push("<a href='/symbol/"+sSlug+"' title='"+slugsContent[i]+"' class='symbol_in_portfolio'"+(sasource?" sasource='"+sasource+"'":'')+">"+sSlug.toUpperCase()+"</a>");}else{aSymbols.push("<a href='/symbol/"+sSlug+"' title='"+slugsContent[i]+"'"+(sasource?" sasource='"+sasource+"'":'')+">"+sSlug.toUpperCase()+"</a>");}
if(aSymbolsWL.length==3)return aSymbolsWL;}
if(aSymbolsWL.length)aSymbolsWL=aSymbolsWL.concat(aSymbols.slice(0,3-aSymbolsWL.length));return aSymbolsWL.sort();}
return false;}
function display_results_order_by(order_by){if(order_by==""){location.href=location.href.gsub(/&order_by=.*(\?|\&|$)/i,"");}else if(location.href.indexOf('order_by')==-1){add_this="&order_by="+order_by;location.href=location.href+add_this;}}
function adslot_refreshination(slot){if((slot=="ETFs_Quotepage_728x90_leaderboard")&&isRefresh){slot="ETFs_QuotePage_728x90_leaderboard"};return(isRefresh&&(refreshed_ads_slots.indexOf(slot)!=-1))?slot+'_refreshed':slot;}
function GA_googleFillSlot_sa(slot){GA_googleFillSlot(adslot_refreshination(slot));}
function GA_googleAddSlot_sa(slot){GA_googleAddSlot("ca-pub-1420150919334552",adslot_refreshination(slot));}
var slice_temp="";function print_article(type){if(type=='no_comments'&&$('comments')!=null)$('comments').className=$('comments').className.replace(' print_comments','');else if(type=='with_comments'&&$('comments')!=null)$('comments').className=$('comments').className+' print_comments';urchinTracker('event/'+article_page_kind()+'_page/click_print/print_'+type);if($('article_slice')!=null){slice_temp=$('article_slice').innerHTML;$('article_slice').innerHTML="";}
print();if($('article_slice')!=null){setTimeout("$('article_slice').innerHTML = slice_temp",5000);}}
function GetArticleId(){var rx=/\/(?:news-)?article\/(\d+?)\-/;rx.test(top.location.href);return RegExp.$1;}
function a_or_an(str){return["a","e","i","u","o"].indexOf(str[0].toLowerCase())==-1?"a":"an";}
function dashboard_message(d_name,status){if(status=="new"){$('dashboard_advert_box_container').innerHTML="You have successfully signed-up for this email!";$('dashboard_advert_box_container').className="dashboard_message";}else{$('dashboard_advert_box').innerHTML='<div class="dashboard_message">You are already signed-up for this email</div>';}
$('dashboard_advert_box_container').style.display='inline';}
function ajax_dashboard_subscription_widget(dashboard_slug,d_name){new Ajax.Request("/account/ajax_dashboard_subscription_widget",{asynchronous:true,evalScripts:true,parameters:"dashboard_slug="+dashboard_slug+"&source=dashboards",onComplete:function(transport){if(transport.responseText=='success'){dashboard_message(d_name,"new");}else if(transport.responseText=='already_signed_up'){dashboard_message(d_name,"already_signed_up")}else if(transport.responseText=='unlogged'){top.location.href='/account/login?slugs='+dashboard_slug;}}});}
function change_vocation_id_to_ad_vocation_category(vocation_id){if(vocation_id){switch(vocation_id){case"11":return"mv=other";case"9":case"46":return"mv=retired";case"7":case"24":case"25":return"mv=bizexecutive";case"5":case"6":case"8":case"26":case"30":case"35":case"40":case"47":case"51":return"mv=financepro;fv=t";case"22":case"23":return"mv=financepro;mv=analyst;fv=t";case"3":case"4":case"31":case"32":case"33":case"34":case"41":case"42":case"48":case"49":case"50":return"mv=ii;fv=t";case"2":case"18":case"19":case"20":case"21":return"mv=ii;mv=analyst;fv=t";case"12":case"14":case"27":case"28":case"29":case"52":case"53":case"54":case"55":return"mv=influential";case"43":case"44":return"mv=investor;fv=t";case"45":return"mv=investor";case"1":case"36":case"37":case"38":case"39":return"mv=ria;fv=t";case"10":case"13":case"15":case"16":case"17":return"mv=student";default:return"mv=other";}}else{return"mv=other";}}
function dfp_my_vocation_and_profiles(hash){var params_arr=dart_my_vocation_and_profiles().split(";");var key,val,tmp_val,arr;for(var i=0;i<params_arr.length;i++){if(!params_arr[i].length||!params_arr[i].match("="))continue;arr=params_arr[i].split("=");key=arr[0];val=arr[1];if(hash[key]){if(typeof(hash[key])!="object"){hash[key]=[hash[key]];}
hash[key].push(val);}else{hash[key]=val;}}
return hash;}
function dart_my_vocation_and_profiles(){if(!client_side_add_to_ad_id){dart_my_vocation_and_profiles_as_string();}
return client_side_add_to_ad_id;}
var client_side_add_to_ad_id;function dart_my_vocation_and_profiles_as_string(){var add_to_ad_id=array_cp_profiles();if(cookieExists('u_voc')){add_to_ad_id.push(change_vocation_id_to_ad_vocation_category(readCookie('u_voc')));}
if(isRefresh){add_to_ad_id.push("r=t");}else{add_to_ad_id.push("r=f");}
if(cookieExists('xp')||cookieExists('xp_src')){add_to_ad_id.push("xp=t");}
if(cookieExists('tops')&&readCookie('tops')=='t'){add_to_ad_id.push("top=t");}
if(is_users_cookie_exists()){add_to_ad_id.push("reg=t");}
user_interests=","+readCookie('user_interests')+",";if(user_interests.match(/,13399,/i)){add_to_ad_id.push("tf=daily");}else if(user_interests.match(/,13400,/i)){add_to_ad_id.push("tf=weekly");}else if(user_interests.match(/,13401,/i)){add_to_ad_id.push("tf=monthly");}else if(user_interests.match(/,13402,/i)){add_to_ad_id.push("tf=infrequent");}
if(!read_cp_cookie('c_p15')){isThisMyFirstPV=true;}
if(isThisMyFirstPV){add_to_ad_id.push("p=15");}
if(isAuthor()){add_to_ad_id.push("p=19");}
if((top.location.href.indexOf('/article/')>-1)&&(top.location.href.indexOf('source=email_rt_article')>-1)){add_to_ad_id.push("rta=t");}
if(cookieExists('dmin')&&readCookie('dmin')>0){add_to_ad_id.push("dm="+readCookie('dmin'));}
if(readCookie('adid')){add_to_ad_id.push("geo="+readCookie('adid'));}
var env=getDomain()
if((env!="seekingalpha.com")&&(env!="m.seekingalpha.com")){add_to_ad_id.push("env=dev");}
add_to_ad_id=add_to_ad_id.join(";");if(add_to_ad_id!=""){add_to_ad_id+=";";}
if(typeof(quantSegs)!="undefined"){if(quantSegs&&quantSegs!=""){add_to_ad_id+=quantSegs;}}
client_side_add_to_ad_id=add_to_ad_id;}
function is_subscribed_to_dashboard(dashboard_slug){return(readCookie('user_non_watchlist_slugs')&&readCookie('user_non_watchlist_slugs').split(",").indexOf(dashboard_slug)>-1);}
function init_dashboard_subscription_widget(dashboard_slug,d_name){if(is_users_cookie_exists()){if(readCookie("dashboard_email_alerts")){dashboard_message(d_name,readCookie("dashboard_email_alerts"));eraseCookie("dashboard_email_alerts");return;}
if(is_subscribed_to_dashboard(dashboard_slug))return false;$$('.btn_style_1')[0].onclick=function(){ajax_dashboard_subscription_widget(dashboard_slug,d_name)}
$('dashboard_advert_box_container').style.display='inline';}else{$$('.btn_style_1')[0].onclick=function(){Authentication.Authenticate(dashboard_slug,"dashboard",{Login:"sign_up_to_dashboard_email",Register:"FooterBar.Register",ForgotPassword:"FooterBar.ForgotPassword"},{Login:"subscribe to email alerts",Close:""},"","","dashboard_email_alerts");}
$('dashboard_advert_box_container').style.display='inline';}}
function sign_up_to_dashboard_email(){createCookie("dashboard_email_alerts","new")
location.reload();}
function checkSpelling(Suffix){var Sffix=Suffix||'';if(!window.jspellIsAttached)return;if(!jspellIsAttached()){$('jSpellReCheck'+Sffix).style.display='';$('jSpellDone'+Sffix).style.display='';$('jSpellCheck'+Sffix).style.display='none';}
jspellOnDemandCheck();}
function doneChecking(Suffix){var Sffix=Suffix||'';if(!window.jspellIsAttached)return;if(jspellIsAttached()){$('jSpellReCheck'+Sffix).style.display='none';$('jSpellDone'+Sffix).style.display='none';$('jSpellCheck'+Sffix).style.display='';jspellDetach();$('dmv').style.display='none';$('snv').style.display='none';$('dnv').style.display='none';if($("spell_buttons_wrapper"))$("spell_buttons_wrapper").removeClassName("split");}}
function jspellPostInit(){try{$('jSpellCheck').style.display='block';}catch(e){}};Event.observe(window,'load',function(){page_load();});function formulate_date(epoch_time,id){var month=["January","February","March","April","May","June","July","August","September","October","November","December"];var local=new Date();var now=new Date();local.setTime(epoch_time*1000);if(now.getFullYear()==local.getFullYear()){var theYear=' at'}else{var theYear=', '+local.getFullYear();}
var theHour=local.getHours();var ampm='am';if(theHour>12){theHour=theHour-12;ampm='pm';}else if(theHour==12){ampm='pm';}else if(theHour==0){theHour=12;}
var theMinutes=local.getMinutes();if(theMinutes<10){theMinutes='0'+theMinutes;}
var theTime=theHour+':'+theMinutes+ampm;var theMonth=month[local.getMonth()];var fullDate=theMonth+' '+local.getDate()+theYear+' '+theTime;$(id).innerHTML=fullDate;}
function nice_time_ago(time,target){var distance_in_minutes=parseInt(((new Date()).getTime()/1000-time)/60);var msg;if(distance_in_minutes==0)
msg="Seconds ago";else if(distance_in_minutes>=1&&distance_in_minutes<=59)
msg=distance_in_minutes+" minute"+(distance_in_minutes>1?"s":"")+" ago";else if(distance_in_minutes>=60&&distance_in_minutes<=1439)
msg=parseInt(distance_in_minutes/60)+" hour"+(distance_in_minutes>=120?"s":"")+" ago"
else{var month=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var publishTime=new Date(time*1000);var theHour=publishTime.getHours();var ampm='am';if(theHour>12){theHour=theHour-12;ampm='pm';}else if(theHour==12){ampm='pm';}else if(theHour==0){theHour=12;}
var theMinutes=publishTime.getMinutes();if(theMinutes<10){theMinutes='0'+theMinutes;}
var theTime=theHour+':'+theMinutes+ampm;msg=month[publishTime.getMonth()]+" "+publishTime.getDate()+", "+publishTime.getFullYear();if(target){msg=msg+", "+theTime;}}
if(target)
$(target).innerHTML=msg;else
return msg;}
function hp_nice_time_ago(time){var distance_in_minutes=parseInt(((new Date()).getTime()/1000-time)/60);var msg;if(distance_in_minutes>=0&&distance_in_minutes<=1439){var publishTime=new Date(time*1000);var theHour=publishTime.getHours();var ampm='AM';if(theHour>12){theHour=theHour-12;ampm='PM';}else if(theHour==12){ampm='PM';}else if(theHour==0){theHour=12;}
var theMinutes=publishTime.getMinutes();if(theMinutes<10)theMinutes='0'+theMinutes;msg=theHour+':'+theMinutes+' '+ampm;}else{var publishTime=new Date(time*1000);var currenYear=new Date().getFullYear()
var month=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(publishTime.getFullYear()<currenYear)
msg=month[publishTime.getMonth()]+" "+publishTime.getDate()+", "+publishTime.getFullYear();else
msg=month[publishTime.getMonth()]+" "+publishTime.getDate();}
return msg;}
var timeHide;function show_item(item_id){clearTimeout(timeHide);$(item_id).style.display="";}
function hide_item(item_id,delay){if(delay){var doThis=function(){$(item_id).style.display="none";};timeHide=setTimeout(doThis,1000*delay);}else{$(item_id).style.display="none";}}
function update_upload_text(text){$('goto_edit_picture').getElementsByTagName('SPAN')[0].innerHTML=text;}
function goto_update_picture(){location.href='/account/upload_picture';return false;}
function SeparatorNumber(number){var exp=/(\d+)(\d{3})/;number=number+"";while(exp.test(number)){number=number.replace(exp,'$1'+","+'$2');}
return number;}
function addThisClass(el,addClass){var classes=(el.className).split(' ');if(classes.indexOf(addClass)==-1){classes.push(addClass);}
el.className=classes.join(' ');}
function removeThisClass(el,removeClass){var classes=(el.className).split(' ');if(classes.indexOf(removeClass)!=-1){classes[classes.indexOf(removeClass)]='';}
el.className=classes.join(' ');}
function dottize(str,length){return(str.length>length?str.slice(0,length-3)+"...":str);}
function ieVersionOlderThan(ie_version){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var current_ieversion=new Number(RegExp.$1);return current_ieversion<=ie_version?true:false;}}
function isSmallScreen(good_width){try{good_width=good_width||$('main_container').getWidth();var viewport_width=document.viewport.getWidth();if(viewport_width<good_width)return true;return false;}catch(e){}
return false;}
function stickyAd(target,settings){this.ie6=navigator.appVersion.indexOf("MSIE 6.0")!=-1;this.Target=target;this.settings=settings||{};this.settings.Height=this.settings.Height!=null?this.settings.Height:600;this.settings.Width=this.settings.Width!=null?this.settings.Width:160;this.wrapper=null;this.settings.TopDistance=this.settings.TopDistance!=null?this.settings.TopDistance:45;this.settings.BottomDistance=this.settings.BottomDistance;this.fixed_ads_init=function(){if(SA.Utils.Env.touchSupport)return;this.Target=$(this.Target);if(this.Target){this.banner_top_range=Position.cumulativeOffset(this.Target)[1];this.wrapper=this.Target.parentNode;Event.observe(window,'scroll',function(){this.fixed_ads_scroll(this.banner_top_range);}.bind(this));}}
this.fixed_ads_scroll=function(){this.move_banner=function(){if(this.Target){if(isSmallScreen()){this.Target.style.position="static";this.Target.style.top="0px";this.Target.style.left="0px";return;}
var footer_top_range=null;if($("footer_container"))footer_top_range=Position.cumulativeOffset($("footer_container"))[1];else if($("footer"))footer_top_range=Position.cumulativeOffset($("footer"))[1];else if(this.settings.BottomDistance)footer_top_range=this.settings.BottomDistance;else return;var netoHeightFixedAdBottom=footer_top_range-this.settings.Height-378;if(this.wrapper)this.banner_top_range=Position.cumulativeOffset(this.wrapper)[1];var scroll_top=document.viewport.getScrollOffsets().top+this.settings.TopDistance;if((scroll_top>=this.banner_top_range)&&(scroll_top<=netoHeightFixedAdBottom)){if(this.ie6){var location=document.viewport.getScrollOffsets().top-this.banner_top_range;new Effect.Move(this.Target,{x:0,y:location+this.settings.TopDistance,mode:'absolute'});}else{this.Target.style.clear="both";this.Target.style.position="fixed";this.Target.style.top=this.settings.TopDistance+"px";this.Target.style.left="auto"
this.Target.addClassName('fixed');}}
else if(scroll_top>netoHeightFixedAdBottom){if(this.ie6){var location=netoHeightFixedAdBottom-this.banner_top_range;new Effect.Move(this.Target,{x:0,y:location,mode:'absolute'});}else{if(this.Target.style.position!="static"){this.Target.style.position="relative";this.Target.style.top=(netoHeightFixedAdBottom-this.banner_top_range)+"px";this.Target.style.left="0px";}}}else{if(this.ie6){new Effect.Move(this.Target,{x:0,y:0,mode:'absolute'});}else{this.Target.style.position="static";this.Target.style.top="0px";this.Target.style.left="0px";this.Target.removeClassName('fixed');}}}}.bind(this);if(this.ie6){clearTimeout(this.MoveTimeout);this.MoveTimeout=setTimeout(this.move_banner,200);}else{this.move_banner();}}
SeekingAlpha.Initializer.onDOMLoad(function(){this.fixed_ads_init()}.bind(this));}
function go_to_sort_page(profile_url,sort_by,follow_type,page){var strURL='/'+profile_url+'/'+follow_type;if(sort_by!="recent"){strURL+='/'+sort_by;}
var filter="";if($('only_contributors').checked==true){filter+="c";}
if(filter!=""){strURL+='/'+filter;}
if(page&&page>1){strURL+='/'+page;}
location.href=strURL;}
function load_remote_script(Url){var Script=document.createElement('script');Script.type="text/javascript";Script.src=Url;document.body.insertBefore(Script,document.body.firstChild);}
function load_remote_css(url,media){head=document.getElementsByTagName('head')[0];var cssLink=document.createElement('link');cssLink.type="text/css";cssLink.rel="stylesheet";cssLink.media=media;cssLink.href=url;head.appendChild(cssLink);}
var captchas_hash=[];captchas_hash.push([0,'What is the opposite of "bad"?',4])
captchas_hash.push([1,'What is 20 divided by four (in words)?',4])
captchas_hash.push([2,'How much is 2 plus five (in words)?',5])
captchas_hash.push([3,'What is the first month of the year?',7])
captchas_hash.push([4,'How many minutes are in an hour (in numbers)?',2])
captchas_hash.push([5,'What is four plus 4 (in words)?',5])
captchas_hash.push([6,'What is twenty divided by 2 (in words)?',3])
captchas_hash.push([7,'What is two times 1 (in numbers)?',1])
captchas_hash.push([8,'How much is six plus 3 (in words)?',4])
captchas_hash.push([9,'What is two plus two (in numbers)?',1])
function captcha(captcha_id){return captchas_hash[captcha_id];}
function init_captcha(){captcha_id=Math.round(1000*Math.random())%(captchas_hash.size())
$('captcha_id').value=captcha_id;$('captcha_question').innerHTML=captcha(captcha_id)[1];}
function email_story_to_friends(type,article_id,mail_to_uri){$('comment_popup').innerHTML=SA.Utils.Popup.email_story_to_friends_html(article_id,mail_to_uri,type);AlphaBox.Loading();if(!is_users_cookie_exists())init_captcha();AlphaBox.AddContent("comment_popup");email_story_to_friends_log(type,"start",article_id);}
function display_sent_story_to_friends_email(type,article_id,from,to,subject,text){AlphaBox.AddHtml(SA.Utils.Popup.display_sent_story_to_friends_email_html(type,article_id,from,to,subject,text));var counter=$('widget_email_count');if(counter)counter.innerHTML=(parseInt(counter.innerHTML)||0)+to.split(',').length;email_story_to_friends_log(type,"success",article_id,to.split(",").length);}
function validate_email_to_a_friend_popup(type){var form_is_ok=true;$$('div.error_message').each(function(obj,i){obj.innerHTML=""})
$$('div.error_message').each(function(obj,i){obj.style.display="none"})
if($('friend_emails').value.trim()==""){form_is_ok=false;$("friend_emails_errors").innerHTML="Please provide an email address.";$("friend_emails_errors").style.display="block";}else{friend_emails=$('friend_emails').value.split(",");if(friend_emails.size()>10){form_is_ok=false;$("friend_emails_errors").innerHTML="Up to 10 recipients are allowed.";$("friend_emails_errors").style.display="block";}else{$("friend_emails_errors").innerHTML="Please correct these emails:";for(i=0;i<friend_emails.length;i++){if(rxEmail.test(friend_emails[i].trim())==false){form_is_ok=false;$("friend_emails_errors").innerHTML+=" "+friend_emails[i].trim();$("friend_emails_errors").style.display="block";}}}}
if(!is_users_cookie_exists()){if($("my_name").value.trim()==""){form_is_ok=false;$("my_name_error").innerHTML="Please provide your name.";$("my_name_error").style.display="block";}
if($('answer_captcha').value.trim()==''){form_is_ok=false;$("answer_captcha_error").innerHTML="Please answer the security question.";$("answer_captcha_error").style.display="block";}else if($('answer_captcha').value.length!=captcha($('captcha_id').value)[2]){form_is_ok=false;email_story_to_friends_log(type,"captcha_error_js",$("article_id").value)
$("answer_captcha_error").innerHTML="Try again, the answer is incorrect.";$("answer_captcha_error").style.display="block";}}
if(form_is_ok&&!$('email_to_a_friend_send_button').disabled){$('email_to_a_friend_send_button').disabled=true;ajax_email_to_a_friend(type);}
return false;}
function ajax_email_to_a_friend(type){btn_submit=$('email_to_a_friend_send_button');loader=$('email_to_a_friend_loader');var parameters_data=Form.serialize($('email_to_a_friend'))+'&item_name='+type
href='/form/ajax_send_item_to_friends';new Ajax.Request(href,{asynchronous:true,evalScripts:true,parameters:parameters_data,onLoading:function(transport){btn_submit.disabled=true;loader.style.display='block';},onComplete:function(transport){if(200==transport.status){if(transport.responseText=="captcha failed"){loader.style.display='none';$("answer_captcha_error").innerHTML="Try again, the answer is incorrect.";$("answer_captcha_error").style.display="block";email_story_to_friends_log(type,"captcha_error_server",$("article_id").value);btn_submit.disabled=false;}else{loader.style.display='none';email_params_array=transport.responseText.split("@@@");display_sent_story_to_friends_email(type,email_params_array[0],email_params_array[1],email_params_array[2],email_params_array[3],email_params_array[4]);}}else{alert("An error has occurred.");btn_submit.disabled=false;}}});}
function vanish(elem){var elem=$(elem);elem.style.overflow="hidden";elem.morph('height:0px',{afterFinish:function(){elem.style.display="none"}});}
function flip_html_attributes_order(parent_id){var parent_att=$(parent_id);if(parent_att){children_flipped_arr=parent_att.childElements().reverse();children_flipped_arr.each(function(child){parent_att.appendChild(child);})}}
var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase();}
function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}
return output.join('');}
var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0]);}
return str_format.format.call(null,str_format.cache[arguments[0]],arguments);};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output.push(parse_tree[i]);}
else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw(sprintf('[sprintf] property "%s" does not exist',match[2][k]));}
arg=arg[match[2][k]];}}
else if(match[1]){arg=argv[match[1]];}
else{arg=argv[cursor++];}
if(/[^s]/.test(match[8])&&(get_type(arg)!='number')){throw(sprintf('[sprintf] expecting number but found %s',get_type(arg)));}
switch(match[8]){case'b':arg=arg.toString(2);break;case'c':arg=String.fromCharCode(arg);break;case'd':arg=parseInt(arg,10);break;case'e':arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'o':arg=arg.toString(8);break;case's':arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case'u':arg=Math.abs(arg);break;case'x':arg=arg.toString(16);break;case'X':arg=arg.toString(16).toUpperCase();break;}
arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?'+'+arg:arg);pad_character=match[4]?match[4]=='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):'';output.push(match[5]?arg+pad:pad+arg);}}
return output.join('');};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0]);}
else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push('%');}
else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);}
else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1]);}
else{throw('[sprintf] huh?');}}}
else{throw('[sprintf] huh?');}
match[2]=field_list;}
else{arg_names|=2;}
if(arg_names===3){throw('[sprintf] mixing positional and named placeholders is not (yet) supported');}
parse_tree.push(match);}
else{throw('[sprintf] huh?');}
_fmt=_fmt.substring(match[0].length);}
return parse_tree;};return str_format;})();var vsprintf=function(fmt,argv){argv.unshift(fmt);return sprintf.apply(null,argv);};function do_not_show_all_other_del_pops(){$$(".delete_edit_this_post_pop").each(function(e){e.style.display="none";});}
function add_js_to_ad_call(src){if(SA.Utils.SASource.isAutoRefreshed()&&(/qp=true/i.test(src)||/dp=1/i.test(src))){src=src.replace("-non-","-");}
document.write('<scr'+'ipt type="text/javascript" src="'+src+'"></scr'+'ipt>');}
var ad_frames_arr=0;function iframeAd(sizeXformat,src,resize){if(/\/shark\//i.test(location)){return"";}
var sizeParts=sizeXformat.split("x")
var query=[];if(window.ms_slug)query.push("ms_slug="+window.ms_slug);if(window.article_dashboards)query.push("article_dashboards="+window.article_dashboards);if(window.article_sectors_themes)query.push("article_sectors_themes="+window.article_sectors_themes);var iframeFilePath="";if(/^(www\.)?seekingalpha.com/i.test(location.host)){iframeFilePath="http://seekingalpha.com";}else if(location.host=="staging.seekingalpha.com"){iframeFilePath="http://staging.seekingalpha.com";}
resize=resize||false;if(document.location.protocol!="https:")document.write('<iframe resize="'+resize+'" name="adframe_'+ad_frames_arr+++'" scrolling="no" height="'+sizeParts[1]+'" width="'+sizeParts[0]+'" marginwidth="0" marginheight="0" frameborder="0" vspace="0" hspace="0" style="border: 0px none;" src="'+iframeFilePath+'/adsframe.html#que='+encodeURIComponent(src)+(query.length?("&par="+encodeURIComponent(query.join("&"))):"")+'"></iframe>');}
function extraParamsAdDfp(id,ad_params){if(/\/shark\//i.test(location)){return"";}
if(window.ms_slug)ad_params['ms_slug']=window.ms_slug;if(window.article_dashboards)ad_params['article_dashboards']=window.article_dashboards;if(window.article_sectors_themes)ad_params['article_sectors_themes']=window.article_sectors_themes;SA.Utils.Ads.add({el:$(id),HadCreated:false,size:ad_params.sz,info:ad_params,NotSticky:true});SA.Utils.Ads.run();}
function convert_author_name_to_slug(name){var reg=new RegExp("[a-z\-]*>"+name);if(authors.match(reg))
return authors.match(reg)[0].split(">")[0];return"";}
function setWildcardClasses(){var date=new Date();var month=(date.getUTCMonth()+1).toString();if(month.length==1){month="0"+month}
var daystamp=date.getUTCFullYear().toString()+month+date.getUTCDate().toString();document.write("<style>.unit-content .currtime {display:none;} .unit-content .t_"+daystamp+" .date {display:none;} .unit-content .t_"+daystamp+" .currtime {display:inline;}</style>");}
function sasource_extras(parent_id,value){$$('#'+parent_id+' a').each(function(el){if(source=el.getAttribute('sasource')){source+=value;el.setAttribute('sasource',source);}})}
function dash(str,limit,space){var word=[];space=space?space:" "
str.split(" ").collect(function(w){word.push(w.length>limit?w.substring(0,limit-1)+"-"+space+w.substring(limit,w.length):w)})
return word.join(" ");}
function trueOffset(obj){var curleft=curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}while(obj=obj.offsetParent);return[curleft,curtop];}}
if($("sticky_navigation")){new stickyAd("sticky_navigation");}
function page_forms_get_username(){if(!$('form_user_name'))return;if(!readCookie('user_id')){open_header_log_in_popup_lightbox('headtabs_login','');$('form_user_name').value="";$('form_user_name').setAttribute("value","");$('form_user_name').removeAttribute("readonly");}else{var user_nick=readCookie('user_nick')||"";$('form_user_name').value=user_nick;$('form_user_name').setAttribute("value",user_nick);if(user_nick==""){$('form_user_name').removeAttribute("readonly");}}}
function ScrollerCloseToElement(el,delta){var ep_y=Element.positionedOffset(el)[1];var vp_y=document.viewport.getScrollOffsets().top;var viewport=document.viewport.getDimensions();return(ep_y<vp_y+viewport.height+delta)}
if(!window.trackLink){function trackLink(){}}
(function(){var scope=SA.UsingNamespace("SA.Data");scope.Cache=new function(){var version="1";function constructor(){try{if(window.localStorage){if(localStorage.getItem("/SA/Version")!=version){localStorage.clear();}
localStorage.setItem("/SA/Version",version);}}catch(e){}}
this.SetOnlyOnLocalStorage=function(key,data){if(window.localStorage){try{localStorage.setItem(key,data);}catch(e){localStorage.clear();}}}
if(window.localStorage){this.Get=function(key){return localStorage.getItem(key);}
this.Set=function(key,data){try{localStorage.setItem(key,data);}catch(e){localStorage.clear();}}
this.Clean=function(key){if(key){key=key;var rkeys=[];for(var i=0,len=localStorage.length;i<len;i++){var ckey=localStorage.key(i);if(ckey.startsWith(key))
rkeys[rkeys.length]=ckey;}
for(var i=0,len=rkeys.length;i<len;i++){localStorage.removeItem(rkeys[i]);}}else{localStorage.clear();}}
this.Del=function(key){localStorage.removeItem(key);}}else{this.Get=function(key){return SA.Data.Cookies.get(key);}
this.Set=function(key,data){SA.Data.Cookies.set(key,data,2)}
this.Clean=function(key){SA.Data.Cookies.del(key)}
this.Del=function(key){SA.Data.Cookies.del(key);}}
this.get=this.Get;this.set=this.Set;this.clean=this.Clean;this.del=this.Del;setTimeout(constructor,10);}})();(function(){var scope=SA.UsingNamespace("SA.Data");scope.Chartbeat=new function(args){var scriptContainer;var chartElements;var apiKey;var interval;var intervalTime=10000;var updateAt;this.init=function(apiKey){scriptContainer=$("symbol_data_script_container");chartElements=$$("[chart_beat]");updateAt=$('chartbeat_update_at');}
this.run=function(){if(interval)clearInterval(interval);SA.Data.Chartbeat.getInfo();interval=setInterval(function(){SA.Data.Chartbeat.getInfo();},intervalTime);}
this.render=function(info){var d=new Date();var H=d.getUTCHours(),h=(H==0?12:(H>12?H-12:H)),m=d.getUTCMinutes(),s=d.getUTCSeconds();updateAt.innerHTML="last updated:"+(h<10?'0'+h:h)+':'+(m<10?'0'+m:m)+':'+s+(H<12?" AM":" PM");var size=chartElements.length;for(var i=0;i<size;i++){var el=chartElements[i];var key=el.getAttribute("key");var nv=info[key]
if(key&&typeof(nv)!="undefined"){var pre=el.getAttribute("preval");var cls=getClass(pre,nv);el.innerHTML=nv;el.className=cls;el.setAttribute("preval",nv);}}}
this.getInfo=function(){var path=escape(location.href.split("/article/")[1]);if(!scriptContainer)return;var oncomplete="SA.Data.Chartbeat.render";var nScript=document.createElement("script");var src="http://api.chartbeat.com/quickstats/?r="+Math.round(100000*Math.random())+"&host=seekingalpha.com&keys=I,W,R,r,c&limit=20&apikey=8527bf1e596cbe22c45cff0765302eb2&path="+path+"&jsonp="+oncomplete;nScript.src=src;scriptContainer.appendChild(nScript);}
function getClass(pre,nv){if(!pre||!nv)return"";if(pre<nv)return"up";if(pre>nv)return"down";return"";}}}());var charbeatHasRan=false;function chartbeat_alpha(){if(charbeatHasRan)return;var el=$("ads_and_tools");if(!el)return;charbeatHasRan=true;var h=[];h.push("<style>.chartbeat.block{background:#fff; padding:6px; border:1px solid #ccc;margin-bottom:16px;} ");h.push(".red_title_text.chartbeat{float:none !important; font-size:12px !important; line-height:19px;} ");h.push(".chartbeat .sub_chart div{margin-left:6px; line-height:19px} ");h.push(".chartbeat .up{color:green; background:url('/images/universal/big_updown_arrows.png') no-repeat scroll 0 0px; padding-left:15px; } ");h.push(".chartbeat label{display:block; float:left; width:86px; } ");h.push(".chartbeat .sub_chart label{width:80px; } ");h.push(".chartbeat .down{color:red; background:url('/images/universal/big_updown_arrows.png') no-repeat scroll 0 -58px;padding-left:15px; } ");h.push("</style>");h.push('<div class="chartbeat block">');h.push('<div class="" style="">Page statistics</div><div style="float: right;" id="chartbeat_update_at"></div></div>');h.push("<div style='margin-left:10px'>");h.push('<div class="chartbeat red_title_text" title="The number of people reading (defined as actively moving around the page)."><label>Read:</label><span chart_beat key="read"></span></div>');h.push('<div class="chartbeat red_title_text" title="The total number of people."><label>People:</label><span chart_beat key="people"></span></div>');h.push("<div class='sub_chart' style='margin: 2px 0;'>");h.push('<div title="People coming directly to site."><label>Direct:</label><span chart_beat key="direct"></span></div>');h.push('<div title="People coming from internal links."><label>Internal:</label><span chart_beat key="internal"></span></div>');h.push('<div title="People coming from social links."><label>Social:</label><span chart_beat key="social"></span></div>');h.push('<div title="People coming from search."><label>Search:</label><span chart_beat key="search"></span></div>');h.push("</div>");h.push('<div class="chartbeat red_title_text" title="Number of users that are new"><label>New:</label><span chart_beat key="new"></span></div>');h.push('</div>');h.push('</div>');new Insertion.Top(el,h.join(" "));SA.Data.Chartbeat.init();SA.Data.Chartbeat.run();}
(function(){var scope=SA.UsingNamespace("SA.Data");scope.User=new function(){this.id=function(){return SA.Data.Cookies.get('user_id');}
this.nick=function(){return SA.Data.Cookies.get('user_nick').replace(/\+/gi,' ');}
this.email=function(){return SA.Data.Cookies.get('user_email');}
this.loggedIn=function(){return this.id()?true:false;}
this.uri=function(){var userUri=null,user_id=this.id();if(user_id){if(readCookie('author_slug')==null||readCookie('author_slug')==''){userUri="/user/"+user_id;}else{userUri="/author/"+readCookie('author_slug');}}
return userUri;}
this.hasPremiumTermsAndConditionsUpdatd=function(){if(typeof(window.last_premium_terms_and_conditions)=="undefined")return window.approvedLatestTermsAndCond;return window.approvedLatestTermsAndCond||readCookie("ptac")==window.last_premium_terms_and_conditions;}
this.authorSlug=function(){var slug=SA.Data.Cookies.get('author_slug');return slug==''?null:slug;}
this.isAuthor=function(){return(this.loggedIn()&&this.authorSlug()?true:false);}
this.hasiPadApp=function(){return Boolean(contains&&readCookie('user_devices')&&contains(3,readCookie('user_devices')));}
this.setHref=function(aElement,dest){var userUri=getUserUri();aElement.href=userUri+"/"+dest;}
this.hasPortfolio=function(){return SA.Data.User.loggedIn()?SA.Data.Cookies.get('user_watchlist_slugs'):SA.Data.Cookies.get('temp_portfolio');}
this.hasRTA=function(){if(SA.Data.Cookies.get('rta_market_currents')||SA.Data.Cookies.get('rta_articles')||SA.Data.Cookies.get('rta_pro_articles'))return true;return false;}
this.rtaSymbols=function(){var mc=SA.Data.Cookies.get('rta_market_currents'),ar=SA.Data.Cookies.get('rta_articles'),ap=SA.Data.Cookies.get('rta_pro_articles');return(mc?mc.split(','):[]).concat(ar?ar.split(','):[]).concat(ap?ap.split(','):[]).sort().uniq(true);}
var rtaSymbolsCountCache=null;this.rtaSymbolsCount=function(){if(rtaSymbolsCountCache==null)rtaSymbolsCountCache=this.loggedIn()?this.rtaSymbols().length:0;return rtaSymbolsCountCache;}
this.addRTASymbols=function(symbols,types){if(!symbols||!window.user_cookie)return;if(!types)types='rta_market_currents,rta_articles,rta_pro_articles';types=types.split(',');for(var i=0;i<types.length;i++){var current=user_cookie[types[i]];user_cookie[types[i]]=((current?current+',':'')+symbols.toLowerCase()).split(/\s*,\s*/).sort().uniq(true).join(',');}}
this.newRTASymbols=function(symbols){if(!symbols)return 0;if(typeof(symbols)=='string')symbols=symbols.toLowerCase().split(/\s*,\s*/);var newSym=Array.prototype.without.apply(symbols,this.rtaSymbols());return newSym;}
this.newPortfolioSymbols=function(symbols){if(!symbols||!user_cookie.user_watchlist_slugs)return 0;if(typeof(symbols)=='string')symbols=symbols.toLowerCase().split(/\s*,\s*/);var newSym=Array.prototype.without.apply(symbols,user_cookie.user_watchlist_slugs.split(/\s*,\s*/));return newSym;}
this.isSATeam=function(){var email=this.email();return(this.loggedIn()&&email&&email.match(/@seekingalpha.com/))?true:false;}
this.roadblock=function(abversions){if(is_pro)return false;if(!this.loggedIn())return true;if(!this.hasPortfolio()||this.hasPortfolio().split(",").length<5)return true;Mone.event("Roadblock - homepage","Roadblock Login","Logged in - no glitch");return false;}
this.show_roadblock_reg=function(){var title="";if(readCookie('user_email')&&readCookie('user_email').length>0&&!AlphaBox.isOpen){SA.Utils.Popup.roadblock_login();return;}
title="To use the Seeking Alpha homepage please tell us which stocks you want to follow in your portfolio:";SA.Utils.Popup.roadblock_registration(title);}
this.Login=function(email,password,success,failure,opt){opt=opt||{};if(!opt.activity)return;if(!opt.ID)opt.ID='login';if(!rxEmail.test(email))return failure({errors:'invalid_email'});if(!password)return failure({errors:'empty_password'});var params={'user[email]':email,'user[password]':password,id:opt.ID,activity:opt.activity,'function':''};if(opt.addStocks)params['rta_slugs']=opt.addStocks;if(opt.addRTA)params['rta_add_alerts']=1;if(opt.cfa=="cfa_newsletter")params['cfa']="cfa_newsletter";if(opt.cfa=="cfa_nonewsletter")params['cfa']="cfa_nonewsletter";return SA.Utils.ajax("/authentication/login",params,function(response){if(!response.login){failure({errors:response.message});}else{if(response.max_rta_error)alert(response.max_rta_error);success(response);}},function(response){failure(response);});}
this.ForgotPassword=function(email,success,failure,opt){opt=opt||{};if(!opt.activity)return;if(!opt.ID)opt.ID='login';if(!rxEmail.test(email))return failure({errors:'invalid_email'});var params={'user[email]':email,id:opt.ID,activity:opt.activity,'function':''};params.url_source=opt.url?opt.url:top.location.href.replace(/\?.*?$/,'');return SA.Utils.ajax("/authentication/forgot_password",params,function(response){if(!response.forgot_password){failure({errors:response.message});}else{success(response);}},function(response){failure(response);});}
this.Register=function(email,source,success,failure,opt){opt=opt||{}
if(!rxEmail.test(email))return failure({errors:'invalid_email'});var params={'user[email]':email,'user[password]':opt.password,"user[nick]":opt.nick,id:'login',activity:opt.activity,'function':'',referrer:(SA.Data.Cookies.get('session_referrer')||''),url_source:location.href.replace(/\?.*$/,''),rta_source:source};if(!opt.noAlerts)params.rta_add_alerts=1;if(opt.rtaSlugs)params.rta_slugs=opt.rtaSlugs;if(opt.slugs)params.slugs=opt.slugs;if(opt.password)params.password=opt.password;if(opt.nick)params.nick=opt.nick;if(opt.cfa)params.cfa=opt.cfa;if(source)params.force_params=source;return SA.Utils.ajax("/authentication/registration",params,function(response){if(!response.registration){failure({errors:response.message});}else{registered_mail=email;success(response);}},function(response){failure(response);});}
this.isPro=function(){return(window.is_pro)?true:false;}}})();(function(){var scope=SA.UsingNamespace("SA.Stats");scope.Mafne=new function(){this.on_array=function(source,a_array,tag){var tag_param=tag?"tag="+tag+"&":'';a_array.each(function(e){e.onclick=function(){if(e.href.indexOf('mafne.html')==-1){var anew_li=e;while(!anew_li.id.match('anew_')){anew_li=anew_li.parentNode}
e.href="/mafne.html?"+tag_param+"source="+source+anew_li.id.gsub('anew_','&anew_id=')+"&url="+escape(e.href);}}})}}})();(function(){var GA=SA.UsingNamespace("SA.Stats.GA");var prhost=document.location.host.match(/^(?:(www|m)\.)?(seekingalpha\.com)/);function runNextPageEvents(){var events=[];try{events=SA.Data.Cache.Get('ga_events_queue').evalJSON();}catch(e){};SA.Data.Cache.Set('ga_events_queue',"[]");for(var i=0;i<events.length;i++)GA.event.apply(GA,events[i]);}
function loadAsyncGA(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);}
function initCustomVars(){var urlRegExp='^(?:https?://(?:(?:.+\\.)?seekingalpha.com|([^/]+)))?/((?:article/(\\d+)-|news-article/(\\d+)-|instablog/([^/]+)/(\\d+)-)?([^#?]*))(\\?[^#]*)?(#.*)?$';var m=document.referrer.match(urlRegExp),ref;if(m){if(m[1])ref=m[1]+'/'+m[2];else if(m[3]&&/transcript$/.test(m[7]))ref='article-trc';else if(m[3])ref='article';else if(m[4])ref='news-article';else if(m[5])ref='instablog';else if(m[7]=='')ref='hp';else ref=m[7];_gaq.push(['_setCustomVar',1,'referrer',ref.replace(/\//g,'~').substr(0,54),3]);}
var loggedIn=SA.Data.User.loggedIn();_gaq.push(['_setCustomVar',2,'logged_in',(loggedIn?'yes':'no'),3]);if(loggedIn)_gaq.push(['_setCustomVar',3,'rta',''+SA.Data.User.rtaSymbolsCount(),3]);}
GA.event=function(){_gaq.push([].concat.apply(['_trackEvent'],arguments));}
GA.pv=function(){_gaq.push([].concat.apply(['_trackPageview'],arguments));}
GA.eventOnNextPage=function(){var events=[];try{events=SA.Data.Cache.Get('ga_events_queue').evalJSON();}catch(e){};events.push([].concat.apply([],arguments));SA.Data.Cache.Set('ga_events_queue',Object.toJSON(events));}
GA.initSASource=function(){window._pageviewURL=location.pathname+location.search;var sasource=SA.Utils.SASource.getSASource();if(sasource){if(!/[?&]source=/i.test(location.search)){window._pageviewURL+=(location.search?'&':'?')+'source='+escape(sasource);window._saSource=sasource;}}
if(!window._saSource)window._saSource=location.search.toQueryParams().source;if(!window._saSource){var r=/^#source=([^&]+)&?|&source=([^&]+)/,m=location.hash.match(r);if(m){window._saSource=m[1]||m[2];location.hash=location.hash.replace(r,'');}}
Event.observe(document,'click',function(e){var el=e.findElement("a[sasource]"),sasource=el?el.getAttribute('sasource'):null;if(sasource)SA.Data.Cookies.set('_sasource',sasource,0.0007);});}
function init(){_gaq=[['_setAccount',prhost?"UA-1466493-1":"UA-1466493-4"]];pageTracker={_trackPageview:GA.pv,_trackEvent:GA.event};urchinTracker=function(event){if(!event)return;var parts=event.split('/');if(parts[0]=='event'){var lastPart=parts[parts.length-1].split('?');if(lastPart.length>1){GA.event("old events",parts.slice(1,-1).join('/')+'/'+lastPart[0],lastPart[1]);}else GA.event("old events",parts.slice(1,-1).join('/'),lastPart[0]);}else GA.event("old events","invalid events",event);};trackLink=function(link,category,action,label){if(link&&!link.target&&link.href&&(/^\/|seekingalpha\.com/i).test(link.href))GA.eventOnNextPage(category,action,label);else GA.event(category,action,label);}
try{initCustomVars();}catch(e){}
if(!prhost||prhost[1]!='m'){GA.initSASource();GA.pv(window._pageviewURL);}
runNextPageEvents();}
init();loadAsyncGA();})();function ajax_submit_stock_talk(btn,tag_condition_to_display,suffix,deduct_chars,must_have){var deduct_chars=deduct_chars||0;var must_have=must_have||'';var obj=$('stock_talk_form'+(suffix||''));var oTextarea=$('stock_talk_textarea'+(suffix||''));var subject_id=typeof(oTextarea.getAttribute("subject_id"))!="undefined"?oTextarea.getAttribute("subject_id"):false;var st_full_section=oTextarea.getAttribute("st_full_section");var oError=($('stocktalk_form_alert_add_stocktalk'+(suffix||''))||$('stocktalk_form_alert_add_stocktalk'));var oNick=($('input_nick'+(suffix||''))||$('input_nick'));var isSymbol=true;btn.blur();charCounter(oTextarea,suffix,deduct_chars);if(oTextarea.value.trim()==''||!is_users_cookie_exists()||oTextarea.value.trim()==oTextarea.title){return false;}
if(GetCountIgnoreLinks(oTextarea.value)>140){oError.innerHTML='You can write up to 140 characters';oError.style.display='';return false;}
if(must_have.length&&!new RegExp('(\\(|\\[| |^|\\,|\\.|\\\n)'+("$"+must_have).toRx().toUpperCase()+'([^a-zA-Z0-9]|$)').test(oTextarea.value)){if(oError){oError.innerHTML='You must include "$'+must_have+'"';oError.style.display='';oError.style.color='red';}
if(oTextarea.getAttribute('keypressobserving')==null){oTextarea.observe('keypress',function(){this.style.display='none';}.bind(oError));oTextarea.setAttribute('keypressobserving',true);}
return false;}
if(oNick){adam=oError;if(!oNick.value.trim().length||oNick.value.trim()=='Please choose username'){oError.innerHTML='Please enter a Username.';oError.style.display='';oNick.focus();return false;}
if(oNick.value.length&&!validate_password(oNick.id,'stocktalk_form_alert_add_stocktalk'+(suffix||""),'Please enter a longer username.',2,80))return false;}
var form_parameter=Form.serialize(obj)
if(oNick&&(!(/(?:^|&)nick=/).test(form_parameter))){form_parameter+="&nick="+oNick.value;}
if($('articles_st')){form_parameter+="&stocktalk_filter="+filter_stocktalk();}
if(tag_condition_to_display){form_parameter+="&tag_condition="+tag_condition_to_display;}
if(subject_id)form_parameter+="&subject_id="+subject_id.gsub("new","");if(st_full_section)form_parameter+="&st_full_section=true";var suff=suffix?suffix.gsub("new",""):"";new Ajax.Request('/stock_talk/ajax_new_stock_talk',{asynchronous:true,evalScripts:true,parameters:form_parameter+'&suffix='+suff,onLoading:function(transport){btn.disabled=true;},onComplete:function(transport){if(transport.status==200&&transport.responseText.indexOf('<li')>-1){window.share_callback=function(){if(oError)oError.style.display='none';if(oNick){if($('my_details_info')){new Insertion.Top($('my_details_info'),'<strong><a href="'+st_profile_url()+'" class="name">'+oNick.value+'</a></strong>');}
oChooseNameRow=($('choose_username_row'+(suffix||''))||$('choose_username_row'))
oChooseNameRow.remove();oError.innerHTML='';oError.style.display='';SA.Navigation.Top.reset();}
oTextarea.value='';oTextarea.focus();$('char_counter'+(suffix||'')).innerHTML=(140-deduct_chars)+' characters left';if(transport.responseText!='<li>'){if(subject_id){SA.Models.StockTalkModel.addNew(subject_id,transport.responseText)}
else{new Insertion.Top($('stocktalk_list'+(suffix||'')),transport.responseText);if($('stocktalks_st')){$('stocktalks_st').checked=true;}
if($('my_empty_stocktalks'+(suffix||''))){$('my_empty_stocktalks'+(suffix||'')).remove();}
socialSA.init();}
SA.Models.StockTalkModel.initSt();SA.Models.StockTalkModel.realTime.collect();SA.Models.StockTalkModel.addScrollerToPopup("newStock");}}
pageTracker._trackEvent('Publish StockTalk',location.pathname);Mone.touch("stocktalk_sent");socialSA.share_post_object('stocktalk'+(suffix||''));}else if(transport.responseText=='moderated'){AlphaBox.Loading();AlphaBox.AddHtml(["<div class='thankYou_msg'>","<div class='msg'>Your StockTalk is being reviewed by our moderator and will be posted shortly.<br/>Thank you for your patience.</div>","<input type='button' onclick='AlphaBox.Close();' value='OK' class='btn'>","</div>"].join(""));var obj=$('stock_talk_textarea');if(obj)obj.value='';}else if(transport.responseText=='blocked_user'){var obj=$('stock_talk_textarea');if(obj)obj.value='';}else if(transport.responseText=='st_not_exists'){alert("Sorry, this StockTalk was deleted.");}else if(transport.responseText=='failed'){alert("An error has occurred.");}else{oError.style.display='';}
btn.disabled=false;}});return false;}
function st_profile_url(){if(readCookie('author_slug')==null||readCookie('author_slug')=='')return'/user/'+readCookie('user_id')+'/profile';else'/author/'+readCookie('author_slug');}
function get_stock_talks_page(filter){filter_page=filter;if(filter_page=="all_stocktalks")
top.location.href="/pages/stocktalks"
else
top.location.href="/account/my_feed?filter="+filter_page;}
function imposeMaxLength(Object,MaxLen){if(Object.value.length>MaxLen){Object.value=Object.value.substring(0,MaxLen);}}
function charCounter(Object,Sffix,deduct_chars){var deduct_chars=deduct_chars||0;var char_counter=140-deduct_chars-GetCountIgnoreLinks(Object.value);var oError=$('char_counter'+(Sffix||''));var oSubmit=$('stocktalk_submit_button'+(Sffix||''));if(char_counter<0){oError.innerHTML='<span>'+char_counter+' characters</span>';oSubmit.disabled=true;oSubmit.style.backgroundPosition="0px -53px";oSubmit.style.color='#959595';oSubmit.style.cursor='default';}else{oError.innerHTML=char_counter+' characters left';oSubmit.disabled=false;oSubmit.style.backgroundPosition="0 0";oSubmit.style.color='#090909';oSubmit.style.cursor='pointer';}}
function GetCountIgnoreLinks(Msg){var tiny_url_len=30,parsed_msg=Msg.replace(/\b(https?\:\/\/|\bwww\.)(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function($){return new Array(Math.min($.length,tiny_url_len)+1).join("0");});return parsed_msg.length;}
function change_bg(id){if($('deletespan_'+id)){$('deletespan_'+id).style.textDecoration="underline";$('deletespan_'+id).style.backgroundPosition="38px -17px";}}
function change_bg_out(id){if($('deletespan_'+id)){$('deletespan_'+id).style.textDecoration="none";$('deletespan_'+id).style.backgroundPosition="38px 3px";}}
function delete_stock_talk(btn,st_id,isSingle){new Ajax.Request('/stock_talk/delete_my_stock_talks',{asynchronous:true,evalScripts:true,parameters:"st_id="+st_id,onLoading:function(transport){},onComplete:function(transport){if(200==transport.status){if(transport.responseText!='failed'){if(isSingle)top.location.href=top.location.href.replace(/\/\d+?$/,'');var temp=$$("[st_section_id="+st_id+"]");if(temp.length>0){temp[0].remove();}
else{var el=$('li_'+st_id)
if(el)SA.Models.StockTalkModel.removeReply(el);}
$('stocktalk_count_menu').innerHTML=transport.responseText;$('stocktalk_count_archive').innerHTML=transport.responseText;}else{alert("You can only delete your own StockTalks.");}}}});}
function filter_stocktalk(){if($('articles_st')){var articles=$('articles_st').checked;var comments=$('comments_st').checked;var instablogs=$('instablogs_st').checked;var stocktalks=$('stocktalks_st').checked;var filter_result=[];if(articles||comments||instablogs||stocktalks){if(articles)filter_result.push('articles');if(comments)filter_result.push('comments');if(instablogs)filter_result.push('instablogs');if(stocktalks)filter_result.push('stocktalks');return filter_result.join("_")}else{return'do_nothing'}}else{return'articles_comments_instablogs_stocktalks';}}
function WriteStockTalkOn(slug){if(is_users_cookie_exists()){var user_id=readCookie('user_id');top.location.href='/user/'+user_id+'/stocktalk'}
else{Authentication.Authenticate(slug,"stocktalk",{Login:"WriteStockTalkOn.Login",Register:"Follow.Register",ForgotPassword:"Follow.ForgotPassword"},{Login:"publish StockTalks",Close:""});}}
WriteStockTalkOn.Login=function(slug){var user_id=readCookie('user_id');top.location.href='/user/'+user_id+'/stocktalk'}
function delete_post(post_id,isSingle){if(!confirm('Are you sure you want to delete this post?'))return false;obj=$('post_'+post_id)
if(obj.getAttribute('inProccess')==null){obj.setAttribute('inProccess',true);new Ajax.Request('/account/delete_instapost',{asynchronous:true,evalScripts:true,parameters:"post_id="+post_id,onComplete:function(transport){if(200==transport.status){if(transport.responseText=='failed'){alert('An error has occoured. Please try again.')
obj.removeAttribute('inProccess');}else{if(isSingle){if(readCookie('author_slug')==null||readCookie('author_slug')=='')top.location.href='/user/'+readCookie('user_id')+'/instablog';else top.location.href='/author/'+readCookie('author_slug')+'/instablog';}
obj.remove();if($('instablog_count_menu'))$('instablog_count_menu').innerHTML=transport.responseText;}}else{alert("An error has occurred.");obj.removeAttribute('inProccess');}}});}}
function WritePostOn(slug){if(SA.Data.User.loggedIn()){SA.Stats.GA.eventOnNextPage('Publishing Sources','Write a post on '+slug,location.pathname);top.location.href=(slug?'/account/write_post?publish_type=instablog&on_symbol='+slug:'/account/write_post?publish_type=instablog');}else{SA.Stats.GA.event('Publishing Sources','Write a post on '+slug+' (logged out)',location.pathname);Authentication.Authenticate(slug,"write_post",{Login:"WritePostOn.Login",Register:"Follow.Register",ForgotPassword:"Follow.ForgotPassword"},{Login:"set up an Instablog",Close:""});}}
WritePostOn.Login=function(slug){set_login_and_registration_header();if(slug)top.location.href='/account/write_post_new?on_symbol='+slug;else top.location.href='/account/write_post_new';}
function generateUUID(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});}
function moneTracker(str){if(getDomain()=="seekingalpha.com"){random_suffix=Math.round(Math.random()*2147483647);img=document.createElement('img');img.src='http://mone.seekingalpha.com/'+escape(str)+'?rs='+random_suffix}}
function email_story_to_friends_log(type,popup_scenario,item_id,recipients){var log_line=''
if(type=='MarketCurrent'){log_line="event/market_current/email_market_current_to_friends/"+popup_scenario+"?market_current_id="+item_id;}else if(type=='InstablogPost'){log_line="event/instablog_post/email_post_to_friends/"+popup_scenario+"?post_id="+item_id;}else if(type=='StockTalk'){log_line="event/stocktalk/email_stocktalk_to_friends/"+popup_scenario+"?stocktalk_id="+item_id;}else if(type=='AcquireStory'){log_line="event/acquire_story/email_acquire_story_to_friends/"+popup_scenario+"?acquire_story_id="+item_id;}else{log_line="event/"+article_page_kind()+"/email_article_to_friends/"+popup_scenario+"?article_id="+item_id;}
if(recipients){log_line+="&number_of_recipients="+recipients}
moneTracker(log_line);urchinTracker(log_line);}
function advert_box_sign_up_log(advert_box_kind){var log_line=''
log_line="event/"+advert_box_kind+"/"+article_page_kind()+"/sign_up"
return log_line;}
var Mone={VERSION:2,KEY:null,Types:{REGULAR:'regular',MOBILE:'mobile',IPHONE:'iphone'},other:"",sources:{"msn":["messages.finance.yahoo.com"],"yahoo":["messages.finance.yahoo.com"],"nasdaq":["www.wallstreet-online.de"],"motleyfool":["messages.finance.yahoo.com","boards.fool.com"],"etrade":["messages.finance.yahoo.com"],"reuters":[],"cnbc":[],"thestreet":["stockpickr.com"],"bloomberg":[],"themarkets":[],"intbrokers_pro":[],"marketwatch":[]},sourceDomains:["google.com","yahoo.com","bing.com","aol.com","msn.com","ask.com","ask.com","baidu.com"],noSourceDomains:["news.google.com","google.com/finance"],readUserCookie:function(){if(typeof(user_cookie)=="undefined")return"";var uCookie=[];uCookie.push('{'+(user_cookie.user_watchlist_slugs||"")+'}');uCookie.push('{'+(user_cookie.user_non_watchlist_slugs||"")+'}');uCookie.push('{'+(user_cookie.user_watchlist_authors||"")+'}');uCookie.push('{'+(user_cookie.user_following_users||"")+'}');return uCookie.join(";;;");},notWanted:/(^__)|(user_cookie_key=)|(user_perm=)|(machine_cookie=)|(session_cookie=)|(user_remember_token=)|(user_id=)|(user_nick=)|(user_email=)|(u_voc=)|(author_slug=)|(user_mywebsite_url=)|(gigya_notified_login=)|(user_gigya_settings=)|(gigya_post_object=)|(last_comment_date=)|(last_comment=)|(mc_ids=)|(session_referrer=)|(portfolio_popuped=)|(login_popuped=)|(user_notifications=)|(author_slug)|(first_page=)/,readOtherCookies:function(){var ca=document.cookie.split(/\s*;\s*/);rcookies=[]
try{if(SA.Data.User.loggedIn())rcookies.push("rsc="+SA.Data.User.rtaSymbolsCount());}catch(e){}
if((typeof(ARTICLE_PRO_LOCK)!='undefined')){if(ARTICLE_PRO_LOCK=="locked")rcookies.push("proembargo=1");if(ARTICLE_PRO_LOCK=="archived")rcookies.push("proarchived=1");}
rcookies.push("pro_status="+((typeof(user_cookie)=="undefined")?0:(user_cookie.user_pro_status||0)));for(var i=0;i<ca.length;i++){var c=ca[i];if(!/\n|;;;/.test(unescape(c))&&!Mone.notWanted.test(c))rcookies.push(c);}
rcookies=rcookies.join("; ");return unescape(rcookies);},readDocumentCookies:function(){var cookies=[];cookies.push(readCookie('user_id'));cookies.push(readCookie('user_nick'));cookies.push(readCookie('user_email'));cookies.push(readCookie('u_voc'));cookies.push(readCookie('author_slug'));cookies.push(readCookie('user_mywebsite_url'));cookies.push(readCookie('gigya_notified_login'));cookies.push(readCookie('user_gigya_settings'));return cookies.join(";;;");},quickURLHash:function(url,bytes){bytes=bytes||2;var res=0,hashIndex=url.indexOf('#');if(hashIndex!=-1)url=url.substr(0,hashIndex);for(var i=0;i<url.length;i++)res^=url.charCodeAt(i)<<((i%bytes)*8);return res;},generateKey:function(){Mone.KEY=(Math.floor(new Date().getTime()/1000)*1000+Math.floor(Math.random()*1000)).toString(36);return Mone.KEY;},touch:function(opt){if(typeof(opt)=='string'){var mobileEvent=opt.match(/^mobile: ([^#]+)(?:#(.*))/);if(mobileEvent){if(mobileEvent[1])return Mone.event(mobileEvent[1]);opt={url:'/'+mobileEvent[2],type:Mone.Types.MOBILE};}else return Mone.event(opt);}
opt=opt||{};var sData=[];var tagData;var url=opt.url||window._pageviewURL,location_path,href_params
if(url)url=url.match(/^(?:https?\/\/[^\/?#]+)?(\/[^?#]*)(\?[^#]*)?/);if(url){location_path=url[1];href_params=url[2]||'';}else{location_path=location.pathname;href_params=location.search;}
if(opt.params)href_params+=(href_params?'&':'?')+opt.params;var saSource=window._saSource||(window.getURLParam&&getURLParam("source"));var prevMoneKeys={},prevPageKey=null;if(opt.ajaxPage)prevPageKey=Mone.KEY;if(!Mone.KEY||opt.ajaxPage)Mone.generateKey();if(!cookieExists('machine_cookie')){var user_value=Math.round((new Date).getTime()+Math.random()*1000000003366);createCookie('machine_cookie',user_value,2000);}
if(!cookieExists('session_cookie')||!isNaN(readCookie("session_cookie"))){GUID=generateUUID();createCookie('session_cookie',GUID+".0",1/48);createCookie('session_referrer',top.document.referrer,1/48);}else{var ref_cook=readCookie('session_referrer');var cook=readCookie('session_cookie');cook=cook.split(".");cook[1]=parseInt(cook[1])+1+'';createCookie('session_cookie',cook.join("."),1/48);createCookie('session_referrer',ref_cook,1/48);if(!prevPageKey&&document.referrer){try{prevMoneKeys=SA.Data.Cache.Get('mone_keys').evalJSON();}catch(e){}
var referrerHash=Mone.quickURLHash(document.referrer);prevPageKey=prevMoneKeys[referrerHash];if(prevPageKey)delete prevMoneKeys[referrerHash];}}
prevMoneKeys[Mone.quickURLHash(location.href)]=Mone.KEY;try{SA.Data.Cache.Set('mone_keys',Object.toJSON(prevMoneKeys));}catch(e){}
if(!cookieExists('pages_viewed')){createCookie('pages_viewed',1,2000);}else{var views=readCookie('pages_viewed');views=parseInt(views)+1;createCookie('pages_viewed',views,2000)}
if(cookieExists('ref_partner')&&readCookie("ref_partner")!="other")
{createCookie('n_ref_partner',readCookie("ref_partner"),30);}
eraseCookie('ref_partner');if(saSource&&Mone.sources[saSource.toLowerCase().match(/^[a-z]+/)[0]]&&!cookieExists('n_ref_partner')){var denied_url=false;Mone.sources[saSource.toLowerCase().match(/^[a-z]+/)[0]].each(function(den_url){if(document.referrer.toLowerCase().match(new RegExp("^https?:\/\/"+den_url,"i")))denied_url=true;});if(!denied_url)createCookie('n_ref_partner',saSource.toLowerCase().match(/^[a-z]+/)[0],30);else createCookie('n_ref_partner',"other",30);}else if(cookieExists('n_ref_partner')){createCookie('n_ref_partner',readCookie("n_ref_partner"),30);}
else{var rgxp=new RegExp("("+Mone.sourceDomains.join("|").replace(/\./g,"\\.")+")");var noSourcergxp=new RegExp("("+Mone.noSourceDomains.join("|").replace(/\./g,"\\.").replace("/","\\/")+")");var matched=document.referrer.toLowerCase().match(noSourcergxp);if(matched)createCookie('n_ref_partner',"google.com",30);else if((matched=document.referrer.toLowerCase().match(rgxp)))createCookie('n_ref_partner',"search|"+matched[0],30);else if(document.referrer=="")createCookie('n_ref_partner',"direct",30);else createCookie('n_ref_partner',"other",30);}
if(location_path.match("/article/")&&(typeof(mone_article_tags)!='undefined')){tagData=mone_article_tags;}else if(location_path.match(/\/instablog\/\d+/)&&(typeof(mone_instapost_tags)!='undefined')){tagData=mone_instapost_tags;}
sData.push(Mone.VERSION);sData.push(opt.type||(SA.Utils.Env.isMobile?Mone.Types.MOBILE:Mone.Types.REGULAR));sData.push(Mone.KEY);sData.push(prevPageKey);sData.push(top.document.referrer);sData.push(location_path);sData.push(href_params);sData.push(readCookie('machine_cookie'));sData.push(readCookie('session_cookie'));sData.push(Mone.readDocumentCookies());sData.push(Mone.readUserCookie());sData.push(tagData);sData.push(Mone.readOtherCookies());return Mone.moneTrackerPost(sData.join(";;;"));},event:function(type,source,action,opt){opt=opt||{};if(!action){if(!source){if(!type)return null;action=type;type=source='';}else{action=source;source=type;type='';}}
if(!Mone.KEY)Mone.generateKey();var params={version:Mone.VERSION,key:Mone.KEY,type:type,source:source,action:action};if(opt.data)params.data=Object.toJSON(opt.data);if(readCookie("logevents")){console.log(params);}
return new Ajax.Request('/mone_event',{asynchronous:true,parameters:params});},moneTrackerPost:function(str){return new Ajax.Request('/mone',{asynchronous:true,method:'post',postBody:"mone="+escape(str)});}};function reply(div_id){remove_yellow_note();var comment_id=div_id.replace("comment_","");$('parent_id').value=comment_id;switch_reply_publish('reply');$$('.with_form').each(function(item){item.className=item.className.replace(' with_form','');})
new Insertion.After($('reply_comment_form_'+comment_id),($('comment_form_wrapper')));var content=$('comment_form_txtar');setSelRange(content,0,0);}
function open_immediate_comment_box(){switch_reply_publish(status);remove_yellow_note();$$('.with_form').each(function(item){item.className=item.className.replace(' with_form','');})
new Insertion.Before($('talkback_list'),($('comment_form_wrapper')));$('comment_form_txtar').focus();}
function author_pick(objLink,type,id,action){if(!is_users_cookie_exists()){return false;}else{if(action=="sign"){$('aplink'+id).hide();$('unaplink'+id).show();SA.Pages.Article.addAuthorPick(id);}else if(action=="unsign"){$('aplink'+id).show();$('unaplink'+id).hide();if($('tab_authorpicks_container').className=="ap_tab ap_selected")$("comment_base_"+id).fade();SA.Pages.Article.removeAuthorPick(id);}
$('authorpicks_count').innerHTML=SA.Pages.Article.getAuthorPickIds().length;new Ajax.Request('/account/ajax_author_pick',{asynchronous:true,evalScripts:true,parameters:'type='+type+'&id='+id+'&act='+action,onLoading:function(transport){},onComplete:function(transport){if(200!=transport.status){alert("An error has occoured.");}}});return false;}}
function delete_instablog_comment(id){if(!is_users_cookie_exists()){return false;}else{new Ajax.Request('/account/ajax_delete_instablog_comment',{parameters:'id='+id,onLoading:function(transport){},onComplete:function(transport){if(200==transport.status){location.reload();}else{AlphaBox.Close();}}});$('delete_comment_bttn').onclick="";return false;}}
function delete_comment_pop(id){var boxHtml='<div class="del_comment_lightbox">';boxHtml+='  <div onclick="AlphaBox.Close();" class="close_button_gray_pop"></div>';boxHtml+='  <div class="dcl_t">Are you sure you want to delete this comment<br/>and any replies to it?</div>';boxHtml+='  <div class="dcl_btns">';boxHtml+='    <input type="button" id="delete_comment_bttn" class="grad orange" value="Delete" onclick="delete_instablog_comment('+id+');"/>';boxHtml+='    <input type="button" class="grad" value="Cancel" onclick="AlphaBox.Close();" />';boxHtml+='    <div class="cleaner"></div>';boxHtml+='  </div>';boxHtml+='</div>';AlphaBox.Loading();AlphaBox.AddHtml(boxHtml);}
var show_abuse_link=1;var commenter_abuse_html_article="<span class=\"report_abuse\" onmouseover=this.style.textDecoration=\"underline\" onmouseout=this.style.textDecoration=\"none\" onclick=\"SA.Models.Reports.send(this, 'Comment', COMMENT_ID);\"><span>!&nbsp;</span>Report Abuse</span>";function writeReportAbuseArticle(id){if(is_users_cookie_exists()&&show_abuse_link){$("commenter_abuse_"+id).innerHTML=commenter_abuse_html_article.gsub("COMMENT_ID",id);}}
var author_pick_button="<span class='separator'>&nbsp;&nbsp;|&nbsp;&nbsp;</span><span id=\"aplinkCOMMENT_ID\" class=\"author_pick\" onmouseover=this.style.textDecoration=\"underline\" onmouseout=this.style.textDecoration=\"none\" onclick=\"author_pick(this, 'Comment', COMMENT_ID, 'sign');\">Make Author's Pick</span><span class=\"unpick\" style=\"display:none\" id=\"unaplinkCOMMENT_ID\">Author's Pick (<span class=\"undopick\" onclick=\"author_pick(this, 'Comment', COMMENT_ID, 'unsign');\">undo</span>)</span>";function writeAuthorPickButton(id){if(is_users_cookie_exists()){$("author_pick_"+id).innerHTML=author_pick_button.gsub("COMMENT_ID",id);}}
function deleteCommentOnMyPost(id,author_id){var this_user=readCookie('user_id');if(this_user!=null&&this_user==author_id){$("comment_delete_"+id).innerHTML="<span class=\"del_comment\" onmouseover=this.style.textDecoration=\"underline\" onmouseout=this.style.textDecoration=\"none\" onclick=\"delete_comment_pop("+id+");\">Delete Comment</span>";show_abuse_link=0;}}
function write_report_abuse_all_in_one(){if(is_users_cookie_exists()){if(all_comments=$$("span.commenter_abuse")){all_comments.each(function(e){e.innerHTML=commenter_abuse_html_article.gsub("COMMENT_ID",e.id.sub("commenter_abuse_",""));});}}}
function write_author_picks_all_in_one(){if(is_users_cookie_exists()&&typeof(author_slug)!="undefined"&&readCookie('author_slug')===author_slug){if(all_comments=$$("span.author_pick")){all_comments.each(function(e){var id=e.id.sub("author_pick_","");e.innerHTML=author_pick_button.gsub("COMMENT_ID",id);if(contains(id,SA.Pages.Article.getAuthorPickIds())){$('aplink'+id).hide();$('unaplink'+id).show();}});}}}
function retab(){if(SA.Pages.Article.getAuthorPickIds().length==0)return;if($('tab_authorpicks_container').className=="ap_tab ap_selected"){comment_tab('comment_container');comment_tab('authorpicks_container');}
if($('tab_comment_container').className=="ap_tab ap_selected"){comment_tab('authorpicks_container');comment_tab('comment_container');}}
function build_authorpick_tab(){if(SA.Pages.Article.getAuthorPickIds().length==0)return;$('auhtorpick_tabs').show();$('general_comment_counter').hide();$('authorpicks_count').innerHTML=SA.Pages.Article.getAuthorPickIds().length;}
function comment_tab(tab){if($('tab_comment_container')&&$('tab_authorpicks_container')){cancel_comment();$('tab_comment_container').removeClassName("ap_selected");$('tab_authorpicks_container').removeClassName("ap_selected");if(tab=="authorpicks_container"){if(all_comments=$$(".base_level")){all_comments.each(function(e){var id=e.id.sub("comment_base_","");if(!contains(id,SA.Pages.Article.getAuthorPickIds())){$$('#'+e.id)[0].hide();}});}
$$('.base_level.nested').each(function(e){e.addClassName('unested')});$$('.base_level.nested').each(function(e){e.removeClassName('nested')});}else{if(all_comments=$$(".base_level")){all_comments.each(function(e){var id=e.id.sub("comment_base_","");$$('#'+e.id)[0].show();});}
$$('.base_level.unested').each(function(e){e.addClassName('nested')});$$('.base_level.unested').each(function(e){e.removeClassName('unested')});}
if(tab=="authorpicks_container"){authorpicksdata=SA.Pages.Article.getAuthorsPicksData();for(i=0;i<authorpicksdata.length;i++){comment_element=$('comment_base_'+authorpicksdata[i].id);if(!comment_element&&contains(authorpicksdata[i].id,SA.Pages.Article.getAuthorPickIds())){try{$$('.picksmore')[$$('.picksmore').length-1].innerHTML+=render_comment(authorpicksdata[i]);}catch(e){}}}
add_comment_actions();write_report_abuse_all_in_one();write_author_picks_all_in_one();}else{$$('.picksmore').each(function(o){o.innerHTML=""})}
$('tab_'+tab).addClassName("ap_selected");}}
function contains(a,b){__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};return __indexOf.call(b,a)>=0}
var rand_counter=0;function render_comment(comment){rand_counter++;var text='<li class="base_level" id="comment_base_'+comment.id+'" style="">';var user_class="";if(comment.commenter_url.match(/^\/author/)){user_class="author"}
text+='<div class="com_info '+user_class+'">';if(!comment.belong_to_sa_editor)text+='<a class="com_img" href="'+comment.commenter_url+comment.profile_add_to_url+'"><img src="'+comment.small_pictures+'" class="commenter_picture"></a>';text+='<div class="com_details">';text+='<div id="user_comments_counter_'+comment.user_id+'_'+(rand_counter+Math.round(Math.random(23)*100))+'">';if(comment.belong_to_sa_editor){text+='<span class="commenter_name" onmouseover="loadAjaxPopup('+comment.user_id+','+comment.id+')" onmouseout="CloseAjaxPopup('+comment.id+')" fullname="'+comment.fullname+'">'+comment.fullname+'</span>';}else{text+='<a class="commenter_name" onmouseover="loadAjaxPopup('+comment.user_id+','+comment.id+')" onmouseout="CloseAjaxPopup('+comment.id+')" href="'+comment.commenter_url+'/comments" fullname="'+comment.fullname+'">'+comment.fullname_dottized+'</a>';}
if(!comment.belong_to_sa_editor){text+='<a class="comments_num" href="'+comment.commenter_url+'">'+comment.nice+'</a>';text+='<span class="comment_open_popup_arrow" id="comment_open_popup_arrow_'+comment.id+'" style="display: none; "></span>';}
text+='</div></div>';text+='<a name="'+comment.html_anchor+'" id="'+comment.html_anchor+'">&nbsp;</a>';text+='<div class="commenter_data_popup" id="commenter_data_popup_'+comment.id+'" onmouseover="clearPopupTimeout()" onmouseout="CloseAjaxPopup('+comment.id+')" style="display:none">';text+='<div id="com_'+comment.id+'" class="content_from_ajax_'+comment.user_id+'" refilled="false">';text+='</div></div></div>';text+='<div class="com_cont" id="reply_comment_form_'+comment.id+'">';text+='<div id="comment_notice_'+comment.id+'" style="display:none;"></div>';var complement1=comment.comment_div_id?comment.comment_div_id:"comment_"+comment.id;text+='<span class="cont_com" id="content_of_'+complement1+'">';if(comment.authors_comment_flag)text+='<img class="authors_reply" src="http://static1.cdn-seekingalpha.com/images/article/authors_reply_on_comment.gif" />';text+='<span id="text_content_of_'+complement1+'">';text+=comment.wrapped_title;text+=comment.content;text+='</span></span></div>';text+='<input type="hidden" id="actions_data_'+comment.id+'" value="'+comment.utc+'|'+comment.comment_time+'|'+comment.uri+'|'+complement1+'" />';text+='</li>';return text;}
var Follow={}
Follow.user_sidebar__follow_button_initiator=function(user_id){$('follow_this_user').appendChild(Follow.add_the_right_follow_user_button(user_id,"follow","following"));}
Follow.author_sidebar__follow_button_initiator=function(slug){$('follow_this_user').appendChild(Follow.add_the_right_follow_author_button(slug,"follow","following"));}
Follow.author_on_top10_authors_page__follow_button_initiator=function(slug,container_id){container_id=container_id||'';$(slug.gsub("-","_")+'_follow'+container_id).appendChild(Follow.add_the_right_follow_author_button(slug,"follow","following_visited"));}
Follow.user_ff_page__follow_button_initiator=function(user_id){$(user_id+'_follow').appendChild(Follow.add_the_right_follow_user_button(user_id,"follow_small","following_visited"));}
Follow.author_ff_page__follow_button_initiator=function(slug){$(slug.gsub("-","_")+'_follow').appendChild(Follow.add_the_right_follow_author_button(slug,"follow_small","following_visited"));}
Follow.ff_page__remove_button_initiator=function(slug,type){$(slug.gsub("-","_")+'_remove').appendChild(Follow.remove_follow_from_account_button(type+'|'+slug));}
Follow.comment__follow_button_initiator=function(user_id,container_id){$('user_follow_'+container_id).appendChild(Follow.add_the_right_follow_user_button(user_id,"follow","following_icon"));}
Follow.author_on_top_authors_page__follow_button_initiator=function(slug,container_id){container_id=container_id||'';$(slug.gsub("-","_")+'_follow'+container_id).appendChild(Follow.add_the_right_follow_author_button(slug,"follow_small","following_visited"));}
Follow.user_on_top10_bloggers_page__follow_button_initiator=function(user_id,container_id){container_id=container_id||'';$(user_id+'_follow'+container_id).appendChild(Follow.add_the_right_follow_user_button(user_id,"follow","following_visited"));}
Follow.user_on_top_bloggers_page__follow_button_initiator=function(user_id,container_id){container_id=container_id||'';$(user_id+'_follow'+container_id).appendChild(Follow.add_the_right_follow_user_button(user_id,"follow_small","following_visited"));}
Follow.user_by_vocation_page__follow_button_initiator=function(user_id){$(user_id+'_follow').appendChild(Follow.add_the_right_follow_user_button(user_id,"follow_button","following_icon"));}
Follow.add_the_right_follow_author_button=function(slug,follow_class_name,following_class_name){if(readCookie('user_watchlist_authors')&&readCookie('user_watchlist_authors').split(",").indexOf(slug)!=-1){return Follow.already_follow_message(following_class_name);}else{return Follow.follow_this_author(slug,follow_class_name,following_class_name);}}
Follow.add_the_right_follow_user_button=function(user_id,follow_class_name,following_class_name){if(readCookie('user_following_users')&&readCookie('user_following_users').split(",").indexOf(user_id)!=-1){return Follow.already_follow_message(following_class_name);}else{return Follow.follow_this_user(user_id,follow_class_name,following_class_name);}}
Follow.remove_follow_from_account_button=function(TypeAndSlug){var remove_follow=document.createElement('div');remove_follow.innerHTML='<span onmouseover="$(this).addClassName(\'hover\')" onmouseout="$(this).removeClassName(\'hover\')" onclick="Follow.remove_follow_from_account_ajax(\''+TypeAndSlug+'\')">Stop Following</span>';return remove_follow;}
Follow.remove_follow_from_account_ajax=function(TypeAndSlug){if(!confirm('Are you sure you want to delete this user from your following list?'))return false;new Ajax.Request('/account/ajax_remove_my_following',{asynchronous:true,evalScripts:true,parameters:"type_and_info="+TypeAndSlug,onComplete:function(transport){if(200==transport.status){aRes=transport.responseText.split('|');aMe=TypeAndSlug.split("|")
if(aRes[0]=='failed'){alert('An error has occoured.');obj.removeAttribute('inProccess');}else{$(aMe[0]+'_'+aMe[1]).remove();Follow.change_ff_numbers_in_page(aRes[1],aMe[0],aMe[1]);Mone.touch("stop_follow_"+aMe[0]);obj.removeAttribute('inProccess');}}else{alert("An error has occurred.");obj.removeAttribute('inProccess');}}});}
Follow.already_follow_message=function(following_class_name){var already_follow_message=document.createElement('div');already_follow_message.innerHTML='<span class="'+following_class_name+'">Following</span>';if(following_class_name=="following"){already_follow_message.onclick=function(){clearTimeout(gTimeout);$('stop_follow').show();$('stop_follow_message').innerHTML="You are currently following";$('no_longer_follow').style.display='none';}}
return already_follow_message;}
Follow.follow_all_by_user_id=function(obj,user_id,following_class_name){arr=document.getElementsByClassName('user_follow_'+user_id);if(arr.length==0){$(obj.parentNode).insertBefore(Follow.already_follow_message(following_class_name),obj.nextSibling);$(obj).remove();}else{arr.each(function(obj){obj.innerHTML='';obj.appendChild(Follow.already_follow_message(following_class_name));});}}
Follow.follow_this_author=function(slug,follow_class_name,following_class_name){var follow_this_author_button=document.createElement('span');follow_this_author_button.id=slug.gsub("-","_")+'_watchlist_button';follow_this_author_button.className=follow_class_name;follow_this_author_button.innerHTML="Follow";follow_this_author_button.onclick=function(){Follow.follow_this_author_onclick(this,following_class_name);}
follow_this_author_button.setAttribute('slug',slug);return follow_this_author_button;}
Follow.follow_this_user=function(user_id,follow_class_name,following_class_name){var follow_this_user_button=document.createElement('span');follow_this_user_button.id=user_id+'_watchlist_button';follow_this_user_button.className=follow_class_name;follow_this_user_button.innerHTML='Follow';follow_this_user_button.onclick=function(){Follow.follow_this_user_onclick(this,following_class_name);}
follow_this_user_button.setAttribute('user_id',user_id);return follow_this_user_button;}
Follow.follow_this_author_onclick=function(obj,following_class_name){if($('no_longer_follow')){$('no_longer_follow').style.display='none';}
if(obj.getAttribute('inProccess')==null){obj.setAttribute('inProccess',true);if(is_users_cookie_exists()){Follow.ajax_logged_in_follow_new_author(obj,following_class_name);}else{Authentication.Authenticate('slug|'+obj.getAttribute('slug'),"follow_me",{Login:"Follow.Login",Register:"Follow.Register",ForgotPassword:"Follow.ForgotPassword"},{Login:"follow others",Close:""});obj.removeAttribute('inProccess');}}}
Follow.follow_this_user_onclick=function(obj,following_class_name){if($('no_longer_follow')){$('no_longer_follow').style.display='none';}
if(obj.getAttribute('inProccess')==null){obj.setAttribute('inProccess',true);if(is_users_cookie_exists()){Follow.ajax_logged_in_follow_new_user(obj,following_class_name);}else{Authentication.Authenticate('user_id|'+obj.getAttribute('user_id'),"follow_me",{Login:"Follow.Login",Register:"Follow.Register",ForgotPassword:"Follow.ForgotPassword"},{Login:"follow others",Close:""});obj.removeAttribute('inProccess');}}}
Follow.ajax_logged_in_follow_new_author=function(obj,following_class_name){var slug=obj.getAttribute('slug');new Ajax.Request('/account/ajax_logged_in_follow_new_user',{asynchronous:true,evalScripts:true,parameters:"slug="+slug+"&account_followers_page="+/\/account\/followers/.test(top.location.href),onComplete:function(transport){if(200==transport.status){aRes=transport.responseText.split('|');if(aRes[0]=='failed'){alert('An error has occoured.');obj.removeAttribute('inProccess');}else{addToCookie('user_watchlist_authors',slug);$(obj.parentNode).insertBefore(Follow.already_follow_message(following_class_name),obj.nextSibling);$(obj).remove();Follow.change_ff_numbers_in_page(aRes[1],'author',slug);obj.removeAttribute('inProccess');Mone.touch("follow_author");}}else{alert("An error has occurred.");obj.removeAttribute('inProccess');}}});}
Follow.ajax_logged_in_follow_new_user=function(obj,following_class_name){var user_id=obj.getAttribute('user_id');new Ajax.Request('/account/ajax_logged_in_follow_new_user',{asynchronous:true,evalScripts:true,parameters:"user_id="+user_id+"&account_followers_page="+/\/account\/followers/.test(top.location.href),onComplete:function(transport){aRes=transport.responseText.split('|');if(200==transport.status){if(aRes[0]=='failed'){alert('An error has occoured.');obj.removeAttribute('inProccess');}else{addToCookie('user_following_users',user_id);Follow.follow_all_by_user_id(obj,user_id,following_class_name);Follow.change_ff_numbers_in_page(aRes[1],'user',user_id);obj.removeAttribute('inProccess');Mone.touch("follow_user");}}else{alert("An error has occurred.");obj.removeAttribute('inProccess');}}});}
Follow.ajax_stop_follow_this_user=function(obj,follow_user_id){if(obj.getAttribute('inProccess')==null){obj.setAttribute('inProccess',true);new Ajax.Request('/account/ajax_stop_follow_this_user',{asynchronous:true,evalScripts:true,parameters:"follow_user_id="+follow_user_id,onComplete:function(transport){if(200==transport.status){aRes=transport.responseText.split('|');if(aRes[0]=='failed'){alert('An error has occoured.');obj.removeAttribute('inProccess');}else{$('follow_this_user').innerHTML="";$('follow_this_user').appendChild(Follow.follow_this_user(follow_user_id,"follow","following"));Follow.display_no_longer_follow_message();Follow.change_ff_numbers_in_page(aRes[1],'user',follow_user_id);obj.removeAttribute('inProccess');Mone.touch("stop_follow_user");}}else{alert("An error has occurred.");obj.removeAttribute('inProccess');}}});}}
Follow.ajax_stop_follow_this_author=function(obj,author_slug){if(obj.getAttribute('inProccess')==null){obj.setAttribute('inProccess',true);new Ajax.Request('/account/ajax_stop_follow_this_author',{asynchronous:true,evalScripts:true,parameters:"author_slug="+author_slug,onComplete:function(transport){if(200==transport.status){aRes=transport.responseText.split('|');if(aRes[0]=='failed'){alert('An error has occoured.');obj.removeAttribute('inProccess');}else{$('follow_this_user').innerHTML="";$('follow_this_user').appendChild(Follow.follow_this_author(author_slug,"follow","following"));Follow.display_no_longer_follow_message();obj.removeAttribute('inProccess');Follow.change_ff_numbers_in_page(aRes[1],'author',author_slug);Mone.touch("stop_follow_author");}}else{alert("An error has occurred.");obj.removeAttribute('inProccess');}}});}}
Follow.change_ff_numbers_in_page=function(ff_numbers,type,id){var ff_numbers=ff_numbers.split(",");reg=new RegExp(type+"\\/(.*?)(\\/|\\?|$)");reg.test(top.location.href)
if((RegExp.$1==id)||(/account/.test(top.location.href))){$$('.followers_number').each(function(obj){obj.innerHTML=SeparatorNumber(ff_numbers[0])});$$('.following_number').each(function(obj){obj.innerHTML=SeparatorNumber(ff_numbers[1])});}
if($('follow_numbers_top_'+id))$('follow_numbers_top_'+id).innerHTML=SeparatorNumber(ff_numbers[0]);if($('follow_numbers_fastest_climbers_'+id))$('follow_numbers_fastest_climbers_'+id).innerHTML=($('follow_numbers_fastest_climbers_'+id).innerHTML*1)+1;if($('follow_numbers_symbol_'+id))$('follow_numbers_symbol_'+id).innerHTML='('+SeparatorNumber(ff_numbers[0])+' follower'+(ff_numbers[0]>1?'s':'')+')';if($$('.followers_number_'+id)){$$('.followers_number_'+id).each(function(obj){obj.innerHTML=SeparatorNumber(ff_numbers[0])});$$('.following_number_'+id).each(function(obj){obj.innerHTML=SeparatorNumber(ff_numbers[1])});}}
Follow.stop_follow_mouseover=function(obj){obj.style.display='block';clearTimeout(gTimeout);}
Follow.stop_follow_mouseout=function(){gTimeout=setTimeout(function(){$('stop_follow').style.display='none';},400);}
Follow.display_no_longer_follow_message=function(){$('stop_follow').style.display="none";$('no_longer_follow').show();$('no_longer_message').innerHTML="You are no longer following";}
Follow.ForgotPassword=function(){var aHtml=[];aHtml.push("<div class='forgot_password_follow' id='readlater_register_login'>");aHtml.push("<div class='email_sent'><h4>Email sent!</h4><div>We've sent instructions on how to reset your password to your email inbox.<br/>If you can't find it, please check your spam filter.</div></div>");aHtml.push("<div class='close_quickread_stretchable' onclick='AlphaBox.Close();'><span class='close_left'></span><span class='close_text'>Close</span><span class='close_right'></span></div>");aHtml.push("</div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};}
Follow.Register=function(){var aHtml=[];aHtml.push("<div id='readlater_register_login' class='customize_pop_bordeaux mail_sent'>");aHtml.push("<h3>Please confirm your registration by clicking the link in the email we've sent to "+registered_mail+".</h3>");aHtml.push("<div class='cant_see_note'>(If you can't see it, please check your junk mail folder)</div>");aHtml.push("</div>");aHtml.push("<div class='cleaner'></div>");aHtml.push("<div class='close_pop_bordeaux' onclick='AlphaBox.Close();'></div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};}
Follow.RegisterBox=function(){var aHtml=[];aHtml.push("<div id='readlater_register_login' class='customize_pop_bordeaux mail_sent'>");aHtml.push("<h3>Please confirm your registration by clicking the link in the email we've sent to "+registered_mail+".</h3>");aHtml.push("<div class='cant_see_note'>(If you can't see it, please check your junk mail folder)</div>");aHtml.push("</div>");aHtml.push("<div class='cleaner'></div>");aHtml.push("<div class='close_pop_bordeaux' onclick='AlphaBox.Close();'></div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};$("register_box").innerHTML='';}
Follow.setFfToElements=function(e1,e2,uId){new Ajax.Request('/memcached/count_author_ff/'+uId,{method:'get',onSuccess:function(response){if(e1)e1.innerHTML=SeparatorNumber(response.responseText.split(",")[0]);if(e2)e2.innerHTML=SeparatorNumber(response.responseText.split(",")[1]);},onFailure:function(){}});}
Follow.Login=function(Id){window.location.href=window.location.href;};String.prototype.parseColor=function(){var color='#';if(this.slice(0,4)=='rgb('){var cols=this.slice(4,this.length-1).split(',');var i=0;do{color+=parseInt(cols[i]).toColorPart()}while(++i<3);}else{if(this.slice(0,1)=='#'){if(this.length==4)for(var i=1;i<4;i++)color+=(this.charAt(i)+this.charAt(i)).toLowerCase();if(this.length==7)color=this.toLowerCase();}}
return(color.length==7?color:(arguments[0]||this));};Element.collectTextNodes=function(element){return $A($(element).childNodes).collect(function(node){return(node.nodeType==3?node.nodeValue:(node.hasChildNodes()?Element.collectTextNodes(node):''));}).flatten().join('');};Element.collectTextNodesIgnoreClass=function(element,className){return $A($(element).childNodes).collect(function(node){return(node.nodeType==3?node.nodeValue:((node.hasChildNodes()&&!Element.hasClassName(node,className))?Element.collectTextNodesIgnoreClass(node,className):''));}).flatten().join('');};Element.setContentZoom=function(element,percent){element=$(element);element.setStyle({fontSize:(percent/100)+'em'});if(Prototype.Browser.WebKit)window.scrollBy(0,0);return element;};Element.getInlineOpacity=function(element){return $(element).style.opacity||'';};Element.forceRerendering=function(element){try{element=$(element);var n=document.createTextNode(' ');element.appendChild(n);element.removeChild(n);}catch(e){}};var Effect={_elementDoesNotExistError:{name:'ElementDoesNotExistError',message:'The specified DOM element does not exist, but is required for this effect to operate'},Transitions:{linear:Prototype.K,sinoidal:function(pos){return(-Math.cos(pos*Math.PI)/2)+.5;},reverse:function(pos){return 1-pos;},flicker:function(pos){var pos=((-Math.cos(pos*Math.PI)/4)+.75)+Math.random()/4;return pos>1?1:pos;},wobble:function(pos){return(-Math.cos(pos*Math.PI*(9*pos))/2)+.5;},pulse:function(pos,pulses){return(-Math.cos((pos*((pulses||5)-.5)*2)*Math.PI)/2)+.5;},spring:function(pos){return 1-(Math.cos(pos*4.5*Math.PI)*Math.exp(-pos*6));},none:function(pos){return 0;},full:function(pos){return 1;}},DefaultOptions:{duration:1.0,fps:100,sync:false,from:0.0,to:1.0,delay:0.0,queue:'parallel'},tagifyText:function(element){var tagifyStyle='position:relative';if(Prototype.Browser.IE)tagifyStyle+=';zoom:1';element=$(element);$A(element.childNodes).each(function(child){if(child.nodeType==3){child.nodeValue.toArray().each(function(character){element.insertBefore(new Element('span',{style:tagifyStyle}).update(character==' '?String.fromCharCode(160):character),child);});Element.remove(child);}});},multiple:function(element,effect){var elements;if(((typeof element=='object')||Object.isFunction(element))&&(element.length))
elements=element;else
elements=$(element).childNodes;var options=Object.extend({speed:0.1,delay:0.0},arguments[2]||{});var masterDelay=options.delay;$A(elements).each(function(element,index){new effect(element,Object.extend(options,{delay:index*options.speed+masterDelay}));});},PAIRS:{'slide':['SlideDown','SlideUp'],'blind':['BlindDown','BlindUp'],'appear':['Appear','Fade']},toggle:function(element,effect,options){element=$(element);effect=(effect||'appear').toLowerCase();return Effect[Effect.PAIRS[effect][element.visible()?1:0]](element,Object.extend({queue:{position:'end',scope:(element.id||'global'),limit:1}},options||{}));}};Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null;},_each:function(iterator){this.effects._each(iterator);},add:function(effect){var timestamp=new Date().getTime();var position=Object.isString(effect.options.queue)?effect.options.queue:effect.options.queue.position;switch(position){case'front':this.effects.findAll(function(e){return e.state=='idle'}).each(function(e){e.startOn+=effect.finishOn;e.finishOn+=effect.finishOn;});break;case'with-last':timestamp=this.effects.pluck('startOn').max()||timestamp;break;case'end':timestamp=this.effects.pluck('finishOn').max()||timestamp;break;}
effect.startOn+=timestamp;effect.finishOn+=timestamp;if(!effect.options.queue.limit||(this.effects.length<effect.options.queue.limit))
this.effects.push(effect);if(!this.interval)
this.interval=setInterval(this.loop.bind(this),15);},remove:function(effect){this.effects=this.effects.reject(function(e){return e==effect});if(this.effects.length==0){clearInterval(this.interval);this.interval=null;}},loop:function(){var timePos=new Date().getTime();for(var i=0,len=this.effects.length;i<len;i++)
this.effects[i]&&this.effects[i].loop(timePos);}});Effect.Queues={instances:$H(),get:function(queueName){if(!Object.isString(queueName))return queueName;return this.instances.get(queueName)||this.instances.set(queueName,new Effect.ScopedQueue());}};Effect.Queue=Effect.Queues.get('global');Effect.Base=Class.create({position:null,start:function(options){if(options&&options.transition===false)options.transition=Effect.Transitions.linear;this.options=Object.extend(Object.extend({},Effect.DefaultOptions),options||{});this.currentFrame=0;this.state='idle';this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=(function(){function dispatch(effect,eventName){if(effect.options[eventName+'Internal'])
effect.options[eventName+'Internal'](effect);if(effect.options[eventName])
effect.options[eventName](effect);}
return function(pos){if(this.state==="idle"){this.state="running";dispatch(this,'beforeSetup');if(this.setup)this.setup();dispatch(this,'afterSetup');}
if(this.state==="running"){pos=(this.options.transition(pos)*this.fromToDelta)+this.options.from;this.position=pos;dispatch(this,'beforeUpdate');if(this.update)this.update(pos);dispatch(this,'afterUpdate');}};})();this.event('beforeStart');if(!this.options.sync)
Effect.Queues.get(Object.isString(this.options.queue)?'global':this.options.queue.scope).add(this);},loop:function(timePos){if(timePos>=this.startOn){if(timePos>=this.finishOn){this.render(1.0);this.cancel();this.event('beforeFinish');if(this.finish)this.finish();this.event('afterFinish');return;}
var pos=(timePos-this.startOn)/this.totalTime,frame=(pos*this.totalFrames).round();if(frame>this.currentFrame){this.render(pos);this.currentFrame=frame;}}},cancel:function(){if(!this.options.sync)
Effect.Queues.get(Object.isString(this.options.queue)?'global':this.options.queue.scope).remove(this);this.state='finished';},event:function(eventName){if(this.options[eventName+'Internal'])this.options[eventName+'Internal'](this);if(this.options[eventName])this.options[eventName](this);},inspect:function(){var data=$H();for(property in this)
if(!Object.isFunction(this[property]))data.set(property,this[property]);return'#<Effect:'+data.inspect()+',options:'+$H(this.options).inspect()+'>';}});Effect.Parallel=Class.create(Effect.Base,{initialize:function(effects){this.effects=effects||[];this.start(arguments[1]);},update:function(position){this.effects.invoke('render',position);},finish:function(position){this.effects.each(function(effect){effect.render(1.0);effect.cancel();effect.event('beforeFinish');if(effect.finish)effect.finish(position);effect.event('afterFinish');});}});Effect.Tween=Class.create(Effect.Base,{initialize:function(object,from,to){object=Object.isString(object)?$(object):object;var args=$A(arguments),method=args.last(),options=args.length==5?args[3]:null;this.method=Object.isFunction(method)?method.bind(object):Object.isFunction(object[method])?object[method].bind(object):function(value){object[method]=value};this.start(Object.extend({from:from,to:to},options||{}));},update:function(position){this.method(position);}});Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}));},update:Prototype.emptyFunction});Effect.Opacity=Class.create(Effect.Base,{initialize:function(element){this.element=$(element);if(!this.element)throw(Effect._elementDoesNotExistError);if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout))
this.element.setStyle({zoom:1});var options=Object.extend({from:this.element.getOpacity()||0.0,to:1.0},arguments[1]||{});this.start(options);},update:function(position){this.element.setOpacity(position);}});Effect.Move=Class.create(Effect.Base,{initialize:function(element){this.element=$(element);if(!this.element)throw(Effect._elementDoesNotExistError);var options=Object.extend({x:0,y:0,mode:'relative'},arguments[1]||{});this.start(options);},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle('left')||'0');this.originalTop=parseFloat(this.element.getStyle('top')||'0');if(this.options.mode=='absolute'){this.options.x=this.options.x-this.originalLeft;this.options.y=this.options.y-this.originalTop;}},update:function(position){this.element.setStyle({left:(this.options.x*position+this.originalLeft).round()+'px',top:(this.options.y*position+this.originalTop).round()+'px'});}});Effect.MoveBy=function(element,toTop,toLeft){return new Effect.Move(element,Object.extend({x:toLeft,y:toTop},arguments[3]||{}));};Effect.Scale=Class.create(Effect.Base,{initialize:function(element,percent){this.element=$(element);if(!this.element)throw(Effect._elementDoesNotExistError);var options=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:'box',scaleFrom:100.0,scaleTo:percent},arguments[2]||{});this.start(options);},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle('position');this.originalStyle={};['top','left','width','height','fontSize'].each(function(k){this.originalStyle[k]=this.element.style[k];}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var fontSize=this.element.getStyle('font-size')||'100%';['em','px','%','pt'].each(function(fontSizeType){if(fontSize.indexOf(fontSizeType)>0){this.fontSize=parseFloat(fontSize);this.fontSizeType=fontSizeType;}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=='box')
this.dims=[this.element.offsetHeight,this.element.offsetWidth];if(/^content/.test(this.options.scaleMode))
this.dims=[this.element.scrollHeight,this.element.scrollWidth];if(!this.dims)
this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth];},update:function(position){var currentScale=(this.options.scaleFrom/100.0)+(this.factor*position);if(this.options.scaleContent&&this.fontSize)
this.element.setStyle({fontSize:this.fontSize*currentScale+this.fontSizeType});this.setDimensions(this.dims[0]*currentScale,this.dims[1]*currentScale);},finish:function(position){if(this.restoreAfterFinish)this.element.setStyle(this.originalStyle);},setDimensions:function(height,width){var d={};if(this.options.scaleX)d.width=width.round()+'px';if(this.options.scaleY)d.height=height.round()+'px';if(this.options.scaleFromCenter){var topd=(height-this.dims[0])/2;var leftd=(width-this.dims[1])/2;if(this.elementPositioning=='absolute'){if(this.options.scaleY)d.top=this.originalTop-topd+'px';if(this.options.scaleX)d.left=this.originalLeft-leftd+'px';}else{if(this.options.scaleY)d.top=-topd+'px';if(this.options.scaleX)d.left=-leftd+'px';}}
this.element.setStyle(d);}});Effect.Highlight=Class.create(Effect.Base,{initialize:function(element){this.element=$(element);if(!this.element)throw(Effect._elementDoesNotExistError);var options=Object.extend({startcolor:'#ffff99'},arguments[1]||{});this.start(options);},setup:function(){if(this.element.getStyle('display')=='none'){this.cancel();return;}
this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle('background-image');this.element.setStyle({backgroundImage:'none'});}
if(!this.options.endcolor)
this.options.endcolor=this.element.getStyle('background-color').parseColor('#ffffff');if(!this.options.restorecolor)
this.options.restorecolor=this.element.getStyle('background-color');this._base=$R(0,2).map(function(i){return parseInt(this.options.startcolor.slice(i*2+1,i*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(i){return parseInt(this.options.endcolor.slice(i*2+1,i*2+3),16)-this._base[i]}.bind(this));},update:function(position){this.element.setStyle({backgroundColor:$R(0,2).inject('#',function(m,v,i){return m+((this._base[i]+(this._delta[i]*position)).round().toColorPart());}.bind(this))});},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}));}});Effect.ScrollTo=function(element){var options=arguments[1]||{},scrollOffsets=document.viewport.getScrollOffsets(),elementOffsets=$(element).cumulativeOffset();if(options.offset)elementOffsets[1]+=options.offset;return new Effect.Tween(null,scrollOffsets.top,elementOffsets[1],options,function(p){scrollTo(scrollOffsets.left,p.round());});};Effect.Fade=function(element){element=$(element);var oldOpacity=element.getInlineOpacity();var options=Object.extend({from:element.getOpacity()||1.0,to:0.0,afterFinishInternal:function(effect){if(effect.options.to!=0)return;effect.element.hide().setStyle({opacity:oldOpacity});}},arguments[1]||{});return new Effect.Opacity(element,options);};Effect.Appear=function(element){element=$(element);var options=Object.extend({from:(element.getStyle('display')=='none'?0.0:element.getOpacity()||0.0),to:1.0,afterFinishInternal:function(effect){effect.element.forceRerendering();},beforeSetup:function(effect){effect.element.setOpacity(effect.options.from).show();}},arguments[1]||{});return new Effect.Opacity(element,options);};Effect.Puff=function(element){element=$(element);var oldStyle={opacity:element.getInlineOpacity(),position:element.getStyle('position'),top:element.style.top,left:element.style.left,width:element.style.width,height:element.style.height};return new Effect.Parallel([new Effect.Scale(element,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(element,{sync:true,to:0.0})],Object.extend({duration:1.0,beforeSetupInternal:function(effect){Position.absolutize(effect.effects[0].element);},afterFinishInternal:function(effect){effect.effects[0].element.hide().setStyle(oldStyle);}},arguments[1]||{}));};Effect.BlindUp=function(element){element=$(element);element.makeClipping();return new Effect.Scale(element,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(effect){effect.element.hide().undoClipping();}},arguments[1]||{}));};Effect.BlindDown=function(element){element=$(element);var elementDimensions=element.getDimensions();return new Effect.Scale(element,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:elementDimensions.height,originalWidth:elementDimensions.width},restoreAfterFinish:true,afterSetup:function(effect){effect.element.makeClipping().setStyle({height:'0px'}).show();},afterFinishInternal:function(effect){effect.element.undoClipping();}},arguments[1]||{}));};Effect.SwitchOff=function(element){element=$(element);var oldOpacity=element.getInlineOpacity();return new Effect.Appear(element,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(effect){new Effect.Scale(effect.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(effect){effect.element.makePositioned().makeClipping();},afterFinishInternal:function(effect){effect.element.hide().undoClipping().undoPositioned().setStyle({opacity:oldOpacity});}});}},arguments[1]||{}));};Effect.DropOut=function(element){element=$(element);var oldStyle={top:element.getStyle('top'),left:element.getStyle('left'),opacity:element.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(element,{x:0,y:100,sync:true}),new Effect.Opacity(element,{sync:true,to:0.0})],Object.extend({duration:0.5,beforeSetup:function(effect){effect.effects[0].element.makePositioned();},afterFinishInternal:function(effect){effect.effects[0].element.hide().undoPositioned().setStyle(oldStyle);}},arguments[1]||{}));};Effect.Shake=function(element){element=$(element);var options=Object.extend({distance:20,duration:0.5},arguments[1]||{});var distance=parseFloat(options.distance);var split=parseFloat(options.duration)/10.0;var oldStyle={top:element.getStyle('top'),left:element.getStyle('left')};return new Effect.Move(element,{x:distance,y:0,duration:split,afterFinishInternal:function(effect){new Effect.Move(effect.element,{x:-distance*2,y:0,duration:split*2,afterFinishInternal:function(effect){new Effect.Move(effect.element,{x:distance*2,y:0,duration:split*2,afterFinishInternal:function(effect){new Effect.Move(effect.element,{x:-distance*2,y:0,duration:split*2,afterFinishInternal:function(effect){new Effect.Move(effect.element,{x:distance*2,y:0,duration:split*2,afterFinishInternal:function(effect){new Effect.Move(effect.element,{x:-distance,y:0,duration:split,afterFinishInternal:function(effect){effect.element.undoPositioned().setStyle(oldStyle);}});}});}});}});}});}});};Effect.SlideDown=function(element){element=$(element).cleanWhitespace();var oldInnerBottom=element.down().getStyle('bottom');var elementDimensions=element.getDimensions();return new Effect.Scale(element,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:elementDimensions.height,originalWidth:elementDimensions.width},restoreAfterFinish:true,afterSetup:function(effect){effect.element.makePositioned();effect.element.down().makePositioned();if(window.opera)effect.element.setStyle({top:''});effect.element.makeClipping().setStyle({height:'0px'}).show();},afterUpdateInternal:function(effect){effect.element.down().setStyle({bottom:(effect.dims[0]-effect.element.clientHeight)+'px'});},afterFinishInternal:function(effect){effect.element.undoClipping().undoPositioned();effect.element.down().undoPositioned().setStyle({bottom:oldInnerBottom});}},arguments[1]||{}));};Effect.SlideUp=function(element){element=$(element).cleanWhitespace();var oldInnerBottom=element.down().getStyle('bottom');var elementDimensions=element.getDimensions();return new Effect.Scale(element,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:'box',scaleFrom:100,scaleMode:{originalHeight:elementDimensions.height,originalWidth:elementDimensions.width},restoreAfterFinish:true,afterSetup:function(effect){effect.element.makePositioned();effect.element.down().makePositioned();if(window.opera)effect.element.setStyle({top:''});effect.element.makeClipping().show();},afterUpdateInternal:function(effect){effect.element.down().setStyle({bottom:(effect.dims[0]-effect.element.clientHeight)+'px'});},afterFinishInternal:function(effect){effect.element.hide().undoClipping().undoPositioned();effect.element.down().undoPositioned().setStyle({bottom:oldInnerBottom});}},arguments[1]||{}));};Effect.Squish=function(element){return new Effect.Scale(element,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(effect){effect.element.makeClipping();},afterFinishInternal:function(effect){effect.element.hide().undoClipping();}});};Effect.Grow=function(element){element=$(element);var options=Object.extend({direction:'center',moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{});var oldStyle={top:element.style.top,left:element.style.left,height:element.style.height,width:element.style.width,opacity:element.getInlineOpacity()};var dims=element.getDimensions();var initialMoveX,initialMoveY;var moveX,moveY;switch(options.direction){case'top-left':initialMoveX=initialMoveY=moveX=moveY=0;break;case'top-right':initialMoveX=dims.width;initialMoveY=moveY=0;moveX=-dims.width;break;case'bottom-left':initialMoveX=moveX=0;initialMoveY=dims.height;moveY=-dims.height;break;case'bottom-right':initialMoveX=dims.width;initialMoveY=dims.height;moveX=-dims.width;moveY=-dims.height;break;case'center':initialMoveX=dims.width/2;initialMoveY=dims.height/2;moveX=-dims.width/2;moveY=-dims.height/2;break;}
return new Effect.Move(element,{x:initialMoveX,y:initialMoveY,duration:0.01,beforeSetup:function(effect){effect.element.hide().makeClipping().makePositioned();},afterFinishInternal:function(effect){new Effect.Parallel([new Effect.Opacity(effect.element,{sync:true,to:1.0,from:0.0,transition:options.opacityTransition}),new Effect.Move(effect.element,{x:moveX,y:moveY,sync:true,transition:options.moveTransition}),new Effect.Scale(effect.element,100,{scaleMode:{originalHeight:dims.height,originalWidth:dims.width},sync:true,scaleFrom:window.opera?1:0,transition:options.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(effect){effect.effects[0].element.setStyle({height:'0px'}).show();},afterFinishInternal:function(effect){effect.effects[0].element.undoClipping().undoPositioned().setStyle(oldStyle);}},options));}});};Effect.Shrink=function(element){element=$(element);var options=Object.extend({direction:'center',moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{});var oldStyle={top:element.style.top,left:element.style.left,height:element.style.height,width:element.style.width,opacity:element.getInlineOpacity()};var dims=element.getDimensions();var moveX,moveY;switch(options.direction){case'top-left':moveX=moveY=0;break;case'top-right':moveX=dims.width;moveY=0;break;case'bottom-left':moveX=0;moveY=dims.height;break;case'bottom-right':moveX=dims.width;moveY=dims.height;break;case'center':moveX=dims.width/2;moveY=dims.height/2;break;}
return new Effect.Parallel([new Effect.Opacity(element,{sync:true,to:0.0,from:1.0,transition:options.opacityTransition}),new Effect.Scale(element,window.opera?1:0,{sync:true,transition:options.scaleTransition,restoreAfterFinish:true}),new Effect.Move(element,{x:moveX,y:moveY,sync:true,transition:options.moveTransition})],Object.extend({beforeStartInternal:function(effect){effect.effects[0].element.makePositioned().makeClipping();},afterFinishInternal:function(effect){effect.effects[0].element.hide().undoClipping().undoPositioned().setStyle(oldStyle);}},options));};Effect.Pulsate=function(element){element=$(element);var options=arguments[1]||{},oldOpacity=element.getInlineOpacity(),transition=options.transition||Effect.Transitions.linear,reverser=function(pos){return 1-transition((-Math.cos((pos*(options.pulses||5)*2)*Math.PI)/2)+.5);};return new Effect.Opacity(element,Object.extend(Object.extend({duration:2.0,from:0,afterFinishInternal:function(effect){effect.element.setStyle({opacity:oldOpacity});}},options),{transition:reverser}));};Effect.Fold=function(element){element=$(element);var oldStyle={top:element.style.top,left:element.style.left,width:element.style.width,height:element.style.height};element.makeClipping();return new Effect.Scale(element,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(effect){new Effect.Scale(element,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(effect){effect.element.hide().undoClipping().setStyle(oldStyle);}});}},arguments[1]||{}));};Effect.Morph=Class.create(Effect.Base,{initialize:function(element){this.element=$(element);if(!this.element)throw(Effect._elementDoesNotExistError);var options=Object.extend({style:{},element:this.element},arguments[1]||{});if(!Object.isString(options.style))this.style=$H(options.style);else{if(options.style.include(':'))
this.style=options.style.parseStyle();else{this.element.addClassName(options.style);this.style=$H(this.element.getStyles());this.element.removeClassName(options.style);var css=this.element.getStyles();this.style=this.style.reject(function(style){return style.value==css[style.key];});options.afterFinishInternal=function(effect){effect.element.addClassName(effect.options.style);effect.transforms.each(function(transform){effect.element.style[transform.style]='';});};}}
this.start(options);},setup:function(){function parseColor(color){if(!color||['rgba(0, 0, 0, 0)','transparent'].include(color))color='#ffffff';color=color.parseColor();return $R(0,2).map(function(i){return parseInt(color.slice(i*2+1,i*2+3),16);});}
this.transforms=this.style.map(function(pair){var property=pair[0],value=pair[1],unit=null;if(value.parseColor('#zzzzzz')!='#zzzzzz'){value=value.parseColor();unit='color';}else if(property=='opacity'){value=parseFloat(value);if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout))
this.element.setStyle({zoom:1});}else if(Element.CSS_LENGTH.test(value)){var components=value.match(/^([\+\-]?[0-9\.]+)(.*)$/);value=parseFloat(components[1]);unit=(components.length==3)?components[2]:null;}
var originalValue=this.element.getStyle(property);return{style:property.camelize(),originalValue:unit=='color'?parseColor(originalValue):parseFloat(originalValue||0),targetValue:unit=='color'?parseColor(value):value,unit:unit};}.bind(this)).reject(function(transform){return((transform.originalValue==transform.targetValue)||(transform.unit!='color'&&(isNaN(transform.originalValue)||isNaN(transform.targetValue))));});},update:function(position){var style={},transform,i=this.transforms.length;while(i--)
style[(transform=this.transforms[i]).style]=transform.unit=='color'?'#'+
(Math.round(transform.originalValue[0]+
(transform.targetValue[0]-transform.originalValue[0])*position)).toColorPart()+
(Math.round(transform.originalValue[1]+
(transform.targetValue[1]-transform.originalValue[1])*position)).toColorPart()+
(Math.round(transform.originalValue[2]+
(transform.targetValue[2]-transform.originalValue[2])*position)).toColorPart():(transform.originalValue+
(transform.targetValue-transform.originalValue)*position).toFixed(3)+
(transform.unit===null?'':transform.unit);this.element.setStyle(style,true);}});Effect.Transform=Class.create({initialize:function(tracks){this.tracks=[];this.options=arguments[1]||{};this.addTracks(tracks);},addTracks:function(tracks){tracks.each(function(track){track=$H(track);var data=track.values().first();this.tracks.push($H({ids:track.keys().first(),effect:Effect.Morph,options:{style:data}}));}.bind(this));return this;},play:function(){return new Effect.Parallel(this.tracks.map(function(track){var ids=track.get('ids'),effect=track.get('effect'),options=track.get('options');var elements=[$(ids)||$$(ids)].flatten();return elements.map(function(e){return new effect(e,Object.extend({sync:true},options))});}).flatten(),this.options);}});Element.CSS_PROPERTIES=$w('backgroundColor backgroundPosition borderBottomColor borderBottomStyle '+'borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth '+'borderRightColor borderRightStyle borderRightWidth borderSpacing '+'borderTopColor borderTopStyle borderTopWidth bottom clip color '+'fontSize fontWeight height left letterSpacing lineHeight '+'marginBottom marginLeft marginRight marginTop markerOffset maxHeight '+'maxWidth minHeight minWidth opacity outlineColor outlineOffset '+'outlineWidth paddingBottom paddingLeft paddingRight paddingTop '+'right textIndent top width wordSpacing zIndex');Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement('div');String.prototype.parseStyle=function(){var style,styleRules=$H();if(Prototype.Browser.WebKit)
style=new Element('div',{style:this}).style;else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';style=String.__parseStyleElement.childNodes[0].style;}
Element.CSS_PROPERTIES.each(function(property){if(style[property])styleRules.set(property,style[property]);});if(Prototype.Browser.IE&&this.include('opacity'))
styleRules.set('opacity',this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]);return styleRules;};if(document.defaultView&&document.defaultView.getComputedStyle){Element.getStyles=function(element){var css=document.defaultView.getComputedStyle($(element),null);return Element.CSS_PROPERTIES.inject({},function(styles,property){styles[property]=css[property];return styles;});};}else{Element.getStyles=function(element){element=$(element);var css=element.currentStyle,styles;styles=Element.CSS_PROPERTIES.inject({},function(results,property){results[property]=css[property];return results;});if(!styles.opacity)styles.opacity=element.getOpacity();return styles;};}
Effect.Methods={morph:function(element,style){element=$(element);new Effect.Morph(element,Object.extend({style:style},arguments[2]||{}));return element;},visualEffect:function(element,effect,options){element=$(element);var s=effect.dasherize().camelize(),klass=s.charAt(0).toUpperCase()+s.substring(1);new Effect[klass](element,options);return element;},highlight:function(element,options){element=$(element);new Effect.Highlight(element,options);return element;}};$w('fade appear grow shrink fold blindUp blindDown slideUp slideDown '+'pulsate shake puff squish switchOff dropOut').each(function(effect){Effect.Methods[effect]=function(element,options){element=$(element);Effect[effect.charAt(0).toUpperCase()+effect.substring(1)](element,options);return element;};});$w('getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles').each(function(f){Effect.Methods[f]=Element[f];});Element.addMethods(Effect.Methods);var AlphaBox={options:{},show_appear_effects:true,Overlay:function(){var oDialog=$('alphabox-modal-overlay')||$(new Insertion.Top(document.body,this.OverlayHtml()).firstChild);$('alphabox-modal-loading').setStyle({'display':'block'});if(this.show_appear_effects){new Effect.Appear(oDialog,{duration:0.4,from:0.0,to:0.6,queue:{position:'end',scope:'alphabox'}});}else{oDialog.setStyle({'display':'block'});}
if(this.options.absolute)oDialog.setStyle({position:'absolute'});},OverlayHtml:function(){var aParams=['id="alphabox-modal-overlay"','class="alphabox-preload-modal"','allowTransparency="true"','frameborder="0"','style="display:none;"','onload="this.contentWindow.document.body.style.backgroundColor=\'transparent\';this.contentWindow.document.onclick=function () { AlphaBox.Close(); }"'];return'<iframe '+aParams.join(' ')+'>';},Loading:function(options){if(AlphaBox.isLocked()){return false;}
this.options=options||{};if(oRefresher)oRefresher.Clear();this.onAfterClose=this.options.onAfterClose;this.onBeforeClose=this.options.onBeforeClose;try{if(!SA.Utils.Env.isFixeSupport)this.options.absolute=true;}catch(e){}
var _Loading=$('alphabox-modal-loading'),oLoading=$(!_Loading?new Insertion.Top(document.body,this.LoadingHtml()).firstChild:_Loading);var top=(document.viewport.getHeight()-oLoading.getDimensions().height)/2+(this.options.absolute?document.viewport.getScrollOffsets().top:0);oLoading.setStyle({top:top+'px',left:(document.viewport.getWidth()-oLoading.getDimensions().width)/2+'px'});if(this.options.absolute)oLoading.setStyle({position:'absolute'});if(!this.resizeEventSet){Event.observe(window,'resize',function(){AlphaBox.ResetPosition()});this.resizeEventSet=true;}
this.WindowReset();this.Overlay();this.isOpen=true;this.hasContent=false;var iframeBox=$('alphabox-modal-overlay');if(this.options.background)iframeBox.style.background=this.options.background;if(this.options.showHeader){var h=$('header');var f=$('footer');h.style.position="relative";f.style.position="relative";h.style.zIndex=iframeBox.getStyle("z-index")+5;f.style.zIndex=iframeBox.getStyle("z-index")+5;}
if(this.options.Locked){this.onBeforeClose=function(){return false;}}},isLocked:function(){if(this.options.Locked&&AlphaBox.isOpen){return true;}else{return false;}},LoadingHtml:function(){var aParams=['id="alphabox-modal-loading"','class="alphabox-preload-loading"'];return'<div '+aParams.join(' ')+'>';},LoadingHide:function(){$('alphabox-modal-loading').setStyle({'display':'none'});},Window:function(e){var _Window=$('alphabox-modal-window'),oWindow=$(!_Window?new Insertion.Top(document.body,this.WindowHtml()).firstChild:_Window);while(oWindow.hasChildNodes()){oWindow.removeChild(oWindow.firstChild);}
return oWindow;},WindowHtml:function(){var aParams=['id="alphabox-modal-window"','class="alphabox-window"','style="display:none;"'];return'<div '+aParams.join(' ')+'>';},WindowReset:function(){var oWindow=$('alphabox-modal-window');if(oWindow)oWindow.update('').setStyle({'display':'none'});},AddContent:function(container,options){var oContent=$(container),oWindow=this.Window();if(options)for(var i in options)this.options[i]=options[i];this.LoadingHide();oWindow.setStyle({'display':'none'});while(oContent.hasChildNodes()){oWindow.appendChild(oContent.firstChild);}
if(this.show_appear_effects){new Effect.Appear(oWindow,{duration:0.4,from:0.0,to:1.0,queue:{position:'end',scope:'alphabox'},afterFinish:(this.options.onFinish||(function(){}))});}else{oWindow.setStyle({'display':'block'});}
this.ResetPosition();},ResetPosition:function(options){var oWindow=$('alphabox-modal-window');if(!oWindow)return;if(options)for(var i in options)this.options[i]=options[i];options=this.options;var top_margin,left_margin;if(options.top!=undefined)top_margin=options.top;else top_margin=(document.viewport.getHeight()-oWindow.getDimensions().height)/2+(options.absolute?document.viewport.getScrollOffsets().top:0);if(options.left!=undefined)left_margin=options.left;else left_margin=(document.viewport.getWidth()-oWindow.getDimensions().width)/2;oWindow.setStyle({top:(top_margin<0?0:top_margin+'px'),left:(left_margin<0?0:left_margin+'px')});if(options.absolute)oWindow.setStyle({position:'absolute'});},AddHtml:function(sHtml,options){if(AlphaBox.isLocked()&&this.hasContent&&!options.force){return false;}
var oWindow=this.Window();if(options)for(var i in options)this.options[i]=options[i];this.LoadingHide();oWindow.setStyle({'display':'none'});oWindow.update(sHtml);if(this.show_appear_effects)new Effect.Appear(oWindow,{duration:0.4,from:0.0,to:1.0,queue:{position:'end',scope:'alphabox'},afterFinish:(this.options.onFinish||(function(){}))});else oWindow.setStyle({'display':'block'});this.ResetPosition();this.hasContent=true;},Close:function(){if(this.onBeforeClose){if(typeof(this.onBeforeClose)=='function'){if(this.onBeforeClose()===false)return;}else if(eval(this.onBeforeClose)===false)return;}
if(oRefresher)oRefresher.Activate();$('alphabox-modal-loading').setStyle({'display':'none'});if(this.show_appear_effects){if($('alphabox-modal-overlay'))new Effect.Fade('alphabox-modal-overlay',{duration:0.4});if($('alphabox-modal-window'))new Effect.Fade('alphabox-modal-window',{duration:0.4});}else{if($('alphabox-modal-overlay'))$('alphabox-modal-overlay').setStyle({'display':'none'});if($('alphabox-modal-window'))$('alphabox-modal-window').setStyle({'display':'none'});}
this.isOpen=false;if(this.onAfterClose){if(typeof(this.onAfterClose)=='function')this.onAfterClose();else eval(this.onAfterClose);}},CloseEsc:function(e){var iKey=window.event?event.keyCode:e.keyCode,iEsc=window.event?27:e.DOM_VK_ESCAPE;if(iKey==iEsc&&AlphaBox.isOpen){AlphaBox.Close();if(oRefresher){oRefresher.Activate()};window.event?event.returnValue=false:e.preventDefault();}},PageLoad:function(){this.PageLoaded=true;clearInterval(this.OverlayInterval);}}
var LightBox={Images:{Close:'http://static2.cdn-seekingalpha.com/images/close.gif'},Init:function(){var aLightBoxes=[];$$('a').each(function(item){if(item.rel&&item.rel=="lightbox"){aLightBoxes.push(item);}})
aLightBoxes.each(function(oLink){if(oLink.href)oLink.onclick=function(){LightBox.Click.call(LightBox,this.href);return false;}});},LoadImage:function(sImg){var oImg=document.createElement('img');oImg.onload=function(){this.Envelope(oImg);}.bind(this);oImg.src=sImg;},Envelope:function(oImg){if(oImg){var height=document.viewport.getHeight();oImg.style.maxHeight=(height-50)+"px";Event.observe(window,"resize",function(){var height=document.viewport.getHeight();oImg.style.maxHeight=(height-50)+"px";})}
var oContainer=document.createElement('div'),oLightBox=document.createElement('div'),oCloseBtn=document.createElement('div'),oCloseLinkCont=document.createElement('div'),oCloseLink=document.createElement('span'),aHtml=[];oContainer.appendChild(oLightBox);oLightBox.appendChild(oImg);oLightBox.className="alpha_lightbox";oCloseBtn.className="close_button";oCloseBtn.onmouseover=function(){$(this).addClassName('close_button_over')};oCloseBtn.onmouseout=function(){$(this).removeClassName('close_button_over')};oCloseBtn.onclick=function(){AlphaBox.Close();};oLightBox.appendChild(oCloseBtn);oCloseLinkCont.className="close_link_cont";oLightBox.appendChild(oCloseLinkCont);oCloseLink.innerHTML='close window';oCloseLink.className='close_link';oCloseLink.onmouseover=function(){$(this).addClassName('close_link_over')};oCloseLink.onmouseout=function(){$(this).removeClassName('close_link_over')};oCloseLink.onclick=function(){AlphaBox.Close();};oCloseLinkCont.appendChild(oCloseLink);AlphaBox.AddContent(oContainer);},Click:function(sImg){AlphaBox.Loading();this.LoadImage(sImg);}}
Event.observe(document,'keydown',AlphaBox.CloseEsc.bind(AlphaBox));Event.observe(window,'load',AlphaBox.PageLoad.bind(AlphaBox));var RedBox={};RedBox.loading=AlphaBox.Loading;RedBox.addHiddenContent=AlphaBox.AddContent;RedBox.close=AlphaBox.Close;function toRx(s){return s.replace(/\\/gi,"\\\\").replace(/(\(|\)|\{|\}|\[|\]|\:|\^|\$|\!|\=|\+|\*|\/|\,|\-|\||\?|\.)/g,"\\$1");}
function toJs(s){return s.replace(/\\/g,"\\\\").replace(/\'/g,"\\\'").replace(/\"/g,"\\\"").replace(/\//g,"\/").replace(/\t/g,"\\t").replace(/\r?\n/g,"\\n");}
if(typeof(contacts)=='undefined'){var contacts="";}
if(typeof(authors)=='undefined'){var authors="";}
if(typeof(pipelines)=='undefined'){var pipelines="";}
var AutoCompleteSAConfig={JavascriptLoaded:false,LoadingInstance:null,LoadJavascript:function(Instance){this.Packages[Instance].LoadingMessage();this.LoadingInstance=Instance;},Init:function(){authors.replace(/\&\#038\;/g,"&").replace(/\&amp\;/g,"&");symbols="<"+symbols.replace(/</g,'<<')+"<";authors="<"+authors.replace(/</g,'<<')+"<";contacts="<"+contacts.replace(/</g,'<<')+"<";pipelines="<"+pipelines.replace(/</g,'<<')+"<";this.JavascriptLoaded=true;if(typeof(SeekingAlpha)!="undefined")SeekingAlpha.Initializer.RunAfterAutoCompleteLoaded();if(this.LoadingInstance)this.Packages[this.LoadingInstance].SearchAndDisplay();},Load:function(Instance,Params){this.Packages[Instance]=new AutoCompleteSA(Instance,Params);this.Packages[Instance].Init();return this.Packages[Instance];},Create:function(Instance,Params){this.Packages[Instance]=new AutoCompleteSA(Instance,Params);return this.Packages[Instance].CreateAutoCompleteHtml();},Packages:{},Route:function(Instance,sFunction,aArguments){var oPackage=this.Packages[Instance],oFunction=oPackage[sFunction],aArguments=aArguments||[];oFunction.apply(oPackage,aArguments);}};function AutoCompleteSA(Instance,Params){var _this=this;this.Params=Params||{};this.Params.Symbols=this.Params.Symbols!=null?this.Params.Symbols:true;this.Params.Contacts=this.Params.Contacts!=null?this.Params.Contacts:false;this.Params.Authors=this.Params.Authors!=null?this.Params.Authors:true;this.Params.Pipelines=this.Params.Pipelines!=null?this.Params.Pipelines:false;this.Params.Input=this.Params.Input!=null?this.Params.Input:null;this.Params.WriteToDocument=this.Params.WriteToDocument!=null?this.Params.WriteToDocument:true;this.Params.IframeCover=this.Params.IframeCover!=null?this.Params.IframeCover:false;this.Params.Ad=this.Params.Ad!=null?this.Params.Ad:false;this.Params.MultipleInsert=this.Params.MultipleInsert!=null?this.Params.MultipleInsert:false;this.Params.AutoInsert=this.Params.AutoInsert!=null?this.Params.AutoInsert:false;this.Params.LoadSearch=this.Params.LoadSearch!=null?this.Params.LoadSearch:false;this.Params.AfterInit=this.Params.AfterInit!=null?this.Params.AfterInit:null;this.Params.AfterInsert=this.Params.AfterInsert!=null?this.Params.AfterInsert:null;this.Params.AfterSubmit=this.Params.AfterSubmit!=null?this.Params.AfterSubmit:null;this.Params.AfterSearchSymbol=this.Params.AfterSearchSymbol!=null?this.Params.AfterSearchSymbol:null;this.Instance=Instance;this.Input=this.Params.Input||'autocomplete_sa_'+this.Instance;this.State='close';this.CurrentResults=0;this.LastIndex=0;this.Timeout=null;this.active=true;this.Init=function(){if(this.Params.AddAfterInput)this.Params.WriteToDocument=false;var html=this.CreateAutoCompleteHtml();if(this.Params.AddAfterInput){var div=document.createElement('div'),input=$(this.Input);div.className="autocomp_container";input.parentNode.insertBefore(div,input.nextSibling);div.innerHTML=html;}
if(this.Params.LoadSearch)this.LoadSearchFromUrl();if(this.Params.AfterInit)this.Params.AfterInit.call(this);$(this.Input).observe('keydown',function(){_this.KEYPRESS.apply(_this,arguments);});$(this.Input).observe('keyup',function(){_this.KEYUP.apply(_this,arguments);});Event.observe(document.body,'click',function(){_this.Close.apply(_this,arguments);});}
this.KEYPRESS=function(event){var oInp=$(this.Input);if(this.Params.BeforeKeyPress)this.Params.BeforeKeyPress();switch(event.keyCode){case 9:if(this.Params.AutoInsert){if(this.State=="open")this.AutoInsert();}
if(this.State=="open")this.Close();break;case 27:setTimeout(function(){_this.Close.apply(_this,arguments)},500);break;case 38:if(this.State=="open")this.Set(this.LastIndex-1>-1?this.LastIndex-1:(this.Instance=='header'?0:(this.LastIndex==-1?this.CurrentResults-1:0)));Event.stop(event);break;case 40:if(this.State=="open")this.Set(this.LastIndex+1<this.CurrentResults?this.LastIndex+1:this.CurrentResults-1);Event.stop(event);break;case 13:if(this.Params.AutoInsert){if(this.State=="open")this.AutoInsert();}
if(this.Params.AfterSubmit){if(this.Params.MultipleInsert){if(this.State=="close")this.Params.AfterSubmit.call(this);}
else this.Params.AfterSubmit.call(this);}
if(this.State=="open")this.Close();break;}}
this.KEYUP=function(event){if(AutoCompleteSAConfig.JavascriptLoaded){if(event.keyCode!=38&&event.keyCode!=40&&event.keyCode!=13){if(this.Timeout)clearTimeout(this.Timeout);this.Timeout=setTimeout(function(){_this.SearchAndDisplay.call(_this);},300);}}
else AutoCompleteSAConfig.LoadJavascript(this.Instance);},this.MOUSEOVER=function(e){var oAutoComplete=$('autocomplete_container_sa_'+this.Instance),oLastOpt=$('sa_autocomplete_opt_'+this.Instance+'_'+this.LastIndex),index=e.getAttribute("index")*1;if(oLastOpt)oLastOpt.setStyle({backgroundColor:'#cdcdcd'});this.LastIndex=index;$(e).setStyle({backgroundColor:'#e9fcfd'});}
this.SearchAndDisplay=function(){if(this.active==false)return;var oAutoComplete=$('autocomplete_container_sa_'+this.Instance),oSymbolsBox=$('autocomplete_box_symbols_'+this.Instance),oAuthorsBox=$('autocomplete_box_authors_'+this.Instance),oContactsBox=$('autocomplete_box_contacts_'+this.Instance),oPipelinesBox=$('autocomplete_box_pipelines_'+this.Instance),oSymbolsCont=$('autocomplete_container_symbols_sa_'+this.Instance),oAuthorsCont=$('autocomplete_container_authors_sa_'+this.Instance),oContactsCont=$('autocomplete_container_contacts_sa_'+this.Instance),oPipelinesCont=$('autocomplete_container_pipelines_sa_'+this.Instance),oIframeCover=$('autocomplete_iframe_cover_'+this.Instance),oLoadingBox=$('autocomplete_box_loading_'+this.Instance),oInput=$(this.Input),sPhrase=this.ParsePhrase(oInput.value.trim()),sSymbol,oDups={},aDisplaySymbols=[],aDisplayAuthors=[],aDisplayContacts=[],aDisplayPipelines=[],aHtmlSymbols=[],aHtmlAuthors=[],aHtmlContacts=[],aHtmlPipelines=[],aTemp,rxSymbol=/^[\w]{1,5}(?:\.[\w]{1,2})?$/i,rxSearch1,rxSearch2,rxSearch3,iMax=10,iFound=0,index=0;oAutoComplete.setStyle({display:'none'});oLoadingBox.setStyle({display:'none'});if(this.Params.Symbols)oSymbolsBox.setStyle({display:'none'});if(this.Params.Authors)oAuthorsBox.setStyle({display:'none'});if(this.Params.Contacts)oContactsBox.setStyle({display:'none'});if(this.Params.Pipelines)oPipelinesBox.setStyle({display:'none'});if(this.Params.IframeCover)oIframeCover.setStyle({height:'0px',display:'none'});this.State="close";if(this.Params.Symbols)oSymbolsCont.update('');if(this.Params.Authors)oAuthorsCont.update('');if(this.Params.Contacts)oContactsCont.update('');if(this.Params.Pipelines)oPipelinesCont.update('');if(!sPhrase.length||/[<>]/.test(sPhrase))return;rxSearch0=new RegExp("<("+toRx(sPhrase)+">.*?)<","gi");rxSearch1=new RegExp("<("+toRx(sPhrase)+".*?)<","gi");rxSearch2=new RegExp("<((?:[^><]+?)"+toRx(sPhrase)+"(?:[^>]*?)>(?:[^<]*?))<","gi");rxSearch3=new RegExp("<((?:[^><]*?)>(?:[^<]*?)"+toRx(sPhrase)+"(?:[^<]*?))<","gi");rxSearch4=new RegExp("<((?:[^><]*?)>"+toRx(sPhrase)+"(?:[^<]*?))<","gi");if(this.Params.Symbols){symbols.replace(rxSearch0,function(All,$1){if(aDisplaySymbols.length<10){aDisplaySymbols.push($1);}});if(aDisplaySymbols.length<10){symbols.replace(rxSearch1,function(All,$1){if(aDisplaySymbols.length<10){aDisplaySymbols.push($1);}});}
if(aDisplaySymbols.length<10){symbols.replace(rxSearch2,function(All,$1){if(aDisplaySymbols.length<10){aDisplaySymbols.push($1);}});}
if(aDisplaySymbols.length<10){symbols.replace(rxSearch4,function(All,$1){if(aDisplaySymbols.length<10){aDisplaySymbols.push($1);}});}
if(aDisplaySymbols.length<10){symbols.replace(rxSearch3,function(All,$1){if(aDisplaySymbols.length<10){aDisplaySymbols.push($1);}});}
aDisplaySymbols=aDisplaySymbols.uniq();}
if(this.Params.Authors){authors.replace(rxSearch4,function(All,$1){if(aDisplayAuthors.length<10)aDisplayAuthors.push($1);});if(aDisplayAuthors.length<10){authors.replace(rxSearch3,function(All,$1){if(aDisplayAuthors.length<10)aDisplayAuthors.push($1);});}
aDisplayAuthors=aDisplayAuthors.uniq();}
if(this.Params.Contacts){contacts.replace(rxSearch4,function(All,$1){if(aDisplayContacts.length<10)aDisplayContacts.push($1);});if(aDisplayContacts.length<10){contacts.replace(rxSearch3,function(All,$1){if(aDisplayContacts.length<10)aDisplayContacts.push($1);});}
aDisplayContacts=aDisplayContacts.uniq();}
if(this.Params.Pipelines){pipelines.replace(rxSearch4,function(All,$1){if(aDisplayPipelines.length<10)aDisplayPipelines.push($1);});if(aDisplayPipelines.length<10){pipelines.replace(rxSearch3,function(All,$1){if(aDisplayPipelines.length<10)aDisplayPipelines.push($1);});}
aDisplayPipelines=aDisplayPipelines.uniq();}
aTemp=aDisplayAuthors.slice(0,5);aDisplaySymbols=aDisplaySymbols.slice(0,10-aTemp.size());aDisplayContacts=aDisplayContacts.slice(0,10-aDisplaySymbols.size());aDisplayPipelines=aDisplayPipelines.slice(0,10-aTemp.size());if(aDisplaySymbols.size()+aTemp.size()+aDisplayContacts.size()+aDisplayPipelines.size()<10)aDisplayAuthors=aDisplayAuthors.slice(0,10-aDisplaySymbols.size()-aDisplayPipelines.size());else aDisplayAuthors=aTemp;if(true){aDisplaySymbols.each(function(cat){cat=cat.split(">");aHtmlSymbols.push('<div data="'+cat[0].toUpperCase()+'" id="sa_autocomplete_opt_'+_this.Instance+'_'+index+'" index="'+index+'" onmouseover="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'MOUSEOVER\',[this])" onclick="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'Insert\',[\''+toJs(cat[0].toUpperCase())+'\',true])"><span class="autocomplete_symbol_name">'+cat[0].toUpperCase().replace(new RegExp(toRx(sPhrase),"i"),'<b>'+sPhrase.toUpperCase()+'</b>')+'</span><span class="autocomplete_symbol_description">'+(new RegExp(toRx(sPhrase),"i").test(cat[0])?cat[1]:cat[1].replace(new RegExp("("+toRx(sPhrase)+")","i"),"<b>$1</b>"))+'</span></div>');index++;});if(this.Params.AfterSearchSymbol)this.Params.AfterSearchSymbol(aDisplaySymbols);aDisplayContacts.each(function(cat){cat=cat.split(">");aHtmlContacts.push('<div data="'+cat[1]+'" id="sa_autocomplete_opt_'+_this.Instance+'_'+index+'" index="'+index+'" onmouseover="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'MOUSEOVER\',[this])" onclick="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'Insert\',[\''+toJs(cat[1])+'\',true])">'+(cat[1].replace(new RegExp("("+toRx(sPhrase)+")","i"),'<b>$1</b>'))+'</div>');index++;});aDisplayPipelines.each(function(cat){cat=cat.split(">");aHtmlPipelines.push('<div data="'+cat[1]+'" id="sa_autocomplete_opt_'+_this.Instance+'_'+index+'" index="'+index+'" onmouseover="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'MOUSEOVER\',[this])" onclick="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'Insert\',[\''+toJs(cat[1])+'\',true])">'+(cat[1].replace(new RegExp("("+toRx(sPhrase)+")","i"),'<b>$1</b>'))+'</div>');index++;});aDisplayAuthors.each(function(cat){cat=cat.split(">");aHtmlAuthors.push('<div data="'+cat[1]+'" id="sa_autocomplete_opt_'+_this.Instance+'_'+index+'" index="'+index+'" onmouseover="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'MOUSEOVER\',[this])" onclick="AutoCompleteSAConfig.Route(\''+_this.Instance+'\',\'Insert\',[\''+toJs(cat[1])+'\',true])">'+(cat[1].replace(new RegExp("("+toRx(sPhrase)+")","i"),'<b>$1</b>'))+'</div>');index++;});if(this.Params.Symbols)oSymbolsCont.update(aHtmlSymbols.join(""));if(this.Params.Authors)oAuthorsCont.update(aHtmlAuthors.join(""));if(this.Params.Contacts)oContactsCont.update(aHtmlContacts.join(""));if(this.Params.Pipelines)oPipelinesCont.update(aHtmlPipelines.join(""));oAutoComplete.setStyle({display:'block'});if(aDisplaySymbols.size()&&this.Params.Symbols)oSymbolsBox.setStyle({display:'block'});if(aHtmlAuthors.size()&&this.Params.Authors)oAuthorsBox.setStyle({display:'block'});if(aHtmlContacts.size()&&this.Params.Contacts)oContactsBox.setStyle({display:'block'});if(aHtmlPipelines.size()&&this.Params.Pipelines)oPipelinesBox.setStyle({display:'block'});this.State="open";this.LastIndex=-1;this.CurrentResults=aDisplaySymbols.size()+aDisplayAuthors.size()+aDisplayContacts.size()+aDisplayPipelines.size();if(this.Params.IframeCover)oIframeCover.setStyle({height:oAutoComplete.offsetHeight+'px',width:oAutoComplete.offsetWidth+'px',display:'block'});}}
this.ParsePhrase=function(Phrase){if(this.Params.MultipleInsert){/([^\,]+?)$/.test(Phrase);try{return RegExp.$1.trim();}catch(e){return RegExp.$1;}}
else return Phrase;}
this.LoadingMessage=function(Instance){if(this.active==false)return;var oAutoComplete=$('autocomplete_container_sa_'+this.Instance),oLoadingBox=$('autocomplete_box_loading_'+this.Instance),oSymbolsBox=$('autocomplete_box_symbols_'+this.Instance),oAuthorsBox=$('autocomplete_box_authors_'+this.Instance),oContactsBox=$('autocomplete_box_contacts_'+this.Instance),oPipelinesBox=$('autocomplete_box_pipelines_'+this.Instance),oIframeCover=$('autocomplete_iframe_cover_'+this.Instance);if(this.Params.Symbols)oSymbolsBox.setStyle({display:'none'});if(this.Params.Authors)oAuthorsBox.setStyle({display:'none'});if(this.Params.Contacts)oContactsBox.setStyle({display:'none'});if(this.Params.Pipelines)oPipelinesBox.setStyle({display:'none'});if(this.Params.IframeCover)oIframeCover.setStyle({height:'0px',display:'none'});oAutoComplete.setStyle({display:'block'});oLoadingBox.setStyle({display:'block'});}
this.Set=function(Index){var oOpt=$('sa_autocomplete_opt_'+this.Instance+'_'+Index),oLastOpt=$('sa_autocomplete_opt_'+this.Instance+'_'+this.LastIndex);if(oLastOpt)oLastOpt.setStyle({backgroundColor:'#cdcdcd'});oOpt.setStyle({backgroundColor:'#E9FCFD'});this.LastIndex=Index;this.Insert(oOpt.getAttribute("data"));}
this.Insert=function(Value,bFromClick){var oInp=$(this.Input);oInp.focus();oInp.value=this.Params.MultipleInsert?(oInp.value.replace(/\, +$/,"").replace(/([^\,]+)$/," "+Value+", ")).replace(/^ /,""):Value;if(bFromClick&&this.Params.AfterInsert)this.Params.AfterInsert.call(this);}
this.AutoInsert=function(){if(this.LastIndex==-1&&$('sa_autocomplete_opt_'+this.Instance+'_0'))this.Insert($('sa_autocomplete_opt_'+this.Instance+'_0').getAttribute('data'));}
this.Close=function(){var oAutoComplete=$('autocomplete_container_sa_'+this.Instance),oIframeCover=$('autocomplete_iframe_cover_'+this.Instance);try{oAutoComplete.setStyle({display:'none'});if(this.Params.IframeCover)oIframeCover.setStyle({display:'none'});this.LastIndex=null;this.State="close";}
catch(e){};}
this.CreateAutoCompleteHtml=function(){var aHtml=[];aHtml.push('<div id="autocomplete_container_sa_'+this.Instance+'" class="autocomplete_container_sa autocomplet_wrapper">');aHtml.push('<div id="autocomplete_box_loading_'+this.Instance+'" class="autocomplete_box_sa autocomplete_box_loading_style">');aHtml.push('Loading...');aHtml.push('</div>');if(this.Params.Symbols){aHtml.push('<div id="autocomplete_box_symbols_'+this.Instance+'" class="autocomplete_box_sa">');aHtml.push('<div class="autocomplete_box_title_sa">Symbols:</div>');aHtml.push('<div id="autocomplete_container_symbols_sa_'+this.Instance+'" class="autocomplete_box_result_sa autocomplete_container_symbols_sa"></div>');aHtml.push('</div>');}
if(this.Params.Pipelines){aHtml.push('<div id="autocomplete_box_pipelines_'+this.Instance+'" class="autocomplete_box_sa">');aHtml.push('<div class="autocomplete_box_title_sa">Pipelines:</div>');aHtml.push('<div id="autocomplete_container_pipelines_sa_'+this.Instance+'" class="autocomplete_box_result_sa autocomplete_container_authors_sa"></div>');aHtml.push('</div>');}
if(this.Params.Authors){aHtml.push('<div id="autocomplete_box_authors_'+this.Instance+'" class="autocomplete_box_sa">');aHtml.push('<div class="autocomplete_box_title_sa">Authors:</div>');aHtml.push('<div id="autocomplete_container_authors_sa_'+this.Instance+'" class="autocomplete_box_result_sa autocomplete_container_authors_sa"></div>');aHtml.push('</div>');}
if(this.Params.Contacts){aHtml.push('<div id="autocomplete_box_contacts_'+this.Instance+'" class="autocomplete_box_sa">');aHtml.push('<div class="autocomplete_box_title_sa">Contacts:</div>');aHtml.push('<div id="autocomplete_container_contacts_sa_'+this.Instance+'" class="autocomplete_box_result_sa autocomplete_container_authors_sa"></div>');aHtml.push('</div>');}
if(this.Params.Ad)aHtml.push('<div class="autocomplete_box_ad">'+$('autocomplete_sa_ad_'+this.Instance).innerHTML+'</div>');aHtml.push('</div>');if(this.Params.IframeCover)aHtml.push('<iframe id="autocomplete_iframe_cover_'+this.Instance+'" class="autocomplete_iframe_cover" frameborder="0" scrolling="no"></iframe>');if(this.Params.WriteToDocument)document.write(aHtml.join(""));else return aHtml.join("");}
this.Find=function(){var oSearchForm=$('search_box_sa_'+this.Instance),oInp=$(this.Input),InpHidden=$('autocomplete_sa_hidden_'+this.Instance),sPhrase=oInp.value,rxIsAuthor=new RegExp("<(?:([^><]*?)>"+toRx(sPhrase)+" ?)<","gi");if(AutoCompleteSAConfig.JavascriptLoaded){InpHidden.value=new RegExp("<(?:([^><]*?)>"+toRx(sPhrase)+" ?)<","gi").test(authors)?RegExp.$1:sPhrase;}
else InpHidden.value=sPhrase;if(sPhrase.trim()!="")oSearchForm.submit();}
this.LoadSearchFromUrl=function(){var oInp=$(this.Input),rxQ=/\/search\/\?q\=(.*?)\&/;if(rxQ.test(top.location.href))oInp.value=unescape(RegExp.$1.replace(/\+/g," "));}}
var Authentication={};if(typeof(mone_action)=="undefined")mone_action="";Authentication.Authenticate=function(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params){Authentication.Popup(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params);}
Authentication.Loginhtml=function(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params){var aPopup=[];aPopup.push("<div id='readlater_register_login' class='readlater_register_login "+(!Messages.Login?"no_text_box":"yes_text_box")+"'>");sendWordSearch(Messages);aPopup.push(joinUnit(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params));aPopup.push(signinUnit(Id,Activity,Funcs,Messages,Additional_Data,FocusOn));aPopup.push("<div class='close_pop' onclick='if (oRefresher) { oRefresher.Activate() };AlphaBox.Close();'></div>");aPopup.push("</div>");return aPopup.join("");}
Authentication.InsertLogin=function(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params){var aPopup=[];aPopup.push(signinUnit(Id,Activity,Funcs,Messages,Additional_Data,FocusOn));return aPopup.join("");}
Authentication.LoginhtmlSignInJoin=function(Id,Activity,Funcs,Messages,Additional_Data,FocusOn){var aPopup=[];aPopup.push("<div id='readlater_register_login' class='readlater_register_login "+(!Messages.Login?"no_text_box":"yes_text_box")+"'>");sendWordSearch(Messages);aPopup.push(signinUnit(Id,Activity,Funcs,Messages,Additional_Data,FocusOn));aPopup.push(joinUnit(Id,Activity,Funcs,Messages,Additional_Data,FocusOn));aPopup.push("</div>");return aPopup.join("");}
Authentication.SwitchHPLoginForm=function(action){var loginFormContainer=$('hp_login_form');if(!loginFormContainer||loginFormContainer==null)return;var index="";if(action=="disable"){$$('#hp_login_form [id]').each(function(item){if(item.id&&typeof(item.id)=="string"){item.id+="_disabled";if(index=item.getAttribute("tabIndex")){item.setAttribute("tabindex_disabled",index);item.removeAttribute("tabIndex");}}});}else{$$('#hp_login_form [id]').each(function(item){if(item.id&&typeof(item.id)=="string"){item.id=(item.id).replace("_disabled","");if(index=item.getAttribute("tabindex_disabled")){item.setAttribute("tabIndex",index);item.removeAttribute("tabindex_disabled");}}});}}
Authentication.WordsSearch=function(message){mone_action="";if(message.match(/follow/i))
mone_action="follow";else if(message.match(/stocktalk/i))
mone_action="stocktalk";else if(message.match(/comment/i))
mone_action="comment";else if(message.match(/portfolio/i))
mone_action="portfolio";else if(message.match(/instablog/i))
mone_action="instablog";else if(message.match(/message/i))
mone_action="message";else if(message.match(/alert/i))
mone_action="email_alert";else if(message.match(/hp_promotion/))
mone_action="hp_promotion";else if(message.match(/report a problem/))
mone_action="dispute"+((typeof(sidebar_class)!="undefined")?"_"+sidebar_class:'');else mone_action="homepage";if(mone_action)
Mone.touch("log_reg_"+mone_action);}
Authentication.Popup=function(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params){Authentication.SwitchHPLoginForm("disable");if(Additional_Data){Additional_Data=Additional_Data.replace(/\'/g,"&#39;");}
loginhtml=Authentication.Loginhtml(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params);AlphaBox.Loading();AlphaBox.AddHtml(loginhtml,{onFinish:function(){try{var loginEmail=$('authentication_login_email');$(FocusOn?FocusOn:((loginEmail.value.length>0)?'authentication_login_password':loginEmail)).focus();}catch(e){}}});AlphaBox.onBeforeClose=function(){Authentication.SwitchHPLoginForm("enable");};AlphaBox.onAfterClose=function(){AlphaBox.WindowReset();};}
Authentication.HpPromotion=function(){loginhtml=joinUnitForPromotion('promotion');return loginhtml;}
Authentication.Login=function(){var oLoginForm=$('authentication_login_form'),oError=$('authentication_login_notice'),oResponse;if(bInProcees)return;if(!validate_email('authentication_login_email','authentication_login_notice')||!validate_password('authentication_login_password','authentication_login_notice','Please enter your password.',1,80)){$('authentication_notices').setStyle({display:''});return;}
urchinTracker('event/logged_out/try_to_login');new Ajax.Request("/authentication/login",{asynchronous:true,parameters:Form.serialize(oLoginForm),method:'post',onLoading:function(){bInProcees=true;$('authentication_login_button').addClassName('disabled');$('login_loader').setStyle({display:''});},onComplete:function(transport){if(transport.status==200){eval('oResponse='+transport.responseText);if(oResponse.login){Mone.event("Sec pop up","Sec pop up","Login");if(mone_action)Mone.touch("log_reg_"+mone_action+"_logged");Authentication.Extra=oResponse.extra;if(oResponse.writing_status)user_cookie.writing_status=oResponse.writing_status;if(oResponse['function']=="redirect_to"&&oResponse['comment_id']!=null&&oResponse['comment_id']!=""){createCookie("new_comment_id",oResponse['comment_id']);}
if(oResponse['function']=="Comment.Login"&&oResponse['blocked']=="user_blocked"){Comment.LoginBlocked();}else{setTimeout(function(){eval(oResponse['function']+'("'+oResponse.id+'")');},500);}}else{oError.innerHTML=Authentication.Messages[oResponse.message];$('authentication_notices').setStyle({display:''});}}
$('authentication_login_button').removeClassName('disabled');$('login_loader').setStyle({display:'none'});bInProcees=false;},onError:function(){$('authentication_login_button').removeClassName('disabled');$('login_loader').setStyle({display:'none'});bInProcees=false;}});}
Authentication.Register=function(suffix,regbox,onComplete){var oRegisterForm=$('authentication_register_form'+(suffix||'')),oError=$('authentication_register_notice'+(suffix||'')),oResponse;if(bInProcees)return;if(!regbox){if(!validate_nick('authentication_register_nick'+(suffix||''),'authentication_register_notice'+(suffix||''),'Please enter a username.')||!validate_email('authentication_register_email'+(suffix||''),'authentication_register_notice'+(suffix||''))||!validate_password('authentication_register_password'+(suffix||''),'authentication_register_notice'+(suffix||''),'Please enter a password with 4 to 40 characters.',4,40)){if($('authentication_notices'+(suffix||'')))$('authentication_notices'+(suffix||'')).setStyle({display:''});return;}}
if($("authentication_register_agree_to_terms"+(suffix||''))&&!$("authentication_register_agree_to_terms"+(suffix||'')).checked){$('authentication_notices'+(suffix||'')).setStyle({display:''});$('authentication_register_notice'+(suffix||'')).innerHTML="Terms must be agreed in order to confirm registration.";$('authentication_register_agree_to_terms'+(suffix||'')).focus();return;}
registered_mail=$('authentication_register_email'+(suffix||'')).value;try{var activity=oRegisterForm.activity.value;}catch(e){}
urchinTracker('event/logged_out/try_to_register');try{window.tmpRegisterFormData=oRegisterForm.serialize(true);}catch(e){}
new Ajax.Request("/authentication/registration",{asynchronous:true,parameters:Form.serialize(oRegisterForm),method:'post',onLoading:function(){bInProcees=true;$('authentication_register_button'+(suffix||'')).addClassName('disabled');$('register_loader'+(suffix||'')).setStyle({display:''});},onComplete:function(transport){if(transport.status==200){eval('oResponse='+transport.responseText);if(oResponse.registration){Authentication.Extra=oResponse.extra;eval(oResponse['function']+'("'+oResponse.id+'")');Authentication.SwitchHPLoginForm("enable");Mone.event("Auth",activity,'Registered',{data:{email:registered_mail}});if(onComplete)onComplete();}
else{if(!regbox){oError.innerHTML=Authentication.Messages[oResponse.message];$('authentication_notices'+(suffix||'')).setStyle({display:''});}else{bInProcees=false;$(Authentication.MessagesRbox[oResponse.message][1]+(suffix||'')).next().innerHTML=Authentication.MessagesRbox[oResponse.message][0];$('authentication_notices'+(suffix||'')).setStyle({display:''});}}}
bInProcees=false;$('authentication_register_button'+(suffix||'')).removeClassName('disabled');$('register_loader'+(suffix||'')).setStyle({display:'none'});},onError:function(){bInProcees=false;$('authentication_register_button'+(suffix||'')).removeClassName('disabled');$('register_loader'+(suffix||'')).setStyle({display:'none'});}});}
Authentication.Forgot_Password=function(){var oForgotPasswordForm=$('authentication_forgot_password_form'),oError=$('authentication_login_notice'),oResponse;if(bInProcees)return;if(!validate_email('authentication_forgot_password_email','authentication_login_notice')){$('authentication_notices').setStyle({display:''});return;}
urchinTracker('event/logged_out/forgot_password');new Ajax.Request("/authentication/forgot_password",{asynchronous:true,parameters:Form.serialize(oForgotPasswordForm),method:'post',onLoading:function(){bInProcees=true;$('authentication_forgot_password_button').addClassName('disabled');$('forgot_password_loader').setStyle({display:''});},onComplete:function(transport){if(transport.status==200){eval('oResponse='+transport.responseText);if(oResponse.forgot_password){if(mone_action)Mone.touch("forgotpass_"+mone_action+"_sent");Authentication.Extra=oResponse.extra;eval(oResponse['function']+'("'+oResponse.id+'")');Authentication.SwitchHPLoginForm("enable");}
else{oError.innerHTML=Authentication.Messages[oResponse.message];$('authentication_notices').setStyle({display:''});}}
bInProcees=false;$('authentication_forgot_password_button').removeClassName('disabled');$('forgot_password_loader').setStyle({display:'none'});},onError:function(){bInProcees=false;$('authentication_forgot_password_button').removeClassName('disabled');$('forgot_password_loader').setStyle({display:'none'});}});}
Authentication.ParseParam=function(aParams){window[aParams[0]].call(this,aParams.pop());}
Authentication.changeTextPassword=function(input){input.parentNode.innerHTML="<input type = 'password' name='user[password]' autocorrect='off' style=\"color:#2d2d2d\" autocapitalize='off' id='"+input.id+"' tabindex='62' title='choose password' /><div class='error'></div>";setTimeout(function(){$(input.id).focus()},10);}
Authentication.RegisterBox=function(Id,Activity,Funcs,target,suffix){var aHTML=[];aHTML.push("<div class='register_login_snippet'>");aHTML.push("<div class='top_title_area'>")
aHTML.push("<div class='people_joined'><span class='free_regis'>Free Registration:</span><br/>Register below and get the most out of&nbsp;&nbsp;<span class='sa'>Seeking Alpha</span></div>");aHTML.push("</div>");aHTML.push("<form id='authentication_register_form"+(suffix||'')+"' class='readlater_register' onkeypress='KEY_FORM_PRESS(event,function(){Authentication.Register(\""+(suffix||'')+"\",true);})' onsubmit='return false;'>");aHTML.push("<input type='hidden' name='id' value='"+Id+"'>");aHTML.push("<input type='hidden' name='activity' value='"+Activity+"'>");aHTML.push("<input type='hidden' name='function' value='"+Funcs.Register+"'>");aHTML.push("<input type='hidden' name='url_source' value='"+top.location.href.replace(/\?.*?$/,'')+"'>");aHTML.push("<fieldset><input type='text' autocorrect='off' autocapitalize='off' spellcheck='false' id='authentication_register_nick"+(suffix||'')+"' maxlength='80' tabindex='60' value='choose username' title='choose username' onfocus=\"this.style.color='#2d2d2d';handleInput(this,'focus')\" onblur=\"this.style.color=this.value=='' ? '#b0b0b0' : '#2d2d2d';handleInput(this,'blur')\" name='user[nick]'/><div class='error'></div></fieldset>");aHTML.push("<fieldset><input name='user[email]' autocorrect='off' autocapitalize='off' spellcheck='false' id='authentication_register_email"+(suffix||'')+"' tabindex='61' type='text' value='email' title='email' onfocus=\"this.style.color='#2d2d2d';handleInput(this,'focus')\" onblur=\"this.style.color=this.value=='' ? '#b0b0b0' : '#2d2d2d';handleInput(this,'blur')\" /><div class='error'></div></fieldset>");aHTML.push("<fieldset><span><input name='user[password]' autocorrect='off' autocapitalize='off' id='authentication_register_password"+(suffix||'')+"' tabindex='62' value='choose password'  title='choose password' onfocus='Authentication.changeTextPassword(this)'/><div class='error'></div></span></fieldset>");aHTML.push("<input type='hidden' name='referrer' value='"+(readCookie('session_referrer')||"")+"'>");aHTML.push("<div class='readlater_login'>");aHTML.push("<div id='login_loader"+(suffix||'')+"' class='readlater_login_loader' style='display:none;'><img src='http://static3.cdn-seekingalpha.com/images/loader.gif' /></div>");aHTML.push("<div id='forgot_password_loader"+(suffix||'')+"' class='readlater_login_submit_loader' style='display:none;'><img src='http://static3.cdn-seekingalpha.com/images/loader.gif' /></div>");aHTML.push("</div>");aHTML.push("<div id='authentication_notices"+(suffix||'')+"' class='errors' style='display:none;'>");aHTML.push("<div id='authentication_register_notice"+(suffix||'')+"' class='error1'></div>");aHTML.push("<div id='authentication_login_notice"+(suffix||'')+"' class='error2' style='clear:both'></div>");aHTML.push("</div>");aHTML.push("<div class='dont_spam'>We don't spam or share your information with third parties<br/>By clicking 'Join now' below you confirm that<br/> you accept our <a href=\"/page/terms-of-use\" target=\"_blank\">Terms of Use</a></div>");aHTML.push("<div id='authentication_register_button"+(suffix||'')+"' class='register_button' onclick='if (Authentication.validateRegBox(\""+(suffix||'')+"\")) Authentication.Register(\""+(suffix||'')+"\",true);' tabindex='66'>Join now</div>");aHTML.push("<div id='register_loader"+(suffix||'')+"' class='readlater_register_loader' style='display:none;'><img src='http://static3.cdn-seekingalpha.com/images/loader.gif' /></div>");aHTML.push("</form>");aHTML.push("<div class='already_joined'>Already a member? <span onclick='open_header_log_in_popup_lightbox(\"login\",\"\")' onmouseover='link_over(this, \"#024999\")' onmouseout='link_out(this, \"#024999\")'>Sign in here</span></div>");aHTML.push("<div class='cleaner'></div>");aHTML.push("</div>");$(target).innerHTML=aHTML.join("");}
Authentication.Messages={"login_failed":"Please check your email and password and try again.","blocked_user":"Login failed, please contact <a href='mailto:contact-website@seekingalpha.com'>contact-website@seekingalpha.com</a>","no_user":"Please check your email and try again.","missing_user_details":"Please check your email and password and try again.","already_registered":"You are already registered, please try the Member sign in.","Email is not valid":"Email is not valid, try again.","Nick is not valid":"Username is not valid, try again.","Username has been already taken":"Username has been already taken","Nick is too short (minimum is 2 characters)":"Nick is too short (minimum is 2 characters)"}
Authentication.MessagesRbox={"login_failed":["<span class=\"icon\"></span>Please check your email and password and try again.","authentication_register_notice"],"blocked_user":["<span class=\"icon\"></span>Login failed, please contact <a href='mailto:contact-website@seekingalpha.com'>contact-website@seekingalpha.com</a>","authentication_register_notice"],"no_user":["<span class=\"icon\"></span>Please check your email and try again.","authentication_register_email"],"missing_user_details":["<span class=\"icon\"></span>Please check your email and password and try again.","authentication_register_email"],"already_registered":["<span class=\"icon\"></span>You are already registered","authentication_register_notice"],"Email is not valid":["<span class=\"icon\"></span>Email is not valid, try again.","authentication_register_email"],"Nick is not valid":["<span class=\"icon\"></span>Sorry... this username is taken, please choose another one.","authentication_register_nick"],"Username has been already taken":["<span class=\"icon\"></span>Username has been already taken","authentication_register_nick"],"Nick is too short (minimum is 2 characters)":["<span class=\"icon\"></span>Nick is too short (minimum is 2 characters)","authentication_register_nick"]}
Authentication.validateRegBox=function(suffix){var nick_field=$('authentication_register_nick'+(suffix||''));var email_field=$('authentication_register_email'+(suffix||''));var pass_field=$('authentication_register_password'+(suffix||''));nick_field.next().innerHTML="";email_field.next().innerHTML="";pass_field.next().innerHTML="";$('authentication_register_notice'+(suffix||'')).innerHTML="";if(!validate_nick(nick_field,nick_field.next(),'<span class=\"icon\"></span>Username is not valid, try again.')||!validate_email(email_field,email_field.next(),"<span class=\"icon\"></span>Sorry... This is not a valid email address")||!validate_password(pass_field,pass_field.next(),'<span class=\"icon\"></span>Please enter a password with 4 to 40 characters.',4,40)){return false;}
return true;}
function signinUnit(Id,Activity,Funcs,Messages,Additional_Data,FocusOn){var userEmail=(cookieExists('user_email')?readCookie('user_email').replace(/ /g,'+'):"");var aPopup=[];aPopup.push("<div class='readlater_login' id='readlater_login'>");aPopup.push("<form id='authentication_login_form' onkeypress='KEY_FORM_PRESS(event,Authentication.Login)' onsubmit='return false;'>");aPopup.push("<div class='sign_in_title'>Sign in:</div>");aPopup.push("<input type='hidden' name='id' value='"+Id+"'>");aPopup.push("<input type='hidden' name='activity' value='"+Activity+"'>");aPopup.push("<input type='hidden' name='function' value='"+Funcs.Login+"'>");if(Additional_Data)aPopup.push("<input type='hidden' name='additional_data' value='"+Additional_Data+"'>");aPopup.push("<h3>Member sign in:</h3>");aPopup.push("<fieldset><span class='signin_label'>Email Address</span><input type='text' name='user[email]' id='authentication_login_email' autocorrect='off' autocapitalize='off' spellcheck='false' tabindex='50' value='"+userEmail+"'/></fieldset>");aPopup.push("<fieldset><span class='signin_label'>Password</span><div id='password_wrapper'><input type='password' name='user[password]' autocorrect='off' autocapitalize='off' id='authentication_login_password' tabindex='51' /></div>");aPopup.push("<div>");aPopup.push("<div class='hide_wrapper_around'>");aPopup.push("<div class='forgot_your_password' onmouseover='link_over(this,\"#024999\")' onmouseout='link_out(this,\"#024999\")' onclick='$(\"authentication_forgot_password_cont\").toggle();"+(mone_action?"Mone.touch(\"forgotpass_"+mone_action+"_logged\");":"")+"'>Forgot your password?</div>");aPopup.push("</div>");aPopup.push("<div id='login_loader' class='readlater_login_loader' style='display:none;float:left;margin:17px 0 0 1px'><img src='http://static3.cdn-seekingalpha.com/images/loader.gif' /></div>");aPopup.push("<div id='authentication_login_button' class='login_button' onclick='Authentication.Login()'><span class='l'></span><input class='c' type='button' value='Sign in' tabindex='52' /><span class='r'></span></div>");aPopup.push("</div>");aPopup.push("</fieldset>");aPopup.push("</form>");aPopup.push("<form id='authentication_forgot_password_form' onkeypress='KEY_FORM_PRESS(event,Authentication.Forgot_Password)' onsubmit='return false;'>");aPopup.push("<input type='hidden' name='id' value='"+Id+"'>");aPopup.push("<input type='hidden' name='activity' value='"+Activity+"'>");aPopup.push("<input type='hidden' name='function' value='"+Funcs.ForgotPassword+"'>");aPopup.push("<input type='hidden' name='url_source' value='"+top.location.href.replace(/\?.*?$/,'')+"'>");if(Additional_Data)aPopup.push("<input type='hidden' name='additional_data' value='"+Additional_Data+"'>");aPopup.push("<div class='forgot'>");aPopup.push("<span id='authentication_forgot_password_cont' style='display:none;'><div class='please_enter'>Please enter your email address:</div>");aPopup.push("<fieldset><input id='authentication_forgot_password_email' name='user[email]' autocorrect='off' autocapitalize='off' spellcheck='false' type='text'/><div class=\"forget_password_submit_wrapper\"><div id='forgot_password_loader' class='readlater_login_submit_loader' style='display:none;'><img src='http://static3.cdn-seekingalpha.com/images/loader.gif' /></div><div id='authentication_forgot_password_button' class='submit_button' onclick='Authentication.Forgot_Password();' onkeypress='return false;'><span class='r'></span><input class='c' type='button' value='Submit'/><span class='l'></span></div></div></fieldset></span>");aPopup.push("</div>");aPopup.push("</form>");aPopup.push("</div>");aPopup.push("<div id='authentication_notices' class='errors' style='display:none;'>");aPopup.push("<div id='authentication_register_notice' class='error1'></div>");aPopup.push("<div id='authentication_login_notice' class='error2'></div>");aPopup.push("</div>");aPopup.push("<div class='cleaner'></div>");return aPopup.join("");}
function joinUnit(Id,Activity,Funcs,Messages,Additional_Data,FocusOn,Force_Params){var aPopup=[]
aPopup.push("<div class='joinNow_content'>");if(Messages.CustomMessage){aPopup.push("<div class='top'>"+Messages.CustomMessage+"</div>");aPopup.push("<div class='top_title_area'>");}
else if(Messages.Login){aPopup.push("<div class='top'>You must be <strong>signed in</strong> to "+Messages.Login+":</div>");aPopup.push("<div class='top_title_area'>");}else{aPopup.push("<div class='top_title_area'>");}
aPopup.push("<div class='people_joined'><span class='num'>"+users_on_site+"</span> <span class='text'>people have already<br> joined Seeking Alpha<br> to track analysis of<br> stocks they follow and<br> exchange investment ideas.</span></div>");aPopup.push("</div>");aPopup.push("<form id='authentication_register_form' class='readlater_register' onkeypress='KEY_FORM_PRESS(event,Authentication.Register)' onsubmit='return false;'>");aPopup.push("<div class='authentication_register_form_cnt'>");aPopup.push("<input type='hidden' name='id' value='"+Id+"'>");aPopup.push("<input type='hidden' name='activity' value='"+Activity+"'>");aPopup.push("<input type='hidden' name='function' value='"+Funcs.Register+"'>");aPopup.push("<input type='hidden' name='url_source' value='"+top.location.href.replace(/\?.*?$/,'')+"'>");if(Additional_Data)aPopup.push("<input type='hidden' name='additional_data' value='"+Additional_Data+"'>");if(Force_Params)aPopup.push("<input type='hidden' name='force_params' value='"+Force_Params+"'>");aPopup.push("<h3>Join now (it's free):</h3>");aPopup.push("<fieldset><span>Choose Username</span><input type='text' id='authentication_register_nick' autocorrect='off' autocapitalize='off' spellcheck='false' maxlength='80' tabindex='39' name='user[nick]'/>");aPopup.push("<span class='gray_note'>you can use your real name</span>");aPopup.push("</fieldset>");aPopup.push("<fieldset><span>Email Address</span><input name='user[email]' autocorrect='off' autocapitalize='off' spellcheck='false' id='authentication_register_email' tabindex='40' type='text' /></fieldset>");aPopup.push("<fieldset><span>Create Password:</span><input name='user[password]' id='authentication_register_password' tabindex='41' type='password' autocorrect='off' autocomplete='off' autocapitalize='off' /></fieldset>");aPopup.push("<div class='agree'><input id='authentication_register_agree_to_terms' checked='checked' tabindex='44' type='checkbox'/>I agree to <a href='/page/terms-of-use' target='_blank'>Terms of Use</a> & <a href='/page/privacy' target='_blank'>Privacy Policy</a></div>");aPopup.push("<div style='margin:8px 0 0'><div id='authentication_register_button' class='register_button' onclick='Authentication.Register();' tabindex='45'><span class='l'></span><input class='c' type='button' value='Join'/><span class='r'></span></div><div id='register_loader' class='readlater_register_loader' style='display:none'><img src='http://static3.cdn-seekingalpha.com/images/loader.gif' /></div></div>");aPopup.push("<input type='hidden' name='referrer' value='"+(readCookie('session_referrer')||"")+"'>");aPopup.push("</div>");aPopup.push("</form>");aPopup.push("<div  class='already_member'></div>");aPopup.push("</div>");return aPopup.join("");}
function joinUnitForPromotion(){var aPopup=[];sendWordSearch({CustomMessage:"hp_promotion"});aPopup.push("<div class='register_promotion_top'>");aPopup.push("<div class='top_title'>save your stocks for next time</div>");aPopup.push("<div class='register_promotion_top_sign'>Already a member? <span class='link' id='promotion_reg'>Sign in</span></div>");aPopup.push(" <form id='authentication_register_form_hp_promotion' onkeypress='KEY_FORM_PRESS(event,function(){Authentication.Register(\"_hp_promotion\",null,SA.Pages.HP.Promotion.cleanReg);})' onsubmit='return false;'>");aPopup.push("<input type='hidden' name='id' value='login'>");aPopup.push("<input type='hidden' name='activity' value='rta'>");aPopup.push("<input type='hidden' name='function' value='FooterBar.Register'>");aPopup.push("<input type='hidden' name='url_source' value='"+top.location.href.replace(/\?.*?$/,'')+"'>");aPopup.push("<input type='hidden' name='referrer' value='"+(readCookie('session_referrer')||"")+"'>");aPopup.push("   <fieldset>");aPopup.push("   <div id='authentication_register_notice_hp_promotion'></div>");aPopup.push("   <div id='authentication_notices_hp_promotion'></div>");aPopup.push("   </fieldset>");aPopup.push("   <fieldset><input type='text' id='authentication_register_nick_hp_promotion' autocorrect='off' autocapitalize='off' spellcheck='false' maxlength='80' empty='username' name='user[nick]'/></fieldset>");aPopup.push("   <fieldset>");aPopup.push("     <input name='user[email]' autocorrect='off' autocapitalize='off' spellcheck='false' id='authentication_register_email_hp_promotion' empty='email' type='text' />");aPopup.push("   </fieldset>");aPopup.push("   <fieldset><input name='user[password]' id='authentication_register_password_hp_promotion' type='password' autocorrect='off' empty='password' autocomplete='off' autocapitalize='off' /></fieldset>");aPopup.push("   <div class='agree' style='margin-top:-6px;'><input name='realtime_articles' checked='checked' type='checkbox' id='promotion_reg_rta_chk'/>Get email alerts with breaking news and articles on your stocks</div>");aPopup.push("   <div id='authentication_register_button_hp_promotion' class='register_button' onclick='Authentication.Register(\"_hp_promotion\",null,SA.Pages.HP.Promotion.cleanReg);' tabindex='45'>Save</div>");aPopup.push("   <div class='agree terms'><input style='display:none' id='authentication_register_agree_to_terms_hp_promotion' checked='checked' type='checkbox'/>By clicking &quot;save&quot; you agree to Seeking Alpha&#39;s  <a href='/page/terms-of-use' target='_blank'>Terms of Use</a></div>");aPopup.push(" </form>");aPopup.push("</div>");return aPopup.join("");}
function sendWordSearch(Messages){if(Messages.CustomMessage){Authentication.WordsSearch(Messages.CustomMessage);}
else if(Messages.Login){Authentication.WordsSearch(Messages.Login);}else{mone_action="login";Mone.touch("log_reg_"+mone_action);}}
function Ziignight(Type,Callback,Symbols,ObjectName,Target,SASource){var _this=this;this.JSON=[];this.WorkJSON=[];this.Target=Target;this.Type=Type;this.Callback=Callback;this.Symbols=Symbols;this.ObjectName=ObjectName;this.Refresh=true;this.Sorted=-1;this.reverse_sort=1;this.left_symbols="";this.timeOut;this.addETF=true;this.JsTimeOut;this.JsReload=false;this.JsResponded=false;this.loadedFirstTime=false;this.pageType="Unknown";this.sasource=SASource||"ETF";this.gaType=SASource;this.User="shmueli@seekingalpha.com";this.Interval=120*1000;this.BroadBondIndexes="LAG,GBF,BSV,ITR,LWC";this.USGovernmentBonds="TLO,ITE,BIL,IPE";this.CorporateBonds="JNK,LQD,CLY,CIU,SCPB";this.InflationProtectedBonds="TIP";this.InternationalBonds="BWX,EMB,WIP,BWZ";this.USMunicipalBonds="CMF,TFI,ITM,MLN,SHM,NYF,VRD";this.MortgageBonds="MBG,CWB";this.CommoditiesMetals="GLD,PPLT,SLV,PALL";this.CommoditiesOil="OIL,GAZ";this.CommoditiesAgricultural="FUE,NIB,JO,CORN,BAL,JJG,COW,SGG";this.CommoditiesIndustrial="JJU,JJC,LD,JJN,JJT";this.CommoditiesBasket="JJA,GSC,JJE,JJM,WITE";this.Countries="EWA,EWO,EWK,EWZ,EWC,ECH,GXC,GXG,EGPT,EWQ,EWG,EWH,PIN,IDX,EIRL,EIS,EWI,JPP,EWM,EWW,EWN,EPU,PLND,RBL,EWS,EZA,EWY,EWP,EWD,EWL,EWT,THD,TUR,EWU,TMW,VNM,ENZL,NORW,EPHE,ARGT";this.CurrenciesSingle="FXA,BZF,FXB,FXC,CYB,FXE,ICN,FXY,SZR,FXS,FXF";this.CurrenciesLeveraged="URR,DRR,YCL,YCS";this.CurrenciesStrategies="AYT,PGD,ICI,UUP,UDN,CEW";this.USMarketCapDividends="DLN,DON,DES,DTD,DTN";this.InternationalDividends="DWX,DTH,DOO,DOL,DIM,DLS";this.GlobalRegionsDividends="DEM,DGS,FDD,DFE,DXJ,DFJ,GULF,AXJL";this.Earnings="EPS,EZM,EES,EXT";this.Strategies="PKW,PGF,SDY,PFF,PFM,PID,FVD";this.MarketsRegions="BIK,GMM,GMF,GUR,ESR,GML,EWX,GAF,FRN,MES,ILF";this.MarketsCountries="EWZ,ECH,GXC,GXG,EWH,PIN,IDX,EIS,EWM,EWW,EPU,RBL,EWS,EZA,EWY,EWT,THD,TUR,VNM,ARGT";this.MarketsThemes="BRXX,CHXX,ECON,EMIF,INXX";this.MarketsSectors="OGEM,FGEM,EMMT,EMT";this.MarketsDividends="DEM,DGS,GULF,HILO";this.GlobalWorld="DGT,IOO,MDD,GWX,ACWI,GWL";this.GlobalEmerging="EFA,EFG,EFV,GMM,EWX";this.GlobalRegions="AIA,BIK,GMF,IEV,GUR,ESR,GML,GAF,EZU,FEU,FEZ,ILF,EPP";this.GrowthBroadMarkets="IWZ,IWW,EFG,EFV";this.GrowthDJIndexes="ELG,ELV,EMG,EMV,DSG,DSV";this.GrowthRussellIndexes="IWF,IWD,IWP,IWS,IWO,IWN";this.GrowthMorningstarIndexes="JKE,JKF,JKH,JKI,JKK,JKL";this.GrowthSPIndexes="SPYG,SPYV,MDYG,MDYV,SLYG,SLYV";this.MarketCapBroadMarkets="SCZ,EWX,MDD,GWX";this.MarketCapDJIndexes="ELR,EMM,FDM";this.MarketCapSPIndexes="SPY,MDY,IJR";this.MarketCapRussellIndexes="IWB,IWR,IWM,IWC";this.MarketCapMorningstarIndexes="JKD,JKG,JKJ";this.MarketCapWeightIndexes="RSP,QQEW";this.MarketCapSingleCountry="KROO,EWZS,BRF,CNDA,HAO,ECNS,SCIN,SCIF,SCJ,JSC,DFJ,BRAZ,RSXJ,GERJ";this.RealEstateGlobal="IFAS,IFEU,IFNA,RWX,RWR,RWO";this.RealEstateUS="FNIO,REM,REZ,RTL";this.RealEstateStrategies="XHB";this.SectorsUS="XLB,XLY,XLP,XLE,XLF,XLV,XLI,XLK,XLU";this.SectorsGlobal="MXI,RXI,KXI,IXC,IXG,IXJ,EXI,IXN,IXP,JXI";this.SectorsForeign="IRV,IPD,IPS,IPW,IPF,IRY,IPN,IPK,IST,IPU";this.StrategiesStrategies="PKW,BWV,GCE,DOD,EQL,QAI,MCRO,MNA,CSD,RYJ,CPI,PIZ,PIE,FPX,FVL,SPHB,SPLV";this.AlternativeAssetClasses="ALT,HEDJ,VXX,VXZ";this.MixedFundamentals="PAF,PXF,PDN,PXH,PRF,PRFZ";this.StrategiesEarnings="EPS,EZM,EES,EXT";this.StrategiesRevenue="RWL,RWK,RWJ,RWW,RTR,RWV";this.AssetAllocation="AOA,AOK,AOR,AOM";this.SocialAndFaith="KLD,DSI";this.ThemesAlternativeEnergy="GRN,EVX,PKN,TAN,FAN";this.Consumer="BJK,PBJ,XHB,XRT,CARZ";this.Energy="XES,XOP";this.Financials="KBE,IAI,KCE,PSP,KIE,KME,KRE";this.Healthcare="XBI,IHF,IHI,XPH";this.Industrial="ITA,FAA,GII,PIO,IYT";this.Material="KOL,GDX,HAP,GDXJ,XME,SLX";this.Technology="IGN,XSD,IGV";this.KeyUSEquities="SPY,EMM,SLY,IWC,DIA";this.KeyUGlobalEquities="BIK,EFA,GMM,CWI,ACWI";this.KeyUBonds="LAG,JNK,BWX,IPE,TLT";this.KeyUCommodities="GLD,PTM,SLV,OIL,JJM,JJA";this.KeyUCurrencies="FXB,CYB,FXE,FXY";this.HpMarketPerformance="SPY,IJH,IJR,DIA,QQQ,EEM,ICF,GLD,SLV";this.CreateQuery=function(tag_list,custom_callback){var tag_array=tag_list.split(","),query,tagsquery=[];if(tag_array.length<=20){tag_array.each(function(tag,i){tagsquery.push("S"+(i+1)+"="+tag);});}else{for(var i=0;i<20;i++){tagsquery.push("S"+(i+1)+"="+tag_array[i]);}}
tagsquery="&"+tagsquery.join("&");function addDummies(start_num,num){var dummy=[];for(var i=0;i<num;i++){dummy.push("S"+(i+start_num)+"=DUMMY")}
if(num)
return("&"+dummy.join("&"));else
return"";}
if(tag_array.length==1){tagsquery=tagsquery;query="http://splices.xignite.com/seekingalpha_OneSymbolChangeReport.json?Header_Username="+_this.User+"&_callback="+_this.ObjectName+".Callbacks."+(custom_callback||_this.Callback)+tagsquery;}else if(tag_array.length<=5){tagsquery=tagsquery+addDummies(5-(5-tag_array.length)+1,5-tag_array.length);query="http://splices.xignite.com/seekingalpha_FiveSymbolsChangeReport.json?Header_Username="+_this.User+"&_callback="+_this.ObjectName+".Callbacks."+(custom_callback||_this.Callback)+tagsquery;}else if(tag_array.length<=10){tagsquery=tagsquery+addDummies(10-(10-tag_array.length)+1,10-tag_array.length);query="http://splices.xignite.com/seekingalpha_TenSymbolChangeReport.json?Header_Username="+_this.User+"&_callback="+_this.ObjectName+".Callbacks."+(custom_callback||_this.Callback)+tagsquery;}else if(tag_array.length<=15){tagsquery=tagsquery+addDummies(15-(15-tag_array.length)+1,15-tag_array.length);query="http://splices.xignite.com/seekingalpha_FifteenReportChange.json?Header_Username="+_this.User+"&_callback="+_this.ObjectName+".Callbacks."+(custom_callback||_this.Callback)+tagsquery;}else if(tag_array.length<=20){tagsquery=tagsquery+addDummies(20-(20-tag_array.length)+1,20-tag_array.length);query="http://splices.xignite.com/seekingalpha_TwentySymbolsChangeReport.json?Header_Username="+_this.User+"&_callback="+_this.ObjectName+".Callbacks."+(custom_callback||_this.Callback)+tagsquery;}else{_this.left_symbols=tag_array.slice(20).join(",");query="http://splices.xignite.com/seekingalpha_TwentySymbolsChangeReport.json?Header_Username="+_this.User+"&_callback="+_this.ObjectName+".Callbacks."+(custom_callback||_this.Callback)+tagsquery;}
return query;}
this.Urls={Multi:"http://splices.xignite.com/seekingalpha_GetBATSLastSales.json?Header_Username="+this.User+"&_callback=oZiignight.Callbacks."+Callback+"&Symbols=DIA%2cSPY%2c"+this.Symbols,Market:"http://splices.xignite.com/seekingalpha_GetBATSLastSales.json?Header_Username="+this.User+"&_callback=oZiignight.Callbacks."+Callback+"&Symbols=DIA%2cSPY",Year:"http://splices.xignite.com/seekingalpha_getOneYearChange.json?Header_Username="+this.User+"&_callback="+Callback+"&Identifier="+this.Symbols,Single:"http://splices.xignite.com/seekingalpha_GetBATSQuote.json?Header_Username="+this.User+"&Symbol="+this.Symbols+"&_callback=oZiignight.Callbacks."+Callback}
this.Init=function(Type){if(_this.Callback=="Symbol"&&_this.Type=="Single"&&this.Symbols.match(/(?:\.pk)|(?:.ob)/i))return;if(_this.Callback=="ETForETN"){this.Refresh=false;setTimeout(function(){this.RemoteJSON(_this.CreateQuery(_this[_this.Type]))}.bind(this),this.Interval);}else if(_this.Callback=="ETFDashboard"){}else if(_this.Callback=="SAlternative"){this.Refresh=false;this.RemoteJSON(_this.CreateQuery(_this.Symbols));}else if(_this.Callback=="Portfolio"){this.loadedFirstTime=true;if(getURLParam("bplan")!="true"){document.write("<scri"+"pt src='"+this.Urls[this.Type]+"'>"+"</scri"+"pt>");setTimeout(function(){this.JSON=[];this.ReloadJSON();}.bind(this),this.Interval);}else{this.RemoteJSON(this.Urls[this.Type]);}}else{this.RemoteJSON(this.Urls[this.Type]);}}
this.RemoteJSON=function(Url){setTimeout(function(){this.Script=document.createElement('script');this.Script.type="text/javascript";this.Script.src=Url;document.body.insertBefore(this.Script,document.body.firstChild);if(this.Refresh){setTimeout(function(){this.JSON=[];this.ReloadJSON();}.bind(this),this.Interval);}}.bind(this),10);}
this.ValidateJSLoad=function(){if(_this.Callback=="Portfolio"){if((_this.WorkJSON.length==0&&!_this.JsReload)||(_this.Callback=="Portfolio"&&!_this.JsResponded)){_this.JsReload=true;clearTimeout(_this.JsTimeOut);_this.JSON=[];_this.ReloadJSON();}}}
this.ReloadJSON=function(){if($(this.Script))$(this.Script).remove();if(_this.Callback=="ETForETN"){this.RemoteJSON(_this.CreateQuery(_this[_this.Type]));}else if((_this.Callback=="ETFDashboard")||(_this.Callback=="SAlternative")){_this.Symbols=_this.Symbols.split(",").uniq().join(",");this.RemoteJSON(_this.CreateQuery(_this.Symbols));}else{this.RemoteJSON(this.Urls[this.Type]);}}
this.InsertEtfAlternativeSymbol=function(symb){_this.Refresh=false;var request=true;_this.WorkJSON.each(function(json){if(symb.toUpperCase().indexOf(json.S.toUpperCase())!=-1){request=false;};});if(request){var query="http://splices.xignite.com/seekingalpha_OneSymbolChangeReport.json?Header_Username="+_this.User+"&_callback="+_this.ObjectName+".Callbacks.SAAlternativeUpdate&S1="+symb;_this.RemoteJSON(query);}}
this.InsertEtfAlternativeSymbols=function(symbs){_this.Refresh=false;symbs=cleanSymbolString(symbs);var tmpsymbs=symbs.toUpperCase().split(",");_this.WorkJSON.each(function(json){if(tmpsymbs.indexOf(json.S.toUpperCase())!=-1){tmpsymbs=tmpsymbs.without(json.S.toUpperCase())};});symbs=tmpsymbs.join(",");if(!symbs)return;var query=_this.CreateQuery(symbs,'SAAlternativeAddStocks');this.RemoteJSON(query);}
this.Callbacks={Portfolio:function(JSON){var oSymbolsPortfolio=$('SymbolData'),aHtml=[];_this.JsResponded=true;JSON.Q=JSON.Q.splice(2,JSON.Q.length).sort(function(a,b){if(a.S>b.S)return 1;if(b.S>a.S)return-1;return 0;});aHtml.push('<table>');aHtml.push('<tbody>');aHtml.push('<tr>');aHtml.push('<style></style>');aHtml.push('<th class="symbol">Symbol</th>');aHtml.push('<th class="last_trade" colspan="2">Last Trade</th>');aHtml.push('<th class="change" colspan="2">Change</th>');aHtml.push('<th></th>');aHtml.push('</tr>');JSON.Q.each(function(Q,i){if(Q.S.length){Q=_this.NotAvailable(Q);if(i%2){aHtml.push('<tr>');}
else{aHtml.push('<tr class="gray">');}
aHtml.push('<td class="symbol">'+'<a onmouseover="symbolLinkAddAltAndTitle(this)" sasource="portfolio_table" href="/symbol/'+Q.S.toLowerCase()+'">'+Q.S.toUpperCase()+'</a></td>');aHtml.push('<td class="last_trade">'+_this.FixHour(Q.T)+'</td>');aHtml.push('<td class="last_trade2">'+_this.FixDecimalPoint(Q.L)+'</td>');aHtml.push('<td class="number '+_this.GetClassName(_this.FixDecimalPoint(Q.C))+'"><span>'+_this.FixDecimalPoint(Q.C,false,true)+'</span></td>');aHtml.push('<td class="percent '+_this.GetClassName(_this.FixDecimalPoint(Q.P))+'"><span>'+_this.FixDecimalPoint(Q.P,false,true)+(Q.P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="more"><a href="/symbol/'+Q.S.toLowerCase()+'">more&nbsp;&raquo;</a></td>');aHtml.push('</tr>');}});aHtml.push('</tbody>');aHtml.push('</table>');if(_this.loadedFirstTime)
oSymbolsPortfolio.update(aHtml.join(''));else
document.write(aHtml.join(''));},Market:function(JSON){var oMarketDJIA_Percent=$('market_djia_percent'),oMarketSAP_Percent=$('market_sap_percent');if(oMarketDJIA_Percent!=null)
oMarketDJIA_Percent.update(_this.FixDecimalPoint(JSON.Q[0].P)+"%").addClassName(_this.GetClassName(_this.FixDecimalPoint(JSON.Q[0].P)));if(oMarketSAP_Percent!=null)
oMarketSAP_Percent.update(_this.FixDecimalPoint(JSON.Q[1].P)+"%").addClassName(_this.GetClassName(_this.FixDecimalPoint(JSON.Q[1].P)));},Symbol:function(JSON){var oSymbol_Trade=$('symbol_last_trade'),oSymbol_Change=$('symbol_change'),oSymbol_Percent=$('symbol_procent_change'),oSymbol_Time=$('symbol_time');try{oSymbol_Trade.update(_this.FixDecimalPoint(JSON.Last));oSymbol_Change.update(_this.FixDecimalPoint(JSON.Change)).addClassName(_this.GetClassName(_this.FixDecimalPoint(JSON.Change))+'1');oSymbol_Percent.update(_this.FixDecimalPoint(JSON.PercentChange)+"%");oSymbol_Time.update(JSON.Date+" "+JSON.Time);}catch(err){}},ETForETN:function(JSON){for(var i=1;(i<=_this[_this.Type].split(",").length)&&(i<21);i++){if(JSON["Symbol"+i].S!="DUMMY"){JSON["Symbol"+i].realName=_this.DashboardRealNames[JSON["Symbol"+i].S.toUpperCase()]
_this.JSON.push(JSON["Symbol"+i]);}else
break;}
if(_this.left_symbols!=""){$(_this.Script).remove();var tempSymbols=_this.left_symbols;_this.left_symbols="";_this.RemoteJSON(_this.CreateQuery(tempSymbols));return;}else{_this.WorkJSON=[];_this.WorkJSON=_this.JSON.clone();_this.JSON=[];if(_this.timeOut)clearTimeout(_this.timeOut);_this.timeOut=setTimeout(function(){_this.ReloadJSON();},_this.Interval);}
if(_this.Sorted==-1)
_this.ETForETNPrint(4);else{_this.reverse_sort=_this.reverse_sort*-1;_this.ETForETNPrint(_this.Sorted);}},ETFDashboard:function(JSON){for(var i=1;(i<=_this.Symbols.split(",").length)&&(i<21);i++){if(JSON["Symbol"+i].S!="DUMMY"){JSON["Symbol"+i].realName=_this.DashboardSymbolToName[JSON["Symbol"+i].S.toUpperCase()]
_this.JSON.push(JSON["Symbol"+i]);}else
break;}
if(_this.left_symbols!=""){$(_this.Script).remove();var tempSymbols=_this.left_symbols;_this.left_symbols="";_this.RemoteJSON(_this.CreateQuery(tempSymbols));return;}else{_this.WorkJSON=[];_this.WorkJSON=_this.JSON.clone();_this.JSON=[];if(_this.timeOut)clearTimeout(_this.timeOut);}
if(_this.Sorted==-1)
_this.ETFDashboardPrint(0);else{_this.reverse_sort=_this.reverse_sort*-1;_this.ETFDashboardPrint(_this.Sorted);}},SAlternative:function(JSON){for(var i=1;(i<=_this.Symbols.split(",").length)&&(i<21);i++){if(JSON["Symbol"+i].S!="DUMMY"){_this.JSON.push(JSON["Symbol"+i]);}else
break;}
if(_this.left_symbols!=""){$(_this.Script).remove();var tempSymbols=_this.left_symbols;_this.left_symbols="";_this.RemoteJSON(_this.CreateQuery(tempSymbols));return;}else{_this.WorkJSON=[];_this.WorkJSON=_this.JSON.clone();_this.JSON=[];if(_this.timeOut)clearTimeout(_this.timeOut);}
if(_this.Sorted==-1)
_this.SAlternativePrint(-1);else{_this.reverse_sort=_this.reverse_sort*-1;_this.SAlternativePrint(_this.Sorted);}},SAAlternativeUpdate:function(JSON){if(top.location.pathname.match("/symbol/(.*?)(?:\/|$)")&&JSON["Symbol1"].S.toUpperCase()==top.location.pathname.match("/symbol/(.*?)(?:\/|$)")[1].toUpperCase()&&JSON["Symbol1"].S.match(/(?:\.pk)|(?:.ob)/i)){var oSymbol_Trade=$('symbol_last_trade'),oSymbol_Change=$('symbol_change'),oSymbol_Percent=$('symbol_procent_change');try{oSymbol_Trade.update(_this.FixDecimalPoint(JSON["Symbol1"].NOW_L));oSymbol_Change.update(_this.FixDecimalPoint(JSON["Symbol1"].NOW_C)).addClassName(_this.GetClassName(_this.FixDecimalPoint(JSON["Symbol1"].NOW_C))+'1');oSymbol_Percent.update(_this.FixDecimalPoint(JSON["Symbol1"].NOW_P)+"%");}catch(err){}}
var oSymbolLastTrade=$('symbol_last_trade');_this.WorkJSON.unshift(JSON["Symbol1"]);_this.SAlternativePrint(2);},SAAlternativeAddStocks:function(JSON){for(var i=1;JSON["Symbol"+i];i++){if(JSON["Symbol"+i].S!="DUMMY"){_this.WorkJSON.push(JSON["Symbol"+i]);}else
break;}
_this.SAlternativePrint(-1);}}
this.ETFDashboardPrint=function(sorted){var aHtml=[];var oDashboard=_this.Target;var JSON=addRealNames(_this.WorkJSON,true);var sort_by;if(sorted==undefined)sorted=1;if(sorted){if(sorted==_this.Sorted)_this.reverse_sort=_this.reverse_sort*-1;else
_this.reverse_sort=1;_this.Sorted=sorted;}
switch(sorted){case 1:sort_by="realName";break;case 2:sort_by="NOW_P";break;case 3:sort_by="OYA_P";break;default:sort_by="realName";}
JSON=JSON.sort(function(a,b){if(a[sort_by]<b[sort_by])
return sort_by=="realName"?-1*_this.reverse_sort:1*_this.reverse_sort;if(b[sort_by]<a[sort_by])
return sort_by=="realName"?1*_this.reverse_sort:-1*_this.reverse_sort;return 0;});aHtml.push('<table style="border:1px solid #DBDBDB; border-top:none;">');aHtml.push('<tr>');aHtml.push(' <th class="eft_or_etn '+(_this.Sorted==1?"sorted ":"")+(_this.Sorted==1&&_this.reverse_sort==-1?"up":"")+'"><span>Popular ETFs</span></th>');aHtml.push(' <th class="today '+(_this.Sorted==2?"sorted ":"")+(_this.Sorted==2&&_this.reverse_sort==-1?"up":"")+'"><span><b onclick="'+(_this.Sorted==2&&_this.reverse_sort==1?"":_this.ObjectName+'.ETFDashboardPrint(2)')+'">Today</b></span></th>');aHtml.push(' <th class="last '+(_this.Sorted==3?"sorted ":"")+(_this.Sorted==3&&_this.reverse_sort==-1?"up":"")+'"><span><b onclick="'+(_this.Sorted==3&&_this.reverse_sort==1?"":_this.ObjectName+'.ETFDashboardPrint(3)')+'">1&nbsp;Yr</b></span></th>');aHtml.push('</tr>');var sasource_attr=_this.sasource?' sasource="'+_this.sasource+'"':'';JSON.each(function(Q,i){if(Q.S.length){Q=_this.NotAvailable(Q);if(i%2){aHtml.push('<tr class="gray">');}else{aHtml.push('<tr>');}
aHtml.push('<td class="eft_or_etn">'+_this.DashboardSymbolToName[Q.S.toUpperCase()]+'&nbsp;(<a onmouseover="symbolLinkAddAltAndTitle(this)" sasource="popular_etfs_table" href="/symbol/'+Q.S.toLowerCase()+'"'+sasource_attr+'>'+Q.S.toUpperCase()+'</a>)</td>');aHtml.push('<td class="today '+_this.GetClassName(_this.FixDecimalPoint(Q.NOW_P,1))+'"><span>'+_this.FixDecimalPoint(Q.NOW_P,1)+(Q.NOW_P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="last '+_this.GetClassName(_this.FixDecimalPoint(Q.OYA_P,1))+'"><span>'+_this.FixDecimalPoint(Q.OYA_P,1)+(Q.OYA_P!='N/A'?'%':'')+'</span></td>');aHtml.push('</tr>');}});aHtml.push('</table>');$(oDashboard).update(aHtml.join(''));}
this.ETForETNPrint=function(sorted){var aHtml=[];var JSON=addRealNames(_this.WorkJSON);var sort_by;if(sorted==undefined)sorted=4;if(sorted){if(sorted==_this.Sorted)_this.reverse_sort=_this.reverse_sort*-1;else
_this.reverse_sort=1;_this.Sorted=sorted;}
switch(sorted){case 1:sort_by="realName";break;case 2:sort_by="NOW_P";break;case 3:sort_by="TMA_P";break;case 4:sort_by="OYA_P";break;case 5:sort_by="YTD_P";break;default:sort_by="realName";}
JSON=JSON.sort(function(a,b){if(a[sort_by]<b[sort_by])
return sort_by=="realName"?-1*_this.reverse_sort:1*_this.reverse_sort;if(b[sort_by]<a[sort_by])
return sort_by=="realName"?1*_this.reverse_sort:-1*_this.reverse_sort;return 0;});aHtml.push('<table>');aHtml.push('<tr>');aHtml.push(' <th class="eft_or_etn '+(_this.Sorted==1?"sorted ":"")+(_this.Sorted==1&&_this.reverse_sort==-1?"up":"")+'" onclick="'+_this.ObjectName+'.ETForETNPrint(1)"><span>ETF&nbsp;or&nbsp;ETN</span></th>');aHtml.push(' <th class="'+(_this.Sorted==2?"sorted ":"")+(_this.Sorted==2&&_this.reverse_sort==-1?"up":"")+'" onclick="'+_this.ObjectName+'.ETForETNPrint(2)"><span>Today</span></th>');aHtml.push(' <th class="'+(_this.Sorted==3?"sorted ":"")+(_this.Sorted==3&&_this.reverse_sort==-1?"up":"")+'" onclick="'+_this.ObjectName+'.ETForETNPrint(3)"><span>3&nbsp;Mths</span></th>');aHtml.push(' <th class="'+(_this.Sorted==4?"sorted ":"")+(_this.Sorted==4&&_this.reverse_sort==-1?"up":"")+'"  onclick="'+_this.ObjectName+'.ETForETNPrint(4)"><span>1&nbsp;Yr</span></th>');aHtml.push(' <th class="last '+(_this.Sorted==5?"sorted ":"")+(_this.Sorted==5&&_this.reverse_sort==-1?"up":"")+'" onclick="'+_this.ObjectName+'.ETForETNPrint(5)"><span>YTD</span></th>');aHtml.push('</tr>');JSON.each(function(Q,i){if(Q.S.length){Q=_this.NotAvailable(Q);if(i%2){aHtml.push('<tr class="gray">');}else{aHtml.push('<tr>');}
aHtml.push('<td class="eft_or_etn">'+_this.DashboardRealNames[Q.S.toUpperCase()]+'&nbsp;(<a onmouseover="symbolLinkAddAltAndTitle(this)" href="/symbol/'+Q.S.toLowerCase()+'">'+Q.S.toUpperCase()+'</a>)</td>');aHtml.push('<td class="'+_this.GetClassName(_this.FixDecimalPoint(Q.NOW_P,1))+'"><span>'+_this.FixDecimalPoint(Q.NOW_P,1)+(Q.NOW_P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="'+_this.GetClassName(_this.FixDecimalPoint(Q.TMA_P,1))+'"><span>'+_this.FixDecimalPoint(Q.TMA_P,1)+(Q.TMA_P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="'+_this.GetClassName(_this.FixDecimalPoint(Q.OYA_P,1))+'"><span>'+_this.FixDecimalPoint(Q.OYA_P,1)+(Q.OYA_P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="last '+_this.GetClassName(_this.FixDecimalPoint(Q.YTD_P,1))+'"><span>'+_this.FixDecimalPoint(Q.YTD_P,1)+(Q.YTD_P!='N/A'?'%':'')+'</span></td>');aHtml.push('</tr>');}});aHtml.push('</table>');$(_this.Target).innerHTML=aHtml.join('');}
this.SAlternativePrint=function(sorted){var aHtml=[];var JSON=_this.WorkJSON;var sort_by;if(sorted==undefined)sorted=4;if(sorted){if(sorted==_this.Sorted)_this.reverse_sort=_this.reverse_sort*-1;else
_this.reverse_sort=1;_this.Sorted=sorted;}
switch(sorted){case 1:sort_by="S";break;case 2:sort_by="NOW_P";break;case 3:sort_by="TMA_P";break;case 4:sort_by="OYA_P";break;case 5:sort_by="YTD_P";break;default:sort_by="S";}
if(sorted!=-1){JSON=JSON.sort(function(a,b){if(a[sort_by]<b[sort_by])
return sort_by=="S"?-1*_this.reverse_sort:1*_this.reverse_sort;if(b[sort_by]<a[sort_by])
return sort_by=="S"?1*_this.reverse_sort:-1*_this.reverse_sort;return 0;});}
aHtml.push('<table>');aHtml.push('<tr>');aHtml.push(' <th class="eft_or_etn '+(_this.Sorted==1?"sorted ":"")+(_this.Sorted==1&&_this.reverse_sort==-1?"up":"")+'"><span>'+_this.sasource+'s</span></th>');aHtml.push(' <th class="today '+(_this.Sorted==2?"sorted ":"")+(_this.Sorted==2&&_this.reverse_sort==-1?"up":"")+'"><span><b onclick="'+(_this.Sorted==2&&_this.reverse_sort==1?"":_this.ObjectName+'.SAlternativePrint(2)')+'">Today</b></span></th>');aHtml.push(' <th class="'+(_this.Sorted==3?"sorted ":"")+(_this.Sorted==3&&_this.reverse_sort==-1?"up":"")+'"><span><b onclick="'+(_this.Sorted==3&&_this.reverse_sort==1?"":_this.ObjectName+'.SAlternativePrint(3)')+'">3&nbsp;Mths</b></span></th>');aHtml.push(' <th class="'+(_this.Sorted==4?"sorted ":"")+(_this.Sorted==4&&_this.reverse_sort==-1?"up":"")+'"><span><b onclick="'+(_this.Sorted==4&&_this.reverse_sort==1?"":_this.ObjectName+'.SAlternativePrint(4)')+'">1&nbsp;Yr</b></span></th>');aHtml.push(' <th class="last '+(_this.Sorted==5?"sorted ":"")+(_this.Sorted==5&&_this.reverse_sort==-1?"up":"")+'"><span><b onclick="'+(_this.Sorted==5&&_this.reverse_sort==1?"":_this.ObjectName+'.SAlternativePrint(5)')+'">YTD</b></span></th>');aHtml.push('</tr>');JSON.each(function(Q,i){if(Q.S.length){Q=_this.NotAvailable(Q);var is_selected_row="";if(_this.selectedSymbol&&Q.S.toUpperCase()==_this.selectedSymbol.toUpperCase()){is_selected_row="etf_selected";}
if(i%2){aHtml.push('<tr class="gray '+is_selected_row+'">');}else{aHtml.push('<tr class="'+is_selected_row+'">');}
aHtml.push('<td class="eft_or_etn"><a onmouseover="symbolLinkAddAltAndTitle(this)" href="/symbol/'+Q.S.toLowerCase()+'" onclick="trackLink(this, \''+_this.gaType+' Alternatives\', \''+_this.pageType+'\', \''+Q.S.toUpperCase()+'\');">'+Q.S.toUpperCase()+'</a></td>');aHtml.push('<td class="today '+_this.GetClassName(_this.FixDecimalPoint(Q.NOW_P,1))+'"><span>'+_this.FixDecimalPoint(Q.NOW_P,1)+(Q.NOW_P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="'+_this.GetClassName(_this.FixDecimalPoint(Q.TMA_P,1))+'"><span>'+_this.FixDecimalPoint(Q.TMA_P,1)+(Q.TMA_P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="'+_this.GetClassName(_this.FixDecimalPoint(Q.OYA_P,1))+'"><span>'+_this.FixDecimalPoint(Q.OYA_P,1)+(Q.OYA_P!='N/A'?'%':'')+'</span></td>');aHtml.push('<td class="last '+_this.GetClassName(_this.FixDecimalPoint(Q.YTD_P,1))+'"><span>'+_this.FixDecimalPoint(Q.YTD_P,1)+(Q.YTD_P!='N/A'?'%':'')+'</span></td>');aHtml.push('</tr>');}});aHtml.push('</table>');if(_this.addETF){aHtml.push('<div class="data_currencies_table_inputs">');aHtml.push('<input type="text" class="text_input" id="autocomplete_sa_'+_this.ObjectName+'" value="Add stock or ETF" onblur="this.style.color=this.value==\'\' ? \'#8D8D8D\' : \'#000000\';handleInput(this,\'blur\')" onfocus="this.style.color=\'#000000\';this.style.fontStyle=\'normal\';handleInput(this,\'focus\')" title=\'Add stock or ETF\'/><input type="button" class="button_input" value="Compare" onclick="'+_this.ObjectName+'.InsertEtfAlternativeSymbols($(\'autocomplete_sa_'+_this.ObjectName+'\').value);$(\'autocomplete_sa_'+_this.ObjectName+'\').value=\'\';">');aHtml.push('<div id="'+_this.ObjectName+'_container"></div>');aHtml.push('</div>');}
$(_this.Target).innerHTML=aHtml.join('');if(_this.addETF){$(_this.ObjectName+'_container').innerHTML=AutoCompleteSAConfig.Create(_this.ObjectName,{Authors:false,AutoInsert:true,WriteToDocument:false,IframeCover:true,MultipleInsert:true});eval('AutoCompleteSAConfig.Packages.'+_this.ObjectName+'.Init()');}}
this.GetClassName=function(P){if(P<0)return'down';if(P>=0)return'up';return"";}
this.FixDecimalPoint=function(Int,Round,abs){if(Int=='N/A')return Int;Int=parseFloat(Int);if(abs)Int=Math.abs(Int);var res=(((""+Int).indexOf(".")>-1?Int+"00":""+Int)*1).toFixed(Round?1:2)
return res!=0?res:0;}
this.FixHour=function(Hour){if(Hour=='N/A')return Hour;else if(Hour==null)return'N/A';Hour=Hour.toLowerCase();var result=Hour.replace(/(\d+\:\d+)\:\d+\s(\w+)/g,"$1"+"$2"+"&nbsp;ET");return Hour!=0?result:0;}
this.NotAvailable=function(Q){return Q.L==0&&Q.C==0&&Q.P==0?{S:Q.S,L:'N/A',C:'N/A',P:'N/A'}:Q;}
function addRealNames(JSON,dashboard){if(JSON[0].realName)return JSON;JSON.each(function(Q){if(!dashboard){Q.realName=_this.DashboardRealNames[Q.S.toUpperCase()]}else{Q.realName=_this.DashboardSymbolToName[Q.S.toUpperCase()]}});return JSON;}}
Ziignight.prototype.PortfolioPreview=function(Symbols){var oSymbolsPortfolio=$('SymbolData'),aSymbols=Symbols.split(','),aHtml=[];aSymbols=aSymbols.sort(function(a,b){if(a>b)return 1;if(b>a)return-1;return 0;});aHtml.push('<table>');aHtml.push('<tbody>');aHtml.push('<tr>');aHtml.push('<th class="symbol">Symbol</th>');aHtml.push('<th colspan="2">Last Trade</th>');aHtml.push('<th colspan="3" class="change">Change</th>');aHtml.push('</tr>');aSymbols.each(function(Q,i){aHtml.push('<tr>');aHtml.push('<td class="symbol">'+'<a href="/symbol/'+Q.toLowerCase()+'">'+Q.toUpperCase()+'</a></td>');aHtml.push('<td class="last_trade loader" colspan="5">&nbsp;</td>');aHtml.push('</tr>');});aHtml.push('</tbody>');aHtml.push('</table>');oSymbolsPortfolio.update(aHtml.join(''));}
Ziignight.prototype.DashboardYearHash={};Ziignight.prototype.DashboardSymbolToName={"IWV":"Total U.S. Market","ICF":"U.S. Real Estate","TLT":"20+ Yr. Treasurys","LQD":"U.S. Corporate Bonds","HYG":"U.S. High Yield Bonds","IAU":"Gold","SLV":"Silver","GSG":"Commodities","IYM":"Basic Materials","IYK":"Consumer Goods","IYC":"Consumer Services","IYE":"Energy","IYG":"Financial","IYH":"Health Care","IYJ":"Industrial","IYW":"Technology","IDU":"Utilities","EEM":"Emerging Markets","EFA":"Developed Markets","ILF":"Latin America 40","FXI":"China","EWJ":"Japan","EWZ":"Brazil","EZU":"European Monetary Zone","EWW":"Mexico","EWT":"Taiwan","IJR":"Small Caps","IJH":"Mid Caps","IVV":"Large Caps","AGG":"Aggregate Bonds","ALT":"Alternative Assets","IGOV":"Int. Govt. Bonds","REZ":"Real Estate: Residential","DVY":"U.S. Dividend Stocks","IYR":"Real Estate: U.S.","IVE":"Large Cap Value","IJS":"Small Cap Value","SHY":"1-3 Yr Treasurys","IEF":"7-10 Yr Treasurys","TLH":"10-20 Yr Treasurys","TIP":"U.S. TIPs","MUB":"Municipal Bonds","WPS":"Real Estate: Foreign","IDV":"Int. Dividend Stocks","IWC":"U.S. Microcaps","PFF":"Preferred Stocks","EMB":"Emerging Mkt. Govt. Bonds","ITB":"Homebuilders","IWF":"Large Cap Growth","IWD":"Large Cap Value","IWP":"Mid Cap Growth","IWS":"Mid Cap Value","IWO":"Small Cap Growth","IWN":"Small Cap Value","XLK":"Tech Sector","XSD":"Semiconductors","IGV":"Software","TAN":"Solar","IGN":"Networking","XBI":"Biotech","XPH":"Pharmaceuticals","XLV":"U.S. Healthcare","IXJ":"Global Healthcare","IHI":"Medical Devices","IHF":"Healthcare Providers"};var socialSA={enabledProviders:["twitter","facebook","linkedin"],instances:{},gigya_units:[],in_progress:{},now_posting:0,init:function(){if(!is_users_cookie_exists())return;socialSA.gigya_units=$$(".gigya_unit");socialSA.gigya_units.each(function(unit){var instance_name=unit.getAttribute("gigya_id");socialSA.instances[instance_name]=new socialSAClass(unit);});},authenticate:function(network,unit_name){if(unit_name!='settings'&&readCookie(network+"_auth")>0){socialSA.set_checkbox_status(network,true);}else{if(unit_name=="settings"){createCookie('save_'+network,1,1);}
socialSA.in_progress['pop_'+network]=social_popup('/social/authenticate_'+network,network);}},disconnect:function(network){socialSA.in_progress[network]=1;new Ajax.Request('/social/disconnect',{parameters:{network:network},onComplete:function(transport){if(transport.status==200){socialSA.in_progress[network]=null;}}});},social_post:function(network,msg){socialSA.now_posting+=1;new Ajax.Request('/social/post_to_'+network,{method:'post',parameters:{msg:msg},onComplete:function(transport){socialSA.now_posting-=1;pageTracker._trackEvent(network.capitalize()+' Tracking','share',location.pathname);}});},set_checkbox_status:function(network,status){$$("."+network+" input").each(function(el){el.setAttribute("checked",status);el.checked=status;});},share_post_object:function(type){var post_object=readCookie('gigya_post_object');var socialSAObj=this.instances[type];if(post_object&&socialSAObj&&socialSAObj.selected_providers().length>0){socialSAObj.shareActivity(post_object);setTimeout(function(){if(window.share_callback)share_callback();window.share_callback=null;},3000);}else{if(window.share_callback)share_callback();window.share_callback=null;}
eraseCookie('gigya_post_object');},add:function(target,settings){if(!is_users_cookie_exists())return;target=$(target);var instance_name=target.getAttribute("gigya_id");socialSA.instances[instance_name]=new socialSAClass(target,settings);}}
function social_popup(url,network){socialSA.in_progress[network]=1;var popup=window.open(url,network+'_auth','width=500,height=300,resizable=yes');if(window.focus)popup.focus();socialSA.in_progress[network]=null;return popup;}
function socialSAClass(gigya_element,settings){var _this=this;this.element=gigya_element;this.name=gigya_element?gigya_element.getAttribute("gigya_id"):"dummy";this.settings=settings||{};var templates={"stocktalk":{prefix_html:"<div class=\"connect_text\">&nbsp;</div>",suffix_html:""},"settings":{prefix_html:"",suffix_html:""},"comment_yellow_note":{prefix_html:"",suffix_html:"<div class=\"add_btn_45\" onclick=\"socialSA.instances['comment_yellow_note'].shareActivity()\"><div class=\"l\"></div><div class=\"c\">Share</div><div class=\"r\"></div>"},"comment":{prefix_html:"<div class=\"connect_text\">&nbsp;</div>",suffix_html:""},"instablog":{prefix_html:"",suffix_html:""},"recommend":{prefix_html:"",suffix_html:""}}
var shareActivityTemplates={"comment_yellow_note":function(){if(_this.selected_providers().length==0){alert("On which network would you like to share your comment?");return;}
try{var commented_msg="Commented on: "+document.title.replace(/ -+ Seeking Alpha/,"");var url=$('short_url')?$('short_url').value:top.location.href.replace(/[\?|#].*$/,"");var msg=dottize(commented_msg,85)+" "+url;setTimeout(function(){$("yellow_edit_comment_2").update("Your comment has been shared"),_this.element.update("");},100);return msg;}catch(err){}},"recommend":function(){var target=$("recommend_txtarea");if(_this.selected_providers().length==0)return;var rMsg=target.value;var url=$('short_url')?$('short_url').value:top.location.href.replace(/[\?|#].*$/,"");rMsg=dottize(target.value,140-("I recommend "+url+" ").length);return"I recommend "+url+" "+rMsg;}}
var private_functions={boxesGenerator:function(settings){settings=settings||_this.settings;var showProviders=settings.showProviders||socialSA.enabledProviders;var autoCheck=(settings.autoCheck!=null?settings.autoCheck:true);function gen_onclick(){return"socialSA.instances."+_this.name+".checkbox_click(this)";}
function do_auto_check(network){return(connected_social.search(network)!=-1?"checked=\'1\'":"");}
var connected_social="";if(autoCheck&&user_cookie&&user_cookie.connected_social_accounts){connected_social=user_cookie.connected_social_accounts;}
var tmp_text=[];tmp_text.push('<div class="connected_and_approved">');if(templates[_this.name]&&templates[_this.name]["prefix_html"])tmp_text.push(templates[_this.name]["prefix_html"]);tmp_text.push("<span class='checkbox_wrapper'>");showProviders.each(function(network){tmp_text.push('<div class="'+network+'"><input type="checkbox" onclick="'+gen_onclick()+'"'+do_auto_check(network)+' /><span class="icon"></span></div>');});tmp_text.push("</span>");if(templates[_this.name]&&templates[_this.name]["suffix_html"])tmp_text.push(templates[_this.name]["suffix_html"]);tmp_text.push('</div>');return tmp_text.join(" ");}};this.selected_providers=function(){var result=[];if(this.element.getAttribute("disabled")=="true")return result;var checkboxes=this.element.select("input");checkboxes.each(function(checkbox){if(checkbox.checked){result.push(checkbox.parentNode.className);}});return result;}
this.checkbox_click=function(checkbox){var network=checkbox.parentNode.className;if(socialSA.in_progress[network]!=undefined||socialSA.in_progress[network]!=null){socialSA.set_checkbox_status(network,!checkbox.checked);return;}
if(socialSA.in_progress['pop_'+network]!=undefined&&socialSA.in_progress['pop_'+network].closed==false){socialSA.set_checkbox_status(network,!checkbox.checked);socialSA.in_progress['pop_'+network].focus();return;}
if(checkbox.checked){checkbox.checked=false;socialSA.authenticate(network,this.name);}else if(this.name=="settings"){socialSA.disconnect(network);}else{socialSA.set_checkbox_status(network,false);}}
this.shareActivity=function(msg,providers){if(shareActivityTemplates[this.name]){msg=shareActivityTemplates[this.name]();}
providers=this.selected_providers();if(providers.length>0&&msg){try{providers.each(function(provider){socialSA.social_post(provider,msg);});}catch(err){alert(err);}}}
if(this.element)this.element.innerHTML=private_functions.boxesGenerator();}
var Messaging={sendMessage:function(id_coding,source){pageTracker._trackEvent('Compose Direct Message',source);if(is_users_cookie_exists()){if(id_coding){top.location.href='/inbox/compose?to='+id_coding}else{top.location.href='/inbox/compose'}}else{Authentication.Authenticate(id_coding,"send_message",{Login:"Messaging.Login",Register:"Messaging.Register",ForgotPassword:"Messaging.ForgotPassword"},{Login:"send messages to others",Close:""});}},Login:function(id_coding){set_login_and_registration_header();if(id_coding)top.location.href='/inbox/compose?to='+id_coding;else top.location.href='/inbox/compose';},Register:function(){var aHtml=[];aHtml.push("<div id='readlater_register_login'>");aHtml.push("<div class='email_sent'><h4>Email sent!</h4><div>We've sent confirmation email to your inbox - it includes a link you should follow<br/>to activate your account. If you can't find it, please check your spam filter.</div></div>");aHtml.push("<div class='close_quickread_stretchable' onclick='AlphaBox.Close();'><span class='close_left'></span><span class='close_text'>Close</span><span class='close_right'></span></div>");aHtml.push("<br class='cleaner'/></div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};},ForgotPassword:function(){var aHtml=[];aHtml.push("<div id='readlater_register_login'>");aHtml.push("<div class='email_sent'><h4>Email sent!</h4><div>We've sent instructions on how to reset your password to your email inbox.<br/>If you can't find it, please check your spam filter.</div></div>");aHtml.push("<div class='close_quickread_stretchable' onclick='AlphaBox.Close();'><span class='close_left'></span><span class='close_text'>Close</span><span class='close_right'></span></div>");aHtml.push("<br class='cleaner'/></div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};}}
var LeaderBoard={}
LeaderBoard.popup_timeout;LeaderBoard.openPopupDelay_timeout;LeaderBoard.currently_open=null;LeaderBoard.loadAjaxPopup=function(user_id){clearTimeout(LeaderBoard.openPopupDelay_timeout);LeaderBoard.openPopupDelay_timeout=setTimeout(function(){LeaderBoard.loadAjaxPopup_Delayed(user_id)},300);}
LeaderBoard.loadAjaxPopup_Delayed=function(user_id){if(LeaderBoard.popup_timeout)clearTimeout(LeaderBoard.popup_timeout);if($("commenter_data_popup_"+LeaderBoard.currently_open))$("commenter_data_popup_"+LeaderBoard.currently_open).style.display="none";if($("leaderboard_open_popup_arrow_"+LeaderBoard.currently_open))$("leaderboard_open_popup_arrow_"+LeaderBoard.currently_open).style.display="none";if($('stop_following_person_'+user_id)){$('stop_following_person_'+user_id).style.display="block";}
if(user_id==0)return;$('leaderboard_open_popup_arrow_'+user_id).style.display="block";LeaderBoard.currently_open=user_id;var user_content_from_ajax=$("leader_"+user_id);if(user_content_from_ajax.getAttribute('refilled')=="false"){new Ajax.Request('/account/ajax_user_details',{asynchronous:true,parameters:"user_id="+user_id,onComplete:function(transport){if(transport.status==200&&transport.responseText!="failed"){user_content_from_ajax.setAttribute("refilled","true");user_content_from_ajax.update(transport.responseText.replace("user_follow_comment_id","user_follow_"+user_id));Follow.comment__follow_button_initiator(user_id,user_id);if(LeaderBoard.currently_open==user_id)$("commenter_data_popup_"+user_id).style.display="block";}else{$('commenter_data_popup_'+user_id).style.display="block";}}});}else{$('commenter_data_popup_'+user_id).style.display="block";}}
LeaderBoard.CloseAjaxPopup=function(user_id){if(user_id==0)return;LeaderBoard.popup_timeout=setTimeout(function(){$("commenter_data_popup_"+user_id).style.display="none";$('leaderboard_open_popup_arrow_'+user_id).style.display="none";if($('stop_following_'+user_id)){$('stop_following_'+user_id).style.display='none';}},2000);}
LeaderBoard.clearPopupTimeout=function(){if(LeaderBoard.popup_timeout)clearTimeout(LeaderBoard.popup_timeout);}
var brokers=["alpari.co.uk","alpari.ru","alpari.co.il","alpari-us.com","xforex.com","ac-markets.com","choicetrade.com","sharebuilder.com","eztrader.com","folioinvesting.com","gftforex.com","interactivebrokers.com","lightspeed.com","nobletrading.com","pfgbest.com","tradestation.com","usaa.com","just2trade.com","optionshouse.com","sogotrade.com","eoption.com","marscoinvestments.com","zecco.com","lowtrades.com","tradeking.com","mbtrading.com","izone.com","firstrade.com","wangvest.com","scottrade.com","terranovatrading.com","trademonster.com","mytradz.com","cobratrading.com","tradingdirect.com","thinkorswim.com","tdameritrade.com","zionsbank.com","investrade.com","marketrade.com","schwab.com","etrade.com","baisidirect.com","aosbroker.com","msiebert.com","jettrade.com","optionsxpress.com","placetrade.com","wallstreete.com","freedominvestments.com","cambridge-discount.com","fbrdirect.com","seaportonline.com","state-online.com","trutrade.com","usdb.com","jhdarbie.com","wrhambrecht.com","fidelity.com","civiliancapital.com","troweprice.com","wellsfargo.com","clarkfinancial.com","downstate.com","pncinvest.com","wsaccess.com","ameriprise.com","internettrading.com","mycititrade.com","vanguard.com","penntrade.com","mldirect.ml.com","benjaminandjerold.com","netvest.com"];var advanced_pages=['/dashboard/investing_ideas','/tag/transcripts','/dashboard/etfs','/currents/'];var cp_cookie_exceptions=[1,3,12,15];function create_cp_cookie(name,value,days){var cookieStr="";if(cookieExists('c_p')){var cookieCont=readCookie('c_p');}else{var cookieCont="-------------------";}
var arr=cookieCont.split('-');var cookieIndex=name.replace("c_p","");var exdate=new Date();exdate.setTime(exdate.getTime()+days*86400000);arr[cookieIndex]=exdate.getTime();createCookie('c_p',arr.join("-"),10000);}
function read_cp_cookie(name){if(!cookieExists('c_p')){create_cp_cookie('c_p0',1,0);}
var arr=readCookie('c_p').split('-');cookieIndex=name.replace("c_p","");if(arr[cookieIndex]==""||arr[cookieIndex]==null||arr[cookieIndex]==undefined){return null;}
var exdate=new Date();if(exdate.getTime()<arr[cookieIndex]){return 1;}
return null;}
function array_cp_profiles(){if(!readCookie('c_p')){create_cp_cookie('c_p0',1,0);}
var arr=readCookie('c_p').split('-');var res=[];var exdate=new Date();for(var i=0;i<arr.length;i++){if(cp_cookie_exceptions&&cp_cookie_exceptions.indexOf(i)!=-1){if(readCookie('c_p'+i)=="1"){res.push("p="+i);}}else{if(exdate.getTime()<arr[i]){res.push("p="+i);}}}
return res;}
function advanced_trader(path){if(readCookie('c_p1')=='1')return true;if(is_users_cookie_exists()){createCookie('c_p1','1');return true;}
for(var i=0,len=advanced_pages.length;i<len;i++){if(path.match(advanced_pages[i])){createCookie('c_p1','1',2000);return true;}}
if(typeof(article_dashboards)!="undefined"){var dashboards=/@investing-ideas@|@etfs@|@transcript@/i
if(article_dashboards.match(dashboards)){createCookie('c_p1','1',2000);return true;}}
return false;}
function etf_interest(user_interests){if(user_interests.match(/,23,/)){create_cp_cookie('c_p2','1',30);}}
function from_bloomberg(path_filter){if((/source=bloomberg/).test(path_filter)){createCookie('xp_src','bm',3000);return true;}}
function from_intbrokers_pro(path_filter){if((/source=intbrokers_pro/).test(path_filter)){createCookie('xp_src','ib',3000);return true;}}
function from_factset(path_filter){if((/source=factset/).test(path_filter)){createCookie('xp_src','fct',3000);return true;}}
function has_etf_on_portfolio(user_interests){if(is_users_cookie_exists()){if(user_interests.match(/,23,/)){createCookie('c_p12','1',1);return true;}
var p_12_info=readCookie('c_p12');if((p_12_info==null)||(p_12_info=='')){var user_id=readCookie('user_id');if(document.location.protocol=="https:")return;new Ajax.Request('/users/ajax_has_etf_on_portfolio',{asynchronous:true,evalScripts:true,parameters:"user_id="+user_id,onComplete:function(transport){if(transport.status==200){if(transport.responseText=='true'){createCookie('c_p12','1',1);}else{createCookie('c_p12','0',1);}}}});}}
return true;}
function see_etf(path){if(path.match('/dashboard/etfs')||((typeof(article_sectors_themes)!="undefined")&&(article_sectors_themes.match(/@etfs@/i)))){create_cp_cookie('c_p4','1',30);return true;}}
function see_options(user_interests){if(user_interests.match(/,3081,/)){create_cp_cookie('c_p5','1',30);}}
function see_gold(path_filter,user_non_watchlist_slugs){if((/filters=.*?gold-and-precious-metals/).test(path_filter)||((typeof(article_sectors_themes)!="undefined")&&(article_sectors_themes.match(/@gold-and-precious-metals@/i)))){create_cp_cookie('c_p6','1',30);return true;}
if(user_non_watchlist_slugs.match(/stocks-sectors/i)){create_cp_cookie('c_p6','1',30);}}
function see_commodities(path_filter,user_non_watchlist_slugs){if((/filters=.*?commodities/).test(path_filter)||((typeof(article_sectors_themes)!="undefined")&&(article_sectors_themes.match(/@commodities@/i)))){create_cp_cookie('c_p7','1',30);return true;}
if(user_non_watchlist_slugs.match(/macro-view/i)){create_cp_cookie('c_p7','1',30);}}
function see_mutualfunds(user_interests){if(user_interests.match(/,13513,/)){create_cp_cookie('c_p8','1',30);}}
function has_etn_in_portfolio(){if(is_users_cookie_exists()){var wl_slug=readCookie('user_watchlist_slugs');if(wl_slug){var etn_array=['aavx','adz','aga','agf','amj','ayt','bal','balc','barl','bbvx','bcm','bdcl','bdcs','bdd','bdg','blng','bom','bos','bunl','bunt','bwv','bxdb','bxdc','bxub','bxuc','cafe','carb','ccvx','choc','cny','cow','cowc','csls','csma','csmb','csmn','ctnn','cupm','cvol','dag','dcng','ddp','ddvx','dee','defl','dfvl','dfvs','dgaz','dgld','dgp','dgz','dirt','djci','djp','djpc','dlbl','dlbs','dod','doil','dpu','drgs','drr','dslv','dstj','dsxj','dto','dtul','dtus','dtyl','dtys','dwti','dyy','dzz','eeh','eevx','eipl','eipo','emlb','emsa','ero','ffvx','flat','foil','fud','fue','gaz','gazc','gbb','gce','grn','gru','grwn','gsc','gsp','gspc','gwo','hevy','ici','infl','inp','inr','ipal','iplt','itlt','itly','ivop','jem','jft','jgbd','jgbl','jgbs','jgbt','jja','jjac','jjc','jjcc','jje','jjec','jjg','jjgc','jjm','jjmc','jjn','jjnc','jjp','jjpc','jjs','jjsc','jjt','jjtc','jju','jjuc','jo','jyn','lbnd','lcpr','ld','ldc','ledd','lpal','lplt','lsc','lstk','mfla','mfsa','mlpg','mlpi','mlpl','mlpn','mlps','mlpw','mlpy','nib','nibc','nini','off','oil','oilc','olem','olo','ong','onn','pgd','pgm','plac','ptd','ptm','rja','rji','rjn','rjz','rola','rosa','rtla','rtsa','rwxl','sbnd','sbv','scpr','sfla','sfsa','sgar','sgg','spgh','ssdd','ssdl','stpp','szo','tbar','tndq','trnd','trnm','tvix','tviz','twti','uag','ubc','ubg','ubm','ubn','uci','udnt','ugaz','ugld','uoil','urr','uslv','usv','uupt','uwti','viix','viiz','vqt','vxaa','vxbb','vxcc','vxdd','vxee','vxff','vxx','vxz','vzzb','weet','wmw','xiv','xvix','xvz','xxv','ziv'];var portfolio_tags=wl_slug.split(",");if(portfolio_tags.intersect(etn_array).length>0){create_cp_cookie('c_p9','1',30);}}}}
function see_retirement(user_interests){if(user_interests.match(/,866,/i)){create_cp_cookie('c_p10','1',30);}}
function see_ipo_scup_transcripts(path,path_filter){if(path.match(/transcripts/)||(/filters=.*?ipo-analysis/).test(path_filter)||((typeof(article_sectors_themes)!="undefined")&&(article_sectors_themes.match(/@transcripts@/i)||article_sectors_themes.match(/@ipo-analysis@/i)))){create_cp_cookie('c_p11','1',30);}}
function see_forex(user_interests){if(user_interests.match(/,3748,/)){create_cp_cookie('c_p13','1',30);}}
function see_bonds(user_interests){if(user_interests.match(/,528,/i)){create_cp_cookie('c_p14','1',30);}}
function see_fund_holdings(path_filter,user_non_watchlist_slugs){if((/filters=.*?fund-holdings/).test(path_filter)||((typeof(article_sectors_themes)!="undefined")&&(article_sectors_themes.match(/@fund-holdings@/i)))){create_cp_cookie('c_p16','1',10);return true;}
if(user_non_watchlist_slugs.match(/macro-view/i)){create_cp_cookie('c_p16','1',10);}}
function interest_in_gold(user_interests){if(user_interests.match(/,4600,/i)){create_cp_cookie('c_p17','1',30);}}
function check_for_first_pv(){if(!read_cp_cookie('c_p15')){create_cp_cookie('c_p15',1,0.8);}
return true;}
function fp_logged_out_user(){if(location.search.toQueryParams().ifp=='1'){createCookie('xp','t',3000);}}
function createCookieTillSpecificUTC(name,value,utc){var date=new Date();date.setTime(utc);var expires="; expires="+date.toGMTString();document.cookie=name+"="+value+expires+"; path=/";}
function handle_tops_cookie(){if(is_users_cookie_exists()&&!cookieExists('tops')&&typeof(tops)!="undefined"){var reg_user_id=new RegExp(","+readCookie('user_id')+",");if((","+tops+",").match(reg_user_id)){createCookieTillSpecificUTC('tops','t',nextUpdate);}else{createCookieTillSpecificUTC('tops','f',nextUpdate);}}}
function check_domains(domain){domain_list=['commonwealth.com','edwardjones.com','hilliard.com','lpl.com','ml.com','morgankeegan.com','morganstanley.com','oppenheimerfunds.com','rwbaird.com','schwab.com','stifel.com','ubs.com','wellsfargo.com','edwardjones.com','hilliard.com','lpl.com','ml.com','morgankeegan.com','morganstanley.com','oppenheimerfunds.com','rwbaird.com','schwab.com','stifel.com','ubs.com','wellsfargo.com'];len=domain_list.length;for(var i=0;i<len;i++){if(domain_list[i]==domain){createCookie('dmin',1,100);break;}}}
function mmipcheck(){if(!cookieExists('pig')&&!SA.Utils.Env.mobileOS&&!readCookie('pages_viewed')!=1){SA.Data.Cache.Del("campaign_content");SA.Utils.ajax("/users/ajax_pig_check",{},function(response){createCookie('pig',response.pig,1/72);if(typeof(response.campaign_id)!="undefined"){createCookie('adid',response.campaign_id,1/72);SA.Data.Cache.SetOnlyOnLocalStorage("campaign_content",response.campaign_data);}});}}
function mmcheck(){if(cookieExists('dmin'))return true;if(cookieExists('user_email'))check_domains(readCookie('user_email').split('@')[1]);}
function user_profiles(){var path=top.location.pathname;var path_filter=top.location.search.toLowerCase()
var user_interests='';var user_non_watchlist_slugs='';if(is_users_cookie_exists()){user_interests=","+readCookie('user_interests')+",";user_non_watchlist_slugs=readCookie('user_non_watchlist_slugs')
if(!user_non_watchlist_slugs){user_non_watchlist_slugs='';}}
etf_interest(user_interests);from_bloomberg(path_filter);from_intbrokers_pro(path_filter);from_factset(path_filter);advanced_trader(path);mmipcheck();mmcheck();see_etf(path);see_options(user_interests);see_gold(path_filter,user_non_watchlist_slugs);see_commodities(path_filter,user_non_watchlist_slugs);see_mutualfunds(user_interests);has_etn_in_portfolio();see_retirement(user_interests);see_ipo_scup_transcripts(path,path_filter);see_forex(user_interests);has_etf_on_portfolio(user_interests);see_bonds(user_interests);see_fund_holdings(path_filter,user_non_watchlist_slugs);interest_in_gold(user_interests);check_for_first_pv();if(!cookieExists('c_p3')&&cookieExists('machine_cookie')){new Ajax.Request('/mone_pv',{asynchronous:true,method:'post',postBody:readCookie('machine_cookie')});}}
function init_facebook(){if(!$('fb-root')){var fb_root=document.createElement('div');fb_root.id="fb-root";document.body.appendChild(fb_root);}
(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=115634711798315";var runFun=bind_facebook_events
if(document.all){js.onreadystatechange=function(){if(js.readyState=='loaded'||js.readyState=='complete'){runFun();js.onreadystatechange="";}}}else{js.onload=runFun;}
fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));}
function init_linkedin(){var newIN=document.createElement('script');newIN.type='text/javascript';newIN.src='http://platform.linkedin.com/in.js';document.body.appendChild(newIN);}
function init_twitter(){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");bind_twitter_events();}
var try_twitter_binding=0;function bind_twitter_events(){if(typeof(twttr)!="undefined"){twttr.events.bind('tweet',twitter_callback);twttr.events.bind('follow',twitter_callback);return;}
if(try_twitter_binding<20)setTimeout(bind_twitter_events,200);try_twitter_binding++;}
function bind_facebook_events(){FB.Event.subscribe('edge.create',function(h,w){facebook_callback('like',h,w)});FB.Event.subscribe('edge.remove',function(h,w){facebook_callback('unlike',h,w)});}
var plusone_visited=0;function plusone_not_supported(){if(plusone_visited>0)return;plusone_visited++;$$('.plusone_wrap').each(function(e){Event.observe(e,'click',function(){alert('The feature you are trying to access is not supported by this browser.')});});}
function init_plusone(){if(SA.Utils.Env.isIE7){var el=$$(".plusone");var size=el.length;for(var i=0;i<size;i++){el[i].remove();}
plusone_not_supported();return;}
var po=document.createElement('script');po.type='text/javascript';po.async=true;po.src='https://apis.google.com/js/plusone.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po,s);}
function plusone_callback(e){var type=(e.state=="off")?"unlike":"like";pageTracker._trackEvent('Plusone Tracking',type,location.pathname);}
function twitter_callback(e){pageTracker._trackEvent('Twitter Tracking',e.type,location.pathname);}
function linkedin_callback(e){pageTracker._trackEvent('Linkedin Tracking','like',location.pathname);}
function facebook_callback(type,href,widget){if(widget._attr.ref!=undefined){type+=" "+widget._attr.ref;}
pageTracker._trackEvent('Facebook Tracking',type,location.pathname);}
function social_buttons_init(){if($$('.linkedin_share').length)init_linkedin();if($$('.facebook_share').length)init_facebook();if($$('.plusone_share').length)init_plusone();if($$('.twitter_share').length)init_twitter();}
ABTest=function(experiment,values){this.value=values[(ABTest.identity-1)%values.length];this.experiment=experiment;this.test=function(){sendEvent(this,'page views');return this.value;}
this.convert=function(label){sendEvent(this,(label||'conversions'));}
var sendEvent=function(test,label){if(!test.notrack)SA.Stats.GA.event('AB-Testing: '+test.experiment,''+test.value,label,0,true);}}
ABTest.identity=parseInt(location.href.toQueryParams().abid);if(!ABTest.identity){ABTest.identity=parseInt(readCookie('machine_cookie'));if(!ABTest.identity){ABTest.identity=Math.round((new Date).getTime()+Math.random()*1000000003366);createCookie('machine_cookie',ABTest.identity,2000);}}
function open_header_log_in_popup_lightbox(Action,LoginMessage,FocusOn){Authentication.Authenticate(Action,"footer_login",{Login:"FooterBar.Login",Register:"FooterBar.Register",ForgotPassword:"FooterBar.ForgotPassword"},{Login:LoginMessage,Close:""},"",FocusOn?FocusOn:"");}
var FooterBar={};FooterBar.Login=function(Response){var sAction=Response.split('|')[0];if(location.href.match('/real-time-alerts'))sAction='email';switch(sAction){case'email':top.location.href='/account/email_preferences';break;case'portfolio':top.location.href='/account/portfolio';break;case'write_post':top.location.href='/account/write_post';break;case'stocktalk':var user_id=readCookie('user_id');top.location.href='/user/'+user_id+'/stocktalk';break;case'login':case'headtabs_login':case'hp_login':case'abheadtabs_login':case'dispute':top.location.reload();break;}}
FooterBar.Register=function(){var aHtml=[];aHtml.push("<div id='readlater_register_login' class='customize_pop_bordeaux mail_sent'>");aHtml.push("<h3>Please confirm your registration by clicking the link in the email we've sent to "+registered_mail+".</h3>");aHtml.push("<div class='cant_see_note'>(If you can't see it, please check your junk mail folder)</div>");aHtml.push("</div>");aHtml.push("<div class='cleaner'></div>");aHtml.push("<div class='close_pop_bordeaux' onclick='AlphaBox.Close();'></div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};}
FooterBar.RegisterWithLink=function(){var aHtml=[];aHtml.push("<div id='readlater_register_login' class='customize_pop_bordeaux mail_sent'>");aHtml.push("<h3>Please confirm your registration by clicking the link in the email we've sent to "+registered_mail+".</h3>");aHtml.push("<div class='cant_see_note'>(If you can't see it, please check your junk mail folder)</div>");aHtml.push("<div class='clicked_link_already'><span onclick='FooterBar.AttemptReLogin();'>I clicked the link &raquo;</span></div>");aHtml.push("</div>");aHtml.push("<div class='cleaner'></div>");aHtml.push("<div class='close_pop_bordeaux' onclick='AlphaBox.Close();'></div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};}
FooterBar.AttemptReLogin=function(){if(window.tmpRegisterFormData&&tmpRegisterFormData["user[password]"]&&tmpRegisterFormData["user[email]"]){new Ajax.Request('/authentication/login',{asynchronous:true,parameters:{activity:tmpRegisterFormData["activity"],"id":tmpRegisterFormData["id"],"function":'FooterBar.Login','user[email]':tmpRegisterFormData["user[email]"],'user[password]':tmpRegisterFormData["user[password]"]},onSuccess:function(transport){window.marina=transport;var response=null;try{response=transport.responseText.evalJSON();}catch(e){}
if(response){if(response.login&&tmpRegisterFormData["activity"]=="pro"){location.href="/account/pro/subscribe?plan="+response.id;}else{FooterBar.NotActivated();}}}});}else{FooterBar.NotActivated();}}
FooterBar.NotActivated=function(){var aHtml=[];aHtml.push("<div id='readlater_register_login' class='customize_pop_bordeaux mail_sent'>");aHtml.push("<h3>Your account was not activated. Please confirm your registration by clicking the link we've sent to your email.</h3>");aHtml.push("<div class='clicked_link_already'><span onclick='FooterBar.AttemptReLogin();'>I clicked the link &raquo;</span></div>");aHtml.push("</div>");aHtml.push("<div class='cleaner'></div>");aHtml.push("<div class='close_pop_bordeaux' onclick='AlphaBox.Close();'></div>");AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};}
FooterBar.ForgotPassword=function(){var aHtml=[];aHtml.push("<div id='readlater_register_login' class='customize_pop_bordeaux mail_sent'>");aHtml.push("<h3>We've sent instructions on how to reset your password to your email inbox.</h3>");aHtml.push("<div class='cant_see_note'>(If you can't find it, please check your spam filter.)</div>");aHtml.push("<div class='cleaner'></div>");aHtml.push("<div class='close_pop_bordeaux' onclick='AlphaBox.Close();'></div>");AlphaBox.Loading();AlphaBox.AddHtml(aHtml.join(""));if(oRefresher){oRefresher.Activate()};}
FooterBar.LoginAndRedirect=function(url){top.location.href=url;};(function(){var scope=SA.UsingNamespace("SA.Navigation");scope.Top=new function(){var user_id,user_nick,profile_href,author_slug,c_notifications='',e_notifications='',alert_notifications='',update_cookies,menu,header_height,header,domain='';this.init=function(){domain=scope.Top.removeSecureDomain();scope.Top.saveUserData();scope.Top.sticky();scope.Top.setTopMenuHovers();scope.Top.setAlertsLink();scope.Top.setUserDropdown();scope.Top.setWritingDropdown();scope.Top.setUserNotifications();var mobile_top=$$('.mobile_or_full_site');var extra=(mobile_top&&mobile_top.length>0)?mobile_top[0].getHeight():0;var headerNodeElement=$('header')
var navContainerWrapNodeElement=$('nav_container_wrap');header_height=(headerNodeElement&&navContainerWrapNodeElement)?Math.max(extra+headerNodeElement.getHeight()-navContainerWrapNodeElement.getHeight()-2,0):100;new SA.Utils.TopNavPopUp().Init('top_nav_arrow','user_settings_pop');new SA.Utils.TopNavPopUp().Init('instablog_pop_btn','instablog_nav_dropdown');if($('promotion_box_rel_nav'))$('promotion_box_rel_nav').removeClassName('point_left');if($$('.pro_tab a').length&&SA.Data.User.loggedIn()&&is_pro){$$('.pro_tab a')[0].href=domain+"/dashboard/pro";}}
this.reset=function(){if($('notificiations_popup'))$('notificiations_popup').remove();if($('notifications_alert'))$('notifications_alert').remove();if($('writing_menu'))$('writing_menu').remove();$$('.floating_message_li').each(function(e){e.remove();});scope.Top.init();}
this.saveUserData=function(){if(SA.Data.User.loggedIn()){user_id=SA.Data.User.id();user_nick=readCookie('user_nick');author_slug=SA.Data.User.authorSlug();if(user_nick==null||user_nick=="")user_nick="User "+user_id;profile_href=(author_slug==null||author_slug=='')?"/user/"+user_id+"/profile":"/author/"+author_slug;update_cookies=readCookie('user_update_note_cookies');var n_cookie_str=readCookie('user_notifications');if(update_cookies=='undefined'||update_cookies==null)update_cookies='';if(n_cookie_str=='undefined'||n_cookie_str==null)n_cookie_str='';var n_cookie_arr=n_cookie_str.split("|");if(n_cookie_arr.length==3){c_notifications=n_cookie_arr[0];e_notifications=n_cookie_arr[1];alert_notifications=n_cookie_arr[2];}}}
this.setAlertsLink=function(){var alerts=$$('#nav_container li[thistab=alerts] a');if(alerts.length==0)return;var alert_link=alerts[0];if(SA.Data.User.loggedIn())alert_link.href=alert_link.href.replace("/real-time-alerts","/account/email_preferences");alert_link.setAttribute("sasource","headtabs_alerts");}
this.setWritingDropdown=function(){if(!SA.Data.User.loggedIn()||typeof(user_cookie.writing_status)=="undefined")return;var aHtml=[];var user_settings_wrapper=$('user_settings_wrapper');if(!user_settings_wrapper)return;if(user_cookie.writing_status=="contributor"){aHtml.push('<li id="writing_menu" class="contributor_nav"><a href="'+domain+'/account/authorboard_overview">Contributors</a><span class="navi_right_corner">|</span></li>');}else if(user_cookie.writing_status=="instablogs"){aHtml.push('<li id="writing_menu" class="instablogs_nav">');aHtml.push('<span id="instablog_pop_btn" class="top_nav_arrow_down" style="cursor:pointer;">Instablog</span><span class="navi_right_corner">|</span>');aHtml.push('<ul id="instablog_nav_dropdown" style="display:none;">');aHtml.push('<li><a href="'+domain+'/user/'+user_id+'/instablog" onclick="trackLink(this,\'Instablog Menu Tracking\',\'View Instablog\',location.href);">View Instablog</a></li>');aHtml.push('<li><a href="'+domain+'/account/write_post_new?publish_type=instablog" onclick="trackLink(this,\'Instablog Menu Tracking\',\'Write Instablog Post\',location.href);">Write Instablog Post</a></li>');aHtml.push('<li><a href="'+domain+'/account/become_a_contributor" onclick="trackLink(this,\'Instablog Menu Tracking\',\'Become a Contributor\',location.href);">Become a Contributor</a></li>');aHtml.push('</ul>');aHtml.push('</li>');}
user_settings_wrapper.insert({before:aHtml.join("")});}
this.setTopMenuHovers=function(){var menu_items=$$('#nav_container li[thistab]');for(var i=0;i<menu_items.length;i++){if($('nav_container').getAttribute('headtab')==menu_items[i].getAttribute('thistab')){addThisClass(menu_items[i],'yes_selected_not_new');continue;}
menu_items[i].observe('mouseover',function(e){addThisClass(e.findElement('li'),'yes_selected_not_new');});menu_items[i].observe('mouseout',function(e){removeThisClass(e.findElement('li'),'yes_selected_not_new');});}}
this.sticky=function(){if(ieVersionOlderThan(6)||(SA.Utils.Env.touchSupport))return;menu=$('nav_container_wrap');header=$('header');if(!alwaysTopNav()){Event.observe(window,'scroll',function(){var scrollTop=get_window_Yscroll();if(scrollTop>header_height){menu.addClassName('top_nav_fixed');header.addClassName('sticky_nav');}else{menu.removeClassName('top_nav_fixed');header.removeClassName('sticky_nav');}});}else{menu.addClassName('top_nav_fixed');header.addClassName('sticky_nav');}}
function alwaysTopNav(){var temp=$$('.author_board_header,.instablog_body');return temp.length>0;}
function get_window_Yscroll(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0;}
this.settingsClick=function(opt){opt=opt||{};var email=SA.Data.User.email(),html=["<div class='customize_pop_bordeaux pro_status_popup'>","<h3 class='' id=''>To access your Pro account settings please sign in again:</h3>","<h4>Your email address is:</h4>","<div class='emailAddress'>"+email+"</div>","<h4>Please enter your password:</h4>","<div onclick='AlphaBox.onBeforeClose=null;AlphaBox.Close();' class='close_pop_bordeaux'></div>","<input type='password' id='settings_pass' />","<div class='error' style='display:none' id='settings_err'>Wrong password. Please try again.</div>","<div class='forgotPassword link' id='forgot_password'>Forgot your password?</div>","<div class='pro_btn_cnt silver'>","<div id='settings_continue' class='btn'>View account settings<span class='right'></span></div>","<img height='16' width='16' id='settings_loader' src='http://static3.cdn-seekingalpha.com/images/loader.gif' style='margin: 3px 0 0 10px;display:none'>","</div>","</div>"];AlphaBox.Loading();AlphaBox.AddHtml(html.join(''));Mone.event("PRO","Dashboard settings popup","shown");var pass=$('settings_pass'),err=$('settings_err'),cont=new SA.Utils.Button({element:'settings_continue',onclick:function(){if(pass.value==''){err.update('Password may not be empty').show();return;}
cont.Lock();err.hide();SA.Utils.ajax('/account/pro/ajax_settings_auth',{password:pass.value},function(){location.href=domain+(opt.url?opt.url:'/account/pro/status');},function(response){err.update(response.errors).show();pass.value='';pass.focus();cont.UnLock();Mone.event("PRO","Dashboard settings popup","Auth error",{data:{errors:response.errors}});});},loaderObj:'settings_loader'});pass.observe('keypress',function(event){if(event.keyCode==13)cont.click();})
var fpBtn=new SA.Utils.Button({element:'forgot_password',loaderObj:'settings_loader',onclick:function(){Mone.event("PRO","Dashboard settings popup","forgot password click");fpBtn.Lock();SA.Data.User.ForgotPassword(email,function(){fpBtn.UnLock();Mone.event("PRO","Dashboard settings popup","forgot password success");var html=[];html.push("<div id='readlater_register_login' class='customize_pop_bordeaux mail_sent'>");html.push("  <div class='bordeaux fs16'>Weve sent you instructions on how to get a new password. Please check your email account and proceed to <span onclick='Mone.event(\"PRO\", \"Dashboard settings popup\", \"forgot password error\");SA.Navigation.Top.settingsClick();' style='color:#024999;cursor:pointer'>Pro Account Settings</sapn>.</div>");html.push('</div>');AlphaBox.AddHtml(html.join(''));},function(res){fpBtn.UnLock();if(res.errors=="invalid_email"||res.errors=="no_user")err.update("Invalid email").show();else err.update("Something wrong happend").show();Mone.event("PRO","Dashboard settings popup","forgot password error",{data:{errors:res.errors}});},{activity:'pro'});}});setTimeout(function(){pass.focus();},1000);}
this.removeSecureDomain=function(){var domain='';if(location.protocol=="https:"){var parts=location.host.split('.');domain='http://';while(['dev','staging','cms','seekingalpha'].indexOf(parts[0])==-1){parts.shift();}
domain+=parts.join('.');}
return domain;}
this.setUserDropdown=function(){var user_settings_wrapper=$('user_settings_wrapper');if(!user_settings_wrapper)return;var aHtml=[];if(SA.Data.User.loggedIn()){aHtml.push('<div class="user_settings" id="user_settings">');aHtml.push('<span id="top_nav_arrow" class="top_nav_arrow_down" style="cursor:pointer;">'+(user_nick.length<10?user_nick:user_nick.slice(0,8)+"...")+'</span>');aHtml.push('<div class="user_settings_pop" id="user_settings_pop" onmouseover="show_item(\'user_settings_pop\');$(\'user_settings\').addClassName(\'up\')" style="display:none">');aHtml.push('<ul>');aHtml.push('<li><a href="'+domain+'/account/my-feed" onclick="trackLink(this,\'Menu Tracking\',\'My Feed\',location.href);">My Feed</a></li>');aHtml.push('<li class="floating_inbox_li"><a href="'+domain+'/inbox" onclick="trackLink(this,\'Menu Tracking\',\'Inbox\',location.href);">Inbox<span id="inbox_number">');if(e_notifications!=''&&e_notifications!='0')aHtml.push(' ('+e_notifications+')');aHtml.push('</span></a></li>');aHtml.push('<li><a href="'+domain+profile_href+'" onclick="trackLink(this,\'Menu Tracking\',\'Profile\',location.href);">Profile</a></li>');if(user_cookie.writing_status=="contributor")aHtml.push('<li><a onclick="trackLink(this,\'Menu Tracking\',\'View Instablog\',location.href);" href="'+domain+'/user/'+user_id+'/instablog">View Instablog</a></li>');if(user_cookie.writing_status!="instablogs"){if(SA.Data.User.isAuthor()){aHtml.push('<li><a onclick="trackLink(this,\'Menu Tracking\',\'Submit Article\',location.href);" href="'+domain+'/account/write_post_new">Submit Article</a></li>');}else{aHtml.push('<li><a onclick="trackLink(this,\'Menu Tracking\',\'Write Instablog Post\',location.href);" href="'+domain+'/account/write_post_new?publish_type=instablog">Write Instablog Post</a></li>');}}
aHtml.push('<li><a href="'+domain+'/account/edit_bio" onclick="trackLink(this,\'Menu Tracking\',\'My Settings\',location.href);">Settings</a></li>');if(SA.Data.User.isPro()){aHtml.push('<li><a href="#" onclick="trackLink(this,\'Menu Tracking\',\'My Settings\',location.href); SA.Navigation.Top.settingsClick(); return false;">Pro account settings</a></li>');}
aHtml.push('<li class="sign_out"><span onmouseover="link_over(this,\'#ff0000\')" onmouseout="link_out(this,\'#024999\')" onclick="SA.Stats.GA.eventOnNextPage(\'Menu Tracking\',\'Sign out\',location.href);SA.Navigation.Top.logout();" class="logout_link">Sign Out</span></li>');aHtml.push('</ul>');aHtml.push('</div>');aHtml.push('</div>');}else{if(domain!=''){aHtml.push('<span style="cursor:pointer;" onclick="location.href=\''+domain+'/account/login\'; return false">Sign in / Join Now</span>');}else{aHtml.push('<span style="cursor:pointer;" onclick="open_header_log_in_popup_lightbox(\'headtabs_login\',\'\'); return false">Sign in / Join Now</span>');}}
user_settings_wrapper.innerHTML=aHtml.join("");}
this.setUserNotifications=function(){if(!SA.Data.User.loggedIn())return;if($('user_settings_wrapper')){$('user_settings_wrapper').insert({before:'<li class="floating_message_li" id="floating_message_li"><span type="button" id="notify_popup_button" class="floating_message_span" onclick="trackLink(this,\'Toolbar Tracking\',\'Notifications\',location.href);SA.Navigation.Top.ajax_pop_notifications(\''+user_id+'\');" open="false"></span><span class="navi_right_corner">|</span></li>'});var aHtml=[];if(navigator.appVersion.match(/iPhone/)==null){aHtml.push('<div id="notificiations_popup" class="bar_notify" style="display:none;">');aHtml.push('<div class="bar_notify_top_decoration"></div>');aHtml.push('<div class="bar_notify_middle">');aHtml.push('<ul id="notifications_list"></ul>');aHtml.push('<div class="noti_links">Go to <a href="'+domain+'/inbox" sasource="top_nav">inbox</a> or <a href="'+domain+'/account/my-feed" sasource="top_nav">more notifications</a></div>');aHtml.push('</div>');aHtml.push('<div class="bar_notify_bottom_decoration"></div>');aHtml.push('</div>');aHtml.push('<div id="notifications_alert" class="bar_alert" onclick="SA.Navigation.Top.ajax_pop_notifications(\''+user_id+'\')"');aHtml.push((alert_notifications=='0'||alert_notifications=='')?'style="display:none">':'>'+alert_notifications)
aHtml.push('</div>');}
$('floating_message_li').insert({bottom:aHtml.join("")});}
SA.Utils.Expansion.setOnClickOutside('notificiations_popup',function(e){minimize_pop_notifications(user_id)},1);var track_source=(top.location.href.indexOf('source=tracking')>-1);var track_or_inbox_page=(top.location.href.indexOf('/inbox')>-1)||(top.location.href.indexOf('/account/my-feed')>-1);var steps_pages=(top.location.href.indexOf('/account/step')>-1);if(!track_source&&!steps_pages&&(track_or_inbox_page||!update_cookies||alert_notifications==''||alert_notifications==0||!c_notifications||!e_notifications))ajax_create_user_notification_cookie_and_update_tool_bar(user_id);}
this.ajax_pop_notifications=function(id){if(domain!=''){setTimeout(function(){$('notifications_list').innerHTML="";$('notifications_alert').style.display='none';$('notify_popup_button').setAttribute('open','true');$('notificiations_popup').style.display='block';},100);}else{ajax_pop_notifications(id);}}
this.logout=function(){if(domain!=''){location.href=domain+"/account/logout";}else{logout();}}}})();(function(){var scope=SA.UsingNamespace("SA.Models");scope.Reports=new function(){var objLink,type,id,beforeAjax,reason;this.send=function(f_objLink,f_type,f_id,f_beforeAjax){if(!is_users_cookie_exists())return false;objLink=f_objLink;type=f_type;id=f_id;beforeAjax=f_beforeAjax||null;scope.Reports.reasonPopup();return false;}
this.reasonPopup=function(){var boxHtml='<div class="report_abuse_lightbox">';boxHtml+='  <div onclick="AlphaBox.Close();" class="close_button_gray_pop"></div>';boxHtml+='  <div class="description"><b>Please briefly describe the problem with this content or what makes this user\'s behavior or interactions with other users inappropriate.</b><br /><br /><b class="red">Please note:</b> reports are assessed by Seeking Alpha\'s moderation team, not by article authors. Accurate and concise description helps our moderators assess your report quickly. If the problem is wider in scope than one comment, please send a single detailed explanation: blanket reporting of many individual comments will delay our response time.<br /><br />Please see our <a href="http://seekingalpha.com/page/comment_guidelines?source=reportabusebox" target="_blank">Comment Guidelines</a> for details on what constitutes inappropriate user behavior.</div>';boxHtml+='  <div id="report_reason_error_message" class="error_message"></div>';boxHtml+='  <div class="text_box_wrap"><textarea id="report_content" autocomplete="off"></textarea></div>';boxHtml+='  <div class="buttons">';boxHtml+='    <input type="button" class="grad orange" value="Submit report" onclick="SA.Models.Reports.submit(this);"/>';boxHtml+='    <input type="button" class="grad" value="Cancel" onclick="AlphaBox.Close();" />';boxHtml+='    <div class="cleaner"></div>';boxHtml+='  </div>';boxHtml+='</div>';AlphaBox.Loading();AlphaBox.AddHtml(boxHtml);}
this.submit=function(submit_bttn){reason=$('report_content').value;if(!objLink||!type||!id)return;if(reason.blank()&&$('report_reason_error_message')){$('report_reason_error_message').innerHTML='<br />You must explain your reason for reporting this comment or user.';return;}
AlphaBox.Close();objLink.innerHTML='Reported<span class="punctuation">!</span>';objLink.className='report_abuse approve';objLink.setAttribute('onclick','return false;');submit_bttn.removeAttribute('onclick');if(beforeAjax)beforeAjax();new Ajax.Request('/account/ajax_report_spam',{asynchronous:true,evalScripts:true,parameters:{type:type,id:id,reason:reason},onComplete:function(transport){if(transport.status!=200){alert("An error has occured.");}}});}}})();roadblock=function(source){this.source=source;this.type="Roadblock";this.version=null;this.additional_login_title="";this.register_show=function(){throw("Register Show Function not assigned for the correct use of roadblock object");}
this.stocks="";this.email="";this.password="";this.cfa=null;this.register=function(){try{if(!this.cfa)stocksAr=SA.Models.StockModel.stringToStocksArray($('autocomplete_roadblock').value);clearErrors();if($('roadblock_error')){$('roadblock_error').innerHTML="";if(!this.cfa&&$('autocomplete_roadblock').value==$('autocomplete_roadblock').title){clientSideError($('autocomplete_roadblock'),"*Please register in order to continue");return;}
if(!this.cfa&&stocksAr[1].length>0){clientSideError($('autocomplete_roadblock'),"*Symbol(s) not recognized");$('roadblock_error').innerHTML+=": "+stocksAr[1].join(",");$('autocomplete_roadblock').value=stocksAr[0].join(", ");return;}
if(!this.cfa&&stocksAr[0].uniq().length<5){clientSideError($('autocomplete_roadblock'),"*Please enter at least 5 stocks to continue");return;}
if(!rxEmail.test($("roadblock_email").value)){clientSideError($("roadblock_email"),"*Invalid Email");return;}
if($("roadblock_password").value==$("roadblock_password").title){$("roadblock_password").focus();clientSideError($("roadblock_password"),"*Please choose a password");return;}
if($("roadblock_password").value.length<4){$("roadblock_password").focus();clientSideError($("roadblock_password"),"*Password too short");return;}}
$('roadblock_loader').show();var opt={}
if(!this.cfa)slugs=stocksAr[0].join(",");if(!this.cfa&&$("sendRta").checked){opt.noAlerts=false;opt.rtaSlugs=slugs;}else{opt.noAlerts=true;if(!this.cfa)opt.rtaSlugs=slugs;}
if(this.cfa){opt.cfa="cfa_user";}
opt.password=$("roadblock_password").value;opt.activity='roadblock';SA.Data.User.Register($("roadblock_email").value,this.source,rb_success,rb_fail,opt);}catch(e){Mone.event(rb.type,rb.source,"Js Error : roadblock register - "+e.message);force_close();}}
this.close=function(){force_close();}
function clientSideError(obj,msg){$('roadblock_error').innerHTML=msg;var rta_reg=($('sendRta')&&$('sendRta').checked)?"Ticker addition alert conversion":"";Mone.event(rb.type,rb.source+' Register',"Error : "+msg);if(obj){obj.addClassName('bcred');}
return;}
function rb_success(){try{var rta_reg=($('sendRta')&&$('sendRta').checked)?"Ticker addition alert conversion":"";if($('sendRta')&&$('sendRta').checked)Mone.event(rb.type,rb.source+' Register',' Registration conversion alerts');else Mone.event(rb.type,rb.source+' Register',"Registration conversion no alerts");SA.Utils.Popup.roadblock_confirmation();}catch(e){Mone.event(rb.type,rb.source,"Js Error : roadblock success register - "+e.message);force_close();}}
function rb_fail(response){try{var rta_reg=($('sendRta')&&$('sendRta').checked)?"Ticker addition alert conversion":"";if($('roadblock_error')&&response.errors=="already_registered"){$('roadblock_error').innerHTML="*This email is already registered in the system.";}
if($('roadblock_error')&&response.errors=="Username has been already taken"){$('roadblock_error').innerHTML="*Username has been already taken.";}
if($('roadblock_error')&&response.errors=="regislogin"){Mone.event(rb.type,rb.source,"Regislogin");SA.Utils.Popup.regislogin_notification();}
$('roadblock_loader').hide();Mone.event(rb.type,rb.source+' Register',"Error : "+response.errors);}catch(e){Mone.event(rb.type,rb.source,"Js Error : roadblock fail register - "+e.message);force_close();}}
function clearErrors(){$$('.bcred').each(function(o){o.removeClassName('bcred');});}
function force_close(){$('alphabox-modal-overlay').hide();$('alphabox-modal-window').hide();}}