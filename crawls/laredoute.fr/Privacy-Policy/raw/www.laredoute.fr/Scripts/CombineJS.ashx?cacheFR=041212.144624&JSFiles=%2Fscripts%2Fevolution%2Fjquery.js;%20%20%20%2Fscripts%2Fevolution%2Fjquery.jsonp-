
/*!
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left")}catch(a){setTimeout(ma,1);return}c.ready()}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function X(a,b,d,f,e,j){var i=a.length;if(typeof b==="object"){for(var o in b)X(a,o,b[o],f,e,d);return a}if(d!==w){f=!j&&f&&c.isFunction(d);for(o=0;o<i;o++)e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);return a}return i?
e(a[0],b):w}function J(){return(new Date).getTime()}function Y(){return false}function Z(){return true}function na(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;i=c.data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;var u=i.live.slice(0);for(k=0;k<u.length;k++){i=u[k];i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1)}j=c(a.target).closest(f,a.currentTarget);n=0;for(r=
j.length;n<r;n++)for(k=0;k<u.length;k++){i=u[k];if(j[n].selector===i.selector){o=j[n].elem;f=null;if(i.preType==="mouseenter"||i.preType==="mouseleave")f=c(a.relatedTarget).closest(i.selector)[0];if(!f||f!==o)d.push({elem:o,handleObj:i})}}n=0;for(r=d.length;n<r;n++){j=d[n];a.currentTarget=j.elem;a.data=j.handleObj.data;a.handleObj=j.handleObj;if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;break}}return b}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,
"&")}function qa(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function ra(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);if(f=f&&f.events){delete e.handle;e.events={};for(var j in f)for(var i in f[j])c.event.add(this,j,f[j][i],f[j][i].data)}}})}function sa(a,b,d){var f,e,j;b=b&&b[0]?b[0].ownerDocument||b[0]:s;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=
true;if(j=c.fragments[a[0]])if(j!==1)f=j}if(!f){f=b.createDocumentFragment();c.clean(a,b,f,d)}if(e)c.fragments[a[0]]=j?f:1;return{fragment:f,cacheable:e}}function K(a,b){var d={};c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a});return d}function wa(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var c=function(a,b){return new c.fn.init(a,b)},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,
Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;c.fn=c.prototype={init:function(a,b){var d,f;if(!a)return this;if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(a==="body"&&!b){this.context=s;this[0]=s.body;this.selector="body";this.length=1;return this}if(typeof a==="string")if((d=Ta.exec(a))&&
(d[1]||!b))if(d[1]){f=b?b.ownerDocument||b:s;if(a=Xa.exec(a))if(c.isPlainObject(b)){a=[s.createElement(a[1])];c.fn.attr.call(a,b,true)}else a=[f.createElement(a[1])];else{a=sa([d[1]],[f]);a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes}return c.merge(this,a)}else{if(b=s.getElementById(d[2])){if(b.id!==d[2])return T.find(a);this.length=1;this[0]=b}this.context=s;this.selector=a;return this}else if(!b&&/^\w+$/.test(a)){this.selector=a;this.context=s;a=s.getElementsByTagName(a);return c.merge(this,
a)}else return!b||b.jquery?(b||T).find(a):c(b).find(a);else if(c.isFunction(a))return T.ready(a);if(a.selector!==w){this.selector=a.selector;this.context=a.context}return c.makeArray(a,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return R.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,b,d){var f=c();c.isArray(a)?ba.apply(f,a):c.merge(f,a);f.prevObject=this;f.context=this.context;if(b===
"find")f.selector=this.selector+(this.selector?" ":"")+d;else if(b)f.selector=this.selector+"."+b+"("+d+")";return f},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();if(c.isReady)a.call(s,c);else Q&&Q.push(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,
function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||c(null)},push:ba,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;if(typeof a==="boolean"){f=a;a=arguments[1]||{};b=2}if(typeof a!=="object"&&!c.isFunction(a))a={};if(d===b){a=this;--b}for(;b<d;b++)if((e=arguments[b])!=null)for(j in e){i=a[j];o=e[j];if(a!==o)if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||
c.isArray(i))?i:c.isArray(o)?[]:{};a[j]=c.extend(f,i,o)}else if(o!==w)a[j]=o}return a};c.extend({noConflict:function(a){A.$=Sa;if(a)A.jQuery=Ra;return c},isReady:false,ready:function(){if(!c.isReady){if(!s.body)return setTimeout(c.ready,13);c.isReady=true;if(Q){for(var a,b=0;a=Q[b++];)a.call(s,c);Q=null}c.fn.triggerHandler&&c(s).triggerHandler("ready")}},bindReady:function(){if(!xa){xa=true;if(s.readyState==="complete")return c.ready();if(s.addEventListener){s.addEventListener("DOMContentLoaded",
L,false);A.addEventListener("load",c.ready,false)}else if(s.attachEvent){s.attachEvent("onreadystatechange",L);A.attachEvent("onload",c.ready);var a=false;try{a=A.frameElement==null}catch(b){}s.documentElement.doScroll&&a&&ma()}}},isFunction:function(a){return $.call(a)==="[object Function]"},isArray:function(a){return $.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,
"isPrototypeOf"))return false;var b;for(b in a);return b===w||aa.call(a,b)},isEmptyObject:function(a){for(var b in a)return false;return true},error:function(a){throw a;},parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=c.trim(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+
a))();else c.error("Invalid JSON: "+a)},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");d.type="text/javascript";if(c.support.scriptEval)d.appendChild(s.createTextNode(a));else d.text=a;b.insertBefore(d,b.firstChild);b.removeChild(d)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);if(d)if(i)for(f in a){if(b.apply(a[f],
d)===false)break}else for(;e<j;){if(b.apply(a[e++],d)===false)break}else if(i)for(f in a){if(b.call(a[f],f,a[f])===false)break}else for(d=a[0];e<j&&b.call(d,e,d)!==false;d=a[++e]);return a},trim:function(a){return(a||"").replace(Wa,"")},makeArray:function(a,b){b=b||[];if(a!=null)a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);return b},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var d=0,f=b.length;d<f;d++)if(b[d]===
a)return d;return-1},merge:function(a,b){var d=a.length,f=0;if(typeof b.length==="number")for(var e=b.length;f<e;f++)a[d++]=b[f];else for(;b[f]!==w;)a[d++]=b[f++];a.length=d;return a},grep:function(a,b,d){for(var f=[],e=0,j=a.length;e<j;e++)!d!==!b(a[e],e)&&f.push(a[e]);return f},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;j<i;j++){e=b(a[j],j,d);if(e!=null)f[f.length]=e}return f.concat.apply([],f)},guid:1,proxy:function(a,b,d){if(arguments.length===2)if(typeof b==="string"){d=a;a=d[b];b=w}else if(b&&
!c.isFunction(b)){d=b;b=w}if(!b&&a)b=function(){return a.apply(d||this,arguments)};if(a)b.guid=a.guid=a.guid||b.guid||c.guid++;return b},uaMatch:function(a){a=a.toLowerCase();a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},browser:{}});P=c.uaMatch(P);if(P.browser){c.browser[P.browser]=true;c.browser.version=P.version}if(c.browser.webkit)c.browser.safari=
true;if(ya)c.inArray=function(a,b){return ya.call(b,a)};T=c(s);if(s.addEventListener)L=function(){s.removeEventListener("DOMContentLoaded",L,false);c.ready()};else if(s.attachEvent)L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);c.ready()}};(function(){c.support={};var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();d.style.display="none";d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,
parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};b.type="text/javascript";try{b.appendChild(s.createTextNode("window."+f+"=1;"))}catch(i){}a.insertBefore(b,a.firstChild);if(A[f]){c.support.scriptEval=true;delete A[f]}try{delete b.test}catch(o){c.support.deleteExpando=false}a.removeChild(b);if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=
false;d.detachEvent("onclick",k)});d.cloneNode(true).fireEvent("onclick")}d=s.createElement("div");d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=s.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var k=s.createElement("div");k.style.width=k.style.paddingLeft="1px";s.body.appendChild(k);c.boxModel=c.support.boxModel=k.offsetWidth===2;s.body.removeChild(k).style.display="none"});a=function(k){var n=
s.createElement("div");k="on"+k;var r=k in n;if(!r){n.setAttribute(k,"return;");r=typeof n[k]==="function"}return r};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=e=j=null}})();c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var G="jQuery"+J(),Ya=0,za={};c.extend({cache:{},expando:G,noData:{embed:true,object:true,
applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var f=a[G],e=c.cache;if(!f&&typeof b==="string"&&d===w)return null;f||(f=++Ya);if(typeof b==="object"){a[G]=f;e[f]=c.extend(true,{},b)}else if(!e[f]){a[G]=f;e[f]={}}a=e[f];if(d!==w)a[b]=d;return typeof b==="string"?a[b]:a}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var d=a[G],f=c.cache,e=f[d];if(b){if(e){delete e[b];c.isEmptyObject(e)&&c.removeData(a)}}else{if(c.support.deleteExpando)delete a[c.expando];
else a.removeAttribute&&a.removeAttribute(c.expando);delete f[d]}}}});c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length)return c.data(this[0]);else if(typeof a==="object")return this.each(function(){c.data(this,a)});var d=a.split(".");d[1]=d[1]?"."+d[1]:"";if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);if(f===w&&this.length)f=c.data(this[0],a);return f===w&&d[1]?this.data(d[0]):f}else return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,
a,b)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var f=c.data(a,b);if(!d)return f||[];if(!f||c.isArray(d))f=c.data(a,b,c.makeArray(d));else f.push(d);return f}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),f=d.shift();if(f==="inprogress")f=d.shift();if(f){b==="fx"&&d.unshift("inprogress");f.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===
w)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,
cb=/^(a|area)$/i,Ba=/radio|checkbox/;c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(n){var r=c(this);r.addClass(a.call(this,n,r.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1)if(e.className){for(var j=" "+e.className+" ",
i=e.className,o=0,k=b.length;o<k;o++)if(j.indexOf(" "+b[o]+" ")<0)i+=" "+b[o];e.className=c.trim(i)}else e.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(k){var n=c(this);n.removeClass(a.call(this,k,n.attr("class")))});if(a&&typeof a==="string"||a===w)for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1&&e.className)if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;i<o;i++)j=j.replace(" "+b[i]+" ",
" ");e.className=c.trim(j)}else e.className=""}return this},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";if(c.isFunction(a))return this.each(function(e){var j=c(this);j.toggleClass(a.call(this,e,j.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var e,j=0,i=c(this),o=b,k=a.split(ca);e=k[j++];){o=f?o:!i.hasClass(e);i[o?"addClass":"removeClass"](e)}else if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);this.className=
this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1)return true;return false},val:function(a){if(a===w){var b=this[0];if(b){if(c.nodeName(b,"option"))return(b.attributes.value||{}).specified?b.value:b.text;if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;b=b.type==="select-one";if(d<0)return null;var j=b?d:0;for(d=b?d+1:e.length;j<d;j++){var i=
e[j];if(i.selected){a=c(i).val();if(b)return a;f.push(a)}}return f}if(Ba.test(b.type)&&!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Za,"")}return w}var o=c.isFunction(a);return this.each(function(k){var n=c(this),r=a;if(this.nodeType===1){if(o)r=a.call(this,k,n.val());if(typeof r==="number")r+="";if(c.isArray(r)&&Ba.test(this.type))this.checked=c.inArray(n.val(),r)>=0;else if(c.nodeName(this,"select")){var u=c.makeArray(r);c("option",this).each(function(){this.selected=
c.inArray(c(this).val(),u)>=0});if(!u.length)this.selectedIndex=-1}else this.value=r}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8)return w;if(f&&b in c.attrFn)return c(a)[b](d);f=a.nodeType!==1||!c.isXMLDoc(a);var e=d!==w;b=f&&c.props[b]||b;if(a.nodeType===1){var j=$a.test(b);if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d}if(c.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;return a[b]}if(!c.support.style&&f&&b==="style"){if(e)a.style.cssText=""+d;return a.style.cssText}e&&a.setAttribute(b,""+d);a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);return a===null?w:a}return c.style(a,b,d)}});var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,
function(b){return"\\"+b})};c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement)a=A;var e,j;if(d.handler){e=d;d=e.handler}if(!d.guid)d.guid=c.guid++;if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;if(!o)j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w};o.elem=a;b=b.split(" ");for(var k,n=0,r;k=b[n++];){j=e?c.extend({},e):{handler:d,data:f};if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();j.namespace=r.slice(0).sort().join(".")}else{r=[];j.namespace=""}j.type=k;j.guid=d.guid;var u=i[k],z=c.event.special[k]||{};if(!u){u=i[k]=[];if(!z.setup||z.setup.call(a,f,r,o)===false)if(a.addEventListener)a.addEventListener(k,o,false);else a.attachEvent&&a.attachEvent("on"+k,o)}if(z.add){z.add.call(a,j);if(!j.handler.guid)j.handler.guid=d.guid}u.push(j);c.event.global[k]=true}a=null}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),
C=z&&z.events;if(z&&C){if(b&&b.type){d=b.handler;b=b.type}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(e in C)c.event.remove(a,e+b)}else{for(b=b.split(" ");e=b[j++];){n=e;i=e.indexOf(".")<0;o=[];if(!i){o=e.split(".");e=o.shift();k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(r=C[e])if(d){n=c.event.special[e]||{};for(B=f||0;B<r.length;B++){u=r[B];if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);n.remove&&n.remove.call(a,u)}if(f!=
null)break}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false)Ca(a,e,z.handle);delete C[e]}}else for(var B=0;B<r.length;B++){u=r[B];if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);r.splice(B--,1)}}}if(c.isEmptyObject(C)){if(b=z.handle)b.elem=null;delete z.events;delete z.handle;c.isEmptyObject(z)&&c.removeData(a)}}}}},trigger:function(a,b,d,f){var e=a.type||a;if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);if(e.indexOf("!")>=0){a.type=
e=e.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===8)return w;a.result=w;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(f=c.data(d,"handle"))&&f.apply(d,b);f=d.parentNode||d.ownerDocument;try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()]))if(d["on"+e]&&d["on"+e].apply(d,b)===false)a.result=false}catch(j){}if(!a.isPropagationStopped()&&
f)c.event.trigger(a,b,f,true);else if(!a.isDefaultPrevented()){f=a.target;var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e])f["on"+e]=null;c.event.triggered=true;f[e]()}}catch(n){}if(i)f["on"+e]=i;c.event.triggered=false}}},handle:function(a){var b,d,f,e;a=arguments[0]=c.event.fix(a||A.event);a.currentTarget=this;b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");a.type=d.shift();f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}e=c.data(this,"events");d=e[a.type];if(e&&d){d=d.slice(0);e=0;for(var j=d.length;e<j;e++){var i=d[e];if(b||f.test(i.namespace)){a.handler=i.handler;a.data=i.data;a.handleObj=i;i=i.handler.apply(this,arguments);if(i!==w){a.result=i;if(i===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[G])return a;var b=a;a=c.Event(b);for(var d=this.props.length,f;d;){f=this.props[--d];a[f]=b[f]}if(!a.target)a.target=a.srcElement||s;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){b=s.documentElement;d=s.body;a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==w)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}))},remove:function(a){var b=true,d=a.origType.replace(O,"");c.each(c.data(this,
"events").live||[],function(){if(d===this.origType.replace(O,""))return b=false});b&&c.event.remove(this,a.origType,oa)}},beforeunload:{setup:function(a,b,d){if(this.setInterval)this.onbeforeunload=d;return false},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&&a.type){this.originalEvent=
a;this.type=a.type}else this.type=a;this.timeStamp=J();this[G]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;var a=this.originalEvent;if(a){a.preventDefault&&a.preventDefault();a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=Z;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;this.stopPropagation()},isDefaultPrevented:Y,isPropagationStopped:Y,
isImmediatePropagationStopped:Y};var Da=function(a){var b=a.relatedTarget;try{for(;b&&b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},Ea=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a)},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da)}}});if(!c.support.submitBubbles)c.event.special.submit=
{setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length)return na("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13)return na("submit",this,arguments)})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};
if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},fa=function(a,b){var d=a.target,f,e;if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");e=Fa(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",
e);if(!(f===w||e===f))if(f!=null||e){a.type="change";return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return fa.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple")return fa.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,
"_change_data",Fa(a))}},setup:function(){if(this.type==="file")return false;for(var a in ea)c.event.add(this,a+".specialChange",ea[a]);return da.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return da.test(this.nodeName)}};ea=c.event.special.change.filters}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);f.type=b;return c.event.handle.call(this,f)}c.event.special[b]={setup:function(){this.addEventListener(a,
d,true)},teardown:function(){this.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d)this[b](j,f,d[j],e);return this}if(c.isFunction(f)){e=f;f=w}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);return e.apply(this,arguments)}):e;if(d==="unload"&&b!=="one")this.one(d,f,e);else{j=0;for(var o=this.length;j<o;j++)c.event.add(this[j],d,i,f)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&
!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else{d=0;for(var f=this.length;d<f;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,f){return this.live(b,d,f,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);a.preventDefault();a.stopPropagation();c.event.trigger(a,b,this[0]);return a.result}},
toggle:function(a){for(var b=arguments,d=1;d<b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,e+1);f.preventDefault();return b[e].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,
u=j?this:c(this.context);if(c.isFunction(f)){e=f;f=w}for(d=(d||"").split(" ");(i=d[o++])!=null;){j=O.exec(i);k="";if(j){k=j[0];i=i.replace(O,"")}if(i==="hover")d.push("mouseenter"+k,"mouseleave"+k);else{n=i;if(i==="focus"||i==="blur"){d.push(Ga[i]+k);i+=k}else i=(Ga[i]||i)+k;b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n})}):u.unbind(pa(i,r),e)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),
function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});(function(){function a(g){for(var h="",l,m=0;g[m];m++){l=g[m];if(l.nodeType===3||l.nodeType===4)h+=l.nodeValue;else if(l.nodeType!==8)h+=a(l.childNodes)}return h}function b(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];
if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1&&!p){t.sizcache=l;t.sizset=q}if(t.nodeName.toLowerCase()===h){y=t;break}t=t[g]}m[q]=y}}}function d(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1){if(!p){t.sizcache=l;t.sizset=q}if(typeof h!=="string"){if(t===h){y=true;break}}else if(k.filter(h,[t]).length>0){y=t;break}}t=t[g]}m[q]=y}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
e=0,j=Object.prototype.toString,i=false,o=true;[0,0].sort(function(){o=false;return 0});var k=function(g,h,l,m){l=l||[];var q=h=h||s;if(h.nodeType!==1&&h.nodeType!==9)return[];if(!g||typeof g!=="string")return l;for(var p=[],v,t,y,S,H=true,M=x(h),I=g;(f.exec(""),v=f.exec(I))!==null;){I=v[3];p.push(v[1]);if(v[2]){S=v[3];break}}if(p.length>1&&r.exec(g))if(p.length===2&&n.relative[p[0]])t=ga(p[0]+p[1],h);else for(t=n.relative[p[0]]?[h]:k(p.shift(),h);p.length;){g=p.shift();if(n.relative[g])g+=p.shift();
t=ga(g,t)}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0]}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);t=v.expr?k.filter(v.expr,v.set):v.set;if(p.length>0)y=z(t);else H=false;for(;p.length;){var D=p.pop();v=D;if(n.relative[D])v=p.pop();else D="";if(v==null)v=h;n.relative[D](y,v,M)}}else y=[]}y||(y=t);y||k.error(D||
g);if(j.call(y)==="[object Array]")if(H)if(h&&h.nodeType===1)for(g=0;y[g]!=null;g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g])))l.push(t[g])}else for(g=0;y[g]!=null;g++)y[g]&&y[g].nodeType===1&&l.push(t[g]);else l.push.apply(l,y);else z(y,l);if(S){k(S,q,l,m);k.uniqueSort(l)}return l};k.uniqueSort=function(g){if(B){i=o;g.sort(B);if(i)for(var h=1;h<g.length;h++)g[h]===g[h-1]&&g.splice(h--,1)}return g};k.matches=function(g,h){return k(g,null,null,h)};k.find=function(g,h,l){var m,q;if(!g)return[];
for(var p=0,v=n.order.length;p<v;p++){var t=n.order[p];if(q=n.leftMatch[t].exec(g)){var y=q[1];q.splice(1,1);if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");m=n.find[t](q,h,l);if(m!=null){g=g.replace(n.match[t],"");break}}}}m||(m=h.getElementsByTagName("*"));return{set:m,expr:g}};k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);g&&h.length;){for(var H in n.filter)if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;D=t[1];y=false;t.splice(1,1);if(D.substr(D.length-
1)!=="\\"){if(v===p)p=[];if(n.preFilter[H])if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true)continue}else y=I=true;if(t)for(var U=0;(D=v[U])!=null;U++)if(D){I=M(D,t,U,v);var Ha=m^!!I;if(l&&I!=null)if(Ha)y=true;else v[U]=false;else if(Ha){p.push(D);y=true}}if(I!==w){l||(v=p);g=g.replace(n.match[H],"");if(!y)return[];break}}}if(g===q)if(y==null)k.error(g);else break;q=g}return v};k.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},
relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);l=l&&!m;if(m)h=h.toLowerCase();m=0;for(var q=g.length,p;m<q;m++)if(p=g[m]){for(;(p=p.previousSibling)&&p.nodeType!==1;);g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h}l&&k.filter(h,g,true)},">":function(g,h){var l=typeof h==="string";if(l&&!/\W/.test(h)){h=h.toLowerCase();for(var m=0,q=g.length;m<q;m++){var p=g[m];if(p){l=p.parentNode;g[m]=l.nodeName.toLowerCase()===h?l:false}}}else{m=0;for(q=g.length;m<q;m++)if(p=g[m])g[m]=
l?p.parentNode:p.parentNode===h;l&&k.filter(h,g,true)}},"":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("parentNode",h,m,g,p,l)},"~":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("previousSibling",h,m,g,p,l)}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l)return(g=h.getElementById(g[1]))?[g]:[]},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);for(var m=0,q=h.length;m<q;m++)h[m].getAttribute("name")===g[1]&&l.push(h[m]);return l.length===0?null:l}},TAG:function(g,h){return h.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";if(p)return g;p=0;for(var v;(v=h[p])!=null;p++)if(v)if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0))l||m.push(v);else if(l)h[p]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},
CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=h[1]+(h[2]||1)-0;g[3]=h[3]-0}g[0]=e++;return g},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");if(!p&&n.attrMap[h])g[1]=n.attrMap[h];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,h,l,m,q){if(g[1]==="not")if((f.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=k(g[3],null,null,h);else{g=k.filter(g[3],h,l,true^q);l||m.push.apply(m,
g);return false}else if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,h,l){return!!k(l[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},
text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},
setFilters:{first:function(g,h){return h===0},last:function(g,h,l,m){return h===m.length-1},even:function(g,h){return h%2===0},odd:function(g,h){return h%2===1},lt:function(g,h,l){return h<l[3]-0},gt:function(g,h,l){return h>l[3]-0},nth:function(g,h,l){return l[3]-0===h},eq:function(g,h,l){return l[3]-0===h}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];if(p)return p(g,l,h,m);else if(q==="contains")return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;else if(q==="not"){h=
h[3];l=0;for(m=h.length;l<m;l++)if(h[l]===g)return false;return true}else k.error("Syntax error, unrecognized expression: "+q)},CHILD:function(g,h){var l=h[1],m=g;switch(l){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(l==="first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":l=h[2];var q=h[3];if(l===1&&q===0)return true;h=h[0];var p=g.parentNode;if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;for(m=p.firstChild;m;m=
m.nextSibling)if(m.nodeType===1)m.nodeIndex=++v;p.sizcache=h}g=g.nodeIndex-q;return l===0?g===0:g%l===0&&g/l>=0}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1},ATTR:function(g,h){var l=h[1];g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);l=g+"";var m=h[2];h=h[4];return g==null?m==="!=":m===
"="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false},POS:function(g,h,l,m){var q=n.setFilters[h[2]];if(q)return q(g,l,h,m)}}},r=n.match.POS;for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,
h){return"\\"+(h-0+1)}))}var z=function(g,h){g=Array.prototype.slice.call(g,0);if(h){h.push.apply(h,g);return h}return g};try{Array.prototype.slice.call(s.documentElement.childNodes,0)}catch(C){z=function(g,h){h=h||[];if(j.call(g)==="[object Array]")Array.prototype.push.apply(h,g);else if(typeof g.length==="number")for(var l=0,m=g.length;l<m;l++)h.push(g[l]);else for(l=0;g[l];l++)h.push(g[l]);return h}}var B;if(s.documentElement.compareDocumentPosition)B=function(g,h){if(!g.compareDocumentPosition||
!h.compareDocumentPosition){if(g==h)i=true;return g.compareDocumentPosition?-1:1}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;if(g===0)i=true;return g};else if("sourceIndex"in s.documentElement)B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h)i=true;return g.sourceIndex?-1:1}g=g.sourceIndex-h.sourceIndex;if(g===0)i=true;return g};else if(s.createRange)B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h)i=true;return g.ownerDocument?-1:1}var l=g.ownerDocument.createRange(),m=
h.ownerDocument.createRange();l.setStart(g,0);l.setEnd(g,0);m.setStart(h,0);m.setEnd(h,0);g=l.compareBoundaryPoints(Range.START_TO_END,m);if(g===0)i=true;return g};(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();g.innerHTML="<a name='"+h+"'/>";var l=s.documentElement;l.insertBefore(g,l.firstChild);if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p)return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&
q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[]};n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&p&&p.nodeValue===q}}l.removeChild(g);l=g=null})();(function(){var g=s.createElement("div");g.appendChild(s.createComment(""));if(g.getElementsByTagName("*").length>0)n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);if(h[1]==="*"){h=[];for(var m=0;l[m];m++)l[m].nodeType===1&&h.push(l[m]);l=h}return l};g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(h){return h.getAttribute("href",2)};g=null})();s.querySelectorAll&&function(){var g=k,h=s.createElement("div");h.innerHTML="<p class='TEST'></p>";if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;if(!v&&q.nodeType===9&&!x(q))try{return z(q.querySelectorAll(m),p)}catch(t){}return g(m,q,p,v)};for(var l in g)k[l]=g[l];h=null}}();
(function(){var g=s.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m)return l.getElementsByClassName(h[1])};g=null}}})();var E=s.compareDocumentPosition?function(g,h){return!!(g.compareDocumentPosition(h)&16)}:
function(g,h){return g!==h&&(g.contains?g.contains(h):true)},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false},ga=function(g,h){var l=[],m="",q;for(h=h.nodeType?[h]:h;q=n.match.PSEUDO.exec(g);){m+=q[0];g=g.replace(n.match.PSEUDO,"")}g=n.relative[g]?g+"*":g;q=0;for(var p=h.length;q<p;q++)k(g,h[q],l);return k.filter(m,l)};c.find=k;c.expr=k.selectors;c.expr[":"]=c.expr.filters;c.unique=k.uniqueSort;c.text=a;c.isXMLDoc=x;c.contains=E})();var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,
gb=/,/;R=Array.prototype.slice;var Ia=function(a,b,d){if(c.isFunction(b))return c.grep(a,function(e,j){return!!b.call(e,j,e)===d});else if(b.nodeType)return c.grep(a,function(e){return e===b===d});else if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1});if(Ua.test(b))return c.filter(b,f,!d);else b=c.filter(b,f)}return c.grep(a,function(e){return c.inArray(e,b)>=0===d})};c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;f<e;f++){d=b.length;
c.find(a,this[f],b);if(f>0)for(var j=d;j<b.length;j++)for(var i=0;i<d;i++)if(b[i]===b[j]){b.splice(j--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,f=b.length;d<f;d++)if(c.contains(this,b[d]))return true})},not:function(a){return this.pushStack(Ia(this,a,false),"not",a)},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j=
{},i;if(f&&a.length){e=0;for(var o=a.length;e<o;e++){i=a[e];j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i)}for(;f&&f.ownerDocument&&f!==b;){for(i in j){e=j[i];if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});delete j[i]}}f=f.parentNode}}return d}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;return this.map(function(n,r){for(;r&&r.ownerDocument&&r!==b;){if(k?k.index(r)>-1:c(r).is(a))return r;r=r.parentNode}return null})},index:function(a){if(!a||typeof a===
"string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);b=c.merge(this.get(),a);return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",
d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);eb.test(a)||(f=d);if(f&&typeof f==="string")e=c.filter(f,e);e=this.length>1?c.unique(e):e;if((this.length>1||gb.test(f))&&fb.test(a))e=e.reverse();return this.pushStack(e,a,R.call(arguments).join(","))}});c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return c.find.matches(a,b)},dir:function(a,b,d){var f=[];for(a=a[b];a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));){a.nodeType===
1&&f.push(a);a=a[b]}return f},nth:function(a,b,d){b=b||1;for(var f=0;a;a=a[d])if(a.nodeType===1&&++f===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?
a:b+"></"+d+">"},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};F.optgroup=F.option;F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;F.th=F.td;if(!c.support.htmlSerialize)F._default=[1,"div<div>","</div>"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=
c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==w)return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,f;(f=this[d])!=null;d++)if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));c.cleanData([f])}f.parentNode&&f.parentNode.removeChild(f)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;if(!d){d=f.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0]}else return this.cloneNode(true)});if(a===true){ra(this,b);ra(this.find("*"),b.find("*"))}return b},html:function(a){if(a===w)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,
""):null;else if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);try{for(var b=0,d=this.length;b<d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(f){this.empty().append(a)}}else c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();j.empty().append(function(){return a.call(this,e,i)})}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&
this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),f=d.html();d.replaceWith(a.call(this,b,f))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||
u.appendChild(u.ownerDocument.createElement("tbody")):u}var e,j,i=a[0],o=[],k;if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i))return this.each(function(){c(this).domManip(a,b,d,true)});if(c.isFunction(i))return this.each(function(u){var z=c(this);a[0]=i.call(this,u,b?z.html():w);z.domManip(a,b,d)});if(this[0]){e=i&&i.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);k=e.fragment;if(j=k.childNodes.length===
1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");for(var n=0,r=this.length;n<r;n++)d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k)}o.length&&c.each(o,Qa)}return this}});c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];d=c(d);var e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this}else{e=0;for(var j=d.length;e<j;e++){var i=(e>0?this.clone(true):this).get();c.fn[b].apply(c(d[e]),i);f=f.concat(i)}return this.pushStack(f,a,d.selector)}}});c.extend({clean:function(a,b,d,f){b=b||s;if(typeof b.createElement==="undefined")b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;for(var e=[],j=0,i;(i=a[j])!=null;j++){if(typeof i==="number")i+="";if(i){if(typeof i==="string"&&!jb.test(i))i=b.createTextNode(i);else if(typeof i==="string"){i=i.replace(Ka,Ma);var o=(La.exec(i)||["",
""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");for(r.innerHTML=k[1]+i+k[2];n--;)r=r.lastChild;if(!c.support.tbody){n=ib.test(i);o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];for(k=o.length-1;k>=0;--k)c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k])}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);i=r.childNodes}if(i.nodeType)e.push(i);else e=
c.merge(e,i)}}if(d)for(j=0;e[j];j++)if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript"))f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));d.appendChild(e[j])}return e},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;(o=a[i])!=null;i++)if(d=o[c.expando]){b=f[d];if(b.events)for(var k in b.events)e[k]?
c.event.remove(o,k):Ca(o,k,b.handle);if(j)delete o[c.expando];else o.removeAttribute&&o.removeAttribute(c.expando);delete f[d]}}});var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=
function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w)return c.curCSS(d,f);if(typeof e==="number"&&!kb.test(f))e+="px";c.style(d,f,e)})};c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8)return w;if((b==="width"||b==="height")&&parseFloat(d)<0)d=w;var f=a.style||a,e=d!==w;if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";a=f.filter||c.curCSS(a,"filter")||"";f.filter=
Na.test(a)?a.replace(Na,b):b}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":""}if(ha.test(b))b=Pa;b=b.replace(ia,ja);if(e)f[b]=d;return f[b]},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);if(f==="margin")e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;else e-=parseFloat(c.curCSS(a,
"border"+this+"Width",true))||0})}a.offsetWidth!==0?i():c.swap(a,ob,i);return Math.max(0,Math.round(e))}return c.curCSS(a,b,d)},curCSS:function(a,b,d){var f,e=a.style;if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return f===""?"1":f}if(ha.test(b))b=Pa;if(!d&&e&&e[b])f=e[b];else if(rb){if(ha.test(b))b="float";b=b.replace(lb,"-$1").toLowerCase();e=a.ownerDocument.defaultView;if(!e)return null;if(a=e.getComputedStyle(a,null))f=
a.getPropertyValue(b);if(b==="opacity"&&f==="")f="1"}else if(a.currentStyle){d=b.replace(ia,ja);f=a.currentStyle[b]||a.currentStyle[d];if(!mb.test(f)&&nb.test(f)){b=e.left;var j=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;e.left=d==="fontSize"?"1em":f||0;f=e.pixelLeft+"px";e.left=b;a.runtimeStyle.left=j}}return f},swap:function(a,b,d){var f={};for(var e in b){f[e]=a.style[e];a.style[e]=b[e]}d.call(a);for(e in b)a.style[e]=f[e]}});if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=
a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!==
"string")return zb.call(this,a);else if(!this.length)return this;var f=a.indexOf(" ");if(f>=0){var e=a.slice(f,a.length);a=a.slice(0,f)}f="GET";if(b)if(c.isFunction(b)){d=b;b=null}else if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);f="POST"}var j=this;c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified")j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);d&&j.each(d,[i.responseText,o,i])}});return this},
serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type))}).map(function(a,b){a=c(this).val();return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d}}):{name:b.name,value:a}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f})},getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&
e.success.call(k,o,i,x);e.global&&f("ajaxSuccess",[x,e])}function d(){e.complete&&e.complete.call(k,x,i);e.global&&f("ajaxComplete",[x,e]);e.global&&!--c.active&&c.event.trigger("ajaxStop")}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p)}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();if(e.data&&e.processData&&typeof e.data!=="string")e.data=c.param(e.data,e.traditional);if(e.dataType==="jsonp"){if(n==="GET")N.test(e.url)||(e.url+=(ka.test(e.url)?
"&":"?")+(e.jsonp||"callback")+"=?");else if(!e.data||!N.test(e.data))e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";e.dataType="json"}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;if(e.data)e.data=(e.data+"").replace(N,"="+j+"$1");e.url=e.url.replace(N,"="+j+"$1");e.dataType="script";A[j]=A[j]||function(q){o=q;b();d();A[j]=w;try{delete A[j]}catch(p){}z&&z.removeChild(C)}}if(e.dataType==="script"&&e.cache===null)e.cache=false;if(e.cache===
false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"")}if(e.data&&n==="GET")e.url+=(ka.test(e.url)?"&":"?")+e.data;e.global&&!c.active++&&c.event.trigger("ajaxStart");r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");C.src=e.url;if(e.scriptCharset)C.charset=e.scriptCharset;if(!j){var B=
false;C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;b();d();C.onload=C.onreadystatechange=null;z&&C.parentNode&&z.removeChild(C)}}}z.insertBefore(C,z.firstChild);return w}var E=false,x=e.xhr();if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);try{if(e.data||a&&a.contentType)x.setRequestHeader("Content-Type",e.contentType);if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",
c.lastModified[e.url]);c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url])}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default)}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");x.abort();return false}e.global&&f("ajaxSend",[x,e]);var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||
d();E=true;if(x)x.onreadystatechange=c.noop}else if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;x.onreadystatechange=c.noop;i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";var p;if(i==="success")try{o=c.httpData(x,e.dataType,e)}catch(v){i="parsererror";p=v}if(i==="success"||i==="notmodified")j||b();else c.handleError(e,x,i,p);d();q==="timeout"&&x.abort();if(e.async)x=null}};try{var h=x.abort;x.abort=function(){x&&h.call(x);
g("abort")}}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout")},e.timeout);try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null)}catch(m){c.handleError(e,x,null,m);d()}e.async||g();return x}},handleError:function(a,b,d,f){if(a.error)a.error.call(a.context||a,b,d,f);if(a.global)(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===
1223||a.status===0}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");if(d)c.lastModified[b]=d;if(f)c.etag[b]=f;return a.status===304||a.status===0},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;a=e?a.responseXML:a.responseText;e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");if(d&&d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b===
"json"||!b&&f.indexOf("json")>=0)a=c.parseJSON(a);else if(b==="script"||!b&&f.indexOf("javascript")>=0)c.globalEval(a);return a},param:function(a,b){function d(i,o){if(c.isArray(o))c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n)});else!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n)}):f(i,o)}function f(i,o){o=c.isFunction(o)?o():o;e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o)}var e=[];if(b===w)b=c.ajaxSettings.traditional;
if(c.isArray(a)||a.jquery)c.each(a,function(){f(this.name,this.value)});else for(var j in a)d(j,a[j]);return e.join("&").replace(yb,"+")}});var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b){if(a||a===0)return this.animate(K("show",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";if(c.css(this[a],"display")==="none"){d=this[a].nodeName;var f;if(la[d])f=la[d];else{var e=c("<"+d+" />").appendTo("body");f=e.css("display");if(f==="none")f="block";e.remove();la[d]=f}c.data(this[a],"olddisplay",f)}}a=0;for(b=this.length;a<b;a++)this[a].style.display=c.data(this[a],"olddisplay")||"";return this}},hide:function(a,b){if(a||a===0)return this.animate(K("hide",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");!d&&d!=="none"&&c.data(this[a],
"olddisplay",c.css(this[a],"display"))}a=0;for(b=this.length;a<b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";if(c.isFunction(a)&&c.isFunction(b))this._toggle.apply(this,arguments);else a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(K("toggle",3),a,b);return this},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d)},
animate:function(a,b,d,f){var e=c.speed(b,d,f);if(c.isEmptyObject(a))return this.each(e.complete);return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;for(i in a){var n=i.replace(ia,ja);if(i!==n){a[n]=a[i];delete a[i];i=n}if(a[i]==="hide"&&o||a[i]==="show"&&!o)return j.complete.call(this);if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");j.overflow=this.style.overflow}if(c.isArray(a[i])){(j.specialEasing=
j.specialEasing||{})[i]=a[i][1];a[i]=a[i][0]}}if(j.overflow!=null)this.style.overflow="hidden";j.curAnim=c.extend({},a);c.each(a,function(r,u){var z=new c.fx(k,j,r);if(Ab.test(u))z[u==="toggle"?o?"show":"hide":u](a);else{var C=Bb.exec(u),B=z.cur(true)||0;if(C){u=parseFloat(C[2]);var E=C[3]||"px";if(E!=="px"){k.style[r]=(u||1)+E;B=(u||1)/z.cur(true)*B;k.style[r]=B+E}if(C[1])u=(C[1]==="-="?-1:1)*u+B;z.custom(B,u,E)}else z.custom(B,u,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]);
this.each(function(){for(var f=d.length-1;f>=0;f--)if(d[f].elem===this){b&&d[f](true);d.splice(f,1)}});b||this.dequeue();return this}});c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f)}});c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};f.duration=c.fx.off?0:typeof f.duration===
"number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;f.old=f.complete;f.complete=function(){f.queue!==false&&c(this).dequeue();c.isFunction(f.old)&&f.old.call(this)};return f},easing:{linear:function(a,b,d,f){return d+f*a},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||
c.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0},custom:function(a,b,d){function f(j){return e.step(j)}this.startTime=J();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;
this.pos=this.state=0;var e=this;f.elem=this.elem;if(f()&&c.timers.push(f)&&!W)W=setInterval(c.fx.tick,13)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=J(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=
this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var f in this.options.curAnim)if(this.options.curAnim[f]!==true)d=false;if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;a=c.data(this.elem,"olddisplay");this.elem.style.display=a?a:this.options.display;if(c.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&c(this.elem).hide();if(this.options.hide||this.options.show)for(var e in this.options.curAnim)c.style(this.elem,
e,this.options.orig[e]);this.options.complete.call(this.elem)}return false}else{e=b-this.startTime;this.state=e/this.options.duration;a=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||
c.fx.stop()},stop:function(){clearInterval(W);W=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&&c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length};c.fn.offset="getBoundingClientRect"in s.documentElement?
function(a){var b=this[0];if(a)return this.each(function(e){c.offset.setOffset(this,a,e)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);var d=b.getBoundingClientRect(),f=b.ownerDocument;b=f.body;f=f.documentElement;return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:function(a){var b=
this[0];if(a)return this.each(function(r){c.offset.setOffset(this,a,r)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;for(var k=b.offsetTop,n=b.offsetLeft;(b=b.parentNode)&&b!==o&&b!==i;){if(c.offset.supportsFixedPosition&&f.position==="fixed")break;j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;n-=b.scrollLeft;if(b===d){k+=b.offsetTop;n+=b.offsetLeft;if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=d;d=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=j}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;n+=o.offsetLeft}if(c.offset.supportsFixedPosition&&
f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);n+=Math.max(i.scrollLeft,o.scrollLeft)}return{top:k,left:n}};c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);d=b.firstChild;f=d.firstChild;e=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=f.offsetTop!==5;this.doesAddBorderForTableAndCells=e.offsetTop===5;f.style.position="fixed";f.style.top="20px";this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;f.style.position=f.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;a.removeChild(b);
c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;d+=parseFloat(c.curCSS(a,"marginLeft",true))||0}return{top:b,left:d}},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position")))a.style.position="relative";var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;if(c.isFunction(b))b=b.call(a,
d,e);d={top:b.top-e.top+j,left:b.left-e.left+i};"using"in b?b.using.call(a,d):f.css(d)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;return{top:d.top-
f.top,left:d.left-f.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(f){var e=this[0],j;if(!e)return null;if(f!==w)return this.each(function(){if(j=wa(this))j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());else this[d]=f});else return(j=wa(e))?"pageXOffset"in j?j[a?"pageYOffset":
"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null};c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null};c.fn[d]=function(f){var e=this[0];if(!e)return f==null?null:this;if(c.isFunction(f))return this.each(function(j){var i=c(this);i[d](f.call(this,j,i[d]()))});return"scrollTo"in
e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px")}});A.jQuery=A.$=c})(window);


(function(b){var d=function(g){return g!==undefined&&g!==null},a=b("head"),f={},e={callback:"C",url:location.href},c=function(H){H=b.extend({},e,H);var Q=H.beforeSend;if(d(Q)){var I=0;H.abort=function(){I=1};if(Q(H,H)===false||I){return H}}var h="",l="&",o="?",J="success",w="error",z=H.success,D=H.complete,M=H.error,x=H.dataFilter,y=H.callbackParameter,L=H.callback,v=H.cache,B=H.pageCache,n=H.url,S=H.data,N=H.timeout,C=function(i){setTimeout(i,1)},E,r,P,O;n=d(n)?n:h;S=d(S)?((typeof S)=="string"?S:b.param(S)):h;d(y)&&(S+=(S==h?h:l)+escape(y)+"=?");!v&&!B&&(S+=(S==h?h:l)+"_"+(new Date()).getTime()+"=");E=n.split(o);if(S!=h){r=S.split(o);O=E.length-1;O&&(E[O]+=l+r.shift());E=E.concat(r)}P=E.length-2;P&&(E[P]+=L+E.pop());var A=E.join(o),g=function(i){d(x)&&(i=x(i));d(z)&&z(i,J);d(D)&&D(H,J)},F=function(i){d(M)&&M(H,i);d(D)&&D(H,i)},t=f[A];if(B&&d(t)){C(function(){if(d(t.e)){F(w)}else{g(t.s)}});return H}var k=b("<iframe />").appendTo(a),K=k[0],G=K.contentWindow||K.contentDocument,m=G.document,q=0,s,p=function(i,j){B&&!d(j)&&(f[A]={e:1});s();F(d(j)?j:w)},R=function(j){G[j]=undefined;try{delete G[j]}catch(i){}},u=L=="E"?"X":"E";if(!d(m)){m=G;G=m.getParentNode()}m.open();G[L]=function(i){q=1;B&&(f[A]={s:i});C(function(){s();g(i)})};G[u]=function(i){(!i||i=="complete")&&!q++&&C(p)};H.abort=s=function(){R(u);R(L);m.open();m.write(h);m.close();k.remove()};C(function(){m.write(['<html><head><script src="',A,'" onload="',u,'()" onreadystatechange="',u,'(this.readyState)"><\/script></head><body onload="',u,'()"></body></html>'].join(h));m.close();N>0&&setTimeout(function(){!q&&p(h,"timeout")},N)});return H};c.setup=function(g){b.extend(e,g)};b.jsonp=c})(jQuery);
;(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
/**
* hoverIntent r5 // 2007.03.27 // jQuery 1.1.2+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne <brian@cherne.net>
*/
(function($j){$j.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$j.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$j(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$j(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$j(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);

var $j=jQuery.noConflict();$j(document).ready(function(){$j("#nav_leve2 a").click(function(){setSubCookieAndCookie('M.R.Omniture','ShoppingTools','Navigation');});$j("#avenue_la li").hover(function(){$j(this).children('ul').show();},function(){$j(this).children('ul').hide();});$j("#cat_search_btn").click(function(){UI.Search("CategorySearch",$j("#cat_search_field").val());return false;});$j("#cat_search_field").focus(function(){this.value="";});$j("#cat_search_field").keypress(function(e){if(e.which==13){UI.Search("CategorySearch",$j("#cat_search_field").val());return false;}});$j("#searchFormRow2 a").click(function(){UI.Search("HeaderSearch",$j("#searchFormRow2 input").val());return false;});$j("#searchFormRow2 input").focus(function(){this.value="";});$j("#searchFormRow2 input").keypress(function(e){if(e.which==13){UI.Search("HeaderSearch",$j("#searchFormRow2 input").val());return false;}});$j("#search_fh_btn").click(function(){if($j('#hdrSearch').val()==""||$j('#hdrSearch').val()=="Mot(s) cl(s) ou rfrence catalogue (ex : 123.4567)")
{return false;}
else
{UI.Search("headerSearchBox");return false;}});$j("#search_ff_btn").click(function(){if($j('#ftrSearch').val()==""||$j('#ftrSearch').val()=="Mot(s) cl(s) ou rfrence catalogue (ex : 123.4567)")
{return false;}
else
{UI.Search("footerSearchBox");return false;}});$j("#search_fh input,#search_fh select").keypress(function(e){var keynum;if(window.event)
keynum=window.event.keyCode;else
keynum=e.which;if(keynum==13){if($j('#hdrSearch').val()==""||$j('#hdrSearch').val()=="Mot(s) cl(s) ou rfrence catalogue (ex : 123.4567)")
{return false;}
else
{UI.Search("headerSearchBox");return false;}}
return true;});$j("#search_ff input,#search_ff select").keypress(function(e){var keynum;if(window.event)
keynum=window.event.keyCode;else
keynum=e.which;if(keynum==13){if($j('#ftrSearch').val()==""||$j('#ftrSearch').val()=="Mot(s) cl(s) ou rfrence catalogue (ex : 123.4567)")
{return false;}
else
{UI.Search("footerSearchBox");return false;}}
return true;});});function UserInterface(id){this._id=id;}
UserInterface.prototype._id;UserInterface.prototype.getName=function(){return this._n;}
UserInterface.prototype.pluginPath="/scripts/evolution/plugins/";var UI=new UserInterface();UserInterface.prototype.NewHeaderSearch=function(){var strCategory="";var EasyAskSearchEngineFlag;var keyword=LRFREncodeUrlString($j('#headerZone .header_search input').val());if(keyword==undefined||keyword==null||keyword==''){return;}
var sampleKeyword="Rechercher un article ou une rfrence"
if($j('#headerZone .header_search input').val()==sampleKeyword){return;}
searchType='HeaderSearch';var hiddenDim='';strCategory='';EasyAskSearchEngineFlag=($j("#ABTestingSE")!="undefined"&&$j("#ABTestingSE").val()!="B")?"&se=ea":"";var strTemp=keyword.replace(/\-/g,'~');strTemp=strTemp.replace(/\,/g,'~');strTemp=strTemp.replace(/\%20/g,'~');strTemp=strTemp.replace(/\ /g,'~')
var arrayKeywords=strTemp.split("~");var countKeywords=0
for(i=0;i<arrayKeywords.length;i++){if(arrayKeywords[i]!='')
{countKeywords=countKeywords+1};}
var nkw="&nkw="+countKeywords;var path="/Search/SearchResults.aspx";var VSPParam='';var VSNParam='';if(typeof(vsp)!="undefined"&&vsp!=''&&searchType!="CategorySearch"){VSPParam="&vsp="+vsp}
if(typeof(vsn)!="undefined"&&vsn!=''){VSNParam="&vsn="+vsn}
strVsn='';if(VSNParam==''){VSNParam=strVsn}
if($j("#hdrSearchDimensionId")!="undefined"&&$j("#hdrSearchDimensionId").val()!=undefined&&$j("#hdrSearchDimensionId").val()!=""){window.location.href=path+"?hiddendims="+$j("#hdrSearchDimensionId").val()+"&SearchType="+searchType+"&Keyword="+keyword+VSNParam+nkw+strCategory+VSPParam;return;}
hiddenDim=(hiddenDim==undefined)?'':hiddenDim;window.location.href=path+"?SearchType="+searchType+"&hiddendims="+hiddenDim+"&Keyword="+keyword+VSNParam+nkw+EasyAskSearchEngineFlag+strCategory+VSPParam;}
UserInterface.prototype.Search=function(searchType,keyword){var strCategory="";var EasyAskSearchEngineFlag;if(searchType=="footerSearchBox")
{keyword=LRFREncodeUrlString($j('#ftrSearch').val());}
else if(keyword==undefined||searchType=="headerSearchBox")
{keyword=LRFREncodeUrlString($j('#hdrSearch').val());}
if(keyword==undefined||keyword==null||keyword==''){return;}
var sampleKeyword="Mot(s) cl(s) ou rfrence catalogue (ex : 123.4567)"
if($j('#hdrSearch').val()==sampleKeyword&&$j('#ftrSearch').val()==sampleKeyword){return;}
if(searchType=="headerSearchBox"){var ddlCat=$j('#search_fh_categorie');searchType=ddlCat.val()==''?'HeaderSearch':'CategorySearch';var hiddenDim=$j("#search_fh_categorie option:selected").attr("endecaid");strCategory=ddlCat.val()==''?'':'&category='+LRFREncodeUrlString(ddlCat.val());EasyAskSearchEngineFlag=($j("#ABTestingSE")!="undefined"&&$j("#ABTestingSE").val()!="B")?"&se=ea":"";}
else if(searchType=="footerSearchBox"){var ddlCat=$j('#search_ff_categorie');searchType=ddlCat.val()==''?'HeaderSearch':'CategorySearch';var hiddenDim=$j("#search_ff_categorie option:selected").attr("endecaid");strCategory=ddlCat.val()==''?'':'&category='+LRFREncodeUrlString(ddlCat.val());EasyAskSearchEngineFlag=($j("#ABTestingSE")!="undefined"&&$j("#ABTestingSE").val()!="B")?"&se=ea":"";}
else if(searchType=="CategorySearch"){var strHref=$j("#cat_search_btn").attr("href");var category=LRFREncodeUrlString(strHref.substring(1));strCategory="&category="+category;}
var strTemp=keyword.replace(/\-/g,'~');strTemp=strTemp.replace(/\,/g,'~');strTemp=strTemp.replace(/\%20/g,'~');strTemp=strTemp.replace(/\ /g,'~')
var arrayKeywords=strTemp.split("~");var countKeywords=0
for(i=0;i<arrayKeywords.length;i++)
{if(arrayKeywords[i]!='')
{countKeywords=countKeywords+1};}
var nkw="&nkw="+countKeywords;var path="/Search/SearchResults.aspx";var VSPParam='';var VSNParam='';if(typeof(vsp)!="undefined"&&vsp!=''&&searchType!="CategorySearch")
{VSPParam="&vsp="+vsp}
if(typeof(vsn)!="undefined"&&vsn!='')
{VSNParam="&vsn="+vsn}
var IdOfSelectedOption=ddlCat[0].options[ddlCat[0].selectedIndex].id;var IndexOfVsnBegin=IdOfSelectedOption.indexOf('_');var strVsn='';if(IndexOfVsnBegin>0)
{strVsn="&vsn="+IdOfSelectedOption.substring(IndexOfVsnBegin+1,IdOfSelectedOption.length);}
if(typeof(strVsn)=="undefined"||strVsn==null)
{strVsn='';}
if(VSNParam=='')
{VSNParam=strVsn}
if($j("#hdrSearchDimensionId")!="undefined"&&$j("#hdrSearchDimensionId").val()!=undefined&&$j("#hdrSearchDimensionId").val()!="")
{window.location.href=path+"?hiddendims="+$j("#hdrSearchDimensionId").val()+"&SearchType="+searchType+"&Keyword="+keyword+VSNParam+nkw+strCategory+VSPParam;return;}
hiddenDim=(hiddenDim==undefined)?'':hiddenDim;window.location.href=path+"?SearchType="+searchType+"&hiddendims="+hiddenDim+"&Keyword="+keyword+VSNParam+nkw+EasyAskSearchEngineFlag+strCategory+VSPParam;}
function LRFREncodeUrlString(str)
{str=str.replace(/\%/g,'%25')
str=str.replace(/\~/g,'%7E');str=str.replace(/\!/g,'%21');str=str.replace(/\@/g,'%40');str=str.replace(/\#/g,'%23');str=str.replace(/\$/g,'%24');str=str.replace(/\^/g,'%5E');str=str.replace(/\&/g,'%26');str=str.replace(/\(/g,'%28');str=str.replace(/\)/g,'%29');str=str.replace(/\&/g,'%7B');str=str.replace(/\{/g,'%7B');str=str.replace(/\}/g,'%7D');str=str.replace(/\[/g,'%5B');str=str.replace(/\]/g,'%5D');str=str.replace(/\=/g,'%3D');str=str.replace(/\:/g,'%3A');str=str.replace(/\//g,'%2F');str=str.replace(/\,/g,'%2C');str=str.replace(/\;/g,'%3B');str=str.replace(/\?/g,'%3F');str=str.replace(/\+/g,'%2B');str=str.replace(/\"/g,'%22');str=str.replace(/\\/g,'%5C');str=str.replace(/\'/g,"%27");return str;}
function TransformToHTML5InputType(){$j('input[HTML5Type]').each(function(){this.setAttribute('type',$j(this).attr('HTML5Type'));this.removeAttribute('HTML5Type');});}
$j(document).ready(function(){try{if(isTouchDevice()){TransformToHTML5InputType();}}catch(ex){}});function isTouchDevice(){try{var el=document.createElement('div');el.setAttribute('ontouchmove','return;');if(typeof el.ontouchmove=="function"){return true;}else{return false}}catch(ex){return false;}}
/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
* Licensed under the MIT License (LICENSE.txt).
*
* Version 2.1.2
*/

(function ($) {

    $.fn.bgiframe = ($.browser.msie && /msie 6\.0/i.test(navigator.userAgent) ? function (s) {
        s = $.extend({
            top: 'auto', // auto == .currentStyle.borderTopWidth
            left: 'auto', // auto == .currentStyle.borderLeftWidth
            width: 'auto', // auto == offsetWidth
            height: 'auto', // auto == offsetHeight
            opacity: true,
            src: 'javascript:false;'
        }, s);
        var html = '<iframe class="bgiframe"frameborder="0"tabindex="-1"src="' + s.src + '"' +
                   'style="display:block;position:absolute;z-index:-1;' +
                       (s.opacity !== false ? 'filter:Alpha(Opacity=\'0\');' : '') +
                       'top:' + (s.top == 'auto' ? 'expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+\'px\')' : prop(s.top)) + ';' +
                       'left:' + (s.left == 'auto' ? 'expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+\'px\')' : prop(s.left)) + ';' +
                       'width:' + (s.width == 'auto' ? 'expression(this.parentNode.offsetWidth+\'px\')' : prop(s.width)) + ';' +
                       'height:' + (s.height == 'auto' ? 'expression(this.parentNode.offsetHeight+\'px\')' : prop(s.height)) + ';' +
                '"/>';
        return this.each(function () {
            if ($(this).children('iframe.bgiframe').length === 0)
                this.insertBefore(document.createElement(html), this.firstChild);
        });
    } : function () { return this; });

    // old alias
    $.fn.bgIframe = $.fn.bgiframe;

    function prop(n) {
        return n && n.constructor === Number ? n + 'px' : n;
    }

})(jQuery);
/*
 * Autocomplete - jQuery plugin 1.0.2
 *
 * Copyright (c) 2007 Dylan Verheul, Dan G. Switzer, Anjesh Tuladhar, J??rn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.autocomplete.js 5747 2008-06-25 18:30:55Z joern.zaefferer $
 *
 */

;(function($) {
	
$.fn.extend({
	autocomplete: function(urlOrData, options) {
		var isUrl = typeof urlOrData == "string";
		options = $.extend({}, $.Autocompleter.defaults, {
			url: isUrl ? urlOrData : null,
			data: isUrl ? null : urlOrData,
			delay: isUrl ? $.Autocompleter.defaults.delay : 10,
			max: options && !options.scroll ? 10 : 150
		}, options);
		
		// if highlight is set to false, replace it with a do-nothing function
		options.highlight = options.highlight || function(value) { return value; };
		
		// if the formatMatch option is not specified, then use formatItem for backwards compatibility
		options.formatMatch = options.formatMatch || options.formatItem;
		
		return this.each(function() {
			new $.Autocompleter(this, options);
		});
	},
	result: function(handler) {
		return this.bind("result", handler);
	},
	search: function(handler) {
		return this.trigger("search", [handler]);
	},
	flushCache: function() {
		return this.trigger("flushCache");
	},
	setOptions: function(options){
		return this.trigger("setOptions", [options]);
	},
	unautocomplete: function() {
		return this.trigger("unautocomplete");
	}
});

$.Autocompleter = function(input, options) {

	var KEY = {
		UP: 38,
		DOWN: 40,
		DEL: 46,
		TAB: 9,
		RETURN: 13,
		ESC: 27,
		COMMA: 188,
		PAGEUP: 33,
		PAGEDOWN: 34,
		BACKSPACE: 8
	};

	// Create $ object for input element
	var $input = $(input).attr("autocomplete", "off").addClass(options.inputClass);

	var timeout;
	var previousValue = "";
	var cache = $.Autocompleter.Cache(options);
	var hasFocus = 0;
	var lastKeyPressCode;
	var config = {
		mouseDownOnSelect: false
	};
	var select = $.Autocompleter.Select(options, input, selectCurrent, config);
	
	var blockSubmit;
	
	// prevent form submit in opera when selecting with return key
	$.browser.opera && $(input.form).bind("submit.autocomplete", function() {
		if (blockSubmit) {
			blockSubmit = false;
			return false;
		}
	});
	
	// only opera doesn't trigger keydown multiple times while pressed, others don't work with keypress at all
	$input.bind(($.browser.opera ? "keypress" : "keydown") + ".autocomplete", function(event) {
		// track last key pressed
		$j("#hdrSearchDimensionId").val("");
		lastKeyPressCode = event.keyCode;
		switch(event.keyCode) {
		
			case KEY.UP:
				event.preventDefault();
				if ( select.visible() ) {
					select.prev();
				} else {
					onChange(0, true);
				}
				break;
				
			case KEY.DOWN:
				event.preventDefault();
				if ( select.visible() ) {
					select.next();
				} else {
					onChange(0, true);
				}
				break;
				
			case KEY.PAGEUP:
				event.preventDefault();
				if ( select.visible() ) {
					select.pageUp();
				} else {
					onChange(0, true);
				}
				break;
				
			case KEY.PAGEDOWN:
				event.preventDefault();
				if ( select.visible() ) {
					select.pageDown();
				} else {
					onChange(0, true);
				}
				break;
			
			// matches also semicolon
			case options.multiple && $.trim(options.multipleSeparator) == "," && KEY.COMMA:
			case KEY.TAB:
			case KEY.RETURN:
				if( selectCurrent() ) {
					// stop default to prevent a form submit, Opera needs special handling
					event.preventDefault();
					blockSubmit = true;
					var targetsearchbox = $j("input.focusedsearchbox").attr("id");
					if (targetsearchbox == "hdrSearch") {
						UI.Search("headerSearchBox");
					}
					else if (targetsearchbox == "ftrSearch") {
						UI.Search("footerSearchBox");	
					}
					return false;
				}
				break;
				
			case KEY.ESC:
				select.hide();
				break;
				
			default:
				clearTimeout(timeout);
				timeout = setTimeout(onChange, options.delay);
				break;
		}
	}).focus(function(){
		// track whether the field has focus, we shouldn't process any
		// results if the field no longer has focus
		hasFocus++;
	}).blur(function() {
		hasFocus = 0;
		if (!config.mouseDownOnSelect) {
			hideResults();
		}
	}).click(function() {
		// show select when clicking in a focused field
		if ( hasFocus++ > 1 && !select.visible() ) {
			onChange(0, true);
		}
	}).bind("search", function() {
		// TODO why not just specifying both arguments?
		var fn = (arguments.length > 1) ? arguments[1] : null;
		function findValueCallback(Dx, data) {
			var result;
			if( data && data.length ) {
				for (var i=0; i < data.length; i++) {
					if( data[i].result.toLowerCase() == Dx.toLowerCase() ) {
						result = data[i];
						break;
					}
				}
			}
			if( typeof fn == "function" ) fn(result);
			else $input.trigger("result", result && [result.data, result.value]);
		}
		$.each(trimWords($input.val()), function(i, value) {
			request(value, findValueCallback, findValueCallback);
		});
	}).bind("flushCache", function() {
		cache.flush();
	}).bind("setOptions", function() {
		$.extend(options, arguments[1]);
		// if we've updated the data, repopulate
		if ( "data" in arguments[1] )
			cache.populate();
	}).bind("unautocomplete", function() {
		select.unbind();
		$input.unbind();
		$(input.form).unbind(".autocomplete");
	});
	
	
	function selectCurrent() {
		var selected = select.selected();
		if( !selected )
			return false;
		
		var v = selected.result;
		previousValue = v;
		
		if ( options.multiple ) {
			var words = trimWords($input.val());
			if ( words.length > 1 ) {
				v = words.slice(0, words.length - 1).join( options.multipleSeparator ) + options.multipleSeparator + v;
			}
			v += options.multipleSeparator;
		}
		var tempHiddenDim = selected.data.PntDims[0].Id + ':' + selected.data.Id;
		
		$j("#hdrSearchDimensionId").val(tempHiddenDim);
		$input.val(v);
		hideResultsNow();
		$input.trigger("result", [selected.data, selected.value]);
        var targetsearchbox = $j("input.focusedsearchbox").attr("id"); 
        if (targetsearchbox == "hdrSearch") { 
            UI.Search("headerSearchBox"); 
        } 
        else if (targetsearchbox == "ftrSearch") { 
            UI.Search("footerSearchBox");      
        }
		return true;
	}
	
	function onChange(crap, skipPrevCheck) {
		if( lastKeyPressCode == KEY.DEL ) {
			select.hide();
			return;
		}
		
		var currentValue = $input.val();
		
		if ( !skipPrevCheck && currentValue == previousValue )
			return;
		
		previousValue = currentValue;
		
		currentValue = lastWord(currentValue);
		if ( currentValue.length >= options.minChars) {
    	    $input.focus();
			$input.addClass(options.loadingClass);
			if (!options.matchCase)
				currentValue = currentValue.toLowerCase();
			request(currentValue, receiveData, hideResultsNow);
		} else {
			stopLoading();
			select.hide();
		}
	};
	
	function trimWords(value) {
		if ( !value ) {
			return [""];
		}
		var words = value.split( options.multipleSeparator );
		var result = [];
		$.each(words, function(i, value) {
			if ( $.trim(value) )
				result[i] = $.trim(value);
		});
		return result;
	}
	
	function lastWord(value) {
		if ( !options.multiple )
			return value;
		var words = trimWords(value);
		return words[words.length - 1];
	}
	
	// fills in the input box w/the first match (assumed to be the best match)
	// Dx: the term entered
	// sValue: the first matching result
	function autoFill(Dx, sValue){
		// autofill in the complete box w/the first match as long as the user hasn't entered in more data
		// if the last user key pressed was backspace, don't autofill
		if( options.autoFill && (lastWord($input.val()).toLowerCase() == Dx.toLowerCase()) && lastKeyPressCode != KEY.BACKSPACE ) {
			// fill in the value (keep the case the user has typed)
			$input.val($input.val() + sValue.substring(lastWord(previousValue).length));
			// select the portion of the value not typed by the user (so the next character will erase)
			$.Autocompleter.Selection(input, previousValue.length, previousValue.length + sValue.length);
		}
	};

	function hideResults() {
		clearTimeout(timeout);
		timeout = setTimeout(hideResultsNow, 200);
	};

	function hideResultsNow() {
		var wasVisible = select.visible();
		select.hide();
		clearTimeout(timeout);
		stopLoading();
		if (options.mustMatch) {
			// call search and run callback
			$input.search(
				function (result){
					// if no value found, clear the input box
					if( !result ) {
						if (options.multiple) {
							var words = trimWords($input.val()).slice(0, -1);
							$input.val( words.join(options.multipleSeparator) + (words.length ? options.multipleSeparator : "") );
						}
						else
							$input.val( "" );
					}
				}
			);
		}
		if (wasVisible)
			// position cursor at end of input field
			$.Autocompleter.Selection(input, input.value.length, input.value.length);
	};

	function receiveData(Dx, data) {
		if ( data && data.length && hasFocus ) {
			stopLoading();
			select.display(data, Dx);
			autoFill(Dx, data[0].value);
			select.show();
		} else {
			hideResultsNow();
		}
	};

	function request(term, success, failure) {
		if (!options.matchCase)
			term = term.toLowerCase();
		var data = cache.load(term);
		// recieve the cached data
		if (data && data.length) {
			success(term, data);
		// if an AJAX url has been supplied, try loading the data now
		} else if( (typeof options.url == "string") && (options.url.length > 0) ){
			
			var extraParams = {
				timestamp: +new Date()
			};
			$.each(options.extraParams, function(key, param) {
				extraParams[key] = typeof param == "function" ? param() : param;
			});
			
			$.ajax({
				// try to leverage ajaxQueue plugin to abort previous requests
				mode: "abort",
				// limit abortion to this input
				port: "autocomplete" + input.name,
				dataType: options.dataType,
				url: options.url,
				data: $.extend({
					Dx: lastWord(term)+"*",
					limit: options.max
				}, extraParams),
				success: function(data) {
					var parsed = options.parse && options.parse(data) || parse(data);
					cache.add(term, parsed);
					success(term, parsed);
				}
			});
		} else {
			// if we have a failure, we need to empty the list -- this prevents the the [TAB] key from selecting the last successful match
			select.emptyList();
			failure(term);
		}
	};
	
	function parse(data) {
		var parsed = [];
		var rows = data.split("\n");
		for (var i=0; i < rows.length; i++) {
			var row = $.trim(rows[i]);
			if (row) {
				row = row.split("|");
				parsed[parsed.length] = {
					data: row,
					value: row[0],
					result: options.formatResult && options.formatResult(row, row[0]) || row[0]
				};
			}
		}
		return parsed;
	};

	function stopLoading() {
		$input.removeClass(options.loadingClass);
	};

};

$.Autocompleter.defaults = {
	inputClass: "ac_input",
	resultsClass: "ac_results",
	loadingClass: "ac_loading",
	minChars: 1,
	delay: 400,
	matchCase: false,
	matchSubset: true,
	matchContains: false,
	cacheLength: 10,
	max: 100,
	mustMatch: false,
	extraParams: {},
	selectFirst: true,
	formatItem: function(row) { return row[0]; },
	formatMatch: null,
	autoFill: false,
	width: 0,
	multiple: false,
	multipleSeparator: ", ",
	highlight: function(value, term) {
		return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\\$1") + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
	},
    scroll: true,
    scrollHeight: 180
};

$.Autocompleter.Cache = function(options) {

	var data = {};
	var length = 0;
	
	function matchSubset(s, sub) {
		if (!options.matchCase) 
			s = s.toLowerCase();
		var i = s.indexOf(sub);
		if (i == -1) return false;
		return i == 0 || options.matchContains;
	};
	
	function add(Dx, value) {
		if (length > options.cacheLength){
			flush();
		}
		if (!data[Dx]){ 
			length++;
		}
		data[Dx] = value;
	}
	
	function populate(){
		if( !options.data ) return false;
		// track the matches
		var stMatchSets = {},
			nullData = 0;

		// no url was specified, we need to adjust the cache length to make sure it fits the local data store
		if( !options.url ) options.cacheLength = 1;
		
		// track all options for minChars = 0
		stMatchSets[""] = [];
		
		// loop through the array and create a lookup structure
		for ( var i = 0, ol = options.data.length; i < ol; i++ ) {
			var rawValue = options.data[i];
			// if rawValue is a string, make an array otherwise just reference the array
			rawValue = (typeof rawValue == "string") ? [rawValue] : rawValue;
			
			var value = options.formatMatch(rawValue, i+1, options.data.length);
			if ( value === false )
				continue;
				
			var firstChar = value.charAt(0).toLowerCase();
			// if no lookup array for this character exists, look it up now
			if( !stMatchSets[firstChar] ) 
				stMatchSets[firstChar] = [];

			// if the match is a string
			var row = {
				value: value,
				data: rawValue,
				result: options.formatResult && options.formatResult(rawValue) || value
			};
			
			// push the current match into the set list
			stMatchSets[firstChar].push(row);

			// keep track of minChars zero items
			if ( nullData++ < options.max ) {
				stMatchSets[""].push(row);
			}
		};

		// add the data items to the cache
		$.each(stMatchSets, function(i, value) {
			// increase the cache size
			options.cacheLength++;
			// add to the cache
			add(i, value);
		});
	}
	
	// populate any existing data
	setTimeout(populate, 25);
	
	function flush(){
		data = {};
		length = 0;
	}
	
	return {
		flush: flush,
		add: add,
		populate: populate,
		load: function(Dx) {
			if (!options.cacheLength || !length)
				return null;
			/* 
			 * if dealing w/local data and matchContains than we must make sure
			 * to loop through all the data collections looking for matches
			 */
			if( !options.url && options.matchContains ){
				// track all matches
				var csub = [];
				// loop through all the data grids for matches
				for( var k in data ){
					// don't search through the stMatchSets[""] (minChars: 0) cache
					// this prevents duplicates
					if( k.length > 0 ){
						var c = data[k];
						$.each(c, function(i, x) {
							// if we've got a match, add it to the array
							if (matchSubset(x.value, Dx)) {
								csub.push(x);
							}
						});
					}
				}				
				return csub;
			} else 
			// if the exact item exists, use it
			if (data[Dx]){
				return data[Dx];
			} else
			if (options.matchSubset) {
				for (var i = Dx.length - 1; i >= options.minChars; i--) {
					var c = data[Dx.substr(0, i)];
					if (c) {
						var csub = [];
						$.each(c, function(i, x) {
							if (matchSubset(x.value, Dx)) {
								csub[csub.length] = x;
							}
						});
						return csub;
					}
				}
			}
			return null;
		}
	};
};

$.Autocompleter.Select = function (options, input, select, config) {
	var CLASSES = {
		ACTIVE: "ac_over"
	};
	
	var listItems,
		active = -1,
		data,
		term = "",
		needsInit = true,
		element,
		list;
	
	// Create results
	function init() {
		if (!needsInit)
			return;
		element = $("<div/>")
		.hide()
		.addClass(options.resultsClass)
		.css("position", "absolute")
		.appendTo("body");
	
		list = $("<ul/>").appendTo(element).mouseover( function(event) {
			if(target(event).nodeName && target(event).nodeName.toUpperCase() == 'LI') {
	            active = $("li", list).removeClass(CLASSES.ACTIVE).index(target(event));
			    $(target(event)).addClass(CLASSES.ACTIVE);            
	        }
		}).click(function(event) {
			$(target(event)).addClass(CLASSES.ACTIVE);
			select();
			// TODO provide option to avoid setting focus again after selection? useful for cleanup-on-focus
			input.focus();
			return false;
		}).mousedown(function() {
			config.mouseDownOnSelect = true;
		}).mouseup(function() {
			config.mouseDownOnSelect = false;
		});
		
		if( options.width > 0 )
			element.css("width", options.width);
			
		needsInit = false;
	} 
	
	function target(event) {
		var element = event.target;
		while(element && element.tagName != "LI")
			element = element.parentNode;
		// more fun with IE, sometimes event.target is empty, just ignore it then
		if(!element)
			return [];
		return element;
	}

	function moveSelect(step) {
		listItems.slice(active, active + 1).removeClass(CLASSES.ACTIVE);
		movePosition(step);
        var activeItem = listItems.slice(active, active + 1).addClass(CLASSES.ACTIVE);
        if(options.scroll) {
            var offset = 0;
            listItems.slice(0, active).each(function() {
				offset += this.offsetHeight;
			});
            if((offset + activeItem[0].offsetHeight - list.scrollTop()) > list[0].clientHeight) {
                list.scrollTop(offset + activeItem[0].offsetHeight - list.innerHeight());
            } else if(offset < list.scrollTop()) {
                list.scrollTop(offset);
            }
        }
	};
	
	function movePosition(step) {
		active += step;
		if (active < 0) {
			active = listItems.size() - 1;
		} else if (active >= listItems.size()) {
			active = 0;
		}
	}
	
	function limitNumberOfItems(available) {
		return options.max && options.max < available
			? options.max
			: available;
	}
	
	function fillList() {
		list.empty();
		var max = limitNumberOfItems(data.length);
		for (var i=0; i < max; i++) {
			if (!data[i])
				continue;
			var formatted = options.formatItem(data[i].data, i+1, max, data[i].value, term);
			if ( formatted === false )
				continue;
			var li = $("<li/>").html( options.highlight(formatted, term) ).addClass(i%2 == 0 ? "ac_even" : "ac_odd").appendTo(list)[0];
			$.data(li, "ac_data", data[i]);
		}
		listItems = list.find("li");
		if ( options.selectFirst ) {
			listItems.slice(0, 1).addClass(CLASSES.ACTIVE);
			active = 0;
		}
		// apply bgiframe if available
		if ( $.fn.bgiframe )
			list.bgiframe();
	}
	
	return {
		display: function(d, Dx) {
			init();
			data = d;
			term = Dx;
			fillList();
		},
		next: function() {
			moveSelect(1);
		},
		prev: function() {
			moveSelect(-1);
		},
		pageUp: function() {
			if (active != 0 && active - 8 < 0) {
				moveSelect( -active );
			} else {
				moveSelect(-8);
			}
		},
		pageDown: function() {
			if (active != listItems.size() - 1 && active + 8 > listItems.size()) {
				moveSelect( listItems.size() - 1 - active );
			} else {
				moveSelect(8);
			}
		},
		hide: function() {
			element && element.hide();
			listItems && listItems.removeClass(CLASSES.ACTIVE);
			active = -1;
		},
		visible : function() {
			return element && element.is(":visible");
		},
		current: function() {
			return this.visible() && (listItems.filter("." + CLASSES.ACTIVE)[0] || options.selectFirst && listItems[0]);
		},
		show: function() {
			var offset = $(input).offset();
			element.css({
				width: typeof options.width == "string" || options.width > 0 ? options.width : $(input).width(),
				top: offset.top + input.offsetHeight,
				left: offset.left
			}).show();
            if(options.scroll) {
                list.scrollTop(0);
                list.css({
					maxHeight: options.scrollHeight,
					overflow: 'auto'
				});
				
                if($.browser.msie && typeof document.body.style.maxHeight === "undefined") {
					var listHeight = 0;
					listItems.each(function() {
						listHeight += this.offsetHeight;
					});
					var scrollbarsVisible = listHeight > options.scrollHeight;
                    list.css('height', scrollbarsVisible ? options.scrollHeight : listHeight );
					if (!scrollbarsVisible) {
						// IE doesn't recalculate width when scrollbar disappears
						listItems.width( list.width() - parseInt(listItems.css("padding-left")) - parseInt(listItems.css("padding-right")) );
					}
                }
                
            }
		},
		selected: function() {
			var selected = listItems && listItems.filter("." + CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);
			return selected && selected.length && $.data(selected[0], "ac_data");
		},
		emptyList: function (){
			list && list.empty();
		},
		unbind: function() {
			element && element.remove();
		}
	};
};

$.Autocompleter.Selection = function(field, start, end) {
	if( field.createTextRange ){
		var selRange = field.createTextRange();
		selRange.collapse(true);
		selRange.moveStart("character", start);
		selRange.moveEnd("character", end);
		selRange.select();
	} else if( field.setSelectionRange ){
		field.setSelectionRange(start, end);
	} else {
		if( field.selectionStart ){
			field.selectionStart = start;
			field.selectionEnd = end;
		}
	}
	field.focus();
};

})(jQuery);

//to get the comments: check ABTestingCommented.js in ABTesting Project
var REDCATS={};
REDCATS.ABTesting={};
REDCATS.ABTesting.REPARTITION=0.50;
REDCATS.ABTesting.GroupAId=1;
REDCATS.ABTesting.GroupBId=2;
REDCATS.ABTesting.NoGroupId=0;
REDCATS.ABTesting.getCookie=function(name){
var start=document.cookie.indexOf(name+"=");
var len=start+name.length+1;
if((!start)&&(name!=document.cookie.substring(0,name.length))){
return null;
}
if(start==-1)return null;
var end=document.cookie.indexOf(';',len);
if(end==-1)end=document.cookie.length;
return unescape(document.cookie.substring(len,end));
}
REDCATS.ABTesting.setCookie=function(name,value,expires,path,domain,secure){
var today=new Date();
today.setTime(today.getTime());
if(expires){
expires=expires*1000*60*60*24;
}
var expires_date=new Date(today.getTime()+(expires));
document.cookie=name+'='+escape(value)+
((expires)?';expires='+expires_date.toGMTString():'')+
((path)?';path='+path:'')+
((domain)?';domain='+domain:'')+
((secure)?';secure':'');
}
REDCATS.ABTesting.deleteCookie=function(name,path,domain){
if(getCookie(name))document.cookie=name+'='+
((path)?';path='+path:'')+
((domain)?';domain='+domain:'')+
';expires=Thu, 01-Jan-1970 00:00:01 GMT';
}
REDCATS.ABTesting.getGroup=function()
{
var cookieValue;
if(!REDCATS.ABTesting.getCookie)return false;
cookieValue=parseInt(REDCATS.ABTesting.getCookie('ABTesting'));
if(isNaN(cookieValue))
{
cookieValue=REDCATS.ABTesting.NoGroupId;
}
return cookieValue;
}
REDCATS.ABTesting.chooseGroup=function()
{
var domain='';
var currentHost=document.location.hostname;
var domainCheck='.chm.r';
var ptr;
var num=Math.floor(Math.random()*100001);
num=Math.floor((num/100000)*(1/REDCATS.ABTesting.REPARTITION))>0?REDCATS.ABTesting.GroupBId:REDCATS.ABTesting.GroupAId;
ptr=currentHost.search(domainCheck);
if(ptr>=0)
{
domain=currentHost.substr(ptr+domainCheck.length,currentHost.length);
}
domain=(document.location.hostname.search(domain)>=0)?domain:'';
REDCATS.ABTesting.setCookie('ABTesting',num,'','/',domain,false)
return num;
}
REDCATS.ABTesting.GetABGroup=function()
{
var strReturn='NULL';
switch(REDCATS.ABTesting.getGroup())
{
case REDCATS.ABTesting.GroupAId:strReturn='Group A';break;
case REDCATS.ABTesting.GroupBId:strReturn='Group B';break;
}
return strReturn;
}
REDCATS.ABTesting.ABTestingObject=function(objId)
{
var ZoneIDs=new Array();
this.setContentGroupA=function(id)
{
setContent(REDCATS.ABTesting.GroupAId,id);
}
this.setContentGroupB=function(id)
{
setContent(REDCATS.ABTesting.GroupBId,id);
}
var setContent=function(index,id)
{
ZoneIDs[index]=id;
}
this.writeContent=function()
{
var contentOutput='';
try{
var group=REDCATS.ABTesting.getGroup();
if(group===REDCATS.ABTesting.NoGroupId)group=REDCATS.ABTesting.chooseGroup();
var inputZoneContent;
if(!group||typeof(group)!='number'||group>2)
group=0;
var inputZone=document.getElementById(ZoneIDs[group]);
if((inputZone!==null)&&(inputZone.innerHTML.length>0))
{ 
inputZoneContent=inputZone.innerHTML.replace(/<!--ABTOREMOVE/,'');
inputZoneContent=inputZoneContent.replace(/ABTOREMOVE-->/,'');
inputZoneContent=inputZoneContent.replace(/&lt;!--ABTOREMOVE/,'');
inputZoneContent=inputZoneContent.replace(/ABTOREMOVE--&gt;/,'');
contentOutput=inputZoneContent;
if(contentOutput!=null)
	document.write(contentOutput); 
}
}
catch(e){
contentOutput=document.getElementById('ABTestingDefaultContent_'+objId).innerHTML.replace(/<!--ABTOREMOVE/,'').replace(/<!--ABTOREMOVE/,'');
}
}
}

var mboxCopyright = "Copyright 1996-2011. Adobe Systems Incorporated. All rights reserved."; mboxUrlBuilder = function (a, b) { this.a = a; this.b = b; this.c = new Array(); this.d = function (e) { return e; }; this.f = null; }; mboxUrlBuilder.prototype.addParameter = function (g, h) { var i = new RegExp('(\'|")'); if (i.exec(g)) { throw "Parameter '" + g + "' contains invalid characters"; } for (var j = 0; j < this.c.length; j++) { var k = this.c[j]; if (k.name == g) { k.value = h; return this; } } var l = new Object(); l.name = g; l.value = h; this.c[this.c.length] = l; return this; }; mboxUrlBuilder.prototype.addParameters = function (c) { if (!c) { return this; } for (var j = 0; j < c.length; j++) { var m = c[j].indexOf('='); if (m == -1 || m == 0) { continue; } this.addParameter(c[j].substring(0, m), c[j].substring(m + 1, c[j].length)); } return this; }; mboxUrlBuilder.prototype.setServerType = function (n) { this.o = n; }; mboxUrlBuilder.prototype.setBasePath = function (f) { this.f = f; }; mboxUrlBuilder.prototype.setUrlProcessAction = function (p) { this.d = p; }; mboxUrlBuilder.prototype.buildUrl = function () { var q = this.f ? this.f : '/m2/' + this.b + '/mbox/' + this.o; var r = document.location.protocol == 'file:' ? 'http:' : document.location.protocol; var e = r + "//" + this.a + q; var s = e.indexOf('?') != -1 ? '&' : '?'; for (var j = 0; j < this.c.length; j++) { var k = this.c[j]; e += s + encodeURIComponent(k.name) + '=' + encodeURIComponent(k.value); s = '&'; } return this.t(this.d(e)); }; mboxUrlBuilder.prototype.getParameters = function () { return this.c; }; mboxUrlBuilder.prototype.setParameters = function (c) { this.c = c; }; mboxUrlBuilder.prototype.clone = function () { var u = new mboxUrlBuilder(this.a, this.b); u.setServerType(this.o); u.setBasePath(this.f); u.setUrlProcessAction(this.d); for (var j = 0; j < this.c.length; j++) { u.addParameter(this.c[j].name, this.c[j].value); } return u; }; mboxUrlBuilder.prototype.t = function (v) { return v.replace(/\"/g, '&quot;').replace(/>/g, '&gt;'); }; mboxStandardFetcher = function () { }; mboxStandardFetcher.prototype.getType = function () { return 'standard'; }; mboxStandardFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); document.write('<' + 'scr' + 'ipt src="' + w.buildUrl() + '" language="JavaScript"><' + '\/scr' + 'ipt>'); }; mboxStandardFetcher.prototype.cancel = function () { }; mboxAjaxFetcher = function () { }; mboxAjaxFetcher.prototype.getType = function () { return 'ajax'; }; mboxAjaxFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); var e = w.buildUrl(); this.x = document.createElement('script'); this.x.src = e; document.body.appendChild(this.x); }; mboxAjaxFetcher.prototype.cancel = function () { }; mboxMap = function () { this.y = new Object(); this.z = new Array(); }; mboxMap.prototype.put = function (A, h) { if (!this.y[A]) { this.z[this.z.length] = A; } this.y[A] = h; }; mboxMap.prototype.get = function (A) { return this.y[A]; }; mboxMap.prototype.remove = function (A) { this.y[A] = undefined; }; mboxMap.prototype.each = function (p) { for (var j = 0; j < this.z.length; j++) { var A = this.z[j]; var h = this.y[A]; if (h) { var B = p(A, h); if (B === false) { break; } } } }; mboxFactory = function (C, b, D) { this.E = false; this.C = C; this.D = D; this.F = new mboxList(); mboxFactories.put(D, this); this.G = typeof document.createElement('div').replaceChild != 'undefined' && (function () { return true; })() && typeof document.getElementById != 'undefined' && typeof (window.attachEvent || document.addEventListener || window.addEventListener) != 'undefined' && typeof encodeURIComponent != 'undefined'; this.H = this.G && mboxGetPageParameter('mboxDisable') == null; var I = D == 'default'; this.J = new mboxCookieManager('mbox' + (I ? '' : ('-' + D)), (function () { return mboxCookiePageDomain(); })()); this.H = this.H && this.J.isEnabled() && (this.J.getCookie('disable') == null); if (this.isAdmin()) { this.enable(); } this.K(); this.L = mboxGenerateId(); this.M = mboxScreenHeight(); this.N = mboxScreenWidth(); this.O = mboxBrowserWidth(); this.P = mboxBrowserHeight(); this.Q = mboxScreenColorDepth(); this.R = mboxBrowserTimeOffset(); this.S = new mboxSession(this.L, 'mboxSession', 'session', 31 * 60, this.J); this.T = new mboxPC('PC', 1209600, this.J); this.w = new mboxUrlBuilder(C, b); this.U(this.w, I); this.V = new Date().getTime(); this.W = this.V; var X = this; this.addOnLoad(function () { X.W = new Date().getTime(); }); if (this.G) { this.addOnLoad(function () { X.E = true; X.getMboxes().each(function (Y) { Y.setFetcher(new mboxAjaxFetcher()); Y.finalize(); }); }); this.limitTraffic(100, 10368000); if (this.H) { this.Z(); this._ = new mboxSignaler(function (ab, c) { return X.create(ab, c); }, this.J); } } }; mboxFactory.prototype.isEnabled = function () { return this.H; }; mboxFactory.prototype.getDisableReason = function () { return this.J.getCookie('disable'); }; mboxFactory.prototype.isSupported = function () { return this.G; }; mboxFactory.prototype.disable = function (bb, cb) { if (typeof bb == 'undefined') { bb = 60 * 60; } if (typeof cb == 'undefined') { cb = 'unspecified'; } if (!this.isAdmin()) { this.H = false; this.J.setCookie('disable', cb, bb); } }; mboxFactory.prototype.enable = function () { this.H = true; this.J.deleteCookie('disable'); }; mboxFactory.prototype.isAdmin = function () { return document.location.href.indexOf('mboxEnv') != -1; }; mboxFactory.prototype.limitTraffic = function (db, bb) { }; mboxFactory.prototype.addOnLoad = function (eb) { if (this.isDomLoaded()) { eb(); } else { var fb = false; var gb = function () { if (fb) { return; } fb = true; eb(); }; this.hb.push(gb); if (this.isDomLoaded() && !fb) { gb(); } } }; mboxFactory.prototype.getEllapsedTime = function () { return this.W - this.V; }; mboxFactory.prototype.getEllapsedTimeUntil = function (ib) { return ib - this.V; }; mboxFactory.prototype.getMboxes = function () { return this.F; }; mboxFactory.prototype.get = function (ab, jb) { return this.F.get(ab).getById(jb || 0); }; mboxFactory.prototype.update = function (ab, c) { if (!this.isEnabled()) { return; } if (!this.isDomLoaded()) { var X = this; this.addOnLoad(function () { X.update(ab, c); }); return; } if (this.F.get(ab).length() == 0) { throw "Mbox " + ab + " is not defined"; } this.F.get(ab).each(function (Y) { Y.getUrlBuilder().addParameter('mboxPage', mboxGenerateId()); Y.load(c); }); }; mboxFactory.prototype.create = function (ab, c, kb) { if (!this.isSupported()) { return null; } var e = this.w.clone(); e.addParameter('mboxCount', this.F.length() + 1); e.addParameters(c); var jb = this.F.get(ab).length(); var lb = this.D + '-' + ab + '-' + jb; var mb; if (kb) { mb = new mboxLocatorNode(kb); } else { if (this.E) { throw 'The page has already been loaded, can\'t write marker'; } mb = new mboxLocatorDefault(lb); } try { var X = this; var nb = 'mboxImported-' + lb; var Y = new mbox(ab, jb, e, mb, nb); if (this.H) { Y.setFetcher(this.E ? new mboxAjaxFetcher() : new mboxStandardFetcher()); } Y.setOnError(function (ob, n) { Y.setMessage(ob); Y.activate(); if (!Y.isActivated()) { X.disable(60 * 60, ob); window.location.reload(false); } }); this.F.add(Y); } catch (pb) { this.disable(); throw 'Failed creating mbox "' + ab + '", the error was: ' + pb; } var qb = new Date(); e.addParameter('mboxTime', qb.getTime() - (qb.getTimezoneOffset() * 60000)); return Y; }; mboxFactory.prototype.getCookieManager = function () { return this.J; }; mboxFactory.prototype.getPageId = function () { return this.L; }; mboxFactory.prototype.getPCId = function () { return this.T; }; mboxFactory.prototype.getSessionId = function () { return this.S; }; mboxFactory.prototype.getSignaler = function () { return this._; }; mboxFactory.prototype.getUrlBuilder = function () { return this.w; }; mboxFactory.prototype.U = function (e, I) { e.addParameter('mboxHost', document.location.hostname).addParameter('mboxSession', this.S.getId()); if (!I) { e.addParameter('mboxFactoryId', this.D); } if (this.T.getId() != null) { e.addParameter('mboxPC', this.T.getId()); } e.addParameter('mboxPage', this.L); e.addParameter('screenHeight', this.M); e.addParameter('screenWidth', this.N); e.addParameter('browserWidth', this.O); e.addParameter('browserHeight', this.P); e.addParameter('browserTimeOffset', this.R); e.addParameter('colorDepth', this.Q); e.setUrlProcessAction(function (e) { e += '&mboxURL=' + encodeURIComponent(document.location); var rb = encodeURIComponent(document.referrer); if (e.length + rb.length < 2000) { e += '&mboxReferrer=' + rb; } e += '&mboxVersion=' + mboxVersion; return e; }); }; mboxFactory.prototype.sb = function () { return ""; }; mboxFactory.prototype.Z = function () { document.write('<style>.' + 'mboxDefault' + ' { visibility:hidden; }</style>'); }; mboxFactory.prototype.isDomLoaded = function () { return this.E; }; mboxFactory.prototype.K = function () { if (this.hb != null) { return; } this.hb = new Array(); var X = this; (function () { var tb = document.addEventListener ? "DOMContentLoaded" : "onreadystatechange"; var ub = false; var vb = function () { if (ub) { return; } ub = true; for (var i = 0; i < X.hb.length; ++i) { X.hb[i](); } }; if (document.addEventListener) { document.addEventListener(tb, function () { document.removeEventListener(tb, arguments.callee, false); vb(); }, false); window.addEventListener("load", function () { document.removeEventListener("load", arguments.callee, false); vb(); }, false); } else if (document.attachEvent) { if (self !== self.top) { document.attachEvent(tb, function () { if (document.readyState === 'complete') { document.detachEvent(tb, arguments.callee); vb(); } }); } else { var wb = function () { try { document.documentElement.doScroll('left'); vb(); } catch (xb) { setTimeout(wb, 13); } }; wb(); } } if (document.readyState === "complete") { vb(); } })(); }; mboxSignaler = function (yb, J) { this.J = J; var zb = J.getCookieNames('signal-'); for (var j = 0; j < zb.length; j++) { var Ab = zb[j]; var Bb = J.getCookie(Ab).split('&'); var Y = yb(Bb[0], Bb); Y.load(); J.deleteCookie(Ab); } }; mboxSignaler.prototype.signal = function (Cb, ab) { this.J.setCookie('signal-' + Cb, mboxShiftArray(arguments).join('&'), 45 * 60); }; mboxList = function () { this.F = new Array(); }; mboxList.prototype.add = function (Y) { if (Y != null) { this.F[this.F.length] = Y; } }; mboxList.prototype.get = function (ab) { var B = new mboxList(); for (var j = 0; j < this.F.length; j++) { var Y = this.F[j]; if (Y.getName() == ab) { B.add(Y); } } return B; }; mboxList.prototype.getById = function (Db) { return this.F[Db]; }; mboxList.prototype.length = function () { return this.F.length; }; mboxList.prototype.each = function (p) { if (typeof p != 'function') { throw 'Action must be a function, was: ' + typeof (p); } for (var j = 0; j < this.F.length; j++) { p(this.F[j]); } }; mboxLocatorDefault = function (g) { this.g = 'mboxMarker-' + g; document.write('<div id="' + this.g + '" style="visibility:hidden;display:none">&nbsp;</div>'); }; mboxLocatorDefault.prototype.locate = function () { var Eb = document.getElementById(this.g); while (Eb != null) { if (Eb.nodeType == 1) { if (Eb.className == 'mboxDefault') { return Eb; } } Eb = Eb.previousSibling; } return null; }; mboxLocatorDefault.prototype.force = function () { var Fb = document.createElement('div'); Fb.className = 'mboxDefault'; var Gb = document.getElementById(this.g); Gb.parentNode.insertBefore(Fb, Gb); return Fb; }; mboxLocatorNode = function (Hb) { this.Eb = Hb; }; mboxLocatorNode.prototype.locate = function () { return typeof this.Eb == 'string' ? document.getElementById(this.Eb) : this.Eb; }; mboxLocatorNode.prototype.force = function () { return null; }; mboxCreate = function (ab) { var Y = mboxFactoryDefault.create(ab, mboxShiftArray(arguments)); if (Y) { Y.load(); } return Y; }; mboxDefine = function (kb, ab) { var Y = mboxFactoryDefault.create(ab, mboxShiftArray(mboxShiftArray(arguments)), kb); return Y; }; mboxUpdate = function (ab) { mboxFactoryDefault.update(ab, mboxShiftArray(arguments)); }; mbox = function (g, Ib, w, Jb, nb) { this.Kb = null; this.Lb = 0; this.mb = Jb; this.nb = nb; this.Mb = null; this.Nb = new mboxOfferContent(); this.Fb = null; this.w = w; this.message = ''; this.Ob = new Object(); this.Pb = 0; this.Ib = Ib; this.g = g; this.Qb(); w.addParameter('mbox', g).addParameter('mboxId', Ib); this.Rb = function () { }; this.Sb = function () { }; this.Tb = null; }; mbox.prototype.getId = function () { return this.Ib; }; mbox.prototype.Qb = function () { if (this.g.length > 250) { throw "Mbox Name " + this.g + " exceeds max length of " + "250 characters."; } else if (this.g.match(/^\s+|\s+$/g)) { throw "Mbox Name " + this.g + " has leading/trailing whitespace(s)."; } }; mbox.prototype.getName = function () { return this.g; }; mbox.prototype.getParameters = function () { var c = this.w.getParameters(); var B = new Array(); for (var j = 0; j < c.length; j++) { if (c[j].name.indexOf('mbox') != 0) { B[B.length] = c[j].name + '=' + c[j].value; } } return B; }; mbox.prototype.setOnLoad = function (p) { this.Sb = p; return this; }; mbox.prototype.setMessage = function (ob) { this.message = ob; return this; }; mbox.prototype.setOnError = function (Rb) { this.Rb = Rb; return this; }; mbox.prototype.setFetcher = function (Ub) { if (this.Mb) { this.Mb.cancel(); } this.Mb = Ub; return this; }; mbox.prototype.getFetcher = function () { return this.Mb; }; mbox.prototype.load = function (c) { if (this.Mb == null) { return this; } this.setEventTime("load.start"); this.cancelTimeout(); this.Lb = 0; var w = (c && c.length > 0) ? this.w.clone().addParameters(c) : this.w; this.Mb.fetch(w); var X = this; this.Vb = setTimeout(function () { X.Rb('browser timeout', X.Mb.getType()); }, 15000); this.setEventTime("load.end"); return this; }; mbox.prototype.loaded = function () { this.cancelTimeout(); if (!this.activate()) { var X = this; setTimeout(function () { X.loaded(); }, 100); } }; mbox.prototype.activate = function () { if (this.Lb) { return this.Lb; } this.setEventTime('activate' + ++this.Pb + '.start'); if (this.show()) { this.cancelTimeout(); this.Lb = 1; } this.setEventTime('activate' + this.Pb + '.end'); return this.Lb; }; mbox.prototype.isActivated = function () { return this.Lb; }; mbox.prototype.setOffer = function (Nb) { if (Nb && Nb.show && Nb.setOnLoad) { this.Nb = Nb; } else { throw 'Invalid offer'; } return this; }; mbox.prototype.getOffer = function () { return this.Nb; }; mbox.prototype.show = function () { this.setEventTime('show.start'); var B = this.Nb.show(this); this.setEventTime(B == 1 ? "show.end.ok" : "show.end"); return B; }; mbox.prototype.showContent = function (Wb) { if (Wb == null) { return 0; } if (this.Fb == null || !this.Fb.parentNode) { this.Fb = this.getDefaultDiv(); if (this.Fb == null) { return 0; } } if (this.Fb != Wb) { this.Xb(this.Fb); this.Fb.parentNode.replaceChild(Wb, this.Fb); this.Fb = Wb; } this.Yb(Wb); this.Sb(); return 1; }; mbox.prototype.hide = function () { this.setEventTime('hide.start'); var B = this.showContent(this.getDefaultDiv()); this.setEventTime(B == 1 ? 'hide.end.ok' : 'hide.end.fail'); return B; }; mbox.prototype.finalize = function () { this.setEventTime('finalize.start'); this.cancelTimeout(); if (this.getDefaultDiv() == null) { if (this.mb.force() != null) { this.setMessage('No default content, an empty one has been added'); } else { this.setMessage('Unable to locate mbox'); } } if (!this.activate()) { this.hide(); this.setEventTime('finalize.end.hide'); } this.setEventTime('finalize.end.ok'); }; mbox.prototype.cancelTimeout = function () { if (this.Vb) { clearTimeout(this.Vb); } if (this.Mb != null) { this.Mb.cancel(); } }; mbox.prototype.getDiv = function () { return this.Fb; }; mbox.prototype.getDefaultDiv = function () { if (this.Tb == null) { this.Tb = this.mb.locate(); } return this.Tb; }; mbox.prototype.setEventTime = function (Zb) { this.Ob[Zb] = (new Date()).getTime(); }; mbox.prototype.getEventTimes = function () { return this.Ob; }; mbox.prototype.getImportName = function () { return this.nb; }; mbox.prototype.getURL = function () { return this.w.buildUrl(); }; mbox.prototype.getUrlBuilder = function () { return this.w; }; mbox.prototype._b = function (Fb) { return Fb.style.display != 'none'; }; mbox.prototype.Yb = function (Fb) { this.ac(Fb, true); }; mbox.prototype.Xb = function (Fb) { this.ac(Fb, false); }; mbox.prototype.ac = function (Fb, bc) { Fb.style.visibility = bc ? "visible" : "hidden"; Fb.style.display = bc ? "block" : "none"; }; mboxOfferContent = function () { this.Sb = function () { }; }; mboxOfferContent.prototype.show = function (Y) { var B = Y.showContent(document.getElementById(Y.getImportName())); if (B == 1) { this.Sb(); } return B; }; mboxOfferContent.prototype.setOnLoad = function (Sb) { this.Sb = Sb; }; mboxOfferAjax = function (Wb) { this.Wb = Wb; this.Sb = function () { }; }; mboxOfferAjax.prototype.setOnLoad = function (Sb) { this.Sb = Sb; }; mboxOfferAjax.prototype.show = function (Y) { var cc = document.createElement('div'); cc.id = Y.getImportName(); cc.innerHTML = this.Wb; var B = Y.showContent(cc); if (B == 1) { this.Sb(); } return B; }; mboxOfferDefault = function () { this.Sb = function () { }; }; mboxOfferDefault.prototype.setOnLoad = function (Sb) { this.Sb = Sb; }; mboxOfferDefault.prototype.show = function (Y) { var B = Y.hide(); if (B == 1) { this.Sb(); } return B; }; mboxCookieManager = function mboxCookieManager(g, dc) { this.g = g; this.dc = dc == '' || dc.indexOf('.') == -1 ? '' : '; domain=' + dc; this.ec = new mboxMap(); this.loadCookies(); }; mboxCookieManager.prototype.isEnabled = function () { this.setCookie('check', 'true', 60); this.loadCookies(); return this.getCookie('check') == 'true'; }; mboxCookieManager.prototype.setCookie = function (g, h, bb) { if (typeof g != 'undefined' && typeof h != 'undefined' && typeof bb != 'undefined') { var fc = new Object(); fc.name = g; fc.value = escape(h); fc.expireOn = Math.ceil(bb + new Date().getTime() / 1000); this.ec.put(g, fc); this.saveCookies(); } }; mboxCookieManager.prototype.getCookie = function (g) { var fc = this.ec.get(g); return fc ? unescape(fc.value) : null; }; mboxCookieManager.prototype.deleteCookie = function (g) { this.ec.remove(g); this.saveCookies(); }; mboxCookieManager.prototype.getCookieNames = function (gc) { var hc = new Array(); this.ec.each(function (g, fc) { if (g.indexOf(gc) == 0) { hc[hc.length] = g; } }); return hc; }; mboxCookieManager.prototype.saveCookies = function () { var ic = new Array(); var jc = 0; this.ec.each(function (g, fc) { ic[ic.length] = g + '#' + fc.value + '#' + fc.expireOn; if (jc < fc.expireOn) { jc = fc.expireOn; } }); var kc = new Date(jc * 1000); document.cookie = this.g + '=' + ic.join('|') + '; expires=' + kc.toGMTString() + '; path=/' + this.dc; }; mboxCookieManager.prototype.loadCookies = function () { this.ec = new mboxMap(); var lc = document.cookie.indexOf(this.g + '='); if (lc != -1) { var mc = document.cookie.indexOf(';', lc); if (mc == -1) { mc = document.cookie.indexOf(',', lc); if (mc == -1) { mc = document.cookie.length; } } var nc = document.cookie.substring(lc + this.g.length + 1, mc).split('|'); var oc = Math.ceil(new Date().getTime() / 1000); for (var j = 0; j < nc.length; j++) { var fc = nc[j].split('#'); if (oc <= fc[2]) { var pc = new Object(); pc.name = fc[0]; pc.value = fc[1]; pc.expireOn = fc[2]; this.ec.put(pc.name, pc); } } } }; mboxSession = function (qc, rc, Ab, sc, J) { this.rc = rc; this.Ab = Ab; this.sc = sc; this.J = J; this.tc = false; this.Ib = typeof mboxForceSessionId != 'undefined' ? mboxForceSessionId : mboxGetPageParameter(this.rc); if (this.Ib == null || this.Ib.length == 0) { this.Ib = J.getCookie(Ab); if (this.Ib == null || this.Ib.length == 0) { this.Ib = qc; this.tc = true; } } J.setCookie(Ab, this.Ib, sc); }; mboxSession.prototype.getId = function () { return this.Ib; }; mboxSession.prototype.forceId = function (uc) { this.Ib = uc; this.J.setCookie(this.Ab, this.Ib, this.sc); }; mboxPC = function (Ab, sc, J) { this.Ab = Ab; this.sc = sc; this.J = J; this.Ib = typeof mboxForcePCId != 'undefined' ? mboxForcePCId : J.getCookie(Ab); if (this.Ib != null) { J.setCookie(Ab, this.Ib, sc); } }; mboxPC.prototype.getId = function () { return this.Ib; }; mboxPC.prototype.forceId = function (uc) { if (this.Ib != uc) { this.Ib = uc; this.J.setCookie(this.Ab, this.Ib, this.sc); return true; } return false; }; mboxGetPageParameter = function (g) { var B = null; var vc = new RegExp(g + "=([^\&]*)"); var wc = vc.exec(document.location); if (wc != null && wc.length >= 2) { B = wc[1]; } return B; }; mboxSetCookie = function (g, h, bb) { return mboxFactoryDefault.getCookieManager().setCookie(g, h, bb); }; mboxGetCookie = function (g) { return mboxFactoryDefault.getCookieManager().getCookie(g); }; mboxCookiePageDomain = function () { var dc = (/([^:]*)(:[0-9]{0,5})?/).exec(document.location.host)[1]; var xc = /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/; if (!xc.exec(dc)) { var yc = (/([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/).exec(dc); if (yc) { dc = yc[0]; } } return dc ? dc : ""; }; mboxShiftArray = function (zc) { var B = new Array(); for (var j = 1; j < zc.length; j++) { B[B.length] = zc[j]; } return B; }; mboxGenerateId = function () { return (new Date()).getTime() + "-" + Math.floor(Math.random() * 999999); }; mboxScreenHeight = function () { return screen.height; }; mboxScreenWidth = function () { return screen.width; }; mboxBrowserWidth = function () { return (window.innerWidth) ? window.innerWidth : document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth; }; mboxBrowserHeight = function () { return (window.innerHeight) ? window.innerHeight : document.documentElement ? document.documentElement.clientHeight : document.body.clientHeight; }; mboxBrowserTimeOffset = function () { return -new Date().getTimezoneOffset(); }; mboxScreenColorDepth = function () { return screen.pixelDepth; }; if (typeof mboxVersion == 'undefined') { var mboxVersion = 40; var mboxFactories = new mboxMap(); var mboxFactoryDefault = new mboxFactory('laredoute.tt.omtrdc.net', 'laredoute', 'default'); }; if (mboxGetPageParameter("mboxDebug") != null || mboxFactoryDefault.getCookieManager().getCookie("debug") != null) { setTimeout(function () { if (typeof mboxDebugLoaded == 'undefined') { alert('Could not load the remote debug.\nPlease check your connection' + ' to Test&amp;Target servers'); } }, 60 * 60); document.write('<' + 'scr' + 'ipt language="Javascript1.2" src=' + '"http://admin16.testandtarget.omniture.com/admin/mbox/mbox_debug.jsp?mboxServerHost=laredoute.tt.omtrdc.net' + '&clientCode=laredoute"><' + '\/scr' + 'ipt>'); }; mboxScPluginFetcher = function (b, Ac) { this.b = b; this.Ac = Ac; }; mboxScPluginFetcher.prototype.Bc = function (w) { w.setBasePath('/m2/' + this.b + '/sc/standard'); this.Cc(w); var e = w.buildUrl(); e += '&scPluginVersion=1'; return e; }; mboxScPluginFetcher.prototype.Cc = function (w) { var Dc = ["dynamicVariablePrefix", "visitorID", "vmk", "ppu", "charSet", "visitorNamespace", "cookieDomainPeriods", "cookieLifetime", "pageName", "currencyCode", "variableProvider", "channel", "server", "pageType", "transactionID", "purchaseID", "campaign", "state", "zip", "events", "products", "linkName", "linkType", "resolution", "colorDepth", "javascriptVersion", "javaEnabled", "cookiesEnabled", "browserWidth", "browserHeight", "connectionType", "homepage", "pe", "pev1", "pev2", "pev3", "visitorSampling", "visitorSamplingGroup", "dynamicAccountSelection", "dynamicAccountList", "dynamicAccountMatch", "trackDownloadLinks", "trackExternalLinks", "trackInlineStats", "linkLeaveQueryString", "linkDownloadFileTypes", "linkExternalFilters", "linkInternalFilters", "linkTrackVars", "linkTrackEvents", "linkNames", "lnk", "eo"]; for (var j = 0; j < Dc.length; j++) { this.Ec(Dc[j], w); } for (var j = 1; j <= 75; j++) { this.Ec('prop' + j, w); this.Ec('eVar' + j, w); this.Ec('hier' + j, w); } }; mboxScPluginFetcher.prototype.Ec = function (g, w) { var h = this.Ac[g]; if (typeof (h) === 'undefined' || h === null || h === '') { return; } w.addParameter(g, h); }; mboxScPluginFetcher.prototype.cancel = function () { }; mboxStandardScPluginFetcher = function (b, Ac) { mboxScPluginFetcher.call(this, b, Ac); }; mboxStandardScPluginFetcher.prototype = new mboxScPluginFetcher; mboxStandardScPluginFetcher.prototype.getType = function () { return 'standard'; }; mboxStandardScPluginFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); var e = this.Bc(w); document.write('<' + 'scr' + 'ipt src="' + e + '" language="JavaScript"><' + '\/scr' + 'ipt>'); }; mboxAjaxScPluginFetcher = function (b, Ac) { mboxScPluginFetcher.call(this, b, Ac); }; mboxAjaxScPluginFetcher.prototype = new mboxScPluginFetcher; mboxAjaxScPluginFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); var e = this.Bc(w); this.x = document.createElement('script'); this.x.src = e; document.body.appendChild(this.x); }; mboxAjaxScPluginFetcher.prototype.getType = function () { return 'ajax'; }; function mboxLoadSCPlugin(Ac) { if (!Ac) { return null; } Ac.m_tt = function (Ac) { var Fc = Ac.m_i('tt'); Fc.H = true; Fc.b = 'laredoute'; Fc['_t'] = function () { if (!this.isEnabled()) { return; } var Y = this.Hc(); if (Y) { var Ub = mboxFactoryDefault.isDomLoaded() ? new mboxAjaxScPluginFetcher(this.b, this.s) : new mboxStandardScPluginFetcher(this.b, this.s); Y.setFetcher(Ub); Y.load(); } }; Fc.isEnabled = function () { return this.H && mboxFactoryDefault.isEnabled(); }; Fc.Hc = function () { var ab = this.Ic(); var Fb = document.createElement('DIV'); return mboxFactoryDefault.create(ab, new Array(), Fb); }; Fc.Ic = function () { var Jc = this.s.events && this.s.events.indexOf('purchase') != -1; return 'SiteCatalyst: ' + (Jc ? 'purchase' : 'event'); }; }; return Ac.loadModule('tt'); };

function isNullOrUndefined(elem){if(elem==undefined||null==elem)return true;return false;};overdiv=0;function EnterLoginonUserId(quickLoginUrl,quickLoginIdEve){if(validationQuickLoginInput(quickLoginIdEve)){return submitToQuickLogin(quickLoginUrl)}else{$j("#quickLoginId").focus();}}
function closeSelf(){self.opener=this;this.close();}
function WelcomeMessageInterface(userCookieGroup,userFNameCookie,userLNameCookie,greetingLabel,nameLabel,productHistoryCookie,productHistoryHyperLink,errorMessage,quickLoginUrl)
{var userFNameCookieId=userFNameCookie;var userLNameCookieId=userLNameCookie;var cookieContents=this.document.cookie;var userfnameCookieValue=GetSubCookieValue(userCookieGroup,userFNameCookieId);var userlnameCookieValue=GetSubCookieValue(userCookieGroup,userLNameCookieId);if((userfnameCookieValue!=null)||(userlnameCookieValue!=null)){if(navigator.userAgent.toLowerCase().indexOf('safari')!=-1&&navigator.userAgent.toLowerCase().indexOf('chrome')==-1){var userFName=unicodelessDecode(userfnameCookieValue).replace(/%0/g,"");var userLName=unicodelessDecode(userlnameCookieValue).replace(/%0/g,"");}else{var userFName=decode(userfnameCookieValue);var userLName=decode(userlnameCookieValue);}
var greetingLabel=document.getElementById(greetingLabel);if(greetingLabel!=null)
{greetingLabel.innerHTML=userFName+" "+userLName;showValidLoginLayer();isQuickLogin=0;lockLoginLayer="false";}}else{if(typeof(getDisplayGreeting)=="function"&&getDisplayGreeting().toLowerCase()!="true"){isQuickLogin=0;lockLoginLayer="false";return;}
if(!isNullOrUndefined(errorMessage)){var _nameLabel=document.getElementById(nameLabel);var _htmlForTable="<div class='client_left'>";_htmlForTable+="<div class='login-username'>";_htmlForTable+="<span class='dp_lg_tx'>N<span class='sup'>o</span> Client ou E-mail :<br /></span>";_htmlForTable+="<input  type=\"text\" onfocus=\"lockLoginLayer=true; \" onblur=\"lockLoginLayer=false;if(overdiv==0){setTimeout('Toggleoff()',2000);}\" id=\"quickLoginId\" name=\"quickLoginId\" value=\""+userName+"\" onkeypress=\"if(event.keyCode==13){setTimeout('EnterLoginonUserId(\\'"+quickLoginUrl+"\\',null)',100);return false}\" />";_htmlForTable+="</div>";_htmlForTable+="<div class='login-password'>";_htmlForTable+="<span class='dp_lg_tx'>Mot de passe :<br /></span>";_htmlForTable+="<input  type=\"password\" onfocus=\"lockLoginLayer=true;\" onblur=\"lockLoginLayer=false;if(overdiv==0){setTimeout('Toggleoff()',2000);}\" id=\"quickLoginPassword\" name=\"quickLoginPassword\" maxlength=\"16\" OnKeyPress=\"if(event.keyCode==13){if(validationQuickLoginInput(event)){return submitToQuickLogin('"+quickLoginUrl+"')}};\" />";_htmlForTable+="</div>";_htmlForTable+="<a id='ok_btn' onmouseover=\"if(!document.all){overdiv=1;}\" class=\"png\" href= \"javascript:void(0)\" onClick =\"javascript: if(validationQuickLoginInput()){return submitToQuickLogin('"+quickLoginUrl+"');} \" OnKeyPress=\"if(event.keyCode==13){if(validationQuickLoginInput(event)){return submitToQuickLogin('"+quickLoginUrl+"')}};\"></a>";_htmlForTable+="";_htmlForTable+="<a class=\"forgot-password\" href=\"/Account/ForgotPword.aspx\">";_htmlForTable+="Mot de passe oubli&eacute; ?</a>";_htmlForTable+="<span id='quickLoginErrorMessageDiv' class='dp_log_err_msg'>"+errorMessage+"</span>";_htmlForTable+="<div class=\"clear\"></div>";_htmlForTable+="<div class=\"new-client\">";_htmlForTable+='<a id="new-client" onclick="CaptureHeaderClick(\'login\',\'Nouveau client? Crer mon compte\')" href="/Account/CreateProspectAccount.aspx" rel="nofollow">';_htmlForTable+='Nouveau client ?';_htmlForTable+='</a>';_htmlForTable+='<a id="new-client-btn" onclick="CaptureHeaderClick(\'login\',\'Nouveau client? Crer mon compte\')" href="/Account/CreateProspectAccount.aspx" rel="nofollow">';_htmlForTable+='</a>';_htmlForTable+="</div>";_htmlForTable+="</div>";_htmlForTable+="<input id='quickLoginReturnUrl' name='quickLoginReturnUrl' value=\""+window.location.href+"\"  type='hidden' />";if(!isNullOrUndefined(_nameLabel)){_nameLabel.innerHTML=_htmlForTable;}
if((!isNullOrUndefined(errorMessage))&&(errorMessage.length>0)){showValidLoginLayer();$j("#anchNotLoginFocus").focus();}
showValidLoginLayer();}}
updateMRSHomeLnk();}
function ProductHistoryLink(productHistoryGroupCookie,productHistoryCookie,productHistoryHyperLink){var productHistoryCookieValue=GetSubCookieValue(productHistoryGroupCookie,productHistoryCookie);if(productHistoryCookieValue==null||productHistoryCookieValue.length==0){var _productHistoryHyperLink=document.getElementById(productHistoryHyperLink);if(_productHistoryHyperLink!=null){_productHistoryHyperLink.href="/StaticPage/dejaVus.htm";_productHistoryHyperLink.innerHTML="Aucun article vu";}}}
function ProductHistoryLinkVirtuel(productHistoryGroupCookie,productHistoryCookie,productHistoryHyperLink)
{var productHistoryCookieValue=GetSubCookieValue(productHistoryGroupCookie,productHistoryCookie);if(productHistoryCookieValue==null||productHistoryCookieValue.length==0){var _productHistoryHyperLink=document.getElementById(productHistoryHyperLink);if(_productHistoryHyperLink!=null){_productHistoryHyperLink.href="javascript:temporise('/StaticPage/dejaVus.htm')";_productHistoryHyperLink.innerHTML="Aucun article vu";}}}
function ShowClickableWord(word){var w=window.open("/clickableword.aspx?word="+word,"ClickableWord","scrollbars=yes,width=510,height=300,left=50, top=50");w.focus();}
var lockLoginLayer=false;function showValidLoginLayer(){var UserGroup="";var UserFirstName="";var UserLastName="";if(typeof(getUserGroup)=='function')
{UserGroup=getUserGroup();}
if(typeof(getUserFirstName)=='function')
{UserFirstName=getUserFirstName();}
if(typeof(getUserLastName)=='function')
{UserLastName=getUserLastName();}
var toggleLayerNotLogin=document.getElementById("toggleLayerNotLogin");var toggleLayerLogin=document.getElementById("toggleLayerLogin");var userfnameCookieValue=GetSubCookieValue(UserGroup,UserFirstName);var userlnameCookieValue=GetSubCookieValue(UserGroup,UserLastName);if((userfnameCookieValue!=null)||(userlnameCookieValue!=null)){if(toggleLayerNotLogin!=null){$j("#toggleLayerNotLogin").hide();}
if(toggleLayerLogin!=null){$j("#toggleLayerLogin").show();$j(toggleLayerLogin).bgiframe({opacity:true,src:'#',width:336});}}else{if(toggleLayerNotLogin!=null){$j("#toggleLayerLogin").hide();}
if(toggleLayerNotLogin!=null){$j("#toggleLayerNotLogin").show();$j(toggleLayerNotLogin).bgiframe({opacity:true,src:'#',width:336});}}}
function SetModifyAccount(userCookieGroup,CKGUserCookieId,link){var CKGUserCookieValue=GetSubCookieValue(userCookieGroup,CKGUserCookieId);var ModifyLink='/Account/ModifyAccount.aspx';if(CKGUserCookieValue!=null){if(CKGUserCookieValue!="NotCKG")
{ModifyLink='/Account/ModifyAccount.aspx';}}
if(link.length>0){link.attr('href',ModifyLink);}}
function Toggleon()
{var UserGroup="";var UserFirstName="";var UserLastName="";if(typeof(getUserGroup)=='function')
{UserGroup=getUserGroup();}
if(typeof(getUserFirstName)=='function')
{UserFirstName=getUserFirstName();}
if(typeof(getUserLastName)=='function')
{UserLastName=getUserLastName();}
var Layer=document.getElementById("toggle-layer1");var userfnameCookieValue=GetSubCookieValue(UserGroup,UserFirstName);var userlnameCookieValue=GetSubCookieValue(UserGroup,UserLastName);showValidLoginLayer();$j("#header-palette-3").removeClass("palette-3");$j("#header-palette-3").addClass("palette-3-on");if(Layer==null){Layer=document.getElementById("toggle-layer");}
if(typeof(Layer)!="undefined"&&Layer!=null){Layer.style.display="block";$j(Layer).bgiframe({opacity:true,src:'#',width:336});}
$j('.acc_fle').addClass('acc_fle_hover');}
function Toggleoff()
{if(isQuickLogin==1)
{return;}
if(lockLoginLayer==true){return;}
if(overdiv==0){var Layer=document.getElementById("toggle-layer1");if(Layer==null){Layer=document.getElementById("toggle-layer");}
if(typeof(Layer)!="undefined"&&Layer!=null){Layer.style.display="none";$j('.acc_fle').removeClass('acc_fle_hover');}}}
function CallBackOnLoginSuccess()
{if(typeof(CKGListPageFunctions)=="function")
{CKGListPageFunctions();}
if(typeof(CKGListSearchPageFunctions)=="function")
{CKGListSearchPageFunctions();}
if(typeof(setControlsOnLoad)=="function")
{setControlsOnLoad();}
if(typeof(UpdateBasketCount)=="function")
{UpdateBasketCount();}}
function DetectCookies()
{if(!navigator.cookieEnabled)
{window.location.href='/Error_Pages/NoCookies.aspx'
return false;}
return true;}
function GetDummyCookie(){var strName="varCook";if(document.cookie.indexOf(strName)==-1)
{return false;}
else
{cookieStart=document.cookie.indexOf(strName);cookieValStart=(document.cookie.indexOf("=",cookieStart)+1);cookieValEnd=document.cookie.indexOf(";",cookieStart);if(cookieValEnd==-1)
{cookieValEnd=document.cookie.length;}
cookieValue=document.cookie.substring(cookieValStart,cookieValEnd);}
if(cookieValue="True")
{return("True");}}
function SetDummyCookie(name,value,expires,path,domain,secure)
{var strDNS=GetDNS();document.cookie=name+"="+escape(value)+
((expires)?";expires="+expires.toGMTString()+1000*60*20:"")+
((path)?";path="+path:"")+
((domain)?";domain="+strDNS:"")+
((secure)?";secure":"");return true}
function GetDNS()
{cookieDomain=document.location.hostname;}
function CheckCookiesEnabled()
{SetDummyCookie('varCook','True','','/','','');if(GetDummyCookie()=="True")
{return true;}
else
{window.location.href='/Error_Pages/NoCookies.aspx'
return false;}}
function IsReturnComplete(){var ReturnCompleteCookieValue=GetSubCookieValue("M.R.SC","RtnComplete");if(ReturnCompleteCookieValue!=null){if(ReturnCompleteCookieValue=="true")return true;}
return false;}
function updateMRSHomeLnk(){if($j('div#toggleLayerLogin').css('display')!='none'){if(getCookie("M.R.User")!=null){var cookie_client=getCookie("M.R.User");var id_Client=cookie_client.substr(cookie_client.indexOf('CustNmbr'),cookie_client.length).split('&')[0].split('=')[1];if(cookie_client.indexOf('Express=RExpressCustomer')!=-1)
$j('div.HeaderByOT li#lien-cookie').html('<a href="/MySpace/RExpressSpace.aspx">Mon espace R Express</a>');else if(cookie_client.indexOf('Premium=RPremiumCustomer')!=-1||cookie_client.indexOf('Premium=CPREM_WAITING_ORDER_MADE')!=-1)
$j('div.HeaderByOT li#lien-cookie').html('<a href="/MySpace/RPremiumSpace.aspx">Mon espace R Premium</a>');else if(cookie_client.indexOf('CKGUser=ActivatedCKG')!=-1)
$j('div.HeaderByOT li#lien-cookie').html('<a href="/MySpace/CKGSpace.aspx">Mon espace Kangourou</a>');else{if(document.getElementById('li#lien-cookie')!=null){var referent=document.getElementById('menu-login');referent.removeChild(document.getElementById('li#lien-cookie'));}
$j('div.container-toggle-layer1 .facilites-no-connecte').css('display','block');}}}}
function getCookie(sName){var oRegex=new RegExp("(?:; )?"+sName+"=([^;]*);?");if(oRegex.test(document.cookie)){return decodeURIComponent(RegExp["$1"]);}else{return null;}}

Reg_Expressions1={EmailSyntax:/^[A-Za-z0-9-._]+\@[A-Za-z0-9-._]+\.[A-Za-z-_]+$/,Accent:/[\s-_\.]+/,Spaces:/[\s]+/,ClientIDSyntax:/^[0-9]+$/};function IsValidClientIDSyntax4Header(field_val){if(isNullOrUndefined(field_val))return false;if((field_val.length!=9))return false;if(Reg_Expressions1.ClientIDSyntax.test(field_val)){return true;}
return false;};function validationQuickLoginInput(evt){isQuickLogin=1;isLoginOKClick=1;var id=document.getElementById('quickLoginId').value;var password=document.getElementById('quickLoginPassword').value;var errorMessageDiv=document.getElementById('quickLoginErrorMessageDiv');if((id!=null)&&(password!=null)){if(id.length==0||password.length==0){errorMessageDiv.innerHTML='Certains champs du formulaire posent un probl&#232;me: Votre identifiant est incorrect';stopDefault(evt);$j("#anchNotLoginFocus").focus();isQuickLogin=0;return false;}
var rePassword=new RegExp("^.{1,32}$");if(IsValidEmailSyntax4Header(id)||IsValidClientIDSyntax4Header(id)){if(password.match(rePassword)){return true;}
else{errorMessageDiv.innerHTML='Certains champs du formulaire posent un probl&#232;me: Votre mot de passe est incorrect.';if(evt!=null||typeof(evt)!='undefied'){stopDefault(evt);}
$j("#anchNotLoginFocus").focus();isQuickLogin=0;return false;}}else{errorMessageDiv.innerHTML='Certains champs du formulaire posent un probl&#232;me: Votre identifiant est incorrect';stopDefault(evt);$j("#anchNotLoginFocus").focus();isQuickLogin=0;return false;}}
else{stopDefault(evt);$j("#anchNotLoginFocus").focus();isQuickLogin=0;return false;}}
function IsValidEmailSyntax4Header(field_val){if(isNullOrUndefined(field_val))return false;if(Reg_Expressions1.EmailSyntax.test(field_val)){var email_array=field_val.split("@");if(isNullOrUndefined(email_array)||email_array.length!=2)return false;var email_X=email_array[0];if(isNullOrUndefined(email_X))return false;if(email_X.length<=0||email_X.length>32)return false;var email_suffix=email_array[1];if(isNullOrUndefined(email_suffix))return false;if(email_suffix.length<=0||email_suffix.length>32)return false;var suffix_array=email_suffix.split(".");if(isNullOrUndefined(suffix_array)||suffix_array.length<2)return false;var email_Y=suffix_array[0];if(isNullOrUndefined(email_Y))return false;if(email_Y.length<=0)return false;var email_Z=suffix_array[1];if(suffix_array.length>2)
email_Z=suffix_array[suffix_array.length-1];if(isNullOrUndefined(email_Z))return false;if(email_Z.length<=0)return false;if(Reg_Expressions1.Accent.test(email_Z))return false;if(Reg_Expressions1.Spaces.test(email_Z))return false;return true;}
return false;}
function stopDefault(evt){if(evt){if(document.all){evt.returnValue=false;}else{evt.preventDefault();}}}
var isQuickLogin=0;var isLoginOKClick=0;var frame_submitted=false;var userName='';function submitToQuickLoginOld(quickLoginUrl){if(!CheckCookiesEnabled()){return false;}
userName='';frame_submitted=false;plainTextSyncGetCall('/IdentifyAcctAsyncDummyPage.aspx');if(typeof(getQuickLoginURL)!="undefined"){quickLoginUrl=getQuickLoginURL();}
var doc,frame=document.getElementById("QuickAccLoginframe");var isViewBasketPage=window.location.href.toLowerCase().indexOf("basket.aspx");var isViewBasketPageV2=window.location.href.toLowerCase().indexOf("basket.aspx");var isMappyPage=window.location.href.toLowerCase().indexOf("map.aspx");if(typeof(frame)=="undefined"||frame==null||isViewBasketPage>0||isViewBasketPageV2>0||isMappyPage>0){document.forms[0].action=quickLoginUrl;document.forms[0].submit();}
else{isQuickLogin=0;document.$quickLoginUrl=quickLoginUrl;if(frame.contentDocument){doc=frame.contentDocument;frame.onload=fnStartInit;}else if(frame.contentWindow){doc=frame.contentWindow.document;frame.onreadystatechange=fnStartInit;}else if(frame.document){doc=frame.document;frame.onload=fnStartInit;}else{}
frame.src="/IDentifiyAccountHeader.aspx";}
return false;}
function fnStartInit(){var doc,ref_to_iframe=document.getElementById("QuickAccLoginframe");if(ref_to_iframe.contentDocument){doc=ref_to_iframe.contentDocument;}else if(ref_to_iframe.contentWindow){doc=ref_to_iframe.contentWindow.document;}else if(ref_to_iframe.document){doc=ref_to_iframe.document;}
if(typeof(doc)!="undefined"&&doc!=null){isQuickLogin=1;if($j.browser.msie&&/6.0/.test(navigator.userAgent)){ref_to_iframe.onreadystatechange=null;}else if($j.browser.msie&&/7.0/.test(navigator.userAgent)){ref_to_iframe.onreadystatechange=null;}else{ref_to_iframe.onload=null;}
userName=document.getElementById("quickLoginId").value;doc.forms[0].quickLoginId.value=document.getElementById("quickLoginId").value;doc.forms[0].quickLoginPassword.value=document.getElementById("quickLoginPassword").value;doc.forms[0].action=document.$quickLoginUrl;if(frame_submitted==false){frame_submitted=true;doc.forms[0].submit();}}}
function setWelcomeMsg(serverErrorMessage){var UserGroup="";var UserFirstName="";var UserLastName="";var LastViewedProducts="";var nameLabel="";var lblFullNameWelcome="";var errorMessage="";var quickLoginPageURL="";if(typeof(getUserGroup)=='function'){UserGroup=getUserGroup();}
if(typeof(getUserFirstName)=='function'){UserFirstName=getUserFirstName();}
if(typeof(getUserLastName)=='function'){UserLastName=getUserLastName();}
if(typeof(getLastViewedProducts)=='function'){LastViewedProducts=getLastViewedProducts();}
if(typeof(getErrorMessage)=='function'){errorMessage=getErrorMessage();}
if(typeof(getQuickLoginURL)=='function'){quickLoginPageURL=getQuickLoginURL();}
if(errorMessage==""){errorMessage=serverErrorMessage;}
WelcomeMessageInterface(UserGroup,UserFirstName,UserLastName,"nameLabel","_lblFullNameWelcome",LastViewedProducts,"VisitedProducts",errorMessage,quickLoginPageURL);}
GetUrlParamValue=function(name,href){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(href);if(null==results)return"";if(0==results.length)return"";return results[1];}
function plainTextSyncGetCall(pageURL){var xmlReq=getXmlHTTP();if(xmlReq!=null){xmlReq.open("GET",pageURL,false);xmlReq.send(null);if(xmlReq.readyState==4){if(xmlReq.status==200){if(xmlReq.responseText!=null){return xmlReq.responseText;}}}}
return null;}
function plainTextSyncPostCall(pageURL,postData){var xmlReq=getXmlHTTP();if(xmlReq!=null){xmlReq.open("POST",pageURL,false);xmlReq.setRequestHeader('Content-Type','application/x-www-form-urlencoded');xmlReq.send(postData);if(xmlReq.readyState==4){if(xmlReq.status==200){if(xmlReq.responseText!=null){return xmlReq.responseText;}}}}
return null;}
function getXmlHTTP(){if(typeof XMLHttpRequest!="undefined"){return new XMLHttpRequest();}else if(typeof ActiveXObject!="undefined"){try{var xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");return xmlhttp;}catch(e){return null;}}
return null;}

function BasketCountInterface1(cookieGroup,cookieName,countLabel)
{var countvalue=GetSubCookieValue(cookieGroup,cookieName);var _countLabel=document.getElementById(countLabel)
if(countvalue==null)
countvalue=0;if(_countLabel){if(countvalue<=1){_countLabel.innerHTML=countvalue+" article";}else{_countLabel.innerHTML=countvalue+" articles";}}}
function BasketCountInterface(cookieGroup,cookieName,countLabel)
{var countvalue=GetSubCookieValue(cookieGroup,cookieName);if(document.getElementsByTagName('body')[0].id.indexOf('virtual')!=-1){BasketCountInterface_VirtualSites(cookieGroup,cookieName,countLabel,countvalue);}else{BasketCountInterface_LaRedouteSite(cookieGroup,cookieName,countLabel,countvalue);}}
function BasketCountInterface_VirtualSites(cookieGroup,cookieName,countLabel,countvalue)
{var _countLabel=document.getElementById(countLabel);if(countvalue==null){countvalue=0;}
if(_countLabel){if(countvalue<=1){_countLabel.innerHTML=countvalue+" article";}else{_countLabel.innerHTML=countvalue+" articles";}
_countLabel.setAttribute("href","javascript:temporise('/Panier/Basket.aspx');");_countLabel.className="articles";}}
function BasketCountInterface_LaRedouteSite(cookieGroup,cookieName,countLabel,countvalue)
{var _countLabel=document.getElementById(countLabel);if(countvalue==null){countvalue=0;}
if(_countLabel){if(countvalue<=1){_countLabel.innerHTML=countvalue+" article";}else{_countLabel.innerHTML=countvalue+" articles";}
_countLabel.setAttribute("href","/Panier/Basket.aspx");_countLabel.className="articles";}}
function CaptureHeaderClick(call,linkName){if(typeof(s)=="undefined")return;var callingPage;var callFrom;if(s.prop21!=null)
{s.prop21="";}
if(s.prop22!=null)
{s.prop22="";}
s.linkTrackVars="prop21,prop22";callFrom=call.toLowerCase();if(callFrom=="basket")
callingPage="Mon Panier > ";else if(callFrom=="login")
callingPage="Espace Client > ";else if(callFrom=="header")
callingPage="";s.prop21=callingPage+linkName;if(s.pageName!=null)
s.prop22=s.pageName;s.tl(false,'o',linkName);}

function decode(mystring)
{b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";pad="000000";pads=mystring.match(/=+/)?mystring.match(/=+/)[0].length:0;mystring=mystring.replace(/=/g,"A");out="";for(var i=0;i<mystring.length;i+=4)
{temp=((b64.indexOf(mystring.charAt(i))<<18)+(b64.indexOf(mystring.charAt(i+1))<<12)+(b64.indexOf(mystring.charAt(i+2))<<6)+(b64.indexOf(mystring.charAt(i+3)))).toString(16);out+=(pad.substring(0,6-temp.length)+temp).replace(/../g,"%$&");}
out=unescape(out.substring(0,out.length-pads*3).replace(/%00/g,""));return out}
var base64=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'];function charFromCharCode(charCode){return unescape('%'+charCode.toString(16));}
function reverseBase64(){var r=new Object();for(var i=0;i<64;i++){r[base64[i]]=i;}
return r;}
var reversedBase64=reverseBase64();function unicodelessDecode(encStr){var charCodes=new Array();var decStr="";for(var i=0;i<encStr.length;i++)
charCodes[i]=reversedBase64[encStr.charAt(i)];for(var i=0;i<encStr.length;i+=4){var bits24=(charCodes[i]&0xFF)<<18;bits24|=(charCodes[i+1]&0xFF)<<12;bits24|=(charCodes[i+2]&0xFF)<<6;bits24|=(charCodes[i+3]&0xFF)<<0;decStr+=charFromCharCode((bits24&0xFF0000)>>16);if(charCodes[i+2])
decStr+=charFromCharCode((bits24&0xFF00)>>8);if(charCodes[i+3])
decStr+=charFromCharCode((bits24&0xFF)>>0);}
return decStr;}
<!--
function setNoEscapeCookie(name,value,expires,path,domain,secure){var thisCookie=name+"="+value+
((expires)?"; expires="+expires.toGMTString():"")+
((path)?"; path="+path:";  path=/")+
((domain)?"; domain="+domain:"")+
((secure)?"; secure":"");document.cookie=thisCookie;}
function setCookie(name,value,expires,path,domain,secure){var expires_date=new Date(expires);var dt=new Date();var thisCookie=name+"="+escape(value)+
((expires)?"; expires="+expires_date.toGMTString():"")+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+
((secure)?"; secure":"");document.cookie=thisCookie;}
function setCookie_New(name,value,expires,path,domain,secure){var expires_date=new Date(expires);var thisCookie=name+"="+escape(value)+
((expires)?"; expires="+expires_date.toGMTString():"")+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+
((secure)?"; secure":"");document.cookie=thisCookie;}
function SetTempCookie(name,value){document.cookie=name+"="+escape(value);}
$j(document).ready(function(){if(isNullOrUndefined(GetCookie('IsFirstSessionPage'))){SetTempCookie('IsFirstSessionPage',false);if(typeof BindLastSeenProducts=='function')
BindLastSeenProducts('error');var bar=$j('#LastSeenStickyLayer');if(!isNullOrUndefined(GetCookie('PVPR'))&&GetCookie('PVPR')!=''){bar.animate({height:"140px"},1000,null,function(){var bar=$j('#LastSeenStickyLayer');bar.find('.top .up').hide();bar.find('.top .down').show();bar.delay(4000).animate({height:"26px"},1000,function(){bar.find('.top .up').show();bar.find('.top .down').hide();});});}else{bar.animate({height:"26px"});}}});function showCookie(){alert(unescape(document.cookie));}
function getCookieVal(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1)
endstr=document.cookie.length;return unescape(document.cookie.substring(offset,endstr));}
function GetCookie(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg)
return getCookieVal(j);i=document.cookie.indexOf(" ",i)+1;if(i==0)break;}
return null;}
function DeleteCookie(name,path,domain){if(GetCookie(name)){document.cookie=name+"="+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT";}}
function DeleteCookie(name){var path="/";var domain="";if(GetCookie(name)){var expires=new Date();expires.setUTCFullYear(expires.getUTCFullYear()-1);document.cookie='OEvent1=; expires='+expires.toUTCString()+'; path=/';}}
function DeleteCompListCookie(name){var path="/";var domain="";if(GetCookie(name)){var expires=new Date();expires.setUTCFullYear(expires.getUTCFullYear()-1);document.cookie=name+'=; expires='+expires.toUTCString()+'; path=/';}}
function setSubCookieAndCookie(cookieName,subCookieName,subCookieValue)
{var cookieValue=GetCookie(cookieName);if(cookieValue==null||cookieValue.length==0){cookieValue=subCookieName+'='+subCookieValue;}
else{var posStart=cookieValue.indexOf(subCookieName+'=');var posEnd=cookieValue.indexOf('&',posStart+1);if(posEnd==-1){posEnd=cookieValue.length;}
if(posStart>=0&&posEnd>0){cookieValue=cookieValue.substring(0,posStart)+
subCookieName+'='+subCookieValue+
cookieValue.substring(posEnd,cookieValue.length);}
else{if(cookieValue.length>0){cookieValue=cookieValue+'&'+subCookieName+'='+subCookieValue;}}}
setNoEscapeCookie(cookieName,cookieValue);}
function deleteSubCookieAndCookie(cookieName,subCookieName,subCookieValue)
{var cookieValue=GetCookie(cookieName);if(cookieValue==null||cookieValue.length==0){return;}
else{var posStart=cookieValue.indexOf('&'+subCookieName+'=');if(posStart<0)
{posStart=cookieValue.indexOf(subCookieName+'=');}
var posEnd=cookieValue.indexOf('&',posStart+1);if(posEnd==-1){posEnd=cookieValue.length;}
if(posStart>=0&&posEnd>0){cookieValue=cookieValue.substring(0,posStart)+
cookieValue.substring(posEnd,cookieValue.length);}
else{if(cookieValue.length>0){cookieValue=cookieValue;}}}
setNoEscapeCookie(cookieName,cookieValue);}
function GetSubCookieValue(cookieName,subCookieName)
{var cookieValue=GetCookie(cookieName);if(cookieValue!=null)
{if(cookieValue.length>0)
{var arrSubCookies=cookieValue.split('&');for(var i=0;i<arrSubCookies.length;i++)
{if(arrSubCookies[i].indexOf(subCookieName)==0)
{return arrSubCookies[i].substring(subCookieName.length+1,arrSubCookies[i].length);}}}}
return null;}
function setRefreshCookie(val)
{document.cookie="refreshCookie="+val;}
function isNullOrUndefined(elem){if(elem==undefined||null==elem)return true;return false;};function ReplaceAmpWithPipe(str){if(isNullOrUndefined(str)||str=='')
return str;str=str.replace(/\&/g,'|');return str;}
function ReplacePipeWithAmp(str){if(isNullOrUndefined(str)||str=='')
return str;str=str.replace(/\|/g,'&');return str;}
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;if(isNullOrUndefined(input)||input=='')
return output;input=Base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+
this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);}
return output;},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;if(isNullOrUndefined(input)||input=='')
return output;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}
if(enc4!=64){output=output+String.fromCharCode(chr3);}}
output=Base64._utf8_decode(output);return output;},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}
else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}
else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return string;}}
function setStickyBarCookie(productId,documentId,additionlvwimage,cookiename,numberofproducts,offerType,customerTarget)
{var doEffect=false;var today=new Date(addMonth(1));today.setTime(today.getTime());setCookie("visited","0");setCookie("removedproduct","");tempstring=GetCookie(cookiename);var removedproduct='';pdpvisited=GetCookie("pdpvisited");var index=additionlvwimage.lastIndexOf('/');if(index>=0)additionlvwimage=additionlvwimage.substring(index+1);if(!isNullOrUndefined(tempstring)){if(tempstring.indexOf(productId+":"+documentId)>=0)
{setCookie("visited","1");}
else if(tempstring.indexOf(productId+":")>=0&&documentId.length<6)
{setCookie("visited","1");}
else
{productlist=tempstring.split('#');if(productlist.length>=numberofproducts)
{index=tempstring.lastIndexOf('#');removedproduct=tempstring.substring(index+1)
tempstring=tempstring.substring(0,index);}
if(tempstring.indexOf(productId+":"+documentId)<0)
setCookie(cookiename,productId+":"+documentId+":"+additionlvwimage+":"+offerType+":"+customerTarget+"#"+tempstring,today.getTime(),"/","","");doEffect=true;}}
else{setCookie(cookiename,productId+":"+documentId+":"+additionlvwimage+":"+offerType+":"+customerTarget,today.getTime(),"/","","");doEffect=true;}
if(($j('.product_detail_page').length>0||$j('.mpdp_content').length>0||$j('.miniPdpBox').length>0))
{if(($j('.miniPdpBox').length==0||$j('.newModalBox').length==0))setCookie("pdpvisited","1");if(removedproduct.length>0)setCookie("removedproduct",removedproduct);}
if(doEffect&&$j('#LastSeenStickyLayer').length>0){if(isNullOrUndefined(GetCookie('IsFirstNewProductInStickyBar'))){SetTempCookie('IsFirstNewProductInStickyBar',false);BindLastSeenProducts('error');var bar=$j('#LastSeenStickyLayer');bar.animate({height:"140px"},500,null,function(){var bar=$j('#LastSeenStickyLayer');bar.find('.top .up').hide();bar.find('.top .down').show();bar.delay(4000).animate({height:"26px"},500);bar.find('.top .up').show();bar.find('.top .down').hide();});}}}
function addMonth(month)
{var currDate=new Date();var currDay=currDate.getDate();var currMonth=currDate.getMonth()+month+1;var currYear=currDate.getFullYear();currDateStr=currMonth+"/"+currDay+"/"+currYear;var ModMonth=currMonth;if(ModMonth>12)
{ModMonth=1;currYear=currYear+1;}
currDateStr=ModMonth+"/"+currDay+"/"+currYear
return currDateStr;}
function setMSDimCCookie()
{var cookieValue='';var cookieName='DimC';var hiddenbasedimlistname="#DimCCookieValue";var hiddenbasedimlistvalue='';if(null!=$j(hiddenbasedimlistname))
{hiddenbasedimlistvalue=$j(hiddenbasedimlistname).val();}
setCookie(cookieName,hiddenbasedimlistvalue,'','/','','');}
function resetMSDimCCookie()
{var cookieValue='';var cookieName='DimC';setCookie(cookieName,'','','/','','');}

var $j=jQuery.noConflict();function showVendorTermsConditionsPopup(lnkTermsCondition){var url=lnkTermsCondition.href;window.open(url,'',"menubar=no,status=no,width=810,height=530,top=25,left=25,scrollbars=yes,resizable=yes");return false;}
function setShoppingToolForDealOmnitureTags(){if(isNullOrUndefined(s))return;if(s.eVar12!=null){s.eVar12="";}
if(s.prop12!=null){s.prop12="";}
s.eVar12="Good Deals";s.prop12="Good Deals";s.tl(false,'o',"GoodDealsATBClicked");}
function setViewOtherVendorOmnitureTags(){if(isNullOrUndefined(s))return;if(s.prop23!=null){s.prop23=null;}
s.prop23="Vendu aussi par...";s.tl(false,'o',"ViewOtherVendorLinkClicked");}
function setViewOtherVendorOmnitureTags(vendorId){}
function RunOnPageReady(fnCall){$j(document).ready(function(){fnCall();});}
$j(document).ready(function(){$j('input.autocomplete').focus(function(){$j('input.focusedsearchbox').removeClass("focusedsearchbox");$j(this).addClass("focusedsearchbox");});if($j(".autocomplete").autocomplete)
{$j(".autocomplete").autocomplete('//'+$j("#JSONURL").val()+'.redcatsecom.com/CatalogService.svc/REST/SEARCH/',{minChars:3,matchContains:true,selectFirst:false,cacheLength:0,width:307,dataType:"jsonp",extraParams:{Dix:function(){var extraparamdix="";if(undefined!=$j("input.focusedsearchbox").siblings("select").children("option:selected").attr("endecaid"))
{extraparamdix=$j("input.focusedsearchbox").siblings("select").children("option:selected").attr("endecaid").split(':')[1];}
else
{extraparamdix=$j("input.focusedsearchbox").siblings("select").children("option:selected").attr("id");}
return extraparamdix;},Drx:function(){var extraparamdrx="";var extraparamdrx="SiteLabel|"+$j('#hiddenSiteLabel').val();return extraparamdrx;}},parse:function(data){var parsed=[];data=data.Smy.DimSrcRes;for(var i=0;i<data.length;i++){var selectedText=$j("input.focusedsearchbox").siblings("select").children("option:selected").attr("text");if($j('#hiddenSiteLabel').val()!="Les Aubaines"&&$j('#hiddenSiteLabel').val()!="AM.PM."&&selectedText!="Les Aubaines"&&data[i].PntDims.length>1&&data[i].PntDims[1].CatLvl=='0')
{continue;};parsed[parsed.length]={data:data[i],value:data[i].Nm,result:data[i].Nm};}
return parsed;},formatItem:function(row,i,max){return"<span id='"+row.Id+"'>"+getDimensionLineage(row)+"</span>";},formatMatch:function(row,i,max){return getDimensionLineage(row);},formatResult:function(row){return getDimensionLineage(row);}});}});var getDimensionLineage=function(row)
{var output="";if(row.PntDims.length>2){output+=row.PntDims[2].Nm+" ";}
output+=row.Nm;if(row.PntDims.length>1){output+=" "+row.PntDims[1].Nm;}
if(output.length>55){output=output.substring(0,55)+"...";}
return output;}
function ParseQueryString(key){qsFull=window.location.search.substring(1);qsKeyValueArr=qsFull.split('&');for(i=0;i<qsKeyValueArr.length;i++){currentKey=qsKeyValueArr[i].split('=');if(currentKey[0]==key){return currentKey[1];}}}
function popwin(_url,_width,_height)
{window.open(_url,'','topmargin=0,leftmargin=0,marginheight=0,marginwidth=0,width='+_width+',height='+_height+',toolbar=no,menubar=no,scrollbars=auto,resizable=yes');}
function changeEtatMenu(e)
{e.style.cursor='hand';if(e.className=="on")
{e.className="off";}
else
{e.className="on";}}
function MM_openBrWindow(theURL,winName,features){w=window.open(theURL,winName,features);w.focus();}
var vsp=" pas (Path = '23107224')";AssignSearchKeyword($j("div#search_fh #hdrSearch,.header_search input"));function AssignSearchKeyword(controlName){var strHref=window.location.href;var foundKeywordCap=new RegExp("Keyword");var foundKeyword=new RegExp("keyword");if(foundKeywordCap.test(strHref)==true)
{var keywordparam=getKeywordVal("Keyword");if(keywordparam!=null){controlName.val(keywordparam);}}
else if(foundKeyword.test(strHref)==true)
{var keywordparam=getKeywordVal("keyword");if(keywordparam!=null){controlName.val(keywordparam);}}}
function getKeywordVal(strParamName){var strReturn="";var strHref=window.location.href;var bFound=false;var cmpstring=strParamName+"=";var cmplen=cmpstring.length;if(strHref.indexOf("?")>-1){var strQueryString=strHref.substr(strHref.indexOf("?")+1);var aQueryString=strQueryString.split("&");for(var iParam=0;iParam<aQueryString.length;iParam++){if(aQueryString[iParam].substr(0,cmplen)==cmpstring){var aParam=aQueryString[iParam].split("=");strReturn=aParam[1];bFound=true;break;}}}
if(bFound==false)return null;var histogram={};var ret=strReturn.toString();var replacer=function(search,replace,strReturn){var tmp_arr=[];tmp_arr=strReturn.split(search);return tmp_arr.join(replace);};histogram["'"]='%27';histogram['(']='%28';histogram[')']='%29';histogram['*']='%2A';histogram['~']='%7E';histogram['!']='%21';histogram['%20']='+';histogram['&']='%26';histogram['$']='%24';histogram['^']='%5E';histogram['&']='%26';histogram['{']='%7B';histogram['}']='%7D';histogram['[']='%5B';histogram[']']='%5D';histogram['=']='%3D';histogram[':']='%3A';histogram['/']='%2F';histogram[',']='%2C';histogram[';']='%3B';histogram['?']='%3F';histogram['%20']='+';histogram['"']='%22';histogram["\\"]='%5C';histogram[' ']='%20';for(replace in histogram){search=histogram[replace];ret=replacer(search,replace,ret)}
ret=decodeURIComponent(ret);var strReturn=ret;return strReturn;}
var isGetAccountLayerStatus=false;function ShowAccountLayerV2(){if(!isGetAccountLayerStatus||$j('.AccountLayerContainer').length==0){GetAccountLayerV2();}
if(isGetAccountLayerStatus){$j.fn.OnLoginSuccessCallback=null;$j('#account').css({width:'678px',height:'460px'});var scrollTop=$j(window).scrollTop();var height=$j(window).height();var halfHeight=(height/2);var pos={left:(152+$j('#wrapper').offset().left),top:(halfHeight+scrollTop-210),right:null,bottom:null};ShowNewModalBox('account',pos);$j('.alreadyCustomer .cemail:first').focus();}}
function GetAccountLayerV2(){showModal(defaultContent);isGetAccountLayerStatus=true;$j.ajax({type:"GET",async:false,timeout:5000,url:"/Account/AccountLayerV2.aspx",dataType:"html",error:function(){isGetAccountLayerStatus=false;$j.closeModalWindow();},success:function(html){$j.closeModalWindow();$j(html).find('.AccountLayerContainer').clone(true).appendTo('body');$j(html).appendTo('body').remove();}});}
var isiPad=navigator.userAgent.match(/iPad/i)!=null;var isAndroid=(navigator.userAgent.toLowerCase().indexOf("android")!=-1)?true:false;var xhr=null;var goodToGo=true;var delayedStickyDown=false;var labelIdentification="<div class='loginLabel'>Veuillez vous identifier ci-dessus pour visualiser vos articles pr&eacute;f&eacute;r&eacute;s.</div>";var jsonDataTestLogged={"_ID":"00000000-0000-0000-0000-000000000000","_LowStockEmail":false,"_lineItems":[{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/1\/7\/8\/324253178-4c72f97f-6684-4b0c-9858-7d04d0c26d68_300.jpg","_intref":"3","_itemOfferId":"","_lineItemId":11,"_message":null,"_pid":"324253178","_rank":null,"_secintref":"1"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/8\/4\/9\/324160849-7d629941-78af-41e6-b9bd-6019c47b8a5e_300.jpg","_intref":"12","_itemOfferId":"","_lineItemId":10,"_message":null,"_pid":"324160849","_rank":null,"_secintref":"2"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/2\/5\/9\/324205259-7ace36af-5319-4c00-90bd-313263420bdb_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":9,"_message":null,"_pid":"324205259","_rank":null,"_secintref":"1"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/5\/553030_136161_03_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":3,"_message":null,"_pid":"324207647","_rank":null,"_secintref":"1"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/5\/553822_156706_02_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":4,"_message":null,"_pid":"324229400","_rank":null,"_secintref":"1"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/5\/4\/7\/324171547-82785537-f914-4b1a-b56b-aa41b7f3b8ef_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":1,"_message":null,"_pid":"324171547","_rank":null,"_secintref":"2"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/1\/7\/8\/324253178-4c72f97f-6684-4b0c-9858-7d04d0c26d68_300.jpg","_intref":"3","_itemOfferId":"","_lineItemId":11,"_message":null,"_pid":"324253178","_rank":null,"_secintref":"1"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/8\/4\/9\/324160849-7d629941-78af-41e6-b9bd-6019c47b8a5e_300.jpg","_intref":"12","_itemOfferId":"","_lineItemId":10,"_message":null,"_pid":"324160849","_rank":null,"_secintref":"2"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/2\/5\/9\/324205259-7ace36af-5319-4c00-90bd-313263420bdb_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":9,"_message":null,"_pid":"324205259","_rank":null,"_secintref":"3"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/5\/553030_136161_03_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":3,"_message":null,"_pid":"324207647","_rank":null,"_secintref":"1"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/5\/553822_156706_02_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":4,"_message":null,"_pid":"324229400","_rank":null,"_secintref":"1"},{"_DateAdded":"\/Date(-62135578800000-0500)\/","_UnitPrice":0,"_cid":null,"_did":"999999","_imgUrl":"\/\/media.laredoute.fr\/Product\/EUPICTURES\/5\/4\/7\/324171547-82785537-f914-4b1a-b56b-aa41b7f3b8ef_300.jpg","_intref":"1","_itemOfferId":"","_lineItemId":1,"_message":null,"_pid":"324171547","_rank":null,"_secintref":"2"}],"_numberOfItems":0,"customerID":"450000027","dateCreated":"\/Date(-62135578800000-0500)\/","dateLastChanged":"\/Date(-62135578800000-0500)\/","label":null};var jsonDataTestEmptyLogged={"_ID":"00000000-0000-0000-0000-000000000000","_LowStockEmail":false,"_lineItems":[],"_numberOfItems":0,"customerID":"450000027","dateCreated":"\/Date(-62135578800000-0500)\/","dateLastChanged":"\/Date(-62135578800000-0500)\/","label":null};var jsonDataTestNotLogged={"_ID":"00000000-0000-0000-0000-000000000000","_LowStockEmail":false,"_lineItems":[],"_numberOfItems":0,"customerID":null,"dateCreated":"\/Date(-62135578800000-0500)\/","dateLastChanged":"\/Date(-62135578800000-0500)\/","label":null};function BindLastSeenProducts(flag){if(isAndroid)return;var ul=$j('#LastSeenStickyLayer ul.lastProducts');var visited=GetCookie("visited");var pdpvisit=GetCookie("pdpvisited");var removedproduct=GetCookie("removedproduct");ul.empty();var productsString=GetCookie('PVPR');if(!isNullOrUndefined(productsString)){var products=productsString.split('#');var length=products.length;var j=0;if(!isNullOrUndefined(removedproduct)&&removedproduct.length>0){productsString=productsString+'#'+removedproduct;products=productsString.split('#');length++;removedproduct='';setCookie("removedproduct","");if(j==0&&length>10)length=10;}
for(var i=j;i<length;i++){var productInfos=products[i].split(':');if(productInfos.length>=3){var pId=productInfos[0];var dId=productInfos[1];var picture=GetLastSeenMediaImagePath3Level(productInfos[2]);var li=$j('<li></li>');li.attr('productid',pId);li.attr('documentid',dId);if(productInfos.length==5){var offerType=productInfos[3];var custTarget=productInfos[4];li.attr('offertype',offerType);li.attr('customertarget',custTarget);}
var img=$j('<img></img>');img.attr('src',picture);img.attr('alt','Derni&egrave;rement vu');img.appendTo(li);if(i==9){li.addClass('last');}
li.appendTo(ul);$j('.remove_last_products_bloc').show();}}
ul.find('li').addMiniPDPOnLastSeenProducts('derniervus PL');$j('#LastSeenStickyLayer').show();}else{$j('#LastSeenStickyLayer').show();}}
function removeLastSeenProducts(){$j('.remove_last_products_bloc').hide();setCookie("PVPR","");BindLastSeenProducts();var stickyBar=$j('#LastSeenStickyLayer');stickyBar.delay(300).animate({height:"26px"},500);stickyBar.find('.top .up').show();stickyBar.find('.top .down').hide();}
showTab=function(tabToActivate){tabs.removeClass('tab_selected');tabToActivate.addClass('tab_selected');tabs_content.hide();if(bar.height()!=140){upDownArrow.trigger('click');}
bottomSticky.find("."+tabToActivate.attr('name')).show().parents('div.tab_content').show();if(bottomSticky.find("."+tabToActivate.attr('name')+' li').size()>0){bottomSticky.find("."+tabToActivate.attr('name')).parents('div.tab_content').find('.links_bloc').show();}}
switchTab=function(tabToActivate){if(tabToActivate.hasClass('tab_selected')&&!tabToActivate.hasClass('no_close')){upDownArrow.trigger('click');}else{tabs.removeClass('tab_selected');tabToActivate.removeClass('no_close').addClass('tab_selected');tabs_content.hide();if(bar.height()!=140){upDownArrow.trigger('click');}
var preaction=tabToActivate.attr('preaction');if(!isNullOrUndefined(preaction)){eval(preaction+"('"+tabToActivate.attr('name')+"')");}
bottomSticky.find("."+tabToActivate.attr('name')).show().parents('div.tab_content').show();if(bottomSticky.find("."+tabToActivate.attr('name')+' li').size()>0){bottomSticky.find("."+tabToActivate.attr('name')).parents('div.tab_content').find('.links_bloc').show();}
var postaction=tabToActivate.attr('postaction');if(!isNullOrUndefined(postaction)){eval(postaction+'()');}}}
$j.fn.OnLoginSuccessCallback=null;getPreferedProducts=function(contentToActivate){contentObject=bottomSticky.find('.'+contentToActivate);goodToGo=false;$j.fn.preferedProductsAJAXCall();};$j.fn.RefreshWishListInStickyBar=function(){setWelcomeMsgFromWishListPopup();UpdateBasketCount(null,null);topSticky.find('.preferes').addClass('no_close');topSticky.find('.preferes').trigger('click');}
$j.fn.preferedProductsAJAXCall=function(){$j.ajax({url:"/WishList/AjaxGetWishList.aspx",type:"GET",async:false,cache:false,timeout:10000,dataType:"json",success:function(jsonData){contentObject=resetCarousel(contentObject);if(isNullOrUndefined(jsonData.customerID)){contentObject.html(labelIdentification);OpenCenteredPopUp("/Account/IdentifyAcctPopup.aspx?ReturnUrl=~/Wishlist/WishlistRedirectpage.aspx?cpg=sticky",1000,600);}else if(!isNullOrUndefined(jsonData.customerID)){if(jsonData._lineItems.length>0){goodToGo=true;getParsedData(jsonData,contentObject);}else{var sCustFirstName=decode(GetSubCookieValue('M.R.User','UserFName'));var sCustLastName=decode(GetSubCookieValue('M.R.User','UserLName'));contentObject.parent().find('.empty_last_prefered_bloc span.name').html(sCustLastName+" "+sCustFirstName);contentObject.parent().find('.empty_last_prefered_bloc').show();}}},error:function(jqXHR,textStatus,errorThrown){contentObject.html("<div class='loginLabel'>Un probl&egrave;me est survenu lors de la r&eacute;cup&eacute;ration de vos articles pr&eacute;f&eacute;r&eacute;s. Merci de r&eacute;essayer dans quelques instants.</div>");}});}
getParsedData=function(jsonData,contentObject){var content="";contentObject=resetCarousel(contentObject);$j.each(jsonData._lineItems,function(i,s){var li=$j('<li></li>');li.attr('productid',s._pid);li.attr('documentid',s._did);li.attr('offertype',0);li.attr('customertarget',0);li.attr('prodsize',s._secintref);li.attr('prodcolor',s._intref);var img=$j('<img></img>');img.attr('src',s._imgUrl+'?s=72');img.appendTo(li);li.appendTo(contentObject);});contentObject.find('li').addMiniPDPOnPreferedProducts('WishList');};bindjCarousel=function(){if(goodToGo){bottomSticky.find('ul.views').jcarousel({scroll:9});}};resetCarousel=function(contentObject){if(contentObject.parents('.tab_content').find('div.jcarousel-skin-tango').size()>0){parentTabContent=contentObject.parents('.tab_content');parentTabContent.find('div.jcarousel-skin-tango').remove();emptyCarouselZone=$j('<ul></ul>');emptyCarouselZone.addClass('lastPreferedProducts tab_content views jcarousel jcarousel-skin-tango');parentTabContent.prepend(emptyCarouselZone);contentObject=parentTabContent.find('.lastPreferedProducts');}
if(contentObject.find('div.loginLabel').size()>0){contentObject.find('div.loginLabel').remove();}
return contentObject;}
var bar=null;var topSticky=null;var bottomSticky=null;var upDownArrow=null;var derniersTabButton=null;var preferesTabButton=null;var tabs=null;var tabs_content=null;$j(document).ready(function(){bar=$j('#LastSeenStickyLayer');topSticky=bar.find('.top');bottomSticky=bar.find('.bottom');upDownArrow=topSticky.find('.arrow');derniersTabButton=topSticky.find('.derniers');preferesTabButton=topSticky.find('.preferes');tabs=topSticky.find('.tab_button');tabs_content=bottomSticky.find('.tab_content');if(isAndroid)return;upDownArrow.bind('click',function(){if(bar.height()!=140){bar.animate({height:"140px"},500);bar.find('.top .up').hide();bar.find('.top .down').show();BindLastSeenProducts();s.pageName="FR:RE:AUTRE:STICKY BAR:derniers articles vus";s.prop12="Derniers articles vus";s.eVar12='';s.tl(false,'o',"FRStickyBar");}else{bar.animate({height:"26px"},500);bar.find('.top .up').show();bar.find('.top .down').hide();};});tabs.bind('click',function(){switchTab($j(this));});var productsString=GetCookie('PVPR');var visited=GetCookie("visited");if(!isNullOrUndefined(productsString)){if($j('.product_detail_page').length>0||$j('.mpdp_content').length>0){produtarr=productsString.split("#");if(produtarr.length>1||(produtarr.length==1&&visited=="1"))
$j('#LastSeenStickyLayer').show();else
$j('#LastSeenStickyLayer').show();}
else{$j('#LastSeenStickyLayer').show();}}
else{$j('#LastSeenStickyLayer').show();}});function GetLastSeenMediaImagePath3Level(fileName){if(isNullOrUndefined(fileName)){return'';}
var LastSeenProductBar=$j('.LastSeenStickyLayer');if(LastSeenProductBar.find('.flag3level').val()=="true"){if(isNullOrUndefined(LastSeenProductBar.find('.hidImgPath3level').val())){return'';}
if(fileName.length>13){if(!isNaN(fileName.substring(6,7))&&!isNaN(fileName.substring(7,8))&&!isNaN(fileName.substring(8,9))){return LastSeenProductBar.find('.hidImgPath3level').val()+'/'+fileName.substring(6,7)+'/'+fileName.substring(7,8)+'/'+fileName.substring(8,9)+'/'+fileName;}
else{return LastSeenProductBar.find('.hidImgPath3level').val()+'/'+fileName.substring(0,1)+'/'+fileName;}}
else{return LastSeenProductBar.find('.hidImgPath3level').val()+'/'+fileName.substring(0,1)+'/'+fileName;}}
else{if(!isNullOrUndefined(LastSeenProductBar.find('.hidImgPath').val())){return LastSeenProductBar.find('.hidImgPath').val()+'/'+fileName.substring(0,1)+'/'+fileName;}
else{return'';}}}
/**
 * SWFObject v1.5: Flash Player detection and embed - http://blog.deconcept.com/swfobject/
 *
 * SWFObject is (c) 2007 Geoff Stearns and is released under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 *
 */
if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return;}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true;}if(c){this.addParam("bgcolor",c);}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9);}};deconcept.SWFObject.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true);},setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key];}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _23;};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q;}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring((_2d[i].indexOf("=")+1));}}}return "";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){};}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;

$j=jQuery.noConflict();var OriginForMiniPDP='';var pdpLinkCategoryid=null;var pdpLinkpos=null;var pdpLinknumpage=null;var PDPCrossSellOrigin='Cross sell PDP';var CrossSellVal='';var sizeid='';var prodsize='';var prodcolor='';var prodsizeCode='';var colorindex='';var colorlabel='';var genericsizeCode='';var lineItemID='';var wlButton='add';var source='';function popUp(strURL,strHeight,strWidth,largeur){var left=(screen.width-largeur)/2;var strOptions="toolbar=no, location=no, directories=no, menubar=no, status=no, scrollbars=yes, resizable=yes, copyhistory=no, height="+strHeight+",width="+strWidth+", left="+left+", top=200";window.open(strURL,'newWin',strOptions);}
var MiniPDPMessageFWCsts={Section:'MiniPDP',NoSizeSelected:'NoSizeSelected',NoSizeAvailable:'NoSizeAvailable',InvalidQuantity:'InvalidQuantity',InvalidQuantityMax:'InvalidQuantityMax',InvalidQuantityMin:'InvalidQuantityMin'};jQuery.fn.addMiniPDPOnOrderDetail=function(productId,documentId,categoryId,color,size,pagename){try{if(!isNullOrUndefined(pagename)&&pagename!=''){OriginForMiniPDP=pagename;}}catch(ex){}
$j(document).openMiniPDP(productId,documentId,categoryId,null,null,0,null,null,size,color,null,null,null);};jQuery.fn.addMiniPDPOnPush=function(strOrigin){OriginForMiniPDP=strOrigin;function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};this.parent('a').hover(function(){if($j(this).find('div.quick_view_overlay').length==0&&$j(this).find('span.minipdp_button').length==0){$j('<div class="quick_view_overlay"></div><span class="minipdp_button"></span>').click(function(e){HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parent('a').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
var categoryid=ParseUrl(pdpLink,'categoryid');if(!isNullOrUndefined(categoryid)&&categoryid!='0'){pdpLinkCategoryid=categoryid;}
if(isNullOrUndefined(categoryid)){categoryid=0;}
var pos=ParseUrl(window.location.href,'pos');var numberpage=ParseUrl(window.location.href,'numberpage');if(!isNullOrUndefined(ParseUrl(pdpLink,'genericsize')))
{genericsizeCode=ParseUrl(pdpLink,'genericsize');}
else{genericsizeCode='';}
if(!isNullOrUndefined(ParseUrl(pdpLink,'colorlabel')))
{colorlabel=ParseUrl(pdpLink,'colorlabel');}
else{colorlabel='';}
isAvailProdcut=false;var availLogScript=$j(this).parent('a').attr('availLogScript');if(!isNullOrUndefined(availLogScript)&&availLogScript!=''){isAvailProdcut=true;eval(availLogScript);}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
OriginForMiniPDP=strOrigin;$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell);return false;}).appendTo($j(this));}
$j(this).find('div.quick_view_overlay').show();$j(this).find('.minipdp_button').show();},function(){$j(this).find('.minipdp_button,div.quick_view_overlay').hide();});$j(this).parents('li').find('p a').click(function(e){HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parents('li').find('a:first').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{isCrossSell='1';}
var categoryid=ParseUrl(pdpLink,'categoryid');if(!isNullOrUndefined(categoryid)&&categoryid!='0'){pdpLinkCategoryid=categoryid;}
if(isNullOrUndefined(categoryid)){categoryid=0;}
var pos=ParseUrl(window.location.href,'pos');var numberpage=ParseUrl(window.location.href,'numberpage');if(!isNullOrUndefined(ParseUrl(pdpLink,'genericsize')))
{genericsizeCode=ParseUrl(pdpLink,'genericsize');}
else{genericsizeCode='';}
if(!isNullOrUndefined(ParseUrl(pdpLink,'colorlabel')))
{colorlabel=ParseUrl(pdpLink,'colorlabel');}
else{colorlabel='';}
isAvailProdcut=false;var availLogScript=$j(this).parents('li').find('a:first').attr('availLogScript');if(!isNullOrUndefined(availLogScript)&&availLogScript!=''){isAvailProdcut=true;}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
OriginForMiniPDP=strOrigin;$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell);return false;}).attr('href','javascript:void(0);');};jQuery.fn.addMiniPDPOnPDPCross=function(strOrigin){function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};this.live('mouseover',function(){$j(this).find('.minipdp_button').show();});this.live('mouseout',function(){$j(this).find('.minipdp_button').hide();});this.live('click',function(e){e.preventDefault();e.stopPropagation();var pdpLink=$j(this).attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var categoryid=ParseUrl(pdpLink,'categoryid');var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');var offerType=ParseUrl(pdpLink,'offertype');if(!isNullOrUndefined(ParseUrl(pdpLink,'prodsize'))){prodsize=ParseUrl(pdpLink,'prodsize');}
else
{prodsize='';}
if(!isNullOrUndefined(ParseUrl(pdpLink,'prodcolor'))){prodcolor=ParseUrl(pdpLink,'prodcolor');}else
{prodcolor='';}
pdpLinkCategoryid=categoryid
pdpLinkpos=pos;pdpLinknumpage=numberpage;var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
isAvailProdcut=false;var availLogScript=$j(this).parents('li').find('a:first').attr('availLogScript');if(!isNullOrUndefined(availLogScript)&&availLogScript!=''){isAvailProdcut=true;eval(availLogScript);}
isSearchResultProduct=0;OriginForMiniPDP=strOrigin;var STValue=$j(this).attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,null,offerType);});};jQuery.fn.addMiniPDP=function(){function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};$j('<a class="quick_view_button" href="#"></a>').click(function(e){HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parent('a.visu').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var categoryid=ParseUrl(pdpLink,'categoryid');var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');if(!isNullOrUndefined(ParseUrl(pdpLink,'secintref'))){prodsize=ParseUrl(pdpLink,'secintref');}
else{prodsize='';}
if(!isNullOrUndefined(ParseUrl(pdpLink,'prodcolor'))){prodcolor=ParseUrl(pdpLink,'prodcolor');}else
{prodcolor='';}
pdpLinkCategoryid=categoryid
pdpLinkpos=pos;pdpLinknumpage=numberpage;var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
if(PageNameMiniPDP!=''){OriginForMiniPDP=PageNameMiniPDP;}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
source=ParseUrl(pdpLink,'source');if(!isNullOrUndefined(source)){isSearchResultProduct=1;}
isAvailProdcut=false;var availLogScript=$j(this).parent('a').attr('availLogScript');if(!isNullOrUndefined(availLogScript)&&availLogScript!=''){isAvailProdcut=true;eval(availLogScript);}
var parentLi=$j(this).parents('li');var previousli=parentLi.prev();var nextli=parentLi.next();$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,null,offerType,customerTarget,previousli,nextli);return false;}).appendTo($j(this));if(!isTouchDevice()){this.hover(function(){$j(this).find('a.quick_view_button').show();},function(){$j(this).find('a.quick_view_button').hide();});}else{this.find('a.quick_view_button').show();}};jQuery.fn.addMiniPDPOnWL=function(){function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};this.hover(function(){if($j(this).find('span.minipdp_button').length==0){var miniPDPOpening=function(e){HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parent('a.visu').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var categoryid=ParseUrl(pdpLink,'categoryid');var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');prodsize=ParseUrl(pdpLink,'prodsize');prodcolor=ParseUrl(pdpLink,'prodcolor');pdpLinkCategoryid=categoryid
pdpLinkpos=pos;pdpLinknumpage=numberpage;var itemInfo=$j.parseJSON($j(this).parents('li').find('input.lineItemJSON').val());if(itemInfo!=null){lineItemID=itemInfo.itemid;if(itemInfo.availability!='Available'){wlButton='modify';}
else{wlButton='add';}}
var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
try{if(!isNullOrUndefined(PageNameMiniPDP)&&PageNameMiniPDP!=''){OriginForMiniPDP=PageNameMiniPDP;}}catch(ex){}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,lineItemID,offerType,customerTarget);return false;};$j('<div class="quick_view_overlay"></div><span class="minipdp_button"></span>').click(miniPDPOpening).appendTo($j(this));}
$j(this).find('div.quick_view_overlay').show();$j(this).find('span.minipdp_button').show();},function(){$j(this).find('span.minipdp_button,div.quick_view_overlay').hide();});$j(this).parents('li').find('a.other_color.fixpng, a.other_size.fixpng, a.other_vendor.fixpng').click(function(e){HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parents('li').find('a.visu').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var categoryid=ParseUrl(pdpLink,'categoryid');var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');prodsize=ParseUrl(pdpLink,'prodsize');prodcolor=ParseUrl(pdpLink,'prodcolor');pdpLinkCategoryid=categoryid
pdpLinkpos=pos;pdpLinknumpage=numberpage;var itemInfo=$j.parseJSON($j(this).parents('li').find('input.lineItemJSON').val());if(itemInfo!=null){prodsizeCode=itemInfo.prescode;lineItemID=itemInfo.itemid;if(itemInfo.availability!='Available'){wlButton='modify';}
else{wlButton='add';}}
var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
try{OriginForMiniPDP='';if(!isNullOrUndefined(PageNameMiniPDP)&&PageNameMiniPDP!=''){OriginForMiniPDP=PageNameMiniPDP;}}catch(ex){}
if(OriginForMiniPDP=='Wishlist destination'){wlButton='add';}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,lineItemID,offerType,customerTarget);return false;});$j(this).parents('li').find('a.similar.fixpng').click(function(e){HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parents('li').find('a.visu').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var categoryid=ParseUrl(pdpLink,'categoryid');var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');prodsize=ParseUrl(pdpLink,'prodsize');prodcolor=ParseUrl(pdpLink,'prodcolor');pdpLinkCategoryid=categoryid
pdpLinkpos=pos;pdpLinknumpage=numberpage;var itemInfo=$j.parseJSON($j(this).parents('li').find('input.lineItemJSON').val());if(itemInfo!=null){lineItemID=itemInfo.itemid;}
wlButton='add';var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
try{if(!isNullOrUndefined(PageNameMiniPDP)&&PageNameMiniPDP!=''){OriginForMiniPDP=PageNameMiniPDP;}}catch(ex){}
var STValue=$j(this).parent('a').attr('stvalue');OriginForMiniPDP='Wishlist substitution product';if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
if(itemInfo!=null)
ShowSubstitutionLayer(productId,documentId,itemInfo.prescode,itemInfo.sizecode);else
ShowSubstitutionLayer(productId,documentId,'','');return false;});};jQuery.fn.addMiniPDPOnComparisonList=function(){function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};$j('<a class="quick_view_button" href="#"></a>').click(function(e){if($j('.popUpWrap').length!=0){$j('.popUpWrap').hide();}
HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parent('a.product-img-link').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var categoryid=ParseUrl(pdpLink,'categoryid');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');pdpLinkCategoryid=categoryid
pdpLinkpos=pos;pdpLinknumpage=numberpage;var prodcolor=ParseUrl(pdpLink,'prodcolor');var prodsize=ParseUrl(pdpLink,'prodsize');var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
try{if(!isNullOrUndefined(PageNameMiniPDP)&&PageNameMiniPDP!=''){OriginForMiniPDP=PageNameMiniPDP;}}catch(ex){}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
var parentLi=$j(this).parents('li');var previousli=parentLi.prev();var nextli=parentLi.next();$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,null,offerType,customerTarget,previousli,nextli);return false;}).appendTo(this);if(!isTouchDevice()){this.hover(function(){$j(this).find('a.quick_view_button').show();},function(){$j(this).find('a.quick_view_button').hide();});}else{$j(this).find('a.quick_view_button').show();}};jQuery.fn.addMiniPDPOnComparisonResult=function(){function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};$j('<a class="quick_view_button" href="#"></a>').click(function(e){HideNewModalBox();e.preventDefault();var pdpLink=$j(this).parent('a.prd-pdp-link').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var categoryid=ParseUrl(pdpLink,'categoryid');var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');var prodcolor=ParseUrl(pdpLink,'prodcolor');pdpLinkCategoryid=categoryid
pdpLinkpos=pos;pdpLinknumpage=numberpage;var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
try{if(!isNullOrUndefined(PageNameMiniPDP)&&PageNameMiniPDP!=''){OriginForMiniPDP=PageNameMiniPDP;}}catch(ex){}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,null,prodcolor,null,offerType,customerTarget);return false;}).appendTo(this);if(!isTouchDevice()){this.hover(function(){$j(this).find('a.quick_view_button').show();},function(){$j(this).find('a.quick_view_button').hide();});}else{$j(this).find('a.quick_view_button').show();}};jQuery.fn.addMiniPDPOnLastSeenProducts=function(strOrigin){this.hover(function(){if($j(this).find('div.quick_view_overlay').length==0){$j('<div class="quick_view_overlay"></div><a class="quick_view_overlay_button" href="#"></a>').click(function(e){HideNewModalBox();e.preventDefault();var productId=$j(this).parent('li').attr('productid');var documentId=$j(this).parent('li').attr('documentid');var offerType=$j(this).parent('li').attr('offertype');var customerTarget=$j(this).parent('li').attr('customertarget');var isCrossSell='0';var categoryid=0;OriginForMiniPDP=strOrigin;setSubCookieAndCookie('M.R.Omniture','ST',"Derniers articles vus");$j(document).openMiniPDP(productId,documentId,categoryid,null,null,null,null,null,null,null,null,offerType,customerTarget);return false;}).appendTo($j(this));}
$j(this).find('div.quick_view_overlay,a.quick_view_overlay_button').show();},function(){$j(this).find('a.quick_view_overlay_button,div.quick_view_overlay').hide();});};jQuery.fn.addMiniPDPOnPreferedProducts=function(strOrigin){this.hover(function(){if($j(this).find('div.quick_view_overlay').length==0){$j('<div class="quick_view_overlay"></div><a class="quick_view_overlay_button" href="#"></a>').click(function(e){HideNewModalBox();e.preventDefault();var productId=$j(this).parent('li').attr('productid');var documentId=$j(this).parent('li').attr('documentid');var offerType=$j(this).parent('li').attr('offertype');var customerTarget=$j(this).parent('li').attr('customertarget');var prodsize=$j(this).parent('li').attr('prodsize');var prodcolor=$j(this).parent('li').attr('prodcolor');var categoryid=0;OriginForMiniPDP=strOrigin;setSubCookieAndCookie('M.R.Omniture','ST',"Articles prfrs");$j(document).openMiniPDP(productId,documentId,categoryid,null,null,null,null,null,prodsize,prodcolor,null,offerType,customerTarget);return false;}).appendTo($j(this));}
$j(this).find('div.quick_view_overlay,a.quick_view_overlay_button').show();},function(){$j(this).find('a.quick_view_overlay_button,div.quick_view_overlay').hide();});};jQuery.fn.addMiniPDPOnGoodDeals=function(strOrigin){OriginForMiniPDP=strOrigin;function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};this.parent('a').hover(function(){if($j(this).find('span.minipdp_button').length==0){$j('<span class="minipdp_button"></span>').click(function(e){HideNewModalBox();e.preventDefault();e.stopPropagation();var pdpLink=$j(this).parent('a').attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var isCrossSell=ParseUrl(pdpLink,'cssrc');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
var categoryid=ParseUrl(pdpLink,'categoryid');if(!isNullOrUndefined(categoryid)&&categoryid!='0'){pdpLinkCategoryid=categoryid;}
if(isNullOrUndefined(categoryid)){categoryid=0;}
var pos=ParseUrl(window.location.href,'pos');var numberpage=ParseUrl(window.location.href,'numberpage');if(!isNullOrUndefined(ParseUrl(pdpLink,'genericsize')))
{genericsizeCode=ParseUrl(pdpLink,'genericsize');}
else{genericsizeCode='';}
if(!isNullOrUndefined(ParseUrl(pdpLink,'colorlabel')))
{colorlabel=ParseUrl(pdpLink,'colorlabel');}
else{colorlabel='';}
isAvailProdcut=false;var availLogScript=$j(this).parent('a').attr('availLogScript');if(!isNullOrUndefined(availLogScript)&&availLogScript!=''){isAvailProdcut=true;eval(availLogScript);}
var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
OriginForMiniPDP=strOrigin;var parentLi=$j(this).parents('li');prodsize=parentLi.find('select.size_select').val();prodcolor=parentLi.find('select.color_select').val();$j.fn.openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,null,offerType,customerTarget);return false;}).appendTo($j(this));}
$j(this).find('div.quick_view_overlay').show();$j(this).find('span.minipdp_button').show();},function(){$j(this).find('span.minipdp_button,div.quick_view_overlay').hide();});$j(this).parents('li').find('a').click(function(e){HideNewModalBox();e.preventDefault();e.stopPropagation();var pdpLink=$j(this).attr('href');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{CrossSellVal=isCrossSell;isCrossSell='1';}
var categoryid=ParseUrl(pdpLink,'categoryid');if(!isNullOrUndefined(categoryid)&&categoryid!='0'){pdpLinkCategoryid=categoryid;}
if(isNullOrUndefined(categoryid)){categoryid=0;}
var pos=ParseUrl(window.location.href,'pos');var numberpage=ParseUrl(window.location.href,'numberpage');if(!isNullOrUndefined(ParseUrl(pdpLink,'genericsize')))
{genericsizeCode=ParseUrl(pdpLink,'genericsize');}
else{genericsizeCode='';}
if(!isNullOrUndefined(ParseUrl(pdpLink,'colorlabel')))
{colorlabel=ParseUrl(pdpLink,'colorlabel');}
else{colorlabel='';}
isAvailProdcut=false;var availLogScript=$j(this).attr('availLogScript');if(!isNullOrUndefined(availLogScript)&&availLogScript!=''){isAvailProdcut=true;eval(availLogScript);}
var STValue=$j(this).attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
OriginForMiniPDP=strOrigin;var parentLi=$j(this).parents('li');prodsize=parentLi.find('select.size_select').val();prodcolor=parentLi.find('select.color_select').val();$j.fn.openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,null,null,null);return false;});};jQuery.fn.addMiniPDPOnBasketPage=function(strOrigin){OriginForMiniPDP=strOrigin;function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};$j(this).unbind('click');var pdpLink=$j(this).attr('pdpurl');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');if(isNullOrUndefined(productId)&&isNullOrUndefined(documentId)){$j(this).css({'cursor':'default'});}
$j(this).click(function(e){if(currentLineItem!=null){oldCurrentLineItem=currentLineItem;}
if(oldCurrentLineItem!=null){UnBindOldLineItem();}
HideNewModalBox();if($j(this).parents('tr').find('.validate:visible').length>0){return;}
var pdpLink=$j(this).attr('pdpurl');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');if(isNullOrUndefined(productId)&&isNullOrUndefined(documentId)){return;}
var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{isCrossSell='1';}
var categoryid=ParseUrl(window.location.href,'categoryid');if(isNullOrUndefined(categoryid)){categoryid=0;}
var pos=ParseUrl(window.location.href,'pos');var numberpage=ParseUrl(window.location.href,'numberpage');var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,null,null,null,offerType,customerTarget);}).attr('href','javascript:void(0);');};jQuery.fn.addMiniPDPOnPLPColorLink=function(strOrigin){OriginForMiniPDP=strOrigin;function ParseUrl(url,paramName){paramName=paramName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+paramName+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(isNullOrUndefined(results))return null;if(0==results.length)return null;return unescape(results[1]);};$j(this).click(function(e){HideNewModalBox();var pdpLink=$j(this).attr('pdpurl');var productId=ParseUrl(pdpLink,'productid');var documentId=ParseUrl(pdpLink,'documentid');var offerType=ParseUrl(pdpLink,'offertype');var customerTarget=ParseUrl(pdpLink,'customertarget');if(!isNullOrUndefined(ParseUrl(pdpLink,'prodsize'))){prodsize=ParseUrl(pdpLink,'prodsize');}
else
{prodsize='';}
if(!isNullOrUndefined(ParseUrl(pdpLink,'prodcolor'))){prodcolor=ParseUrl(pdpLink,'prodcolor');}else
{prodcolor='';}
if(isNullOrUndefined(productId)&&isNullOrUndefined(documentId)){return;}
var isCrossSell=ParseUrl(pdpLink,'cssrc');if(isNullOrUndefined(isCrossSell)){isCrossSell='0';}else{isCrossSell='1';}
var categoryid=ParseUrl(pdpLink,'categoryid');if(isNullOrUndefined(categoryid)){categoryid=0;}
var pos=ParseUrl(pdpLink,'pos');var numberpage=ParseUrl(pdpLink,'numberpage');var STValue=$j(this).parent('a').attr('stvalue');if(!isNullOrUndefined(STValue)){CrossSellVal='';setSubCookieAndCookie('M.R.Omniture','ST',STValue);}
OriginForMiniPDP=strOrigin;$j(document).openMiniPDP(productId,documentId,categoryid,pos,numberpage,isCrossSell,null,null,prodsize,prodcolor,null,offerType,customerTarget);}).attr('href','javascript:void(0);');};jQuery.fn.openMiniPDP=function(productId,documentId,categoryid,pos,numberpage,isCrossSell,forceSingle,showPDPLink,prodsize,prodcolor,lnitemid,offerType,customerTarget,previous,next){LoggingMiniPDPClickToAvail(productId);if(isNullOrUndefined(prodsize))prodsize="";if(isNullOrUndefined(prodcolor))prodcolor="";if(isNullOrUndefined(lnitemid))lnitemid="";offerTypeQueryParam='';if(!isNullOrUndefined(offerType)){offerTypeQueryParam="&offertype="+offerType;}
customerTargetQueryParam='';if(!isNullOrUndefined(customerTarget)){customerTargetQueryParam="&customertarget="+customerTarget;}
var ajaxUrl="/ProductDetail/MiniPDP.aspx?productid="+productId+"&documentid="+documentId+"&categoryid="+categoryid+"&pos="+pos+"&numberpage="+numberpage+"&isCrossSell="+isCrossSell+"&cssrc="+CrossSellVal+"&prodsize="+prodsize+"&prodcolor="+prodcolor+"&wllineitemid="+lnitemid+"&wlaction="+wlButton+offerTypeQueryParam+customerTargetQueryParam;var opacitySettings={tl:{radius:6},tr:{radius:6},bl:{radius:6},br:{radius:6},antiAlias:true,autoPad:false};var AVAIL_SEPARATOR_TEXT='  ';var DEFAULT_SIZE_DROPDOWN_VALUE='Taille ou code';function FRProductFromM2Basket(m2basketObject,CategoryName){this.Title=m2basketObject.DisplayName;this.ItemOfferId=m2basketObject.ItemOfferId;this.InternalReference=m2basketObject.InternalReference;this.SecInternalReference=m2basketObject.SecInternalReference;this.ProductId=m2basketObject.ProductId;this.DocumentId=m2basketObject.CatalogVersionId;this.CategoryId=m2basketObject.CategoryId;this.PresCode=m2basketObject.FirstLevelSku;this.SizeCode=m2basketObject.SizeCode;this.Origin="1";this.AssociatedItemId="0";this.CategoryName=CategoryName;this.Price=m2basketObject.Price;this.UnitPrice=m2basketObject.UnitPrice;this.Personalization=m2basketObject.Personalization;this.ColorText=m2basketObject.ColorText;this.SizeText=m2basketObject.SizeText;this.HasAssociatedService=m2basketObject.HasAncillaryService;this.CkgCode="0";this.CkgPrice="0";this.IsEcoPart=m2basketObject.IsEcoComplaint;this.Quantity=toFloat(m2basketObject.Quantity);this.Discount=m2basketObject.Discount;this.NoReductBrand=false;this.StrikePrice=m2basketObject.StrikePrice;this.ParentLineItemGUID="";this.LineItemGUID=generateGuid();this.Description=m2basketObject.MediaImageUrl;this.ParentCategories=prodJson.Products[0].AscCats;this.BrandLabel=m2basketObject.BrandLabel;this.VendorId=m2basketObject.VendorId;this.IsMarketPlaceProduct=m2basketObject.IsMarketPlaceProduct;if(!isNullOrUndefined(m2basketObject.VendorName)){this.VendorName=m2basketObject.VendorName;}
else{this.VendorName="";}}
function HideminiPdpBox(){$j(this).parents('.miniPdpBox').remove();urltemp=window.location.href;if(typeof BindLastSeenProducts=='function'&&$j('#LastSeenStickyLayer').length>0&&$j('#LastSeenStickyLayer').is(":visible"))
BindLastSeenProducts('true');if(urltemp.indexOf('DirectOrderForm.aspx')>-1)
window.location.href='/order_from_catalog/DirectOrderForm.aspx';}
function onMiniPdpError(XMLHttpRequest,textStatus,errorThrown){var errChmZoneContent='';try{var errorMessage=textStatus+'\n'+errorThrown+'\n';errorMessage+='pId:'+productId+' dId:'+documentId+' cId:'+categoryid+'\n';errorMessage+='UrlOriginOfMiniPDP:'+window.location.href;LogAjaxError("MiniPDPCall",errorMessage);if(XMLHttpRequest.responseText!=""){errChmZone=$j(XMLHttpRequest.responseText).find('.miniPDPChmZone');if(errChmZone!=null&&errChmZone!=undefined)
errChmZoneContent=$j(errChmZone).html();}}catch(ex){}
$j('.waiting_box').hide();var loadingError=$j('<div class="miniPdpLoadingError"><p>Un problme technique est survenu, nous vous prions de bien vouloir nous excuser. </p><p class="help_message">Merci de ractualiser votre page en cliquant sur le bouton ci-dessous.</p><a href="javascript:void(0)"></a></div>');if(errChmZoneContent!='')
loadingError=$j(errChmZoneContent);$j(loadingError).find('a').click(function(){$j(this).parents('.miniPdpLoadingError').remove();$j('.waiting_box').show();$j.ajax({type:'POST',url:ajaxUrl,data:{},dataType:"text",success:onMiniPdpSuccess,error:onMiniPdpError,cache:false,async:true,timeout:16000});});$j(loadingError).appendTo('.miniPdpBoxContent');}
function onMiniPdpSuccess(html){$j('.waiting_box').hide();var index=html.indexOf('<div class="MiniPDPAjaxContent">');var content=html.substring(index);content=content.substring(0,content.indexOf('</form>'));var intermediate=$j(content);intermediate.appendTo('.miniPdpBoxContent');intermediate.hide();try{if(((html)==null)||($j.trim(html)=='')){window.location="/default.aspx";}
else{if(!isNullOrUndefined(prodJson)&&!isNullOrUndefined(prodJson.ErrMsgs)&&!isNullOrUndefined(prodJson.ErrMsgs[0])){ReportMiniPDPTechnicalErrorsToOmniture("TE_"+productId+'_'+documentId+'_'+prodJson.ErrMsgs[0].Id);ShowErrorText('MiniPDP Product Json is null for the Product'+productId+'_'+documentId);}
else if(isNullOrUndefined(prodJson)||isNullOrUndefined(prodJson.Products)||isNullOrUndefined(prodJson.Products[0])){ReportMiniPDPProductNotFoundErrorsToOmniture("PNF_"+productId+'_'+documentId);ShowErrorText('MiniPDP Product Json is null for the Product'+productId+'_'+documentId);}
else{BindMiniPDP();setMiniPDPOmnitureTags();}}}catch(ex){ReportMiniPDPTechnicalErrorsToOmniture("Ex_"+productId+'_'+documentId+'_'+ex);ShowErrorText("Exception in MiniPDP call for the Product "+productId+'_'+documentId+', Exception Detail: '+ex.description);}}
function ShowErrorText(errorMessage){var errChmZone=$j('.MiniPDPAjaxContent').find('.miniPDPChmZone');var loadingError=$j('<div class="miniPdpLoadingError"><p>Un problme technique est survenu, nous vous prions de bien vouloir nous excuser. </p><p class="help_message">Merci de ractualiser votre page en cliquant sur le bouton ci-dessous.</p><a href="javascript:void(0)"></a></div>');$j('.MiniPDPAjaxContent').remove();if(errChmZone!=null&&errChmZone!=undefined)
loadingError=errChmZone;loadingError.find('a').click(function(){$j(this).parents('.miniPdpLoadingError').remove();$j('.waiting_box').show();$j.ajax({type:'POST',url:ajaxUrl,data:{},dataType:"text",success:onMiniPdpSuccess,error:onMiniPdpError,cache:false,async:true,timeout:16000});});loadingError.appendTo('.miniPdpBoxContent').show();LogAjaxError('MiniPDP',errorMessage);}
function ValidateMiniPDPForm(){var miniPdp=$j('.MiniPDPAjaxContent');var colorSelect=miniPdp.find('select.color_select');var sizeSelect=miniPdp.find('select.size_select');var quantityBox=miniPdp.find('.quantity_box');var atbButton=miniPdp.find('a.atb_small_disabled,a.atb_small_enabled');var atwButton=miniPdp.find('p.atw_disabled,p.atw_enabled');var mtwButton=miniPdp.find('p.mtw_disabled,p.mtw_enabled');var bubbleContent=miniPdp.find('.error_bubble .message');if(sizeSelect.attr('disabled')==true||sizeSelect.attr('disabled')=='disabled'){atbButton.attr('class','atb_small_disabled');atwButton.attr('class','atw_disabled');mtwButton.attr('class','mtw_disabled');var message=GetMessage(MiniPDPMessageFWCsts.Section,MiniPDPMessageFWCsts.NoSizeAvailable);if(isNullOrUndefined(message)){bubbleContent.html('');}else{bubbleContent.html(message.MessageText);}
return;}
if(sizeSelect.val()==-1){atbButton.attr('class','atb_small_disabled');atwButton.attr('class','atw_disabled');mtwButton.attr('class','mtw_disabled');var message=GetMessage(MiniPDPMessageFWCsts.Section,MiniPDPMessageFWCsts.NoSizeSelected);if(isNullOrUndefined(message)){bubbleContent.html('');}else{bubbleContent.html(message.MessageText);}
return;}
if(isNaN(quantityBox.val())){atbButton.attr('class','atb_small_disabled');atwButton.attr('class','atw_disabled');mtwButton.attr('class','mtw_disabled');var message=GetMessage(MiniPDPMessageFWCsts.Section,MiniPDPMessageFWCsts.InvalidQuantity);if(isNullOrUndefined(message)){bubbleContent.html('');}else{bubbleContent.html(message.MessageText);}
return;}
try{var sizes=GetM2SizeJsonByInternalRefernce(prodJson,colorSelect.val());var quantityValue=quantityBox.val();for(var i=0;i<sizes.length;i++){if(sizes[i].Id==sizeSelect.val()){if(quantityValue<1){atbButton.attr('class','atb_small_disabled');atwButton.attr('class','atw_disabled');mtwButton.attr('class','mtw_disabled');var message=GetMessage(MiniPDPMessageFWCsts.Section,MiniPDPMessageFWCsts.InvalidQuantityMin);if(isNullOrUndefined(message)){bubbleContent.html('');}else{bubbleContent.html(message.MessageText.replace('{0}',1));}
return;}else if(quantityValue>15){atbButton.attr('class','atb_small_disabled');atwButton.attr('class','atw_disabled');mtwButton.attr('class','mtw_disabled');var message=GetMessage(MiniPDPMessageFWCsts.Section,MiniPDPMessageFWCsts.InvalidQuantityMax);if(isNullOrUndefined(message)){bubbleContent.html('');}else{bubbleContent.html(message.MessageText.replace('{0}',15));}
return;}}}}catch(ex){}
atbButton.attr('class','atb_small_enabled');atwButton.attr('class','atw_enabled');mtwButton.attr('class','mtw_enabled');}
function BindMiniPDP(){var miniPdp=$j('.MiniPDPAjaxContent');miniPdp.find('a.RS24h').click(HideminiPdpBox);var qsForPDP='';var previousButton=miniPdp.find('div.previous');if(isNullOrUndefined(previous)||previous.length==0){previousButton.hide();}else{previousButton.unbind('click');previousButton.bind('click',function(){previous.find('.quick_view_button:first').trigger('click');});var url=previous.find('a.visu img.thumb, img.img-product').attr('src');previousButton.find('img').attr('src',url+'?s=72');}
var nextButton=miniPdp.find('div.next');if(isNullOrUndefined(next)||next.length==0){nextButton.hide();}else{nextButton.unbind('click');nextButton.bind('click',function(){next.find('.quick_view_button:first').trigger('click');});var url=next.find('a.visu img.thumb, img.img-product').attr('src');nextButton.find('img').attr('src',url+'?s=72');}
if(!isNullOrUndefined(pdpLinkCategoryid)){qsForPDP=qsForPDP+"&categoryid="+categoryid;}
if(!isNullOrUndefined(isAvailProdcut)&&isAvailProdcut==true){qsForPDP=qsForPDP+"&isavail=true";}
if(!isNullOrUndefined(pdpLinkpos)){qsForPDP=qsForPDP+"&pos="+pos;}
if(!isNullOrUndefined(pdpLinknumpage)){qsForPDP=qsForPDP+"&numberpage="+numberpage;}
if(!isNullOrUndefined(isSearchResultProduct)&&isSearchResultProduct==1){qsForPDP=qsForPDP+"&source="+isSearchResultProduct;}
if(!isNullOrUndefined(colorlabel)&&colorlabel!=''){qsForPDP=qsForPDP+"&colorlabel="+colorlabel;}
if(!isNullOrUndefined(genericsizeCode)&&genericsizeCode!=''){qsForPDP=qsForPDP+"&genericsize="+genericsizeCode;}
var vt=ParseQueryString('virtualtool')
if((vt!=null||vt!=undefined)&&vt.indexOf('module_ampm')!=-1)
OriginForMiniPDP="Module AMPM";var basePdpUrl=miniPdp.find('.hidPdpPath').val();if(isNullOrUndefined(showPDPLink)||showPDPLink){miniPdp.find('.main_picture a').attr('href',sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=picture&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal+"&secintref="+prodsize+"&prodcolor="+prodcolor));if(prodAltText!=null){miniPdp.find('.main_picture a img').attr('alt',$j.trim(prodAltText));}
miniPdp.find('.main_picture a').click(function(){if(typeof(setMiniPDPMultiVariateandDimesnsionCookie)=='function'){setMiniPDPMultiVariateandDimesnsionCookie();}
return true;});miniPdp.find('.product_info_bottom a.go_to_pdp').attr('href',sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=visuel&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal+"&secintref="+prodsize+"&prodcolor="+prodcolor));miniPdp.find('.product_info_bottom a.go_to_pdp').click(function(){if(typeof(setMiniPDPMultiVariateandDimesnsionCookie)=='function'){setMiniPDPMultiVariateandDimesnsionCookie();}
return true;});miniPdp.find('.product_info_block_text a.go_to_pdp').attr('href',sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=detail&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal+"&secintref="+prodsize+"&prodcolor="+prodcolor));miniPdp.find('.product_info_block_text a.go_to_pdp').click(function(){if(typeof(setMiniPDPMultiVariateandDimesnsionCookie)=='function'){setMiniPDPMultiVariateandDimesnsionCookie();}
return true;});}else{miniPdp.find('.product_info_block_text a.go_to_pdp').hide();miniPdp.find('.product_info_bottom a.go_to_pdp').hide();miniPdp.find('.main_picture a').attr('href','javascript:void(0);');}
var atbButton=miniPdp.find('a.atb_small_disabled,a.atb_small_enabled');var atwButton=miniPdp.find('p.atw_disabled,p.atw_enabled');var mtwButton=miniPdp.find('p.mtw_disabled,p.mtw_enabled');atbButton.hover(function(){ValidateMiniPDPForm();if($j(this).attr('class')=='atb_small_disabled'){miniPdp.find('.error_bubble').css('bottom','72px');miniPdp.find('.error_bubble').show();}},function(){miniPdp.find('.error_bubble').hide();});atwButton.hover(function(){ValidateMiniPDPForm();if($j(this).attr('class')=='atw_disabled'){miniPdp.find('.error_bubble').css('bottom','32px');miniPdp.find('.error_bubble').show();}},function(){miniPdp.find('.error_bubble').hide();});mtwButton.hover(function(){ValidateMiniPDPForm();if($j(this).attr('class')=='mtw_disabled'){miniPdp.find('.error_bubble').css('bottom','32px');miniPdp.find('.error_bubble').show();}},function(){miniPdp.find('.error_bubble').hide();});atbButton.click(function(){if($j(this).attr('class')=='atb_small_enabled'){var miniPdp=$j('.MiniPDPAjaxContent');var productArray=Array();var selectedColor=miniPdp.find('select.color_select').val();var selectedSize=miniPdp.find('select.size_select').val();var colorJson=GetM2ColorJsonByInternalRefernce(prodJson,selectedColor);var sizeJson=GetM2SizeObjectFromM2Color(colorJson,selectedSize);var quantity=miniPdp.find('.quantity_box').val();if(MiniPDPOmnitureJson!=null){var CategoryName=MiniPDPOmnitureJson.categoryLevel1;}
try{var m2basketobj=GetM2BasketJSONFromOffer(prodJson,sizeJson.Ofrs[0].ItemOfferId,quantity,'');var data=new FRProductObjectFromM2BasketObject(m2basketobj);if(data!=null){data.Description=miniPdp.find('.pictures_block ul li:first').attr('src');productArray[0]=data;var atbObject=new RedcatsOT.ATB("MiniPDP");atbObject.OnIntermediateCallBack=function(){$j('.miniPdpBox').remove();}
var sPath=window.location.pathname;var sPage=sPath.substring(sPath.lastIndexOf('/')+1);if(sPage=='Basket.aspx'||sPage=='BasketV2.aspx'){data.AvailablePaidServices=null;atbObject.OnSuccessCallBack=function(){UpdateBasketCount();showModal(defaultContent);GoToBasket();}}
atbObject.DoATB(productArray);}}catch(ex){alert(ex);}}});atwButton.click(function(){if(bar.height()!=140){delayedStickyDown=true;}else{delayedStickyDown=false;}
tabToActivate=$j('.preferes');showTab(tabToActivate);if($j(this).attr('class')=='atw_enabled'){if(location.protocol=="http:"){bottomSticky.find("."+tabToActivate.attr('name')).html(labelIdentification).show();OpenCenteredPopUp("/Account/IdentifyAcctPopup.aspx?ReturnUrl=~/Wishlist/WishlistRedirectpage.aspx",1000,600);}
else{$j(document).ATWL($j(this),false);}}});jQuery.fn.ATWL=function(btnATWL,bUpdate){if($j(btnATWL).attr('class')=='atw_enabled'){var miniPdp=$j('.MiniPDPAjaxContent');var productArray=Array();var selectedColor=miniPdp.find('select.color_select').val();var selectedSize=miniPdp.find('select.size_select').val();var quantity=miniPdp.find('.quantity_box').val();var colorJson=GetM2ColorJsonByInternalRefernce(prodJson,selectedColor);var sizeJson=GetM2SizeObjectFromM2Color(colorJson,selectedSize);if(MiniPDPOmnitureJson!=null){var CategoryName=MiniPDPOmnitureJson.categoryLevel1;}
try{var m2basketobj=GetM2BasketJSONFromOffer(prodJson,sizeJson.Ofrs[0].ItemOfferId,quantity,'');var data=new FRProductFromM2Basket(m2basketobj,CategoryName);if(data!=null){data.Description=miniPdp.find('.pictures_block ul li:first').attr('src');productArray[0]=data;var sPath=window.location.pathname;var sPage=sPath.substring(sPath.lastIndexOf('/')+1);if(sPage=='WishList.aspx'){data.HasAssociatedService=false;}
var options={"mode":c_addMode,"forceCallingServices":data.HasAssociatedService,"callPushProduct":true};AddToWishListCallingPage=EnumAddToWishListCallingPage.MiniPDP;AddToWishList(productArray,options,null,null,null,null,null);}}catch(ex){}}};mtwButton.click(function(){if($j(this).attr('class')=='mtw_enabled'){var miniPdp=$j('.MiniPDPAjaxContent');var productArray=Array();var selectedColor=miniPdp.find('select.color_select').val();var selectedSize=miniPdp.find('select.size_select').val();var quantity=miniPdp.find('.quantity_box').val();var colorJson=GetM2ColorJsonByInternalRefernce(prodJson,selectedColor);var sizeJson=GetM2SizeObjectFromM2Color(colorJson,selectedSize);if(MiniPDPOmnitureJson!=null){var CategoryName=MiniPDPOmnitureJson.categoryLevel1;}
try{var m2basketobj=GetM2BasketJSONFromOffer(prodJson,sizeJson.Ofrs[0].ItemOfferId,quantity,'');var data=new FRProductFromM2Basket(m2basketobj,CategoryName);if(data!=null){data.Description=miniPdp.find('.pictures_block ul li:first').attr('src');productArray[0]=data;var sPath=window.location.pathname;var sPage=sPath.substring(sPath.lastIndexOf('/')+1);if(sPage=='WishList.aspx'){data.HasAssociatedService=false;}
var options={"mode":c_updateMode,"forceCallingServices":data.HasAssociatedService,"callPushProduct":false};AddToWishListCallingPage=EnumAddToWishListCallingPage.MiniPDP;AddToWishList(productArray,options,null,null,null,lineItemID,null);}}catch(ex){}}});miniPdp.find('.quantity_box').bind('change',function(){ValidateMiniPDPForm();});if(prodJson.Products[0].VsSty!="seduction"){miniPdp.find('a.size_chart').hide();}
if(DisableSizeChart=="true"){miniPdp.find('a.size_chart').hide();}
var colors=GetM2ColorJsonByInternalRefernce(prodJson);if(colors.length!=0){var colorSelect=miniPdp.find('select.color_select');colorSelect.attr('disabled','');var option;var isExactClrMatch=false;for(var i=0;i<colors.length;i++){option=$j('<option></option>');option.attr('value',colors[i].Id);if(prodcolor==colors[i].Id){colorindex=colors[i].Id;isExactClrMatch=true;prodsizeCode=null;}
else if(colorlabel!=''&&!isNullOrUndefined(colors[i].MscCds)){for(var miscIndex=0;miscIndex<colors[i].MscCds.length;miscIndex++){if(colors[i].MscCds[miscIndex].BTy.Id=="GenericLabel"){if(colors[i].MscCds[miscIndex].Des==colorlabel){colorindex=colors[i].AltId;isExactClrMatch=true;}
break;}}}
option.html(colors[i].DN);option.appendTo(colorSelect);}
if(colors.length==1){colorSelect.hide();var input=miniPdp.find('input.color_select');if(!JSONisNullOrUndefinedOrEmpty(colors[0].DN)){input.show();}
input.attr('readonly',true);input.val(HtmlDecode(colors[0].DN));}
if(colorindex!=''){colorSelect.val(colorindex);colorindex='';}}
colorSelect.bind('change keyup',function(){var selectedColor=$j(this).val();var miniPdp=$j('.MiniPDPAjaxContent');var colorJson=GetM2ColorJsonByInternalRefernce(prodJson,selectedColor);if(isNullOrUndefined(showPDPLink)||showPDPLink){updatePDPLinkWithSelectedColorSize(colorJson[0].Id,null);}
if(!JSONisNullOrUndefinedOrEmpty(colorJson[0].Imgs)){var colorPictureJson=Array();var myImg;for(img in colorJson[0].Imgs){if(colorJson[0].Imgs[img].Id=="mediumPict"||colorJson[0].Imgs[img].Id=="smallPict"){myImg=null;for(tmpImg in colorPictureJson){if(colorPictureJson[tmpImg].Order==colorJson[0].Imgs[img].Ord){myImg=colorPictureJson[tmpImg];}}
if(myImg==null){myImg={Order:colorJson[0].Imgs[img].Ord};colorPictureJson[colorPictureJson.length]=myImg;}
if(colorJson[0].Imgs[img].Id=="mediumPict"){myImg.Small=colorJson[0].Imgs[img].FlNm;}else if(colorJson[0].Imgs[img].Id=="smallPict"){myImg.Big=colorJson[0].Imgs[img].FlNm;}}else if(colorJson[0].Imgs[img].Id=="firstLevelSmallOtherView"||colorJson[0].Imgs[img].Id=="firstLevelThumbOtherView"){myImg=null;for(tmpImg in colorPictureJson){if(colorPictureJson[tmpImg].Order==(colorJson[0].Imgs[img].Ord+1)){myImg=colorPictureJson[tmpImg];}}
if(myImg==null){myImg={Order:(colorJson[0].Imgs[img].Ord+1)};colorPictureJson[colorPictureJson.length]=myImg;}
if(colorJson[0].Imgs[img].Id=="firstLevelThumbOtherView"){myImg.Small=colorJson[0].Imgs[img].FlNm;}else if(colorJson[0].Imgs[img].Id=="firstLevelSmallOtherView"){myImg.Big=colorJson[0].Imgs[img].FlNm;}}}
var basePictureJson=Array();var myImg;for(img in prodJson.Products[0].Imgs){if(prodJson.Products[0].Imgs[img].Id=="smallOtherView"||prodJson.Products[0].Imgs[img].Id=="bigOtherView"){myImg=null;for(tmpImg in basePictureJson){if(basePictureJson[tmpImg].Order==prodJson.Products[0].Imgs[img].Ord){myImg=basePictureJson[tmpImg];}}
if(myImg==null){myImg={Order:prodJson.Products[0].Imgs[img].Ord};basePictureJson[basePictureJson.length]=myImg;}
if(prodJson.Products[0].Imgs[img].Id=="smallOtherView"){myImg.Small=prodJson.Products[0].Imgs[img].FlNm;}else if(prodJson.Products[0].Imgs[img].Id=="bigOtherView"){myImg.Big=prodJson.Products[0].Imgs[img].FlNm;}}}
var ulAddPic=miniPdp.find('.pictures_block ul');ulAddPic.empty();var pictureJsonCount=5;if(IsVMProduct)
pictureJsonCount=4;for(var i=0;i<colorPictureJson.length&&i<pictureJsonCount;i++){var li=$j('<li><img /></li>');try{if(!isNullOrUndefined(colorPictureJson[i].Small)){li.find('img').attr('src',GetMediaImagePath3Level(colorPictureJson[i].Small));}else{li.find('img').attr('src',GetMediaImagePath3Level(colorPictureJson[i].Big));}
li.attr('src',GetMediaImagePath3Level(colorPictureJson[i].Big));li.appendTo(ulAddPic);}catch(ex){}}
if(colorPictureJson.length<pictureJsonCount){var i=0;while(miniPdp.find('.pictures_block ul li').length<pictureJsonCount&&i<basePictureJson.length){if(miniPdp.find('.pictures_block ul li img[src="'+GetMediaImagePath3Level(basePictureJson[i].Small)+'"]').length==0){var li=$j('<li><img /></li>');try{if(!isNullOrUndefined(basePictureJson[i].Big)){if(!isNullOrUndefined(basePictureJson[i].Small)){li.find('img').attr('src',GetMediaImagePath3Level(basePictureJson[i].Small));}else{li.find('img').attr('src',GetMediaImagePath3Level(basePictureJson[i].Big));}
li.attr('src',GetMediaImagePath3Level(basePictureJson[i].Big));li.appendTo(ulAddPic);}}catch(ex){}}
i++;}}
if(IsVMProduct){var li=$j('<li class="additional_pictos"><a href="#" class="look" target="_blank" /></li>');try{li.find('a').attr('href',LookAtMeVMURLLogo);li.appendTo(ulAddPic);}catch(ex){}}
ulAddPic.find('li.additional_pictos').click(function(){try{if(isNullOrUndefined(s))return;if(s.events!=null){s.events="";}
s.events="event45";s.tl(false,'o',"MiniPDPVMLogoClick");}
catch(e){}})
ulAddPic.find('li').hover(function(){$j(this).parent('ul').find('li.selected').removeClass('selected');$j(this).addClass('selected');$j('.MiniPDPAjaxContent .pictures_block .main_picture img').attr('src',$j(this).attr('src'));},function(){});ulAddPic.find('li:first').addClass('first').addClass('selected');$j('.MiniPDPAjaxContent .pictures_block .main_picture img').attr('src',ulAddPic.find('li:first').attr('src'));if(prodAltText!=null){var indexInt=1;$j('.pictures_block ul li').each(function(){var newText='0'+indexInt+' '+$j.trim(prodAltText);$j(this).find('img').attr('alt',newText);indexInt+=1;})}}
var sizes=GetM2SizeJsonByInternalRefernce(prodJson,selectedColor);if(sizes.length!=0){if(sizes.length==1){miniPdp.find('a.size_chart').hide()}else{if(DisableSizeChart==true){miniPdp.find('a.size_chart').hide()}else{miniPdp.find('a.size_chart').show()}}
var sizeSelect=miniPdp.find('select.size_select');var oldSelectValue=sizeSelect.val();if(isNullOrUndefined(oldSelectValue)){oldSelectValue='-1';}
sizeSelect.empty();sizeSelect.attr('disabled','');sizeSelect.hide();var option;option=$j('<option></option>');option.attr('value','-1');option.html(DEFAULT_SIZE_DROPDOWN_VALUE);option.appendTo(sizeSelect);var sizecode='';var selindex=0;var availSizesNb=0;var selectedSizeIndex=0;for(var i=0;i<sizes.length;i++){if(sizes[i].Ofrs[0].Stk.AvSt!=0){option=$j('<option></option>');option.attr('value',sizes[i].Id);if(prodsize!=''&&prodsize==sizes[i].Id){sizecode=sizes[i].Id;selindex=i;}
if(genericsizeCode!=''&&!isNullOrUndefined(sizes[i].MscCds)){for(var miscIndex=0;miscIndex<sizes[i].MscCds.length;miscIndex++){if(sizes[i].MscCds[miscIndex].BTy.Id=="GenericSizeCode"){if(sizes[i].MscCds[miscIndex].Des.toLowerCase()==genericsizeCode.toLowerCase()){sizecode=sizes[i].Id;selindex=i;}
break;}}}
option.html(sizes[i].DN+AVAIL_SEPARATOR_TEXT+GetDeliveryInfoText(sizes[i].Ofrs[0].Stk.AvSt,sizes[i].Ofrs[0].Stk.FsAvDt,sizes[i].Ofrs[0].Stk.FsBkOrdDt));option.appendTo(sizeSelect);selectedSizeIndex=i;availSizesNb++;}}
if(sizecode!=''){prodsize='';if(availSizesNb>1)
selectedSizeIndex=selindex+1;else
selectedSizeIndex=selindex;oldSelectValue=sizecode;}
miniPdp.find('.size_box').show();var inputColor=miniPdp.find('input.color_select');if(availSizesNb==0){sizeSelect.show();sizeSelect.attr('disabled','disabled');var input=miniPdp.find('input.size_select');input.hide();sizeSelect.val(-1);}else if(availSizesNb==1){sizeSelect.hide();var input=miniPdp.find('input.size_select');input.show();input.attr('readonly',true);if(isNullOrUndefined(sizes[selectedSizeIndex].DN)){input.val(GetDeliveryInfoText(sizes[selectedSizeIndex].Ofrs[0].Stk.AvSt,sizes[selectedSizeIndex].Ofrs[0].Stk.FsAvDt,sizes[selectedSizeIndex].Ofrs[0].Stk.FsBkOrdDt));}else{input.val(HtmlDecode(sizes[selectedSizeIndex].DN)+AVAIL_SEPARATOR_TEXT+GetDeliveryInfoText(sizes[selectedSizeIndex].Ofrs[0].Stk.AvSt,sizes[selectedSizeIndex].Ofrs[0].Stk.FsAvDt,sizes[selectedSizeIndex].Ofrs[0].Stk.FsBkOrdDt));}
var sizeLabel=miniPdp.find('.taille_text');if(!isNullOrUndefined(sizeLabel))
sizeLabel.hide();sizeSelect.val(sizes[selectedSizeIndex].Id);try{if(sizes[selectedSizeIndex].MscCds[0].BTy.Id=='HighSizeCode'&&sizes[selectedSizeIndex].MscCds[0].Des=='99999'&&(inputColor.val()==''||inputColor.val()=='-')){miniPdp.find('.size_box').hide();}}
catch(e){}}else{sizeSelect.show();var input=miniPdp.find('input.size_select');input.hide();if(sizeSelect.find('option[value='+oldSelectValue+']').length!=0){sizeSelect.val(oldSelectValue);}else{sizeSelect.val(-1);}
var sizeLabel=miniPdp.find('.taille_text');if(!isNullOrUndefined(sizeLabel))
sizeLabel.show();}
sizeSelect.trigger('change');}
ValidateMiniPDPForm();});var previousVendorId=-1;miniPdp.find('select.size_select').bind('change keyup',function(){var gencolor;var genSize;var miniPdp=$j('.MiniPDPAjaxContent');var select=$j(this);var quantityField=miniPdp.find('.quantity_box');if(select.val()!=-1){var sizes=GetM2SizeJsonByInternalRefernce(prodJson,miniPdp.find('select.color_select').val());var selectedSizeJson;var categoryid=ParseQueryString('categoryid');for(var i=0;i<sizes.length;i++){if(sizes[i].Id==select.val()){selectedSizeJson=sizes[i];if(selectedSizeJson.Ofrs[0].ItemOfferId!=null&&selectedSizeJson.Ofrs[0].Stk!=null&&selectedSizeJson.Ofrs[0].Stk.AvSt==2&&selectedSizeJson.Ofrs[0].IsMktPr==false){var EmailId=GetSubCookieValue("M.R.Basket","UserID");if(EmailId!=null){$j('input.RSACustomeremailAddress').val(EmailId);}
setItemofferid(selectedSizeJson.Ofrs[0].ItemOfferId,categoryid);$j('div.sku_selection a.RS24h').css('display','block');}
else{$j('div.sku_selection a.RS24h').css('display','none');}
if(isNullOrUndefined(showPDPLink)||showPDPLink){updatePDPLinkWithSelectedColorSize(null,sizes[i].Id);}
quantityField.attr('disabled','');if(quantityField.val()=='0'){quantityField.val(1);}}}
var stockAlt=miniPdp.find('.stock_alert');if((stockAlt!=null||stockAlt!=undefined)&&selectedSizeJson.Ofrs[0].Stk.StAltQty!='0'&&selectedSizeJson.Ofrs[0].Stk.AvSt==1){stockAlt.html(stockAlert.replace(deliveryDelimiter.toLowerCase(),selectedSizeJson.Ofrs[0].Stk.StAltQty));stockAlt.show();}
else
stockAlt.hide();var priceZone=miniPdp.find('.price_display');if(selectedSizeJson.Dis==0){priceZone.find('span.discount').html('');priceZone.find('span.strike_price').html('');}else{priceZone.find('span.discount').html('<span>-'+formatDiscount(selectedSizeJson.Dis)+'%</span>');priceZone.find('span.strike_price').html(formatPrice(selectedSizeJson.PrLiPr)+' ');}
priceZone.find('div.price').html('<p><strong>'+formatPrice(selectedSizeJson.Ofrs[0].LiPr)+' </strong></p>');if(selectedSizeJson.Ofrs[0].EnvCmpl.FCpl==true){priceZone.find('p.eco_part').html('+'+formatPrice(selectedSizeJson.Ofrs[0].EnvCmpl.CplFe)+'  d\'&eacute;co-participation');}else{priceZone.find('p.eco_part').html('');}
priceZone.find('p.price_link').html('');priceZone.find('p.price_link').hide();if(isNullOrUndefined(showPDPLink)||showPDPLink){for(var i=0;i<selectedSizeJson.Ofrs[0].PrmlPrTyps.length;i++){if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DisPrmlPg==true){if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="SmartPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_fute">PRIX FUTE</a>');}else if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="MinimumPrice"){priceZone.find('p.price_link').show();if(miniPdp.find('.hidShoppingPrix').val().toLowerCase()!="on"){priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_mini.aspx\',200,798,778);" class="prix_mini">PRIX MINI</a>');}else{priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_shopping.aspx\',200,798,778);" class="shopping_prix">Shopping <span>prix</span></a>');}}else if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="RedPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_rouge.aspx\',200,798,778);" class="prix_rouge">PRIX ROUGE</a>');}else if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="GreenPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_vert.aspx\',200,798,778);" class="prix_vert">PRIX VERT</a>');}}}}else{for(var i=0;i<selectedSizeJson.Ofrs[0].PrmlPrTyps.length;i++){if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DisPrmlPg==true){if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="SmartPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_fute">PRIX FUTE</a>');}else if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="MinimumPrice"){priceZone.find('p.price_link').show();if(miniPdp.find('.hidShoppingPrix').val().toLowerCase()!="on"){priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_mini">PRIX MINI</a>');}else{priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="shopping_prix">Shopping <span>prix</span></a>');}}else if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="RedPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_rouge">PRIX ROUGE</a>');}else if(selectedSizeJson.Ofrs[0].PrmlPrTyps[i].DN=="GreenPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_vert">PRIX VERT</a>');}}}}
if(selectedSizeJson.Ofrs[0].VdrInfo.Id!=0){var VendorURL='/Vendor/VendorDetails.aspx?vid='+selectedSizeJson.Ofrs[0].VdrInfo.Id;miniPdp.find('.vendor_display a').attr('href','javascript:OpenCenteredPopUpNoScrolls(\''+VendorURL+'\', 510, 440);');}else{miniPdp.find('.vendor_display a').attr('href','javascript:void(0);');}
miniPdp.find('.vendor_display a span').html(selectedSizeJson.Ofrs[0].VdrInfo.VName);miniPdp.find('.vendor_display').show();if(previousVendorId!=selectedSizeJson.Ofrs[0].VdrInfo.Id){try{setViewOtherVendorOmnitureTags(selectedSizeJson.Ofrs[0].VdrInfo.Id);}catch(ex){}
previousVendorId=selectedSizeJson.Ofrs[0].VdrInfo.Id;}
if(isNullOrUndefined(showPDPLink)||showPDPLink){if(selectedSizeJson.OfrCnt>1){var soldBy=miniPdp.find('.AlsoSoldBy');soldBy.unbind('click');soldBy.bind('click',function(e){e.preventDefault();e.stopPropagation();try{setViewOtherVendorOmnitureTags();}catch(ex){}
var currentLink=$j(this);var func=function(){window.location.href=currentLink.attr('href');}
setTimeout(func,1000);});if(selectedSizeJson.OfrCnt>2){soldBy.html('Vendu aussi par '+(selectedSizeJson.OfrCnt-1)+' autre vendeurs  partir de <span>'+formatPrice(selectedSizeJson.Ofrs[1].LiPr)+' </span>');}else{soldBy.html('Vendu aussi par un autre vendeur  <span>'+formatPrice(selectedSizeJson.Ofrs[1].LiPr)+' </span>');}
soldBy.show();}else{miniPdp.find('.AlsoSoldBy').hide();}}else{miniPdp.find('.AlsoSoldBy').hide();}}else{miniPdp.find('.vendor_display').hide();miniPdp.find('.AlsoSoldBy').hide();quantityField.attr('disabled','disabled');quantityField.val('1');var stockAlt=miniPdp.find('.stock_alert');stockAlt.hide();var priceZone=miniPdp.find('.price_display');if(prodJson.Products[0].Prcs.DiMx==0){priceZone.find('span.discount').html('');priceZone.find('span.strike_price').html('');if(prodJson.Products[0].Prcs.PrLiPrMi!=0){if(prodJson.Products[0].Prcs.PrLiPrMi!=prodJson.Products[0].Prcs.PrLiPrMx){priceZone.find('div.price').html('<p>&agrave; partir de</p><p><strong>'+formatPrice(prodJson.Products[0].Prcs.PrLiPrMi)+' </strong></p>');}else{priceZone.find('div.price').html('<p><strong>'+formatPrice(prodJson.Products[0].Prcs.PrLiPrMi)+' </strong></p>');}}else{if(prodJson.Products[0].Prcs.LiPrMi!=prodJson.Products[0].Prcs.LiPrMx){priceZone.find('div.price').html('<p>&agrave; partir de</p><p><strong>'+formatPrice(prodJson.Products[0].Prcs.LiPrMi)+' </strong></p>');}else{priceZone.find('div.price').html('<p><strong>'+formatPrice(prodJson.Products[0].Prcs.LiPrMi)+' </strong></p>');}}}else{if(prodJson.Products[0].Prcs.DiMi!=prodJson.Products[0].Prcs.DiMx){priceZone.find('span.discount').html('jusqu\' <span>-'+formatDiscount(prodJson.Products[0].Prcs.DiMx)+'%</span>');}else{priceZone.find('span.discount').html('<span>-'+formatDiscount(prodJson.Products[0].Prcs.DiMx)+'%</span>');}
priceZone.find('span.strike_price').html(formatPrice(prodJson.Products[0].Prcs.PrLiPrMi)+' ');if(prodJson.Products[0].Prcs.LiPrMi!=prodJson.Products[0].Prcs.LiPrMx){priceZone.find('div.price').html('<p>&agrave; partir de</p><p><strong>'+formatPrice(prodJson.Products[0].Prcs.LiPrMi)+' </strong></p>');}else{priceZone.find('div.price').html('<p><strong>'+formatPrice(prodJson.Products[0].Prcs.LiPrMi)+' </strong></p>');}}
if(!isNullOrUndefined(prodJson.Products[0].EnvCmpl)&&prodJson.Products[0].EnvCmpl.FCpl==true){priceZone.find('p.eco_part').html('+'+formatPrice(prodJson.Products[0].EnvCmpl.MnCplFe)+'  d\'&eacute;co-participation');}else{priceZone.find('p.eco_part').html('');}
priceZone.find('p.price_link').html('');priceZone.find('p.price_link').hide();try{if(isNullOrUndefined(showPDPLink)||showPDPLink){for(var i=0;i<prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps.length;i++){if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DisPrmlPg==true){if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="SmartPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_fute">PRIX FUTE</a>');}else if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="MinimumPrice"){priceZone.find('p.price_link').show();if(miniPdp.find('.hidShoppingPrix').val().toLowerCase()!="on"){priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_mini.aspx\',200,798,778);" class="prix_mini">PRIX MINI</a>');}else{priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_shopping.aspx\',200,798,778);" class="shopping_prix">Shopping <span>prix</span></a>');}}else if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="RedPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_rouge.aspx\',200,798,778);" class="prix_rouge">PRIX ROUGE</a>');}else if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="GreenPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:popUp(\'/ProductDetail/pop-prix_vert.aspx\',200,798,778);" class="prix_vert">PRIX VERT</a>');}}}}else{for(var i=0;i<prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps.length;i++){if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DisPrmlPg==true){if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="SmartPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_fute">PRIX FUTE</a>');}else if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="MinimumPrice"){priceZone.find('p.price_link').show();if(miniPdp.find('.hidShoppingPrix').val().toLowerCase()!="on"){priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_mini">PRIX MINI</a>');}else{priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="shopping_prix">Shopping <span>prix</span></a>');}}else if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="RedPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_rouge">PRIX ROUGE</a>');}else if(prodJson.Products[0].Vrnts[0].Vrnts[0].Ofrs[0].PrmlPrTyps[i].DN=="GreenPrice"){priceZone.find('p.price_link').show();priceZone.find('p.price_link').html('<a href="javascript:void(0);" class="prix_vert">PRIX VERT</a>');}}}}}catch(ex){}}
ValidateMiniPDPForm();});colorSelect.trigger('change');miniPdp.show();var additionlvwimage='';for(img in prodJson.Products[0].Vrnts[0].Imgs){if(prodJson.Products[0].Vrnts[0].Imgs[img].Id=="mediumPict"){additionlvwimage=prodJson.Products[0].Vrnts[0].Imgs[img].FlNm;break;}}
documentId=prodJson.Products[0].CatVerId;if(isNullOrUndefined(offerType))offerType="";if(isNullOrUndefined(customerTarget))customerTarget="";setStickyBarCookie(productId,documentId,additionlvwimage,'PVPR',10,offerType,customerTarget)
if(($j('.product_detail_page').length>0||$j('.mpdp_content').length>0)){if($j('#LastSeenStickyLayer').length>0&&$j('#LastSeenStickyLayer').is(":visible")){}
setCookie("pdpvisited","1");}}
$j('.miniPdpBox').remove();var miniPdpBox=$j('<div class="miniPdpBox"><div class="miniPdpBoxOpacity"></div><div class="miniPdpBoxBorder"></div><div class="miniPdpBoxContent"><div class="waiting_box"><img src="//media.laredoute.fr/images/common/ajax-loader.gif" class="loader" /><p>Page en cours de chargement.</p><p>Veuillez patienter.</p></div></div><a href="javascript:void(0);" class="close">Fermer</a></div>');miniPdpBox.find('a.close').click(HideminiPdpBox);var scrollTop=$j(window).scrollTop();scrollTop+=($j(window).height()-470)/2;var leftPos=($j(window).width()-720)/2;miniPdpBox.css({top:scrollTop+'px',left:leftPos+'px',display:'none'});miniPdpBox.appendTo($j('body'));miniPdpBox.bgiframe();miniPdpBox.fadeIn('slow');$j.ajax({type:'GET',url:ajaxUrl,data:{},dataType:"text",success:onMiniPdpSuccess,error:onMiniPdpError,cache:true,async:setAsyncFalseForFF3x(),timeout:16000});};function setAsyncFalseForFF3x(){var ver=true;var ua=$j.browser;if(ua.mozilla&&ua.version.slice(0,3)=="1.9"){ver=false;}
return ver;}
function OpenSizePopUp(id){var xPos=(screen.width-650)/2;var yPos=(screen.height-500)/2;window.open("http://www.laredoute.fr/StaticPage/BlankContentPage.aspx?pagename=guide_tailles&category="+id,'',"menubar=yes,status=no,width=650,height=500,scrollbars=yes,resizable=yes,left="+xPos+",top="+yPos);}
function setMiniPDPOmnitureTags(){try{if(isNullOrUndefined(s))return;if(s.eVar29!=null){s.eVar29="";}
if(s.eVar12!=null){s.eVar12="";}
if(s.eVar31!=null){s.eVar31="";}
if(s.eVar54!=null){s.eVar54="";}
if(s.eVar32!=null){s.eVar32="";}
if(s.eVar33!=null){s.eVar33="";}
if(s.eVar34!=null){s.eVar34="";}
if(s.prop12!=null){s.prop12="";}
if(s.eVar7!=null){s.eVar7="";}
if(s.eVar10!=null){s.eVar10="";}
if(s.pageType!=null){s.pageType="";}
if(s.prop49!=null){s.prop49="";}
if(s.prop48!=null){s.prop48="";}
if(s.prop23!=null){s.prop23="";}
if(s.products!=null){s.products="";}
if(s.events!=null){s.events="";}
if(s.prop6!=null){s.prop6="";}
if(s.prop7!=null){s.prop7="";}
if(s.prop8!=null){s.prop8="";}
if(s.prop9!=null){s.prop9="";}
if(s.prop31!=null){s.prop31="";}
if(s.prop54!=null){s.prop54="";}
if(s.prop32!=null){s.prop32="";}
if(s.prop33!=null){s.prop33="";}
if(s.prop34!=null){s.prop34="";}
if(s.prop35!=null){s.prop35="";}
if(s.prop37!=null){s.prop37="";}
if(s.prop55!=null){s.prop55="";}
if(MiniPDPOmnitureJson!=null){s.prop6=MiniPDPOmnitureJson.categoryLevel1;s.prop7=MiniPDPOmnitureJson.categoryLevel2;s.prop8=MiniPDPOmnitureJson.categoryLevel3;s.prop9=MiniPDPOmnitureJson.categoryLevel4;s.prop55=MiniPDPOmnitureJson.vendorID;}
s.prop12=(MiniPDPOmnitureJson!=null)?MiniPDPOmnitureJson.shoppingTool:'';s.products=MiniPDPOmnitureJson.productString+"|eVar41=MiniPDP:"+OriginForMiniPDP;var virtualTool=ParseQueryString('virtualtool');if((virtualTool!=null||virtualTool!=undefined)&&virtualTool.indexOf('module_ampm')!=-1)
s.products=MiniPDPOmnitureJson.productString+"|eVar41=MiniPDP:Module AMPM";else
s.products=MiniPDPOmnitureJson.productString+"|eVar41=MiniPDP:"+OriginForMiniPDP;if((virtualTool!=null||virtualTool!=undefined)){s.eVar29=virtualTool;}
SetMiniPDPExternalCampaignTags();if(IsVMProduct)
s.events=MiniPDPOmnitureJson.miniPDPEvents+",event43";else
s.events=MiniPDPOmnitureJson.miniPDPEvents;if(OriginForMiniPDP=='IPAD')
s.pageName="FR:RE:IPAD:PDT:Mini fiche produit";else
s.pageName="FR:RE:PDT:Mini fiche produit";s.channel="PDT";s.tl(false,'o',"FRMiniPDP");OriginForMiniPDP=PDPCrossSellOrigin;}
catch(e){}}
function ReportMiniPDPTechnicalErrorsToOmniture(linkName){try{if(isNullOrUndefined(s))return;var callingPage;var callFrom;if(s.prop48!=null){s.prop48="";}
if(s.prop49!=null){s.prop49="";}
if(s.events!=null){s.events="";}
s.linkTrackVars="prop47,prop48,prop49";s.prop1="FR";s.prop2="Redcats FR";s.prop3="LaRedoute";s.prop4="";s.prop5="LaRedoute FR";s.eVar1="FR";s.eVar2="Redcats FR";s.eVar3="LaRedoute";s.eVar4="";s.eVar5="LaRedoute FR";s.channel="ERREUR";s.pageName="FR:RE:ERREUR:Page inaccessible";s.pageType="TechnicalError";var currentURL=window.location.protocol+"//"+window.location.host+'/ProductDetail/MiniPDP.aspx?'+linkName;s.prop47=window.location.href;s.prop48=currentURL;s.prop49='TechnicalError';SetMiniPDPExternalCampaignTags();hpeventscookieval=GetCookie("OEvent1");if(hpeventscookieval!=null&&hpeventscookieval!=""){s.events=hpeventscookieval;}
DeleteCookie("OEvent1");custNmbrCookieVal=GetSubCookieValue('M.R.User','CustNmbr');if(custNmbrCookieVal!=null&&custNmbrCookieVal!=""){s.prop10=custNmbrCookieVal;}
s.tl(false,'o',linkName);}
catch(e){}}
function ReportMiniPDPProductNotFoundErrorsToOmniture(linkName){try{if(isNullOrUndefined(s))return;var callingPage;var callFrom;if(s.prop48!=null){s.prop48="";}
if(s.prop49!=null){s.prop49="";}
if(s.events!=null){s.events="";}
s.linkTrackVars="prop47,prop48,prop49";s.prop1="FR";s.prop2="Redcats FR";s.prop3="LaRedoute";s.prop4="";s.prop5="LaRedoute FR";s.eVar1="FR";s.eVar2="Redcats FR";s.eVar3="LaRedoute";s.eVar4="";s.eVar5="LaRedoute FR";s.channel="DISPO_PDT";s.pageName="FR:RE:DISPO_PDT:Article non disponible";var currentURL=window.location.protocol+"//"+window.location.host+'/ProductDetail/MiniPDP.aspx?'+linkName;s.prop47=window.location.href;s.prop48=currentURL;s.prop49="ProductNotFoundError";SetMiniPDPExternalCampaignTags();hpeventscookieval=GetCookie("OEvent1");if(hpeventscookieval!=null&&hpeventscookieval!=""){s.events=hpeventscookieval;}
DeleteCookie("OEvent1");custNmbrCookieVal=GetSubCookieValue('M.R.User','CustNmbr');if(custNmbrCookieVal!=null&&custNmbrCookieVal!=""){s.prop10=custNmbrCookieVal;}
s.tl(false,'o',linkName);}
catch(e){}}
function updatePDPLinkWithSelectedColorSize(colorVal,sizeVal){var miniPdp=$j('.MiniPDPAjaxContent');var qsForPDP='';if(!isNullOrUndefined(pdpLinkCategoryid)){qsForPDP=qsForPDP+"&categoryid="+pdpLinkCategoryid;}
if(!isNullOrUndefined(isAvailProdcut)&&isAvailProdcut==true){qsForPDP=qsForPDP+"&isavail=true";}
if(!isNullOrUndefined(pdpLinkpos)){qsForPDP=qsForPDP+"&pos="+pdpLinkpos;}
if(!isNullOrUndefined(pdpLinknumpage)){qsForPDP=qsForPDP+"&numberpage="+pdpLinknumpage;}
var basePdpUrl=miniPdp.find('.hidPdpPath').val();if(!isNullOrUndefined(colorVal))
prodcolor=colorVal;if(!isNullOrUndefined(sizeVal))
prodsize=sizeVal;var pdpurl=sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=picture&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal);miniPdp.find('.main_picture a').attr('href',sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=picture&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal+"&secintref="+prodsize+"&prodcolor="+prodcolor));miniPdp.find('.product_info_bottom a.go_to_pdp').attr('href',sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=visuel&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal+"&secintref="+prodsize+"&prodcolor="+prodcolor));miniPdp.find('.product_info_block_text a.go_to_pdp').attr('href',sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=detail&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal+"&secintref="+prodsize+"&prodcolor="+prodcolor));if(prodAltText!=null){miniPdp.find('.main_picture a img').attr('alt',$j.trim(prodAltText));}
miniPdp.find('a.AlsoSoldBy').attr('href',sortQueryStringParamsMiniPDP(basePdpUrl+'&MiniPDPLinkClicked=detail&OriginMiniPDP='+OriginForMiniPDP+qsForPDP+'&cssrc='+CrossSellVal+"&secintref="+prodsize+"&prodcolor="+prodcolor+'&OfferTab=1'));}
function sortQueryStringParamsMiniPDP(hrefUrl){if(isNullOrUndefined(hrefUrl)){return hrefUrl;}
var lowerCasehrefUrl=hrefUrl.toLowerCase();var vars=[],hash;var hashes=lowerCasehrefUrl.slice(lowerCasehrefUrl.indexOf('?')+1).split('&');var myQueryKeys=new Array();for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');if(!isNullOrUndefined(hash[1])){vars.push(hash[0]);vars[hash[0]]=hash[1];myQueryKeys[i]=hash[0];}}
myQueryKeys.sort();if(isNullOrUndefined(vars['productid'])||isNullOrUndefined(vars['documentid'])){return hrefUrl;}
var seoqueryString=lowerCasehrefUrl.slice(0,lowerCasehrefUrl.indexOf('?'))+'?productid='+vars['productid']+'&'+'documentid='+vars['documentid'];for(var i=0;i<myQueryKeys.length;i++){if(myQueryKeys[i]!='productid'&&myQueryKeys[i]!='documentid'){seoqueryString=seoqueryString+'&'+myQueryKeys[i]+'='+vars[myQueryKeys[i]];}}
return seoqueryString;}
function OpenCenteredPopUpNoScrolls(url,width,height){var xPos=(screen.width-width)/2;var yPos=(screen.height-height)/2;window.open(url,'',"menubar=no,status=no,width="+width+",height="+height+",resizable=yes,left="+xPos+",top="+yPos);}
function GetMediaImagePath3Level(fileName){if(isNullOrUndefined(fileName)){return'';}
var miniPdp=$j('.MiniPDPAjaxContent');if(miniPdp.find('.flag3level').val()=="true"){if(fileName.length>13){if(!isNaN(fileName.substring(6,7))&&!isNaN(fileName.substring(7,8))&&!isNaN(fileName.substring(8,9))){return miniPdp.find('.hidImgPath3level').val()+'/'+fileName.substring(6,7)+'/'+fileName.substring(7,8)+'/'+fileName.substring(8,9)+'/'+fileName;}
else{return miniPdp.find('.hidImgPath3level').val()+'/'+fileName.substring(0,1)+'/'+fileName;}}
else{return miniPdp.find('.hidImgPath3level').val()+'/'+fileName.substring(0,1)+'/'+fileName;}}
else{return miniPdp.find('.hidImgPath').val()+'/'+fileName.substring(0,1)+'/'+fileName;}}
function SetMiniPDPExternalCampaignTags(){if(s.eVar35!=null){s.eVar35="";}
if(s.eVar36!=null){s.eVar36="";}
if(s.eVar37!=null){s.eVar37="";}
if(s.eVar38!=null){s.eVar38="";}
if(s.eVar39!=null){s.eVar39="";}
if(s.eVar24!=null){s.eVar24="";}
s.campaign='';}

var currentModalBoxContent=null;var LayerClosingOnClick=function(){HideNewModalBox();};var baseDiv="#wrapper";isNullOrUndefined=function(elem){if(elem==undefined||null==elem)return true;return false;};var count=1;function HideNewModalBox(evt){if(currentModalBoxContent==null)return;var IsGILayerVisible=$j("#GILayer").is(':visible');var isATBLayer=$j('#ATBLayer').is(":visible");$j('#'+currentModalBoxContent).hide();$j(baseDiv+' .newModalBox').remove();currentModalBoxContent=null;var urltemp=window.location.href;if(!isNullOrUndefined(evt)&&$j('#LastSeenStickyLayer').length>0&&$j('#LastSeenStickyLayer').is(":visible")){if(typeof BindLastSeenProducts=='function')
BindLastSeenProducts();}
if(!isNullOrUndefined(evt)&&urltemp.indexOf('DirectOrderForm.aspx')>-1&&isATBLayer)
window.location.href='/order_from_catalog/DirectOrderForm.aspx';var UnBindLayerClosing=function(){$j('#aspnetForm,#leftClickDiv,#rightClickDiv').unbind('click',LayerClosingOnClick);$j('#leftClickDiv,#rightClickDiv,#blockingDiv').remove();};setTimeout(UnBindLayerClosing,'1000');var RestockAlertBasket=$j('input.RestockAlertClass').val();var RestockAlertDO=$j('input.DirectOrder').val();var IsDeleteDirectO=$j('input.IsDeleteDO').val();var ISDeleteBasket=$j('input.IsDeleteBasket').val();var isBasketLayer=$j('input.Isbasketlayer').val();var RestockAlertOD=$j('input.RestockAlertOD').val();var IsDeleteOrderDetail=$j('input.IsDeleteOD').val();if(count==1){$j('input.Isbasketlayer').val("false");}
count=2;if(!IsGILayerVisible&&RestockAlertBasket=='basket'&&ISDeleteBasket=='false'){NOAlert(RestockAlertBasket);}
if(!IsGILayerVisible&&RestockAlertDO=='DirectOrder'&&IsDeleteDirectO=='true'){NOAlert(RestockAlertDO);}
if(!IsGILayerVisible&&RestockAlertOD=='OD'&&IsDeleteOrderDetail=='false'){NOAlert(RestockAlertOD);}
if(!isNullOrUndefined(evt)&&urltemp.indexOf('BasketV2.aspx')>-1||urltemp.indexOf('Basket.aspx')>-1){if($j('input.Isbasketlayer').val()=="true"){DeleteSelectedLineItems();}}
$j('input.Isbasketlayer').val("true");$j('div.error').removeClass('errorActive');}
function ShowNewModalBox(content,settings,closeBinding,hideCloseLink,refreshWLOnClose){currentModalBoxContent=content;var layerContent=$j('#'+content);var modalBox=$j('.newModalBox').clone();if(isNullOrUndefined(baseDiv)){baseDiv="#wrapper";}
modalBox.appendTo($j(baseDiv));var modalBoxOpacity=modalBox.children('.newModalBoxOpacity');var modalBoxBorder=modalBox.children('.newModalBoxBorder');var modalBoxContent=modalBox.children('.newModalBoxContent');if(settings.top!=null){modalBox.css({top:settings.top+'px'});if(!isNullOrUndefined(hideCloseLink)){if(hideCloseLink){layerContent.css({top:settings.top+18+'px'});}else{layerContent.css({top:settings.top+48+'px'});}}else{layerContent.css({top:settings.top+48+'px'});}}else{modalBox.css({bottom:settings.bottom});layerContent.css({bottom:settings.bottom+18+'px'});}
if(settings.left!=null){modalBox.css({left:settings.left});layerContent.css({left:settings.left+18+'px'});}else{modalBox.css({right:settings.right});layerContent.css({right:settings.right+18+'px'});}
var strChUserAgent=navigator.userAgent;var intSplitStart=strChUserAgent.indexOf("(",0);var intSplitEnd=strChUserAgent.indexOf(")",0);var strChStart=strChUserAgent.substring(0,intSplitStart);var strChMid=strChUserAgent.substring(intSplitStart,intSplitEnd);var strChEnd=strChUserAgent.substring(strChEnd);var hModif=0;if(strChMid.indexOf("MSIE 7")!=-1)
hModif=10;if(!isNullOrUndefined(hideCloseLink)){if(hideCloseLink){modalBox.css({height:layerContent.height()+36+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxOpacity.css({height:layerContent.height()+36+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxBorder.css({height:layerContent.height()+2+hModif+'px',width:layerContent.innerWidth()+2+'px'});modalBoxContent.css({height:layerContent.height()+hModif+'px',width:layerContent.innerWidth()+'px'});}else{modalBox.css({height:layerContent.height()+76+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxOpacity.css({height:layerContent.height()+76+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxBorder.css({height:layerContent.height()+42+hModif+'px',width:layerContent.innerWidth()+2+'px'});modalBoxContent.css({height:layerContent.height()+40+hModif+'px',width:layerContent.innerWidth()+'px'});}}else{modalBox.css({height:layerContent.height()+76+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxOpacity.css({height:layerContent.height()+76+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxBorder.css({height:layerContent.height()+42+hModif+'px',width:layerContent.innerWidth()+2+'px'});modalBoxContent.css({height:layerContent.height()+40+hModif+'px',width:layerContent.innerWidth()+'px'});}
modalBox.attr("id","newModalBox");modalBoxOpacity.attr("id","newModalBoxOpacity");modalBoxBorder.attr("id","newModalBoxBorder");modalBoxContent.attr("id","newModalBoxContent");cornerSettings={tl:{radius:8},tr:{radius:8},bl:{radius:8},br:{radius:8},antiAlias:true,autoPad:true}
modalBox.bgiframe();layerContent.bgiframe();modalBox.show();layerContent.show();var BindLayerClosing=function(){var wrapper=$j(baseDiv);var leftDiv=$j('<div id="leftClickDiv"></div>');leftDiv.css({position:'absolute',zIndex:'1000',left:0,top:0,width:(wrapper.position().left),height:(wrapper.height()),backgroundColor:'Transparent'});$j(document.body).append(leftDiv);var rightDiv=$j('<div id="rightClickDiv"></div>');rightDiv.css({position:'absolute',zIndex:'1000',right:0,top:0,width:(wrapper.position().left),height:(wrapper.height()),backgroundColor:'Transparent'});$j(document.body).append(rightDiv);$j('#aspnetForm,#leftClickDiv,#rightClickDiv').bind('click',LayerClosingOnClick);};setTimeout(BindLayerClosing,'1000');if(!isNullOrUndefined(closeBinding)){modalBox.find('.close').click(closeBinding);}
if(!isNullOrUndefined(hideCloseLink)){if(hideCloseLink){modalBox.find('.close').hide();}}
if(!isNullOrUndefined(refreshWLOnClose)&&refreshWLOnClose==true){modalBox.find('.close').attr("href","javascript:GoToWishList()");}
if(($j('.product_detail_page').length>0||$j('.mpdp_content').length>0))
setCookie("pdpvisited","0");if($j('.newModalBox').length>0&&(typeof BindLastSeenProducts=='function'))
BindLastSeenProducts();}
function ShowNewBlockingModalBox(content,settings,closeBinding,hideCloseLink){currentModalBoxContent=content;var layerContent=$j('#'+content);var modalBox=$j('.newModalBox').clone();modalBox.appendTo($j(baseDiv));var modalBoxOpacity=modalBox.children('.newModalBoxOpacity');var modalBoxBorder=modalBox.children('.newModalBoxBorder');var modalBoxContent=modalBox.children('.newModalBoxContent');if(settings.top!=null){modalBox.css({top:settings.top+'px'});layerContent.css({top:settings.top+48+'px'});}else{modalBox.css({bottom:settings.bottom});layerContent.css({bottom:settings.bottom+18+'px'});}
if(settings.left!=null){modalBox.css({left:settings.left});layerContent.css({left:settings.left+18+'px'});}else{modalBox.css({right:settings.right});layerContent.css({right:settings.right+18+'px'});}
var strChUserAgent=navigator.userAgent;var intSplitStart=strChUserAgent.indexOf("(",0);var intSplitEnd=strChUserAgent.indexOf(")",0);var strChStart=strChUserAgent.substring(0,intSplitStart);var strChMid=strChUserAgent.substring(intSplitStart,intSplitEnd);var strChEnd=strChUserAgent.substring(strChEnd);var hModif=0;if(strChMid.indexOf("MSIE 7")!=-1)
hModif=10;modalBox.css({height:layerContent.height()+76+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxOpacity.css({height:layerContent.height()+76+hModif+'px',width:layerContent.innerWidth()+36+'px'});modalBoxBorder.css({height:layerContent.height()+42+hModif+'px',width:layerContent.innerWidth()+2+'px'});modalBoxContent.css({height:layerContent.height()+40+hModif+'px',width:layerContent.innerWidth()+'px'});modalBox.attr("id","newModalBox");modalBoxOpacity.attr("id","newModalBoxOpacity");modalBoxBorder.attr("id","newModalBoxBorder");modalBoxContent.attr("id","newModalBoxContent");cornerSettings={tl:{radius:8},tr:{radius:8},bl:{radius:8},br:{radius:8},antiAlias:true,autoPad:true}
modalBox.show();layerContent.show();var wrapper=$j(baseDiv);var blockingDiv=$j('<div id="blockingDiv"></div>');blockingDiv.css({position:'absolute',zIndex:'550',left:(wrapper.position().left),top:0,width:(wrapper.width()),height:(wrapper.height()),backgroundColor:'Transparent',display:'none'});$j(document.body).append(blockingDiv);blockingDiv.show();if(!isNullOrUndefined(closeBinding)){modalBox.find('.close').click(closeBinding);}
if(!isNullOrUndefined(hideCloseLink)){if(hideCloseLink){modalBox.find('.close').hide();}}}

function ReportProductInfoToAvail(products,trackingCode,isLogEnabled){if(isLogEnabled!="True")return;var postUrl="/Product/AjaxReportToAvail.aspx?";var postData="products="+products+"&tcode="+trackingCode;$j.ajax({async:false,type:"GET",url:postUrl,data:postData,timeout:10000,success:onSuccess,error:""});return true;function onSuccess(response){var trackingCode=response;setSubCookieAndCookie("Avail","TrackingCode",trackingCode);}}

function GetAvailProductsForMPPDP(){if($j('.push_products ul li').length==0)
$j('.push_products').hide();else
$j('.push_products').show();if(isAvailEnabled!='True')return;$j.fn.OnAvailSuccessCallback=function(){if(availSaaSResponse.length>0){for(idxRes=0;idxRes<availSaaSResponse.length;idxRes++){if(availSaaSResponse[idxRes].TemplateName==csAvailtemplate)
{GetAndBindAvailProductsUIOnMPCrossSellZone(availSaaSResponse[idxRes]);}
if(availSaaSResponse[idxRes].TemplateName==upsellAvailTemp)
{GetAndBindAvailProductsUIOnMPUpsellZone(availSaaSResponse[idxRes]);}}}
if($j('.push_products ul li').length==0)
$j('.push_products').hide();if($j('.cross_products ul li').length==0)
$j('.cross_products').hide();}
if(AvailRequestsJson!=null&AvailRequestsJson!=''){var availRequestsData=$j.parseJSON(AvailRequestsJson);if($j('.push_products ul li').length==crossPrdsCnt){for(tIdx=0;tIdx<availRequestsData.length;tIdx++){if(availRequestsData[tIdx].TemplateName==csAvailtemplate)
availRequestsData.splice(tIdx,1);}}
GetRecommdentationsFromSaaS(availRequestsData);}}
function GetAndBindAvailProductsUIOnMPCrossSellZone(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var pushProductIds=$j('.push_products .hidPushProductIds').val();var excludedProductIds=pushProductIds.replace(/;/g,",");var maxProducts=0;if(!isNullOrUndefined(crossPrdsCnt))
maxProducts=crossPrdsCnt;var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=CrossSell"+"&isMarketPlace=true";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){if($j.trim(availUI.ProductUI)==''){$j('.push_products').hide();return;}
var associatedAvail=$j('.push_products ul');if(!isNullOrUndefined(associatedAvail)){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);$j(associatedAvail).append(availUI.ProductUI);$j('.push_products').show();$j(associatedAvail).find('li:gt('+(crossPrdsCnt-1)+')').remove();}}}
function GetAndBindAvailProductsUIOnMPUpsellZone(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var pushProductIds=$j('.push_products .hidPushProductIds').val();var excludedProductIds=pushProductIds.replace(/;/g,",");var maxProducts=0;if(!isNullOrUndefined(upsellPrdsCnt))
maxProducts=upsellPrdsCnt;var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=UpSell"+"&isMarketPlace=true";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){if($j.trim(availUI.ProductUI)==''){$j('.additionAvail').hide();return;}
var associatedAvail2=$j('.cross_products ul');if(!isNullOrUndefined(associatedAvail2)){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);$j(associatedAvail2).html(availUI.ProductUI);$j('.cross_products').show();if($j('.cross_products ul li').length>0){var upsellPrds=$j('.cross_products  ul li');var crossSell=$j('.push_products');for(liIdx=0;liIdx<upsellPrds.length;liIdx++){var prodId=$j(upsellPrds[liIdx]).attr('productid');if($j('.crosssellProducts  ul.products li[productid="'+prodId+'"]').length>0)
$j(upsellPrds[liIdx]).empty().hide();}}
var visProducts=$j('.cross_products ul li:visible');$j(visProducts).slice(upsellPrdsCnt).empty().hide();if($j('.cross_products  ul li').length==0)
$j('.cross_products').hide();}}}
function GetAvailProductsForPDP(){if($j('.crosssellProducts .associated_products ul.products li').length==0)
$j('.crosssellProducts').hide();else
$j('.crosssellProducts').show();if(isAvailEnabled!='True')return;$j.fn.OnAvailSuccessCallback=function(){if(availSaaSResponse.length>0){for(idxRes=0;idxRes<availSaaSResponse.length;idxRes++){if(availSaaSResponse[idxRes].TemplateName==csAvailtemplate)
{GetAndBindAvailProductsUIOnCrossSellZone(availSaaSResponse[idxRes]);}
if(availSaaSResponse[idxRes].TemplateName==upsellAvailTemp)
{GetAndBindAvailProductsUIOnUpsellZone(availSaaSResponse[idxRes]);}}}
if($j('.crosssellProducts .associated_products ul.products li').length==0)
$j('.crosssellProducts').hide();if($j('.upsellProducts .associated_products ul.products li').length==0)
$j('.upsellProducts').hide();}
if(AvailRequestsJson!=null&AvailRequestsJson!=''){var availRequestsData=$j.parseJSON(AvailRequestsJson);if($j('.crosssellProducts .associated_products ul.products li').length==crossPrdsCnt){for(tIdx=0;tIdx<availRequestsData.length;tIdx++){if(availRequestsData[tIdx].TemplateName==csAvailtemplate)
availRequestsData.splice(tIdx,1);}}
GetRecommdentationsFromSaaS(availRequestsData);}}
function GetAndBindAvailProductsUIOnCrossSellZone(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds=csManualProductIds.replace(/;/g,",");var maxProducts='0';var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=CrossSell";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){if($j.trim(availUI.ProductUI)==''){$j('.additionAvail').hide();return;}
var associatedAvail=$j('.crosssellProducts .associated_products ul.products');if(!isNullOrUndefined(associatedAvail)){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);$j(associatedAvail).append(availUI.ProductUI);$j('.crosssellProducts .associated_products .product_picture').addMiniPDPOnPush('Cross sell PDP');$j('.crosssellProducts').show();$j(associatedAvail).find('li:gt('+(crossPrdsCnt-1)+')').remove();}}}
function GetAndBindAvailProductsUIOnUpsellZone(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds=csManualProductIds.replace(/;/g,",");var maxProducts=0;var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=UpSell";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){if($j.trim(availUI.ProductUI)==''){$j('.additionAvail').hide();return;}
var associatedAvail2=$j('.additionAvail .associated_products ul.products');if(!isNullOrUndefined(associatedAvail2)){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);$j(associatedAvail2).html(availUI.ProductUI);$j('.additionAvail .associated_products .product_picture').addMiniPDPOnPush('Up sell PDP');$j('.additionAvail').show();if($j('.crosssellProducts ul.products li').length>0){var upsellPrds=$j('.additionAvail  ul.products li');var crossSell=$j('.crosssellProducts');for(liIdx=0;liIdx<upsellPrds.length;liIdx++){var prodId=$j(upsellPrds[liIdx]).attr('productid');if($j('.crosssellProducts  ul.products li[productid="'+prodId+'"]').length>0)
$j(upsellPrds[liIdx]).empty().hide();}}
var visProducts=$j('.additionAvail  ul.products li:visible');$j(visProducts).slice(upsellPrdsCnt).empty().hide();if($j('.additionAvail  ul.products li').length==0)
$j('.additionAvail').hide();}}}
function GetAvailProductsForSearchPage(){if(isAvailEnabled!='True')return;$j.fn.OnAvailSuccessCallback=function(){if(availSaaSResponse.length>0){for(idxRes=0;idxRes<availSaaSResponse.length;idxRes++){if(availSaaSResponse[idxRes].TemplateName==searchAvailTemp)
{GetAndBindAvailProductsUIOnSearchResultPage(availSaaSResponse[idxRes]);}}}}
if(showAvailProducts!=null&&showAvailProducts=='True'){if(AvailRequestsJson!=null&&AvailRequestsJson!=''){var availRequestsData=$j.parseJSON(AvailRequestsJson);GetRecommdentationsFromSaaS(availRequestsData);}}}
function GetAndBindAvailProductsUIOnSearchResultPage(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds='';if(!isNullOrUndefined(searchAvailPrdsCnt))
var maxProducts=searchAvailPrdsCnt;var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=SearchResult";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){if($j.trim(availUI.ProductUI)==''){$j('.searchAvailProducts').hide();return;}
var associatedAvail2=$j('.searchAvailProducts ol.search-page-list');if(!isNullOrUndefined(associatedAvail2)){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);$j(associatedAvail2).html(availUI.ProductUI);$j('.searchAvailProducts ol.search-page-list .block-visu a.visu').addMiniPDP();$j('.searchAvailProducts').show();}}}
function GetAvailProductsForBasket(){if($j('.cob_bottomleft .associated_products li').length==0)
$j('.cob_bottomleft .associated_products_block').hide();if(isAvailEnabled!='True')return;if($j('.cob_bottomleft').length==0)return;if($j('.cob_bottomleft .associated_products li').length==maxCrossSellProducts)
return;$j.fn.OnAvailSuccessCallback=function(){if(availSaaSResponse.length>0){for(idxRes=0;idxRes<availSaaSResponse.length;idxRes++){if(availSaaSResponse[idxRes].TemplateName==basketAvailTemplate){GetAndBindAvailProductsUIOnBasket(availSaaSResponse[idxRes]);}}}
if($j('.cob_bottomleft .associated_products li').length==0)
$j('.cob_bottomleft .associated_products_block').hide();}
if(AvailRequestsJson!=null&AvailRequestsJson!=''){var availRequestsData=$j.parseJSON(AvailRequestsJson);GetRecommdentationsFromSaaS(availRequestsData);}}
function GetAndBindAvailProductsUIOnBasket(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds=basketProductIds;var wishlstPrdsCnt=$j('.cob_bottomleft .associated_products li').length;var availPrdsCnt=maxCrossSellProducts-wishlstPrdsCnt;var maxProducts=availPrdsCnt;var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=Basket";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){if($j.trim(availUI.ProductUI)==''){return;}
var associatedAvail2=$j('.cob_bottomleft .associated_products_block .associated_products ul.products');if(!isNullOrUndefined(associatedAvail2)){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);$j(associatedAvail2).append(availUI.ProductUI);$j('.cob_bottomleft .associated_products ul.products li .product_picture').addMiniPDPOnPush('Cross sell Basket');$j('.cob_bottomleft .associated_products_block').show();$j('.cob_bottomleft .associated_products ul.products').find('li:gt('+(maxCrossSellProducts-1)+')').empty().hide();}}}
function GetAvailProductsForOutOfStock(){$j('.outOfStock_inner_wrapper .associated_products_block').hide();if(isAvailEnabled!='True')return;$j.fn.OnAvailSuccessCallback=function(){if(availSaaSResponse.length>0){for(idxRes=0;idxRes<availSaaSResponse.length;idxRes++){if(availSaaSResponse[idxRes].TemplateName==outofStockAvailTemplate){GetAndBindAvailProductsUIOnOutOfStock(availSaaSResponse[idxRes]);}}}
if($j('.outOfStock_inner_wrapper .associated_products ul.products li').length==0)
$j('.outOfStock_inner_wrapper .associated_products_block').hide();}
if(AvailRequestsJson!=null&AvailRequestsJson!=''){var availRequestsData=$j.parseJSON(AvailRequestsJson);GetRecommdentationsFromSaaS(availRequestsData);}}
function GetAndBindAvailProductsUIOnOutOfStock(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds='';if(!isNullOrUndefined(maxCrossSellProducts))
var maxProducts=maxCrossSellProducts;var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=OutOfStock";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){if($j.trim(availUI.ProductUI)==''){$j('.outOfStock_inner_wrapper .associated_products_block').hide();return;}
var associatedAvail2=$j('.outOfStock_inner_wrapper .associated_products ul.products');if(!isNullOrUndefined(associatedAvail2)){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);$j(associatedAvail2).html(availUI.ProductUI);$j('.outOfStock_inner_wrapper .associated_products ul.products li .product_picture').addMiniPDPOnPush('Cross sell Pepuise');$j('.outOfStock_inner_wrapper .associated_products_block').show();}}}
function GetPushProductsFromAvailForATB(availRequestData,excludedAvailProducts,zone1Template,zone2Template,pushPrds){if(isAvailEnabled!='True')return;$j.fn.OnAvailSuccessCallback=function(){if(availSaaSResponse.length==1){GetAndBindAvailProductsUIOnATBZone2(availSaaSResponse[0],'',excludedAvailProducts);}
if(availSaaSResponse.length==2){for(idxRes=0;idxRes<availSaaSResponse.length;idxRes++){if(availSaaSResponse[idxRes].TemplateName==zone1Template){if($j("#ATBLayer .zone1").length>0){GetAndBindAvailProductsUIOnATBZone1(availSaaSResponse[idxRes],excludedAvailProducts);}}
if(availSaaSResponse[idxRes].TemplateName==zone2Template)
{GetAndBindAvailProductsUIOnATBZone2(availSaaSResponse[idxRes],excludedAvailProducts);}}}}
$j("#ATBLayer .zone2").hide();if(availRequestData!=null&availRequestData!=''){if(pushPrds!=null&&trim(pushPrds)!=''){if($j(pushPrds).find('li').length==3){for(tIdx=0;tIdx<availRequestData.length;tIdx++){if(availRequestData[tIdx].TemplateName==zone1Template)
availRequestData.splice(tIdx,1);}}}
GetRecommdentationsFromSaaS(availRequestData);}}
function GetAndBindAvailProductsUIOnATBZone1(availResponse,excludedAvailProducts){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds='';if(!isNullOrUndefined(excludedAvailProducts))
excludedProductIds=excludedAvailProducts;var maxProducts='3';var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=ATB&isDO="+isDO;var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){var assoc_bloc=$j("#ATBLayer .zone1  ul.products");availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);var pushProducts=availUI.ProductUI;if(!isNullOrUndefined(assoc_bloc)){if(pushProducts!=null&&trim(pushProducts)!=''){assoc_bloc.show();assoc_bloc.append(pushProducts);assoc_bloc.find('.set').empty();assoc_bloc.find('li:gt(2)').remove();$j("#ATBLayer .zone1  ul.products li .product_picture").attr("width","105");$j("#ATBLayer .zone1  ul.products li .product_picture").attr("height","105");$j('#ATBLayer .associated_products .quick_view_overlay,#ATBLayer .associated_products .quick_view_overlay_button').remove();$j('#ATBLayer .associated_products .product_picture').addMiniPDPOnPush('Cross sell ATB');}
else{if($j("#ATBLayer .zone1  ul.products li").length==0)
assoc_bloc.hide();}}
availRequestsJson=null;}}
function GetAndBindAvailProductsUIOnATBZone2(availResponse,excludedAvailProducts){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds='';if(!isNullOrUndefined(excludedAvailProducts))
excludedProductIds=excludedAvailProducts;var maxProducts='6';var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=ATB&isDO="+isDO;var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){var assoc_bloc=$j("#ATBLayer .zone2  ul.products");availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);var pushProducts=availUI.ProductUI;if(!isNullOrUndefined(assoc_bloc)){if(pushProducts!=null&&trim(pushProducts)!=''){assoc_bloc.empty();assoc_bloc.append(pushProducts);$j("#ATBLayer .zone2  ul.products li .product_picture").attr("width","105");$j("#ATBLayer .zone2  ul.products li .product_picture").attr("height","105");$j('#ATBLayer .associated_products .quick_view_overlay,#ATBLayer .associated_products .quick_view_overlay_button').remove();if(isDO){$j('#ATBLayer .associated_products .product_picture').addMiniPDPOnPush('Cross sell ATB direct');}
else{$j('#ATBLayer .associated_products .product_picture').addMiniPDPOnPush('Cross sell ATB');if($j("#ATBLayer .zone1").length>0){var zone2Prds=$j('#ATBLayer .zone2  ul.products li');var zon1=$j('#ATBLayer .zone1');for(liIdx=0;liIdx<zone2Prds.length;liIdx++){var prodId=$j(zone2Prds[liIdx]).attr('productid');if($j('#ATBLayer .zone1  ul.products li[productid="'+prodId+'"]').length>0)
$j(zone2Prds[liIdx]).empty().hide();}}}
if($j('#ATBLayer .zone2  ul.products li').length>0)
$j("#ATBLayer .zone2").show();HideNewModalBox();ShowATBLayer();availItemsCount=$j('#ATBLayer .zone2  ul.products li:visible').length;topItemsCount=$j("#ATBLayer .zone1  ul.products li").length;ATBAjaxContentLoadEvet();}
else{assoc_bloc.hide();if(isDO){showModal(defaultContent);GoToBasket();}}}
availRequestsJson=null;}}
function GetPushProductsFromSaasForATW(AvailRequestsJson){if(isAvailEnabled!='True')return;$j.fn.OnAvailSuccessCallback=function(){if(availSaaSResponse.length>0){GetAndBindAvailProductsUIOnATW(availSaaSResponse[0]);}}
if(AvailRequestsJson!=null&AvailRequestsJson!=''){GetRecommdentationsFromSaaS(AvailRequestsJson);}}
function GetAndBindAvailProductsUIOnATW(availResponse){if(availResponse.AvailRecommendedPIds==null||availResponse.AvailRecommendedPIds=='')return;var productids=availResponse.AvailRecommendedPIds;var trackingCode=availResponse.TrackingCode;var excludedProductIds='';var maxProducts='3';var callingUrl="/ProductDetail/AjaxAvailSaaSProducts.aspx?productids="+productids+"&maxProducts="+maxProducts+"&availExclude="+excludedProductIds+"&availZone=ATW";var returnUI;$j.ajax({type:'GET',url:callingUrl,dataType:"json",success:showAdditionvAvailProductsUI,error:function(data){},cache:true,timeout:300000});function showAdditionvAvailProductsUI(availUI){availUI.ProductUI=availUI.ProductUI.replace(/tcode/g,trackingCode);var pushProductsUI=availUI.ProductUI;var assoc_bloc=$j("#ATWLayer .associated_products_block .associated_products ul.products");if(!isNullOrUndefined(assoc_bloc)){if(pushProductsUI!=null&&trim(pushProductsUI)!=''){assoc_bloc.show();assoc_bloc.empty();assoc_bloc.append(pushProductsUI);assoc_bloc.find('.set').empty();assoc_bloc.find('li:gt(2)').empty().hide();var sPath=window.location.pathname;var sPage=sPath.substring(sPath.lastIndexOf('/')+1);var isWLPage=false;if(sPage.toLowerCase()=="wishlist.aspx"){isWLPage=true;}
if($j('#ATWLayer .associated_products_block  ul.products li').length>0)
$j("#ATWLayer .associated_products_block").show();HideNewModalBox();ShowWLLayer(isWLPage);$j('#ATWLayer .associated_products .quick_view_overlay,#ATWLayer .associated_products .quick_view_overlay_button').remove();$j('#ATWLayer .associated_products .product_picture').addMiniPDPOnPush('Wishlist AVAIL');}
else{assoc_bloc.hide();}}}}

function LoggingMiniPDPClickToAvail(productId){if(!Emark)return;var emark=new Emark();var templateName='LoggingMiniPDPClick';var inputParamsStr="ProductID: FRRED0"+productId;var dynamicParams='';var availResponse=emark.getRecommendations(templateName,[inputParamsStr],dynamicParams);emark.commit(function(){});}
function populatePredictions(availRequestData){var emark=new Emark();var templateName=availRequestData.TemplateName;var inputParams=availRequestData.InputParameters;var inputParamsStr='';for(key in inputParams){var ipVal=inputParams[key];key=key.replace(/[0-9]/gi,'');if(inputParamsStr==''){inputParamsStr=key+":"+ipVal;}
else
inputParamsStr+=","+key+":"+ipVal;}
var dynamicParams=availRequestData.DynamicParams;var dynamicParamsStr='';if(dynamicParams!=undefined&&dynamicParams!=null)
dynamicParamsStr=dynamicParams;var availResponse=emark.getRecommendations(templateName,[inputParamsStr],dynamicParamsStr);emark.commit(function(){var response=new AvailSaaSResponseJSON(availRequestData,availResponse);if(response!=null){availSaaSResponse[processedReqCnt]=response;}
ajaxPageUrlForM2=availRequestData.AjaxPageUrlForM2;processedReqCnt++;if(processedReqCnt==AvailRequestsJson.length){OnAllRequestCompletion();}});}
function AvailSaaSResponseJSON(availRequestData,availResponseInfo){this.TemplateName=availRequestData.TemplateName;this.ProductId=availRequestData.ProductId;this.SessionId=availRequestData.SessionId;this.ReturnStatus='';this.ErrorMessage='';this.TrackingCode=availResponseInfo.trackingcode;this.AvailRecommendedPIds=availResponseInfo.values.toString();this.AvailProductsJson=Array();}
function GetRecommdentationsFromSaaS(availRequestDatas){if(!Emark)return;processedReqCnt=0;availSaaSResponse=Array();;AvailRequestsJson=availRequestDatas;if(availRequestDatas==null||availRequestDatas==undefined)return;if(availRequestDatas.length==0)return;for(reqIdx=0;reqIdx<availRequestDatas.length;reqIdx++){var availRequest=availRequestDatas[reqIdx];populatePredictions(availRequest);}}
var availSaaSResponse=Array();var i=0;var processedReqCnt=0;var ajaxPageUrlForM2='';function OnAllRequestCompletion(){var productIds='';for(prodIds=0;prodIds<availSaaSResponse.length;prodIds++){if(availSaaSResponse[prodIds].AvailRecommendedPIds!=''){if(productIds=='')
productIds=availSaaSResponse[prodIds].AvailRecommendedPIds;else{var availPIds=availSaaSResponse[prodIds].AvailRecommendedPIds.split(',');for(pidx=0;pidx<availPIds.length;pidx++){if(productIds.indexOf(availPIds[pidx])==-1)
productIds+=","+availPIds[pidx];}}}}
if(ajaxPageUrlForM2!=''){getProductsJson(productIds);}
else{if(!isNullOrUndefined($j.fn.OnAvailSuccessCallback)){$j.fn.OnAvailSuccessCallback();}}}
function getProductsJson(productIds){var ajaxUrl=ajaxPageUrlForM2+"?productids="+productIds;$j.ajax({type:'GET',url:ajaxUrl,dataType:'json',success:onAjaxAvailSuccess,error:onAjaxAvailError,cache:false,async:false,timeout:30000});function onAjaxAvailSuccess(productsJsonInfo){setProductsInResponse(productsJsonInfo);if(!isNullOrUndefined($j.fn.OnAvailSuccessCallback)){$j.fn.OnAvailSuccessCallback();}}
function onAjaxAvailError(XMLHttpRequest,textStatus,errorThrown){var errorMessage=textStatus+'\n'+errorThrown+'\n';}}
function setProductsInResponse(productsJson){var products=productsJson.products;for(prodIdx=0;prodIdx<products.length;prodIdx++){for(resIdx=0;resIdx<availSaaSResponse.length;resIdx++){var pIds=availSaaSResponse[resIdx].AvailRecommendedPIds;if(pIds!=''&&pIds.indexOf(products[prodIdx].Id)!=-1){availSaaSResponse[resIdx].AvailProductsJson.push(products[prodIdx]);}}}
for(resIdx=0;resIdx<availSaaSResponse.length;resIdx++){availSaaSResponse[resIdx].ReturnStatus=productsJson.status;availSaaSResponse[resIdx].ErrorMessage=productsJson.message;}}

(function(){function map(arr,fun){var len=arr.length;if(typeof fun!="function")
throw new TypeError();var res=new Array(len);var thisp=arguments[2];for(var i=0;i<len;i++){if(i in arr)
res[i]=fun.call(thisp,arr[i],i,arr);}
return res;}
function filter(arr,fun){var len=arr.length;if(typeof fun!="function")
throw new TypeError();var res=new Array();var thisp=arguments[2];for(var i=0;i<len;i++){if(i in arr){var val=arr[i];if(fun.call(thisp,val,i,arr))
res.push(val);}}
return res;};function slice(obj,start,end,step){var len=obj.length,results=[];end=end||len;start=(start<0)?Math.max(0,start+len):Math.min(len,start);end=(end<0)?Math.max(0,end+len):Math.min(len,end);for(var i=start;i<end;i+=step){results.push(obj[i]);}
return results;}
function expand(obj,name){var results=[];function walk(obj){if(name){if(name===true&&!(obj instanceof Array)){results.push(obj);}else if(obj[name]){results.push(obj[name]);}}
for(var i in obj){var val=obj[i];if(!name){results.push(val);}else if(val&&typeof val=='object'){walk(val);}}}
if(name instanceof Array){if(name.length==1){return obj[name[0]];}
for(var i=0;i<name.length;i++){results.push(obj[name[i]]);}}else{walk(obj);}
return results;}
function distinctFilter(array,callback){var outArr=[];var primitives={};for(var i=0,l=array.length;i<l;++i){var value=array[i];if(callback(value,i,array)){if((typeof value=='object')&&value){if(!value.__included){value.__included=true;outArr.push(value);}}else if(!primitives[value+typeof value]){primitives[value+typeof value]=true;outArr.push(value);}}}
for(i=0,l=outArr.length;i<l;++i){if(outArr[i]){delete outArr[i].__included;}}
return outArr;}
var JSONQuery=function(query,obj){tokens=[];var depth=0;var str=[];query=query.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(t){depth+=t=='['?1:t==']'?-1:0;return(t==']'&&depth>0)?'`]':(t.charAt(0)=='"'||t.charAt(0)=="'")?"`"+(str.push(t)-1):t;});var prefix='';function call(name){prefix=name+"("+prefix;}
function makeRegex(t,a,b,c,d){return str[d].match(/[\*\?]/)||c=='~'?"/^"+str[d].substring(1,str[d].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,".$1")+(c=='~'?'$/i':'$/')+".test("+a+")":t;}
query.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw new Error("Unsafe function call");});query=query.replace(/([^=]=)([^=])/g,"$1=$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(t){return t.charAt(0)=='.'?t:t=='@'?"$obj":(t.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+t;}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(t,a,b){var oper=t.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/);if(oper){var prefix='';if(t.match(/^\./)){call("expand");prefix=",true)";}
call(oper[1].match(/\=/)?"map":oper[1].match(/\^/)?"distinctFilter":"filter");return prefix+",function($obj){return "+oper[2]+"})";}
oper=t.match(/^\[\s*([\/\\].*)\]/);if(oper){return".concat().sort(function(a,b){"+oper[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(t,a,b){return"var av= "+b.replace(/\$obj/,"a")+",bv= "+b.replace(/\$obj/,"b")+";if(av>bv||bv==null){return "+(a=="/"?1:-1)+";}\n"+"if(bv>av||av==null){return "+(a=="/"?-1:1)+";}\n";})+"})";}
oper=t.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/);if(oper){call("slice");return","+(oper[1]||0)+","+(oper[2]||0)+","+(oper[3]||1)+")";}
if(t.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)){call("expand");return(t.charAt(1)=='.'?",'"+b+"'":t.match(/,/)?","+t:"")+")";}
return t;}).replace(/(\$obj\s*(\.\s*[\w_$]+\s*)*)(==|~)\s*`([0-9]+)/g,makeRegex).replace(/`([0-9]+)\s*(==|~)\s*(\$obj(\s*\.\s*[\w_$]+)*)/g,function(t,a,b,c,d){return makeRegex(t,c,d,b,a);});query=prefix+(query.charAt(0)=='$'?"":"$")+query.replace(/`([0-9]+|\])/g,function(t,a){return a==']'?']':str[a];});var executor=eval("1&&function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj=$;return "+query+"}");for(var i=0;i<arguments.length-1;i++){arguments[i]=arguments[i+1];}
return obj?executor.apply(this,arguments):executor;};if(typeof namespace=="function"){namespace("json::JSONQuery",JSONQuery);}
else{window["JSONQuery"]=JSONQuery;}})();

if(isNullOrUndefined(RedcatsOT)){var RedcatsOT={};}
RedcatsOT.ATB=function(callingPage){return new function(){var AjaxPageUrl='/Shopping_BasketV2/AjaxAddToBasketV3.aspx?cp='+callingPage;this.isATBRunning=false;var itself=this;this.OnIntermediateCallBack=null;this.OnSuccessCallBack=null;this.GoodDealsCombinationToPush=null;this.DoATB=function(FRProductList){if(itself.isATBRunning)return;itself.isATBRunning=true;if(!isNullOrUndefined(isAvailProdcut)&&isAvailProdcut==true){AjaxPageUrl=AjaxPageUrl+"&isavail=true";}
LookForGoodDealsATBPush(FRProductList);var shouldShowServiceLayer=false;var alreadyHasServices=false;for(var i=0;i<FRProductList.length;i++){if(FRProductList[i].ParentLineItemGUID!=''){alreadyHasServices=true;break;}}
if(!alreadyHasServices){for(var i=0;i<FRProductList.length;i++){if(FRProductList[i].AvailablePaidServices!=null&&jQuery.isArray(FRProductList[i].AvailablePaidServices)){shouldShowServiceLayer=true;break;}}}
if(!alreadyHasServices&&shouldShowServiceLayer){if(!isNullOrUndefined(itself.OnIntermediateCallBack)){itself.OnIntermediateCallBack();}
OpenServiceLayer(FRProductList);}else{CallATB(FRProductList);}}
function LookForGoodDealsATBPush(FRProductList){itself.GoodDealsCombinationToPush=null;for(var i=0;i<FRProductList.length;i++){if(!isNullOrUndefined(FRProductList[i].AvailableDeals)&&jQuery.isArray(FRProductList[i].AvailableDeals)){for(var j=0;j<FRProductList[i].AvailableDeals.length;j++){var areAllProductsPartOfCombination=true;for(var k=0;k<FRProductList.length;k++){var productFound=false;try{for(var l=0;l<FRProductList[i].AvailableDeals[j].Prs.length;l++){for(var m=0;m<FRProductList[i].AvailableDeals[j].Prs[l].Vrnts.length;m++){for(var n=0;n<FRProductList[i].AvailableDeals[j].Prs[l].Vrnts[m].Vrnts.length;n++){for(var o=0;o<FRProductList[i].AvailableDeals[j].Prs[l].Vrnts[m].Vrnts[n].Ofrs.length;o++){if(FRProductList[i].AvailableDeals[j].Prs[l].Vrnts[m].Vrnts[n].Ofrs[o].ItemOfferId==FRProductList[k].ItemOfferId){productFound=true;}}}}}}catch(ex){}
if(!productFound){areAllProductsPartOfCombination=false;break;}}
if(areAllProductsPartOfCombination){itself.GoodDealsCombinationToPush=FRProductList[i].AvailableDeals[j];break;}}}
if(!isNullOrUndefined(itself.GoodDealsCombinationToPush)){break;}}
for(var i=0;i<FRProductList.length;i++){if(!isNullOrUndefined(FRProductList[i].AvailableDeals)&&jQuery.isArray(FRProductList[i].AvailableDeals)){FRProductList[i].AvailableDeals=null;}}}
function OpenServiceLayer(FRProductList){var ServicesBoxDynamicContent=$j('#OfferServicesLayer .services_list');var contentToAdd='';var productName;var firstServiceForThisProduct;var serviceCnt=0;for(var i=0;i<FRProductList.length;i++){if(serviceCnt>1){break;}
if(FRProductList[i].AvailablePaidServices!=null&&jQuery.isArray(FRProductList[i].AvailablePaidServices)){serviceCnt+=FRProductList[i].AvailablePaidServices.length;}}
for(var i=0;i<FRProductList.length;i++){if(FRProductList[i].AvailablePaidServices!=null&&jQuery.isArray(FRProductList[i].AvailablePaidServices)){firstServiceForThisProduct=true
for(var j=0;j<FRProductList[i].AvailablePaidServices.length;j++){if(firstServiceForThisProduct){productName=FRProductList[i].Title;if(contentToAdd!=''){contentToAdd+='<li class="blank_line"></li>';}
firstServiceForThisProduct=false;}else{productName='';}
contentToAdd+='<li class="service_line">';contentToAdd+='<p class="product_name">'+productName;contentToAdd+='</p>';contentToAdd+='<p class="group_name">';if(serviceCnt>1){contentToAdd+='<input type="checkbox" class="'+FRProductList[i].AvailablePaidServices[j].Id+' '+FRProductList[i].ItemOfferId;contentToAdd+='" id="service_'+FRProductList[i].AvailablePaidServices[j].Id+'_'+FRProductList[i].ItemOfferId+'"  />';contentToAdd+='<label for="service_'+FRProductList[i].AvailablePaidServices[j].Id+'_'+FRProductList[i].ItemOfferId+'">';}
else{contentToAdd+='<input type="checkbox" class="'+FRProductList[i].AvailablePaidServices[j].Id+' '+FRProductList[i].ItemOfferId;contentToAdd+='" id="service_'+FRProductList[i].AvailablePaidServices[j].Id+'_'+FRProductList[i].ItemOfferId+'" style="display:none" checked  />';contentToAdd+='<label for="service_'+FRProductList[i].AvailablePaidServices[j].Id+'_'+FRProductList[i].ItemOfferId+'">';}
contentToAdd+=FRProductList[i].AvailablePaidServices[j].DN+'</label></p>';contentToAdd+='<p class="price_line">';contentToAdd+='<span class="price">'+formatPrice(FRProductList[i].AvailablePaidServices[j].LiPr)+'</span>';contentToAdd+='</p>';contentToAdd+='</li>';}}}
ServicesBoxDynamicContent.empty();ServicesBoxDynamicContent.append(contentToAdd);$j('#OfferServicesLayer a.add_services').unbind('click');$j('#OfferServicesLayer a.add_services').bind('click',function(){var newFrProductList=Array();for(var i=0;i<FRProductList.length;i++){newFrProductList.push(FRProductList[i]);if(!isNullOrUndefined(FRProductList[i].AvailablePaidServices)&&jQuery.isArray(FRProductList[i].AvailablePaidServices)){for(var j=0;j<FRProductList[i].AvailablePaidServices.length;j++){var cb=$j('#OfferServicesLayer #service_'+FRProductList[i].AvailablePaidServices[j].Id+'_'+FRProductList[i].ItemOfferId);if(cb.length!=0&&cb.attr('checked')==true){var serviceFRProduct={};serviceFRProduct.PresCode=FRProductList[i].AvailablePaidServices[j].AltId;serviceFRProduct.SizeCode="99999";serviceFRProduct.ItemOfferId=FRProductList[i].AvailablePaidServices[j].ItemOfferId;serviceFRProduct.Price=toFloat(FRProductList[i].AvailablePaidServices[j].LiPr);serviceFRProduct.Title=FRProductList[i].AvailablePaidServices[j].DN;if(isNullOrUndefined(FRProductList[i].AvailablePaidServices[j].Imgs)){serviceFRProduct.Description="";}else{if(FRProductList[i].AvailablePaidServices[j].Imgs.length>0){serviceFRProduct.Description=FRProductList[i].AvailablePaidServices[j].Imgs[0].URL;}}
serviceFRProduct.ParentLineItemGUID=FRProductList[i].LineItemGUID;serviceFRProduct.LineItemGUID=generateGuid();serviceFRProduct.Quantity=FRProductList[i].Quantity;newFrProductList.push(serviceFRProduct);}}}}
HideNewModalBox();CallATB(newFrProductList);});$j('#OfferServicesLayer a.no_services').unbind('click');$j('#OfferServicesLayer a.no_services').bind('click',function(){HideNewModalBox();CallATB(FRProductList);});HideNewModalBox();if(currentModalBoxContent==null){var scrollTop=$j(window).scrollTop();try{var rightPosition=$j("#wrapper").position().left;}catch(ex){var rightPosition=0;}
var pos={left:null,top:(scrollTop+120),right:(168+rightPosition),bottom:null};ShowNewBlockingModalBox('OfferServicesLayer',pos,function(){HideNewModalBox();CallATB(FRProductList);});}}
function CallATB(FRProductList){$j.ajax({type:'POST',url:AjaxPageUrl,data:{product:$j.toJSON(FRProductList)},dataType:"json",success:function(data){itself.isATBRunning=false;OnATBSuccess(data,FRProductList);},error:function(){itself.isATBRunning=false;alert('error');},complete:function(){itself.isATBRunning=false;},cache:false,async:true,timeout:300000});}
function OnATBSuccess(data,FRProductList){itself.isATBRunning=false;if(!isNullOrUndefined(itself.OnIntermediateCallBack)){itself.OnIntermediateCallBack();}
if(data.StatusString=="OK"){if(!isNullOrUndefined(itself.GoodDealsCombinationToPush)){data.OmnitureATBJSON.ATBEvents=data.OmnitureATBJSON.ATBEvents+",event46";}
setAddToBasketOmnitureTags(data.OmnitureATBJSON);if(!isNullOrUndefined(itself.OnSuccessCallBack)){itself.OnSuccessCallBack();}
else{pushProducts=data.PushProducts;UpdateBasketCount();BindATBLayer(FRProductList);if(!isNullOrUndefined(itself.GoodDealsCombinationToPush)){$j('#ATBLayer .associated_products_block').hide();$j('#ATBLayer .gd').show();var gdManager=new RedcatsOT.AddToBasketGoodDealsManager($j('#ATBLayer div.GoodDeals'));var excludeProducts=Array();for(var i=0;i<FRProductList.length;i++){excludeProducts.push(FRProductList[i].ProductId);}
gdManager.Binding([itself.GoodDealsCombinationToPush],excludeProducts);}else{$j('#ATBLayer .associated_products_block').show();$j('#ATBLayer .gd').hide();GetPushProductsFromAvailForATB(data.AvailRequestsJson,false,data.AvailZone1Template,data.AvailZone2Template,data.PushProducts);$j('#ATBLayer .associated_products .quick_view_overlay,#ATBLayer .associated_products .quick_view_overlay_button').remove();$j('#ATBLayer .associated_products .product_picture').addMiniPDPOnPush('Cross sell ATB');}
ShowATBLayer();}}else{ReportTechnicalErrorsToOmniture('AddToBasketClick_AjaxATBError_KO');if(!isNullOrUndefined(data.ErrorUrl)){if(data.ErrorUrl.indexOf('~')==0){data.ErrorUrl=data.ErrorUrl.substring(1);}
window.location.replace(data.ErrorUrl);}else{alert(trim(data.ErrorMessage));}}}};}

if(isNullOrUndefined(RedcatsOT)){var RedcatsOT={};}
RedcatsOT.BusinessRulesManager=function(){return new function(){var DEFAULT_SIZE_DROPDOWN_VALUE='Taille';var AVAIL_SEPARATOR_TEXT='  ';this.GetSizeRules=function(sizes,isOutOfStockSizeVisible){var rulesObj={'Options':Array(),'IsDropdownDisplayed':true,'IsTextboxDisplayed':false,'IsDropdownEnabled':true};var option;option=$j('<option></option>');option.attr('value','-1');option.html(DEFAULT_SIZE_DROPDOWN_VALUE);rulesObj.Options.push(option);var availSizesNb=0;var selectedSizeIndex=0;var isUnikSku=false;for(var i=0;i<sizes.length;i++){var stkInfo=sizes[i].Ofrs[0].Stk;if(!isOutOfStockSizeVisible){if(stkInfo.AvSt!=0){availSizesNb++;option=$j('<option></option>');option.attr('value',sizes[i].Id);if(!isNullOrUndefined(sizes[i].DN)){option.html(sizes[i].DN+AVAIL_SEPARATOR_TEXT+GetDeliveryInfoText(stkInfo.AvSt,stkInfo.FsAvDt,stkInfo.FsBkOrdDt));}else{option.html(GetDeliveryInfoText(stkInfo.AvSt,stkInfo.FsAvDt,stkInfo.FsBkOrdDt));}
rulesObj.Options.push(option);}}else{option=$j('<option></option>');option.attr('value',sizes[i].Id);if(!isNullOrUndefined(sizes[i].DN)){option.html(sizes[i].DN+AVAIL_SEPARATOR_TEXT+GetDeliveryInfoText(stkInfo.AvSt,stkInfo.FsAvDt,stkInfo.FsBkOrdDt));}else{option.html(GetDeliveryInfoText(stkInfo.AvSt,stkInfo.FsAvDt,stkInfo.FsBkOrdDt));}
rulesObj.Options.push(option);availSizesNb++;}
var tmp=Array();tmp.push(sizes[i]);if(GetSizeCodeFromM2Size(tmp)=='99999'){isUnikSku=true;}}
if(availSizesNb==0){if(!isOutOfStockSizeVisible)rulesObj.IsDropdownEnabled=false;}else if(availSizesNb==1){rulesObj.IsDropdownDisplayed=false;rulesObj.IsTextboxDisplayed=!isUnikSku;}else{rulesObj.IsDropdownDisplayed=true;rulesObj.IsTextboxDisplayed=false;}
return rulesObj;}}}
RedcatsOT.AvailabilityRulesManager=function(){return new function(){this.GetRules=function(offer){var stkInfos=offer.Stk;var rule={'IsMktPr':offer.IsMktPr,'VendorId':offer.VdrInfo.Id};switch(stkInfos.AvSt){case 1:switch(stkInfos.FsAvPl){case 1:rule.DeliveryPlace=outletdelivery;break;case 2:rule.DeliveryPlace=homedelivery;break;}
rule.Status="Available";rule.DeliveryText=productavailablilityinstock;var deliveryUnit=CalculateDeliveryUnit(stkInfos.FsAvDt);var deliveryValue;switch(deliveryUnit){case 1:deliveryValue=stkInfos.FsAvDt*24;rule.DeliveryDate=deliverydelayhours.replace(deliveryDelimiter.toLowerCase(),deliveryValue);break;case 2:deliveryValue=stkInfos.FsAvDt;rule.DeliveryDate=deliverydelaydays.replace(deliveryDelimiter.toLowerCase(),deliveryValue);break;case 3:deliveryValue=Math.floor(stkInfos.FsAvDt/7);rule.DeliveryDate=deliverydelayweeks.replace(deliveryDelimiter.toLowerCase(),deliveryValue);break;}
break;case 0:rule.Status="OutOfStock";rule.DeliveryText=productavailablilityoutofstock;if(!offer.IsMktPr&&stkInfos.AvPrd!=0){rule.IsRestockAlertVisible=true;}else{rule.IsRestockAlertVisible=false;}
break;case 2:rule.Status="BackOrdered";rule.DeliveryText=productavailablilitybackordered;switch(stkInfos.FsBkOrdPl){case 1:rule.DeliveryPlace=outletdelivery;break;case 2:rule.DeliveryPlace=homedelivery;break;}
var deliveryUnit=CalculateDeliveryUnit(stkInfos.FsBkOrdDt);var deliveryValue;switch(deliveryUnit){case 1:deliveryValue=stkInfos.FsBkOrdDt*24;rule.DeliveryDate=deliverydelayhours.replace(deliveryDelimiter.toLowerCase(),deliveryValue);break;case 2:deliveryValue=stkInfos.FsBkOrdDt;rule.DeliveryDate=deliverydelaydays.replace(deliveryDelimiter.toLowerCase(),deliveryValue);break;case 3:deliveryValue=Math.floor(stkInfos.FsBkOrdDt/7);rule.DeliveryDate=deliverydelayweeks.replace(deliveryDelimiter.toLowerCase(),deliveryValue);break;}
if(!offer.IsMktPr){rule.IsRestockAlertVisible=true;}else{rule.IsRestockAlertVisible=false;}
break;}
return rule;}}}
RedcatsOT.CACFRulesManager=function(){return new function(){var pricingRuleManager=new RedcatsOT.PricingRulesManager();var freeDeliveryLink={'Text':'Livraison offerte toute l\'anne','Link':'javascript:popUp(\'/StaticPage/BlankContentPage.aspx?pagename=essayer_avant_payer\',560,630,700);'};this.GetRulesForOffer=function(offer){var rule={};rule.Links=Array();if(offer.Stk.AvSt!=0){if(offer.IsMktPr){if(offer.LiPr>=150){var link={'Text':'Simuler mon achat','Link':'javascript:popUp(\'http://www.finaref.fr/simulpart/Redoute/simulin.asp?product=rpremium&productprice='+pricingRuleManager.formatPrice(offer.LiPr)+'\',560,630,700);'};rule.Links.push(link);}else{var link={'Text':'Plus d\'avantages','Link':'javascript:popUp(\'/StaticPage/BlankContentPage.aspx?pagename=essayer_avant_payer\',560,630,700);'};rule.Links.push(link);}}else{if(offer.LiPr>=150){var link={'Text':'Simuler mon achat','Link':'javascript:popUp(\'http://www.finaref.fr/simulpart/Redoute/simulin.asp?product=rpremium&productprice='+pricingRuleManager.formatPrice(offer.LiPr)+'\',560,630,700);'};rule.Links.push(link);rule.Links.push(freeDeliveryLink);}else if(offer.LiPr>=39){rule.Links.push(freeDeliveryLink);}else{var link={'Text':'Plus d\'avantages','Link':'javascript:popUp(\'/StaticPage/BlankContentPage.aspx?pagename=essayer_avant_payer\',560,630,700);'};rule.Links.push(link);}}}
return rule;}
this.GetGenericRules=function(){var rule={};rule.Links=Array();var link={'Text':'Plus d\'avantages','Link':'javascript:popUp(\'/StaticPage/BlankContentPage.aspx?pagename=essayer_avant_payer\',560,630,700);'};rule.Links.push(link);return rule;}}}
RedcatsOT.ServicesRulesManager=function(){return new function(){this.GetSeductionServices=function(offer){var services=Array();for(var i=0;i<offer.AncSvcs.length;i++){switch(offer.AncSvcs[i].Id){case'9001':case'9002':case'48':var service={};service.Id=offer.AncSvcs[i].Id;service.Text=offer.AncSvcs[i].DN;service.Link=offer.AncSvcs[i].ExpURL;services.push(service);break;}}
return services;}
this.GetTechnicalServices=function(offer){var services=Array();for(var i=0;i<offer.AncSvcs.length;i++){if(offer.AncSvcs[i].BTy.Id==1){switch(offer.AncSvcs[i].Id){case'51':case'60':case'9002':case'9003':case'9008':break;default:var service={};service.Id=offer.AncSvcs[i].Id;service.Text=offer.AncSvcs[i].DN;service.Link=offer.AncSvcs[i].ExpURL;services.push(service);}}}
return services;}
this.GetPaidServices=function(offer){var services=Array();for(var i=0;i<offer.AncSvcs.length;i++){if(offer.AncSvcs[i].BTy.Id==3){var service={};service.Id=offer.AncSvcs[i].Id;service.Text=offer.AncSvcs[i].DN;service.Link=offer.AncSvcs[i].ExpURL;service.Price=offer.AncSvcs[i].LiPr;services.push(service);}}
return services;}}}
RedcatsOT.PricingRulesManager=function(){return new function(){this.GetRulesForDeliveryFees=function(selectedOffer){var deliveryFeesRule={'NormalDelivery':null,'FastDelivery':null};for(var i=0;i<selectedOffer.AncSvcs.length;i++){if(selectedOffer.AncSvcs[i].BTy.Id=="2"){var service=selectedOffer.AncSvcs[i];switch(service.Id){case"60":deliveryFeesRule.FastDelivery=service.LiPr;break;}}}
deliveryFeesRule.NormalDelivery=selectedOffer.VdrInfo.VenDelFee;return deliveryFeesRule;};this.GetRulesForSelectedOffer=function(selectedOffer){var PriceRuleManagement={};PriceRuleManagement.IsMultiDiscount=false;PriceRuleManagement.IsMultiPrice=false;if(selectedOffer.Dis!=0){PriceRuleManagement.Discount=selectedOffer.Dis;PriceRuleManagement.StrikePrice=selectedOffer.PrLiPr;}else{PriceRuleManagement.Discount=0;PriceRuleManagement.StrikePrice=0;}
PriceRuleManagement.Price=selectedOffer.LiPr;if(selectedOffer.EnvCmpl.FCpl==true){PriceRuleManagement.EcoPart=selectedOffer.EnvCmpl.CplFe;}else{PriceRuleManagement.EcoPart=0;}
PriceRuleManagement.TotalPrice=PriceRuleManagement.Price+PriceRuleManagement.EcoPart;if(selectedOffer.LtUntPr!=selectedOffer.LiPr){PriceRuleManagement.UnitPrice=selectedOffer.LtUntPr;}else{PriceRuleManagement.UnitPrice=0;}
return PriceRuleManagement;}
this.GetRulesForProduct=function(product){var PriceRuleManagement={};if(product.Prcs.DiMx==0){if(product.Prcs.PrLiPrMi!=0){if(product.Prcs.PrLiPrMi!=product.Prcs.PrLiPrMx){PriceRuleManagement.IsMultiPrice=true;}else{PriceRuleManagement.IsMultiPrice=false;}
PriceRuleManagement.Price=product.Prcs.PrLiPrMi;}else{if(product.Prcs.LiPrMi!=product.Prcs.LiPrMx){PriceRuleManagement.IsMultiPrice=true;}else{PriceRuleManagement.IsMultiPrice=false;}
PriceRuleManagement.Price=product.Prcs.LiPrMi;}
PriceRuleManagement.Discount=0;PriceRuleManagement.StrikePrice=0;}else{if(product.Prcs.DiMi!=product.Prcs.DiMx){PriceRuleManagement.IsMultiDiscount=true;}else{PriceRuleManagement.IsMultiDiscount=false;}
PriceRuleManagement.Discount=product.Prcs.DiMx;PriceRuleManagement.StrikePrice=product.Prcs.PrLiPrMi;if(product.Prcs.LiPrMi!=product.Prcs.LiPrMx){PriceRuleManagement.IsMultiPrice=true;}else{PriceRuleManagement.IsMultiPrice=false;}
PriceRuleManagement.Price=product.Prcs.LiPrMi;}
if(product.EnvCmpl.FCpl==true){PriceRuleManagement.EcoPart=product.EnvCmpl.MnCplFe;}else{PriceRuleManagement.EcoPart=0;}
PriceRuleManagement.TotalPrice=PriceRuleManagement.Price+PriceRuleManagement.EcoPart;if(product.Prcs.UnPrMi!=product.Prcs.LiPrMi){PriceRuleManagement.UnitPrice=product.Prcs.UnPrMi;}else{PriceRuleManagement.UnitPrice=0;}
return PriceRuleManagement;}
this.GetRulesForGoodDealsProduct=function(product){var PriceRuleManagement={'IsMultiPrice':false,'Price':0,'StrikePrice':0,'TotalPrice':0};if(product.Prcs.LiPrMi!=product.Prcs.LiPrMx){PriceRuleManagement.IsMultiPrice=true;}else{PriceRuleManagement.IsMultiPrice=false;}
PriceRuleManagement.Price=product.Prcs.MinDlPr;PriceRuleManagement.StrikePrice=product.Prcs.LiPrMi;if(!isNullOrUndefined(product.EnvCmpl)&&product.EnvCmpl.FCpl==true){PriceRuleManagement.EcoPart=product.EnvCmpl.MnCplFe;}else{PriceRuleManagement.EcoPart=0;}
PriceRuleManagement.TotalPrice=PriceRuleManagement.Price+PriceRuleManagement.EcoPart;return PriceRuleManagement;}
this.GetRulesForGoodDealsProductOffer=function(offer){var PriceRuleManagement={'IsMultiPrice':false,'Price':0,'StrikePrice':0,'TotalPrice':0};PriceRuleManagement.Price=offer.DlPr;PriceRuleManagement.StrikePrice=offer.LiPr;if(!isNullOrUndefined(offer.EnvCmpl)&&offer.EnvCmpl.FCpl==true){PriceRuleManagement.EcoPart=offer.EnvCmpl.CplFe;}else{PriceRuleManagement.EcoPart=0;}
PriceRuleManagement.TotalPrice=PriceRuleManagement.Price+PriceRuleManagement.EcoPart;return PriceRuleManagement;}
this.GetRulesForGoodDealsTotal=function(rules){var PriceRuleManagement={'IsMultiPrice':false,'Price':0,'StrikePrice':0,'TotalPrice':0,'EcoPart':0};for(var i=0;i<rules.length;i++){if(rules[i].IsMultiPrice){PriceRuleManagement.IsMultiPrice=true;}
PriceRuleManagement.Price+=rules[i].Price;PriceRuleManagement.StrikePrice+=rules[i].StrikePrice;PriceRuleManagement.EcoPart+=rules[i].EcoPart;}
PriceRuleManagement.Price=Math.round(PriceRuleManagement.Price*100)/100;PriceRuleManagement.StrikePrice=Math.round(PriceRuleManagement.StrikePrice*100)/100;if(!isNaN(PriceRuleManagement.EcoPart)){PriceRuleManagement.EcoPart=Math.round(PriceRuleManagement.EcoPart*100)/100;}else{PriceRuleManagement.EcoPart=0;}
PriceRuleManagement.TotalPrice=PriceRuleManagement.Price+PriceRuleManagement.EcoPart;return PriceRuleManagement;}
this.GetPriceTag=function(PrmlPrTyps){var PriceTagManagement={'Display':false};for(var i=0;i<PrmlPrTyps.length;i++){if(PrmlPrTyps[i].DisPrmlPg==true){switch(PrmlPrTyps[i].DN){case"PrixFuteItem":PriceTagManagement.Display=true;PriceTagManagement.Label="PRIX FUTE";PriceTagManagement.Link='javascript:void(0);';PriceTagManagement.Css='prix_fute';break;case"PrixMiniItem":PriceTagManagement.Display=true;PriceTagManagement.Label="Shopping <span>prix</span>";PriceTagManagement.Link='javascript:popUp(\'/ProductDetail/pop-prix_shopping.aspx\',200,798,778);';PriceTagManagement.Css='shopping_prix';break;case"PageRougeItem":PriceTagManagement.Display=true;PriceTagManagement.Label="PRIX ROUGE";PriceTagManagement.Link='javascript:popUp(\'/ProductDetail/pop-prix_rouge.aspx\',200,798,778);';PriceTagManagement.Css='prix_rouge';break;case"PageVerteItem":PriceTagManagement.Display=true;PriceTagManagement.Label="PRIX VERT";PriceTagManagement.Link='javascript:popUp(\'/ProductDetail/pop-prix_vert.aspx\',200,798,778);';PriceTagManagement.Css='prix_vert';break;}}}
return PriceTagManagement;}
this.formatPrice=function(originalPrice){if(null==originalPrice&&'undefined'==typeof originalPrice)return 0;var newPrice=(originalPrice+"").split('.').join(',');if(newPrice.indexOf(',')==-1){newPrice+=",00";}else{if(newPrice.split(',')[1].length==1){newPrice+="0";}}
var cutPrice=newPrice.split(',');if(cutPrice[1].length>2){newPrice=cutPrice[0]+","+cutPrice[1].substring(0,2);}
return newPrice;}
this.formatDiscount=function(originalDiscount){var newDiscount=(originalDiscount+"").split('.')[0];return newDiscount;}}}

var OfferId;var categoryid;var RSPageFrom;var AlertPlaceValue;var CategoryId;var newEmailId;var avaibilityCode;function ShowRSAOrderLayer(page,ALertPlace){RSPageFrom=page;AlertPlaceValue=ALertPlace;if(currentModalBoxContent==null){var scrollTop=$j(window).scrollTop();var height=$j(window).height();var halfHeight=(height/2);var width=$j(window).width();var halfWidth=(width/2);var pos={left:(halfWidth-225),top:(halfHeight+scrollTop-115),right:null,bottom:null};EmailId=GetSubCookieValue("M.R.Basket","UserID");if($j('.CustomeremailAddress').val().length!=0){$j('.CustomeremailAddress').css('background','none');};if(ALertPlace==04){if(isNullOrUndefined(s))return;var tempeVar7=s.eVar7;var tempevents=s.events;var tempProducts=s.products;if(s.eVar7!=null){s.eVar7="";}
if(s.events!=null){s.events="";}
if(s.pageName!=null){s.pageName="";}
if(s.channel!=null){s.channel="";}
if(s.products!=null){s.products="";}
s.channel="AUTRE";s.pageName="FR:RE:AUTRE:Layer_inscription_Restock_Alert_basket";s.tl(false,'o',"RestockAlert");if(tempProducts!=null){s.products=tempProducts;}
if(tempeVar7!=null){s.eVar7=tempeVar7;}
if(tempevents!=null){s.events=tempevents;}}
if(ALertPlace==03){if(isNullOrUndefined(s))return;if(s.pageName!=null){s.pageName="";}
if(s.channel!=null){s.channel="";}
s.pageName="FR:RE:AUTRE:Layer_inscription_Restock_Alert_DirectOrder";s.channel="AUTRE";s.tl(false,'o',"RestockAlert");}
if(ALertPlace==05){if(isNullOrUndefined(s))return;if(s.pageName!=null){s.pageName="";}
if(s.channel!=null){s.channel="";}
s.pageName="FR:RE:AUTRE:Layer_inscription_Restock_Alert_OrderDetailPage";s.channel="AUTRE";s.tl(false,'o',"RestockAlert");}
if(ALertPlace=='03'){ShowNewBlockingModalBox('RSAOrderLayer',pos,function(){NOAlert(RSPageFrom);});}
else{ShowNewBlockingModalBox('RSAOrderLayer',pos);}}}
function setItemofferid(itemofferid,CtgoryId,aviablecode){OfferId=itemofferid;CategoryId=CtgoryId;if(aviablecode!=null||aviablecode!=undefined){avaibilityCode=aviablecode;}}
function ShowRSAThxLayer(){if(currentModalBoxContent==null){var scrollTop=$j(window).scrollTop();var height=$j(window).height();var halfHeight=(height/2);var width=$j(window).width();var halfWidth=(width/2);var pos={left:(halfWidth-292),top:(halfHeight+scrollTop-190),right:null,bottom:null};ShowNewBlockingModalBox('RSAThxLayer',pos);}}
function ShowRSADefaultLayer(page,ALertPlace){RSPageFrom=page;AlertPlaceValue=ALertPlace;if(currentModalBoxContent==null){var scrollTop=$j(window).scrollTop();var height=$j(window).height();var halfHeight=(height/2);var width=$j(window).width();var halfWidth=(width/2);var pos={left:(halfWidth-184),top:(halfHeight+scrollTop-93),right:null,bottom:null};var EmailId=GetSubCookieValue("M.R.Basket","UserID");if(EmailId!=null){$j('input.RSACustomeremailAddress').val(EmailId);}
else{var newEmailId=$j('input.RSACustomeremailAddress').val();if(newEmailId!=undefined&&newEmailId!=""){$j('input.RSACustomeremailAddress').val(newEmailId);}}
if($j('.rsa_content .input_address input').val().length!=0){$j('.rsa_content .input_address input').css('background','none');};if(ALertPlace==02||ALertPlace==01){if(isNullOrUndefined(s))return;var tempprop8=s.prop8;var tempprop6=s.prop6;var tempprop9=s.prop9;var tempprop7=s.prop7;var tempprop12=s.prop12;var tempProducts=s.products;var tempevents=s.events;if(s.prop6!=null){s.prop6="";}
if(s.prop7!=null){s.prop7="";}
if(s.eVar7!=null){s.eVar7="";}
if(s.prop8!=null){s.prop8="";}
if(s.prop9!=null){s.prop9="";}
if(s.prop12!=null){s.prop12="";}
if(s.events!=null){s.events="";}
if(s.products!=null){s.products="";}
if(s.pageName!=null){s.pageName="";}
if(s.channel!=null){s.channel="";}
s.pageName="FR:RE:AUTRE:Layer_inscription_Restock_Alert_pdp";if(RSPageFrom=="VM")
s.pageName="FR:RE:AUTRE:Layer_inscription_Restock_Alert_mannequin_Virtuel";s.channel="AUTRE";SetReStockExternalCampaignTags()
s.tl(false,'o',"RestockAlert");if(tempprop6!=null){s.prop6=tempprop6;}
if(tempprop7!=null){s.prop7=tempprop7;}
if(tempprop8!=null){s.prop8=tempprop8;}
if(tempprop9!=null){s.prop9=tempprop9;}
if(tempprop12!=null){s.prop12=tempprop12;}
if(tempProducts!=null){s.products=tempProducts;}
if(tempevents!=null){s.events=tempevents;}}
ShowNewBlockingModalBox('RSADefaultLayer',pos);}}
function NOAlert(PageCallFrom){if(PageCallFrom=='basket'||RSPageFrom=='basket'){$j('input.yesButtonClicked').val("true");DeleteSelectedLineItems();}
else if(PageCallFrom=='OD'||RSPageFrom=='OD'){$j('input.yesButtonClicked').val("true");$j('input.noButtonClicked').val("true");$j('.cancel_bottom').trigger('click');}
else{$j('input.YesHiddenButton').val("true");ConfirmRowDeleting();}}
function ConfirmAlert(){if(AlertPlaceValue=='03'||AlertPlaceValue=='04'||AlertPlaceValue=='05'){newEmailId=$j('input.CustomeremailAddress').val();}
else{if(AlertPlaceValue=='01'||AlertPlaceValue=='02'){newEmailId=$j('input.RSACustomeremailAddress').val();}}
if(newEmailId==""){ErrorMessage(newEmailId,AlertPlaceValue,RSPageFrom);}
else{var EmailId=GetSubCookieValue("M.R.Basket","UserID");if(validateEmail(newEmailId)){if(newEmailId==EmailId){GetRestockAlertResponseFromAPI(EmailId,AlertPlaceValue);}
else{GetRestockAlertResponseFromAPI(newEmailId,AlertPlaceValue);}}
else{ErrorMessage(newEmailId,AlertPlaceValue,RSPageFrom);}}}
function ErrorMessage(newEmailId,AlertPlaceValue,RSPageFrom){$j('div.error').addClass('errorActive');$j('p.ErrorMessage').html('Cette adresse n\'existe pas ou est incorrecte.<br /> Merci de saisir une adresse e-mail valide.');$j('input.RSACustomeremailAddress').val(newEmailId);if(AlertPlaceValue=='01'||AlertPlaceValue=='02'){ShowRSADefaultLayer(RSPageFrom,AlertPlaceValue);}
else{ShowRSAOrderLayer(RSPageFrom,AlertPlaceValue);}}
function GetRestockAlertResponseFromAPI(EmailId,AlertPlace){var url="/RestockAlert/SendRestockAlertEmail.aspx";var CustomerId=GetSubCookieValue("M.R.User","CustNmbr");if(CustomerId==undefined||CustomerId==""){CustomerId="";}
$j.ajax({type:'GET',url:url,data:{CustomerId:CustomerId,EmailId:EmailId,AlertPlace:AlertPlace,OfferId:OfferId,CategoryId:CategoryId},dataType:"json",timeout:(500000),success:onSuccessRA,error:onErrorRA,cache:false,async:false});}
function onErrorRA(response){return false;}
function onSuccessRA(response){if(isNullOrUndefined(response)){window.location.href=c_techErrorUrl;return;}
else if(response.Status=='WARNING'){$j('div.error').addClass('errorActive');$j('p.ErrorMessage').html(response.ReturnCode);ShowRSADefaultLayer(RSPageFrom,AlertPlaceValue);}
if(response.Status=='SUCCESS'){if(RSPageFrom=='basket'){$j('input.yesButtonClicked').val("true");$j('input.IsDeleteBasket').val("true");HideNewModalBox();var EmailId=GetSubCookieValue("M.R.Basket","UserID");if(newEmailId==EmailId){CustomerLoggedMsg(EmailId);}
else{CustomerNotLoggedMsg(newEmailId);}
BindRSProdSubLayer(response);}
else if(RSPageFrom=='DirectOrder'){$j('input.IsDeleteDO').val("false");HideNewModalBox();$j('input.YesHiddenButton').val("true");ConfirmRowDeleting();var EmailId=GetSubCookieValue("M.R.Basket","UserID");if(newEmailId==EmailId){CustomerLoggedMsg(EmailId);}
else{CustomerNotLoggedMsg(newEmailId);}
BindRSProdSubLayer(response);}
if(AlertPlaceValue=='01'||AlertPlaceValue=='02'||AlertPlaceValue=='05'){$j('input.yesButtonClicked').val("true");$j('input.IsDeleteOD').val("true");HideNewModalBox();$j('input.IsDeleteOD').val("false");var EmailId=GetSubCookieValue("M.R.Basket","UserID");if(newEmailId==EmailId){if(avaibilityCode==3){$j('#RSAThxLayer #stock').attr('style','display:inline');$j('#RSAThxLayer #h24').attr('style','display:none');}
if(avaibilityCode==2){$j('#RSAThxLayer #stock').attr('style','display:none');$j('#RSAThxLayer #h24').attr('style','display:inline');}
CustomerLoggedMsg(EmailId);}
else{CustomerNotLoggedMsg(newEmailId);}
BindRSProdSubLayer(response);}}}
function CustomerLoggedMsg(CustomerEmail){$j('.logged #LoggedInCustomer').text(CustomerEmail);$j('.notLogged #NotLoggedInCustomer').text(CustomerEmail);$j('#RSAThxLayer .notLogged').attr('style','display:none');$j('#RSAThxLayer .logged').attr('style','display:block');if(isNullOrUndefined(s))return;var tempprop6=s.prop6;var tempprop7=s.prop7;var tempprop8=s.prop8;var tempProducts=s.products;var tempevents=s.events;if(s.prop6!=null){s.prop6="";}
if(s.prop7!=null){s.prop7="";}
if(s.eVar7!=null){s.eVar7="";}
if(s.prop8!=null){s.prop8="";}
if(s.events!=null){s.events="";}
if(s.products!=null){s.products="";}
s.pageName="FR:RE:AUTRE:Layer_confirmation_inscription_Restock_Alert_Logged";s.channel="AUTRE";SetReStockExternalCampaignTags();s.tl(false,'o',"RestockAlert");if(tempprop6!=null){s.prop6=tempprop6;}
if(tempprop7!=null){s.prop7=tempprop7;}
if(tempprop8!=null){s.prop8=tempprop8;}
if(tempProducts!=null){s.products=tempProducts;}
if(tempevents!=null){s.events=tempevents;}}
function CustomerNotLoggedMsg(NewCustomerEmail){$j('.logged #LoggedInCustomer').text(NewCustomerEmail);$j('.notLogged #NotLoggedInCustomer').text(NewCustomerEmail);$j('#RSAThxLayer .notLogged').attr('style','display:inline');$j('#RSAThxLayer .logged').attr('style','display:none');if(isNullOrUndefined(s))return;var tempprop6=s.prop6;var tempprop7=s.prop7;var tempprop8=s.prop8;var tempProducts=s.products;var tempevents=s.events;if(s.prop6!=null){s.prop6="";}
if(s.eVar7!=null){s.eVar7="";}
if(s.prop7!=null){s.prop7="";}
if(s.prop8!=null){s.prop8="";}
if(s.events!=null){s.events="";}
if(s.products!=null){s.products="";}
s.pageName="FR:RE:AUTRE:Layer_confirmation_inscription_Restock_Alert_Non_Logged";s.channel="AUTRE";SetReStockExternalCampaignTags()
s.tl(false,'o',"RestockAlert");if(tempprop6!=null){s.prop6=tempprop6;}
if(tempprop7!=null){s.prop7=tempprop7;}
if(tempprop8!=null){s.prop8=tempprop8;}
if(tempProducts!=null){s.products=tempProducts;}
if(tempevents!=null){s.events=tempevents;}}
function BindRSProdSubLayer(data){if(data!=null&&data.PushProducts!=null){pushProducts=data.PushProducts;$j("#RSAThxLayer .associated_products_block").html(pushProducts);$j("#RSAThxLayer .associated_products_block").show();ShowRSAThxLayer();$j('#RSAThxLayer .associated_products .quick_view_overlay,#RSAThxLayer .associated_products .quick_view_overlay_button').remove();$j('#RSAThxLayer .associated_products .product_picture').addMiniPDPOnPush('Restock_Alert');}
else{$j("#RSAThxLayer .associated_products_block").hide();ShowRSAThxLayer();}}
function ShowPSLayer(){if(currentModalBoxContent==null){var scrollTop=$j(window).scrollTop();var rightPosition=($j(window).width()-982)/2;var pos={left:null,top:(scrollTop+120),right:(168+rightPosition),bottom:null};ShowNewModalBox('RSAThxLayer',pos,null,null,false);}};$j(document).ready(function(){$j('.rsa_content .input_address input').focus(function(){$j(this).css('background','none');});$j('.rsa_content .input_address input').blur(function(){if($j(this).val()==''){$j('.rsa_content .input_address input').css({'background':'url(//media.laredoute.fr/images/RSalert/sprite.png) no-repeat scroll 10px -95px transparent'});};});});function validateEmail(txtEmail){var filter=/^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,4})$/;if(filter.test(txtEmail)){return true;}
else{return false;}}
function SetReStockExternalCampaignTags(){if(s.eVar35!=null){s.eVar35="";}
if(s.eVar36!=null){s.eVar36="";}
if(s.eVar37!=null){s.eVar37="";}
if(s.eVar38!=null){s.eVar38="";}
if(s.eVar39!=null){s.eVar39="";}
if(s.eVar24!=null){s.eVar24="";}
s.campaign='';}