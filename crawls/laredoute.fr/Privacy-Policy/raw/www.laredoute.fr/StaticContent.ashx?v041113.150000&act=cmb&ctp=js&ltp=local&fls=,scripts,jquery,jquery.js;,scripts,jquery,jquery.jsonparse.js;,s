/*!
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left")}catch(a){setTimeout(ma,1);return}c.ready()}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function X(a,b,d,f,e,j){var i=a.length;if(typeof b==="object"){for(var o in b)X(a,o,b[o],f,e,d);return a}if(d!==w){f=!j&&f&&c.isFunction(d);for(o=0;o<i;o++)e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);return a}return i?
e(a[0],b):w}function J(){return(new Date).getTime()}function Y(){return false}function Z(){return true}function na(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;i=c.data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;var u=i.live.slice(0);for(k=0;k<u.length;k++){i=u[k];i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1)}j=c(a.target).closest(f,a.currentTarget);n=0;for(r=
j.length;n<r;n++)for(k=0;k<u.length;k++){i=u[k];if(j[n].selector===i.selector){o=j[n].elem;f=null;if(i.preType==="mouseenter"||i.preType==="mouseleave")f=c(a.relatedTarget).closest(i.selector)[0];if(!f||f!==o)d.push({elem:o,handleObj:i})}}n=0;for(r=d.length;n<r;n++){j=d[n];a.currentTarget=j.elem;a.data=j.handleObj.data;a.handleObj=j.handleObj;if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;break}}return b}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,
"&")}function qa(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function ra(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);if(f=f&&f.events){delete e.handle;e.events={};for(var j in f)for(var i in f[j])c.event.add(this,j,f[j][i],f[j][i].data)}}})}function sa(a,b,d){var f,e,j;b=b&&b[0]?b[0].ownerDocument||b[0]:s;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=
true;if(j=c.fragments[a[0]])if(j!==1)f=j}if(!f){f=b.createDocumentFragment();c.clean(a,b,f,d)}if(e)c.fragments[a[0]]=j?f:1;return{fragment:f,cacheable:e}}function K(a,b){var d={};c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a});return d}function wa(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var c=function(a,b){return new c.fn.init(a,b)},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,
Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;c.fn=c.prototype={init:function(a,b){var d,f;if(!a)return this;if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(a==="body"&&!b){this.context=s;this[0]=s.body;this.selector="body";this.length=1;return this}if(typeof a==="string")if((d=Ta.exec(a))&&
(d[1]||!b))if(d[1]){f=b?b.ownerDocument||b:s;if(a=Xa.exec(a))if(c.isPlainObject(b)){a=[s.createElement(a[1])];c.fn.attr.call(a,b,true)}else a=[f.createElement(a[1])];else{a=sa([d[1]],[f]);a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes}return c.merge(this,a)}else{if(b=s.getElementById(d[2])){if(b.id!==d[2])return T.find(a);this.length=1;this[0]=b}this.context=s;this.selector=a;return this}else if(!b&&/^\w+$/.test(a)){this.selector=a;this.context=s;a=s.getElementsByTagName(a);return c.merge(this,
a)}else return!b||b.jquery?(b||T).find(a):c(b).find(a);else if(c.isFunction(a))return T.ready(a);if(a.selector!==w){this.selector=a.selector;this.context=a.context}return c.makeArray(a,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return R.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,b,d){var f=c();c.isArray(a)?ba.apply(f,a):c.merge(f,a);f.prevObject=this;f.context=this.context;if(b===
"find")f.selector=this.selector+(this.selector?" ":"")+d;else if(b)f.selector=this.selector+"."+b+"("+d+")";return f},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();if(c.isReady)a.call(s,c);else Q&&Q.push(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,
function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||c(null)},push:ba,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;if(typeof a==="boolean"){f=a;a=arguments[1]||{};b=2}if(typeof a!=="object"&&!c.isFunction(a))a={};if(d===b){a=this;--b}for(;b<d;b++)if((e=arguments[b])!=null)for(j in e){i=a[j];o=e[j];if(a!==o)if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||
c.isArray(i))?i:c.isArray(o)?[]:{};a[j]=c.extend(f,i,o)}else if(o!==w)a[j]=o}return a};c.extend({noConflict:function(a){A.$=Sa;if(a)A.jQuery=Ra;return c},isReady:false,ready:function(){if(!c.isReady){if(!s.body)return setTimeout(c.ready,13);c.isReady=true;if(Q){for(var a,b=0;a=Q[b++];)a.call(s,c);Q=null}c.fn.triggerHandler&&c(s).triggerHandler("ready")}},bindReady:function(){if(!xa){xa=true;if(s.readyState==="complete")return c.ready();if(s.addEventListener){s.addEventListener("DOMContentLoaded",
L,false);A.addEventListener("load",c.ready,false)}else if(s.attachEvent){s.attachEvent("onreadystatechange",L);A.attachEvent("onload",c.ready);var a=false;try{a=A.frameElement==null}catch(b){}s.documentElement.doScroll&&a&&ma()}}},isFunction:function(a){return $.call(a)==="[object Function]"},isArray:function(a){return $.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,
"isPrototypeOf"))return false;var b;for(b in a);return b===w||aa.call(a,b)},isEmptyObject:function(a){for(var b in a)return false;return true},error:function(a){throw a;},parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=c.trim(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+
a))();else c.error("Invalid JSON: "+a)},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");d.type="text/javascript";if(c.support.scriptEval)d.appendChild(s.createTextNode(a));else d.text=a;b.insertBefore(d,b.firstChild);b.removeChild(d)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);if(d)if(i)for(f in a){if(b.apply(a[f],
d)===false)break}else for(;e<j;){if(b.apply(a[e++],d)===false)break}else if(i)for(f in a){if(b.call(a[f],f,a[f])===false)break}else for(d=a[0];e<j&&b.call(d,e,d)!==false;d=a[++e]);return a},trim:function(a){return(a||"").replace(Wa,"")},makeArray:function(a,b){b=b||[];if(a!=null)a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);return b},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var d=0,f=b.length;d<f;d++)if(b[d]===
a)return d;return-1},merge:function(a,b){var d=a.length,f=0;if(typeof b.length==="number")for(var e=b.length;f<e;f++)a[d++]=b[f];else for(;b[f]!==w;)a[d++]=b[f++];a.length=d;return a},grep:function(a,b,d){for(var f=[],e=0,j=a.length;e<j;e++)!d!==!b(a[e],e)&&f.push(a[e]);return f},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;j<i;j++){e=b(a[j],j,d);if(e!=null)f[f.length]=e}return f.concat.apply([],f)},guid:1,proxy:function(a,b,d){if(arguments.length===2)if(typeof b==="string"){d=a;a=d[b];b=w}else if(b&&
!c.isFunction(b)){d=b;b=w}if(!b&&a)b=function(){return a.apply(d||this,arguments)};if(a)b.guid=a.guid=a.guid||b.guid||c.guid++;return b},uaMatch:function(a){a=a.toLowerCase();a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},browser:{}});P=c.uaMatch(P);if(P.browser){c.browser[P.browser]=true;c.browser.version=P.version}if(c.browser.webkit)c.browser.safari=
true;if(ya)c.inArray=function(a,b){return ya.call(b,a)};T=c(s);if(s.addEventListener)L=function(){s.removeEventListener("DOMContentLoaded",L,false);c.ready()};else if(s.attachEvent)L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);c.ready()}};(function(){c.support={};var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();d.style.display="none";d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,
parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};b.type="text/javascript";try{b.appendChild(s.createTextNode("window."+f+"=1;"))}catch(i){}a.insertBefore(b,a.firstChild);if(A[f]){c.support.scriptEval=true;delete A[f]}try{delete b.test}catch(o){c.support.deleteExpando=false}a.removeChild(b);if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=
false;d.detachEvent("onclick",k)});d.cloneNode(true).fireEvent("onclick")}d=s.createElement("div");d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=s.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var k=s.createElement("div");k.style.width=k.style.paddingLeft="1px";s.body.appendChild(k);c.boxModel=c.support.boxModel=k.offsetWidth===2;s.body.removeChild(k).style.display="none"});a=function(k){var n=
s.createElement("div");k="on"+k;var r=k in n;if(!r){n.setAttribute(k,"return;");r=typeof n[k]==="function"}return r};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=e=j=null}})();c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var G="jQuery"+J(),Ya=0,za={};c.extend({cache:{},expando:G,noData:{embed:true,object:true,
applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var f=a[G],e=c.cache;if(!f&&typeof b==="string"&&d===w)return null;f||(f=++Ya);if(typeof b==="object"){a[G]=f;e[f]=c.extend(true,{},b)}else if(!e[f]){a[G]=f;e[f]={}}a=e[f];if(d!==w)a[b]=d;return typeof b==="string"?a[b]:a}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var d=a[G],f=c.cache,e=f[d];if(b){if(e){delete e[b];c.isEmptyObject(e)&&c.removeData(a)}}else{if(c.support.deleteExpando)delete a[c.expando];
else a.removeAttribute&&a.removeAttribute(c.expando);delete f[d]}}}});c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length)return c.data(this[0]);else if(typeof a==="object")return this.each(function(){c.data(this,a)});var d=a.split(".");d[1]=d[1]?"."+d[1]:"";if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);if(f===w&&this.length)f=c.data(this[0],a);return f===w&&d[1]?this.data(d[0]):f}else return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,
a,b)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var f=c.data(a,b);if(!d)return f||[];if(!f||c.isArray(d))f=c.data(a,b,c.makeArray(d));else f.push(d);return f}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),f=d.shift();if(f==="inprogress")f=d.shift();if(f){b==="fx"&&d.unshift("inprogress");f.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===
w)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,
cb=/^(a|area)$/i,Ba=/radio|checkbox/;c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(n){var r=c(this);r.addClass(a.call(this,n,r.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1)if(e.className){for(var j=" "+e.className+" ",
i=e.className,o=0,k=b.length;o<k;o++)if(j.indexOf(" "+b[o]+" ")<0)i+=" "+b[o];e.className=c.trim(i)}else e.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(k){var n=c(this);n.removeClass(a.call(this,k,n.attr("class")))});if(a&&typeof a==="string"||a===w)for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1&&e.className)if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;i<o;i++)j=j.replace(" "+b[i]+" ",
" ");e.className=c.trim(j)}else e.className=""}return this},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";if(c.isFunction(a))return this.each(function(e){var j=c(this);j.toggleClass(a.call(this,e,j.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var e,j=0,i=c(this),o=b,k=a.split(ca);e=k[j++];){o=f?o:!i.hasClass(e);i[o?"addClass":"removeClass"](e)}else if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);this.className=
this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1)return true;return false},val:function(a){if(a===w){var b=this[0];if(b){if(c.nodeName(b,"option"))return(b.attributes.value||{}).specified?b.value:b.text;if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;b=b.type==="select-one";if(d<0)return null;var j=b?d:0;for(d=b?d+1:e.length;j<d;j++){var i=
e[j];if(i.selected){a=c(i).val();if(b)return a;f.push(a)}}return f}if(Ba.test(b.type)&&!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Za,"")}return w}var o=c.isFunction(a);return this.each(function(k){var n=c(this),r=a;if(this.nodeType===1){if(o)r=a.call(this,k,n.val());if(typeof r==="number")r+="";if(c.isArray(r)&&Ba.test(this.type))this.checked=c.inArray(n.val(),r)>=0;else if(c.nodeName(this,"select")){var u=c.makeArray(r);c("option",this).each(function(){this.selected=
c.inArray(c(this).val(),u)>=0});if(!u.length)this.selectedIndex=-1}else this.value=r}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8)return w;if(f&&b in c.attrFn)return c(a)[b](d);f=a.nodeType!==1||!c.isXMLDoc(a);var e=d!==w;b=f&&c.props[b]||b;if(a.nodeType===1){var j=$a.test(b);if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d}if(c.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;return a[b]}if(!c.support.style&&f&&b==="style"){if(e)a.style.cssText=""+d;return a.style.cssText}e&&a.setAttribute(b,""+d);a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);return a===null?w:a}return c.style(a,b,d)}});var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,
function(b){return"\\"+b})};c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement)a=A;var e,j;if(d.handler){e=d;d=e.handler}if(!d.guid)d.guid=c.guid++;if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;if(!o)j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w};o.elem=a;b=b.split(" ");for(var k,n=0,r;k=b[n++];){j=e?c.extend({},e):{handler:d,data:f};if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();j.namespace=r.slice(0).sort().join(".")}else{r=[];j.namespace=""}j.type=k;j.guid=d.guid;var u=i[k],z=c.event.special[k]||{};if(!u){u=i[k]=[];if(!z.setup||z.setup.call(a,f,r,o)===false)if(a.addEventListener)a.addEventListener(k,o,false);else a.attachEvent&&a.attachEvent("on"+k,o)}if(z.add){z.add.call(a,j);if(!j.handler.guid)j.handler.guid=d.guid}u.push(j);c.event.global[k]=true}a=null}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),
C=z&&z.events;if(z&&C){if(b&&b.type){d=b.handler;b=b.type}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(e in C)c.event.remove(a,e+b)}else{for(b=b.split(" ");e=b[j++];){n=e;i=e.indexOf(".")<0;o=[];if(!i){o=e.split(".");e=o.shift();k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(r=C[e])if(d){n=c.event.special[e]||{};for(B=f||0;B<r.length;B++){u=r[B];if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);n.remove&&n.remove.call(a,u)}if(f!=
null)break}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false)Ca(a,e,z.handle);delete C[e]}}else for(var B=0;B<r.length;B++){u=r[B];if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);r.splice(B--,1)}}}if(c.isEmptyObject(C)){if(b=z.handle)b.elem=null;delete z.events;delete z.handle;c.isEmptyObject(z)&&c.removeData(a)}}}}},trigger:function(a,b,d,f){var e=a.type||a;if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);if(e.indexOf("!")>=0){a.type=
e=e.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===8)return w;a.result=w;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(f=c.data(d,"handle"))&&f.apply(d,b);f=d.parentNode||d.ownerDocument;try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()]))if(d["on"+e]&&d["on"+e].apply(d,b)===false)a.result=false}catch(j){}if(!a.isPropagationStopped()&&
f)c.event.trigger(a,b,f,true);else if(!a.isDefaultPrevented()){f=a.target;var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e])f["on"+e]=null;c.event.triggered=true;f[e]()}}catch(n){}if(i)f["on"+e]=i;c.event.triggered=false}}},handle:function(a){var b,d,f,e;a=arguments[0]=c.event.fix(a||A.event);a.currentTarget=this;b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");a.type=d.shift();f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}e=c.data(this,"events");d=e[a.type];if(e&&d){d=d.slice(0);e=0;for(var j=d.length;e<j;e++){var i=d[e];if(b||f.test(i.namespace)){a.handler=i.handler;a.data=i.data;a.handleObj=i;i=i.handler.apply(this,arguments);if(i!==w){a.result=i;if(i===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[G])return a;var b=a;a=c.Event(b);for(var d=this.props.length,f;d;){f=this.props[--d];a[f]=b[f]}if(!a.target)a.target=a.srcElement||s;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){b=s.documentElement;d=s.body;a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==w)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}))},remove:function(a){var b=true,d=a.origType.replace(O,"");c.each(c.data(this,
"events").live||[],function(){if(d===this.origType.replace(O,""))return b=false});b&&c.event.remove(this,a.origType,oa)}},beforeunload:{setup:function(a,b,d){if(this.setInterval)this.onbeforeunload=d;return false},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&&a.type){this.originalEvent=
a;this.type=a.type}else this.type=a;this.timeStamp=J();this[G]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;var a=this.originalEvent;if(a){a.preventDefault&&a.preventDefault();a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=Z;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;this.stopPropagation()},isDefaultPrevented:Y,isPropagationStopped:Y,
isImmediatePropagationStopped:Y};var Da=function(a){var b=a.relatedTarget;try{for(;b&&b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},Ea=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a)},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da)}}});if(!c.support.submitBubbles)c.event.special.submit=
{setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length)return na("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13)return na("submit",this,arguments)})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};
if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},fa=function(a,b){var d=a.target,f,e;if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");e=Fa(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",
e);if(!(f===w||e===f))if(f!=null||e){a.type="change";return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return fa.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple")return fa.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,
"_change_data",Fa(a))}},setup:function(){if(this.type==="file")return false;for(var a in ea)c.event.add(this,a+".specialChange",ea[a]);return da.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return da.test(this.nodeName)}};ea=c.event.special.change.filters}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);f.type=b;return c.event.handle.call(this,f)}c.event.special[b]={setup:function(){this.addEventListener(a,
d,true)},teardown:function(){this.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d)this[b](j,f,d[j],e);return this}if(c.isFunction(f)){e=f;f=w}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);return e.apply(this,arguments)}):e;if(d==="unload"&&b!=="one")this.one(d,f,e);else{j=0;for(var o=this.length;j<o;j++)c.event.add(this[j],d,i,f)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&
!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else{d=0;for(var f=this.length;d<f;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,f){return this.live(b,d,f,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);a.preventDefault();a.stopPropagation();c.event.trigger(a,b,this[0]);return a.result}},
toggle:function(a){for(var b=arguments,d=1;d<b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,e+1);f.preventDefault();return b[e].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,
u=j?this:c(this.context);if(c.isFunction(f)){e=f;f=w}for(d=(d||"").split(" ");(i=d[o++])!=null;){j=O.exec(i);k="";if(j){k=j[0];i=i.replace(O,"")}if(i==="hover")d.push("mouseenter"+k,"mouseleave"+k);else{n=i;if(i==="focus"||i==="blur"){d.push(Ga[i]+k);i+=k}else i=(Ga[i]||i)+k;b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n})}):u.unbind(pa(i,r),e)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),
function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});(function(){function a(g){for(var h="",l,m=0;g[m];m++){l=g[m];if(l.nodeType===3||l.nodeType===4)h+=l.nodeValue;else if(l.nodeType!==8)h+=a(l.childNodes)}return h}function b(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];
if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1&&!p){t.sizcache=l;t.sizset=q}if(t.nodeName.toLowerCase()===h){y=t;break}t=t[g]}m[q]=y}}}function d(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1){if(!p){t.sizcache=l;t.sizset=q}if(typeof h!=="string"){if(t===h){y=true;break}}else if(k.filter(h,[t]).length>0){y=t;break}}t=t[g]}m[q]=y}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
e=0,j=Object.prototype.toString,i=false,o=true;[0,0].sort(function(){o=false;return 0});var k=function(g,h,l,m){l=l||[];var q=h=h||s;if(h.nodeType!==1&&h.nodeType!==9)return[];if(!g||typeof g!=="string")return l;for(var p=[],v,t,y,S,H=true,M=x(h),I=g;(f.exec(""),v=f.exec(I))!==null;){I=v[3];p.push(v[1]);if(v[2]){S=v[3];break}}if(p.length>1&&r.exec(g))if(p.length===2&&n.relative[p[0]])t=ga(p[0]+p[1],h);else for(t=n.relative[p[0]]?[h]:k(p.shift(),h);p.length;){g=p.shift();if(n.relative[g])g+=p.shift();
t=ga(g,t)}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0]}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);t=v.expr?k.filter(v.expr,v.set):v.set;if(p.length>0)y=z(t);else H=false;for(;p.length;){var D=p.pop();v=D;if(n.relative[D])v=p.pop();else D="";if(v==null)v=h;n.relative[D](y,v,M)}}else y=[]}y||(y=t);y||k.error(D||
g);if(j.call(y)==="[object Array]")if(H)if(h&&h.nodeType===1)for(g=0;y[g]!=null;g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g])))l.push(t[g])}else for(g=0;y[g]!=null;g++)y[g]&&y[g].nodeType===1&&l.push(t[g]);else l.push.apply(l,y);else z(y,l);if(S){k(S,q,l,m);k.uniqueSort(l)}return l};k.uniqueSort=function(g){if(B){i=o;g.sort(B);if(i)for(var h=1;h<g.length;h++)g[h]===g[h-1]&&g.splice(h--,1)}return g};k.matches=function(g,h){return k(g,null,null,h)};k.find=function(g,h,l){var m,q;if(!g)return[];
for(var p=0,v=n.order.length;p<v;p++){var t=n.order[p];if(q=n.leftMatch[t].exec(g)){var y=q[1];q.splice(1,1);if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");m=n.find[t](q,h,l);if(m!=null){g=g.replace(n.match[t],"");break}}}}m||(m=h.getElementsByTagName("*"));return{set:m,expr:g}};k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);g&&h.length;){for(var H in n.filter)if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;D=t[1];y=false;t.splice(1,1);if(D.substr(D.length-
1)!=="\\"){if(v===p)p=[];if(n.preFilter[H])if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true)continue}else y=I=true;if(t)for(var U=0;(D=v[U])!=null;U++)if(D){I=M(D,t,U,v);var Ha=m^!!I;if(l&&I!=null)if(Ha)y=true;else v[U]=false;else if(Ha){p.push(D);y=true}}if(I!==w){l||(v=p);g=g.replace(n.match[H],"");if(!y)return[];break}}}if(g===q)if(y==null)k.error(g);else break;q=g}return v};k.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},
relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);l=l&&!m;if(m)h=h.toLowerCase();m=0;for(var q=g.length,p;m<q;m++)if(p=g[m]){for(;(p=p.previousSibling)&&p.nodeType!==1;);g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h}l&&k.filter(h,g,true)},">":function(g,h){var l=typeof h==="string";if(l&&!/\W/.test(h)){h=h.toLowerCase();for(var m=0,q=g.length;m<q;m++){var p=g[m];if(p){l=p.parentNode;g[m]=l.nodeName.toLowerCase()===h?l:false}}}else{m=0;for(q=g.length;m<q;m++)if(p=g[m])g[m]=
l?p.parentNode:p.parentNode===h;l&&k.filter(h,g,true)}},"":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("parentNode",h,m,g,p,l)},"~":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("previousSibling",h,m,g,p,l)}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l)return(g=h.getElementById(g[1]))?[g]:[]},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);for(var m=0,q=h.length;m<q;m++)h[m].getAttribute("name")===g[1]&&l.push(h[m]);return l.length===0?null:l}},TAG:function(g,h){return h.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";if(p)return g;p=0;for(var v;(v=h[p])!=null;p++)if(v)if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0))l||m.push(v);else if(l)h[p]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},
CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=h[1]+(h[2]||1)-0;g[3]=h[3]-0}g[0]=e++;return g},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");if(!p&&n.attrMap[h])g[1]=n.attrMap[h];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,h,l,m,q){if(g[1]==="not")if((f.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=k(g[3],null,null,h);else{g=k.filter(g[3],h,l,true^q);l||m.push.apply(m,
g);return false}else if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,h,l){return!!k(l[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},
text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},
setFilters:{first:function(g,h){return h===0},last:function(g,h,l,m){return h===m.length-1},even:function(g,h){return h%2===0},odd:function(g,h){return h%2===1},lt:function(g,h,l){return h<l[3]-0},gt:function(g,h,l){return h>l[3]-0},nth:function(g,h,l){return l[3]-0===h},eq:function(g,h,l){return l[3]-0===h}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];if(p)return p(g,l,h,m);else if(q==="contains")return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;else if(q==="not"){h=
h[3];l=0;for(m=h.length;l<m;l++)if(h[l]===g)return false;return true}else k.error("Syntax error, unrecognized expression: "+q)},CHILD:function(g,h){var l=h[1],m=g;switch(l){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(l==="first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":l=h[2];var q=h[3];if(l===1&&q===0)return true;h=h[0];var p=g.parentNode;if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;for(m=p.firstChild;m;m=
m.nextSibling)if(m.nodeType===1)m.nodeIndex=++v;p.sizcache=h}g=g.nodeIndex-q;return l===0?g===0:g%l===0&&g/l>=0}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1},ATTR:function(g,h){var l=h[1];g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);l=g+"";var m=h[2];h=h[4];return g==null?m==="!=":m===
"="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false},POS:function(g,h,l,m){var q=n.setFilters[h[2]];if(q)return q(g,l,h,m)}}},r=n.match.POS;for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,
h){return"\\"+(h-0+1)}))}var z=function(g,h){g=Array.prototype.slice.call(g,0);if(h){h.push.apply(h,g);return h}return g};try{Array.prototype.slice.call(s.documentElement.childNodes,0)}catch(C){z=function(g,h){h=h||[];if(j.call(g)==="[object Array]")Array.prototype.push.apply(h,g);else if(typeof g.length==="number")for(var l=0,m=g.length;l<m;l++)h.push(g[l]);else for(l=0;g[l];l++)h.push(g[l]);return h}}var B;if(s.documentElement.compareDocumentPosition)B=function(g,h){if(!g.compareDocumentPosition||
!h.compareDocumentPosition){if(g==h)i=true;return g.compareDocumentPosition?-1:1}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;if(g===0)i=true;return g};else if("sourceIndex"in s.documentElement)B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h)i=true;return g.sourceIndex?-1:1}g=g.sourceIndex-h.sourceIndex;if(g===0)i=true;return g};else if(s.createRange)B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h)i=true;return g.ownerDocument?-1:1}var l=g.ownerDocument.createRange(),m=
h.ownerDocument.createRange();l.setStart(g,0);l.setEnd(g,0);m.setStart(h,0);m.setEnd(h,0);g=l.compareBoundaryPoints(Range.START_TO_END,m);if(g===0)i=true;return g};(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();g.innerHTML="<a name='"+h+"'/>";var l=s.documentElement;l.insertBefore(g,l.firstChild);if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p)return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&
q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[]};n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&p&&p.nodeValue===q}}l.removeChild(g);l=g=null})();(function(){var g=s.createElement("div");g.appendChild(s.createComment(""));if(g.getElementsByTagName("*").length>0)n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);if(h[1]==="*"){h=[];for(var m=0;l[m];m++)l[m].nodeType===1&&h.push(l[m]);l=h}return l};g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(h){return h.getAttribute("href",2)};g=null})();s.querySelectorAll&&function(){var g=k,h=s.createElement("div");h.innerHTML="<p class='TEST'></p>";if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;if(!v&&q.nodeType===9&&!x(q))try{return z(q.querySelectorAll(m),p)}catch(t){}return g(m,q,p,v)};for(var l in g)k[l]=g[l];h=null}}();
(function(){var g=s.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m)return l.getElementsByClassName(h[1])};g=null}}})();var E=s.compareDocumentPosition?function(g,h){return!!(g.compareDocumentPosition(h)&16)}:
function(g,h){return g!==h&&(g.contains?g.contains(h):true)},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false},ga=function(g,h){var l=[],m="",q;for(h=h.nodeType?[h]:h;q=n.match.PSEUDO.exec(g);){m+=q[0];g=g.replace(n.match.PSEUDO,"")}g=n.relative[g]?g+"*":g;q=0;for(var p=h.length;q<p;q++)k(g,h[q],l);return k.filter(m,l)};c.find=k;c.expr=k.selectors;c.expr[":"]=c.expr.filters;c.unique=k.uniqueSort;c.text=a;c.isXMLDoc=x;c.contains=E})();var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,
gb=/,/;R=Array.prototype.slice;var Ia=function(a,b,d){if(c.isFunction(b))return c.grep(a,function(e,j){return!!b.call(e,j,e)===d});else if(b.nodeType)return c.grep(a,function(e){return e===b===d});else if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1});if(Ua.test(b))return c.filter(b,f,!d);else b=c.filter(b,f)}return c.grep(a,function(e){return c.inArray(e,b)>=0===d})};c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;f<e;f++){d=b.length;
c.find(a,this[f],b);if(f>0)for(var j=d;j<b.length;j++)for(var i=0;i<d;i++)if(b[i]===b[j]){b.splice(j--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,f=b.length;d<f;d++)if(c.contains(this,b[d]))return true})},not:function(a){return this.pushStack(Ia(this,a,false),"not",a)},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j=
{},i;if(f&&a.length){e=0;for(var o=a.length;e<o;e++){i=a[e];j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i)}for(;f&&f.ownerDocument&&f!==b;){for(i in j){e=j[i];if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});delete j[i]}}f=f.parentNode}}return d}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;return this.map(function(n,r){for(;r&&r.ownerDocument&&r!==b;){if(k?k.index(r)>-1:c(r).is(a))return r;r=r.parentNode}return null})},index:function(a){if(!a||typeof a===
"string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);b=c.merge(this.get(),a);return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",
d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);eb.test(a)||(f=d);if(f&&typeof f==="string")e=c.filter(f,e);e=this.length>1?c.unique(e):e;if((this.length>1||gb.test(f))&&fb.test(a))e=e.reverse();return this.pushStack(e,a,R.call(arguments).join(","))}});c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return c.find.matches(a,b)},dir:function(a,b,d){var f=[];for(a=a[b];a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));){a.nodeType===
1&&f.push(a);a=a[b]}return f},nth:function(a,b,d){b=b||1;for(var f=0;a;a=a[d])if(a.nodeType===1&&++f===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?
a:b+"></"+d+">"},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};F.optgroup=F.option;F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;F.th=F.td;if(!c.support.htmlSerialize)F._default=[1,"div<div>","</div>"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=
c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==w)return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,f;(f=this[d])!=null;d++)if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));c.cleanData([f])}f.parentNode&&f.parentNode.removeChild(f)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;if(!d){d=f.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0]}else return this.cloneNode(true)});if(a===true){ra(this,b);ra(this.find("*"),b.find("*"))}return b},html:function(a){if(a===w)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,
""):null;else if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);try{for(var b=0,d=this.length;b<d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(f){this.empty().append(a)}}else c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();j.empty().append(function(){return a.call(this,e,i)})}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&
this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),f=d.html();d.replaceWith(a.call(this,b,f))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||
u.appendChild(u.ownerDocument.createElement("tbody")):u}var e,j,i=a[0],o=[],k;if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i))return this.each(function(){c(this).domManip(a,b,d,true)});if(c.isFunction(i))return this.each(function(u){var z=c(this);a[0]=i.call(this,u,b?z.html():w);z.domManip(a,b,d)});if(this[0]){e=i&&i.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);k=e.fragment;if(j=k.childNodes.length===
1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");for(var n=0,r=this.length;n<r;n++)d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k)}o.length&&c.each(o,Qa)}return this}});c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];d=c(d);var e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this}else{e=0;for(var j=d.length;e<j;e++){var i=(e>0?this.clone(true):this).get();c.fn[b].apply(c(d[e]),i);f=f.concat(i)}return this.pushStack(f,a,d.selector)}}});c.extend({clean:function(a,b,d,f){b=b||s;if(typeof b.createElement==="undefined")b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;for(var e=[],j=0,i;(i=a[j])!=null;j++){if(typeof i==="number")i+="";if(i){if(typeof i==="string"&&!jb.test(i))i=b.createTextNode(i);else if(typeof i==="string"){i=i.replace(Ka,Ma);var o=(La.exec(i)||["",
""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");for(r.innerHTML=k[1]+i+k[2];n--;)r=r.lastChild;if(!c.support.tbody){n=ib.test(i);o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];for(k=o.length-1;k>=0;--k)c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k])}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);i=r.childNodes}if(i.nodeType)e.push(i);else e=
c.merge(e,i)}}if(d)for(j=0;e[j];j++)if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript"))f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));d.appendChild(e[j])}return e},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;(o=a[i])!=null;i++)if(d=o[c.expando]){b=f[d];if(b.events)for(var k in b.events)e[k]?
c.event.remove(o,k):Ca(o,k,b.handle);if(j)delete o[c.expando];else o.removeAttribute&&o.removeAttribute(c.expando);delete f[d]}}});var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=
function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w)return c.curCSS(d,f);if(typeof e==="number"&&!kb.test(f))e+="px";c.style(d,f,e)})};c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8)return w;if((b==="width"||b==="height")&&parseFloat(d)<0)d=w;var f=a.style||a,e=d!==w;if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";a=f.filter||c.curCSS(a,"filter")||"";f.filter=
Na.test(a)?a.replace(Na,b):b}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":""}if(ha.test(b))b=Pa;b=b.replace(ia,ja);if(e)f[b]=d;return f[b]},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);if(f==="margin")e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;else e-=parseFloat(c.curCSS(a,
"border"+this+"Width",true))||0})}a.offsetWidth!==0?i():c.swap(a,ob,i);return Math.max(0,Math.round(e))}return c.curCSS(a,b,d)},curCSS:function(a,b,d){var f,e=a.style;if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return f===""?"1":f}if(ha.test(b))b=Pa;if(!d&&e&&e[b])f=e[b];else if(rb){if(ha.test(b))b="float";b=b.replace(lb,"-$1").toLowerCase();e=a.ownerDocument.defaultView;if(!e)return null;if(a=e.getComputedStyle(a,null))f=
a.getPropertyValue(b);if(b==="opacity"&&f==="")f="1"}else if(a.currentStyle){d=b.replace(ia,ja);f=a.currentStyle[b]||a.currentStyle[d];if(!mb.test(f)&&nb.test(f)){b=e.left;var j=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;e.left=d==="fontSize"?"1em":f||0;f=e.pixelLeft+"px";e.left=b;a.runtimeStyle.left=j}}return f},swap:function(a,b,d){var f={};for(var e in b){f[e]=a.style[e];a.style[e]=b[e]}d.call(a);for(e in b)a.style[e]=f[e]}});if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=
a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!==
"string")return zb.call(this,a);else if(!this.length)return this;var f=a.indexOf(" ");if(f>=0){var e=a.slice(f,a.length);a=a.slice(0,f)}f="GET";if(b)if(c.isFunction(b)){d=b;b=null}else if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);f="POST"}var j=this;c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified")j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);d&&j.each(d,[i.responseText,o,i])}});return this},
serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type))}).map(function(a,b){a=c(this).val();return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d}}):{name:b.name,value:a}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f})},getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&
e.success.call(k,o,i,x);e.global&&f("ajaxSuccess",[x,e])}function d(){e.complete&&e.complete.call(k,x,i);e.global&&f("ajaxComplete",[x,e]);e.global&&!--c.active&&c.event.trigger("ajaxStop")}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p)}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();if(e.data&&e.processData&&typeof e.data!=="string")e.data=c.param(e.data,e.traditional);if(e.dataType==="jsonp"){if(n==="GET")N.test(e.url)||(e.url+=(ka.test(e.url)?
"&":"?")+(e.jsonp||"callback")+"=?");else if(!e.data||!N.test(e.data))e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";e.dataType="json"}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;if(e.data)e.data=(e.data+"").replace(N,"="+j+"$1");e.url=e.url.replace(N,"="+j+"$1");e.dataType="script";A[j]=A[j]||function(q){o=q;b();d();A[j]=w;try{delete A[j]}catch(p){}z&&z.removeChild(C)}}if(e.dataType==="script"&&e.cache===null)e.cache=false;if(e.cache===
false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"")}if(e.data&&n==="GET")e.url+=(ka.test(e.url)?"&":"?")+e.data;e.global&&!c.active++&&c.event.trigger("ajaxStart");r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");C.src=e.url;if(e.scriptCharset)C.charset=e.scriptCharset;if(!j){var B=
false;C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;b();d();C.onload=C.onreadystatechange=null;z&&C.parentNode&&z.removeChild(C)}}}z.insertBefore(C,z.firstChild);return w}var E=false,x=e.xhr();if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);try{if(e.data||a&&a.contentType)x.setRequestHeader("Content-Type",e.contentType);if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",
c.lastModified[e.url]);c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url])}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default)}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");x.abort();return false}e.global&&f("ajaxSend",[x,e]);var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||
d();E=true;if(x)x.onreadystatechange=c.noop}else if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;x.onreadystatechange=c.noop;i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";var p;if(i==="success")try{o=c.httpData(x,e.dataType,e)}catch(v){i="parsererror";p=v}if(i==="success"||i==="notmodified")j||b();else c.handleError(e,x,i,p);d();q==="timeout"&&x.abort();if(e.async)x=null}};try{var h=x.abort;x.abort=function(){x&&h.call(x);
g("abort")}}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout")},e.timeout);try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null)}catch(m){c.handleError(e,x,null,m);d()}e.async||g();return x}},handleError:function(a,b,d,f){if(a.error)a.error.call(a.context||a,b,d,f);if(a.global)(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===
1223||a.status===0}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");if(d)c.lastModified[b]=d;if(f)c.etag[b]=f;return a.status===304||a.status===0},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;a=e?a.responseXML:a.responseText;e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");if(d&&d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b===
"json"||!b&&f.indexOf("json")>=0)a=c.parseJSON(a);else if(b==="script"||!b&&f.indexOf("javascript")>=0)c.globalEval(a);return a},param:function(a,b){function d(i,o){if(c.isArray(o))c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n)});else!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n)}):f(i,o)}function f(i,o){o=c.isFunction(o)?o():o;e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o)}var e=[];if(b===w)b=c.ajaxSettings.traditional;
if(c.isArray(a)||a.jquery)c.each(a,function(){f(this.name,this.value)});else for(var j in a)d(j,a[j]);return e.join("&").replace(yb,"+")}});var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b){if(a||a===0)return this.animate(K("show",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";if(c.css(this[a],"display")==="none"){d=this[a].nodeName;var f;if(la[d])f=la[d];else{var e=c("<"+d+" />").appendTo("body");f=e.css("display");if(f==="none")f="block";e.remove();la[d]=f}c.data(this[a],"olddisplay",f)}}a=0;for(b=this.length;a<b;a++)this[a].style.display=c.data(this[a],"olddisplay")||"";return this}},hide:function(a,b){if(a||a===0)return this.animate(K("hide",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");!d&&d!=="none"&&c.data(this[a],
"olddisplay",c.css(this[a],"display"))}a=0;for(b=this.length;a<b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";if(c.isFunction(a)&&c.isFunction(b))this._toggle.apply(this,arguments);else a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(K("toggle",3),a,b);return this},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d)},
animate:function(a,b,d,f){var e=c.speed(b,d,f);if(c.isEmptyObject(a))return this.each(e.complete);return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;for(i in a){var n=i.replace(ia,ja);if(i!==n){a[n]=a[i];delete a[i];i=n}if(a[i]==="hide"&&o||a[i]==="show"&&!o)return j.complete.call(this);if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");j.overflow=this.style.overflow}if(c.isArray(a[i])){(j.specialEasing=
j.specialEasing||{})[i]=a[i][1];a[i]=a[i][0]}}if(j.overflow!=null)this.style.overflow="hidden";j.curAnim=c.extend({},a);c.each(a,function(r,u){var z=new c.fx(k,j,r);if(Ab.test(u))z[u==="toggle"?o?"show":"hide":u](a);else{var C=Bb.exec(u),B=z.cur(true)||0;if(C){u=parseFloat(C[2]);var E=C[3]||"px";if(E!=="px"){k.style[r]=(u||1)+E;B=(u||1)/z.cur(true)*B;k.style[r]=B+E}if(C[1])u=(C[1]==="-="?-1:1)*u+B;z.custom(B,u,E)}else z.custom(B,u,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]);
this.each(function(){for(var f=d.length-1;f>=0;f--)if(d[f].elem===this){b&&d[f](true);d.splice(f,1)}});b||this.dequeue();return this}});c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f)}});c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};f.duration=c.fx.off?0:typeof f.duration===
"number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;f.old=f.complete;f.complete=function(){f.queue!==false&&c(this).dequeue();c.isFunction(f.old)&&f.old.call(this)};return f},easing:{linear:function(a,b,d,f){return d+f*a},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||
c.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0},custom:function(a,b,d){function f(j){return e.step(j)}this.startTime=J();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;
this.pos=this.state=0;var e=this;f.elem=this.elem;if(f()&&c.timers.push(f)&&!W)W=setInterval(c.fx.tick,13)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=J(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=
this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var f in this.options.curAnim)if(this.options.curAnim[f]!==true)d=false;if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;a=c.data(this.elem,"olddisplay");this.elem.style.display=a?a:this.options.display;if(c.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&c(this.elem).hide();if(this.options.hide||this.options.show)for(var e in this.options.curAnim)c.style(this.elem,
e,this.options.orig[e]);this.options.complete.call(this.elem)}return false}else{e=b-this.startTime;this.state=e/this.options.duration;a=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||
c.fx.stop()},stop:function(){clearInterval(W);W=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&&c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length};c.fn.offset="getBoundingClientRect"in s.documentElement?
function(a){var b=this[0];if(a)return this.each(function(e){c.offset.setOffset(this,a,e)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);var d=b.getBoundingClientRect(),f=b.ownerDocument;b=f.body;f=f.documentElement;return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:function(a){var b=
this[0];if(a)return this.each(function(r){c.offset.setOffset(this,a,r)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;for(var k=b.offsetTop,n=b.offsetLeft;(b=b.parentNode)&&b!==o&&b!==i;){if(c.offset.supportsFixedPosition&&f.position==="fixed")break;j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;n-=b.scrollLeft;if(b===d){k+=b.offsetTop;n+=b.offsetLeft;if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=d;d=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=j}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;n+=o.offsetLeft}if(c.offset.supportsFixedPosition&&
f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);n+=Math.max(i.scrollLeft,o.scrollLeft)}return{top:k,left:n}};c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);d=b.firstChild;f=d.firstChild;e=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=f.offsetTop!==5;this.doesAddBorderForTableAndCells=e.offsetTop===5;f.style.position="fixed";f.style.top="20px";this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;f.style.position=f.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;a.removeChild(b);
c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;d+=parseFloat(c.curCSS(a,"marginLeft",true))||0}return{top:b,left:d}},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position")))a.style.position="relative";var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;if(c.isFunction(b))b=b.call(a,
d,e);d={top:b.top-e.top+j,left:b.left-e.left+i};"using"in b?b.using.call(a,d):f.css(d)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;return{top:d.top-
f.top,left:d.left-f.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(f){var e=this[0],j;if(!e)return null;if(f!==w)return this.each(function(){if(j=wa(this))j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());else this[d]=f});else return(j=wa(e))?"pageXOffset"in j?j[a?"pageYOffset":
"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null};c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null};c.fn[d]=function(f){var e=this[0];if(!e)return f==null?null:this;if(c.isFunction(f))return this.each(function(j){var i=c(this);i[d](f.call(this,j,i[d]()))});return"scrollTo"in
e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px")}});A.jQuery=A.$=c})(window);

(function($){var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s={"array":function(x){var a=["["],b,f,i,l=x.length,v;for(i=0;i<l;i+=1){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=="string"){if(b)a[a.length]=",";a[a.length]=v;b=true}}}a[a.length]="]";return a.join("")},"boolean":function(x){return String(x)},"null":function(x){return"null"},"number":function(x){return isFinite(x)?String(x):"null"},"object":function(x){if(x){if(x instanceof Array)return s.array(x);
var a=["{"],b,f,i,v;for(i in x){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=="string"){if(b)a[a.length]=",";a.push(s.string(i),":",v);b=true}}}a[a.length]="}";return a.join("")}return"null"},"string":function(x){if(/["\\\x00-\x1f]/.test(x))x=x.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c)return c;c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)});return'"'+x+'"'}};$.toJSON=function(v){var f=isNaN(v)?s[typeof v]:s["number"];if(f)return f(v)};$.parseJSON=
function(v,safe){if(safe===undefined)safe=$.parseJSON.safe;if(safe&&!/^("(\\.|[^"\\\n\r])*?"|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/.test(v))return undefined;return eval("("+v+")")};$.parseJSON.safe=false})(jQuery);
/*Copyright Jason E. Smith 2008 Licensed under the Apache License, Version 2.0 (the "License");
You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
CREDITS:
Thanks to Kris Zyp from SitePen for contributing his source for
a standalone port of JSONQuery (from the dojox.json.query module).
OVERVIEW:
JSONQuery.js is a standalone port of the dojox.json.query module. It is intended as
a dropin solution with zero dependencies. JSONQuery is intended to succeed and improve upon
the JSONPath api (http://goessner.net/articles/JsonPath/) which offers rich powerful
querying capabilities similar to those of XQuery.
*/
(function(){function map(arr,fun){var len=arr.length;if(typeof fun!="function")throw new TypeError;var res=new Array(len);var thisp=arguments[2];for(var i=0;i<len;i++)if(i in arr)res[i]=fun.call(thisp,arr[i],i,arr);return res}function filter(arr,fun){var len=arr.length;if(typeof fun!="function")throw new TypeError;var res=new Array;var thisp=arguments[2];for(var i=0;i<len;i++)if(i in arr){var val=arr[i];if(fun.call(thisp,val,i,arr))res.push(val)}return res}function slice(obj,start,end,step){var len=
obj.length,results=[];end=end||len;start=start<0?Math.max(0,start+len):Math.min(len,start);end=end<0?Math.max(0,end+len):Math.min(len,end);for(var i=start;i<end;i+=step)results.push(obj[i]);return results}function expand(obj,name){var results=[];function walk(obj){if(name)if(name===true&&!(obj instanceof Array))results.push(obj);else if(obj[name])results.push(obj[name]);for(var i in obj){var val=obj[i];if(!name)results.push(val);else if(val&&typeof val=="object")walk(val)}}if(name instanceof Array){if(name.length==
1)return obj[name[0]];for(var i=0;i<name.length;i++)results.push(obj[name[i]])}else walk(obj);return results}function distinctFilter(array,callback){var outArr=[];var primitives={};for(var i=0,l=array.length;i<l;++i){var value=array[i];if(callback(value,i,array))if(typeof value=="object"&&value){if(!value.__included){value.__included=true;outArr.push(value)}}else if(!primitives[value+typeof value]){primitives[value+typeof value]=true;outArr.push(value)}}for(i=0,l=outArr.length;i<l;++i)if(outArr[i])delete outArr[i].__included;
return outArr}var JSONQuery=function(query,obj){tokens=[];var depth=0;var str=[];query=query.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(t){depth+=t=="["?1:t=="]"?-1:0;return t=="]"&&depth>0?"`]":t.charAt(0)=='"'||t.charAt(0)=="'"?"`"+(str.push(t)-1):t});var prefix="";function call(name){prefix=name+"("+prefix}function makeRegex(t,a,b,c,d){return str[d].match(/[\*\?]/)||c=="~"?"/^"+str[d].substring(1,str[d].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,
".$1")+(c=="~"?"$/i":"$/")+".test("+a+")":t}query.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw new Error("Unsafe function call");});query=query.replace(/([^=]=)([^=])/g,"$1=$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(t){return t.charAt(0)=="."?t:t=="@"?"$obj":(t.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+t}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(t,a,b){var oper=t.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/);if(oper){var prefix=
"";if(t.match(/^\./)){call("expand");prefix=",true)"}call(oper[1].match(/\=/)?"map":oper[1].match(/\^/)?"distinctFilter":"filter");return prefix+",function($obj){return "+oper[2]+"})"}oper=t.match(/^\[\s*([\/\\].*)\]/);if(oper)return".concat().sort(function(a,b){"+oper[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(t,a,b){return"var av= "+b.replace(/\$obj/,"a")+",bv= "+b.replace(/\$obj/,"b")+";if(av>bv||bv==null){return "+(a=="/"?1:-1)+";}\n"+"if(bv>av||av==null){return "+(a=="/"?-1:1)+";}\n"})+
"})";oper=t.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/);if(oper){call("slice");return","+(oper[1]||0)+","+(oper[2]||0)+","+(oper[3]||1)+")"}if(t.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)){call("expand");return(t.charAt(1)=="."?",'"+b+"'":t.match(/,/)?","+t:"")+")"}return t}).replace(/(\$obj\s*(\.\s*[\w_$]+\s*)*)(==|~)\s*`([0-9]+)/g,makeRegex).replace(/`([0-9]+)\s*(==|~)\s*(\$obj(\s*\.\s*[\w_$]+)*)/g,function(t,a,b,c,d){return makeRegex(t,c,d,b,a)});query=prefix+(query.charAt(0)=="$"?"":"$")+query.replace(/`([0-9]+|\])/g,
function(t,a){return a=="]"?"]":str[a]});var executor=eval("1&&function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj=$;return "+query+"}");for(var i=0;i<arguments.length-1;i++)arguments[i]=arguments[i+1];return obj?executor.apply(this,arguments):executor};if(typeof namespace=="function")namespace("json::JSONQuery",JSONQuery);else window["JSONQuery"]=JSONQuery})();
/**
* hoverIntent r5 // 2007.03.27 // jQuery 1.1.2+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne <brian@cherne.net>
*/
(function($j){$j.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$j.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$j(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$j(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$j(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);
/*jCarousel - Riding carousels with jQuery  http://sorgalla.com/jcarousel/
Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
Built on top of the jQuery library http://jquery.com
Inspired by the "Carousel Component" by Bill Scott http://billwscott.com/carousel/
*/
(function (g) { var q = { vertical: !1, rtl: !1, start: 1, offset: 1, size: null, scroll: 3, visible: null, animation: "normal", easing: "swing", auto: 0, wrap: null, initCallback: null, setupCallback: null, reloadCallback: null, itemLoadCallback: null, itemFirstInCallback: null, itemFirstOutCallback: null, itemLastInCallback: null, itemLastOutCallback: null, itemVisibleInCallback: null, itemVisibleOutCallback: null, animationStepCallback: null, buttonNextHTML: "<div></div>", buttonPrevHTML: "<div></div>", buttonNextEvent: "click", buttonPrevEvent: "click", buttonNextCallback: null, buttonPrevCallback: null, itemFallbackDimension: null }, m = !1; g(window).bind("load.jcarousel", function () { m = !0 }); g.jcarousel = function (a, c) { this.options = g.extend({}, q, c || {}); this.autoStopped = this.locked = !1; this.buttonPrevState = this.buttonNextState = this.buttonPrev = this.buttonNext = this.list = this.clip = this.container = null; if (!c || c.rtl === void 0) this.options.rtl = (g(a).attr("dir") || g("html").attr("dir") || "").toLowerCase() == "rtl"; this.wh = !this.options.vertical ? "width" : "height"; this.lt = !this.options.vertical ? this.options.rtl ? "right" : "left" : "top"; for (var b = "", d = a.className.split(" "), f = 0; f < d.length; f++) if (d[f].indexOf("jcarousel-skin") != -1) { g(a).removeClass(d[f]); b = d[f]; break } a.nodeName.toUpperCase() == "UL" || a.nodeName.toUpperCase() == "OL" ? (this.list = g(a), this.clip = this.list.parents(".jcarousel-clip"), this.container = this.list.parents(".jcarousel-container")) : (this.container = g(a), this.list = this.container.find("ul,ol").eq(0), this.clip = this.container.find(".jcarousel-clip")); if (this.clip.size() === 0) this.clip = this.list.wrap("<div></div>").parent(); if (this.container.size() === 0) this.container = this.clip.wrap("<div></div>").parent(); b !== "" && this.container.parent()[0].className.indexOf("jcarousel-skin") == -1 && this.container.wrap('<div class=" ' + b + '"></div>'); this.buttonPrev = g(".jcarousel-prev", this.container); if (this.buttonPrev.size() === 0 && this.options.buttonPrevHTML !== null) this.buttonPrev = g(this.options.buttonPrevHTML).appendTo(this.container); this.buttonPrev.addClass(this.className("jcarousel-prev")); this.buttonNext = g(".jcarousel-next", this.container); if (this.buttonNext.size() === 0 && this.options.buttonNextHTML !== null) this.buttonNext = g(this.options.buttonNextHTML).appendTo(this.container); this.buttonNext.addClass(this.className("jcarousel-next")); this.clip.addClass(this.className("jcarousel-clip")).css({ position: "relative" }); this.list.addClass(this.className("jcarousel-list")).css({ overflow: "hidden", position: "relative", top: 0, margin: 0, padding: 0 }).css(this.options.rtl ? "right" : "left", 0); this.container.addClass(this.className("jcarousel-container")).css({ position: "relative" }); !this.options.vertical && this.options.rtl && this.container.addClass("jcarousel-direction-rtl").attr("dir", "rtl"); var j = this.options.visible !== null ? Math.ceil(this.clipping() / this.options.visible) : null, b = this.list.children("li"), e = this; if (b.size() > 0) { var h = 0, i = this.options.offset; b.each(function () { e.format(this, i++); h += e.dimension(this, j) }); this.list.css(this.wh, h + 100 + "px"); if (!c || c.size === void 0) this.options.size = b.size() } this.container.css("display", "block"); this.buttonNext.css("display", "block"); this.buttonPrev.css("display", "block"); this.funcNext = function () { e.next() }; this.funcPrev = function () { e.prev() }; this.funcResize = function () { e.resizeTimer && clearTimeout(e.resizeTimer); e.resizeTimer = setTimeout(function () { e.reload() }, 100) }; this.options.initCallback !== null && this.options.initCallback(this, "init"); !m && g.browser.safari ? (this.buttons(!1, !1), g(window).bind("load.jcarousel", function () { e.setup() })) : this.setup() }; var f = g.jcarousel; f.fn = f.prototype = { jcarousel: "0.2.8" }; f.fn.extend = f.extend = g.extend; f.fn.extend({ setup: function () { this.prevLast = this.prevFirst = this.last = this.first = null; this.animating = !1; this.tail = this.resizeTimer = this.timer = null; this.inTail = !1; if (!this.locked) { this.list.css(this.lt, this.pos(this.options.offset) + "px"); var a = this.pos(this.options.start, !0); this.prevFirst = this.prevLast = null; this.animate(a, !1); g(window).unbind("resize.jcarousel", this.funcResize).bind("resize.jcarousel", this.funcResize); this.options.setupCallback !== null && this.options.setupCallback(this) } }, reset: function () { this.list.empty(); this.list.css(this.lt, "0px"); this.list.css(this.wh, "10px"); this.options.initCallback !== null && this.options.initCallback(this, "reset"); this.setup() }, reload: function () { this.tail !== null && this.inTail && this.list.css(this.lt, f.intval(this.list.css(this.lt)) + this.tail); this.tail = null; this.inTail = !1; this.options.reloadCallback !== null && this.options.reloadCallback(this); if (this.options.visible !== null) { var a = this, c = Math.ceil(this.clipping() / this.options.visible), b = 0, d = 0; this.list.children("li").each(function (f) { b += a.dimension(this, c); f + 1 < a.first && (d = b) }); this.list.css(this.wh, b + "px"); this.list.css(this.lt, -d + "px") } this.scroll(this.first, !1) }, lock: function () { this.locked = !0; this.buttons() }, unlock: function () { this.locked = !1; this.buttons() }, size: function (a) { if (a !== void 0) this.options.size = a, this.locked || this.buttons(); return this.options.size }, has: function (a, c) { if (c === void 0 || !c) c = a; if (this.options.size !== null && c > this.options.size) c = this.options.size; for (var b = a; b <= c; b++) { var d = this.get(b); if (!d.length || d.hasClass("jcarousel-item-placeholder")) return !1 } return !0 }, get: function (a) { return g(">.jcarousel-item-" + a, this.list) }, add: function (a, c) { var b = this.get(a), d = 0, p = g(c); if (b.length === 0) for (var j, e = f.intval(a), b = this.create(a); ; ) { if (j = this.get(--e), e <= 0 || j.length) { e <= 0 ? this.list.prepend(b) : j.after(b); break } } else d = this.dimension(b); p.get(0).nodeName.toUpperCase() == "LI" ? (b.replaceWith(p), b = p) : b.empty().append(c); this.format(b.removeClass(this.className("jcarousel-item-placeholder")), a); p = this.options.visible !== null ? Math.ceil(this.clipping() / this.options.visible) : null; d = this.dimension(b, p) - d; a > 0 && a < this.first && this.list.css(this.lt, f.intval(this.list.css(this.lt)) - d + "px"); this.list.css(this.wh, f.intval(this.list.css(this.wh)) + d + "px"); return b }, remove: function (a) { var c = this.get(a); if (c.length && !(a >= this.first && a <= this.last)) { var b = this.dimension(c); a < this.first && this.list.css(this.lt, f.intval(this.list.css(this.lt)) + b + "px"); c.remove(); this.list.css(this.wh, f.intval(this.list.css(this.wh)) - b + "px") } }, next: function () { this.tail !== null && !this.inTail ? this.scrollTail(!1) : this.scroll((this.options.wrap == "both" || this.options.wrap == "last") && this.options.size !== null && this.last == this.options.size ? 1 : this.first + this.options.scroll) }, prev: function () { this.tail !== null && this.inTail ? this.scrollTail(!0) : this.scroll((this.options.wrap == "both" || this.options.wrap == "first") && this.options.size !== null && this.first == 1 ? this.options.size : this.first - this.options.scroll) }, scrollTail: function (a) { if (!this.locked && !this.animating && this.tail) { this.pauseAuto(); var c = f.intval(this.list.css(this.lt)), c = !a ? c - this.tail : c + this.tail; this.inTail = !a; this.prevFirst = this.first; this.prevLast = this.last; this.animate(c) } }, scroll: function (a, c) { !this.locked && !this.animating && (this.pauseAuto(), this.animate(this.pos(a), c)) }, pos: function (a, c) { var b = f.intval(this.list.css(this.lt)); if (this.locked || this.animating) return b; this.options.wrap != "circular" && (a = a < 1 ? 1 : this.options.size && a > this.options.size ? this.options.size : a); for (var d = this.first > a, g = this.options.wrap != "circular" && this.first <= 1 ? 1 : this.first, j = d ? this.get(g) : this.get(this.last), e = d ? g : g - 1, h = null, i = 0, k = !1, l = 0; d ? --e >= a : ++e < a; ) { h = this.get(e); k = !h.length; if (h.length === 0 && (h = this.create(e).addClass(this.className("jcarousel-item-placeholder")), j[d ? "before" : "after"](h), this.first !== null && this.options.wrap == "circular" && this.options.size !== null && (e <= 0 || e > this.options.size))) j = this.get(this.index(e)), j.length && (h = this.add(e, j.clone(!0))); j = h; l = this.dimension(h); k && (i += l); if (this.first !== null && (this.options.wrap == "circular" || e >= 1 && (this.options.size === null || e <= this.options.size))) b = d ? b + l : b - l } for (var g = this.clipping(), m = [], o = 0, n = 0, j = this.get(a - 1), e = a; ++o; ) { h = this.get(e); k = !h.length; if (h.length === 0) { h = this.create(e).addClass(this.className("jcarousel-item-placeholder")); if (j.length === 0) this.list.prepend(h); else j[d ? "before" : "after"](h); if (this.first !== null && this.options.wrap == "circular" && this.options.size !== null && (e <= 0 || e > this.options.size)) j = this.get(this.index(e)), j.length && (h = this.add(e, j.clone(!0))) } j = h; l = this.dimension(h); if (l === 0) throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting..."); this.options.wrap != "circular" && this.options.size !== null && e > this.options.size ? m.push(h) : k && (i += l); n += l; if (n >= g) break; e++ } for (h = 0; h < m.length; h++) m[h].remove(); i > 0 && (this.list.css(this.wh, this.dimension(this.list) + i + "px"), d && (b -= i, this.list.css(this.lt, f.intval(this.list.css(this.lt)) - i + "px"))); i = a + o - 1; if (this.options.wrap != "circular" && this.options.size && i > this.options.size) i = this.options.size; if (e > i) { o = 0; e = i; for (n = 0; ++o; ) { h = this.get(e--); if (!h.length) break; n += this.dimension(h); if (n >= g) break } } e = i - o + 1; this.options.wrap != "circular" && e < 1 && (e = 1); if (this.inTail && d) b += this.tail, this.inTail = !1; this.tail = null; if (this.options.wrap != "circular" && i == this.options.size && i - o + 1 >= 1 && (d = f.intval(this.get(i).css(!this.options.vertical ? "marginRight" : "marginBottom")), n - d > g)) this.tail = n - g - d; if (c && a === this.options.size && this.tail) b -= this.tail, this.inTail = !0; for (; a-- > e; ) b += this.dimension(this.get(a)); this.prevFirst = this.first; this.prevLast = this.last; this.first = e; this.last = i; return b }, animate: function (a, c) { if (!this.locked && !this.animating) { this.animating = !0; var b = this, d = function () { b.animating = !1; a === 0 && b.list.css(b.lt, 0); !b.autoStopped && (b.options.wrap == "circular" || b.options.wrap == "both" || b.options.wrap == "last" || b.options.size === null || b.last < b.options.size || b.last == b.options.size && b.tail !== null && !b.inTail) && b.startAuto(); b.buttons(); b.notify("onAfterAnimation"); if (b.options.wrap == "circular" && b.options.size !== null) for (var c = b.prevFirst; c <= b.prevLast; c++) c !== null && !(c >= b.first && c <= b.last) && (c < 1 || c > b.options.size) && b.remove(c) }; this.notify("onBeforeAnimation"); if (!this.options.animation || c === !1) this.list.css(this.lt, a + "px"), d(); else { var f = !this.options.vertical ? this.options.rtl ? { right: a} : { left: a} : { top: a }, d = { duration: this.options.animation, easing: this.options.easing, complete: d }; if (g.isFunction(this.options.animationStepCallback)) d.step = this.options.animationStepCallback; this.list.animate(f, d) } } }, startAuto: function (a) { if (a !== void 0) this.options.auto = a; if (this.options.auto === 0) return this.stopAuto(); if (this.timer === null) { this.autoStopped = !1; var c = this; this.timer = window.setTimeout(function () { c.next() }, this.options.auto * 1E3) } }, stopAuto: function () { this.pauseAuto(); this.autoStopped = !0 }, pauseAuto: function () { if (this.timer !== null) window.clearTimeout(this.timer), this.timer = null }, buttons: function (a, c) { if (a == null && (a = !this.locked && this.options.size !== 0 && (this.options.wrap && this.options.wrap != "first" || this.options.size === null || this.last < this.options.size), !this.locked && (!this.options.wrap || this.options.wrap == "first") && this.options.size !== null && this.last >= this.options.size)) a = this.tail !== null && !this.inTail; if (c == null && (c = !this.locked && this.options.size !== 0 && (this.options.wrap && this.options.wrap != "last" || this.first > 1), !this.locked && (!this.options.wrap || this.options.wrap == "last") && this.options.size !== null && this.first == 1)) c = this.tail !== null && this.inTail; var b = this; this.buttonNext.size() > 0 ? (this.buttonNext.unbind(this.options.buttonNextEvent + ".jcarousel", this.funcNext), a && this.buttonNext.bind(this.options.buttonNextEvent + ".jcarousel", this.funcNext), this.buttonNext[a ? "removeClass" : "addClass"](this.className("jcarousel-next-disabled")).attr("disabled", a ? !1 : !0), this.options.buttonNextCallback !== null && this.buttonNext.data("jcarouselstate") != a && this.buttonNext.each(function () { b.options.buttonNextCallback(b, this, a) }).data("jcarouselstate", a)) : this.options.buttonNextCallback !== null && this.buttonNextState != a && this.options.buttonNextCallback(b, null, a); this.buttonPrev.size() > 0 ? (this.buttonPrev.unbind(this.options.buttonPrevEvent + ".jcarousel", this.funcPrev), c && this.buttonPrev.bind(this.options.buttonPrevEvent + ".jcarousel", this.funcPrev), this.buttonPrev[c ? "removeClass" : "addClass"](this.className("jcarousel-prev-disabled")).attr("disabled", c ? !1 : !0), this.options.buttonPrevCallback !== null && this.buttonPrev.data("jcarouselstate") != c && this.buttonPrev.each(function () { b.options.buttonPrevCallback(b, this, c) }).data("jcarouselstate", c)) : this.options.buttonPrevCallback !== null && this.buttonPrevState != c && this.options.buttonPrevCallback(b, null, c); this.buttonNextState = a; this.buttonPrevState = c }, notify: function (a) { var c = this.prevFirst === null ? "init" : this.prevFirst < this.first ? "next" : "prev"; this.callback("itemLoadCallback", a, c); this.prevFirst !== this.first && (this.callback("itemFirstInCallback", a, c, this.first), this.callback("itemFirstOutCallback", a, c, this.prevFirst)); this.prevLast !== this.last && (this.callback("itemLastInCallback", a, c, this.last), this.callback("itemLastOutCallback", a, c, this.prevLast)); this.callback("itemVisibleInCallback", a, c, this.first, this.last, this.prevFirst, this.prevLast); this.callback("itemVisibleOutCallback", a, c, this.prevFirst, this.prevLast, this.first, this.last) }, callback: function (a, c, b, d, f, j, e) { if (!(this.options[a] == null || typeof this.options[a] != "object" && c != "onAfterAnimation")) { var h = typeof this.options[a] == "object" ? this.options[a][c] : this.options[a]; if (g.isFunction(h)) { var i = this; if (d === void 0) h(i, b, c); else if (f === void 0) this.get(d).each(function () { h(i, this, d, b, c) }); else for (var a = function (a) { i.get(a).each(function () { h(i, this, a, b, c) }) }, k = d; k <= f; k++) k !== null && !(k >= j && k <= e) && a(k) } } }, create: function (a) { return this.format("<li></li>", a) }, format: function (a, c) { for (var a = g(a), b = a.get(0).className.split(" "), d = 0; d < b.length; d++) b[d].indexOf("jcarousel-") != -1 && a.removeClass(b[d]); a.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-" + c)).css({ "float": this.options.rtl ? "right" : "left", "list-style": "none" }).attr("jcarouselindex", c); return a }, className: function (a) { return a + " " + a + (!this.options.vertical ? "-horizontal" : "-vertical") }, dimension: function (a, c) { var b = g(a); if (c == null) return !this.options.vertical ? b.outerWidth(!0) || f.intval(this.options.itemFallbackDimension) : b.outerHeight(!0) || f.intval(this.options.itemFallbackDimension); else { var d = !this.options.vertical ? c - f.intval(b.css("marginLeft")) - f.intval(b.css("marginRight")) : c - f.intval(b.css("marginTop")) - f.intval(b.css("marginBottom")); g(b).css(this.wh, d + "px"); return this.dimension(b) } }, clipping: function () { return !this.options.vertical ? this.clip[0].offsetWidth - f.intval(this.clip.css("borderLeftWidth")) - f.intval(this.clip.css("borderRightWidth")) : this.clip[0].offsetHeight - f.intval(this.clip.css("borderTopWidth")) - f.intval(this.clip.css("borderBottomWidth")) }, index: function (a, c) { if (c == null) c = this.options.size; return Math.round(((a - 1) / c - Math.floor((a - 1) / c)) * c) + 1 } }); f.extend({ defaults: function (a) { return g.extend(q, a || {}) }, intval: function (a) { a = parseInt(a, 10); return isNaN(a) ? 0 : a }, windowLoaded: function () { m = !0 } }); g.fn.jcarousel = function (a) { if (typeof a == "string") { var c = g(this).data("jcarousel"), b = Array.prototype.slice.call(arguments, 1); return c[a].apply(c, b) } else return this.each(function () { var b = g(this).data("jcarousel"); b ? (a && g.extend(b.options, a), b.reload()) : g(this).data("jcarousel", new f(this, a)) }) } })(jQuery);

/*jQuery.ScrollTo - Easy element scrolling using jQuery.
 Copyright (c) 2007-2009 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 Dual licensed under MIT and GPL.
 Date: 5/25/2009
 @author Ariel Flesler
 @version 1.4.2
 http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 */
;(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
(function($){$.init=function(contentDivID,closeMeClass){this.contentDivID="#"+contentDivID;this.closeClass="."+closeMeClass;$(window).resize(function(){$.resizeOpaqueWindow()})};$.resizeOpaqueWindow=function(){overlayWidth=$(window).width();overlayHeight=$(document).height();$("#overlay").css({top:0,left:0,background:"white",width:overlayWidth,height:overlayHeight,position:"absolute",display:"block"})};$.makeWindow=function(){var modalContent=$(this.contentDivID).html();$("body").append('<div id="modalWindow">'+
modalContent+"</div>");MW_WIDTH=261;MW_HEIGHT=141;$("#modalWindow").css({marginLeft:"-"+parseInt(MW_WIDTH/2,10)+"px",width:MW_WIDTH+"px"});if(!(jQuery.browser.msie&&jQuery.browser.version<7))$("#modalWindow").css({marginTop:"-"+parseInt(MW_HEIGHT/2,10)+"px"})};$.createOverlay=function(){$("body").append('<div id="overlay"></div>');$("#overlay").css("zIndex",500);$("#overlay").css("opacity",0);overlayWidth=$(window).width();overlayHeight=$(document).height();$("#overlay").css({top:0,left:0,background:"white",
width:overlayWidth,height:overlayHeight,position:"absolute",display:"block"})};$.displayModalWindow=function(){$("#overlay").fadeTo("normal",0.6);$("#modalWindow").fadeIn("normal")};$.closeModalWindow=function(){$("#modalWindow").fadeOut("normal",function(){$("#overlay").fadeTo("normal",0);$("#overlay").remove();$("#modalWindow").remove()})}})(jQuery);
//As per the name, Utility functions only, no document ready function
function ValidateBannedPhoneNo(field_val, strbannedPhoneNoList) {
    var pattern = "/^0[67]" + strbannedPhoneNoList + "/";
    if ($j(field_val).val().search(pattern) != -1) //if match failed
        return false;

    return true;
};
//OpenServicePopUp
function OpenServicePopUp(url) {
    var xPos = (screen.width - 960) / 2;
    var yPos = (screen.height - 600) / 2;
    window.open(url, "", "menubar=no,status=no,width=640,height=720,scrollbars=yes,resizable=no,left=" + xPos + ",top=" + yPos);

}

isNullOrUndefined = function (elem) { if (elem == undefined || null == elem) return true; return false; }
function isEmpty(field_val) {
    if (isNullOrUndefined(field_val)) return true;
    var field_val = $j.trim(field_val);
    if (field_val.length <= 0) return true;
    return false;
};
function GetUrlParamValue(name) {
    if (isNullOrUndefined(window)) return null;
    if (isNullOrUndefined(window.location)) return null;
    if (isNullOrUndefined(window.location.href)) return null;
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.href);
    if (isNullOrUndefined(results)) return null;
    if (0 == results.length) return null;
    return unescape(results[1]);
};
//This method is used to generate a guid
function generateGuid() {
    var result, i, j;
    result = '';
    for (j = 0; j < 32; j++) {
        if (j == 8 || j == 12 || j == 16 || j == 20)
            result = result + '-';
        i = Math.floor(Math.random() * 16).toString(16).toUpperCase();
        result = result + i;
    }
    return result
}

function GetReturnUrl() {
    var returnUrl = GetUrlParamValue("ReturnUrl");
    if (isNullOrUndefined(returnUrl)) {
        if (window.location.href.indexOf('BasketV2.aspx') > 0) {//Login Layer
            try {
                if ($j('div.cgv input[type=checkbox]').length != 0) {
                    var url = window.location.href.split('#')[0];
                    if (url.indexOf('?') != -1) {
                        return url + '&cgv=true';
                    } else {
                        return url + '?cgv=true';
                    }
                } else {
                    return window.location.href.split('#')[0];
                }
            } catch (e) {
                return window.location.href.split('#')[0];
            }
        }
        if (window.location.href.indexOf('RPremiumOffer.aspx') > 0) {
            return window.location.href.split('#')[0];
        }
        if (window.location.href.indexOf('RExpressOffer.aspx') > 0) {
            return window.location.href.split('#')[0];
        }
        else {
            return null;
        }
    }

    return returnUrl.replace(/\~/ig, '');

};
function GetEncryptedReturnUrl() {
    var returnUrl = GetUrlParamValue("ReturnUrl");
    if (isNullOrUndefined(returnUrl)) return null;

    //Fix to TT 9002
    if (returnUrl.indexOf("?") > 0) {
        var arrQuerystring = returnUrl.split('?');
        if (arrQuerystring.length > 1) {
            returnUrl = arrQuerystring[0] + "?" + LRFREncodeUrlString(arrQuerystring[1]);
        }
    }
    return returnUrl.replace(/\~/ig, '');
};
function IsInCheckoutPipeline() {
    var returnUrl = GetReturnUrl();
    if (isNullOrUndefined(returnUrl)) return false;

    if (returnUrl.indexOf('DirectOrderForm.aspx') !== -1) return true;

    if (returnUrl.indexOf('BasketV2.aspx') !== -1) return true;

    if ((returnUrl.indexOf('SubscriptionNewsletters.aspx') !== -1) ||
		(returnUrl.indexOf('RequestCataHomeDeliv.aspx') !== -1) || (returnUrl.indexOf('Orders.aspx') !== -1) ||
		(returnUrl.indexOf('WishList.aspx') !== -1)) {
        return true;
    }

    if (returnUrl.indexOf('Checkout') !== -1) return true;

    return true;
};
function DoTransiton(transition, mferrortype) {
    if (isNullOrUndefined(transition)) {
        window.location.href = Urls.TechnicalErrorPage;
    } else {
        window.location.href = transition.replace(/\~/ig, '') + "?errortype=" + mferrortype;
    }
};
function addSVToUrl(urlToPost) {
    var sv = GetUrlParamValue("SV");
    if (isNullOrUndefined(sv)) {
        sv = GetUrlParamValue("sv");
    }
    if (!isNullOrUndefined(sv)) {
        urlToPost = $j.format("{0}&sv={1}", urlToPost, sv);
    }
    return urlToPost;
};
function clientValidations() {
    var cv = GetUrlParamValue("CV");
    if (isNullOrUndefined(cv)) {
        cv = GetUrlParamValue("cv");
    }
    if (isNullOrUndefined(cv)) return true;
    return false;
};
function showGenericMessage(displayMsg) {
    if ($j.trim(displayMsg) != '') {
        $j('#account div.mferror_message').removeClass("d-off").addClass("d-on").html(displayMsg);
    }
};
function hideGenericErrorMessage() {
    $j('#account div.mferror_message').removeClass("d-on").addClass("d-off");
};
function hideFieldHelpErrorWarningMessage() {
    $j(parentSelector + '.contextualHelp').hide();
    $j(parentSelector + '.contextualError').hide();
    $j(parentSelector + '.contextualWarn').hide();
};
function HtmlDecode(value) {
    if (!isNullOrUndefined(value)) {
        return jQuery('<div/>').html(value).text();
    } else {
        return '';
    }
}


/* Start EDD javascript */
//Get the avail text using the code and the delay
function GetDeliveryInfoText(availCode, availableDate, backorderDate) {
    var availPeriod = 0;
    var retVal = '';
    if (availCode == 1) {
        retVal = productavailablilityinstock;
        availPeriod = availableDate;
    }
    else if (availCode == 0) {
        retVal = productavailablilityoutofstock;
        return retVal;
    }
    else {
        retVal = productavailablilitybackordered;
        availPeriod = backorderDate;
    }

    if ((availPeriod == 0) || (typeof (availPeriod) == 'undefined'))
        return retVal;

    if (retVal.length > 0)
        var SEPARATOR = " ";
    else
        var SEPARATOR = "";

    var deliveryUnit = CalculateDeliveryUnit(availPeriod);

    switch (deliveryUnit) {
        case 1:
            deliveryValue = availPeriod * 24;
            return retVal += SEPARATOR + deliveryinfoinhours.replace(deliveryDelimiter.toLowerCase(), deliveryValue);
            break;
        case 2:
            deliveryValue = availPeriod;
            return retVal += SEPARATOR + deliveryinfoindays.replace(deliveryDelimiter.toLowerCase(), deliveryValue);
            break;
        case 3:
            deliveryValue = Math.floor(availPeriod / 7);
            return retVal += SEPARATOR + deliveryinfoinweeks.replace(deliveryDelimiter.toLowerCase(), deliveryValue);
            break;
    }

}

function CalculateDeliveryUnit(delayTime) {
    if (delayTime <= 3)
        return 1;
    else if (delayTime <= 13)
        return 2;
    else
        return 3;
}
/* End EDD javascript */
function checkForNopeCookie() {
    // Cookie do not exist so check for query string
    nope = ParseQueryStringIgnoreCase("NC");
    if (!isNullOrUndefined(nope) && nope != "") {
        if (nope.length > 4) {
            nope = nope.substring(0, 5);
            setSubCookieAndCookie("M.R.SpecialOffers", "NC", nope);
        }
    }
}

function ParseQueryStringIgnoreCase(key) {
    qsFull = window.location.search.substring(1);
    qsKeyValueArr = qsFull.split('&');
    for (i = 0; i < qsKeyValueArr.length; i++) {
        currentKey = qsKeyValueArr[i].split('=');
        if (currentKey[0].toUpperCase() == key.toUpperCase()) {
            return currentKey[1];
        }
    }
} 
function ParseQueryString(key) {
    qsFull = window.location.search.substring(1);
    qsKeyValueArr = qsFull.split('&');
    for (i = 0; i < qsKeyValueArr.length; i++) {
        currentKey = qsKeyValueArr[i].split('=');
        if (currentKey[0] == key) {
            return currentKey[1];
        }
    }
}

function ParseHashQueryString(key) {
    return ParseHashQueryStringFromUrl(window.location.hash.substring(1), key);
}
function ParseHashQueryStringFromUrl(url, key) {
    if (url.indexOf('#') != -1) {
        url = url.split('#')[1];
    }
    qsFull = url;
    qsKeyValueArr = qsFull.split('&');
    for (i = 0; i < qsKeyValueArr.length; i++) {
        currentKey = qsKeyValueArr[i].split('=');
        if (currentKey[0] == key) {
            return currentKey[1];
        }
    }
}
function OpenCenteredPopUp(url, width, height) {
    var xPos = (screen.width - width) / 2;
    var yPos = (screen.height - height) / 2;
    window.open(url, '', "menubar=no,status=no,width=" + width + ",height=" + height + ",scrollbars=yes,resizable=yes,left=" + xPos + ",top=" + yPos);
}

function MM_openBrWindow(theURL, winName, features) {
    /* v2.0 */w = window.open(theURL, winName, features); w.focus();
}
function alphanumeric(alphane) {
    var numaric = alphane;
    for (var j = 0; j < numaric.length; j++) {
        var alphaa = numaric.charAt(j);
        var hh = alphaa.charCodeAt(0);
        if ((hh > 47 && hh < 58) || (hh > 64 && hh < 91) || (hh > 96 && hh < 123)) {
        }
        else {
            return false;
        }
    }
    return true;
}



function showVendorTermsConditionsPopup(lnkTermsCondition) {
    var url = lnkTermsCondition.href;
    window.open(url, '', "menubar=no,status=no,width=810,height=530,top=25,left=25,scrollbars=yes,resizable=yes");
    return false;
}


/*MP2.1 Omniture functions*/
function setShoppingToolForDealOmnitureTags() {
    if (isNullOrUndefined(s)) return;

    if (s.eVar12 != null) {
        s.eVar12 = "";
    }

    if (s.prop12 != null) {
        s.prop12 = "";
    }
    s.eVar12 = "Good Deals";
    s.prop12 = "Good Deals";

    s.tl(false, 'o', "GoodDealsATBClicked");
}

function setViewOtherVendorOmnitureTags() {
    if (isNullOrUndefined(s)) return;

    if (s.prop23 != null) {
        s.prop23 = null;
    }

    s.prop23 = "Vendu aussi par...";

    s.tl(false, 'o', "ViewOtherVendorLinkClicked");
}





function LogAjaxError(src, message) {
    $j.ajax({
        type: 'POST',
        url: '/Utilities/AjaxLogError.aspx',
        data: {
            'Src': src,
            'Message': message
        },
        success: function () { },
        error: function () { },
        cache: false,
        async: true,
        timeout: 300000
    });
}
/* Allow us to know if user is using a touch device */
function isTouchDevice() {
    try {
        var el = document.createElement('div');
        el.setAttribute('ontouchmove', 'return;');
        if (typeof el.ontouchmove == "function") {
            return true;
        } else {
            return false
        }
    } catch (ex) {
        return false;
    }
}

/* ALLOW HTML5 Type for input textbox */
function TransformToHTML5InputType() {
    $j('input[HTML5Type]').each(function () {
        this.setAttribute('type', $j(this).attr('HTML5Type'));
        this.removeAttribute('HTML5Type');
    });
}



function UserInterface(id) { this._id = id; }
UserInterface.prototype._id;
UserInterface.prototype.getName = function () { return this._n; }
UserInterface.prototype.pluginPath = "/scripts/evolution/plugins/";

var UI = new UserInterface();


/* Search Function
-------------------------------------------------*/
UserInterface.prototype.NewHeaderSearch = function () {

    var strCategory = "";
    var EasyAskSearchEngineFlag;

    var keyword = LRFREncodeUrlString($j('#headerZone .header_search input').val());

    /* could be undefined again, null or empty also */
    if (keyword == undefined || keyword == null || keyword == '') {
        return;
    }

    var sampleKeyword = "Rechercher un article ou une rfrence"
    if ($j('#headerZone .header_search input').val() == sampleKeyword) { return; }
    searchType = 'HeaderSearch';
    var hiddenDim = '';
    strCategory = '';


    // Track number of keywords used for Omniture variables
    var strTemp = keyword.replace(/\-/g, '~');
    strTemp = strTemp.replace(/\,/g, '~');
    strTemp = strTemp.replace(/\%20/g, '~');
    strTemp = strTemp.replace(/\ /g, '~')

    var arrayKeywords = strTemp.split("~");
    var countKeywords = 0
    for (i = 0; i < arrayKeywords.length; i++) {
        if (arrayKeywords[i] != '')
        { countKeywords = countKeywords + 1 };
    }

    var nkw = "&nkw=" + countKeywords;
    var path = "/Search/SearchResults.aspx";

    var VSPParam = '';
    var VSNParam = '';
    if (typeof (vsp) != "undefined" && vsp != '' && searchType != "CategorySearch") {
        VSPParam = "&vsp=" + vsp
    }

    if (typeof (vsn) != "undefined" && vsn != '') {
        VSNParam = "&vsn=" + vsn
    }
    strVsn = '';

    // If VSNParam is empty, then use the value from the dropdown
    if (VSNParam == '') {
        VSNParam = strVsn
    }


    if ($j("#hdrSearchDimensionId") != "undefined" && $j("#hdrSearchDimensionId").val() != undefined && $j("#hdrSearchDimensionId").val() != "") {
        window.location.href = path + "?hiddendims=" + $j("#hdrSearchDimensionId").val() + "&SearchType=" + searchType + "&Keyword=" + keyword + VSNParam + nkw + strCategory + VSPParam;
        return;
    }

    hiddenDim = (hiddenDim == undefined) ? '' : hiddenDim;
    window.location.href = path + "?SearchType=" + searchType + "&hiddendims=" + hiddenDim + "&Keyword=" + keyword + VSNParam + nkw + EasyAskSearchEngineFlag + strCategory + VSPParam;

}
function LRFREncodeUrlString(str) {
    // Make sure you replace "%" first
    str = str.replace(/\%/g, '%25')
    str = str.replace(/\~/g, '%7E');
    str = str.replace(/\!/g, '%21');
    str = str.replace(/\@/g, '%40');
    str = str.replace(/\#/g, '%23');
    str = str.replace(/\$/g, '%24');
    str = str.replace(/\^/g, '%5E');
    str = str.replace(/\&/g, '%26');
    str = str.replace(/\(/g, '%28');
    str = str.replace(/\)/g, '%29');
    str = str.replace(/\&/g, '%7B');
    str = str.replace(/\{/g, '%7B');
    str = str.replace(/\}/g, '%7D');
    str = str.replace(/\[/g, '%5B');
    str = str.replace(/\]/g, '%5D');
    str = str.replace(/\=/g, '%3D');
    str = str.replace(/\:/g, '%3A');
    str = str.replace(/\//g, '%2F');
    str = str.replace(/\,/g, '%2C');
    str = str.replace(/\;/g, '%3B');
    str = str.replace(/\?/g, '%3F');
    str = str.replace(/\+/g, '%2B');
    str = str.replace(/\"/g, '%22');
    str = str.replace(/\\/g, '%5C');
    str = str.replace(/\'/g, "%27");

    return str;
}

function testEnterKey(element, evt) {
    if (evt.keyCode == 13) {
        evt.cancelBubble = true;
        evt.returnValue = false;
        if (!document.all) {
            document.getElementById(element).click();
        }
        else {
            document.all(element).click();
        }
    }
}

function disableEnterKey(evt) {
    if (evt.keyCode == 13) {
        evt.cancelBubble = true;
        evt.returnValue = false;
    }
}

function GetDummyCookie() {
    var strName = "varCook";
    if (document.cookie.indexOf(strName) == -1) {
        return false;
    }
    else {
        cookieStart = document.cookie.indexOf(strName);
        cookieValStart = (document.cookie.indexOf("=", cookieStart) + 1);
        cookieValEnd = document.cookie.indexOf(";", cookieStart);
        if (cookieValEnd == -1) {
            cookieValEnd = document.cookie.length;
        }
        cookieValue = document.cookie.substring(cookieValStart, cookieValEnd);
    }
    if (cookieValue = "True") {
        return ("True");
    }
}


function SetDummyCookie(name, value, expires, path, domain, secure) {
    var strDNS = GetDNS();
    document.cookie = name + "=" + escape(value) +
		((expires) ? ";expires=" + expires.toGMTString() + 1000 * 60 * 20 : "") +
		((path) ? ";path=" + path : "") +
		((domain) ? ";domain=" + strDNS : "") +
		((secure) ? ";secure" : "");
    return true
}


function GetDNS() {
    cookieDomain = document.location.hostname;
}

//Function to check whether cookies are enabled or not      
function CheckCookiesEnabled() {
    SetDummyCookie('varCook', 'True', '', '/', '', '');
    if (GetDummyCookie() == "True") {
        return true;
    }
    else {
        window.location.href = '/Error_Pages/NoCookies.aspx'
        return false;
    }
}
// Function to check whether Return is Complete or Not

function IsReturnComplete() {
    var ReturnCompleteCookieValue = GetSubCookieValue("M.R.SC", "RtnComplete");
    if (ReturnCompleteCookieValue != null) {
        if (ReturnCompleteCookieValue == "true") return true;
    }
    return false;
}


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
    if (init == true) with (navigator) {
        if ((appName == "Netscape") && (parseInt(appVersion) == 4)) {
            document.MM_pgW = innerWidth; document.MM_pgH = innerHeight; onresize = MM_reloadPage;
        }
    }
    else if (innerWidth != document.MM_pgW || innerHeight != document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_findObj(n, d) { //v4.01
    var p, i, x; if (!d) d = document; if ((p = n.indexOf("?")) > 0 && parent.frames.length) {
        d = parent.frames[n.substring(p + 1)].document; n = n.substring(0, p);
    }
    if (!(x = d[n]) && d.all) x = d.all[n]; for (i = 0; !x && i < d.forms.length; i++) x = d.forms[i][n];
    for (i = 0; !x && d.layers && i < d.layers.length; i++) x = MM_findObj(n, d.layers[i].document);
    if (!x && d.getElementById) x = d.getElementById(n); return x;
}

function MM_showHideLayers() { //v6.0
    var i, p, v, obj, args = MM_showHideLayers.arguments;
    for (i = 0; i < (args.length - 2); i += 3) if ((obj = MM_findObj(args[i])) != null) {
        v = args[i + 2];
        if (obj.style) { obj = obj.style; v = (v == 'show') ? 'visible' : (v == 'hide') ? 'hidden' : v; }
        obj.visibility = v;
    }
}
function setFSearchExternalInternalCampaignST() {
    var extCampaign = (ParseQueryString('omniturecode') != null) ? ParseQueryString('omniturecode') : ParseQueryString('cod');
    if (extCampaign != null)
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'CampagneExterne');
    var intCampaign = ParseQueryString('opeco');
    if (intCampaign != null)
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'CampagneInternes');
    var quickSearch = ParseQueryString('qsf');
    if (quickSearch != null)
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'fastsearch');
    SetSTForPDPOriginBasket();
}
function SetSTForPDPOriginBasket() {
    if (ParseQueryString('originminipdp') != null && (ParseQueryString('originminipdp') == "cross sell emptybasket" || ParseQueryString('originminipdp') == "cross%20sell%20emptybasket")) {
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'Push Produit panier vide');
    }
    else if (ParseQueryString('originminipdp') != null && (ParseQueryString('originminipdp') == "cross sell basket" || ParseQueryString('originminipdp') == "cross%20sell%20basket")) {
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'Produits associes panier AVAIL');
    }
    else if (ParseQueryString('originminipdp') != null && (ParseQueryString('originminipdp') == "wishlist basket" || ParseQueryString('originminipdp') == "wishlist%20basket")) {
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'Produits associes panier Wishlist');
    }
    else if (ParseQueryString('originminipdp') != null && (ParseQueryString('originminipdp') == "wishlist substitution product" || ParseQueryString('originminipdp') == "wishlist%20substitution%20product")) {
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'Push produit substitution');
    }
    else if (ParseQueryString('originminipdp') != null && (ParseQueryString('originminipdp') == "module ampm" || ParseQueryString('originminipdp') == "module%20ampm")) {
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'module_ampm');
    }
    else if (ParseQueryString('isapr') != null && (ParseQueryString('isapr') == "true")) {
        setSubCookieAndCookie('M.R.Omniture', 'ST', 'MoteurDeRechercheB');
    }
}

function addMonth(month) {
    var currDate = new Date();
    var currDay = currDate.getDate();
    var currMonth = currDate.getMonth() + month + 1;
    var currYear = currDate.getFullYear();
    currDateStr = currMonth + "/" + currDay + "/" + currYear;
    var ModMonth = currMonth;
    if (ModMonth > 12) {
        ModMonth = 1;
        currYear = currYear + 1;
    }

    currDateStr = ModMonth + "/" + currDay + "/" + currYear
    return currDateStr;
}


function GetCookieOrCachePermanentInfo(key) {
    if (($j.browser.msie && $j.browser.version == "7.0") || isNullOrUndefined(jQuery.jStorage)) {//use cookie storage
        return GetCookie(key);
    } else {//use local storage
        DeleteCookie(key);
        var value = jQuery.jStorage.get(key);
        if (isNullOrUndefined(value)) {
            return '';
        } else {
            return value;
        }
    }
}
function SetCookieOrCachePermanentInfo(key, value, time) {
    if (($j.browser.msie && $j.browser.version == "7.0") || isNullOrUndefined(jQuery.jStorage)) {//use cookie storage
        if (!isNullOrUndefined(time)) {
            setCookie(key, value, time, "/", "", "");
        } else {
            setCookie(key, value);
        }
    } else {//use local storage
        DeleteCookie(key);
        jQuery.jStorage.set(key, value);
    }
}

function SetOmnitureTagFromCookie(tagName, parentCookieName, subCookieName) {
    var cookieValue = null;

    if (isEmpty(subCookieName)) {
        cookieValue = GetCookie(parentCookieName);
    }
    else {
        cookieValue = GetSubCookieValue(parentCookieName, subCookieName);
    }

    if (!isEmpty(cookieValue)){
        eval('s.' + tagName + '=' + cookieValue)
    }
}

function SetOmnitureForErrorReporting() {
    if (!isNullOrUndefined(s)) {
        SetOmnitureTagFromCookie("prop10", 'M.R.User', 'CustNmbr');
        SetOmnitureTagFromCookie("prop11", 'Segmentation', 'lifeStyle');
        SetOmnitureTagFromCookie("prop13", 'Segmentation', 'appWeb');
        SetOmnitureTagFromCookie("prop14", 'Segmentation', 'clusterNum');
    }
}

//IAdvize Chat Omniture Implementation
function setOmnitureforChat() {

    s.events = "event52";
    s.pageName = "FR:RE:AIDE-SERVICE:clictochat";

    /* calling method s.tl() */
    s.tl(false, 'o', "IAdvizeChatLayer");
}

function setOmnitureforChatAvailable() {

    s.events = "event51";

    /* calling method s.tl() */
    s.tl(false, 'o', "IAdvizeChatAvailable");
}

function IsMultiOfferProduct(prodJson) {
    var ismultiofferproduct = false;
    try {
        for (var i = 0; i < prodJson.Products[0].ExPr.ExPrLi.length; i++) {
            if (prodJson.Products[0].ExPr.ExPrLi[i].Ky == "IsMultiOffer" && prodJson.Products[0].ExPr.ExPrLi[i].Val == "true") {
                ismultiofferproduct = true;
            }
        }
    } catch (ex) { }
    return ismultiofferproduct;
}

//New decoder
function decode(mystring) {
    b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    pad = "000000";
    pads = mystring.match(/=+/) ? mystring.match(/=+/)[0].length : 0;
    mystring = mystring.replace(/=/g, "A");
    out = "";
    for (var i = 0; i < mystring.length; i += 4) {
        temp = ((b64.indexOf(mystring.charAt(i)) << 18) + (b64.indexOf(mystring.charAt(i + 1)) << 12) + (b64.indexOf(mystring.charAt(i + 2)) << 6) + (b64.indexOf(mystring.charAt(i + 3)))).toString(16);
        out += (pad.substring(0, 6 - temp.length) + temp).replace(/../g, "%$&");
    }
    out = unescape(out.substring(0, out.length - pads * 3).replace(/%00/g, ""));
    return out
}
var base64 = [
       'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',   //  0 to  7 
       'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',   //  8 to 15 
       'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',   // 16 to 23 
       'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',   // 24 to 31 
       'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',   // 32 to 39 
       'o', 'p', 'q', 'r', 's', 't', 'u', 'v',   // 40 to 47 
       'w', 'x', 'y', 'z', '0', '1', '2', '3',   // 48 to 55 
       '4', '5', '6', '7', '8', '9', '+', '/']; // 56 to 63 

function charFromCharCode(charCode) {
    return unescape('%' + charCode.toString(16));
}

function reverseBase64() {
    var r = new Object();
    for (var i = 0; i < 64; i++) {
        r[base64[i]] = i;
    }
    return r;
}

var reversedBase64 = reverseBase64();

function unicodelessDecode(encStr) {
    var charCodes = new Array();
    var decStr = "";

    /* charCodes contains the index values into the base64 array 
    for each character in the encoded string */
    for (var i = 0; i < encStr.length; i++)
        charCodes[i] = reversedBase64[encStr.charAt(i)];

    for (var i = 0; i < encStr.length; i += 4) {
        /* bits24 is 4 groups of 6-bit character indexes */
        var bits24 = (charCodes[i] & 0xFF) << 18;
        bits24 |= (charCodes[i + 1] & 0xFF) << 12;
        bits24 |= (charCodes[i + 2] & 0xFF) << 6;
        bits24 |= (charCodes[i + 3] & 0xFF) << 0;

        /* grab the character for the first 8 bits by masking off the 
        last 16 bits and then shifting right */
        decStr += charFromCharCode((bits24 & 0xFF0000) >> 16);

        /* if the next characer is a pad character, there won't be a charCode 
        for it; so charCodes[] will return false and the character won't 
        be decoded. */

        /* grab the character for the second 8 bits by masking off the 
        last 8 bits and then shifting right */
        if (charCodes[i + 2])  // check for padding character = 
            decStr += charFromCharCode((bits24 & 0xFF00) >> 8);


        /* grab the character for the last 8 bits */
        if (charCodes[i + 3])  // check for padding character = 
            decStr += charFromCharCode((bits24 & 0xFF) >> 0);
    }
    return decStr;
}

/**
*
*  Base64 encode / decode
*  http://www.webtoolkit.info/
*
**/

var Base64 = {

    // private property
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

    // public method for encoding
    encode: function (input) {
        var output = "";
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
        var i = 0;


        if (isNullOrUndefined(input) || input == '')
            return output;

        input = Base64._utf8_encode(input);

        while (i < input.length) {

            chr1 = input.charCodeAt(i++);
            chr2 = input.charCodeAt(i++);
            chr3 = input.charCodeAt(i++);

            enc1 = chr1 >> 2;
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
            enc4 = chr3 & 63;

            if (isNaN(chr2)) {
                enc3 = enc4 = 64;
            } else if (isNaN(chr3)) {
                enc4 = 64;
            }

            output = output +
			this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
			this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

        }

        return output;
    },

    // public method for decoding
    decode: function (input) {
        var output = "";
        var chr1, chr2, chr3;
        var enc1, enc2, enc3, enc4;
        var i = 0;

        if (isNullOrUndefined(input) || input == '')
            return output;

        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

        while (i < input.length) {

            enc1 = this._keyStr.indexOf(input.charAt(i++));
            enc2 = this._keyStr.indexOf(input.charAt(i++));
            enc3 = this._keyStr.indexOf(input.charAt(i++));
            enc4 = this._keyStr.indexOf(input.charAt(i++));

            chr1 = (enc1 << 2) | (enc2 >> 4);
            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
            chr3 = ((enc3 & 3) << 6) | enc4;

            output = output + String.fromCharCode(chr1);

            if (enc3 != 64) {
                output = output + String.fromCharCode(chr2);
            }
            if (enc4 != 64) {
                output = output + String.fromCharCode(chr3);
            }

        }

        output = Base64._utf8_decode(output);

        return output;

    },

    // private method for UTF-8 encoding
    _utf8_encode: function (string) {
        string = string.replace(/\r\n/g, "\n");
        var utftext = "";

        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if ((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }

        }

        return utftext;
    },

    // private method for UTF-8 decoding
    _utf8_decode: function (utftext) {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;

        while (i < utftext.length) {

            c = utftext.charCodeAt(i);

            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if ((c > 191) && (c < 224)) {
                c2 = utftext.charCodeAt(i + 1);
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utftext.charCodeAt(i + 1);
                c3 = utftext.charCodeAt(i + 2);
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }

        }

        return string;
    }

}
function setNoEscapeCookie(name, value, expires, path, domain, secure) {

    var thisCookie = name + "=" + value +
      ((expires) ? "; expires=" + expires.toGMTString() : "") +
      ((path) ? "; path=" + path : ";  path=/") +
      ((domain) ? "; domain=" + domain : "") +
      ((secure) ? "; secure" : "");
    document.cookie = thisCookie;
}
function setCookie_New(name, value, expires, path, domain, secure) {
    setCookie(name, value, expires, path, domain, secure);
}
function setCookie(name, value, expires, path, domain, secure) {
    var expires_date = new Date(expires);
    var dt = new Date();
    var thisCookie = name + "=" + escape(value) +
      ((expires) ? "; expires=" + expires_date.toGMTString() : "") +
      ((path) ? "; path=" + path : "") +
      ((domain) ? "; domain=" + domain : "") +
      ((secure) ? "; secure" : "");
    document.cookie = thisCookie;
}
function SetTempCookie(name, value) {
    document.cookie = name + "=" + escape(value);
}
function showCookie() {

    alert(unescape(document.cookie));
}
function getCookieVal(offset) {
    var endstr = document.cookie.indexOf(";", offset);
    if (endstr == -1)
        endstr = document.cookie.length;
    return unescape(document.cookie.substring(offset, endstr));
}
function getCookie(sName) {
    return GetCookie(sName);
}
function GetCookie(name) {
    var arg = name + "=";
    var alen = arg.length;
    var clen = document.cookie.length;
    var i = 0;
    while (i < clen) {
        var j = i + alen;
        if (document.cookie.substring(i, j) == arg)
            return getCookieVal(j);
        i = document.cookie.indexOf(" ", i) + 1;
        if (i == 0) break;
    }
    return null;
}
function DeleteCookie(name) {
    var path = "/";
    var domain = "";
    if (GetCookie(name)) {
        var expires = new Date();
        expires.setUTCFullYear(expires.getUTCFullYear() - 1);
        document.cookie = name + '=; expires=' + expires.toUTCString() + '; path=/';
    }
}
function setSubCookieAndCookie(cookieName, subCookieName, subCookieValue) {
    var cookieValue = GetCookie(cookieName);
    if (cookieValue == null || cookieValue.length == 0) {
        cookieValue = subCookieName + '=' + subCookieValue;
    }
    else {
        var posStart = cookieValue.indexOf(subCookieName + '=');
        var posEnd = cookieValue.indexOf('&', posStart + 1);
        if (posEnd == -1) {
            posEnd = cookieValue.length;
        }
        if (posStart >= 0 && posEnd > 0) {
            cookieValue = cookieValue.substring(0, posStart) +
			subCookieName + '=' + subCookieValue +
			cookieValue.substring(posEnd, cookieValue.length);
        }
        else {
            if (cookieValue.length > 0) {
                cookieValue = cookieValue + '&' + subCookieName + '=' + subCookieValue;
            }
        }
    }
    setNoEscapeCookie(cookieName, cookieValue);
}
function deleteSubCookieAndCookie(cookieName, subCookieName, subCookieValue) {
    var cookieValue = GetCookie(cookieName);
    if (cookieValue == null || cookieValue.length == 0) {
        //cookieValue = subCookieName + '=' + subCookieValue;
        return;
    }
    else {
        var posStart = cookieValue.indexOf('&' + subCookieName + '=');
        if (posStart < 0) {
            posStart = cookieValue.indexOf(subCookieName + '=');
        }
        var posEnd = cookieValue.indexOf('&', posStart + 1);
        if (posEnd == -1) {
            posEnd = cookieValue.length;
        }
        if (posStart >= 0 && posEnd > 0) {
            cookieValue = cookieValue.substring(0, posStart) +
			cookieValue.substring(posEnd, cookieValue.length);
        }
        else {
            if (cookieValue.length > 0) {
                cookieValue = cookieValue;
            }
        }
    }
    setNoEscapeCookie(cookieName, cookieValue);
}
function GetSubCookieValue(cookieName, subCookieName) {
    var cookieValue = GetCookie(cookieName);
    if (cookieValue != null) {
        if (cookieValue.length > 0) {
            var arrSubCookies = cookieValue.split('&');
            for (var i = 0; i < arrSubCookies.length; i++) {
                if (arrSubCookies[i].indexOf(subCookieName) == 0) {
                    return arrSubCookies[i].substring(subCookieName.length + 1, arrSubCookies[i].length);
                }
            }
        }
    }
    return null;
}


Reg_Expressions1 = {
    EmailSyntax: /^[A-Za-z0-9-._]+\@[A-Za-z0-9-._]+\.[A-Za-z-_]+$/,
    Accent: /[\s-_\.????????????????]+/,
    Spaces: /[\s]+/,
    ClientIDSyntax: /^[0-9]+$/
};
function IsValidClientIDSyntax4Header(field_val) {
    if (isNullOrUndefined(field_val)) return false;
    if ((field_val.length != 9)) return false;
    if (Reg_Expressions1.ClientIDSyntax.test(field_val)) {
        return true;
    }
    return false;
};
function validationQuickLoginInput(evt) {
    isQuickLogin = 1;
    isLoginOKClick = 1;
    var id = document.getElementById('quickLoginId').value;
    var password = document.getElementById('quickLoginPassword').value;
    var errorMessageDiv = document.getElementById('quickLoginErrorMessageDiv');
    if ((id != null) && (password != null)) {
        if (id.length == 0 || password.length == 0) {
            errorMessageDiv.innerHTML = 'Certains champs du formulaire posent un probl&#232;me: Votre identifiant est incorrect';
            stopDefault(evt);
            $j("#anchNotLoginFocus").focus();
            isQuickLogin = 0;
            return false;
        }
        var rePassword = new RegExp("^.{1,32}$");
        if (IsValidEmailSyntax4Header(id) || IsValidClientIDSyntax4Header(id)) {
            if (password.match(rePassword)) { return true; }
            else {
                errorMessageDiv.innerHTML = 'Certains champs du formulaire posent un probl&#232;me: Votre mot de passe est incorrect.';
                if (evt != null || typeof (evt) != 'undefied') {
                    stopDefault(evt);
                }
                $j("#anchNotLoginFocus").focus();
                isQuickLogin = 0;
                return false;
            }
        } else {
            errorMessageDiv.innerHTML = 'Certains champs du formulaire posent un probl&#232;me: Votre identifiant est incorrect';
            stopDefault(evt);
            $j("#anchNotLoginFocus").focus();
            isQuickLogin = 0;
            return false;
        }
    }
    else { stopDefault(evt); $j("#anchNotLoginFocus").focus(); isQuickLogin = 0; return false; }
}
function IsValidEmailSyntax4Header(field_val) {
    if (isNullOrUndefined(field_val)) return false;
    if (Reg_Expressions1.EmailSyntax.test(field_val)) {
        var email_array = field_val.split("@");
        if (isNullOrUndefined(email_array) || email_array.length != 2) return false;
        var email_X = email_array[0];
        if (isNullOrUndefined(email_X)) return false;
        if (email_X.length <= 0 || email_X.length > 32) return false;
        var email_suffix = email_array[1];
        if (isNullOrUndefined(email_suffix)) return false;
        if (email_suffix.length <= 0 || email_suffix.length > 32) return false;
        var suffix_array = email_suffix.split(".");
        if (isNullOrUndefined(suffix_array) || suffix_array.length < 2) return false;
        var email_Y = suffix_array[0];
        if (isNullOrUndefined(email_Y)) return false;
        if (email_Y.length <= 0) return false;
        var email_Z = suffix_array[1];
        if (suffix_array.length > 2)
            email_Z = suffix_array[suffix_array.length - 1];
        if (isNullOrUndefined(email_Z)) return false;
        if (email_Z.length <= 0) return false;
        if (Reg_Expressions1.Accent.test(email_Z)) return false;
        if (Reg_Expressions1.Spaces.test(email_Z)) return false;
        return true;
    }
    return false;
}
function stopDefault(evt) {
    if (evt) {
        if (document.all) {//for ie
            evt.returnValue = false;
        } else { evt.preventDefault(); }
    }
}
//Global variable
var isQuickLogin = 0;
var isLoginOKClick = 0;
var frame_submitted = false;
var userName = '';
function setWelcomeMsg(serverErrorMessage) {
    var UserGroup = "";
    var UserFirstName = "";
    var UserLastName = "";
    var LastViewedProducts = "";
    var nameLabel = "";
    var lblFullNameWelcome = "";
    var errorMessage = "";
    var quickLoginPageURL = "";
    if (typeof (getUserGroup) == 'function') {
        UserGroup = getUserGroup();
    }
    if (typeof (getUserFirstName) == 'function') {
        UserFirstName = getUserFirstName();
    }
    if (typeof (getUserLastName) == 'function') {
        UserLastName = getUserLastName();
    }
    if (typeof (getLastViewedProducts) == 'function') {
        LastViewedProducts = getLastViewedProducts();
    }
    if (typeof (getErrorMessage) == 'function') {
        errorMessage = getErrorMessage();
    }
    if (typeof (getQuickLoginURL) == 'function') {
        quickLoginPageURL = getQuickLoginURL();
    }
    if (errorMessage == "") {
        errorMessage = serverErrorMessage;
    }
    WelcomeMessageInterface(
		UserGroup, UserFirstName, UserLastName,
		"nameLabel", "_lblFullNameWelcome",
		LastViewedProducts, "VisitedProducts",
		errorMessage, quickLoginPageURL);
}
function plainTextSyncGetCall(pageURL) {
    var xmlReq = getXmlHTTP();
    if (xmlReq != null) {
        xmlReq.open("GET", pageURL, false);
        xmlReq.send(null);
        if (xmlReq.readyState == 4) {
            if (xmlReq.status == 200) { if (xmlReq.responseText != null) { return xmlReq.responseText; } }
        }
    }
    return null;
}
function getXmlHTTP() {
    if (typeof XMLHttpRequest != "undefined") {
        return new XMLHttpRequest();
    } else if (typeof ActiveXObject != "undefined") {
        try { var xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); return xmlhttp; } catch (e) { return null; }
    }
    return null;
}
function CallBackOnLoginSuccess() {
    if (typeof (CKGListPageFunctions) == "function") {
        CKGListPageFunctions();
    }
    if (typeof (CKGListSearchPageFunctions) == "function") {
        CKGListSearchPageFunctions();
    }
    if (typeof (setControlsOnLoad) == "function") {
        setControlsOnLoad();
    }
    if (typeof (UpdateBasketCount) == "function") {
        UpdateBasketCount();
    }
}
/*
Account Enums
*/

var isHeaderLoginOKClick = false;

ReplyMessageStatus = {
    SUCCESS: 0,
    FAILED: 1,
    WARNING: 2,
    TRANSITION: 3,
    TECHNICAL_ERROR: 4,
    MERGEBASKET_FAILED: 5,
    VALIDATION_FAILED: 6,
    LOGIN_OK_BUT_NOACCOUNT: 7,
    INVALID_LOGIN_ATTEMPTS: 8,
    CALL_ADVISORY: 9,
    INVALID_DOB_ATTEMPTS: 10,
    UNKNOWN: 99
};

//URLs to redirect 
Urls = {
    IdentifyAccountPage: '/Account/IdentifyAcct.aspx',
    TechnicalErrorPage: '/Error_Pages/Error404_technical_error.aspx',
    TechnicalErrorPage_QuickLoginTimeout: '/Error_Pages/Error404_technical_error.aspx?QuickLoginTimeout',
    DefaultPage: '/Default.aspx'
};

function FormatErrorMessageInText(errorMessage) {
    //TODO: html should come from ResourceManager
    return "Certains champs du formulaire posent un probl?me: " + errorMessage;
}

//Will be called from QuickLogin popup
function identifyUser(quickLoginURL, currentUserName, password) {
    isHeaderLoginOKClick = true;
    var secureLoginURL = quickLoginURL + "&uid=" + currentUserName + "&pwd=" + password;
    userName = currentUserName;
    /*$j.jsonp(
    {
    url: secureLoginURL,
    success: SuccessData,
    cache: false,
    pageCache: false,
    error: function (d, msg) {
    isHeaderLoginOKClick = false;
    if (msg == 'timeout') {
    RedirectToPage(Urls.TechnicalErrorPage_QuickLoginTimeout);
    }
    else {
    RedirectToPage(Urls.IdentifyAccountPage);
    }
    },
    timeout: 300000
    }
    );*/
    $j.ajax({
        url: secureLoginURL,
        success: function (data) { SuccessData(data); },
        cache: false,
        pageCache: false,
        dataType: "jsonp",
        error: function (d, msg) {
            isHeaderLoginOKClick = false;
            if (msg == 'timeout') {
                RedirectToPage(Urls.TechnicalErrorPage_QuickLoginTimeout);
            }
            else {
                RedirectToPage(Urls.IdentifyAccountPage);
            }
        },
        timeout: 300000
    });
}

//Timeout will redirect to error page and add query string generic message

function RedirectToPage(redirectUrl) {
    if (!isNullOrUndefined(redirectUrl)) {
        window.location.href = redirectUrl;
    }
}

function SuccessData(json) {
    isHeaderLoginOKClick = false;
    if (!isNullOrUndefined(json)) {
        var errorMessage = '';
        if (!isNullOrUndefined(json.GenericErrorMessage)) {
            errorMessage = json.GenericErrorMessage;
        }

        var IsMFSuccess = true;

        switch (json.ReplyMessageStatus) {
            case ReplyMessageStatus.WARNING:
                IsMFSuccess = false;
            case ReplyMessageStatus.INVALID_LOGIN_ATTEMPTS:
                IsMFSuccess = false;
            case ReplyMessageStatus.LOGIN_OK_BUT_NOACCOUNT:
                IsMFSuccess = false;
            case ReplyMessageStatus.SUCCESS:


                try {
                    var basketObj = new RedcatsOT.Basket();
                    basketObj.InvalidateBasketContentCache();
                } catch (ex) { }
                var isPageRefresh = false;
                if (IsMFSuccess) {
                    isPageRefresh = DOPageRefresh();
                }

                if (!isPageRefresh) {
                    errorMessage = FormatErrorMessageInText(errorMessage);
                    setWelcomeMsg(errorMessage);
                    // Scripts\HeaderCookieHelper.js
                    CallBackOnLoginSuccess();
                }

                break;
            case ReplyMessageStatus.TRANSITION:

                DoTransitonForQuickLogin(json.Transition, json.MFErrorTypes);
                break;
            default:
                RedirectToPage(Urls.TechnicalErrorPage + "?QuickLogin=" + errorMessage + "&errortype=" + json.MFErrorTypes);
                break;
        }
    }
    else {
        RedirectToPage(Urls.TechnicalErrorPage + "?QuickLogin=NoJSONResponse");
    }
}

function submitToQuickLogin(quickLoginUrl) {
    if (!CheckCookiesEnabled()) {
        return false;
    }

    //To avoid multiple OK click
    if (isHeaderLoginOKClick) {
        return;
    }

    /*
    This is a call to a function in the file XmlHttpRequestCalls.js
    Most of the page that have the quick login box are akamized, so cookies are not necessarily
    set when you hit them. This synchronous call to a dummy page ensures that.
    */
    plainTextSyncGetCall('/IdentifyAcctAsyncDummyPage.aspx');
    identifyUser(quickLoginUrl, document.getElementById("quickLoginId").value, document.getElementById("quickLoginPassword").value);
}

function DOPageRefresh() {
    if (typeof (IsBasketV2) != 'undefined' && IsBasketV2 != null && IsBasketV2 == true) {
        var isViewBasketPage = window.location.href.toLowerCase().indexOf("basketv2.aspx");
    }
    else {
        var isViewBasketPage = window.location.href.toLowerCase().indexOf("basket.aspx");
    }
    var isMappyPage = window.location.href.toLowerCase().indexOf("mappy.aspx");
    var isFinarefPage = window.location.href.toLowerCase().indexOf("finaref.aspx");
    var isCKGASKWithoutCard = window.location.href.toLowerCase().indexOf("ckgaskwithoutcard.aspx");
    var isCKGCustomer = window.location.href.toLowerCase().indexOf("ckgcustomer.aspx");
    var isCKGLogin = window.location.href.toLowerCase().indexOf("ckglogin.aspx");
    var isCKGNoASKNoCard = window.location.href.toLowerCase().indexOf("ckgnoasknocard.aspx");
    var isPremiumOffer = window.location.href.toLowerCase().indexOf("rpremiumoffer.aspx");
    var isExpressOffer = window.location.href.toLowerCase().indexOf("rexpressoffer.aspx");

    if (isViewBasketPage > 0 || isMappyPage > 0 || isFinarefPage > 0 ||
       isCKGASKWithoutCard > 0 || isCKGCustomer > 0 || isCKGLogin > 0 ||
       isCKGNoASKNoCard > 0 || isPremiumOffer > 0 || isExpressOffer > 0) {
        window.location.reload();
        return true;
    }
    return false;
}

function DoTransitonForQuickLogin(transition, mferrorType) {
    if (isNullOrUndefined(transition)) {
        window.location.href = Urls.TechnicalErrorPage;
    } else {
        window.location.href = transition.replace(/\~/ig, '') + "?errortype=" + mferrorType; ;
    }
};
function BasketCountInterface(cookieGroup, cookieName, countLabel) {
    var countvalue = GetSubCookieValue(cookieGroup, cookieName);
    var _countLabel = document.getElementById(countLabel);
    if (countvalue == null) {
        countvalue = 0;
    }
    if (_countLabel) {
        _countLabel.innerHTML = countvalue;
        if (document.getElementsByTagName('body')[0].id.indexOf('virtual') != -1) { /* Virtual site */
            _countLabel.setAttribute("href", "javascript:temporise('/Panier/Basket.aspx');");
        } else {
            _countLabel.setAttribute("href", "/Panier/Basket.aspx");
        }
        _countLabel.className = "articles";
    }
}

/*
Function CaptureHeaderClick will take one parameter linkName 
will set the value for the tags and finally call the s.tl method.
*/
function CaptureHeaderClick(call, linkName) {

    if (typeof (s) == "undefined") return;

    var callingPage;
    var callFrom;

    /* first clear the values of the variable */
    if (s.prop21 != null) {
        s.prop21 = "";
    }

    if (s.prop22 != null) {
        s.prop22 = "";
    }

    /* Set the linkTrackVars and linkTrackEvents */
    s.linkTrackVars = "prop21,prop22";

    callFrom = call.toLowerCase();
    if (callFrom == "basket")
        callingPage = "Mon Panier > ";
    else if (callFrom == "login")
        callingPage = "Espace Client > ";
    else if (callFrom == "header")
        callingPage = "";

    /* Add the proper value for prop 21 and prop22 */
    s.prop21 = callingPage + linkName;

    if (s.pageName != null)
        s.prop22 = s.pageName;

    /* calling method s.tl() */
    s.tl(false, 'o', linkName);

}

overdiv = 0;
function EnterLoginonUserId(quickLoginUrl, quickLoginIdEve) {

    if (validationQuickLoginInput(quickLoginIdEve)) {
        return submitToQuickLogin(quickLoginUrl)
    } else {
        $j("#quickLoginId").focus();
    }

}
function closeSelf() { self.opener = this; this.close(); }
function WelcomeMessageInterface(
	userCookieGroup, userFNameCookie, userLNameCookie,
	greetingLabel, nameLabel,
	productHistoryCookie, productHistoryHyperLink,
	errorMessage, quickLoginUrl) {

    var userFNameCookieId = userFNameCookie;
    var userLNameCookieId = userLNameCookie;
    var cookieContents = this.document.cookie;

    // changed by jjk - use getsubcookie helper func instead of manual parsing
    var userfnameCookieValue = GetSubCookieValue(userCookieGroup, userFNameCookieId);
    var userlnameCookieValue = GetSubCookieValue(userCookieGroup, userLNameCookieId);

    if ((userfnameCookieValue != null) || (userlnameCookieValue != null)) {

        //begin-SK:: replacing "%0" to "" spaces only when the browser is SAFARI....
//        if (navigator.userAgent.toLowerCase().indexOf('safari') != -1 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
//            var userFName = unicodelessDecode(userfnameCookieValue).replace(/%0/g, "");
//            var userLName = unicodelessDecode(userlnameCookieValue).replace(/%0/g, "");
//        } else {
            var userFName = decode(userfnameCookieValue);
            var userLName = decode(userlnameCookieValue);
        //}
        //end-SK:: replacing "%0" to "" spaces only when the browser is SAFARI....

        var greetingLabel = document.getElementById(greetingLabel);
        if (greetingLabel != null) {
            greetingLabel.innerHTML = userFName + " " + userLName;
            showValidLoginLayer();
            isQuickLogin = 0;
            lockLoginLayer = "false";
        }
    } else {

        if (typeof (getDisplayGreeting) == "function" && getDisplayGreeting().toLowerCase() != "true") {

            isQuickLogin = 0;
            lockLoginLayer = "false";
            return;

        }

        if (!isNullOrUndefined(errorMessage)) {

            var _nameLabel = document.getElementById(nameLabel);

            var _htmlForTable = "<div class='client_left'>";

            _htmlForTable += "<div class='login-username'>";
            _htmlForTable += "<span class='dp_lg_tx'>N<span class='sup'>o</span> Client ou E-mail :<br /></span>";

            _htmlForTable += "<input  type=\"text\" onfocus=\"lockLoginLayer=true; \" onblur=\"lockLoginLayer=false;if(overdiv==0){setTimeout('Toggleoff()',2000);}\" id=\"quickLoginId\" name=\"quickLoginId\" value=\"" + userName + "\" onkeypress=\"if(event.keyCode==13){setTimeout('EnterLoginonUserId(\\'" + quickLoginUrl + "\\',null)',100);return false}\" />";
            _htmlForTable += "</div>";
            _htmlForTable += "<div class='login-password'>";
            _htmlForTable += "<span class='dp_lg_tx'>Mot de passe :<br /></span>";

            _htmlForTable += "<input  type=\"password\" onfocus=\"lockLoginLayer=true;\" onblur=\"lockLoginLayer=false;if(overdiv==0){setTimeout('Toggleoff()',2000);}\" id=\"quickLoginPassword\" name=\"quickLoginPassword\" maxlength=\"16\" OnKeyPress=\"if(event.keyCode==13){if(validationQuickLoginInput(event)){return submitToQuickLogin('" + quickLoginUrl + "')}};\" />";
            _htmlForTable += "</div>";
            _htmlForTable += "<a id='ok_btn' onmouseover=\"if(!document.all){overdiv=1;}\" class=\"png\" href= \"javascript:void(0)\" onClick =\"javascript: if(validationQuickLoginInput()){return submitToQuickLogin('" + quickLoginUrl + "');} \" OnKeyPress=\"if(event.keyCode==13){if(validationQuickLoginInput(event)){return submitToQuickLogin('" + quickLoginUrl + "')}};\"></a>";

            // TT# 6394
            _htmlForTable += "";


            _htmlForTable += "<a class=\"forgot-password\" href=\"/Account/ForgotPword.aspx\">";
            _htmlForTable += "Mot de passe oubli&eacute; ?</a>";

            _htmlForTable += "<span id='quickLoginErrorMessageDiv' class='dp_log_err_msg'>" + errorMessage + "</span>";

            _htmlForTable += "<div class=\"clear\"></div>";

            _htmlForTable += "<div class=\"new-client\">";
            _htmlForTable += '<a id="new-client" onclick="CaptureHeaderClick(\'login\',\'Nouveau client? Cr?er mon compte\')" href="/Account/CreateProspectAccount.aspx" rel="nofollow">';
            _htmlForTable += 'Nouveau client ?';
            _htmlForTable += '</a>';
            _htmlForTable += '<a id="new-client-btn" onclick="CaptureHeaderClick(\'login\',\'Nouveau client? Cr?er mon compte\')" href="/Account/CreateProspectAccount.aspx" rel="nofollow">';

            _htmlForTable += '</a>';
            _htmlForTable += "</div>";

            _htmlForTable += "</div>";
            _htmlForTable += "<input id='quickLoginReturnUrl' name='quickLoginReturnUrl' value=\"" + window.location.href + "\"  type='hidden' />";

            if (!isNullOrUndefined(_nameLabel)) {
                _nameLabel.innerHTML = _htmlForTable;
            }

            if ((!isNullOrUndefined(errorMessage)) && (errorMessage.length > 0)) {

                showValidLoginLayer();
                $j("#anchNotLoginFocus").focus();

            }

            showValidLoginLayer();

        }

    }
    updateMRSHomeLnk();
}


function ShowClickableWord(word) {
    var w = window.open("/clickableword.aspx?word=" + word, "ClickableWord", "scrollbars=yes,width=510,height=300,left=50, top=50");
    w.focus();
}

var lockLoginLayer = false;

function showValidLoginLayer() {
    var UserGroup = "";
    var UserFirstName = "";
    var UserLastName = "";

    if (typeof (getUserGroup) == 'function') {
        UserGroup = getUserGroup();
    }
    if (typeof (getUserFirstName) == 'function') {
        UserFirstName = getUserFirstName();
    }
    if (typeof (getUserLastName) == 'function') {
        UserLastName = getUserLastName();
    }

    var toggleLayerNotLogin = document.getElementById("toggleLayerNotLogin");
    var toggleLayerLogin = document.getElementById("toggleLayerLogin");
    var userfnameCookieValue = GetSubCookieValue(UserGroup, UserFirstName);
    var userlnameCookieValue = GetSubCookieValue(UserGroup, UserLastName);

    //check the user is logged in or not and show the corresponsding links
    if ((userfnameCookieValue != null) || (userlnameCookieValue != null)) {

        //hide and show of the login layer 				
        if (toggleLayerNotLogin != null) { $j("#toggleLayerNotLogin").hide(); }

        if (toggleLayerLogin != null) {
            $j("#toggleLayerLogin").show();
        }

    } else {

        if (toggleLayerNotLogin != null) { $j("#toggleLayerLogin").hide(); }

        if (toggleLayerNotLogin != null) {
            $j("#toggleLayerNotLogin").show();
        }

    }

}

function Toggleon() {
    var UserGroup = "";
    var UserFirstName = "";
    var UserLastName = "";

    if (typeof (getUserGroup) == 'function') {
        UserGroup = getUserGroup();
    }
    if (typeof (getUserFirstName) == 'function') {
        UserFirstName = getUserFirstName();
    }
    if (typeof (getUserLastName) == 'function') {
        UserLastName = getUserLastName();
    }

    var Layer = document.getElementById("toggle-layer1");
    var userfnameCookieValue = GetSubCookieValue(UserGroup, UserFirstName);
    var userlnameCookieValue = GetSubCookieValue(UserGroup, UserLastName);

    showValidLoginLayer();

    $j("#header-palette-3").removeClass("palette-3");
    $j("#header-palette-3").addClass("palette-3-on");

    if (Layer == null) { Layer = document.getElementById("toggle-layer"); }


    if (typeof (Layer) != "undefined" && Layer != null) {
        Layer.style.display = "block";
    }
    $j('.acc_fle').addClass('acc_fle_hover');
}
function Toggleoff() {
    if (isQuickLogin == 1) {
        //alert(isQuickLogin);
        return;
    }
    if (lockLoginLayer == true) { return; }
    if (overdiv == 0) {
        var Layer = document.getElementById("toggle-layer1");
        if (Layer == null) { Layer = document.getElementById("toggle-layer"); }
        if (typeof (Layer) != "undefined" && Layer != null) {
            Layer.style.display = "none";
            $j('.acc_fle').removeClass('acc_fle_hover');
        }
    }
}
function updateMRSHomeLnk() {
    if ($j('div#toggleLayerLogin').css('display') != 'none') {
        if (getCookie("M.R.User") != null) {
            var cookie_client = getCookie("M.R.User");
            var id_Client = cookie_client.substr(cookie_client.indexOf('CustNmbr'), cookie_client.length).split('&')[0].split('=')[1];
            if (cookie_client.indexOf('Express=RExpressCustomer') != -1)
                $j('div.HeaderByOT li#lien-cookie').html('<a href="/MySpace/RExpressSpace.aspx">Mon espace R Express</a>');
            else if (cookie_client.indexOf('Premium=RPremiumCustomer') != -1 || cookie_client.indexOf('Premium=CPREM_WAITING_ORDER_MADE') != -1)
                $j('div.HeaderByOT li#lien-cookie').html('<a href="/MySpace/RPremiumSpace.aspx">Mon espace R Premium</a>');
            else if (cookie_client.indexOf('CKGUser=ActivatedCKG') != -1)
                $j('div.HeaderByOT li#lien-cookie').html('<a href="/MySpace/CKGSpace.aspx">Mon espace Kangourou</a>');
            else {
                if (document.getElementById('li#lien-cookie') != null) {
                    var referent = document.getElementById('menu-login');
                    referent.removeChild(document.getElementById('li#lien-cookie'));
                }
                $j('div.container-toggle-layer1 .facilites-no-connecte').css('display', 'block');
            }
        }
    }
}


//to get the comments: check ABTestingCommented.js in ABTesting Project
var REDCATS={};
REDCATS.ABTesting={};
REDCATS.ABTesting.REPARTITION=0.50;
REDCATS.ABTesting.GroupAId=1;
REDCATS.ABTesting.GroupBId=2;
REDCATS.ABTesting.NoGroupId=0;
REDCATS.ABTesting.getCookie=function(name){
var start=document.cookie.indexOf(name+"=");
var len=start+name.length+1;
if((!start)&&(name!=document.cookie.substring(0,name.length))){
return null;
}
if(start==-1)return null;
var end=document.cookie.indexOf(';',len);
if(end==-1)end=document.cookie.length;
return unescape(document.cookie.substring(len,end));
}
REDCATS.ABTesting.setCookie=function(name,value,expires,path,domain,secure){
var today=new Date();
today.setTime(today.getTime());
if(expires){
expires=expires*1000*60*60*24;
}
var expires_date=new Date(today.getTime()+(expires));
document.cookie=name+'='+escape(value)+
((expires)?';expires='+expires_date.toGMTString():'')+
((path)?';path='+path:'')+
((domain)?';domain='+domain:'')+
((secure)?';secure':'');
}
REDCATS.ABTesting.deleteCookie=function(name,path,domain){
if(getCookie(name))document.cookie=name+'='+
((path)?';path='+path:'')+
((domain)?';domain='+domain:'')+
';expires=Thu, 01-Jan-1970 00:00:01 GMT';
}
REDCATS.ABTesting.getGroup=function()
{
var cookieValue;
if(!REDCATS.ABTesting.getCookie)return false;
cookieValue=parseInt(REDCATS.ABTesting.getCookie('ABTesting'));
if(isNaN(cookieValue))
{
cookieValue=REDCATS.ABTesting.NoGroupId;
}
return cookieValue;
}
REDCATS.ABTesting.chooseGroup=function()
{
var domain='';
var currentHost=document.location.hostname;
var domainCheck='.chm.r';
var ptr;
var num=Math.floor(Math.random()*100001);
num=Math.floor((num/100000)*(1/REDCATS.ABTesting.REPARTITION))>0?REDCATS.ABTesting.GroupBId:REDCATS.ABTesting.GroupAId;
ptr=currentHost.search(domainCheck);
if(ptr>=0)
{
domain=currentHost.substr(ptr+domainCheck.length,currentHost.length);
}
domain=(document.location.hostname.search(domain)>=0)?domain:'';
REDCATS.ABTesting.setCookie('ABTesting',num,'','/',domain,false)
return num;
}
REDCATS.ABTesting.GetABGroup=function()
{
var strReturn='NULL';
switch(REDCATS.ABTesting.getGroup())
{
case REDCATS.ABTesting.GroupAId:strReturn='Group A';break;
case REDCATS.ABTesting.GroupBId:strReturn='Group B';break;
}
return strReturn;
}
REDCATS.ABTesting.ABTestingObject=function(objId)
{
var ZoneIDs=new Array();
this.setContentGroupA=function(id)
{
setContent(REDCATS.ABTesting.GroupAId,id);
}
this.setContentGroupB=function(id)
{
setContent(REDCATS.ABTesting.GroupBId,id);
}
var setContent=function(index,id)
{
ZoneIDs[index]=id;
}
this.writeContent=function()
{
var contentOutput='';
try{
var group=REDCATS.ABTesting.getGroup();
if(group===REDCATS.ABTesting.NoGroupId)group=REDCATS.ABTesting.chooseGroup();
var inputZoneContent;
if(!group||typeof(group)!='number'||group>2)
group=0;
var inputZone=document.getElementById(ZoneIDs[group]);
if((inputZone!==null)&&(inputZone.innerHTML.length>0))
{ 
inputZoneContent=inputZone.innerHTML.replace(/<!--ABTOREMOVE/,'');
inputZoneContent=inputZoneContent.replace(/ABTOREMOVE-->/,'');
inputZoneContent=inputZoneContent.replace(/&lt;!--ABTOREMOVE/,'');
inputZoneContent=inputZoneContent.replace(/ABTOREMOVE--&gt;/,'');
contentOutput=inputZoneContent;
if(contentOutput!=null)
	document.write(contentOutput); 
}
}
catch(e){
contentOutput=document.getElementById('ABTestingDefaultContent_'+objId).innerHTML.replace(/<!--ABTOREMOVE/,'').replace(/<!--ABTOREMOVE/,'');
}
}
}

var mboxCopyright = "Copyright 1996-2011. Adobe Systems Incorporated. All rights reserved."; mboxUrlBuilder = function (a, b) { this.a = a; this.b = b; this.c = new Array(); this.d = function (e) { return e; }; this.f = null; }; mboxUrlBuilder.prototype.addParameter = function (g, h) { var i = new RegExp('(\'|")'); if (i.exec(g)) { throw "Parameter '" + g + "' contains invalid characters"; } for (var j = 0; j < this.c.length; j++) { var k = this.c[j]; if (k.name == g) { k.value = h; return this; } } var l = new Object(); l.name = g; l.value = h; this.c[this.c.length] = l; return this; }; mboxUrlBuilder.prototype.addParameters = function (c) { if (!c) { return this; } for (var j = 0; j < c.length; j++) { var m = c[j].indexOf('='); if (m == -1 || m == 0) { continue; } this.addParameter(c[j].substring(0, m), c[j].substring(m + 1, c[j].length)); } return this; }; mboxUrlBuilder.prototype.setServerType = function (n) { this.o = n; }; mboxUrlBuilder.prototype.setBasePath = function (f) { this.f = f; }; mboxUrlBuilder.prototype.setUrlProcessAction = function (p) { this.d = p; }; mboxUrlBuilder.prototype.buildUrl = function () { var q = this.f ? this.f : '/m2/' + this.b + '/mbox/' + this.o; var r = document.location.protocol == 'file:' ? 'http:' : document.location.protocol; var e = r + "//" + this.a + q; var s = e.indexOf('?') != -1 ? '&' : '?'; for (var j = 0; j < this.c.length; j++) { var k = this.c[j]; e += s + encodeURIComponent(k.name) + '=' + encodeURIComponent(k.value); s = '&'; } return this.t(this.d(e)); }; mboxUrlBuilder.prototype.getParameters = function () { return this.c; }; mboxUrlBuilder.prototype.setParameters = function (c) { this.c = c; }; mboxUrlBuilder.prototype.clone = function () { var u = new mboxUrlBuilder(this.a, this.b); u.setServerType(this.o); u.setBasePath(this.f); u.setUrlProcessAction(this.d); for (var j = 0; j < this.c.length; j++) { u.addParameter(this.c[j].name, this.c[j].value); } return u; }; mboxUrlBuilder.prototype.t = function (v) { return v.replace(/\"/g, '&quot;').replace(/>/g, '&gt;'); }; mboxStandardFetcher = function () { }; mboxStandardFetcher.prototype.getType = function () { return 'standard'; }; mboxStandardFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); document.write('<' + 'scr' + 'ipt src="' + w.buildUrl() + '" language="JavaScript"><' + '\/scr' + 'ipt>'); }; mboxStandardFetcher.prototype.cancel = function () { }; mboxAjaxFetcher = function () { }; mboxAjaxFetcher.prototype.getType = function () { return 'ajax'; }; mboxAjaxFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); var e = w.buildUrl(); this.x = document.createElement('script'); this.x.src = e; document.body.appendChild(this.x); }; mboxAjaxFetcher.prototype.cancel = function () { }; mboxMap = function () { this.y = new Object(); this.z = new Array(); }; mboxMap.prototype.put = function (A, h) { if (!this.y[A]) { this.z[this.z.length] = A; } this.y[A] = h; }; mboxMap.prototype.get = function (A) { return this.y[A]; }; mboxMap.prototype.remove = function (A) { this.y[A] = undefined; }; mboxMap.prototype.each = function (p) { for (var j = 0; j < this.z.length; j++) { var A = this.z[j]; var h = this.y[A]; if (h) { var B = p(A, h); if (B === false) { break; } } } }; mboxFactory = function (C, b, D) { this.E = false; this.C = C; this.D = D; this.F = new mboxList(); mboxFactories.put(D, this); this.G = typeof document.createElement('div').replaceChild != 'undefined' && (function () { return true; })() && typeof document.getElementById != 'undefined' && typeof (window.attachEvent || document.addEventListener || window.addEventListener) != 'undefined' && typeof encodeURIComponent != 'undefined'; this.H = this.G && mboxGetPageParameter('mboxDisable') == null; var I = D == 'default'; this.J = new mboxCookieManager('mbox' + (I ? '' : ('-' + D)), (function () { return mboxCookiePageDomain(); })()); this.H = this.H && this.J.isEnabled() && (this.J.getCookie('disable') == null); if (this.isAdmin()) { this.enable(); } this.K(); this.L = mboxGenerateId(); this.M = mboxScreenHeight(); this.N = mboxScreenWidth(); this.O = mboxBrowserWidth(); this.P = mboxBrowserHeight(); this.Q = mboxScreenColorDepth(); this.R = mboxBrowserTimeOffset(); this.S = new mboxSession(this.L, 'mboxSession', 'session', 31 * 60, this.J); this.T = new mboxPC('PC', 1209600, this.J); this.w = new mboxUrlBuilder(C, b); this.U(this.w, I); this.V = new Date().getTime(); this.W = this.V; var X = this; this.addOnLoad(function () { X.W = new Date().getTime(); }); if (this.G) { this.addOnLoad(function () { X.E = true; X.getMboxes().each(function (Y) { Y.setFetcher(new mboxAjaxFetcher()); Y.finalize(); }); }); this.limitTraffic(100, 10368000); if (this.H) { this.Z(); this._ = new mboxSignaler(function (ab, c) { return X.create(ab, c); }, this.J); } } }; mboxFactory.prototype.isEnabled = function () { return this.H; }; mboxFactory.prototype.getDisableReason = function () { return this.J.getCookie('disable'); }; mboxFactory.prototype.isSupported = function () { return this.G; }; mboxFactory.prototype.disable = function (bb, cb) { if (typeof bb == 'undefined') { bb = 60 * 60; } if (typeof cb == 'undefined') { cb = 'unspecified'; } if (!this.isAdmin()) { this.H = false; this.J.setCookie('disable', cb, bb); } }; mboxFactory.prototype.enable = function () { this.H = true; this.J.deleteCookie('disable'); }; mboxFactory.prototype.isAdmin = function () { return document.location.href.indexOf('mboxEnv') != -1; }; mboxFactory.prototype.limitTraffic = function (db, bb) { }; mboxFactory.prototype.addOnLoad = function (eb) { if (this.isDomLoaded()) { eb(); } else { var fb = false; var gb = function () { if (fb) { return; } fb = true; eb(); }; this.hb.push(gb); if (this.isDomLoaded() && !fb) { gb(); } } }; mboxFactory.prototype.getEllapsedTime = function () { return this.W - this.V; }; mboxFactory.prototype.getEllapsedTimeUntil = function (ib) { return ib - this.V; }; mboxFactory.prototype.getMboxes = function () { return this.F; }; mboxFactory.prototype.get = function (ab, jb) { return this.F.get(ab).getById(jb || 0); }; mboxFactory.prototype.update = function (ab, c) { if (!this.isEnabled()) { return; } if (!this.isDomLoaded()) { var X = this; this.addOnLoad(function () { X.update(ab, c); }); return; } if (this.F.get(ab).length() == 0) { throw "Mbox " + ab + " is not defined"; } this.F.get(ab).each(function (Y) { Y.getUrlBuilder().addParameter('mboxPage', mboxGenerateId()); Y.load(c); }); }; mboxFactory.prototype.create = function (ab, c, kb) { if (!this.isSupported()) { return null; } var e = this.w.clone(); e.addParameter('mboxCount', this.F.length() + 1); e.addParameters(c); var jb = this.F.get(ab).length(); var lb = this.D + '-' + ab + '-' + jb; var mb; if (kb) { mb = new mboxLocatorNode(kb); } else { if (this.E) { throw 'The page has already been loaded, can\'t write marker'; } mb = new mboxLocatorDefault(lb); } try { var X = this; var nb = 'mboxImported-' + lb; var Y = new mbox(ab, jb, e, mb, nb); if (this.H) { Y.setFetcher(this.E ? new mboxAjaxFetcher() : new mboxStandardFetcher()); } Y.setOnError(function (ob, n) { Y.setMessage(ob); Y.activate(); if (!Y.isActivated()) { X.disable(60 * 60, ob); window.location.reload(false); } }); this.F.add(Y); } catch (pb) { this.disable(); throw 'Failed creating mbox "' + ab + '", the error was: ' + pb; } var qb = new Date(); e.addParameter('mboxTime', qb.getTime() - (qb.getTimezoneOffset() * 60000)); return Y; }; mboxFactory.prototype.getCookieManager = function () { return this.J; }; mboxFactory.prototype.getPageId = function () { return this.L; }; mboxFactory.prototype.getPCId = function () { return this.T; }; mboxFactory.prototype.getSessionId = function () { return this.S; }; mboxFactory.prototype.getSignaler = function () { return this._; }; mboxFactory.prototype.getUrlBuilder = function () { return this.w; }; mboxFactory.prototype.U = function (e, I) { e.addParameter('mboxHost', document.location.hostname).addParameter('mboxSession', this.S.getId()); if (!I) { e.addParameter('mboxFactoryId', this.D); } if (this.T.getId() != null) { e.addParameter('mboxPC', this.T.getId()); } e.addParameter('mboxPage', this.L); e.addParameter('screenHeight', this.M); e.addParameter('screenWidth', this.N); e.addParameter('browserWidth', this.O); e.addParameter('browserHeight', this.P); e.addParameter('browserTimeOffset', this.R); e.addParameter('colorDepth', this.Q); e.setUrlProcessAction(function (e) { e += '&mboxURL=' + encodeURIComponent(document.location); var rb = encodeURIComponent(document.referrer); if (e.length + rb.length < 2000) { e += '&mboxReferrer=' + rb; } e += '&mboxVersion=' + mboxVersion; return e; }); }; mboxFactory.prototype.sb = function () { return ""; }; mboxFactory.prototype.Z = function () { document.write('<style>.' + 'mboxDefault' + ' { visibility:hidden; }</style>'); }; mboxFactory.prototype.isDomLoaded = function () { return this.E; }; mboxFactory.prototype.K = function () { if (this.hb != null) { return; } this.hb = new Array(); var X = this; (function () { var tb = document.addEventListener ? "DOMContentLoaded" : "onreadystatechange"; var ub = false; var vb = function () { if (ub) { return; } ub = true; for (var i = 0; i < X.hb.length; ++i) { X.hb[i](); } }; if (document.addEventListener) { document.addEventListener(tb, function () { document.removeEventListener(tb, arguments.callee, false); vb(); }, false); window.addEventListener("load", function () { document.removeEventListener("load", arguments.callee, false); vb(); }, false); } else if (document.attachEvent) { if (self !== self.top) { document.attachEvent(tb, function () { if (document.readyState === 'complete') { document.detachEvent(tb, arguments.callee); vb(); } }); } else { var wb = function () { try { document.documentElement.doScroll('left'); vb(); } catch (xb) { setTimeout(wb, 13); } }; wb(); } } if (document.readyState === "complete") { vb(); } })(); }; mboxSignaler = function (yb, J) { this.J = J; var zb = J.getCookieNames('signal-'); for (var j = 0; j < zb.length; j++) { var Ab = zb[j]; var Bb = J.getCookie(Ab).split('&'); var Y = yb(Bb[0], Bb); Y.load(); J.deleteCookie(Ab); } }; mboxSignaler.prototype.signal = function (Cb, ab) { this.J.setCookie('signal-' + Cb, mboxShiftArray(arguments).join('&'), 45 * 60); }; mboxList = function () { this.F = new Array(); }; mboxList.prototype.add = function (Y) { if (Y != null) { this.F[this.F.length] = Y; } }; mboxList.prototype.get = function (ab) { var B = new mboxList(); for (var j = 0; j < this.F.length; j++) { var Y = this.F[j]; if (Y.getName() == ab) { B.add(Y); } } return B; }; mboxList.prototype.getById = function (Db) { return this.F[Db]; }; mboxList.prototype.length = function () { return this.F.length; }; mboxList.prototype.each = function (p) { if (typeof p != 'function') { throw 'Action must be a function, was: ' + typeof (p); } for (var j = 0; j < this.F.length; j++) { p(this.F[j]); } }; mboxLocatorDefault = function (g) { this.g = 'mboxMarker-' + g; document.write('<div id="' + this.g + '" style="visibility:hidden;display:none">&nbsp;</div>'); }; mboxLocatorDefault.prototype.locate = function () { var Eb = document.getElementById(this.g); while (Eb != null) { if (Eb.nodeType == 1) { if (Eb.className == 'mboxDefault') { return Eb; } } Eb = Eb.previousSibling; } return null; }; mboxLocatorDefault.prototype.force = function () { var Fb = document.createElement('div'); Fb.className = 'mboxDefault'; var Gb = document.getElementById(this.g); Gb.parentNode.insertBefore(Fb, Gb); return Fb; }; mboxLocatorNode = function (Hb) { this.Eb = Hb; }; mboxLocatorNode.prototype.locate = function () { return typeof this.Eb == 'string' ? document.getElementById(this.Eb) : this.Eb; }; mboxLocatorNode.prototype.force = function () { return null; }; mboxCreate = function (ab) { var Y = mboxFactoryDefault.create(ab, mboxShiftArray(arguments)); if (Y) { Y.load(); } return Y; }; mboxDefine = function (kb, ab) { var Y = mboxFactoryDefault.create(ab, mboxShiftArray(mboxShiftArray(arguments)), kb); return Y; }; mboxUpdate = function (ab) { mboxFactoryDefault.update(ab, mboxShiftArray(arguments)); }; mbox = function (g, Ib, w, Jb, nb) { this.Kb = null; this.Lb = 0; this.mb = Jb; this.nb = nb; this.Mb = null; this.Nb = new mboxOfferContent(); this.Fb = null; this.w = w; this.message = ''; this.Ob = new Object(); this.Pb = 0; this.Ib = Ib; this.g = g; this.Qb(); w.addParameter('mbox', g).addParameter('mboxId', Ib); this.Rb = function () { }; this.Sb = function () { }; this.Tb = null; }; mbox.prototype.getId = function () { return this.Ib; }; mbox.prototype.Qb = function () { if (this.g.length > 250) { throw "Mbox Name " + this.g + " exceeds max length of " + "250 characters."; } else if (this.g.match(/^\s+|\s+$/g)) { throw "Mbox Name " + this.g + " has leading/trailing whitespace(s)."; } }; mbox.prototype.getName = function () { return this.g; }; mbox.prototype.getParameters = function () { var c = this.w.getParameters(); var B = new Array(); for (var j = 0; j < c.length; j++) { if (c[j].name.indexOf('mbox') != 0) { B[B.length] = c[j].name + '=' + c[j].value; } } return B; }; mbox.prototype.setOnLoad = function (p) { this.Sb = p; return this; }; mbox.prototype.setMessage = function (ob) { this.message = ob; return this; }; mbox.prototype.setOnError = function (Rb) { this.Rb = Rb; return this; }; mbox.prototype.setFetcher = function (Ub) { if (this.Mb) { this.Mb.cancel(); } this.Mb = Ub; return this; }; mbox.prototype.getFetcher = function () { return this.Mb; }; mbox.prototype.load = function (c) { if (this.Mb == null) { return this; } this.setEventTime("load.start"); this.cancelTimeout(); this.Lb = 0; var w = (c && c.length > 0) ? this.w.clone().addParameters(c) : this.w; this.Mb.fetch(w); var X = this; this.Vb = setTimeout(function () { X.Rb('browser timeout', X.Mb.getType()); }, 15000); this.setEventTime("load.end"); return this; }; mbox.prototype.loaded = function () { this.cancelTimeout(); if (!this.activate()) { var X = this; setTimeout(function () { X.loaded(); }, 100); } }; mbox.prototype.activate = function () { if (this.Lb) { return this.Lb; } this.setEventTime('activate' + ++this.Pb + '.start'); if (this.show()) { this.cancelTimeout(); this.Lb = 1; } this.setEventTime('activate' + this.Pb + '.end'); return this.Lb; }; mbox.prototype.isActivated = function () { return this.Lb; }; mbox.prototype.setOffer = function (Nb) { if (Nb && Nb.show && Nb.setOnLoad) { this.Nb = Nb; } else { throw 'Invalid offer'; } return this; }; mbox.prototype.getOffer = function () { return this.Nb; }; mbox.prototype.show = function () { this.setEventTime('show.start'); var B = this.Nb.show(this); this.setEventTime(B == 1 ? "show.end.ok" : "show.end"); return B; }; mbox.prototype.showContent = function (Wb) { if (Wb == null) { return 0; } if (this.Fb == null || !this.Fb.parentNode) { this.Fb = this.getDefaultDiv(); if (this.Fb == null) { return 0; } } if (this.Fb != Wb) { this.Xb(this.Fb); this.Fb.parentNode.replaceChild(Wb, this.Fb); this.Fb = Wb; } this.Yb(Wb); this.Sb(); return 1; }; mbox.prototype.hide = function () { this.setEventTime('hide.start'); var B = this.showContent(this.getDefaultDiv()); this.setEventTime(B == 1 ? 'hide.end.ok' : 'hide.end.fail'); return B; }; mbox.prototype.finalize = function () { this.setEventTime('finalize.start'); this.cancelTimeout(); if (this.getDefaultDiv() == null) { if (this.mb.force() != null) { this.setMessage('No default content, an empty one has been added'); } else { this.setMessage('Unable to locate mbox'); } } if (!this.activate()) { this.hide(); this.setEventTime('finalize.end.hide'); } this.setEventTime('finalize.end.ok'); }; mbox.prototype.cancelTimeout = function () { if (this.Vb) { clearTimeout(this.Vb); } if (this.Mb != null) { this.Mb.cancel(); } }; mbox.prototype.getDiv = function () { return this.Fb; }; mbox.prototype.getDefaultDiv = function () { if (this.Tb == null) { this.Tb = this.mb.locate(); } return this.Tb; }; mbox.prototype.setEventTime = function (Zb) { this.Ob[Zb] = (new Date()).getTime(); }; mbox.prototype.getEventTimes = function () { return this.Ob; }; mbox.prototype.getImportName = function () { return this.nb; }; mbox.prototype.getURL = function () { return this.w.buildUrl(); }; mbox.prototype.getUrlBuilder = function () { return this.w; }; mbox.prototype._b = function (Fb) { return Fb.style.display != 'none'; }; mbox.prototype.Yb = function (Fb) { this.ac(Fb, true); }; mbox.prototype.Xb = function (Fb) { this.ac(Fb, false); }; mbox.prototype.ac = function (Fb, bc) { Fb.style.visibility = bc ? "visible" : "hidden"; Fb.style.display = bc ? "block" : "none"; }; mboxOfferContent = function () { this.Sb = function () { }; }; mboxOfferContent.prototype.show = function (Y) { var B = Y.showContent(document.getElementById(Y.getImportName())); if (B == 1) { this.Sb(); } return B; }; mboxOfferContent.prototype.setOnLoad = function (Sb) { this.Sb = Sb; }; mboxOfferAjax = function (Wb) { this.Wb = Wb; this.Sb = function () { }; }; mboxOfferAjax.prototype.setOnLoad = function (Sb) { this.Sb = Sb; }; mboxOfferAjax.prototype.show = function (Y) { var cc = document.createElement('div'); cc.id = Y.getImportName(); cc.innerHTML = this.Wb; var B = Y.showContent(cc); if (B == 1) { this.Sb(); } return B; }; mboxOfferDefault = function () { this.Sb = function () { }; }; mboxOfferDefault.prototype.setOnLoad = function (Sb) { this.Sb = Sb; }; mboxOfferDefault.prototype.show = function (Y) { var B = Y.hide(); if (B == 1) { this.Sb(); } return B; }; mboxCookieManager = function mboxCookieManager(g, dc) { this.g = g; this.dc = dc == '' || dc.indexOf('.') == -1 ? '' : '; domain=' + dc; this.ec = new mboxMap(); this.loadCookies(); }; mboxCookieManager.prototype.isEnabled = function () { this.setCookie('check', 'true', 60); this.loadCookies(); return this.getCookie('check') == 'true'; }; mboxCookieManager.prototype.setCookie = function (g, h, bb) { if (typeof g != 'undefined' && typeof h != 'undefined' && typeof bb != 'undefined') { var fc = new Object(); fc.name = g; fc.value = escape(h); fc.expireOn = Math.ceil(bb + new Date().getTime() / 1000); this.ec.put(g, fc); this.saveCookies(); } }; mboxCookieManager.prototype.getCookie = function (g) { var fc = this.ec.get(g); return fc ? unescape(fc.value) : null; }; mboxCookieManager.prototype.deleteCookie = function (g) { this.ec.remove(g); this.saveCookies(); }; mboxCookieManager.prototype.getCookieNames = function (gc) { var hc = new Array(); this.ec.each(function (g, fc) { if (g.indexOf(gc) == 0) { hc[hc.length] = g; } }); return hc; }; mboxCookieManager.prototype.saveCookies = function () { var ic = new Array(); var jc = 0; this.ec.each(function (g, fc) { ic[ic.length] = g + '#' + fc.value + '#' + fc.expireOn; if (jc < fc.expireOn) { jc = fc.expireOn; } }); var kc = new Date(jc * 1000); document.cookie = this.g + '=' + ic.join('|') + '; expires=' + kc.toGMTString() + '; path=/' + this.dc; }; mboxCookieManager.prototype.loadCookies = function () { this.ec = new mboxMap(); var lc = document.cookie.indexOf(this.g + '='); if (lc != -1) { var mc = document.cookie.indexOf(';', lc); if (mc == -1) { mc = document.cookie.indexOf(',', lc); if (mc == -1) { mc = document.cookie.length; } } var nc = document.cookie.substring(lc + this.g.length + 1, mc).split('|'); var oc = Math.ceil(new Date().getTime() / 1000); for (var j = 0; j < nc.length; j++) { var fc = nc[j].split('#'); if (oc <= fc[2]) { var pc = new Object(); pc.name = fc[0]; pc.value = fc[1]; pc.expireOn = fc[2]; this.ec.put(pc.name, pc); } } } }; mboxSession = function (qc, rc, Ab, sc, J) { this.rc = rc; this.Ab = Ab; this.sc = sc; this.J = J; this.tc = false; this.Ib = typeof mboxForceSessionId != 'undefined' ? mboxForceSessionId : mboxGetPageParameter(this.rc); if (this.Ib == null || this.Ib.length == 0) { this.Ib = J.getCookie(Ab); if (this.Ib == null || this.Ib.length == 0) { this.Ib = qc; this.tc = true; } } J.setCookie(Ab, this.Ib, sc); }; mboxSession.prototype.getId = function () { return this.Ib; }; mboxSession.prototype.forceId = function (uc) { this.Ib = uc; this.J.setCookie(this.Ab, this.Ib, this.sc); }; mboxPC = function (Ab, sc, J) { this.Ab = Ab; this.sc = sc; this.J = J; this.Ib = typeof mboxForcePCId != 'undefined' ? mboxForcePCId : J.getCookie(Ab); if (this.Ib != null) { J.setCookie(Ab, this.Ib, sc); } }; mboxPC.prototype.getId = function () { return this.Ib; }; mboxPC.prototype.forceId = function (uc) { if (this.Ib != uc) { this.Ib = uc; this.J.setCookie(this.Ab, this.Ib, this.sc); return true; } return false; }; mboxGetPageParameter = function (g) { var B = null; var vc = new RegExp(g + "=([^\&]*)"); var wc = vc.exec(document.location); if (wc != null && wc.length >= 2) { B = wc[1]; } return B; }; mboxSetCookie = function (g, h, bb) { return mboxFactoryDefault.getCookieManager().setCookie(g, h, bb); }; mboxGetCookie = function (g) { return mboxFactoryDefault.getCookieManager().getCookie(g); }; mboxCookiePageDomain = function () { var dc = (/([^:]*)(:[0-9]{0,5})?/).exec(document.location.host)[1]; var xc = /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/; if (!xc.exec(dc)) { var yc = (/([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/).exec(dc); if (yc) { dc = yc[0]; } } return dc ? dc : ""; }; mboxShiftArray = function (zc) { var B = new Array(); for (var j = 1; j < zc.length; j++) { B[B.length] = zc[j]; } return B; }; mboxGenerateId = function () { return (new Date()).getTime() + "-" + Math.floor(Math.random() * 999999); }; mboxScreenHeight = function () { return screen.height; }; mboxScreenWidth = function () { return screen.width; }; mboxBrowserWidth = function () { return (window.innerWidth) ? window.innerWidth : document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth; }; mboxBrowserHeight = function () { return (window.innerHeight) ? window.innerHeight : document.documentElement ? document.documentElement.clientHeight : document.body.clientHeight; }; mboxBrowserTimeOffset = function () { return -new Date().getTimezoneOffset(); }; mboxScreenColorDepth = function () { return screen.pixelDepth; }; if (typeof mboxVersion == 'undefined') { var mboxVersion = 40; var mboxFactories = new mboxMap(); var mboxFactoryDefault = new mboxFactory('laredoute.tt.omtrdc.net', 'laredoute', 'default'); }; if (mboxGetPageParameter("mboxDebug") != null || mboxFactoryDefault.getCookieManager().getCookie("debug") != null) { setTimeout(function () { if (typeof mboxDebugLoaded == 'undefined') { alert('Could not load the remote debug.\nPlease check your connection' + ' to Test&amp;Target servers'); } }, 60 * 60); document.write('<' + 'scr' + 'ipt language="Javascript1.2" src=' + '"http://admin16.testandtarget.omniture.com/admin/mbox/mbox_debug.jsp?mboxServerHost=laredoute.tt.omtrdc.net' + '&clientCode=laredoute"><' + '\/scr' + 'ipt>'); }; mboxScPluginFetcher = function (b, Ac) { this.b = b; this.Ac = Ac; }; mboxScPluginFetcher.prototype.Bc = function (w) { w.setBasePath('/m2/' + this.b + '/sc/standard'); this.Cc(w); var e = w.buildUrl(); e += '&scPluginVersion=1'; return e; }; mboxScPluginFetcher.prototype.Cc = function (w) { var Dc = ["dynamicVariablePrefix", "visitorID", "vmk", "ppu", "charSet", "visitorNamespace", "cookieDomainPeriods", "cookieLifetime", "pageName", "currencyCode", "variableProvider", "channel", "server", "pageType", "transactionID", "purchaseID", "campaign", "state", "zip", "events", "products", "linkName", "linkType", "resolution", "colorDepth", "javascriptVersion", "javaEnabled", "cookiesEnabled", "browserWidth", "browserHeight", "connectionType", "homepage", "pe", "pev1", "pev2", "pev3", "visitorSampling", "visitorSamplingGroup", "dynamicAccountSelection", "dynamicAccountList", "dynamicAccountMatch", "trackDownloadLinks", "trackExternalLinks", "trackInlineStats", "linkLeaveQueryString", "linkDownloadFileTypes", "linkExternalFilters", "linkInternalFilters", "linkTrackVars", "linkTrackEvents", "linkNames", "lnk", "eo"]; for (var j = 0; j < Dc.length; j++) { this.Ec(Dc[j], w); } for (var j = 1; j <= 75; j++) { this.Ec('prop' + j, w); this.Ec('eVar' + j, w); this.Ec('hier' + j, w); } }; mboxScPluginFetcher.prototype.Ec = function (g, w) { var h = this.Ac[g]; if (typeof (h) === 'undefined' || h === null || h === '') { return; } w.addParameter(g, h); }; mboxScPluginFetcher.prototype.cancel = function () { }; mboxStandardScPluginFetcher = function (b, Ac) { mboxScPluginFetcher.call(this, b, Ac); }; mboxStandardScPluginFetcher.prototype = new mboxScPluginFetcher; mboxStandardScPluginFetcher.prototype.getType = function () { return 'standard'; }; mboxStandardScPluginFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); var e = this.Bc(w); document.write('<' + 'scr' + 'ipt src="' + e + '" language="JavaScript"><' + '\/scr' + 'ipt>'); }; mboxAjaxScPluginFetcher = function (b, Ac) { mboxScPluginFetcher.call(this, b, Ac); }; mboxAjaxScPluginFetcher.prototype = new mboxScPluginFetcher; mboxAjaxScPluginFetcher.prototype.fetch = function (w) { w.setServerType(this.getType()); var e = this.Bc(w); this.x = document.createElement('script'); this.x.src = e; document.body.appendChild(this.x); }; mboxAjaxScPluginFetcher.prototype.getType = function () { return 'ajax'; }; function mboxLoadSCPlugin(Ac) { if (!Ac) { return null; } Ac.m_tt = function (Ac) { var Fc = Ac.m_i('tt'); Fc.H = true; Fc.b = 'laredoute'; Fc['_t'] = function () { if (!this.isEnabled()) { return; } var Y = this.Hc(); if (Y) { var Ub = mboxFactoryDefault.isDomLoaded() ? new mboxAjaxScPluginFetcher(this.b, this.s) : new mboxStandardScPluginFetcher(this.b, this.s); Y.setFetcher(Ub); Y.load(); } }; Fc.isEnabled = function () { return this.H && mboxFactoryDefault.isEnabled(); }; Fc.Hc = function () { var ab = this.Ic(); var Fb = document.createElement('DIV'); return mboxFactoryDefault.create(ab, new Array(), Fb); }; Fc.Ic = function () { var Jc = this.s.events && this.s.events.indexOf('purchase') != -1; return 'SiteCatalyst: ' + (Jc ? 'purchase' : 'event'); }; }; return Ac.loadModule('tt'); };
var $j = jQuery.noConflict();


//PALIATIF STUDIO
$j.fn.bgiframe = function () { };
function AssignSearchKeyword() { }
//END

var UI = new UserInterface();

$j(document).ready(function () {
    checkForNopeCookie();
    try {
        if (isTouchDevice()) {
            TransformToHTML5InputType();
        }
        //Invalidating basket content when you are coming from https page or outside
        if (document.referrer == '') {
            var basketObj = new RedcatsOT.Basket();
            basketObj.InvalidateBasketContentCache();
        }
    } catch (ex) { }

});

/* =================================================== */
/* STICKY BAR - LAST SEEN PRODUCTS - PREFERED PRODUCTS */
/* =================================================== */

function removeLastSeenProducts() {
    var today = new Date(addMonth(1));
    today.setTime(today.getTime());
    SetCookieOrCachePermanentInfo("PVPR", "", today);
}

function setStickyBarCookie(productId, documentId, additionlvwimage, cookiename, numberofproducts, offerType, customerTarget) {
    if (customerTarget == '4') { return; } //VP Products
    var today = new Date(addMonth(1));
    today.setTime(today.getTime());

    SetCookieOrCachePermanentInfo("removedproduct", "");

    tempstring = GetCookieOrCachePermanentInfo(cookiename);

    var removedproduct = '';

    var index = additionlvwimage.lastIndexOf('/');
    if (index >= 0) additionlvwimage = additionlvwimage.substring(index + 1);
    if (!isNullOrUndefined(tempstring)) {
        if (!(tempstring.indexOf(productId + ":" + documentId) >= 0)
        && !(tempstring.indexOf(productId + ":") >= 0 && documentId.length < 6)) {
            productlist = tempstring.split('#');
            if (productlist.length >= numberofproducts) {
                index = tempstring.lastIndexOf('#');
                removedproduct = tempstring.substring(index + 1)
                tempstring = tempstring.substring(0, index);
            }
            if (tempstring.indexOf(productId + ":" + documentId) < 0) {
                var today = new Date(addMonth(1));
                today.setTime(today.getTime());
                SetCookieOrCachePermanentInfo(cookiename, productId + ":" + documentId + ":" + additionlvwimage + ":" + offerType + ":" + customerTarget + "#" + tempstring, today);
            }
        }
    }
    else {
        var today = new Date(addMonth(1));
        today.setTime(today.getTime());
        SetCookieOrCachePermanentInfo(cookiename, productId + ":" + documentId + ":" + additionlvwimage + ":" + offerType + ":" + customerTarget, today);
    }
    if (($j('.product_detail_page').length > 0 || $j('.mpdp_content').length > 0 || $j('.miniPdpBox').length > 0)) {
        if (removedproduct.length > 0) {
            SetCookieOrCachePermanentInfo("removedproduct", removedproduct);
        }
    }
}

isNullOrUndefined = function (elem) { if (elem == undefined || null == elem) return true; return false; }
var tagCmdJson = null;
if (isNullOrUndefined(RedcatsOT)) {
    var RedcatsOT = {};
}
TrimValue = function (paramValue) {
    if (paramValue)
        return $j.trim(paramValue.replace(/[\s\n\r]+/g, ' '));
};
RedcatsOT.TagCommenderTrackingManager = function () {
    return new function () {

        this.ParseUrl = function (url, paramName) {
            paramName = paramName.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + paramName + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(url);
            if (isNullOrUndefined(results)) return null;
            if (0 == results.length) return null;
            return unescape(results[1]);
        };
        this.SetUserTagCmdVars = function () {
            if (isNullOrUndefined(tagCmdJson)) return;            
            var loginCookie = GetCookie("M.R.LastLogin");

            if (loginCookie != null) {
                var userExpiryDate = GetSubCookieValue('M.R.LastLogin', 'UserExpiryDate');
                userExpiryDate = new Date(userExpiryDate);
                var today = new Date();
                today.setFullYear(today.getFullYear() + 2);
                var t2 = userExpiryDate.getTime();
                var t1 = today.getTime();

                var days = parseInt((t2 - t1) / (24 * 3600 * 1000));

                //var diff = new Date(userExpiryDate - today  );
                //var days = diff / 1000 / 60 / 60 / 24;
                var userId = GetSubCookieValue('M.R.User', 'CustNmbr');
                var pcode = GetSubCookieValue('M.R.User', 'PCode');
                var userInfo = { "UserId": userId, "UserRecency": days, "UserLogged": "true", "PostalCode": pcode };
                tagCmdJson.User = userInfo;
            }
        };
        this.SetCustomerConfirmationTagCmdVars = function () {
            if (isNullOrUndefined(tagCmdJson)) return;
            var loginCookie = GetCookie("M.R.LastLogin");

            if (loginCookie != null) {
                var customerId = GetSubCookieValue('M.R.User', 'CustNmbr');
                var customerEmail = GetSubCookieValue('M.R.LastLogin', 'UserId');
                var customerExisting = "N";
                var customerZanoxTestMode = "1";
                var customerZanoxCID = "NCL";

                var CustomerInfo = { "customerId": customerId, "customerEmail": customerEmail, "customerExisting": customerExisting, "customerZanoxTestMode": customerZanoxTestMode, "customerZanoxCID": customerZanoxCID };

                return CustomerInfo;
            }
        };
        this.SetPLPProducsTagCmdVars = function () {
            if (tagCmdJson == null) return;
            var breadCrumbs = $j('ul.breadcrumbs li');
            var cid = new Array();
            var cname = new Array();
            if (breadCrumbs.length > 0) {
                for (var idx = 1; idx < breadCrumbs.length; idx++) {
                    cname.push(TrimValue($j(breadCrumbs[idx]).find('a').text()));
                    var caturl = $j(breadCrumbs[idx]).find('a').attr('href');

                    if (idx != 1)
                        cid.push(this.ParseUrl(caturl, 'categoryid'));
                    else
                        cid.push('');
                }
            }
            var prd = $j('.gondola-price');
            var prdCnt = 0;
            var lstPrds = new Array();
            if (prd.length != 0) { lstPrds.push(this.PopulateProductInfo(prd, cid, cname)); prdCnt = 1; }
            var prds = $j('.product');
            for (var idx = 0; idx < prds.length; idx++) {
                if (prdCnt > 4) break;
                prd = prds[idx];
                lstPrds.push(this.PopulateProductInfo(prd, cid, cname));
                prdCnt++;
            }
            //tagCmdJson.ListProducts = new arr();
            tagCmdJson.ListProducts = lstPrds;

        };
        this.PopulateProductInfo = function (prd, cid, cname) {
            var id = TrimValue($j(prd).find('.productId').text());
            var name = TrimValue($j(prd).find('.product-info .product-detail  .header a').text());
            var unitprice = TrimValue($j(prd).find('.product-info .information  .price').text());
            var discount = TrimValue($j(prd).find('.product-info   .information  .reduc').text());
            var brand = TrimValue($j(prd).find('.product-info .product-detail  .brand a').text());
            var pdpurl = TrimValue($j(prd).find('.block-visu a').attr('href'));
            var imgurl = TrimValue($j(prd).find('.block-visu img.thumb').attr('src'));
            var rating = TrimValue($j(prd).find('.product-info').attr('ratingcount'));
            var stock = 'Y';
            var productInfo = { "Id": id, "Name": name, "UnitPriceATI": unitprice, "DiscountATI": discount, "UnitPriceTF": "", "DiscountTF": "",
                "Trademark": brand, "PageUrl": pdpurl,
                "PictureUrl": imgurl, "BreadCrumbID": cid, "BreadCrumbLabel": cname, "Rating": rating, "InStock": "Y"
            };
            return productInfo;
        };
        this.SetTreeStructureTagCmdVars = function () {
            if (tagCmdJson == null) return;
            var clvl1 = (s.prop6 == null) ? '' : s.prop6;
            var clvl2 = (s.prop7 == null) ? "" : s.prop7;
            var clvl3 = (s.prop8 == null) ? "" : s.prop8;
            var pname = (s.pagename == null) ? "" : s.pagename;
            var perr = (s.prop49 == null) ? "" : s.prop49;
            tagCmdJson.Lineage = { "CategoryLevel1": clvl1, "CategoryLevel2": clvl2, "CategoryLevel3": clvl3,
                "PageName": pname, "PageError": perr
            };
        };
        this.SetTagCommanderVarsForPLP = function () {
            this.SetPLPProducsTagCmdVars();
        };

        this.SetSearchProducsTagCmdVars = function () {
            if (isNullOrUndefined(tagCmdJson)) return;
            var searchKeyword = ParseQueryStringValue('Keyword');
            var searchFilter = '';
            var ProductCount = ParseQueryStringValue('ros');
            var pageNumber = ParseQueryStringValue('pageno');

            tagCmdJson.Search = { "Keyword": searchKeyword, "PageNumber": pageNumber, "ResultNumber": ProductCount, "Filters": searchFilter };

            this.SetPLPProducsTagCmdVars();
        };

        this.SetPDPProducsTagCmdVars = function () {
            if (isNullOrUndefined(tagCmdJson)) return;
            var prd = JSON_ProductDetail;
            var pagetype = 'product_page';
            if (prd != null && prd.Products != null && prd.Products.length > 0) {
                var id = prd.Products[0].Id;
                var name = prd.Products[0].DN;
                if (prd.Products[0].Prcs != null) {
                    var unitprice = prd.Products[0].Prcs.AltLiPrMx;
                    var discount = prd.Products[0].Prcs.DiMx;
                    var unitpriceTF = prd.Products[0].Prcs.AltLiPrMi;
                    var discountTF = prd.Products[0].Prcs.DiMi;
                    if (prd.Products[0].Prcs.AltLiPrMi > 0)
                        isbundle = 'Y';
                    else
                        isbundle = 'N';
                }
                var currency = '';
                var brand = '';
                if (prd.Products[0].Br != null)
                    brand = prd.Products[0].Br.DN;
                var pdpurl = window.location.href;
                var imgurl = '';
                if (prd.Products[0].Vrnts != null && prd.Products[0].Vrnts.length > 0) {
                    for (var i = 0; i < prd.Products[0].Vrnts[0].Imgs.length; i++) {
                        if (prd.Products[0].Vrnts[0].Imgs[i].Id == "bigPict") {
                            if (!JSONisNullOrUndefinedOrEmpty(prd.Products[0].Vrnts[0].Imgs[i].URL)) {
                                imgurl = prd.Products[0].Vrnts[0].Imgs[i].URL;
                                break;
                            }
                        }
                    }
                }
                var isbundle = '';

                var breadcrumbid = new Array();
                var breadcrumblabel = new Array();
                for (var idx = 0; idx < prd.Products[0].AscCats.length; idx++) {
                    breadcrumbid.push(prd.Products[0].AscCats[idx].Id);
                    breadcrumblabel.push(prd.Products[0].AscCats[idx].DN)
                }
                var rating = $j('.product_infos h1:first').attr('RatingCount');
                var stock = '';
                if (prd.Products[0].PrFAv) {
                    stock = 'Y';
                }
                else {
                    stock = 'N';
                }
            }
            tagCmdJson.Product = { "PageType": pagetype, "Id": id, "Name": name, "UnitPriceATI": unitprice, "DiscountATI": discount,
                "UnitPriceTF": unitpriceTF, "DiscountTF": discountTF,
                "Currency": currency, "Trademark": brand, "PageUrl": pdpurl, "PictureUrl": imgurl, "IsBundle": isbundle,
                "BreadCrumbID": breadcrumbid, "BreadCrumbLabel": breadcrumblabel, "Rating": rating, "InStock": stock
            };
        };
        this.SetMiniPDPProducsTagCmdVars = function () {
            if (isNullOrUndefined(tagCmdJson)) return;           
            var prd = prodJson;
            var pagetype = 'popin';
            if (prd != null && prd.Products != null && prd.Products.length > 0) {
                var id = prd.Products[0].Id;
                var name = prd.Products[0].DN;
                if (prd.Products[0].Prcs != null) {
                    var unitprice = prd.Products[0].Prcs.AltLiPrMx;
                    var discount = prd.Products[0].Prcs.DiMx;
                    var unitpriceTF = prd.Products[0].Prcs.AltLiPrMi;
                    var discountTF = prd.Products[0].Prcs.DiMi;
                    if (prd.Products[0].Prcs.LiPrMi != prd.Products[0].Prcs.UnPrMi)
                        isbundle = 'Y';
                    else
                        isbundle = 'N';
                }
                var currency = '';
                var brand = '';
                if (prd.Products[0].Br != null)
                    brand = prd.Products[0].Br.DN;
                var pdpurl = window.location.href;
                var imgurl = '';
                if (prd.Products[0].Vrnts != null && prd.Products[0].Vrnts.length > 0) {
                    for (var i = 0; i < prd.Products[0].Vrnts[0].Imgs.length; i++) {
                        if (prd.Products[0].Vrnts[0].Imgs[i].Id == "bigPict") {
                            if (!JSONisNullOrUndefinedOrEmpty(prd.Products[0].Vrnts[0].Imgs[i].URL)) {
                                imgurl = prd.Products[0].Vrnts[0].Imgs[i].URL;
                                break;
                            }
                        }
                    }
                }

                var breadcrumbid = new Array();
                var breadcrumblabel = new Array();
                for (var idx = 0; idx < prd.Products[0].AscCats.length; idx++) {
                    breadcrumbid.push(prd.Products[0].AscCats[idx].Id);
                    breadcrumblabel.push(prd.Products[0].AscCats[idx].DN)
                }
                var rating = '';
                var stock = '';
                if (prd.Products[0].PrFAv) {
                    stock = 'Y';
                }
                else {
                    stock = 'N';
                }
            }
            tagCmdJson.Product = { "PageType": pagetype, "Id": id, "Name": name, "UnitPriceATI": unitprice, "DiscountATI": discount,
                "UnitPriceTF": unitpriceTF, "DiscountTF": discountTF,
                "Currency": currency, "Trademark": brand, "PageUrl": pdpurl, "PictureUrl": imgurl, "IsBundle": isbundle,
                "BreadCrumbID": breadcrumbid, "BreadCrumbLabel": breadcrumblabel, "Rating": "", "InStock": stock
            };
        };
        this.ATBLayerVars = function (FRProductList) {
            var productID = (FRProductList != null) ? FRProductList[0].ProductId : '';
            var name = (FRProductList != null) ? FRProductList[0].Title : '';
            var price = (FRProductList != null) ? FRProductList[0].UnitPrice : '';

            var ATBproductInfo = { "id": productID, "name": name, "price": price };

            return ATBproductInfo;
        };
        function ParseQueryStringValue(key) {
            qsFull = decodeURIComponent(window.location.href);
            qsKeyValueArr = qsFull.split('&');

            for (i = 0; i < qsKeyValueArr.length; i++) {
                currentKey = qsKeyValueArr[i].split('=');
                if (currentKey[0] == key) {
                    return currentKey[1];
                }

            }
        };
        this.LoadTagCmdScript = function (src) {

            var tagCmdScrpt = document.createElement('script');
            done = false;
            tagCmdScrpt.src = src;
            tagCmdScrpt.type = 'text/javascript';
            tagCmdScrpt.charset = 'utf-8';
            (document.getElementsByTagName('body')[0] || document.getElementsByTagName('script')[0].parentNode).insertBefore(tagCmdScrpt, null);
        };

    }
};

$j(document).ready(function () {
    if (tagCmdJson == null) return;
    var tmanager = null;
    tmanager = new RedcatsOT.TagCommenderTrackingManager();
    tmanager.SetUserTagCmdVars();
    tmanager.SetTreeStructureTagCmdVars();
    if (window.location.href.search(/searchresult/i) > 0) {
        tmanager.SetSearchProducsTagCmdVars();
    }
    if (window.location.href.search(/achat-/i) > 0) {
        tmanager.SetTagCommanderVarsForPLP();
    }

});
