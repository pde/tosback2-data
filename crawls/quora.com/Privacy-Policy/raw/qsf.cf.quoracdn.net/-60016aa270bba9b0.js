/*
Name: main.js
Url: http://qsf.cf.quoracdn.net/-60016aa270bba9b0.js
Generated: 1336599210399305
Files: ['/json2.js', '/assert.js', '/jquery.js', '/jquery.securepost.js', '/jquery.cookie.js', '/lang/fun.js', '/Class.js', '/webnode2.js', '/jquery.dialog.js', '/jquery.tooltip.js', '/jquery.menu.js', '/jquery.topic.js', '/jquery.viewport.js', '/jquery.ui-1.8.17.js', '/jquery.ajax.js', '/effects.core.js', '/effects.shake.js', '/effects.highlight.js', '/atexit.js', '/w2.livenode.js', '/jquery.webnode2.js', '/prefetch.js', '/w2.rpc.js', '/jquery.quora.js', '/w2.dialog.js', '/w2.inputvalidate.js', '/w2.inspector.js', '/w2.interaction.js', '/tchannel_up.js', '/frame_busting.js', '/cookies.js', '/mixpanel.js', '/w2.quora.js', '/toggle.js', '/facebook.js', '/swfobject.js', '/login.js', '/Quora.js', '/twitter.js', '/dialog.js', '/qed/rules.js', '/qed/sanitize.js', '/qed/npd.js', '/qed/util.js', '/qed/unload.js', '/qed/modifiers.js', '/qed/trie.js', '/qed/snippets.js', '/qed/handlers.js', '/qed/nodestate.js', '/qed/selection.js', '/qed/snapshot.js', '/qed/history.js', '/qed/edit.js', '/linkify.js', '/find.js', '/qtexteditor.js', '/simscroll.js', '/html.js', '/typeahead.js', '/mobile.js', '/flash.js', '/presence.js', '/signup.js', '/main.js']

*/
function now(){return new Date}function containsNonLatinCodepoints(a){return/[^\x00-\xFF]/.test(a)}this.JSON||(this.JSON={}),function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i==="object"&&typeof i.toJSON==="function"&&(i=i.toJSON(a)),typeof rep==="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g;return e}if(rep&&typeof rep==="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d==="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}typeof Date.prototype.toJSON!=="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\x00\xAD\u0600-\u0604\u070F\u17B4\u17B5\u200C-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\uFFF0-\uFFFF]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\xAD\u0600-\u0604\u070F\u17B4\u17B5\u200C-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\uFFF0-\uFFFF]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!=="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c==="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c==="string"&&(indent=c);rep=b;if(b&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw new Error("JSON.stringify");return str("",{"":a})}),typeof JSON.parse!=="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e==="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}(),require.install("json2",function(){}),require.install("assert",function(require,a,b){function i(b){return function(c,g,h){(b.call(a,c,g)?d:e)(new f({message:h,actual:c,expected:g}))}}function h(a,b){if(a===b)return!0;if(a instanceof Date)return b instanceof Date&&+a===+b;if(typeof a!="object"||typeof b!="object")return a==b;if(a.prototype!==b.prototype)return!1;var c,d={};for(c in a)d[c]=!0;for(c in b)d[c]=!0;if(a instanceof Array)for(var e=Math.max(a.length,b.length)-1;e>=0;--e){if(e in d)break;d[e]=!0}for(c in d)if(c in a!=c in b||g.call(a,c)!=g.call(b,c)||!h(a[c],b[c]))return!1;return!0}function f(a){this.message=a.message||this.message,this.actual=a.actual,this.expected=a.expected}function e(a){!c.debug}function d(){}var c=require("settings");f.prototype=new Error("assertion failure"),f.prototype.toString=function(){return this.message+(": got "+this.actual+", expected "+this.expected)};var g={}.hasOwnProperty;a.AssertionError=f,a.equal=i(function(a,b){return a==b}),a.notEqual=i(function(a,b){return a!=b}),a.deepEqual=i(function(a,b){return h(a,b)}),a.notDeepEqual=i(function(a,b){return!h(a,b)}),a.strictEqual=i(function(a,b){return a===b}),a.notStrictEqual=i(function(a,b){return a!==b}),a.throws_error=i(function(a,b){try{a();return!1}catch(c){return!b||c instanceof b}}),a.ok=window.assert=function(b,c){a.equal(!!b,!0,c)},a.notOk=function(b,c){a.equal(!!b,!1,c)},a.todo=function(b,c){b&&a.equal(!!b,!1,c)},a.greaterThan=i(function(a,b){return a>b}),a.lessThan=i(function(a,b){return a<b}),a.matches=i(function(a,b){return b instanceof RegExp&&b.test(a)})}),function(a,b){function cA(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cx(a){if(!cm[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cn||(cn=c.createElement("iframe"),cn.frameBorder=cn.width=cn.height=0),b.appendChild(cn);if(!co||!cn.createElement)co=(cn.contentWindow||cn.contentDocument).document,co.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),co.close();d=co.createElement(a),co.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cn)}cm[a]=e}return cm[a]}function cw(a,b){var c={};f.each(cs.concat.apply([],cs.slice(0,b)),function(){c[this]=a});return c}function cv(){ct=b}function cu(){setTimeout(cv,0);return ct=f.now()}function cl(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ck(){try{return new a.XMLHttpRequest}catch(b){}}function ce(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h==="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cd(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function cc(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bG.test(a)?d(a,e):cc(a+"["+(typeof e==="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b==="object")for(var e in b)cc(a+"["+e+"]",b[e],c,d);else d(a,b)}function cb(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function ca(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bV,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l==="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=ca(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=ca(a,c,d,e,"*",g));return l}function b_(a){return function(b,c){typeof b!=="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bR),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bE(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bz:bA;if(d>0){c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0});return d+"px"}d=bB(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)});return d+"px"}function br(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bi,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bq(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bp(a):b!=="script"&&typeof a.getElementsByTagName!=="undefined"&&f.grep(a.getElementsByTagName("input"),bp)}function bp(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bo(a){return typeof a.getElementsByTagName!=="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!=="undefined"?a.querySelectorAll("*"):[]}function bn(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bm(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bl(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function X(a){var b=Y.split(" "),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function W(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b==="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(R.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function V(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function N(){return!0}function M(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d==="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(K,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+"").toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a==="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),B.add(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i==="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!=="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;B.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!B){B=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",C,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",C),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&K()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a==="object"&&"setInterval"in a},isNumeric:function(a){return a!=null&&m.test(a)&&!isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a){}return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!=="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,"ms-").replace(w,y)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?"":H.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(I)return I.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length==="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j==="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c==="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c==="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function b(b,c){c&&c instanceof e&&!(c instanceof a)&&(c=a(c));return e.fn.init.call(this,b,c,d)},a.fn.init.prototype=a.fn;var d=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener("DOMContentLoaded",C,!1),e.ready()}:c.attachEvent&&(C=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",C),e.ready())}),typeof define==="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return e});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments)},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=new Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,unknownElems:!!a.getElementsByTagName("nav").length,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",enctype:!!c.createElement("form").enctype,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.lastChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},m&&f.extend(p,{position:"absolute",left:"-999px",top:"-999px"});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]==="function"),k[t+"Bubbles"]=u;f(function(){var a,b,d,e,g,h,i=1,j="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",n="style='"+j+"border:5px solid #000;padding:0;'",p="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";m=c.getElementsByTagName("body")[0];!m||(a=c.createElement("div"),a.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+i+"px",m.insertBefore(a,m.firstChild),o=c.createElement("div"),o.style.cssText=j+l,o.innerHTML=p,a.appendChild(o),b=o.firstChild,d=b.firstChild,g=b.nextSibling.firstChild.firstChild,h={doesNotAddBorder:d.offsetTop!==5,doesAddBorderForTableAndCells:g.offsetTop===5},d.style.position="fixed",d.style.top="20px",h.fixedPosition=d.offsetTop===20||d.offsetTop===15,d.style.position=d.style.top="",b.style.overflow="hidden",b.style.position="relative",h.subtractsBorderForOverflowNotVisible=d.offsetTop===-5,h.doesNotIncludeMarginInBodyOffset=m.offsetTop!==i,m.removeChild(a),o=a=null,f.extend(k,h))}),o.innerHTML="",n.removeChild(o),o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c==="string",l=a.nodeType,m=l?f.cache:a,n=l?a[f.expando]:a[f.expando]&&f.expando,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[f.expando]=n=++f.uuid:n=f.expando),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c==="object"||typeof c==="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[f.expando]:f.expando;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)?b=b:b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" "));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a==="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a==="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!=="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!=="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a==="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~ g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a==="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];if(!arguments.length){if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d==="string"?d.replace(q,""):d==null?"":d}return b}e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h==="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!a||j===3||j===8||j===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if(!("getAttribute"in a))return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g},removeAttr:function(a,b){var c,d,e,g,h=0;if(a.nodeType===1){d=(b||"").split(p),g=d.length;for(;h<g;h++)e=d[h].toLowerCase(),c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1)}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return b;h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!=="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/\.(.*)$/,A=/^(?:textarea|input|select)$/i,B=/\./g,C=/ /g,D=/[^\w\s.|`]/g,E=/^([^\.]*)?(?:\.(.+))?$/,F=/\bhover(\.\S+)?/,G=/^key/,H=/^(?:mouse|contextmenu)|click/,I=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,J=function(a){var b=I.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},K=function(a,b){return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||a.id===b[2])&&(!b[3]||b[3].test(a.className))},L=function(a){return f.event.special.hover?a:a.replace(F,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!=="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=L(c).split(" ");for(k=0;k<c.length;k++){l=E.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,namespace:n.join(".")},p),g&&(o.quick=J(g),!o.quick&&f.expr.match.POS.test(g)&&(o.isPositional=!0)),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d){var e=f.hasData(a)&&f._data(a),g,h,i,j,k,l,m,n,o,p,q;if(!!e&&!!(m=e.events)){b=L(b||"").split(" ");for(g=0;g<b.length;g++){h=E.exec(b[g])||[],i=h[1],j=h[2];if(!i){j=j?"."+j:"";for(l in m)f.event.remove(a,l+j,c,d);return}n=f.event.special[i]||{},i=(d?n.delegateType:n.bindType)||i,p=m[i]||[],k=p.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(c||j||d||n.remove)for(l=0;l<p.length;l++){q=p[l];if(!c||c.guid===q.guid)if(!j||j.test(q.namespace))if(!d||d===q.selector||d==="**"&&q.selector)p.splice(l--,1),q.selector&&p.delegateCount--,n.remove&&n.remove.call(a,q)}else p.length=0;p.length===0&&k!==p.length&&((!n.teardown||n.teardown.call(a,j)===!1)&&f.removeEvent(a,i,e.handle),delete m[i])}f.isEmptyObject(m)&&(o=e.handle,o&&(o.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c==="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"",(g||!e)&&c.preventDefault();if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,n=null;for(m=e.parentNode;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length;l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d);if(c.isPropagationStopped())break}c.type=h,c.isDefaultPrevented()||(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=(f.event.special[c.type]||{}).handle,j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click"))for(m=c.target;m!=this;m=m.parentNode||this){o={},q=[];for(k=0;k<e;k++)r=d[k],s=r.selector,t=o[s],r.isPositional?t=(t||(o[s]=f(s))).index(m)>=0:t===b&&(t=o[s]=r.quick?K(m,r.quick):f(m).is(s)),t&&q.push(r);q.length&&j.push({elem:m,matches:q})}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){p=j[k],c.currentTarget=p.elem;for(l=0;l<p.matches.length&&!c.isImmediatePropagationStopped();l++){r=p.matches[l];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=(i||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},focus:{delegateType:"focusin",noBubble:!0},blur:{delegateType:"focusout",noBubble:!0},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?N:M):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=N;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=N;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=N,this.stopPropagation()},isDefaultPrevented:M,isPropagationStopped:M,isImmediatePropagationStopped:M},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]=f.event.special[b]={delegateType:b,bindType:b,handle:function(a){var b=this,c=a.relatedTarget,d=a.handleObj,e=d.selector,g,h;if(!c||d.origType===a.type||c!==b&&!f.contains(b,c))g=a.type,a.type=d.origType,h=d.handler.apply(this,arguments),a.type=g;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(A.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;A.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return A.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a==="object"){typeof c!=="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c==="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=M;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a==="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c==="function")d=c,c=b;d===!1&&(d=M);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),G.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),H.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!=="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!=="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!=="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw"Syntax error, unrecognized expression: "+a};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1){if(typeof a.textContent==="string")return a.textContent;if(typeof a.innerText==="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\xC0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\xC0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\xC0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\xC0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\xC0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\xC0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\xC0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b==="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b==="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b==="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b==="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length==="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!=="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var O=/Until$/,P=/^(?:parents|prevUntil|prevAll)/,Q=/,/,R=/^.[^:#\[\.,]*$/,S=Array.prototype.slice,T=f.expr.match.POS,U={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!=="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(W(this,a,!1),"not",a)},filter:function(a){return this.pushStack(W(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a==="string"?T.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=T.test(a)||typeof a!=="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a==="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a==="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(V(c[0])||V(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=S.call(arguments);O.test(a)||(d=c),d&&typeof d==="string"&&(e=f.filter(d,e)),e=this.length>1&&!U[a]?f.unique(e):e,(this.length>1||Q.test(d))&&P.test(a)&&(e=e.reverse());return this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var Y="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",Z=/ jQuery\d+="(?:\d+|null)"/g,$=/^\s+/,_=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ba=/<([\w:]+)/,bb=/<tbody/i,bc=/<|&#?\w+;/,bd=/<(?:script|style)/i,be=/<(?:script|object|embed|option|style)/i,bf=new RegExp("<(?:"+Y.replace(" ","|")+")","i"),bg=/checked\s*(?:[^=]|=\s*.checked.)/i,bh=/\/(java|ecma)script/i,bi=/^\s*<!(?:\[CDATA\[|\-\-)/,bj={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bk=X(c);bj.optgroup=bj.option,bj.tbody=bj.tfoot=bj.colgroup=bj.caption=bj.thead,bj.th=bj.td,f.support.htmlSerialize||(bj._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!=="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Z,""):null;if(typeof a==="string"&&!bd.test(a)&&(f.support.leadingWhitespace||!$.test(a))&&!bj[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(_,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!=="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j==="string"&&bg.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bl(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,br)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j==="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!be.test(j)&&(f.support.checkClone||!bg.test(j))&&!f.support.unknownElems&&bf.test(j)&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bn(a,d),e=bo(a),g=bo(d);for(h=0;e[h];++h)g[h]&&bn(e[h],g[h])}if(b){bm(a,d);if(c){e=bo(a),g=bo(d);for(h=0;e[h];++h)bm(e[h],g[h])}}e=g=null;return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement==="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k==="number"&&(k+="");if(!k)continue;if(typeof k==="string")if(!bc.test(k))k=b.createTextNode(k);else{k=k.replace(_,"<$1></$2>");var l=(ba.exec(k)||["",""])[1].toLowerCase(),m=bj[l]||bj._default,n=m[0],o=b.createElement("div");b===c?bk.appendChild(o):X(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=bb.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&$.test(k)&&o.insertBefore(b.createTextNode($.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)==="number")for(i=0;i<r;i++)bq(k[i]);else bq(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bh.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bs=/alpha\([^)]*\)/i,bt=/opacity=([^)]*)/,bu=/([A-Z]|^ms)/g,bv=/^-?\d+(?:px)?$/i,bw=/^-?\d/,bx=/^([\-+])=([\-+.\de]+)/,by={position:"absolute",visibility:"hidden",display:"block"},bz=["Left","Right"],bA=["Top","Bottom"],bB,bC,bD;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bB(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bx.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bB)return bB(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bE(a,b,d);f.swap(a,by,function(){e=bE(a,b,d)});return e}},set:function(a,b){if(!bv.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bt.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bs,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bs.test(g)?g.replace(bs,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bB(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bC=function(a,c){var d,e,g;c=c.replace(bu,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bD=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bv.test(f)&&bw.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bB=bC||bD,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bF=/%20/g,bG=/\[\]$/,bH=/\r?\n/g,bI=/#.*$/,bJ=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bK=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bL=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bM=/^(?:GET|HEAD)$/,bN=/^\/\//,bO=/\?/,bP=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bQ=/^(?:select|textarea)/i,bR=/\s+/,bS=/([?&])_=[^&]*/,bT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bU=f.fn.load,bV={},bW={},bX,bY,bZ=["*/"]+["*"];try{bX=e.href}catch(b$){bX=c.createElement("a"),bX.href="",bX=bX.href}bY=bT.exec(bX.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!=="string"&&bU)return bU.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c==="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bP,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bQ.test(this.nodeName)||bK.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bH,"\r\n")}}):{name:b.name,value:c.replace(bH,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?cb(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),cb(a,b);return a},ajaxSettings:{url:bX,isLocal:bL.test(bY[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bZ},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:b_(bV),ajaxTransport:b_(bW),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cd(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=ce(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a==="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bJ.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bI,"").replace(bN,bY[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bR),d.crossDomain==null&&(r=bT.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bY[1]&&r[2]==bY[2]&&(r[3]||(r[1]==="http:"?80:443))==(bY[3]||(bY[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!=="string"&&(d.data=f.param(d.data,d.traditional)),ca(bV,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bM.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bO.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bS,"$1_="+x);d.url=y+(y===d.url?(bO.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bZ+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=ca(bW,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){s<2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)cc(g,a[g],c,e);return d.join("&").replace(bF,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cf=f.now(),cg=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cf++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data==="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cg.test(b.url)||e&&cg.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cg,l),b.url===j&&(e&&(k=k.replace(cg,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ch=a.ActiveXObject?function(){for(var a in cj)cj[a](0,1)}:!1,ci=0,cj;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ck()||cl()}:ck,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ch&&delete cj[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++ci,ch&&(cj||(cj={},f(a).unload(ch)),cj[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cm={},cn,co,cp=/^(?:toggle|show|hide)$/,cq=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cr,cs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ct;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cw("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cx(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cw("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a==="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cw("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cx(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cp.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=cq.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!=="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cw("show",1),slideUp:cw("hide",1),slideToggle:cw("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a==="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration==="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=ct||cu(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cr&&(cr=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=ct||cu(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cr),cr=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now))}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cy=/^t(?:able|d|h)$/i,cz=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cA(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cy.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cz.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cz.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cA(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cA(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a==="string"?a:a+"px")}}),a.jQuery=a.$=f}(window),require.install("jquery",function(){}),function(a){var b=require("settings").formkey;a.securepost=function(c,d,e,f){d=d||{};if(!b)throw new Error("No formkey set; can't securepost");d.formkey=b;return a.post(c,d,e,f)},a.secureData=function(d,e,f,g,h){typeof arguments[0]=="object"?(d=arguments[0],e=arguments[1],f=arguments[2],g=arguments[3],h=arguments[4]):(e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3],d=arguments[4]||{});if(!b)throw new Error("No formkey set; can't send data securely");d.type=d.type||"POST",d.dataType=d.dataType||"json",d.url=e;var i=d.secureDataError;d.success=function(a){if(a.___ERROR___){var b=a.___ERROR___[0],d=a.___ERROR___[1],f=new c("Got an error from the URL '"+e+"'",b,d);if(i)return i(b,d,f);throw f}if(g)return g(a)},d.error=h;var j=d.data||f;d.data={formkey:b,data:JSON.stringify(j)};return a.ajax(d)};var c=function(a,b,c){this.message=c+": "+a+" <"+JSON.stringify(b)+">"};c.prototype=new Error,c.prototype.constructor=c,a.secureData.SecureDataError=c}(jQuery),require.install("jquery.securepost",function(){}),jQuery.cookie=function(a,b,c){if(typeof b=="undefined"){var i=null;if(document.cookie&&document.cookie!=""){var j=document.cookie.split(";");for(var k=0;k<j.length;k++){var l=jQuery.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}}return i}c=c||{},b===null&&(b="",c=$.extend({},c),c.expires=-1);var d="";if(c.expires&&(typeof c.expires=="number"||c.expires.toUTCString)){var e;typeof c.expires=="number"?(e=new Date,e.setTime(e.getTime()+c.expires*24*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")},require.install("jquery.cookie",function(){}),require.install("lang/fun",function(require,exports,module){function expect(a,b){function e(){--a||b.apply(this,c)}function d(a,b){typeof a==="number"&&a>=0&&!(a in c)&&(c[a]=b)}var c=[];e.args=function(){var a=this,b=arguments;return function(){d(a.valueOf(),this);for(var c=0,f=b.length;c<f;++c)d(b[c],arguments[c]);e()}};return e}function wrapDumbFunction(f){return function(){switch(arguments.length){case 0:return f();case 1:return f(arguments[0]);case 2:return f(arguments[0],arguments[1]);case 3:return f(arguments[0],arguments[1],arguments[2])}for(var i=0,args=[];i<arguments.length;i++)args.push("arguments["+i+"]");return eval("(f("+args.join(",")+"))")}}exports.bind=function(a,b){var c=Array.prototype.slice,d=c.call(arguments,2),e=d.length>0?function(){return f.apply(a||this,d.concat(c.call(arguments,0)))}:function(){return f.apply(a||this,arguments)},f=b;e.name=b.name,e.toString=function(){return"["+b+" bound with "+a+" and with args "+d+" partially applied]"},typeof b.apply=="undefined"&&(f=wrapDumbFunction(b));return e},exports.expect=expect}),require.install("Class",function(require,a,b){var c=!1,d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,e=require("lang/fun").bind,f={};a.stats=function(){var a=0,b=0,c;for(c in f)++b,f[c]==="used"&&++a;return[a,b]},(a.Class=function(){}).extend=function(a){function j(){var a=Array.prototype.slice;this.fnbind=function(b){return arguments.length<2?e(this,b):e.apply(null,[this].concat(a.call(arguments,0)))},!c&&this.__init__&&(f[g]="used",this.__init__.apply(this,arguments))}var b=this.prototype,g=Math.random().toString(36).slice(2);f[g]="unused",c=!0;var h=new this;c=!1;for(var i in a)h[i]=typeof a[i]=="function"&&typeof b[i]=="function"&&d.test(a[i])?function(a,c){return function(){var d=this._super;this._super=b[a];var e=c.apply(this,arguments);this._super=d;return e}}(i,a[i]):a[i];j.prototype=h,j.constructor=j,j.extend=arguments.callee;return j}}),require.install("webnode2",function(require,exports,module){(function(){function _assertIDs(a,b){if(a.nodeType!=3){a.id&&(a.id in b&&assert(a===b[a.id]),b[a.id]=a);for(var c=a.firstChild;c;c=c.nextSibling)_assertIDs(c,b)}return b}function W2Error(a,b){this.message=this.errorType+": "+a,b&&(this.message+=" <cid="+b+">")}function _cQueryByCID(a,b){var c,d,e,f,g,h,i,j,k,l;if(b==".")return a;c=[],d="",e="first";for(f=0;f<b.length;f++)g=b.charAt(f),g=="."?(c.push([e,d]),d="",e="child"):g==":"?(c.push([e,d]),d="",e="lookup"):g=="<"?(c.push([e,d]),d="",e="parent"):d+=g;c.push([e,d]),h=a;for(f=0;f<c.length;f++){j=c[f],i=j[0],k=j[1];if(i=="first"){if(k){l=W2._children[h];if(!l)return null;h=l[k];if(!h)throw new W2Error("Couldn't find child '"+k+"' in cQuery '"+b+"'",a)}if(!h)throw new W2Error("Started from an invalid node '"+h+"' in cQuery '"+b+"'",a)}else if(i=="child"){l=W2._children[h];if(!l)return null;h=l[k];if(!h)throw new W2Error("Couldn't find child '"+k+"' in cQuery '"+b+"'",a)}else if(i=="lookup"){h=_CIDLookup(h,k);if(!h)throw new W2Error("Lookup failed for '"+k+"' in cQuery '"+b+"'",a)}else{if(i!="parent")throw new W2Error("Bad token in Component query. '"+i+"'",a);h=W2._parents[h];if(!h||h=="*ROOT*")throw new W2Error("No parent found in cQuery '"+b+"'",a)}if(!h)throw new W2Error("Unknown Error in cQuery: '"+b+"'",a)}return h}function _safeGetComponentByCID(a){var b;if(a){b=W2._components[a];return b?b:new VirtualComponent(a)}return null}function _CIDLookup(a,b){var c;if(a&&a!="*ROOT*"){require("assert").ok(W2._knowsAbout[a]),c=W2._knowsAbout[a][b];return typeof c!="undefined"?_cQueryByCID(a,c):_CIDLookup(W2._parents[a],b)}return null}function onVisible(){var a,b,c=[],d,e=require("w2.timing").timing;for(a in W2._onVisibleComponents){b=W2._onVisibleComponents[a];if(b!=W2._components[a])continue;var f=+(new Date);try{b.onVisible()}catch(g){c.push({component:b,exception:g})}e.components&&(e.components[a]||(e.components[a]={}),e.components[a].v=+(new Date)-f)}if(d=c.length){$.serverLog(d+" component(s) threw during onVisible","ERROR",c);throw c}}function onLoad(a,b){var c,d,e=[],f,g=require("w2.timing").timing;for(c=0;c<a.length;c++){d=a[c],onLoadStatus[d.cid]=ONLOAD_BEGUN;var h=+(new Date);if(settings.componentDebug)d.onLoad(b),onLoadStatus[d.cid]=ONLOAD_DONE,flushOnLoadCallbacks(d);else try{d.onLoad(b),onLoadStatus[d.cid]=ONLOAD_DONE,flushOnLoadCallbacks(d)}catch(i){e.push({component:d,exception:i})}g.components&&(g.components[d.cid]||(g.components[d.cid]={}),g.components[d.cid].l=+(new Date)-h)}a.length>0&&jQuery.isFunction(window._w2replay)&&window._w2replay(function(a,b){var c=!0;for(var d,e=a;e;e=e.parentNode)if(d=cidFromMyId(e.id))break;d&&(onLoadStatus[d]===ONLOAD_DONE?jQuery(a).trigger(b):c=!1);return c});if(f=e.length){c=0;for(var j=[];c<e.length;++c)j.push(e[c].component.cid+": "+e[c].exception);$.serverLog(f+" component(s) threw during onLoad","ERROR",j.join(", ")),assert(!1);throw e}return a}function cidFromMyId(a){var b=_my_exp.exec(a),c=b&&b[1];assert(!c||c in W2._components);return c}function flushOnLoadCallbacks(a){var b,c=a.cid,d=onLoadCallbacks[c];if(d){d.reverse();while(b=d.pop())b()}}function removeEntry(a){var b=a.cid;if(!a.__js_key||a.__js_key===b){var c=stateEntries[b];c&&c.ownerCid===b&&delete stateEntries[b]}}function getEntry(a){var b=a.__js_key;return stateEntries[b]||(stateEntries[b]={ownerCid:a.cid,state:{}})}function hasEntry(a){return a.__js_key in stateEntries}function registerComponents(a){var b=[],c,d,e=require("w2.timing").timing;for(c=0;c<a.length;c++)d=a[c],W2._components[d.cid]=d,d.onVisible&&(W2._onVisibleComponents[d.cid]=d,b.push(d));if(require("visibility").isVisible())for(c=0;c<b.length;c++){d=b[c];var f=+(new Date);try{d.onVisible()}catch(g){assert(!1)}e.components&&(e.components[d.cid]||(e.components[d.cid]={}),e.components[d.cid].v=+(new Date)-f)}return a}function getLiveParent(a){return W2._domids[a]?W2._domids[a]:W2._parents[a]?getLiveParent(W2._parents[a]):""}function getComponentFromElement(a){while(a&&!(a.id in W2._domidToCid))a=a.parentNode;return a&&W2._components[W2._domidToCid[a.id]]}function getLiveDomId(a){return W2._domids[a]}function _getDescendants(a){var b=[],c=W2._allChildren[a],d;if(c)for(d=0;d<c.length;d++)b=b.concat(_getDescendants(c[d]));b.push(a);return b}function _removeComponentMetadata(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=0;c<b.length;c++){d=b[c],$(document).trigger("webnode_before_remove_child_component_metadata",d),e=W2._parents[d],f=W2._allChildren[e];if(f)for(h=0;h<f.length;h++)if(f[h]==d){f.splice(h,1);break}k=W2._components[d];if(k){l=k.cname;if(l){var m=W2._children[e];m&&m[l]==d&&delete W2._children[e][l]}removeEntry(k)}g=W2._componentGroups[d];if(g)for(h=0;h<g.length;h++){j=g[h];for(i=0;i<W2._groups[j];i++)if(W2._groups[j][i]==d){W2._groups[j].splice(i,1);break}}delete W2._componentGroups[d],delete W2._components[d],delete W2._parents[d],delete W2._allChildren[d],delete W2._children[d],delete W2._knowsAbout[d],delete W2._domidToCid[W2._domids[d]],delete W2._domids[d],delete W2._debugInfo[d],delete W2._onVisibleComponents[d],delete onLoadStatus[d],delete onLoadCallbacks[d]}$(document).trigger("webnode_remove_component_metadata",a);return b}function addComponentMetadata(a){var b=a.parents,c=a.children,d=a.knowsAbout,e=a.groups,f=a.debugInfo,g=a.domids;W2.addParents(b),W2.addChildren(c),W2.addLookups(d),W2.addGroups(e),W2.addDomids(g),f&&W2.addDebugInfo(f),$(document).trigger("w2addcomponents",a),$(document).trigger("webnode_add_component_metadata",a)}function addDebugInfo(a){var b,c=require("w2.timing").timing;for(b in a)a.hasOwnProperty(b)&&(W2._debugInfo[b]=a[b]),c._components&&(c._components[b]||(c._components[b]={}),c._components[b].addDebugInfo=+(new Date))}function addDomids(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(W2._domidToCid[W2._domids[b]=a[b]]=b)}function addLookups(a){var b;for(b in a)a.hasOwnProperty(b)&&jQuery.extend(W2._knowsAbout[b],a[b])}function addChildren(a){var b;for(b in a)a.hasOwnProperty(b)&&jQuery.extend(W2._children[b],a[b])}function addGroups(a){var b,c,d,e,f;for(d in a)if(a.hasOwnProperty(d)){b=a[d],f=b.length;for(e=0;e<f;e++)c=b[e],W2._groups[d]||(W2._groups[d]=[]),W2._groups[d].push(c),W2._componentGroups[c]||(W2._componentGroups[c]=[]),W2._componentGroups[c].push(d)}}function addParents(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],W2._parents[b]=c,typeof W2._allChildren[c]=="undefined"&&(W2._allChildren[c]=[]),W2._allChildren[c].push(b),typeof W2._children[b]=="undefined"&&(W2._children[b]={}),typeof W2._knowsAbout[b]=="undefined"&&(W2._knowsAbout[b]={}))}var W2=exports,settings=require("settings"),Component,VirtualComponent,setContent,setContentHTML,setContentJS;W2._parents={},W2._components={},W2._onVisibleComponents={},W2._children={},W2._knowsAbout={},W2._allChildren={},W2._domids={},W2._domidToCid={},W2._debugInfo={},W2._ignoreDomids={},W2._ignoreCids={},W2._groups={},W2._componentGroups={},W2._GROUP_RE=/%([0-9a-zA-Z_]+)/;var stateEntries={},Component=require("Class").Class.extend({__init__:function(a,b,c,d,e){this.cid=a,this.cname=b,d?this.__vcon=d.split(":"):this.__vcon=null,this.__js_init=c,this.__js_key=e.js_key||a;if(d&&hasEntry(this)){var f=getEntry(this);assert(f.ownerCid!==this.cid),f.ownerCid=this.cid}this.init(c);return this},init:function(a){var b;if(typeof a=="object")for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},whenOnLoaded:function(a){var b=this.cid;if(onLoadStatus[b]===ONLOAD_DONE)a();else{var c=onLoadCallbacks[b]||[];c.push(a),onLoadCallbacks[b]=c}},state:function(a,b){var c=getEntry(this),d=c.state,e=W2._components[c.ownerCid]||this,f=e.stateHandlers[a],g=f?d[a]=f.call(e):d[a];arguments.length>1&&(d[a]=b,f&&f.call(e,b));return g},stateHandlers:{},initState:function(a,b){var c=getEntry(this),d=c.state,e=W2._components[c.ownerCid]||this;return e.state(a,a in d?d[a]:b)},child:function(a){var b,c;c=W2._children[this.cid],c&&(b=c[a]);return _safeGetComponentByCID(b)},children:function(){var a=W2._allChildren[this.cid],b=[],c;if(!a)return b;for(c=0;c<a.length;c++)b.push(_safeGetComponentByCID(a[c]));return b},parent:function(){var a;a=W2._parents[this.cid];return _safeGetComponentByCID(a)},getJQueryObject:function(){return $("#"+W2.getLiveParent(this.cid))},installScrollHandlers:function(a){this._scrollHandler=this.fnbind(a),$(window).scroll(this._scrollHandler)},uninstallScrollHandlers:function(){this._scrollHandler&&$(window).unbind("scroll",this._scrollHandler)},clickHandlers:{},mouseDownHandlers:{},mouseUpHandlers:{},mouseOverHandlers:{},mouseOutHandlers:{},installMouseHandlers:function(){var a=this,b={clickHandlers:"click",mouseDownHandlers:"mousedown",mouseUpHandlers:"mouseup",mouseOverHandlers:"mouseover",mouseOutHandlers:"mouseout"};for(var c in b){var d=b[c],e=this[c];for(var f in e)(function(b){var c=e[b];a.$("#@"+b).bind(d,function(b){b.preventDefault();return c.call(a,b)})})(f)}},lookup:function(a,b){try{var c=_CIDLookup(this.cid,a);return _safeGetComponentByCID(c)}catch(d){if(!b)throw d}},cQuery:function(a){var b;b=_cQueryByCID(this.cid,a);return _safeGetComponentByCID(b)},$:function(a){var b,c,d;b=this._my();if(typeof a=="string"){a=a.replace(/@/g,b);if(a.indexOf("%")!=-1)while(c=W2._GROUP_RE.exec(a)){d=W2._groups[c[1]];if(typeof d=="undefined")return $([]);a=a.replace(c[0],"#"+d.join(",#"))}}return $(a)},_my:function(){return"__w2_"+this.cid+"_"},__children:function(){return W2._children[this.cid]},__allChildren:function(){return W2._allChildren[this.cid]},__parent:function(){return W2._parents[this.cid]},__knowsAbout:function(){return W2._knowsAbout[this.cid]},ge:function(a){return document.getElementById(a.replace("@",this._my()))},onLoad:function(a){},onUnload:function(){},onInsertNode:function(a,b){return!0},onDeleteNode:function(a,b){return!0},onUpdate:function(a){return!0},DEPRECATED_controller:function(a){if(this.__vcon)return new W2._Controller(this.__vcon,a);throw new W2Error("No vcon info for Component <cid="+this.cid+">")},serverCall:function(a){if(!this.__vcon)throw new W2Error("No vcon info for Component <cid="+this.cid+">");switch(this.__vcon[0]){case"cls":return new W2._ServerCall(this.__vcon,a,this);case"live":return new W2._ServerCall(this.__vcon.slice(2),a,this);default:throw new W2Error("Unknown vcon type '"+this.__vcon[0]+"'")}},bind:function(a,b){if("length"in this)throw new W2Error("Cannot bind an event for Component with length property",this);$(this).bind(a,b)},trigger:function(a){$(this).trigger(a,Array.prototype.slice.call(arguments,1))}}),onLoadStatus={},ONLOAD_BEGUN=1,ONLOAD_DONE=2,onLoadCallbacks={},_my_exp=/^__w2_((?:[^_]+_)?[^_]+)/;VirtualComponent=Component.extend({__init__:function(a){this._super(a,null,{},null,{}),this.isVirtual=!0}}),W2Error.prototype=new Error,W2Error.prototype.errorType="W2Error",W2Error.prototype.contstructor=W2Error;var setContent=function(a,b){setContentHTML(a,b),setContentJS(a,b);return a},setContentHTML=function(a,b){a.innerHTML=b.html,delete b.html;return a},setContentJS=function(node,content){eval(content.js),delete content.js;return node},unloaded={},unloadComponent=function(a){for(var b=_getDescendants(a),c=0,d;c<b.length;++c)(d=W2._components[b[c]])&&d.onUnload();_removeComponentMetadata(a,b),unloaded[a]=!0};W2.assertUnloaded=function(a){assert(a in unloaded)},W2.addParents=addParents,W2.addChildren=addChildren,W2.addLookups=addLookups,W2.addDebugInfo=addDebugInfo,W2.addGroups=addGroups,W2.addDomids=addDomids,W2.registerComponents=registerComponents,W2.getComponentFromElement=getComponentFromElement,W2.getLiveDomId=getLiveDomId,W2.getLiveParent=getLiveParent,W2.Component=Component,W2.VirtualComponent=VirtualComponent,W2.onLoad=onLoad,W2.onVisible=onVisible,W2.addComponentMetadata=addComponentMetadata,W2._safeGetComponentByCID=_safeGetComponentByCID,W2.W2Error=W2Error,W2.setContent=setContent,W2.setContentHTML=setContentHTML,W2.setContentJS=setContentJS,W2._getDescendants=_getDescendants,W2._removeComponentMetadata=_removeComponentMetadata,W2.unloadComponent=unloadComponent,W2.C=W2._components,W2._stateEntries=stateEntries,W2._onLoadStatus=onLoadStatus,W2._onLoadCallbacks=onLoadCallbacks,W2.assertAllIDsUnique=function(a){return _assertIDs(a||document.body,{})}})(),exports.__W2_ExampleJSComponent=exports.Component.extend({init:function(a){this.dataFromPython=a},onLoad:function(){a1ert("Hello webnode2!")}})}),function(a){a.fn.dialog=function(a){return this.each(function(){new c(this,a)})};var b={id:"generic_dialog",title:"Title",contents:"",comment_form:"",mobile:null,buttons:{Ok:null,Cancel:null},class_:"",w:"w4"};a.dialog=function(c,d){var e=this;this.o=a(c),this.opts=a.extend({},b,d||{}),this.mobile=this.opts.mobile!=null?this.opts.mobile:require("settings").mobile;if(a("#"+this.opts.id).length>0)a("#"+this.opts.id).show();else{this.opts.buttons!=null&&(this.opts.buttons.Ok===null&&(this.opts.buttons.Ok=function(){e.btnOk()}),this.opts.buttons.Cancel===null&&(this.opts.buttons.Cancel=function(){e.btnCancel()}));if(this.opts.url){var f=this.opts.id+"_loading",g=this.opts.contents||'<div style="overflow:hidden;"><span class="__wn2_loading"><span class="__wn2_loading_spinner"></span><span class="__wn2_loading_text">Loading...</span></span></div>';this.opts.contents='<div id="'+f+'"><div class="__wn2_loading_wrapper">'+g+"</div></div>";var h=this.opts.urlData||{},i=require("webnode2");h.___W2_scope="__dialog__",h.___W2_windowId=i.windowId,a.get(this.opts.url,h,function(a){var b=document.getElementById(f);i.setContent(b,a)},"json")}this.mobile&&(this.opts.w=""),this.render();return this}};var c=a.dialog;c.fn=c.prototype={dialog:"0.0.1"},c.fn.extend=c.extend=a.extend,c.fn.extend({btnOk:function(){this.close()},btnCancel:function(){this.close()},close:function(){a("#"+this.opts.id).remove()},hide:function(){a("#"+this.opts.id).hide()},render:function(){var b="";this.opts.title?(b=a("<div/>").addClass("dialog_wrapper").append(a("<h2/>").addClass("dialog_frame").addClass("dialog_header").text(this.opts.title)),this.opts.contents&&b.append(a("<div/>").addClass("dialog_frame").addClass("dialog_contents").html(this.opts.contents)),this.opts.comment_form!=""&&b.append(a("<div/>").addClass("dialog_frame").addClass("dialog_contents").append(this.renderCommentForm(this.opts.comment_form)))):b=a("<div/>").addClass("dialog_component").html(this.opts.contents),this.o.append(a("<div/>").addClass("dialog").addClass(this.opts.w).addClass(this.opts.class_).attr("id",this.opts.id).append(b)),this.opts.buttons!=null&&a(".dialog_wrapper").append(a("<div/>").addClass("dialog_frame").addClass("dialog_buttons").append(a("<div/>").addClass("dialog_buttons_contents").html(this.renderButtons())));if(this.mobile)window.scrollTo(0,1),a(".dialog").css("top","0px"),a(".dialog").css("left","0px");else{var c=a(window).scrollTop(),d=c+150,e=a(window).width()/2-a(".dialog").width()/2;a(".dialog").css("top",d+"px"),a(".dialog").css("left",e+"px")}this.opts.comment_form!=""&&a("#dialog_comment").focus();var f=this;a(document).keydown(function(a){return f.keydown(a)});return!1},keydown:function(b){var c=b||window.event;if(c.keyCode==27){this.close(),a(document).unbind();return!1}},renderCommentForm:function(b){if(!b||b=="")b="Add a Comment";return a("<div/>").append(a("<h3/>").text(b+":")).append(a("<textarea/>").attr("id","dialog_comment"))},renderButtons:function(){var b=this,c=a("<div/>");a.each(this.opts.buttons,function(d,e){var f="submit_button";d=="Cancel"?f="cancel":d=="Close"&&(f="action_button");var g=a("<a/>").addClass("dialog_button").addClass(f).attr("id",d).html(d).click(e);b.opts.buttons_hide_on_close?g=g.click(function(){b.hide()}):g=g.click(function(){b.close()}),c.append(g)});return c}})}(jQuery),require.install("jquery.dialog",function(){}),function(a){a.fn.tooltip=function(a){return this.each(function(){new c(this,a)})};var b={id:"tooltip",contents:"",delay:75,class_:"tooltip"};a.tooltip=function(c,d){if(!a("body").hasClass("mobile")){var e=this;this.o=a(c),this.opts=a.extend({},b,d||{});var e=this;this.o.hover(function(){e.render()},function(){e.close()})}};var c=a.tooltip;c.fn=c.prototype={tooltip:"0.0.1"},c.fn.extend=c.extend=a.extend,c.fn.extend({to:null,btnOk:function(){this.close()},btnCancel:function(){this.close()},close:function(){clearTimeout(this.to),this.to=null,this.o.removeClass("tooltip_parent"),a("."+this.opts.class_).remove()},render:function(){this.set_tooltip(),this.o.addClass("tooltip_parent"),this.o.append(this.tt),this.tt.hide();var a=this.tt.height()+5;this.tt.css("top","-"+a+"px");var b=this,c=function(){b.tt.fadeIn(500)};this.to=setTimeout(c,this.opts.delay)},set_tooltip:function(){this.tt=a("<div/>").addClass("tooltip").append(a("<div/>").addClass("tooltip_contents").append(a("<span/>").text(this.opts.contents))).append(a("<div/>").addClass("tooltip_nub").html(""))}})}(jQuery),require.install("jquery.tooltip",function(){}),function(a){a.fn.menu=function(a,b){return this.each(function(){new d(this,a,b)})};var b={id:"generic_menu",open:!1,url:null,list_items:{},position_relative:!1,position_adjust:null,align_right:!1,close_on_click:!0},c=null;a.menu=function(c,d,e){this.o=a(c),this.handle=d,this.opts=a.extend({},b,e||{}),this.closeOldMenus(),this.render();var f=this;a(document).click(function(){f.close()}),this.opts.close_on_click&&a(".menu_list_item a").click(function(){f.close()}),a(".menu_list_item a.close_on_click").click(function(){f.close()});return!1};var d=a.menu;d.fn=d.prototype={menu:"0.0.1"},d.fn.extend=d.extend=a.extend,d.fn.extend({close:function(){this.o.addClass("hidden"),this.handle.removeClass("menu_active")},render:function(){if(a("#"+this.opts.id).length>0)return!1;this.handle.addClass("menu_active");if(this.opts.url){var b=this;this.o.append(a("<div/>").addClass("menu").attr("id",this.opts.id).setContentFromAJAXComponent(this.opts.url,this.opts.pars))}else this.position(),this.o.removeClass("hidden")},position:function(){var a=null,b=this.handle.innerHeight();this.opts.position_relative?a=this.handle.position():a=this.handle.offset(),this.opts.position_adjust&&(b+=this.opts.position_adjust);var c=a.left;this.opts.align_right&&(c-=this.o.width()-this.handle.innerWidth()),this.o.css("top",a.top+b+"px"),this.o.css("left",c+"px")},closeOldMenus:function(){c&&c.close(),c=this}})}(jQuery),require.install("jquery.menu",function(){}),jQuery.addTempTopic=function(a){this.id=a,this.topic_name=$("#"+a).val(),$(".topic_placeholder").addClass("hidden"),$(".topics_list").append($("<li/>").append($("<a/>").attr("href","#").attr("class","topic_name").text(this.topic_name)).append($("<a/>").attr("href","#").attr("class","topic_remove").text("").click(function(){$(this).parent().remove();return!1})).attr("class","topic_list_item")),$("#"+a).val("");return!1},require.install("jquery.topic",function(){}),function(a){a.belowthefold=function(b,c){var d=a(window).height()+a(window).scrollTop();return d<=a(b).offset().top-c.threshold},a.abovethetop=function(b,c){var d=a(window).scrollTop();return d>=a(b).offset().top+a(b).height()-c.threshold},a.rightofscreen=function(b,c){var d=a(window).width()+a(window).scrollLeft();return d<=a(b).offset().left-c.threshold},a.leftofscreen=function(b,c){var d=a(window).scrollLeft();return d>=a(b).offset().left+a(b).width()-c.threshold},a.inviewport=function(b,c){return!a.rightofscreen(b,c)&&!a.leftofscreen(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)},a.extend(a.expr[":"],{"below-the-fold":function(b,c,d){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b,c,d){return a.abovethetop(b,{threshold:0})},"left-of-screen":function(b,c,d){return a.leftofscreen(b,{threshold:0})},"right-of-screen":function(b,c,d){return a.rightofscreen(b,{threshold:0})},"in-viewport":function(b,c,d){return a.inviewport(b,{threshold:0})}})}(jQuery),require.install("jquery.viewport",function(){}),require.install("jquery.ui-1.8.17",function(require,a,b){(function(a,b){function d(b,d){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;if(!b.href||!g||f.nodeName.toLowerCase()!=="map")return!1;h=a("img[usemap=#"+g+"]")[0];return!!h&&c(h)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||d:d)&&c(b)}function c(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){if(c===b)return h["inner"+d].call(this);return this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){if(typeof b!="number")return h["outer"+d].call(this,b);return this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),e=isNaN(c);return(e||c>=0)&&d(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!!d&&!!a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;if(b[d]>0)return!0;b[d]=1,e=b[d]>0,b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))})(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e;if(f&&e.charAt(0)==="_")return h;f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b){h=f;return!1}}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))});return h}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}this._setOptions(e);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);this.element.trigger(c,d);return!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent")){a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation();return!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted){b.preventDefault();return!0}}!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0;return!0}},_mouseMove:function(b){if(a.browser.msie&&document.documentMode<9&&!b.button)return this._mouseUp(b);if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})}(jQuery),function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&d.values.length!==2&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(d.range==="min"||d.range==="max"?" ui-slider-range-"+d.range:"")));for(var i=e.length;i<g;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e=!0,f=a(this).data("index.ui-slider-handle"),g,h,i,j;if(!b.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:e=!1;if(!b._keySliding){b._keySliding=!0,a(this).addClass("ui-state-active"),g=b._start(d,f);if(g===!1)return}}j=b.options.step,b.options.values&&b.options.values.length?h=i=b.values(f):h=i=b.value();switch(d.keyCode){case a.ui.keyCode.HOME:i=b._valueMin();break;case a.ui.keyCode.END:i=b._valueMax();break;case a.ui.keyCode.PAGE_UP:i=b._trimAlignValue(h+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:i=b._trimAlignValue(h-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(h===b._valueMax())return;i=b._trimAlignValue(h+j);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(h===b._valueMin())return;i=b._trimAlignValue(h-j)}b._slide(d,f,i);return e}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy();return this},_mouseCapture:function(b){var c=this.options,d,e,f,g,h,i,j,k,l;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),j=this._start(b,i);if(j===!1)return!1;this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0;return!0},_mouseStart:function(a){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);this._slide(a,this._handleIndex,c);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1;return!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;this.orientation==="horizontal"?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),this.orientation==="vertical"&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e;return this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());return this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&c>d||b===1&&c<d)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);else{if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();d=this.options.values,e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()}},_setOption:function(b,c){var d,e=0;a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments);switch(b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;a=this._trimAlignValue(a);return a},_values:function(a){var b,c,d;if(arguments.length){b=this.options.values[a],b=this._trimAlignValue(b);return b}c=this.options.values.slice();for(d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;Math.abs(c)*2>=b&&(d+=c>0?b:-b);return parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,c=this.options,d=this,e=this._animateOff?!1:c.animate,f,g={},h,i,j,k;this.options.values&&this.options.values.length?this.handles.each(function(b,i){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),d.options.range===!0&&(d.orientation==="horizontal"?(b===0&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({width:f-h+"%"},{queue:!1,duration:c.animate})):(b===0&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),b==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),b==="max"&&this.orientation==="horizontal"&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate}),b==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),b==="max"&&this.orientation==="vertical"&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.17"})}(jQuery)}),function(a){var b=["async","beforeSend","cache","complete","contentType","data","dataFilter","dataType","error","global","ifModified","jsonp","password","processData","scriptCharset","success","timeout","type","url","username","xhr"],c={};a.each(b,function(a,b){c[b]=function(a){this.__options[b]=a;return this},c["_"+b]=function(){return this.__options[b]}}),c._options=function(){var c={},d=this;a.each(b,function(a,b){c[b]=d["_"+b]()});return c},c.options=function(b){if(b){var c=this;a.each(b,function(a,b){c[a](b)})}return this},c.__init__=function(a){this.__options={data:null},window.THIS_=this,this.options(a);return this},c.send=function(b){this.options(b);return a.ajax(this._options())},a.Ajax=require("Class").Class.extend(c)}(jQuery),require.install("jquery.ajax",function(){}),jQuery.effects||function(a){function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function c(b){var c;if(b&&b.constructor==Array&&b.length==3)return b;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))return[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55];if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)];if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)];if(c=/rgba\(0, 0, 0, 0\)/.exec(b))return e.transparent;return e[a.trim(b).toLowerCase()]}function b(b,c){var d=b[1]&&b[1].constructor==Object?b[1]:{};c&&(d.mode=c);var e=b[1]&&b[1].constructor!=Object?b[1]:d.duration?d.duration:b[2];e=a.fx.off?0:typeof e==="number"?e:a.fx.speeds[e]||a.fx.speeds._default;var f=d.callback||a.isFunction(b[1])&&b[1]||a.isFunction(b[2])&&b[2]||a.isFunction(b[3])&&b[3];return[b[0],d,e,f]}a.effects={version:"1.7.2",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){b=="toggle"&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")};a.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var c=a.parent();if(a.css("position")=="static")c.css({position:"relative"}),a.css({position:"relative"});else{var d=a.css("top");isNaN(parseInt(d,10))&&(d="auto");var e=a.css("left");isNaN(parseInt(e,10))&&(e="auto"),c.css({position:a.css("position"),top:d,left:e,zIndex:a.css("z-index")}).show(),a.css({position:"relative",top:0,left:0})}c.css(b);return c},removeWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent().replaceWith(a);return a},setTransition:function(b,c,d,e){e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])});return e},animateClass:function(b,c,d,e){var f=typeof d=="function"?d:e?e:null,g=typeof d=="string"?d:null;return this.each(function(){var d={},e=a(this),h=e.attr("style")||"";typeof h=="object"&&(h=h.cssText),b.toggle&&(e.hasClass(b.toggle)?b.remove=b.toggle:b.add=b.toggle);var i=a.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);b.add&&e.addClass(b.add),b.remove&&e.removeClass(b.remove);var j=a.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);b.add&&e.removeClass(b.add),b.remove&&e.addClass(b.remove);for(var k in j)typeof j[k]!="function"&&j[k]&&k.indexOf("Moz")==-1&&k.indexOf("length")==-1&&j[k]!=i[k]&&(k.match(/color/i)||!k.match(/color/i)&&!isNaN(parseInt(j[k],10)))&&(i.position!="static"||i.position=="static"&&!k.match(/left|top|bottom|right/))&&(d[k]=j[k]);e.animate(d,c,g,function(){typeof a(this).attr("style")=="object"?(a(this).attr("style").cssText="",a(this).attr("style").cssText=h):a(this).attr("style",h),b.add&&a(this).addClass(b.add),b.remove&&a(this).removeClass(b.remove),f&&f.apply(this,arguments)})})}},a.fn.extend({_show:a.fn.show,_hide:a.fn.hide,__toggle:a.fn.toggle,_addClass:a.fn.addClass,_removeClass:a.fn.removeClass,_toggleClass:a.fn.toggleClass,effect:function(b,c,d,e){return a.effects[b]?a.effects[b].call(this,{method:b,options:c||{},duration:d,callback:e}):null},show:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._show.apply(this,arguments):this.effect.apply(this,b(arguments,"show"))},hide:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._hide.apply(this,arguments):this.effect.apply(this,b(arguments,"hide"))},toggle:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])||a.isFunction(arguments[0])||typeof arguments[0]=="boolean"?this.__toggle.apply(this,arguments):this.effect.apply(this,b(arguments,"toggle"))},addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},toggleClass:function(b,c,d,e){return typeof c!=="boolean"&&c?a.effects.animateClass.apply(this,[{toggle:b},c,d,e]):this._toggleClass(b,c)},morph:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])},switchClass:function(){return this.morph.apply(this,arguments)},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])});return d}}),a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.state==0?(a.start=d(a.elem,e),a.end=c(a.end)):(typeof a.start=="number"&&(a.start=[a.start,a.start,a.start]),typeof a.end=="number"&&(a.end=[a.end,a.end,a.end])),a.elem.style[e]="rgb("+[Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)].join(",")+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b+c;return-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b+c;return d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b+c;return-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b*b+c;return d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){if(b==0)return c;if(b==e)return c+d;if((b/=e/2)<1)return d/2*Math.pow(2,10*(b-1))+c;return d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){if((b/=e/2)<1)return-d/2*(Math.sqrt(1-b*b)-1)+c;return d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.7015799999999999,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.7015799999999999,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.7015799999999999,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);if(b<1)return-.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c;return h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){f==undefined&&(f=1.7015799999999999);return d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){f==undefined&&(f=1.7015799999999999);return d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){f==undefined&&(f=1.7015799999999999);if((b/=e/2)<1)return d/2*b*b*(((f*=1.525)+1)*b-f)+c;return d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){if(c<f/2)return a.easing.easeInBounce(b,c*2,0,e,f)*.5+d;return a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery),require.install("effects.core",function(){}),function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","left"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g,m[j]=(k=="pos"?"+=":"-=")+g*2,n[j]=(k=="pos"?"-=":"+=")+g*2,c.animate(l,i,b.options.easing);for(var p=1;p<h;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),require.install("effects.shake",function(){}),function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.color||"#ffff99",g=c.css("backgroundColor");a.effects.save(c,d),c.show(),c.css({backgroundImage:"none",backgroundColor:f});var h={backgroundColor:g};e=="hide"&&(h.opacity=0),c.animate(h,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),e=="show"&&a.browser.msie&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),require.install("effects.highlight",function(){}),require.install("atexit",function(require,a,b){function f(){e(c)}function e(a){var b;while(b=a.pop())try{b()}catch(c){}}var c=[],d=[];a.register=function(a,b){d.length>0?d[b?d.length-1:0].push(a):(c.length||setTimeout(f,10),c.push(a))},a.hook=function(a){return function(){d.push([]);try{return a.apply(this,arguments)}finally{e(d.pop())}}}}),require.install("w2.livenode",function(require,a,b){function s(){require("webnode2").ConnectionWarning.show()}function r(){require("webnode2").ConnectionWarning.hide()}function q(a){console.log("Page requires reload "+a),$.serverLog("reportPageNeedsReload: "+a);var b=require("webnode2");b.ConnectionWarning&&b.ConnectionWarning.hide(),b.fallbackToPostReloadMode(a),b.interactionMode.$("#@banner").html("There was an error on the server.  You won't get live updates on this page until you <a href='javascript:window.location.reload();'>reload</a>."),b.interactionMode.startBlocking()}function p(){var a=require("webnode2");d.pendingMutationCount>0||d.currentVersion<d.requiredVersion?a.Loading.show():a.Loading&&a.Loading.hide()}function o(){var a=0,b;for(b in k)a++;d.pendingMutationCount=a,p()}function n(a){d.currentVersion=a,p()}function m(a,b){delete k[a],d.requiredVersion=Math.max(b,d.requiredVersion),o()}function l(){var a=require("webnode2");a.interactionMode.resumeUpdates();var b=Math.random(),c={};c._lm_transaction_id=b,c._lm_window_id=a.windowId,k[b]=1,o();return{transactionId:b,data:c}}function j(){return d.lazyComplete}function i(a){d.lazyComplete=a}function h(){c&&(clearTimeout(c),c=null);var a=require("webnode2");(new $.Ajax).url("/check_livedeps/index?window_id="+a.windowId+"&random="+Math.random()).type("GET").error(g).send()}function g(a,b,d){console.log("on check livedep error: ",a,b,d),c=setTimeout(h,1e3)}function e(a,b,c){if(b in a&&!(c in a)){a[c]=a[b],delete a[b];return!0}}window.console||(window.console={}),window.console.log||(window.console.log=function(){}),require("jquery");var c=null,d={interactionDelayedLivedepOperations:[],pendingMutationCount:0,currentVersion:0,requiredVersion:0,lazyComplete:!1},f=require("atexit").hook(function(a,b,c){c=c||!1;var f=require("webnode2");if(a=="error")console.log("LiveNode error"),q("error_response2");else{if(f.interactionMode._state==f.interactionMode._states.BLOCKING){d.interactionDelayedLivedepOperations.push({data:a,textStatus:b});return!1}try{$.each(a,function(a,b){e(b,"ty","type"),e(b,"animation","transition")&&e(b.transition,"ty","type"),e(b,"parentCid","parent_cid"),e(b,"childCid","child_cid"),e(b,"childDomid","child_domid");var d,g={};$("#"+b.domid+" [w2cid]").each(function(a,b){d=b.getAttribute("w2cid"),g[d]=!0}),$.each(g,function(a,d){var e=f.interactionMode._changedComponents[a];if(e&&e!=f.interactionMode._states.OFF)if(c)console.log("forcing override on live update conflict with cid="+a+" on optype = "+b.type);else throw"blocking_interaction_mode"})})}catch(g){if(typeof g=="string"&&g=="blocking_interaction_mode"){f.interactionMode.startBlocking(),d.interactionDelayedLivedepOperations.push({data:a,textStatus:b});return!1}throw g}var h=!$.browser.msie&&require("settings").feedAnchoring&&$(window).scrollTop()>0;h&&$("div.feed_item:in-viewport").anchor(),$.each(a,function(a,b){$(document).trigger("livenode_op_start",b);switch(b.type){case"set_node":if(b.domid in f._ignoreDomids)break;var c=$("#"+b.domid);if(!c.length){q("set_node_missing "+b.domid);return}var d=b.transition,e=f.getComponentFromElement(c.get(0));e&&e.force_transition&&(d=e.force_transition),assert("cid"in b),f.unloadComponent(b.cid),c.setContent(b.content);switch(d.type){case"none":break;case"slide":break;case"highlight":default:c.effect("highlight",{},2e3)}break;case"insert_node":if(b.domid in f._ignoreDomids)break;var g=document.getElementById(b.domid);if(!g){q("insert_node_missing "+b.domid);return}var i=document.createElement("DIV");f.setContentHTML(i,b.content);if(i.childNodes.length!=1){console.log("error: append must give a single node"),q("append");return}var j=i.childNodes[0],k=j.id;j.style.display="none",g.childNodes.length==b.position?g.appendChild(j):g.insertBefore(j,g.childNodes[b.position]),f.setContentJS(j,b.content);var l=f._components[b.parent_cid];l&&l.onInsertNode(b,k);if(b.transition.type=="none")break;if(h||b.transition.type=="highlight_only"){$("#"+k).effect("highlight",{},2e3);break}var m=$("#"+k).height();j.style.height=0,j.style.overflow="hidden",j.style.clear="both",j.style.display="";function n(){j.style.overflow="",j.style.height="",j.style.clear=""}$("#"+k).animate({height:m},300,"linear",n).effect("highlight",{},2e3);break;case"delete_node":if(b.domid in f._ignoreDomids)break;var g=document.getElementById(b.domid);if(!g){q("delete_node_missing "+b.domid);return}if(!f._parents[b.parent_cid]){q("delete_node_missing_component "+b.parent_cid);return}var o=g.childNodes[b.position];if(o.id!=b.child_domid){q("delete_node_wrong_child, node.id = "+o.id+", op.child_domid = "+b.child_domid);return}var l=f._components[b.parent_cid];l&&l.onDeleteNode(b,o.id),f.unloadComponent(b.child_cid),$("#"+o.id).remove();break;case"update_data":if(b.cid in f._ignoreCids)break;if(!f._parents[b.cid]){q("update_data_missing_component "+b.parent_cid);return}var e=f._components[b.cid];e&&e.onUpdate(b.data);break;case"error":console.log("livedep error: "+b.error),q("error_response");return;default:console.log("bad op type: "+b.type),q("bad_type")}}),$(document).trigger("livenode_finish_operations")}}),k={},t=require("webnode2"),u=t.Component;a.ConnectionWarningCls=u.extend({init:function(){this._super.apply(this,arguments),require("webnode2").ConnectionWarning=this,this.showing=!1},show:function(){if(!this.showing){this.showing=!0;if($(".main_content").length)var a=$(".main_content").offset().left+100;this.$("#@warning").css("left",a+"px").show()}},hide:function(){!this.showing||(this.showing=!1,this.$("#@warning").hide())}}),a.LoadingCls=u.extend({init:function(){this._super.apply(this,arguments),t.Loading=this,this.t=null,this.showing=!1},show:function(){if(!this.showing){this.showing=!0;var a=this.fnbind(function(){var a=$(".main_content").offset().left;this.$("#@loading").css("left",a+"px").show()});this.t=setTimeout(a,750)}},hide:function(){!this.showing||(this.showing=!1,clearTimeout(this.t),this.t=null,this.$("#@loading").hide())}}),$.fn.aboveViewport=function(a){return $(window).scrollTop()>=this.offset().top+this.height()-(a||0)},a.syncLivedeps=h,a.startMutation=l,a.onLivedepOperations=f,a.reportPageNeedsReload=q,a.reportPageRegainedConnection=r,a.reportPageLostConnection=s,a.setCurrentVersion=n,a.mutationDoneAfterVersion=m,a.checkLazyComplete=j,a.setLazyComplete=i,a.state=d}),function(a){function d(a){if(!a||!a.parentNode)return!1;var b=a.getAttribute("id"),d;a.setAttribute("id",c),d=!!document.getElementById(c),b?a.setAttribute("id",b):a.removeAttribute("id");return d}var b=require("lang/fun").bind;a.fn.forgetContents=function(){var a=require("webnode2");this.find("*").map(function(){var b=a._domidToCid[this.id];!b||(a._ignoreDomids[this.id]=1,a._ignoreCids[b]=1)});return this},a.fn.setContent=function(b){var c=getYTPlayerStatuses(a(this));typeof b=="string"?this.html(b):(this.setContentHTML(b),this.setContentJS(b)),restoreYTPlayerStatuses(this,c);return this},a.fn.setContentHTML=function(a){var b=a.html;delete a.html;return this.html(b)},a.fn.setContentJS=function(a){var b=a.js;delete a.js,window.require.enqueue(new Function("require","var W2 = require('webnode2'),LiveNode = require('w2.livenode');"+b))},a.fn.setContentFromAJAXComponent=function(c,d,e,f,g,h,i){var j=require("webnode2");d=d||{},d.___W2_parentId=e,d.___W2_windowId=j.windowId,d.___parent_domid=j.getLiveParent(e),f=f||'<span class="__wn2_loading"><span class="__wn2_loading_spinner"></span><span class="__wn2_loading_text">Loading...</span></span>',h=h||'<span style="color: red; font-weight: bold;">ERROR</span>',a.securepost(c,d,b(this,function(a){a.___ERROR___&&(this.setContent(h),typeof i=="function"&&i(a,a.___ERROR___)),this.setContent(a),typeof g=="function"&&g(a)}),"json"),this.setContent(f);return this};var c=(+(new Date)).toString(16);a.inDom=d;var e=!1;a.fn.anchor=function(b){function i(){var b={},f,g=0,h,i,j=[,-1];while(h=c[g++]){if(!d(h[0]))continue;f=a(h[0]).offset().top-h[1],i=b[f]=(b[f]||0)+1,j[1]<i&&(j=[f,i])}j[1]!=-1&&window.scrollTo(0,Math.round(j[0],0)),e=!1}if(e||this.length<1)return this;e=!0;var c=[],f=a(window).scrollTop();c.length=this.length;for(var g=0,h;h=this[g];++g)c[g]=[h,a(h).offset().top-f];if(b)return i;require("atexit").register(i);return this}}(jQuery),require.install("jquery.webnode2",function(){}),require.install("prefetch",function(require,a,b){function H(a){document.body.style.overflow="auto";var b=require("visibility").setVisible;pauseYTPlayers(),k?(k[0].contentWindow.pauseYTPlayers(),k[0].contentWindow.require("visibility").setVisible(!1),k=null):b(!1);if(a){if(!a[0].contentWindow.require){m.location.href=p(a[0].contentWindow.location.href);return}a[0].contentWindow.require("visibility").setVisible(!0),a[0].contentWindow.require.enqueue(function(require){require("prefetch").onPageShow()}),k=a}else b(!0),r()}function G(){o=!0}function F(a){var b=navigator.platform.match("Mac");if(a.button==1||(b?!!a.metaKey:!!a.ctrlKey))return!0;var c=D(a.target);if(c){var d=p(decodeURI(c.href)),e=p(decodeURI(window.location.href)),f=(d+"#").indexOf("#"),g=(e+"#").indexOf("#");if(e.substring(0,g)==d.substring(0,f)){G();return!0}if(d.substring(0,11)=="javascript:")return!0;K(d);return!1}return!0}function p(a){a=a.replace("?iframe=1",""),a=a.replace("&iframe=1","");return a}require("jquery");var c=require("event").add,d=require("webnode2"),e=require("settings").browserCaching,f=3,g=decodeURI(window.location.href),h=decodeURI(window.location.pathname),i=document.title,j=window.location.hash,k=null,l=require("prefetch_init"),m=l.shellWindow,n=l.getFrameElement,o=!1;(function(){var a=/chrome/.test(navigator.userAgent.toLowerCase()),b=navigator.appVersion.indexOf("Win")!=-1;e=e&&(a||$.browser.mozilla)&&!!history.pushState&&!b,e&&($("form").each(function(){$(this).attr("target")||$(this).attr({target:"_top"})}),n()||($(document).click(F),c(window,"popstate",function(a){if(a.state&&a.state.url){var b=a.state.url;if(b==g)H();else{var c=q.setIframe(b);if(!c){window.location.href=b;return!1}q.enqueueOnIframe(c,q.iframeStates.BEGUN_LOADING,function(){H(c)})}return!1}})))})();var q=function(){function o(){var b;for(var c in a){if(!m(a[c].value))continue;if(!b||a[c].last_accessed<=a[b].last_accessed)b=c}if(b)return i(b)}function n(b){for(var c in a)if(a[c].value[0]==b)return c;return null}function m(a){return a[0].contentWindow.require&&a[0].contentWindow.require("visibility")?!a[0].contentWindow.require("visibility").isVisible():!1}function l(a,b,c){a.state<b?b==d.BEGUN_LOADING&&(e=c,e.iframe=a):c()}function k(a){a==d.BEGUN_LOADING&&(e=!1)}function j(b,c){var f=decodeURI(b.contentWindow.location.href);f=p(f);var g=n(b);g&&(g!=f&&(a[f]=a[g],a[f].value.state=c,delete a[g]),a[f].value.state=c,e&&e.iframe[0]==b&&c>=d.BEGUN_LOADING&&(e(),e=!1))}function i(c){var d=a[c];if(d&&m(d.value)){d.value.remove(),delete a[c],b--;return!0}return!1}function h(e){if(!g(e)){if(b==f&&!o())return null;var h=new Object;h.value=$("<iframe />",{"class":"quora-prefetched",id:"iframe"+c}).appendTo("body"),h.value[0].contentWindow.name="iframe"+c+"window";var i=e,j=e.indexOf("#"),k="";j!=-1&&(k=i.substring(j),i=i.substring(0,j));var l=i.indexOf("?");l!=-1?i+="&iframe=1":i+="?iframe=1",i+=k,window.open(i,"iframe"+c+"window"),h.value.state=d.INITIAL,h.last_accessed=++c,a[e]=h,b++}return a[e].value}function g(b){var d=a[b];if(d){d.last_accessed=++c;return d.value}return null}var a={},b=0,c=0,d={},e=!1;d.INITIAL=1,d.BEGUN_LOADING=2;return{getIframe:g,setIframe:h,removeIframe:i,changeIframeState:j,dequeueOnIframe:k,enqueueOnIframe:l,iframeStates:d}}();n()||(a.cache=q);var r=a.onPageShow=function(){require("visibility").isVisible&&(C(B()),d.onVisible())},s=function(a){return t(a)&&a.indexOf("https")!=0},t=function(a){return/https?:\/\/[a-z.0-9_-]+\.quora\.com/i.test(a)},u=a.setCacheItem=function(a){e&&m.require("prefetch").cache.setIframe(a)},v=a.clearCacheItem=function(a){e&&m.require("prefetch").cache.removeIframe(a)},w=a.getDomain=function(){return/https?:\/\/[a-zA-Z.0-9_-]+\//.exec(z())[0]},x=a.getRelativeURL=function(a){if(a.indexOf("/")==0)return a;var b=a.indexOf(".com/");return a.substring(b+4)},y=a.getPathName=function(){return h},z=a.getURL=function(){return g},A=a.getHash=function(){return j},B=a.getTitle=function(){return i},C=a.setTitle=function(a){i=a,require("visibility").isVisible()&&(m.document.title=a)},D=function(a){if(a.nodeName.toUpperCase()=="A")return a;var b=jQuery(a).parent("a");return b[0]},E=function(a){if(!E.invokedEarlier){var b={url:g};history.pushState(b,"",g),E.invokedEarlier=!0}var c={url:a};history.pushState(c,"",a)};a.clickHandler=F,a.disableCaching=G;var I=a.reload=function(){var a=n();a&&m.require("prefetch").cache.changeIframeState(a,windowManager.cache.iframeStates.INITIAL),window.location.reload()},J=a.handleClick=function(a,b){b.which==2||b.metaKey?window.open(a):windowManager.navigateTo(a,!1)},K=a.navigateTo=function(a){a=p(a);if(a!=z()+"#"){if(n()){m.require("prefetch").navigateTo.apply(null,arguments);return}q.dequeueOnIframe(q.iframeStates.BEGUN_LOADING),a.indexOf("/")==0&&(a=w()+a.substring(1));var b=!0;arguments.length>1&&(b=arguments[1]);if(a==""||a=="#")return;if(!t(a)){window.open(a);return}if(!e||o){window.location=a;return}if(!b||!s(a)){window.location=a;return}if(a==g)H(),E(a);else{var c=q.setIframe(a);if(!c){window.location=a;return}q.enqueueOnIframe(c,q.iframeStates.BEGUN_LOADING,function(){H(c);var a=decodeURI(c[0].contentWindow.location.href);a=p(a),E(a)})}}}}),function(){var a=require("webnode2"),b=require("settings").formkey,c=0;a.RPC=$.Ajax.extend({__init__:function(b){this._super(a.RPC.defaults),this.options(b),this.__data={args:[],kwargs:{}},this.__success=null,this.error(this.fnbind(this._defaultErrorHandler)),this.__exceptionPatterns={},this.__exceptionCatchAll=null,this.__liveMutation=!1,this.__contentFor=!1,this.options(b)},liveMutate:function(){this.__liveMutation=!0;return this},contentFor:function(a,b){a.jquery&&(a=a.get(0)),this.__contentFor=!0;var c=$.extend(b,{domNode:a});!c.useLoadingSpinner&&c.useLoadingSpinner!==!1&&(c.useLoadingSpinner=!0);if(!c.parentCID)throw new Error("must explicitly specify parentCID.");c.domNode=a,this.__contentForOpts=c;return this},send:function(){this.__liveMutation&&(this.__liveMutationInfo=require("w2.livenode").startMutation()),this.__contentFor&&this._contentForStartLoading();return this._super()},_contentForStartLoading:function(){this.__contentForOpts.useLoadingSpinner&&(this.__contentForLoadingTimeout=setTimeout(this.fnbind(function(){$(this.__contentForOpts.domNode).forgetContents(),$(this.__contentForOpts.domNode).html("<img class='content_loading_spinner' src='/static/images/spinner_2a.gif' />")}),150))},_contentForDoneLoading:function(){clearTimeout(this.__contentForLoadingTimeout)},_defaultErrorHandler:function(){this._throwError("Unhandled error response from server: "+JSON.stringify(arguments))},success:function(a){this.__success=a;return this},except:function(a,b){switch(arguments.length){case 1:this.__exceptionCatchAll=a;break;case 2:typeof a=="string"?this.__exceptionPatterns[a]=b:$.each(a,this.fnbind(function(a,c){this.__exceptionPatterns[c]=b}));break;default:this._throwError("The except method takes either (<pattern>, <callback>) or (<default-callback>) as arguments.")}return this},args:function(){var a=[],b;for(b=0;b<arguments.length;b++)a.push(arguments[b]);this.__data.args=a;return this},xargs:function(a){this.__data.args=a;return this},kwargs:function(a){this.__data.kwargs=a;return this},data:function(){throw new Error("Don't use the .data() method with RPC; use .kwargs() or .args() instead.")},_data:function(){if(!b)throw new Error("require('settings').formkey not set -- can't send request securely.");a.windowId||console&&console.warn&&console.warn("No W2.windowId set; any content coming back from the server may not be live updated correctly");var c;try{c=JSON.stringify(this.__data)}catch(d){console.log("W2.RPC Error: Can't encode an object with circular references",d,this.__data),assert(!1),c=JSON.stringify({error:"Can't encode an object with circular references"})}var e={json:c,formkey:b,window_id:a.windowId};this.__liveMutation&&$.extend(e,this.__liveMutationInfo.data),this.__contentFor&&(e.parent_cid=this.__contentForOpts.parentCID,e.parent_domid=a.getLiveParent(e.parent_cid));return e},success:function(a){this.__success=a;return this},_successWrapper:function(b){b.pmsg&&(a.pmsgContainer?a.pmsgContainer.setContent(b.pmsg,!0):console&&console.warn&&console.warn("Received a piggybacking pmsg but there's no pmsgContainer present on this page; dropping the pmsg.")),this.__contentFor&&this._contentForDoneLoading();if(b.exception)return this._handleException(b);this.__contentFor&&($(this.__contentForOpts.domNode).forgetContents(),$(this.__contentForOpts.domNode).setContent(b.value),$(document).trigger("rpc_content_for_done",{opts:this.__contentForOpts,value:b.value}));var d=undefined;typeof this.__success=="function"&&(d=this.__success(b.value)),this.__liveMutation&&require("settings").pageMode=="post_reload"&&(c>0?c-=1:require("prefetch").reload());return d},disableNextPostReload:function(){++c;return this},_success:function(a){return this.fnbind(this._successWrapper)},_throwError:function(a){console&&console.error&&console.error(a);throw new Error(a)},_handleException:function(a){var b=this.__exceptionPatterns[a.exception.type],c=!0;b?c=this._invokeExceptionCallback(b,a):this.__exceptionCatchAll&&(c=this._invokeExceptionCallback(this.__exceptionCatchAll,a));if(c){var d={response:a,rpc:this};$(document).trigger("w2rpcexception-"+a.exception.type,d),$(document).trigger("w2rpcexception",d)}},_invokeExceptionCallback:function(a,b){return a(b.exception,b,this)}}),a.RPC.defaults={type:"POST",dataType:"json"},a.rpc=function(b){return(new a.RPC).url(b)},a._Controller=a.RPC.extend({__init__:function(a,b){this._super(),this.__vcon=a,this.__vcon_method=b;var c=require("settings").serverCallUrl;if(c)this.url(c);else throw new Error("require('settings').serverCallUrl not set")},_data:function(){var a=this._super();if(this.__vcon)a.__vcon_json=JSON.stringify(this.__vcon),a.__vcon_method=this.__vcon_method;else throw new Error("vcon not set; can't call a view controller.");return a}}),a._ServerCall=a._Controller.extend({__init__:function(a,b,c){this._super(a,b),this._component=c,this._sendJSInitArgs=!0},dontSendJSInitArgs:function(a){a===!1?this._sendJSInitArgs=!0:this._sendJSInitArgs=!1;return this},_data:function(){var a=this._super();this._sendJSInitArgs&&(a.js_init=JSON.stringify(this._component.__js_init));return a}}),a.fallbackToPostReloadMode=function(){require("settings").pageMode="post_reload"}}(),require.install("w2.rpc",function(){}),function(a){var b=require("webnode2");require("w2.rpc"),a.serverLog=function(a,c,d,e){try{var f=b.rpc("/ajax/server_log_POST").kwargs({message:a,level:c,other:d}).error(function(){console.log("Couldn't log error message: '"+a+"' on server.  Meta-failure :(")}).send()}catch(g){}if(e!==!1){var h;switch(c){case"DEBUG":h=function(a){console.debug(a)};break;case"INFO":h=function(a){console.info(a)};break;case"WARNING":h=function(a){console.warn(a)};break;case"ERROR":case"CRITICAL":h=function(a){console.error(a)};break;default:h=function(a){console.log(a)}}if(typeof h!="function"){h=function(a){console.log(a)};if(typeof h!="function")return}try{d=JSON.stringify(d)}catch(g){}try{h("[$.serverLog] "+a+" "+d)}catch(g){}}return f}}(jQuery),function(a,b){a.a1ert=b,a.alert=function(a){$.serverLog("Raw alert -- could mean a security vulnerability","WARNING",{alertArg:a},!1),b(a)},a.alert.toString=function(){return""+b}}(this,this.alert),require.install("jquery.quora",function(){}),function(){var a=require("lang/fun").bind,b=require("webnode2"),c=require("Class").Class;b.Dialog=c.extend({__init__:function(a,c){this.opener&&this.opener(a),b.Dialog._dialogCounter+=1,this._dialogId=b.Dialog._dialogCounter,this._cid="*dialog*_"+this._dialogId,this._title=null,this._buttons=[],this._ok=null,this._cancel=null,this.opts=$.extend({closeOnEscape:!0,closeOnClickOut:!1,sortButtons:!0,focusOK:!1,dialogClass:"",verticalOffset:150},c),this._opened=!1,this._containsComponent=!1,this._content=null,this.opts.html&&(this._content=html)},opt:function(a,b){this.opts[a]=b;return this},noButtons:function(){this._buttons=[];return buttons},ok:function(a,c){typeof a=="string"&&(c=a,a=null),this._ok=a,c!==!1&&this.addButton(new b.OKButton(this,c,null));return this},cancel:function(a,c,d){typeof a=="string"&&(c=a,a=null),this._cancel=a,c!==!1&&(d?this.addButton(new b.CancelActionButton(this,c,null)):this.addButton(new b.CancelButton(this,c,null)));return this},button:function(a,c,d){return this.addButton(new b.Button(this,c,a,d))},title:function(a){if(this._opened)throw new Error("Can't set the title for a dialog once it has been opened.");this._title=a;return this},setTitle:function(a){a&&$("#__w2_dialog_title_"+this._dialogId).text(a)},addButton:function(a){if(this._opened)throw new Error("Can't add a button to a dialog once it has been opened");this._buttons.push(a);return this},opener:function(a){this._opener=a;return this},open_:function(){if(this._opened)return this;this._createDOMElements();var c=b._safeGetComponentByCID(this._cid);b._components[this._cid]=c;var d={};d[this._cid]="*ROOT*",b.addParents(d),$(document).bind("keydown.__w2_dialog_"+this._dialogId,a(this,function(a){this.opts.closeOnEscape&&a.keyCode==27&&(this.cancel_(),a.stopPropagation())}));if(this.opts.closeOnClickOut){var e="#__w2_dialog_outer_"+this._dialogId;$(document).on("click",e,a(this,function(a){a.stopPropagation()})),$(document).on("click",":not("+e+","+e+" *)",a(this,function(a){this.cancel_(),a.stopPropagation()}))}this._opened=!0,typeof this._open=="function"&&this._open.apply(this,arguments);return this},cancel_:function(a){var b=!0;typeof this._cancel=="function"&&this._cancel(this._callbackArg(a))===!1&&(b=!1),b&&this.close_()},_callbackArg:function(a){var c={dialog:this,dialogWrapper:b._safeGetComponentByCID(this._cid),button:a};this._containsComponent&&(c.dialogComponent=b._safeGetComponentByCID(this._cid).lookup("__dialog__"));return c},ok_:function(a){var b=!0;typeof this._ok=="function"&&this._ok(this._callbackArg(a))===!1&&(b=!1),b&&this.close_();return b},close_:function(){if(!this._opened)return this;$(document).unbind(".__w2_dialog_"+this._dialogId),$("#__w2_dialog_outer_"+this._dialogId).forgetContents(),b.unloadComponent(this._cid),$("#__w2_dialog_outer_"+this._dialogId).remove(),this._opened=!1,typeof this._close=="function"&&this._close.apply(this,arguments);return this},open:function(a){this._open=a;return this},close:function(a){this._close=a;return this},html:function(a){this._content=a;return this.open_()},text:function(a){return this.html(a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))},_createDOMElements:function(){var a=this.opts.width||420,b,c=$("<div />").attr("id","__w2_dialog_outer_"+this._dialogId).addClass("dialog").addClass("w4").addClass(this.opts.dialogClass);this._title?(b=$("<div />").addClass("dialog_wrapper").append($("<h2 />").attr("id","__w2_dialog_title_"+this._dialogId).addClass("dialog_header").addClass("dialog_frame").text(this._title)),this._content&&b.append($("<div />").addClass("dialog_frame").addClass("dialog_contents").addClass("dialog_body").html(this._content))):b=$("<div />").addClass("dialog_component").addClass("dialog_wrapper").addClass("dialog_body").html(this._content),this._buttons.length&&b.append($("<div />").addClass("dialog_frame").addClass("dialog_buttons").append(this._buttonsDOM()));var d=$(window).width(),e=a,f=d-e,g=f/2;if(require("settings").mobile)window.scrollTo(0,1),c.append(b).css("position","absolute").css("top","0px").css("left","0px").css("width",parseInt(d)-20+"px").appendTo($(document.body));else{var h=$(window).scrollTop(),i=h+this.opts.verticalOffset;c.append(b).css("top",i+"px").css("left",g+"px").appendTo($(document.body))}if(this.opts.focusOK)for(var j=this._buttons.length-1;j;j--){var k=this._buttons[j];if(k._type=="submit"){$("#__w2_dialog_button_"+this._dialogId+"_"+j).focus();break}}},_buttonDOM:function(b,c){b._index=c;var d=$("<a />").addClass("dialog_button").text(b._text).click(a(b,b.click_)).click(function(){return!1}).attr("href","#").attr("id","__w2_dialog_button_"+this._dialogId+"_"+c);switch(b._type){case"submit":d.addClass("submit_button");break;case"link":case"cancel":d.addClass("cancel");break;case"action":default:d.addClass("action_button")}return d},_buttonsDOM:function(){var a=$("<div />");this.opts.sortButtons&&this._buttons.sort(function(a,b){return a._priority-b._priority});for(var b=this._buttons.length-1;b>=0;b--){var c=this._buttons[b];a.append(this._buttonDOM(c,b))}return a.addClass("dialog_buttons_contents")},_loadingHTML:function(){return'<div id="__w2_dialog_container_'+this._dialogId+'"></div>'},load:function(c,d){d=$.extend({args:[],kwargs:{},showImmediately:!0,showOnLoad:!0},d),this._content=this._loadingHTML(),this.open_();var e=this._opener.serverCall(c).xargs(d.args).kwargs(d.kwargs).success(a(this,function(a){this._opener.__dialog__=this;var c=b._safeGetComponentByCID(this._cid);c.__opener__=this._opener,c.__dialog__=this,b._knowsAbout[this._cid].__dialog__="__dialog__",b._knowsAbout[this._cid].__dialog_wrapper__=".",b._children[this._cid].__dialog__=b._allChildren[this._cid][0],this._containsComponent=!0})).contentFor($("#__w2_dialog_container_"+this._dialogId),{parentCID:this._cid});this.opts.error&&e.error.apply(this,this.opts.error),this.opts.except&&e.error.apply(this,this.opts.except),e.send();return this}}),b.Dialog.openerFor=function(a){return a.lookup("__dialog_wrapper__").__opener__},b.Dialog.dialogFor=function(a){return a.lookup("__dialog_wrapper__").__dialog__},b.Dialog._dialogCounter||(b.Dialog._dialogCounter=0),b.Button=c.extend({__init__:function(a,b,c,d){this._dialog=a,this._text=b,this._callback=c,this._opts=d||{},this._priority=50,this._type="action"},text:function(a){this._text=a},callback:function(a){this._callback=a},click_:function(){var a=!0;typeof this._callback=="function"&&this._callback.call(this._dialog,this._dialog._callbackArg(this))===!1&&(a=!1),a&&this._dialog.close_()}}),b.OKButton=b.Button.extend({__init__:function(b,c,d,e){e=$.extend({style:"ok_button"},e),this._super(b,c||"OK",a(this,function(){var a=!0;typeof d=="function"&&d.call(this,this._dialog._callbackArg(this))===!1&&(a=!1);return a?this._dialog.ok_.call(this._dialog,this):a}),e),this._priority=75,this._type="submit"}}),b.CancelButton=b.Button.extend({__init__:function(b,c,d,e){e=$.extend({style:"cancel_button"},e),this._super(b,c||"Cancel",a(this,function(){var a=!0;typeof d=="function"&&d.call(this,this._dialog._callbackArg(this))===!1&&(a=!1),a&&this._dialog.cancel_.call(this._dialog,this)}),e),this._priority=25,this._type="link"}}),b.CancelActionButton=b.CancelButton.extend({__init__:function(a,b,c,d){this._super(a,b,c,d),this._type="action"}})}(),require.install("w2.dialog",function(){}),function(){var a=require("webnode2");a.InputValidator=a.Component.extend({init:function(){this._super.apply(this,arguments),this.isValid=null},onLoad:function(){var a=this.input(),b;a.bind("change blur",this.fnbind(function(){var c=a.val();c!==b&&(b=c,this.validate())})),this._managerComponent().__validators=this._managerComponent().__validators||[],this._managerComponent().__validators.push(this)},input:function(){return this.parent().$("#"+this.id)},_managerComponent:function(){return this.parent()},validate:function(a){a=a||{};var b=this.input().val();if(!b)this.showErrorOnComponent(".@incomplete"),this.hideAllErrors(),this.isValid=null;else{this.hideAllErrors();var c=setTimeout(this.fnbind(function(){this.$(".@asking_server").show()}),150);this.serverCall("validate").kwargs({value:this.input().val()}).success(this.fnbind(function(b){clearTimeout(c),this.hideAllErrors(),b.valid?(this.isValid=!0,b.message&&(this.setWidth(this.$("#@valid_message")),this.$("#@valid_message").text(b.message)),this.$(".@valid").text()&&this.showErrorOnComponent(".@valid"),this.hideAllErrors(),this.input().removeClass("error"),typeof a.valid=="function"&&a.valid(b.message)):(this.isValid=!1,b.message&&(this.setWidth(this.$("#@invalid_message")),this.$("#@invalid_message").text(b.message)),this.hideAllErrors(),this.showErrorOnComponent(".@invalid"),typeof a.invalid=="function"&&a.invalid(b.message))})).send()}},populate_if_valid:function(a,b){this.serverCall("validate").kwargs({value:a}).success(this.fnbind(function(c){c.valid&&(this.isValid=!0,b.val(a))})).send()},setWidth:function(a){var b=parseInt(this.input().width())-4;b>0&&a.css("width",b+"px")},hideAllErrors:function(){this.$(".@invalid").hide(),this.$(".@valid").hide(),this.$(".@incomplete").hide(),this.$(".@asking_server").hide(),this.input().removeClass("input_validation_error"),this.$("textarea").removeClass("input_validation_error")},showErrorOnComponent:function(a){this.$(a).show(),this.input().addClass("input_validation_error"),this.$("textarea").addClass("input_validation_error")}}),a.InputValidator.validate=function(a,b){b=b||{},a.__validators&&a.__validators.length?a.__validators[0].validate(b):typeof b.valid=="function"&&b.valid()}}(),require.install("w2.inputvalidate",function(){}),function(){var a=require("webnode2"),b=require("w2.timing").timing,c="*ROOT*",d="http://www.corp.quora.com/Performance/What-do-all-these-response-time-metrics-mean-at-the-bottom-of-the-page";a._totalTimesCache={},a._totalTimeForComponent=function(b){a._totalTimesCache[b]||(a._totalTimesCache[b]=a._totalTimeForComponent2(b));return a._totalTimesCache[b]},a._removedInfo={removed:{},parents:{},debugInfo:{}};var e=function(b,c){if(!!c){var d=c;a._removedInfo.removed[d]=!0,a._removedInfo.parents[d]=a._parents[d],a._removedInfo.debugInfo[d]=a._debugInfo[d]}},f=function(a){return Math.round(a*1e3)/1e3},g=function(a,b){b===undefined&&(b=1);if(typeof a==="number")return a.toFixed(b);return a},h=!1,i=function(b){var d=a._allChildren[b];Y===null&&Z(),Y[b]&&(d||(d=[]),d=d.concat(Y[b]));if(h||b===c||!d)return d;var e=[];for(var f=0;f<d.length;f++){var g=d[f];j(g)&&e.push(g)}if(e.length>0)return e;return undefined},j=function(a){var c=b._components[a];if(c){var d=c.addDebugInfo;if(d<b.postOnLoad)return!0}return!1};a._totalTimeForComponent2=function(c){var d=ba(c),e=0,g=0,h=0,j=b.components[c];j&&j.l&&(h=j.l);if(d){var k=d.prime;if(k)for(var l in k){var m=k[l];e+=m}d.prime_time_ms=f(e),g=d.init_excl_time_ms+d.tree_excl_time_ms+d.js_init_time_ms+d.prime_time_ms}var n=g,o=1,p=i(c),q=0,r=h;if(p)for(var s=0;s<p.length;s++){var t=p[s],u=a._totalTimeForComponent(t);n+=u.time,o+=u.components,r+=u.onLoadIncl}return{time:f(n),exclusive:f(g),components:o,onLoadIncl:f(r),onLoadExcl:f(h)}};var k={inclusive:"Time taken by component and descendants (component's exclusive + total inclusive time of child components)",exclusive:"Time taken by the component itself (tree_excl + init_excl + js_init + prime)",treeExcl:"Time spent exclusively in the tree method of the component, excluding any time spent in calls made by child components",treeIncl:"Total time spent in the tree method (from invocation till exit)",initExcl:"Time spent exclusively in the init method of the component, excluding any time spent in calls made by child components",initIncl:"Total time spent in the init method (from invocation till exit)",jsInit:"Total time spent in the js_init method (from invocation till exit)",prime:"Total time spent in the prime methods",count:"Number of instances of this component type",average:"Average time taken by each component instance (value in previous column divided by number of instances)",childComponent:"Component id of child component",components:"Total number of components in the subtree rooted at the current component (1 + total number of descendants)","class":"Type of the component",cid:"Component id",onLoadIncl:"Time taken by the onLoad methods on the client side by the current component and descendants",onLoadExcl:"Time taken by the onLoad methods on the client side by the current component"},l=[["Id","cid","cid"],["Class","type","class"],["Components","components","components"],["Inclusive","total","inclusive"],["Exclusive","exclusive","exclusive"],["Tree Incl","treeIncl","treeIncl"],["Tree Excl","treeExcl","treeExcl"],["Init Incl","initIncl","initIncl"],["Init Excl","initExcl","initExcl"],["JsInit","jsInit","jsInit"],["Prime","prime","prime"],["OnLoad Incl","onLoadIncl","onLoadIncl"],["OnLoad Excl","onLoadExcl","onLoadExcl"]],m={},n=[["Name","name","class"],["Count","num","count"],["Inclusive","total","inclusive"],["Avg","totalAvg","average"],["Exclusive","exclusive","exclusive"],["Avg","exclusiveAvg","average"],["Tree Incl","treeIncl","treeIncl"],["Avg","treeInclAvg","average"],["Tree Excl","treeExcl","treeExcl"],["Avg","treeExclAvg","average"],["Init Incl","initIncl","initIncl"],["Avg","initInclAvg","average"],["Init Excl","initExcl","initExcl"],["Avg","initExclAvg","average"],["JsInit","jsInit","jsInit"],["Avg","jsInitAvg","average"],["Prime","prime","prime"],["Avg","primeAvg","average"],["OnLoad Incl","onLoadIncl","onLoadIncl"],["Avg","onLoadInclAvg","average"],["OnLoad Excl","onLoadExcl","onLoadExcl"],["Avg","onLoadExclAvg","average"]],o=function(a,b){if(!b.data("original")){b.wrap("<div style='position:relative'></div>");var c=$("tr:first",b);c.before(c.clone(!0));var d=$("tr:first",b);d.css("position","absolute"),d.css("top","0px"),d.css("left",b.css("margin-left")),d.css("visibility","hidden"),b.data("original",c),b.data("cloned",d)}var c=b.data("original"),e=b.data("cloned"),f=b.offset(),g=$(a).scrollTop();g>f.top&&g<f.top+b.height()?(e.css("visibility","visible"),e.css("top",Math.min(g-f.top,b.height()-e.height())+"px"),$("th",e).each(function(a){var b=$("th",c).eq(a),d=$("div",b),e=d.css("width");$(this).css("width",e),$("div",this).css("width",e)}),e.css("width",b.css("width"))):(e.css("visibility","hidden"),e.css("top","0px"))},p="        table {             border-collapse: collapse;         }         tr.even {             background-color: white;         }         tr.odd {             background-color: rgb(234, 236, 239);         }         tr.header {             background-color: rgb(242, 240, 229);         }         th, td {             border: 1px lightgray solid;             padding: 5px;             line-height: 1em;         }         td {         }         td.tree {             font-size: 1.2em;            padding: 1px;             font-family: Courier New;             white-space: nowrap;         }         span.text {             font-size: 10pt;             line-height: 1em;             font-family: Arial;         }         td.number {             text-align: right;             font-size: 0.8em;         }         .arrow {             cursor: pointer;         }         span.symbol {             color: darkgray;         }         span.percent {             color: rgb(128, 128, 128);             font-size: 0.9em;             line-height: 1em;         }         td.text {             padding: 1px 5px;         }         td.pre_percent {             border-right: 0px;         }         td.percent {             border-left: 0px;         }     ",q=function(a){if(a%2)return"odd";return"even"},r={total:!0,totalAvg:!0,exclusive:!0,exclusiveAvg:!0},s=function(a,b,c,d){if(c in r){a.push("<td class='number percent'>");if(d!==undefined){var e=b.total,f=(d/b.total*100).toFixed(1);a.push("<span class='percent'>"+f+"%</span>")}a.push("</td>")}},t=function(a,b){var c=function(){var b="Include ";h&&(b="Exclude"),a.text(b+" post-page-load components")},d=function(){h=!h,c(),b();return!1};a.click(d),c()},u=function(a,b,c,e,f,g,h,i,j,l,m,n){var q=!1;if(!e.window||e.window.closed)e.window=window.open(),q=!0;var s=e.window;s.focus();if(!q&&!j)return!1;$(s.document.body).empty();var u=b.replace(/<b>/g,"").replace(/<\/b>/g,"");s.document.title=a+" ("+u+")";var v=!1,w=$("<table>"),x=function(){v||($(s).scroll(x),$(s).resize(x),v=!0),o(s,w)};w.data("updateTable",x);var y=$("<tr class='header'>");w.append(y);for(var z=0;z<c.length;z++)(function(){var a=c[z],b=a[0],d=a[1],h="";a.length>2&&(h=k[a[2]]);var i=d===e.sortKey,j=e.sortAsc;i&&(b=(j?"â²":"â¼")+b);var l=$("<th>");d in r&&l.attr("colspan",2),y.append(l);var m=$("<a>");m.text(b).attr("href","#").attr("title",h).click(function(){f(e,d,i?!j:!1),g(!0);return!1}),l.append($("<div>").append(m))})();$("head",s.document).append($("<style type='text/css'>").html(p));var A=$(s.document.body);A.append($("<h4>").html(a)),A.append($("<p>").html(b+" (<a target='_blank' href='"+d+"'>definitions</a>)")),g===h?A.append("Flat view"):A.append($("<a>").attr("href","#").text("Flat view").click(function(){h();return!1})),A.append(" "),g===i?A.append("Tree view"):A.append($("<a>").attr("href","#").text("Tree view").click(function(){i();return!1})),A.append(" ("+l+": "),A.append($("<a>").attr("href","#").text("Flat view").click(function(){m();return!1})),A.append(" "),A.append($("<a>").attr("href","#").text("Tree view").click(function(){n();return!1})),A.append(")"),A.append(" ");var B=$("<a>").attr("href","#");A.append(B),t(B,function(){X(),g(!0)}),A.append($("<br>")),A.append(w);return w},v,w=function(){if(v!==undefined)return v;v=0;for(var b in a._debugInfo){var c=ba(b);if(c){var d=c.prime_flush;d!==undefined&&(v+=d)}}v=f(v);return v},x=function(){var d=w(),e=a._totalTimeForComponent(c).time,f=b.page,g=b.request,h=b.webserver;return h+" / <b>prime_flush</b>: "+d+" / <b>"+c+"</b>: "+e+" / <b>page.py</b>: "+f+" / <b>request</b>: "+g+" "},y=function(a){J();var b=m,c=b.data,d="Component Types Listing ("+c.length+" component types) on "+document.location.href,e=x(),f=n;G(d,e,f,b,L,y,y,N,a,"Component Instances",A,D)},z={},A=function(a){B();var b=z,c=b.data,d="Component Instances Listing ("+c.length+" components) on "+document.location.href,e=x(),f=l;G(d,e,f,b,L,A,A,D,a,"Component Types",y,N)},B=function(){if(!z.computed){var b=[];for(var d in bb()){if(!h&&!j(d))continue;var e=F(d);b.push(e)}var f=a._totalTimeForComponent(c);z.data=b,z.total=f.time,z.computed=!0,L(z,"total",!1)}},C={},D=function(a){E();var b=C.count,c="Component Instances Tree ("+b+" components) on "+document.location.href,d=x(),e=l;O(c,d,e,C,S,D,A,D,a,"Component Types",y,N)},E=function(){function b(a,c){var d=F(c);d=d?d:{},a.rows.push(d);var e=i(c);if(!!e){d.rows=[];for(var f=0;f<e.length;f++){var g=e[f];b(d,g)}}}if(!C.computed){var d=C;d.rows=[],b(d,c);var e=a._totalTimeForComponent(c);C.total=e.time,C.count=R(C),C.computed=!0,S(C,"total",!1)}},F=function(b){var d=ba(b),e=a._totalTimeForComponent(b),g=d?d.py_class:undefined;b===c?g=c:_(b)&&(b=b+" (Unloaded)");var h={cid:b,type:d?g:undefined,components:e.components,total:e.time,exclusive:b===c?e.time:e.exclusive,treeIncl:d?f(d.tree_incl_time_ms):undefined,treeExcl:d?f(d.tree_excl_time_ms):undefined,initIncl:d?f(d.init_incl_time_ms):undefined,initExcl:d?f(d.init_excl_time_ms):undefined,jsInit:d?f(d.js_init_time_ms):undefined,prime:d?f(d.prime_time_ms):undefined,onLoadIncl:e.onLoadIncl,onLoadExcl:e.onLoadExcl};return h},G=function(a,b,c,d,e,f,h,i,j,k,l,m){function o(){var a=d.data,b=[];for(var e=0;e<a.length;e++){var f=a[e],h=q(e),i=["<tr class='"+h+"'>"];for(var j=0;j<c.length;j++){var k=c[j][1],l=f[k],m=typeof l==="string";if(m)i.push("<td class='text'>"),i.push("<span class='text'>");else{var o="number";k in r&&(o+=" pre_percent"),i.push("<td class='"+o+"'>")}l=g(l),i.push(l),m&&i.push("</span>"),i.push("</td>"),s(i,d,k,l)}b.push(i.join(""))}n.append(b.join("")),n.data("updateTable")()}var n=u(a,b,c,d,e,f,h,i,j,k,l,m);(!!n||!!j)&&P(n,o,j)},H=function(b,d,e){var g=ba(d),h=a._totalTimeForComponent(d),i=g?g.py_class:undefined;d===c&&(i=c);var j={name:i,num:g?1:undefined,total:h.time,exclusive:d===c?h.time:h.exclusive,treeIncl:g?f(g.tree_incl_time_ms):undefined,treeExcl:g?f(g.tree_excl_time_ms):undefined,initIncl:g?f(g.init_incl_time_ms):undefined,initExcl:g?f(g.init_excl_time_ms):undefined,jsInit:g?f(g.js_init_time_ms):undefined,prime:g?f(g.prime_time_ms):undefined,onLoadIncl:h.onLoadIncl,onLoadExcl:h.onLoadExcl,cids:[d]},k=b[i];if(k)for(var l in j){if(l==="name"||k[l]===undefined)continue;l==="cids"?k[l]=k[l].concat(j[l]):k[l]=f(k[l]+j[l])}else b[i]=j,e.push(j)},I=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=["total","exclusive","treeIncl","treeExcl","initIncl","initExcl","jsInit","prime","onLoadIncl","onLoadExcl"];for(var e=0;e<d.length;e++){var g=d[e],h=g+"Avg",i=c[g];if(i!==undefined&&c.num!==undefined){var j=f(i/c.num);c[h]=j}else c[h]=undefined}}},J=function(){if(!m.computed){var b={},d=[];for(var e in bb()){if(!h&&!j(e))continue;H(b,e,d)}var f=a._totalTimeForComponent(c);I(d),m.total=f.time,m.data=d,m.computed=!0,L(m,"total",!1)}},K=function(a,b,c){var d=typeof a[0][b]==="string";a.sort(function(a,e){var f=a[b],g=e[b];return d?f<g?c?-1:1:f===g?0:c?1:-1:(c?1:-1)*(f-g)})},L=function(a,b,c){a.sortKey=b,a.sortAsc=c;var d=a.data;K(d,b,c)},M={},N=function(a){Q();var b=M.count,c="Component Types Tree ("+b+" rows) on "+document.location.href,d=x(),e=n;O(c,d,e,M,S,N,y,N,a,"Component Instances",A,D)},O=function(a,b,c,d,e,f,h,i,j,k,l,m){function I(){var a=[];F(d.rows,0,!1,a),n.append(a.join("")),H(),n.data("updateTable")(),G()}function H(){var a=$("#0",n);for(var b=0;b<p;b++){var c=o[b];c.tr=a,c.arrow=$(".arrow",a),a=a.next()}n.before($("<a>").attr("href","#").text("Expand all").click(function(){A(!0);return!1})),n.before(" "),n.before($("<a>").attr("href","#").text("Collapse all").click(function(){A(!1);return!1}))}function G(){n.click(function(a){var b=$(a.target);if(b.hasClass("arrow")){var c=b.parents("tr"),d=parseInt(c.attr("id"));B(d,c,b)}})}function F(a,b,e,f){function i(a){o.push(a);var i=e?"display: none;":"",j="",k="";e||(E++,k=" class='"+q(E)+"'");var l="style='"+i+"'",m=["<tr id='"+p+"' "+l+" "+k+">"],n="rows"in a;a.depth=b,a.expanded=b===0,a.hasChildren=n,m.push(h(n,a[c[0][1]],a));for(var t=1;t<c.length;t++){var u=c[t][1],v=a[u],w=typeof v==="string";if(w)m.push("<td class='text'>"),m.push("<span class='text'>");else{var x="number";u in r&&(x+=" pre_percent"),m.push("<td class='"+x+"'>")}v=g(v),m.push(v),s(m,d,u,v),w&&m.push("</span>"),m.push("</td>")}m.push("</tr>"),f.push(m.join("")),p++,n&&F(a.rows,b+1,b>0,f)}function h(a,c,d){var e=["<td class='tree'>"],f="<span class='symbol'>";for(var g=0;g<b;g++)f+=t[g]?"&nbsp;":"â";t[b]?f+="â":f+="â",e.push(f);if(a){var h="<span class='arrow'>";e.push(h),e.push(v(d.expanded)),e.push("</span>")}else e.push("â");e.push("</span>"),e.push("<span class='text'> "),e.push(c),e.push("</td>");return e.join("")}t.push(!1);for(var j=0;j<a.length;j++){var k=a[j];j===a.length-1&&(t[t.length-1]=!0),i(k)}t.pop()}function D(a){a.css("display","")}function C(a){a.css("display","none")}function B(a,b,c){var d=a,e=o[d],f=e.expanded,g=e.depth;f=!f,e.expanded=f,e.index=d,w(e);var h=b.next();e=o[++d];while(h.length&&e.depth>g){if(f){D(h);if(e.hasChildren&&!e.expanded){var i=e.depth;h=h.next(),e=o[++d];while(h.length&&e.depth>i)h=h.next(),e=o[++d];continue}}else C(h);h=h.next(),e=o[++d]}x()}function A(a){function c(b){var c=b.tr;a?D(c):C(c),z(b,a)}var b=0;while(b<p)b=y(b,function(b){z(b,a)},c);x()}function z(a,b){a.expanded=b,w(a)}function y(a,b,c){var d=a,e=o[d],f=e.depth;b(e),d++;while(d<p){e=o[d];if(e.depth<=f)break;c(e),d++}return d}var n=u(a,b,c,d,e,f,h,i,j,k,l,m);if(!!n||!!j){var o=[],p=0,t=[],v=function(a){return a?"â¿":"â¹"},w=function(a){a.hasChildren&&a.arrow.text(v(a.expanded))},x=function(){var a=0;for(var b=0;b<p;b++){var c=o[b],d=c.tr;d.is(":visible")&&(d.attr("class",q(a)),a++)}},E=0;P(n,I,j)}},P=function(a,b,c){if(c)b();else{a.hide();var d=$("<div>").text("Loading, please wait ...");a.before(d),setTimeout(function(){b(),a.show(),d.remove()},10)}},Q=function(){function g(a){I(a);for(var b=0;b<a.length;b++){var c=a[b];"rows"in c&&g(c.rows)}}function b(a,d){H(a.childrenDict,d,a.rows);var e=i(d);if(!!e){var f=d===c?d:ba(d).py_class,g=a.childrenDict[f];"childrenDict"in g||(g.childrenDict={},g.rows=[]);for(var h=0;h<e.length;h++){var j=e[h];b(g,j)}}}if(!M.computed){var d={childrenDict:{},rows:[]},e=M;e.childrenDict={},e.rows=[],b(e,c);var f=a._totalTimeForComponent(c);M.total=f.time,g(M.rows),M.count=R(M),M.computed=!0,S(M,"total",!1)}},R=function(a){function b(a){var c=a.length;for(var d=0;d<a.length;d++){var e=a[d];"rows"in e&&(c+=b(e.rows))}return c}return b(a.rows)},S=function(a,b,c){function d(a){K(a,b,c);for(var e=0;e<a.length;e++){var f=a[e];"rows"in f&&d(f.rows)}}a.sortKey=b,a.sortAsc=c,d(a.rows)},T=[["Child component","childComponent"],["Class","class"],["Inclusive","inclusive"],["Exclusive","exclusive"],["Components","components"],["Tree Incl","treeIncl"],["Tree Excl","treeExcl"],["Init Incl","initIncl"],["Init Excl","initExcl"],["JsInit","jsInit"],["Prime","prime"],["OnLoad Incl","onLoadIncl"],["OnLoad Excl","onLoadExcl"]],U="border: 1px lightgray solid; padding: 1px;",V="text-align: right",W=function(b){var c=i(b),d="";if(c){var e=[];for(var f=0;f<c.length;f++){var h=c[f],j=a._totalTimeForComponent(h);e.push({cid:h,info:j})}e.sort(function(a,b){return b.info.time-a.info.time}),d=$("<table style='font-size: 0.8em; border-collapse: collapse'>");var l=$("<tr>");for(var f=0;f<T.length;f++){var m=T[f][0],n=k[T[f][1]];l.append($("<th style='"+U+"'>").attr("title",n).text(m))}d.append(l);for(var f=0;f<e.length;f++){var h=e[f].cid,j=e[f].info,o=ba(b),p=o.py_class;o.live_class&&(p+=" ("+o.live_class+")");var q=[h,p,j.time,j.exclusive,j.components,o.tree_incl_time_ms,o.tree_excl_time_ms,o.init_incl_time_ms,o.init_excl_time_ms,o.js_init_time_ms,o.prime_time_ms,j.onLoadIncl,j.onLoadExcl],r=$("<tr>");for(var s=0;s<q.length;s++){var t=q[s],u=U;typeof t==="number"&&(u+=V),r.append($("<td style='"+u+"'>").text(g(t)))}d.append(r)}}return d},X=function(){a._totalTimesCache={},z={window:z.window},C={window:C.window},m={window:m.window},M={window:M.window},Y=null},Y=null,Z=function(){Y={};var b=a._removedInfo.parents;for(var c in b){var d=b[c];Y[d]||(Y[d]=[]),Y[d].push(c)}},_=function(b){return a._removedInfo.removed[b]},ba=function(b){var c=a._debugInfo[b];if(c)return c;return a._removedInfo.debugInfo[b]},bb=function(){var b={};for(var c in a._debugInfo)b[c]=!0;for(var c in a._removedInfo.debugInfo)b[c]=!0;return b};a.ComponentInspector=a.Component.extend({init:function(){this._super.apply(this,arguments),this._lastHighlightedCID=null,this._lastNodeOver=null},_ANNOTATION_ATTR:null,_labelId:"__w2inspector_label",_turnOffLinkId:"__w2inspector_label_turn_off_link",_moreLinkId:"__w2inspector_label_more_link",_showComponentTypesId:"__w2inspector_label_show_component_types",_showComponentsId:"__w2inspector_label_show_components",onLoad:function(){a.inspector=this,$("body").append($('<div id="'+this._labelId+'" class="'+this._labelId+'"> </div>').hide()),this.$("#@page_timing").click(this.fnbind(function(a){y();return!1})),this._active=!1;var b=this.$("#@toggle").click(this.fnbind(function(a){this.toggle();return!1})),c=this.$("#@gadget_toggle").click(this.fnbind(function(a){this.gadgetOn();return!1})),d=this.fnbind(function(){this.$("#@show_component_timings").show();var a=[["show_component_types_flat",y],["show_component_types_tree",N],["show_component_instances_flat",A],["show_component_instances_tree",D]],b=this.fnbind(function(a){var b=a[0],c=a[1];this.$("#@"+b).click(function(){c();return!1})});for(var c=0;c<a.length;c++){var d=a[c];b(d)}});this._showMore=!1,this.show_link&&(b.show(),c.show(),d()),this.$("#@on_msg").show(),this._state=0,document.addEventListener&&document.addEventListener("keydown",this.fnbind(function(b){switch(this._state){case 0:this._state=1*(b.keyCode==87);break;case 1:this._state=2*(b.keyCode==50);break;case 2:this._state=3*(b.keyCode==87);break;case 3:if(this._state=4*(b.keyCode==50))this.toggle(),this._state=0;break;default:this._state=0}if(this._active)switch(b.keyCode){case 81:case 27:this.off();break;case 84:var c=this._lastHighlightedCID;c?(window.this_=a._components[c],window.this_?console.info("`this_` is now set to the JS Component for cid "+c):(window.this_=a._safeGetComponentByCID(c),console.warn("No JS Component exists for cid "+c+" so `this_` is being set to a VirtualComponent"))):console.error("Move the mouse over a Component and hit the 'T' key to set `this_` to be the JS Component for that Component"),this._lastHighlightedCID&&(window.cid_=this._lastHighlightedCID,console.log("window.cid_ now set to "+window.cid_));break;case 70:var c=this._lastHighlightedCID;$("["+this._ANNOTATION_ATTR+"="+c+"]").effect("highlight",1e3);break;case 72:a1ert("Component Inspector Help\n\nF=flash, T=this_=this, Q|[ESC]=close, H=help, M=more/less\n\nType 'w2w2' anytime to turn the Inspector on or off, or use the link at the bottom of the page.");break;case 77:this.toggleMore();break;default:}return!0}),!1),$(document).bind("webnode_before_remove_child_component_metadata",e)},addLinks:function(a){var b=[[this._turnOffLinkId,"Turn off"],[this._moreLinkId,this.getMoreLinkText()],[this._showComponentTypesId,"Component types"],[this._showComponentsId,"Component instances"]];for(var c=0;c<b.length;c++){var d=b[c][0],e=b[c][1],f=$("<a>").attr("href","#").attr("id",d).text(e).css("padding-left","10px");a.append(f)}},highlightCID:function(b,c){var d=c.target,e=$("["+this._ANNOTATION_ATTR+"="+b+"]");e.addClass("__w2inspector_highlight");var h=e.offset(),j=a._components[b],l=c.pageY-80;l<0&&(l=c.pageY+10);var m=function(a){if(a.substr(0,13)=="__w2inspector")return"";a.substr(0,5+b.length)=="__w2_"+b&&(a="@"+a.substr(6+b.length));return a},n=d.tagName,o,p;if(o=d.id)n+=" id="+m(o);if(p=d.className)if(p=$.map(p.split(/\s+/),m).join(" ").replace(/^\s+|\s+$/g,""))n+=" class="+p;var q=$("<div></div>"),r=a._debugInfo[b],s=b,u=null;r&&(u=r.inst,r.live_class?s=r.py_class+" ("+r.live_class+")":s=r.py_class,s+=" <span style='color: gray;'>"+b+"</span"),q.append($("<h2>"+s+"</h2>")),u&&q.append($("<pre style='font-size: 0.7em;'></pre>").addClass("__w2inspector_code").text(u)),this.addLinks(q);var v=$("<div><hr></hr></div>");j&&v.append($("<h4>JS init data</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(j.__data))),v.append($("<h4>Named Children</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(a._children[b]))),v.append($("<h4>All Children</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(i(b)))),v.append($("<h4>Knows About</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(a._knowsAbout[b]))),v.append($("<h4>Parent</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(a._parents[b])),this._showMore&&q.append(v);if(r){var w=a._totalTimeForComponent(b);this._showMore&&(q.append($("<h4>Total number of descendants</h4>")),q.append($("<div>").addClass("__w2inspector_small_code").text(w.components-1))),q.append($("<hr></hr>")).append($("<h4>Timing (ms)</h4>"));var x=function(){function a(a,b,c){c||(c="");var d=U;typeof b==="number"&&(d+=V),b=g(b);return"<"+a+" style='"+d+"' "+c+">"+b+"</"+a+">"}var b=["<table style='border-collapse: collapse; font-size: 0.8em'>"];b.push("<tr>"),b.push(a("th","")),b.push(a("th","Total")),b.push(a("th","Tree")),b.push(a("th","Init")),b.push(a("th","Prime")),b.push(a("th","JsInit")),b.push(a("th","OnLoad")),b.push("</tr>"),b.push("<tr>"),b.push(a("th","Incl")),b.push(a("td",w.time,"title='"+k.inclusive+"'")),b.push(a("td",r.tree_incl_time_ms,"title='"+k.treeIncl+"'")),b.push(a("td",r.init_incl_time_ms,"title='"+k.initIncl+"'")),b.push(a("td",r.prime_time_ms,"title='"+k.prime+"' rowspan='2'")),b.push(a("td",r.js_init_time_ms,"title='"+k.jsInit+"' rowspan='2'")),b.push(a("td",w.onLoadIncl,"title='"+k.onLoadIncl+"'")),b.push("</tr>"),b.push("<tr>"),b.push(a("th","Excl")),b.push(a("td",w.exclusive,"title='"+k.exclusive+"'")),b.push(a("td",r.tree_excl_time_ms,"title='"+k.treeExcl+"'")),b.push(a("td",r.init_excl_time_ms,"title='"+k.initExcl+"'")),b.push(a("td",w.onLoadExcl,"title='"+k.onLoadExcl+"'")),b.push("</tr>"),b.push("</table>"),q.append(b.join(""))},z=[["Inclusive",w.time,"inclusive"],["Exclusive",w.exclusive,"exclusive"],["Tree Incl",r.tree_incl_time_ms,"treeIncl"],["Init Incl",r.init_incl_time_ms,"initIncl"],["OnLoad Incl",w.onLoadIncl,"onLoadIncl"]],B="<span style='padding-right: 5px; padding-left: 15px; font-weight: bold; font-size: 0.8em;'>";for(var C=0;C<z.length;C++){var s=z[C][0],D=z[C][1],E=k[z[C][2]];q.append($(B+s+"</span>").attr("title",E)).append($("<span></span>").attr("title",E).text(g(D)).addClass("__w2inspector_code"))}this._showMore&&(q.append($("<br>")),q.append($("<span style='font-size: 0.8em'>").text("Mouseover values for explanations")),x());var h=r.prime;if(h&&this._showMore){var F="";for(var G in h){var H=f(h[G]);F+=G+": "+H+"ms; "}F&&q.append($("<h4>Prime functions</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(F))}if(this._showMore){var I=W(b);if(I){q.append($("<h4>").text("Children")),q.append($("<span style='font-size: 0.8em'>").text("Mouseover column headers for explanations")),q.append(I);var J=$("<a>").attr("href","#").attr("id","toggleIncludePostPageLoad");q.append(J)}}}var K=$("["+this._ANNOTATION_ATTR+"="+b+"]").length;q.append($("<hr></hr>")).append($("<h4>DOM</h4>")).append($("<div></div>").text(n).addClass("__w2inspector_code").append($("<div style='float: right;'>"+K+" tags</div>"))),$("body").append(q.css("top",-9999).css("left",-9999));var L=q.height(),M=q.width(),N=window.innerWidth,O=window.innerHeight,P=c.pageX,Q=c.pageY,R=Q+10,S=P+10,T;P+20+M>N&&(T=N-P-20,q.width(T)),L=q.height();var Y=Q-10-L;Y>=10&&(l=Y),$("#"+this._labelId).html(q.remove().html()).css("top",l).css("left",S).show(),$("#"+this._turnOffLinkId).click(this.fnbind(function(){this.off();return!1})),$("#"+this._moreLinkId).click(this.fnbind(function(){this.toggleMore();return!1})),$("#"+this._showComponentTypesId).click(this.fnbind(function(){y();return!1})),$("#"+this._showComponentsId).click(this.fnbind(function(){A();return!1}));var J=$("#toggleIncludePostPageLoad");t(J,this.fnbind(function(){X(),this.labelVisible()&&this.highlightCID(this._lastHighlightedCID,this._lastHighlightEvent)})),this._lastHighlightedCID=b,this._lastHighlightEvent=c},getMoreLinkText:function(){var a=this._showMore?"less":"more";return"Show "+a},unhighlightCID:function(a){$("["+this._ANNOTATION_ATTR+"="+a+"]").removeClass("__w2inspector_highlight")},unhighlightCIDWithTimeout:function(a){clearTimeout(this.unhighlightTimeout),this.unhighlightCallback=this.fnbind(function(){this.unhighlightCID(a),this._lastNodeOver=null}),this.unhighlightTimeout=setTimeout(this.fnbind(function(){this.unhighlightCallback(),this.unhighlightTimeout=undefined,this.unhighlightCallback=undefined,this.hideLabel()}),300)},hideLabel:function(){$("#"+this._labelId).hide()},labelVisible:function(){return $("#"+this._labelId+":visible").length>0},inLabel:function(a){var b=$("#"+this._labelId)[0];if(b)if(a===b||$(a).parents("#"+this._labelId).length>0)return!0;return!1},onMouseover:function(a){if(this.inLabel(a.target))this.unhighlightTimeout&&clearTimeout(this.unhighlightTimeout);else{var b=a.target.getAttribute(this._ANNOTATION_ATTR);b&&(this.unhighlightCallback&&(clearTimeout(this.unhighlightTimeout),this.unhighlightCallback()),this.highlightCID(b,a)),this._lastNodeOver=a.target}},onMouseout:function(a){if(this.inLabel(a.target))this.unhighlightCIDWithTimeout(this._lastHighlightedCID);else{var b=a.target.getAttribute(this._ANNOTATION_ATTR);b&&this.unhighlightCIDWithTimeout(b)}},on:function(){if(this._active){console.warn("Component Inspector already active.  Not turning on.");return!1}this._msgFlash("Component Inspector On"),$("body").bind("mouseover.w2inspector",this.fnbind(this.onMouseover)).bind("mouseout.w2inspector",this.fnbind(this.onMouseout)),this.$("#@toggle").css("background","yellow"),this.$("#@page_class").show();return this._active=!0},off:function(){if(!this._active){console.warn("Component Inspector not active.  Not turning off.");return!1}this._msgFlash("Component Inspector Off"),$("body").unbind("mouseover.w2inspector").unbind("mouseout.w2inspector").removeClass("__w2inspector_highlight"),this.unhighlightCID(this._lastHighlightedCID),this.hideLabel(),this.$("#@toggle").css("background","inherit"),this.$("#@page_class").hide();return this._active=!1},toggle:function(){return this._active?this.off():this.on()},toggleMore:function(){(this._showMore=!this._showMore)?this._msgFlash("Showing More JS Metadata about Components"):this._msgFlash("Showing Less JS Metadata about Components"),this.labelVisible()&&this.highlightCID(this._lastHighlightedCID,this._lastHighlightEvent)},_msgFlash:function(a){this.$("#@msg").html(a).fadeIn(400,this.fnbind(function(a){setTimeout(this.fnbind(function(a){this.$("#@msg").fadeOut(400)}),200)}))},gadgetOn:function(){var a=["livenode_op_start","livenode_finish_operations","webnode_add_component_metadata","webnode_remove_component_metadata","rpc_content_for_done"];if(!window.gadgetWindow||window.gadgetWindow.closed)window.gadgetWindow=window.open("/internal/gadget/index","gadgetWindow");window.gadgetWindow.focus();var b=function(b,c){var d=c,e=b;$(document).bind(a[d],e.fnbind(function(b,c){window.gadgetWindow.$(window.gadgetWindow.document).trigger(a[d],[c])}))};for(var c=0;c<a.length;c++)b(this,c)},fillPageTiming:function(){this.$("#@page_timing").html(x())}})}(),require.install("w2.inspector",function(){}),function(){var a=require("webnode2");a._InteractionModeCls=a.Component.extend({init:function(){this._super.apply(this,arguments),a.interactionMode=this,this._changedComponents={},this._cidToDomId={},this._otherInteractions={},this._states={OFF:0,PENDING:1,ON:2,BLOCKING:3}},onLoad:function(){this._state=this._states.OFF,this._lastVal=null,this._lastDOMNode=null,this.bindInteractionMode($(":input,div[contenteditable=true]")),$(document).bind("w2addcomponents",this.fnbind(function(b,c){var d=c.parents;$.each(d,this.fnbind(function(b,c){var d=(new a.VirtualComponent(b)).$("%@interaction");this.bindInteractionMode(d)}))})),this.$("#@resume").click(this.fnbind(function(a){this.resumeUpdates();return!1}))},updateStateForLastFocusedDOMElement:function(a){if(!a)return!1;if(this._state==this._states.PENDING){var b=a.getAttribute("w2cid");if(this._lastVal==this._val(a)){this._changedComponents[b]=this._states.OFF;return!1}this._changedComponents[b]=this._states.ON,this._cidToDomId[b]=this._getLiveDOMIdForElement(a);return!0}if(this._state==this._states.ON){var b=a.getAttribute("w2cid"),c=this._changedComponents[b];if(this._lastVal==this._val(a)&&c==this._states.PENDING){this._changedComponents[b]=this._states.OFF;return!1}this._changedComponents[b]=this._states.ON,this._cidToDomId[b]=this._getLiveDOMIdForElement(a);return!0}return!1},_getLiveDOMIdForElement:function(a){if(a.id)if(a.id.substr(0,3)=="ld_")return a.id;return a.parentNode?this._getLiveDOMIdForElement(a.parentNode):null},startBlocking:function(){this.showBanner(),this._setBlockingState()},_setBlockingState:function(){this._state=this._states.BLOCKING},bindInteractionMode:function(a){a.not(".ignore_interaction").bind("focus.w2interactionmode",this.fnbind(function(a){var b=a.target.getAttribute("w2cid");this._lastVal=this._val(a.target),this._lastDOMNode=a.target;if(require("w2.livenode").state.pendingMutationCount==0)if(this._state==this._states.OFF)this._changedComponents[b]=this._states.PENDING,this._state=this._states.PENDING;else{var c=this._changedComponents[b];if(!c||c==this._states.OFF)this._changedComponents[b]=this._states.PENDING}})).bind("blur.w2interactionmode",this.fnbind(function(a){var b=a.target.getAttribute("w2cid");switch(this._state){case this._states.PENDING:this.updateStateForLastFocusedDOMElement(a.target),this._lastVal==this._val(a.target)?this._state=this._states.OFF:this._state=this._states.ON;break;case this._states.ON:this.updateStateForLastFocusedDOMElement(a.target);break;case this._states.OFF:case this._states.BLOCKING:break;default:console.error("Unknown state of InteractionMode at blur time... weird")}}))},_val:function(a){var b=$(a);return b.is(":input")?b.val():b.html()},_setVal:function(a,b){var c=$(a);c.is(":input")?c.val(b):c.html(b)},showBanner:function(){return this.$("#@banner").slideDown(175)},hideBanner:function(){return this.$("#@banner").slideUp(100)},resumeUpdates:function(){this._state=this._states.OFF,this._changedComponents={},this.hideBanner();var a=require("w2.livenode"),b=a.state.interactionDelayedLivedepOperations;while(b.length>0){var c=b.shift();a.onLivedepOperations(c.data,c.textStatus,!0)}}})}(),require.install("w2.interaction",function(){}),require.install("tchannel_up",function(require,a,b){function c(a){(new Function(a)).call(window)}a.start=function(a,b,d,e){function w(b){if(b.error)throw b.error;var c=b.messages;if(!!c){a=b.min_seq;for(var d=0;d<c.length;++d)v(c[d])}}function u(a){l||(f=Math.min(f*2,3e4),f>=1e4&&g&&(p.reportPageLostConnection(),g=!1),s(f))}function t(a){g||(p.reportPageRegainedConnection(),g=!0);try{w(a)}catch(b){p.reportPageNeedsReload("tchannel_error");return}f=500,s()}function s(c){clearTimeout(h);var d={min_seq:a,channel:b};n>0&&(d.timeout=n),h=setTimeout(function(){r(d)},c||10)}function r(a){function h(a,d){return function(f){if(d){window[c]=null;try{delete window[c]}catch(g){}}e!==-1&&(clearTimeout(e),e=-1,a(f),b.parentNode&&b.parentNode.removeChild(b))}}var b=document.createElement("script"),c=a.callback="jsonp"+q(),d=h(u),e=setTimeout(d,7e4),f="onreadystatechange",g=document.body;window[c]=h(t,!0),b.charset="utf-8",b.src=(m?k:j)+$.param(a),m=!1,b.addEventListener?(b.addEventListener("load",d,!1),b.addEventListener("error",d,!1)):b.attachEvent&&b.attachEvent(f,function(){/loaded|complete/.test(b.readyState)&&d(),b.detachEvent(f,arguments.callee)}),g.insertBefore(b,g.firstChild)}function q(){return(+(new Date)).toString(16)+Math.random().toString(16).split(".").pop()}var f=500,g=!0,h,i="tch"+(Math.floor(Math.random()*1e6)+1)+".tch."+e,j="http://"+i+"/up/"+d+"/updates?",k="http://"+e+"/up/"+d+"/updates?",l=!1,m=!0,n=2e3,o=0,p=require("w2.livenode"),v=function(){function e(){setTimeout(function(){var a=+(new Date);while(d())if(new Date-a>100)return e()},10)}function d(){var b=a.next;b&&(c(b.js),delete a.next,delete b.js,a=b);return b}var a={},b=a;return function(c){b=b.next={js:c},a.next===b&&e()}}();$(window).bind("beforeunload",function(){l=!0}),$(window).bind("load",function(){setTimeout(function(){n=0},o),s(20)})}}),require.install("frame_busting",function(require,a,b){a.check=function(){if(require("settings").enableFrameBusting){var a=!1;try{window.top.location.host!==window.location.host&&(a=!0)}catch(b){a=!0}a&&(window.top.location=window.location)}}}),require.install("cookies",function(require,a,b){function d(a,b){var d={key:a,args:b},e=Math.floor(Math.random()*4294967296);c("qm-"+e,JSON.stringify(d),{expires:1})}function c(a,b,c){c=c||{},c=$.extend({expires:999999,path:"/",domain:".quora.com"},c);return $.cookie(require("settings").cookiePrefix+"-"+a,b,c)}require("jquery.cookie"),a.cookie=c,a.setMessage=d,a.setSingleUse=function(a,b,d){c("qsu-"+a,b,d)},a.setQfeedLog=function(a,b){var c=a.getDvar("feed_story_hash");if(!!c){var e=a.getDvar("feed_story_position");e==null&&(e=0);var f=a.getDvar("feed_story_initial");f||(f=!1),d("qfl",[2,c,e,f,b])}},a.setTlog=function(a){var b=require("settings").trail;b!=null&&a!=null&&d("tlog",[b,a])},a.setAnon=function(){c("anon",JSON.stringify(!0))},a.setPublic=function(){c("anon",null)}}),require.install("mixpanel",function(require,a,b){a.asyncInit=function(a){window.mpq=[],window.mpq.push(["init",a]);var b=document.createElement("script");b.async=!0,b.src="//api.mixpanel.com/site_media/js/api/mixpanel.js",document.getElementById("mp-root").appendChild(b)},a.track=function(a,b){window.mpq&&window.mpq.push(["track",a,b])}}),require.install("w2.quora",function(require,a,b){var c=require("webnode2"),d=c.Dialog.extend();a.Component=c.Component.extend({dialog:function(a){return new d(this,a)},setDvar:function(a,b){this.__dvars__==undefined&&(this.__dvars__={}),this.__dvars__[a]=b},getDvar:function(a){if(this.__dvars__!=undefined&&this.__dvars__[a]!=undefined)return this.__dvars__[a];var b=this.cid;while(b){b=c._parents[b];var d=c._components[b];if(d&&d.getDvar)return d.getDvar(a)}return null}}),a.reportClientLoadTime=function(a){var b="",d="";a.components&&a.send_client_component_time&&(b=JSON.stringify(a.components),d=a.unique_id),c.rpc("/perf/client_load_time_POST").kwargs({unique_id:d,components:b,html_load:a.preOnLoad-a.start,js_onload:a.postOnLoad-a.preOnLoad,document_ready:a.documentReady-a.postOnLoad,window_load:a.windowLoad-a.documentReady}).send(),a.components&&!a._component_inspector_enabled&&delete a.components,a._components&&!a._component_inspector_enabled&&delete a._components}}),require.install("toggle",function(require,a,b){var c=require("w2.quora").Component;a.ToggledComponent=c.extend({onLoad:function(){this._super.apply(this,arguments),this.toggleCallback||(this.toggleCallback=null);var a;this.switch_ready&&(a=this.lookup("switchable"))&&(this.toggled=!0,a.switchIfWanted())},setCallback:function(a){if(!this.toggleCallback)this.toggleCallback=a;else{var b=this.toggleCallback;this.toggleCallback=function(){b(),a()}}},setIndicator:function(a){this.toggleIndicator=a},setSpinner:function(a){this.toggleSpinner=a},toggle:function(a,b){if(!this.toggled){this.toggled=!0;if(this.toggleIndicator){var c=this.toggleIndicator;delete this.toggleIndicator,c.removeClass("hidden")}if(this.toggleSpinner){var d=this.toggleSpinner;delete this.toggleSpinner,setTimeout(function(){d.html("<img class='content_loading_spinner' src='/static/images/spinner_2a.gif' />")},150)}this.force_transition={type:"none"};var e={toggle_key:this.toggle_key};b!==undefined&&(e.toggle_state=b),this.serverCall("toggle").kwargs(e).send(),this.toggleCallback&&this.toggleCallback()}}}),a.ToggledIndicator=c.extend({onLoad:function(){this.lookup("toggled").setIndicator(this.$("#@toggle_indicator"))}}),a.ToggledSpinner=c.extend({onLoad:function(){this.lookup("toggled").setSpinner(this.$("#@toggle_spinner"))}}),a.TogglerComponent=c.extend({toggle:function(){this.toggle_link&&this.toggle_link_hide&&this.$("#@toggle_link").hide(),this.toggled.toggle(this.toggle_active,this.toggle_state)},onLoad:function(){this.toggled=this.lookup("toggled"),this.toggle_trigger==="click"&&this.toggle_link?this.$("#@toggle_link").click(this.fnbind(function(a){this.toggle();return!1})):this.toggle_trigger==="mouseover"&&this.toggle_link?this.$("#@toggle_link").mouseover(this.fnbind(function(a){this.mouseover_toggled||(this.mouseover_toggled=!0,this.toggle())})):this.toggle_trigger==="load"?this.toggle():this.toggle_trigger==="timeout"&&(this.timeout=setTimeout(this.fnbind(this.toggle),this.toggle_timeout))},onUnload:function(){this.timeout&&clearTimeout(this.timeout)}}),a.SwitchableComponent=c.extend({onLoad:function(){this._super.apply(this,arguments),this.switchCallback||(this.switchCallback=null)},setCallback:function(a){if(!this.switchCallback)this.switchCallback=a;else{var b=this.switchCallback;this.switchCallback=function(){b(),a()}}},setIndicator:function(a){this.switchIndicator=a},switchAction:function(){},switchWrapper:function(){this.switchIndicator&&(this.switchIndicator.addClass("hidden"),delete this.switchIndicator),this.switchAction(),this.switchCallback&&this.switchCallback()},switchIfReady:function(){this.switchWanted=!0,this.switchReady?this.switchWrapper():this.switchIndicator?this.switchIndicator.removeClass("hidden"):delete this.switchIndicator},switchIfWanted:function(){this.switchReady=!0,this.switchWanted&&this.switchWrapper()}}),a.SwitchIndicator=c.extend({onLoad:function(){this.lookup("switchable").setIndicator(this.$("#@switch_indicator"))}}),a.SwitchComponent=c.extend({switchAction:function(){this.switch_link&&this.switch_link_hide&&this.$("#@switch_link").hide(),this.switchable.switchIfReady()},onLoad:function(){this.switchable=this.lookup("switchable"),this.switch_trigger==="click"&&this.switch_link&&this.$("#@switch_link").click(this.fnbind(function(a){this.switchAction();return!1}))}})}),require.install("facebook",function(require,a,b){function o(a,b,c){FB.login(function(d){if(d.status=="connected"){var e=d.authResponse;!a||e.userID==a?b(e.userID,e.accessToken,e.expiresIn):c(e.userID)}},{scope:"publish_stream"})}function n(a,b,c){if(!e||!FB.getAuthResponse()){j();return!1}var d=FB.getAuthResponse().userID;d&&a?d==a?l("publish_stream")?b():o(a,b):c(d):o(a,b,c);return!1}function m(a,b){for(var c=0;c<a.length;++c)if(!b(a[c]))return!1;return!0}function l(a){return g&&g[a]==1}function k(a){FB.api("/me/permissions",function(b){b.data&&b.data.length>0?(g=b.data[0],a&&a(!0,g)):(g=null,a&&a(!1))})}function j(a){(g===null||a)&&i(function(a){a.status=="connected"&&k()})}function i(a){h(function(){FB.getLoginStatus(function(b){a(b)})})}function h(a){e?a():$(f).bind("initialized",a)}var c=require("webnode2"),d=require("w2.quora").Component,e=!1,f={},g=null;a.asyncInit=function(a){window.fbAsyncInit=function(){FB.init({appId:a,oauth:!0}),e=!!a,$(f).trigger("initialized")};var b=document.createElement("script");b.async=!0,b.src="//connect.facebook.net/en_US/all.js",document.getElementById("fb-root").appendChild(b)},a.isInitialized=function(){return e},a.onInit=h,a.getLoginStatus=i,a.getAuthResponse=function(){return e?FB.getAuthResponse():null},a.getAccessToken=function(){var b=a.getAuthResponse();return b?b.accessToken:null},a.getExpiresIn=function(){var b=a.getAuthResponse();return b?b.expiresIn:null},a.getFbUid=function(){var b=a.getAuthResponse();return b?b.userID:null},a.FacebookAccessTokenRefresher=d.extend({onLoad:function(){var a=this;i(function(b){if(b.status=="connected"){var c=b.authResponse;a.serverCall("update_access_token").kwargs({fb_uid:c.userID,access_token:c.accessToken,expires:c.expiresIn}).success(function(a){a&&require("settings").pageMode=="post_reload"&&require("prefetch").reload()}).send()}})}}),a.asyncUpdatePermissions=j,a.updatePermissions=k,a.hasPermission=l,a.requestPermissions=function(a,b){m(a.split(","),l)?b(!0):FB.login(function(c){c.status==="connected"?k(function(c,d){b(c&&m(a.split(","),l))}):b(!1)},{scope:a})},a.FacebookShare=d.extend({onLoad:function(){this.posted=!1,this.$("#@fb_share_button").click(this.fnbind(function(){this.submit()})),this.$("#@close").click(this.fnbind(function(){c.Dialog.dialogFor(this).close_();return!1})),this.child("fb_different_account").bind("hide",this.fnbind(function(){this.$("#@fb_share_button").removeClass("submit_button_disabled")})),j()},submit:function(){if(!this.$("#@fb_message").val()||this.posted)return!1;this.has_server_side_publish_stream_perms?this.publish():n(this.fb_uid,this.fnbind(this.publish),this.fnbind(this.showSwitchAccount));return!1},publish:function(a,b,d){this.posted=!0,this.serverCall("fb_publish").kwargs({message:this.$("#@fb_message").val(),fb_uid:a,access_token:b,expires_secs:d}).success(this.fnbind(function(){c.Dialog.dialogFor(this).close_()})).except(this.fnbind(function(){this.posted=!1,this.$("#@fb_form").show(),this.$("#@fb_posting").hide(),this.$("#@fb_share_button").removeClass("submit_button_disabled")})).send(),this.$("#@fb_share_button").addClass("submit_button_disabled"),this.$("#@fb_form").hide(),this.$("#@fb_posting").show()},showSwitchAccount:function(a){this.child("fb_different_account").show(),this.$("#@fb_share_button").addClass("submit_button_disabled")}}),a.FacebookConnectedToDifferentAccount=d.extend({show:function(){this.$("#@fb_logout").click(this.fnbind(function(){FB.logout(this.fnbind(function(a){this.$("#@fb_different_account").hide(),this.trigger("hide")}));return!1})),this.$("#@settings").click(this.fnbind(function(){this.trigger("hide"),this.$("#@fb_different_account").hide()})),FB.api("/me",this.fnbind(function(a){a.name&&(this.$("#@fb_unknown_login").hide(),this.$("#@fb_logged_in_name").text(a.name),this.$("#@fb_logged_in_link").show(),this.$("#@fb_logged_in_link").attr("href",a.link))})),this.$("#@fb_different_account").show()}}),a.maybePromptToPublish=n,a._disconnect=function(){FB.getLoginStatus(function(a){a.authReponse?FB.api({method:"auth.revokeAuthorization"},function(a){a?console.log("Successfully disconnected"):console.error("Disconnection failed")},console.error):console.warn("Already not connected")})},a.FacebookLikeButton=d.extend({onLoad:function(){h(this.fnbind(this.parse))},parse:function(){FB.XFBML.parse(this.$("#@fb_like")[0])}}),a.ShareSectionFacebookLikeButton=a.FacebookLikeButton.extend({onLoad:function(){h(this.fnbind(function(){this.parse(),FB.Event.subscribe("edge.create",this.fnbind(function(a){this.serverCall("record_like").kwargs({url:a}).send()}))}))}}),a.FacepilePlugin=d.extend({onLoad:function(){h(this.fnbind(this.parse))},parse:function(){FB.XFBML.parse(this.$("#@fb_facepile")[0])}});var p=!1,q=!0,r=!1,s=d.extend({init:function(a){this._super.apply(this,arguments),this.parsed=!1},onLoad:function(){var a=this,b=null;q&&(q=!1,h(function(){FB.getLoginStatus(function(b){b.authResponse&&b.authResponse.userID==a.fb_uid&&(p=!0)})}));var c=this.lookup("fblike_content");if(c)if(c.truncated){var d=c.child("expandable_qtext");if(d){var e=d.callback;d.setCallback(this.fnbind(function(){this.loadFacebookLike(),e&&e()}))}else this.logError("Facebook like button unable to find expandable_qtext")}else{var f=c.getFacebookLikeHoverArea&&c.getFacebookLikeHoverArea();f?this.loadFacebookLikeOnHover(f):this.logError("Facebook like button unable to find hover area")}else this.logError("Facebook like button unable to find fb_like_wrapper");this.$("#@fb_like_wrapper").hover(function(){a.getUpVoteButton().addClass("lil_button_active")},function(){a.getUpVoteButton().removeClass("lil_button_active")}),h(function(){FB.Event.subscribe("edge.create",function(b){b==a.like_url&&(a.sendLike(),a.getUpVoteButton().removeClass("lil_button_active"))})})},loadFacebookLike:function(){p&&!this.parsed&&(FB.XFBML.parse(this.$("#@fb_like").parent().get(0),this.fnbind(function(){this.$("#@fb_like_wrapper").addClass("like_button_active_size")})),this.parsed=!0)},loadFacebookLikeOnHover:function(a){var b=this,c=null;a.hover(function(){p&&!b.parsed&&!c&&(c=setTimeout(function(){b.loadFacebookLike(),c=null},200))},function(){c&&(clearTimeout(c),c=null)})},getUpVoteButton:function(){throw"Subclass should override this function."},sendLike:function(){throw"Subclass should override this function."},logError:function(a){r||($.serverLog(a,"ERROR"),r=!0)}});a.InvisibleAnswerFacebookLikeButton=s.extend({getUpVoteButton:function(){return this.lookup("voting_buttons").$("#@answer_vote_up_link")},sendLike:function(){this.serverCall("like_answer").kwargs({aid:this.aid}).liveMutate().send()}}),a.InvisiblePostFacebookLikeButton=s.extend({getUpVoteButton:function(){return this.lookup("upvote_button").$("#@vote")},sendLike:function(){this.serverCall("like_post").kwargs({pid:this.pid}).liveMutate().send()}}),a.FacebookFriends=d.extend({onLoad:function(){this.$("#@follow_all").click(this.fnbind(function(a){this.followAll();return!1}))},followAll:function(a){this.serverCall("follow_all").kwargs({uids:this.uids}).success(a).liveMutate().send()}});var t=a.FacebookConnectButtonBase=d.extend({onLoad:function(){this.$("#@facebook_connect_button").click(this.fnbind(function(){e&&(this.connect(),this.onClick(),this.trigger("click"));return!1}))},connect:function(){FB.login(this.fnbind(function(a){a&&a.status=="connected"?(this.trigger("fb_login",a.authResponse),this.onLogin(a.authResponse)):(this.trigger("fb_login_failed"),this.onLoginFailed())}),{scope:this.perms})},onClick:function(){},onLogin:function(a){},onLoginFailed:function(){}});a.FacebookConnectButton=t.extend({onLogin:function(a){this._onLogin(a)},_onLogin:function(a){var b=a.accessToken,c=this.serverCall("connect_facebook").kwargs({fb_access_token:a.accessToken,fb_uid:a.userID,expires:a.expiresIn}).success(this.fnbind(function(){this.trigger("fb_connected")}));this.live_mutate?c.liveMutate().send():c.send()}}),a.FacebookConnectAddToTimelineButton=a.FacebookConnectButton.extend({onLogin:function(a){k(this.fnbind(function(b,c){b&&"publish_actions"in c?this._onLogin(a):this.onLoginFailed()}))}}),a.FacebookAccountConnectedTo=d.extend({onLoad:function(){this.$("#@facebook_disconnect_button").click(this.fnbind(function(){this.serverCall("disconnect_facebook").liveMutate().send();return!1}))}}),a.FacebookOptionLink=d.extend({onLoad:function(){this.bindOptionEnable(),this.bindOptionDisable(),this.bindHideClick()},bindOptionEnable:function(){this.$("#@enable").click(this.fnbind(function(){this.serverCall("toggle_option").kwargs({enabled:!0}).liveMutate().send();return!1}))},bindOptionDisable:function(){this.$("#@disable").click(this.fnbind(function(){this.serverCall("toggle_option").kwargs({enabled:!1}).liveMutate().send();return!1}))},bindHideClick:function(){this.$("#@hide").click(this.fnbind(function(){this.serverCall("hide").liveMutate().send();return!1}))}}),a.FacebookToggleTimelineLink=d.extend({onLoad:function(){this.$("#@enable").click(this.fnbind(function(){FB.login(this.fnbind(function(a){if(a&&a.status=="connected"){var b=a.authResponse;this.trigger("fb_login",a.authResponse),k(this.fnbind(function(a,c){a&&"publish_actions"in c?this.onEnable(b):this.onLoginFailed()}))}else this.trigger("fb_login_failed"),this.onLoginFailed()}),{scope:"publish_actions"});return!1})),this.$("#@disable").click(this.fnbind(function(){this.onDisable();return!1}))},onEnable:function(a){this.serverCall("enable_timeline").kwargs({fb_access_token:a.accessToken,fb_uid:a.userID,expires:a.expiresIn}).liveMutate().send()},onDisable:function(){this.serverCall("disable_timeline").liveMutate().send()},onLoginFailed:function(){this.$("#@option").attr("checked",!1)}}),a.FacebookProfile=d.extend({onLoad:function(){h(this.fnbind(this.loadFacebookProfile))},loadFacebookProfile:function(){FB.api({method:"fql.query",query:"SELECT uid, name, pic FROM user WHERE uid = "+this.fb_uid},this.fnbind(function(a){if(a){var b=a[0];b.pic&&this.$("#@photo").attr("src",b.pic),b.name?this.$("#@name").text(b.name):this.$("#@name").html("<span style='color: gray;'>Couldn't retrieve info from Facebook; you may not be logged in to Facebook.</span>")}}))}}),a.FacebookFriendsNUX=d.extend({onLoad:function(){var a=this;a.$("#@follow_all_and_continue").click(function(b){try{a.child("fbfriends").followAll(function(){windowManager.navigateTo(a.next,!1)})}catch(c){windowManager.navigateTo(a.next,!1)}})}}),a.SignupFacebookConnectButtonBase=t.extend({onClick:function(){this.serverCall("record_signup_step").kwargs({signup_action:"signup_connect_to_facebook"}).send()},onLogin:function(a){this.serverCall("record_signup_step").kwargs({signup_action:"signup_facebook_login_to_facebook"}).send(),this._onLogin(a)},onLoginFailed:function(){this.serverCall("record_signup_step").kwargs({signup_action:"signup_facebook_connect_failed"}).send()},_onLogin:function(a){}}),a.SignupFacebookConnectButton=a.SignupFacebookConnectButtonBase.extend({_onLogin:function(a){this.queryFacebookProfile(a)},queryFacebookProfile:function(a){FB.api({method:"fql.query",query:"SELECT name, pic_big, contact_email FROM user WHERE uid = "+a.userID},this.fnbind(function(b){this.trigger("fb_connected",a,b),b&&b[0]&&this.serverCall("record_signup_step").kwargs({signup_action:"signup_facebook_connected"}).send()}))}}),a.SignupFacebookConnectButtonWithoutLoginHandler=a.SignupFacebookConnectButtonBase,a.OpengraphRoadblockMain=d.extend({onLoad:function(){var a=this;a.$("#@cancel").click(function(){a.serverCall("cancel").liveMutate().send();return!1}),a.child("fb_connect").bind("fb_connected",function(){a.serverCall("accept").liveMutate().send();return!1})}}),a.OpengraphRoadblockMainOverlay=d.extend({onLoad:function(){$(window).resize(this.fnbind(this.centerComponent)),this.centerComponent(),this.$("#@dialog").show()},centerComponent:function(){var a=Math.max(($(window).width()-this.$("#@dialog").outerWidth())/2,0),b=Math.max(($(window).height()-this.$("#@dialog").outerHeight())/2,0);this.$("#@dialog").css({position:"fixed",left:a,top:b})}})}),require.install("swfobject",function(require,a,b){var c=function(){function W(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}function V(a,b){if(!!y){var c=b?"visible":"hidden";u&&Q(a)?Q(a).style.visibility=c:U("#"+a,"visibility:"+c)}}function U(c,d,e,f){if(!z.ie||!z.mac){var g=j.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(w=null,x=null);if(!w||x!=h){var i=R("style");i.setAttribute("type","text/css"),i.setAttribute("media",h),w=g.appendChild(i),z.ie&&z.win&&typeof j.styleSheets!=a&&j.styleSheets.length>0&&(w=j.styleSheets[j.styleSheets.length-1]),x=h}z.ie&&z.win?w&&typeof w.addRule==b&&w.addRule(c,d):w&&typeof j.createTextNode!=a&&w.appendChild(j.createTextNode(c+" {"+d+"}"))}}function T(a){var b=z.pv,c=a.split(".");c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0;return b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function S(a,b,c){a.attachEvent(b,c),p[p.length]=[a,b,c]}function R(a){return j.createElement(a)}function Q(a){var b=null;try{b=j.getElementById(a)}catch(c){}return b}function P(a){var b=Q(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function O(a){var b=Q(a);b&&b.nodeName=="OBJECT"&&(z.ie&&z.win?(b.style.display="none",function(){b.readyState==4?P(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function N(a,b,c){var d=R("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function M(c,d,e){var g,h=Q(e);if(z.wk&&z.wk<312)return g;if(h){typeof c.id==a&&(c.id=e);if(z.ie&&z.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=c[j]:j.toLowerCase()=="styleclass"?i+=' class="'+c[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",o[o.length]=c.id,g=Q(c.id)}else{var m=R(b);m.setAttribute("type",f);for(var n in c)c[n]!=Object.prototype[n]&&(n.toLowerCase()=="styleclass"?m.setAttribute("class",c[n]):n.toLowerCase()!="classid"&&m.setAttribute(n,c[n]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&N(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function L(a){var c=R("div");if(z.win&&z.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&c.appendChild(e[g].cloneNode(!0))}}}return c}function K(a){if(z.ie&&z.win&&a.readyState!=4){var b=R("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(L(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(L(a),a)}function J(b,c,d,e){v=!0,s=e||null,t={success:!1,id:d};var f=Q(d);if(f){f.nodeName=="OBJECT"?(q=L(f),r=null):(q=f,r=d),b.id=g;if(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";j.title=j.title.slice(0,47)+" - Flash Player Installation";var h=z.ie&&z.win?"ActiveX":"PlugIn",k="MMredirectURL="+i.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+j.title;typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(z.ie&&z.win&&f.readyState!=4){var l=R("div");d+="SWFObjectNew",l.setAttribute("id",d),f.parentNode.insertBefore(l,f),f.style.display="none",function(){f.readyState==4?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}()}M(b,c,d)}}function I(){return!v&&T("6.0.65")&&(z.win||z.mac)&&(!z.wk||z.wk>=312)}function H(c){var d=null,e=Q(c);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function G(){var b=n.length;if(b>0)for(var c=0;c<b;c++){var d=n[c].id,e=n[c].callbackFn,f={success:!1,id:d};if(z.pv[0]>0){var g=Q(d);if(g)if(!T(n[c].swfVersion)||!!z.wk&&z.wk<312)if(n[c].expressInstall&&I()){var h={};h.data=n[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));J(h,i,d,e)}else K(g),e&&e(f);else V(d,!0),e&&(f.success=!0,f.ref=H(d),e(f))}else{V(d,!0);if(e){var m=H(d);m&&typeof m.SetVariable!=a&&(f.success=!0,f.ref=m),e(f)}}}}function F(){var c=j.getElementsByTagName("body")[0],d=R(b);d.setAttribute("type",f);var e=c.appendChild(d);if(e){var g=0;(function(){if(typeof e.GetVariable!=a){var b=e.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),z.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}c.removeChild(d),e=null,G()})()}else G()}function E(){l?F():G()}function D(b){if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof j.addEventListener!=a)j.addEventListener("load",b,!1);else if(typeof i.attachEvent!=a)S(i,"onload",b);else if(typeof i.onload=="function"){var c=i.onload;i.onload=function(){c(),b()}}else i.onload=b}function C(a){u?a():m[m.length]=a}function B(){if(!u){try{var a=j.getElementsByTagName("body")[0].appendChild(R("span"));a.parentNode.removeChild(a)}catch(b){return}u=!0;var c=m.length;for(var d=0;d<c;d++)m[d]()}}var a="undefined",b="object",d="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",f="application/x-shockwave-flash",g="SWFObjectExprInst",h="onreadystatechange",i=window,j=document,k=navigator,l=!1,m=[E],n=[],o=[],p=[],q,r,s,t,u=!1,v=!1,w,x,y=!0,z=function(){var c=typeof j.getElementById!=a&&typeof j.getElementsByTagName!=a&&typeof j.createElement!=a,g=k.userAgent.toLowerCase(),h=k.platform.toLowerCase(),m=h?/win/.test(h):/win/.test(g),n=h?/mac/.test(h):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!+"1",q=[0,0,0],r=null;if(typeof k.plugins!=a&&typeof k.plugins[d]==b)r=k.plugins[d].description,r&&(typeof k.mimeTypes==a||!k.mimeTypes[f]||!!k.mimeTypes[f].enabledPlugin)&&(l=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof i.ActiveXObject!=a)try{var s=new ActiveXObject(e);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:c,pv:q,wk:o,ie:p,win:m,mac:n}}(),A=function(){!z.w3||((typeof j.readyState!=a&&j.readyState=="complete"||typeof j.readyState==a&&(j.getElementsByTagName("body")[0]||j.body))&&B(),u||(typeof j.addEventListener!=a&&j.addEventListener("DOMContentLoaded",B,!1),z.ie&&z.win&&(j.attachEvent(h,function(){j.readyState=="complete"&&(j.detachEvent(h,arguments.callee),B())}),i==top&&function(){if(!u){try{j.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}B()}}()),z.wk&&function(){if(!u){if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}B()}}(),D(B)))}(),X=function(){z.ie&&z.win&&window.attachEvent("onunload",function(){var a=p.length;for(var b=0;b<a;b++)p[b][0].detachEvent(p[b][1],p[b][2]);var d=o.length;for(var e=0;e<d;e++)O(o[e]);for(var f in z)z[f]=null;z=null;for(var g in c)c[g]=null;c=null})}();return{registerObject:function(a,b,c,d){if(z.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,n[n.length]=e,V(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(z.w3)return H(a)},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};z.w3&&(!z.wk||z.wk>=312)&&c&&d&&e&&f&&g?(V(d,!1),C(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(T(g)){var s=M(n,p,d);n.id==d&&V(d,!0),m.success=!0,m.ref=s}else{if(h&&I()){n.data=h,J(n,p,d,l);return}V(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){y=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(a,b,c){return z.w3?M(a,b,c):undefined},showExpressInstall:function(a,b,c,d){z.w3&&I()&&J(a,b,c,d)},removeSWF:function(a){z.w3&&O(a)},createCSS:function(a,b,c,d){z.w3&&U(a,b,c,d)},addDomLoadEvent:C,addLoadEvent:D,getQueryParamValue:function(a){var b=j.location.search||j.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return W(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return W(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(v){var a=Q(g);a&&q&&(a.parentNode.replaceChild(q,a),r&&(V(r,!0),z.ie&&z.win&&(q.style.display="block")),s&&s(t)),v=!1}}}}();a.embedSWF=c.embedSWF,a.removeSWF=c.removeSWF}),require.install("login",function(require,a,b){require("jquery");var c=require("w2.quora").Component,d=require("prefetch"),e;$(document).bind("w2rpcexception-login_required.default",function(a,b){b.rpc.__liveMutation&&require("w2.livenode").mutationDoneAfterVersion(b.rpc.__liveMutationInfo.transactionId,0),e.login(function(){b.rpc.send()},function(){$(document).trigger("login_cancelled")})}),a.LiveLogin=c.extend({init:function(){this._super.apply(this,arguments),this._dialog=null,e=this},login:function(a,b){var c=this;c._dialog=c._dialog||c.dialog().title("Create an Account on Quora").cancel(b).open(function(){c._loginListener=c.$(document).bind("quora_login",function(b){c._dialog.ok_(),typeof a=="function"&&a()})}).close(function(){c._dialog=null}).load("login_signup_combo_dialog")},_logout:function(){this.serverCall("_logout").send()}}),a.LiveLoginDialog=c.extend({onLoad:function(){var a=this;a.$("#@view").click(function(){a.$("#view_live_login_dialog_login").addClass("hidden"),a.$("#live_login_dialog_login").removeClass("hidden");return!1}),a.$("#@show_login_link").click(function(){a.$("#@inline_login").removeClass("hidden"),a.$("#@show_login_link").hide();return!1}),a.$("%@tabs").click(function(b){a.select($(this).attr("show"));return!1}),this.select(this.default_tab)},select:function(a){this.$("%@contents").hide(),this.$("#@"+a).show(),this.$("%@tabs").removeClass("selected"),this.$("#@"+a+"_select").addClass("selected")}}),a.LoginButton=c.extend({onLoad:function(){this.$("#@login_link").click(function(a){d.navigateTo("/login/index?next="+escape(d.getURL()),!1);return!1})}}),a.LoginProfile=c.extend({onLoad:function(){var a=this;a.$("#@link").click(function(b){a.passwordless?a.passwordlessLoginAs():a.select();return!1}),a.$("#@container").hover(function(b){a.$("#@x_person").css("visibility",""),a.lookup("login_box").selected&&a.lookup("login_box").$(".@select_user").fadeTo("fast",1)},function(b){a.$("#@x_person").css("visibility","hidden"),a.lookup("login_box").selected&&a.lookup("login_box").$(".@select_user").fadeTo("fast",.3)}),a.$("#@x_person").click(function(b){W2.rpc("/login/x_person_POST").kwargs({uid:a.uid}).liveMutate().send()}),a.passwordless&&a.$("#@passwordless").hover(function(b){a.$("#@x").css("visibility","")},function(b){a.$("#@x").css("visibility","hidden")}).click(function(b){W2.rpc("/login/x_passwordless_POST").kwargs({uid:a.uid}).liveMutate().send();return!1})},select:function(){this.lookup("login_box").select({uid:this.uid})},passwordlessLoginAs:function(){var a=this;W2.rpc("/login/login_ajax_POST").kwargs({uid:a.uid}).success(function(b){var c=a.lookup("login_box").next||"/";d.navigateTo(c,!1)}).error(function(){a1ert("There was a problem logging you in. :(")}).send()}}),a.LoginBox=c.extend({init:function(a){this._super.apply(this,arguments),this.selected=null,this.submitting=!1},onLoad:function(){var a=this;a.$("#@email").val()&&a.select({email:a.$("#@email").val()}),a.$("#@email").bind("focus",function(b){a.deselect();return!0}).bind("blur",function(b){a.select({email:a.$("#@email").val()});return!0}),a.$("#@email_form").submit(function(b){a.$("#@email").blur();return!1})},select:function(a){var b=this,c={};b.selected=a;if(typeof a.uid=="undefined"){c={email:a.email};if(!a.email)return!1}else c={uid:a.uid};b.$("#@password_placeholder").setContentFromAJAXComponent("/login/password_input_POST",c,b.cid,null,function(){b.$("#@login_uid").val(c.uid),b.$("#@login_email").val(c.email),b.$("#@next").val(b.next)},null,function(a,d){switch(d[0][0]){case"no_uid":b.$("#@password_placeholder").setContent('<span style="color: red; font-weight: bold;">No user registered with that e-mail address.</span>');break;case"unconfirmed_email":b.$("#@password_placeholder").setContent('<span style="color: red; font-weight: bold;">You need to confirm that e-mail address before you can use it to login.  If you need, we can <a href="#" id="resend_confirmation">send another confirmation e-mail</a> to you.</span>'),b.$("#resend_confirmation").click(function(a){b.$("#@password_placeholder").setContent("Sending..."),W2.rpc("/signup/resend_confirmation_email_POST").kwargs({email:c.email}).error(function(a){b.$("#@password_placeholder").setContent("There was a problem resending the confirmation e-mail.")}).success(function(a){b.$("#@password_placeholder").setContent("Sent.")}).send();return!1});break;default:console.error("UNKNOWN ERROR: "+d[0])}}).show(),b.$(".@select_user").fadeTo("slow",.3),b.$("#@email_form_buttons").hide();return b},deselect:function(){this.selected=null,this.$("#@password_placeholder").hide(),this.$("#@email_form_buttons").show(),this.$(".@select_user").fadeTo("slow",1);return this}});var f=a.InlineLogin=c.extend({onLoad:function(){var a=this;if($.browser.msie){var b=function(b){var c=b.keyCode||b.which;c==13&&a.$("#@submit_button").click()},c=a.fnbind(b);a.$("#@password").keydown(c),a.$("#@email").keydown(c)}a.$("#@resend_confirmation").click(function(b){a.serverCall("resend_confirmation_link").kwargs({email:a._email()}).success(function(){a.hideAllErrors()}).send();return!1}),a.$("#@reset_password_link").click(function(){a.serverCall("reset_password").kwargs({email:a._email()}).success(function(){a.hideAllErrors()}).send();return!1}),a.$("#@email").blur(function(){setTimeout(function(){a.updatePreview()},10)}),a.$("#@submit_button").click(function(){a.checkPassword();return!1}),a.$("#@login_link").click(function(){a.$("#@associated").addClass("hidden"),a.$("#@alt_login_row").addClass("hidden"),a.$("#@login_form").removeClass("hidden"),a.$("#@email").focus();return!1}),$(document).ready(function(){a.updatePreview()})},updatePreview:function(){var a=this,b=a._email();a.serverCall("preview_info").kwargs({email:b}).success(function(b){if(a.customSuccessUpdatePreviewCallback)a.customSuccessUpdatePreviewCallback(b),a.$("#@submit_button").removeClass("submit_button_disabled");else{a.$(".usercard_big").fadeTo(1,1),a.$("#@preview").hide();var c=!1,d=b.name.split(" ")[0];a.$("%passwordless_users").find(".name_span:visible").each(function(a){$(this).text()!=d?$(this).parents(".usercard_big").fadeTo(1,.3):c=!0}),c||(a.$("#@associated").addClass("hidden"),a.$("#@alt_login_row").addClass("hidden"),a.$("#@login_form").removeClass("hidden"),a.$("#@password").focus(),a.$("#@name").text(b.name),a.$("#@pic").attr("src",b.photo_url),a.$("#@preview").show(),a.$("#@submit_button").removeClass("submit_button_disabled")),a.hideAllErrors()}}).except("email_not_found",function(b){a.hideAllErrors(),a.showErrorOnComponent("#@email_not_found_error","#@email"),a.$("#@preview").hide(),a.$("#@submit_button").addClass("submit_button_disabled");return!1}).except("no_email",function(b){a.hideAllErrors(),a.$("#@preview").hide(),a.$("#@submit_button").addClass("submit_button_disabled")}).except("email_unconfirmed",function(b){a.$("#@preview").hide(),a.hideAllErrors(),a.showErrorOnComponent("#@email_not_confirmed_error","#@email"),a.$("#@submit_button").addClass("submit_button_disabled")}).send()},loginKwargs:function(){var a=this.$("#@email").val(),b=this.$("#@password").val(),c=+this.$("#@allow_passwordless").is(":checked");return{email:a,password:b,passwordless:c}},loginSuccessCallback:function(a){if(this.customSuccessLoginCallback)this.customSuccessLoginCallback(a);else{var b=a;this.hideAllErrors(),(require("settings").uid==b||require("settings").pageMode=="post_reload")&&$(document).trigger("quora_login")}},checkPassword:function(){this.hideAllErrors();var a=this;a.serverCall("do_login").kwargs(a.loginKwargs()).success(a.fnbind(a.loginSuccessCallback)).except("email_not_found",function(){a.hideAllErrors(),a.showErrorOnComponent("#@email_not_found_error","#@email")}).except("incorrect_password",function(){a.hideAllErrors(),a.showErrorOnComponent("#@incorrect_password_error","#@password")}).except("email_unconfirmed",function(){a.hideAllErrors(),a.showErrorOnComponent("#@email_not_confirmed_error","#@email")}).except("banned_user",function(){a.hideAllErrors(),a.serverCall("login_user_is_banned").send()}).send()},_email:function(){return this.$("#@email").val()},hideAllErrors:function(){this.$("#@email_not_found_error").hide(),this.$("#@email_not_confirmed_error").hide(),this.$("#@incorrect_password_error").hide(),this.$("#@email_menu","#@password_menu").hide(),this.$("#@email, #@password").removeClass("input_validation_error")},showErrorOnComponent:function(a,b){this.$(a).show(),this.$(b+"_menu").show(),this.$(b).addClass("input_validation_error")}});a.FacebookReferralInlineLogin=f.extend({loginKwargs:function(){var a=this._super.apply(this,arguments),b=require("facebook");a.fb_uid=b.getFbUid(),a.fb_access_token=b.getAccessToken(),a.fb_expires=b.getExpiresIn();return a},loginSuccessCallback:function(a){var b=a[0],c=a[1];this.hideAllErrors();if(require("settings").uid==b||require("settings").pageMode=="post_reload")c?$(document).trigger("quora_login",{__pmsg__:c}):$(document).trigger("quora_login")}});var g=a.InlineLoginProfile=c.extend({loginKwargs:function(){return{}},loginSuccessCallback:function(a){require("settings").pageMode=="post_reload"&&$(document).trigger("quora_login")},onLoad:function(){var a=this;a.$("#@container").click(function(){if(require("settings").uid==a.uid){$(document).trigger("quora_login");return!1}if(a.passwordless)a.serverCall("do_login").kwargs(a.loginKwargs()).success(a.fnbind(a.loginSuccessCallback)).send();else{var b=a.lookup("inline_login");b.$("#@email").val(a.email),b.$("#@allow_passwordless").removeAttr("checked"),b.updatePreview(),b.$("#@password").focus()}return!1}),a.$("#@x_person").click(function(){a.serverCall("x_person").liveMutate().send();return!1})}});a.FacebookReferralInlineLoginProfile=g.extend({loginKwargs:function(){var a=require("facebook");return{fb_uid:a.getFbUid(),fb_access_token:a.getAccessToken(),fb_expires:a.getExpiresIn()}},loginSuccessCallback:function(a){var b=a[0],c=a[1];require("settings").pageMode=="post_reload"&&(c?$(document).trigger("quora_login",{__pmsg__:c}):$(document).trigger("quora_login"))}}),a.LoginSignal=c.extend({onLoad:function(a){if(!a){var b=this.uid,c=require("settings");c.uid==b&&$.serverLog("Strange... got a login signal for uid="+b+" but that uid was already logged in"),c.uid=b,$(document).trigger(b?"quora_login":"quora_logout")}}}),a.WidgetsLoginAndFollowInlineLogin=f.extend({clickHandlers:{email_not_found_signup_link:function(){window.open(this.parent().$("#@signup_link").attr("href")),delayedCloseWindow()}},onLoad:function(){this._super.apply(this,arguments),this.customSuccessLoginCallback=function(a){this.hideAllErrors(),a&&showFollowingButtonOnParent(),delayedCloseWindow()},this.customSuccessUpdatePreviewCallback=function(a){this.hideAllErrors()},this.installMouseHandlers(),this.$("#@email").focus()}}),a.WidgetLoginAndFollowInlineLoginProfile=g.extend({clickHandlers:{container:function(){if(this.passwordless)this.serverCall("do_login").success(this.fnbind(function(a){a&&showFollowingButtonOnParent(),delayedCloseWindow()})).send();else{var a=this.lookup("inline_login");a.$("#@login_link").click(),a.$("#@email").val(this.email),a.$("#@allow_passwordless").removeAttr("checked"),a.updatePreview(),a.$("#@password").focus()}}},onLoad:function(){this._super.apply(this,arguments),this.installMouseHandlers()}}),a.LoggedOutHomeHeaderInlineLogin=f.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@email").focus()}}),a.LoginPageLoginListener=c.extend({init:function(){this._super.apply(this,arguments),this._enabled=!0},onLoad:function(){var a=this;a.$(document).bind("quora_login.LoginPageLoginListener",function(b,c){if(a._enabled){var e=a.next,f=[],g;for(g in c)f.push(g+"="+encodeURIComponent(c[g]));f.length>0&&(e+=e.indexOf("?")==-1?"?":"&",e+=f.join("&")),d.navigateTo(e,!1)}})}})}),window.console||(window.console={log:function(){},error:function(){},warn:function(){},info:function(){}}),function(a,b){function A(){window.opener&&window.opener.showFollowingButton&&window.opener.showFollowingButton()}function z(){setTimeout(function(){window.close()},1e3)}function w(a,b){var c=!1;$.each(b,function(b,d){d.test(a)&&(c=!0)});return c}function q(a){!!window.YT&&!!window.YT.players&&$.each(window.YT.players,function(b,c){c.playerId!=a&&c.player&&$("#"+c.playerId).size()&&c.player.pauseVideo()})}function p(a,b){$.each(window.YT.players,function(c,d){d.playerId==b&&(d.state=a.data,d.state==window.YT.PlayerState.PLAYING&&d.onReady&&(d.onReady(d),d.onReady=null))}),a.data==window.YT.PlayerState.PLAYING&&q(b)}function n(a){var b=h.getHash();if(b.substr(0,1)=="#"){b=b.replace("%23","-");var c=b.substring(1).split("-");for(var d=0;d<c.length;d++)if(c[d]==a)return!0}}function m(a){var b=$(window).scrollTop();a=a.top-30,(a<b||b==0)&&$(window).scrollTop(a)}require("assert"),require("frame_busting").check();var c=require("lang/fun").bind,d=require("event").add,e=require("event").remove,f=require("webnode2"),g=require("w2.livenode"),h=require("prefetch"),i=require("cookies"),j=require("mixpanel"),k=require("toggle"),l=require("w2.quora").Component;b.ExpandableComponent=l.extend({expand:function(){this.__expansion_key__==undefined?console.error("Expansion key undefined. Did you overwrite the init() function in the JS class or js_init() in the Python class?"):this.serverCall("expand").args(this.__expansion_key__).liveMutate().send()}}),b.PrefetchURL=l.extend({onVisible:function(){this.new_url||(this.new_url=h.getDomain()+h.getRelativeURL(this.url).substring(1)),h.setCacheItem(this.new_url)},onUnload:function(){h.clearCacheItem(this.new_url)}}),b.AddQuestionLink=l.extend({onLoad:function(){this.open=!1,this.okCallback=null,this.$("#@link").click(this.fnbind(function(){this.openDialog();return!1}))},setText:function(a){this.text=a},setTid:function(a){this.tid=a},setOption:function(a,b){this.options[a]=b},addQuestion:function(a){return a.addQuestion()},cancelCallback:function(){},openCallback:function(){},setOkCallback:function(a){this.okCallback=a},closeDialog:function(){this._dialog.close_()},openDialog:function(a){this.show_quiz?this.showQuizDialog(a):this.showAddDialog(a)},showAddDialog:function(a){if(this.open)return!1;this.open=!0,this.openCallback(),this._dialog=this.dialog().title(this.title).ok(this.fnbind(function(a){this.open=!1;var b=a.dialogComponent,c=this.addQuestion(b);this.okCallback&&this.okCallback();return c}),this.button_text).cancel(this.fnbind(function(){this.open=!1,this.cancelCallback()}),"Cancel").load("dialog",{kwargs:{text:a,tid:this.tid,rel_qid:this.rel_qid,interview_uid:this.interview_uid,options:this.options}})},showQuizDialog:function(a){if(this.open)return!1;this.open=!0,a||(a=""),this._dialog=this.dialog({dialogClass:"quiz_dialog"}).title("Learn About Quora Questions Before Adding Yours").cancel(this.fnbind(function(){this.serverCall("log_aborted_quiz").kwargs({question_text:a}).send(),this.open=!1,this.cancelCallback()}),"Cancel").load("quiz_dialog",{kwargs:{text:a}})},quizFinished:function(){this.open=!1,this.cancelCallback()}}),b.AddQTextQuestionLink=AddQuestionLink.extend({init:function(){this._super.apply(this,arguments),this.default_private&&this.setOption("default_private",this.default_private)},cancelCallback:function(){this.parent().enable()},openCallback:function(){this.parent().disable()},addQuestion:function(a){if(!a.isDefaultText()&&!a.lookup("editor").isEmpty()){var b=a.serverCall("add_question").kwargs(a.getKwargs());b.success(this.fnbind(function(a){a=$.parseJSON(a),this.parent().enable(),this.parent().setValue(a.value,a),g.mutationDoneAfterVersion(b.__liveMutationInfo.transactionId,0)})).liveMutate().send()}}}),b.AddRelatedQuestionLink=AddQuestionLink.extend({openDialog:function(a){a=this.parent().$("#@input").val(),this.show_quiz?this.showQuizDialog(a):this.showAddDialog(a)}}),b.AddQuestion=l.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){this.lookup("add_question_dialog").addQuestion();return!1}))}}),b.AddQuestionDialog=l.extend({onLoad:function(){this.expanded=!1,this.disabled=!1,this.attempts=0,this.skipCheck=!1,this.add_request_pending=!1;var a=this,b=a.lookup("editor");b.whenOnLoaded(function(){a.checkSubmitStatus(),b.$("#@editor").keydown(function(){a.checkSubmitStatus()}),!a.click_expand&&a.isDefaultText()?(a.focus(),a.select()):a.tid&&a.focus()}),this.click_expand==!0&&this.setFocusCallback(this.fnbind(function(){this.expand()})),this.$("#@force_add").click(this.fnbind(function(){this.skipCheck=!0,this.addQuestion(),this.disabled=!0;return!1})),this.$("#@question_details_link").click(this.fnbind(function(){this.$("#@question_details_link").addClass("hidden"),this.$(".@question_details").toggleClass("hidden"),this.lookup("details_editor").focus();return!1})),this.$("#@fake_details_editor").click(this.fnbind(function(){this.$("#@fake_details_editor, #@details_editor").toggleClass("hidden"),this.lookup("details_editor").focus();return!1})),this.lookup("details_editor").setBlurCallback(this.fnbind(function(){if(this.lookup("details_editor").isEmpty()){this.$("#@fake_details_editor, #@details_editor").toggleClass("hidden");return!1}}))},checkSubmitStatus:function(){this.add_request_pending||this.isMissingMandatoryContext()||!this.can_afford_question||this.minLength&&this.lookup("editor").valLength()<this.minLength?($(".dialog .submit_button").addClass("submit_button_disabled"),this.disabled=!0):($(".dialog .submit_button").removeClass("submit_button_disabled"),this.disabled=!1)},isDefaultText:function(){return this.lookup("editor").html().slice(0,this.default_text.length)==this.default_text},setFocusCallback:function(a){this.lookup("editor").setFocusCallback(a)},addQuestion:function(){if(this.isMissingMandatoryContext()){this.lookup("context").addMissingContextError();return!1}if(!(this.isDefaultText()||this.lookup("editor").isEmpty()||this.disabled||this.add_request_pending)){this.add_request_pending=!0,this._data=!1,this.getFacebookCheckbox()?require("facebook").requestPermissions("publish_stream",this.fnbind(function(a){this.invokeAddQuestionServerCall()})):this.invokeAddQuestionServerCall();return this._data}},invokeAddQuestionServerCall:function(){this.serverCall("add_question").kwargs(this.getKwargs()).success(this.fnbind(function(a){this.add_request_pending=!1,this.successCallback(a)})).liveMutate().except("poor_question",this.fnbind(function(a){this.add_request_pending=!1,this.lookup("editor").focus(),this.fixQuestion(a.note),this.$("#@fixit").show()})).except("non_english_question",this.fnbind(function(a){this.add_request_pending=!1,this.lookup("editor").focus(),this.fixQuestion(a.note),this.skipCheck=!0})).except("survey_question",this.fnbind(function(a){this.add_request_pending=!1,this.lookup("editor").focus(),this.fixQuestion(a.note),this.$("#@fixit").show()})).error(this.fnbind(function(a){this.add_request_pending=!1})).disableNextPostReload().send()},fixQuestion:function(a){this.$("#@fixit").show(),this.$("#@text").html(a),this.attempts++,this.attempts>1&&this.$("#@skip").show()},successCallback:function(a){a&&a.charAt(0)=="/"&&(h.navigateTo(a,!1),g.startMutation()),f.Dialog.openerFor(this).closeDialog()},getKwargs:function(){return{question:this.getQuestionText(),question_details:this.getDetailsText(),distribution:this.getDistribution(),is_private:this.isPrivate(),interview_uid:this.interview_uid,tid:this.tid,query:this.query,rel_qid:this.rel_qid,return_json:this.return_json,topic_distribution:this.getTopicDistribution(),skip_check:this.skipCheck,context_name:this.getContextName(),facebook_checked:this.getFacebookCheckbox(),twitter_checked:this.getTwitterCheckbox(),fb_uid:require("facebook").getFbUid(),fb_access_token:require("facebook").getAccessToken(),fb_expires:require("facebook").getExpiresIn()}},getContextName:function(){return this.lookup("context").getContext()},getFacebookCheckbox:function(){if(this.lookup("publish_checkboxes",!0))return this.lookup("publish_checkboxes").shouldPublishToFacebook();return null},getTwitterCheckbox:function(){if(this.lookup("publish_checkboxes",!0))return this.lookup("publish_checkboxes").shouldPublishToTwitter();return null},isMissingMandatoryContext:function(){return!this.getContextName()&&!this.tid},getQuestionText:function(){return this.lookup("editor").serialize()},getDetailsText:function(){return this.lookup("details_editor").serialize()},getDistribution:function(){return this.lookup("distribution_menu").getValue()},isPrivate:function(){return this.getDistribution()==0?1:0},getTopicDistribution:function(){return!0},expand:function(){this.expanded||(this.$("#@editor_row").addClass("form_row"),this.$("#@form_buttons").removeClass("hidden"),this.$("#@form_option_row").removeClass("hidden"),this.$("#@details_link_row").removeClass("hidden"),this.focus(),this.expanded=!0)},clear:function(){this.lookup("editor").clear(),this.lookup("details_editor").clear(),this.$("#@question_privacy").attr("checked",!1),this.$("#@question_details_link").removeClass("hidden"),this.$(".@question_details").addClass("hidden")},select:function(){this.lookup("editor").selectAll()},focus:function(){this.lookup("editor").focus()}}),b.AddQuestionContextEditor=l.extend({onLoad:function(){this.cQuery(":context_editor").$("#@input").bind("focus",this.fnbind(function(a){this.removeMissingContextError()})),this.cQuery(":context_editor").$("#@input").bind("blur",this.fnbind(function(a){this.parent().checkSubmitStatus()}))},focusInput:function(){this.cQuery(":context_editor").focus(!0)},getContext:function(){var a=this.cQuery(":context_editor.topic_add").getTempTopicNamesAsArray();return a.length>0?a[0]:null},addMissingContextError:function(){this.cQuery(":context_editor").$("#@input").addClass("input_validation_error"),this.$("#@no_context_error").show()},removeMissingContextError:function(){this.cQuery(":context_editor").$("#@input").removeClass("input_validation_error"),this.$("#@no_context_error").hide()}}),b.AddQuestionTopicDistributionSetting=l.extend({onLoad:function(){this.$("#@no_link").click(this.fnbind(function(){return this.set(!1)})),this.$("#@yes_link").click(this.fnbind(function(){return this.set(!0)})),this.$("#@balance").tooltip({contents:"You have "+this.balance+" credits."})},set:function(a){this.disabled||(this.value=a,this.$("#@yes").toggleClass("hidden"),this.$("#@no").toggleClass("hidden"));return!1}}),b.TopicChooser=l.extend({loadDetails:function(a){this.serverCall("topic_details").kwargs({tid:a}).contentFor(this.$("#@details"),{parentCID:this.cid}).send()}}),b.FeatureContentEditor=l.extend({onLoad:function(){this.url=null,this.result=null,this.$("#@feature").click(this.fnbind(function(){var a=this.child("link_selector").result;a?this.featureFromResult(a):this.featureFromURL();return!1}))},getDesc:function(){return this.child("editor").serialize()},featureFromResult:function(a){a&&(delete a.html,delete a.value,this.serverCall("feature_item").kwargs({target:a,description:this.getDesc()}).liveMutate().send())},featureFromURL:function(){var a=this.child("link_selector").qValue;a&&this.serverCall("feature_item_from_url").kwargs({url:a,description:this.getDesc()}).liveMutate().send()}}),b.UnfeatureItemLink=l.extend({onLoad:function(){this.$("#@unfeature").click(this.fnbind(function(){this.serverCall("unfeature_item").liveMutate().send();return!1}))}}),b.DeleteFeaturedItemLink=l.extend({onLoad:function(){this.$("#@delete").click(this.fnbind(function(){this.dialog().title("Remove Content from Featured List?").cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("delete_item").liveMutate().send()}),"Remove Featured Item").html("Are you sure you want to remove this content from the previously featured list?");return!1}))}}),b.PreviouslyFeaturedListItem=l.extend({onLoad:function(){var a=this;this.$("#@item").hover(function(b){a.$("#@remove").show(),a.$("#@item .best_source_icon").hide()},function(b){a.$("#@remove").hide(),a.$("#@item .best_source_icon").show()})}}),b.FeaturedContentSection=l.extend({onLoad:function(){this.cancelHover=!1;var a=this;this.$("#@item").hover(function(b){a.cancelHover||(a.$("#@wrapper").addClass("highlight_featured_item"),a.$("#@buttons").show())},function(b){a.cancelHover||(a.$("#@wrapper").removeClass("highlight_featured_item"),a.$("#@buttons").hide())}),this.$("#@edit").click(this.fnbind(function(){this.cancelHover=!0,this.$("#@featured_item").hide(),this.$("#@editor").show(),this.$("#@done").show(),this.$("#@edit").hide(),this.cQuery(":editor.link_selector").focus();return!1})),this.$("#@done").click(this.fnbind(function(){this.cancelHover=!1,this.$("#@featured_item").show(),this.$("#@editor").hide(),this.$("#@done").hide(),this.$("#@edit").show();return!1}))}}),b.TopicChooserTopicSuggestion=l.extend({onLoad:function(){this.$("#@view").click(this.fnbind(function(){$(".topic_chooser_selected").removeClass("topic_chooser_selected"),this.$("#@view").addClass("topic_chooser_selected"),this.parent().$("#@details").show(),this.parent().loadDetails(this.tid);return!1}))}}),b.AddAnswerInFeed=l.extend({onLoad:function(){this.open=!1,this.loaded=!1,this.$("#@fake_input").click(this.fnbind(function(){this.open=!0,this.$("#@fake_input").hide(),this.$("#@ask").hide(),this.$("#@section").show(),this.cQuery(":editor_section.editor.editor").focus();return!1})),this.$("#@ask_link").click(this.fnbind(function(){this.loaded||this.serverCall("wanted_answer").contentFor(this.$("#@ask_suggestions"),{parentCID:this.cid}).success(this.fnbind(function(a){this.loaded=!0})).send(),this.open=!0,this.$("#@fake_input").hide(),this.$("#@ask_suggestions").show(),this.$("#@ask_suggestions_nub").show();return!1}));var a=this;$(document).click(function(){a.closeOnClick()}),this.$("#@wrapper").click(function(a){a.stopPropagation()})},closeOnClick:function(){this.open&&this.cQuery(":editor_section.editor.editor").isEmpty()&&(this.cQuery(":editor_section.editor.editor").blur(),this.$("#@fake_input").show(),this.$("#@section").hide(),this.$("#@ask_suggestions").hide(),this.$("#@ask_suggestions_nub").hide(),this.open=!1)},showAnswer:function(){this.$("#@section").hide(),this.$("#@answer").show()}}),b.AskToAnswerInFeed=l.extend({onLoad:function(){this.open=!1,this.loaded=!1,this.$("#@ask_link").click(this.fnbind(function(){this.loaded||this.serverCall("wanted_answer").contentFor(this.$("#@ask_suggestions"),{parentCID:this.cid}).success(this.fnbind(function(a){this.loaded=!0})).send(),this.open?this.closeOnClick():(this.open=!0,this.$("#@fake_input").hide(),this.$("#@ask_suggestions").show(),this.$("#@ask_suggestions_nub").show());return!1}));var a=this;$(document).click(function(){a.closeOnClick()}),this.$("#@wrapper").click(function(a){a.stopPropagation()})},closeOnClick:function(){this.$("#@section").hide(),this.$("#@ask_suggestions").hide(),this.$("#@ask_suggestions_nub").hide(),this.open=!1},showAnswer:function(){this.$("#@section").hide(),this.$("#@answer").show()}}),b.ComboPostBox=l.extend({onLoad:function(){this.$("#@add_question").click(this.fnbind(function(){this.$("#@post").hide(),this.$("#@question").toggle(),this.$("#@options").hide(),this.lookup("navigator").focus(!0);return!1})),this.$("#@add_post").click(this.fnbind(function(){this.$("#@question").hide(),this.$("#@post").toggle(),this.$("#@options").hide(),this.lookup("post").expand();return!1})),this.$("%@close").click(this.fnbind(function(){this.$("#@post").hide(),this.$("#@question").hide(),this.$("#@options").show();return!1}))}}),b.PagedListMoreButton=l.extend({init:function(a){this._super.apply(this,arguments),this.last_check_time=0,this.rate_limiter_ms=500,this.auto_click_enabled=!1,this.auto_click_capable=this.auto_click_period!=null&&this.auto_click_period>0},checkButtonPosition:function(a){if(!!this.auto_click_capable){if(!this.parent())return;var b=+(new Date);if(!a&&b<this.last_check_time+this.rate_limiter_ms)return;var c=this.parent().model_count;this.parent().waiting_for_updates&&(c+=this.parent().buffer_count);var d=this.shouldEnableAutoClickFromModelCount(c);this.last_check_time=b;var e=this.$("#@more");if(!e.length)return;var f=this.$("#@sentinel"),g=Math.ceil($(window).height()/4),h=!1;f.is(":in-viewport")?h=!0:$.belowthefold(f,{threshold:g})||(h=!0);if(!h)return;if(this.parent().currently_fetching||this.parent().waiting_for_updates){this.parent().showLoading(),d&&(this.parent().show_hidden_when_done_updating=!0);return}if(!d)return;this.parent().onMoreButtonClick()}},onLoad:function(){this.parent().loadMoreButton(),this.parent().setShowHiddenCallback(this.fnbind(function(){!this.auto_click_capable||!this.auto_click_enabled&&this.shouldEnableAutoClickFromModelCount(this.parent().model_count+this.parent().buffer_count)&&this.$("#@more").is(":visible")&&this.maybeHideButton()}));if(this.auto_click_capable){var a=this.fnbind(function(){setTimeout(this.fnbind(this.checkButtonPosition,!1),100)});this._mousemove_handler=d(document,"mousemove",a),this._keypress_handler=d(document,"keypress",a),this._scroll_handler=d(document,"scroll",a)}this.maybeEnableOrDisableAutoClick(),this.auto_click_enabled&&$(window).load(this.fnbind(function(){setTimeout(this.fnbind(function(){this.checkButtonPosition(!0)}),75)}))},onUnload:function(){this._mousemove_handler!=undefined&&e(document,"mousemove",this._mousemove_handler),this._keypress_handler!=undefined&&e(document,"keypress",this._keypress_handler),this._scroll_handler!=undefined&&e(document,"scroll",this._scroll_handler)},maybeShowButton:function(){this.auto_click_enabled||this.$("#@more").show()},maybeHideButton:function(){this.$("#@more").hide()},shouldEnableAutoClickFromModelCount:function(a){return a%this.auto_click_period!=0},maybeEnableOrDisableAutoClick:function(){if(!!this.auto_click_capable){var a=this.shouldEnableAutoClickFromModelCount(this.parent().model_count);a&&!this.auto_click_enabled?(this.auto_click_enabled=!0,this.parent().hideMoreButton()):!a&&this.auto_click_enabled&&(this.auto_click_enabled=!1)}}}),b.PagedList=l.extend({init:function(a){this._super.apply(this,arguments),this.model_count=a.initial_count,this.first_hidden_index=0,this.visible_count=0,this.invisible_count=0,this.total_count=0,this.initializeCounts(),this.hidden_count=0,this.currently_fetching=!1,this.waiting_for_updates=!1,this.show_hidden_when_done_updating=!1,this.showHiddenCallback=null},onMoreButtonClick:function(){var a=this.showHiddenAndMaybeGetMore();a||(this.show_hidden_when_done_updating=!0,this.showLoading());return!1},loadMoreButton:function(){this.child("more_button").$("#@more").click(this.fnbind(function(){return this.onMoreButtonClick()})),this.crawler||$(window).load(this.fnbind(function(){setTimeout(this.fnbind(function(){this.maybeGetMore()}),50)}))},initializeCounts:function(a){var b=f.getLiveDomId(this.cid);if(!!b){var c=document.getElementById(b);if(!c)return;var d=c.childNodes;for(var e=0;e<d.length;e++){var g=$(d[e]),h=g.attr("id");h&&g.hasClass("pagedlist_item")&&(this.first_hidden_index+=1,this.total_count+=1,g.hasClass("pagedlist_invisible")?this.invisible_count+=1:this.visible_count+=1)}}},setShowHiddenCallback:function(a){this.showHiddenCallback=a},showHiddenAndMaybeGetMore:function(){this.showHidden(this.buffer_count),this.showHiddenCallback&&this.showHiddenCallback();return this.maybeGetMore()},showHidden:function(a){var b=f._domids[this.cid];if(!b)reportPageNeedsReload("domid_missing "+this.cid);else{var c=0,d=0,e=document.getElementById(b),g=e.childNodes,h=!1;for(var i=0;i<g.length;i++){var j=$(g[i]);if(j.hasClass("pagedlist_item")&&j.hasClass("pagedlist_hidden")){j.hasClass("pagedlist_invisible")||(c+=1),h||(h=!0),j.removeClass("pagedlist_hidden"),g[i].style.display="block",d+=1;if(c>=a)break}}this.visible_count+=c,this.hidden_count-=c,this.first_hidden_index+=d}},hideLoading:function(){this.child("more_button").$("#@loading").hide()},showLoading:function(){this.child("more_button").$("#@loading").show()},hideMoreButton:function(){var a=this.child("more_button");a.isVirtual||a.maybeHideButton()},showMoreButton:function(){var a=this.child("more_button");a.isVirtual||a.maybeShowButton()},maybeGetMore:function(){if(this.currently_fetching||this.waiting_for_updates)return!1;this.visible_count+this.hidden_count<this.model_count||this.hidden_count>this.buffer_count/4?this.hidden_count==0&&this.hideMoreButton():this.getMore();return!0},getMore:function(){this.currently_fetching=!0,this.waiting_for_updates=!0,this.serverCall("increase_count").kwargs({cid:this.cid,num:this.buffer_count}).success(this.fnbind(function(a){this.currently_fetching=!1,!this.currently_fetching&&!this.waiting_for_updates&&(this.hideLoading(),this.show_hidden_when_done_updating&&(this.show_hidden_when_done_updating=!1,this.showHiddenAndMaybeGetMore()));return!1})).error(this.fnbind(function(a){this.currently_fetching=!1,this.hideLoading();return!1})).send();return!1},getDebugStr:function(a,b){var c="hidden_count: "+this.hidden_count;c+=" visible_count: "+this.visible_count,c+=" model_count: "+this.model_count,c+=" buffer_count: "+this.buffer_count,c+=" first hidden index: "+this.first_hidden_index,c+=" op position: "+a.position,c+=" invisible_count: "+this.invisible_count,c+=" total_count: "+this.total_count,c+=" hidden per JS?: "+b;return c},checkState:function(a){var b=f._domids[this.cid],c=document.getElementById(b),d=c.childNodes,e=0,g=0,h=0,i=0;for(var j=0;j<d.length;j++){var k=$(d[j]);k.hasClass("pagedlist_item")&&(e+=1,k.hasClass("pagedlist_hidden")?h+=1:k.hasClass("pagedlist_invisible")?i+=1:g+=1)}var l="total_count: "+this.total_count;l+=", dom_total_count: "+e,l+=" || visible_count: "+this.visible_count,l+=", dom_visible_count: "+g,l+=" || hidden_count: "+this.hidden_count,l+=", dom_hidden_count: "+h,l+=" || invisible_count: "+this.invisible_count,l+=", dom_invisible_count: "+i,l+=" || model_count: "+this.model_count,l+=" || first hidden index: "+this.first_hidden_index,(this.total_count!=e||this.visible_count!=g||this.hidden_count!=h||this.invisible_count!=i)&&$.serverLog("qfeed_check_state_fail: "+a+" "+l,"DEBUG")},onInsertNode:function(a,b){var c=this.$("#"+b);if(!!c.hasClass("pagedlist_item")){var d=c.hasClass("pagedlist_invisible");this.total_count+=1,a.position>0&&a.position>=this.first_hidden_index?(c.addClass("pagedlist_hidden"),a.transition.type="none",d||(this.hidden_count+=1,this.showMoreButton())):(c.removeClass("pagedlist_hidden"),d?this.invisible_count+=1:this.visible_count+=1,this.first_hidden_index+=1)}},onDeleteNode:function(a,b){var c=this.$("#"+b);if(!!c.hasClass("pagedlist_item")){var d=c.hasClass("pagedlist_invisible"),e=c.hasClass("pagedlist_hidden");this.total_count-=1,a.position<this.first_hidden_index?(this.first_hidden_index-=1,d?this.invisible_count-=1:this.visible_count-=1,e&&$.serverLog("qfeed_hidden_count_broken delete shown: "+this.getDebugStr(a,e),"DEBUG")):d||(this.hidden_count-=1,(this.hidden_count<0||!e)&&$.serverLog("qfeed_hidden_count_broken delete hidden: "+this.getDebugStr(a,e),"DEBUG"))}},onUpdate:function(a){var b=this.model_count;this.model_count=a.count;var c=this.child("more_button");c.isVirtual||(c.maybeEnableOrDisableAutoClick(),this.hidden_count==0?this.hideMoreButton():this.showMoreButton()),this.waiting_for_updates=!1,this.visible_count<this.buffer_count&&this.hidden_count>0&&(this.show_hidden_when_done_updating=!0);var d=!0;!this.currently_fetching&&!this.waiting_for_updates&&(this.hideLoading(),this.show_hidden_when_done_updating&&(this.show_hidden_when_done_updating=!1,this.showHiddenAndMaybeGetMore(),d=!1)),d&&this.maybeGetMore()},orderedVisibleChildren:function(){var a=f.getLiveDomId(this.cid),b=document.getElementById(a),c=b.childNodes,d=[],e;for(e=0;e<c.length;e++){var g=$(c[e]),h=g.attr("id");h&&g.hasClass("pagedlist_item")&&!g.hasClass("pagedlist_invisible")&&d.push(h)}return d}}),b.ReviewQueueItemsList=PagedList.extend({init:function(){this._super.apply(this,arguments),this.seenItems={}},onLoad:function(a){this._super.apply(this,arguments),this.setShowHiddenCallback(this.fnbind(function(){this.markItemsAsSeen()})),this.markItemsAsSeen()},markItemsAsSeen:function(){var a=[],b=this.children(),c;for(c=0;c<b.length;c++){var d=b[c],e=f._domids[d.cid];if(!e||this.seenItems[e])continue;var g=document.getElementById(e);if(!g)continue;var h=$(g);if(!h.is(":visible"))continue;d.getOid?(a.push(d.getOid()),this.seenItems[e]=!0):this.seenItems[e]=!1}a.length>0&&!this.is_owner&&this.serverCall("mark_as_seen").kwargs({queue_id:this.object_id,oids:a}).send()}}),b.ReviewQueueItem=l.extend({getOid:function(){return this.oid}}),b.TypeaheadContextText=l.extend({setDefault:function(){this.default_text&&(this.context={type:this.context_type,id:this.context_id},this.setContext(this.default_text,this.default_url))},hasContext:function(){return this.default_text?!0:!1},getWidth:function(){return this.$("#@context").outerWidth()},hide:function(){this.$("#@context").hide()},show:function(){this.$("#@context").show()},removeContext:function(){this.default_text="",this.context={},this.$("#@context").removeClass("context_content"),this.$("#@context").text("")},setContext:function(a,b){a.length>15&&(a=a.substr(0,13)+"..."),this.$("#@context").addClass("context_content"),this.$("#@context").text(a+":"),this.$("#@context").click(this.fnbind(function(){h.navigateTo(b,!1)}))}}),b.QuestionBroadcastSection=l.extend({onLoad:function(){this.$("#@ask").click(this.fnbind(function(){this.$("#@list").show(),this.$("#@instructions").hide();return!1}))}}),b.TopicEmailSettingsMenu=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"));return!1}))}}),b.DistributionMenu=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"));return!1}))}}),b.NeedsImprovementMenu=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"));return!1}))},addTopic:function(a){!a||this.serverCall("add_topic").kwargs({qid:this.qid,tid:a}).liveMutate().send()}}),b.NeedsImprovementMenuItem=l.extend({onLoad:function(){this.$("#@ni_topic").click(this.fnbind(function(){this.parent().addTopic(this.tid);return!1}))}}),b.AddDistributionMenu=l.extend({onLoad:function(){function b(b){var c=a.types[b],d="#@"+b.split("_")[0];a.$(d).click(function(){a.$("#@value").val(c),a.setCurrent($(this));return!1}),a.default_type==c&&a.setCurrent(a.$(d))}this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"),{position_relative:!0,position_adjust:-3});return!1}));var a=this;b("anon"),b("all"),b("topic_followers")},getValue:function(){if(this.$("#@value").val()>=0)return this.$("#@value").val();return null},setCurrent:function(a){this.deselectAll(),a.addClass("selected"),this.$("#@current").text(a.text())},resetValue:function(){this.$("#@value").val(this.types.all),this.setCurrent(this.$("#@all"))},deselectAll:function(){this.$("#@menu_items .selected").removeClass("selected")}}),b.AddQuestionAnonymousCheckbox=l.extend({onLoad:function(){var a=this.lookup("publish_checkboxes",!0);a&&this.$("#@checkbox").change(this.fnbind(function(){this.$("#@checkbox").attr("checked")?a.hide():a.show()}))},getValue:function(){return this.$("#@checkbox").attr("checked")?this.anon_value:this.public_value}}),b.UnreviewedItems=l.extend({onLoad:function(){this.topicsLoaded=!1},hideAll:function(){this.$("#@default").hide(),this.$("#@custom").hide()},setTopic:function(a){this.hideAll(),this.serverCall("load_custom").kwargs({topic_name:a}).contentFor(this.$("#@custom"),{parentCID:this.cid}).send(),this.$("#@custom").show()},filterToCustom:function(){this.hideAll(),this.$("#@custom").show()},showAll:function(){this.hideAll(),this.$("#@default").show()}}),b.ReviewFilterMenu=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"),{position_relative:!0,position_adjust:-3});return!1})),this.$("#@custom").click(this.fnbind(function(){this.setCurrent(this.$("#@custom")),this.$("#@selector").show(),this.lookup("selector").focus(),this.parent().parent().filterToCustom();return!1}));if(this.default_type=="all"){this.setCurrent(this.$("#@all"));return!1}if(this.default_type=="priority"){this.setCurrent(this.$("#@priority"));return!1}if(this.default_type=="topics"){this.setCurrent(this.$("#@topics")),this.$("#@topics_count").show();return!1}if(this.default_type=="admin_topics"){this.setCurrent(this.$("#@admin_topics")),this.$("#@admin_topics_count").show();return!1}if(this.default_type=="random_topics"){this.setCurrent(this.$("#@random_topics"));return!1}if(this.default_type=="extra"){this.setCurrent(this.$("#@extra")),this.$("#@extra_count").show();return!1}this.default_type=="custom"&&this.deselectAll()},setTopic:function(a){this.parent().parent().setTopic(a),this.$("#@current").text(a+" (topic)")},setCurrent:function(a){this.hideAll(),this.deselectAll(),a.addClass("selected"),this.$("#@current").text(a.text())},hideAll:function(){this.$("#@selector").hide(),this.$("#@topics_count").hide(),this.$("#@admin_topics_count").hide(),this.$("#@extra_count").hide()},resetValue:function(){this.$("#@value").val(this.types.all),this.setCurrent(this.$("#@all"))},deselectAll:function(){this.$("#@menu_items .selected").removeClass("selected")}}),b.DistributeToLink=l.extend({onLoad:function(){this.$("#@activate").click(this.fnbind(function(){this.serverCall("activate").kwargs({object_id:this.object_id,distribution:this.distribution}).liveMutate().send();return!1})),this.$("#@deactivate").click(this.fnbind(function(){this.serverCall("deactivate").kwargs({object_id:this.object_id}).liveMutate().send();return!1}))}}),b.UnsubscribeQuestionEmailsLink=l.extend({onLoad:function(){this.$("#@unsubscribe").click(this.fnbind(function(){this.serverCall("unsubscribe").kwargs({qid:this.qid}).liveMutate().send()}))}}),b.AnswerListDiv=l.extend({show:function(){this.$("#@collapsed").show()}}),b.AdminLogItemView=l.extend({onLoad:function(){this.$("#@view").click(this.fnbind(function(){this.$("#@details").toggleClass("hidden");return!1})),this.$("#@item").hover(this.fnbind(function(){this.$("#@item").addClass("hover"),this.$("#@buttons").removeClass("hidden")}),this.fnbind(function(){this.$("#@item").removeClass("hover"),this.$("#@buttons").addClass("hidden")})),this.$("#@remove").tooltip({contents:"Hide Log Item"}).click(this.fnbind(function(){this.dialog().title("Hide Log Item").cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("hide_log_item").send()}),"Hide Log Item").html("Are you sure you want to hide this log item?");return!1}))}}),b.ClaimQuestionButton=l.extend({onLoad:function(){this.$("#@claim").click(this.fnbind(function(){this.serverCall("claim").liveMutate().send();return!1})),this.$("#@unclaim").click(this.fnbind(function(){this.serverCall("unclaim").liveMutate().send();return!1}))}}),b.ReviewQuestionButton=l.extend({onLoad:function(){this.$("#@review").click(this.fnbind(function(){this.serverCall("review").liveMutate().send();return!1})),this.$("#@unreview").click(this.fnbind(function(){this.serverCall("unreview").liveMutate().send();return!1}))}}),b.ReviewTopicButton=l.extend({onLoad:function(){this.$("#@review").click(this.fnbind(function(){this.serverCall("review").liveMutate().send();return!1})),this.$("#@unreview").click(this.fnbind(function(){this.serverCall("unreview").liveMutate().send();return!1}))}}),b.TopicEmailNewQuestionsControl=l.extend({onLoad:function(){this.$("#@enable").click(this.fnbind(function(){this.serverCall("enable").liveMutate().send();return!1})),this.$("#@undo").click(this.fnbind(function(){this.serverCall("undo_enable").liveMutate().send();return!1}))}}),b.TopicAlertSettingToggle=l.extend({onLoad:function(){this.$("#@enable").click(this.fnbind(function(){this.serverCall("enable").liveMutate().send();return!1})),this.$("#@undo").click(this.fnbind(function(){this.serverCall("undo_enable").liveMutate().send();return!1}))}}),b.TopicPostsListItem=l.extend({onLoad:function(){this.$("#@item").hover(this.fnbind(function(){this.lookup("remove").show()}),this.fnbind(function(){this.lookup("remove").hide()}))}}),b.MentionItem=l.extend({onLoad:function(){this.$("#@mention").hover(this.fnbind(function(){this.lookup("remove").show()}),this.fnbind(function(){this.lookup("remove").hide()}))},hide:function(){this.$("#@mention").hide()},hideUndo:function(){this.$("#@mention_undo").hide()},show:function(){this.$("#@mention").show()},showUndo:function(){this.hide(),this.$("#@mention_undo").show(),this.serverCall("load_undo").contentFor(this.$("#@mention_undo"),{parentCID:this.cid}).send()}}),b.MentionRemoveLink=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Remove Mention"}).click(this.fnbind(function(){this.parent().showUndo(),this.serverCall("remove").liveMutate().send();return!1}))},hide:function(){this.$("#@button").hide()},show:function(){this.$("#@button").show()}}),b.UndoMentionRemoveLink=l.extend({onLoad:function(){this.$("#@undo").click(this.fnbind(function(a){this.parent().parent().show(),this.serverCall("undo").liveMutate().success(this.fnbind(function(){this.parent().parent().hideUndo()})).send();return!1}))}}),b.TopTopicAnswerer=l.extend({onLoad:function(){this.$("#@answerer").hover(this.fnbind(function(){this.lookup("remove").show()}),this.fnbind(function(){this.lookup("remove").hide()}))}}),b.TopTopicAnswererRemoveLink=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Remove from Top Answerers"}).click(this.fnbind(function(){this.serverCall("remove").kwargs({tid:this.tid}).liveMutate().send();return!1}))},hide:function(){this.$("#@button").hide()},show:function(){this.$("#@button").show()}}),b.PostTopicRemoveLink=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Remove Post from Topic"}).click(this.fnbind(function(){this.serverCall("remove").liveMutate().send();return!1}))},hide:function(){this.$("#@button").hide()},show:function(){this.$("#@button").show()}}),b.LiftPostButton=l.extend({onLoad:function(){this.$("#@lift").click(this.fnbind(function(){this.serverCall("lift").kwargs({pid:this.pid,tid:this.tid}).liveMutate().send();return!1})),this.lift_tt&&this.$("#@lift").tooltip({contents:this.lift_tt}),this.$("#@unlift").click(this.fnbind(function(){this.serverCall("unlift").kwargs({pid:this.pid,tid:this.tid}).liveMutate().send();return!1})),this.unlift_tt&&this.$("#@unlift").tooltip({contents:this.unlift_tt})}}),b.TopTopicAnswererUndoRemoveLink=l.extend({onLoad:function(){this.$("#@undo_remove").click(this.fnbind(function(){this.serverCall("undo_remove").kwargs({tid:this.tid}).liveMutate().send();return!1}))}}),b.OrderItemButtons=l.extend({onLoad:function(){this.$("#@up").click(this.fnbind(function(){this.serverCall("move_up").liveMutate().send();return!1})),this.$("#@down").click(this.fnbind(function(){this.serverCall("move_down").liveMutate().send();return!1}))}}),b.AddTopicChildren=l.extend({onLoad:function(){this.$("#@existing_link").click(this.fnbind(function(){this.$("#@existing_link").addClass("hidden"),this.$("#@existing").removeClass("hidden"),this.lookup("selector").focus();return!1}))}}),b.OrganizeChildItem=l.extend({toggleInstruction:function(){this.$("#@instruction").toggleClass("hidden")}}),b.EditTopicShortName=l.extend({onLoad:function(){this.$("#@edit_link").click(this.fnbind(function(){this.parent().toggleInstruction(),this.$("#@edit").addClass("hidden"),this.$("#@editor").removeClass("hidden"),this.$("#@input").focus();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.parent().toggleInstruction(),this.$("#@edit").removeClass("hidden"),this.$("#@editor").addClass("hidden");return!1})),this.$("#@update").click(this.fnbind(function(){this.parent().toggleInstruction(),this.serverCall("edit_short_name").kwargs({short_name:this.$("#@input").val()}).liveMutate().send();return!1}))}}),b.AddTopicSectionItem=l.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){this.$("#@instruction").addClass("hidden"),this.$("#@create").removeClass("hidden"),this.lookup("selector").focus();return!1}))}}),b.TopicsEditor=l.extend({onLoad:function(){this.$("#@done").click(this.fnbind(function(){this.toggleClasses();return!1}))},focusSelector:function(){this.cQuery(":topic_list.selector_wrapper.selector").focus(!0)},toggleClasses:function(){this.$("#@selector").toggleClass("hidden"),this.$("#@view_topics").toggleClass("hidden"),this.$("#@editor_button").toggleClass("hidden"),this.$("#@edit_topics").toggleClass("hidden"),this.$("#@edit").toggleClass("hidden"),this.$("#@edit_link").toggleClass("hidden"),this.$("#@done").toggleClass("hidden")}}),b.TopicEditorButton=l.extend({onLoad:function(){this.$("#@edit").click(this.fnbind(function(){this.parent().toggleClasses(),this.parent().focusSelector();return!1})),this.$("#@add").click(this.fnbind(function(){this.parent().toggleClasses(),this.parent().focusSelector();return!1}))}}),b.SettingsOption=l.extend({onLoad:function(){this.$("#@view_option_link").click(this.fnbind(function(){this.expandOption();return!1}))},expandOption:function(){this.$("#@view_option").toggleClass("hidden"),this.$("#@option_content").toggleClass("hidden")}}),b.ChangePasswordOption=SettingsOption.extend({onLoad:function(){this._super.apply(this,arguments),this.clear_passwords=function(){this.$("#@old_password").val(""),this.$("#@new_password").val(""),this.$("#@confirm_password").val("")},this.$("#@view_option_link").click(this.fnbind(function(){this.$("#@old_password").focus();return!1})),this.$("#@change_password_submit").click(this.fnbind(function(){f.rpc("/settings/change_password_POST").kwargs({old_password:this.$("#@old_password").val(),new_password:this.$("#@new_password").val()}).success(this.fnbind(function(a){this.clear_passwords(),a[0]?(this.$("#@old_password_no_match").addClass("hidden"),this.$("#@password_changed").removeClass("hidden")):(this.$("#@old_password_no_match").text(a[1]).removeClass("hidden"),this.$("#@password_changed").addClass("hidden"))})).error(this.fnbind(function(a){})).send();return!1}))}}),b.DeactivateAccountOption=SettingsOption.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@deactivate_account_submit").click(this.fnbind(function(){this.openDialog();return!1}))},openDialog:function(){this._dialog=this.dialog().title("Confirm Account Deactivation").ok(this.fnbind(function(){this.serverCall("deactivate_account").success(this.fnbind(function(){h.navigateTo("/login?__pmsg__=deactivate_account",!1)})).send()}),"Deactivate").cancel(null,"Cancel").html("Are you sure you want to deactivate your account?")}}),b.AdultSettingsOptionToggle=l.extend({onLoad:function(){this.$("#@no_adult_content").click(this.fnbind(function(){this.serverCall("no_adult_content").liveMutate().send();return!1})),this.$("#@allow_adult_content").click(this.fnbind(function(){this.serverCall("allow_adult_content").liveMutate().send();return!1}))}}),b.FeatureSettingsOptionToggle=l.extend({onLoad:function(){this.$("#@disable").click(this.fnbind(function(){this.serverCall("disable").liveMutate().send();return!1})),this.$("#@enable").click(this.fnbind(function(){this.serverCall("enable").liveMutate().send();return!1}))}}),b.ReviewerAdminOptionToggle=l.extend({onLoad:function(){this.$("#@hide_reviewer_controls").click(this.fnbind(function(){this.serverCall("hide_reviewer_controls").liveMutate().send();return!1})),this.$("#@show_reviewer_controls").click(this.fnbind(function(){this.serverCall("show_reviewer_controls").liveMutate().send();return!1}))}}),b.PersonalSearchSettingsOptionToggle=l.extend({onLoad:function(){this.$("#@public_link").click(this.fnbind(function(){this.toggle(),this.serverCall("public").liveMutate().send();return!1})),this.$("#@no_crawl_link").click(this.fnbind(function(){this.toggle(),this.serverCall("no_crawl").liveMutate().send();return!1}))},toggle:function(){this.$("#@public").toggleClass("hidden"),this.$("#@no_crawl").toggleClass("hidden")}}),b.AnswerAddInstructions=l.extend({onLoad:function(){this.$("#@view_deleted_answer").click(this.fnbind(function(){this.$("#@deleted_answer").toggleClass("hidden");return!1}))}}),b.AgreeToTermsMain=l.extend({onLoad:function(){this.$("#@agree").click(this.fnbind(function(){this.$("#@agree").attr("checked")==!0?(this.$("#@continue").removeClass("hidden"),this.$("#@note").addClass("hidden")):(this.$("#@continue").addClass("hidden"),this.$("#@note").removeClass("hidden"))})),this.$("#@continue").click(this.fnbind(function(){this.serverCall("agree").liveMutate().kwargs({agree:this.$("#@agree").attr("checked")}).success(this.fnbind(function(a){h.navigateTo("/",!1)})).send();return!1}))}}),b.ChallengesIndex=l.extend({onLoad:function(a){this.origPos=this.$("#@outer").offset().top,this.installScrollHandlers(this.setPosition)},onUnload:function(){this.uninstallScrollHandlers()},setPosition:function(){var a=$(window).scrollTop();this.$("#@pinnable").addClass("component_fixed");if(a>this.origPos)this.$("#@pinnable").css("top","0px");else{var b=this.origPos-a;this.$("#@pinnable").css("top",b+"px")}}}),b.EmptyAnswerHeaderDialogContents=l.extend({onLoad:function(){this.allowInvites=!0,this.lookup("selector").focus()},setTo:function(a){f.Dialog.openerFor(this).email=a,f.Dialog.openerFor(this).msg=this.$("#@msg_contents").val()}}),b.EmptyAnswerHeader=l.extend({onLoad:function(){this.$("#@invite_to_answer").click(this.fnbind(function(){this.openDialog();return!1})),this.$("#@ask_to_answer").click(this.fnbind(function(){this.cQuery(":answer_area.answer_add").showAskToAnswer();return!1}))},setTo:function(a){this.email=a,this.openDialog()},openDialog:function(){this._dialog=this.dialog().title("Invite Someone Who Can Answer This Question").ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.lookup("selector").$("#@input").val(),c=a.$("#@msg_contents").val();b&&c&&this.serverCall("invite_users").kwargs({invite_email:b,msg:c}).liveMutate().success(this.fnbind(function(){this.allowInvites=!0})).send()}),"Send Invite").cancel(null,"Cancel").load("invite_to_answer_dialog_contents",{kwargs:{email:this.email}})}}),b.MultiPeopleSelector=l.extend({onLoad:function(){this.successCallback=null,this.submitted=!1,this.$("#@submit").click(this.fnbind(function(){this.request();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.reset();return!1})),this.$("#@menu_link").click(this.fnbind(function(a){this.$("#@menu_items").menu(this.$("#@menu_link"));return!1})),this.$("#@counter").click(this.fnbind(function(){this.$("#@counter").hasClass("active")?this.showAll():this.filterToSelected();return!1})),this.$("#@filter_select_all").click(this.fnbind(function(){this.filterSelectAll();return!1})),this.$("#@filter_remove").click(this.fnbind(function(){this.showAll();return!1}))},request:function(){var a=[];$.each(this.$("#@people_list .selected input"),function(b){$(this).val()&&a.push($(this).val())});if(this.submitted||a.length<=0)return!1;this.submitted=!0,this.serverCall("mps_submit_controller").liveMutate().kwargs({uids:a}).success(this.fnbind(function(a){this.successCallback&&this.successCallback(a),this.reset()})).send()},clearCounter:function(){this.$("#@counter").text(""),this.$("#@counter").removeClass("active"),this.$("#@counter").addClass("hidden")},decrementCounter:function(){this.updateCounter()},incrementCounter:function(){this.updateCounter()},updateCounter:function(){var a=0;$.each(this.$("#@people_list .selected"),function(b){a++}),a>0?(this.$("#@counter").removeClass("hidden"),this.$("#@counter").text(a+" Selected")):(this.clearCounter(),this.showAll())},showAll:function(){this.$("#@filter_note").addClass("hidden"),this.$("#@menu_link").removeClass("active"),this.$("#@counter").removeClass("active"),this.$("#@people_list .visible").removeClass("visible"),this.$("#@people_list").removeClass("hide_all"),this.$("#@people_list").removeClass("filter_to_selected")},hideAll:function(){this.$("#@people_list").addClass("hide_all")},filterToSelected:function(){this.showAll(),this.$("#@counter").addClass("active"),this.$("#@people_list").addClass("filter_to_selected")},filterToGroup:function(a,b){this.showAll(),this.hideAll(),this.$("#@filter_note").removeClass("hidden"),this.$("#@filter_topic").text(b),this.$("%"+a).addClass("visible"),this.$("#@menu_link").addClass("active")},filterSelectAll:function(a){this.$("#@people_list .visible").addClass("selected"),this.updateCounter()},reset:function(){this.$("#@people_list .selected").removeClass("selected"),this.clearCounter(),this.showAll()},setSuccessCallback:function(a){this.successCallback=a}}),b.MPSPerson=l.extend({onLoad:function(){this.$("#@person").hover(this.fnbind(function(){this.$("#@person").addClass("hover")}),this.fnbind(function(){this.$("#@person").removeClass("hover")})),this.$("#@person").click(this.fnbind(function(){this.$("#@person").toggleClass("selected"),this.lookup("mps").updateCounter();return!1}))}}),b.MPSFilterItem=l.extend({onLoad:function(){this.$("#@item").click(this.fnbind(function(){this.parent().filterToGroup(this.group,this.text);return!1}))}}),b.HoverMenu=l.extend({onLoad:function(){this.on=this.on||500,this.off=this.off||350,this.st=null,this.ht=null,this.loaded=this.loaded||!1,this.loading=!1,this.cancelHover=!1,this.$("a#@link").click(this.fnbind(function(){this.cancelHover=!0,this.doHide()})),this.show_menu&&(this.$("#@link").hover(this.fnbind(function(){this.show()}),this.fnbind(function(){this.hide(),this.cancelHover=!1})),this.$("#@menu").hover(this.fnbind(function(){this.show()}),this.fnbind(function(){this.hide()})),this.setPosition())},setPosition:function(){var a=this.$("#@link").outerHeight(),b=this.$("#@link").position();this.show_on_profile_photo?this.$("#@menu").css("top",b.top+58+"px"):this.show_on_top?this.$("#@menu").css("bottom",b.top+30+"px"):this.$("#@menu").css("top",b.top+a+1+"px");var c=$(window).width(),d=this.$("#@menu").outerWidth(),e=this.$("#@link").offset(),f=d+e.left,g=b.left;if(c<f){var h=f-c;this.alignment=="left"&&(g-=h+10),this.$("#@menu .hover_menu_nub").css("backgroundPosition",h+20+"px top")}else this.$("#@menu .hover_menu_nub").css("backgroundPosition","10px top");if(this.alignment=="right"){var i=this.$("#@link").outerWidth();this.$("#@menu").css("left",g-d+i+"px")}else this.$("#@menu").css("left",g+"px")},hide:function(){clearTimeout(this.st);var a=this.fnbind(function(){this.doHide()});this.ht=setTimeout(a,this.off)},doHide:function(){this.$("#@menu").addClass("hidden")},getKwargs:function(){if(this.kwargs)return this.kwargs;return{}},okToShowHoverMenu:function(){return!0},show:function(){if(this.okToShowHoverMenu()){clearTimeout(this.ht);var a=this.fnbind(function(){this.doShow()});this.st=setTimeout(a,this.on),this.setPosition(),!this.loaded&&!this.loading&&(this.loading=!0,this.serverCall("load_menu").kwargs(this.getKwargs()).contentFor(this.$("#@menu_contents"),{parentCID:this.cid}).success(this.fnbind(function(a){this.loaded=!0,this.loading=!1})).except(this.fnbind(function(a){this.loading=!1})).send())}},doShow:function(){this.cancelHover||this.$("#@menu").removeClass("hidden").show()}}),b.TopicParentsLink=l.extend({onLoad:function(){this.$("#@view_parent").tooltip({contents:"View Topic Parent"}).click(this.fnbind(function(){this.$("#@view_parent").removeClass("topic_parent_link"),this.$("#@parents").removeClass("hidden");return!1}))}}),b.UserTopicEndorsementsText=l.extend({onLoad:function(){this.$("#@toggle_endorsements").click(this.fnbind(function(a){this.lookup("endorsements").$("#@endorsements").toggle();return!1}))}}),b.UserTopicEndorsements=l.extend({toggle:function(){this.$("#@endorsements").toggleClass("hidden")}}),b.ApproveNameLink=l.extend({onLoad:function(){this.$("#@approve_name").click(this.fnbind(function(a){this.serverCall("approve_name").liveMutate().send();return!1}))}}),b.ApproveNameMessageButton=ApproveNameLink.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@approve_name").click(this.fnbind(function(){this._dialog=this.dialog().load("approve_name_dialog_contents");return!1}))}}),b.MuteNameLink=l.extend({onLoad:function(){this.$("#@mute_name").click(this.fnbind(function(a){this.serverCall("mute_name").liveMutate().send();return!1}))}}),b.FakeNameLink=l.extend({onLoad:function(){this.$("#@fake_name").click(this.fnbind(function(a){this.serverCall("fake_name").liveMutate().send();return!1}))}}),b.OrganizationLink=l.extend({onLoad:function(){this.$("#@organization_name").click(this.fnbind(function(a){this.serverCall("organization_name").liveMutate().send();return!1}))}}),b.AnswerSendNotificationsLink=l.extend({onLoad:function(){this.$("#@send_notifications").click(this.fnbind(function(a){this.serverCall("send_notifications").liveMutate().send();return!1}))}}),b.ReviewAnswerItem=l.extend({onLoad:function(){this.$("#@view").click(this.fnbind(function(a){this.$("#@answer").removeClass("hidden"),this.$("#@view_answer").addClass("hidden");return!1}))}}),b.AddMonitorQuestionLink=l.extend({onLoad:function(){this.$("#@add_monitor").click(this.fnbind(function(a){this.serverCall("add_monitor").liveMutate().send();return!1}))}}),b.RemoveMonitorQuestionLink=l.extend({onLoad:function(){this.$("#@remove_monitor").click(this.fnbind(function(a){this.serverCall("remove_monitor").liveMutate().send();return!1}))}}),b.RemoveAsSpamLink=l.extend({onLoad:function(){this.$("#@undo_not_helpful").click(this.fnbind(function(a){this.serverCall("undo_not_helpful").kwargs({aid:this.aid}).liveMutate().send();return!1}))}}),b.CollapseAnswerLink=l.extend({onLoad:function(){this.$("#@undo_not_collapsible").click(this.fnbind(function(a){this.serverCall("undo_not_collapsible").kwargs({aid:this.aid}).liveMutate().send();return!1})),this.$("#@make_uncollapsible").click(this.fnbind(function(a){this.serverCall("make_uncollapsible").kwargs({aid:this.aid}).liveMutate().send();return!1})),this.$("#@undo_collapse").click(this.fnbind(function(a){this.serverCall("undo_collapse").kwargs({aid:this.aid}).liveMutate().send();return!1})),this.$("#@collapse").click(this.fnbind(function(a){this.serverCall("collapse").kwargs({aid:this.aid}).liveMutate().send();return!1})),this.$("#@undo_lock").click(this.fnbind(function(a){this.serverCall("unlock").kwargs({aid:this.aid}).liveMutate().send();return!1})),this.$("#@lock_collapse").click(this.fnbind(function(a){this.serverCall("lock_collapse").kwargs({aid:this.aid}).liveMutate().send();return!1}))}}),b.SuggestedEditSaveButton=l.extend({onLoad:function(){this.$("#@accept").click(this.fnbind(function(a){this.serverCall("publish_edit").liveMutate().send();return!1}))}}),b.UserAdminMenuLink=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(a){this.$("#@menu").menu(this.$("#@menu_link"),{align_right:!0});return!1}))}}),b.ChangeTopicGroupMenu=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(a){this.$("#@menu").menu(this.$("#@menu_link"),{position_relative:!0});return!1})),this.$("#@search").click(this.fnbind(function(a){this.parent().parent().closeContext();return!1}))}}),b.AdminMode=l.extend({toggle:function(){this.serverCall("toggle").success(this.fnbind(function(){})).liveMutate().send()},onLoad:function(){this.$("#@toggle").click(this.fnbind(function(a){this.toggle();return!1})),this._state=0,this.listen&&$(document).bind("keydown",this.fnbind(function(a){switch(this._state){case 0:this._state=1*(a.keyCode==81);break;case 1:this._state=2*(a.keyCode==49);break;case 2:this._state=3*(a.keyCode==81);break;case 3:if(this._state=4*(a.keyCode==49))this.toggle(),this._state=0;break;default:this._state=0}}))}}),b.TopicMergeUnmerge=l.extend({onLoad:function(){this.$("#@show_merge").click(this.fnbind(function(){this.$("#@merge").removeClass("hidden"),this.$("#@show_merge").addClass("hidden"),this.cQuery(":standalone.selector").focus();return!1}))}}),b.TopicRelated=l.extend({onLoad:function(){this.$("#@view_all").click(this.fnbind(function(){this.$("#@all").removeClass("hidden"),this.$("#@preview").addClass("hidden");return!1}))}}),b.MobileQuestionTopics=l.extend({onLoad:function(){},toggleTopicEditor:function(){this.$("#@view_topics_list").toggleClass("hidden"),this.$("#@edit_topics_list").toggleClass("hidden")}}),b.MobileEditTopicsLink=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this.lookup("question_topics").toggleTopicEditor();return!1}))}}),b.ThreadComposeMessageBox=l.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){this.lookup("editor").request();return!1}))}}),b.TruncatePhraseList=l.extend({onLoad:function(){this.show_tooltip_on_more&&this.$("#@view_all_link").tooltip({contents:"Click to view all"}),this.$("#@view_all_link").click(this.fnbind(function(){this.$("#@view_all").addClass("hidden"),this.$("#@view_all_span").addClass("hidden"),this.$("#@all_phrases").removeClass("hidden");return!1}))}}),b.FollowAllPeopleSuggestionsButton=l.extend({onLoad:function(a){this.$("#@follow_all").click(this.fnbind(function(){this.serverCall("follow_all").success(function(){$("#suggs").addClass("hidden")}).send();return!1}))}}),b.PeopleCardRowBase=l.extend({doNotSuggestKwargs:function(){return{}},onLoad:function(a){this.$("#@person").hover(this.fnbind(function(){this.$("#@person").addClass("hover"),this.$("#@buttons").removeClass("hidden")}),this.fnbind(function(){this.$("#@person").removeClass("hover"),this.$("#@buttons").addClass("hidden")})),this.$("#@remove").tooltip({contents:"Do not suggest"}).click(this.fnbind(function(){this.serverCall("do_not_suggest").kwargs(this.doNotSuggestKwargs()).success(this.fnbind(function(){this.$("#@person").addClass("hidden")})).send();return!1}))}}),b.PeopleCardRow=b.PeopleCardRowBase.extend({doNotSuggestKwargs:function(){return this.fb_uid?{fb_uid:this.fb_uid}:{}}}),b.FacebookInviteSuggestionListItem=b.PeopleCardRowBase.extend({doNotSuggestKwargs:function(){return this.fb_uid?{fb_uid:this.fb_uid}:{}}}),b.TwitterInviteSuggestionListItem=b.PeopleCardRowBase.extend({doNotSuggestKwargs:function(){return this.tw_uid?{tw_uid:this.tw_uid}:{}}}),b.InboxThreadPreviewItem=l.extend({onLoad:function(a){this.$("#@item").click(this.fnbind(function(a){h.handleClick(unescape(this.url),a);return!1})),this.$("#@item a").each(function(){$(this).click(function(){event.which==2||event.metaKey?window.open($(this).attr("href")):h.navigateTo($(this).attr("href"));return!1})})}}),b.NewThreadMain=l.extend({onLoad:function(a){this.$("#@submit_button").click(this.fnbind(function(a){this.serverCall("send_message").kwargs({msg:this.lookup("editor").serialize()}).success(this.fnbind(function(){location.reload(!0)})).liveMutate().send()}))}}),b.DeleteContactsButton=l.extend({onLoad:function(a){this.$("#@delete").click(this.fnbind(function(){this.openDialog();return!1}))},openDialog:function(){this.dialog().title("Delete Imported Contacts").cancel(null,"Close").ok(this.fnbind(function(){this.serverCall("delete_contacts").success(this.fnbind(function(){location.reload(!0)})).send()}),"Delete Contacts").html("Are you sure you want to delete your imported contacts?")}}),b.RemoveMyEndorsementButton=l.extend({onLoad:function(){this.$("#@remove_endorsement_link").tooltip({contents:"Remove this endorsement"}).click(this.fnbind(function(){this.serverCall("remove_endorsement").liveMutate().send();return!1}))}}),b.DeletePendingQuestionLink=l.extend({onLoad:function(){this.$("#@delete").click(this.fnbind(function(a){this.openDialog();return!1}))},openDialog:function(){this.dialog().title("Delete Pending Question").ok(this.fnbind(function(){this.serverCall("delete_pending").liveMutate().send()}),"Delete").cancel(null).html("Are you sure you want to delete this question from your pending questions list?")}}),b.ApprovePendingQuestionLink=l.extend({onLoad:function(){this.$("#@approve").tooltip({contents:"Interview questions must be approved before they are visible"}).click(this.fnbind(function(a){this.serverCall("approve_pending").liveMutate().success(this.fnbind(function(a){h.navigateTo(a)})).send();return!1}))}}),b.WantedAnswerSelector=l.extend({onLoad:function(){this.lookup("selector").inputKeyup=this.fnbind(function(){this.lookup("selector").onInputChange();var a=this.lookup("selector").getValue();a.indexOf("@")>0?this.$("#@invite_button").removeClass("hidden"):this.$("#@invite_button").addClass("hidden")}),this.$("#@invite").click(this.fnbind(function(){var a=this.lookup("selector").getValue();$(".content").dialog({mobile:this.mobile,title:"Invite "+escape(a)+" to Quora",url:"/contacts/ajax_invite_dialog_GET?emails="+escape(a)+"&qid="+this.qid,id:"invite_dialog",buttons:null}),this.lookup("selector").setValue(""),this.$("#@invite_button").addClass("hidden");return!1}))},setTo:function(a){a&&a!=""&&this.serverCall("add_wanted_answer").kwargs({uid:a}).success(this.fnbind(function(b){b||(this.$("#@reason").removeClass("hidden"),this.$("#@reason").setContentFromAJAXComponent("/question/ajax_wanted_answer_pass_reason_POST",{qid:this.qid,uid:a})),this.clear()})).liveMutate().send()},clear:function(){this.lookup("selector").$("#@input").blur()}}),b.AddReviewerSelector=l.extend({setTo:function(a){a&&a!=""&&(this._dialog=this.dialog().title("Add New Reviewer?").ok(this.fnbind(function(){this.serverCall("add_reviewer").kwargs({reviewer_uid:a}).success(this.fnbind(function(){this.clear()})).liveMutate().send()}),"Add Reviewer").cancel(null,"Cancel").load("add_reviewer_dialog_contents",{kwargs:{reviewer_uid:a}}))},clear:function(){this.lookup("selector").inputBlur()}}),b.AggregatedNotificationSectionCount=l.extend({onLoad:function(){this.initState("expanded",!1),this.$("#@expand").click(this.fnbind(function(){this.state("expanded",!this.state("expanded"));return!1}))},stateHandlers:{expanded:function(a){var b=this.lookup("notif").lookup("list").$("#@notifs"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a)}}}),b.GlobalFeedLink=l.extend({onLoad:function(){this.$("#@count").tooltip({contents:this.count+" Unorganized Question"+(this.count==1?"":"s")})}}),b.QTextDiff=l.extend({onLoad:function(){this.$("#@more_link").click(this.fnbind(function(){this.$("#@diff_snip").addClass("hidden"),this.$("#@full_diff").removeClass("hidden");return!1}))}}),b.SuggestedQuestionItem=l.extend({onLoad:function(a){this.$("#@ignore_button").tooltip({contents:"Ignore this Question Suggestion"}).click(this.fnbind(function(){this.serverCall("ignore_question").liveMutate().send();return!1}))}}),b.SendSuggestions=l.extend({toggle:function(){this.$("#@suggestions").toggleClass("hidden")},show:function(){this.$("#@suggestions").removeClass("hidden")},hide:function(){this.$("#@suggestions").addClass("hidden")}}),b.InlineTabs=l.extend({onLoad:function(a){}}),b.PillTabs=l.extend({onLoad:function(a){},setTab:function(a){this.$("#@tabs .selected").removeClass("selected"),this.$("#@"+a).addClass("selected")},getTab:function(a){return this.$("#@"+a)}}),b.QtextTruncate=l.extend({init:function(){this._super.apply(this,arguments),this.callback=null},onLoad:function(a){this.$("#@more_link").click(this.fnbind(function(){this.viewMore(),this.callback&&this.callback();return!1}))},setCallback:function(a){this.callback=a},viewMore:function(){this.$("#@text_snip").addClass("hidden"),this.$("#@full_text").removeClass("hidden")}}),b.ExpandableQText=k.SwitchableComponent.extend({switchAction:function(){this.expand(),this.$("#@truncated").addClass("hidden"),this.$("#@expanded").removeClass("hidden")},expand:function(){var a=this;if(window.YT&&window.YT.players){var b=getYTPlayerStatuses(this.$("#@truncated"),function(a){$(a).parent().addClass("thumbnail").empty()});restoreYTPlayerStatuses(a.$("#@expanded"),b)}}}),b.FeedAnswerItem=l.extend({onLoad:function(a){this.$("#@answer_rating").tooltip({contents:this.tt}).mouseover(this.fnbind(function(){this.truncated&&!this.mouseover_toggled&&(this.mouseover_toggled=!0,this.child("expandable_qtext").$("#@truncated").mouseover())})).click(this.fnbind(function(){this.truncated&&this.toggleTextViews();return!1})),this.truncated&&this.child("expandable_qtext").setCallback(this.fnbind(function(){this.show()}))},getFacebookLikeHoverArea:function(){return this.$("#@answer")},toggleTextViews:function(){var a=this.child("expandable_qtext").$("#@truncated a.more_link");a.length?a.click():(this.child("expandable_qtext").switchIfReady(),this.show())},show:function(){!this.author&&this.allow_voting&&(this.$("#@answer_rating").addClass("hidden"),this.$("#@answer_voting").removeClass("hidden")),this.$("#@answer_voters").removeClass("hidden"),this.$("#@answer_actions").removeClass("hidden"),this.$("#@answer_user_sig .user_sig_source").show()}}),b.AltFeedAnswerItem=l.extend({onLoad:function(a){this.$("#@answer_rating").tooltip({contents:this.tt}).mouseover(this.fnbind(function(){this.truncated&&!this.mouseover_toggled&&(this.mouseover_toggled=!0,this.child("expandable_qtext").$("#@truncated").mouseover())})).click(this.fnbind(function(){this.truncated&&this.toggleTextViews();return!1})),this.truncated&&this.child("expandable_qtext").setCallback(this.fnbind(function(){this.show()})),this.$("#@answer").click(this.fnbind(function(){this.truncated&&this.toggleTextViews()}))},getFacebookLikeHoverArea:function(){return this.$("#@answer")},toggleTextViews:function(){var a=this.child("expandable_qtext").$("#@truncated a.more_link");a.length?a.click():(this.child("expandable_qtext").switchIfReady(),this.show())},show:function(){!this.author&&this.allow_voting&&(this.$("#@answer_rating").addClass("hidden"),this.$("#@answer_voting").removeClass("hidden")),this.$("#@answer_user_wrapper").removeClass("answer_user_inline"),this.$("#@answer_user_dash").addClass("hidden"),this.$("#@answer_voters").removeClass("hidden"),this.$("#@answer_actions").removeClass("hidden"),this.$("#@answer_user_sig .user_sig_source").show()}}),b.PostFeedItem=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"PostClickthrough")})),this.$("#@rating").tooltip({contents:this.tt}).mouseover(this.fnbind(function(){this.mouseover_toggled||(this.mouseover_toggled=!0,this.child("expandable_qtext").$("#@truncated").mouseover())})).click(this.fnbind(function(){this.serverCall("viewed").kwargs({pid:this.pid}).liveMutate().send();var a=this.child("expandable_qtext").$("#@truncated a.more_link");a.length?a.click():(this.child("expandable_qtext").switchIfReady(),this.show());return!1})),this.child("expandable_qtext").setCallback(this.fnbind(function(){this.show()}))},getFacebookLikeHoverArea:function(){return this.$("#@post").add(this.$("#@rating_buttons"))},show:function(){this.$("#@rating").addClass("hidden"),this.$("#@votes").removeClass("hidden"),this.$("#@voting").removeClass("hidden"),this.$("#@actions").removeClass("hidden")}}),b.TruncatedPostContent=l.extend({onLoad:function(a){var b=this.lookup("switchable");b&&b.setCallback(this.fnbind(function(){this.serverCall("viewed").send();return!1}))}}),b.PostExpanded=l.extend({getFacebookLikeHoverArea:function(){return this.$("#@post").add(this.$("#@post_header"))}}),b.TruncatedAnswer=l.extend({onLoad:function(a){var b=this.lookup("switchable");b&&b.setCallback(this.fnbind(function(){this.serverCall("viewed").send();return!1}))}}),b.ThreadMessage=l.extend({onLoad:function(){window.scrollBy(0,5e5),window.scrollBy(0,5e5)}}),b.QuestionBestSourceIcon=l.extend({onLoad:function(a){this.comment?this.$("#@icon").tooltip({contents:"Best Source: "+this.comment}):this.$("#@icon").tooltip({contents:"Question marked as the best source for related information."})}}),b.PostIsLiftedIcon=l.extend({onLoad:function(a){this.$("#@icon").tooltip({contents:this.comment})}}),b.NotificationsClearButton=l.extend({onLoad:function(){this.$("#@clear").click(this.fnbind(function(){this.serverCall("mark_as_seen").liveMutate().send();return!1}))}}),b.NotificationPreview=l.extend({onLoad:function(){this.$("#@details").click(this.fnbind(function(){this.$("#@notification_details").toggleClass("hidden");return!1})),this.$("#@notification").click(this.fnbind(function(){this.$("#@notification_diff").toggleClass("hidden"),this.$("#@notification, #@bullet").hide();return!1}))}}),b.FlagHasEnoughTopicsLink=l.extend({onLoad:function(){this.$("#@has_enough_topics").click(this.fnbind(function(){this.serverCall("has_enough_topics").liveMutate().send();return!1})),this.$("#@doesnot_have_enough_topics").click(this.fnbind(function(){this.serverCall("doesnot_have_enough_topics").liveMutate().send();return!1}))}}),b.RelatedQuestionsMain=l.extend({onLoad:function(){this.$(".@close_related_questions_editor_link").click(this.fnbind(function(){this.$("#@related_questions").show(),this.$("#@related_questions_editor").hide(),this.$("#@related_questions_editor").hide();return!1})),this.$("#related_questions_editor_link").click(this.fnbind(function(){this.$("#@related_questions").hide(),this.$("#@related_questions_editor").show(),this.$("#@related_questions_editor").hide(),this.$("#@related_questions_editor").fadeIn();return!1}))}}),b.RelatedQuestionsToggler=k.TogglerComponent.extend({onVisible:function(){this.serverCall("register_box_load").kwargs({experiment_id:this.experiment_id,clicktrack_id:this.clicktrack_id,qid:this.qid,qids:this.qids}).send()},toggle:function(){this._super.apply(this,arguments),this.serverCall("register_show_more").kwargs({experiment_id:this.experiment_id,clicktrack_id:this.clicktrack_id}).send()}}),b.RelatedQuestionLinkTracked=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){i.setMessage("rqc",[this.experiment_id,this.clicktrack_id,this.qid,this.rank])}))}}),b.RelatedQuestionsItemEditor=l.extend({onLoad:function(){this.$("#@remove_related_question").tooltip({contents:"Remove"}),this.$("#@remove_related_question").click(this.fnbind(function(){this.dialog().title("Remove Related Question").ok(this.fnbind(function(){this.serverCall("remove_related_question").kwargs({qid:this.qid,rel_qid:this.rel_qid}).liveMutate().send()})).cancel(null).html("Remove this question from the related questions list?");return!1}))}}),b.NextLinkOrButton=l.extend({onLoad:function(){this.$("#@next_button").click(this.fnbind(function(){i.setMessage("nux",[this.click_track_event,{completed:this.completed}])}))}}),b.NuxAddProfilePicture=l.extend({onLoad:function(){this.$("#@add_photo_button").click(this.fnbind(function(){this.lookup("photo").lookup("add_link").editPhoto();return!1}))}}),b.NUXFollowingListMain=l.extend({onLoad:function(){this.$("#@show_following_list").click(this.fnbind(function(){this.$("#@following_list").toggleClass("hidden");return!1}))}}),b.NotifHeaderBar=l.extend({onVisible:function(){this.initState("first_call",!0)||this.num<3&&this.num>0&&h.getHash().substr(0,1)=="#"&&!this.mobile&&this.initBar()},initBar:function(){this.headerHeight=$("#layout_header").outerHeight(),this.barHeight=this.$("#@bar").outerHeight(),this.barMarginBtm=parseInt(this.$("#@bar").css("margin-bottom").replace("px","")),this.installScrollHandlers(this.setPosition),this.use_floaty_bar&&this.$("#@bar").addClass("header_bar_smooth_floaty");var a=this.fnbind(function(){this.setPosition();var a=$(window).height(),b=$("body").outerHeight(),c=$(window).scrollTop();a+c!=b&&$(window).scrollTop(c-this.barHeight)});setTimeout(a,50)},onUnload:function(){this.uninstallScrollHandlers()},setPosition:function(){var a=$(window).scrollTop(),b=this.barHeight+this.barMarginBtm;a>this.headerHeight?(this.use_floaty_bar?(this.$("#@bar").addClass("header_bar_floaty"),this.$("#@bar").css("top",this.headerHeight+"px"),this.$("#@bar").css("-webkit-transform","translateY("+(window.scrollY-this.headerHeight)+"px)")):this.$("#@bar").addClass("header_bar_fixed"),$("#layout_header").css("margin-bottom",b+"px")):(this.use_floaty_bar?(this.$("#@bar").css("-webkit-transform","translateY(0px)"),this.$("#@bar").removeClass("header_bar_floaty")):this.$("#@bar").removeClass("header_bar_fixed"),$("#layout_header").css("margin-bottom","0px"))}}),b.AdminModeBar=NotifHeaderBar.extend({onLoad:function(){this._super.apply(this,arguments),this.mobile||this.initBar()}}),b.MobileAppLink=l.extend({onLoad:function(){this.$("#@download_button").click(this.fnbind(function(){var a=+(new Date);setTimeout(function(){+(new Date)-a<2e3&&(window.location="http://itunes.apple.com/us/app/quora/id456034437?mt=8")},1e3)}))}}),b.NotifHeaderBarButtons=l.extend({onLoad:function(){this.locked=!1,$(document).keydown(this.fnbind(function(a){return this.docKeydown(a)}))},gotoNext:function(){this.next_url&&h.navigateTo(this.next_url,!1)},isLocked:function(){var a=!1;$("input, textarea, .qtext_editor_content").each(function(){$(this).attr("focused")=="true"&&(a=!0)});return this.locked||a},docKeydown:function(a){var b=a||window.event;if(this.isLocked())return!0;if(b.keyCode==39){this.gotoNext();return!1}}}),b.Header=l.extend({onLoad:function(){this.$("#@enter_context").click(this.fnbind(function(){$("#layout_header").addClass("topic_visibility_context"),$("#topic_visibility_context").val(this.tid),this.$("#@topic_nav").show(),this.$("#@default_nav").hide(),this.$("#@group_header").show(),this.$("#@context_navigator").hide();return!1})),this.$("#@close_context").click(this.fnbind(function(){this.closeContext();return!1}))},closeContext:function(){$("#layout_header").removeClass("topic_visibility_context"),$("#topic_visibility_context").val(0),this.$("#@topic_nav").hide(),this.$("#@default_nav").show(),this.$("#@group_header").hide(),this.$("#@context_navigator").show(),this.lookup("navigator").focus()}}),b.CreateAnswerWikiLink=l.extend({onLoad:function(){this.$("#@create_answer_wiki").click(this.fnbind(function(){$("#answer_wiki").toggleClass("hidden");return!1}))}}),b.ReportLink=l.extend({onLoad:function(){var a={title:"Flag Content",comment_form:"Please explain why you are flagging this content",mobile:this.mobile,buttons:{Ok:this.fnbind(this._request),Cancel:null}};this.$("#@report_link").click(function(){$(".content").dialog(a);return!1})},_request:function(){var a={};if(!(a.id=this.id)||!(a.type=this.type)||!(a.comment=$("#dialog_comment").val()))return!1;this.serverCall("report").kwargs(a).success(this.fnbind(function(b){$.serverLog("Content Flagged","INFO",a),a1ert("Content Flagged")})).liveMutate().send()}}),b.ThanksLink=l.extend({onLoad:function(){var a=this;this.$("#@thanks_link").click(function(){a.serverCall("send_thanks").liveMutate().send();return!1})}}),b.LogoutNavElement=l.extend({onLoad:function(){this.$("#@logout_link").click(this.fnbind(function(a){this.$("#@logout_form").submit();return!1}))}}),b.ResetPassword=l.extend({onLoad:function(){this.$("#@reset_email_submit").click(this.fnbind(function(a){var b=this.$("#@email_input").val();if(!b)return!1;this.emailRequest("/settings/send_reset_password_email_POST",b);return!1})),this.$("#@reset_password_submit").click(this.fnbind(function(a){var b=this.$("#@reset_password_code").val(),c=this.$("#@new_password").val();if(!c)return!1;this.passwordRequest("/settings/reset_password_POST",b,c);return!1}))},emailRequest:function(a,b){f.rpc(a).kwargs({email:b}).success(this.fnbind(function(a){this.$("#@email_input").val(""),this.$("#@reset_email_conf").removeClass("hidden"),this.$("#@reset_email_form").addClass("hidden")})).send();return!1},passwordRequest:function(a,b,c){f.rpc(a).kwargs({code:b,new_password:c}).success(this.fnbind(function(a){a?h.navigateTo("/login/index?__pmsg__=password_changed",!1):h.navigateTo("/settings/reset_password?__pmsg__=password_change_error",!1)})).send();return!1}}),b.SettingsMain=l.extend({onLoad:function(){this.$("#@add_another_email_link").click(this.fnbind(function(a){this.$("#@add_another_email_row").toggleClass("hidden"),this.$("#@add_email_input_row").toggleClass("hidden"),this.$("#@new_email").focus();return!1})),this.$("#@add_another_phone_number_link").click(this.fnbind(function(a){this.$("#@add_another_phone_number_row").toggleClass("hidden"),this.$("#@add_number_input_row").toggleClass("hidden"),this.$("#@new_number").focus()})),this.$("#@add_another_email").click(this.fnbind(function(){var a=this.$("#@new_email").val();if(!a)return!1;this.serverCall("add_email").kwargs({email:a}).liveMutate().send();return!1})),this.$("#@add_another_phone_number").click(this.fnbind(function(){var a=this.$("#@new_number").val();if(!a)return!1;this.serverCall("add_number").kwargs({number:a}).liveMutate().success(this.fnbind(function(b){b!=null&&this.showConfirmationDialog(a,b)})).send();return!1}))},showConfirmationDialog:function(a,b){this.dialog().title("Confirm Phone Number").ok(null).html("We have sent a text message to <b>"+a+"</b>. "+"Please confirm this number belongs to you by replying to the message "+"with the following code: "+'<p class="confirmation_code">'+b+"</p>");return!1}}),b.EmailAddressRow=l.extend({onLoad:function(){var a=this,b={resend:function(){return a._serverCallHelper("resend_email_confirmation")},primary:function(){return a._serverCallHelper("set_primary_email")},remove:function(){return a._serverCallHelper("remove_email")}};this.$("#@confirm_email").click(this.fnbind(function(){this.dialog().title("Resend Confirmation Email").ok(this.fnbind(function(){b.resend()}),"Send").cancel(null).html("Resend a confirmation email to "+a.email+".");return!1})),this.$("#@make_primary").click(b.primary),this.$("#@delete_email").click(function(){$(".content").dialog({title:"Remove Email Address",contents:"Are you sure you want to delete the "+a.email+" address?",buttons:{Delete:b.remove,Cancel:null}});return!1})},_serverCallHelper:function(a){this.serverCall(a).kwargs({email:this.email}).liveMutate().send();return!1}}),b.PhoneNumberRow=l.extend({onLoad:function(){var a=this,b={confirm:function(){return a._serverCallHelper("resend_confirmation_code")},primary:function(){return a._serverCallHelper("set_primary_number")},remove:function(){return a._serverCallHelper("remove_number")}};this.$("#@confirm_number").click(this.fnbind(function(){b.confirm(),this.lookup("settings_main").showConfirmationDialog(a.number,a.code)})),this.$("#@make_primary").click(b.primary),this.$("#@delete_number").click(function(){$(".content").dialog({title:"Remove Phone Number",contents:"Are you sure you want to delete the number <b>"+a.number+"</b>?",buttons:{Delete:b.remove,Cancel:null}});return!1})},_serverCallHelper:function(a){this.serverCall(a).kwargs({number:this.number}).liveMutate().send();return!1}}),b.EmailSettingsSection=l.extend({onLoad:function(){this.$("#@view_section_link").click(this.fnbind(function(){this.$("#@view_section").removeClass("hidden"),this.$("#@view_section_span").addClass("hidden");return!1}))}}),b.EmailSettings=l.extend({updateSettings:function(){var a=this.$("#@form").serializeArray();this.serverCall("update_settings").kwargs({items:a}).liveMutate().send()}}),b.EmailSettingCheckbox=l.extend({onLoad:function(){this.$("#@checkbox").change(this.fnbind(function(){this.lookup("email_settings").updateSettings()}))}}),b.EmailSettingMenuOption=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"));return!1})),this.$("%@reason").click(this.fnbind(function(a){var b=this.cQuery(":checkbox").$("#@checkbox");b.attr("checked",!0),b.attr("name",$(a.target).attr("name")),this.$("#@display_text").text($(a.target).text()),this.$("%@reason").removeClass("selected"),$(a.target).addClass("selected"),this.lookup("email_settings").updateSettings();return!1}))}}),b.ToFollowList=l.extend({onLoad:function(){this.$("#selectall").click(this.fnbind(function(){this.selectAll()})),this.$("#@submit_button").click(this.fnbind(function(){if(this.ajax){var a=[];this.$("#@list_contents input:checked").each(function(b){a.push($(this).attr("name"))}),this.serverCall("follow_from_contacts").kwargs({follow_strings:a}).liveMutate().success(this.fnbind(function(a){this.successfullyFollowed(a)})).send();return!1}}))},selectAll:function(){this.$("#selectall").attr("checked")?(this.$("input").attr("checked",!0),this.$(".list_item").addClass("selected")):(this.$("input").attr("checked",!1),this.$(".list_item").removeClass("selected"))},successfullyFollowed:function(a){var b="Successfully followed "+a;a==1?b+=" friend.":b+=" friends.",this.$("#@follow_results").show().text(b),this.$("#@to_follow_list").hide(),this.lookup("next_button").$("#@next_button").addClass("submit_button")}}),b.ToInviteList=ToFollowList.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@view_add_emails").click(this.fnbind(function(){this.$("#@view_add_emails").addClass("hidden"),this.$("#@manual_emails").removeClass("hidden");return!1}))}}),b.ContactsListMultiInvite=l.extend({onLoad:function(a){a&&j.track("multi_invite_impr"),this.allowInvites=!0;var b=this.$("#@scrollable_list_contents").height();this.$("#@scrollable_list").scroll(this.fnbind(function(){var a=this.$("#@scrollable_list").scrollTop();b-a<1550&&(this.child("paged_list").showHiddenAndMaybeGetMore(),b=this.$("#@scrollable_list_contents").height())})),this.$("#@invite_button").click(this.fnbind(function(){if(this.ajax&&this.allowInvites){this.allowInvites=!1;var a=[];this.$(".contacts_list_multi_invite input:checked").each(function(b){a.push($(this).attr("name"))});var b=this.$("#@msg").val();a.length!=0&&this.serverCall("invite_users").kwargs({invite_emails:a,msg:b}).liveMutate().success(this.fnbind(function(){this.allowInvites=!0})).send()}if(this.ajax)return!1;if(this.allowInvites){this.allowInvites=!1;return!0}return!1})),this.$("#@select_all_word").click(this.fnbind(function(a){this.toggleCheckboxes();return!1})),this.$("#@select_all_check").change(this.fnbind(function(a){this.toggleCheckboxes();return!1}))},setTo:function(a){var b=this.$("#@manually_added_contacts").html();this.serverCall("single_contact_item").kwargs({email:a}).contentFor(this.$("#@manually_added_contacts"),{parentCID:this.cid}).success(this.fnbind(function(){this.$("#@manually_added_contacts").show(),this.$("#@manually_added_contacts").append(b)})).send()},toggleCheckboxes:function(){var a=this.$(".contacts_list_multi_invite input").length,b=this.$(".contacts_list_multi_invite input:checked").length;a!=b?(this.$("input").attr("checked",!0),this.$("#@select_all_check").attr("checked",!0)):(this.$("input").attr("checked",!1),this.$("#@select_all_check").attr("checked",!1))}}),b.ContactsListMultiInviteEntry=l.extend({onLoad:function(){this.$("#@words").click(this.fnbind(function(a){this.selectMe();return!1})),this.$("#@img").click(this.fnbind(function(a){this.selectMe();return!1}))},selectMe:function(){var a=this.$("#@checkbox");a.is(":checked")?a.attr("checked",!1):a.attr("checked",!0)}}),b.ContactListEmailLink=l.extend({onLoad:function(a){this.$("#@email").click(this.fnbind(function(){this.lookup("invite_button").invite(this.all_emails);return!1}))}}),b.InviteButton=l.extend({onLoad:function(){this.$("#@invite").click(this.fnbind(function(){this.invite();return!1}))},invite:function(a){var b=this.name?this.name:this.emails,c="/contacts/ajax_invite_dialog_GET?",d=a||this.emails;d&&d.length>0&&(c+="emails="+d+"&"),this.fb_uid&&(c+="fb_uid="+this.fb_uid+"&"),this.tw_uid&&(c+="tw_uid="+this.tw_uid+"&"),c+="name="+b,this.location&&(c+="&location="+this.location),$(".content").dialog({title:"Invite "+unescape(b)+" to Quora",url:c,mobile:this.mobile,id:"invite_dialog",buttons:null})}}),b.InviteFriendOfName=l.extend({onLoad:function(){this.$("#@contact_name").click(this.fnbind(function(){this.lookup("invite_button").invite();return!1})),this.$("#@contact_photo").click(this.fnbind(function(){this.lookup("invite_button").invite();return!1}))}}),b.InviteConfirmationDialog=l.extend({onLoad:function(){this.emails.length>0?this.email=this.emails[0]:this.email=null,this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"),{position_relative:!0,position_adjust:-3});return!1})),this.$(".menu_list_item a").click(this.fnbind(function(a){this.$("#@active_email").text(this.email=$(a.currentTarget).text()),this.$(".menu_list_item a").removeClass("selected"),$(a.currentTarget).addClass("selected");return!1})),this.$("#@send").click(this.fnbind(function(){this.request();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.close();return!1}))},request:function(){var a=this.lookup("msg").getVal(),b=[],c=[];$("#invite_dialog .temp_topics_list input").each(function(){b.push($(this).val())}),$("#invite_dialog .temp_suggested_question input").each(function(){c.push($(this).val())}),f.rpc("/contacts/ajax_send_invite_POST").kwargs({email:this.email,msg:a,topics:b,questions:c,location:this.location,fb_uid:this.fb_uid,tw_uid:this.tw_uid}).liveMutate().success(this.fnbind(function(){this.close()})).send()},close:function(){$("#invite_dialog").remove()},setEmail:function(a){this.email=a}}),b.PersonalMessage=ToFollowList.extend({onLoad:function(){this.$("#@view_personal_message").click(this.fnbind(function(){this.$("#@view_personal_message").addClass("hidden"),this.$("#@personal_message").removeClass("hidden");return!1}))},getVal:function(){return this.$("#@msg").val()}}),b.ToFollowListItem=l.extend({onLoad:function(){this.$("#@list_row").hover(this.fnbind(function(){this.$("#@list_row").addClass("hover")}),this.fnbind(function(){this.$("#@list_row").removeClass("hover")})),this.$("#@chkbox").click(this.fnbind(function(a){this.onCheck(),a.stopPropagation()})),this.$("#@list_row").click(this.fnbind(function(){this.$("#@chkbox").attr("disabled")||(this.$("#@chkbox").attr("checked")?this.$("#@chkbox").attr("checked",!1):(this.$("#@chkbox").attr("checked",!0),this.$("#selectall").attr("checked",!1)),this.onCheck())}))},onCheck:function(){this.$("#@list_row").toggleClass("selected"),this.max!=null&&this.atMax()},atMax:function(){var a=0;$("input[type='checkbox']").each(function(){$(this).attr("checked")&&a++});if(a<this.max){$("input[type='checkbox']").removeAttr("disabled");return!1}$("input[type='checkbox']").each(function(){$(this).attr("checked")||$(this).attr("disabled",!0)});return!0}}),b.ToInviteListItem=ToFollowListItem.extend({onLoad:function(a){this._super.apply(this,arguments)},onCheck:function(){this.$("#@list_row").toggleClass("selected"),this.$("#@list_row").removeClass("can_select"),this.max!=null&&this.atMax(),this.lookup("suggestions").toggle(),this.$("#@list_row").unbind("click")}}),b.ManualInviteBox=l.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){function c(a){if(a.nodeType!=3){if(/^textarea$/i.test(a.nodeName)){var d=a.getAttribute("name");d&&(a.removeAttribute("name"),b.push($("<input>").attr("name",d).attr("type","hidden").val($(a).val())))}for(var e=a.firstChild;e;e=e.nextSibling)c(e)}}var a,b=[],d=this.$("#@invite_form");c(d[0]);while(a=b.pop())d.append(a);d.submit();return!1}))}}),b.InviteByEmailAddress=l.extend({onLoad:function(){this.$("#@more").click(this.fnbind(function(){this.$("#@more").addClass("hidden"),this.$("#@email_addresses .hidden_fields").removeClass("hidden");return!1}))}}),b.InviteByEmailAddressItem=l.extend({onLoad:function(a){this.$("#@email").bind("blur",this.fnbind(function(a){if(this.$("#@email").val()){this.showTopicSuggestionsAndNextEmail();return!1}}))},showTopicSuggestionsAndNextEmail:function(){this.lookup("suggestions").show(),this.cQuery(":suggestions.topic.topic_add").setoid(this.$("#@email").val()),this.cQuery(":suggestions.topic").setTarget(this.$("#@email").val());var a=parseInt(this.$("#@email").attr("index"))+1;this.lookup("address_item_"+a.toString()).show()},show:function(){this.$("#@address_item_wrapper").show()},setTo:function(a){a&&(this.$("#@email").val(a),this.showTopicSuggestionsAndNextEmail())}}),b.ClearDraft=l.extend({onLoad:function(){this.$("#@clear_draft").click(this.fnbind(function(){$(".content").dialog({title:"Clear Draft",contents:"Are you sure you want to delete this draft? You will lose your work.",buttons:{"Clear Draft":this.fnbind(function(){this.serverCall("clear_draft").liveMutate().send()}),Cancel:null}});return!1}))}}),b.DraftStatus=l.extend({onLoad:function(){var a=this;a.$("#@draft_status_clear").click(function(){$(".content").dialog({title:"Clear Draft",contents:"Are you sure you want to delete this draft? You will lose your work.",buttons:{"Clear Draft":function(){f.rpc("/ajax/ajax_clear_draft_POST").kwargs({draft_space:a.draft_space}).liveMutate().success(a.fnbind(a.onClearDraft)).send()},Cancel:null}});return!1})},onClearDraft:function(){}}),b.BoardDraftStatus=b.DraftStatus.extend({onLoad:function(){this._super.apply(this,arguments),this.editor=this.parent()},updateWithDraftId:function(a){this.child("toggled").toggle(!1,a)},onClearDraft:function(){this.editor.onClearDraft()}}),b.ProfileNameAndSigEditor=l.extend({onLoad:function(){h.getHash().substr(0,9)=="#editname"&&(this.toggleEditor(),this.showNameEditor(),this.$("#@name").focus()),this.$("#@edit").click(this.fnbind(function(){this.toggleEditor(),this.$("#@bio").focus();return!1})),this.$("#@edit_name").click(this.fnbind(function(){this.showNameEditor();return!1})),this.$("#@done").click(this.fnbind(function(){this.hideNameEditor(),this.toggleEditor();return!1})),this.$("#@update").click(this.fnbind(function(){var a=this.$("#@name").val(),b=this.$("#@bio").val();this.serverCall("update").kwargs({name:a,bio:b}).success(this.fnbind(function(a){a?(this.$("#@name").addClass("input_validation_error"),this.$("#@error").text(a+".").show()):this.toggleEditor()})).liveMutate().send();return!1}))},showNameEditor:function(){this.$("#@edit_name").hide(),this.$("#@view_name").hide(),this.$("#@name_input").show()},hideNameEditor:function(){this.$("#@edit_name").show(),this.$("#@view_name").show(),this.$("#@name_input").hide()},toggleEditor:function(){this.$("#@view").toggle(),this.$("#@edit_view").toggle(),this.$("#@error").text("").hide(),this.$("#@name").removeClass("input_validation_error")}}),b.AnswerUserSigEditorLink=l.extend({onLoad:function(){this.tooltip&&this.$("#@link").tooltip({contents:this.tooltip}),this.$("#@link").click(this.fnbind(function(){this.click();return!1}))},click:function(){this.dialog().opt("closeOnClickOut",!0).title(this.title).cancel("Done").load("get_editor");return!1}}),b.SuggestTopicsInline=l.extend({onLoad:function(){this.$("#@update").click(this.fnbind(function(){var a=[];this.$("#@topic_tagger_component .temp_topics_list input").each(function(){a.push($(this).val())});if(!a)return!1;this.serverCall("suggest").kwargs({to_uid:this.to_uid,topics:a}).success(this.fnbind(function(a){this.lookup("selector").resetTempTopics(),this.$("#@update").hide()})).liveMutate().send();return!1}))}}),b.PostTrapDialog=l.extend({onLoad:function(){this.$("%cancel").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1})),this.$("#@show_add").click(this.fnbind(function(){this.$("#@matches").hide(),this.$("#@add_question").show();return!1})),this.$("#@submit").click(this.fnbind(function(){this.lookup("add_question_dialog").addQuestion();return!1}))}}),b.InlineEditor=l.extend({onLoad:function(){this.input_obj=this.$("#@"+this.input),this.input_button="inline_editor_submit",this.input_button_obj=this.$("#@"+this.input_button),this.draft_space&&(this.draft_button="inline_editor_save_draft",this.draft_button_obj=this.$("#@"+this.draft_button)),this.toggle_callback=null,this.locked=!1,this.$("#@inline_editor_content").hover(this.fnbind(function(){this.$("#@inline_editor_content").addClass("hover")}),this.fnbind(function(){this.$("#@inline_editor_content").removeClass("hover")})),this.$("#@inline_editor_link").click(this.fnbind(function(){this.toggle_editor(),this.is_qtext&&this.lookup("editor").fixButtons();return!1})),this.$("#@inline_editor_cancel").click(this.fnbind(function(){this.cancelEditor();return!1})),this.$("#@inline_editor_create_link").click(this.fnbind(function(){this.toggle_editor();return!1})),this.submitHandler(),this.draft_space&&(this.lookup("editor").setFocusCallback(this.fnbind(function(){this.$("#@inline_editor_save_draft").removeClass("hidden")})),this.draft_button_obj.click(this.fnbind(function(a){this.save_draft(!0);return!1})),this.lookup("editor").setMeaningfulChangeCallback(this.fnbind(function(){this.save_draft(!1)}))),this.focus_onload&&this.focusInput(),this.typing_area&&this.lookup("editor").setTypingStateCallback(this.fnbind(function(a){this.serverCall("typing").kwargs({area:this.typing_area,state:a}).send()}))},cancelEditor:function(){this.toggle_editor();var a=this.lookup("name_validator");a&&a.hideAllErrors()},submitHandler:function(){this.input_button_obj.click(this.fnbind(function(){f.InputValidator.validate(this,{valid:this.fnbind(this.trigger_request),invalid:function(){}});return!1}))},get_value:function(){return this.is_qtext?this.lookup("editor").serialize():this.input_obj.val()},save_draft:function(a){var b=a?"save_draft":"save_draft_auto",c=this.serverCall(b).kwargs({content:this.get_value(),window_id:f.windowId,draft_space:this.draft_space});a&&c.liveMutate(),c.send()},server_call_method:"edit",_get_kwargs:function(){return{id:this.id,input:this.get_value()}},trigger_request:function(){this.typing_area&&this.lookup("editor").stopTyping();if(this.locked)return!1;this.locked=!0,this.invokeEditServerCall()},invokeEditServerCall:function(){var a=this.fnbind(function(){this.locked=!1});$(document).bind("login_cancelled",a),i.setTlog(this.tlog_data()),this.serverCall(this.server_call_method).kwargs(this._get_kwargs()).success(this.fnbind(function(b){$(document).unbind("login_cancelled",a),this.ajax_callback(b),this.locked=!1})).error(function(){$(document).unbind("login_cancelled",a)}).liveMutate().send()},tlog_data:function(){return null},ajax_callback:function(a){this.toggle_editor()},focusInput:function(){this.is_qtext?$(".qtext_editor_content").focus():this.input_obj.focus()},setToggleCallback:function(a){this.toggle_callback=a},toggle_editor:function(){this.$("#@inline_editor_content").find(".qtext_embed").each(function(a,b){$(b).addClass("thumbnail").empty()}),this.$("#@inline_editor_content").toggleClass("hidden"),this.$("#@inline_editor_form").toggleClass("hidden"),this.input_obj.focus(),this.toggle_callback&&this.toggle_callback()}}),b.NameInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),h.getHash().substr(0,9)=="#editname"&&this.toggle_editor()},_get_kwargs:function(){return{uid:this.id,input:this.get_value()}}}),b.NicknameInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),h.getHash().substr(0,9)=="#editname"&&this.toggle_editor()}}),b.FeatureContentDescriptionInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments)},_get_kwargs:function(){return{featured_id:this.featured_id,tid:this.tid,input:this.get_value()}}}),b.NewPostEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.disclaimer_update="",this.attempts=0},submitHandler:function(){this.input_button_obj.click(this.fnbind(function(){var a=!1,b=["what","when","why","how","who","where"],c=120,d=this.stripHTML(this.getTitle().html),e=this.stripHTML(this.get_value().html);$.each(b,function(b,f){d.substr(0,f.length).toLowerCase()==f&&e.length<c*2&&(a=!0),e.substr(0,f.length).toLowerCase()==f&&e.length<c&&(a=!0)}),d.indexOf("?")==d.length-1&&(a=!0),e.indexOf("?")==e.length-1&&e.length<c&&(a=!0),a&&this.attempts<2?(this.attempts++,this._dialog=this.dialog().title("Add Question").load("dialog",{kwargs:{title:d,desc:e}})):(this.attempts=0,f.InputValidator.validate(this,{valid:this.fnbind(this.trigger_request),invalid:function(){}}));return!1}))},stripHTML:function(a){var b=document.createElement("DIV");b.innerHTML=a;return b.textContent||b.innerText},getTitle:function(){return this.parent().lookup("title").serialize()},_get_kwargs:function(){return{id:this.id,input:this.get_value(),title:this.getTitle(),disclaimer_update:this.disclaimer_update}},ajax_callback:function(a){this.parent().reset(),a&&a[0]=="/"?h.navigateTo(a):a&&a=="close"&&window.close()},save_draft:function(a){var b=a?"save_draft":"save_draft_auto",c=this.serverCall(b).kwargs({title:this.getTitle(),content:this.get_value(),window_id:f.windowId,draft_space:this.draft_space});a&&c.liveMutate(),c.send()}}),b.ThreadMessageInlineEditor=InlineEditor.extend({trigger_request:function(){this.typing_area&&this.lookup("editor").stopTyping(),this.lookup("editor").request()},server_call_method:"UNDEFINED_SERVER_CALL_METHOD",_get_kwargs:function(){$.serverLog("Tried to call ThreadMessageInlineEditor#_get_kwargs()","ERROR");throw"UNDEFINED_KWARGS"}}),b.SuggestedEditsEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.disclaimer_update="",this.answer_attribution_update="",this.setToggleCallback(this.fnbind(function(){this.parent()&&(this.parent().toggleButtons&&this.parent().toggleButtons(),this.parent().$("#@disclaimer, #@nfr, #@answer_attribution").toggle())})),this.$("#@add_comment_link").click(this.fnbind(function(){this.$("#@comment_box").removeClass("hidden"),this.$("#@add_comment_link").addClass("hidden"),this.lookup("comment_editor").focus();return!1}))},_get_kwargs:function(){var a="";this.has_comment&&!this.lookup("comment_editor").isEmpty()&&(a=this.lookup("comment_editor").serialize());return{object_id:this.id,input:this.get_value(),sugg_exists:this.sugg_exists,notif:this.$("#@notif").attr("checked")?1:0,comment:a,disclaimer_update:this.disclaimer_update,answer_attribution_update:this.answer_attribution_update}}}),b.NewAnswerEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.disclaimer_update="",this.lookup("editor").setFocusCallback(this.fnbind(function(){this.$("#@later").addClass("hidden"),this.$("#@draft").removeClass("hidden"),this.lookup("editor_options").$("#@english_warning").show()}))},invokeEditServerCall:function(){if(this.getFacebookCheckbox()){var a=arguments,b=this._super;require("facebook").requestPermissions("publish_stream",this.fnbind(function(c,d){b.apply(this,a)}))}else this._super.apply(this,arguments)},tlog_data:function(){return{type:"AddAnswer"}},_get_kwargs:function(){return{id:this.id,input:this.get_value(),disclaimer_update:this.disclaimer_update,twitter_checked:this.getTwitterCheckbox(),facebook_checked:this.getFacebookCheckbox(),fb_uid:require("facebook").getFbUid(),fb_access_token:require("facebook").getAccessToken(),fb_expires:require("facebook").getExpiresIn(),topic_visibility_context:$("#topic_visibility_context").val()||0}},getFacebookCheckbox:function(){if(this.lookup("publish_checkboxes",!0))return this.lookup("publish_checkboxes").shouldPublishToFacebook();return null},getTwitterCheckbox:function(){if(this.lookup("publish_checkboxes",!0))return this.lookup("publish_checkboxes").shouldPublishToTwitter();return null}}),b.NewAnswerInFeedEditor=NewAnswerEditor.extend({onLoad:function(){this._super.apply(this,arguments)},submitHandler:function(){this.input_button_obj.click(this.fnbind(function(){f.InputValidator.validate(this,{valid:this.fnbind(function(){this.trigger_request(),this.parent().parent().showAnswer()}),invalid:function(){}});return!1}))}}),b.NewAnswerEditorWithBoardSelector=NewAnswerEditor.extend({onLoad:function(){this._super.apply(this,arguments)},_get_kwargs:function(){var a=this._super.apply(this,arguments);try{var b=this.cQuery(":editor.selector");b&&(a.bid=b.getBid(),a.board_name=b.getText())}catch(c){delete a.bid,delete a.board_name}return a}}),b.CreateAnswerWikiInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@inline_editor_cancel").click(this.fnbind(function(){this.toggle_editor(),$("#answer_wiki").addClass("hidden");return!1}))},_get_kwargs:function(){return{qid:this.id,input:this.get_value()}}}),b.AnswerWikiInlineEditor=InlineEditor.extend({_get_kwargs:function(){var a="";this.has_comment&&!this.lookup("comment_editor").isEmpty()&&(a=this.lookup("comment_editor").serialize());return{qid:this.id,input:this.get_value(),sugg_exists:this.sugg_exists,comment:a,notif:this.$("#@notif").attr("checked")?1:0}}}),b.CreateBoardPostEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.boardSelectorObj=null,this.bid||(this.boardSelectorObj=this.parent().cQuery(":selector.selector")),this.$("#@remove_via").click(this.fnbind(function(){this.$("#@via_text").hide(),this.$("#@via").remove();return!1})),this.fetchingUrl=!1,this.seenUrls={},this.link_editor_location=":link_editor.preview";var a=this,b=a.lookup("editor");b.onLinkAdded(function(c){var d=c.url,e=b.text(),f=d.indexOf(e)>-1;a.previewUrl(c,function(){f&&b.text()===e&&b.selectAll()})}),b.onLinkFetchStart(function(){a.preview||a.$("#@spinner").show()}),b.onLinkFetchEnd(function(){a.$("#@spinner").hide()}),this.bookmarklet&&(!this.draft_space||!this.draft_space.draft_id)&&(b.whenOnLoaded(function(){b.detectLinks()}),this.$("#@spinner").show()),this.default_is_enabled&&this.$("#@fake_editor").click(this.fnbind(function(){this.showEditor()}));if(this.saved_seen_urls)for(var c=0;c<this.saved_seen_urls.length;c++)this.seenUrls[this.saved_seen_urls[c]]=!0;if(this.saved_topics){var d=this.parent().cQuery(":topic_selector.topic_add");d.whenOnLoaded(function(){for(var b=0;b<a.saved_topics.length;b++)d.saveTempTopic(a.saved_topics[b]);a.parent().$("#@edit_topics").show(),a.parent().$("#@add_topics").hide()})}},showEditor:function(){this.$("#@fake_editor_wrapper").hide(),this.$("#@content").show(),this.lookup("editor").focus()},submitHandler:function(){this.input_button_obj.click(this.fnbind(function(){if(!this.getBid()&&!this.getBoardName()&&!this.default_is_enabled)this.highlightMissingBoard();else if(!this.lookup("editor").isEmpty()||this.preview!=null||this.id)this.lookup("editor").$("#@editor").addClass("qtext_editor_content_disabled"),this.$("#@preview_url").addClass("qtext_editor_content_disabled"),f.InputValidator.validate(this,{valid:this.fnbind(this.trigger_request),invalid:function(){}});return!1}))},removeUrl:function(){this.$("#@preview_url").html(""),this.$("#@preview_url_section, #@link_editor_buttons").hide(),this.$("#@remove_url").hide(),this.preview=null,this.lookup("editor").focus()},previewUrl:function(a,b){var c=a.url;if(!this.$("#@preview_url_section").is(":visible")&&!this.seenUrls[c]){if(a.type=="quora")return;this.preview=a,this.seenUrls[c]=!0,this.$("#@spinner").show(),this.$("#@remove_url").hide(),this.fetchingUrl=!0,this.serverCall("preview_url").contentFor(this.$("#@preview_url"),{parentCID:this.cid,useLoadingSpinner:!1}).success(this.fnbind(function(){this.$("#@preview_url_section, #@preview_url, #@remove_url").show(),this.$("#@spinner").hide(),this.fetchingUrl=!1,b&&b()})).except("bad_url",this.fnbind(function(){this.$("#@spinner").hide(),this.fetchingUrl=!1,this.$("#@preview_url_section").is(":visible")&&this.$("#@remove_url").show()})).kwargs({preview:a}).send()}},onBookmarkletLinkEditorLoaded:function(a){this.link_editor_location=":bookmarklet_link_editor.link_editor.preview",this.preview=a,this.$("#@spinner").hide()},reset:function(){var a=this.lookup("editor");a.$("#@editor").removeClass("qtext_editor_content_disabled"),a.clear(!0),this.$("#@preview_url").removeClass("qtext_editor_content_disabled").hide(),this.$("#@preview_url_section, #@link_editor_buttons").hide(),this.$("#@remove_url").hide(),this.seenUrls={},this.removeUrl(),this.draft_space&&(this.draft_space.draft_id=null,a.resetMeaningfulChange()),this.default_is_enabled&&!this.is_submission&&this.parent().reset(),this.bid||this.boardSelectorObj.resetFakeInput()},cancelEditor:function(){this.closeDialog()},bookmarkletReturnedWithData:function(a){this.$("#@close").show(),this.$("#@content, #@post, #@submit").hide(),this.parent().$("#@selector").hide(),this.$("#@confirmation_text").html(a),this.$("#@confirmation").show(),this.$("#@inline_editor_buttons").hide(),this.default_is_enabled&&this.parent().$("#@header").hide(),setTimeout("window.close()",3e3)},reportSuccess:function(){var a=f.Dialog.openerFor(this);i.setQfeedLog(a,"BoardPost"),i.setTlog({type:"BoardPost",object_id:a.object_id,object_type:a.type})},ajax_callback:function(a){if(this.redirect_on_post&&a[0]=="/")document.location=a;else if(this.bookmarklet)this.bookmarkletReturnedWithData(a);else if(this.is_dialog){this.reportSuccess(),this.closeDialog();return}this.reset()},closeDialog:function(){f.Dialog.dialogFor(this).close_()},highlightMissingBoard:function(){this.parent().cQuery(":selector").addMissingBoardError()},getBid:function(){return this.bid?this.bid:this.boardSelectorObj.getBid()},getBoardName:function(){return this.bid?null:this.boardSelectorObj.getText()},getVia:function(){return this.$("#@via")?this.$("#@via").val():null},getDistro:function(){if(this.lookup("item_distro_setting"))return this.lookup("item_distro_setting").$("#@checkbox").is(":checked");return null},getIsSubmission:function(){return this.is_submission},setIsSubmission:function(a){this.is_submission=a},getLinkURL:function(){var a=this.getLinkPreview();if(a)return a.url;return null},getLinkPreview:function(){if(this.preview)return this.cQuery(this.link_editor_location).getLinkInfo();return null},getTopics:function(){if(this.default_is_enabled&&this.parent().lookup("topic_selector"))return this.parent().cQuery(":topic_selector.topic_add").getTempTopicNamesAsArray();return null},getSeenUrlsAsArray:function(){var a=[];for(var b in this.seenUrls)a.push(b);return a},getTwitterCheckbox:function(){if(this.lookup("publish_checkboxes",!0))return this.lookup("publish_checkboxes").shouldPublishToTwitter();if(this.default_is_enabled&&this.parent().$("#@twitter"))return this.parent().$("#@twitter").is(":checked");return null},getFacebookCheckbox:function(){if(this.lookup("publish_checkboxes",!0))return this.lookup("publish_checkboxes").shouldPublishToFacebook();return null},canSaveDraft:function(){return this.draft_space&&!this.save_draft_disabled},enableSaveDraft:function(){this.save_draft_disabled=!1},disableSaveDraft:function(){this.save_draft_disabled=!0},onClearDraft:function(){this.reset()},invokeEditServerCall:function(){if(this.getFacebookCheckbox()){var a=arguments,b=this._super;require("facebook").requestPermissions("publish_stream",this.fnbind(function(c,d){b.apply(this,a)}))}else this._super.apply(this,arguments)},save_draft:function(a){if(!!this.canSaveDraft()){this.disableSaveDraft();var b=a?"save_draft":"save_draft_auto",c=this.serverCall(b).kwargs({window_id:f.windowId,draft_space:this.draft_space,bid:this.getBid(),name:this.getBoardName(),description:this.get_value(),target:this.target,url:this.url,link_url:this.getLinkURL(),preview:this.getLinkPreview(),via:this.getVia(),distro_checked:this.getDistro(),twitter_checked:this.getTwitterCheckbox(),facebook_checked:this.getFacebookCheckbox(),topics:this.getTopics(),seen_urls:this.getSeenUrlsAsArray(),is_submission:this.getIsSubmission()}).success(this.fnbind(function(a){this.enableSaveDraft(),this.draft_space.draft_id!=a&&(this.draft_space.draft_id=a,this.child("draft_status").updateWithDraftId(a))})).error(this.fnbind(function(){this.enableSaveDraft()}));a&&c.liveMutate(),c.send()}},_get_kwargs:function(){return{draft_space:this.draft_space,bid:this.getBid(),object_id:this.id,name:this.getBoardName(),description:this.get_value(),link_url:this.getLinkURL(),preview:this.getLinkPreview(),via:this.getVia(),distro_checked:this.getDistro(),twitter_checked:this.getTwitterCheckbox(),facebook_checked:this.getFacebookCheckbox(),topics:this.getTopics(),is_submission:this.getIsSubmission(),fb_uid:require("facebook").getFbUid(),fb_access_token:require("facebook").getAccessToken(),fb_expires:require("facebook").getExpiresIn()}}}),b.BoardCreatePostBox=l.extend({onLoad:function(){this.$("#@distro_label")&&this.$("#@distro_label").tooltip({contents:"Share With Your Quora Followers"}),this.$("#@twitter_label")&&this.$("#@twitter_label").tooltip({contents:"Share With Your Twitter Followers"}),this.$("#@add_topics").click(this.fnbind(function(){this.$("#@edit_topics").show(),this.$("#@add_topics").hide(),this.lookup("topic_selector")&&this.lookup("topic_selector").focus(!0);return!1})),this.$("#@twitter_icon").click(this.fnbind(function(){this.$("#@twitter").is(":checked")?this.uncheckTwitter():this.checkTwitter();return!1}))},hideDistroOptions:function(){this.uncheckTwitter(),this.$("#@distro_options").hide(),this.$("#@add_topics_link").hide()},showDistroOptions:function(){this.$("#@distro_options").show(),this.$("#@add_topics_link").show()},reset:function(){this.uncheckTwitter(),this.$("#@edit_topics").hide(),this.$("#@add_topics").show(),this.lookup("topic_selector")&&this.lookup("topic_selector").reset()},uncheckTwitter:function(){this.$("#@twitter").attr("checked",!1)},checkTwitter:function(){this.$("#@twitter").attr("checked",!0)}}),b.BookmarkletLinkEditor=l.extend({onLoad:function(){this.parent().onBookmarkletLinkEditorLoaded(this.preview)},removeUrl:function(){this.parent().removeUrl()}}),b.AnswerContent=l.extend({onLoad:function(){this.$("#@view_suggestion").click(this.fnbind(function(){this.toggleSuggestion();return!1}))},toggleSuggestion:function(){this.$("#@original_answer").toggleClass("hidden"),this.$("#@suggestion_diff").toggleClass("hidden")}}),b.SuggestedEditBar=l.extend({toggleButtons:function(){this.$("#@suggested_answer_buttons").toggleClass("hidden")}}),b.SuggestedEditButtons=l.extend({onLoad:function(){this.$("#@view_original").click(this.fnbind(function(){this.parent().parent().toggleSuggestion();return!1}))}}),b.UserSigInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments);var a=this.fnbind(function(){var a=this.parent();a&&a.toggleButtons&&a.toggleButtons();return!1});this.$("#@inline_editor_cancel").click(a),this.$("#@inline_editor_link").click(a)}}),b.SuggestSigInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@inline_editor_cancel").click(this.fnbind(function(){this.parent().toggleButtons();return!1})),this.$("#@inline_editor_link").click(this.fnbind(function(){this.parent().toggleButtons();return!1}))},_get_kwargs:function(){return{tid:this.tid,to_uid:this.to_uid,bio:this.get_value()}}}),b.TopicAliases=l.extend({onLoad:function(){var a=this.fnbind(this.addAliasSubmit);this.$("#@topic_alias_add").click(a),this.$("#@topic_alias_add_form").submit(a),this.$("#@show_alias_link").click(this.fnbind(function(){this.$("#@add_topic_alias").show(),this.$("#@show_alias").hide(),this.$("#@topic_alias_input").focus()}))},get_value:function(){return this.$("#@topic_alias_input").val()},addAliasSubmit:function(){this._request(this.get_value());return!1},_request:function(a){if(!this.tid||!a)return!1;this.serverCall("add_topic_alias").kwargs({tid:this.tid,alias:a}).success(this.fnbind(function(){this.$("#@topic_alias_input").val(""),this.$("#@topic_alias_input").focus()})).liveMutate().send()}}),b.TopicAlias=l.extend({onLoad:function(){var a={title:"Topic Alias Deletion",contents:"Are you sure you wish to delete this alias?",buttons:{Ok:this.fnbind(this._request),Cancel:null}};this.$("#@topic_alias_remove").click(function(){$(".content").dialog(a);return!1})},_request:function(){if(!this.tid||!this.alias)return!1;this.serverCall("remove_topic_alias").kwargs({tid:this.tid,alias:this.alias}).liveMutate().send()}}),b.TopicDialog=l.extend({onLoad:function(){this.lookup("editor").focus(),f.topicDialog=this}}),b.RevertDialog=l.extend({onLoad:function(){this.lookup("editor").focus(),f.revertDialog=this}}),b.BatchRevertDialog=l.extend({onLoad:function(){this.lookup("editor").focus(),f.batchRevertDialog=this}}),b.TopicSelectorAdd=l.extend({onLoad:function(){this.$("#@add_btn").click(this.fnbind(function(){this.select();return!1})),this.tempTopicList={}},select:function(){this.type=="to_tid"?$(".content").dialog({title:"Topic Merge",url:"/ajax/topic_merge_dialog",buttons:{Ok:this.fnbind(this._request),Cancel:null}}):this._request()},_get_kwargs:function(){var a,b={};if(!(b.tid=this.oid)||!(b.type=this.type)||!(b.topic_name=this.parent().qValue)||/^\s*$/.test(b.topic_name)||this.type=="to_tid"&&(a=f.topicDialog.lookup("editor")).isEmpty())return null;a&&(b.comment=a.serialize());return b},_request:function(){var a=this._get_kwargs();if(!a)return!1;this.serverCall("add_topic").kwargs(a).success(this.fnbind(function(){this.parent().reset()})).liveMutate().send(),this.hide&&this.parent().hideSelector()}}),b.TempTopicSelectorAdd=TopicSelectorAdd.extend({select:function(){this.saveTempTopic(this.parent().qValue)},setoid:function(a){this.oid=a},saveName:function(a){this.tempTopicList[a]=a},deleteName:function(a){delete this.tempTopicList[a]},getTempTopicNames:function(){return this.tempTopicList},getTempTopicNamesAsArray:function(){var a=[];for(var b in this.tempTopicList)a.push(b);return a},reset:function(){this.parent().resetTempTopics(),this.tempTopicList={}},saveTempTopic:function(a){if(!!a){this.saveName(a);var b=$("<li/>").addClass(this.tempTopicClass()).append($("<input/>").attr("type","hidden").attr("name","tidsugg_"+this.oid).val(a)).append($(this.topicNameTag()).text(this.tempTopicVisibleText(a)).addClass(this.topicNameClasses())).append($("<a/>").text(this.removeTopicText()).addClass(this.editLinkClasses()).attr("href","#").click(this.fnbind(function(){this.deleteName(a),b.remove();return!1})));this.parent().addTempTopic(b),this.onTempTopicAdded()}},topicNameTag:function(){return"<strong/>"},topicNameClasses:function(){return""},editLinkClasses:function(){return"light"},tempTopicClass:function(){return"p0_5"},onTempTopicAdded:function(){this.parent().setText(""),this.parent().focus()},tempTopicVisibleText:function(a){return a},removeTopicText:function(){return" remove"}}),b.TempBoardItemTopicSelectorAdd=TempTopicSelectorAdd.extend({topicNameTag:function(){return"<span/>"},topicNameClasses:function(){return"topic_name"},editLinkClasses:function(){return"topic_remove"},removeTopicText:function(){return""},tempTopicClass:function(){return"topic_list_item"}}),b.TempTopicContextSelectorAdd=TempTopicSelectorAdd.extend({tempTopicVisibleText:function(a){return a+":"},editLinkClasses:function(){return"light edit"},tempTopicClass:function(){return""},removeTopicText:function(){return"edit"},onTempTopicAdded:function(){this._super.apply(this,arguments),this.parent().$("#@selector_wrapper, #@title").hide(),this.parent().$("#@input").blur()},deleteName:function(a){this._super.apply(this,arguments),this.parent().$("#@selector_wrapper, #@title").show(),this.parent().resetFocus()}}),b.PostTempTopicSelectorAdd=TempTopicSelectorAdd.extend({onLoad:function(){this._super.apply(this,arguments),this.defaultTopicName&&this.saveTempTopic(this.defaultTopicName)},saveName:function(a){this.tempTopicList[a]=a,this.parent().$("#@distribution_row").removeClass("hidden")},deleteName:function(a){delete this.tempTopicList[a],this.getTempTopicNames().length<=0&&this.parent().$("#@distribution_row").addClass("hidden")}}),b.ReviewQueueTempTopicSelectorAdd=TempTopicSelectorAdd.extend({onLoad:function(){this._super.apply(this,arguments)},saveTempTopic:function(a){!a||this.parent().parent().setTopic(a)}}),b.TopicSelectorAdd2=l.extend({onLoad:function(a){this.$("#@add_btn").click(this.fnbind(function(a){this.select();return!1}))},getTopicName:function(){return this.parent().qValue},getKwargs:function(){return{selected_topic:this.getTopicName()}},select:function(){var a=this.getTopicName(),b=this.getKwargs();this.parent()&&this.parent().resetFocus(),a&&this.serverCall("add").kwargs(b).liveMutate().error(this.fnbind(function(){$(".content").dialog({title:"Unable to Add Topic",contents:"This topic may not be added.",buttons:{Close:null}})})).send()}}),b.QuestionTopicSelectorAdd=TopicSelectorAdd2.extend({getKwargs:function(){return{selected_topics:this.getTopicName(),viewer_private:this.viewer_private,qid:this.qid}},getTopicName:function(){if(this.parent().qValue!="")return $.makeArray(this.parent().qValue)}}),b.TopicDelete=l.extend({onLoad:function(){var a=this;this.$("#@delete_topic_link").click(function(){$(".content").dialog({title:"Delete Topic",url:"/ajax/topic_delete_dialog",buttons:{Ok:function(){a._request("delete_topic")},Cancel:null}});return!1}),this.$("#@undelete_topic_link").click(function(){$(".content").dialog({title:"Undelete Topic",url:"/ajax/topic_undelete_dialog",buttons:{Ok:function(){a._request("undelete_topic")},Cancel:null}});return!1})},_request:function(a){var b=f.topicDialog.lookup("editor");b.isEmpty()||this.serverCall(a).kwargs({tid:this.tid,comment:b.serialize()}).liveMutate().send()}}),b.TopicAdultContent=l.extend({onLoad:function(a){this.$("#@remove_topic_as_adult").click(this.fnbind(function(){$(".content").dialog({title:"Modify Adult Content Setting",contents:"Are you sure you want to modify the Adult setting for this topic?",buttons:{"Remove Adult Mark":this.fnbind(function(){this.serverCall("remove_topic_as_adult").liveMutate().send()}),Cancel:null}});return!1})),this.$("#@set_topic_as_adult").click(this.fnbind(function(){$(".content").dialog({title:"Mark Topic as Adult Content",contents:"Are you sure you want to modify the Adult setting for this topic?",buttons:{"Mark as Adult":this.fnbind(function(){this.serverCall("set_topic_as_adult").liveMutate().send()}),Cancel:null}});return!1}))}}),b.ReviewTopicQuestion=k.SwitchableComponent.extend({switchAction:function(){this.$("#@editor").toggle(),this.parent().$("#@contents").toggle()},onUnload:function(){this.closeEditor()},closeEditor:function(){this.$("#@editor").hide(),this.parent().$("#@contents").show()}}),b.ApproveOrRejectQuestionOnTopic=l.extend({onLoad:function(a){this.$("#@link").click(this.fnbind(function(){this.parent().$("#@buttons").hide(),this.serverCall("update").kwargs({tid:this.tid,qid:this.qid}).error(this.fnbind(function(){this.parent().$("#@buttons").show()})).liveMutate().send();return!1}))}}),b.SetTopicGroupStatus=l.extend({onLoad:function(a){this.$("#@make_unofficial").click(this.fnbind(function(){$(".content").dialog({title:"Make Group Unofficial",contents:"Are you sure you want to make this group unofficial?",buttons:{"Make Unofficial":this.fnbind(function(){this.serverCall("make_unofficial").liveMutate().send()}),Cancel:null}});return!1})),this.$("#@make_official").click(this.fnbind(function(){$(".content").dialog({title:"Make Group an Official Group",contents:"Are you sure you want to make this topic group an official group?",buttons:{"Make Official":this.fnbind(function(){this.serverCall("make_official").liveMutate().send()}),Cancel:null}});return!1}))}}),b.TopicUnmergeLink=l.extend({onLoad:function(){var a=this;this.$("#@unmerge").click(function(){a.serverCall("unmerge_topic").kwargs({tid:a.tid}).liveMutate().send()})}}),b.FeedSuggestions=l.extend({onLoad:function(){this.$("#@view_suggestions_list_link").click(this.fnbind(function(){this.$("#@suggestions_list").toggleClass("hidden");return!1}))}}),b.CommentLink=l.extend({onLoad:function(){this.$("#@view_comment_link").click(this.fnbind(function(){this.viewComments();return!1})),this.initState("loading",!1)},viewComments:function(){var a=this.lookup("comments_list");a&&a.viewComments?a.viewComments():this.state("loading",!0),this.lookup("trackbacks")&&this.lookup("trackbacks").hideTrackbacks()},stateHandlers:{loading:function(a){var b=this.$("#@loading_comment_link"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),this.$("#@view_comment_link").toggleClass("hidden",a)}}}),b.CommentLinkSwitch=l.extend({viewComments:function(){var a=this.lookup("comments_list");a&&a.viewComments&&a.viewComments();var b=this.lookup("trackbacks");b&&b.hideTrackbacks&&b.hideTrackbacks()}}),b.EndorseUserLink=l.extend({onLoad:function(a){this.show_tooltip&&this.$("#@endorse").tooltip({contents:"Endorse "+this.name+" on "+this.topic_name}),this.$("#@endorse").click(this.fnbind(function(){this._request();return!1}))},_request:function(){this.serverCall("endorse_user").kwargs({to_uid:this.uid,tid:this.tid}).liveMutate().send()}}),b.UnendorseUserLink=l.extend({onLoad:function(){this.$("#@remove_endorse").click(this.fnbind(function(){this.serverCall("remove_endorse_user").kwargs({enid:this.enid}).liveMutate().send();return!1}))}}),b.UserTopicStatsRow=l.extend({onLoad:function(){this.$(".@view_more").click(this.fnbind(function(){this.$("#@more").toggleClass("hidden");return!1}))}}),b.PhotoTooltip=l.extend({onLoad:function(){this.$("#@photo_tooltip").tooltip({contents:this.text})}}),b.QuestionFollowing=l.extend({onLoad:function(){this.$("#@follow").click(this.fnbind(function(){i.setTlog({type:"QuestionFollow",qid:this.qid}),this.serverCall("follow").kwargs({qid:this.qid,topic_visibility_context:$("#topic_visibility_context").val()?$("#topic_visibility_context").val():0}).liveMutate().send();return!1})),this.$("#@unfollow").click(this.fnbind(function(){this.serverCall("unfollow").kwargs({qid:this.qid}).liveMutate().send();return!1}))}}),b.QuestionFollowingLink=QuestionFollowing.extend({onLoad:function(a){this.$("#@follow").mousedown(this.fnbind(function(){i.setQfeedLog(this,"QuestionFollow")})),this._super.apply(this,arguments)}}),b.QuestionNumberAnswers=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"QuestionAnswersClickthrough")}))}}),b.QuestionRedirectLink=l.extend({onLoad:function(){this.$("#@remove_redirect").click(this.fnbind(function(){this.serverCall("remove_redirect_question").kwargs({qid:this.qid}).liveMutate().send();return!1}))}}),b.QuestionLink=l.extend({onLoad:function(){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"QuestionClickthrough")}))}}),b.QuestionAnonLink=l.extend({onLoad:function(){this.$("#@set_anon").click(this.fnbind(function(){this.setAnon();return!1})),this.$("#@set_public").click(this.fnbind(function(){this.setPublic();return!1}))},setAnon:function(){this.serverCall("set_anon_question").kwargs({qid:this.qid}).liveMutate().send()},setPublic:function(){$(".content").dialog({title:"Remove Question Anonymity",contents:"Are you sure you want to be publicly associated with this question?",mobile:this.mobile,buttons:{"Remove Anonymity":this.fnbind(function(){this.serverCall("set_public_question").kwargs({qid:this.qid}).liveMutate().send()}),Cancel:null}})}}),b.ContextTopicEditor=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(a){this.$("#@menu").menu(this.$("#@menu_link"));return!1})),this.$("#@search").click(this.fnbind(function(){this.$("#@selector").show(),this.$("#@menu_link").hide(),this.lookup("selector").focus();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.$("#@selector").hide(),this.$("#@menu_link").show();return!1}))}}),b.ContextTopicEditorLink=l.extend({onLoad:function(){this.$("#@set_context").click(this.fnbind(function(a){this.serverCall("set_context").kwargs({object_id:this.object_id,context_tid:this.context_tid}).liveMutate().send();return!1}))}}),b.RemoveContextTopicLink=l.extend({onLoad:function(){this.$("#@remove_context").click(this.fnbind(function(a){this.serverCall("remove_context").kwargs({object_id:this.object_id}).liveMutate().send();return!1}))}}),b.LicenseItem=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(a){this.$("#@text").toggle(),this.$("#@view_license").toggle(),this.$("#@hide_license").toggle();return!1}))}}),b.QuestionSettingsLink=l.extend({onLoad:function(){this.$("#@question_settings_link").click(this.fnbind(function(a){this.$("#@question_settings_menu").menu(this.$("#@question_settings_link"));return!1}))}}),b.OptionsMenuLink=l.extend({onLoad:function(){this.$("#@options_link").click(this.fnbind(function(a){this.$("#@options_menu").menu(this.$("#@options_link"));return!1}))}}),b.NamesMenuLink=l.extend({onLoad:function(){this.$("#@names_link").click(this.fnbind(function(a){this.$("#@names_menu").menu(this.$("#@names_link"));return!1}))}}),b.UploadDialogContents=l.extend({onLoad:function(){this.$("#@web_upload_link").click(this.fnbind(function(){this.$("#@view_web_upload").hide(),this.$("#@web_upload").show(),this.lookup("upload_web").focus();return!1})),this.child("upload_form").success(this.fnbind(this.uploadSuccess))},uploadSuccess:function(){}}),b.EditPhotoDialogContents=UploadDialogContents.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@from_facebook").click(this.fnbind(function(a){this.fb_uid&&require("facebook").onInit(this.fnbind(function(){FB.api({method:"fql.query",query:"SELECT pic_big FROM user WHERE uid = "+this.fb_uid},this.fnbind(function(a){var b=a[0];b.pic_big?(this.$("#@view_web_upload").hide(),this.$("#@web_upload").hide(),this.lookup("upload_web").$("#@url").hide().val(b.pic_big),this.lookup("upload_web").$("#@download").click(),this.$("#@web_upload").show()):a1ert("You don't seem to have a profile picture on Facebook.")}))}))}));return!1},uploadSuccess:function(){this.serverCall("upload").kwargs({target_id:this.target_id,target:this.target}).contentFor(this.$("#@iframe"),{parentCID:this.cid}).send()}}),b.UploadQTextImageDialogContents=UploadDialogContents.extend({uploadSuccess:function(a){var b=f.Dialog.openerFor(this);f.Dialog.dialogFor(this).close_(),b.addImage(a.qimg_url)}}),b.EditPhotoDialogLink=l.extend({onLoad:function(){this.$("#@open_edit_photo").click(this.fnbind(function(){this.editPhoto();return!1}))},editPhoto:function(){this._dialog||(this._dialog=this.dialog().title(this.dialog_title).cancel(null,"Close").load("set_dialog_contents").close(this.fnbind(function(){this._dialog=null})))}}),b.InlineUploadWeb=l.extend({onLoad:function(){var a=this;a.$("#@download").click(function(){var b=a.$("#@url").focus().val(),c;b&&(c=new Image,c.onload=function(){a.download(b)},c.onerror=function(){a1ert("Please enter the URL of a valid image."),a.$("#@url").val("")},c.src=b);return!1})},download:function(a){},focus:function(){this.$("#@url").focus()}}),b.InlineUploadPhotoWeb=InlineUploadWeb.extend({download:function(a){this.serverCall("download").kwargs({target_id:this.target_id,target:this.target,url:a}).contentFor(this.$("#@wrapper"),{parentCID:this.cid}).liveMutate().except("image_error",this.fnbind(function(a){a1ert(a.message),f.Dialog.dialogFor(this).close_()})).send();return!1}}),b.InlineUploadQTextImageWeb=InlineUploadWeb.extend({download:function(a){var b=f.Dialog.openerFor(this);f.Dialog.dialogFor(this).close_(),b.addImage(a)}}),b.InlinePhotoEditor=l.extend({onLoad:function(){this.$("#@photo").hover(this.fnbind(function(a){this.$("#@edit").show(),this.$("#@x_photo").show()}),this.fnbind(function(a){this.$("#@edit").hide(),this.$("#@x_photo").hide()})),this.$("#@x_photo").click(this.fnbind(function(){this.dialog().title("Remove Profile Photo").cancel(null,"Close").ok(this.fnbind(function(){this.serverCall("remove_photo").send()}),"Remove Photo").html("Are you sure you want to remove your profile photo?");return!1}))}}),b.SuggestProfilePhoto=l.extend({onLoad:function(){this.$("#@photo").hover(this.fnbind(function(a){this.$("#@add, #@edit").show()}),this.fnbind(function(a){this.$("#@add, #@edit").hide()}))}}),b.ProfilePhoto=l.extend({toggleSuggestion:function(){this.$("#@view_pending").toggle(),this.$("#@pending").toggle();var a=this.parent().$("#@user_action_link");$(this.$("#@pending")).is(":visible")?a.addClass("w1").removeClass("w1_5"):a.removeClass("w1").addClass("w1_5")}}),b.SuggestedPhotoPending=l.extend({onLoad:function(){this.suggestion_from_viewer||this.$("#@photo").hover(this.fnbind(function(a){this.$("#@pending").show()}),this.fnbind(function(a){this.$("#@pending").hide()})),this.$("#@view").click(this.fnbind(function(){this.parent().toggleSuggestion();return!1}))}}),b.SuggestSigLinkWithDialog=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this._dialog=this.dialog().title("Suggest Topic Biographies to "+this.name).cancel(null,"Close").load("load_contents");return!1}))}}),b.SuggestedSigOptions=l.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){this.parent().parent().toggleSuggestion();return!1}))}}),b.SuggestedSigAccept=l.extend({onLoad:function(){this.$("#@accept").click(this.fnbind(function(){this.serverCall("accept").kwargs({to_uid:this.uid,tid:this.tid}).liveMutate().send();return!1}))}}),b.SuggestedPhotoAccept=l.extend({onLoad:function(){this.$("#@accept").click(this.fnbind(function(){this.serverCall("accept").kwargs({uid:this.uid}).liveMutate().send();return!1}))}}),b.SuggestedSigDiscard=l.extend({onLoad:function(){this.$("#@discard").click(this.fnbind(function(){this._dialog=this.dialog().title("Discard Suggestion?").ok(this.fnbind(function(){this.serverCall("discard").kwargs({to_uid:this.uid,tid:this.tid}).liveMutate().send()}),"Discard Suggestion").cancel(null,"Cancel").html("Are you sure you want to delete this suggested biography?");return!1}))}}),b.SuggestedPhotoDiscard=l.extend({onLoad:function(){this.$("#@discard").click(this.fnbind(function(){this._dialog=this.dialog().title("Discard Suggestion?").ok(this.fnbind(function(){this.serverCall("discard").kwargs({to_uid:this.to_uid}).liveMutate().send()}),"Discard Suggestion").cancel(null,"Cancel").html("Are you sure you want to delete this suggested profile photo?");return!1}))}}),b.UserSig=l.extend({onLoad:function(){this.$("#@view").click(this.fnbind(function(){this.toggleSuggestion();return!1}))},toggleSuggestion:function(){this.$("#@pending").toggle(),this.$("#@view").toggle()}}),b.ReportNameLink=l.extend({onLoad:function(){this.$("#@report").click(this.fnbind(function(){this.serverCall("report").kwargs({target_uid:this.target_uid}).liveMutate().success(this.fnbind(function(){})).send();return!1}))}}),b.ReportUserDialog=l.extend({onLoad:function(){this.$("#@report").click(this.fnbind(function(){this._dialog=this.dialog().title("Report "+this.name).cancel(null,"Cancel").load("report_dialog_contents");return!1}))}}),b.SuggestAnswerMove=l.extend({onLoad:function(){this.$("#@move").click(this.fnbind(function(){if(!this._dialog){this._dialog=this.dialog().title("Suggest Moving Answer").ok(this.fnbind(function(){this.serverCall("suggest_answer_move").kwargs({aid:this.aid,new_qid:this.new_qid}).liveMutate().send()}),"Suggest Answer Move").cancel(null,"Cancel").load("confirm_suggested_answer_move",{kwargs:{new_qid:this.new_qid,old_qid:this.old_qid,aid:this.aid}});return!1}})),this.$("#@undo").click(this.fnbind(function(){if(!this._dialog){this._dialog=this.dialog().title("Undo Moving Answer Suggestion").ok(this.fnbind(function(){this.serverCall("undo_suggest_answer_move").kwargs({aid:this.aid}).liveMutate().send()}),"Discard Suggestion").cancel(null,"Cancel").html("Are you sure you want to discard the suggestion to move this answer?");return!1}}))}}),b.AnswerMoveButton=l.extend({onLoad:function(){this.$("#@move").click(this.fnbind(function(){if(!this._dialog){this._dialog=this.dialog().title("Confirm Moving Answer").ok(this.fnbind(function(){this.serverCall("move_answer").kwargs({aid:this.aid,new_qid:this.new_qid}).liveMutate().send()}),"Move Answer").cancel(null,"Cancel").load("confirm_answer_move",{kwargs:{new_qid:this.new_qid,aid:this.aid}});return!1}}))}}),b.AddQuestionAliasList=l.extend({onLoad:function(){this.$("#@create_link").click(this.fnbind(function(){this.$("#@create").hide(),this.$("#@add_alias").show(),this.lookup("input").$("#@input").focus();return!1})),this.$("#@add").click(this.fnbind(function(){var a=this.lookup("input").$("#@input").val();a&&this.serverCall("add_question_alias").kwargs({qid:this.qid,alias:a}).success(this.fnbind(function(){this.lookup("input").$("#@input").val(""),this.lookup("input").$("#@input").focus()})).liveMutate().send();return!1}))}}),b.QuestionAliasText=l.extend({onLoad:function(){this.$("#@edit").click(this.fnbind(function(){this.toggleEditor();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.toggleEditor();return!1})),this.$("#@update").click(this.fnbind(function(){var a=this.lookup("input").$("#@input").val();a&&this.serverCall("edit_question_alias").kwargs({qid:this.qid,alias_id:this.alias_id,new_alias:a}).success(this.fnbind(function(){this.lookup("input").$("#@input").val(""),this.toggleEditor()})).liveMutate().send();return!1}))},toggleEditor:function(){this.$("#@text").toggle(),this.$("#@editor").toggle(),this.parent().$("#@remove").toggle()}}),b.QuestionAliasItem=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Remove Question Alias"}).click(this.fnbind(function(){this.clear(),this.$("#@text").addClass("item_selected");if(!this._dialog){this._dialog=this.dialog().title("Confirm Question Alias Removal").ok(this.fnbind(function(){this.serverCall("remove_question_alias").kwargs({qid:this.qid,alias_id:this.alias_id}).liveMutate().send()}),"Remove Alias").cancel(this.fnbind(function(){this.clear()}),"Cancel").html("Are you sure you want to remove this alias?");return!1}})),this.$("#@item").hover(this.fnbind(function(a){this.$("#@remove").show()}),this.fnbind(function(a){this.$("#@remove").hide()}))},clear:function(){$(".item_selected").removeClass("item_selected")}}),b.QuestionRedirectDialogContents=l.extend({onLoad:function(){this.to_qid=null,this.lookup("question_selector").setExtraFocus(this.fnbind(function(){this.$("#@related").hide()})),this.$("#@cancel").click(this.fnbind(function(){this.closeDialog();return!1})),this.$("#@redirect").click(this.fnbind(function(){var a=this.$("#@to_qid").val(),b=this.lookup("question_selector").$("#@input").val();if(a)this.createRedirect(a);else if(b)this.serverCall("add_question_redirect_from_url").kwargs({url:b}).error(function(){a1ert("There was a problem redirecting the question.")}).success(this.fnbind(function(a){a||(this.$("#@pick_redirect").show(),this.$("#@pick_redirect").text("The text you entered does not match a question or question URL."))})).liveMutate().send(),this.closeDialog();else return!1;return!1}))},createRedirect:function(a){!a||(this.serverCall("add_question_redirect").kwargs({to_qid:a}).liveMutate().send(),this.closeDialog())},closeDialog:function(){f.Dialog.openerFor(this).closeDialog()},setDialogTitle:function(a){f.Dialog.openerFor(this).setTitle(a)}}),b.QuestionRedirectLinkWithDialog=l.extend({onLoad:function(){this.$("#@redirect_question_with_dialog_link").click(this.fnbind(function(){this._dialog=this.dialog().title("Redirect Into An Existing Question").load("redirect_question_dialog_contents");return!1}))},closeDialog:function(){this._dialog.close_()},setTitle:function(a){this._dialog.setTitle(a)}}),b.QuestionRedirectQuestionLink=l.extend({onLoad:function(){this.$("#@redirect").click(this.fnbind(function(){this.parent().createRedirect(this.to_qid);return!1}))}}),b.TeamPhoto=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){window.__currentTeamPhotoDialog&&window.__currentTeamPhotoDialog.close_(),window.__currentTeamPhotoDialog=this.dialog().opt("closeOnClickOut",!0).title().cancel("Close").load("get_team_bio");return!1}))}}),b.FollowAllEmployeesButton=l.extend({onLoad:function(a){this.$("#@follow_all").click(this.fnbind(function(){this.serverCall("follow_all").liveMutate().send();return!1}))}}),b.TitleContentVerticalDisclosureItem=l.extend({onLoad:function(){this.$("#@body_content_disclosure_link").click(this.fnbind(function(a){this.$("#@body_content_to_disclose").toggle();return!1}))}}),b.QuestionDeleteLink=l.extend({onLoad:function(){var a=this;this.$("#@delete_question_link").click(function(){$(".content").dialog({title:"Question Delete",contents:"Are you sure you wish to delete this question?",buttons:{Ok:function(){a._request("delete_question")},Cancel:null}});return!1}),this.$("#@undelete_question_link").click(function(){$(".content").dialog({title:"Restore Question",contents:"Are you sure you wish to restore this question?",buttons:{Ok:function(){a._request("undelete_question")},Cancel:null}});return!1})},_request:function(a){this.serverCall(a).kwargs({qid:this.qid}).liveMutate().send()}}),b.PostDeleteLink=l.extend({onLoad:function(){var a=this;this.$("#@delete").click(function(){$(".content").dialog({title:"Delete Post",contents:"Are you sure you wish to delete this post?",buttons:{Ok:function(){a._request("delete")},Cancel:null}});return!1}),this.$("#@undelete").click(function(){$(".content").dialog({title:"Restore Post",contents:"Are you sure you wish to restore this post?",buttons:{Ok:function(){a._request("undelete")},Cancel:null}});return!1})},_request:function(a){this.serverCall(a).kwargs({pid:this.pid}).liveMutate().send()}}),b.AnswerActions=k.SwitchableComponent.extend({init:function(a){this._super.apply(this,arguments),this.ajax_path="/question/ajax_edit_answer_POST"},getFacebookLikeHoverArea:function(){return this.$("#@answer")},onVisible:function(){if(!this.initState("first_call",!0))if(n("ans"+this.aid)){var a=this.lookup("collapsed_answers_div");a&&a.$("#@expanded_content").has(this.$("#@answer")).size()&&a.expandAnswers(),this.$("#@answer").addClass("highlighter");var b=this.$("#@answer").offset();m(b),$(window).scroll(this.fnbind(function(){var a=$(window).scrollTop();a-30>b.top&&this.$("#@answer").removeClass("highlighter")}))}},onLoad:function(a){this.$("#@answer_versions_link").click(this.fnbind(function(a){this.$("#@answer_versions").toggleClass("hidden");return!1})),this.$("#@answer_content_uncollapse_link").click(this.fnbind(function(a){this.$("#@answer").toggleClass("hidden"),this.$("#@bad_answer").toggleClass("hidden");return!1})),this.$("#@show_actions").click(this.fnbind(function(){this.$("#@show_actions").addClass("hidden"),this.$("#@show_actions_bullet").addClass("hidden"),this.$("#@actions_list").removeClass("hidden");return!1})),this.$("#@answer_user").hover(this.fnbind(function(a){this.$("#@answer_user").addClass("hover")}),this.fnbind(function(a){this.$("#@answer_user").removeClass("hover")})),this.unseen.bound||(d(document,"scroll",this.fnbind(this.recordImpressions)),setTimeout(this.fnbind(this.recordImpressions),400),this.unseen.bound=!0),this.unseen.answers[this.cid]=this,this.setCallback(this.fnbind(function(){this.lookup("comment_switch").viewComments()}))},unseen:{bound:!1,answers:{},lastCheckTime:0,rateLimit:500},recordImpressions:function(){var a=+(new Date);if(a>=this.unseen.lastCheckTime+this.unseen.rateLimit){this.unseen.lastCheckTime=a;var b=[],c=[];for(var d in this.unseen.answers){var e=this.unseen.answers[d];e.$("#@answer").is(":in-viewport")&&(b.push(e),c.push(e.aid),delete this.unseen.answers[d])}b.length>0&&b[0].serverCall("log_impressions").kwargs({seen:c}).send()}},onUnload:function(){delete this.unseen.answers[this.cid]}}),b.AnswerAddAskToAnswerHeader=l.extend({onLoad:function(){this.loaded=!1,this.$("#@ask_to_answer_link").click(this.fnbind(function(a){this.loaded||this.serverCall("wanted_answer").contentFor(this.parent().$("#@wanted_answer_section"),{parentCID:this.parent().cid}).success(this.fnbind(function(a){this.loaded=!0})).send(),this.showAskToAnswer();return!1})),this.show_link?this.$("#@add_answer_link").click(this.fnbind(function(a){this.showAddAnswer();return!1})):this.showAddAnswer()},showAskToAnswer:function(){this.parent().$("%@ask_to_answer_group").show(),this.parent().$("%@add_answer_group").hide(),this.$("%@ask_to_answer_group").show(),this.$("%@add_answer_group").hide()},showAddAnswer:function(){this.parent().$("%@ask_to_answer_group").hide(),this.parent().$("%@add_answer_group").show(),this.$("%@ask_to_answer_group").hide(),this.$("%@add_answer_group").show()}}),b.TopicSetSubTabs=l.extend({onLoad:function(){this.loaded=!1,this.$("#@more").click(this.fnbind(function(){this.loaded||this.serverCall("all_topic_set").contentFor(this.$("#@all"),{parentCID:this.cid}).success(this.fnbind(function(){this.showAll(),this.loaded=!0})).send();return!1})),this.$("%@suggestions").click(this.fnbind(function(){this.$("%@suggestions").toggle(),this.$("#@suggestions").show();return!1})),this.$("#@hide_suggestions").click(this.fnbind(function(){this.$("%@suggestions").toggle(),this.$("#@suggestions").hide();return!1}))},showAll:function(){this.$("#@all").show(),this.$("#@preview").hide()}}),b.AnswerDeleteLink=l.extend({onLoad:function(){this.$("#@answer_delete").click(this.fnbind(function(a){this._dialog=this.dialog().title("Delete Answer").cancel(null,"Cancel").ok(this.fnbind(function(){this.request("remove_answer")}),"Delete Answer").close(this.fnbind(function(){this._dialog=null})).html("Are you sure you wish to delete this answer?");return!1})),this.$("#@answer_undelete").click(this.fnbind(function(a){this._dialog=this.dialog().title("Restore Answer").cancel(null,"Cancel").ok(this.fnbind(function(){this.request("unremove_answer")}),"Restore Answer").close(this.fnbind(function(){this._dialog=null})).html("Are you sure you wish to restore this answer?");return!1}))},request:function(a){this.serverCall(a).kwargs({aid:this.aid}).liveMutate().send()}}),b.AnswerVotingButtons=l.extend({onLoad:function(a){this.$("#@answer_vote_up_cancel_link").click(this.fnbind(function(){this.serverCall("answer_vote_up_cancel").kwargs({aid:this.aid,rating_ui_visible:this.rating_ui_visible}).liveMutate().send();return!1})),this.$("#@answer_vote_up_link").click(this.fnbind(function(){i.setTlog({type:"AnswerVoteUp",aid:this.aid}),i.setQfeedLog(this,"AnswerUpvote"),this.serverCall("answer_vote_up").kwargs({aid:this.aid,rating_ui_visible:this.rating_ui_visible,topic_visibility_context:$("#topic_visibility_context").val()?$("#topic_visibility_context").val():0}).liveMutate().send();return!1})),this.$("#@answer_vote_down_cancel_link").click(this.fnbind(function(){this.serverCall("answer_vote_down_cancel").kwargs({aid:this.aid,rating_ui_visible:this.rating_ui_visible}).liveMutate().send();return!1})),this.$("#@answer_vote_down_link").click(this.fnbind(function(){i.setTlog({type:"AnswerVoteDown",aid:this.aid}),this.serverCall("answer_vote_down").kwargs({aid:this.aid,rating_ui_visible:this.rating_ui_visible}).liveMutate().send();return!1}))}}),b.RemoveFlagAsNotForReproduction=l.extend({onLoad:function(){this.$("#@reproduction").click(this.fnbind(function(a){this.serverCall("available_for_reproduction").liveMutate().send();return!1}))}}),b.TrackbackLink=b.ExpandableComponent.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(a){this.parent().lookup("trackbacks").toggle(),this.lookup("comments_list")&&this.lookup("comments_list").state("expanded",!1);return!1}))}}),b.Trackbacks=b.ExpandableComponent.extend({onLoad:function(){this.loaded=!1,h.getHash().substr(0,8)=="#reposts"&&this.object_id==h.getHash().substr(8)&&(this.toggle(),this.$("#@trackbacks").show())},toggle:function(){this.loaded||this.serverCall("trackback_list").contentFor(this.$("#@trackback_list"),{parentCID:this.cid}).success(this.fnbind(function(a){this.loaded=!0})).send(),this.$("#@trackbacks").toggle()},hideTrackbacks:function(){this.$("#@trackbacks").hide()}}),b.TopicListItem=l.extend({onLoad:function(){this.$("#@remove_topic").tooltip({contents:"Remove"}).click(this.fnbind(function(a){this.serverCall("remove_topic").liveMutate().send();return!1})),this.$("#@remove_topic").hover(this.fnbind(function(a){this.$("#@topic_list_item").addClass("hover")}),this.fnbind(function(a){this.$("#@topic_list_item").removeClass("hover")}))}}),b.TopicSetListItem=l.extend({onLoad:function(){var a=this;this.$("#@item").hover(function(b){a.$("#@remove").show()},function(b){a.$("#@remove").hide()}),this.$("#@remove_topic").click(this.fnbind(function(a){this.serverCall("remove_topic").liveMutate().send();return!1}))}}),b.UserFollowLink=l.extend({onLoad:function(){this.$("#@follow_user").click(this.fnbind(function(a){i.setQfeedLog(this,"UserFollow"),i.setTlog({type:"UserFollow",uid:this.uid}),this.serverCall("follow_user").liveMutate().send();return!1})),this.$("#@unfollow_user").click(this.fnbind(function(a){this.serverCall("unfollow_user").liveMutate().send();return!1}))}}),b.FeedStoryItem=l.extend({onLoad:function(){var a=this;this.$("#@item").hover(function(b){a.$("#@item").addClass("hover")},function(b){a.$("#@item").removeClass("hover")})},getHash:function(){return this.hash}}),b.RemoveTopicMenu=l.extend({onLoad:function(){this.$("#@options_link").click(this.fnbind(function(){this.$("#@options_menu").menu(this.$("#@options_link"),{position_relative:!0,close_on_click:!1}),this.parent().showRemove();return!1}));var a=this;$(".topic_set_menu .menu_list_item a").click(function(){a.parent().hideRemove()}),$(document).click(function(){a.parent().hideRemove()}),this.$("#@edit").click(this.fnbind(function(){this.parent().openEditor();return!1})),this.$("#@move").click(this.fnbind(function(){this.parent().$("#@selector").show(),this.parent().lookup("selector").focus();return!1}))}}),b.QuestionReviewEditor=k.ToggledComponent.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@update").click(this.fnbind(function(){this.updateQuestion();return!1})),this.$("#@update_review").click(this.fnbind(function(){this.updateQuestion(),this.markReviewed();return!1})),this.$("#@review").click(this.fnbind(function(){this.markReviewed();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.close();return!1}))},markReviewed:function(){this.serverCall("mark_reviewed").kwargs({qid:this.qid,tid:this.tid}).success(this.fnbind(function(){this.close()})).liveMutate().send()},updateQuestion:function(){this.lookup("text").isEmpty()||this.serverCall("update_question").kwargs({qid:this.qid,text:this.lookup("text").serialize(),details:this.lookup("details").serialize()}).success(this.fnbind(function(){this.close()})).liveMutate().send()},close:function(){this.parent().closeEditor()}}),b.HomepageFeedStoryItem=l.extend({init:function(){this._super.apply(this,arguments),this.setDvar("feed_story_hash",this.hash)},getHash:function(){return this.hash}}),b.HomeFeedExtraStories=l.extend({onLoad:function(){this.$("#@extra_link").click(this.fnbind(function(){this.serverCall("append_extra_stories").liveMutate().send();return!1}))}}),b.QuestionHomepageFeed=PagedList.extend({init:function(){this._super.apply(this,arguments),this.hash_impressions={},this.hash_clicks={},this.last_check_time=0,this.rate_limiter_ms=2500,this.setDvar("feed_story_hash",null),this.setDvar("feed_story_position",null),this.setDvar("feed_story_initial",null)},onLoad:function(a){this._super.apply(this,arguments),this.recordImpressions(!0);var b=this.fnbind(this.recordImpressions,!1);this._mousemove_handler=d(document,"mousemove",b),this._keypress_handler=d(document,"keypress",b),this._scroll_handler=d(document,"scroll",b)},onUnload:function(){e(document,"mousemove",this._mousemove_handler),e(document,"keypress",this._keypress_handler),e(document,"scroll",this._scroll_handler)},recordImpressions:function(a){if(!this.debug){var b=+(new Date);if(b<this.last_check_time+this.rate_limiter_ms)return;this.last_check_time=b;var c=[],d=this.children(),e=null,g;for(g=0;g<d.length;g++){var h=d[g];if(!h.getHash)continue;var i=h.getHash();if(!i||this.hash_impressions[i])continue;var j=f._domids[h.cid];if(!j)continue;var k=document.getElementById(j);if(!k)continue;var l=$(k);if(!l.children("div:first").is(":in-viewport"))continue;if(!l.is(":visible"))continue;if(e==null&&a){var m=this.orderedVisibleChildren();e={};for(var n=0;n<m.length;n++)e[m[n]]=n}this.hash_impressions[i]=!0;var o=0;a&&(o=e[j],h.setDvar("feed_story_position",o),h.setDvar("feed_story_initial",!0)),c.push({hash:i,initially_visible:a,position:o})}c.length>0&&this.serverCall("log_impressions").kwargs({data:c}).send()}}}),b.QuestionTopics=l.extend({onLoad:function(){this.$("#@view_all_link").tooltip({contents:"Click to view all topics"}),this.$("#@view_all_link").click(this.fnbind(function(){this.$("#@view_all").addClass("hidden"),this.$("#@view_all_link").addClass("hidden"),this.$("#@all_topics").removeClass("hidden");return!1}))}}),b.NeedTopicsListItem=l.extend({onLoad:function(){var a=this;this.$("#@item input.question_box").keydown(function(b){if(b.keyCode==9&&!b.shiftKey)for(var c=f.getLiveDomId(a.cid),d=a.parent().orderedVisibleChildren(),e=0;e<d.length-1;++e)if(c==d[e]){$(this).blur(),$("#"+d[e+1]+" input.question_box").focus();return!1}})},markHasEnoughTopics:function(){this.$("#@item").removeClass("item_selected")}}),b.NeedTopicsQuestionInfo=l.extend({onLoad:function(){this.has_enough_topics&&this.lookup("need_topics_list_item").markHasEnoughTopics()}}),b.ObjectBrowser=l.extend({onLoad:function(){this.$("#@browser_submit").click(this.fnbind(function(){this.shareRequest(),this.close();return!1})),this.$(".@browser_close").click(this.fnbind(function(){this.close();return!1})),this.$("#@browser_next").click(this.fnbind(function(){if(this.countObjects()<=0)return!1;this.$("#@number_contacts").text(this.countObjects()),this.$("#@browser_list").addClass("hidden"),this.$("#@browser_preview").removeClass("hidden");return!1})),this.$("#@browser_prev").click(this.fnbind(function(){this.$("#@browser_list").toggleClass("hidden"),this.$("#@browser_preview").toggleClass("hidden");return!1}))},countObjects:function(){return $(":input[checked=true]").length},close:function(){$("#object_browser").remove()},shareRequest:function(){var a={object_id:this.object_id,type:this.type,msg_json:this.lookup("editor").serialize()};$(":input").each(function(){$(this).attr("checked")&&(a[$(this).attr("name")]=1)}),this.serverCall("share").liveMutate().kwargs(a).send()}}),b.TopicBrowser=ObjectBrowser.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@browser_next").click(this.fnbind(function(){var a=0,b="";$(".dialog .selected .topic_name").each(function(c){a>0&&(b+=", "),b+='<a href="#">'+$(this).text()+"</a>",a++}),a==1?this.$(".@topic_plural").text(""):this.$(".@topic_plural").text("s"),this.$("#@object_names_preview").html(b)}))}});var o=null;b.PagerBase=l.extend({onLoad:function(a){this.last=parseInt(this.limit)+parseInt(this.offset),a&&this.is_hot_keyed&&!o&&(o=this.parent()),this.is_hot_keyed&&o&&(a?(o.registerPager(this),o.setPager(0)):(o.registerPager(this),o.active&&!o.focusedIndex&&(o.setPager(1),o.setFocusIndex(this.offset))))}}),b.SimplePageMore=l.extend({init:function(a){this._super.apply(this,arguments),this.open=!1},onLoad:function(a){this.$("#@pager_next").click(this.fnbind(function(){this.open?(this.$("#@pager_next").addClass("hidden"),this.$("#@pager_next_tray").removeClass("hidden")):(this.more(),this.$("#@pager_preload_tray").removeClass("hidden"));return!1})),this.load(this.$("#@pager_preload_tray"),"/pager/preload_POST")},more:function(){this.open=!0,this.load(this.$("#@pager_next_tray"),"/pager/next_POST")},load:function(a,b){this.offset=this.offset+this.limit;var c={object_id:this.object_id,type:this.type,offset:this.offset,limit:this.limit};a.setContentFromAJAXComponent(b,c,this.cid,null,this.fnbind(function(b){(!a.text()||a.text()=="")&&this.$("#@pager_next").addClass("hidden")}))}}),b.TextareaAutoSize=l.extend({onLoad:function(){var a=null;this.max&&(a=this.max),this.t=$("textarea"),this.t.each(function(){var b=c(this,function(b){var c=$(this).height(),d=parseInt($(this)[0].scrollHeight)-8;a&&d>a&&(d=a),c<d&&$(this).css("height",(d<=8?12:d)+"px")});$(this).bind("keypress",b).bind("focus",b)})}}),b.QTextImageEnlarger=l.extend({onLoad:function(a){function c(a){return b[a]||(b[a]=$("<div>").addClass("enlarged_image").append($("<div>").addClass("enlarged_image_close").text("close")).append($("<div>").addClass("enlarged_image_inner").append($("<img />").attr("src",a))).append($("<a>").attr("href",a).attr("target","_blank").addClass("enlarged_image_zoom")))}if(!!a){var b={};$(document).mousedown(function(a){if(a.which===1){var b=$(a.target),d=b.attr("master_src"),e=b.hasClass("zoomable_in")||b.hasClass("zoomable_in_feed");if(!e||!d)return;var f=10,g=$(window).width(),h=$(window).height(),i=parseInt(b.attr("master_w")),j=parseInt(b.attr("master_h")),k=g-4*f,l=h-4*f,m=i,n=j,o=c(d),p=!0;m>k&&(n*=k/m,m=k,p=!1);var q=n/m<2,r=!q&&n>l;q&&n>l&&(m*=l/n,n=l,p=!1),o.find("a.enlarged_image_zoom").toggle(!p),r?o.addClass("full_height").css("top",$(window).scrollTop()+f+"px").css("left",Math.round($(window).scrollLeft()+f+(k-m)/2)+"px"):o.removeClass("full_height").css("top",Math.round(f+(l-n)/2)+"px").css("left",Math.round(f+(k-m)/2)+"px"),o.css("width",Math.round(m)+"px").css("height",Math.round(n)+"px").appendTo("body"),o.find(".enlarged_image_close, .enlarged_image_inner").click(function(a){o.remove()});return!1}}),$(document).bind("keydown._enlarged_image",function(a){if(a.keyCode==27)for(var c in b)b[c].remove()})}}}),b.ProfileStructuredTopic=l.extend({onLoad:function(a){a||this.lookup("selector").focus(!0)}}),b.QTextGIFPlayer=l.extend({onLoad:function(a){!a||$(document).click(this.fnbind(function(a){var b=$(a.target).parent("[gif-embedded]");if(!!b){var c=b.attr("gif-embedded"),d=b.attr("background-url");if(b.attr("is-playing")=="false"){var e=new Image;function f(){b.children(".qtext_image").attr("src",c),b.children(".gif_embed_noclick").css("visibility","hidden"),b.attr("is-playing","true")}e.onload=f,e.src=c}else b.children(".qtext_image").attr("src",d),b.children(".gif_embed_noclick").css("visibility","visible"),b.attr("is-playing","false")}}))}}),b.QTextEmbedEnlarger=l.extend({onLoad:function(a){!a||$(document).click(this.fnbind(function(a){var b=$(a.target),c=undefined;b.attr("data-embed")?c=b.attr("data-embed"):(b=b.parent(),c=b&&b.attr("data-embed")),!!c&&!!b.hasClass("thumbnail")&&this.loadEmbed(b,c)}))},loadEmbed:function(a,b){var c=this;if(!window.YT){window.YT={},window.YT.players=[],window.YT.next_id=0;var d=document.createElement("script");d.src="http://www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e);var f=50,g=function g(d){d>=0&&window.setTimeout(function(){window.YT.Player?c.loadEmbed(a,b):g(d-f)},f)};g(1e4)}if(!!window.YT.Player){a.append(b).removeClass("thumbnail");var h="YTPlayer-"+YT.next_id++;a.find(":first-child").attr("id",h);var i=new window.YT.Player(h,{events:{onStateChange:function(a){return p(a,h)}}});window.YT.players.push({player:i,playerId:h,state:-1}),q(h)}}}),b.pauseYTPlayers=q,b.getYTPlayerStatuses=function(a,b){var c=[];a.find(".qtext_embed iframe").each(function(a,d){var e=$(d).attr("id"),f=$(d).parent().attr("data-yt-id");$.each(window.YT.players,function(a,b){if(b.playerId==e){var d=b.player.getCurrentTime();c.push({ytId:f,time:d,state:b.state})}}),b&&b(d)});return c},b.restoreYTPlayerStatuses=function(a,b){$.each(b,function(b,c){var d=a.find('.qtext_embed[data-yt-id="'+c.ytId+'"]');!d.size()||(d=d.get(0),$(d).click(),$.each(window.YT.players,function(a,b){b.playerId==$(d).find("iframe").attr("id")&&(b.onReady=function(a){a.player.seekTo(c.time),(c.state==window.YT.PlayerState.PAUSED||c.state==window.YT.PlayerState.ENDED)&&a.player.pauseVideo()})}))})},b.UserTopicPromote=l.extend({onLoad:function(a){this.$("#@add_featured_topic").tooltip({contents:"Move to Top"}),this.$("#@add_featured_topic").click(this.fnbind(function(){this.serverCall("add_featured_topic").liveMutate().send();return!1})),this.$("#@remove_featured_topic").tooltip({contents:"Remove from Top"}),this.$("#@remove_featured_topic").click(this.fnbind(function(){this.serverCall("remove_featured_topic").liveMutate().send();return!1}))}}),b.UserTopicFinder=l.extend({onLoad:function(a){this.$("#@link").click(this.fnbind(function(){this.$("#@link").addClass("hidden"),this.$("#@topic_selector").removeClass("hidden"),this.lookup("selector").focus();return!1}))}}),b.SimpleUserRequest=l.extend({onLoad:function(){var a=this;this.$("#@link").click(this.fnbind(function(){this.upvote&&(i.setQfeedLog(this,"BoardItemUpvote"),i.setTlog({type:"BoardItemUpvote",board_item_id:a.board_item_id}));if(this.board_follow_button||this.board_request_follow_button)i.setQfeedLog(this,"BoardFollow"),i.setTlog({type:"BoardFollow",bid:a.bid});this.serverCall("request").liveMutate().send();return!1}))}}),b.SimpleUserRequestConfirm=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this._dialog=this.dialog().title(this.title).cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("request").liveMutate().send()}),this.button_text).html("Are you sure you want to "+this.confirm_text+"?");return!1}))}}),b.SimpleUserRequestCommentConfirm=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this._dialog=this.dialog().title(this.title).cancel(null,"Cancel").ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.cQuery(":comment").serialize();this.serverCall("request").kwargs({comment:b}).liveMutate().send()}),this.button_text).load("comment_dialog");return!1}))}}),b.SimpleItemHover=l.extend({onLoad:function(){var a=this;this.$("#@item").hover(function(b){a.$("#@item").addClass("hover")},function(b){a.$("#@item").removeClass("hover")})}}),b.AddFollowersToBoardListItem=l.extend({onLoad:function(){var a=this;this.$("#@link").hover(function(b){a.$("#@link").addClass("action_button")},function(b){a.$("#@link").removeClass("action_button")}),this.$("#@link").click(this.fnbind(function(){this.serverCall("request").liveMutate().send();return!1}))}}),b.SimpleMenu=l.extend({onLoad:function(){this.options||(this.options={}),this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"),this.options);return!1}))}}),b.StaticBoardPrivacyMenu=l.extend({onLoad:function(){this.type=null,this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"),{position_relative:!0});return!1}));var a=this;$(".menu_list_items .static_link").click(function(){var b=$(this),c=b.text();a.$("#@menu_link").text(c),a.setType(b.attr("type"));return!1})},setType:function(a){this.type=a},getType:function(){return this.type}}),b.OperationApprove=l.extend({onLoad:function(){this.$("#@operation_undo_approve").click(this.fnbind(function(){this._request("approve_revision_remove");return!1})),this.$("#@operation_approve").tooltip({contents:"Confirm this change has been reviewed"}).click(this.fnbind(function(){this._request("approve_revision");return!1}))},_request:function(a){this.serverCall(a).kwargs({oid:this.oid}).liveMutate().send()}}),b.OperationRevert=l.extend({onLoad:function(){this.$("#@operation_revert").click(this.fnbind(function(){$(".content").dialog({title:"Revert Edit",url:"/ajax/revert_dialog",mobile:this.mobile,buttons:{Ok:this.fnbind(function(){var a=f.revertDialog.lookup("editor");a.isEmpty()||this.serverCall("revert_revision").kwargs(this.getKwargs(a)).liveMutate().send()}),Cancel:null}});return!1}))},getKwargs:function(a){return{oid:this.oid,comment:a.serialize()}}}),b.ReviewQueueOperationRevertLink=OperationRevert.extend({onLoad:function(){this._super.apply(this,arguments)},getKwargs:function(a){return{oid:this.oid,queue_id:this.queue_id,comment:a.serialize()}}}),b.TopicGroupReviewQueueOperationRevertLink=OperationRevert.extend({onLoad:function(){this._super.apply(this,arguments)},getKwargs:function(a){return{tid:this.tid,oid:this.oid,comment:a.serialize()}}}),b.ReviewNewQuestionsMain=l.extend({onLoad:function(){this.$("#@show").click(this.fnbind(function(){this.toggleAll();return!1})),this.$("#@hide").click(this.fnbind(function(){this.toggleAll();return!1})),this.$("#@popout").click(this.fnbind(function(a){var b=window.open("/inbox/popout_qrq","thread_qrq","height=590,width=296,scrollbars=1");return!1}))},toggleAll:function(){this.$("#@instructions").toggle(),this.$("#@show").toggle(),this.$("#@hide").toggle()}}),b.ReviewNewAnswersMain=l.extend({onLoad:function(){this.$("#@show").click(this.fnbind(function(){this.toggleAll();return!1})),this.$("#@hide").click(this.fnbind(function(){this.toggleAll();return!1})),this.$("#@popout").click(this.fnbind(function(a){var b=window.open("/inbox/popout_arq","thread_arq","height=590,width=296,scrollbars=1");return!1}))},toggleAll:function(){this.$("#@instructions").toggle(),this.$("#@show").toggle(),this.$("#@hide").toggle()}}),b.ReviewNewTopicsMain=l.extend({onLoad:function(){this.$("#@show").click(this.fnbind(function(){this.toggleAll();return!1})),this.$("#@hide").click(this.fnbind(function(){this.toggleAll();return!1})),this.$("#@popout").click(this.fnbind(function(a){var b=window.open("/inbox/popout_trq","thread_trq","height=590,width=296,scrollbars=1");return!1}))},toggleAll:function(){this.$("#@instructions").toggle(),this.$("#@show").toggle(),this.$("#@hide").toggle()}}),b.LiveTestDialog=l.extend({onLoad:function(){this.$("link").bind("click",function(a){$(".content").dialog({title:"LiveDep Dialog",url:"dialog"})})}}),b.TestAC=l.extend({onLoad:function(){this.$("click_me").click(this.fnbind(function(a){this.$("x").setContentFromAJAXComponent("ac_POST")}))}}),b.DateTimeComponent=l.extend({onLoad:function(){if(this.js_disp){var a=new Date;a.setTime(this.epoch_us/1e3),this.ge("@datespan").innerHTML=a.getHours()+":"+a.getMinutes()+" on "+a.toDateString()}}}),b.SessionRow=l.extend({onLoad:function(){this.$("#@logout_session_form").click(this.fnbind(function(a){f.rpc("/login/logout_session_POST").kwargs({hash:this.hash,time:this.time,uid:this.uid}).liveMutate().send();return!1}))}}),b.PMsg=l.extend({onLoad:function(){this.$("#@x").click(this.fnbind(function(){this.close();return!1}))},close:function(){$("#layout_header").css("margin-bottom",""),this.$("#@container").hide(),$(".pmsg_container").hide()}}),b.UndoTopicRemoval=PMsg.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@undo").click(this.fnbind(function(a){this.serverCall("undo").kwargs({poid:this.poid}).liveMutate().success(this.fnbind(function(a){clearTimeout(this.t),this.close()})).send();return!1}))}}),b.UndoTopicReplacement=PMsg.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@undo").click(this.fnbind(function(a){this.serverCall("undo").kwargs({add_oid:this.add_oid}).liveMutate().success(this.fnbind(function(a){clearTimeout(this.t),this.close()})).send();return!1}))}}),b.PMsgContainer=l.extend({onLoad:function(a){f.pmsgContainer=this,this.headerMargin=$("#layout_header").css("margin-bottom"),this.headerHeight=$("#layout_header").outerHeight(),this.installScrollHandlers(this.setPosition);var b=this.fnbind(function(){this.setPosition()}),c=setTimeout(b,50)},onUnload:function(){this.uninstallScrollHandlers()},setPosition:function(){if(this.$("#@pmsg_container").html()&&!this.mobile){this.$("#@pmsg_container").show();var a=this.$("#@pmsg_container").outerHeight(),b=parseInt(this.$("#@pmsg_container").css("margin-bottom").replace("px","")),c=$(window).scrollTop(),d=a+b;c>this.headerHeight?(this.$("#@pmsg_container").addClass("header_bar_fixed"),$("#layout_header").css("margin-bottom",d+"px")):(this.$("#@pmsg_container").removeClass("header_bar_fixed"),$("#layout_header").css("margin-bottom","0px"))}},setContent:function(a,b){this.$("#@pmsg_container").is(":visible")?this.$("#@pmsg_container").find(".contents").fadeOut(350,this.fnbind(function(){this.$("#@pmsg_container").setContent(a),this.$("#@pmsg_container").find(".contents").slideDown(350)})):(this.$("#@pmsg_container").setContent(a),this.setPosition(),this.$("#@pmsg_container").hide(),this.$("#@pmsg_container").slideDown(350));return this}}),b.SWFComponent=l.extend({onLoad:function(){require("swfobject").embedSWF(this.swf_url,this.id,this.width,this.height,this.version,this.express_install_swf_url,this.flashvars,this.params,this.attributes,this.fnbind(this.callback))},callback:function(a){a.success?typeof this.success=="function"&&this.success(a):$.serverLog("Flash embed failed for SWF","ERROR",{swf_url:this.swf_url})},obj:function(){return document.getElementById(this.id)}}),b.MouseTracker=SWFComponent.extend({success:function(a){f.MouseTracker=this,$("body").append($('<div id="__w2mousetracker_label" class="mouse_tracker_label"> </div>').hide()),this._componentInspectorOn=!1,$("#__w2mousetracker_component_inspector_toggle").click(this.fnbind(function(a){this.componentInspectorToggle();return!1})).show()},highlightCID:function(a,b){var c=b.target,d=$("[__w2_cid="+a+"]");d.addClass("mouse_tracker_highlight");var e=d.offset(),g=f._components[a],h="<h3>"+a+"</h3>";g&&(h+='<pre id="__w2mousetracker_component_data"> </pre>');var i=c.getAttribute("id");i&&(i.substr(0,5+a.length)=="__wn_"+a&&(i="@"+i.substr(6+a.length)),h+="<br /><span>id="+i+"</span>");var j=b.pageY-80;j<0&&(j=b.pageY+20);var k=$("#__w2mousetracker_label");k.html(h).css("top",j).css("left",b.pageX),k.show(),g&&(k.get(0).childNodes.item(1).childNodes.item(0).textContent=JSON.stringify(g.__js_init))},unhighlightCID:function(a,b){var c=b.target;$("[__w2_cid="+a+"]").removeClass("mouse_tracker_highlight"),$("#__w2mousetracker_label").hide()},componentInspectorOn:function(){if(this._componentInspectorOn)console.warn("Component Inspector already active.  Not turning on.");else{$("body").bind("mouseover.component_inspector",this.fnbind(function(a){var b=a.target.getAttribute("__w2_cid");b&&this.highlightCID(b,a)})).bind("mouseout.component_inspector",this.fnbind(function(a){var b=a.target.getAttribute("__w2_cid");b&&this.unhighlightCID(b,a)}));return this._componentInspectorOn=!0}},componentInspectorOff:function(){if(!this._componentInspectorOn)console.warn("Component Inspector not active.  Not turning off.");else{$("body").unbind("mouseover.component_inspector").unbind("mouseout.component_inspector");return this._componentInspectorOn=!1}},componentInspectorToggle:function(){return this._componentInspectorOn?this.componentInspectorOff():this.componentInspectorOn()},flashReady:function(){this.obj().init(require("settings").instance+"-tracker"),this.obj().startRecording(f.windowId),$("body").mouseover(this.fnbind(function(a){this.recordMouseover(a);return!0})).click(this.fnbind(function(a){this.recordClick(a);return!0}))},recordMouseover:function(a){},recordClick:function(a){console.log("Got a click"+a)},_getClicks:function(){}}),b.BlogConnect=l.extend({onLoad:function(){this.$("#@connect_blog_link").click(this.fnbind(function(){this.connect();return!1})),this.$("#@blog_disconnect_button").click(this.fnbind(function(){this.serverCall("blog_disconnect").liveMutate().send();return!1}))},connect:function(){this._dialog=this.dialog().title("Connect Your Blog").close(null).load("set_dialog_contents")}}),b.BlogConnectDialogContents=l.extend({onLoad:function(){this.$("#@url, #@uname, #@pwd").focus(this.fnbind(function(){this.$("#@blog_not_supported").hide()})),this.$("#@url, #@uname, #@pwd").keydown(this.fnbind(function(a){a.keyCode==13&&this.submitForm()})),this.$("#@url").blur(this.fnbind(function(){this.$("#@tumblr_login_help, #@wordpress_login_help").hide();var a=this.$("#@url").val();a.match("tumblr")?this.$("#@tumblr_login_help").show():a.match("wordpress")&&this.$("#@wordpress_login_help").show()})),this.$("#@close").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1})),this.$("#@connect").click(this.fnbind(function(){this.submitForm()}))},submitForm:function(){var a=this.$("#@url").val(),b=this.$("#@uname").val(),c=this.$("#@pwd").val();a&&b&&c&&this.serverCall("validate_blog").kwargs({url:a,name:b,pwd:c}).liveMutate().success(this.fnbind(function(a){var b=a[0],c=a[1];b?f.Dialog.dialogFor(this).close_():this.$("#@blog_not_supported").show().text(c)})).send()}}),b.HideConnectOnProfileCheckbox=l.extend({onLoad:function(){var a=this.$("#@checkbox");a.change(this.fnbind(function(){this.serverCall("update").kwargs({hide:a.is(":checked")}).liveMutate().send()}))}}),b.MarkNotifsAsSeenFromURL=l.extend({onVisible:function(){this.initState("first_call",!0)||this.serverCall("mark_as_seen").send()}}),b.GrowlNotification=l.extend({onUnload:function(){this.uninstallScrollHandlers()},onLoad:function(a){this.leftPositionSet=!1;var b=this.fnbind(function(){this.setPosition()});this.installScrollHandlers(this.setPosition),setTimeout(b,1);var c=this.age_us/1e3/1e3;a?c<1.5&&this.show():c<15&&this.show(),this.$("#@notif").mouseover(this.fnbind(function(a){clearTimeout(this._timeout);var b=this.$("#@notif");b.is(":animated")&&(b.stop(),b.css("opacity",100)),f.rpc("/notifications/mark_as_read_POST").kwargs({snid:this.snid}).send()})),this.$("#@notif").mouseout(this.fnbind(function(a){this.startFade(1e3)})),this.startFade(4e3)},setPosition:function(){var a=$(window).scrollTop(),b=$("#layout_header").outerHeight();a>b?(this.$("#@notif").addClass("fixed_hover_menu"),this.$("#@notif").css("top","0px")):(this.$("#@notif").removeClass("fixed_hover_menu"),this.$("#@notif").css("top",""));var c=$(window).width(),d=this.$("#@notif").outerWidth(),e=0;a>b?e=this.$("#@notif").offset():e=this.$("#@notif").position();var f=d+e.left;if(c<f){var g=f-c,h=e.left-(g+10);this.$("#@notif").css("left",h+"px"),this.$("#@notif .hover_menu_nub").css("backgroundPosition",g+20+"px top"),this.leftPositionSet=!0}else this.leftPositionSet||this.$("#@notif .hover_menu_nub").css("backgroundPosition","10px top")},show:function(){this.$("#@notif").fadeIn(1e3)},startFade:function(a){clearTimeout(this._timeout),this._timeout=setTimeout(this.fnbind(function(){require("visibility").isVisible()?this.$("#@notif").fadeOut(1250):this.$("#@notif").hide()}),a)}}),b.EditPhotoChoice=l.extend({onLoad:function(){this.$(".@img_choice").click(this.fnbind(function(a){var b=$(a.target).attr("choice");this.serverCall("choose_photo").kwargs({choice:b}).success(this.fnbind(function(){this.next_url?h.navigateTo(this.next_url,!1):f.Dialog.dialogFor(this).close_()})).send(),this.$("#@choices").text("Setting photo...");return!1}))}}),b.OnOffControlPanelSetting=l.extend({onLoad:function(){this.$("#@on").click(this.fnbind(function(a){this.serverCall("set_value").kwargs({new_val:!0}).liveMutate().send()})),this.$("#@off").click(this.fnbind(function(a){this.serverCall("set_value").kwargs({new_val:!1}).liveMutate().send()})),this.$("#@default").click(this.fnbind(function(a){this.serverCall("set_to_default").liveMutate().success(this.fnbind(function(a){this.$("#@on").attr("checked",a),this.$("#@off").attr("checked",!a)})).send();return!1}))}}),b.HomeLoggedOutInvite=l.extend({onLoad:function(a){this.installMouseHandlers();var b=this.fnbind(function(){this.$("#@error_msg").empty()});this.$("#@email").keydown(this.fnbind(function(a){b();var c=a.keyCode?a.keyCode:a.which;c==13&&this.$("#@email_submit").click()})).blur(b)},clickHandlers:{invite_request_button:function(){this.$("#@invite_request_button").hide(),this.$("#@facepile").css("visibility","hidden"),this.$("#@mission").css("visibility","hidden"),this.$("#@invite_form").show(),this.$("#@email").focus(),this.serverCall("record_signup_step").kwargs({signup_action:"hp_invite_request_start"}).send()},email_submit:function(){this.serverCall("request_email").kwargs({email:this.$("#@email").val()}).success(this.fnbind(function(a){a&&(a.error_message?this.$("#@error_msg").text(a.error_message):(this.$("#@error_msg").hide(),this.$("#@invite_form_fields").hide(),this.$("#@success_msg").show()))})).send()}}}),b.SignupConnectedFriends=l.extend({onLoad:function(a){this.$("#@more_friends").click(this.fnbind(function(a){this.dialog().title("Connecting your Facebook or Twitter Account to Quora").cancel(null,"Close").html("To get you started, we'll have you follow all your Facebook or Twitter friends who are already on Quora when you sign up.<br /><br />We won't message your contacts who aren't on the site or post anything to your Facebook or Twitter unless you choose to.<br /><br />For Quora to become a great knowledge resource for everyone, it's important that users trust the site.  If Quora ever fails to meet your expectations of trust, please let us know by e-mailing <a href='mailto:feedback@quora.com'>feedback@quora.com</a> and we'll try to do better.");return!1}))}});var r=require("login").LiveLoginDialog;b.SignupForm2=l.extend({onLoad:function(a){this.inline_login?this.parent()&&this.parent()instanceof r&&this.serverCall("record_signup_step").kwargs({signup_action:"signup_dialog_begin"}).send():h.getPathName()=="/"&&(this.serverCall("record_signup_step").kwargs({signup_action:"signup_homepage_visit"}).send(),this.no_associated_users&&this.serverCall("record_signup_step").kwargs({signup_action:"signup_homepage_visit_no_account"}).send()),this.$("#@email, #@name, #@password").keyup(this.fnbind(function(){this.$("#@name").val()&&this.$("#@email").val()&&this.$("#@password").val()?(this.$("#@submit").removeAttr("disabled"),this.$("#@submit").removeClass("submit_button_disabled")):(this.$("#@submit").attr("disabled","disabled"),this.$("#@submit").addClass("submit_button_disabled"))})),this.$("#@bypass_connect_link").click(this.fnbind(function(a){this.bypassConnectLink();return!1})),this.$("#@twitter_signup_link").click(this.fnbind(function(a){this.serverCall("record_signup_step").kwargs({signup_action:"signup_connect_to_twitter"}).send();var b=window.open("/twitter/oauth_window","_BLANK","height=400,width=800");return!1})),this.$("#@cancel").click(this.fnbind(function(a){this.cancelClicked();return!1})),this.useLoadingSpinnerForConnectedFriends=!0,this.$("#@twitter_signup_link").get(0)&&$(document).bind("twitter_oauth_approved",this.fnbind(function(a,b){this.serverCall("record_signup_step").kwargs({signup_action:"signup_twitter_connected"}).send(),this.serverCall("try_login_twitter").kwargs({tw_oauth_key:b.accessToken.key}).success(this.fnbind(function(a){a&&this.completeLogin()})).send();var c=b.accessToken,d=b.userData;this.serverCall("show_connected_friends").kwargs({tw_uid:d.twitter_uid,fb_uid:this.$("#@fb_uid").val(),fb_access_token:this.$("#@fb_access_token").val(),fb_expires:this.$("#@fb_expires").val()}).contentFor(this.$("#@connected_friends_list"),{parentCID:this.cid,useLoadingSpinner:this.useLoadingSpinnerForConnectedFriends}).send(),this.useLoadingSpinnerForConnectedFriends=!1,this.$("#@connected_pic").hasClass("fb_photo")||(d.photo_url?this.$("#@connected_pic").attr("src",d.photo_url):this.$("#@connected_pic").hide()),this.accountConnected(),this.$("#@twitter_signup_link").hide(),this.$("#@twitter_connected").show(),this.$("#@connect_option").hide(),this.$("#@connect_explanation").hide(),this.$("#@step_2").show(),this.$("#@email").focus(),this.$("#@connected_friends_list").show(),this.$("#@connected_info").show(),this.$("#@tw_name").text("@"+d.twitter_screen_name),this.$("#@twitter_info").show(),this.$("#@tw_oauth_key").val(b.accessToken.key),this.$("#@tw_uid").val(d.twitter_uid),this.$("#@tw_screen_name").val(d.twitter_screen_name),this.child("name_validator").populate_if_valid(d.name,this.$("#@name"))})),this.child("facebook_connect_button")&&(this.child("facebook_connect_button").bind("fb_login",this.fnbind(function(a,b){this.serverCall("try_login_facebook").kwargs({fb_access_token:b.accessToken}).success(this.fnbind(function(a){a&&this.completeLogin()})).send(),this.serverCall("show_connected_friends").kwargs({fb_uid:b.userID,fb_access_token:b.accessToken,fb_expires:b.expiresIn,tw_uid:this.$("#@tw_uid").val()}).contentFor(this.$("#@connected_friends_list"),{parentCID:this.cid,useLoadingSpinner:this.useLoadingSpinnerForConnectedFriends}).send(),this.useLoadingSpinnerForConnectedFriends=!1,this.$("#@fb_uid").val(b.userID),this.$("#@fb_access_token").val(b.accessToken),this.$("#@fb_expires").val(b.expiresIn)})),this.child("facebook_connect_button").bind("fb_connected",this.fnbind(function(a,b,c){this.serverCall("record_signup_step").kwargs({signup_action:"signup_facebook_api_succeeded"}).send(),this.accountConnected(),this.hide_welcome_on_connect&&this.$("#@signup_welcome").hide(),c&&c[0]?(window.RESULTS=c,c[0].pic_big?(this.$("#@connected_pic").attr("src",c[0].pic_big),this.$("#@connected_pic").addClass("fb_photo")):this.$("#@connected_pic").hide(),c[0].contact_email&&this.$("#@email").val(c[0].contact_email),this.child("facebook_connect_button").$("#@facebook_connect_button").hide(),this.$("#@facebook_connected").show(),this.$("#@connect_option").hide(),this.$("#@connect_explanation").hide(),this.$("#@password").focus(),this.$("#@step_2").show(),this.$("#@connected_friends_list").show(),this.$("#@connected_info").show(),this.$("#@fb_name").text(c[0].name),this.$("#@fb_info").show(),this.$("#@name").val(c[0].name),this.child("name_validator").validate()):(console&&console.error&&console.error("Error retrieving data from Facebook."),this.serverCall("record_signup_step").kwargs({signup_action:"signup_facebook_api_failed"}).send())}))),this.$("#@form").submit(this.fnbind(function(a){if(!this.child("name_validator").isValid)if(!this.$("#@name")||this.child("name_validator")!==null){a1ert("Check the name that you entered before submitting.");return!1}if(!this.child("email_validator").isValid)if(!this.$("#@email")||this.child("email_validator").isValid!==null){a1ert("Check the e-mail that you're using before submitting.");return!1}if(this.$("#@password").val().length<this.minimum_password_length)return!1;if(!this.child("password_validator").isValid){if(!this.$("#@password")||this.child("password_validator").isValid!==null){a1ert("Check the password that you're using before submitting.");return!1}}else console.log("validator hasn't responded yet, allowing through");if(this.inline_login||this.next_url){var b=this.$("#@fb_access_token").val(),c=this.$("#@tw_oauth_key").val();this.$("#@spinner").removeClass("hidden");var d={name:this.$("#@name").val(),email:this.$("#@email").val(),password:this.$("#@password").val()},e={code:this.$("#@code").val(),group:this.$("#@group").val(),source_user_name:this.$("#@source_user_name").val(),source_url:this.$("#@source_url").val(),tid:this.tid,fb_access_token:b,fb_expires:this.$("#@fb_expires").val(),tw_oauth_key:c};d.optional_args=e,this.serverCall("signup_dont_redirect").kwargs(d).success(this.fnbind(function(a){this.$("#@spinner").addClass("hidden"),a?this.completeLogin():this.$("#@submit").removeAttr("disabled")})).liveMutate().send(),this.$("#@submit").attr("disabled","disabled");return!1}this.$("#@submit").attr("disabled","disabled");return!0}))},completeLogin:function(){this.inline_login||h.navigateTo(this.next_url||"/",!1),require("settings").pageMode=="post_reload"&&$(document).trigger("quora_login")},accountConnected:function(){},cancelClicked:function(){this.lookup("home_logged_out").$("#@contents").show(),this.lookup("home_logged_out").$("#@signup_form").hide()},bypassConnectLink:function(){this.$("#@connect_option").hide("fast"),this.$("#@connect_explanation").hide("fast"),this.$("#@step_2").show("fast"),this.$("#@name").focus()}}),b.SignupFormExpanded=SignupForm2.extend({accountConnected:function(){this.$("#@connected_photo_wrapper").show(),this.lookup("home_logged_out").$("#@contents").hide(),this.lookup("home_logged_out").$("#@signup_form").show(),this.lookup("home_logged_out").$("#@signup_form_expanded").removeClass("w3").addClass("row")},cancelClicked:function(){this.lookup("home_logged_out").$("#@contents").show(),this.lookup("home_logged_out").$("#@signup_form_expanded").addClass("w3").removeClass("row"),this.child("facebook_connect_button").$("#@facebook_connect_button").show(),this.$("#@facebook_connected, #@step_2, #@twitter_connected, #@connected_friends_list, #@connected_info, #@twitter_info, #@connected_photo_wrapper").hide(),this.$("#@connect_option, #@connect_explanation, #@twitter_signup_link, #@connect_option").show()},bypassConnectLink:function(){this.$("#@connect_option").hide(),this.$("#@connect_explanation").hide(),this.$("#@step_2").show(),this.accountConnected(),this.$("name").focus()}}),b.SignupFormInsideFBPageTimeline=SignupForm2.extend({completeLogin:function(){top.location="/"}}),b.TopicFollowButton=l.extend({onLoad:function(){this.$("#@follow").click(this.fnbind(function(a){i.setQfeedLog(this,"TopicFollow"),i.setTlog({type:"TopicFollow",tid:this.tid}),this.serverCall("follow").kwargs({tid:this.tid}).liveMutate().send();return!1})),this.$("#@unfollow").click(this.fnbind(function(a){this.serverCall("unfollow").kwargs({tid:this.tid}).liveMutate().send();return!1}))}}),b.TopicFollowAllButton=l.extend({onLoad:function(){this.$("#@follow").click(this.fnbind(function(a){this.serverCall("follow").liveMutate().send();return!1})),this.$("#@unfollow").click(this.fnbind(function(a){this.serverCall("unfollow").liveMutate().send();return!1}))}}),b.FollowTopicOnTwitterSection=l.extend({onLoad:function(){this.$("#@icon").click(this.fnbind(function(a){this.lookup("follow_link").follow();return!1}))}}),b.FollowUnfollowTopicOnTwitter=l.extend({onLoad:function(){this.$("#@follow").click(this.fnbind(function(){this.follow();return!1})),this.$("#@unfollow").click(this.fnbind(function(){this.unfollow();return!1}))},follow:function(){this.serverCall("follow").liveMutate().send()},unfollow:function(){this.serverCall("unfollow").liveMutate().send()}}),b.TitleNotificationsCount=l.extend({onLoad:function(a){this.setTitle()},setTitle:function(){var a=h.getTitle(),b=a,c,d="",e;if(this.notif_count||this.inbox_count)d+="(",this.notif_count&&(d+=this.notif_count),this.inbox_count&&(d+="/"+this.inbox_count),d+=") ";b=a.replace(/^\(((\d+)?\/)?\d+\) |/,d),a!=b&&h.setTitle(b)}}),b.MobileFooter=l.extend({onLoad:function(){this.$("#@full_site").click(this.fnbind(function(a){i.cookie("m","0"),location.reload(!0);return!1}))}}),b.UseMobileAppDev=l.extend({onLoad:function(){this.$("#@mobile_app").click(this.fnbind(function(a){var b=i.cookie;b("iphone_app","1"),b("iphone_app_version","1.0:21"),b("m","1"),location.reload(!0);return!1}))}}),b.DoNotUseMobileAppDev=l.extend({onLoad:function(){this.$("#@no_mobile_app").click(this.fnbind(function(a){var b=i.cookie;b("iphone_app","",{expires:-1}),b("m","",{expires:-1}),location.reload(!0);return!1}))}}),b.UseMobileSite=l.extend({onLoad:function(){this.$("#@mobile_site").click(this.fnbind(function(a){i.cookie("m","1"),location.reload(!0);return!1}))}}),b.AnonUser=l.extend({onLoad:function(){this.$("#@reveal").click(this.fnbind(function(){$(".content").dialog({title:"Reveal Anon User Identity",contents:"You may only reveal identities to properly administer the site and the person you reveal will be notified with your reason.",comment_form:"Explain your reason for revealing this name",buttons:{"Reveal Identity":this.fnbind(function(){this.serverCall("anonreveal_content").args(this.eauid).contentFor(this.$("#@reveal"),{parentCID:this.cid}).success(this.fnbind(function(a){this.$("#@reveal").unbind("click")})).send();return!1}),Cancel:null}});return!1}))}}),b.CCTest1=l.extend({onLoad:function(){this.$("#@button").click(this.fnbind(function(){this.serverCall("get_content").contentFor(this.$("#@placeholder"),{parentCID:this.cid}).send();return!1}))}}),b.InfoToggle=l.extend({onLoad:function(){this._state=!1,this.setupKeyboardShortcut()},toggle:function(){this._state?(this._state=!1,$(".invisible_info").hide()):(this._state=!0,$(".invisible_info").show().effect("highlight",{},1e3))},setupKeyboardShortcut:function(){!document.addEventListener||(this._ks=0,document.addEventListener("keydown",this.fnbind(function(a){switch(this._ks){case 0:this._ks=1*(a.keyCode==81);break;case 1:this._ks=2*(a.keyCode==73);break;case 2:this._ks=3*(a.keyCode==68);break;case 3:this._ks=4*(a.keyCode==81);break;case 4:this._ks=5*(a.keyCode==73);break;case 5:this._ks=6*(a.keyCode==68),this._ks&&this.toggle();default:this._ks=0}}),!1))}}),b.TwitterConnectCallbackPage=l.extend({onLoad:function(){i.cookie("twitter_oauth_access_key",this.access_token.key,{path:"/twitter/"}),window.opener?(window.opener.$(window.opener.document).trigger("twitter_oauth_approved",{accessToken:this.access_token,userData:this.user_data}),window.close()):this.$("#@me").text("access token: "+JSON.stringify(this.access_token))}}),b.TestUnload=l.extend({onLoad:function(a){console.log("onLoad called for cid="+this.cid+", isPageLoad="+a)},onUnload:function(){console.log("onUnload called for cid="+this.cid)}});var s={};b.TwitterConnectButton=l.extend({onLoad:function(){this.$("#@twitter_connect_button").click(this.fnbind(function(){this.connect()})),$(s).bind("connect",this.fnbind(function(){this.connect()}))},connect:function(){$(document).bind("twitter_oauth_approved."+this.cid,this.fnbind(function(a,b){var c=b.accessToken,d=b.userData;this.serverCall("connect_twitter").kwargs({access_token_key:c.key,screen_name:d.twitter_screen_name,tw_uid:d.twitter_uid}).success(this.fnbind(function(){$(document).unbind("twitter_oauth_approved."+this.cid)})).liveMutate().send()}));var a=window.open("/twitter/oauth_window","_BLANK","height=400,width=800")}}),b.TwitterConnect=l.extend({onLoad:function(){this.$("#@twitter_disconnect_button").click(this.fnbind(function(){this.serverCall("twitter_disconnect").liveMutate().send();return!1}))}});var t=[/@yahoo\.(ca|cn|co\.id|co\.in|co\.jp|co\.kr|co\.nz|co\.uk|com|com\.ar|com\.au|com\.br|com\.cn|com\.hk|com\.mx|com\.my|com\.ph|com\.sg|com\.tr|com\.tw|com\.vn|de|dk|es|fr|gr|ie|it|no|pl|se)$/,/@ymail\.com$/,/@rocketmail\.com$/],u=[/@gmail\.com$/,/@googlemail\.com$/],v=[/@.*(hotmail|live|msn)\..+$/],x=!1;b.GetEmailLoginBox=l.extend({toggleOAuth:function(a){a?(this.$("#@oauth_logo_row").show(),this.$("#@password_row").hide()):(this.$("#@oauth_logo_row").hide(),this.$("#@password_row").show(),this.$("#@gmail_logo").hide(),this.$("#@yahoo_mail_logo").hide(),this.$("#@hotmail_logo").hide())},getEmail:function(){return $.trim(this.$("#@email").val())},lastTimeoutId:null,maybeToggleOauth:function(){var a=this.getEmail(),b=w(a,t),c=w(a,u),d=w(a,v);this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null),x=!1,b||c||d?(this.toggleOAuth(!0),b&&this.$("#@yahoo_mail_logo").show(),c&&this.$("#@gmail_logo").show(),d&&this.$("#@hotmail_logo").show()):(this.toggleOAuth(!1),this.lastTimeoutId=setTimeout(this.fnbind(function(){this.checkGoogleAppsDomain()}),200))},showGoogleAppsOAuth:function(){x=!0,this.toggleOAuth(!0),this.$("#@gmail_logo").show()},isCheckingGoogleAppsDomain:!1,isGoogleAppsDomainCheckQueued:!1,checkGoogleAppsDomain:function(){if(this.isCheckingGoogleAppsDomain)this.isGoogleAppsDomainCheckQueued=!0;else{this.isCheckingGoogleAppsDomain=!0;var a=this.getEmail();this.serverCall("is_google_apps_domain").kwargs({email:a}).success(this.fnbind(function(b){a==this.getEmail()&&(b?this.showGoogleAppsOAuth():this.toggleOAuth(!1)),this.isCheckingGoogleAppsDomain=!1,this.isGoogleAppsDomainCheckQueued&&(this.isGoogleAppsDomainCheckQueued=!1,this.checkGoogleAppsDomain())})).send()}},prevEmail:null,onLoad:function(){this.is_google_apps_email?this.showGoogleAppsOAuth():this.maybeToggleOauth(),this.lookup("submit").enableSubmitButton(),this.prevEmail=this.getEmail(),this.$("#@email").keyup(this.fnbind(function(){this.prevEmail!=this.getEmail()&&(this.prevEmail=this.getEmail(),this.maybeToggleOauth())})),this.$("#@change_email_link").click(this.fnbind(function(){this.$("#@default_email_container").hide(),this.$("#@change_email_container").show(),this.$("#@find_contacts_button").css({"float":"right"});return!1}))}}),b.FindContactsButton=l.extend({logOAuthAttempt:function(a){this.serverCall("log_contact_importer_oauth_attempt").kwargs({email:a}).send()},onLoad:function(){this.importer_form=this.lookup("contact_importer"),this.importer_form.$("#@email").focus(),this.$("#@find_contacts").click(this.fnbind(function(){var a=$.trim(this.importer_form.$("#@email").val());if(w(a,t)){this.logOAuthAttempt(a),window.open("/oauth/yahoo","_BLANK","height=400,width=800");return!1}if(w(a,u)||x){this.logOAuthAttempt(a),window.open("/oauth/google?email="+encodeURIComponent(a),"_BLANK","height=400,width=800");return!1}if(w(a,v)){this.logOAuthAttempt(a),window.open("/oauth/hotmail","_BLANK","height=600,width=1000");return!1}this.ajax&&this.submitAjaxForm()})),$(document).bind("oauth_approved",this.fnbind(function(a,b){var c=b.service,d=b.accessToken;this.importer_form.$("#@service").val(c),this.importer_form.$("#@access_token").val(d),this.ajax?this.submitAjaxForm():this.importer_form.$("#@contact_importer_form").submit()}))},submitAjaxForm:function(){var a=this.importer_form.$("#@email").val(),b=this.importer_form.$("#@password").val(),c=this.importer_form.$("#@service").val(),d=this.importer_form.$("#@access_token").val();this.serverCall("import_contacts").kwargs({email:a,email_password:b,service:c,access_token:d}).liveMutate().success(this.fnbind(function(a){console.log(a),a[0]==!1&&this.importer_form.$("#@email_import_error").show().text(a[1])})).send()},enableSubmitButton:function(){this.$("#@find_contacts").removeAttr("disabled")}}),b.OauthCallbackPage=l.extend({onLoad:function(){window.opener?(window.opener.$(window.opener.document).trigger("oauth_approved",{service:this.service,accessToken:this.access_token}),window.close()):this.$("#@me").text("access token: "+JSON.stringify(this.access_token))}}),b.Announcement=l.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){this.closeAnnouncement();return!1})),this.serverCall("track_announcement_view").send()},closeAnnouncement:function(){this.serverCall("close_announcement").kwargs({closing_action:"x"}).liveMutate().send()}}),b.OpengraphLaunchAnnouncement=b.Announcement.extend({onLoad:function(){this._super.apply(this,arguments),this.child("fb_connect").bind("fb_connected",this.fnbind(this.closeAnnouncement))}}),b.NUXQuestionPromptAnnouncementClose=l.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){this.parent().closeAnnouncement();return!1}))}}),b.ServerCallTest=l.extend({onLoad:function(){this.$("#@click_me").click(this.fnbind(function(){this.serverCall("click_me").success(this.fnbind(function(a){a1ert(a)})).send(),console.log("clicked");return!1}))}});var y;b.ShareAction=l.extend({onLoad:function(){this.$("#@share").click(this.fnbind(function(){if(y)return!1;y=!0,this._dialog=this.dialog().title("Share "+this.what).close(function(){y=!1}).load("share_dialog");return!1}))}}),b.ShareDialog=l.extend({onLoad:function(){var a=this;this.$("%@tabs").click(function(b){a.select($(this).attr("show"));return!1}),this.$("#@url_select").click(this.fnbind(function(){this.lookup("url_tab").$("#@url").focus().select();return!1})),this.select(this.default_tab)},select:function(a){this.$("%@contents").hide(),this.$("#@"+a).show(),this.$("%@tabs").removeClass("selected"),this.$("#@"+a+"_select").addClass("selected")}}),b.TwitterShareBase=l.extend({regexUrl:/(https?:\/\/[a-zA-Z0-9](?:[-a-zA-Z0-9]*\.)+[a-zA-Z]{2,}(?:\/[^\/\s]+)*\/?)(?:\s|$)/gi,tweetLength:function(a){if(!a)return 0;var b=a.length,c=[];a.replace(this.regexUrl,function(a,b){c.push(b)}),b-=c.join("").length,$.each(c,function(a,c){b+=c.match(/https:/)?21:20});return b},countCharacters:function(){var a=this.fnbind(function(){var a=140-this.tweetLength(this.$("#@tweet").val());this.showCount&&(this.$("#@counter").text(a),a<0?this.$("#@counter").addClass("diffdelete"):this.$("#@counter").removeClass("diffdelete")),this.shareButton&&(this.showCount&&(a<0||a==140)?this.$(this.shareButton).addClass("submit_button_disabled"):this.$(this.shareButton).removeClass("submit_button_disabled"))});this.$("#@tweet").bind("keyup",a).bind("focus",a);return a}}),b.TwitterShare=TwitterShareBase.extend({onLoad:function(){this.countCharacters(),this.showCount=!0,this.shareButton="#@tweet_button",this.tweeted=!1,this.$("#@tweet_button").click(this.fnbind(function(){var a=this.$("#@tweet").val();if(!a||this.tweetLength(a)>140||this.tweeted)return!1;this.tweeted=!0,this.serverCall("tweet").kwargs({tweet:a}).success(this.fnbind(function(){f.Dialog.dialogFor(this).close_()})).send(),this.$("#@tweet_button").addClass("submit_button_disabled"),this.$("#@tweet_form").hide(),this.$("#@tweet_sending").show();return!1})),this.$("#@close").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1}))}}),b.URLShare=l.extend({onLoad:function(){this.$("#@url,#@short_url,#@permalink").click(this.fnbind(function(a){a.target.focus(),a.target.select()})),this.$("#@close").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1}))}}),b.EmailShare=l.extend({onLoad:function(){this.email="",this.$("#@send").click(this.fnbind(function(){var a=this.email;a||(a=this.lookup("selector").getValue());if(!a||!this.$("#@subject").val()||!this.$("#@body").val())return!1;this.serverCall("email").kwargs({email:a,subject:this.$("#@subject").val(),body:this.$("#@body").val()}).success(this.fnbind(function(){f.Dialog.dialogFor(this).close_()})).send();return!1})),this.$("#@close").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1}))},setTo:function(a){this.email=a}}),b.UploadFileForm=l.extend({onLoad:function(a){$(document).bind("quora_file_uploaded",function(b,c){var d=a[c.rand];d&&(delete a[c.rand],d.onUpload(c))});return function(){a[this.rand]=this,this.$("#@file").attr("onChange","$(this).parents('form').submit().find('.spinner').show();")}}({}),onUpload:function(a){typeof this._upload=="function"&&this._upload(a)},success:function(a){this._upload=a;return this}}),b.DesktopClientLoginIFrameInner=l.extend({onLoad:function(){var a=window.parent.parent;a&&a.DesktopClientLoginIFrameInner.registerClient(this.client)}}),DesktopClientLoginIFrameInner.registerClient=function(a){f.rpc("/ajax/client_login_POST").kwargs({c:a}).send()},b.DesktopAskToAnswerStatus=l.extend({onLoad:function(){this.$("#@next").click(this.fnbind(function(){this.serverCall("next").send()})),this.$("#@start").click(this.fnbind(function(){this.serverCall("start").send()}))}}),b.DesktopAskToAnswerLink=l.extend({onLoad:function(a){this.$("#@link").click(function(a){$("#priority_ask_status").toggleClass("hidden")})}}),b.DesktopAskOnlineUserButton=l.extend({onLoad:function(a){this.$("#@ask").click(this.fnbind(function(){this.serverCall("ask").kwargs({qid:this.qid,to_uid:this.to_uid}).liveMutate().send();return!1}))},registerDequeue:function(){this.nextEvent>=0&&setTimeout(this.nextEvent,this.fnbind(this.dequeueUser))},dequeueUser:function(){this.serverCall("reject").kwargs({qid:this.qid,to_uid:this.to_uid}).liveMutate().send();return!1}}),b.DesktopStopAskingOnlineUserButton=l.extend({onLoad:function(a){this.$("#@undo").click(this.fnbind(function(){this.serverCall("undo").kwargs({qid:this.qid,to_uid:this.to_uid}).liveMutate().send();return!1}))}}),b.ClientInstaller={setStatus:function(a){$("#client_installer_status").text("Status: "+a)},fatal:function(a){$("#client_installer_error").text("Error: "+a)},jloadProgress:function(a,b){$("#client_installer_status").text("Downloading: Wrote "+a+" bytes out of "+b)}},b.PhotoUploadExample=l.extend({onLoad:function(){this.child("upload_iframe").success(this.fnbind(function(){a1ert("successful upload")}))}}),b.CompactThread=l.extend({onLoad:function(){this.scrollUp()},scrollUp:function(){this.$("#@messages").scrollTop(99999);var a=setTimeout(this.fnbind(function(){this.$("#@messages").scrollTop(99999)}),50)}}),b.CompactThreadMessage=l.extend({onLoad:function(){this.parent().parent().scrollUp()}}),b.PopoutListLink=l.extend({onLoad:function(){this.$("#@popout").click(this.fnbind(function(){var a=window.open("/home/popout_list","popoutlist","height=590,width=300,scrollbars=1");return!1}))}}),b.PopoutThread=l.extend({onLoad:function(){this.$("#@popout").click(this.fnbind(function(a){var b=window.open("/inbox/popout_thread/"+this.thread_id,"thread_"+this.thread_id,"height=590,width=296,scrollbars=1");return!1}))}}),b.FullRQZonePresence=l.extend({onLoad:function(){this.tempTop=null,$(window).scroll(this.fnbind(function(){this.setPosition()})),setTimeout(this.fnbind(function(){this.setPosition()}),50),this.$("#@popout").click(this.fnbind(function(a){var b="thread_"+this.popout_id?this.popout_id:0,c=window.open(this.popout_url,b,"height=590,width=296,scrollbars=1");return!1}))},getOffsetTop:function(){if(this.tempTop)return this.tempTop;var a=this.$("#@chat").offset();if(a)return a.top},setPosition:function(){var a=$(window).scrollTop(),b=this.$("#@chat").height(),c=$(document).height(),d=c-(this.getOffsetTop()+b);d<220?this.$("#@chat").removeClass("component_fixed"):a>this.getOffsetTop()?(this.tempTop=this.getOffsetTop(),this.$("#@chat").addClass("component_fixed")):(this.tempTop=null,this.$("#@chat").removeClass("component_fixed"))}}),b.QuestionArea=k.SwitchableComponent.extend({switchAction:function(){this.lookup("comment_switch").viewComments()}}),b.QuestionMain=l.extend({onLoad:function(){this.loaded=!1,this.$("#@info").click(this.fnbind(function(){this.$("#@info").hide(),this.$("#@information").show(),this.$("#@discuss").show(),this.$("#@discussion").hide();return!1})),this.$("#@discuss").click(this.fnbind(function(){this.$("#@info").show(),this.$("#@information").hide(),this.$("#@discuss").hide(),this.$("#@discussion").show(),this.loaded||this.serverCall("discussion").kwargs({qid:this.qid}).contentFor(this.$("#@discussion"),{parentCID:this.cid}).success(this.fnbind(function(a){this.loaded=!0})).send();return!1}))}}),b.ViewMoreBuddiesLink=l.extend({onLoad:function(){this.$("#@view").click(this.fnbind(function(){this.parent().$("#@all").show(),this.parent().$("#@preview").hide(),this.$("#@view_more").hide();return!1}))}}),b.CreateReviewQueueLink=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this._dialog||(this._dialog=this.dialog().title("Create Review Queue").cancel(null,"Close").ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.getName();if(b)this.serverCall("create_queue").kwargs({name:b}).success(this.fnbind(function(a){console.log("Success! Data: "+a),h.navigateTo("/review/queue/"+a,!1)})).liveMutate().send();else return!1}),"Create").close(this.fnbind(function(){this._dialog=null})).load("set_dialog_contents"));return!1}))}}),b.CreateReviewQueueNameDialog=l.extend({onLoad:function(){this.$("#@name").focus()},getName:function(){return this.$("#@name").val()}}),b.FollowReviewQueueLink=l.extend({onLoad:function(){this.$("#@follow").click(this.fnbind(function(){this.serverCall("follow").kwargs({queue_id:this.queue_id}).liveMutate().send();return!1})),this.$("#@unfollow").click(this.fnbind(function(){this.unfollow();return!1}))},unfollow:function(){this.serverCall("unfollow").kwargs({queue_id:this.queue_id}).liveMutate().send()}}),b.ClaimAbandonedQueue=l.extend({onLoad:function(){this.$("#@claim").click(this.fnbind(function(){this.serverCall("claim").kwargs({queue_id:this.queue_id}).liveMutate().send();return!1}))}}),b.DeleteReviewQueueLink=l.extend({onLoad:function(){this.$("#@delete").click(this.fnbind(function(){$(".content").dialog({title:"Delete Review Queue",contents:"Are you sure you want to delete this review queue?",buttons:{"Delete Queue":this.fnbind(function(){this.serverCall("delete").kwargs({queue_id:this.queue_id}).liveMutate().send()}),Cancel:null}});return!1})),this.$("#@undelete").click(this.fnbind(function(){this.serverCall("undelete").kwargs({queue_id:this.queue_id}).liveMutate().send();return!1}))}}),b.AddOperationTarget=l.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){this.$("#@label").addClass("hidden"),this.$("#@select").removeClass("hidden");return!1})),this.$("#@select").change(this.fnbind(function(){var a=this.$("#@select option:selected").val();this.serverCall("select").kwargs({queue_id:this.queue_id,types:a}).liveMutate().success(this.fnbind(function(){this.$("#@default").attr("selected","selected")})).send();return!1}))}}),b.RemoveOperationTargetLink=l.extend({onLoad:function(){this.$("#@remove").click(this.fnbind(function(){this.serverCall("remove").kwargs({op_type:this.op_type,queue_id:this.queue_id}).liveMutate().send();return!1}))}}),b.FlagItemLink=l.extend({onLoad:function(){this.$("#@flag").click(this.fnbind(function(){this.serverCall("flag").kwargs({oid:this.oid,queue_id:this.queue_id}).liveMutate().send();return!1}))}}),b.AddReviewQueueOwner=l.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){this.$("#@label").hide(),this.$("#@selector").show(),this.lookup("selector").focus();return!1}))},setTo:function(a){a&&a!=""&&this.serverCall("add_owner").kwargs({queue_id:this.queue_id,new_uid:a}).success(this.fnbind(function(a){this.clear(),this.lookup("selector").focus()})).liveMutate().send()},clear:function(){this.lookup("selector").inputBlur()}}),b.AddTopicAdmin=l.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){this.$("#@label").hide(),this.$("#@selector").show(),this.lookup("selector").focus();return!1}))},setTo:function(a){a&&a!=""&&this.serverCall("add_admin").kwargs({tid:this.tid,new_uid:a}).success(this.fnbind(function(){this.lookup("selector").focus()})).liveMutate().send()},clear:function(){this.lookup("selector").inputBlur()}}),b.ManageEvent=l.extend({setTo:function(a){a&&a!=""&&this.serverCall("invite_user").kwargs({invite_uid:a,party:this.party}).success(this.fnbind(function(){this.clear(),this.lookup("selector").focus()})).liveMutate().send()},clear:function(){this.lookup("selector").inputBlur()}}),b.RemoveTopicAdmin=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Remove Topic Admin"}).click(this.fnbind(function(){this.serverCall("remove").kwargs({tid:this.tid,admin_uid:this.admin_uid}).liveMutate().send();return!1}))}}),b.RemoveTopicSetAdmin=l.extend({onLoad:function(){this.$("#@remove").click(this.fnbind(function(){this.dialog().title("Remove Group Admin Confirmation").cancel().ok(this.fnbind(function(){this.serverCall("remove").kwargs({tid:this.tid,admin_uid:this.admin_uid}).liveMutate().send()}),"Remove Admin").load("remove_topic_set_admin_dialog",{kwargs:{tid:this.tid,admin_uid:this.admin_uid}});return!1}))}}),b.AddTopicToSetButton=l.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){this.$("#@item").css("height",this.$("#@item").height()),this.$("#@item").addClass("light"),this.$("#@add").hide(),this.serverCall("add_topic_to_set").kwargs({set_tid:this.set_tid,add_tid:this.add_tid}).liveMutate().send();return!1}))}}),b.NeedAnswersQuestionListItem=l.extend({onLoad:function(){this.$("#@item").hover(this.fnbind(function(){this.$("#@remove").show()}),this.fnbind(function(){this.$("#@remove").hide()}))}}),b.HideNeedAnswers=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Do Not Suggest"}),this.$("#@remove").click(this.fnbind(function(){this.serverCall("remove").kwargs({qid:this.qid}).send(),this.$("#@remove").parents(".feed_item").hide();return!1}))}}),b.ConnectAccountHomePage=l.extend({onLoad:function(){this.$("#@item").hover(this.fnbind(function(){this.$("#@remove").show()}),this.fnbind(function(){this.$("#@remove").hide()}))}}),b.HideConnectSection=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Hide"}),this.$("#@remove").click(this.fnbind(function(){this.serverCall("remove").send(),this.$("#@remove").parents(".section").hide();return!1}))}}),b.AddBannedUser=l.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){this.$("#@label").hide(),this.$("#@selector").show(),this.lookup("selector").focus();return!1}))},setTo:function(a){a&&a!=""&&this.serverCall("ban_user").kwargs({tid:this.tid,ban_uid:a}).success(this.fnbind(function(){this.clear(),this.lookup("selector").focus()})).liveMutate().send()},clear:function(){this.lookup("selector").inputBlur()}}),b.BannedUser=l.extend({onLoad:function(){this.$("#@remove").click(this.fnbind(function(){this.serverCall("remove").kwargs({tid:this.tid,ban_uid:this.ban_uid}).liveMutate().send();return!1}))}}),b.RemoveInboxMessagesLink=l.extend({onLoad:function(){this.$("#@delete").click(this.fnbind(function(){this.dialog().title("Delete Inbox Messages").cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("delete_messages").liveMutate().send()}),"Delete Messages").html("Are you sure you want to delete all inbox messages sent by this user?");return!1}))}}),b.TopicAdminListItem=l.extend({onLoad:function(){this.$("#@item").hover(this.fnbind(function(){this.$("#@remove").show()}),this.fnbind(function(){this.$("#@remove").hide()}))}}),b.TopicFollowersPreview=l.extend({onLoad:function(){this.$("#@view_add").click(this.fnbind(function(){this.$("#@view_add").hide(),this.$("#@instructions").hide(),this.$("#@selector").show();return!1})),this.$("%view_invite").click(this.fnbind(function(){this.toggle(),this.lookup("selector").lookup("selector").focus();return!1})),this.$("#@view_followers").click(this.fnbind(function(){this.toggle();return!1}))},toggle:function(){this.$("#@invite").toggle(),this.$("#@followers").toggle()}}),b.TopicFollowerSelector=l.extend({onLoad:function(){this.focus()},focus:function(){this.lookup("selector").focus()},clear:function(){this.lookup("selector").reset()},setTo:function(a){a&&a!=""&&this.serverCall("invite").kwargs({tid:this.tid,target_uid:a}).success(this.fnbind(function(){this.focus()})).liveMutate().send()}}),b.HideTopicSetWelcomeLink=l.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){this.serverCall("close").kwargs({tid:this.tid}).liveMutate().send();return!1}))}}),b.HideTopicSetInvitePassButton=l.extend({onLoad:function(){this.$("#@pass").click(this.fnbind(function(){this.serverCall("pass_invite").kwargs({tid:this.tid}).liveMutate().send();return!1}))}}),b.RemoveInviteToTopicSet=l.extend({onLoad:function(){this.$("#@remove").click(this.fnbind(function(){this.serverCall("uninvite").kwargs({tid:this.tid,target_uid:this.uid}).liveMutate().send();return!1}))}}),b.TopicVisibilityBar=l.extend({onLoad:function(){this.$("#@hide").click(this.fnbind(function(){this.$("#@bar").hide(),$("#topic_visibility_context").remove(),$("#layout_header").removeClass("topic_visibility_context"),this.lookup("navigator").$("#@input").css("width","360px");return!1}))}}),b.TopicSetAdmins=l.extend({onLoad:function(){this.$("#@show_add").click(this.fnbind(function(){this.toggle(),this.cQuery(":admin.selector").focus();return!1})),this.$("#@show_list").click(this.fnbind(function(){this.toggle();return!1}))},toggle:function(){this.$("#@add_label").toggle(),this.$("#@list_label").toggle(),this.$("#@list").toggle(),this.$("#@pick_admin").toggle()}}),b.TalkWiki=l.extend({onLoad:function(){this.$("#@view_log").click(this.fnbind(function(){this.$("#@log").toggleClass("hidden"),this.$("#@view_log").hide();return!1}))}}),b.InstructionsWikiInlineEditor=InlineEditor.extend({_get_kwargs:function(){return{id:this.id,input:this.get_value(),notif:this.$("#@notif").attr("checked")?1:0}}}),b.MarkAsSeenButton=l.extend({onLoad:function(){this.$("#@mark_as_seen").click(this.fnbind(function(){this.serverCall("mark_as_seen").kwargs({queue_id:this.queue_id,oid:this.oid}).liveMutate().send();return!1})),this.$("#@mark_as_unseen").click(this.fnbind(function(){this.serverCall("mark_as_unseen").kwargs({queue_id:this.queue_id,oid:this.oid}).liveMutate().send();return!1}))}}),b.MarkAllAsSeenButton=l.extend({onLoad:function(){this.$("#@mark_all_as_seen").click(this.fnbind(function(){this.serverCall("mark_all_as_seen").kwargs({queue_id:this.queue_id}).liveMutate().send();return!1}))}}),b.CreatePostBox=l.extend({onLoad:function(){h.getHash().substr(0,5)=="#post"&&this.expand(),this.$("#@fake").click(this.fnbind(function(){this.expand()})),this.$("#@add_title").click(this.fnbind(function(){this.$("#@add_title").hide(),this.$("#@title_editor").show(),this.lookup("title").focus();return!1}))},expand:function(){this.$("#@fake").hide(),this.$("#@post_editor").show(),this.cQuery(":post.editor").focus()},reset:function(){this.cQuery(":post.editor").clear(),this.lookup("title").clear(),this.$("#@fake").show(),this.$("#@post_editor").hide()}}),b.VoteButtonBase=l.extend({vote:function(){this.serverCall("vote").kwargs({pid:this.pid}).liveMutate().send()},onLoad:function(){this.$("#@vote_cancel").click(this.fnbind(function(){this.serverCall("vote_cancel").kwargs({pid:this.pid}).liveMutate().send();return!1}))}}),b.VotePostUpButton=VoteButtonBase.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@vote").click(this.fnbind(function(){i.setTlog({type:"PostVoteUp",pid:this.pid}),i.setQfeedLog(this,"PostUpvote"),this.vote();return!1}))}}),b.VotePostDownButton=VoteButtonBase.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@vote").click(this.fnbind(function(){i.setTlog({type:"PostVoteDown",pid:this.pid}),this.vote();return!1}))}}),b.Fall2010PartyTopicAddButton=TopicSelectorAdd2.extend({select:function(){var a=this.parent();a.$("#@selector_wrapper").html(a.qValue),a.selectedTopicName=a.qValue;return!0}}),b.PartyRSVP=l.extend({onLoad:function(){this.$("#@rsvp").click(this.fnbind(function(){var a=this.$("#@yes:checked,#@no:checked, #@yes_with_guest:checked").val();if(a!="No"&&a!="Yes"&&a!="PlusGuest"){a1ert("Please choose Yes or No to RSVP");return!1}this.serverCall("rsvp").kwargs({yes_or_no:a}).liveMutate().send();return!1}))}}),b.BlogShare=l.extend({onLoad:function(){this.$("#@share").click(this.fnbind(function(a){var b=this.$("#@post_title").val(),c=this.lookup("editor").serialize();b&&c&&this.serverCall("share").kwargs({title:b,msg:c}).liveMutate().success(this.fnbind(function(){f.Dialog.dialogFor(this).close_()})).send();return!1})),this.$("#@close").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1}))}}),b.MultiShareBar=TwitterShareBase.extend({share:function(a,b){var c=this.tw_connect_checkbox.attr("checked")=="checked",d=this.fb_connect_checkbox.attr("checked")=="checked",e=this.$("#@tweet").val();this.enabled&&(d||c)&&e!=""&&(!c||this.tweetLength(e)<=140)&&(this.enabled=!1,this.$("#@share").attr("disabled",!0),this.serverCall("share").kwargs({fb:d,tw:c,msg:e,fb_uid:a,fb_access_token:b}).liveMutate().success(this.fnbind(function(){this.$("#@section").hide()})).send());return!1},onLoad:function(){this.configureTwitterShare(),this.configureFacebookShare(),this.enabled=!0,this.$("#@share").click(this.fnbind(function(){var a=this.fb_connect_checkbox.attr("checked")=="checked";a?this.has_publish_stream_perms?this.share():require("facebook").maybePromptToPublish(this.fb_uid,this.fnbind(this.share),this.fnbind(this.wrongFbUidCallback)):this.share();return!1}))},wrongFbUidCallback:function(a){this.child("fb_different_account").show(),this.$("#@share").addClass("submit_button_disabled"),this.child("fb_different_account").bind("hide",this.fnbind(function(){this.$("#@share").removeClass("submit_button_disabled")}))},configureTwitterShare:function(){this.tw_connect_checkbox=this.child("tw_section").$("#@tw_connect_checkbox"),this.tw_connect_link=this.child("tw_section").$("#@tw_connect_link"),this.showCount=this.tw_connect_checkbox.attr("checked"),this.shareButton="#@share";var a=this.countCharacters();this.tw_connect_link.click(this.fnbind(function(){this.tw_connect_checkbox.attr("checked")?(this.tw_connect_checkbox.attr("checked",!1),this.$("#@counter").hide(),this.showCount=!1):(this.tw_connect_checkbox.attr("checked",!0),this.$("#@counter").show(),this.showCount=!0,this.showConnectionIfNecessary("tw")),a();return!1})),this.tw_connect_checkbox.change(this.fnbind(function(){this.tw_connect_checkbox.attr("checked")?(this.$("#@counter").show(),this.showCount=!0,this.showConnectionIfNecessary("tw")):(this.$("#@counter").hide(),this.showCount=!1),a()}))},configureFacebookShare:function(){this.fb_connect_link=this.child("fb_section").$("#@fb_connect_link"),this.fb_connect_checkbox=this.child("fb_section").$("#@fb_connect_checkbox"),this.fb_connect_link.click(this.fnbind(function(){this.fb_connect_checkbox.attr("checked")?this.fb_connect_checkbox.attr("checked",!1):(this.fb_connect_checkbox.attr("checked",!0),this.showConnectionIfNecessary("fb"));return!1})),this.fb_connect_checkbox.change(this.fnbind(function(){this.fb_connect_checkbox.attr("checked")&&this.showConnectionIfNecessary("fb")})),require("facebook").asyncUpdatePermissions()},showConnectionIfNecessary:function(a){a=="tw"&&!this.tw_connected?this.child("tw_section").child("connect_tw").connect():a=="fb"&&!this.fb_connected&&this.child("fb_section").child("connect_fb").connect()}}),b.DashBigBoard=l.extend({onLoad:function(){setInterval(this.fnbind(this.refreshTopSection),6e4),setInterval(this.fnbind(this.refreshLeftSection),12e5)},refreshTopSection:function(){this.$("#@top_section").fadeTo("fast",.1),this.serverCall("new_top_section").contentFor(this.$("#@top_section"),{parentCID:this.cid}).success(this.fnbind(function(){this.$("#@top_section").fadeTo("fast",1)})).send()},refreshLeftSection:function(){this.$("#@left_section").fadeTo("fast",.1),this.serverCall("new_left_section").contentFor(this.$("#@left_section"),{parentCID:this.cid}).success(this.fnbind(function(){this.$("#@left_section").fadeTo("fast",1)})).send()},refreshPlayerSectionIfReady:function(){var a=$("#myytplayer")[0];(!a||a.getPlayerState()!=1)&&this.refreshPlayerSection()},refreshPlayerSection:function(){this.$("#@player_section").fadeTo("fast",.1),this.serverCall("new_player_section").contentFor(this.$("#@player_section"),{parentCID:this.cid}).success(this.fnbind(function(){this.$("#@player_section").fadeTo("fast",1)})).send()}}),b.NewUserTips=l.extend({onLoad:function(){this.$("#@show_more").click(this.fnbind(function(){this.$("#@full_text").show(),this.$("#@show_more").hide(),this.$("#@show_less").show();return!1})),this.$("#@show_less").click(this.fnbind(function(){this.$("#@full_text").hide(),this.$("#@show_less").hide(),this.$("#@show_more").show();return!1}))}}),b.FirstQuestionQuiz=l.extend({answeredQuestionWithIndex:function(a){if(a==this.total_questions-1){this.serverCall("finished_quiz").kwargs({text:this.text}).send();var b=f.Dialog.openerFor(this);b.quizFinished(),f.Dialog.dialogFor(this).close_(),b.showAddDialog(this.text)}else this.$("#@question_"+a).fadeOut(50,this.fnbind(function(){this.$("#@question_"+(a+1)).fadeIn(50)}))}}),b.FirstQuestionQuizQuestion=l.extend({onLoad:function(){this.$("#@answers .answer_row").click(this.fnbind(function(a){var b=$(a.currentTarget).attr("index"),c=this.$("#@answers .answer_feedback."+b).text();b==this.correct_answer_index?(this.$("#@incorrect").hide(),this.$("#@correct").text(c).fadeIn(50),setTimeout(this.fnbind(function(){this.hideQuestion()}),1200)):(this.$("#@correct").hide(),this.$("#@incorrect").hide().text(c).fadeIn(50));return!1}))},hideQuestion:function(){this.parent().answeredQuestionWithIndex(this.question_index)}}),b.FirstQuestionTips=l.extend({onLoad:function(){j.track("first_question_tips_show"),this.$("#@continue").click(this.fnbind(function(){this.$("#@question_tips").hide(),j.track("first_question_tips_continue");return!1})),this.$("#@cancel").click(this.fnbind(function(){j.track("first_question_tips_cancel"),this.serverCall("log_aborted_question").kwargs({reason:"cancel",question_text:this.getQuestionText()}).send(),f.Dialog.dialogFor(this).cancel_();return!1})),this.$("#@tips_link").click(this.fnbind(function(){j.track("first_question_tips_moreinfo"),this.serverCall("log_aborted_question").kwargs({reason:"tips",question_text:this.getQuestionText()}).send(),h.navigateTo(this.question_url,!1);return!1}))},getQuestionText:function(){return $("<div>"+this.parent().lookup("editor").html()+"</div>").text()}}),b.BatchRevertControls=l.extend({onLoad:function(){this.$("#@select_all_check").change(this.fnbind(function(a){this.toggleCheckboxes();return!1})),this.$("#@select_all_word").click(this.fnbind(function(a){this.toggleCheckboxes();return!1})),this.$("#@revert").click(this.fnbind(function(){this.batchRevert();return!1}))},batchRevert:function(){var a=[];this.$(".user_log_operations_to_revert input:checked").each(function(b){a.push($(this).attr("name"))});if(a.length==0)return!1;this._dialog=this.dialog().title("Batch Revert Edits").cancel(null,"Cancel").ok(this.fnbind(function(b){var c=b.dialogComponent,d=c.lookup("editor");if(!d.isEmpty()){var e=d.serialize();this.serverCall("batch_revert").kwargs({revert_strings:a,comment:e}).liveMutate().send()}})).load("batch_revert_dialog");return!1},toggleCheckboxes:function(){var a=this.$(".user_log_operations_to_revert .pagedlist_hidden input:not(:disabled)").length,b=this.$(".user_log_operations_to_revert input:not(:disabled)").length-a,c=this.$(".user_log_operations_to_revert input:checked").length;b!=c?(this.$("#@select_all_check").attr("checked",!0),this.$("input:not(:disabled)").attr("checked",!0),this.$(".user_log_operations_to_revert .pagedlist_hidden input").each(function(a){$(this).attr("checked",!1)})):(this.$("#@select_all_check").attr("checked",!1),this.$("input:not(:disabled)").attr("checked",!1))},getKwargs:function(a,b){return{revert_strings:a,comment:b.serialize()}}}),b.AdminRemoveUserPhoto=l.extend({onLoad:function(a){this.$("#@remove_photo_link").click(this.fnbind(function(){this.dialog().title("Remove Profile Photo").cancel().ok(this.fnbind(function(a){var b=a.dialogComponent.child("editor").serialize();this.serverCall("remove_photo").kwargs({ce:b}).liveMutate().send()}),"Remove Photo").load("remove_photo_dialog"),$("#admin_remove_profile_photo_comment").focus();return!1}))}}),b.RateAnswerApproveButton=l.extend({onLoad:function(a){this.$("#@approve").click(this.fnbind(function(){this.serverCall("approve").liveMutate().send();return!1})),this.$("#@remove_approve").click(this.fnbind(function(){this.serverCall("remove_approve").liveMutate().send();return!1}))}}),b.AttachDisclaimer=l.extend({onLoad:function(a){this.$("#@add_disclaimer_link").click(this.fnbind(function(){this.attachDisclaimer();return!1})),this.$("#@remove_button").tooltip({contents:"Remove Disclaimer From Answer"}),this.$("#@remove_button").click(this.fnbind(function(){this.removeAttachedDisclaimer();return!1}))},attachDisclaimer:function(){this.user_has_set_disclaimer?(this.$("#@add_disclaimer_link, #@disclaimer_attached").toggleClass("hidden"),this.lookup("content_editor")&&(this.lookup("content_editor").disclaimer_update="attach")):this.showDisclaimerDialog()},removeAttachedDisclaimer:function(){this.$("#@add_disclaimer_link, #@disclaimer_attached").toggleClass("hidden"),this.lookup("content_editor")&&(this.lookup("content_editor").disclaimer_update="remove")},showDisclaimerDialog:function(){this._dialog=this.dialog().title("Create Your Disclaimer").load("set_disclaimer_dialog")}}),b.SetDisclaimerDialog=l.extend({onLoad:function(a){this.$("#@cancel").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1}))},showEditor:function(){this.$("#@choose_profession_area").hide(),this.$("#@edit_disclaimer_area").show(),this.lookup("editor").focusInput(),this.$("#@cancel").hide()},showError:function(){this.$("#@choose_profession_area").hide(),this.$("#@wrong_profession_error").show()}}),b.DisclaimerIndicateProfession=l.extend({onLoad:function(){this.$("%@profession").click(this.fnbind(function(){this.parent().showEditor();return!1})),this.$("%@other").click(this.fnbind(function(){this.parent().showError();return!1}))}}),b.UserDisclaimerDialogEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@inline_editor_cancel").click(this.fnbind(function(){f.Dialog.dialogFor(this).close_();return!1})),this.$("#@inline_editor_submit").click(this.fnbind(function(){f.Dialog.openerFor(this).user_has_set_disclaimer=!0,f.Dialog.openerFor(this).attachDisclaimer(),f.Dialog.dialogFor(this).close_();return!1}))}}),b.PendingTopicHoverMenuContents=l.extend({onLoad:function(){this.$("#@confirm_pending_topic").click(this.fnbind(function(){this.serverCall("confirm_pending_topic").liveMutate().send();return!1}))}}),b.UserDisclaimerInlineEditor=InlineEditor.extend({onLoad:function(a){this._super.apply(this,arguments),a&&h.getHash().substr(0,15)=="#editdisclaimer"&&(this.lookup("disclaimer_settings_option").expandOption(),this.toggle_editor(),this.lookup("editor").$("#@editor").effect("highlight",{},1500),this.focusInput())}}),b.DisclaimerAnnouncementButton=l.extend({onLoad:function(){this.$("#@learn").click(this.fnbind(function(){this.serverCall("close_announcement").liveMutate().success(this.fnbind(function(a){h.navigateTo(this.url,!1)})).send()}))}}),b.AnswerTagLink=l.extend({onLoad:function(){this.enabled?this.$("#@link").click(this.fnbind(function(a){this.$("#@menu").menu(this.$("#@link"),{position_relative:!0});return!1})):this.$("#@link").click(this.fnbind(function(a){this.lookup("tag_section").setTag();return!1}))}}),b.AnswerTagMenuListItem=l.extend({onLoad:function(){this.$("#@select_tag").click(this.fnbind(function(){this.lookup("tag_section").setTag(this.tag);return!1}))}}),b.AddTag=l.extend({onLoad:function(){this.$("#@cancel").click(this.fnbind(function(){this.$("#@view_tag").hide();return!1}))},setTag:function(a){this.$("#@view_tag").show(),this.$("#@include_details").hide();if(a){this.tag=a;var b=this.tag_info[a];this.$("#@tag_summary_text").text(b.summary),this.lookup("editor").setHtml(b.description_html,b.description_data),this.lookup("editor").focus()}}}),b.AddTagButton=l.extend({onLoad:function(){this.lock=!1,this.$("#@add_tag").click(this.fnbind(function(){this.addTag();return!1}))},addTag:function(){var a=this.lookup("editor"),b=this.lookup("add_tag_section").tag;a.isEmpty()?this.lookup("add_tag_section").$("#@include_details").show():this.serverCall("add_tag").kwargs({comment:a.serialize(),tag:b,lock:this.lock}).liveMutate().success(this.fnbind(function(){this.parent()&&(this.parent().$("#@view_tag").hide(),this.parent().$("#@include_details").hide())})).send()}}),b.AdminAddTagButton=AddTagButton.extend({onLoad:function(){this.lock=!1,this.$("#@add_tag_link").click(this.fnbind(function(a){this.$("#@add_tag_menu").menu(this.$("#@add_tag_link"),{position_relative:!0});return!1}))}}),b.AdminAddTagMenu=l.extend({onLoad:function(){this.$("#@collapse").click(this.fnbind(function(){this.parent().addTag();return!1})),this.$("#@collapse_and_lock").click(this.fnbind(function(){this.parent().lock=!0,this.parent().addTag();return!1}))}}),b.AnswerTag=l.extend({onLoad:function(){this.$("#@show_comment").click(this.fnbind(function(){this.$("#@comment").show(),this.$("#@show_comment").hide();return!1})),this.$("#@remove").tooltip({contents:"Remove"}),this.$("#@remove").click(this.fnbind(function(){this._dialog=this.dialog().title("Remove Flag").cancel().ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.lookup("editor").serialize();this.serverCall("remove_tag").kwargs({comment:b}).liveMutate().send()}),"Remove").load("remove_tag_dialog");return!1}))}}),b.AnswerTagsMenuAdminOptions=l.extend({onLoad:function(){this.$("#@collapse").click(this.fnbind(function(){this.serverCall("collapse").kwargs({lock:!1}).liveMutate().send();return!1})),this.$("#@collapse_and_lock").click(this.fnbind(function(){this.serverCall("collapse").kwargs({lock:!0}).liveMutate().send();return!1}))}}),b.FeedSuggestionListItem=l.extend({onLoad:function(a){this.$("#@item").hover(this.fnbind(function(){this.$("#@item").addClass("hover"),this.$("#@buttons").removeClass("hidden")}),this.fnbind(function(){this.$("#@item").removeClass("hover"),this.$("#@buttons").addClass("hidden")})),this.$("#@remove").tooltip({contents:"Do not suggest"}).click(this.fnbind(function(){this.serverCall("do_not_suggest").kwargs({oid:this.oid}).liveMutate().send();return!1}))}}),b.ManageAttributionOnAnswer=l.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Hide"}),this.$("#@remove").click(this.fnbind(function(){this.$("#@attribution_row, #@toggle_visibility_row").toggle(),this.hideAttribution();return!1})),this.$("#@show_answer_attribution").click(this.fnbind(function(){this.$("#@attribution_row, #@toggle_visibility_row").toggle(),this.showAttribution();return!1}))},showAttribution:function(){this.lookup("content_editor")&&(this.lookup("content_editor").answer_attribution_update="attach")},hideAttribution:function(){this.lookup("content_editor")&&(this.lookup("content_editor").answer_attribution_update="remove")}}),b.ManageAttributionOnQuestion=ManageAttributionOnAnswer.extend({showAttribution:function(){this.serverCall("show_answer_attribution").liveMutate().send()},hideAttribution:function(){this.serverCall("hide_answer_attribution").liveMutate().send()}}),b.AnswerAttributionName=l.extend({onLoad:function(){this.$("#@hide").click(this.fnbind(function(){this.dialog().title("Confirm Removal").ok(this.fnbind(function(){this.serverCall("hide_answer_attribution").liveMutate().send()}),"Remove").cancel().html("Are you sure you want to remove your name?")}))}}),b.ShuffleBarButton=l.extend({setUrl:function(a){this.$("#@next").attr("href",a)},onLoad:function(){this.locked=!1,this.$("#@next").click(this.fnbind(function(a){this.gotoNext();return!1})),$(document).keydown(this.fnbind(function(a){return this.docKeydown(a)}))},gotoNext:function(){this.serverCall("log_shuffle_click").send(),h.navigateTo(this.$("#@next").attr("href"))},isLocked:function(){var a=!1;$("input, textarea, .qtext_editor_content").each(function(){$(this).attr("focused")=="true"&&(a=!0)});return this.locked||a},docKeydown:function(a){var b=a||window.event;if(this.isLocked())return!0;if(b.keyCode==39){this.gotoNext();return!1}if(b.keyCode==37){window.history.back();return!1}}}),b.ShuffleBarOptionMenu=l.extend({onLoad:function(){this.$("#@options").click(this.fnbind(function(a){this.$("#@options_menu").menu(this.$("#@options"));return!1}));var a={"#@only_open_questions":"/shuffle/open","#@only_answers":"/shuffle/answers","#@all":"/shuffle"};$.each(a,this.fnbind(function(a,b){var c=function(){this.$("#@all").removeClass("selected"),this.$("#@only_open_questions").removeClass("selected"),this.$("#@only_answers").removeClass("selected")};this.$(a).click(this.fnbind(function(d){this.$(a).hasClass("selected")||(c.call(this),this.lookup("shuffle_bar_button").setUrl(b),this.$(a).addClass("selected"));return!1}))}))}}),b.HighProfileUsersFeedPage=l.extend({onLoad:function(){var a=90;setInterval(this.fnbind(function(){this.checkForUsers()}),a*1e3*60)},checkForUsers:function(){var a=5,b=[],c=this;this.$("#@feed .feed_item_answer_user a.user, #@feed .feed_item_activity a.user, #@feed .meta_item_text a.user").each(function(d){var e=$(this).text();b[e]==null?b[e]=1:b[e]=b[e]+1,b[e]>=a&&(c.$("#@attention").show(),c.$("#@attention_name").text(e),setTimeout(c.fnbind(function(){this.$("#@attention").hide()}),6e4))})}}),b.AnswerPermaLink=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"AnswerClickthrough")}))}}),b.Name=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"UserClickthrough")}))}}),b.UserPhoto=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"UserClickthrough")}))}}),b.BoardNameLink=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"BoardClickthrough")}))}}),b.BoardPhoto=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"BoardClickthrough")}))}}),b.TopicNameLinkBase=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"TopicClickthrough")}))}}),b.TopicPhoto=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"TopicClickthrough")}))}}),b.PostTimestamp=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"PostTimestampClickthrough")}))}}),b.BoardItemTimestamp=l.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){i.setQfeedLog(this,"BoardItemClickthrough")}))}}),b.TruncatedAnswerRequireLogin=l.extend({onLoad:function(){this.$("#@more_require_login,#@more_require_login_link_signup").click(this.fnbind(function(){this.serverCall("attempt_login").liveMutate().send();return!1})),this.$("#@more_require_login_link_login").click(this.fnbind(function(){h.navigateTo("/login/index?next="+escape(h.getURL()),!1);return!1}))}}),b.TComments=k.ToggledComponent.extend({onLoad:function(){this._super.apply(this,arguments),this.initState("expanded",this.default_expanded);var a=null;try{a=this.lookup("comment_link")}catch(b){}a&&a.state("loading")&&(a.state("loading",!1),this.state("expanded",!0));if(this.should_auto_expand_for_notif)for(var c=0;c<this.all_comment_ids.length;c++){var d=this.all_comment_ids[c];if(n("comment"+d)){this.toggle(!0,!0);break}}},viewComments:function(){this.state("expanded",!this.state("expanded"))},stateHandlers:{expanded:function(a){var b=this.$("#@comments"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a);var d=this.child("t_comment_list_wrapper");d&&d.state("visible",a)}}}),b.TComment=l.extend({parentComment:function(){return this.parent().parent().parent()},clickHandlers:{delete_link:function(){this.deleteComment()},show_downvoted_link:function(){this.state("showDownvotedLinkVisible",!1)}},hasSingleChild:function(){var a=this.child("t_comment_list_wrapper");if(!a)return!1;return a.hasSingleChild()},onLoad:function(){this.initState("expanded",!1),this.initState("showDownvotedLinkVisible",this.is_downvoted_and_hidden),this.initState("visible",this.is_root||this.default_visible||this.parentComment().state("expanded")),this.installMouseHandlers(),this.expandOnNotif()},addNotifHighlight:function(a){a.addClass("highlighter");var b=!1,c=function(){var b=a.offset().top,c=b+a.height(),d=$(window).scrollTop(),e=d+$(window).height();return c>=d&&b<=e},d=c(),e=function(){b=!0};$(window).scroll(e);var f=setInterval(function(){if(b){var g=c();d&&!g&&(a.removeClass("highlighter"),clearInterval(f),$(window).unbind("scroll",e)),d=g,b=!1}},500)},expandOnNotif:function(){if(!this.initState("first_call",!0))if(n("comment"+this.id)){var a=[],b=this;while(!b.is_root)b=b.parentComment(),a.unshift(b);for(var c=0;c<a.length;c++)a[c].state("expanded",!0);var d=this.lookup("comments_list");d&&d.state("expanded",!0),this.addNotifHighlight(this.$("#@comment_highlight_wrapper"))}},deleteComment:function(){var a="Are you sure you want to delete this comment?";this.dialog().title("Delete Comment").cancel(null,"Close").ok(this.fnbind(function(){this.serverCall("delete_comment").kwargs({cid:this.id,oid:this.object_id}).liveMutate().send()}),"Delete Comment").html(a)},stateHandlers:{expanded:function(a){var b=this.$("#@comment_inner"),c=b.hasClass("expanded");if(arguments.length<1)return c;b.toggleClass("expanded",a);var d=this.child("t_comment_replies_collapsed");d&&d.state("visible",!a);var e=this.child("t_comment_list_wrapper");e&&e.state("visible",a),this.$("#@comment").toggleClass("last_expanded",a&&this.is_last)},visible:function(a){var b=this.$("#@comment"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a)},showDownvotedLinkVisible:function(a){var b=this.$("#@show_downvoted_link_wrapper"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),this.$("#@full_comment_text").toggleClass("hidden",a),this.$("#@footer_wrapper").toggleClass("hidden",a)}}}),b.TCommentListWrapper=l.extend({onLoad:function(a){this.initState("visible",this.parent().state("expanded")||this.default_expanded),this.first_level_all_loaded=!1,this.comment_list_just_opened_enabled&&this.$("#@comment_list_wrapper").click(this.fnbind(function(a){a.target.tagName!=="A"&&($(".comment_list_just_opened").removeClass("comment_list_just_opened"),$(".comment_list_just_opened_non_recursive").removeClass("comment_list_just_opened_non_recursive"),this.$("#@comment_list").addClass("comment_list_just_opened_non_recursive")),a.stopPropagation()}))},hasSingleChild:function(){var a=this.child("t_comment_list");return a&&a.hasSingleChild()},focusAddRoot:function(){var a=this.child("t_comment_add_root");a&&a.focusEditor()},loadChildren:function(){this.lazy_load_children=!1,this.serverCall("load_child_list").kwargs({object_id:this.object_id,reply_to_id:this.reply_to_id,level:this.level}).success(this.fnbind(function(a){this.state("visible",!0)})).contentFor(this.$("#@comment_list_placeholder"),{parentCID:this.cid}).send()},loadAllFirstLevel:function(){this.first_level_all_loaded=!0,this.lookup("placeholder_toggled").toggle(!0,!0)},stateHandlers:{highlighted:function(a){var b=this.$("#@comment_list"),c=b.hasClass("selected");if(arguments.length<1)return c;b.toggleClass("selected",a)},visible:function(a){var b=this.$("#@comment_list_wrapper"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a);var d=this.child("t_comment_list");if(d){var e=this.hasSingleChild(),f=!this.is_root;d.eachChildInAnyOrder(function(b){b.state("visible",a),a&&e&&f&&b.hasSingleChild&&b.hasSingleChild()&&b.state("expanded",!0)})}else a&&this.lazy_load_children&&this.loadChildren();a&&this.$("#@comment_list_first_level_placeholder").size()>0&&!this.first_level_all_loaded&&this.loadAllFirstLevel()}}}),b.TCommentList=l.extend({onLoad:function(a){if(this.should_auto_expand_for_notif)for(var b=0;b<this.all_comment_ids.length;b++){var c=this.all_comment_ids[b];if(n("comment"+c)){this.lookup("comments_list").viewComments();break}}},hasSingleChild:function(){return this.children()&&this.children().length===1},eachChildInAnyOrder:function(a){var b=this.children();if(b)for(var c=0;c<b.length;c++)a(b[c])}}),b.TCommentReplyBox=l.extend({clickHandlers:{add_comment_link:function(){this._request()},cancel_link:function(){this._cancel()}},onLoad:function(a){this.initState("visible",!1),this.installMouseHandlers()},_cancel:function(a){this.state("visible",!1),this.lookup("t_comment_action_bar").state("visible",!0)},stateHandlers:{visible:function(a){var b=this.$("#@reply_box"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),a&&this.child("editor").focus(),this.$("#@reply_box").toggleClass("parent_expanded",this.parent().state("expanded"))}},_request:function(){var a=this.lookup("editor");if(!a.isEmpty()){var b=a.serialize();this._cancel(),this.serverCall("add_comment").kwargs({oid:this.object_id,comment:b,reply_to_id:this.reply_to_id}).success(this.fnbind(function(b){this.parent().state("expanded",!0),a.clear()})).liveMutate().send()}}}),b.TCommentAddRoot=l.extend({clickHandlers:{add_root_link:function(){this._request()}},onLoad:function(){this.installMouseHandlers()},focusEditor:function(){var a=this.lookup("editor");a.focus()},_request:function(){var a=this.lookup("editor");a.isEmpty()||this.serverCall("add_comment").kwargs({oid:this.object_id,comment:a.serialize()}).success(this.fnbind(function(b){a.clear()})).liveMutate().send()}}),b.TCommentRepliesCollapsed=l.extend({clickHandlers:{show_child_link:function(a){this.parent().state("expanded",!0);if(this.comment_list_just_opened_enabled){$(".comment_list_just_opened").removeClass("comment_list_just_opened"),$(".comment_list_just_opened_non_recursive").removeClass("comment_list_just_opened_non_recursive");var b=null;try{b=this.lookup("t_comment_list_wrapper")}catch(c){}b&&b.$("#@comment_list").addClass("comment_list_just_opened"),a.stopPropagation()}}},onLoad:function(a){this.initState("visible",!this.parent().state("expanded")),this.installMouseHandlers()},stateHandlers:{visible:function(a){var b=this.$("#@show_child_link_wrapper"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a)}}}),b.TCommentActionBar=l.extend({vote:function(a,b){this.serverCall("comment_vote").kwargs({oid:this.object_id,cid:this.id,is_upvote:a,cancel:b}).liveMutate().send()},clickHandlers:{comment_downvote:function(){this.vote(!1,!1)},comment_upvote:function(){this.vote(!0,!1)},comment_downvote_cancel:function(){this.vote(!1,!0)},comment_upvote_cancel:function(){this.vote(!0,!0)}},mouseDownHandlers:{show_reply_box_link:function(){this.state("visible",!1),this.lookup("t_comment_reply_box").state("visible",!0)}},onLoad:function(a){this.initState("visible",!0),this.installMouseHandlers()},stateHandlers:{visible:function(a){var b=this.$("#@action_bar"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a)}}}),b.TCommentStandalone=l.extend({onLoad:function(){this.initState("expanded",!0),this.initState("comment_log_visible",!1),this.installMouseHandlers()},clickHandlers:{change_log_toggle:function(){this.state("comment_log_visible",!this.state("comment_log_visible"))}},stateHandlers:{expanded:function(a){var b=this.$("#@comments"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a);var d=this.child("t_comment_"+this.comment_id);!d||d.state("expanded",!0)},comment_log_visible:function(a){var b=this.$("#@comment_log"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),this.$("#@view_label").toggle(!a)}}}),b.TCommentWhoVoted=l.extend({onLoad:function(){this.initState("expanded",this.default_expanded),this.installMouseHandlers(),this.loaded=this.default_expanded},clickHandlers:{view_all_link:function(){this.loaded||this.serverCall("voter_list").contentFor(this.$("#@voter_list_expanded"),{parentCID:this.cid}).success(this.fnbind(function(){this.loaded=!0})).send(),this.state("expanded",!0)}},stateHandlers:{expanded:function(a){var b=this.$("#@all_phrases"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),this.$("#@view_all_span").toggleClass("hidden",a)}}}),b.GiveCreditsSection=l.extend({onLoad:function(){this.$("#@give").click(this.fnbind(function(){this._dialog=this.dialog().title("Give Credits").load("give_credits_dialog")}))}}),b.TCommentFullTextInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.setToggleCallback(this.fnbind(function(){if(this.parent()){var a=this.lookup("t_comment_"+this.id);a&&a.$("#@comment_inner").toggleClass("comment_editor_focused")}}))}}),b.ExploreTopics=l.extend({onLoad:function(){this.opened_drawer_height=0,this.focused_topic=-1},closeAllDrawers:function(){this.lookup("row_0").closeDrawer(),this.lookup("row_1").closeDrawer(),this.lookup("row_2").closeDrawer(),this.focused_topic&&$(".browse_big_topic").removeClass("faded").fadeTo(400,1),this.opened_drawer_height=0}}),b.ExploreTopicsRow=l.extend({onLoad:function(){this.fetchAllTopicContent(),this.drawerCloseInterval=400},focusTopic:function(a,b){this.scrollToObject=b,this.scrollToOffset(),this.lookup("explore_topics").closeAllDrawers();var c=this.drawerCloseInterval+200;this.lookup("explore_topics").focused_topic||(c=0),setTimeout(this.fnbind(function(){this.showTopicContent(a)}),c)},showTopicContent:function(a){this.lookup("explore_topics").focused_topic!=a?(this.$("%@focused_topics").hide(),this.$("#@focused_topic_"+a).show(),$(".browse_big_topic[topic_id!='"+a+"']").addClass("faded").fadeTo(250,.25),this.$("#@focused_topic_container").slideDown(this.drawerCloseInterval,this.fnbind(function(){this.lookup("explore_topics").opened_drawer_height=this.$("#@focused_topic_container").height()})),this.lookup("explore_topics").focused_topic=a):this.lookup("explore_topics").focused_topic=null},closeDrawer:function(){this.$("#@focused_topic_container").slideUp(this.drawerCloseInterval)},scrollToOffset:function(){var a=this.scrollToObject.offset().top-10,b=this.$("#@focused_topic_container").offset().top;a>b&&(a=a-this.lookup("explore_topics").opened_drawer_height,$("html:not(:animated),body:not(:animated)").animate({scrollTop:a},this.drawerCloseInterval))},fetchAllTopicContent:function(){for(var a=0;a<this.tids.length;a++){var b=this.tids[a];this.serverCall("focus_topic").args(b).contentFor(this.$("#@focused_topic_"+b),{parentCID:this.cid}).send()}}}),b.BrowseBigTopic=l.extend({onLoad:function(){var a=this.$("#@browse_big_topic");this.$("#@browse_big_topic").hover(function(b){a.hasClass("faded")&&a.fadeTo(1,1)},function(b){a.hasClass("faded")&&a.fadeTo(1,.25)}),this.$("#@big_photo").click(this.fnbind(function(){this.lookup("explore_topics_row").focusTopic(this.tid,this.$("#@big_photo")),this.serverCall("log_click").send();return!1}))}}),b.AskedBy=l.extend({onLoad:function(){this.$("#@vote_count").click(this.fnbind(function(){this.$("#@vote_count").hide(),this.$("#@vote_list").show();return!1}))}}),b.WantedAnswerDecline=l.extend({onLoad:function(){this.$("#@ignore").click(this.fnbind(function(){this.showIgnoreReasonDialog();return!1}))},showIgnoreReasonDialog:function(){this._dialog=this.dialog().title("Decline Request").load("decline_dialog")}}),b.DeclineRequestDialog=l.extend({onLoad:function(){this.$("#@give").click(this.fnbind(function(){var a="";this.lookup("editor").isEmpty()||(a=this.lookup("editor").serialize()),this.serverCall("decline").kwargs({reason:a}).liveMutate().success(this.fnbind(function(){require("webnode2").Dialog.dialogFor(this).close_()})).send();return!1})),this.$("#@close").click(this.fnbind(function(){require("webnode2").Dialog.dialogFor(this).close_();return!1}))}}),b.SpendCurrencyButton=l.extend({onLoad:function(){this.$("#@spend").click(this.fnbind(function(){var a=this.getAmount();a&&this.serverCall("spend").kwargs({amount:a}).liveMutate().send();return!1})),this.$("#@undo").click(this.fnbind(function(){this.serverCall("undo").liveMutate().send();return!1}))},getAmount:function(){return this.cQuery(":price_control.choose_amount").getAmount()}}),b.CreditsPriceControl=l.extend({onLoad:function(){this.$("#@price").tooltip({contents:"Use more credits to ask"}),this.$("#@price").click(this.fnbind(function(){this.$("#@price, #@selector").toggleClass("hidden"),this.$("#@free_text").addClass("hidden"),this.$("#@paid_text").removeClass("hidden"),this.cQuery(":choose_amount").focus();return!1}))}}),b.TopicLocationPreview=l.extend({onLoad:function(){var a=this;this.$("#@enlarge_map").click(this.fnbind(function(){this.$("#@enlarge_map").hide(),this.$("#@wrapper").css("height","auto"),this.$("#@wrapper").css("width","auto"),this.$("#@wrapper").removeClass("mask"),this.$("#@content").removeClass("mask_content"),this.$("#@content").css("top","0px"),this.lookup("picker").toggleControls(!0);return!1}))}}),b.PlacePicker=l.extend({onLoad:function(){this.address=this.default_location,this.initializeGoogleMaps(),this.mutable==!0&&(this.$("#@edit_map").click(this.fnbind(function(){this.toggleEditor();return!1})),this.$("#@change_location").click(this.fnbind(function(){if(this.place||this.marker){this.$("#@search_text_field").blur();var a,b;this.map.getBounds().contains(this.marker.getPosition())?(a=this.marker.getPosition().lat(),b=this.marker.getPosition().lng()):(a=this.map.getCenter().lat(),b=this.map.getCenter().lng());if(!this.place){var c=new google.maps.LatLng(a,b),d=new google.maps.Geocoder;d.geocode({location:c},this.fnbind(function(a,b){if(b==google.maps.GeocoderStatus.OK&&a.length){var c=a[0];this.radius=this.computeRadius(c.geometry.viewport),this.setAddress(c.address_components)}}))}var e=$.trim(this.$("#@search_text_field").val());this.serverCall("place_changed").kwargs({radius:this.radius,reference:this.place&&this.place.reference||this.reference,lat:a,lng:b,viewport:{zoom:this.map.getZoom(),mapTypeId:this.map.getMapTypeId(),icon:this.place&&this.place.icon,tilt:this.map.getTilt(),heading:this.map.getHeading()},address:e.length?e:this.address}).success(this.fnbind(function(){this.default_location.hasLocation=!0})).send()}else this.$("#@search_text_field").focus()})),this.$("#@edit").click(this.fnbind(function(){this.toggleEditor();return!1})),this.$("#@add").click(this.fnbind(function(){this.reinitializeMap();return!1})),this.$("#@clear").click(this.fnbind(function(){this.dialog().title("Remove Location").cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("place_cleared").success(this.fnbind(function(){this.toggleEditor()})).send()}),"Remove Location").html("Are you sure you want to remove the location set for this topic?");return!1})),this.$("#@close").click(this.fnbind(function(){this.toggleEditor(),this.initializeGoogleMaps(),this.default_location.hasLocation===!1&&this.$("#@map_wrapper").hide();return!1})),h.getHash().substr(0,13)=="#editlocation"&&this.reinitializeMap())},initializeGoogleMaps:function(){this.mapOptions={center:window.google&&google.maps&&new google.maps.LatLng(this.default_location.latitude,this.default_location.longitude),zoom:this.viewport&&this.viewport.zoom||7,mapTypeId:this.viewport&&this.viewport.mapTypeId||window.google&&google.maps&&google.maps.MapTypeId.ROADMAP||"roadmap",tilt:this.viewport&&this.viewport.tilt!==undefined&&this.viewport.zoom>=18?this.viewport.tilt:45,heading:this.viewport&&this.viewport.heading,streetViewControl:this.mutable==!0?!1:!0};var a=this.viewport&&this.viewport.icon;if(this.static_map==!0){var b="http://maps.googleapis.com/maps/api/staticmap?center="+encodeURIComponent(this.default_location.latitude+","+this.default_location.longitude)+"&zoom="+encodeURIComponent(this.mapOptions.zoom)+"&size="+encodeURIComponent(this.size.width+"x"+this.size.height)+"&maptype="+encodeURIComponent(this.mapOptions.mapTypeId)+"&markers="+encodeURIComponent("icon:"+a+"shadow:false|"+this.default_location.latitude+","+this.default_location.longitude)+"&sensor=false",c=$('<img src="'+b+'" />');this.$("#@map_canvas").replaceWith(c)}else{this.map=new google.maps.Map(this.$("#@map_canvas").get(0),this.mapOptions),(this.simple_view==!0||this.mutable==!0)&&this.toggleControls(!1),this.default_location.hasLocation!==!1&&this.updateMarker(a,this.mapOptions.center,this.default_text),this.mutable==!0&&this.toggleDraggable(!1);if(this.mutable==!0){var d=this.$("#@search_text_field").get(0),e=new google.maps.places.Autocomplete(d);e.bindTo("bounds",this.map),google.maps.event.addListener(e,"place_changed",this.fnbind(function(){this.infowindow&&this.infowindow.close(),this.place=e.getPlace(),this.place.geometry.viewport?(this.map.fitBounds(this.place.geometry.viewport),this.radius=this.computeRadius(this.place.geometry.viewport)):(this.map.setCenter(this.place.geometry.location),this.map.setZoom(17),this.radius=30),this.setAddress(this.place.address_components),this.updateMarker(this.place.icon,this.place.geometry.location)})),google.maps.event.addListener(this.map,"click",this.fnbind(function(a){if(!!this.getControlState()){var b=a.latLng;this.radius=this.computeRadius(this.map.getBounds()),this.handleMarkerReposition(b),this.updateMarker(null,b)}}))}}},setAddress:function(a){this.address="";if(a){this.address=[a[0]&&a[0].short_name||"",a[1]&&a[1].short_name||"",a[2]&&a[2].short_name||""],this.address[1]==this.address[2]&&this.address.splice(2,1),this.address[0]==this.address[1]&&this.address.splice(1,1);var b="";$.each(this.address,this.fnbind(function(a,c){b+=c,/^[0-9]+$/.test(c)?b+=" ":a!=this.address.length-1&&(b+=", ")})),this.address=b}},reinitializeMap:function(){this.$("#@map_wrapper").show(0,this.fnbind(function(){this.initializeGoogleMaps(),this.toggleEditor(),this.$("#@search_text_field").focus()}))},toggleEditor:function(){this.$("#@view").toggle(),this.$("#@editor").toggle(),this.$("#@edit_map").toggle(),this.toggleDraggable(),this.toggleControls()},getControlState:function(){return!!this.mapOptions.mapTypeControl},toggleControls:function(a){var b=a!==undefined?a:!this.getControlState();this.mapOptions.mapTypeControl=b,this.mapOptions.panControl=b,this.mapOptions.zoomControl=b,this.mapOptions.scaleControl=b,this.mapOptions.rotateControl=b,this.mapOptions.overviewMapControl=b,this.map.setOptions(this.mapOptions)},toggleDraggable:function(a){this.mapOptions.draggable=a!==undefined?a:!this.mapOptions.draggable,this.mapOptions.draggable?(this.mapOptions.minZoom=undefined,this.mapOptions.maxZoom=undefined,this.marker&&this.marker.setDraggable(!0)):(this.mapOptions.minZoom=this.map.getZoom(),this.mapOptions.maxZoom=this.map.getZoom(),this.marker&&this.marker.setDraggable(!1)),this.map.setOptions(this.mapOptions)},updateMarker:function(a,b){this.marker&&this.marker.setMap(null);var c=new google.maps.MarkerImage(a||"http://maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png",new google.maps.Size(40,40),new google.maps.Point(0,0),new google.maps.Point(20,40),new google.maps.Size(40,40));this.marker=new google.maps.Marker({clickable:!0,draggable:this.mapOptions&&this.mapOptions.draggable,icon:c,map:this.map,position:b}),google.maps.event.addListener(this.marker,"dragend",this.fnbind(function(a){var b=a.latLng;this.handleMarkerReposition(b)})),this.updateInfoWindow(b)},handleMarkerReposition:function(a){this.place=null,window.setTimeout(this.fnbind(function(){this.map.panTo(a)}),500);var b=new google.maps.Geocoder;b.geocode({location:a},this.fnbind(function(b,c){if(c==google.maps.GeocoderStatus.OK&&b.length){var d=b[0];this.radius=this.computeRadius(d.geometry.viewport),this.setAddress(d.address_components),this.updateInfoWindow(a)}}))},updateInfoWindow:function(a){this.infowindow&&this.infowindow.close(),this.address&&this.address.length&&(this.infowindow=new google.maps.InfoWindow({content:this.address,position:a}),google.maps.event.addListener(this.marker,"click",this.fnbind(function(){this.infowindow.open(this.map,this.marker)})))},computeRadius:function(a){var b=a.getNorthEast(),c=a.getSouthWest(),d=b.lat(),e=c.lat(),f=b.lng(),g=c.lng();return Math.floor(Math.abs(d-e)*111045/2)}}),b.OtherWantedAnswersSection=l.extend({onLoad:function(){this.$("#@show").click(this.fnbind(function(){this.$("#@show").hide(),this.$("#@other_requests").show();return!1}))}}),b.AdjustRate=l.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){this.$("#@menu_items").menu(this.$("#@menu_link"));return!1}))}}),b.AdjustRateMenuOption=l.extend({onLoad:function(){this.$("#@adjust_rate").click(this.fnbind(function(){this.serverCall("adjust_rate").liveMutate().send()}))}}),b.CurrencyUserRow=l.extend({onLoad:function(){this.$("#@show_activity").click(this.fnbind(function(){this.$("#@show_activity").hide(),this.$("#@activity").show();return!1}))}}),b.AddRewardSection=l.extend({onLoad:function(){this.$("#@add_reward").click(this.fnbind(function(){var a=this.cQuery(":credit_amount").$("#@credit_amount").val();isNaN(parseInt(a))||this.serverCall("add_reward").kwargs({amount:a}).liveMutate().send();return!1}))}}),b.ChooseCreditAmount=l.extend({onLoad:function(a){this.$("#@credit_amount").bind("blur",this.fnbind(function(a){this.amountChangedCallback(),this.preventBelowMin(),this.shiftDown=!1})),this.shiftDown=!1,this.$("#@credit_amount").bind("keydown",this.fnbind(function(a){a.which==38?(this.changeAmountBy(1),a.preventDefault()):a.which==40?(this.changeAmountBy(-1),a.preventDefault()):a.which==16&&(this.shiftDown=!0,a.preventDefault())})),this.$("#@credit_amount").bind("keyup",this.fnbind(function(a){a.which==16?(this.shiftDown=!1,a.preventDefault()):a.which>=48&&a.which<=57&&this.amountChangedCallback()}))},changeAmountBy:function(a){var b=a;this.shiftDown&&(b=b*10),this.$("#@credit_amount").val(parseInt(this.$("#@credit_amount").val())+b),this.amountChangedCallback(),this.preventBelowMin()},amountChangedCallback:function(){var a=parseInt(this.$("#@credit_amount").val());this.checkForNaN();var b=this.lookup("credit_amount_wrapper");b&&(a>this.max?b.overMax():b.underMax()),this.$("#@credit_amount").val(a),this.preventAboveMax(),this.setWidth(a)},preventBelowMin:function(){this.checkForNaN();var a=parseInt(this.$("#@credit_amount").val());a=Math.max(a,this.min),this.$("#@credit_amount").val(a)},preventAboveMax:function(){var a=parseInt(this.$("#@credit_amount").val());a=Math.min(a,this.max),this.$("#@credit_amount").val(a)},checkForNaN:function(){var a=parseInt(this.$("#@credit_amount").val());isNaN(a)&&(a=this.start),this.$("#@credit_amount").val(a)},setWidth:function(a){a>999?a>9999?a>9999&&this.$("#@credit_amount").width("3em"):this.$("#@credit_amount").width("2.5em"):this.$("#@credit_amount").width("2em")},focus:function(){this.$("#@credit_amount").focus()},getAmount:function(){return this.$("#@credit_amount").val()}}),b.GiveRewardButton=l.extend({onLoad:function(){var a="Give "+this.reward_amount+" credit reward to this answer";this.$("#@give_reward_link").tooltip({contents:a});var b="Do not give reward to this answer";this.$("#@no_reward_link").tooltip({contents:b}),this.$("#@give_reward_link").click(this.fnbind(function(){this.serverCall("give_reward").kwargs({aid:this.aid}).liveMutate().send();return!1}))}}),b.CloseRewardButton=l.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){this.serverCall("close_reward").liveMutate().send();return!1}))}}),b.RewardIcon=l.extend({onLoad:function(){this.$("#@icon").tooltip({contents:this.reward_info})}}),b.RewardOfferer=l.extend({onLoad:function(){this.$("#@offerer").tooltip({contents:this.offerer_info})}}),function(){function a(){var a=require("prefetch_init").getFrameElement();if(a&&a.getAttribute("autoresize")==="true"){var b=$(document),c=b.width(),d=b.height();$(a).width(c).height(d)}}d(window,"resize",a),$(document).ready(a)}(),b.PostSuggestedEditDiscardButtonInline=l.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){this.serverCall("discard_suggested_edit").kwargs({pid:this.pid}).liveMutate().send();return!1}))}}),b.PostTitleSuggestedEditDiscardButtonInline=l.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){this.serverCall("discard_suggested_title_edit").kwargs({pid:this.pid}).liveMutate().send();return!1}))}}),b.AnswerSuggestedEditDiscardButtonInline=l.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){this.serverCall("discard_suggested_edit").kwargs({aid:this.aid}).liveMutate().send();return!1}))}}),b.WidgetsLoginAndFollowMain=l.extend({onLoad:function(a){this.$("#@signup_link").click(this.fnbind(function(){z()}))}}),b.WidgetsExampleFollowButton=l.extend({clickHandlers:{change_target:function(){this.toggleSelector(!0)}},toggleSelector:function(a){this.$("#@selector_wrapper").toggle(a),this.$("#@button_wrapper").toggle(!a),a&&this.child("selector").$("#@input").focus()},updateTarget:function(a,b,c){this.serverCall("get_target_src").kwargs({target_object_id:a,target_is_user:b==="user",is_dark:this.is_dark}).success(this.fnbind(function(a){this.$("#@example_iframe").attr("src",a),this.toggleSelector(!1),c&&this.$("#@fill").effect("highlight",{},2e3)})).send()},blurSelector:function(){this.toggleSelector(!1)},setTo:function(a,b){var c="widgets_example_follow_button";this.is_dark||(c+="_dark"),this.updateTarget(a,b),this.lookup(c).updateTarget(a,b,!0);var d="widgets_example_follow_button_code_wrapper";this.lookup(d).updateCode(a,b),this.lookup(d+"_dark").updateCode(a,b)},onLoad:function(){this.installMouseHandlers()}}),b.WidgetsExampleFollowButtonCodeWrapper=l.extend({updateCode:function(a,b){this.serverCall("get_widget_code").kwargs({target_object_id:a,target_is_user:b==="user",is_dark:this.is_dark}).success(this.fnbind(function(a){this.$("#@code").text(a).effect("highlight",{},2e3)})).send()},onLoad:function(){var a=this.$("#@code");a.focus(function(){setTimeout(function(){a.select()},0),a.mouseup(function(b){a.unbind("mouseup"),b.stopPropagation()})})}}),b.BoardItemTopics=l.extend({toggle:function(){this.$("#@topics").toggleClass("hidden")}}),b.BoardItemTopicLink=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(a){this.parent().lookup("topics").toggle();if(this.no_topics){var b=this.cQuery(":topics.topics.editor");b.toggleClasses(),b.focusSelector()}return!1}))}}),b.CreateBoardDialogLink=l.extend({onLoad:function(){this.$("#@create").click(this.fnbind(function(){this.openDialog();return!1}))},openDialog:function(){this._dialog=this.dialog().title("Create Board").cancel(null,"Cancel").load("content")}}),b.BoardDialogComposer=l.extend({onLoad:function(){this.lookup("input").$("#@name").focus(),this.lookup("input").$("#@controls").show()}}),b.CreateBoard=l.extend({onLoad:function(){this.submitted=!1,this.$("#@name").focus(this.fnbind(function(){this.$("#@controls").show()})),this.$("#@create").click(this.fnbind(function(){var a=this.$("#@name").val();if(a&&!this.submitted){this.submitted=!0;var b=this.lookup("privacy").getType();this.$("#@name").addClass("disabled"),this.serverCall("create").kwargs({name:a,privacy:b}).success(this.fnbind(function(a){this.$("#@name").val(""),a[0]=="/"&&(document.location=a)})).liveMutate().send()}return!1}))}}),b.ProfileBoardPreviewSectionListItem=l.extend({onLoad:function(){var a=this;this.$("#@item").hover(function(b){a.$("#@delete").show(),a.$("#@item").addClass("hover")},function(b){a.$("#@delete").hide(),a.$("#@item").removeClass("hover")})}}),b.BoardItemView=l.extend({onLoad:function(){var a=this;this.has_vote_controls&&this.$("#@item").hover(function(b){a.cQuery(":vote_controls").$("#@delete").show(),a.$("#@item").addClass("hover")},function(b){a.cQuery(":vote_controls").$("#@delete").hide(),a.$("#@item").removeClass("hover")})}}),b.LinkBoardItemView=BoardItemView.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@edit").click(this.fnbind(function(){this.showEditor();return!1})),this.$("#@item").hover(this.fnbind(function(a){this.$("#@item").addClass("hover")}),this.fnbind(function(a){this.$("#@item").removeClass("hover")}))},showEditor:function(){this.cQuery(":description.editor").toggle_editor()}}),b.BoardURLSection=l.extend({onLoad:function(){this.$("#@url").bind("keyup",this.fnbind(function(a){var b=this.$("#@url").val();this.serverCall("check_url").kwargs({bid:this.bid,url:b}).contentFor(this.$("#@button"),{parentCID:this.cid}).send()}))},updateURL:function(){var a=this.$("#@url").val();a&&this.serverCall("register_choice").kwargs({url:a}).success(this.fnbind(function(){location.reload(!0)})).liveMutate().send();return!1}}),b.AddURLStatusButton=l.extend({onLoad:function(){this.$("#@update").click(this.fnbind(function(){this.parent().updateURL()}))}}),b.AddToBoardBox=l.extend({onLoad:function(){this.$("#@fake_editor").click(this.fnbind(function(){this.toggle_editor(),this.bid?this.cQuery(":editor.editor.editor").focus():this.cQuery(":editor.selector.selector").focus(!0);return!1})),this.$("#@fake_url").click(this.fnbind(function(){this.toggle_editor(),this.cQuery(":editor.editor").$("#@url").focus();return!1}))},closePopup:function(){$("#layout_header .popout_contents").length&&window.close()},toggle_editor:function(){this.$("#@fake_editor_row").hide(),this.$("#@editor_row").show()}}),b.Link=l.extend({getLinkInfo:function(){this.link_info.title=this.cQuery(":title.editor").get_value(),this.link_info.snippet=this.cQuery(":snippet.editor").get_value();var a=this.cQuery(":media");a.editable&&(this.link_info.image_keys=a.get_image_keys());return this.link_info},disableInputs:function(){this.cQuery(":title.editor.editor").$("#@editor").addClass("qtext_editor_content_disabled"),this.cQuery(":snippet.editor.editor").$("#@editor").addClass("qtext_editor_content_disabled")},setDisplayType:function(a,b){this.$("#@link_wrapper").removeClass().addClass(a),this.link_info.display_type=b},playVideo:function(){var a=2;this.link_info.display_type==a&&(this.$("#@image_col, #@info_col").css("float","left"),this.$("#@image_col").css("width","100%"),this$("#@image_and_info").css("display: block"))}}),b.LinkEditor=l.extend({onLoad:function(){this.$("#@link_no_image").click(this.fnbind(function(){this.clearAllSelected(),this.setDisplayType("link_no_image"),this.$("#@link_no_image").addClass("selected");return!1})),this.$("#@link_small_image").click(this.fnbind(function(){this.clearAllSelected(),this.setDisplayType("link_small_image"),this.$("#@link_small_image").addClass("selected");return!1})),this.$("#@link_large_image").click(this.fnbind(function(){this.clearAllSelected(),this.setDisplayType("link_large_image"),this.$("#@link_large_image").addClass("selected");return!1})),this.$("#@remove_url").click(this.fnbind(function(){this.parent().removeUrl();return!1}))},clearAllSelected:function(){this.$("#@link_no_image, #@link_small_image, #@link_large_image").removeClass("selected")},setDisplayType:function(a){var b;a=="link_no_image"?b=1:a=="link_small_image"?b=2:b=3,this.cQuery(":preview").setDisplayType(a,b)}}),b.LinkVideo=l.extend({onLoad:function(){this.$("#@video_wrapper").click(this.fnbind(function(){this.parent().playVideo(),this.$("#@video_wrapper .qtext_embed.thumbnail").css("width","100%").css("height","272px")}))}}),b.LinkImageEditor=l.extend({onLoad:function(){this.index=0,this.$("#@next_photo").click(this.fnbind(function(a){this.cycle_photo(1);return!1})),this.$("#@prev_photo").click(this.fnbind(function(a){this.cycle_photo(this.keys_and_sources.length-1);return!1})),this.$("#@link").click(this.fnbind(function(){this.serverCall("track").send()}))},get_image_keys:function(){if(this.keys_and_sources!={}){var a=[];for(var b=this.index,c=0,d=this.keys_and_sources.length;c<d;c++,b=(b+1)%d)a.push(this.keys_and_sources[b][0]);return a}return[]},cycle_photo:function(a){var b=this.index;this.index=(b+a)%this.keys_and_sources.length,this.$("#@img").attr("src",this.keys_and_sources[this.index][1])}}),b.LinkBoardItemDescriptionInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.board_item=this.lookup("board_item"),this.setToggleCallback(this.fnbind(function(){this.board_item.$("#@preview, #@edit").toggle()}))},_get_kwargs:function(){return{input:this.get_value(),preview:this.cQuery(":link_editor.preview").getLinkInfo()}}}),b.LinkTitle=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this.serverCall("track").send()}))}}),b.BoardSelectorWrapper=l.extend({onLoad:function(){this.cQuery(":selector").$("#@input").bind("focus",this.fnbind(function(a){this.removeBoardMissingError()}))},addMissingBoardError:function(){this.cQuery(":selector").$("#@input").addClass("input_validation_error"),this.$("#@no_board_error").show()},removeBoardMissingError:function(){this.cQuery(":selector").$("#@input").removeClass("input_validation_error"),this.$("#@no_board_error").hide()}}),b.DeleteBoardItem=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this.parent().$("#@item").addClass("selected"),this._dialog=this.dialog().title("Delete from Board").ok(this.fnbind(function(){this.serverCall("delete").liveMutate().send()}),"Delete").cancel(this.fnbind(function(){this.parent().$("#@item").removeClass("selected")}),"Cancel").html("Are you sure you want to delete this item from your board?");return!1}))}}),b.AddToBoardDialogContents=l.extend({}),b.AddToBoardDialog=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this._dialog=this.dialog().title(this.title).load("add_to_board_content");return!1}))},closeDialog:function(){this._dialog.close_()}}),b.BoardMemberSelector=l.extend({onLoad:function(a){this.focusOnload&&a&&this.focus()},focus:function(){this.lookup("selector").focus(!0)},clear:function(){this.lookup("selector").reset()},setTo:function(a){a&&a!=""&&this.serverCall("add").kwargs({bid:this.bid,target_uid:a}).success(this.fnbind(function(){this.focus()})).liveMutate().send()}}),b.AddItemCc=l.extend({onLoad:function(a){this.$("#@add_cc").click(this.fnbind(function(){this.$("#@add_cc").hide(),this.$("#@cc_row").show(),this.getSelector().focus(!0);return!1}))},getSelector:function(){return this.cQuery(":selector.selector")}}),b.ItemCcPreviewRemove=l.extend({onLoad:function(a){this.$("#@remove").click(this.fnbind(function(){this.parent().parent().parent().removePerson(this.uid);return!1}))}}),b.HomepageBoardsList=l.extend({onLoad:function(a){this.$("#@view").click(this.fnbind(function(){this.toggleAll();return!1})),this.$("#@more_link").click(this.fnbind(function(){this.serverCall("view_more").contentFor(this.$("#@full_list_container"),{parentCID:this.cid}).success(this.fnbind(function(a){this.$("#@list").hide(),this.$("#@full_list").show()})).liveMutate().send();return!1}))}}),b.AddContentButtons=l.extend({onLoad:function(a){this.board_post_editor_loaded=!1,this.$("#@create_board_link").click(this.fnbind(function(){var a=this.selectButton(this.$("#@create_board_link"));a&&(this.showEditor("create_board"),this.cQuery(":input.input").$("#@name").focus());return!1}));var b=this;$.each($(".action_button_set .post_to_board"),function(a,c){$(c).click(function(){var a=parseInt($(c).attr("bid")),d=b.selectButton($(c));d&&(b.showEditor("add_post"),b.cQuery(":post_editor.selector.selector").setInput(a));return!1})}),this.$("#@add_post_link").click(this.fnbind(function(){var a=this.selectButton(this.$("#@add_post_link"));a&&(this.showEditor("add_post"),this.board_post_editor_loaded?this.cQuery(":post_editor.selector.selector").clearInput():this.serverCall("load_board_post_editor").contentFor(this.$("#@add_post"),{parentCID:this.cid}).success(this.fnbind(function(a){this.board_post_editor_loaded=!0,this.cQuery(":post_editor.selector.selector").clearInput()})).send());return!1})),this.$("#@ask_link").click(this.fnbind(function(){var a=this.selectButton(this.$("#@ask_link"));a&&(this.showEditor("add_question"),this.lookup("navigator").focus(!0));return!1}))},hideEditors:function(){$(".add_content_section .add_content_editors .add_content_editor").hide()},unselectButtons:function(){$(".add_content_section .add_content_buttons .add_content_link").removeClass("selected")},reset:function(){this.hideEditors(),this.unselectButtons()},showEditor:function(a){this.hideEditors(),this.$("#@"+a).show()},selectButton:function(a){if(a.hasClass("selected")){this.reset();return!1}this.unselectButtons(),a.addClass("selected");return!0}}),b.AddItemCcSelector=l.extend({onLoad:function(a){this.people=[]},focus:function(){this.lookup("selector").focus(!0)},clear:function(){this.lookup("selector").reset()},setTo:function(a){a&&a!=""&&(this.addPerson(a),this.clear(),this.updatePreview())},addPerson:function(a){this.people.push(a)},removePerson:function(a){this.removeUid(a),this.updatePreview()},removeUid:function(a){var b=[];$.each(this.getUids(),function(c,d){d!=a&&b.push(d)}),this.people=b},getUids:function(){return this.people},updatePreview:function(){var a=this.getUids();a.length>0?(this.$("#@cc_list").show(),this.serverCall("update_preview").kwargs({uids:a}).contentFor(this.$("#@cc_preview"),{parentCID:this.cid}).send()):(this.$("#@cc_list").hide(),this.focus())}}),b.WelcomeContinueButton=l.extend({onLoad:function(a){this.$("#@next").click(this.fnbind(function(){this.parent().$("#@step1").hide(),this.parent().$("#@step2").show();return!1}))}}),b.RelatedLinks=l.extend({onLoad:function(){this.$("#@show_more").click(this.fnbind(function(){this.$("#@show_more, #@more_related_links, #@related_links_preview").toggleClass("hidden");return!1}))}}),b.BookmarkletLinkAddButton=l.extend({onLoad:function(){this.installMouseHandlers()},clickHandlers:{show_popup:function(){this.$("#@modal").show().css({opacity:.8}),$("html").animate({scrollTop:0},200),$("body").animate({scrollTop:0},200,this.fnbind(function(){this.dialog({verticalOffset:-10,dialogClass:"bookmarklet_instruction_dialog"}).cancel(null,"Close",!0).close(this.fnbind(function(){this.$("#@modal").hide()})).load("instructions")}))}}}),b.BookmarkletLink=l.extend({onLoad:function(){this.installMouseHandlers()},clickHandlers:{button:function(){this.$("#@button").hasClass("bookmarklet_ie8")&&alert('Please right click on this link, then click "Add to Favorites."')}}}),b.QuestionTopicsEditorCallToAction=l.extend({onLoad:function(a){a&&this.should_open_edit_state&&(this.lookup("topics_editor").toggleClasses(),this.lookup("topics_editor").focusSelector())}}),b.DistroToFollowersFormOption=l.extend({onLoad:function(a){this.$("#@text").click(this.fnbind(function(){this.$("#@checkbox").is(":checked")?this.uncheck():this.check();return!1}))},hideWrapper:function(){this.$("#@wrapper").hide()},showWrapper:function(){this.$("#@wrapper").show()},uncheck:function(){this.$("#@checkbox").attr("checked",!1)},check:function(){this.$("#@checkbox").attr("checked",!0)}}),b.BoardItemLabel=l.extend({onLoad:function(a){var b=this.parent().parent().parent().cQuery(":editor"),c=b.lookup("item_distro_setting");this.is_submission?(b.setIsSubmission(!0),b.$("#@post_text").hide(),b.$("#@submit_text").show()):(b.setIsSubmission(!1),b.$("#@post_text").show(),b.$("#@submit_text").hide()),this.is_private||this.is_submission?(this.is_default_board_enabled&&b.parent().hideDistroOptions(),c.uncheck(),c.hideWrapper()):(this.is_default_board_enabled&&(b.parent().showDistroOptions(),this.is_default_board&&c.check()),c.showWrapper())}}),b.BoardListItem=l.extend({onLoad:function(){B&&B.addBoardItem(this.cid,this.board_item_id)},onUnload:function(){B&&B.removeBoardItem(this.cid,this.board_item_id)}});var B;b.BoardItemViewTracker=l.extend({init:function(){B=this,this.all_board_item_ids={},this.reported_board_item_ids={},this.last_report_time=+(new Date),this.rate_limit_ms=3e3},onLoad:function(){var a=this.fnbind(this.report);d(document,"mousemove",a),d(document,"keypress",a),d(document,"scroll",a)},addBoardItem:function(a,b){this.all_board_item_ids[a]=b},removeBoardItem:function(a,b){delete this.all_board_item_ids[a]},isBoardItemVisible:function(a){var b=f._domids[a];if(!b)return!1;var c=document.getElementById(b);if(!c)return!1;var d=$(c);if(!d.children("div:first").is(":in-viewport"))return!1;if(!d.is(":visible"))return!1;return!0},report:function(){var a=+(new Date);if(a>=this.last_report_time+this.rate_limit_ms){this.last_report_time=a;var b=[];for(var c in this.all_board_item_ids){var d=this.all_board_item_ids[c];this.reported_board_item_ids[d]==undefined&&this.isBoardItemVisible(c)&&(b.push(d),this.reported_board_item_ids[d]=!0)}b.length>0&&this.serverCall("report").kwargs({board_item_ids:b}).send()}}}),b.QuestionPageSignupCallToAction=l.extend({onLoad:function(){var a=!1,b=this;$(window).scroll(function(){a=!0}),this.intervalId=setInterval(function(){a&&(a=!1,b.toggleFixed())},200),this.reportEmptyFacepile(),this.showingFixed=!1,require("facebook").getLoginStatus(this.fnbind(function(a){a.status==="unknown"&&this.$("#@facepile_container").hide()}))},reportEmptyFacepile:function(){var a=!1,b=this,c=this.$("#@facepile_container"),d=this.$("#@facepile_container").height(),e=this.facepileIntervalId=setInterval(function(){var a=c.find("iframe");a.size()>0&&a.height()===0&&(b.serverCall("no_facepile").send(),clearInterval(e))},300);setTimeout(function(){clearInterval(e)},1e4)},toggleFixed:function(){var a=$(window).scrollTop(),b=this.$("#@signup_bubble_container").offset().top,c=this.$("#@signup_bubble_container").height(),d=30;this.showingFixed?b+c+d>=a&&(this.lookup("fixed").hide(),this.showingFixed=!1):b+c+d<a&&(this.lookup("fixed").show(),this.showingFixed=!0)},disableFixed:function(){this.lookup("fixed").hide(),this.showingFixed=!1,this.intervalId&&clearInterval(this.intervalId)},onUnload:function(){this.disableFixed(),clearInterval(this.facepileIntervalId)}}),b.QuestionPageSignupConnectCallToAction=QuestionPageSignupCallToAction.extend({onLoad:function(){this._super.apply(this,arguments),this.installMouseHandlers()},reportEmptyFacepile:function(){},connectButtonClicked:function(){this.$("#@initial_call_to_action").hide(),this.$("#@form_wrapper").show(),this.disableFixed()},clickHandlers:{facebook_connect_button:function(){this.connectButtonClicked(),this.lookup("form").lookup("facebook_connect_button").$("#@facebook_connect_button").click()},twitter_signup_link:function(){this.connectButtonClicked(),this.lookup("form").$("#@twitter_signup_link").click()},signup_email_button:function(){this.connectButtonClicked();var a=this.lookup("form");a.$("#@connected_photo_wrapper").hide(),a.bypassConnectLink()}}}),b.QuestionPageSignupCallToActionFixed=l.extend({show:function(){this.$("#@bar").slideDown()},hide:function(){this.$("#@bar").slideUp()}}),b.QuestionPageSignupConnectCallToActionFixed=QuestionPageSignupCallToActionFixed.extend({onLoad:function(){this._super.apply(this,arguments),this.installMouseHandlers()},connectButtonClicked:function(){$("body,html").scrollTop(0),this.$("#@bar").hide(),this.parent().disableFixed()},clickHandlers:{facebook_connect_button:function(){this.connectButtonClicked(),this.parent().$("#@facebook_connect_button").click()},twitter_signup_link:function(){this.connectButtonClicked(),this.parent().$("#@twitter_signup_link").click()},signup_email_button:function(){this.connectButtonClicked(),this.parent().$("#@signup_email_button").click()}}}),b.SubmissionView=l.extend({onLoad:function(a){var b=this;this.$("#@item").hover(function(a){b.$("#@delete").show(),b.$("#@item").addClass("hover")},function(a){b.$("#@delete").hide(),b.$("#@item").removeClass("hover")}),this.$("#@update_accept").click(this.fnbind(function(){this.request("update_accept");return!1})),this.$("#@update").click(this.fnbind(function(){this.request("update");return!1})),this.$("#@edit").click(this.fnbind(function(){this.toggle();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.toggle();return!1}))},getNewPreview:function(){return null},request:function(a){var b=this.lookup("description").serialize(),c=this.getNewPreview();this.serverCall(a).kwargs({new_description:b,new_preview:c}).liveMutate().send()},toggle:function(){this.$("#@editor").toggle(),this.$("#@content").toggle()}}),b.LinkSubmissionView=SubmissionView.extend({getNewPreview:function(){return this.cQuery(":link_editor.preview").getLinkInfo()}}),b.RejectSubmissionDialogContents=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this.$("#@comment").toggle(),this.lookup("comment").focus();return!1}))}}),b.PromoteContent=l.extend({onLoad:function(){this.$("#@promote").click(this.fnbind(function(){var a=parseInt(this.$("#@price").text());a&&this.serverCall("promote").liveMutate().kwargs({budget:a}).send();return!1})),require("jquery.ui-1.8.17"),this.exponent=3.5;var a=Math.pow(this.initial,1/this.exponent),b=Math.pow(this.min,1/this.exponent),c=Math.pow(this.max,1/this.exponent),d=c<2e3?.1:.5;this.$("#@reach_slider").slider({range:"min",value:a,min:b,max:c,step:d,slide:this.fnbind(function(a,b){var c=Math.pow(b.value,this.exponent),d=Math.round(c/10)*10;this.updateReach(d)})}),this.$("%@slider_hash").click(this.fnbind(function(a){var b=parseInt($(a.target).attr("reach"));this.$("#@reach_slider").slider("value",b),this.updateReach(b)}))},updateReach:function(a){var b=a/this.multiplier;this.$("#@reach, #@remaining_reach").text(a),this.$("#@price").text(b)},toggleSection:function(){this.$("#@promote_section").toggleClass("hidden")}}),b.CurrentPromotionStatus=l.extend({onLoad:function(){this.$("#@end").tooltip({contents:this.tooltip}),this.$("#@end").click(this.fnbind(function(){this.serverCall("end_promote").liveMutate().send();return!1})),this.$("#@promote_more").click(this.fnbind(function(){this.lookup("promote_content").$("#@add_promotion_section").show(),this.$("#@promote_more_section").hide();return!1}))}}),b.PromotedIcon=l.extend({onLoad:function(){this.$("#@icon").tooltip({contents:this.promoted_sentence})}}),b.PromoteContentLink=l.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this.lookup("promote").toggleSection(),this.$("#@link").hide()}));return!1}}),b.CreditPageLink=l.extend({onLoad:function(){this.$("#@link").tooltip({contents:"You have "+this.balance+" credits."})}}),b.IframeBuster=l.extend({onLoad:function(){top.location=this.to_url}}),b.FilterableList=l.extend({onLoad:function(){this.lastQuery=null,this.$("#@search").keyup(this.fnbind(function(){var a=this.$("#@search").val();a&&a!=""&&a!=this.lastQuery?(this.serverCall("search_results").kwargs({query:a}).contentFor(this.$("#@search_results"),{parentCID:this.cid,useLoadingSpinner:!1}).success(this.fnbind(function(){this.$("#@search_results").show(),this.$("#@default").hide()})).send(),this.lastQuery=a):a==""&&(this.$("#@search_results").hide(),this.$("#@default").show())})),this.$("#@search_link").click(this.fnbind(function(){this.$("#@search_link, #@bullet").hide(),this.$("#@search").show().focus();return!1}))}}),b.PublishCheckboxes=l.extend({onLoad:function(){this.$("#@twitter_label").tooltip({contents:"Share With Your Twitter Followers"}),this.$("#@facebook_label").tooltip({contents:"Share With Your Facebook Friends"}),this.$("#@twitter_label").click(this.fnbind(function(a){var b=this.$("#@twitter").is(":checked");a.target!==this.$("#@twitter")[0]&&(this.check("twitter",!b),b=!b),this.saveCheckedState("twitter",b)})),this.$("#@facebook_label").click(this.fnbind(function(a){var b=this.$("#@facebook").is(":checked");a.target!==this.$("#@facebook")[0]&&(this.check("facebook",!b),b=!b),this.saveCheckedState("facebook",b)})),require("facebook").asyncUpdatePermissions();var a=this.child("facebook_connect");$(a).bind("fb_login",this.fnbind(function(){this.updateSetting("facebook",!0)})),$(a).bind("fb_login_failed",this.fnbind(function(){this.check("facebook",!1)}))},check:function(a,b){this.$("#@"+a).attr("checked",b)},updateSetting:function(a,b){this.serverCall("set_share_setting").kwargs({value:b,service:a}).send()},saveCheckedState:function(a,b){b&&a==="twitter"&&!this.tw_uid?($(s).trigger("connect"),this.updateSetting(a,b)):b&&a==="facebook"&&!this.fb_uid?this.child("facebook_connect").connect():this.updateSetting(a,b)},shouldPublishToFacebook:function(){return this.$("#@facebook").is(":checked")},shouldPublishToTwitter:function(){return this.$("#@twitter").is(":checked")},hide:function(){this.$("#@publish_checkboxes").hide()},show:function(){this.$("#@publish_checkboxes").show()}}),b.QueryNavigator=l.extend({onLoad:function(){this.last_query="",this.initial_value&&(this.$("#@input").focus(),this.$("#@input").val(this.initial_value)),this.$("#@input").keydown(this.fnbind(function(a){var b=this.$("#@input").val();a.keyCode==13&&b!=""&&this.showResultsOfQuery(b);return!0})),this.$("#@search").click(this.fnbind(function(){var a=this.$("#@input").val();a!=""&&this.showResultsOfQuery(a);return!1}))},showResultsOfQuery:function(a){if($.trim(a)!=$.trim(this.last_query)){this.query=a;if(this.use_instant_search){var b=this.cQuery(":layout.content").$("#@content");this.serverCall("query_results").kwargs({query:a}).contentFor(b,{parentCID:this.cid}).success(this.fnbind(function(){var a="/search?q="+this.query;this.last_query=this.query;var b={url:a};history.pushState(b,"",a)})).send()}else document.location="/search?q="+this.query}}}),b.QueryResults=l.extend({onLoad:function(){this.fade_ms=50,this.load_preview_functions=[],this.list_items=[],this.currently_previewing_index=null,this.$("#@close").click(this.fnbind(function(){this.closePreview(),this.$("#@results_list .item").removeClass("previewing_item"),this.$("#@results_list").removeClass("preview_active"),this.$("#@side_col_default").fadeIn(this.fade_ms)})),this.$("#@next").click(this.fnbind(function(){this.loadPreviewAtIndex(this.currently_previewing_index+1)})),this.$("#@prev").click(this.fnbind(function(){this.loadPreviewAtIndex(this.currently_previewing_index-1)}))},closePreview:function(){this.currently_previewing_index=null,this.$("#@side_col_preview").fadeOut(this.fade_ms),this.stopWatchingKeystrokes()},loadPreviewAtIndex:function(a){this.currently_previewing_index==null&&this.startWatchingKeystrokes();if(a>=0){if(a!=this.currently_previewing_index){var b=this.load_preview_functions[a];b(),this.currently_previewing_index=a}this.$("#@results_list .item").removeClass("previewing_item");var c=this.list_items[a];c.addClass("previewing_item")}},sidebarComponentLoading:function(a){this.$("#@results_list").addClass("preview_active"),this.$("#@side_col_default").hide(),this.$("#@side_col_preview_contents").fadeOut(this.fade_ms)},sidebarComponentLoaded:function(){var a=$(window).scrollTop(),b=this.$("#@results_list").offset().top;a>b?this.$("#@side_col_preview").css("margin-top",a-b):this.$("#@side_col_preview").css("margin-top","0"),this.$("#@side_col_preview_contents").fadeIn(this.fade_ms),this.$("#@side_col_preview").is(":visible")||this.$("#@side_col_preview").fadeIn(this.fade_ms)},startWatchingKeystrokes:function(){$("body").bind("keydown",{queryResults:this},this.keystrokeHandler)},stopWatchingKeystrokes:function(){$("body").unbind("keydown",this.keystrokeHandler)},keystrokeHandler:function(a){var b=a.data.queryResults;a.keyCode==39?b.loadPreviewAtIndex(b.currently_previewing_index+1):a.keyCode==37&&b.loadPreviewAtIndex(b.currently_previewing_index-1);return!0}}),b.QueryResult=l.extend({onLoad:function(){this.lookup("query_results").load_preview_functions[this.index]=this.fnbind(function(){this.lookup("query_results").sidebarComponentLoading(this.$("#@item")),this.serverCall("load_detail_view").contentFor(this.lookup("query_results").$("#@side_col_preview_contents"),{parentCID:this.lookup("query_results").cid}).success(this.fnbind(function(){this.lookup("query_results").sidebarComponentLoaded()})).send();return!1}),this.lookup("query_results").list_items[this.index]=this.$("#@item"),this.$("#@item").click(this.fnbind(function(){this.lookup("query_results").loadPreviewAtIndex(this.index)})),this.$("#@item a:not('.more')").click(this.fnbind(function(a){if(a.target){var b=$(a.target).attr("href");document.location=b;return!1}}))}}),b.QueryResultRankingMetadata=l.extend({onLoad:function(){this.$("#@metadata").click(this.fnbind(function(){var a=this.$("#@metadata").parent().hasClass("expanded");this.$(".metadata").parent().removeClass("expanded"),a||this.$("#@metadata").parent().addClass("expanded")}))}})}(window.Quora,window),require.install("Quora",function(){}),require.install("twitter",function(require,a,b){function g(a){e?a():$(f).bind("initialized",a)}var c=require("webnode2"),d=require("w2.quora").Component,e=!1,f={};a.asyncInit=function(){if(!window.twttr){var a;window.twttr=a={_e:[],ready:function(b){a._e.push(b)}};var b=document.createElement("script");b.async=!0,b.src="//platform.twitter.com/widgets.js",document.getElementById("tw-root").appendChild(b),twttr.ready(function(a){e=!0,$(f).trigger("initialized")})}},a.ShareSectionTweetButton=d.extend({onLoad:function(){var a=this;g(function(){twttr.events.bind("tweet",function(b){a.serverCall("record_tweet").send()})})}})});var Component=require("w2.quora").Component,windowManager=require("prefetch");Dialog=Component.extend({onLoad:function(){this.successCallback=null,this.ok2Submit=!0,this.submitted=!1,this.$("#@submit").click(this.fnbind(function(){this.request();return!1})),this.$("#@cancel").click(this.fnbind(function(){this.close();return!1}))},request:function(){var a=this.getPars();if(this.submitted||!a||!this.ok2Submit)return!1;this.submitted=!0,this.serverCall("dialog_submit_controller").liveMutate().kwargs(a).success(this.fnbind(function(a){this.successCallback&&this.successCallback(a),this.close()})).send()},ok2Submit:function(){return!0},getPars:function(){return{}},setSetup:function(a){a.each(this.fnbdin(function(a,b){this.options[a]=b}))},setSuccessCallback:function(a){this.successCallback=a},setFocusCallback:function(a){this.lookup("editor").setFocusCallback(a)},setBlurCallback:function(a){this.lookup("editor").setBlurCallback(a)},close:function(){$("#generic_dialog").length?$("#generic_dialog").remove():require("webnode2").Dialog.dialogFor(this).close_()}}),AddCommentDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.lookup("editor").focus()},getPars:function(){if(this.comment_required&&this.lookup("editor").isEmpty())return!1;return{comment:this.lookup("editor").serialize()}}}),BanUserDialog=AddCommentDialog.extend({getPars:function(){var a=this._super.apply(this,arguments);a.removeMessages=this.$("#@checkbox").attr("checked")=="checked";return a}}),QuestionDeleteDialog=AddCommentDialog.extend({getPars:function(){if(this.comment_required&&this.lookup("editor").isEmpty())return!1;return{comment:this.lookup("editor").serialize(),review:this.review}}}),DialogLink=Component.extend({onLoad:function(){this.tooltip&&this.$("#@link").tooltip({contents:this.tooltip}),this.$("#@link").click(this.fnbind(function(){this.click();return!1}))},addOption:function(a,b){b&&containsNonLatinCodepoints(JSON.stringify(b))&&(b=unescape(encodeURIComponent(b))),this.options[a]=b},click:function(){var a=escape(JSON.stringify(this.options));$(".content").dialog({title:null,url:"/dialog/ajax_get_dialog_GET?type="+this.type+"&object_id="+this.object_id+"&options="+a,buttons_hide_on_close:this.buttons_hide_on_close,buttons:null})},triggerClick:function(a){$.each(a,this.fnbind(function(a,b){this.addOption(a,b)})),this.click()}}),NotHelpfulDialogLink=DialogLink.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@link").unbind("click"),this.$("#@link").click(this.fnbind(function(){this.display_dialog&&this.click(),this.serverCall("mark_not_helpful").kwargs({object_id:this.object_id}).liveMutate().send();return!1}))}}),AdultTopicFollowButton=DialogLink.extend({onLoad:function(a){this._super.apply(this,arguments),this.$("#@link").click(this.fnbind(function(){this.serverCall("follow").liveMutate().send();return!1}))}}),NotHelpfulDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.lookup("editor").focus();var b=this.lookup("editor").$("#@editor").html();this.lookup("editor").setHtml(""),this.$("#@reasons").change(this.fnbind(function(){var a=this.$("#@NH_"+this.$("#@reasons").val()).html();this.lookup("editor").setHtml(a+" "+b);return!1}))},getPars:function(){if(this.lookup("editor").isEmpty())return!1;var a=this.lookup("editor").serialize();return{comment:a}}}),AdminMessageDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.lookup("editor").focus()},getPars:function(){if(this.lookup("editor").isEmpty())return!1;var a=this.lookup("editor").serialize();return{msg:a}}}),TopicTaggerDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.ok2Submit=!1},getPars:function(){var a=[];this.$("#@topic_tagger_component .temp_topics_list input").each(function(){a.push($(this).val())});if(!a)return!1;this.ok2Submit=!0;return{topics:a}}}),ComposeMessageDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.$("#@change_person").click(this.fnbind(function(){this.change();return!1})),this.lookup("people_selector").inputFocus(),this.load()},load:function(){this.object_id&&this.setTo(this.object_id)},getPars:function(){this.$("#@compose_message_to_uid").val()&&(this.object_id=this.$("#@compose_message_to_uid").val());if(!this.object_id||this.lookup("editor").isEmpty())return!1;return{to_uid:this.object_id,msg:this.lookup("editor").serialize()}},change:function(){this.lookup("people_selector").reset(),this.$("#@pick_people").removeClass("hidden"),this.$("#@picked_person").addClass("hidden"),this.$("#@to_name").html(""),this.lookup("people_selector").focus()},setTo:function(a){isNaN(parseInt(a))||(this.lookup("people_selector").reset(),this.$("#@pick_people").addClass("hidden"),this.$("#@picked_person").removeClass("hidden"),this.$("#@compose_message_to_uid").val(a),this.getName(a))},getName:function(a){this.$("#@to_name").setContentFromAJAXComponent("/inbox/ajax_get_name_POST",{uid:a},this.fnbind(function(){this.lookup("editor").focus()}))}}),GiveCreditsDialog=ComposeMessageDialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.$("#@send").click(this.fnbind(function(){this.giveCredits();return!1})),this.$("#@close").click(this.fnbind(function(){require("webnode2").Dialog.dialogFor(this).close_();return!1}))},giveCredits:function(){var a=null;this.$("#@compose_message_to_uid").length>0&&(a=this.$("#@compose_message_to_uid").val());var b=null;this.cQuery(":credit_amount").$("#@credit_amount").length>0&&(b=this.cQuery(":credit_amount").$("#@credit_amount").val());var c="";this.lookup("editor").isEmpty()||(c=this.lookup("editor").serialize()),a&&b>0&&c&&this.serverCall("send_credits").kwargs({to_uid:a,amount_credits:b,message:c}).liveMutate().success(this.fnbind(function(){require("webnode2").Dialog.dialogFor(this).close_()})).send()},overMax:function(){this.$("#@gift_max_warning").show()},underMax:function(){this.$("#@gift_max_warning").hide()}}),ComposeShareWithUserDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments);var b=this;this.child("selector").setCallback(function(){b.questionSelected()})},load:function(){this.object_id&&this.setTo(this.object_id)},getPars:function(){var a={},b="",c=[];this.child("editor").isEmpty()||(b=this.child("editor").serialize()),this.$("#@picked_questions .preview_item").each(function(){c.push($(this).attr("qid"))}),a.qid=c;return{share_info:a,msg:b}},questionSelected:function(){var a=this.lookup("selector").qValue,b=this.$("#@picked_questions").html();this.serverCall("shared_question_item").kwargs({qid:a}).contentFor(this.$("#@picked_questions"),{parentCID:this.cid}).success(this.fnbind(function(){this.$("#@picked_questions").show(),this.$("#@picked_questions").append(b)})).send(),this.lookup("selector").reset()}}),AddUserToTopicDialog=ComposeMessageDialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.ok2Submit=!1,this.lookup("people_selector").inputFocus()},load:function(){return!1},getPars:function(){var a=null;this.$("#@compose_message_to_uid").length>0&&(a=this.$("#@compose_message_to_uid").val());if(!a)return!1;var b="";this.lookup("editor").isEmpty()||(b=this.lookup("editor").serialize()),this.ok2Submit=!0;return{uid:a,msg:b}},getName:function(a){this.$("#@to_name").setContentFromAJAXComponent("/topic/ajax_add_user_to_topic_name_POST",{uid:a})}}),WantedAnswerDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.child("question_selector").focus(),this.setSuccessCallback(this.fnbind(function(a){a&&windowManager.navigateTo(a,!1)}))},getPars:function(){var a=this.child("question_selector").getQid(),b=this.child("question_selector").qValue;return{qid:a,text:b}}}),require.install("dialog",function(){}),require.install("qed/rules",function(require,a,b){var c={div:"div",p:"div",br:"br",img:"img",ol:"ol",ul:"ul",li:"li",blockquote:"blockquote",address:"blockquote",b:"b",strong:"b",i:"i",em:"i",u:"u",span:"span",a:"a"},d=require("./npd"),e=require("./util");a.apply=function(a){var b=a.nodeName.toLowerCase(),d=c[b];if(d){if(d!==b)return e.replaceNode(e.getDocument(a).createElement(d),a)}else e.replaceWithChildren(a)}}),require.install("qed/sanitize",function(require,a,b){function k(a,b){for(var c=a.firstChild,d,f;c;c=f){f=c.nextSibling;if(c.nodeType===3){var g=c.nodeValue;d?(g.length>0&&(d.nodeValue+=g),a.removeChild(c)):g.length>0?d=c:a.removeChild(c)}else d&&(j(d),d=null),b&&k(c,b)}d&&j(d),e.apply(a)}function j(a,b){assert(a.nodeType===3);var c=a.nodeValue,d;if(c!=="ï»¿"||!!b){d=c.replace("ï»¿","");if(d!==c){d===""?a.parentNode.removeChild(a):a.nodeValue=d;return!0}}}function i(a){function g(a){var b=a[f];if(typeof b!=="number"||e[b]!==a)try{a[f]=e.push(a)-1}catch(c){}}var b={},e=[],f="qedSanitizerPos"+h++;this.add=function(a){a&&a.nodeType===3&&(a=a.parentNode),a&&(c.ok(a)?b[c.key(a)]=a:g(a))},this.flush=function(){var c,f=b;b={};for(c in f){a.normalize(!0);break}d.remove.apply(d,e),e.length=0;for(c in f)try{k(f[c])}catch(g){assert(!1)}}}function g(a){while(!c.ok(a))a=a.parentNode;for(var b=d.getDocument(a).documentElement,e;a&&a!==b&&!e;a=a.parentNode)e=c.get(a,f),!e&&c.get(a,"isEditorRoot")&&(e=c.fix(a,f,new i(a)));return e}var c=require("./npd"),d=require("./util"),e=require("./rules"),f="sanitizer";a.add=function(a){var b=g(a);b&&b.add(a)},a.flush=function(a){var b=g(a);b?b.flush():assert(!1)};var h=0;a.cleanTextNode=j,a.normalize=k}),require.install("qed/npd",function(require,a,b){function o(a){if(a.nodeType!=3){if(a.removeAttribute){a.removeAttribute(h);for(var b=a.firstChild;b;b=b.nextSibling)o(b)}return a}}function n(a){d(i(a));if(a.getAttribute){var b=a.getAttribute(h),c=b&&g[b];if(c&&c.node===a)return c;a.setAttribute(h,b=e()),c=g[b]={node:a,key:b,fixed:{},data:{}}}f.add(a);return c}function m(a){if(a.getAttribute){var b=a.getAttribute(h);if(b in g)return g[b].node===a}return!1}function l(a,b,c){var d=n(a),e=d.data;d.fixed[b]||(e[b]=c);return e[b]}function k(a,b,c){if(j(a,b))return n(a).data[b];return c}function j(a,b){return m(a)&&b in n(a).data}function i(a){return!!a&&a.nodeType!==3&&!!a.getAttribute}var c=require("./util"),d=c.assert,e=c.guid,f=require("./sanitize"),g={},h="npdkey";a.ok=i,a.has=j,a.get=k,a.set=l,a.fix=function(a,b,c){var d=n(a),e=d.fixed,f=d.data;arguments.length>2&&!e[b]&&(f[b]=c),e[b]=!0;return f[b]},a.setdefault=function(a,b,c){if(j(a,b))return k(a,b);return l(a,b,c)},a.del=function(a,b,c){if(j(a,b)){var d=n(a),e=d.data;c=e[b],d.fixed||delete e[b]}return c},a.key=function(a){return n(a).key},a.cleanInnerHTML=function(a){return o(a.cloneNode(!0)).innerHTML.replace(/\uFEFF/gm,"")}}),require.install("qed/util",function(require,a,b){function M(a,b){c(F(a));var d=h(a),e=f(a),i=[];B(e,g(a));while(e){c(n(a,e));var k=I(e),l=H(e);c(n(a,k)),c(n(a,l)),r(k,l),i.push(J(d.createElement(b),k.nextSibling,l)),e=j(l,a);while(e&&F(e))e=j(e,a);K(k,l)}return v(L(a),i)}function L(a){a.innerHTML="";while(a.firstChild)a.removeChild(a.firstChild);return a}function K(a){for(var b,c=0,d=arguments.length;c<d;c+=1)(a=arguments[c])&&(b=a.parentNode)&&b.removeChild(a)}function J(a,b,c){while(b&&b!==c){var d=b.nextSibling;a.appendChild(b),b=d}return a}function I(a,b){return G(a,b,"previousSibling","lastChild",z,function(a,b){return d(a,b,a.firstChild)})}function H(a,b){return G(a,b,"nextSibling","firstChild",A,function(a,b){return a.appendChild(b)})}function G(a,b,c,d,e,f){var g=h(a),i,j;b=b||g.documentElement;while(a&&a!==b){i=a[c];if(i){a=i;if(F(a))return e(a,g.createElement("span"));while(j=a[d]){a=j;if(F(a))return e(a,g.createElement("span"))}}else{a=a.parentNode;if(a&&F(a))return f(a,g.createElement("span"))}}}function F(a){if(a.nodeType===3)return!1;switch(a.nodeName.toLowerCase()){case"div":case"p":case"br":case"ol":case"ul":case"li":case"blockquote":case"address":return!0;default:return!1}}function D(a,b){var c=a.previousSibling,e;if(!c||c.nodeType!==3){e=d(a.parentNode,h(a).createTextNode("ï»¿"),a);return function(){K(e)}}return C}function C(){}function B(a,b){for(var c=a,d=[];c&&c!==b;c=j(c))d.push(c);b&&d.push(b);var e=h(a).documentElement,f=0;while(c=d[f++])for(var g=c.parentNode;g&&g!==e;g=g.parentNode){g=x(g);if(p.get(g,"isStyleSpan")){y(g);break}}return d}function A(a,b){return d(a.parentNode,b,a)}function z(a,b){return d(a.parentNode,b,a.nextSibling)}function y(a){function o(b){var c=b[0].parentNode;n?v(w(a),b):(n=!0,v(a,b))}function i(c){c.parentNode!==a&&(b=!0),h.push(c)}c(p.get(a,"isStyleSpan"));if(!a.firstChild)a.parentNode.removeChild(a);else{var b,d=f(a),e=g(a),h=[];while(d&&d!==e)i(d),d=j(d);i(e);if(!b)return;s(a);var k=0,l,m=t(h),n;while(l=m[k++])o(l)}}function x(a){var b={},c=a.nodeName.toLowerCase();c==="b"||c==="strong"?b.fontWeight="bold":c==="i"||c==="em"?b.fontStyle="italic":c==="u"?b.textDecoration="underline":b=null;if(b){var d=h(a).createElement("span");p.set(d,"isStyleSpan",!0);for(var e in b)d.style[e]=b[e];return u(d,a)}return a}function w(a){var b=a.cloneNode(!1);p.set(b,"isStyleSpan",!0);return b}function v(a,b){var e=0,f=b[0],g=f&&f.parentNode;g&&g.nodeType===1?d(g,a,f):g=null;while(f=b[e++])g&&c(f.parentNode===g),a.appendChild(f);return a}function u(a,b){var c=b.parentNode;c&&c.replaceChild(a,b);while(b.firstChild)a.appendChild(b.firstChild);return a}function t(a){var b=0,c,d,e=[],f;while(d=a[b++])d.parentNode===c?f.push(d):(c=d.parentNode,e.push(f=[d]));return e}function s(a){var b=a.parentNode;if(b){while(a.firstChild)b.insertBefore(a.firstChild,a);b.removeChild(a)}return a}function r(a,b){var d=q(a,b);c(d),c(a!==d),c(b!==d),c(i(d));while(a.parentNode!==d)o(a);while(b.parentNode!==d)o(b);return d}function q(a,b){var c={},d;if(a===b)return a;a.nodeType===3&&(a=a.parentNode),b.nodeType===3&&(b=b.parentNode);while(a||b){if(a){d=p.key(a);if(d in c)return a;c[d]=a,a=a.parentNode}if(b){d=p.key(b);if(d in c)return b;c[d]=b,b=b.parentNode}}}function o(a){var b=a.parentNode,e=b&&b.parentNode;c(!p.get(b,"isEditorRoot")),c(e);if(!a.nextSibling)d(e,a,b.nextSibling);else if(!a.previousSibling)d(e,a,b);else{var f=J(b.cloneNode(!1),a.nextSibling);d(e,f,b.nextSibling),d(e,a,f),c(b.nextSibling===a)}c(a.previousSibling===b||a.nextSibling===b);return!0}function n(a,b){for(var c=h(b).documentElement;b&&b!==c;b=b.parentNode)if(b===a)return!0;return!1}function l(a,b){a.nodeType==3&&(a=a.parentNode);var c=h(a),d=c.defaultView,e=a.style[b],f;if(!e||e==="auto")d&&d.getComputedStyle?f=d.getComputedStyle(a,null):f=a.currentStyle,e=f&&f[b];return e==="auto"?null:e}function k(a,b){b=b||i(a);return a&&a!==b&&g(a.previousSibling||k(a.parentNode,b))}function j(a,b){b=b||i(a);return a&&a!==b&&f(a.nextSibling||j(a.parentNode,b))}function i(a){a.nodeType===3&&(a=a.parentNode);for(var b=h(a).documentElement;a&&a!==b;a=a.parentNode)if(p.get(a,"isEditorRoot"))return a}function h(a){return a.ownerDocument||a}function g(a){while(a&&a.lastChild)a=a.lastChild;return a}function f(a){while(a&&a.firstChild)a=a.firstChild;return a}function e(a,b){var d=a.parentNode,e=a,f=0;c(d);if(typeof b==="number"&&d.childNodes[b]===a)return b;while(e=e.previousSibling)++f;c(d.childNodes[f]===a);return f}function d(a,b,d){c(a),b.parentNode===a&&a.removeChild(b);return d?a.insertBefore(b,d):a.appendChild(b)}var c=a.assert=require("assert").ok;a.guid=function(){return((+(new Date)).toString(36)+Math.random().toString(36)).toLowerCase()},a.insertBefore=d,a.indexOfChild=e,a.firstLeaf=f,a.lastLeaf=g,a.getDocument=h,a.getEditorRoot=i,a.nextLeaf=j,a.prevLeaf=k,a.cloneObject=function(a,b){var c=function(){for(var a in b)this[a]=b[a]};c.prototype=a;return new c},a.getStyle=l,a.isVisible=function(a){require("jquery");return $(a).is(":visible")};var m=navigator.platform.match("Mac");a.hasCtrlOrCmd=function(a){return m?!!a.metaKey:!!a.ctrlKey},a.addClass=function(a,b){for(var c=0,d=(a.getAttribute("class")||"").split(" ");c<d.length;++c)if(d[c]===b)break;c==d.length&&(d.push(b),a.setAttribute("class",d.join(" ")))},a.arraysEqual=function(a,b,c){if(a&&b){var d,e=a.length;if(e!=b.length)return!1;for(d=0;d<e;++d)if(c?!c(a[d],b[d]):a[d]!==b[d])return!1;return!0}if(a||b)return!1;return!0},a.contains=n,a.splitParent=o;var p=require("./npd");a.nearestCommonAncestor=q,a.makeSiblings=r,a.deleteContents=function(a,b){r(a,b);while(a.nextSibling!==b)a.parentNode.removeChild(a.nextSibling)},a.replaceWithChildren=s,a.replaceNode=u,a.convertToStyleSpan=x,a.applyStyle=function(a,b,d){var e=h(a),f,g=t(B(a,b)),i=0;while(f=g[i++])p.get(f[0].parentNode,"isStyleSpan")||p.set(v(e.createElement("span"),f),"isStyleSpan",!0);var j=a.parentNode,k=b.parentNode;c(p.get(j,"isStyleSpan")),c(p.get(k,"isStyleSpan")),a.previousSibling&&A(j,J(w(j),j.firstChild,a)),b.nextSibling&&z(k,J(w(k),b.nextSibling)),D(a,b),i=0;while(f=g[i++]){var l=f[0].parentNode;c(p.get(l,"isStyleSpan"));for(var m in d)l.style[m]=d[m]}},a.addExtraSupport=D;var E=require("./sanitize");a.cleanFEFFs=function(a,b){for(var c=b?k:j,d=i(a),e=c(a,d);e;e=c(e,d))if(e.nodeType===3&&E.cleanTextNode(e,!0))break},a.getText=function(a){var b=a.innerText||a.textContent;return b&&b.replace(/^\s+|\uFEFF|\s+$/g,"")},a.findNextLine=H,a.findPrevLine=I,a.remove=K,a.formatBlock=function(a,b,c){B(a,b);var e=h(a),f=e.createElement(c),g=I(a),i=H(b);r(g,i),d(g.parentNode,f,g),J(f,g,i),K(g,i);return f},a.removeAllChildren=L,a.wrapLines=M}),require.install("qed/unload",function(require,a,b){function g(){var a=f.onbeforeunload;a!==e&&(e=f.onbeforeunload=function(){var b,e=0,f;if(!d)while(b=c[e++])if(f=b())return f;if(a)try{++d;return a.apply(this,arguments)}finally{--d}})}var c=[],d=0,e,f=window;a.checkBeforeUnload=function(a){g(),a&&c.push(a)}}),require.install("qed/modifiers",function(require,a,b){function k(a,b){var d=f(a,h);if(d){var e=b?c.findNextLine(a):c.findPrevLine(a);function g(a){c.remove(e);return a}if(!c.contains(d,e))return g(!1);for(var i=b?c.prevLeaf:c.nextLeaf,k=e;k;k=i(k,d))if(j(k))return g(!1);while(e.parentNode!==d)c.splitParent(e);c.splitParent(e);var l=c.replaceWithChildren(b?e.previousSibling:e.nextSibling);assert(l.nodeName===d.nodeName);return g(!0)}}function j(a){if(a.nodeType===3)return/\S/.test(a.nodeValue);if(i.test(a.nodeName))return!1;return!0}function h(a){return g.test(a.nodeName)}function f(a,b){for(var d=c.getDocument(a).documentElement;a&&a!==d;a=a.parentNode)if(b(a))return a}function e(a,b,d){var e=d?"ol":"ul",f=c.wrapLines(c.formatBlock(a,b,e),"li");assert(c.contains(f,a)),assert(c.contains(f,b))}function d(a,b,d){b=b.toLowerCase();return function(e,f){var g={},h=c.getDocument(e).documentElement,i=e;g[a]=b;while(i&&i!==h){i=c.convertToStyleSpan(i);var j=i.style[a].toLowerCase();if(j===b){g[a]=d;break}if(j===d){g[a]=b;break}i=i.parentNode}c.applyStyle(e,f,g)}}var c=require("./util");a.bold=d("fontWeight","bold","normal"),a.italic=d("fontStyle","italic","normal"),a.underline=d("textDecoration","underline","none"),a.blockquote=function(a,b){c.formatBlock(a,b,"blockquote")},a.orderedList=function(a,b){return e(a,b,!0)},a.unorderedList=function(a,b){return e(a,b,!1)};var g=/^blockquote|address$/i,i=/^br|span|b|i|u|em|strong$/i;a.maybeEscape=function(a,b){return a.nextSibling===b&&(k(a,!1)||k(b,!0))}}),require.install("qed/trie",function(require,a,b){function e(a,b){var c=d(a,b);if(c){if("val"in c)return!0;for(var e in c.c)return!0}}function d(a,b,c){if(a){if(!b)return a;var e=a.c,f=b.charAt(0);if(f in e||c&&(e[f]={c:{}}))return d(e[f],b.slice(1),c)}}function c(){function g(a,c){if(!a)return!1;var d=a.c,e=c.charAt(0);if(e){g(d[e],c.slice(1))||delete d[e];if("val"in a)return!0}else"val"in a&&(b-=1,delete a.val);for(e in d)return!0}function f(a,b){var e=d(c,a);e&&"val"in e&&(b=e.val);return b}var a=this,b=0,c={c:{}};a.size=function(){return b},a.get=f,a.has=function(a){return f(a,c)!==c},a.prefix=function(a){return!!e(c,a)},a.put=function(a,e){var f=d(c,a,!0);b+="val"in f?0:1;return f.val=e},a.clear=function(){b=0,c={c:{}}},a.del=function(a){g(c,a)}}a.makeTrieMap=function(){return new c}}),require.install("qed/snippets",function(require,a,b){function r(a,b){for(var c,d=n(a),e=0;d&&e<d.length;++e){c=d[e],delete d[e];if(c){c.innerHTML==="ï»¿"?(c.appendChild(a),c.appendChild(b)):(h.insertBefore(c,a,c.firstChild),c.appendChild(b)),h.replaceWithChildren(c);break}}}function q(a,b,c){if(b.nodeType===3)p(b.nodeValue,function(c,d){d?c?b.nodeValue=c:h.remove(b):h.insertBefore(b.parentNode,a.createTextNode(c),b)},function(d,e){assert(typeof d==="number"),assert(!isNaN(d));var f=a.createElement("span");f.appendChild(a.createTextNode(e)),h.insertBefore(b.parentNode,c[d]=f,b)});else for(var d=b.firstChild,e;d;d=e)e=d.nextSibling,q(a,d,c)}function p(a,b,c){var f=a.split(d);if(f.length>1)for(var g=1,h,i;g<f.length;g+=2){h=f[g-1],i=f[g];if(e.test(h))b(h+"$"+i);else{h&&b(h);if(i.charAt(0)==="{"){var j=i.length,k=i.slice(1,j-1).split(":");assert(i.charAt(j-1)==="}"),c(+k[0],k[1]||"ï»¿")}else c(+i,"ï»¿")}}b(f.pop(),!0)}function o(a,b){var c=0,d=[],e,f=h.getDocument(a);q(f,a,d),b.length=0;while(c<d.length)(e=d[c++])&&b.push(e);e=b[b.length-1];if(!e||h.nextLeaf(e,a))e=f.createElement("span"),e.appendChild(f.createTextNode("ï»¿")),a.appendChild(e),b.push(e)}function n(a){var b=h.getEditorRoot(a),c=f.get(b,g);c||(c=f.fix(b,g,{}));return c.stops||(c.stops=[])}function m(a){for(var b,d="",e=h.prevLeaf(a);e&&e.nodeType===3;e=h.prevLeaf(e))for(var f=e.nodeValue,g=f.length;g>=0;g-=1){d+=f.charAt(g);if(!c.prefix(d))return b;c.has(d)&&(b={leaf:e,pos:g,tmpl:c.get(d)})}return b}function l(a){var b=h.findPrevLine(a);try{return m(a)}finally{h.remove(b)}}function k(a,b,c){assert(a.nodeType===3);var d=h.insertBefore(a.parentNode,h.getDocument(a).createElement("span"),a.nextSibling),e=a.nodeValue.slice(0,b);e?a.nodeValue=e:h.remove(a);var f=h.makeSiblings(d,c);while(d.nextSibling!==c)f.removeChild(d.nextSibling);f.removeChild(d)}function j(a,b){var c=l(a);if(c){k(c.leaf,c.pos,a);var d=h.getDocument(a).createElement("div"),e=h.getEditorRoot(a),f,g=n(a);while(g.length>0)(f=g.pop())&&h.replaceWithChildren(f);d.innerHTML=c.tmpl,o(d,g);while(d.firstChild)h.insertBefore(a.parentNode,d.firstChild,a);return!0}}var c,d=/\$(\d+|\{\d+:[^}]+\})/gm,e=/\\$/gm,f=require("./npd"),g="tabStopInfo",h=require("./util");a.enabled=function(){return!!c&&c.size()>0},"".reverse||(String.prototype.reverse=function(){for(var a=this.length,b=new Array(a),c=a-1;c>=0;--c)b[b.length]=this.charAt(c);return b.join("")});var i=document.createElement("div");a.addTabTrigger=function(a,b){i.innerHTML=b,b=i.innerHTML,c||(c=require("./trie").makeTrieMap()),c.put(a.reverse(),b)},a.removeTabTrigger=function(a){c&&c.del(a.reverse())},a.clear=function(){c&&c.clear()},a.check=function(a,b){if(c){var d=j(a,b);r(a,b);return d}}}),require.install("qed/handlers",function(require,a,b){function n(a){return function(b,c,e){if(d(e)){a(b,c);return!1}}}function m(a,b){if(g.enabled()){g.check(a,b);return!1}}function l(a,b){a.nextSibling===b&&e(b,!1)}function k(a,b){a.nextSibling===b&&e(a,!0)}function j(a,b){a.nextSibling===b&&e(a,!0)}function i(a,b,c){if(!c.shiftKey&&f.maybeEscape(a,b))return!1}var c=require("./util"),d=c.hasCtrlOrCmd,e=c.cleanFEFFs,f=require("./modifiers"),g=require("./snippets"),h={};h[8]=j,h[9]=m,h[13]=i,h[37]=k,h[39]=l,h[66]=n(f.bold),h[73]=n(f.italic),h[85]=n(f.underline),a.getKeydownHandler=function(a){return h[a.keyCode||a.charCode]}}),require.install("qed/nodestate",function(require,a,b){function t(a,b){a.normalize();for(var e=0,f=b.length,g=a.firstChild;g&&e<f;g=g.nextSibling,++e)if(b[e]!==(g.nodeType===3?g.nodeValue:g))break;if(g){while(a.lastChild!==g)a.removeChild(a.lastChild);a.removeChild(g)}for(var h,i=c.getDocument(a);e<f;++e)h=b[e],a.appendChild(typeof h==="string"?i.createTextNode(h):h);d(a.childNodes.length===b.length)}function s(a,b){var c=q(a,b),f;c?b?f=!e(r(c),r(b)):f=!0:(d(b),f=!1);return{meaningful:f,identical:!c,children:c||b}}function r(a){for(var b,c=[],d,e=0;e<a.length;++e)k(d=a[e])&&(b=typeof d==="string"&&typeof b==="string"?c.pop()+d:d,typeof b==="string"&&(b=b.replace("ï»¿","")),c.push(b));return c}function q(a,b){for(var c,d=[],f=a.firstChild;f;f=f.nextSibling)d.push(c=f.nodeType==3?typeof c==="string"?d.pop()+f.nodeValue:f.nodeValue:f);if(!e(d,b))return d}function p(a,b){if(a.setAttribute){for(var c in g)a.removeAttribute(c);for(var e=0,f;e<b.length;++e)f=b[e],a.setAttribute(f.name,f.value)}else d(b.length<1)}function o(a,b){var c=n(a,b);return{meaningful:!!c,identical:!c,attrs:c||b}}function n(a,b){var c=0,d={},f=[],h;if(a.getAttribute){for(var i in g)(h=a.getAttribute(i))!==null&&(d[f[f.length]=i]=h);f.sort();for(var c=0,i;c<f.length;++c)i=f[c],f[c]={name:i,value:d[i]}}if(!e(f,b,m))return f}function m(a,b){return a.name===b.name&&a.value===b.value}function l(a,b){var c=b?b.diffAttrs(a):o(a),e=b?b.diffChildren(a):s(a),f={meaningful:c.meaningful||e.meaningful,identical:c.identical&&e.identical};d(!f.meaningful||!f.identical),b?c.identical&&e.identical?(d(!c.meaningful&&!e.meaningful),f.state=b):(d(c.attrs||e.children),f.state=new i(a,c.attrs,e.children)):(d(c.meaningful&&!c.identical),d(e.meaningful&&!e.identical),f.state=new i(a,c.attrs,e.children)),k(a)||(f.meaningful=!1);return f}function k(a){if(!a)return!1;if(typeof a==="string")return/[^\uFEFF]/.test(a);if(!f.ok(a))return!1;return!h[f.key(a)]}function j(a,b){d(typeof b==="string");var c=a.createElement(b||"span"),e=f.key(c);h[e]=!0;return c}function i(a,b,c){d(a&&b&&c),this.restore=function(){p(a,b),t(a,c)},this.diffAttrs=function(c){d(c===a);return o(a,b)},this.diffChildren=function(b){d(b===a);return s(a,c)}}var c=require("./util"),d=c.assert,e=c.arraysEqual,f=require("./npd"),g={"class":!0,style:!0},h={};a.createMeaninglessElement=j,a.isMeaningful=k,a.diff=l}),require.install("qed/selection",function(require,a,b){function j(a,b){var c=this,e=c.doc=f(b),g=c.isW3C=!!a.getSelection&&!!a.getSelection().extend;d(a.document===e),c.scope=b,c.start=h(e,"span"),c.end=h(e,"span"),c.getNativeSelection=g?function(){return a.getSelection()}:function(){return e.selection}}var c=require("./util"),d=c.assert,e=c.insertBefore,f=c.getDocument,g=require("./sanitize"),h=require("./nodestate").createMeaninglessElement,i=require("./npd");j.prototype={createRange:function(){var a=this.doc;return this.isW3C?a.createRange():a.body.createTextRange()},getSelection:function(){var a=this,b=a.getNativeSelection(),c;if(a.isW3C){if(b&&b.rangeCount>0&&(c=b.getRangeAt(0))&&a.isRangeInScope(c))return{rng:c,rev:this.isSelectionReversed(b,c)}}else if(b&&(c=b.createRange())&&a.isRangeInScope(c))return{rng:c,rev:!1}},isRangeInScope:function(a){var b=this,c=b.scope,d=b.createRange();if(b.isW3C){d.selectNode(c);return d.compareBoundaryPoints(a.START_TO_START,a)<1&&a.compareBoundaryPoints(a.END_TO_END,d)<1}d.moveToElementText(c);return d.compareEndPoints("StartToStart",a)<1&&a.compareEndPoints("EndToEnd",d)<1},getDefaultSelection:function(){var a=this,b=a.createRange();a.isW3C?b.selectNodeContents(a.scope):b.moveToElementText(a.scope),b.collapse(!0),a.isW3C||(b.move("Character",1),b.move("Character",-1));return{rng:b,rev:!1}},isSelectionReversed:function(a,b){if(this.isW3C&&(b=b||a.rangeCount>0&&a.getRangeAt(0))){var c=b.startContainer,d=b.startOffset;return(a.anchorNode!==c||a.anchorOffset!==d)&&a.focusNode===c&&a.focusOffset===d}return!1},copyAndCollapse:function(a,b){var c;this.isW3C?(c=this.createRange(),c.setStart(a.startContainer,a.startOffset),c.setEnd(a.endContainer,a.endOffset)):c=a.duplicate(),c.collapse(!!b);return c},replaceWith:function(a,b){if(this.isW3C)a.collapsed||a.deleteContents(),a.insertNode(b);else{var c="rangespan"+Math.random().toString(36);a.pasteHTML("<span id='"+c+"'></span>");var d=this.doc.getElementById(c);d.parentNode.replaceChild(b,d)}return b},insertDelimiters:function(a){var b=this;b.isRangeInScope(a)||(a=b.getDefaultSelection()),(a.compareEndPoints?a.compareEndPoints("StartToEnd",a)==0:a.collapsed)?(b.replaceWith(a,b.end),e(b.end.parentNode,b.start,b.end)):(b.replaceWith(b.copyAndCollapse(a,!1),b.end),b.replaceWith(b.copyAndCollapse(a,!0),b.start))},removeDelimiters:function(){var a=this,b=a.createRange(),d,e=a.start,f,h=a.end,i;e.nextSibling===h&&g.flush(e),g.add(f=e.parentNode),g.add(i=h.parentNode);var j=c.addExtraSupport(e,h);a.isW3C?(b.setStart(e,0),b.setEnd(h,0)):(b.moveToElementText(e),d=a.createRange(),d.moveToElementText(h),b.setEndPoint("EndToStart",d)),f.removeChild(e),i.removeChild(h),j();return b},_MaxSelectRangeTime:20,selectRange:function(a,b){var c=this,d=c.getNativeSelection(),e=window.console&&+(new Date),f;c.isRangeInScope(a)||(a=c.getDefaultSelection());if(c.isW3C)if(a.collapsed){var g=a.endContainer,h=a.endOffset;d.collapse(g,h)}else b?(d.collapse(a.endContainer,a.endOffset),d.extend(a.startContainer,a.startOffset)):(d.collapse(a.startContainer,a.startOffset),d.extend(a.endContainer,a.endOffset));else(!(f=d&&d.createRange())||f.compareEndPoints("StartToStart",a)!=0||f.compareEndPoints("EndToEnd",a)!=0)&&a.select();if(e){var i=new Date-e;i>c._MaxSelectRangeTime&&console.log("SelImpl.selectRange took too long: "+i+"ms")}}},a.Selection=function(a,b){function n(){if(i()){var a=c.getNativeSelection();a.removeAllRanges?a.removeAllRanges():a.empty()}}function m(){d(!h),f&&l(),c.selectRange(g.rng,g.rev)}function l(){d(!h),f&&(f=!1,g.rng=c.removeDelimiters())}function k(a){f||(f=!0,c.insertDelimiters(g.rng));try{var b=++h;return a(c.start,c.end)}finally{d(f),d(b===h),--h||l()}}function i(){d(!h);if(!f){var a=c.getSelection();g=a||g;return!!a}}var c=new j(a,b),e=this,f,g=c.getDefaultSelection(),h=0;e.record=i,e.modify=k,e.modifying=function(){return h>0},e.select=m,e.remove=n}}),require.install("qed/snapshot",function(require,a,b){function h(a,b){var c=a?[a]:[];while(c.length){b(a=c.pop());for(var d=a.firstChild;d;d=d.nextSibling)e.ok(d)&&c.push(d)}}function g(a,b){c(a),this.lookup=function(c){if(e.ok(c)){var d=e.key(c);return d in a?a[d]:a[d]=b&&b.lookup(c)}}}var c=require("./util").assert,d=require("./sanitize"),e=require("./npd"),f=require("./nodestate");g.prototype.restore=function(a){var b=this;h(a,function(a){var c=b.lookup(a);c&&c.restore(),d.add(a)}),d.flush(a)},a.diff=function(a,b){var c={},d=!1,i=!0;h(a,function(a){var g=b&&b.lookup(a),h=f.diff(a,g);d=d||h.meaningful,i=i&&h.identical,c[e.key(a)]=h.state});return{meaningful:d,identical:i,snapshot:i?b:new g(c,b)}},a.test=function(){}}),require.install("qed/history",function(require,a,b){function g(a){for(var b;a&&a.type!="end";a=a.prev){if(a.type=="redo")return a.prev;b=b||a.changed}if(b)return a;for(var c={count:0};a;a=a.prev){if(a.type=="redo")return a.prev;if(a.type=="end")c[a.key]=!0,++c.count;else if(c[a.key]){e(a.type=="begin"),delete c[a.key];if(--c.count==0)return b?a:g(a)}b=b||a.changed}}var c=require("./snapshot"),d=require("./util"),e=d.assert,f=d.contains;a.observe=function(a){function h(d,g,h){e(d==="begin"||d==="end"||d==="redo");var i=(h||0).scope||a,j=c.diff(i,f&&f.snapshot),k={type:d,key:g,data:h,snapshot:j.snapshot,prev:f};if(k.changed=j.meaningful)b.length=0;return k}var b=[],d={},f;return{beginOperation:function(a,b){d[a]=!0,f=h("begin",a,b)},endOperation:function(a,b){a in d&&(delete d[a],f=h("end",a,b))},undo:function(){var c=h("redo","redo",f&&f.data),e=g(f);if(e){b.push(c),d={},f=c.prev=e,f.snapshot.restore(a);return f.data}},redo:function(){if(b.length>0){f=b.pop(),f.snapshot.restore(a);return f.data}}}}}),require.install("qed/edit",function(require,a,b){var c=require("./util"),d=c.assert,e=c.addClass,f=c.getDocument,g=c.hasCtrlOrCmd,h=c.getText,i=c.isVisible,j=require("event").add,k=require("./unload"),l=require("./handlers").getKeydownHandler,m=require("./selection").Selection,n=require("./history").observe,o=require("./npd");a.edit=function(a){function F(b){if(r.activeElement!==a)return!1}function E(){r.activeElement===a&&b.record()}function D(){if(!C){C=!0;try{b.select(),r.activeElement!==a&&a.focus()}finally{d(C),C=!1}d(r.activeElement===a)}}function B(a){v||(v=!0,r.body.setAttribute("spellcheck","false")),clearTimeout(w),w=setTimeout(A,a||1e3)}function A(){v=!1,r.body.removeAttribute("spellcheck")}if(!(!a||/^textarea|input$/i.test(a.nodeName)||a.isContentEditable)){e(a,"qed_content"),a.setAttribute("contentEditable","true"),o.fix(a,"isEditorRoot",!0);var b=new m(window,a),p=!1,q=n(a),r=f(a),s=h(a),t=0,u=c,v,w,x=navigator.userAgent||"",y=x.indexOf("Gecko/")>-1&&x.indexOf("Chrome")<0,z={"38":"up arrow","40":"down arrow"};j(a,"keydown",function(a){y&&B(1e3);try{b.record();var c=a.keyCode||a.charCode;if(!(c in z))return b.modify(function(b,d){if(c==90&&g(a)){a.shiftKey?q.redo():q.undo();return!1}q.beginOperation("key"+c);var e=l(a);if(e)return e.call(u,b,d,a)})}finally{D()}});var C;j(a,"keyup",function(a){try{b.record();var c=a.keyCode||a.charCode;c in z||b.modify(function(a,b){q.endOperation("key"+c)})}finally{D()}}),j(a,"keypress",E),j(a,"mouseup",E),j(a,"mouseout",E),j(a,"focus",D),j(a,"blur",b.remove),j(a,"keydown",F),j(a,"keypress",F),j(a,"keyup",F),k.checkBeforeUnload(function(){if(i(a)&&h(a)!==s)return"You appear to be editing text on this page."});return{modify:function(a,c){var d="modify"+t++;try{return b.modify(function(b,c){q.beginOperation(d);try{return a.call(u,b,c)}finally{q.endOperation(d)}})}finally{(c||p)&&!(p=b.modifying())&&D()}},clear:function(a){this.modify(function(a,b){var d=c.getEditorRoot(a),e=f(d).createElement("br");c.removeAllChildren(d),d.appendChild(e),c.insertBefore(d,a,e),c.insertBefore(d,b,e)},a),this.html(!0)},focus:D,select:D,html:function(b){b&&(s=h(a));return o.cleanInnerHTML(a)},text:function(){return h(a)}}}}}),require.install("linkify",function(require,a,b){a.iterLinks=function(a,b){c(a,{callback:function(a,c){c&&b(c,a);return""}})};var c=a.linkify=function(){var a="[a-z\\d.-]+://",b="(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])",c="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",d="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",e="(?:"+c+d+"|"+b+")",f="(?:[;/][^#?<>\\s]*)?",g="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",h="\\b"+a+"[^<>\\s]+",i="\\b"+e+f+g+"(?!\\w)",j="mailto:",k="(?:"+j+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+e+g+"(?!\\w)",l=new RegExp("(?:"+h+"|"+i+"|"+k+")","ig"),m=new RegExp("^"+a,"i"),n={"'":"`",">":"<",")":"(","]":"[","}":"{","Â»":"Â«","âº":"â¹"},o={callback:function(a,b){return b?'<a href="'+b+'" title="'+b+'">'+a+"</a>":a},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(a,b){b=b||{};var c,d,e,f,g="",h=[],i,k,p,q,r,s,t,u;for(d in o)b[d]===undefined&&(b[d]=o[d]);while(c=l.exec(a)){e=c[0],k=l.lastIndex,p=k-e.length;if(/[\/:]/.test(a.charAt(p-1)))continue;do q=e,u=e.substr(-1),t=n[u],t&&(r=e.match(new RegExp("\\"+t+"(?!$)","g")),s=e.match(new RegExp("\\"+u,"g")),(r?r.length:0)<(s?s.length:0)&&(e=e.substr(0,e.length-1),k--)),b.punct_regexp&&(e=e.replace(b.punct_regexp,function(a){k-=a.length;return""}));while(e.length&&e!==q);f=e,m.test(f)||(f=(f.indexOf("@")!==-1?f.indexOf(j)?j:"":f.indexOf("irc.")?f.indexOf("ftp.")?"http://":"ftp://":"irc://")+f),i!=p&&(h.push([a.slice(i,p)]),i=k),h.push([e,f])}h.push([a.substr(i)]);for(d=0;d<h.length;d++)g+=b.callback.apply(window,h[d]);return g||a}}()}),require.install("find",function(require,a,b){function i(a,b,c){return text&&f(a,function(a){var d=b.exec(a.nodeValue);if(d!=null)return g(a,d.index,d.index+d[0].length,c)})}function h(a,b,c){return b&&f(a,function(a){var d=a.nodeValue.indexOf(b);if(d>=0)return g(a,d,d+b.length,c)})}function g(a,b,f,g){assert(a.nodeType===3);var h=a.nodeValue,i=a.parentNode,j=e(a),k=h.slice(0,b),l=h.slice(b,f),m=a.nodeValue=h.slice(f),n=j.createElement("span"),o=n.cloneNode(!1);k&&d(i,j.createTextNode(k),a),d(i,n,a),l&&d(i,j.createTextNode(l),a),d(i,o,a);try{return g(n,o)}finally{c.remove(n,o,!m&&a)}}function f(a,b){if(a.nodeType===3)b(a);else for(var c=a.firstChild,d;c;c=d)d=c.nextSibling,f(c,b)}var c=require("qed/util"),d=c.insertBefore,e=c.getDocument;a.findText=h,a.findExp=i,a.find=function(a,b,c){if(typeof b==="string")return h(a,b,c);if(b instanceof RegExp)return i(a,b,c)}}),require.install("qtexteditor",function(require,a,b){function i(a){var b=parseInt(a);return isNaN(b)?a!="normal"&&a!="lighter":b>400}function h(){return(new Date).getTime()*1e3}var c=require("w2.quora").Component,d=require("qed/edit").edit,e=require("qed/util"),f=e.hasCtrlOrCmd,g=e.deleteContents,j=a.QTextEditor=c.extend({onUnload:function(){this.typingTimeout&&(clearTimeout(this.typingTimeout),this.typingTimeout=null),this.meaningfulChangeTimeout&&(clearTimeout(this.meaningfulChangeTimeout),this.meaningfulChangeTimeout=null),this.uninstallScrollHandlers()},onLoad:function(a){function h(a,b){f.$("#@cmd_"+a).click(function(){c.modify(b,!0);return!1})}function e(a){return function(){c.modify(function(b,c){$(b).before("["+a+"]"),$(c).after("[/"+a+"]")},!0);return!1}}this.linkSelectorLoaded=!1;var b=this.$("#@editor").get(0),c=this._qed=d(b);if(!!c){this.enterCallback||(this.enterCallback=null),this.focusCallback||(this.focusCallback=null),this.blurCallback||(this.blurCallback=null),this.typingStateCallback||(this.typingStateCallback=function(a){}),this.typingTimeout=null,this.lastInputTime=0,this.lastTypingReportTime=0,this.lastReportedTypingState="empty",this.typingStopped=!1,this.meaningfulChangeCallback||(this.meaningfulChangeCallback=function(){}),this.meaningfulChangeTimeout=null,this.resetMeaningfulChange(),this.$("#@add_qlink").tooltip({contents:"Link to questions, topics and people."}),this.$("#@cmd_blockquote").tooltip({contents:"Blockquote a section of text."}),this.$("#@cmd_code").tooltip({contents:"Code Block [code][/code]"}),this.$("#@cmd_latex").tooltip({contents:"LaTeX [math][/math]"}),this.$("#@cmd_qimg").tooltip({contents:"Insert an image."}),this.$("#@add_qlink").click(this.fnbind(function(){this.addLink();return!1})),this.$("#@cmd_code").click(e("code")),this.$("#@cmd_latex").click(e("math")),this.$("#@cmd_qimg").click(this.fnbind(function(){this.openImageDialog();return!1}));var f=this,g=require("qed/modifiers");h("bold",g.bold),h("italic",g.italic),h("underline",g.underline),h("blockquote",g.blockquote),h("insertorderedlist",g.orderedList),h("insertunorderedlist",g.unorderedList),this.$("#@save").click(this.fnbind(function(){this.save()})),this.$("#@editor").keydown(this.fnbind(function(a){return this.editorKeyDown(a)})),this.$("#@editor").keyup(this.fnbind(function(a){return this.editorKeyUp(a)})),this.$("#@editor").focus(this.fnbind(function(a){this.$("#@editor").attr("focused",!0),this.loadLinkSelector(),this.focusCallback&&this.focusCallback()})),this.$("#@editor").blur(this.fnbind(function(a){this.$("#@editor").removeAttr("focused"),this.blurCallback&&this.blurCallback(),this.detectLinks()})),this.$("#@editor").click(this.fnbind(function(a){this.setFormattingButtons(a.target)}));var i=this.fnbind(function(){this.qlinkSync()});this.$("#@qlink_text").keydown(i),this.$("#@qlink_text").keyup(i),this.$("#@qlink_text").keypress(i),this.$("#@qlink_text").change(i),this.$(".@qlink_close").click(this.fnbind(function(){this.replaceLinkWithText(this.$("#@qlink_key").val(),"@");return!1})),this.$("#@show_preview").change(this.fnbind(function(){var a=this.$("#@qlink_key").val(),b=this.qlink_data[a].target;b.type=="question"&&(this.qlink_data[a].options||(this.qlink_data[a].options={}),this.$("#@show_preview").attr("checked")?(this.qlink_data[a].options.preview=!0,this.$("#qlink_preview_"+a).show(),this.$("#qlink_container_"+a).addClass("qlink_container_preview")):(this.qlink_data[a].options.preview=!1,this.$("#qlink_preview_"+a).hide(),this.$("#qlink_container_"+a).removeClass("qlink_container_preview")))})),this.$("#@qlink_update").click(this.fnbind(function(){this.qlinkUpdate();return!1})),this.$("#@editor img").each(function(a,b){f.markImageAsDetected(b)}),this._enableImageDetection=!0,this.registerScrollHandlers()}},registerScrollHandlers:function(){this.buttonsVisible&&this.installScrollHandlers(this.fixButtons)},fixButtons:function(){if(!!this.buttonsVisible){var a=this.$("#@qtext_editor_buttons").height();a&&this.$("#@qtext_editor_buttons_wrapper").css("height",a+"px");var b=this.$("#@editor_outer").offset();if(b){var c=this.$("#@editor_outer").height(),d=b.top+c-150,e=$(window).scrollTop();e>b.top&&e<d&&c>300?this.$("#@qtext_editor_buttons").addClass("qtext_editor_buttons_fixed"):this.$("#@qtext_editor_buttons").removeClass("qtext_editor_buttons_fixed")}}},loadLinkSelector:function(){this.linkSelectorLoaded||this.serverCall("get_link_selector").contentFor(this.$("#@link_selector"),{parentCID:this.cid}).success(this.fnbind(function(a){if(!this.plaintext){var b=this.child("link_selector");b&&b.setCallback(this.fnbind(function(){this.onLinkSelection()}))}this.linkSelectorLoaded=!0})).send()},makeKey:function(){var a="",b="abcdefghijklmnopqrstuvwxyz0123456789";for(var c=0;c<10;c++)a+=b[Math.floor(Math.random()*b.length)];return a},syncTypingState:function(){var a=1e7,b;this.isEmpty()||this.typingStopped?b="empty":this.lastInputTime<h()-a?b="paused":b="typing";var c=!1;b!=this.lastReportedTypingState&&(c=!0),b!="empty"&&this.lastTypingReportTime<h()-55e6&&(c=!0),c&&(this.typingStateCallback(b),this.lastReportedTypingState=b,this.lastTypingReportTime=h()),this.typingTimeout&&(clearTimeout(this.typingTimeout),this.typingTimeout=null);if(b=="typing"||b=="paused")this.typingTimeout=setTimeout(this.fnbind(function(){this.syncTypingState()}),a/1e3)},checkMeaningfulChange:function(a){var b=3e4;this.meaningfulChangeTimeout||(this.meaningfulChangeTimeout=setTimeout(this.fnbind(function(){var a=this.serialize(!0);a!=this.meaningfulChangeBase&&this.meaningfulChangeCallback(),this.meaningfulChangeBase=a,this.meaningfulChangeTimeout=null}),b))},resetMeaningfulChange:function(){this.meaningfulChangeBase=this.serialize(!0),this.meaningfulChangeTimeout&&(clearTimeout(this.meaningfulChangeTimeout),this.meaningfulChangeTimeout=null)},editorKeyUp:function(a){this.detectNewImages(),this.typingStopped=!1,this.lastInputTime=h(),this.syncTypingState(),this.checkMeaningfulChange(),this.dirtyText(),this._detectLinksOnNextKeyUp&&(this._detectLinksOnNextKeyUp=!1,this.detectLinks())},text:function(a){var b=this._cachedText;if(a||!b)b=this._qed.text();return(this._cachedText=b)||""},dirtyText:function(){this._cachedText=null},_cachedUrlInfo:{},getUrlInfo:function(a,b){var c=this,d=c._cachedUrlInfo[a];d!==!1&&(d?b(d):($(c).trigger("link-fetch-start"),c.serverCall("get_url_info").kwargs({url:a}).success(function(d){b(c._cachedUrlInfo[a]=d),$(c).trigger("link-fetch-end")}).error(function(){c._cachedUrlInfo[a]=!1,$(c).trigger("link-fetch-end")}).send()))},detectLinks:function(){var a=this,b=a.$("#@editor").get(0),c=require("linkify").iterLinks,d=require("find");c(a.text(),function(c,f){a.getUrlInfo(c,function(c){var g=c&&c.type;if(!!g&&g!="invalid"){if(g!="image"&&g!="youtube")return $(a).trigger("link-added-to-editor",[c]);a._qed.modify(function(h,i){d.findText(b,f,function(b,d){$(b).replaceWith(h),$(d).replaceWith(i),e.deleteContents(h,i);var f;g==="image"?f=c.url:g==="youtube"&&(f="http://img.youtube.com/vi/"+c.video_id+"/hqdefault.jpg");var j=f&&a.addImage(f,!0);if(j&&g==="youtube"){a.markImageAsDetected(j);for(var k in c)j.setAttribute(k,c[k])}})})}})})},onLinkAdded:function(a){var b=this;$(b).bind("link-added-to-editor",function(c,d){return a.call(b,d)})},onLinkFetchStart:function(a){var b=this;$(b).bind("link-fetch-start",function(c){return a.call(b)})},onLinkFetchEnd:function(a){var b=this;$(b).bind("link-fetch-end",function(c){return a.call(b)})},detectNewImages:function(){function a(a,b,c){if(!/^webkit-fake-url:/.test(a)){var d=new Image;d.onload=b,c&&(d.onerror=c),d.src=a}else c&&c()}if(!!this._enableImageDetection){var b=this;this.$("#@editor img").each(function(c,d){!b.markImageAsDetected(d)||($(d).addClass("qtext_image"),a(d.src,function(){b.serverCall("upload_image_by_url").kwargs({url:d.src}).success(function(b){b&&a(b.url,function(){d.src=b.url})}).send()},function(){$(d).remove()}))})}},markImageAsDetected:function(a){if(!a.hasAttribute("detected")){a.setAttribute("detected",a.src.slice(0,100));return!0}},editorKeyDown:function(a){if(a.shiftKey&&a.keyCode==50){this.addLink();return!1}if(this.enterCallback&&!a.shiftKey&&a.keyCode==13){this.enterCallback();return!1}switch(a.which){case 86:if(!f(a))break;case 32:case 13:this._detectLinksOnNextKeyUp=!0}return!0},addDummySpan:function(){var a;this._qed.modify(function(b,c){g(b,c),a=document.createElement("span"),c.parentNode.insertBefore(a,c)});return a},openImageDialog:function(){var a=this;a._dialog=a._dialog||a.dialog().title("Insert an Image").cancel(null,"Close").close(function(){a._dialog=null}).load("image_dialog_contents")},addImage:function(a,b){var c=this;return c._qed.modify(function(d,e){var f=d.parentNode;if(f){var g=document,h=g.createElement("div"),i=h.appendChild(g.createElement("img"));i.src=a,f.insertBefore(h,d),b||c.detectNewImages();return i}},!0)},addLink:function(){var a=this.makeKey(),b=document.createElement("a");b.id="qlink_"+a,b.innerHTML="â¦",b.className="qlink",b.href="#",this._qed.modify(function(a,c){function d(a){$(a).closest("a.qlink").map(function(){$(this).after(a)})}d(a),d(c),g(a,c),$(a).before(b)},!0),this.qlink_data[a]={target:{},text:""},this.editLink(a,"")},editLink:function(a,b){this.closeEditLink();var c=this.qlink_data[a].text?this.qlink_data[a].text:b,d=this.qlink_data[a].target,e=this.qlink_data[a].options;d.type&&(this.$("#@qlink_edit_options").show(),this.$("#@qlink_selector").hide()),d.type=="question"?(this.$("#@qlink_show_preview").show(),e&&e.preview&&this.$("#@show_preview").attr("checked",e.preview)):this.$("#@qlink_show_preview").hide(),this.$("#@qlink_key").val(a),c&&this.$("#@qlink_text").val(c);var f=this.$("#@editor_wrapper").offset(),g=this.$("#@editor #qlink_"+a).offset(),h=g.left-f.left,i=g.top-f.top;this.$("#@qlink_editor").css("left",h-10),this.$("#@qlink_editor").css("top",i+20),this.$("#@qlink_editor").removeClass("hidden"),this.child("link_selector").clear(),this.child("link_selector").setText(c),this.child("link_selector").focus(!0),this.child("link_selector").setEscKeyDown(this.fnbind(function(b){var c=this.child("link_selector").getValue(),d=b.keyCode==27,e=!c&&b.keyCode==13,f=!c&&b.keyCode==8,g="@";d&&c&&(g=c);if(e||d||f){this.replaceLinkWithText(a,g),this._qed.focus();return!1}})),d.type?this.$("#@qlink_text").focus():(this.$("#@editor").focus(this.fnbind(this.closeEditLink)),this.$("#@editor #qlink_"+a).addClass("qlink_active"))},replaceLinkWithText:function(a,b){if(!!a){this.closeEditLink();var c=this.$("#@editor #qlink_"+a);if(c.text()!="â¦")return;c.length&&this._qed.modify(function(a,d){c.after(d).after(a).replaceWith(b||"")}),delete this.qlink_data[a]}},closeEditLink:function(){var a=this.$("#@qlink_key").val();!a||(this.$("#@qlink_editor").addClass("hidden"),this.$("#@editor #qlink_"+a).removeClass("qlink_active"),this.$("#@qlink_edit_options").hide(),this.$("#@qlink_selector").show(),this.$("#@show_preview").attr("checked",!1))},qlinkSync:function(){var a=this.$("#@qlink_key").val(),b=this.$("#@qlink_text").val(),c=this.$("#@editor #qlink_"+a);c.text(b||"â¦");var d=this.child("link_selector").result;b&&c.attr("title",this.qlink_data[a].text=b),d&&(this.qlink_data[a].target=d)},qlinkUpdate:function(){this.qlinkSync(),this.closeEditLink()},onLinkSelection:function(){var a=this.child("link_selector").qValue;this.$("#@qlink_text").val(a),this.qlinkSync(),this.closeEditLink(),this._qed.focus()},setFormattingButtons:function(a){var b=$(a),c={bold:i(b.css("font-weight")),italic:b.css("font-style")=="italic",underline:b.css("text-decoration")=="underline"};for(var d in c)c[d]?this.$("#@cmd_"+d).addClass("qtext_editor_button_active"):this.$("#@cmd_"+d).removeClass("qtext_editor_button_active")},setEnterCallback:function(a){this.enterCallback=a},setTypingStateCallback:function(a){this.plaintext?this.typingStateCallback=null:this.typingStateCallback=a},setMeaningfulChangeCallback:function(a){this.plaintext?this.meaningfulChangeCallback=null:this.meaningfulChangeCallback=a},setFocusCallback:function(a){this.focusCallback=a},setBlurCallback:function(a){this.blurCallback=a},serialize:function(a){var b={html:this.html(a)};this.plaintext?b.data={}:b.data=this.qlink_data;return b},html:function(a){if(this.plaintext){var b=this.$("#@editor").val();b||(b="");return b.replace(/\n/g,"<br>")}return this._qed?this._qed.html(!a):this.$("#@editor").html()},setHtml:function(a,b){b&&(this.qlink_data=b);return this.$("#@editor").html(a)},isEmpty:function(){if(this.plaintext)return this.$("#@editor").val()=="";var a=this.$("#@editor").get(0);if(!a)return!0;if(a.childNodes.length==1)if(a.childNodes[0].tagName=="BR")return!0;var b=this.html(!0);return b==""},valLength:function(){if(this.plaintext){var a=this.$("#@editor").val();return a?a.replace(/\n/g,"<br>").length:0}return this.text().length},clear:function(a){this.plaintext?this.$("#@editor").val(""):(this._qed.clear(a),this.qlink_data={},this.lastInputTime=h(),this.syncTypingState(),this.dirtyText())},stopTyping:function(){this.plaintext||(this.typingStopped=!0,this.syncTypingState())},selectAll:function(){var a=this.$("#@editor");this._qed.modify(function(b,c){$(b).prependTo(a),$(c).appendTo(a)},!0)},focus:require("atexit").hook(function(){var a=this;a.whenOnLoaded(function(){var b=a.$("#@editor");b.anchor().focus();var c=b.get(0);a.plaintext?c.setSelectionRange?c.setSelectionRange(0,b.val().length):b.select():a._qed.modify(function(a,b){e.insertBefore(c,a,c.lastChild),e.insertBefore(c,b,c.lastChild)},!0),b.attr("focused",!0)})}),blur:function(){this.$("#@editor").blur().removeAttr("focused")}}),k=a.ThreadMessageQTextEditor=j.extend({onLoad:function(a){this.is_disabled=!1,this._super.apply(this,arguments),this.setTypingStateCallback(this.fnbind(function(a){this.serverCall("typing").kwargs({area:"thread-"+this.thread_id,state:a}).send()})),this.focusOnload&&this.focus()},request:function(){if(this.is_disabled||this.isEmpty()&&!this.plaintext)return!1;var a={};a.thread_id=this.thread_id,a.object_id=this.object_id,this.isEmpty()&&this.plaintext?a.msg={html:this.$("#@editor").val()}:a.msg=this.serialize(),require("w2.rpc"),require("webnode2").rpc("/thread/"+this.ajax_POST).kwargs(a).liveMutate().success(this.fnbind(function(){this.cleanUp()})).send(),this.disable()},disable:function(){this.is_disabled=!0,this.$("#@editor").addClass("qtext_editor_content_disabled")},cleanUp:function(){this.is_disabled=!1,this.$("#@editor").removeClass("qtext_editor_content_disabled"),this.clear(),this.blur(),this.focus()}});a.CompactThreadMessageQTextEditor=k.extend({onLoad:function(a){this._super.apply(this,arguments),this.setEnterCallback(this.fnbind(function(){this.request()}))}}),a.AnswerQTextEditorWithBoardSelector=j.extend({showBoardSelector:function(){this.$("#@add_board_label").hide(),this.$("#@board_selector").show(),this.lookup("selector").focus(!0)},onLoad:function(a){this._super.apply(this,arguments);var b=this;this.$("#@add_board").click(this.fnbind(function(){this.loaded_selector?b.showBoardSelector():this.serverCall("get_board_selector").contentFor(this.$("#@board_selector"),{parentCID:this.cid}).success(function(a){this.loaded_selector=!0,b.showBoardSelector()}).send();return!1}))}}),a.TestSaveButton=c.extend({onLoad:function(){this.$("#@save").click(this.fnbind(function(){var a=this.lookup("editor").serialize();$.securepost("/internal/qtexttest/save_POST",{content:a})}))}}),a.TCommentQTextEditor=j.extend({registerScrollHandlers:function(){},onLoad:function(a){function d(a){a||!c?b.$("#@qtext_editor_buttons_wrapper").toggle(a):c&&(c=!1,b.focus())}var b=this,c;b._super.apply(b,arguments),b.$("#@editor").focus(function(){d(!0)}).blur(function(){d(!1)}),b.$("#@qtext_editor_buttons_wrapper").mousedown(function(){c=!0}),b.setMeaningfulChangeCallback(b.fnbind(function(){b.save_draft()}))},save_draft:function(){this.serverCall("save_draft_auto").kwargs({content:this.serialize(),window_id:require("webnode2").windowId,draft_space:this.draft_space}).send()}})}),require.install("simscroll",function(require,a,b){function m(a){var b=a.keyCode||a.charCode,m=Math.round(.9*e.clientHeight);switch(f(b,a.shiftKey,a.ctrlKey,a.altKey,a.metaKey)){case g:window.scrollBy(0,-d);break;case h:window.scrollBy(0,d);break;case i:case j:window.scrollBy(0,-m);break;case k:case l:window.scrollBy(0,m);break;default:return!1}return c=!0}function f(a,b,c,d,e){return[a,!!b,!!c,!!d,!!e].join(" ")}var c,d=50,e=document.documentElement,g=f(38),h=f(40),i=f(33),j=f(32,!0),k=f(32),l=f(34);document.addEventListener&&document.addEventListener("keypress",function(a){var b=a.originalTarget;!c&&(b===e||b===document.body)&&m(a)&&(a.preventDefault(),a.stopPropagation()),c=!1},!1),a.maybeSimulateScroll=m,a.cancelSimulatedScroll=function(){c=!0}}),require.install("html",function(require,a,b){var c=document.createElement("div");a.encode=function(a){c.innerText=a;return c.innerHTML},a.decode=function(a){c.innerHTML=a;return c.innerText}});var simscroll=require("simscroll"),windowManager=require("prefetch"),cookies=require("cookies"),Component=require("w2.quora").Component,html=require("html");TypeaheadResults=Component.extend({onLoad:function(){this.hideDropdown(),this.focusedIndex=null,this.instructions=null,this.runSetup()},runSetup:function(){function b(b){var c=a.$("#@list_item_"+b);c.mouseover(a.fnbind(function(c){a.setFocusIndex(b);return!1})),c.mousedown(function(c){return a.goResult(b,c)})}var a=this;for(var c=0;c<this.results.length;c++)b(c)},hideDropdown:function(){this.$("#@results_frame").hide()},showDropdown:function(){this.results.length&&this.$("#@results_frame").show()},hide:function(){this.hideDropdown(),this.setFocusIndex(null)},getResult:function(a){return this.results[a]},goResult:function(a,b){if(this.actionType=="url")windowManager.handleClick(this.actionOfIndex[a],b);else{if(this.actionType=="value"){this.hide(),this.qValue=this.actionOfIndex[a],this.parent().setValue(this.qValue,this.results[a]);return!1}assert(0)}},down:function(){this.focusedIndex==null?this.setFocusIndex(0):this.focusedIndex<this.nResults-1?this.setFocusIndex(this.focusedIndex+1):this.focusedIndex==this.nResults-1&&this.setFocusIndex(null)},up:function(){this.focusedIndex==null?this.setFocusIndex(this.nResults-1):0==this.focusedIndex?this.setFocusIndex(null):0<this.focusedIndex&&this.setFocusIndex(this.focusedIndex-1)},go:function(a){if(this.focusedIndex!=null){this.goResult(this.focusedIndex,a);return!0}return!1},setFocusIndex:function(a,b){if(!this.empty){var c=this.$("#@list_item_"+a);this.focusedIndex!=null&&this.$("#@list_item_"+this.focusedIndex).removeClass("selected");if(c.hasClass("instruction")){b&&b.cancelIfSelectingInstruction||this.focusedIndex===a+1?this.focusedIndex=null:this.setFocusIndex(a+1);return}if(c.length==0){this.focusedIndex=null;return}if(a!=null){c.addClass("selected");var d=$(window),e=d.scrollTop(),f=c.offset().top+c.height()+20-(e+d.height());f>0&&d.scrollTop(e+f)}this.focusedIndex=a}}}),NavigatorResults=TypeaheadResults.extend({onLoad:function(){this._super.apply(this,arguments),this.cookieSet=!1},setCookieHelper:function(a,b){this.cookieSet||(this.cookieSet=!0,cookies.setMessage("qrl",[require("webnode2").windowId,this.query,this.matchTargetsJson,this.contextTid,a]),cookies.setSingleUse("q",JSON.stringify(this.query)))},goResult:function(a,b){var c=a;this.query&&this.numMatches>0&&(c>=this.numMatches&&(c=-1),this.cookieSet||(this.cookieSet=!0,cookies.setMessage("qrl",[require("webnode2").windowId,this.query,this.matchTargetsJson,this.contextTid,c]),cookies.setSingleUse("q",JSON.stringify(this.query)))),this._super.apply(this,arguments)}}),FullNavigatorResults=NavigatorResults.extend({onLoad:function(a){(a||!this.query)&&this.hideDropdown(),this.focusedIndex=null,this.instructions=null,this.runSetup()},hideDropdown:function(){this.$("#@results_frame").hide(),this.parent().parent().$("#@results_tray").hide()},showDropdown:function(){if(this.results.length){this.$("#@results_frame").show();var a=null,b=this.parent().parent().$("#@results_tray");if(this.results.length>1){var c=Math.max(375,this.results.length*35);a=c}else a=35;b.show(),parseInt(b.height())!=parseInt(a)&&b.css("height",a+"px")}},goResult:function(a,b){this.actionType=="url"?(this.setCookieHelper(a,b),this.$("#@list_item_"+a).hasClass("addquestionitem")?this.parent().addQuestionClick():windowManager.handleClick(this.actionOfIndex[a],b)):assert(0)},go:function(a){if(this.focusedIndex!=null){this.$("#@list_item_"+this.focusedIndex).hasClass("addquestionitem")?this.parent().addQuestionClick():this.goResult(this.focusedIndex,a);return!0}return!1},down:function(){this.focusedIndex==null?this.setFocusIndex(0):this.focusedIndex<this.nResults-1?this.setFocusIndex(this.focusedIndex+1):this.focusedIndex==this.nResults-1&&(this.highlightAddQuestion?this.setFocusIndex(0):this.setFocusIndex(null))}}),Typeahead=Component.extend({onLoad:function(){this.qValue=this.initialValue,this.requestOutstanding=!1,this.closed=!1,this.selectionChosen=!1,this.selectionlessCallback=null,this.placeholderActive=!1,this.extraKeydown=null,this.userClicked=!1,this.simulateScroll=!0;var a=this.$("#@input").attr("placeholder");this.$("#@input").attr("placeholder",html.decode(a)),this.$("#@view_selector").click(this.fnbind(function(){this.$("#@selector_wrapper").removeClass("hidden"),this.$("#@view_selector_wrapper").addClass("hidden"),this.focus();return!1}));var b=this;b.$("#@input").focus(function(){$(this).attr("focused","true"),b.inputFocus(),b.extraFocus&&b.extraFocus()}).blur(function(){$(this).removeAttr("focused"),b.inputBlur(),b.userClicked=!1}).keydown(function(a){return b.inputKeydown(a)}).keyup(function(a){return b.inputKeyup(a)}).click(function(){b.userClicked=!0})},getRequestUpdatePostData:function(){return{q:this.qValue,data:this.data}},requestUpdate:function(){this.requestOutstanding=!0,this.requestStartTime=now();var a=this.getRequestUpdatePostData();a.___W2_parentId=this.cid,a.___W2_windowId=require("webnode2").windowId,$.ajax({type:"GET",url:this.resultsQueryPath,dataType:"json",data:a,success:this.fnbind(function(a){this.ajaxCallback(a)}),error:this.fnbind(function(a,b,c){console.log(b,c),this.requestOutstanding=!1,this.$("#@results_shell").html("Could not retrieve results: "+b)})})},close:function(){this.closed=!0,this.child("results").hide()},clear:function(){this.clearInput(),this.close()},clearInput:function(){this.$("#@input").val(""),this.$("#@input").get(0).style.backgroundColor="#fff"},reset:function(){this.qValue=this.initialValue,this.clearInput()},resetFocus:function(){this.reset(),this.requestUpdate(),this.focus(),this.inputFocus()},setCallback:function(a){this.callback=a},setSelectionlessCallback:function(a){this.selectionlessCallback=a},setExtraFocus:function(a){this.extraFocus=a},setExtraKeydown:function(a){this.extraKeydown=a},setValue:function(a,b){this.qValue=a,this.$("#@input").val(this.qValue),this.result=b;var c=this.$("#@input");c.hasClass("maintain_background_white")||(c.get(0).style.backgroundColor="#eee"),this.selectionChosen=!0,this.callback&&this.callback()},getValue:function(){return this.placeholderActive?"":this.$("#@input").val()},ajaxCallback:function(a){var b=now();if(!!this.requestOutstanding){this.requestOutstanding=!1;if(this.closed)return;if(!this.child("results"))return;require("webnode2").unloadComponent(this.child("results").cid),this.$("#@results_shell").setContent(a),!this.child("results").empty&&(this.child("results").query||this.always_show_dropdown_on_results)&&this.child("results").showDropdown();var c=(now()-this.requestStartTime)/1e3,d=(now()-b)/1e3;console&&console.log("js saw "+c+" ms and "+d+" in callback"),this.child("results").query!=this.qValue&&this.requestUpdate(),(this.minAutoFocusIndexLength&&this.qValue.length<this.minAutoFocusIndexLength||this.child("results").highlightFirst)&&this.child("results").setFocusIndex(0,{cancelIfSelectingInstruction:!0}),this.child("results").highlightAddQuestion&&this.child("results").setFocusIndex(this.child("results").results.length-1,{cancelIfSelectingInstruction:!0})}},inputKeydown:function(a){var b=this.$("#@input"),c=b.val();if(this.simulateScroll&&c==""&&simscroll.maybeSimulateScroll(a)){b.blur();return!1}simscroll.cancelSimulatedScroll();if(a.keyCode==40){this.requestOutstanding=!1,this.child("results").down();return!1}if(a.keyCode==38){this.child("results").up();return!1}if(a.keyCode==27){this.child("results").hide(),this.userClicked=!1;return!1}if(a.keyCode==13){if(this.child("results").go(a))return!1;if(this.selectionlessCallback&&this.selectionlessCallback())return!1}if(this.extraKeydown)return this.extraKeydown(a.keyCode);return!0},inputKeyup:function(){this.onInputChange();return!1},onInputChange:function(){var a=this.$("#@input").val();a!=this.qValue&&(this.qValue=a,this.requestOutstanding||this.requestUpdate(),this.qValue==""&&(this.closed=!1))},inputBlur:function(){this.setPlaceholder(),this.child("results")&&this.child("results").hide()},disable:function(){this.close(),this.$("#@input").attr("disabled","disabled"),this.$("#@input").css("background","#e0e0e0")},enable:function(){this.$("#@input").attr("disabled",!1),this.$("#@input").css("background","#fff")},setText:function(a){this.$("#@input").val(a),this.onInputChange()},setPlaceholder:function(){var a=this.$("#@input").attr("placeholder");a&&!this.getValue()&&(this.placeholderActive=!0,this.$("#@input").addClass("light"),this.$("#@input").val(a))},removePlaceholder:function(){this.placeholderActive&&(this.placeholderActive=!1,this.$("#@input").removeClass("light"),this.clearInput())},focus:function(a){if(!a)if(window.getSelection){if(window.getSelection().rangeCount>0)return}else if(document.selection&&document.selection.createRange())return;!this.$("#@input").is(":visible")||(this.$("#@input").attr("focused",!0),this.closed=!1,this.$("#@input").focus(),this.removePlaceholder())},inputFocus:function(){this.$("#@input").attr("focused",!0),this.removePlaceholder(),this.$("#@input").get(0).style.backgroundColor="",this.selectionChosen?(this.selectionChosen=!1,this.result=null,this.requestUpdate()):(!this.focusOnLoad||this.userClicked&&this.focusOnLoad)&&this.showResultsDropdown()},showResultsDropdown:function(){this.child("results").showDropdown()},cursorPosition:function(a){var b=a.get(0),c=null;if(b.selectionStart!=undefined)b.selectionStart==b.selectionEnd&&(c=b.selectionStart);else if(document.selection){var d=document.selection.createRange().duplicate();d.text==""&&(d.moveEnd("character",b.value.length),d.text==""?c=b.value.length:c=b.value.lastIndexOf(d.text))}return c}}),ContextTypeahead=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.width=this.$("#@input").outerWidth(),this.paddingRight=parseInt(this.$("#@input").css("paddingRight").replace("px","")),this.orgPlaceholder=this.$("#@input").attr("placeholder"),this.child("context").setDefault(),this.context.id&&this.clearInstruction(),this.resizeInput(),this.child("context").hasContext()&&this.showClearButton(),this.$("#@clear").click(this.fnbind(function(){this.reset(),this.resetContext(),this.clearInstruction(),this.$("#@input").focus();return!1})),this.setExtraKeydown(this.fnbind(function(a){if(a==9){var b=this.child("results").focusedIndex?this.child("results").focusedIndex:0,c=this.child("results").getResult(b);if(c.text){this.clearInstruction(),this.context={type:c.type,id:c.id},this.child("context").setContext(c.text,c.url),this.$("#@input").val(""),this.showClearButton(),this.resizeInput();return!1}}else if(a==8){var d=this.$("#@input");(d.val()==""||this.cursorPosition(d)==0)&&this.resetContext()}return!0})),this.setExtraFocus(this.fnbind(function(){this.$("#@input_wrapper").css("background-color","#fff")})),this.focusOnLoad?this.focus():this.setPlaceholder()},showClearButton:function(){this.$("#@clear").show()},hideClearButton:function(){this.$("#@clear").hide()},clearInstruction:function(){this.$("#@input").attr("placeholder",""),this.removePlaceholder()},resizeInput:function(){var a=this.child("context").getWidth(),b=this.width-a-10,c=this.paddingRight;a&&(c+=17,b-=17),this.$("#@input").css("width",b+"px"),this.$("#@input").css("paddingRight",c+"px")},resetContext:function(){this.context={},this.child("context").removeContext(),this.$("#@input").attr("placeholder",this.orgPlaceholder),this.hideClearButton(),this.resizeInput(),this.requestUpdate()},getRequestUpdatePostData:function(){return{q:this.qValue,context_type:this.context.type,context_id:this.context.id,data:this.data}}}),TopicSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.setCallback(this.fnbind(function(){this.lookup("topic_add").select(),this.type!="to_tid"&&this.type!="replace_topic"&&this.reset()})),this.simulateScroll=!1},addTempTopic:function(a){this.$("#@temp_topics_list").append(a),this.parent().$("#@update").show()},resetTempTopics:function(a){this.$("#@temp_topics_list").text("")},hideSelector:function(){this.$("#@selector_wrapper").addClass("hidden"),this.$("#@view_selector_wrapper").removeClass("hidden"),this.$("#@view_selector").focus()},setTarget:function(a){a&&this.$("#@view_selector").text("Suggest Topics for "+a)}}),Navigator=Typeahead.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@add_new_question").click(this.fnbind(function(){this.lookup("add_question").openDialog(this.qValue);return!1})),this.setSelectionlessCallback(this.fnbind(function(){this.lookup("add_question").openDialog(this.qValue)}))}}),TopicNavigator=Typeahead.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@add_new_question").click(this.fnbind(function(){this.setTopic(),this.lookup("add_question").openDialog(this.qValue),this.lookup("add_question").setOkCallback(this.fnbind(function(){this.clear()})),this.close();return!1})),this.setSelectionlessCallback(this.fnbind(function(){this.setTopic(),this.lookup("add_question").openDialog(this.qValue),this.lookup("add_question").setOkCallback(this.fnbind(function(){this.clear()})),this.close()}))},setTopic:function(){this.tid&&this.lookup("add_question").setTid(this.tid)},getRequestUpdatePostData:function(){return{q:this.qValue,tid:this.tid,data:this.data}}}),ContextNavigator=ContextTypeahead.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@placeholder").hover(this.fnbind(function(){this.hideInstructionPlaceholder()})),this.$("#@input").click(this.fnbind(function(){this.hideAddQuestionNote(),this.focus(!0);return!1})),this.$("#@input").keydown(this.fnbind(function(a){this.keydownHandler(a)})),this.$("#@input").blur(this.fnbind(function(){this.hideAddQuestionNote()})),this.$("#@input").focus(this.fnbind(function(){this.hideAddQuestionNote()})),this.$("#@add_new_question").click(this.fnbind(function(){this.addQuestionClick();return!1})),this.setSelectionlessCallback(this.fnbind(function(){this.addQuestionClick()})),this.open_add_question_dialog_on_load&&this.lookup("add_question").openDialog(this.qValue),this.focusOnLoad&&this.showInstructionPlaceholder("Search Questions, Topics and People")},keydownHandler:function(a){a.keyCode!=13&&this.hideAddQuestionNote()},addQuestionClick:function(){!this.qValue||this.qValue==""?this.showAddQuestionNote():(this.hideAddQuestionNote(),this.child("results").hide(),this.lookup("add_question").setTid(this.getTopic()),this.lookup("add_question").openDialog(this.qValue))},showAddQuestionNote:function(){this.focus(!0),this.showInstructionPlaceholder("Type your question here"),this.child("results").hideDropdown(),this.lookup("add_question_note").$("#@note").fadeIn(500)},showInstructionPlaceholder:function(a){!this.$("#@input").val()&&!this.context.id&&(this.$("#@placeholder").text(a),this.$("#@placeholder").show())},hideInstructionPlaceholder:function(){this.$("#@placeholder").hide()},hideAddQuestionNote:function(){this.hideInstructionPlaceholder(),this.lookup("add_question_note").$("#@note").hide()},getTopic:function(){if(this.context&&this.context.type=="topic")return this.context.id;return null}}),FullNavigator=ContextNavigator.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@placeholder").hover(this.fnbind(function(){this.hideInstructionPlaceholder()})),this.$("#@input").click(this.fnbind(function(){this.focus(!0);return!1})),this.setSelectionlessCallback(this.fnbind(function(){})),this.open_add_question_dialog_on_load&&this.lookup("add_question").openDialog(this.qValue),this.focusOnLoad&&this.showInstructionPlaceholder("Search Questions, Topics and People")},addQuestionClick:function(){this.child("results").hide(),this.lookup("add_question").setTid(this.getTopic()),this.lookup("add_question").openDialog(this.qValue)},showInstructionPlaceholder:function(a){!this.$("#@input").val()&&!this.context.id&&(this.$("#@placeholder").text(a),this.$("#@placeholder").show())},hideInstructionPlaceholder:function(){this.$("#@placeholder").hide()},getTopic:function(){if(this.context&&this.context.type=="topic")return this.context.id;return null}}),BoardsNavigator=ContextNavigator.extend({onLoad:function(){this.loaded=!1,this._super.apply(this,arguments),this.setSelectionlessCallback(this.fnbind(function(){})),this.open_add_question_dialog_on_load&&this.lookup("add_question").openDialog(this.qValue),this.$("#@input").click(this.fnbind(function(){this.loaded||(this.requestUpdate(),this.loaded=!0)}))},keydownHandler:function(a){a.keyCode!=13?this.hideAddQuestionNote():this.quick_search_results_access&&(document.location="/search?q="+this.$("#@input").val())},showResultsDropdown:function(){this.userClicked&&this.child("results").showDropdown()},inputIsNotEmpty:function(){return this.$("#@input").val()&&this.$("#@input").val()!=this.orgPlaceholder},showAddQuestionNote:function(){},hideAddQuestionNote:function(){}}),MobileNavigator=Typeahead.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@input").focus(this.fnbind(function(){this.mobileInputFocus()})),this.$("#@input").blur(this.fnbind(function(){this.$("#@input").attr("placeholder")==this.$("#@input").val()&&this.mobileInputBlur()})),this.lookup("add_question").$("#@link").click(this.fnbind(function(){this.lookup("add_question").openDialog(this.qValue);return!1})),this.setSelectionlessCallback(this.fnbind(function(){this.lookup("add_question").openDialog(this.qValue)}))},mobileInputFocus:function(){this.parent().miniLogo(),this.$("#@add").removeClass("hidden")},mobileInputBlur:function(){this.parent().resetLogo(),this.$("#@add").addClass("hidden")}}),RelatedQuestionSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.setCallback(this.fnbind(function(){this.rel_qid=this.qValue,this.reset(),this.serverCall("add_related_question").kwargs({qid:this.qid,rel_qid:this.rel_qid}).liveMutate().send()})),this.setSelectionlessCallback(this.fnbind(function(){this.lookup("add_question").openDialog(this.qValue),this.reset()}))}}),RedirectQuestionSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.setCallback(this.fnbind(function(){this.$("#@input").val($.trim($("<div>"+this.result.html+"</div>").text())),this.parent().$("#@to_qid").val(this.qValue),this.serverCall("question_redirect_preview").kwargs({to_qid:this.qValue}).contentFor(this.parent().$("#@question_redirect_preview"),{parentCID:this.cid}).send(),this.$("#@input").blur()}))}}),WantedAnswerQuestionSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.qid=null,this.setCallback(this.fnbind(function(){this.setQid(this.qValue),this.$("#@selector").addClass("hidden"),this.$("#@question").removeClass("hidden"),this.$("#@question").setContentFromAJAXComponent("/question/ajax_question_name_POST",{qid:this.qValue}),this.reset()}))},setQid:function(a){this.qid=a},getQid:function(){return this.qid}}),TempQuestionSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.setCallback(this.fnbind(function(){var a=this.object_id;this.qid=this.qValue,this.reset(),this.$("#@temp_question").setContentFromAJAXComponent("/question/ajax_temp_question_POST",{qid:this.qid,email:a},this.cid,null,this.fnbind(function(){this.addToList()}))}))},setObjectID:function(a){this.object_id=a},addToList:function(){this.$("#@selector_results").append($("<li/>").addClass("clear").append($("<a/>").attr("href","#").attr("style","float:left;padding:0 0 2px;margin:3px 3px 0 0;").addClass("remove").addClass("br3").click(function(){$(this).parent().remove();return!1}).append("")).append(this.$("#@temp_question").html())),this.$("#@temp_question").html("")}}),PeopleSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.setCallback(this.fnbind(function(){this.to_uid=this.qValue,this.reset(),this.parent().setTo(this.to_uid)})),this.parent().allow_selectionless_input&&this.setSelectionlessCallback(this.fnbind(function(){this.to_uid=this.qValue,this.reset(),this.parent().setTo(this.to_uid)}))}}),ContactsSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.setCallback(this.fnbind(function(){this.setEmail(this.qValue)})),this.allow_selectionless_input&&this.setSelectionlessCallback(this.fnbind(function(){this.setEmail(this.qValue)})),this.trigger_selection_on_blur&&this.$("#@input").blur(this.fnbind(function(){var a=this.$("#@input").val();a&&a!=this.placeholder&&this.setEmail(a)})),this.$("#@input").keypress(this.fnbind(function(a){a.which==13&&(this.$("#@input").attr("focused",!1),this.child("results").hide(),a.preventDefault())}))},setEmail:function(a){this.parent().setTo(a),this.forceReset&&this.reset()}}),LinkSelector=Typeahead.extend({onLoad:function(){this._super.apply(this,arguments);var a=this;a.$("#@add_new_question").click(function(){a.child("results").hideDropdown(),a.lookup("add_question").openDialog(a.qValue);return!1}),a.setSelectionlessCallback(function(){a.child("results").hideDropdown(),a.lookup("add_question").openDialog(a.qValue)}),a.$("#@input").keydown(function(){if(a._escKeyDown)return a._escKeyDown.apply(this,arguments)})},setEscKeyDown:function(a){this._escKeyDown=a}}),FeaturedContentLinkSelector=Typeahead.extend({onLoad:function(){this._super.apply(this,arguments);var a=this;this.setCallback(this.fnbind(function(){this.child("results").hideDropdown()})),a.setSelectionlessCallback(function(){a.child("results").hideDropdown()}),a.$("#@input").keydown(function(){if(a._escKeyDown)return a._escKeyDown.apply(this,arguments)})}}),TopicPeopleSelector=Typeahead.extend({_callback:function(){var a=this.qValue.id,b=this.qValue.type;this.reset(),this.parent().setTo(a,b)},onLoad:function(a){this._super.apply(this,arguments),this.setCallback(this.fnbind(this._callback)),this.parent().allow_selectionless_input&&this.setSelectionlessCallback(this.fnbind(this._callback))},inputBlur:function(){this._super.apply(this,arguments),this.parent().blurSelector()}}),BoardSelector=Typeahead.extend({onLoad:function(a){this._super.apply(this,arguments),this.qValue=this.bid?this.bid:null,this.simulateScroll=!1,this.$("#@fake_input").click(this.fnbind(function(){this.clearInput();return!1})),this.setSelectionlessCallback(function(){this.child("results").hideDropdown(),this.focusNext()}),this.setCallback(this.fnbind(function(){var a=this.getBid();if(a)this.swapInput(a);else{this.$("#@input").css("background","#fff"),this.focusNext();return}})),this.$("#@input").click(this.fnbind(function(a){a.stopPropagation()})),this.child("results").$("#@results_frame").click(this.fnbind(function(a){a.stopPropagation()})),$(document).click(this.fnbind(function(){this.child("results")&&this.child("results").hide()}))},inputBlur:function(){this.setPlaceholder()},setInput:function(a){this.setValue(a),this.swapInput(a)},swapInput:function(a){this.$("#@input_wrapper").hide(),this.$("#@fake_input").show(),this.selectionChosen=!1,this.serverCall("update_preview").kwargs({bid:a}).contentFor(this.$("#@fake_input"),{parentCID:this.cid}).send(),this.focusNext()},focusNext:function(){this.cQuery(":editor.editor")&&(this.is_default_board_enabled?this.cQuery(":editor").showEditor():this.cQuery(":editor.editor").focus())},resetFakeInput:function(){this.qValue=this.initialValue,this.$("#@fake_input").hide(),this.$("#@input_wrapper").show(),this.$("#@input").val(""),this.$("#@input").css("background","#fff")},clearInput:function(a){this.resetFakeInput(),this.focus(!0),this.child("results").showDropdown()},getText:function(){var a=this.$("#@input").val();return a==this.$("#@input").attr("placeholder")?null:a},getBid:function(){return isNaN(this.qValue)?null:this.qValue}}),require.install("typeahead",function(){}),require.install("mobile",function(require,a,b){var c=require("w2.quora").Component,d=window.Quora,e=require("lang/fun").bind,f=require("webnode2"),g=require("w2.livenode");a.MobileHeader=c.extend({onLoad:function(){this.org=this.$("#@logo_text").text()},miniLogo:function(){setTimeout(function(){window.scrollTo(0,1)},0),this.$("#@logo_text").text("Q"),this.$("#@logo").addClass("logo_mini")},resetLogo:function(){this.$("#@logo_text").text(this.org),this.$("#@logo").removeClass("logo_mini")}}),a.MobileHomeButtons=c.extend({onLoad:function(){this.org=this.$("#@more").html(),this.$("#@more").click(this.fnbind(function(){var a=this.$("#@mobile_more_buttons");a.hasClass("hidden")?(this.$("#@more").html("Less"),a.removeClass("hidden")):(this.$("#@more").html(this.org),a.addClass("hidden"));return!1}))}})}),require.install("flash",function(require,a,b){var c=require("w2.quora").Component,d=require("webnode2").FlashClient={};a.FlashClient=c.extend({onLoad:function(a){if(a){d.onInit=this.delayedFn(this.onFlashInit),d.onComplete=this.fnbind(this.onComplete);try{require("swfobject").embedSWF(this.swf_url,this.$("#@flash").attr("id"),"1","1","10.0.0",null,this.flash_vars,{allowScriptAccess:"always"},{allowscriptaccess:"always"})}catch(b){$.serverLog("error in swfobject library: "+b)}}},delayedFn:function(a){return this.fnbind(function(){var b=arguments;setTimeout(this.fnbind(function(){a.apply(this,b)}),1)})},onFlashInit:function(){try{this.getSwf().init(this.so,this.cp,this.fc)}catch(a){$.serverLog("unable to call onFlashInit()"+a)}},onComplete:function(){},getSwf:function(){return this.$("#@flash").get(0)}})}),require.install("presence",function(require,a,b){var c=require("w2.quora").Component,d=require("event").add,e=require("webnode2"),f=require("cookies");require("w2.rpc"),a.PresenceEditor=c.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(a){this.$("#@menu").menu(this.$("#@menu_link"));return!1}))}}),a.PresenceEditLink=c.extend({onLoad:function(){this.$("#@set_visibility").click(this.fnbind(function(){this.serverCall("set_visibility").kwargs({type:this.type}).liveMutate().send();return!1}))}});var g=c.extend({onLoad:function(){if(!!this.monitor){this.disabled=!1;var a=this.fnbind(this.onPresence);d(document,"mousemove",a),d(document,"keypress",a)}},_kwargs:function(){return{}},onPresence:function(){this.disabled||(this.disabled=!0,e.rpc(this._action).kwargs(this._kwargs()).send())}});a.ThreadPresenceMonitor=g.extend({_action:"/thread/ajax_report_thread_presence_POST",_kwargs:function(){return{thread_id:this.thread_id}}}),a.HomeFeedPresenceMonitor=g.extend({_action:"/ajax/ajax_report_home_feed_presence_POST"}),a.TopicSetFeedPresenceMonitor=g.extend({_action:"/ajax/ajax_report_topic_set_feed_presence_POST",_kwargs:function(){return{tid:this.tid}}});var h;a.PresenceZoneMonitor=c.extend({onLoad:function(){if(!h)$.serverLog("PresenceZoneMonitor cannot add zone because singleton page_monitor is missing");else for(var a=0;a<this.zones.length;a++)h.zones[this.zones[a]]==undefined&&(h.zones[this.zones[a]]={}),h.zones[this.zones[a]][this.cid]=!0},onUnload:function(){if(!h)$.serverLog("PresenceZoneMonitor cannot remove zone because singleton page_monitor is missing");else for(var a=0;a<this.zones.length;a++){h.zones[this.zones[a]]!=undefined&&delete h.zones[this.zones[a]][this.cid];var b=!0;for(var c in h.zones[this.zones[a]]){b=!1;break}b&&delete page_monitor_zones[this.zones[a]]}}}),a.PresencePageMonitor=c.extend({init:function(){h=this,this.zones={},this.last_activity_time=+(new Date),this.last_connect_time=+(new Date),this.rate_limit_activity_ms=55e3,this.rate_limit_connect_ms=6e4},onLoad:function(){var a=this.fnbind(this.reportActivity);d(document,"mousemove",a),d(document,"keypress",a),d(document,"scroll",a),setTimeout(this.fnbind(this.reportConnect),this.rate_limit_connect_ms),d(window,"beforeunload",this.fnbind(this.reportDisconnect))},reportActivity:function(){var a=+(new Date);a>=this.last_activity_time+this.rate_limit_activity_ms&&(this.last_activity_time=a,this._report(!0))},reportConnect:function(){var a=+(new Date),b=Math.max(this.last_activity_time,this.last_connect_time),c=a-b,d=this.rate_limit_connect_ms-c+100;c>this.rate_limit_connect_ms&&(this.last_connect_time=a,this._report(!1),d=this.rate_limit_connect_ms+100),setTimeout(this.fnbind(function(){this.reportConnect()}),d)},_report:function(a){var b=[];for(var c in this.zones)b.push(c);b.length>0&&this.serverCall("report").kwargs({zones:b,is_activity:a}).send()},reportDisconnect:function(){var a=!1;for(var b in this.zones){a=!0;break}if(a){var c=e.windowId;c&&f.setMessage("prd",[c])}}})}),require.install("signup",function(require,a,b){var c=require("webnode2"),d=require("w2.quora").Component,e=require("facebook");a.SignupFormFields=d.extend({onLoad:function(){var a=this;this.$("#@email, #@name, #@password").keyup(function(){a.$("#@name").val()&&a.$("#@email").val()&&a.$("#@password").val()?a.trigger("enable_submit"):a.trigger("disable_submit")})},validate:function(){if(!this.child("name_validator").isValid)if(!this.$("#@name")||this.child("name_validator")!==null)return!1;if(!this.child("email_validator").isValid)if(!this.$("#@email")||this.child("email_validator").isValid!==null)return!1;if(this.$("#@password").val().length<this.minimum_password_length)return!1;if(!this.child("password_validator").isValid)if(!this.$("#@password")||this.child("password_validator").isValid!==null){a1ert("Check the password that you're using before submitting.");return!1}return!0}}),a.FacebookReferralSignupForm=d.extend({onLoad:function(){e.onInit(this.fnbind(function(){this.updateLoginStatus(!1)})),this.child("fb_connect").bind("fb_login",this.fnbind(function(){this.updateLoginStatus(!0)})),this.registerSubmitButton(),this.registerLoginLink(),this.registerCreateAccountLink(),this.$("#@close").click(this.fnbind(this.close)),this.lookup("form_fields")&&this.lookup("form_fields").$("#@password").focus(),this.has_passwordless&&(this.$("#@login").show(),this.$("#@create_account").hide()),$(window).resize(this.fnbind(this.centerComponent)),this.centerComponent(),this.$("#@form").show(),this.$("#@calltoaction").show(),this.recordSignupStep("signup_dialog_begin")},centerComponent:function(){var a=this.$("#@calltoaction").height(),b=Math.max(($(window).width()-this.$("#@form").outerWidth())/2,0),c=Math.max(($(window).height()-this.$("#@form").outerHeight())/2-20,a+20),d=Math.max(($(window).width()-this.$("#@calltoaction").outerWidth())/2,0);this.$("#@form").css({position:"fixed",left:b,top:c}),this.$("#@calltoaction").css({position:"fixed",left:d,top:Math.max(c-a-20,0)})},updateConnectButtonsAndForm:function(a){a?(this.$("#@fb_connect").hide(),this.$("#@fb_signup_form").show()):(this.$("#@fb_connect").show(),this.$("#@fb_signup_form").hide()),this.centerComponent()},updateLoginStatus:function(a){FB.getLoginStatus(this.fnbind(function(b){this.updateConnectButtonsAndForm(b.status==="connected");if(b.status==="connected"){this.$("#@facepile").show();var c=b.authResponse;this.fb_uid=b.authResponse.userID,this.serverCall("save_fb_token").kwargs({fb_uid:this.fb_uid,access_token:b.authResponse.accessToken,expires_in:b.authResponse.expiresIn}).send(),this.queryFacebookProfile(this.fnbind(this.updateFormFields)),this.serverCall("try_login_facebook").kwargs({fb_uid:this.fb_uid}).success(this.fnbind(function(a){a&&this.completeLogin()})).send(),this.updateLoginMessage(),e.updatePermissions(this.fnbind(this.updateLoginMessage))}else a&&this.recordSignupStep("signup_facebook_connect_failed"),b.status==="unknown"?this.$("#@facepile").hide():this.$("#@facepile").show()}))},updateFormFields:function(a){var b=this.child("form_fields"),c=b.$("#@name");c.val(a.name).addClass("disabled_text_field").click(function(){c.removeClass("disabled_text_field")}),b.child("name_validator").validate();if(a.email){var d=b.$("#@email");d.val(a.email).addClass("disabled_text_field").click(function(){d.removeClass("disabled_text_field")}),b.child("email_validator").validate(),b.$("#@password").focus()}else b.$("#@email").focus();this.$("#@picture_spinner").hide(),this.$("#@connected_pic").attr("src",a.picture).show()},registerLoginLink:function(){this.$(".login_link").click(this.fnbind(function(){this.$("#@login").show(),this.$("#@create_account").hide();return!1}))},updateLoginMessage:function(){e.getFbUid()?e.hasPermission("publish_actions")?(this.$("#@login_connect_and_timeline_msg").show(),this.$("#@login_connect_msg").hide()):(this.$("#@login_connect_and_timeline_msg").hide(),this.$("#@login_connect_msg").show()):(this.$("#@login_connect_and_timeline_msg").hide(),this.$("#@login_connect_msg").hide())},registerCreateAccountLink:function(){this.$("#@create_account_link").click(this.fnbind(function(){this.$("#@login").hide(),this.$("#@create_account").show();return!1}))},registerSubmitButton:function(){this.child("form_fields").bind("enable_submit",this.fnbind(function(){this.$("#@submit").removeAttr("disabled").removeClass("submit_button_disabled")})),this.child("form_fields").bind("disable_submit",this.fnbind(function(){this.$("#@submit").attr("disabled","disabled").addClass("submit_button_disabled")})),this.$("#@submit").click(this.fnbind(function(){var a=this.child("form_fields");a.validate()&&(this.$("#@spinner").show(),this.$("#@submit").attr("disabled","disabled").addClass("submit_button_disabled"),this.serverCall("signup_dont_redirect").kwargs({name:a.$("#@name").val(),email:a.$("#@email").val(),password:a.$("#@password").val(),fb_uid:this.fb_uid}).success(this.fnbind(function(a){this.$("#@spinner").hide(),a?this.completeLogin():this.$("#@submit").removeAttr("disabled").removeClass("submit_button_disabled")})).send());return!1}))},close:function(){this.recordSignupStep("signup_dialog_close"),this.$("#@background").hide(),this.$("#@form").hide()},queryFacebookProfile:function(a){FB.api("/me?fields=id,name,email",this.fnbind(function(b){this.recordSignupStep("signup_facebook_connected"),this.recordSignupStep("signup_facebook_api_succeeded"),a({email:b.email,name:b.name,fb_uid:b.id,picture:"https://graph.facebook.com/"+b.id+"/picture?type=normal"})}))},completeLogin:function(){require("settings").pageMode=="post_reload"&&$(document).trigger("quora_login")},recordSignupStep:function(a){this.serverCall("record_signup_step").kwargs({signup_action:a}).send()},getHashParams:function(){var a={},b=document.location.hash.substr(1).split("&");for(var c=0;c<b.length;++c)a[b[0]]=b[1];return a},objectToString:function(a,b){b=b||"";var c=[];for(var d in a)typeof a[d]=="object"?c.push(b+d+"=<br>"+this.objectToString(a[d],b+"&nbsp;&nbsp;")):c.push(b+d+"="+a[d]);return c.join(",<br>")}})}),require.enqueue(function(require){require("json2"),require("assert"),require("jquery"),require("jquery.securepost"),require("jquery.cookie"),require("jquery.dialog"),require("jquery.tooltip"),require("jquery.menu"),require("jquery.topic"),require("jquery.viewport"),!0||require("jquery.ui-1.8.17"),require("Class"),require("jquery.ajax"),require("effects.core"),require("effects.shake"),require("effects.highlight"),require("jquery.webnode2"),require("jquery.quora"),require("w2.dialog"),require("w2.inputvalidate"),require("w2.rpc"),require("w2.inspector"),require("w2.interaction"),require("tchannel_up"),require("Quora"),require("facebook"),require("twitter"),require("login"),require("prefetch"),require("dialog"),require("qtexteditor"),require("typeahead"),require("mobile"),require("flash"),require("presence"),require("signup")});