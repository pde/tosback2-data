function adminGetUserInfo(){var e=encodeURI($("div._userInfoSection input[name='userEmailOrMemberId']").val());$("img._getUserInfoSpinner").show();var t=e.match(/@/)?"?memberEmail="+e.replace("+","%2B"):"?memberId="+e;ajaxCall({url:"/ajax/admin/get-all-user-data"+t,success:function(e){e.error?alert(e.error):$("div._userInfoSection #userInfoResults").html(e.output),$("img._getUserInfoSpinner").hide()}},"q1")}function adminGetTwitterUserInfo(){var e=$("div._userInfoSection input[name='twitterUsername']").val();$("img._getTwitterUserInfoSpinner").show(),ajaxCall({url:"/ajax/admin/get-data-for-twitter-username?username="+e,success:function(e){e.error?alert(e.error):$("div._userInfoSection #userInfoResults").html(e.output),$("img._getTwitterUserInfoSpinner").hide()}},"q1")}function adminGetUserLinkedinAccounts(){var e=encodeURI($("div._userInfoSection input[name='userEmailOrMemberId']").val()),t=$("img._getUserInfoSpinner"),i="?memberEmail="+e.replace("+","%2B");t.show(),ajaxCall({url:"/ajax/admin/get-linkedin-data"+i,success:function(e){e.error?alert(e.error):($("div._userInfoSection #userInfoResults").html(e.output),$("#adminCreateLinkedinCompanyPage ._startOverLink").show(),$("#linkedinCompanyResults").empty(),$("#createdLinkedinCompanyPageSuccessResults").empty()),t.hide()}},"q1")}function adminGetLinkedinCompanyInfo(e){var t=$("#userInfoResults"),i=t.find("._linkedinCompanyUrl").val();if(t.find("._errorNoLinkedinCompanyUrl").hide(),!i||0==i.length)return t.find("._errorNoLinkedinCompanyUrl").show(),!1;var n=$("img._getLinkedinAdminInfoSpinner"),r="?snId="+e+"&linkedinCompanyUrl="+encodeURIComponent(i);n.show(),ajaxCall({url:"/ajax/admin/get-linkedin-company-data"+r,success:function(e){e.error?alert(e.error):$("#linkedinCompanyResults").html(e.output),n.hide()}},"q1")}function adminCreateLinkedinCompanyPage(){var e=$("#linkedinCompanyResults"),t=e.find("[name=companyId]").val(),i=e.find("[name=snId]").val(),n="?snId="+i+"&companyId="+t,r=$("img._createLinkedinCompanyPageSpinner");r.show(),ajaxCall({url:"/ajax/admin/create-linkedin-company-page"+n,success:function(e){e.error?alert(e.error):$("#createdLinkedinCompanyPageSuccessResults").html(e.output),r.hide()}},"q1")}function adminChangeMigrationStatus(e,t){ajaxCall({url:"/ajax/admin/change-migration-status?memberId="+e+"&status="+t,success:function(e){e.error?alert(e.error):adminGetUserInfo()}},"q1")}function adminClearCCAuthAttempts(e){ajaxCall({url:"/ajax/admin/clear-cc-auth-attempts?memberId="+e,success:function(e){e.error?alert(e.error):adminGetUserInfo()}},"q1")}function adminSetNetTermsZero(e){confirm("Are you sure you would like to set the payment type to Net Terms 0? This action cannot be undone.")&&ajaxCall({url:"/ajax/admin/change-payment-method-to-net-terms-zero?memberId="+e,success:function(e){e.error?alert(e.error):adminGetUserInfo()}},"q1")}function adminObfuscateEmail(e){ajaxCall({url:"/ajax/admin/obfuscate-email?memberId="+e,success:function(e){e.error?alert(e.error):($("div._userInfoSection input[name='userEmail']").val(e.newEmail),adminGetUserInfo())}},"q1")}function adminEditMemberFeatures(){var e=$("#paidFeaturesEditForm").serialize();ajaxCall({url:"/ajax/admin/edit-member-features",data:e,success:function(e){e.error?alert(e.error):adminGetUserInfo()}},"q1")}function adminSyncFeaturesFromAria(){$("#syncFeaturesButton").hide(),$("#syncFeaturesBlurb").show(),ajaxCall({url:"/ajax/admin/sync-from-aria?memberId="+$("#memberId").val(),success:function(e){e.error&&alert(e.error)}},"q1")}function adminChangeMemberFlag(e,t){ajaxCall({url:"/ajax/admin/change-member-flag?memberId="+$("#memberId").val()+"&flag="+e+"&val="+(t?"1":"0"),success:function(t){t.error?alert(t.error):$("#"+e+"Blurb").text(" - Updated")}},"q1")}function adminChangeCheaterStartDate(e,t){$("#cheaterStartEdit").hide(),ajaxCall({url:"/ajax/admin/change-cheater-start-date?memberId="+e+"&date="+t,success:function(e){e.error?alert(e.error):$("span._getUserInfoButton").click()}},"q1")}function adminAddCoupon(){var e=$("#createCouponForm").serialize();ajaxCall({url:"/ajax/admin/add-coupon",data:e,success:function(e){e.error?alert(e.error):($("#searchForm input").val($("#couponCodeInput").val()),$("#searchForm").submit())}},"q1")}function adminLoadEditCoupon(e){$row=$(e).closest("tr"),$row.find("td").each(function(e,t){var i=$(t).attr("field"),n=$(t).text().trim();$("#createCouponForm input[field="+i+"]").val(n)}),$("#createCouponArea:visible").length||$("#createCouponArea").slideToggle()}function adminShowFeatureEdit(e){var t=$(e).closest("._row");adminInitializeFeatureEdit(t),t.find("._edit").hide().end().find("._submit").show().end().find("._cancel").show().end().find("._restriction-display").hide().end().find("._value-display").hide().end().find("._restriction-edit").show().end().find("._value-edit").show()}function adminHideFeatureEdit(e){var t=$(e).closest("._row");t.find("._edit").show().end().find("._submit").hide().end().find("._cancel").hide().end().find("._restriction-display").show().end().find("._value-display").show().end().find("._restriction-edit").hide().end().find("._value-edit").hide()}function adminSubmitFeatureEdit(e,t){var i=$(e).closest("._row"),n=i.find("._restriction-list").val(),r=i.find("._valueInput").val(),a=i.find("._code-display").text(),s=i.attr("featureId");return confirm("Are you sure you want to change the value of "+a+"?")?(ajaxCall({url:"/ajax/admin/update-feature?featureId="+s+"&value="+r+"&restriction="+n+"&view="+t,success:function(t){t.error?alert(t.error):(i.effect("highlight",{},2e3),i.find("._currentVal").val(r),adminUpdateFeatureDisplay(e),adminHideFeatureEdit(e))}},"q1"),void 0):!1}function adminToggleFeatureQAState(e,t){var i=$(e).closest("._row"),n=i.find("._code-display").text(),r=i.attr("featureId"),a=i.find("._qaState").val();if(a=0==a?1:0,!confirm("Are you sure you want to change the QA state of "+n+" to "+a+"?"))return!1;var s=function(){i.effect("highlight",{},2e3),i.find("._qaState").val(a),i.find("._qabutton").removeClass("passed").removeClass("not-passed"),a?i.find("._qabutton").addClass("passed"):i.find("._qabutton").addClass("not-passed")};ajaxCall({url:"/ajax/admin/update-feature-qa-approved?featureId="+r+"&qaState="+a+"&view="+t,success:function(e){e.error?alert(e.error):s()}},"q1")}function adminUpdateFeatureDisplay(e){var t=$(e).closest("._row"),i=t.find("._valueInput").val();t.find("._restriction-display").text(t.find("._restriction-list").val());var n="";switch(t.find("._restriction-list").val()){case"boolean":n=1==i?"true":"false";break;case"percentage_static":case"percentage_random":n=i+"%";break;case"passthrough":case"member_list":case"organization_list":case"organization_percentage_static":n=i+"%";break;case"plan_code":n=i;break;default:}t.find("._value-display").text(n)}function adminInitializeFeatureEdit(e){var t=e.find("._restriction-list").val(),i="",n=e.find("._currentVal").val();switch(t){case"boolean":i='<select class="selectInput _valueInput" name="value"><option '+(1==n?'selected="selected"':"")+' value="1">True</option>'+"<option "+(0==n?'selected="selected"':"")+' value="0">False</option>'+"</select>";break;case"percentage_static":case"percentage_random":case"passthrough":case"member_list":case"organization_list":case"organization_percentage_static":i='<input class="tableTextInput _valueInput" type="text" value="'+n+'" name="value" style="width: 150px;" />';break;case"plan_code":e.find("._value-edit").empty().html('<span class="btn-throbber">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>'),ajaxCall({url:"/ajax/admin/get-valid-member-plans",success:function(t){t.success&&(i='<select class="selectInput _valueInput" name="value">',$.each(t.plans,function(e,t){i+='<option value="'+t.code+'">'+t.name+"</option>"}),i+="</select>",e.find("._value-edit").empty().html(i))}},"q1");break;default:}"plan_code"!=t&&e.find("._value-edit").empty().html(i)}function adminToggleEditForm(){$("#createCouponArea").slideToggle(),$("#createCouponArea input,#createCouponArea select").each(function(e,t){$(t).val("")})}function adminToggleEditApiKeyForm(){$("#editApiKeyArea").slideToggle(),$("#editApiKeyArea input").each(function(e,t){$(t).val("")}),$("#editApiKeyForm div._sendEnabledEmail input").attr("checked",!1)}function adminLoadEditApiKey(e){$row=$(e).closest("tr"),$row.find("td").each(function(e,t){var i=$(t).attr("field"),n=$(t).text().trim();"apiKey"==i||"name"==i?$("#editApiKeyForm span[name="+i+"]").html(n):("unlimited"==n?n=-1:"Basic"==n||"False"==n?n=0:("Advanced/Internal"==n||"True"==n)&&(n=1),$("#editApiKeyForm input[field="+i+"]").val(n))}),$("#editApiKeyForm div._sendEnabledEmail input").attr("checked",!1),0==$("#editApiKeyForm input[field=isActive]").val()?$("#editApiKeyForm div._sendEnabledEmail").show():$("#editApiKeyForm div._sendEnabledEmail").hide(),$("#editApiKeyForm:visible").length||$("#editApiKeyArea").slideToggle()}function adminSaveApiKey(){var e=$("#editApiKeyForm").serialize();return 0==$("#editApiKeyForm input[field=isActive]").val()&&$("#editApiKeyForm input[field=sendEnabledEmail]").is(":checked")?(alert("You cannot send the email unless the key has been enabled"),void 0):(ajaxCall({url:"/ajax/admin/save-api-key",data:e,success:function(e){e.error?alert(e.error):window.location.reload()}},"q1"),void 0)}function adminCheckEnabledEmailNotChecked(){return $("#editOauthClientForm input[id=sendEnabledEmail]").is(":checked")?(alert('You have selected the "Enabled" email and hit the "Deny" button. Please review.'),!1):void 0}function adminCheckDeniedEmailNotChecked(){return $("#editOauthClientForm input[id=sendDeniedEmail]").is(":checked")?(alert('You have selected the "Denied" email and hit the "Approve" button. Please review.'),!1):void 0}function adminSendEmailAction(){document.getElementById("clientEmailMessage").style.display="",document.getElementById("clientEmailMessage").focus(),document.getElementById("sendEnabledEmail").checked&&(document.getElementById("clientEmailMessage").value="Your HootSuite API app has been approved.\n\nPlease, visit My Apps to retrieve the OAuth 2 credentials that have been issued for your app: http://www.hootsuite.com/developers/my-apps .\n\nAnd make sure to read the OAuth 2 documentation for further information on using OAuth 2 with the API: http://www.hootsuite.com/developers/api/oauth2 ."),document.getElementById("sendDeniedEmail").checked&&(document.getElementById("clientEmailMessage").value="Thank you for your interest in the HootSuite API. \n\nYour application is missing some key information that we require:\n- A valid redirect URI\n- A descriptive or unique application name\n- A description of what the application is intended to do")}function adminSaveOauthClientPermission(){var e=$("#editOauthPermissionsForm").serialize();ajaxCall({url:"/ajax/admin/save-api-permission-specs",data:e,success:function(e){e.error?alert(e.error):($("#clientPermId").val(e.clientPermId),alert("Settings saved"))}},"q1"),event.preventDefault()}function adminSaveGlobalRelayAccountInfo(){$("#globalRelayAccountInfoFormStatus").html('<img src="/images/buttons/btn-throbber.gif" />');var e=$("#globalRelayAccountInfo").serialize();ajaxCall({url:"/ajax/admin/save-global-relay-account-info",data:e,success:function(e){e.error?(alert(e.error),$("#globalRelayAccountInfoFormStatus").html("<strong>Error :/</strong>").css("color","red")):$("#globalRelayAccountInfoFormStatus").html("<strong>Saved</strong>").css("color","green")}},"q1")}function adminRemoveHsAdmin(){var e=$(this).closest("._admin-row");return confirm("Are you sure you want to remove admin access?")?(ajaxCall({url:"/ajax/admin/remove-hs-admin",data:"adminId="+e.attr("adminId"),success:function(t){t.error?alert(t.error):fadeSlideRemove(e)}},"q1"),void 0):!1}function adminCreateHsAdmin(){var e=$(this).closest("._new-hs-admin-form"),t="email="+encodeURIComponent(e.find("input[name=email]").val());e.find("input:checkbox:checked").each(function(e,i){t+="&permissions[]="+$(i).val()}),ajaxCall({url:"/ajax/admin/create-hs-admin",data:t,success:function(t){t.error?alert(t.error):($("._nameFilter").val(e.find("input[name=email]").val()),adminLoadHsAdminTable(),alert("Member has been added as an admin"))}},"q1")}function adminShowModifyPermissions(){var e=$(this).closest("._admin-row");e.find("._permission-list-text").hide().end().find("._permission-list-select").show().end().find("._removeAdmin").hide().end().find("._modifyPermissions").hide().end().find("._cancelModify").show().end().find("._submitModify").show()}function adminHideModifyPermissions(){var e=$(this).closest("._admin-row");e.find("._permission-list-select").hide().end().find("._permission-list-text").show().end().find("._cancelModify").hide().end().find("._submitModify").hide().end().find("._removeAdmin").show().end().find("._modifyPermissions").show()}function adminSubmitHsAdminModifications(){var e=$(this).closest("._admin-row"),t="adminId="+e.find("input[name=adminId]").val();e.find("input:checkbox:checked").each(function(e,i){t+="&permissions[]="+$(i).val()}),ajaxCall({url:"/ajax/admin/modify-hs-admin-permissions",data:t,success:function(t){if(t.error)alert(t.error);else{var i='<table border="0"><tbody>';$.each(t.permissionInfo,function(e,t){i+='<tr><td><label><span class="icon-19 checkmark"></span>&nbsp;<strong>'+t.name+"</strong> - "+t.description+"</label></td></tr>"}),i+="</tbody></table>",e.find("._permission-list-text").empty().html(i).end().find("._cancelModify").click()}}},"q1")}function adminLoadHsAdminTable(){$("._permissionFilter").val();var e='<img class="table-loading-image" src="/images/buttons/btn-throbber.gif">',t=$("._admin-table-content");t.html(e),ajaxCall({url:"/ajax/admin/hs-admins-table",data:"permissionFilter="+$("._permissionFilter").val(),success:function(e){e.error?alert(e.error):(t.html(e.output),adminFilterHsAdminTableByName())}},"q1")}function adminFilterHsAdminTableByName(){var e=$("._admin-search-filters ._nameFilter").val().toLowerCase(),t=$("._admin-table-content");$.each(t.find("._admin-row"),function(t,i){var n=$(i).find("._admin-name").text().toLowerCase()+$(i).find("._admin-email").text().toLowerCase()+$(i).find("._admin-memberId").text().toLowerCase();n.indexOf(e)>=0?$(i).show():$(i).hide()})}function adminToggleVanityUrlForm(e){var t=$(e).val();hideAndClearVanityUrlForm(),"OWLY"==t?($("#addVanityUrlForm ._vanityurlFormUrl").show(),$("#addVanityUrlForm ._vanityurlFormHomeUrl").show()):"BITLY"==t?($("#addVanityUrlForm ._vanityurlFormUrl").show(),$($("#addVanityUrlForm ._vanityurlFormApiAuth1").find("td")[0]).html("Username"),$("#addVanityUrlForm ._vanityurlFormApiAuth1").show(),$("#addVanityUrlForm ._vanityurlFormApiAuth2").show()):"POST"==t?($($("#addVanityUrlForm ._vanityurlFormApiAuth1").find("td")[0]).html("API Key"),$("#addVanityUrlForm ._vanityurlFormApiAuth1").show()):"TAPSTREAM"==t&&($($("#addVanityUrlForm ._vanityurlFormApiAuth1").find("td")[0]).html("API Secret"),$("#addVanityUrlForm ._vanityurlFormApiAuth1").show())}function hideAndClearVanityUrlForm(){$("#addVanityUrlForm ._vanityurlFormUrl").hide().find("input").val(""),$("#addVanityUrlForm ._vanityurlFormHomeUrl").hide().find("input").val(""),$("#addVanityUrlForm ._vanityurlFormApiAuth1").hide().find("input").val(""),$("#addVanityUrlForm ._vanityurlFormApiAuth2").hide().find("input").val("")}function adminSaveVanityUrl(){var e=$("#addVanityUrlForm").serialize();ajaxCall({url:"/ajax/admin/add-vanity-url",data:e,success:function(e){e.error?alert(e.error):($("#addVanityUrlForm #resetVanityUrlForm").click(),adminToggleVanityUrlForm($("#addVanityUrlForm select")),$("#vanityUrlList").append(e.output))}},"q1")}function adminRemoveVanityUrl(e){var t=confirm("Remove Vanity Url?");t&&ajaxCall({url:"/ajax/admin/remove-vanity-url",data:"id="+e,success:function(e){e.error?alert(e.error):location.reload()}},"q1")}function adminSaveOneLoginSettings(){var e=$("#oneloginInfo").serialize();ajaxCall({url:"/ajax/admin/save-one-login",data:e,success:function(e){e.error?alert(e.error):alert("OneLogin settings saved")}},"q1")}function adminGetABCampaignsTable(e){var t=e.attr("switchTo"),i=$("._ab-campaign-list-container");t="active"==t?!0:!1,i.empty().html('<span class="btn-throbber">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>'),ajaxCall({url:"/ajax/admin/ab-campaigns-list",data:"isActive="+t,success:function(i){i.success&&($("._ab-campaign-list-container").html(i.output),t?($("._status-toggle ._inactive").hide(),$("._status-toggle ._active").show(),e.attr("switchTo","inactive")):($("._status-toggle ._active").hide(),$("._status-toggle ._inactive").show(),e.attr("switchTo","active")))}},"q1")}function adminFilterCampaignList(){var e=$("#adminManageAbCampaignsPage ._filter").val().toLowerCase(),t=$("#adminManageAbCampaignsPage ._ab-campaign-list-content");$.each(t.find("._row"),function(t,i){var n=$(i).find("._member-name").text()+$(i).find("._member-email").text()+$(i).find("._member-id").text()+$(i).find("._campaign-code").text()+$(i).find("._campaign-description").text();n.toLowerCase().indexOf(e)>=0?$(i).show():$(i).hide()})}function adminSetABCampaignStatus(e,t){var i="active"==t?!0:!1;return confirm("Marking the campaign as active / inactive will not turn the campaign on or off; you will need access to dark launching if you wish to do this. \nClick OK if you want to continue anyways.")?(e.find("._toggleStatusButton").unbind(),ajaxCall({url:"/ajax/admin/ab-campaign-set-campaign-status",data:"abCampaignId="+e.attr("campaignId")+"&status="+i,success:function(){fadeSlideRemove(e)}},"q1"),void 0):!1}function viewABCampaignDetails(e){$("._ab-campaign-list-container ._ab-campaign-list-content").find("._row").removeClass("highlight"),e.addClass("highlight");var t=e.find("._date_intervals #date_interval_start").val(),i=e.find("._date_intervals #date_interval_end").val();ajaxCall({url:"/ajax/admin/ab-campaign-get-campaign-details",data:"campaignId="+e.attr("campaignid")+"&datestart="+t+"&dateend="+i,success:function(t){$("._ab-campaign-details-title").find("._campaign-code").text(e.find("._campaign-code").text()).end().show(),$("._ab-campaign-details-container").html(t.output)}},"q1")}function adminLoadEmailPreview(e){var t,i,n,r;t=$(e)[0],i=t.dataset.templateType,n=t.dataset.templateName,r=$("form._emailProperties").serialize(),r=r+"&template="+n+"&format="+i,window.open("/admin/preview-email?"+r)}function adminSendEmailPreview(e){var t,i,n,r;t=$(e)[0],""==$("form._emailProperties #toAddress").val()?alert("Please enter an e-mail, so we know where to direct the test."):(i=t.dataset.templateName,r=$("form._emailProperties").serialize(),n=$("form._emailProperties #toAddress").val(),r=r+"&template="+i,ajaxCall({url:"/ajax/admin/send-preview-email",data:r,success:function(e){e.success&&alert("Email sent to "+n+".")}},"q1"))}function adminUploadBulkFreeTrials(e){return $error=e.find("._error-msg"),$error.empty(),e.find("._results").empty(),_.isEmpty(e.find('input[name="csvFile"]').val())?($error.html("Please select a csv file to upload"),void 0):(e.find("._input-csvFile").hide().end().find("._submitBulkUploadForm").hide().end().find("._submitButtonLoading").show().end().find("._processing-upload-msg").show(),e.submit(),void 0)}function getOrgTeams(e){var t,i,n,r,a;t=e.find("._tabClonerOrg"),i=e.find("._tabClonerTeam"),n=t.val(),a="orgId="+n,ajaxCall({url:"/ajax/admin/get-org-teams",data:a,success:function(e){e.teams&&(r='<option value="0">Select a team</option>',$.each(e.teams,function(e,t){r+='<option value="'+t.teamId+'">'+t.name+"</option>"}),i.removeAttr("disabled"),i.html(r))}},"q1")}function getTeamMembers(e){var t,i,n,r,a;t=e.find("._tabClonerTeam"),i=e.find("._tabClonerMember"),n=t.val(),a="teamId="+n,ajaxCall({url:"/ajax/admin/get-team-members",data:a,success:function(e){e.members&&(r='<option value="0">Select a member (optional)</option>',$.each(e.members,function(e,t){r+='<option value="'+t.memberId+'">'+t.fullName+"</option>"}),i.removeAttr("disabled"),i.html(r))}},"q1")}function submitCloneRequest(e){var t,i,n,r,a,s;return t=e.find("input[name=originMemberId]"),i=e.find("._tabClonerOrg"),n=e.find("._tabClonerTeam"),r=e.find("._tabClonerMember"),0==i.val()||0==n.val()?(alert("Sorry. You must select at least an organization and team to proceed."),!1):(data="originId="+t.val()+"&orgId="+i.val()+"&teamId="+n.val()+"&memberId="+r.val(),s=0==r.val()?n.find("option:selected").text():r.find("option:selected").text(),a=confirm("Are you sure you want to clone this users tabs to "+s+"?"),1==a&&ajaxCall({url:"/ajax/admin/clone-dashboard",data:data,success:function(e){e.success?alert("Tabs cloned successfully!"):e.error&&alert("Tabs cloning failed. Depending on where it failed, some tabs and streams may have been cloned.")}},"q1"),void 0)}function adminStartServicePolling(e){adminPollService(e),updateGraphs(e),setInterval(function(){adminPollService(e)},1e3),setInterval(function(){updateGraphs(e)},1e4)}function updateGraphs(e){var t="bucky",i=e;-1!=window.location.href.indexOf("hootd")&&(t="graph",i="dev"),$("#graph1").length?($("#graph1").attr("src","http://"+t+".hootsuitemedia.com/render?width=300&from=-1hours&until=now&height=200&target=stats.dashboard.zmq.service.*"+i+"*.dispatcher.messagesIn&hideLegend=true&title=Dispatcher_Messages_In&bgcolor=333333&uniq="+Math.random()),$("#graph2").attr("src","http://"+t+".hootsuitemedia.com/render?width=300&from=-1hours&until=now&height=200&target=scale(stats.dashboard.zmq.service.*"+i+"*.dispatcher.availableWorkers%2C1.85)&title=Available_Workers&areaMode=stacked&hideLegend=true&bgcolor=333333&uniq="+Math.random()),$("#graph3").attr("src","http://"+t+".hootsuitemedia.com/render?width=300&from=-1hours&until=now&height=200&target=alias(scale(stats.dashboard.zmq.service.*"+i+"*.dispatcher.messageQueueSize%2C1.85)%2C%20'Queue%20Size')&target=alias(secondYAxis(stats.dashboard.zmq.service.*"+i+"*.dispatcher.expiredMessages.*)%2C%20'Expired%20Messages')&title=Message_Queue_Size&areaMode=stacked&hideLegend=true&bgcolor=333333&uniq="+Math.random())):($("#graphs").append($('<img id="graph1" src="http://'+t+".hootsuitemedia.com/render?width=300&from=-1hours&until=now&height=200&target=stats.dashboard.zmq.service.*"+i+'*.dispatcher.messagesIn&hideLegend=true&title=Dispatcher_Messages_In&bgcolor=333333"/>')),$("#graphs").append($('<img id="graph2" src="http://'+t+".hootsuitemedia.com/render?width=300&from=-1hours&until=now&height=200&target=scale(stats.dashboard.zmq.service.*"+i+'*.dispatcher.availableWorkers%2C1.85)&title=Available_Workers&areaMode=stacked&hideLegend=true&bgcolor=333333"/>')),$("#graphs").append($('<img id="graph3" src="http://'+t+".hootsuitemedia.com/render?width=300&from=-1hours&until=now&height=200&target=alias(scale(stats.dashboard.zmq.service.*"+i+"*.dispatcher.messageQueueSize%2C1.85)%2C%20'Queue%20Size')&target=alias(secondYAxis(stats.dashboard.zmq.service.*"+i+"*.dispatcher.expiredMessages.*)%2C%20'Expired%20Messages')&title=Message_Queue_Size&areaMode=stacked&hideLegend=true&bgcolor=333333\"/>")))}function adminPollService(e){ajaxCall({url:"/ajax/admin/get-service-data?type="+e,success:function(e){if(e.error)alert(e.error);else{var t=e.serviceData.stats.name,i=t+e.serviceData.stats.pid;if(services.get(i))services.get(i).set(e);else{var n=new Service;n.set(e),n.id=i;var r=new ServiceContainerView({model:n,id:"server"+t+e.serviceData.stats.pid}),a=r.render().el,s=new ServiceDispatcherInfoView({model:n,el:$(a).find("._dispatcherInfo")}),o=new ServiceWorkerInfoView({model:n,el:$(a).find("._workerInfo")});s.render(),o.render(),$("#serverInfo").append(a),services.push(n)}}}},"q1")}function adminAddReview(){if($("#invalid-rating").empty(),$("#invalid-app-id").empty(),$("#invalid-member-id").empty(),0==$("#app-review-rea input[name=rating]:checked").length)$("#invalid-rating").html("You must select a rating.");else{var e=$("#app-review-rea input[name=appId]").val(),t=$("#app-review-rea input[name=memberId]").val();ajaxCall({url:"/ajax/admin/save-member-app-review?appId="+e+"&memberId="+encodeURIComponent(t),success:function(e){if(e.appId===void 0)$("#invalid-app-id").html("You must enter a valid app ID.");else if(e.memberId===void 0)$("#invalid-member-id").html("You must enter a valid member ID.");else{$("#app-review-rea input[name=memberId]").val(e.memberId);var t=!0;e.reviewId!==void 0&&($("#app-review-rea input[name=reviewId]").val(e.reviewId),t=confirm("A review from this member already exists. Are you sure you want to overwrite it?")),t&&$("#app-review-rea").submit()}}},"q1")}return!1}function adminPublishReview(e,t){ajaxCall({url:"/ajax/admin/publish-member-app-review?reviewId="+t,success:function(t){t.isPublished?($(".app-review-listing tr:eq("+e+") .no-flag").hide(),$(".app-review-listing tr:eq("+e+") .flag").show(),$(".app-review-listing tr:eq("+e+") .btn-flag").html("Unpublish")):($(".app-review-listing tr:eq("+e+") .flag").hide(),$(".app-review-listing tr:eq("+e+") .no-flag").show(),$(".app-review-listing tr:eq("+e+") .btn-flag").html("Publish"))}},"q1")}function adminEmailReview(e){ajaxCall({url:"/ajax/admin/get-member-app-review?reviewId="+e,success:function(e){var t=e.review.appId,i=e.review.memberId,n=e.review.username,r=e.review.rating,a=e.review.title,s=e.review.review,o="App ID - "+t+"\nMember ID - "+i+"\nUsername - "+n+"\nRating - "+r+"\nTitle - "+a+"\nReview - "+s;window.open("mailto:appsupport@hootsuite.com?subject=App Review Support Request&body="+encodeURIComponent(o))}},"q1")}function adminSetMemberAriaStatus(e){var t=$("#billingStatusEditor #memberAriaStatus").val();ajaxCall({url:"/ajax/admin/change-member-aria-status?memberId="+e+"&status="+t,success:function(e){e.error?alert(e.error):$("span._getUserInfoButton").click()}},"q1")}function updateMemberPreferenceWithTimer(e,t,i,n){i||(i=1e3*hs.c.delayPrefsMember),void 0!=hs.timers.updateMemberPreferenceTimer&&(clearTimeout(hs.timers.updateMemberPreferenceTimer),delete hs.timers.updateMemberPreferenceTimer),hs.timers.updateMemberPreferenceTimer=setTimeout(function(){updateMemberPreference(e,t,n)},i)}function updateMemberPreference(e,t,i){ajaxCall({url:"/ajax/member/update-preference",data:"type="+encodeURIComponent(e)+"&value="+encodeURIComponent(t),complete:function(){$.isFunction(i)&&i()}},"q1")}function showVideoPopup(e,t,i,n){var r={modal:!0,closeOnEscape:!0,draggable:!0,content:"<div class='large-loading'><img src='"+hs.util.rootifyImage("/themes/"+hs.prefs.theme.toLowerCase()+"/loader.gif")+"' /></div>",title:n,width:t+12,height:i+46,position:["center","center"]},a=$.dialogFactory.create("hsVideoPopup",r);ajaxCall({type:"GET",url:"/ajax/index/hs-video?hash="+e+"&w="+t+"&h="+i,success:function(e){a.html(e.output)}},"qm")}function showImagePopup(e,t,i){var n=($(window).width()-t)/2,r=($(window).height()-(i+30))/2,a={modal:!1,closeOnEscape:!0,resizable:!1,draggable:!0,content:"<img src='"+hs.util.proxify(e)+"' width='"+t+"' height='"+i+"' />",width:t+13,height:i+47,position:[n,r]};$.dialogFactory.create("aboutImagePopup",a)}function hideHoverTextHighlight(){$("#featureInfoPopup").empty().hide()}var providers_large={google:{name:"Google",url:"https://www.google.com/accounts/o8/id"},yahoo:{name:"Yahoo",url:"http://me.yahoo.com/"},myopenid:{name:"MyOpenId",url:"http://myopenid.com/"},mixi:{name:"Mixi",url:"http://mixi.jp"},openid:{name:"OpenID",label:"Enter your OpenID.",url:null}},providers_small={},providers=$.extend({},providers_large,providers_small),openid={cookie_expires:180,cookie_name:"openid_provider",cookie_path:"/",input_id:null,provider_url:null,init:function(e){var t=$("#openid_btns");if(this.input_id=e,$("#openid_choice").show(),$("#openid_input_area").empty(),$.each(providers_large,function(e){t.append(openid.getBoxHTML(providers_large[e],"large",".gif"))}),providers_small){t.append("<br/>");for(id in providers_small)t.append(this.getBoxHTML(providers_small[id],"small",".ico"))}$("#openid_form").submit(this.submit);var i=this.readCookie();i&&this.signin(i,!0)},getBoxHTML:function(e,t){if(!e||!e.name||!e.name.toLowerCase)return null;var i=e.name.toLowerCase();return'<a title="'+e.name+'" href="javascript: openid.signin(\''+i+"');\""+'class="'+i+" openid_"+t+'_btn rb-a-3"></a>'},signin:function(e,t){var i=providers[e];i&&(this.highlight(e),this.setCookie(e),i.label?(this.useInputBox(i),this.provider_url=i.url):(this.setOpenIdUrl(i.url),this.provider_url=i.url,t||$("#openid_form").submit()))},submit:function(){var e=openid.provider_url;return e&&(e=e.replace("{username}",$("#openid_username").val()),openid.setOpenIdUrl(e)),!0},setOpenIdUrl:function(e){var t=$("#"+this.input_id);t.length>0?t.val(e):$("#openid_form").append('<input type="hidden" id="'+this.input_id+'" name="'+this.input_id+'" value="'+e+'"/>')},highlight:function(e){var t=$("#openid_highlight");t&&t.replaceWith($("#openid_highlight a")[0]),"false"!=$("#openid_form").attr("showhighlight")&&$("."+e).wrap('<div id="openid_highlight"></div>')},setCookie:function(e){var t=new Date;t.setTime(t.getTime()+1e3*60*60*24*this.cookie_expires);var i="; expires="+t.toGMTString();document.cookie=this.cookie_name+"="+e+i+"; path="+this.cookie_path},readCookie:function(){for(var e=this.cookie_name+"=",t=document.cookie.split(";"),i=0;t.length>i;i++){for(var n=t[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},useInputBox:function(e){var t=$("#openid_input_area"),i="",n="openid_username",r="",a=e.label;a&&(i="<p>"+a+"</p>"),"OpenID"==e.name&&(n=this.input_id,r="http://"),i+='<input id="'+n+'" class="action" type="text" name="'+n+'" value="'+r+'" />'+'<a href="#" onclick="$(\'#openid_form\').submit(); return false;" id="openid_submit" class="btn-cmt">Sign In</a>';var s=$("#"+this.input_id);s&&s.remove(),t.empty(),t.append(i),$("#"+n).focus()}},hsEjs=hsEjs?hsEjs:{};hsEjs.getEjs=function(e){var t=null;return t="object"==typeof hs.ejsPackage&&hs.ejsPackage.hasOwnProperty(e)?new EJS({text:hs.ejsPackage[e]}):new EJS({url:hs.c.jsTemplateRootUrl+e+".ejs"})},hsEjs.loadPackage=function(){jsonpCall({url:hs.util.rootifyJs("/ejs-package.js"),cache:!0})},hsEjs.ejsPackageCallback=function(e){hs.ejsPackage=e},hsEjs.cleanPage=function(e,t){return hs.str.clean(e,t)},function(){var rsplit=function(e,t){for(var i,n,r,a=t.exec(e),s=[];null!=a;)i=a.index,n=t.lastIndex,0!=i&&(r=e.substring(0,i),s.push(e.substring(0,i)),e=e.slice(i)),s.push(a[0]),e=e.slice(a[0].length),a=t.exec(e);return""==!e&&s.push(e),s},chop=function(e){return e.substr(0,e.length-1)},extend=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};EJS=function(e){if(e="string"==typeof e?{view:e}:e,this.set_options(e),e.precompiled)return this.template={},this.template.process=e.precompiled,EJS.update(this.name,this),void 0;if(e.element){if("string"==typeof e.element){var t=e.element;if(e.element=document.getElementById(e.element),null==e.element)throw t+"does not exist!"}this.text=e.element.value?e.element.value:e.element.innerHTML,this.name=e.element.id,this.type="["}else if(e.url){e.url=EJS.endExt(e.url,this.extMatch),this.name=this.name?this.name:e.url;var i=e.url,n=EJS.get(this.name,this.cache);if(n)return n;if(n==EJS.INVALID_PATH)return null;try{this.text=EJS.request(i+(this.cache?"":"?"+Math.random()))}catch(r){}if(null==this.text)throw{type:"EJS",message:"There is no template at "+i}}var n=new EJS.Compiler(this.text,this.type);n.compile(e,this.name),EJS.update(this.name,this),this.template=n},EJS.prototype={render:function(e,t){e=e||{},this._extra_helpers=t;var i=new EJS.Helpers(e,t||{});return this.template.process.call(e,e,i)},update:function(element,options){return"string"==typeof element&&(element=document.getElementById(element)),null==options?(_template=this,function(e){EJS.prototype.update.call(_template,element,e)}):("string"==typeof options?(params={},params.url=options,_template=this,params.onComplete=function(request){var object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)},EJS.ajax_request(params)):element.innerHTML=this.render(options),void 0)
},out:function(){return this.template.out},set_options:function(e){this.type=e.type||EJS.type,this.cache=null!=e.cache?e.cache:EJS.cache,this.text=e.text||null,this.name=e.name||null,this.ext=e.ext||EJS.ext,this.extMatch=RegExp(this.ext.replace(/\./,"."))}},EJS.endExt=function(e,t){return e?(t.lastIndex=0,e+(t.test(e)?"":this.ext)):null},EJS.Scanner=function(e,t,i){extend(this,{left_delimiter:t+"%",right_delimiter:"%"+i,double_left:t+"%%",double_right:"%%"+i,left_equal:t+"%=",left_comment:t+"%#"}),this.SplitRegexp="["==t?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)"),this.source=e,this.stag=null,this.lines=0},EJS.Scanner.to_text=function(e){return null==e||void 0===e?"":e instanceof Date?e.toDateString():e.toString?""+e:""},EJS.Scanner.prototype={scan:function(e){if(scanline=this.scanline,regex=this.SplitRegexp,""==!this.source)for(var t=rsplit(this.source,/\n/),i=0;t.length>i;i++){var n=t[i];this.scanline(n,regex,e)}},scanline:function(e,t,i){this.lines++;for(var n=rsplit(e,t),r=0;n.length>r;r++){var a=n[r];if(null!=a)try{i(a,this)}catch(s){throw{type:"EJS.Scanner",line:this.lines}}}}},EJS.Buffer=function(e,t){this.line=[],this.script="",this.pre_cmd=e,this.post_cmd=t;for(var i=0;this.pre_cmd.length>i;i++)this.push(e[i])},EJS.Buffer.prototype={push:function(e){this.line.push(e)},cr:function(){this.script=this.script+this.line.join("; "),this.line=[],this.script=this.script+"\n"},close:function(){if(this.line.length>0){for(var e=0;this.post_cmd.length>e;e++)this.push(pre_cmd[e]);this.script=this.script+this.line.join("; "),line=null}}},EJS.Compiler=function(e,t){this.pre_cmd=["var ___ViewO = [];"],this.post_cmd=[],this.source=" ",null!=e&&("string"==typeof e?(e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),this.source=e):e.innerHTML&&(this.source=e.innerHTML),"string"!=typeof this.source&&(this.source="")),t=t||"<";var i=">";switch(t){case"[":i="]";break;case"<":break;default:throw t+" is not a supported deliminator"}this.scanner=new EJS.Scanner(this.source,t,i),this.out=""},EJS.Compiler.prototype={compile:function(options,name){options=options||{},this.out="";var put_cmd="___ViewO.push(",insert_cmd=put_cmd,buff=new EJS.Buffer(this.pre_cmd,this.post_cmd),content="",clean=function(e){return e=e.replace(/\\/g,"\\\\"),e=e.replace(/\n/g,"\\n"),e=e.replace(/"/g,'\\"')};this.scanner.scan(function(e,t){if(null==t.stag)switch(e){case"\n":content+="\n",buff.push(put_cmd+'"'+clean(content)+'");'),buff.cr(),content="";break;case t.left_delimiter:case t.left_equal:case t.left_comment:t.stag=e,content.length>0&&buff.push(put_cmd+'"'+clean(content)+'")'),content="";break;case t.double_left:content+=t.left_delimiter;break;default:content+=e}else switch(e){case t.right_delimiter:switch(t.stag){case t.left_delimiter:"\n"==content[content.length-1]?(content=chop(content),buff.push(content),buff.cr()):buff.push(content);break;case t.left_equal:buff.push(insert_cmd+"(EJS.Scanner.to_text("+content+")))")}t.stag=null,content="";break;case t.double_right:content+=t.right_delimiter;break;default:content+=e}}),content.length>0&&buff.push(put_cmd+'"'+clean(content)+'")'),buff.close(),this.out=buff.script+";";var to_be_evaled="/*"+name+"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(to_be_evaled)}catch(e){if("undefined"==typeof JSLINT)throw e;JSLINT(this.out);for(var i=0;JSLINT.errors.length>i;i++){var error=JSLINT.errors[i];if("Unnecessary semicolon."!=error.reason){error.line++;var ex=Error();throw ex.lineNumber=error.line,ex.message=error.reason,options.view&&(ex.fileName=options.view),ex}}}}},EJS.config=function(e){EJS.cache=null!=e.cache?e.cache:EJS.cache,EJS.type=null!=e.type?e.type:EJS.type,EJS.ext=null!=e.ext?e.ext:EJS.ext;var t=EJS.templates_directory||{};EJS.templates_directory=t,EJS.get=function(e,i){return 0==i?null:t[e]?t[e]:null},EJS.update=function(e,i){null!=e&&(t[e]=i)},EJS.INVALID_PATH=-1},EJS.config({cache:!0,type:"<",ext:".ejs"}),EJS.Helpers=function(e,t){this._data=e,this._extras=t,extend(this,t)},EJS.Helpers.prototype={view:function(e,t,i){return i||(i=this._extras),t||(t=this._data),new EJS(e).render(t,i)},to_text:function(e,t){return null==e||void 0===e?t||"":e instanceof Date?e.toDateString():e.toString?(""+e).replace(/\n/g,"<br />").replace(/''/g,"'"):""}},EJS.newRequest=function(){for(var e=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=0;e.length>t;t++)try{var i=e[t]();if(null!=i)return i}catch(n){continue}},EJS.request=function(e){var t=new EJS.newRequest;t.open("GET",e,!1);try{t.send(null)}catch(i){return null}return 404==t.status||2==t.status||0==t.status&&""==t.responseText?null:t.responseText},EJS.ajax_request=function(e){e.method=e.method?e.method:"GET";var t=new EJS.newRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.onComplete(t):e.onComplete(t))},t.open(e.method,e.url),t.send(null)}}(),EJS.Helpers.prototype.date_tag=function(e,t){t instanceof Date||(t=new Date);for(var i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=[],r=[],a=[],s=t.getFullYear(),o=t.getMonth(),l=t.getDate(),c=s-15;s+15>c;c++)n.push({value:c,text:c});for(var u=0;12>u;u++)r.push({value:u,text:i[u]});for(var h=0;31>h;h++)a.push({value:h+1,text:h+1});var d=this.select_tag(e+"[year]",s,n,{id:e+"[year]"}),p=this.select_tag(e+"[month]",o,r,{id:e+"[month]"}),f=this.select_tag(e+"[day]",l,a,{id:e+"[day]"});return d+p+f},EJS.Helpers.prototype.form_tag=function(e,t){return t=t||{},t.action=e,1==t.multipart&&(t.method="post",t.enctype="multipart/form-data"),this.start_tag_for("form",t)},EJS.Helpers.prototype.form_tag_end=function(){return this.tag_end("form")},EJS.Helpers.prototype.hidden_field_tag=function(e,t,i){return this.input_field_tag(e,t,"hidden",i)},EJS.Helpers.prototype.input_field_tag=function(e,t,i,n){return n=n||{},n.id=n.id||e,n.value=t||"",n.type=i||"text",n.name=e,this.single_tag_for("input",n)},EJS.Helpers.prototype.is_current_page=function(e){return window.location.href==e||window.location.pathname==e?!0:!1},EJS.Helpers.prototype.link_to=function(e,t,i){if(!e)var e="null";if(!i)var i={};return i.confirm&&(i.onclick=' var ret_confirm = confirm("'+i.confirm+'"); if(!ret_confirm){ return false;} ',i.confirm=null),i.href=t,this.start_tag_for("a",i)+e+this.tag_end("a")},EJS.Helpers.prototype.submit_link_to=function(e,t,i){if(!e)var e="null";if(!i)var i={};return i.onclick=i.onclick||"",i.confirm&&(i.onclick=' var ret_confirm = confirm("'+i.confirm+'"); if(!ret_confirm){ return false;} ',i.confirm=null),i.value=e,i.type="submit",i.onclick=i.onclick+(t?this.url_for(t):"")+"return false;",this.start_tag_for("input",i)},EJS.Helpers.prototype.link_to_if=function(e,t,i,n,r,a){return this.link_to_unless(0==e,t,i,n,r,a)},EJS.Helpers.prototype.link_to_unless=function(e,t,i,n,r){return n=n||{},e?r&&"function"==typeof r?r(t,i,n,r):t:this.link_to(t,i,n)},EJS.Helpers.prototype.link_to_unless_current=function(e,t,i,n){return i=i||{},this.link_to_unless(this.is_current_page(t),e,t,i,n)},EJS.Helpers.prototype.password_field_tag=function(e,t,i){return this.input_field_tag(e,t,"password",i)},EJS.Helpers.prototype.select_tag=function(e,t,i,n){n=n||{},n.id=n.id||e,n.value=t,n.name=e;var r="";r+=this.start_tag_for("select",n);for(var a=0;i.length>a;a++){var s=i[a],o={value:s.value};s.value==t&&(o.selected="selected"),r+=this.start_tag_for("option",o)+s.text+this.tag_end("option")}return r+=this.tag_end("select")},EJS.Helpers.prototype.single_tag_for=function(e,t){return this.tag(e,t,"/>")},EJS.Helpers.prototype.start_tag_for=function(e,t){return this.tag(e,t)},EJS.Helpers.prototype.submit_tag=function(e,t){return t=t||{},t.type=t.type||"submit",t.value=e||"Submit",this.single_tag_for("input",t)},EJS.Helpers.prototype.tag=function(e,t,i){if(!i)var i=">";var n=" ";for(var r in t){if(null!=t[r])var a=""+t[r];else var a="";"Class"==r&&(r="class"),n+=-1!=a.indexOf("'")?r+'="'+a+'" ':r+"='"+a+"' "}return"<"+e+n+i},EJS.Helpers.prototype.tag_end=function(e){return"</"+e+">"},EJS.Helpers.prototype.text_area_tag=function(e,t,i){return i=i||{},i.id=i.id||e,i.name=i.name||e,t=t||"",i.size&&(i.cols=i.size.split("x")[0],i.rows=i.size.split("x")[1],delete i.size),i.cols=i.cols||50,i.rows=i.rows||4,this.start_tag_for("textarea",i)+t+this.tag_end("textarea")},EJS.Helpers.prototype.text_tag=EJS.Helpers.prototype.text_area_tag,EJS.Helpers.prototype.text_field_tag=function(e,t,i){return this.input_field_tag(e,t,"text",i)},EJS.Helpers.prototype.url_for=function(e){return'window.location="'+e+'";'},EJS.Helpers.prototype.img_tag=function(e,t,i){return i=i||{},i.src=e,i.alt=t,this.single_tag_for("img",i)},function(){var e,t=this,i=t.Backbone,n=Array.prototype.slice,r=Array.prototype.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="0.9.2";var a=t._;a||"undefined"==typeof require||(a=require("underscore"));var s=t.jQuery||t.Zepto||t.ender;e.setDomLibrary=function(e){s=e},e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=/\s+/,l=e.Events={on:function(e,t,i){var n,r,a,s,l;if(!t)return this;for(e=e.split(o),n=this._callbacks||(this._callbacks={});r=e.shift();)l=n[r],a=l?l.tail:{},a.next=s={},a.context=i,a.callback=t,n[r]={tail:s,next:l?l.next:a};return this},off:function(e,t,i){var n,r,s,l,c,u;if(r=this._callbacks){if(!(e||t||i))return delete this._callbacks,this;for(e=e?e.split(o):a.keys(r);n=e.shift();)if(s=r[n],delete r[n],s&&(t||i))for(l=s.tail;(s=s.next)!==l;)c=s.callback,u=s.context,(t&&c!==t||i&&u!==i)&&this.on(n,c,u);return this}},trigger:function(e){var t,i,r,a,s,l,c;if(!(r=this._callbacks))return this;for(l=r.all,e=e.split(o),c=n.call(arguments,1);t=e.shift();){if(i=r[t])for(a=i.tail;(i=i.next)!==a;)i.callback.apply(i.context||this,c);if(i=l)for(a=i.tail,s=[t].concat(c);(i=i.next)!==a;)i.callback.apply(i.context||this,s)}return this}};l.bind=l.on,l.unbind=l.off;var c=e.Model=function(e,t){var i;e||(e={}),t&&t.parse&&(e=this.parse(e)),(i=T(this,"defaults"))&&(e=a.extend({},i,e)),t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=a.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=a.clone(this.attributes),this.initialize.apply(this,arguments)};a.extend(c.prototype,l,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var i=this.get(e);return this._escapedAttributes[e]=a.escape(null==i?"":""+i)},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,r,s;if(a.isObject(e)||null==e?(n=e,i=t):(n={},n[e]=t),i||(i={}),!n)return this;if(n instanceof c&&(n=n.attributes),i.unset)for(r in n)n[r]=void 0;if(!this._validate(n,i))return!1;this.idAttribute in n&&(this.id=n[this.idAttribute]);var o=i.changes={},l=this.attributes,u=this._escapedAttributes,h=this._previousAttributes||{};for(r in n)s=n[r],(!a.isEqual(l[r],s)||i.unset&&a.has(l,r))&&(delete u[r],(i.silent?this._silent:o)[r]=!0),i.unset?delete l[r]:l[r]=s,a.isEqual(h[r],s)&&a.has(l,r)==a.has(h,r)?(delete this.changed[r],delete this._pending[r]):(this.changed[r]=s,i.silent||(this._pending[r]=!0));return i.silent||this.change(i),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(a.clone(this.attributes),e)},fetch:function(t){t=t?a.clone(t):{};var i=this,n=t.success;return t.success=function(e,r,a){return i.set(i.parse(e,a),t)?(n&&n(i,e),void 0):!1},t.error=e.wrapError(t.error,i,t),(this.sync||e.sync).call(this,"read",this,t)},save:function(t,i,n){var r,s;if(a.isObject(t)||null==t?(r=t,n=i):(r={},r[t]=i),n=n?a.clone(n):{},n.wait){if(!this._validate(r,n))return!1;s=a.clone(this.attributes)}var o=a.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?o:n))return!1;var l=this,c=n.success;n.success=function(e,t,i){var s=l.parse(e,i);return n.wait&&(delete n.wait,s=a.extend(r||{},s)),l.set(s,n)?(c?c(l,e):l.trigger("sync",l,e,n),void 0):!1},n.error=e.wrapError(n.error,l,n);var u=this.isNew()?"create":"update",h=(this.sync||e.sync).call(this,u,this,n);return n.wait&&this.set(s,o),h},destroy:function(t){t=t?a.clone(t):{};var i=this,n=t.success,r=function(){i.trigger("destroy",i,i.collection,t)};if(this.isNew())return r(),!1;t.success=function(e){t.wait&&r(),n?n(i,e):i.trigger("sync",i,e,t)},t.error=e.wrapError(t.error,i,t);var s=(this.sync||e.sync).call(this,"delete",this,t);return t.wait||r(),s},url:function(){var e=T(this,"urlRoot")||T(this.collection,"url")||E();return this.isNew()?e:e+("/"==e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var i in this._silent)this._pending[i]=!0;var n=a.extend({},e.changes,this._silent);this._silent={};for(var i in n)this.trigger("change:"+i,this,this.get(i),e);if(t)return this;for(;!a.isEmpty(this._pending);){this._pending={},this.trigger("change",this,e);for(var i in this.changed)this._pending[i]||this._silent[i]||delete this.changed[i];this._previousAttributes=a.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?a.has(this.changed,e):!a.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,i=!1,n=this._previousAttributes;for(var r in e)a.isEqual(n[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=a.extend({},this.attributes,e);var i=this.validate(e,t);return i?(t&&t.error?t.error(this,i,t):this.trigger("error",this,i,t),!1):!0}});var u=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};a.extend(u.prototype,l,{model:c,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var i,n,s,o,l,c,u={},h={},d=[];for(t||(t={}),e=a.isArray(e)?e.slice():[e],i=0,s=e.length;s>i;i++){if(!(o=e[i]=this._prepareModel(e[i],t)))throw Error("Can't add an invalid model to a collection");l=o.cid,c=o.id,u[l]||this._byCid[l]||null!=c&&(h[c]||this._byId[c])?d.push(i):u[l]=h[c]=o}for(i=d.length;i--;)e.splice(d[i],1);for(i=0,s=e.length;s>i;i++)(o=e[i]).on("all",this._onModelEvent,this),this._byCid[o.cid]=o,null!=o.id&&(this._byId[o.id]=o);if(this.length+=s,n=null!=t.at?t.at:this.models.length,r.apply(this.models,[n,0].concat(e)),this.comparator&&this.sort({silent:!0}),t.silent)return this;for(i=0,s=this.models.length;s>i;i++)u[(o=this.models[i]).cid]&&(t.index=i,o.trigger("add",o,this,t));return this},remove:function(e,t){var i,n,r,s;for(t||(t={}),e=a.isArray(e)?e.slice():[e],i=0,n=e.length;n>i;i++)s=this.getByCid(e[i])||this.get(e[i]),s&&(delete this._byId[s.id],delete this._byCid[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,t.silent||(t.index=r,s.trigger("remove",s,this,t)),this._removeReference(s));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return a.isEmpty(e)?[]:this.filter(function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},sort:function(e){if(e||(e={}),!this.comparator)throw Error("Cannot sort a set without a comparator");var t=a.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return a.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var i=this,n=t.success;return t.success=function(e,r,a){i[t.add?"add":"reset"](i.parse(e,a),t),n&&n(i,e)},t.error=e.wrapError(t.error,i,t),(this.sync||e.sync).call(this,"read",this,t)},create:function(e,t){var i=this;if(t=t?a.clone(t):{},e=this._prepareModel(e,t),!e)return!1;t.wait||i.add(e,t);var n=t.success;return t.success=function(r,a){t.wait&&i.add(r,t),n?n(r,a):r.trigger("sync",e,a,t)},e.save(null,t),e},parse:function(e){return e},chain:function(){return a(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(t||(t={}),e instanceof c)e.collection||(e.collection=this);else{var i=e;t.collection=this,e=new this.model(i,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!=e&&"remove"!=e||i==this)&&("destroy"==e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments))}});var h=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];a.each(h,function(e){u.prototype[e]=function(){return a[e].apply(a,[this.models].concat(a.toArray(arguments)))}});var d=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,f=/\*\w+/g,g=/[-[\]{}()+?.,\\^$|#\s]/g;a.extend(d.prototype,l,{initialize:function(){},route:function(t,i,n){return e.history||(e.history=new m),a.isRegExp(t)||(t=this._routeToRegExp(t)),n||(n=this[i]),e.history.route(t,a.bind(function(r){var a=this._extractParameters(t,r);n&&n.apply(this,a),this.trigger.apply(this,["route:"+i].concat(a)),e.history.trigger("route",this,i,a)},this)),this},navigate:function(t,i){e.history.navigate(t,i)},_bindRoutes:function(){if(this.routes){var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var i=0,n=e.length;n>i;i++)this.route(e[i][0],e[i][1],this[e[i][1]])}},_routeToRegExp:function(e){return e=e.replace(g,"\\$&").replace(p,"([^/]+)").replace(f,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl")},v=/^[#\/]/,b=/msie [\w.]+/;m.started=!1,a.extend(m.prototype,l,{interval:50,getHash:function(e){var t=e?e.location:window.location,i=t.href.match(/#(.*)$/);return i?i[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||t){e=window.location.pathname;var i=window.location.search;i&&(e+=i)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(v,"")},start:function(e){if(m.started)throw Error("Backbone.history has already been started");m.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),i=document.documentMode,n=b.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);n&&(this.iframe=s('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?s(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?s(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var r=window.location,o=r.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(v,""),window.history.replaceState({},document.title,r.protocol+"//"+r.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){s(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e==this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!m.started)return!1;t&&t!==!0||(t={trigger:t});var i=(e||"").replace(v,"");this.fragment!=i&&(this._hasPushState?(0!=i.indexOf(this.options.root)&&(i=this.options.root+i),this.fragment=i,window.history[t.replace?"replaceState":"pushState"]({},document.title,i)):this._wantsHashChange?(this.fragment=i,this._updateHash(window.location,i,t.replace),this.iframe&&i!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,i,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e))},_updateHash:function(e,t,i){i?e.replace((""+e).replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var y=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName"];a.extend(y.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,i){var n=document.createElement(e);return t&&s(n).attr(t),i&&s(n).html(i),n},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof s?e:s(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=T(this,"events"))){this.undelegateEvents();for(var t in e){var i=e[t];if(a.isFunction(i)||(i=this[e[t]]),!i)throw Error('Method "'+e[t]+'" does not exist');var n=t.match(_),r=n[1],s=n[2];i=a.bind(i,this),r+=".delegateEvents"+this.cid,""===s?this.$el.bind(r,i):this.$el.delegate(s,r,i)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=a.extend({},this.options,e));for(var t=0,i=w.length;i>t;t++){var n=w[t];e[n]&&(this[n]=e[n])}this.options=e},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var e=T(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}}});var x=function(e,t){var i=S(this,e,t);return i.extend=this.extend,i};c.extend=u.extend=d.extend=y.extend=x;var C={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(t,i,n){var r=C[t];n||(n={});var o={type:r,dataType:"json"};return n.url||(o.url=T(i,"url")||E()),n.data||!i||"create"!=t&&"update"!=t||(o.contentType="application/json",o.data=JSON.stringify(i.toJSON())),e.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),e.emulateHTTP&&("PUT"===r||"DELETE"===r)&&(e.emulateJSON&&(o.data._method=r),o.type="POST",o.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),"GET"===o.type||e.emulateJSON||(o.processData=!1),s.ajax(a.extend(o,n))},e.wrapError=function(e,t,i){return function(n,r){r=n===t?r:n,e?e(t,r,i):t.trigger("error",t,r,i)}};var k=function(){},S=function(e,t,i){var n;return n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},a.extend(n,e),k.prototype=e.prototype,n.prototype=new k,t&&a.extend(n.prototype,t),i&&a.extend(n,i),n.prototype.constructor=n,n.__super__=e.prototype,n},T=function(e,t){return e&&e[t]?a.isFunction(e[t])?e[t]():e[t]:null},E=function(){throw Error('A "url" property or function must be specified')}}.call(this);var plans=plans?plans:{};plans.initFeatureInfoPopup=function(){function e(e){var t=/_feature_([^\s]+)/.exec(e);return t&&t.length>1?t[1]:null}function t(e,t){if(e){var i=$("#featureInfoPopup").length?$("#featureInfoPopup"):$('<div id="featureInfoPopup" style="display: none;"></div>'),n="",r=!1;switch(e){case"conversations":n+="<h3>"+translation._("What is HootSuite Conversations?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("HootSuite Conversations is a new internal conversation tool that lets you easily collaborate with team members, colleagues and users in real time.");break;case"profiles":n+="<h3>"+translation._("What are Social Profiles?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Total number of unique number of social profiles you can connect to. We're partnered with top social profiles including Facebook, Linkedin, Twitter and Google+ Pages.<br/> <div style='font-size: 10px;padding-top:5px;'>Pro and Enterprise users can share access to their Social Profiles with team members.</div>");break;case"rss":n+="<h3>"+translation._("What are RSS/Atom Feeds?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Number of RSS connections available to auto-update your social profiles from your blog or news feed.");break;case"team_members":n+="<h3>"+translation._("What are Team Members?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Enterprise is built to scale from existing teams to the entire organization.");break;case"ent_social_profiles":n+="<h3>"+translation._("What are Social profiles?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Total number of unique number of social profiles you can connect to. We're partnered with top social profiles including Facebook, Linkedin, Twitter and Google+ Pages.<br/> <div style='font-size: 10px;padding-top:5px;'>Pro and Enterprise users can share access to their Social Profiles with team members.</div>");break;case"ent_security":n+="<h3>"+translation._("What is Advanced Security?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("The most advanced security features to prevent mistakes and protect valuable corporate profiles.");break;case"compliance":n+="<h3>"+translation._("What is Compliance Integrations?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Compliant archiving for FSI and regulated industries.");break;case"geotargeting":n+="<h3>"+translation._("What is Geo-Targeting?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Language and geographic segmentation options for Facebook Pages.");break;case"professional_services":n+="<h3>"+translation._("What are Professional Services?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("For customized training and setup, simulation and more.");break;case"hsu":n+="<h3>"+translation._("What is HootSuite University?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("24/7 self-directed social media education, HootSuite training and certification program.");break;case"tier1":n+="<h3>"+translation._("What is Tier 1 Support?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Dedicated account management, live training sessions and priority support.");break;case"archive_messages_pro":n+="<h3>"+translation._("What are HootSuite Archives?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Store up to 100,000 keyword related tweets free with the Enterprise plan. More are available for purchase upon request from your Account Manager.");break;case"pro_points":case"num_reports":n+="<h3>"+translation._("What are Reports?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Custom reports with advanced tools like network stats, Facebook Insights and Google Analytics to help you measure your social media efforts.");break;case"team":n+="<h3>"+translation._("What are Users?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Team Members who can help manage your social accounts. The Pro plan includes yourself plus one additional team member. Up to 9 additional team members are available (team of 10).");break;case"ga":n+="<h3>"+translation._("What are Google Analytics?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Data from Google Analytics is displayed directly in HootSuite including parameter filtering and social statistics overlay.");break;case"fb_insights":n+="<h3>"+translation._("What are Facebook Insights?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Statistical tracking tool to display information about who engages with your Facebook page, including 'likes', page activity, post feedback and other analytics.");break;case"apps":n+="<h3>"+translation._("What are Apps?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Apps are additional social networks and content management tools that you add to the dashboard from the App Directory. Example apps are: Instagram, YouTube, Tumblr and Evernote.");break;case"quick_reports":n+="<h3>"+translation._("What are Reports?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Custom reports with advanced tools like network stats, Facebook Insights and Google Analytics to help you measure your social media efforts.");break;case"message_scheduling":n+="<h3>"+translation._("What is Message Scheduling?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Draft and schedule messages to send when your audience is most likely to be engaged.");break;case"ad_free":n+="<h3>"+translation._("What does Opt out of Ads mean?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("You can opt out of seeing promoted tweets in your search or social streams.");break;case"ads":n+="<h3>"+translation._("What does Opt out of Ads mean?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._('Clearly labeled "Promoted Tweets" from Twitter will appear in your search stream.');break;case"archive_messages":n+="<h3>"+translation._("What are HootSuite Archives?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Store up to 100 tweets free with your plan, and purchase up to 100,000 to archive and download all keyword related Twitter messages.");break;case"support":n+="<h3>"+translation._("What is Enhanced Support?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Help tickets are prioritized and answered within a time-frame outlined in a service level agreement.");break;case"hootcare":n+="<h3>"+translation._("What is HootCare?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("HootCare provides you with professional, 24/5 prioritized support within 4 hours of submitting a help ticket. Available in English, Spanish, Portuguese, and French.");
break;case"brand":n+="<h3>"+translation._("What are Vanity URLs?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Custom branded web address shortening from Ow.ly Pro including statistic reports (additional fees required).");break;case"insights":n+="<h3>"+translation._("What are Social Insights?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Intelligence gathering tool to find public information about people on your social profiles.");break;case"affiliate":n+="<h3>"+translation._("What is the Affiliate Program?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("The Affiliate Program is a way to earn commissions for new Pro, Enterprise and University customers that sign up as a result of your referrals.");break;case"message_scheduling_pro":n+="<h3>"+translation._("What is Advanced Message Scheduling?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("In addition to drafting and scheduling messages to optimize delivery and engagement, you can publish and bulk schedule your messages.");break;case"learn":n+="<h3>"+translation._("What is included in VIP Set-up?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Personalized, on-line set-up assistance with VIP account executive.");break;case"cert":n+="<h3>"+translation._("What is the HootSuite Certification Program?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Enrollment for 10 team members in an on-going training program -- includes video modules, quizzes and professional development webinars.");break;case"url":n+="<h3>"+translation._("What are URL Parameters?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("Custom data variables (i.e. source, medium, client) which are added to a URL to help measure campaigns in analytics tools.");break;case"influence":n+="<h3>"+translation._("What are Influence Scores?")+"</h3>",n+='<div class="arrowLeft"></div>'+translation._("View and filter by algorithmically-determined scores which measure the impact and reach of a social profile.");break;case"pro_analytics":n+="<h3>"+translation._("What are Enhanced Analytics?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Unlimited analytics and customized reporting including Facebook Insights, Google analytics and more.");break;case"enterprise_analytics":n+="<h3>"+translation._("What are Enhanced Analytics?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Unlimited analytics and customized reporting including Facebook Insights, Google Analytics, WebTrends, Adobe SiteCatalyst, and more");break;case"pro_profiles":n+="<h3>"+translation._("What are Social Profiles?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Total owned accounts* on Twitter, Facebook and other social profiles.");break;case"basic_analytics":n+="<h3>"+translation._("What are Social Analytics?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Monitor basic information from your social profiles including Click Stats, ReTweets and more.");break;case"app_directory":n+="<h3>"+translation._("What is the HootSuite App Directory?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("The App Directory is a collection of extensions and applications that HootSuite users can add to their dashboard to create a customized experience, including YouTube, Tumblr, Flickr, Constant Contact and more.");break;case"analytics_points":n+="<h3>"+translation._("What are Social Analytics Points?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("These points allow you to select from a variety of modules including Google Analytics and Facebook Insights to build custom reports which you can share with clients and colleagues.");break;case"security":n+="<h3>"+translation._("What is Social Media Security?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("HootSuite's security tools lock down your HootSuite sessions, secure your online profiles and limit permissions with team collaboration.");break;case"analytics":n+="<h3>"+translation._("What are Enhanced Social Analytics?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("Monitor sentiment and track your social reach with access to advanced reporting tools.");break;case"why_credit_card":var a=$("#dynamicFeatures ._subtotal._planCost").text();n+="<h3>"+translation._("Why do we need your credit card?")+"</h3>"+'<div class="arrowLeft"></div>'+translation._("The first 30 days of HootSuite Pro are free. We ask for your credit card to allow your Pro membership to continue should you keep your account open. This prevents any interruption of Pro features to your account. Collecting credit card information also allows us to reduce fraud and to limit customers to one free trial.")+"<br/><br/>"+translation._("Your credit card will not be charged at any point during your 30-day trial. After your 30-day trial, you will be charged %s for each month thereafter (more if you purchase add-ons). If you decide that HootSuite Pro isn't for you, you can cancel anytime, both during and after your trial.").replace("%s",a),r=!0,hs.trackEvent({category:"Billing Signup Flow",action:"Why credit card"});break;default:}i.html(n),n.length?setTimeout(function(){$("#featureInfoPopup").length||i.appendTo("body");var e=t.offset().top-i.outerHeight(!0)/2+10,n=t.offset().left+t.outerWidth(!0);n+i.outerWidth(!0)>$(window).width()&&(n-=100),i.css({top:e,left:n,position:"absolute"}).show(),r&&i.css({width:"500px"})},1):i.hide()}}function i(){$("#featureInfoPopup").empty().hide()}$("._feature").live("mouseenter",function(i){var n=e($(this).get(0).className),r=$(i.target);r.is("._feature")||(r=r.closest("._feature")),plans.featureInfoTimeout&&clearTimeout(plans.featureInfoTimeout),t(n,r)}).live("mouseleave",function(t){var n=e($(this).get(0).className),r=$(t.target);plans.featureInfoTimeout&&clearTimeout(plans.featureInfoTimeout),plans.featureInfoTimeout=setTimeout(function(){i(n,r)},200)}),$("#featureInfoPopup").live("mouseenter",function(){plans.featureInfoTimeout&&clearTimeout(plans.featureInfoTimeout)}).live("mouseleave",function(){plans.featureInfoTimeout&&clearTimeout(plans.featureInfoTimeout),plans.featureInfoTimeout=setTimeout(function(){i()},200)})},plans.startFeatureFreeTrial=function(e,t){ajaxCall({url:"/ajax/member/start-feature-free-trial?featureId="+e,success:function(e){1==e.success?($.isFunction(t)&&t(),hs.statusObj.update(translation._("Free trial started"),"success",!0)):hs.statusObj.update(translation._("Sorry, you are not eligible to start a free trial for this feature."),"error",!0)}},"q1")},plans.downgradePlan=function(e){hs.statusObj.update(translation._("Checking feature usage..."),"info"),ajaxCall({type:"POST",url:"/ajax/member/downgrade-plan?planId="+e,success:function(t){if(hs.statusObj.reset(),t.loggedOut&&(window.location=hs.c.rootUrlSSL+"/login"),t.invalidPlan&&(window.location=hs.c.rootUrl),t.downgradeAnnualPlan){var i=confirm(translation._("Your account will be downgraded once your billing cycle ends on %s. Do you wish to continue?").replace("%s",t.accountExpiration));i&&ajaxCall({type:"POST",url:"/ajax/member/downgrade-annual-billing?planId="+e,success:function(e){hs.statusObj.reset(),e.loggedOut&&(window.location=hs.c.rootUrlSSL+"/login"),e.invalidPlan&&(window.location=hs.c.rootUrl),e.downgradeSuccess?hs.statusObj.update(translation._("Your account will be downgraded on %s").replace("%s",e.accountExpiration),"success",!0):hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")}if(t.output){var n=$("._downgradePlanFancyBox").html(t.output);$.fancybox(n,{openEffect:"fade",closeEffect:"fade",padding:10,maxWidth:650,minHeight:"auto",fitToView:!1}),plans.initDowngradePlanPopup()}},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")},plans.forceDowngradeToFree=function(){var e=translation._("Are you sure you want to downgrade to a Free account? Doing so will immediately remove all Custom Analytics Reports, all Team Members and all but 5 of your Social Profiles."),t=confirm(e);t&&(hs.statusObj.update(translation._("Plan downgrade in progress..."),"info"),ajaxCall({type:"POST",url:"/ajax/member/force-downgrade-to-free",success:function(e){hs.statusObj.reset(),e.loggedOut&&(window.location=hs.c.rootUrlSSL+"/login"),e.success&&plans.save(1)},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1"))},plans.initDowngradePlanPopup=function(){var e=$("._downgradePlanFancyBox");$("#changePlanActionButtons ._cancel").click(function(){$.fancybox.close()}),$("#changePlanActionButtons ._continue").click(function(){return plans.save(e.find("#planChangeContent").attr("newPlanId")),!1}),$("#changePlanActionButtons ._forceDowngrade").click(function(){return plans.forceDowngradeToFree(),!1}),$("#changePlanSection ._removeFeature").click(function(){var t=$(this).closest("._featureSection").attr("featurecode"),i=e.find("#planChangeContent").attr("newPlanId"),n=function(){plans.downgradePlan(i)},r=$(this).closest("._featureSection").attr("featuredata");if("ORGANIZATIONS"==t){var a=r;return billing.deleteOrganization(a,n),!1}return"REPORTING_NUM_REPORTS"==t?(billing.deleteReports(n),!1):!1}),$("#changePlanSectionErrorMsg").hide()},plans.save=function(e){window.location=hs.c.rootUrl+"/save-plan?planId="+e},plans.pro=plans.pro?plans.pro:{},plans.pro.init=function(){function e(){void 0!=hs.timers.homeSlideTimer&&(clearTimeout(hs.timers.homeSlideTimer),delete hs.timers.homeSlideTimer),hs.timers.homeSlideTimer=setTimeout(function(){$(".next").click()},6e3)}function t(){var e=currentPos-r,t=currentPos+i*n-n;0==e&&($("#featuresShowcase .unique").css("margin-left",currentPos-r),$("#featuresShowcase .clone").css("margin-left",currentPos-r-r),currentPos-=r),0==t&&($("#featuresShowcase .unique").css("margin-left",currentPos+r),$("#featuresShowcase .clone").css("margin-left",currentPos+r-r),currentPos+=r)}plans.initFeatureInfoPopup();var i=$("#featuresShowcase .unique .item").size(),n=$("#featuresShowcase .unique .item:first").outerWidth(),r=i*n;$("#featuresShowcase .unique").width(r),$("#featuresShowcase .featuresHolder").outerWidth(),currentPos=0,$("#featuresShowcase .unique").clone().prependTo($("#featuresShowcase .featuresHolder")),$("#featuresShowcase .unique:first-child").addClass("clone").removeClass("unique"),$("#featuresShowcase .clone").css("margin-left",-1*r),e(),$(".prev").click(function(i){0>=$("#featuresShowcase .unique:animated").length&&(targetPos=currentPos+n,currentPos=targetPos,$("#featuresShowcase .unique").animate({marginLeft:targetPos},700),$("#featuresShowcase .clone").animate({marginLeft:targetPos-r},700,t)),e(),i.preventDefault()}),$(".next").click(function(i){0>=$("#featuresShowcase .unique:animated").length&&(targetPos=currentPos-n,currentPos=targetPos,$("#featuresShowcase .unique").animate({marginLeft:targetPos},700),$("#featuresShowcase .clone").animate({marginLeft:targetPos-r},700,t)),e(),i.preventDefault()})},plans.enterprise=plans.enterprise?plans.enterprise:{},plans.enterprise.init=function(){plans.initFeatureInfoPopup()},plans.showTeamsPricingPopup=function(){ajaxCall({type:"POST",url:"/ajax/member/teams-pricing-popup",success:function(e){if(hs.statusObj.reset(),e.loggedOut&&(window.location=hs.c.rootUrlSSL+"/login"),e.output){var t=$("._fancyTeamsPricingPopup");t.html(e.output),$.fancybox(t,{openEffect:"fade",closeEffect:"fade",padding:10,maxWidth:650,minHeight:"auto",fitToView:!1,afterShow:function(){$("#teamsPricingActionButtons a._cancel").click(function(){$.fancybox.close()}),$("#teamsPricingActionButtons a._change").click(function(){var e=translation._("Are you sure you want to permanently switch to the new pricing plan?"),t=confirm(e);t&&plans.switchToTeamsPricing()})}})}},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")},plans.switchToTeamsPricing=function(){hs.statusObj.update(translation._("Switching pricing plan..."),"info"),ajaxCall({type:"POST",url:"/ajax/member/start-teams-pricing?token="+plans.switchToTeamsPricingToken,success:function(e){e.loggedOut&&(window.location=hs.c.rootUrlSSL+"/login"),e.success?window.location.reload(!0):hs.statusObj.reset()},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")};var billing=billing?billing:{};billing.tiers=[],billing.activeCoupons=[],billing.currentCost=0,billing.chosenPlanId=0,billing.ajaxpage=!1,billing.memberLoggedIn=!1,billing.checkCouponToken="",billing.coupons=[],billing.signupErrorMessage=translation._("Could not complete sign up. Please check form and try again."),billing.showSpinners=!0,billing.countryList=[],billing.stateList=[],billing.spinnerHtml=function(){return"<div class='loading-content c-c'><h2>Loading...</h2><img src='"+hs.util.rootifyImage("/loader.gif")+"' /></div>"},billing.getSelectedCurrency=function(){return billing.currency.def},billing.getCurrency=function(){var e=billing.currency.data[billing.getSelectedCurrency()];return e||(e=billing.currency.data.DEFAULT),e},billing.roundCost=function(e){var t=parseFloat(e);return 0>=t?t=billing.getCurrency().zero:"PRICING_JPY"!==billing.getSelectedCurrency()&&(t=t.toFixed(2)),t},billing.getCost=function(e,t){var i=null,n=billing.getSelectedCurrency(),r=function(e,t){if(!t)return 0;for(var i=0,n=1;t>=n;n++)$.each(e,function(e,t){return t.max>=n?(i+=parseFloat(t.price),!1):void 0});return i};switch(e){case"plan":i=billing.cost.pro[n];break;case"seats":i=r(billing.cost.tiers[n].SEATS,t);break;case"support":i=r(billing.cost.tiers[n].PRIORITY_SUPPORT,t);break;case"archiving":i=r(billing.cost.tiers[n].MESSAGE_ARCHIVING,t);break;case"reports":i=hs.isFeatureEnabled("SHOW_ANNUAL_BILLING")?"YEARLY"==billing.billingPeriod?billing.cost.features[n]["17"].costAnnual*t:billing.cost.features[n]["17"].cost*t:billing.cost.features[n]["17"].cost*t;break;case"hsu":i=hs.isFeatureEnabled("SHOW_ANNUAL_BILLING")?"YEARLY"==billing.billingPeriod?billing.cost.features[n]["16"].costAnnual*t:billing.cost.features[n]["16"].cost*t:billing.cost.features[n]["16"].cost*t;break;default:var a=billing.cost.features[n][e+""];a&&(i=hs.isFeatureEnabled("SHOW_ANNUAL_BILLING")?"YEARLY"==billing.billingPeriod?a.costAnnual:a.cost:a.cost)}return i=billing.roundCost(i)},billing.getTier=function(e,t){var i=null;switch(e){case"seats":i="SEATS";break;case"support":i="PRIORITY_SUPPORT";break;case"archive":i="MESSAGE_ARCHIVING";break;default:}if(i){var n=billing.cost.tiers[billing.getSelectedCurrency()][i],r=null;return $.each(n,function(e,i){return i.max>=t?(r=i,!1):void 0}),r}},billing.changeCurrency=function(e){e&&(billing.currency.def=e);var t=billing.getCurrency(),i=t.symbol,n=t.zero;$("#featuresForm ._feature").each(function(){var e=$(this),t=n;switch(e.attr("id")){case"seatsFeature":var r=e.find('input[name="seats"]').val(),a=billing.getTier("seats",r);t=a.price;break;case"prioritySupportFeature":t=billing.getTier("support",1).price;break;case"owlyFeature":case"hsuSeatsFeature":t=billing.getCost(e.attr("featureid"));break;case"reportFeature":break;case"archiveFeature":break;default:}e.find("._numericPrice").html(i+t)}),$("#reportFeature select").find("option").each(function(){var e=$(this),t=e.val(),n=$.trim(e.text());if("0"===t)return!0;var r=n.replace(/\-.+/,"- "+i+billing.getCost("reports",t));e.text(r)});var r=billing.getCost("plan");billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r=(r/12).toFixed(2)),billing.titles.subtitle["create-account"]=billing.titles.subtitle["create-account-template"].replace("%s",billing.getCurrency().symbol).replace("%d",r),billing.setSubTitle("create-account"),billing.updatePrice()},billing.showSavePlanChangeButtons=function(){billing.ajaxpage&&!billing.memberLoggedIn?$("#savePlanChangeButtons").hide():$("#savePlanChangeButtons").show()},billing.populateBillingHistorySection=function(e){var t=$(".billing #billinghistory");ajaxCall({type:"GET",url:"/ajax/billing/billing-history-section",success:function(i){"1"==i.success?(t.empty().html(i.output),$.isFunction(e)&&e()):hs.statusObj.update(translation._("Error retrieving billing history."),"error",!0)}},"qmNoAbort")},billing.populateEnhancePlanSection=function(e,t,i){var n=$(".billing #enhanceplan");billing.showSpinners&&n.html(billing.spinnerHtml()).show(),ajaxCall({type:"GET",url:"/ajax/billing/enhance-plan-section",data:"planId="+e+"&addHsuOption="+billing.addhsuoption,success:function(e){"1"==e.success?(billing.checkCouponToken=e.checkCouponToken,n.empty().html(e.output),$("#featuresForm").formValues(t),billing.updatePrice(),billing.showSavePlanChangeButtons(),billing.showFreeTrial(),$.isFunction(i)&&i()):(n.empty(),hs.statusObj.update(translation._("Error retrieving plan information."),"error",!0))}},"qmNoAbort")},billing.populateBillingSection=function(e,t,i,n){var r=$(".billing #billing-section");billing.showSpinners&&r.html(billing.spinnerHtml()).show(),ajaxCall({type:"GET",url:"/ajax/billing/billing-section",data:"planId="+e+"&updateBilling="+t,success:function(e){"1"==e.success?(r.empty().html(e.output),$("#seatUpperLimitErroMsg a._close").click(function(){$("#seatUpperLimitErroMsg").hide()}),billing.populateCountry(),$("#ccForm").formValues(i),$("#billingStateContainer").formValues(i),$("#billingSection ._placeholderContainer").improvedPlaceholder(),billing.showPaymentMethods(),billing.showFreeTrial(),$.isFunction(n)&&n()):(r.empty(),hs.statusObj.update(translation._("Error retrieving billing section."),"error",!0))}},"qmNoAbort")},billing.submitPaymentNotLoggedIn=function(){return billing.checkCCForm()?billing.memberLoggedIn?(billing.storeFeatures(function(){billing.submitPayment()}),void 0):(!billing.autoSubmitCreateAccount(null,function(e,t){billing.storeFeatures(function(){$("#createaccount").hide(),$("#enhanceplan").hide(),$("#billing-section").hide(),$("html, body").animate({scrollTop:0},"fast"),billing.showSpinners=!1,$("#billing-please-wait #waitmessage").html("<h2>"+translation._("Please wait.")+"</h2><h2>"+translation._("This process may take up to 15 seconds.")+"</h2>"),$("#billing-please-wait").show(),billing.populateBillingSection(void 0,billing.updatebilling,t,function(){billing.submitPayment()})})}),void 0):void 0},billing.postConfirmationLoadedCallback=function(e){if(billing.ajaxpage){$("#createaccount").empty(),$("#enhanceplan").empty(),billing.hidePaymentMethods(),billing.clearSubTitle(),$("html, body").animate({scrollTop:0},"fast"),$.isFunction(billing.callbacks.postConfirmationLoaded)&&billing.callbacks.postConfirmationLoaded();var t=function(){var t="";if(e.couponError)return translation._("Could not process coupons. Please try again.");if(e.couponCodeResults)for(var i=0;e.couponCodeResults.length>i;i++)t+=e.couponCodeResults[i].result?translation._("Coupon code '%s1%s2%s3' successfully applied. ").replace("%s1","<strong>").replace("%s2",e.couponCodeResults[i].code).replace("%s3","</strong>"):translation._("Coupon code '%s1%s2%s3' invalid. ").replace("%s1","<strong>").replace("%s2",e.couponCodeResults[i].code).replace("%s3","</strong>");return t};$("#couponResults").empty().html(t())}},billing.showPaymentMethods=function(){$("#paymentMethods").show()},billing.hidePaymentMethods=function(){$("#paymentMethods").hide()},billing.showFreeTrial=function(){$("#freeTrial").show()},billing.hideFreeTrial=function(){$("#freeTrial").hide()},billing.setPageTitle=function(e){$("h1.pageTitle").html(e)},billing.showLoadingDiv=function(){$(".loadingContent").show()},billing.hideLoadingDiv=function(){$(".loadingContent").hide()},billing.billingNextHook=function(){billing.callbacks.billingNext()},billing.enhancePlanNextHook=function(){$("html, body").animate({scrollTop:0},"fast"),billing.callbacks.enhancePlanNext()},billing.createAccountNextHook=function(){$("html, body").animate({scrollTop:0},"fast"),billing.callbacks.createAccountNext()},billing.confirmationEnhancePlan=function(){billing.ajaxpage&&$.isFunction(billing.callbacks.confirmationEnhancePlan)?billing.callbacks.confirmationEnhancePlan():window.location="https://hootsuite.com/billing"},billing.horizontalStep=function(e){for(var t=1;4>=t;t++)$(".statusBox .steps").removeClass("active-"+t);$(".statusBox .steps").addClass("active-"+e)},billing.titles={subtitle:{"create-account-template":translation._("Free for 30 days, then starting at %s%d/month"),"create-account":translation._("Free for 30 days, then starting at %s%d/month").replace("%s","$").replace("%d","9.99"),billing:translation._("Enter your billing information - Secure")+'&nbsp;<span class="t-s link _feature _feature_why_credit_card">'+translation._("Why do we need this?")+"</span>","enhance-plan":translation._("Enhance your plan to take advantage of more Pro features.")},confirmation:{"start-hootsuite":translation._("Start Using HootSuite"),"thank-you":translation._("Thank You"),"plan-modified":translation._("Plan Modified")}},billing.setSubTitle=function(e){$("#sub-title").html(billing.titles.subtitle[e])},billing.clearSubTitle=function(){$("#sub-title").empty()},billing.setConfirmationBanner=function(e){$("#billingSection .boxTitle span").html(billing.titles.confirmation[e])},billing.loadBillingStep=function(e){billing.horizontalStep(billing.callbacks.billingStepNumber),billing.populateBillingSection(billing.chosenPlanId,billing.updatebilling,e,function(){$("#billing-section").show()}),billing.setPageTitle(translation._("Billing Information")),billing.setSubTitle("billing");var t="/ga/billingABvariant=6/billing";hs.track(t)},billing.loadEnhancePlanStep=function(e,t){t||billing.horizontalStep(billing.callbacks.enhancePlanStepNumber),billing.setPageTitle(translation._("Enhance Plan")),billing.setSubTitle("enhance-plan"),billing.populateEnhancePlanSection(void 0,e,function(){$("#enhanceplan").show()});var i="/ga/billingABvariant=6/enhanceplan";hs.track(i)},billing.saveNextState=function(e){$.cookie.create("billingstate",e,30)},billing.callbacks={billingStepNumber:1,enhancePlanStepNumber:2,postLoad:function(){billing.setPageTitle(translation._("Create Account in 3 Easy Steps")),billing.setSubTitle("create-account"),billing.saveNextState("billing"),billing.showSpinners=!1,$("#billing-please-wait").show(),billing.populateAllSections(billing.chosenPlanId,billing.updatebiling,void 0,function(){$(".billing #createaccount, .billing #enhanceplan, .billing #billing-section").show(),$("#billing-please-wait").hide(),$("#memberSignupForm #email").focus(),billing.changeCurrency()})},createAccountNext:function(){},enhancePlanNext:function(){billing.saveFeatures(function(e){return e.success?(billing.clearSubTitle(),billing.hideFreeTrial(),billing.setPageTitle(translation._("Start Using HootSuite")),billing.populateHsuLink(e.hsuData),billing.horizontalStep(2),$(".billing #enhanceplan").hide(),billing.populateBillingSection(void 0,void 0,void 0,function(){$("#ccForm").hide(),$("#ccSuccess").hide(),$("#enhancePlanSuccess").show(),billing.populateHsuLink(e.hsuData),billing.hidePaymentMethods(),$("#billing-section").show(),billing.setConfirmationBanner("thank-you")}),void 0):(alert(translation._("Problem saving features. Please try again.")),void 0)})},billingNext:function(){billing.submitPaymentNotLoggedIn()},postConfirmationLoaded:function(){billing.setPageTitle(translation._("Start Using Hootsuite")),billing.setConfirmationBanner("thank-you"),billing.horizontalStep(2)},confirmationEnhancePlan:function(){$("#billing-section").hide(),billing.loadEnhancePlanStep(void 0,!0)}},billing.postLoadHook=function(){if(billing.memberLoggedIn){var e=$.cookie.read("billingstate");if(billing.billinghistory)billing.populateBillingHistorySection();else if(billing.updatebilling)billing.populateBillingSection(billing.chosenPlanId,billing.updatebilling),$(".billing #billing-section").show();else if(null!==e)switch(e){case"billing":billing.loadBillingStep(void 0);break;case"enhance":billing.loadEnhancePlanStep(void 0)}else billing.ariaacctvalid?billing.populateEnhancePlanSection(billing.chosenPlanId,void 0,function(){$(".billing #enhanceplan").show()}):billing.populateBillingSection(billing.chosenPlanId,billing.updatebilling,void 0,function(){$(".billing #billing-section").show()})}else billing.callbacks.postLoad()},billing.ajaxSignUp=function(e){var t=$(".billing #createaccount"),i=$("#featuresForm").formValues(),n=$("#ccForm").formValues(),r=$("#memberSignupForm").serialize();$(".ajax-signup .formError").empty(),r+="&addHsuOption="+billing.addhsuoption,hs.isFeatureEnabled("MULTI_CURRENCY")&&billing.currency.def&&(r+="&pricingState="+billing.currency.def),hs.isFeatureEnabled("SHOW_ANNUAL_BILLING")&&(r+="&planBillingPeriod="+billing.billingPeriod+"&member%5BariaBillingPeriod%5D="+billing.billingPeriod),ajaxCall({type:"POST",url:"/ajax/member/ajax-signup",data:r,success:function(r){if("1"==r.success){r.output&&t.empty().html(r.output),$.isFunction(e)&&e(i,n),i=n=null,billing.memberLoggedIn=!0;var a="/ga/billingABvariant=6/create-account-complete?planId="+billing.chosenPlanId;billing.addhsuoption&&(a+="&addHsuOption=1"),hs.track(a)}else billing.removeThrobbers(),$("#memberSignupForm input[name='token']").val(r.token),r.error&&(r.memberInvalid?$(".ajax-signup input[id=email]").siblings(".formError").html(r.error):$(".ajax-signup .formError.generalError").html(r.error)),$("html, body").animate({scrollTop:$(".ajax-signup").offset().top},500)}},"qmNoAbort")},billing.autoSubmitCreateAccount=function(e,t){null!=e&&e.stopPropagation(),$(".ajax-signup .formError").empty();var i=$(".ajax-signup input[id=email]").val(),n=$(".ajax-signup input[id=fullName]").val(),r=$(".ajax-signup input[id=password]").val();if(!hs.isFeatureEnabled("NO_CONFIRM_PASSWORD"))var a=$(".ajax-signup input[id=confirmPassword]").val();var s=!1;return hs.util.isEmailValid(i)||($(".ajax-signup input[id=email]").siblings(".formError").html(translation._("Please check e-mail address")),s=!0),""==n&&($(".ajax-signup input[id=fullName]").siblings(".formError").html(translation._("Name cannot be empty")),s=!0),""==r&&($(".ajax-signup input[id=password]").siblings(".formError").html(translation._("Password cannot be empty")),s=!0),(6>r.length||r.length>64)&&($(".ajax-signup input[id=password]").siblings(".formError").html(translation._("Please enter 6 to 64 characters")),s=!0),hs.isFeatureEnabled("NO_CONFIRM_PASSWORD")||r===a||($(".ajax-signup input[id=password]").siblings(".formError").html(translation._("Passwords must match")),s=!0),s?(billing.removeThrobbers(),$("html, body").animate({scrollTop:$(".ajax-signup").offset().top},500),!1):(billing.ajaxSignUp(t),!0)},billing.populateAllSections=function(e,t,i,n){var r=$(".billing #allsections");billing.showSpinners&&r.html(billing.spinnerHtml()).show(),ajaxCall({type:"GET",url:"/ajax/billing/all-create-account-sections",data:"planId="+e+"&addHsuOption="+billing.addhsuoption,success:function(e){"1"==e.success?(e.output&&(r.empty().html(e.output),$(".ajax-signup ._placeholderContainer").improvedPlaceholder(),$("#billingSection ._placeholderContainer").improvedPlaceholder()),billing.checkCouponToken=e.checkCouponToken,billing.memberLoggedIn=e.isMemberLoggedIn,billing.showFreeTrial(),billing.showPaymentMethods(),billing.showSavePlanChangeButtons(),billing.populateCountry(),billing.updatePrice(),$("#ccForm").formValues(i),$("#billingStateContainer").formValues(i),$("select._changeCurrency").val(billing.currency.def).change(function(){var e=$(this).val();e&&billing.changeCurrency(e)}),$.isFunction(n)&&n()):(r.empty(),hs.statusObj.update(translation._("Error retrieving create account forms."),"error",!0))}},"qmNoAbort")},billing.populateCreateAccount=function(e,t){var i=$(".billing #createaccount");billing.showSpinners&&i.html(billing.spinnerHtml()).show(),ajaxCall({type:"GET",url:"/ajax/billing/signup-section",data:"planId="+e+"&addHsuOption="+billing.addhsuoption,success:function(e){if("1"==e.success){e.output&&(i.empty().html(e.output),$(".ajax-signup ._placeholderContainer").improvedPlaceholder()),e.isMemberLoggedIn&&(billing.memberLoggedIn=!0,i.empty()),$.isFunction(t)&&t(),billing.showFreeTrial();var n="/ga/billingABvariant=6/create-account?planId="+billing.chosenPlanId;billing.addhsuoption&&(n+="&addHsuOption=1"),hs.track(n)}else i.empty(),hs.statusObj.update(translation._("Error retrieving signup section."),"error",!0)}},"qmNoAbort")},billing.init=function(e,t){e!==void 0&&t!==void 0&&(billing.countryList=e,billing.stateList=t,billing.populateCountry()),billing.checkSeatRequirement($("#seatsFeature input[name='seats']").val()),billing.updatePrice(),document.billingConfirmationLoaded=billing.confirmationLoaded,$("#seatUpperLimitErroMsg a._close").click(function(){$("#seatUpperLimitErroMsg").hide()}),plans.initFeatureInfoPopup(),billing.changeCurrency();var i=$("#billingSection ._placeholderContainer");i.length&&i.improvedPlaceholder()},billing.openPricingPopup=function(e){if(billing.billingPeriod&&"YEARLY"==billing.billingPeriod)var t="year";else var t="month";var i='<table style="width: 100%; margin: 5px 0pt 15px;"><tbody>';if("PRICING_GRANDFATHER_PRE_TEAMS"==e)i+="<tr><td><strong>"+translation._("1st User")+"</strong></td><td>"+translation._("You!")+"</td></tr>",i+="<tr><td><strong>"+translation._("2nd User")+"</strong></td><td>"+translation._("Always Free for Pro accounts")+"</td></tr>",i+="<tr><td><strong>"+translation._("Next 4 (3rd to 6th)")+"</strong></td><td>"+translation._("$15 each per %s").replace("%s",t)+"</td></tr>",i+="<tr><td><strong>"+translation._("Next 5 (7th to 11th)")+"</strong></td><td>"+translation._("$30 each per %s").replace("%s",t)+"</td></tr>",i+="<tr><td><strong>"+translation._("Next 4 (12th to 15th)")+"</strong></td><td>"+translation._("$50 each per %s").replace("%s",t)+"</td></tr>",i+="</tbody></table>",i+="<p>"+translation._("e.g. For a team of 7 users:")+"</p>",i+="<p>"+translation._("Yourself and 1 other are included with the Pro account, the next 4 users are $15 each per month, and the remaining user is $30 per month. Total additional cost is $90 per month: 3rd to 6th user @ $60 (4 x $15) plus 7th user @ $30.")+"</p>";else{var n=billing.getCurrency().symbol,r=billing.cost.tiers[billing.getSelectedCurrency()].SEATS,a=r[0].price,s=r[1].price,o=billing.getCost("seats",7),l=billing.roundCost(1*o-1*a);i+="<tr><td><strong>"+translation._("1st User")+"</strong></td><td>"+translation._("You!")+"</td></tr>",i+="<tr><td><strong>"+translation._("2nd User")+"</strong></td><td>"+translation._("Always Free for Pro accounts")+"</td></tr>",i+="<tr><td><strong>"+translation._("3rd User")+"</strong></td><td>"+translation._("%1s%2s per %3s").replace("%1s",n).replace("%2s",a).replace("%3s",t)+"</td></tr>",i+="<tr><td><strong>"+translation._("Next 7 (4th to 10th)")+"</strong></td><td>"+translation._("%1s%2s each per %3s").replace("%1s",n).replace("%2s",s).replace("%3s",t)+"</td></tr>",i+="</tbody></table>",i+="<p>"+translation._("e.g. For a team of 7 users:")+"</p>",i+="<p>"+translation._("Yourself and 1 other are included with the Pro account, the next user is %1s%2s per %6s, and the remaining users are %1s%3s each per %6s. Total additional cost is %1s%4s per %6s: 3rd user @ %1s%2s plus 4th to 7th user @ %1s%5s (4 x %1s%3s).").replace(/%1s/g,n).replace(/%2s/g,a).replace(/%3s/g,s).replace(/%4s/g,o).replace(/%5s/g,l).replace(/%6s/g,t)+"</p>"
}var c='<div id="pricingInfoContent" class="ui-dialog-section rb-a-3"><h2>'+translation._("Adding Users")+"</h2>"+"<p>"+translation._("Pricing for additional users depends on the total number of users added to your account. The chart below explains the pricing:")+"</p>"+i+"</div>",u=$("._tierPlanPricingPopup").html(c);$.fancybox(u,{openEffect:"fade",closeEffect:"fade",padding:10,maxWidth:500,minHeight:"auto",fitToView:!1})},billing.checkSeatRequirement=function(e){e=parseInt(e);var t=!0,i=$("#seatsFeature"),n=i.find("input[name='seats']"),r=parseInt(i.find("input[name='seats']").attr("minimumrequired")),a=parseInt(i.find("input[name='seats']").attr("featurelimit"));return r>a?(e>a&&($("#seatUpperLimitErroMsg").show(),n.val(a)),billing.manageSeats(),t=!1):e>a?(n.val(a),$("#seatUpperLimitErroMsg").show(),t=!1):r>e&&(n.val(r),billing.manageSeats(),t=!1),t},billing.storeFeatures=function(e){$("#couponCode").val(JSON.stringify(billing.coupons));var t=$("#featuresForm").serialize();ajaxCall({type:"POST",url:"/ajax/billing/billing-store-features",data:t,success:function(t){t.success||hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0),$.isFunction(e)&&e(t.success)}},"qmNoAbort")},billing.addCoupon=function(){var e=$("#couponCode").val(),t={couponCode:e,token:billing.checkCouponToken};return!billing.ajaxpage||billing.memberLoggedIn&&billing.ariaacctvalid?(ajaxCall({type:"POST",url:"/ajax/billing/billing-add-coupon",data:t,success:function(e){"1"==e.success?($("._addCoupon").slideToggle(),hs.statusObj.update(translation._("Coupon added!"),"success",!0),document.location=document.location.href):hs.statusObj.update(translation._("Not a valid coupon code, please try again."),"error",!0)}},"qmNoAbort"),void 0):(ajaxCall({type:"POST",url:"/ajax/billing/billing-check-coupon-code",data:t,success:function(t){"1"==t.success?(hs.statusObj.update(translation._("Coupon added!"),"success",!0),billing.coupons.push(e),$("#couponCode").val(""),$("#couponCodes").html(translation._("Pending coupon codes: ")+billing.coupons.join())):hs.statusObj.update(translation._("Not a valid coupon code, please try again."),"error",!0)}},"qmNoAbort"),void 0)},billing.saveFeatures=function(e){hs.throbberMgrObj.add("._saveAddons");var t=$("#featuresForm").serialize();billing.ajaxpage?ajaxCall({type:"POST",url:"/ajax/member/save-plan",data:t,success:function(t){"1"==t.success?(hs.statusObj.update(translation._("Features saved!"),"success",!0),billing.ajaxpage||(document.location=document.location.href)):hs.statusObj.update(translation._("Error saving features"),"error",!0),hs.throbberMgrObj.remove("._saveAddons"),$.isFunction(e)&&e(t);var i="/ga/billingABvariant=6/enhanceplan-complete/"+$("#featuresForm").serialize();hs.track(i)}},"qmNoAbort"):$("#featuresForm").submit()},billing.showBillingSection=function(){$("#billingSection").show(),$("#featuresSummary").show(),$("#featuresSection").hide()},billing.hideBillingSection=function(){$("#billingSection").hide(),$("#featuresSummary").hide(),$("#featuresSection").show()},billing.updatePrice=function(){billing.currentCost=parseFloat(billing.getCost("plan")),hs.isFeatureEnabled("SHOW_ANNUAL_BILLING")?billing.billingPeriod&&"YEARLY"==billing.billingPeriod?$("#providedSeatsFeature  ._planCost").html(billing.getCurrency().symbol+(billing.getCost("plan")/12).toFixed(2)):$("#providedSeatsFeature  ._planCost").html(billing.getCurrency().symbol+billing.getCost("plan")):$("#providedSeatsFeature  ._planCost").html(billing.getCurrency().symbol+billing.getCost("plan"));var e={},t=$("#seatsFeature"),i=t.find("input[name='seats']"),n=0;if(i.length&&!isNaN(parseInt(i.val()))){n=parseInt(i.val()),0>n&&(n=0,i.val("0"),t.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero));var r=billing.getCost("seats",n);billing.currentCost+=1*r,e[t.attr("featureid")]=r,billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r/=12),t.find("._subtotal").html(billing.getCurrency().symbol+(1*r).toFixed(2));var a=billing.getTier("seats",n),s=a&&a.price||0;billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(s/=12),t.find("._numericPrice").html(billing.getCurrency().symbol+""+(1*s).toFixed(2))}else i.val("0"),t.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero),t.find("._numericPrice").html(billing.getCurrency().zero);var o=$("#prioritySupportFeature"),l=o.find("input");if(l.length&&l.prop("checked")){var r=billing.getCost("support",n+1),c=billing.getCost("support",1);billing.currentCost+=1*r,e[o.attr("featureid")]=r,o.removeClass("unchecked"),billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r/=12,c/=12),o.find("._subtotal").html(billing.getCurrency().symbol+(1*r).toFixed(2)),o.find("._numericPrice").html(billing.getCurrency().symbol+""+(1*c).toFixed(2))}else{o.addClass("unchecked"),o.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero);var c=billing.getCost("support",1);billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(c/=12),o.find("._numericPrice").html(billing.getCurrency().symbol+""+(1*c).toFixed(2))}var u=$("#owlyFeature"),h=u.find("input");if(h.length&&h.prop("checked")){var d=u.attr("featureid"),r=billing.getCost(d);billing.currentCost+=1*r,e[d]=r,u.removeClass("unchecked"),billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r=1*r/12),u.find("._subtotal").html(billing.getCurrency().symbol+(1*r).toFixed(2)),u.find("._numericPrice").html(billing.getCurrency().symbol+""+(1*r).toFixed(2))}else{u.addClass("unchecked"),u.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero);var d=u.attr("featureid"),r=billing.getCost(d);billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r/=12),u.find("._numericPrice").html(billing.getCurrency().symbol+""+(1*r).toFixed(2))}var p=$("#owlyEnterpriseFeature"),f=p.find("input");if(f.length&&f.prop("checked")){var r=parseFloat(f.attr("cost"));billing.currentCost+=1*r,e[p.attr("featureid")]=r,p.removeClass("unchecked"),p.find("._subtotal").html("$"+parseFloat(f.attr("cost")).toFixed(2))}else p.addClass("unchecked"),p.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero);var g=$("#archiveFeature"),m=g.find("select[name='messageArchiving']"),v=0;if(isNaN(parseInt(m.find("option:selected").val())))m.val("0"),g.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero),g.find("._numericPrice").html(billing.getCurrency().zero);else if(archiveLevel=parseInt(m.find("option:selected").val()),0>=archiveLevel)archiveLevel=0,m.val("0"),g.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero);else{var d=g.attr("featureid"),r=billing.getCost("archiving",archiveLevel);billing.currentCost+=1*r,e[d]=r,billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r/=12),g.find("._subtotal").html(billing.getCurrency().symbol+(1*r).toFixed(2));var a=billing.getTierForAmount(n,billing.tiers.messageArchiving),s=void 0==a?billing.getTierForAmount(1,billing.tiers.messageArchiving).price:a.price;billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(s/=12),g.find("._numericPrice").html(s)}var b=$("#hsuSeatsFeature");b.find("input");var y=b.find("input:checked:enabled").length,_=b.attr("basefeature"),w=y-_>0?y-_:0;if(y){var r=billing.getCost("hsu",w);billing.currentCost+=1*r,e[b.attr("featureid")]=r,b.removeClass("unchecked"),billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r/=12),b.find("._subtotal").html(billing.getCurrency().symbol+(1*r).toFixed(2)),b.find("._numericPrice").html(billing.getCurrency().symbol+(1*r).toFixed(2))}else{b.addClass("unchecked"),b.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero);var r=billing.getCost("hsu",1);billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r/=12),b.find("._numericPrice").html(billing.getCurrency().symbol+(1*r).toFixed(2))}var x=$("#reportFeature"),C=x.find("select[name='reportingChunks']"),v=0;if(isNaN(parseInt(C.find("option:selected").val())))C.val("0"),x.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero),x.find("._numericPrice").html(billing.getCurrency().zero);else{v=parseInt(C.find("option:selected").val());var k=v*billing.reportingChunkUnits+billing.planBaseCredits;billing.currentReportCredits>k?($("#reportCreditsErroMsg").show(),C.val(billing.currentReportsVal),v=billing.currentReportsVal):$("#reportCreditsErroMsg").hide(),0>v&&(v=0,C.val("0"),x.find("._subtotal").html(billing.getCurrency().symbol+billing.getCurrency().zero));var s=billing.getCost("reports",v);0==v?(s=billing.getCurrency().zero,x.addClass("unchecked")):x.removeClass("unchecked");var r=s;e[x.attr("featureid")]=r,billing.currentCost+=1*r,billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(r/=12),x.find("._subtotal").html(billing.getCurrency().symbol+(1*r).toFixed(2)),x.find("._numericPrice").html(s),billing.billingPeriod&&"YEARLY"==billing.billingPeriod&&(s/=12),x.find("._numericPrice").html(billing.getCurrency().symbol+(1*s).toFixed(2)),billing.currentReportsVal=C.val()}for(var S=0;this.activeCoupons.length>S;S++){var T=this.activeCoupons[S];if(0!=T.amount)if(0==T.featureId)"flat"==T.priceType?billing.currentCost-=T.amount:"percentage"==T.priceType&&(billing.currentCost-=billing.currentCost*(T.amount/100));else if("percentage"==T.priceType){var E=e[T.featureId];void 0!=E&&E>0&&(billing.currentCost-=E*(T.amount/100))}}0>billing.currentCost&&(billing.currentCost=0),billing.currentCost=Math.round(100*billing.currentCost)/100;var I=0;$("#paidAppCost").length>0&&(I=parseFloat($("#paidAppCost").val())),billing.currentCost=(billing.currentCost+I).toFixed(2),$("#totalCost").html(billing.getCurrency().symbol+billing.currentCost),$("#totalCost2").html(billing.getCurrency().symbol+billing.currentCost),$("#totalMonthlyCost").html(billing.getCurrency().symbol+(billing.currentCost/12).toFixed(2)),$("#totalCostSavings").html("-"+billing.getCurrency().symbol+(12*(billing.currentCost/12/.9).toFixed(2)-billing.currentCost).toFixed(2)),$("#dynamicFeatures").length&&($("#dynamicFeatures ._totalCost").html(billing.currentCost),$("#dynamicFeatures ._seats ._num").html(i.val()),$("#dynamicFeatures ._seats ._cost").html(billing.getTotalCostForTieredFeature(n,billing.tiers.seat).toFixed(2)),i.length&&!isNaN(parseInt(i.val()))&&parseInt(i.val())>0?$("#dynamicFeatures ._seats").show():$("#dynamicFeatures ._seats").hide(),l.length&&l.prop("checked")?($("#dynamicFeatures ._prioritySupport ._cost").html(billing.getTotalCostForTieredFeature(n,billing.tiers.support).toFixed(2)),$("#dynamicFeatures ._prioritySupport").show()):$("#dynamicFeatures ._prioritySupport").hide(),h.length&&h.prop("checked")?$("#dynamicFeatures ._owlyPro").show():$("#dynamicFeatures ._owlyPro").hide(),f.length&&f.prop("checked")?$("#dynamicFeatures ._owlyEnterprise").show():$("#dynamicFeatures ._owlyEnterprise").hide())},billing.getTierForAmount=function(e,t){for(var i=0;t.length>i;i++)if(e>=t[i].min&&t[i].max>=e)return t[i]},billing.getTotalCostForTieredFeature=function(e,t){for(var i=0,n=0;e>=n;n++){var r=billing.getTierForAmount(n,t);r!==void 0&&(i+=r.price)}return i},billing.decrementSeats=function(){var e=$("#seatsFeature input[name='seats']"),t=parseInt(e.val());e.length&&!isNaN(parseInt(t))&&parseInt(t)>0&&(t-=1,billing.checkSeatRequirement(t)&&(e.val(t),billing.updatePrice(),$("#seatUpperLimitErroMsg").hide()))},billing.incrementSeats=function(){var e=$("#seatsFeature input[name='seats']"),t=parseInt(e.val());e.length&&!isNaN(parseInt(t))&&(t+=1,billing.checkSeatRequirement(t)&&(e.val(t),billing.updatePrice(),billing.manageSeatsRemove()))},billing.showHistoryInvoice=function(e){var t=window.open(hs.c.rootUrlSSL+"/show-history-invoice?id="+e,"Invoice","height=700,width=790,toolbar=no,menubar=yes,status=no,location=no,directories=no");window.focus&&t.focus()},billing.manageSeats=function(){$("#seatManagement").html('<img src="'+hs.util.rootifyImage("/themes/"+(hs.prefs.theme||"blue_steel").toLowerCase()+"/loader.gif")+'" alt="" class="spinner _loading" />');var e=$("#featuresForm input[name='planId']").val();ajaxCall({type:"GET",url:"/ajax/billing/billing-manage-seats?planId="+e+"&n="+$("#seatsFeature input[name='seats']").val(),success:function(e){$("#savePlanChangeButtons").hide(),$("#seatManagement").html(e.output),$("#billingManageSeatButton ._cancel").click(function(){billing.manageSeatsRemove()})},error:function(){billing.manageSeatsRemove(),hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"qmNoAbort")},billing.manageSeatsRemove=function(){$("#seatManagement").html(""),billing.showSavePlanChangeButtons()},billing.cancelPayment=function(){return confirm("Are you sure you want to cancel this payment? Your account will be set back to Free plan!")&&(window.location=hs.c.rootUrl+"/member/cancel-payment"),!1},billing.addFeature=function(e,t,i,n,r){ajaxCall({type:"GET",url:"/ajax/billing/billing-change-feature?featureId="+e+"&value="+t+"&itemId="+n,success:function(e){"1"==e.success?($("#featureAccessDeniedPopup").dialog("close"),r=r||translation._("Added feature"),hs.statusObj.update(r,"success",!0),$.isFunction(i)&&i()):hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"qmNoAbort")},billing.deleteReports=function(e){ajaxCall({type:"GET",url:"/ajax/analytics/delete-all-reports?saveZeroCostReports=1",success:function(t){"1"==t.success?(hs.statusObj.update(translation._("Deleted all reports with analytics points"),"info",!0),$.isFunction(e)&&e()):hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"qmNoAbort")},billing.deleteOrganization=function(e,t){ajaxCall({type:"GET",url:"/ajax/organization/delete?organizationId="+e,success:function(e){"1"==e.success?(hs.statusObj.update(translation._("Deleted organization"),"info",!0),$.isFunction(t)&&t()):hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later"),"error",!0)}},"qmNoAbort")},billing.focusCC=function(){$('#ccForm input[name="paymentType"][value="cc"]').attr("checked","checked")},billing.checkCCNum=function(e){var t=$(e),i=t.val(),n=t.closest("form").find("._ccNumError");i=i.replace(/[ -]/g,""),billing.testCCNum(i)?n.html(""):n.html(translation._("Invalid Credit Card Number"))},billing.testCCNum=function(e){var t=!1,n=/^4\d{15}$/,r=/^5[1-5]\d{14}$/,a=/^3[4,7]\d{13}$/,s=/^6011\d{12}$/,o=/^(?:2131|1800|35\d{3})\d{11}$/,l=[n,r,a,s,o];for(i=0;l.length>i;i++)if(e.match(l[i])){t=!0;break}return t},billing.checkCVV=function(e){var t=$(e),i=t.val(),n=t.closest("form").find("._cvvError");n.html(""),i.length>0&&(3>i.length||i.length>4||isNaN(i))&&n.html(translation._("CVV code must be 3 or 4 digits"))},billing.populateHsuLink=function(e){null!=e&&$("span.hsulink").show()},billing.removeThrobbers=function(){hs.throbberMgrObj.remove("#ccForm span.btn-cmt"),hs.throbberMgrObj.remove("#ccForm span.btn-cta"),hs.throbberMgrObj.remove("#submitPaymentBtn"),hs.throbberMgrObj.remove("._submitSignup"),$("#submitPaymentBtn").removeClass("btn-cta-throbber")},billing.showBillingErrorMessages=function(e){var t=$.map(e,function(e){return"<p>"+e+"</p>"}).join("");$("#billingErrorMessages").html(t).show()},billing.confirmationLoaded=function(e){if(billing.removeThrobbers(),$("#billing-please-wait").hide(),$("#billing-section").show(),$("html, body").animate({scrollTop:0},"fast"),e.errorMessages&&e.errorMessages.length>0)billing.showBillingErrorMessages(e.errorMessages),e.validationFailed&&$("#billingZipContainer").show(),e.errorTrackEvents&&e.errorTrackEvents.length>0&&$.map(e.errorTrackEvents,function(e){hs.trackEvent(e)});else if(e.success){document.getElementById("ccForm").style.display="none",document.getElementById("ccSuccess").style.display="",$billingPeriodSelector=document.getElementById("billingPeriodSelector"),null!=$billingPeriodSelector&&($billingPeriodSelector.style.display="none"),$partnerProTrialCheck=billing.readCookie("partner_pro_trial_billing_start"),1==$partnerProTrialCheck&&ajaxCall({type:"GET",url:"/ajax/member/partner-pro-trial-billing-complete",success:function(e){"1"==e.success&&billing.createCookie("partner_pro_trial_billing_start","",-1)}},"qmNoAbort");var t=document.getElementById("sasLeadPixel");t&&$("#sasLeadPixel").html('<img src="https://shareasale.com/sale.cfm?amount=0.00&tracking='+document.getElementById("sasTrackingValue").value+"&transtype=lead&merchantID="+document.getElementById("sasMerchantIdValue").value+'" width="1" height="1">');var i=document.getElementById("cjPixelContainer");i&&$("#cjPixelContainer").html('<img src="https://www.emjcd.com/u?AMOUNT=0&CID=1520515&OID='+document.getElementById("cjMemberId").value+"&TYPE="+document.getElementById("cjActionId").value+'&CURRENCY=USD&METHOD=IMG" height="1" width="20">'),e.gaVirtualPageView&&e.gaVirtualPageView.length>0&&hs.track(e.gaVirtualPageView),billing.hidePaymentMethods(),$.isFunction(billing.postConfirmationLoadedCallback)&&billing.postConfirmationLoadedCallback(e);var n="/ga/billingABvariant=6/billing-complete/"+$("#featuresForm").serialize();hs.track(n),billing.ariaacctvalid=1,billing.populateHsuLink(e.hsuData)}},billing.recordPaymentAction=function(){if(billing.ajaxpage){var e="/ga/billingABvariant=6/submit-billing";hs.track(e),ajaxCall({type:"GET",url:"/ajax/billing/record-payment-start",success:function(){},error:function(){}},"q1")}},billing.recordBillingCancel=function(){if(billing.ajaxpage){var e="/ga/billingABvariant=6/cancel-billing";hs.track(e),ajaxCall({type:"GET",url:"/ajax/billing/record-payment-cancel",success:function(){},error:function(){}},"q1")}},billing.recordEnhancePlanCancel=function(){if(billing.ajaxpage){var e="/ga/billingABvariant=6/enhanceplan-cancel";hs.track(e),ajaxCall({type:"GET",url:"/ajax/billing/record-enhanceplan-cancel",success:function(){},error:function(){}},"q1")}},billing.checkCCForm=function(){var e=[],t=$("input[name='paymentType']:checked").val();if("paypal"===t)return!0;$("#billingForm #paypalRadio");var i=$("#billingForm #cc_no").val(),n=$("#billingForm #cc_exp_mm").val(),r=$("#billingForm #cc_exp_yyyy").val(),a=$("#billingForm #cvv").val(),s=$("#billingSection #billingCountry").val(),o=$("#billingSection #billingZip").val(),l=$("#billingSection #billingState").val(),c=/^[\d\s]+$/;return(15>i.length||!i.match(c))&&e.push(translation._("Please enter a valid credit card number.")),""==n&&e.push(translation._("Please choose credit card expiry month.")),""==r&&e.push(translation._("Please choose credit card expiry year.")),(3>a.length||a.length>4||isNaN(a))&&e.push(translation._("Please enter a valid CVV.")),""==s&&e.push(translation._("Please choose a Country.")),""==l&&e.push(translation._("Please choose a State or Province.")),"US"!=s&&"CA"!=s||""!=o||e.push(translation._("Please enter a valid Zip/Postal code.")),e.length>0?($("html, body").animate({scrollTop:$("#billingSection").offset().top},"fast"),billing.showBillingErrorMessages(e),!1):!0},billing.submitPayment=function(){if(!$("#submitPaymentBtn").hasClass("btn-cta-throbber")){var e=$("#billingCountry"),t=$("#billingState"),i=$("#billingZip");if(hs.isFeatureEnabled("BILLING_FORM_JS_CHECK")){if(!billing.checkCCForm())return}else if(("US"===e.val()||"CA"===e.val())&&""===i.val())return hs.statusObj.update(translation._("Please enter a valid Zip/Postal code."),"error",!0),void 0;$("#submitPaymentBtn").addClass("btn-cta-throbber"),hs.throbberMgrObj.add("#submitPaymentBtn"),billing.createCookie("new_billing_period",billing.billingPeriod,1/24),billing.recordPaymentAction(),ajaxCall({type:"GET",url:"/ajax/billing/billing-save-address?country="+e.val()+"&state="+t.val()+"&zip="+i.val(),success:function(e){"1"==e.success?($("#addressError").html(""),$("#paypalRadio:checked").length>0?billing.startPaypal():$("#billingForm").submit()):(billing.removeThrobbers(),$("#addressError").html(translation._("Please verify that you have selected a valid Country.")))},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later. Your credit card was not charged."),"error",!0)}},"q1");var n="Billing Signup Flow";$("#ccRadio:checked").length>0&&(n="Start Free Trial"),hs.trackEvent({category:n,action:e.val()+"/"+t.val(),label:i.val(),value:$("#authAttempts").val()})}},billing.startPaypal=function(){ajaxCall({type:"GET",url:"/ajax/billing/billing-start-paypal",success:function(e){if("1"==e.success){billing.saveNextState("billing"),document.location.href=e.returnUrl+e.token;var t="/ga/billingABvariant=6/start-paypal";hs.track(t)}else{hs.statusObj.update(translation._("An error occurred while processing your request, please try again later. Your PayPal account was not charged."),"error",!0);var t="/ga/billingABvariant=6/start-paypal-error";hs.track(t)}},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later. Your PayPal account was not charged."),"error",!0);var e="/ga/billingABvariant=6/start-paypal-error";hs.track(e)}},"qmNoAbort")},billing.populateCountry=function(){var e=$("#billingCountry");1>e.length||(0>=e.find("option").length&&e.append($("<option/>").attr("value","").html(translation._("Select Country"))).val(""),$(billing.countryList).each(function(t,i){e.append($("<option/>").attr("value",i[0]).html(i[1]))}),e.val(e.attr("currval")),e.unbind("change").bind("change",billing.countryChanged),billing.countryChanged())},billing.countryChanged=function(){var e=$("#billingCountry"),t=$("#billingState"),i=t.closest("p").find("label");"US"==e.val()?i.html(translation._("State")):"CA"==e.val()?i.html(translation._("Province")):i.html(translation._("State/Province"));var n;return billing.stateList[e.val()]?(n=$("<select/>"),$.each(billing.stateList[e.val()],function(e,t){n.append($("<option/>").attr("value",t[0]).html(t[1]))})):n=$('<input type="text"/>'),n.attr("name",t.attr("name")).attr("id",t.attr("id")).val(t.val()),t.replaceWith(n),""!=e.val()&&($("#billingStateContainer").show(),"US"===e.val()||"CA"===e.val()?$("#billingZipContainer").show():$("#billingZipContainer").hide()),!0},billing.showCvvPopup=function(){open("https://secure.ariasystems.net/webclients/HootSuitePay/whatisCVV.php","displayWindow","top=40,left=50,width=480,height=200,scroll=auto"),hs.trackEvent({category:"Billing Signup Flow",action:"Why CVV"})},billing.submitCoupon=function(){$("._submitCoupon").hasClass("btn-cta-throbber")||($("._submitCoupon").addClass("btn-cta-throbber"),hs.throbberMgrObj.add("._submitCoupon",'<span class="btn-ts">'+translation.c.LOADING+"</span>"),$("#couponForm").submit())},billing.getAriaSessionInfo=function(){ajaxCall({type:"GET",url:"/ajax/billing/billing-get-aria-session-info",success:function(e){"1"==e.success?e.isAriaSessionValid?($("#billingForm").attr("action",e.ariaUrl),$('input[name="inSessionID"]').val(e.ariaSession),$('input[name="mode"]').val(e.ariaMode),$('input[name="client_no"]').val(e.clientNumber),e.ccSuffix&&$("#cc_no").val("XXXXXXXXXXXX"+e.ccSuffix),e.ccExpireMonth&&$("#cc_exp_mm").val(e.ccExpireMonth),e.ccExpireYear&&$("#cc_exp_yyyy").val(e.ccExpireYear),e.billingCountry&&($("#billingCountry").val(e.billingCountry),billing.countryChanged(),e.billingState&&$("#billingState").val(e.billingState)),e.billingZip&&$("#billingZip").val(e.billingZip),$(".disabled").removeAttr("disabled").removeClass("disabled"),$(".fieldLoader").hide(),$("#billingCountry").bind("change",billing.countryChanged),$("#submitPaymentBtn").bind("click",function(){return billing.submitPayment(),!1})):($("#ccForm").hide(),$("#footer").hide(),$("#invalidAriaSession").show()):($("#ccForm").hide(),$("#footer").hide(),$("#invalidAriaSession").show())},error:function(){$("#ccForm").hide(),$("#footer").hide(),$("#invalidAriaSession").show()}},"q1")},billing.abTesting={},billing.abTesting.displayAlternativePaymentTypes=function(){var e=$("#alternativePaymentMethods");e.find("._payment-choice").unbind().click(function(){var e=$(this).attr("choice");billing.abTesting.createAlternativePaymentPopup(e)}),e.find("._submit-payment-request").unbind().click(function(){var t=e.find("._requested-payment-type").val();billing.abTesting.submitPaymentChoice({choice:t,notifyMe:1}),e.hide(),$("._otherPaymentTypeContainer").hide(),$("._after-ab-submit-message").show()}),e.show()},billing.abTesting.createAlternativePaymentPopup=function(e){var t=$("#abTestPaymentMethodInfoPopup");$.fancybox(t,{openEffect:"fade",closeEffect:"fade",padding:10,maxWidth:350,minHeight:"auto",fitToView:!1,afterShow:function(){t.find("._notify-me-button").click(function(){t.find(".notify-me-input").val(1),$.fancybox.close()})},afterClose:function(){var i={choice:e,notifyMe:t.find(".notify-me-input").val()};billing.abTesting.submitPaymentChoice(i),$("#alternativePaymentMethods").hide(),$("._otherPaymentTypeContainer").hide(),$("._after-ab-submit-message").show()}})},billing.abTesting.submitPaymentChoice=function(e){ajaxCall({url:"/ajax/billing/ab-test-save-payment-type-choice",data:"choice="+e.choice+"&notifyMe="+e.notifyMe,success:function(){hs.statusObj.update(translation._("Your choice has been submitted. Thank you!"),"success",!0)}},"q1")},billing.readCookie=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;i.length>n;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},billing.createCookie=function(e,t,i){if(i){var n=new Date;n.setTime(n.getTime()+1e3*60*60*24*i);var r="; expires="+n.toGMTString()}else var r="";document.cookie=e+"="+t+r+"; path=/"},billing.updatePlanBillingPeriod=function(e){var t=e.value,i=billing.interval[t.toLowerCase()].cost;billing.cost.pro=i.pro,billing.cost.features=i.features,billing.cost.tiers=i.tiers,billing.billingPeriod=t,billing.updatePrice();var n=$("div._grandfaterYearlyNotification");"YEARLY"==t?($("div._billingTotalsMonthly").hide(),$("div._billingTotalsYearly").show(),n.show()):($("div._billingTotalsYearly").hide(),n.hide(),$("div._billingTotalsMonthly").show())},billing.switchProBillingPeriod=function(e){ajaxCall({type:"GET",url:"/ajax/billing/switch-pro-billing-period?billingPeriod="+billing.billingPeriod,success:function(t){"1"!=t.success&&(billing.removeThrobbers(),hs.statusObj.update(translation._("An error occurred while setting your billling interval. Select 'Enhance Your Plan' to verify the correct billing interval is set, and update if necessary."),"error",!0)),parent.location=e},error:function(){hs.statusObj.update(translation._("An error occurred while processing your request, please try again later. Your credit card was not charged."),"error",!0)}},"q1")};var languageSwitcher={defaults:{selectSelector:"#languageSelectionForm select[name='language']",langSep:"ar"},init:function(e){var t=this;this.options=$.extend({},this.defaults,e),this.$select=$(this.options.selectSelector),0!==this.$select.length&&(this.$select.find("option[value='"+this.options.langSep+"']:not(:last)").before('<option disabled="disabled">--------------------</option>'),this.$select.bind("change",function(e){t.changeLanguage(e)}))},changeLanguage:function(){hs.statusObj.update(translation._("Switching language..."),"info",!0,8e3);var e=this.$select.find("option:selected").val();return ajaxCall({type:"POST",data:"language="+e,url:"/ajax/index/change-language",success:function(e){if(hs.statusObj.reset(),e.success)$.isFunction(window.location.reload)?window.location.reload(!0):window.location=window.location.href.replace(window.location.hash,"");else{if(e.inProgress){var t={width:347,maxHeight:700,resizable:!1,draggable:!1,position:["center",60],modal:!0,title:translation._("HootSuite Translation Project"),content:hsEjs.getEjs("index/language_translation").render(e)};return $.dialogFactory.create("inProgressLanguagePopup",t),!1}e.paymentProcessorUnavailable&&void 0!=hs.statusObj&&hs.statusObj.update(translation._("Sorry, we are unable to complete this operation right now. Please try again later."),"error",!0)}},error:function(){hs.statusObj.reset()}},"abortOld"),!1}};$("._oauth2ClientsSection ._oauth2ClientShowSecret").click(function(e){var t=$(this).data("client_id"),i="clientSecretBox"+t;$(".clientSecretBox").remove();var n=$("<div>").attr("id",i).addClass("clientSecretBox");$(n).html("Loading..."),$(n).insertAfter($(this)),ajaxCall({url:"/ajax/admin/get-oauth2-client-secret",data:{clientId:t},success:function(e){var t="";t+=e.error?'<span class="error">'+e.error+"</span>":" "+e.clientSecret,t+=' <span class="icon-30 closeButton _close"></span>',$(n).html(t)}},"q1"),e.preventDefault()}),$("._oauth2ClientsSection .clientSecretBox ._close").live("click",function(e){$(this).closest(".clientSecretBox").remove(),e.preventDefault()}),$("._oauth2PermissionsSection ._oauth2PermissionEndpointSelect").change(function(e){var t=$(this).val(),i=$("#oauthClientId").val();0!=t&&(ajaxCall({url:"/ajax/admin/get-api-permission-specs",data:{id:t,clientId:i},success:function(e){e.error?alert(e.error):$("form.editPermissions ._endpointSpecs").html(e.output)}},"q1"),e.preventDefault())}),$(function(){$("._submitPreventCommits").on("click",function(){return ajaxCall({url:"/ajax/admin/prevent-commits",data:$("form#preventCommitsForm").serialize(),success:function(e){e.success&&hs.reloadBrowser()}},"q1"),!1})});var Service=Backbone.Model.extend({initialize:function(){this.bind("change:serviceData",function(){var e=this.get("serviceData");e.stats}),this.bind("change:visibleSection",function(){var e=(this.get("serviceData"),this.get("visibleSection"));$("#server"+id+" ._section").each(function(e){e.hide()}),$("#server"+id+" ._section"+e).show()})}}),ServiceContainerView=Backbone.View.extend({tagName:"div",initialize:function(){},events:{"click ._dispatcherTab":"showDispatcherPane","click ._workerTab":"showWorkerPane"},showDispatcherPane:function(){this.$el.find("._dispatcherInfo").show(),this.$el.find("._dispatcherTab").addClass("active"),this.$el.find("._workerInfo").hide(),this.$el.find("._workerTab").removeClass("active")},showWorkerPane:function(){this.$el.find("._dispatcherInfo").hide(),this.$el.find("._dispatcherTab").removeClass("active"),this.$el.find("._workerInfo").show(),this.$el.find("._workerTab").addClass("active")},render:function(){var e=this.model.get("serviceData");e.stats;var t=hsEjs.getEjs("admin/service-container-view").render(e);return this.$el.html(t),this.$el.find("._workerInfo").hide(),this}}),ServiceDispatcherInfoView=Backbone.View.extend({tagName:"div",initialize:function(){this.model.bind("change",this.render,this)},render:function(){var e=this.model.get("serviceData");e.stats;var t=hsEjs.getEjs("admin/service-dispatcher-info-view").render(e);return this.$el.html(t),this}}),ServiceWorkerInfoView=Backbone.View.extend({tagName:"div",selectedWorker:void 0,initialize:function(){this.model.bind("change",this.render,this)},events:{"click ._individualWorkerName":"showIndividualWorker"},showIndividualWorker:function(e){this.selectedWorker=$(e.target).parent().attr("workerid"),$(e.target).parent().find("._individualWorkerInfo").show()},render:function(){var e=this.model.get("serviceData");e.stats,e.selectedWorker=this.selectedWorker;var t=hsEjs.getEjs("admin/service-worker-info-view").render(e);return this.$el.html(t),this}}),ServiceList=Backbone.Collection.extend({model:Service,comparator:function(e){return e.get("stats.name")}}),services=new ServiceList,member=member?member:{};
member.notificationPopup=function(){var e=function(){var e=this.$anchor.offset();this.$el.css({display:"block",top:e.top+this.$anchor.outerHeight(!0),right:$(window).width()-e.left-this.$anchor.outerWidth(!0)-30}),this.$anchor.unbind("click").bind("click",i)},t=function(){var t=this;this.$el.css({display:"none"}),this.$anchor.unbind("click").bind("click",function(){e.call(t)})},i=function(){hs.reloadBrowser()};return{init:function(){var n=this;this.$container=$("._dashboardAlerts"),this.$el=$("#notificationPopup"),this.$anchor=$("._showNotificationPopup"),0===this.$container.filter(":visible").length&&(this.$container.show(),this.$el.show().find(".tip").css({left:"auto",right:35}).end().find("._closeNotificationPopup").bind("click",function(){return t.call(n),!1}).end().find("._reloadDashboardBtn").bind("click",i).end(),this.$anchor.show().bind("click",function(){e.call(n)}).click())}}}(),member.pingServer=function(){ajaxCall({type:"GET",url:"/ajax/member/ping",success:function(e){e&&e.isForce&&hs.c.jsver&&e.jsver!=hs.c.jsver&&member.notificationPopup.init()}},"qmNoAbort"),hs.isFeatureEnabled("CENSUS_HEARTBEAT")&&jsonpCall({url:hs.c.censusRestUrl+"/heartbeat",type:"GET",dataType:"jsonp",bypassplugin:!0,async:!0,data:{memberId:hs.memberId,sessionId:hs.SID,planId:hs.memberPlan,sleep:!!hs.userInactiveTimedOut}})},function(e){e.InFieldLabels=function(t,i,n){var r=this;r.$label=e(t),r.label=t,r.$field=e(i),r.field=i,r.showing=!0,r.init=function(){r.options=e.extend({},e.InFieldLabels.defaultOptions,n),""!==r.$field.val()&&(r.$label.hide(),r.showing=!1),r.$label.click(function(){r.$field.trigger("focus")}),r.$field.focus(function(){r.fadeOnFocus()}).blur(function(){r.checkForEmpty(!0)}).bind("keydown.infieldlabel",function(e){r.hideOnChange(e)}).bind("keyup.infieldlabel",function(e){r.showOnChange(e)}).bind("paste",function(){r.setOpacity(0)}).change(function(){r.checkForEmpty()}).bind("onPropertyChange",function(){r.checkForEmpty()})},r.fadeOnFocus=function(){r.showing&&r.setOpacity(r.options.fadeOpacity)},r.setOpacity=function(e,t){t=t||r.options.fadeDuration,r.$label.stop().animate({opacity:e},r.options.fadeDuration,null,function(){r.showing=e>0,r.showing?r.$label.show():r.$label.hide()})},r.checkForEmpty=function(e){""===r.$field.val()?(r.prepForShow(),r.setOpacity(e?1:r.options.fadeOpacity)):r.setOpacity(0)},r.prepForShow=function(){r.showing||r.$label.css({opacity:0}).show()},r.hideOnChange=function(e){16!==e.keyCode&&9!==e.keyCode&&224!==e.keyCode&&17!==e.keyCode&&18!==e.keyCode&&r.showing&&(r.setOpacity(0,600),r.showing=!1)},r.showOnChange=function(e){(8===e.keyCode||46===e.keyCode)&&0===r.$field.val().length&&(r.setOpacity(1),r.isShowing=!0)},r.init()},e.InFieldLabels.defaultOptions={fadeOpacity:.6,fadeDuration:300},e.fn.improvedPlaceholder=function(t){return this.each(function(){$label=e(this).find("._placeholderLabel"),$field=e(this).find("._placeholderField"),0!==$field.length&&0!==$label.length&&new e.InFieldLabels($label[0],$field[0],t)})}}(jQuery),hs.m={isAndroid:function(){return navigator.userAgent.match(/Android/i)?!0:!1},androidVersion:function(){if(hs.m.isAndroid()){var e=navigator.userAgent;return parseFloat(e.slice(e.indexOf("Android")+8))}return-1},isBlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},isIOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1},iosVersion:function(){if(hs.m.isIOS()){var e=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}return-1},iosVersionMajor:function(){if(hs.m.isIOS()){var e=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(e[1],10)}return-1},isWindowsMobile:function(){return navigator.userAgent.match(/Windows Phone/i)?!0:!1},windowsMobileVersion:function(){if(hs.m.isWindowsMobile()){var e=navigator.userAgent.match(/Windows Phone OS (\d+)[.](\d+);/);if(e)return[parseInt(e[1],10),parseInt(e[2],10)];if(e=navigator.userAgent.match(/Windows Phone (\d+)[.](\d+);/))return[parseInt(e[1],10),parseInt(e[2],10)]}return-1},isDeviceSupported:function(){return hs.m.androidVersion()>=2.1||hs.m.isBlackBerry()||hs.m.isIOS()||hs.m.isWindowsMobile()},OpenAppStore:function(){hs.m.isIOS()?window.location="http://itunes.apple.com/app/hootsuite-for-twitter/id341249709?mt=8":hs.m.isAndroid()&&(window.location="market://details?id=com.hootsuite.droid.full")}};var hs=hs||{};hs.landingpages={},hs.landingpages.initHsRequire=function(){require.config({baseUrl:"/js/third_party"}),hsRequire.createRequirement("passwordstrengthchecker"),hsRequire.parse(hs.requireJsDependencies,hs.gZipVersionOrNot)},hs.landingpages.initSignupForm=function(){var e=$("#memberSignupForm");e.length&&hsRequire.load("passwordstrengthchecker",{additionalCallback:function(){$pwdLvl=$('<div class="passwordLevel"><div class="strength"></div><span class="div1"></span><span class="div2"></span><span class="div3"></span></div>'),$pwdInd=$('<span class="_passwordStrength passwordStrength t-ls">&nbsp;</span>'),e.find('input[name="member[password]"]').on("keyup.pwdStrength",function(){var e=$(this).val(),t=zxcvbn(e);$pwdLvl.removeClass("level0 level1 level2 level3 level4").addClass("level"+t.score);var i;switch(t.score){case 0:i="<span>"+translation._("Password Strength: Very Weak")+"</span>";break;case 1:i="<span>"+translation._("Password Strength: Weak")+"</span>";break;case 2:i=translation._("Password Strength: So-So");break;case 3:i=translation._("Password Strength: Good");break;case 4:i=translation._("Password Strength: Great");break;default:i=""}$pwdInd.html(i)}).after($pwdInd).after($pwdLvl)},forceAdditionalCallback:!0})},$(function(){function e(t){return hsRequire.load("sociallogin",{comeback:arguments})?void 0:(t.preventDefault(),i.toggleClass("btn-glass-dropdown"),i.find(".icon-19").swapClass("collapse","expand"),n.toggleClass("offScreen"),setTimeout(function(){r.focus()},1),n.hasClass("offScreen")?$(document).unbind("click.outside_loginBox"):$(document).bind("click.outside_loginBox",function(t){a===t.target||n.has(t.target).length||e(t)}),!1)}function t(e){e=$(e),e.each(function(){$(this).height()>f&&(f=$(this).height())}),e.height(f)}hs.isFeatureEnabled("PASSWORD_STRENGTH_INDICATOR")&&(hs.landingpages.initHsRequire(),_.delay(function(){hs.landingpages.initSignupForm()},1e3));var i=$("#loginButton"),n=$("#loginBox"),r=n.find("#loginEmail"),a=n.get();if(i.bind("click",function(){return!1}).bind("mousedown",e).bind("focus",function(t){setTimeout(function(){n.is(".visHide")&&e(t)},1)}),r.focus().select(),$("#container").hasClass("home")){var s=$(".feature"),o="expanded",l="animate",c=function(e,t,i){var n=i?"1":"0.5";t.css("opacity",n),e.removeClass("animate"),$(document).unbind("click.outside_features"),setTimeout(function(){e.removeClass(o)},400)};s.mouseenter(function(){s.hasClass(o)&&s.hasClass(l)||s.not($(this)).css("opacity","0.5")}).mouseleave(function(){s.hasClass(o)&&s.hasClass(l)||s.not($(this)).css("opacity","1")}).click(function(){var e=$(this),t=this,i=s.not(e);i.hasClass(o)||(e.hasClass(o)&&e.hasClass(l)?c(e,i,!1):(e.addClass(o).addClass(l),i.css("opacity","0"),$(document).bind("click.outside_features",function(n){t===n.target||e.has(n.target).length||c(e,i,!0)})))});var u=$("#memberSignupForm"),h=$("._submitSignup");h.bind("click",function(){return hs.throbberMgrObj.add("._submitSignup"),u.submit(),!1}),u.bind("keypress",function(e){13==e.keyCode&&(h.click(),e.preventDefault())}),$("._placeholderContainer").improvedPlaceholder(),u.find("#signupEmail").focus()}if($("#pageWrapper").hasClass("_placeholderInputs")&&$("._placeholderContainer").improvedPlaceholder(),openid.init("openid_identifier"),$("#planMatrix").filter(".plansCompare").length||$("#page .comparisonChart").length?plans.initFeatureInfoPopup():$("._planEnterprise").length?plans.enterprise.init():$("._planPro").length&&("undefined"!=typeof billingTiersObject&&(billing.tiers=billingTiersObject),plans.pro.init()),$("#benefits").length){var d=$("#benefits");d.delegate("._tab","click",function(){var e=$(this);d.find("._tab").removeClass("active"),e.addClass("active"),d.find("._section").hide().filter(".content-"+e.data("section")).show()})}$("#priceDisclaimer").length&&$("#priceDisclaimer").bind("click",function(){return $.fancybox($("#priceDisclaimerPopup"),{autoSize:!1,height:520,width:600,openEffect:"fade",closeEffect:"fade",padding:10,fitToView:!1}),!1}),languageSwitcher.init(),$("._lightbox").fancybox();var p=$("#bucket .bucket");p.hover(function(){$(this).toggleClass("hover")}),p.click(function(){return window.location=$(this).find("a").attr("href"),!1});var f=0;if(t("#bucket .bucket"),$("#oauth2AuthForm ._btnAuth").click(function(){var e=$("<input>").attr("type","hidden").attr("name","allow_access").val("1");$("#oauth2AuthForm").append(e).submit()}),$("#oauth2AuthForm ._btnDeny").click(function(){$("#oauth2AuthForm").submit()}),$("#oauth2LogoutForm ._logoutLink").click(function(){$("#oauth2LogoutForm").submit()}),$("#pageWrapper").hasClass("_planPro"))return $("._videoLightbox").fancybox({autoDimensions:!1,padding:0,autoScale:!1,transitionIn:"fade",transitionOut:"fade",width:800,height:450,type:"swf",swf:{wmode:"transparent",allowfullscreen:"true"}}),!1;if(hs.isFeatureEnabled("MOBILE_WEB_SMART_BANNER")&&$.isFunction($.smartbanner)){var g=null;hs.m.isAndroid()&&(g="http://market.android.com/details?id=com.hootsuite.droid.full&referrer=utm_source%3Dhootsuite%26utm_medium%3Dmobile_web%26utm_campaign%3Dsmart_banner");var m={title:"HootSuite",author:"Hootsuite Media Inc.",icon:hs.util.rootifyImage("/smart_banner_icon.png"),url:g};$.smartbanner(m)}}),function(e,t,i){var n=i(e),r=i(t),a=i.fancybox=function(){a.open.apply(this,arguments)},s=!1,o=null;i.extend(a,{version:"2.0.2",defaults:{padding:0,margin:20,width:800,height:600,minWidth:200,minHeight:400,maxWidth:9999,maxHeight:9999,autoSize:!0,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:!i.browser.msie||i.browser.version>6,scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,modal:!1,loop:!0,ajax:{},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0" '+(i.browser.msie?'allowtransparency="true""':"")+' scrolling="{scrolling}" src="{href}"></iframe>',swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-item fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-item fancybox-prev"><span></span></a>'},openEffect:"elastic",openSpeed:500,openEasing:"easeOutBack",openOpacity:!0,openMethod:"zoomIn",closeEffect:"elastic",closeSpeed:500,closeEasing:"easeInBack",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"none",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"none",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:0,opacity:.85,css:{cursor:"pointer","background-color":"rgba(0, 0, 0, 0.85)"},closeClick:!0},title:{type:"over"}},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){i.isArray(e)||(e=[e]),e.length&&(a.close(!0),a.opts=i.extend(!0,{},a.defaults,t),a.group=e,a._start(a.opts.index||0))},cancel:function(){a.coming&&!1===a.trigger("onCancel")||(a.coming=null,a.hideLoading(),a.ajaxLoad&&a.ajaxLoad.abort(),a.ajaxLoad=null,a.imgPreload&&(a.imgPreload.onload=a.imgPreload.onabort=a.imgPreload.onerror=null))},close:function(e){a.cancel(),a.current&&!1!==a.trigger("beforeClose")&&(a.unbindEvents(),!a.isOpen||e&&e[0]===!0?(i(".fancybox-wrap").stop().trigger("onReset").remove(),a._afterZoomOut()):(a.isOpen=a.isOpened=!1,i(".fancybox-item").remove(),a.wrap.stop(!0).removeClass("fancybox-opened"),a.inner.css("overflow","hidden"),a.transitions[a.current.closeMethod]()))},play:function(e){var t=function(){clearTimeout(a.player.timer)},n=function(){t(),a.current&&a.player.isActive&&(a.player.timer=setTimeout(a.next,a.current.playSpeed))},r=function(){t(),i("body").unbind(".player"),a.player.isActive=!1,a.trigger("onPlayEnd")},s=function(){a.current&&(a.current.loop||a.current.index<a.group.length-1)&&(a.player.isActive=!0,n(),i("body").bind({"onCancel.player afterShow.player onUpdate.player":n,"beforeClose.player":r,"beforeLoad.player":t}),a.trigger("onPlayStart"))};a.player.isActive||e&&e[0]===!1?r():s()},next:function(){a.current&&a.jumpto(a.current.index+1)},prev:function(){a.current&&a.jumpto(a.current.index-1)},jumpto:function(e){a.current&&(e=parseInt(e,10),a.group.length>1&&a.current.loop&&(e>=a.group.length?e=0:0>e&&(e=a.group.length-1)),a.group[e]!==void 0&&(a.cancel(),a._start(e)))},reposition:function(e){a.isOpen&&a.wrap.css(a._getPosition(e))},update:function(){a.isOpen&&(s||(o=setInterval(function(){s&&(s=!1,clearTimeout(o),a.current&&(a.current.autoSize&&(a.inner.height("auto"),a.current.height=a.inner.height()),a._setDimension(),a.current.canGrow&&a.inner.height("auto"),a.reposition(),a.trigger("onUpdate")))},100)),s=!0)},toggle:function(){a.isOpen&&(a.current.fitToView=!a.current.fitToView,a.update())},hideLoading:function(){i("#fancybox-loading").remove()},showLoading:function(){a.hideLoading(),i('<div id="fancybox-loading"></div>').click(a.cancel).appendTo("body")},getViewport:function(){return{x:n.scrollLeft(),y:n.scrollTop(),w:n.width(),h:n.height()}},unbindEvents:function(){r.unbind(".fb"),n.unbind(".fb")},bindEvents:function(){var e=a.current,t=e.keys;e&&(n.bind("resize.fb, orientationchange.fb",a.update),t&&r.bind("keydown.fb",function(e){i.inArray(e.target.tagName.toLowerCase(),["input","textarea","select","button"])>-1||(i.inArray(e.keyCode,t.close)>-1?(a.close(),e.preventDefault()):i.inArray(e.keyCode,t.next)>-1?(a.next(),e.preventDefault()):i.inArray(e.keyCode,t.prev)>-1&&(a.prev(),e.preventDefault()))}),i.fn.mousewheel&&e.mouseWheel&&a.group.length>1&&a.wrap.bind("mousewheel.fb",function(e,t){(0===i(e.target).get(0).clientHeight||i(e.target).get(0).scrollHeight===i(e.target).get(0).clientHeight)&&(e.preventDefault(),a[t>0?"prev":"next"]())}))},trigger:function(e){var t,n=i.inArray(e,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current";if(a[n]){if(i.isFunction(a[n][e])&&(t=a[n][e].apply(a[n],Array.prototype.slice.call(arguments,1))),t===!1)return!1;a[n].helpers&&i.each(a[n].helpers,function(t,n){n&&a.helpers[t]!==void 0&&i.isFunction(a.helpers[t][e])&&a.helpers[t][e](n)}),i.event.trigger(e+".fb")}},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(e){var t,n,r,s,o=a.group[e]||null,l=i.extend(!0,{},a.opts,i.isPlainObject(o)?o:{},{index:e,element:o});return"number"==typeof l.margin&&(l.margin=[l.margin,l.margin,l.margin,l.margin]),l.modal&&i.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}}),a.coming=l,!1===a.trigger("beforeLoad")?(a.coming=null,void 0):("object"==typeof o&&(o.nodeType||o instanceof i)&&(t=!0,l.href=i(o).attr("href")||l.href,l.title=i(o).attr("title")||l.title,i.metadata&&i.extend(l,i(o).metadata())),r=l.type,n=l.href,r||(t&&(s=i(o).data("fancybox-type"),!s&&o.className&&(s=o.className.match(/fancybox\.(\w+)/),s=s?s[1]:!1)),s?r=s:n&&(a.isImage(n)?r="image":a.isSWF(n)?r="swf":n.match(/^#/)&&(r="inline")),r||(r=t?"inline":"html"),l.type=r),"inline"===r||"html"===r?(l.content||(l.content="inline"===r&&n?i(n):o),l.content.length||(r=null)):(l.href=n||o,l.href||(r=null)),l.group=a.group,"image"===r?a._loadImage():"ajax"===r?a._loadAjax():r?a._afterLoad():a._error(),void 0)},_error:function(){a.coming.type="html",a.coming.minHeight=0,a.coming.autoSize=!0,a.coming.content=a.coming.tpl.error,a._afterLoad()},_loadImage:function(){a.imgPreload=new Image,a.imgPreload.onload=function(){this.onload=this.onerror=null,a.coming.width=this.width,a.coming.height=this.height,a._afterLoad()},a.imgPreload.onerror=function(){this.onload=this.onerror=null,a._error()},a.imgPreload.src=a.coming.href,a.imgPreload.complete||a.showLoading()},_loadAjax:function(){a.showLoading(),a.ajaxLoad=i.ajax(i.extend({},a.coming.ajax,{url:a.coming.href,error:function(e,t,i){"abort"!==t?(a.coming.content=i,a._error()):a.hideLoading()},success:function(e,t){"success"===t&&(a.coming.content=e,a._afterLoad())}}))},_afterLoad:function(){return a.hideLoading(),a.coming&&!1!==a.trigger("afterLoad",a.current)?(a.isOpened?(i(".fancybox-item").remove(),a.wrap.stop(!0).removeClass("fancybox-opened"),a.transitions[a.current.prevMethod]()):i(".fancybox-wrap").stop().trigger("onReset").remove(),a.isOpen=!1,a.current=a.coming,a.coming=!1,a.wrap=i(a.current.tpl.wrap).addClass(a.current.wrapCSS).hide().appendTo("body"),a.outer=i(".fancybox-outer",a.wrap).css("padding",a.current.padding+"px"),a.inner=i(".fancybox-inner",a.wrap),a._setContent(),a.unbindEvents(),a.bindEvents(),a.trigger("beforeShow"),a._setDimension(),a.isOpened?a.transitions[a.current.nextMethod]():a.transitions[a.current.openMethod](),void 0):(a.coming=!1,void 0)},_setContent:function(){var e,t,n=a.current,r=n.type;switch(r){case"inline":case"ajax":case"html":"inline"===r?(e=n.content.show().detach(),e.parent().hasClass("fancybox-inner")&&e.parents(".fancybox-wrap").trigger("onReset").remove(),i(a.wrap).bind("onReset",function(){e.appendTo("body").hide()})):e=n.content,n.autoSize&&(t=i('<div class="fancybox-tmp"></div>').appendTo(i("body")).append(e),n.width=t.outerWidth(),n.height=t.outerHeight(!0),e=t.contents().detach(),t.remove());break;case"image":e=n.tpl.image.replace("{href}",n.href),n.aspectRatio=!0;break;case"swf":e=n.tpl.swf.replace(/\{width\}/g,n.width).replace(/\{height\}/g,n.height).replace(/\{href\}/g,n.href);break;case"iframe":e=n.tpl.iframe.replace("{href}",n.href).replace("{scrolling}",n.scrolling).replace("{rnd}",(new Date).getTime())}i.inArray(r,["image","swf","iframe"])>-1&&(n.autoSize=!1,n.scrolling=!1),a.inner.append(e)},_setDimension:function(){var e,t=a.current,n=a.getViewport(),r=t.margin,s=2*t.padding,o=t.width+s,l=t.height+s,c=t.width/t.height,u=t.maxWidth,h=t.maxHeight,d=t.minWidth,p=t.minHeight;if(n.w-=r[1]+r[3],n.h-=r[0]+r[2],(""+o).indexOf("%")>-1&&(o=n.w*parseFloat(o)/100),(""+l).indexOf("%")>-1&&(l=n.h*parseFloat(l)/100),t.fitToView&&(u=Math.min(n.w,u),h=Math.min(n.h,h)),u=.9*Math.max(d,u),h=.9*Math.max(p,h),t.aspectRatio?(o>u&&(o=u,l=(o-s)/c+s),l>h&&(l=h,o=(l-s)*c+s),d>o&&(o=d,l=(o-s)/c+s),p>l&&(l=p,o=(l-s)*c+s)):(o=Math.max(d,Math.min(o,u)),l=Math.max(p,Math.min(l,h))),o=Math.round(o),l=Math.round(l),i(a.wrap.add(a.outer).add(a.inner)).width("auto").height("auto"),a.inner.width(o-s).height(l-s),a.wrap.width(o),e=a.wrap.height(),o>u||e>h)for(;(o>u||e>h)&&o>d&&e>p;)l-=10,t.aspectRatio?(o=Math.round((l-s)*c+s),d>o&&(o=d,l=(o-s)/c+s)):o-=10,a.inner.width(o-s).height(l-s),a.wrap.width(o),e=a.wrap.height();t.dim={width:o,height:e},t.canGrow=t.autoSize&&l>p&&h>l,t.canShrink=!1,t.canExpand=!1,t.width>o-s||t.height>l-s?t.canExpand=!0:(o>n.w||e>n.h)&&o>d&&l>p&&(t.canShrink=!0)},_getPosition:function(e){var t=a.getViewport(),i=a.current.margin,n=a.wrap.width()+i[1]+i[3],r=a.wrap.height()+i[0]+i[2],s={position:"absolute",top:i[0]+t.y,left:i[3]+t.x};return a.current.fixed&&(!e||e[0]===!1)&&t.h>=r&&t.w>=n&&(s={position:"fixed",top:i[0],left:i[3]}),s.top=Math.ceil(Math.max(s.top,s.top+(t.h-r)*a.current.topRatio))+"px",s.left=Math.ceil(Math.max(s.left,s.left+.5*(t.w-n)))+"px",s},_afterZoomIn:function(){var e=a.current;a.isOpen=a.isOpened=!0,a.wrap.addClass("fancybox-opened").css("overflow","visible"),a.update(),a.inner.css("overflow","auto"===e.scrolling?"auto":"yes"===e.scrolling?"scroll":"hidden"),(e.closeClick||e.nextClick)&&a.inner.bind("click.fb",e.nextClick?a.next:a.close),e.closeBtn&&i(a.current.tpl.closeBtn).appendTo(a.wrap).bind("click.fb",a.close),e.arrows&&a.group.length>1&&((e.loop||e.index>0)&&i(e.tpl.prev).appendTo(a.wrap).bind("click.fb",a.prev),(e.loop||e.index<a.group.length-1)&&i(e.tpl.next).appendTo(a.wrap).bind("click.fb",a.next)),a.trigger("afterShow"),a.opts.autoPlay&&!a.player.isActive&&(a.opts.autoPlay=!1,a.play())},_afterZoomOut:function(){a.trigger("afterClose"),a.wrap.trigger("onReset").remove(),i.extend(a,{group:{},opts:{},current:null,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}),a.transitions={getOrigPosition:function(){var e,t,n=a.current.element,r={},s=50,o=50;return n&&n.nodeName&&i(n).is(":visible")?(e=i(n).find("img:first"),e.length?(r=e.offset(),s=e.outerWidth(),o=e.outerHeight()):r=i(n).offset()):(t=a.getViewport(),r.top=t.y+.5*(t.h-o),r.left=t.x+.5*(t.w-s)),r={top:Math.ceil(r.top)+"px",left:Math.ceil(r.left)+"px",width:Math.ceil(s)+"px",height:Math.ceil(o)+"px"}},step:function(e,t){var i,n,r;("width"===t.prop||"height"===t.prop)&&(n=r=Math.ceil(e-2*a.current.padding),"height"===t.prop&&(i=(e-t.start)/(t.end-t.start),t.start>t.end&&(i=1-i),n-=a.innerSpace*i,r-=a.outerSpace*i),a.inner[t.prop](n),a.outer[t.prop](r))},zoomIn:function(){var e,t,n=a.current.dim,r=n.height-2*a.current.padding;a.innerSpace=r-a.inner.height(),a.outerSpace=r-a.outer.height(),"elastic"===a.current.openEffect?(t=i.extend({},n,a._getPosition(!0)),delete t.position,e=this.getOrigPosition(),a.current.openOpacity&&(e.opacity=0,t.opacity=1),a.wrap.css(e).show().animate(t,{duration:a.current.openSpeed,easing:a.current.openEasing,step:this.step,complete:a._afterZoomIn})):(a.wrap.css(i.extend({},a.current.dim,a._getPosition())),"fade"===a.current.openEffect?a.wrap.fadeIn(a.current.openSpeed,a._afterZoomIn):(a.wrap.show(),a._afterZoomIn()))},zoomOut:function(){var e,t=a.wrap.height()-2*a.current.padding;"elastic"===a.current.closeEffect?("fixed"===a.wrap.css("position")&&a.wrap.css(a._getPosition(!0)),a.innerSpace=t-a.inner.height(),a.outerSpace=t-a.outer.height(),e=this.getOrigPosition(),a.current.closeOpacity&&(e.opacity=0),a.wrap.animate(e,{duration:a.current.closeSpeed,easing:a.current.closeEasing,step:this.step,complete:a._afterZoomOut})):a.wrap.fadeOut("fade"===a.current.closeEffect?a.current.Speed:0,a._afterZoomOut)},changeIn:function(){var e;"elastic"===a.current.nextEffect?(e=a._getPosition(!0),e.opacity=0,e.top=parseInt(e.top,10)-200+"px",a.wrap.css(e).show().animate({opacity:1,top:"+=200px"},{duration:a.current.nextSpeed,complete:a._afterZoomIn})):(a.wrap.css(a._getPosition()),"fade"===a.current.nextEffect?a.wrap.hide().fadeIn(a.current.nextSpeed,a._afterZoomIn):(a.wrap.show(),a._afterZoomIn()))},changeOut:function(){function e(){i(this).trigger("onReset").remove()}a.wrap.removeClass("fancybox-opened"),"elastic"===a.current.prevEffect?a.wrap.animate({opacity:0,top:"+=200px"},{duration:a.current.prevSpeed,complete:e}):a.wrap.fadeOut("fade"===a.current.prevEffect?a.current.prevSpeed:0,e)}},a.helpers.overlay={overlay:null,update:function(){var e,a,s;this.overlay.width(0).height(0),i.browser.msie?(a=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth),s=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),e=s>a?n.width():a):e=r.width(),this.overlay.width(e).height(r.height())},beforeShow:function(e){this.overlay||(this.overlay=i('<div id="fancybox-overlay"></div>').css(e.css||{background:"black"}).appendTo("body"),this.update(),e.closeClick&&this.overlay.bind("click.fb",a.close),n.bind("resize.fb",i.proxy(this.update,this)),this.overlay.fadeTo(e.speedIn||"fast",e.opacity||1))},onUpdate:function(){this.update()},afterClose:function(e){this.overlay&&this.overlay.fadeOut(e.speedOut||"fast",function(){i(this).remove()}),this.overlay=null}},a.helpers.title={beforeShow:function(e){var t,n=a.current.title;n&&(t=i('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+n+"</div>").appendTo("body"),"float"===e.type&&(t.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))),t.appendTo("over"===e.type?a.inner:"outside"===e.type?a.wrap:a.outer))}},i.fn.fancybox=function(e){function t(e){var t=[],r=!1,o=i(this).data("fancybox-group");return e.preventDefault(),o!==void 0?r=o?"data-fancybox-group":!1:this.rel&&""!==this.rel&&"nofollow"!==this.rel&&(o=this.rel,r="rel"),r&&(t=s.length?i(s).filter("["+r+'="'+o+'"]'):i("["+r+'="'+o+'"]')),t.length?(n.index=t.index(this),a.open(t.get(),n)):a.open(this,n),!1}var n=e||{},s=this.selector||"";return s?r.undelegate(s,"click.fb-start").delegate(s,"click.fb-start",t):i(this).unbind("click.fb-start").bind("click.fb-start",t),this}}(window,document,jQuery),hs.bubblePopup=function(){function e(){var e,t,i="bubblePopPane",n=[],r=null,a=1e3,s={},o=this,l=function(){return n=$("#"+i),n.length||(n=$('<div id="'+i+'" class="animated fadeInLeft"></div>').appendTo("body")),n.html('<div class="_content"><img src="'+hs.util.rootifyImage("/module-loader-small.gif")+'" alt="" class="spinner _loading" /></div><span class="icon-static-19 tip"></span>'),n},c=function(e,i,n){n=n||"h",t={top:e,left:i,orientation:n}},u=function(){t=null},h=function(t){var i=$(t);return i.length?e&&e.length&&e.attr("href")==i.attr("href")?!0:!1:!1},d=function(){return n.length&&n.find("._loading").length?!0:!1},p=function(e){var t=!1;if("click"==e.type){var n=$(e.target);if(n.attr("id")==i||n.closest("#"+i).length||n.is("._bubblePopup")||n.closest("._bubblePopup").length)return;t=!0}else"scroll"==e.type?t=!0:"blur"==e.type&&(t=!0);t&&o.close()},f=function(){$("body").unbind("click",p),$("#streamsScroll div._body").unbind("scroll",p),$("#streamsContainer").unbind("scroll",p),$("#analyticsContent").unbind("scroll",p)},g=function(){f(),$("body").bind("click",p),$("#streamsScroll div._body").bind("scroll",p),$("#streamsContainer").bind("scroll",p),$("#analyticsContent").bind("scroll",p)},m=function(){setTimeout(function(){var e=$("#"+i);if(e.length){var t=Math.ceil(e.position().left),n=e.outerWidth(!0),r=$(window).width(),a=10;t+n+a>r&&e.css({left:"auto",right:0})}},1)};this.open=function(t,i,n,r,a){if($(t).is("._bubblePopup")||$(t).addClass("_bubblePopup"),h(t))return d()||this.close(),void 0;a=a||{},s=a,this.clearOpenDelay(),e=t?$(t):null,c(i,n),l(),this.detach=a.detach;var o=this;a.isVertical?o.setPositionVertical():o.setPosition(),0==a.autoclose||g(),$.isFunction(r)&&r(this)},this.openWithDelay=function(e,t,i,n,s){s=s||a,h(e)||(r=setTimeout(function(){o.open(e,t,i,n)},s))},this.openVertical=function(e,t,i,n,r){r=$.extend(r,{isVertical:!0}),this.open(e,t,i,n,r)},this.clearOpenDelay=function(){clearTimeout(r)},this.close=function(){n.length&&n[this.detach===!0?"detach":"remove"](),e&&e.length&&e.trigger("close.bubblepopup")&&e.unbind("close.bubblepopup"),e=null,u(),f(),clearTimeout(r)},this.setPosition=function(i,r,a){if(n.length){var o,l,u,h,d=14,p=13,f=$("#footer").length?$("#footer").position().top:$(window).height(),g="right",v=n.outerWidth(),b=n.outerHeight();if(t&&t.top&&t.left)o=t.top,l=t.left,u=e?e.outerWidth():p,h=e?e.outerHeight():p;else{var y=i?$(i):e;if(y&&y.length){var _=y.offset();o=_.top,l=_.left,u=y.outerWidth(),h=y.outerHeight()}else o=r||0,l=a||0,u=p,h=p}c(o,l,"h"),o-=b/2-h/2,l+v>$(window).width()-u||"left"==s.pos?(l=l-d-v,g="left"):l+=u,o+b>f&&(o-=o+b-f),n.css("top",o+"px").css("left",l+"px").removeClass("right left up down").addClass(g),m()}},this.setPositionVertical=function(i,r,a){if(n.length){var o,l,u,h,d=14,p=13,f=$("#footer").length?$("#footer").position().top:$(window).height(),g="down",v=n.outerWidth(),b=n.outerHeight();if(t&&t.top&&t.left)o=t.top,l=t.left,u=e?e.outerHeight():p,h=e?e.outerWidth():p;else{var y=i?$(i):e;if(y&&y.length){var _=y.offset();o=_.top,l=_.left,u=y.outerHeight(),h=y.outerWidth()}else o=r||0,l=a||0,u=p,h=p}if(c(o,l,"v"),l+=h/2-v/2,o+u+b>f||"up"==s.pos?(o=o-d-b,0>o&&(o=0),g="up"):o+=u,l+v>$(window).width()){var w=l+v-$(window).width();l-=w;var x=this.getTip(),C=-12;x.css("marginLeft",C+w)}n.css("top",o+"px").css("left",l+"px").removeClass("right left up down fadeInLeft").addClass(g+" fadeInDown"),m()}},this.getTip=function(){return n.find(".tip")},this.setContent=function(e){var i=this,r=function(){t&&"v"==t.orientation?i.setPositionVertical():i.setPosition()};n.length&&(n.find("._content").empty().append(e).find("img").bind("load",function(){_.defer(r),$(this).unbind("load")}),_.defer(r))},this.setPositionForCurrent=function(){t&&"v"==t.orientation?this.setPositionVertical():this.setPosition()},this.isOpen=function(){return n.length>0}}return new e}(),hs.bubblePopup.wizard={queue:[]},hs.bubblePopup.wizard.init=function(e){hs.bubblePopup.wizard.queue=[],_.each(e,function(e){var t=function(){var t=$(e.target),i=i=function(){_.isFunction(e.close)&&e.close(),_.defer(hs.bubblePopup.wizard.show)};if(!t.length)return hs.bubblePopup.wizard.clearQueue(),void 0;var n="vertical"==e.position?"openVertical":"open";hs.bubblePopup[n](t,null,null,function(){(e.autoclose===void 0||e.autoclose)&&$.isFunction(i)&&t.unbind("close.bubblepopup").bind("close.bubblepopup",i),"string"==typeof e.content&&(e.content='<div class="wizard-step">'+e.content+"</div>"),hs.bubblePopup.setContent(e.content);var n=$("#bubblePopPane");_.each(e.events,function(e){n.find(e.selector).bind(e.event,function(){return _.isFunction(e.handler)&&e.handler(),!1})}),_.defer(hs.bubblePopup.setPosition)},{autoclose:e.autoclose})};hs.bubblePopup.wizard.queue.push(t)})},hs.bubblePopup.wizard.show=function(){if(!hs.bubblePopup.wizard.queue.length)return hs.bubblePopup.close(),void 0;var e=hs.bubblePopup.wizard.queue.slice(0,1)[0];hs.bubblePopup.wizard.queue=hs.bubblePopup.wizard.queue.slice(1),_.isFunction(e)&&e()},hs.bubblePopup.wizard.clearQueue=function(){hs.bubblePopup.wizard.queue=[]},hs.bubblePopup.wizard.skipToLast=function(){hs.bubblePopup.wizard.queue.length&&(hs.bubblePopup.wizard.queue=[hs.bubblePopup.wizard.queue[hs.bubblePopup.wizard.queue.length-1]],hs.bubblePopup.wizard.show())},function(){function e(){if(this.loadDependencies=function(e){hsRequire.load("sociallogin",{comeback:arguments})||$.isFunction(e)&&e()},this.doFacebook=function(e){e=e||{},hs.fb.socialLoginAuthenticate(function(){var t="?state="+(e.state||"snLogin")+"&sntype=FACEBOOK";document.location=hs.util.getUrlRoot()+"/check-credentials"+t},e.permissions,"snLogin"==e.state?!0:!1)},$("#dashboard").length||hsRequire.createRequirement("sociallogin",function(){hs.fb=new FacebookJs(hs.fbAppKey,hs.fbChannelPath,hs.fbFanpageId,hs.fbAppId)}),hs.isDev){var e='{"sociallogin":{"order":0,"files":["js/internal/utils/popauth.js","js/internal/modules/settings/facebook.js"]}}';hsRequire.parse(e,hs.gZipVersionOrNot)}}hs.socialLogin=new e,$(document).ready(function(){$("._socialLoginFacebook").click(function(){hs.socialLogin.doFacebook({state:"snLogin"}),ajaxCall({url:"/ajax/auth/log-facebook-auth-click"},"q1")}),$("._socialLoginFacebookSignup").click(function(){var e={state:"snCreateAccount"};hs.socialLogin.doFacebook(e),ajaxCall({url:"/ajax/auth/log-facebook-signup-click"},"q1")});var e=$("._socialLogin._preloadRequirements");e.length&&hs.socialLogin.loadDependencies(function(){e.removeClass("visHide")})})}(),!function(e){var t=function(t){this.origHtmlMargin=parseFloat(e("html").css("margin-top")),this.options=e.extend({},e.smartbanner.defaults,t);
var i=navigator.standalone;if(this.options.force?this.type=this.options.force:null!=navigator.userAgent.match(/iPad|iPhone|iPod/i)?null!=navigator.userAgent.match(/Safari/i)&&(null!=navigator.userAgent.match(/CriOS/i)||6>window.Number(navigator.userAgent.substr(navigator.userAgent.indexOf("OS ")+3,3).replace("_",".")))&&(this.type="ios"):null!=navigator.userAgent.match(/Android/i)&&(this.type="android"),this.type&&!i&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?e(window).width()/window.screen.width:this.options.scale,1>this.scale&&(this.scale=1);var n=e("android"==this.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]');0!=n.length&&(this.appId=/app-id=([^\s,]+)/.exec(n.attr("content"))[1],this.title=this.options.title?this.options.title:e("title").text().replace(/\s*[|\-].*$/,""),this.author=this.options.author?this.options.author:e('meta[name="author"]').length?e('meta[name="author"]').attr("content"):window.location.hostname,this.create(),this.show(),this.listen())}};t.prototype={constructor:t,create:function(){var t,i=this.options.url?this.options.url:("android"==this.type?"market://details?id=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,n=this.options.price?this.options.price+" - "+("android"==this.type?this.options.inGooglePlay:this.options.inAppStore):"",r=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;e("body").append('<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+n+'</span></div><a href="'+i+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>"),this.options.icon?t=this.options.icon:e('link[rel="apple-touch-icon-precomposed"]').length>0?(t=e('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(r=!1)):e('link[rel="apple-touch-icon"]').length>0&&(t=e('link[rel="apple-touch-icon"]').attr("href")),t?(e("#smartbanner .sb-icon").css("background-image","url("+t+")"),r&&e("#smartbanner .sb-icon").addClass("gloss")):e("#smartbanner").addClass("no-icon"),this.bannerHeight=e("#smartbanner").outerHeight()+2,this.scale>1&&(e("#smartbanner").css("top",parseFloat(e("#smartbanner").css("top"))*this.scale).css("height",parseFloat(e("#smartbanner").css("height"))*this.scale),e("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",e(window).width()/this.scale))},listen:function(){e("#smartbanner .sb-close").on("click",e.proxy(this.close,this)),e("#smartbanner .sb-button").on("click",e.proxy(this.install,this)),e(window).on("scroll.smartbanner",_.throttle(e.proxy(this.updateNavBar,this),100))},updateNavBar:function(){var t=e("#smartbanner").outerHeight();e(window).scrollTop()>=t?(e("#navbarWrapper").css("top",0),this.setNavBarPositionToFixed()):(e("#navbarWrapper").css("top",this.origHtmlMargin+e("#smartbanner").outerHeight()),this.setNavBarPositionToAbs())},show:function(t){e("#smartbanner").stop().animate({top:0},this.options.speedIn).addClass("shown"),e("html").animate({marginTop:this.origHtmlMargin+e("#smartbanner").outerHeight()},this.options.speedIn,"swing",t),e("#navbarWrapper").animate({top:e("#smartbanner").outerHeight()},this.options.speedIn,"swing",e.proxy(this.setNavBarPositionToAbs,this))},hide:function(t){e("#smartbanner").stop().animate({top:-1*this.bannerHeight*this.scale},this.options.speedOut).removeClass("shown"),e("html").animate({marginTop:this.origHtmlMargin},this.options.speedOut,"swing",t),e("#navbarWrapper").animate({top:0},this.options.speedOut,"swing",e.proxy(this.setNavBarPositionToFixed,this)),e(window).off("scroll.smartbanner")},close:function(e){e.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(){this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,i){var n=new Date;n.setDate(n.getDate()+i),t=escape(t)+(null==i?"":"; expires="+n.toUTCString()),document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,i,n,r=document.cookie.split(";");for(t=0;r.length>t;t++)if(i=r[t].substr(0,r[t].indexOf("=")),n=r[t].substr(r[t].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==e)return unescape(n);return null},setNavBarPositionToFixed:function(){e("#navbarWrapper").css("position","fixed")},setNavBarPositionToAbs:function(){e("#navbarWrapper").css("position","absolute")},switchType:function(){var t=this;this.hide(function(){t.type="android"==t.type?"ios":"android";var i=e("android"==t.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(i)[1],e("#smartbanner").detach(),t.create(),t.show()})}},e.smartbanner=function(i){var n=e(window),r=n.data("typeahead"),a="object"==typeof i&&i;r||n.data("typeahead",r=new t(a)),"string"==typeof i&&r[i]()},e.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null},e.smartbanner.Constructor=t}(window.jQuery);