webmd=window.webmd||{};webmd.p=window.webmd.p||{};webmd.p.fe_content_update=function(c){var a,f,e,d,b;if(webmd.oas.timeout){clearTimeout(webmd.oas.timeout)}$.each(webmd.oas.elements_mapping,function(i,n){var h,l=c[i],m="",k="othr",g="";if(typeof l!=="undefined"&&l!=="null"){e=$.inArray(i,webmd.oas.mapping[n])+1;link_position_plus_one=$.inArray(i,webmd.oas.mapping[n])+2;if(typeof l.type!=="undefined"&&l.type!=="null"&&l.type!==""){m="type_";g=" <i> </i>";k=l.type}d=$.extend({link_position_plus_one:link_position_plus_one,link_position:e,type_prefix:m,onclick_append:k,i_tag:g},l);if(typeof d.alt_text=="undefined"||$.trim(d.alt_text)==""){d.alt_text=d.alt||d.text||""}h=webmd.substitute(webmd.oas.templates[n],d).replace(/\{[^\}]*\}|^\s*|\s*$/g,"");if(typeof l.img!=="undefined"&&l.img!==""){var j=webmd.oas.imageTimeout(i);webmd.load({image:l.img,load:function(){webmd.oas.showElement(i,h,j)}})}else{webmd.oas.showElement(i,h)}}else{webmd.oas.showElement(i)}});$(document).trigger("OASdone")};webmd.oas={templates:{},mapping:{},ruleset:{},elements_array:[],elements_mapping:{},query:"",channel:"",params:{},default_timeout:2000,load_automatically:true,executeImmediately:(function(){if(window.location.protocol!=="https:"){$("html").addClass("oas");$(document).bind("beacon_load",function(){webmd.oas.init()})}return true}()),formatChannel:function(a){if(typeof a==="string"){return a.toLowerCase().replace(/[^a-z]/g,"").replace("guidetocmini","")}else{return""}},channelOverride:{overrides:{acne:"acnemini",atrialfibrillation:"atrialfibrillationmini",parentingaatoc:"healthparenting",alcoholabuse:"alcoholabusemini",premenstrualsyndrome:"pmsmini",quittingsmokingmini:"smokingcessationmini",genitalwarts:"hpvgenitalwartsmini",bph:"prostateenlargementbphmini",benignprostatichyperplasia:"prostateenlargementbphmini",deepveinthrombosis:"dvtmini",chronicfatigue:"chronicfatiguesyndromemini",bingeeating:"bingeeatingdisordermini",knee:"kneepainmini",anorexia:"anorexianervosamini",bulimia:"bulimianervosamini",autism:"autismmini",bingeeatingdisorder:"bingeeatingdisordermini",birthcontrol:"birthcontrolmini",bladdercancer:"bladdercancermini",braincancer:"braincancermini",bulimianervosa:"bulimianervosamini",carpaltunnelsyndrome:"carpaltunnelsyndromemini",cataracts:"cataractsmini",celiacdisease:"celiacdiseasemini",cervicalcancer:"cervicalcancermini",chronicfatiguesyndrome:"chronicfatiguesyndromemini",copd:"copdmini",crohnsdisease:"crohnsdiseasemini",dvt:"dvtmini",earinfection:"earinfectionmini",eczema:"eczemamini",endometriosis:"endometriosismini",foodpoisoning:"foodpoisoningmini",hairloss:"hairlossmini",heartfailure:"heartfailuremini",hpvgenitalwarts:"hpvgenitalwartsmini",kidneystones:"kidneystonesmini",kneepain:"kneepainmini",maculardegeneration:"maculardegenerationmini",medicare:"medicaremini",metabolicsyndrome:"metabolicsyndromemini",nonhodgkinslymphoma:"nonhodgkinslymphomamini",pancreaticcancer:"pancreaticcancermini",pms:"pmsmini",postpartumdepression:"postpartumdepressionmini",prostateenlargementbph:"prostateenlargementbphmini",psoriasis:"psoriasismini",psoriaticarthritis:"psoriaticarthritismini",shingles:"shinglesmini",sleepapnea:"sleepapneamini",smokingcessation:"smokingcessationmini",stressmanagement:"stressmanagementmini",ulcerativecolitis:"ulcerativecolitismini",uterinefibroids:"uterinefibroidsmini",vaccines:"vaccinesmini",weightlosssurgery:"weightlosssurgerymini",palliativecare:"palliativecaremini"},checkOverride:function(a){var b,c;for(b in this.overrides){c=new RegExp(b,"i");if(c.test(a)){webmd.debug("Over-ride key: "+b+"\nChannel Over-ride: "+a+" -> "+this.overrides[b]);this.mcOverride=this.overrides[b];return true}}},mcOverride:""},setChannel:function(){var a,b=this.formatChannel(window.s_channel_mini_topic_guide)||this.formatChannel(window.s_channel_mini)||"",d=this.formatChannel(window.s_channel_health)||"",c=this.formatChannel(window.s_channel_super_portal)||"";webmd.debug("1) s_channel_mini_topic_guide: "+window.s_channel_mini_topic_guide+"\nChannel format:"+b+"\n2) s_channel_health: "+window.s_channel_health+"\nChannel format:"+d+"\n3) s_channel_super_portal: "+window.s_channel_super_portal+"\nChannel format:"+c+"\n4) s_package_name: "+window.s_package_name+"\nChannel format:"+this.formatChannel(window.s_package_name)+"\n5) s_business_reference: "+window.s_business_reference+"\nChannel format:"+this.formatChannel(window.s_business_reference));if(/\/a-to-z-guides\//i.test(window.location.pathname)){webmd.debug("Channel Over-ride: navazpage");a="navazpage"}else{if(this.channelOverride.checkOverride(b)){a=this.channelOverride.mcOverride}else{if(!b&&!d&&!c){a=this.formatChannel(window.s_package_name)||this.formatChannel(window.s_business_reference)||""}else{if(d&&!b&&!c){a=d}else{if(b&&!d&&!c){a=b}else{if(c&&!b&&!d){a=c}else{if(b&&d){if(/guide|topic/i.test(b)){a=d}else{a=b}}else{if(d&&c){a=d}else{if(b&&c){if(/guide|topic/i.test(b)){a=c}else{a=b}}}}}}}}}}webmd.debug("Active Channel: "+a);this.channel=a;return a},setTemplates:function(){var a=this;$(".oas_template").each(function(){var b=$(this).attr("id");a.templates[b]=$("#"+b).html();if(typeof webmd.oas.mapping[b]!=="undefined"){$.each(webmd.oas.mapping[b],function(c,d){a.elements_array.push(d);a.elements_mapping[d]=b})}})},imageTimeout:function(a){return setTimeout(function(){$("#"+a).css("visibility","visible")},this.default_timeout)},showElement:function(b,a,c){if(typeof c!=="undefined"){clearTimeout(c)}if(typeof a==="string"){$("#"+b).html(a)}$("#"+b).css("visibility","visible")},startTimeout:function(){var a=this;a.timeout=setTimeout(function(){webmd.p.fe_content_update=function(){return false};$("html").removeClass("oas");$(document).trigger("OASdone")},a.default_timeout)},loadOAS:function(){var a=this;a.query="http://ls.webmd.com/2/webmd/"+a.channel+"/"+((Math.floor(Math.random()*1000000000))+1000000000)+"@Position1,"+a.elements_array.join(",")+",Position2?_RM_NO_COMMENT_";if((window.location.href.indexOf("preview.webmd")!==-1)||(window.location.href.indexOf("staging.webmd")!==-1)){a.query+="&env=1"}if(a.params){$.each(a.params,function(b,c){if(typeof c==="object"){$.each(c,function(d,e){a.query=webmd.url.appendParam(b,e,a.query)})}else{a.query=webmd.url.appendParam(b,c,a.query)}})}webmd.debug("OAS Query URL: "+a.query);webmd.load({js:a.query})},init:function(){if(($(".oas_template").length>0)&&(this.setChannel())){this.setTemplates();this.startTimeout();if(this.load_automatically){this.loadOAS()}}else{$("html").removeClass("oas")}}};