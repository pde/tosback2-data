/* From: wfe5-ewr : 4163 */
(function(root,hard){root.huff=({init:function(){this.jquery=hard?jQuery:jQuery.noConflict();this.jquery.ajaxSetup({cache:true});this.events={};this.versions=undefined;this.styles={};this.units={};this.unit('dom/ready',this.jquery);this.unit('jquery',this.jquery,true);var t=this;window.onerror=function(msg,url,line){t.error(msg?new Error(msg,url,line):window.error);};this.beta=(location.host.toLowerCase().indexOf('beta')>0||location.host.toLowerCase().indexOf('amazon')>0);this.blogger=location.host.toLowerCase().indexOf('blogger')===0;this.editorial=location.host.toLowerCase().indexOf('editorial')===0;this.nonminified=location.search.indexOf('no-min=')>0?'no-min=1&':'';this.host=this.beta||this.editorial||this.blogger?location.host:'s.huffpost.com';this.path={js:location.protocol+'//'+this.host+'/assets/js.php?'+this.nonminified+'f=',css:location.protocol+'//'+this.host+'/assets/css.php?f='};this.env={async:document.createElement('script').async===true};(this.env.webkit=/AppleWebKit\//.test(navigator.userAgent))||(this.env.ie=/MSIE/.test(navigator.userAgent))||(this.env.opera=/Opera/.test(navigator.userAgent))||(this.env.gecko=/Gecko\//.test(navigator.userAgent))||(this.env.unknown=true);this.console=true;this.waiting={};return this;},run:function(f){try{'function'===typeof f&&f.call(this);}catch(e){this.error(e);}},ready:function(c){this.run(function(){this.jquery(c);});},log:function(){this.pass('log',arguments);},debug:function(){this.pass('debug',arguments);},error:function(e){this.pass('error',arguments);},unit:function(name,code,sync){var t=this,f=function(m){t.units[name]=m;t.fire('load/'+name+'.js');t.emit('unit',name,m);};try{t.units[name]=false;if('function'===typeof code)
sync?f(code):new code(f);else
sync||'function'!==typeof code.init?f(code):code.init(f);}catch(e){t.error(e);f();}},use:function(){var t=this,result=[],a=Array.prototype.slice.call(arguments,0),callback='function'===typeof a[a.length-1]?a.pop():null,count=a.length,load=[],ret=function(i,r){result[i]=r;if(--count===0)try{'function'===typeof callback&&callback.apply(t,result);}catch(e){t.error(e);}};setTimeout(function(){for(var i=0;i<a.length;i++)(function(name,i){if(name in t.units){if(false===t.units[name]){t.waiting[name]=true;t.on('load/'+name+'.js',function(){delete t.waiting[name];ret(i,t.units[name]);})}else{ret(i,t.units[name]);}}else{load.push('_'+name+'.js');t.units[name]=false;t.waiting[name]=true;t.on('load/'+name+'.js',function(){delete t.waiting[name];ret(i,t.units[name]);})}})(a[i],i);if(load.length)t.vers(load,function(v){t.jquery.getScript(t.path.js+load.join(',')+v);});},0);},js:function(){var t=this,a=Array.prototype.slice.call(arguments,0),c='function'===typeof a[a.length-1]&&a.pop();t.vers(a,function(v){'object'===typeof a&&(a=a.join(','));t.jquery.getScript(t.path.js+a+v,c);});},css:function(){arguments=Array.prototype.slice.call(arguments,0);var t=this,styles=[],callback='function'===typeof arguments[arguments.length-1]?arguments.pop():null,count=arguments.length,ret=function(){if(--count===0)try{for(var i=0;i<styles.length;i++){t.styles[styles[i]]=true;t.fire('load/'+styles[i]+'.css');}
'function'===typeof callback&&callback();}catch(e){t.error(e);}};for(var i=0;i<arguments.length;i++){var name=arguments[i];switch(t.styles[name]){case true:ret();break;case false:t.on('load/'+name+'.css',ret);break;default:styles.push(name);t.styles[name]=false;t.on('load/'+name+'.css',ret);}}
if(styles.length===0)return;t.vers(styles,'.css',function(v){var node,counter=0,url=t.path.css+styles.join('.css,')+'.css'+v
node=t.jquery('<link>').attr({href:url,rel:'stylesheet',charset:'utf-8'});if(t.env.webkit||t.env.gecko){(function(){for(var s=document.styleSheets,i=s.length;--i>=0;)
if(s[i].href===url)return ret();++counter<200?setTimeout(arguments.callee,50):ret();})()}else{node[0].onload=node[0].onerror=ret}
node.appendTo('head');});},on:function(event,callback){this.events[event]=this.events[event]||(this.events[event]=[]);this.events[event].push(callback);return this;},once:function(event,callback){this.events[event]=this.events[event]||(this.events[event]=[]);var len=this.events.length;this.events[event].push(function(){callback();this.events[event].splice(len,1);if(this.events[event].length===0)
delete this.events[event];});},emit:function(){arguments=Array.prototype.slice.call(arguments,0);var event=arguments.shift();if(undefined===this.events[event])return;for(var i=0;i<this.events[event].length;i++){try{this.events[event][i].apply(this,arguments);}catch(e){this.error(e);}}},pass:function(event,args){args=Array.prototype.slice.call(args,0);args.unshift(event);this.emit.apply(this,args);},fire:function(){this.emit.apply(this,arguments);delete this.events[name];},v:function(versions){if(undefined===versions){this.versions=false;return;}
if('object'===typeof this.versions){for(var i in versions)if(versions.hasOwnProperty(i))
this.versions[i]=versions[i];}else{this.versions=versions;this.fire('load/v.js');}},vers:function(files,ext,callback){var t=this,a=arguments,w=+new Date();if(t.beta)return(callback||ext||function(s){return s;})('&r'+w);if(undefined===t.versions){t.versions=false;t.jquery.getScript(t.path.js+'v.js&'+(t.vv?'v'+t.vv:'r'+w),function(){a.callee.apply(t,a);});}else if(t.versions===false){t.on('load/v.js',function(){a.callee.apply(t,a);});}else{if(undefined===callback)callback=ext,ext=undefined;var v=0;ext=ext||'';for(var i=0;i<files.length;i++)
v=v<this.versions[files[i]+ext]?this.versions[files[i]+ext]:v;v=v?'&v'+(v*12345):'';return'function'===typeof callback?callback(v):v;}}}).init();if(!hard)try{var c=root.console,empty=function(){};if(root.console){root.console=undefined;empty.prototype=c;}
var r=root.console=new empty;var methods=['assert','debug','error','info','log','warn'];for(var i=methods.length;i--;){(function(m){root.console[m]=function(){try{root.console=c;root.huff.console&&c&&m in c&&c[m].apply(c,arguments);root.huff.pass(m,arguments);root.console=r;}catch(e){}}})(methods[i]);}}catch(e){root.huff.error(e);}})(window,window.IS_CHROMEAPP||window.IS_NEWSGLIDE||window.KEEP_$);
var _port=document.location.port;var HPConfig={current_vertical_name:'',current_web_domain:document.location.hostname+((!_port||_port==''||_port==80)?"":":"+_port),current_web_address:"http://"+document.location.hostname+((!_port||_port==''||_port==80)?"":":"+_port),timestamp_for_clearing_js:0,slideshow_mode:0,blog_id:0,comments_update_interval:0,comments_update_for_all_users:false,wide_format:false,enable_fb_widgets:false,page_data:{},entry_design:"",ipad_application:false,entry_design:"",hp_static_domain:'',display_domain:'',load_big_slideshow_from:0,current_vertical_color:'#058B7B',current_vertical_color_light:'#005F4C',site:false,huffsite:"",terms_link:"",privacy_link:""};
H={};H.namespace=function(namespace,root,handler){if(typeof namespace!=='string')
throw new TypeError('@namespace param should be a string');var d=namespace.split("."),o=root||window;for(var i=0,len=d.length;i<len;i++){var name=d[i];if(typeof o[name]==='undefined')
o[name]=(i==(len-1)&&typeof handler!='undefined')?handler:{};o=o[name];}
return o;};H.log=function(){if(typeof console!=='undefined'&&typeof console.log==='function')
console.log.apply(console,arguments);};H.err=function(variable){if(typeof console!=='undefined'&&typeof console.error==='function')
console.error.apply(console,arguments);return false;};H.template=function(template){if(typeof template!=='string')
throw new TypeError('@template param should be string');var matches=[];return{render:function(context){var match,tpl=template;if(!matches.length){var matcher=/%{(\w+)}/g;while(match=matcher.exec(template))
matches.push(match[1]);}
var len=matches.length;for(var i=len;i--;){var name=matches[i];if(typeof context[name]=='undefined')
continue;tpl=tpl.replace('%{'+name+'}',context[name]);}
return tpl;}};};H.namespace('H.App');H.App.instance=function(){this.components={};this.fn=H.App.Plugins.loadDefault();this.data={};if(typeof WWW_DOMAIN!=='undefined'){this.data.baseUrl=WWW_DOMAIN;this}else if(HPConfig.current_web_address!==''){this.data.baseUrl="http://"+HPConfig.current_web_address;}
this.JS_LOADER_URL=this.data.baseUrl+'/assets/js.php?f=';this.loadPluginsQueue=[];this.loadPluginsQueueNames=[];};H.App.instance.prototype={registerComponent:function(name,handler){if(typeof handler!=='function'||typeof name!=='string')
throw new TypeError('Unable to register component');this.components[name]=handler(this.fn,this.data);},unregisterComponent:function(name){if(typeof name!=='string')
throw new TypeError('@name param should be string');if(typeof this.components[name]==='undefined')
return H.err('Could not find component '+name);if(typeof this.components[name].unload==='function')
this.components[name].unload();delete this.components[name];return true;},use:function(name){if(typeof name==='string')
name=name.split(/,\s*/);if({}.toString.call(name)!=='[object Array]')
throw new TypeError('@name param suppose to be an array or string');var n,handler,len=name.length;for(var i=len;i--;){n=name[i];handler=H.App.Plugins.get(n);if(handler){H.namespace(n,this.fn,handler);}else{this.loadPluginsQueue.push(n);this.loadPluginsQueueNames.push('hp_plugins_'+n+'.js');}}},appendScript:function(path,callback,container){var container=container||document.getElementsByTagName('head')[0],script=document.createElement('script');var me=this;if(typeof callback==='function'){script.onreadystatechange=function(){if(this.readyState=='complete')
callback(me);};script.onload=function(){callback(me)};}
script.type='text/javascript';script.src=path;container.appendChild(script);},getLib:function(){return this.fn;},getPlugin:function(key){return H.App.Plugins.get(key);},load:function(name){this._checkSync(function(me){if(typeof me.components[name]!=='undefined')
me.components[name].load();});},loadAll:function(){this._checkSync(function(me){for(name in me.components){me.components[name].load();}});},_checkSync:function(callback){if(typeof callback!=='function')
throw new TypeError('@callback param suppose to be function');if(this.loadPluginsQueue.length>0){var path=this.loadPluginsQueueNames.join(',');this.appendScript(this.JS_LOADER_URL+path,function(me){var name,len=me.loadPluginsQueue.length;for(var i=len;i--;){name=me.loadPluginsQueue[i];if(handler=H.App.Plugins.get(name))
H.namespace(name,me.fn,handler);else
H.err('Failed to load plugin: '+name);}
me.loadPluginsQueueNames=[]
me.loadPluginsQueue=[];callback(me);});}else{callback(this);}},lazyLoad:{UA:false,pending:null,queue:[],load:function(urls,callback,argument,scope){var head=document.getElementsByTagName("head")[0],i,script;if(urls){urls=(typeof(urls)==="string")?[urls]:urls;for(i=0;i<urls.length;++i){this.queue.push({url:urls[i],callback:i===urls.length-1?callback:null,argument:argument,scope:scope});}}
if(this.pending||!(this.pending=this.queue.shift())){return;}
if(!this.UA){this.UA={gecko:0,ie:0,webkit:0};var nua=navigator.userAgent,m=nua.match(/AppleWebKit\/(\S*)/);if(m&&m[1]){this.UA.webkit=parseFloat(m[1]);}else{m=nua.match(/MSIE\s([^;]*)/);if(m&&m[1]){this.UA.ie=parseFloat(m[1]);}else if((/Gecko\/(\S*)/).test(nua)){this.UA.gecko=1;m=nua.match(/rv:([^\s\)]*)/);if(m&&m[1]){this.UA.gecko=parseFloat(m[1]);}}}}
script=document.createElement("script");script.type="text/javascript";script.src=this.pending.url;if(this.UA.ie){var _this=this;script.onreadystatechange=function(){if(this.readyState==='loaded'||this.readyState==='complete'){_this.requestComplete();}};}else if(this.UA.gecko||this.UA.webkit>=420){script.onload=this.requestComplete;script.onerror=this.requestComplete;}
head.appendChild(script);},loadOnce:function(urls,callback,argument,scope){var newUrls=[],scripts=document.getElementsByTagName('script'),i,j,loaded,url;urls=(typeof(urls)==="string")?[urls]:urls;for(i=0;i<urls.length;++i){loaded=false;url=urls[i];for(j=0;j<scripts.length;++j){if(url===scripts[j].src||(window.location.protocol+"//"+HPConfig.current_web_domain+url)===scripts[j].src){loaded=true;break;}}
if(!loaded){newUrls.push(url);}}
if(newUrls.length>0){this.load(newUrls,callback,argument,scope);return;}
if(!callback){return;}
callback.call(scope||window,argument);},requestComplete:function(){var _this=HuffApp.lazyLoad;if(_this.pending.callback){_this.pending.callback.call(_this.pending.scope||window,_this.pending.argument);}
_this.pending=null;if(_this.queue.length){_this.load();}}}};
H.namespace('H.App.Plugins');H.App.Plugins.fn={};H.App.Plugins.add=function(name,func,chainable){if(typeof func!='function')return false;var n=H.namespace(name,this.fn,func)};H.App.Plugins.get=function(key){var path=key.split("."),p=this.fn,name;for(i in path){if(!path.hasOwnProperty(i)){continue;}
name=path[i];if(typeof(p[name])=='undefined'){return false;}
p=p[name];}
return p;};H.App.Plugins.loadDefault=function()
{var defaults=['event','dom','ajax','css'];res={};for(key=0;key<defaults.length;key++){if(!defaults.hasOwnProperty(key))continue;H.namespace(defaults[key],res,this.get(defaults[key]));}
return res;};
H.App.Plugins.add('event.notify',function(object,event,data){});H.App.Plugins.add('event.listen',function(object,event,handler,args,scope){if(typeof(object)==="string"){object=object.replace("#","");}
YAHOO.util.Event.addListener(object,event,handler,args,scope);});H.App.Plugins.add('event.remove',function(object,event,handler){if(typeof(object)==="string"){object=object.replace("#","");}
YAHOO.util.Event.removeListener(object,event,handler);});H.App.Plugins.add('event.ready',function(handler){YAHOO.util.Event.onDOMReady(handler);});H.App.Plugins.add('event.load',function(object,handler,args,scope){if(typeof(object)==="string"){object=object.replace("#","");}
YAHOO.util.Event.onContentReady(object,handler,args,scope);});H.App.Plugins.add('event.on_avaliable',function(object_id,handler,args,scope){object_id=object_id.replace("#","");YAHOO.util.Event.onAvailable(object_id,handler,args,scope);});H.App.Plugins.add('css',function(object,propertyName,value){if(value===null){return YAHOO.util.Dom.getStyle(object,propertyName);}
return YAHOO.util.Dom.setStyle(object,propertyName,value);});H.App.Plugins.add('css.hasClass',function(object,className){return YAHOO.util.Dom.hasClass(object,className);});H.App.Plugins.add('css.addClass',function(object,className){return YAHOO.util.Dom.addClass(object,className);});H.App.Plugins.add('css.removeClass',function(object,className){return YAHOO.util.Dom.removeClass(object,className);});H.App.Plugins.add('dom.get',function(selector){return YAHOO.util.Selector.query(selector);},true);H.App.Plugins.add('dom.getNode',function(selector){var elements=YAHOO.util.Selector.query(selector);if(elements.length>1){return elements;}
if(elements.length==1){return elements[0];}
return false;},true);H.App.Plugins.add('dom.getNodes',function(selector){return YAHOO.util.Selector.query(selector);},true);H.App.Plugins.add('dom.add',function(tag,attributes){},true);H.App.Plugins.add('dom.documentHeight',function(){return YAHOO.util.Dom.getDocumentHeight();});H.App.Plugins.add('dom.documentWidth',function(){return YAHOO.util.Dom.getDocumentWidth();});H.App.Plugins.add('dom.getXY',function(object){if(typeof(object)==="string"){object=object.replace("#","");}
var offset=YAHOO.util.Dom.getXY(object);return{left:offset[0],top:offset[1]};});H.App.Plugins.add('dom.scrollTop',function(){return self.pageYOffset||(document.documentElement&&document.documentElement.scrollTop)||(document.body&&document.body.scrollTop);});H.App.Plugins.add('ajax.post',function(){var config;if(typeof(arguments[0])==="object"){var config=arguments[0];config.method="GET";}else{config={method:"GET",url:arguments[0],success:arguments[1]||null,argument:arguments[2]||null,scope:arguments[3]||null};if(!config.scope&&config.argument){config.scope=config.argument;config.argument=null;}}
var success_fn=null;if(config.success){success_fn=function(yui_responce_object){config.success.apply(config.scope,[yui_responce_object.responseText,yui_responce_object.statusText,yui_responce_object.argument]);}}
var failure_fn=null;if(config.failure){failure_fn=function(yui_responce_object){config.failure.apply(config.scope,[yui_responce_object.statusText,yui_responce_object.argument]);}}
post_data=config.request_data||"";var callback={success:success_fn,failure:failure_fn,argument:config.argument||null,scope:config.scope||null,timeout:config.timeout||null};return YAHOO.util.Connect.asyncRequest("POST",config.url,callback,post_data);});H.App.Plugins.add('ajax.get',function(){var config;if(typeof(arguments[0])==="object"){var config=arguments[0];config.method="GET";}else{config={method:"GET",url:arguments[0],success:arguments[1]||null,argument:arguments[2]||null,scope:arguments[3]||null};if(!config.scope&&config.argument){config.scope=config.argument;config.argument=null;}}
var success_fn=null;if(config.success){success_fn=function(yui_responce_object){config.success.apply(config.scope,[yui_responce_object.responseText,yui_responce_object.statusText,yui_responce_object.argument]);}}
var failure_fn=null;if(config.failure){failure_fn=function(yui_responce_object){config.failure.apply(config.scope,[yui_responce_object.statusText,yui_responce_object.argument]);}}
var callback={success:success_fn,failure:failure_fn,argument:config.argument||null,scope:config.scope||null,timeout:config.timeout||null};YAHOO.util.Connect.asyncRequest("GET",config.url,callback);});H.App.Plugins.add('ajax.ping',function(url){YAHOO.util.Connect.asyncRequest("GET",url);});
var HuffApp=new H.App.instance();var HAL=HuffApp.getLib();
(function($){if(!document.defaultView||!document.defaultView.getComputedStyle){var oldCurCSS=jQuery.curCSS;jQuery.curCSS=function(elem,name,force){if(name==='background-position'){name='backgroundPosition';}
if(name!=='backgroundPosition'||!elem.currentStyle||elem.currentStyle[name]){return oldCurCSS.apply(this,arguments);}
var style=elem.style;if(!force&&style&&style[name]){return style[name];}
return oldCurCSS(elem,'backgroundPositionX',force)+' '+oldCurCSS(elem,'backgroundPositionY',force);};}
var oldAnim=$.fn.animate;$.fn.animate=function(prop){if('background-position'in prop){prop.backgroundPosition=prop['background-position'];delete prop['background-position'];}
if('backgroundPosition'in prop){prop.backgroundPosition='('+prop.backgroundPosition;}
return oldAnim.apply(this,arguments);};function toArray(strg){strg=strg.replace(/left|top/g,'0px');strg=strg.replace(/right|bottom/g,'100%');strg=strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var res=strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];}
$.fx.step.backgroundPosition=function(fx){if(!fx.bgPosReady){var start=$.curCSS(fx.elem,'backgroundPosition');if(!start){start='0px 0px';}
start=toArray(start);fx.start=[start[0],start[2]];var end=toArray(fx.options.curAnim.backgroundPosition);fx.end=[end[0],end[2]];fx.unit=[end[1],end[3]];fx.bgPosReady=true;}
var nowPosX=[];nowPosX[0]=((fx.end[0]-fx.start[0])*fx.pos)+fx.start[0]+fx.unit[0];nowPosX[1]=((fx.end[1]-fx.start[1])*fx.pos)+fx.start[1]+fx.unit[1];fx.elem.style.backgroundPosition=nowPosX[0]+' '+nowPosX[1];};})(jQuery);
(function(d){function g(a){var b=a||window.event,i=[].slice.call(arguments,1),c=0,h=0,e=0;a=d.event.fix(b);a.type="mousewheel";if(a.wheelDelta)c=a.wheelDelta/120;if(a.detail)c=-a.detail/3;e=c;if(b.axis!==undefined&&b.axis===b.HORIZONTAL_AXIS){e=0;h=-1*c}if(b.wheelDeltaY!==undefined)e=b.wheelDeltaY/120;if(b.wheelDeltaX!==undefined)h=-1*b.wheelDeltaX/120;i.unshift(a,c,h,e);return d.event.handle.apply(this,i)}var f=["DOMMouseScroll","mousewheel"];d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=f.length;a;)this.addEventListener(f[--a],g,false);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],g,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f,"border"+this+"Width",true))||0;if(m)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");if("area"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}});c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;var d=b&&b==="left"?"scrollLeft":"scrollTop",e=false;if(a[d]>0)return true;a[d]=1;e=a[d]>0;a[d]=0;return e},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}})}})(jQuery);
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+(parseInt(c.curCSS(this,"marginRight",true))||0),w=m+q+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=m/2;i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);
(function(d){d.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,f;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!(a.options.disabled||a.element.attr("readonly"))){f=false;var e=d.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:a._move("previousPage",c);break;case e.PAGE_DOWN:a._move("nextPage",c);break;case e.UP:a._move("previous",c);c.preventDefault();break;case e.DOWN:a._move("next",c);c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:if(a.menu.active){f=true;c.preventDefault()}case e.TAB:if(!a.menu.active)return;a.menu.select(c);break;case e.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){if(a.term!=a.element.val()){a.selectedItem=null;a.search(null,c)}},a.options.delay);break}}}).bind("keypress.autocomplete",function(c){if(f){f=false;c.preventDefault()}}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a.element.val()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",b)[0]).mousedown(function(c){var e=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(g){g.target!==a.element[0]&&g.target!==e&&!d.ui.contains(e,g.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(c,e){var g=e.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:g})&&/^key/.test(c.originalEvent.type)&&a.element.val(g.value)},selected:function(c,e){var g=e.item.data("item.autocomplete"),h=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=h;setTimeout(function(){a.previous=h;a.selectedItem=g},1)}false!==a._trigger("select",c,{item:g})&&a.element.val(g.value);a.term=a.element.val();a.close(c);a.selectedItem=g},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&b&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,b,f;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(c,e){e(d.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source==="string"){f=this.options.source;this.source=function(c,e){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:f,data:c,dataType:"json",success:function(g,h,i){i===a.xhr&&e(g);a.xhr=null},error:function(g){g===a.xhr&&e([]);a.xhr=null}})}}else this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(!this.options.disabled&&a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,b){var f=this;d.each(b,function(c,e){f._renderItem(a,e)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate()}else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var f=RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(c){return f.test(c.label||c.value||c)})}})})(jQuery);(function(d){d.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){if(d(b.target).closest(".ui-menu-item a").length){b.preventDefault();a.select(b)}});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(b){a.activate(b,d(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var f=b.offset().top-this.element.offset().top,c=this.element.attr("scrollTop"),e=this.element.height();if(f<0)this.element.attr("scrollTop",c+f);else f>=e&&this.element.attr("scrollTop",c+f-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,f){if(this.active){a=this.active[a+"All"](".ui-menu-item").eq(0);a.length?this.activate(f,a):this.activate(f,this.element.children(b))}else this.activate(f,this.element.children(b))},nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(".ui-menu-item:first"));else{var b=this.active.offset().top,f=this.element.height(),c=this.element.children(".ui-menu-item").filter(function(){var e=d(this).offset().top-b-f+d(this).height();return e<10&&e>-10});c.length||(c=this.element.children(".ui-menu-item:last"));this.activate(a,c)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(a){if(this.hasScroll())if(!this.active||this.first())this.activate(a,this.element.children(".ui-menu-item:last"));else{var b=this.active.offset().top,f=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-b+f-d(this).height();return c<10&&c>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(a,result)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);
var jimAuld=window.jimAuld||{};jimAuld.utils=jimAuld.utils||{};jimAuld.utils.cookies={get:function(cookieName)
{var cookieNameStart,valueStart,valueEnd,value;cookieNameStart=document.cookie.indexOf(cookieName+'=');if(cookieNameStart<0)
{return null;}
valueStart=document.cookie.indexOf(cookieName+'=')+cookieName.length+1;valueEnd=document.cookie.indexOf(";",valueStart);if(valueEnd==-1)
{valueEnd=document.cookie.length;}
value=document.cookie.substring(valueStart,valueEnd);value=unescape(value);if(value=="")
{return null;}
return value;},set:function(cookieName,value,hoursToLive,path,domain,secure,in_seconds)
{var expireString,timerObj,expireAt,pathString,domainString,secureString,setCookieString;if(!hoursToLive||typeof hoursToLive!='number'||parseInt(hoursToLive)=='NaN')
{expireString="";}
else
{timerObj=new Date();hoursToLive=parseInt(hoursToLive);if(!(in_seconds)){hoursToLive=hoursToLive*60*60;}
timerObj.setTime(timerObj.getTime()+hoursToLive*1000);expireAt=timerObj.toGMTString();expireString="; expires="+expireAt;}
pathString="; path=";(!path||path=="")?pathString+="/":pathString+=path;domainString="; domain=";(!domain||domain=="")?domainString+=window.location.hostname.replace(/www\./,''):domainString+=domain;(secure===true)?secureString="; secure":secureString="";value=escape(value);setCookieString=cookieName+"="+value+expireString+pathString+domainString+secureString;document.cookie=setCookieString;},del:function(cookieName,path,domain)
{(!path||!path.length)?path="":path=path;(!domain||!domain.length)?domain="":domain=domain;jimAuld.utils.cookies.set(cookieName,"",-8760,path,domain);},test:function()
{jimAuld.utils.cookies.set('cT','acc');var runTest=jimAuld.utils.cookies.get('cT');if(runTest=='acc')
{jimAuld.utils.cookies.del('cT');testStatus=true;}
else
{testStatus=false;}
return testStatus;}};var HuffCookies=jimAuld.utils.cookies;HuffCookies.getCookiePrefix=function()
{var url=location.hostname;if(HPConfig.site)
url=HPConfig.huffsite;var bport='';bport=(""==location.port)?'80':location.port;if((/\.beta\./.test(url))||(/\.beta2\./.test(url)))
{return'beta'+bport+'_';}
else
{return'';}};HuffCookies.getUserName=function()
{return this.get(this.getCookiePrefix()+'huffpost_user');};HuffCookies.getUserGuid=function()
{return this.get(this.getCookiePrefix()+'huffpost_user_guid');};HuffCookies.getLastLogin=function()
{return;};HuffCookies.getSNPstatus=function()
{if(this.getUserName())
return 1;else
return 0;};HuffCookies.getUserInfluence=function()
{HPUtil.removeEmptyInfluence();var c=this.get(this.getCookiePrefix()+'huffpost_influence_'+HuffCookies.getUserId());if(!c||c=='')
{c=HuffCookies.userInfluence;HPUtil.setInfluenceCookie(JSON.stringify(c));}else{c=JSON.parse(c);var past_date=new Date();past_date.setDate(past_date.getDate()-30);past_date=Date.parse(past_date.toString());c.bages=HuffCookies.getLevels();if(c.blogged.check_date<past_date){c.blogged.value=0;c.blogged.check_date=Date.parse(new Date().toString());}
if(c.emailed.check_date<past_date){c.emailed.value=0;c.emailed.check_date=Date.parse(new Date().toString());}
if(c.shared.check_date<past_date){c.shared.value=0;c.shared.check_date=Date.parse(new Date().toString());}
if(c.commented.check_date<past_date){c.commented.value=0;c.commented.check_date=Date.parse(new Date().toString());}}
return c;};HuffCookies.setCookie=function(cookieName,value,ttl)
{var cookie_preffix=this.getCookiePrefix();if(!ttl){ttl=336;}else if(ttl==-1){ttl=0;}
huff.use('conf',function(c){c.get('cookie/domain',function(cookie_domain)
{var domain=cookie_domain||HuffCookies.domainCookie();HuffCookies.set(cookie_preffix+cookieName,value,ttl,'/','.'+domain);});});return true;};HuffCookies.getCookie=function(cookieName)
{return this.get(HuffCookies.getCookiePrefix()+cookieName);};HuffCookies.domainCookie=function()
{var domain=location.hostname;domain=domain.replace(/www\./,'');return domain;};HuffCookies.getUserId=function()
{return this.get(this.getCookiePrefix()+'huffpost_user_id');};HuffCookies.getLevels=function()
{return this.get(this.getCookiePrefix()+'huffpost_levels');};HuffCookies.destroyCookie=function(name)
{var prefix=this.getCookiePrefix();return this.del(prefix+name,'/','.'+HuffCookies.domainCookie());};HuffCookies.userInfluence={commented:{'value':0,'check_date':Date.parse(new Date().toString())},blogged:{'value':0,'check_date':Date.parse(new Date().toString())},shared:{'value':0,'check_date':Date.parse(new Date().toString())},emailed:{'value':0,'check_date':Date.parse(new Date().toString())},bages:HuffCookies.getLevels()}
HuffCookies.userPrefs={pending:false,subvalues:{'facebook':0,'twitter':1,'read_tracking':2,'gfc':3,'yahoo':4,'google':5,'linkedin':6,'aol':7,'winlive':8},subvalues_abbr:{0:'fb',1:'tw',2:'rt',3:'gfc',4:'yh',5:'gfc',6:'linkedin',7:'aol',8:'winlive'},charmap:{'facebook':'F','twitter':'T','read_tracking':'R','gfc':'G','yahoo':'Y','google':'L','registered':'H','anonymous':'A'},cookie_name:'huffpost_prefs',get:function(key)
{if(!HuffCookies.getUserId())
return false;if(this.pending)
return null;var val=this._getFromOffset(this.subvalues[key]);if(val=="y")
{return true;}
else if(val=="n")
{return false;}
return null;},to_string:function(as_chars)
{var user='';for(var key in this.subvalues)
{if(this.get(key+''))
{if(as_chars)
{user+=this.charmap[key+''];}
else
{if(user)user+=",";user+=key;}}}
return user;},_getFromOffset:function(pos)
{var values=this._getPrefsValues();if(values[pos]&&(values[pos]=='y'||values[pos]=='n'))
{return values[pos];}
else
{this.pending=true;jQuery.ajax({type:'POST',url:'/users/login/reauthenticate.php',success:function(){huff.log('Reauthenticated');HuffCookies.userPrefs.pending=false;},error:function(){huff.log('Error reauthenticating');HuffCookies.userPrefs.pending=false;}})
return null;}},_getPrefsValues:function()
{var cookie=HuffCookies.getCookie(this.cookie_name);this.values=(cookie&&cookie.split(''))||[];return this.values;}};HuffPrefs=HuffCookies.userPrefs;HuffCookies.getCurrentUserPhotoUrl=function()
{var loggedin_userid=HuffCookies.getUserId()||false;if(!loggedin_userid){return false;}
var photo_url='http://s.huffpost.com/images/profile/user_placeholder.gif';var photo_mode=HuffCookies.getCookie('huffpost_photo_mode')||false;switch(photo_mode)
{case'facebook':var fb_uid=HuffCookies.getCookie('fb_uid')||false;if(fb_uid){photo_url='http://graph.facebook.com/'+fb_uid+'/picture?type=square';}
break;case'twitter':case'yahoo':case'google':case'linkedin':case'aol':case'winlive':photo_url='http://'+HPConfig.display_domain+'/'+photo_mode+'_profile_img/'+loggedin_userid+'.png';break;case'huffpo':photo_url='http://'+HPConfig.display_domain+'/profiles/'+loggedin_userid+'.png';break;case'huffpo2':photo_url='http://'+HPConfig.display_domain+'/profiles/'+loggedin_userid+'-2.png';break;}
if(photo_mode=='default'||!photo_mode){var cookie_avatar=HuffCookies.getCookie('huffpost_bigphoto')||HuffCookies.getCookie('huffpost_smallphoto')||false;if(cookie_avatar){var photo_url=cookie_avatar;}}
return photo_url;};
var JSON;if(!JSON){JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}
}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/
.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@')
.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']')
.replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());
var HPTrack={async:false,pageTracker:null,prod_account:'UA-71081-1',dev_account:'UA-71081-7',trackedShares:[],trackedVideos:{},custom_vars:{'vertical':{"scope":3,"slot":1,"display":"Vertical"},'blog':{"scope":3,"slot":2,"display":"Blog"},'news':{"scope":3,"slot":2,"display":"News"},'page':{"scope":3,"slot":2,"display":"Page"},'tpage':{"scope":3,"slot":2,"display":"TPage"},'user':{"scope":1,"slot":3,"display":"User"},'joined':{"scope":1,"slot":4,"display":"JoinedOn"},'special':{"scope":1,"slot":5,"display":"Special"}},Nielsen:function(type){var d=new Image(1,1);d.onerror=d.onload=function(){d.onerror=d.onload=null;};var ts_value="ts=compact";if(type&&type=='ajax')
ts_value="c0=usergen,1";d.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-703240h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&",ts_value,"&rnd=",(new Date()).getTime()].join('');},Services:{options:{},setOptions:function(service,options){if(!options)
return;HPTrack.Services.options[service]=options;},COMMON:['GA','Quantcast','Comscore','DataLayer','Omniture','Nielsen'],trackTo:function(targets,options){if(!targets)
return false;var services={Quantcast:function(params){var HPS=HPTrack.Services;if(!HPS.qc_loaded){window._qevents=window._qevents||[];HPS.qc_loaded=true;(function(){var elem=document.createElement('script');elem.src=(document.location.protocol=="https:"?"https://secure":"http://edge")+".quantserve.com/quant.js";elem.async=true;elem.type="text/javascript";var scpt=document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem,scpt);})();}
var trk=HPS.options.Quantcast||{};if(params.ajax)
trk.event='refresh';_qevents.push(trk);},Comscore:function(params){if(window.COMSCORE){COMSCORE.beacon(comscore_data);if(COMSCORE.newBeacon){COMSCORE.newBeacon();}}},Omniture:function(params){window.s_265&&s_265.t();},Nielsen:function(params){var a=params.ajax?'ajax':false;HPTrack.Nielsen(a);},GA:function(params){HPTrack.trackPageview();},DataLayer:function(params){if(window.bN&&window.bN_cfg){params.gallery&&bN.set('dL_sDpt','gallery');bN.view();}}}
options=options||{};for(var i=0,len=targets.length;i<len;i++){var target=targets[i];if(services[target])
services[target](options);}}},getTracker:function(acct){var account=this.dev_account;!huff.beta&&(account=acct||this.prod_account);if(this.async){_gaq.push(['_setAccount',account]);}else{if(typeof _gat!=='undefined'){this.pageTracker=_gat._getTracker(account);}}
if(typeof(HuffPrefs)!=='undefined'&&HuffPrefs.to_string){var track='A';if(HuffCookies.getUserId()){var prefs=HuffPrefs.to_string(true);track='H'+prefs;}else{this.setCustomVar('joined','0');}
this.setCustomVar('user',track);}
if(window.SiteMode){this.setCustomVar('special','sitemode');}},setCustomVar:function(field,value){var config=this.custom_vars[field+''];if(!(config&&value))
return;if(value.length&&value.length>8){value=value.substr(0,8);}
if(this.async){_gaq.push(['_setCustomVar',config['slot'],config['display'],value,config['scope']]);}else{if(this.pageTracker)
this.pageTracker._setCustomVar(config['slot'],config['display'],value,config['scope']);}},trackPageview:function(url){if(this.async){var trk=['_trackPageview'];url&&trk.push(url);_gaq.push(trk);huff.use('cookies',function(c){var uid_start=c.get('__utmc')||0;if(uid_start){uid_start=parseInt(uid_start.substr(0,2));}
var seg=false;if(!url&&window.SiteMode)
seg='yes';else if(!url&&(uid_start==22))
seg='no';seg&&_gaq.push(['_trackPageview','/t/i/sitemode/'+seg]);});}else{!this.pageTracker&&this.getTracker();this.pageTracker._trackPageview(url||undefined)}},trackEvent:function(category,action,label,value){if(this.async){_gaq.push(['_trackEvent',category,action,label,value]);}else{if(this.pageTracker!=null)
this.pageTracker._trackEvent(category,action,label,value);}
try{if(-1===jQuery.inArray(label,Badges.trackedShares)&&('Reddit'===label||'Stumbleupon'===label)){if('Stumbleupon'===label){jQuery.post('/include/social_track.php',{t:'stumble',entry:HPUtil.GetEntryID(window.location.href),banners:HPAds.get_banners_str()});}
HPTrack.trackedShares.push(label);bN.set("dL_shareType",label.toLowerCase(),1);bN.set("dL_shareURL",escape(window.location.href),1);bN.ping("aol-share");}}catch(e){}},trackSocial:function(network,social_action,opt_target,opt_pagePath){this.async&&_gaq.push(['_trackSocial',network,social_action,opt_target,opt_pagePath]);},navigateAfterTrack:function(e,href,winName,timeout){var maxtimeout=(typeof timeout=='undefined')?100:timeout;if(e.ctrlKey){window.open(href,'_blank');}else if(winName){window.open(href,winName);}else{setTimeout(function(){document.location=href;},maxtimeout);}}};HPTrack.Module=function(shortname,fullname){var HPM=HPTrack.Module,trk;shortname=HPM.Impressions.clean(shortname);if(trk=HPM.modules[shortname])
return trk;HPM.modules[shortname]={huff_tracker:1,impression:function(label){if(label)
label='-'+HPM.Impressions.clean(label);else
label='';HPM.Impressions.queue(shortname+label);return;},click:function(label){return this.event('Click',label);},event:function(action,label){HPTrack.trackEvent(fullname,action,label);return;},trackLink:function(e,label){var link=e.currentTarget;if(!(link&&link.tagName.toLowerCase()=='a'))
return;e.preventDefault();this.click(label);HPTrack.navigateAfterTrack(e,link.href,link.target);}}
return HPM.modules[shortname];};HPTrack.Module.modules={};HPTrack.Module.Impressions={to_track:[],to_track_separate:[],fired:false,MAX_LENGTH:712,PREFIX:'/t/m/',clean:function(label){return label.replace(/[ \-]/g,'_').toLowerCase();},queueSingle:function(shortname_and_label){this.queue(shortname_and_label,true);},queue:function(shortname_and_label,keep_separate){if(shortname_and_label.length>this.MAX_LENGTH/3)
return;shortname_and_label=this.clean(shortname_and_label);if(keep_separate)
this.to_track_separate.push(shortname_and_label);else
this.to_track.push(shortname_and_label);if(this.fired)
this.fire();},sendRequest:function(req){req=req.substr(0,req.length-1);HPTrack.trackPageview(req);},fire:function(){this.fired=true;var track_g=this.to_track;var track_i=this.to_track_separate;var prefix=this.PREFIX;if(!(track_g.length||track_i.length))
return;if(track_g.length){var track=prefix;for(var i=0,len=track_g.length;i<len;i++){var tmp=track+track_g[i]+',';if(tmp.length>this.MAX_LENGTH){this.sendRequest(track);this.to_track=track_g.slice(i);this.fire();return;}else{track=tmp;}}
this.sendRequest(track);this.to_track=[];}
var len=track_i.length;if(!len)
return;for(var i=0;i<len;i++){this.sendRequest(prefix+track_i[i]+',');}
this.to_track_separate=[];}};HPTrack.Module.getTrackingPrefix=function(element){var prefix='';var section=Dom.getAncestorByClassName(element,'module_section');if(section){var matches=section.className.match(/track_childs_([^ ]+)/);if(matches)
prefix=matches[1]+' - ';}
return prefix;};HPTrack.Module.DelegatedHandler=function(tracking_cb,cb_scope){return function(e){var T=HPTrack;var target=E.getTarget(e);if(target&&(target.tagName=='IMG'||target.tagName=='SPAN'))
target=target.parentNode||false;if(target&&target.tagName=='A'){var action='';var label='';if(target.className){var cls=target.className;if(cls.indexOf('TRACKED')>=0)
return;var matches=cls.match(/track_([^_]+)_?([^ ]*)/);if(matches){var action=matches[1];if(matches[2])
label=matches[2];}
target.className+=' TRACKED';label=T.Module.getTrackingPrefix(target)+label;}
var mappings={'page':'Clickthrough','lightbox':'Lightbox Open','action':'Action'};if(!mappings[action+''])
return;var artificial_redirect=false;if(action=='page'&&(!(target.target&&(!window.name||window.name!=target.target)))){artificial_redirect=true;E.preventDefault(e);}
var action_desc=mappings[action+''];if(tracking_cb.huff_tracker){tracking_cb.event(action_desc,label);}else{tracking_cb.call((cb_scope||this),action_desc,label);}
if(artificial_redirect)
T.navigateAfterTrack(e,target.href);}}};HPTrack.Vid={DL:function(params){if(typeof(bN)=='undefined')
return;var HPV={};HPV.d=params;HPV.t=(new Date()).getTime();HPV.q=-1;HPTrack.trackedVideos[params.videoId]=HPV;bN.set('vidId',HPV.d.videoId,1);bN.set('vidTime',HPV.t,1);bN.set('vidAdViewed',0,1);bN.ping('video5min');},TC:function(params){if(typeof(bN)=='undefined')
return;var HPV;if(typeof(HPV=HPTrack.trackedVideos[params.videoId])=='undefined')
return;if(typeof(params.playheadTime)=='undefined'||typeof(HPV.d)=='undefined'||HPV.d.duration<=0){return;}
var quartilePlayed=Math.floor(params.playheadTime/HPV.d.duration*4)*25;if(HPV.q<quartilePlayed){HPV.q=quartilePlayed;bN.set('vidId',params.videoId,1);bN.set('vidTime',HPV.t,1);bN.set('vidAdViewed',1,1);bN.set('vidState',quartilePlayed,1);bN.ping('video5min');}}}
HPTrack.TwitterEvents={__initialized:false,__placement:document.title,__network:'twitter',track:function(){if(this.__initialized){return;}
var t=this;twttr.ready(function(twttr){twttr.events.bind('click',t.__trackEvent);twttr.events.bind('tweet',t.__trackEvent);twttr.events.bind('retweet',t.__trackEvent);twttr.events.bind('favorite',t.__trackEvent);twttr.events.bind('follow',t.__trackEvent);});this.__initialized=true;},__trackEvent:function(e){if(!e)
return;var _this=HPTrack.TwitterEvents,placement=_this.__getGATarget(e),label=e.hasOwnProperty('region')?e.region:null,opt_target=placement;label&&(opt_target='['+label+'] - '+placement);HPTrack.trackSocial(_this.__network,e.type,opt_target);},__getGATarget:function(e){var default_placement=HPTrack.TwitterEvents.__placement,target=jQuery(e.target),p_node=target.parent(),placement=p_node.data('placement');return placement?placement:default_placement;}};
var HuffPoUtil={entry_comments_for_ajax:[],commenter_name:'',images_preload:[],vote_results:{},vote_results_text:{},url_hashes:[],body_element:document.documentElement?document.documentElement:document.body,uniq_counter:0,init:function(){this.trackLinks();E.on('top_nav','click',function(o){var link=E.getTarget(o),action='Click';if(!(link&&link.tagName&&link.tagName=='A'))return;var category='Top Nav';if(link.className&&link.className.match(/subnav_link/))
{if(HPConfig&&HPConfig.local_nav)
category="Local Nav";else if(HPConfig&&HPConfig.vertical_nav)
category="Vertical Nav";}
else if(!(link.parentNode.className&&link.parentNode.className.match(/(^n_| n_)/)))
{return;}
E.preventDefault(o);if(HPConfig&&HPConfig.current_vertical_name)
action+=' from '+HPConfig.current_vertical_name;var link_track_as=link.title||link.innerHTML;var HT=HPTrack;HT.trackEvent(category,action,link_track_as);HT.navigateAfterTrack(o,link.href);});if(this.GetEntryID())
{E.on('chicklets','click',function(e)
{var target=e.target||e.srcElement;if(!(target&&target.target&&target.target=='chicklet'&&target.title))
return true;E.preventDefault(e);var localization="/"+_('Share on')+" (.*)/";var re=new RegExp(localization);var matches=re.test(target.title);if(matches[1]){HPTrack.trackEvent('Chicklets','Click',matches[1]);}
window.open(target.href,'chicklet','width=642,height=436,left=0,top=0,resizable,scrollbars=yes');});}
if(window.SiteMode)
SiteMode.init();if('undefined'!==typeof HuffCookies&&HuffCookies.getUserName()&&jQuery('#header_connect_button').length){jQuery('#header_connect_button').css('display','none');}},trackLinks:function(){E.addListener(window.document,'click',function(e){var target=E.getTarget(e);if(!(target.tagName&&target.tagName.toUpperCase()=='A'))
target=target.parentNode||target;if(!(target.tagName&&target.tagName.toUpperCase()=='A')){return;}
var ref=target.href;if(target.rel=="popup")
{E.stopEvent(e);var height=430;var width=450;if(target.className=='commentpop'){height=430;}
if(target.className=='biolink'){width=450;}
var top=Math.ceil(screen.height/2)-Math.ceil(height/2);var left=Math.ceil(screen.width/2)-Math.ceil(width/2);window.open(target.href,'bio','toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=1,resizable=1,width='+width+',height='+height+',top='+top+',left='+left);return false;}
if(!ref||(ref.indexOf(window.location.href)==0)||(ref.indexOf('javascript:')>-1)){return;}
if(ref.indexOf('ffingtonpost.com')>-1&&typeof HPTrack!='undefined')
{if(target.onclick)
return;if(e.ctrlKey)
return;var scrolled=HPTrack._furthest_scrolled||0;var doc_height=Dom.getDocumentHeight();var viewport_height=Dom.getViewportHeight();var bottom_scroll=scrolled+viewport_height;var percent=Math.round((bottom_scroll/doc_height)*100);if(percent>100)percent=100;var margin=125;var action='';if(!scrolled)
action='Left w/o scrolling';else if(bottom_scroll>doc_height-margin)
action='Left after scrolling to bottom';else
action='Left w/o scrolling to bottom';var label='non-b-page';if(HPUtil.GetEntryID())
label='b-page';HPTrack.trackEvent('Scrolling',action,label,percent);return;}
else if(typeof HPTrack!='undefined')
{HPTrack.trackPageview("/out/?u="+ref);}});},guid:function(){this.uniq_counter++;return"HP_uniq_"+this.uniq_counter;},isArray:function(obj){return Object.prototype.toString.call(obj)==='[object Array]';},bind:function(objects,event,handler,args,scope){if(!scope&&args){scope=args;}
var objects=jQuery(objects);objects.bind(event,args,function(){handler.apply(scope,arguments);});return objects;},getTarget:function(object){var n=object.target||object.srcElement;try{if(n&&3==n.nodeType){return n.parentNode;}}catch(e){}
return n;},getRegion:function(object){var empty_reg={top:0,left:0,bottom:0,right:0};object=jQuery(object);if(!object.length){return empty_reg;}
var offset=object.offset();return{top:offset.top,left:offset.left,bottom:offset.top+object.height(),right:offset.left+object.width()};},onAvailable:function(selector,fn,context,data){this.__onAvailable_stack=this.__onAvailable_stack||{};var slot=selector+HuffPoUtil.guid();var _this=this;var condition=function(){if(jQuery(selector).length>0||_this.__onAvailable_stack[slot].counter>40){_this.__onAvailable_stack[slot].cancel&&_this.__onAvailable_stack[slot].cancel();return true;}
_this.__onAvailable_stack[slot].counter++;return false;};var func=function(){fn.apply(context,[data]);};this.__onAvailable_stack[slot]={counter:0};var handler=HuffPoUtil.WaitForCondition(func,500,condition);this.__onAvailable_stack[slot].cancel=function(){clearInterval(handler);}},EvalScript:function(text){huff.use('util/util',function(u){u.evalScript(text);});},getNode:function(selector){var elements=[];jQuery(selector).each(function(){elements.push(this);});if(elements.length>1){return elements;}
if(elements.length==1){return elements[0];}
return false;},insertAfter:function(parent,node,referenceNode){if(referenceNode.nextSibling){parent.insertBefore(node,referenceNode.nextSibling);}else{parent.appendChild(node);}},appendScript:function(url){var head=document.getElementsByTagName("head")[0];var script=document.createElement('script');script.type='text/javascript';script.src=url;head.appendChild(script);},getReadableTime:function(unixtime,num_times){if(!num_times)num_times=2;var times=['1-second','60-minute','3600-hour','86400-day','604800-week','2592000-month','31536000-year'];var d=new Date;var curr_unixtime_ms=d.getTime();var curr_unixtime=parseInt(curr_unixtime_ms/1000);var secs=curr_unixtime-unixtime;var count=0;var time='';for(var i=7;i--;){data=times[i].split('-');key=data[0];value=data[1];if(secs>=key&&value!="second"){var s="";time+=''+Math.floor(secs/key).toString();if((Math.floor(secs/key)!=1))
s="s";time+=" "+value+s;count++;secs=secs%key;if(count>num_times-1||secs==0){break;}else{if(value!="minute")time+=", ";}}}
return time;},AddStringToQueryString:function(url,params_str){var is_question_added=false,hash=(new RegExp(/(#.*)/)).exec(url);url=hash?url.replace(hash[1],''):url;if(-1===url.indexOf('?')){is_question_added=true;url+='?';}
url+=(is_question_added?'':'&')+params_str+(hash?hash[1]:'');return url;},ShowNearElement:function(position,container,element_to_show,add_xy,cb,base_coords){var element_position=undefined===base_coords?Dom.getXY(container):base_coords;add_xy=add_xy||[0,0];switch(position){case'right-middle':element_position[0]+=container.offsetWidth;element_position[1]+=container.offsetHeight/2;break;case'right-top':element_position[0]+=container.offsetWidth;break;}
if(cb){cb();}
element_to_show.style.top=parseInt(parseInt(element_position[1])+add_xy[1])+'px';element_to_show.style.left=parseInt(parseInt(element_position[0])+add_xy[0])+'px';element_to_show.style.display='block';},getUrlVar:function(var_name){if(!this.url_hashes.length){var hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).replace(/\#.*$/,'').split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');this.url_hashes[hash[0]]=hash[1];}}
if(typeof(this.url_hashes[var_name])=="undefined"){return null;}else{return this.url_hashes[var_name];}},ScrollTo:function(scroll_to_el,time,what_to_scroll){scroll_to_el=typeof(scroll_to_el)=='string'?Dom.get(scroll_to_el):scroll_to_el;if(!scroll_to_el)
return;if(typeof(what_to_scroll)=="undefined"||what_to_scroll==null){what_to_scroll=HuffPoUtil.body_element;}
if(typeof(time)=="undefined"){time=0.5;}
var offset=jQuery('#'+scroll_to_el).offset();jQuery('#'+what_to_scroll).scrollTop(offset.top);},CopyListeners:function(from,to){var listeners=E.getListeners(from);if(listeners){for(var i=0;i<listeners.length;++i){E.addListener(to,listeners[i].type,listeners[i].fn,listeners[i].obj);}}},AddSlashes:function(text){var return_text='',c='';for(var i=0;i<text.length;++i){switch(text.charAt(i)){case'<':return_text+='\\x3C';break;case'>':return_text+='\\x3E';break;case'\'':return_text+='\\\'';break;case'\\':return_text+='\\\\';break;case'"':return_text+='\\"';break;case"\n":return_text+='\\n';break;case"\r":return_text+='\\r';break;default:return_text+=text.charAt(i);break;}}
return return_text;},getHostName:function(){var port=document.location.port;if(!port||port==''||port==80){port='';}else{port=':'+port;}
return'http://'+document.location.hostname+port;},GetAmazonS3Location:function(){return-1!==location.href.toLowerCase().indexOf('beta.huffingtonpost.com')?'dev.assets.huffingtonpost.com':'i.huffpost.com';},LinkifyTextLinks:function(arg){return arg.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(m){return'<a href="'+m+'">'+((m.length>25)?m.substr(0,24)+'...':m)+'</a>';});},GetEntryID:function(url){if('object'===typeof HPConfig&&HPConfig.entry_id)
return HPConfig.entry_id;var entry_id=null;if(!url)url=document.location.href;if((entry_id=(new RegExp(/.*_(\d+)\.html/)).exec(url))){return entry_id[1];}
return false;},isWWW:function(url){if(!url)url=window.location.href+'';if(url.indexOf("www")==7)return true;return false;},hide:function(el){if(typeof(el)==="string"){el=document.getElementById(el);}
if(!el){return;}
el.style.display='none';},show:function(el,type){if(typeof(el)==="string"){el=document.getElementById(el);}
if(!el){return;}
el.style.display=type||'block';},show_inline:function(el){if(typeof(el)==="string"){var el=document.getElementById(el);}
if(!el){return;}
el.style.display='inline';},trim:function(str,chars){return this.ltrim(this.rtrim(str,chars),chars);},ltrim:function(str,chars){chars=chars||"\\s";return str.replace(new RegExp("^["+chars+"]+","g"),"");},rtrim:function(str,chars){chars=chars||"\\s";return str.replace(new RegExp("["+chars+"]+$","g"),"");},toggleVis:function(id){Dom.batch(id,function(el){if(el.style.display=='none')el.style.display='block';else el.style.display='none';});},toggleReply:function(id){Dom.batch('reply_'+id,function(el){if(el.style.display=='none')el.style.display='block';else el.style.display='none';});},toggleTopPosts:function(caller){if(!Dom.hasClass(caller,'active')){HuffPoUtil.toggleVis(['top_news_links','top_blog_links']);HuffPoUtil.tradeClass('tab_top_news','tab_top_blogs','active');}},tradeClass:function(el1,el2,className){var el1=jQuery("#"+el1);var el2=jQuery("#"+el2);if(el1.hasClass(className)){el2.addClass(className);el1.removeClass(className);}else{el1.addClass(className);el2.removeClass(className);}},WaitForCondition:function(action,interval,condition){if(!condition.apply(this)){var _this=this;return setTimeout(function(){HPUtil.WaitForCondition.apply(_this,[action,interval,condition]);},interval);}else{action.apply(this);}},AnimRequestFinished:function(els,from_color,to_color){if(!els){return;}
from_color=from_color||'#F9E801';to_color=to_color||'#FFFFFF';for(i=0;i<els.length;i++){jQuery(els[i]).css('background-color',from_color);jQuery(els[i]).animate({backgroundColor:to_color},{duration:1000,complete:function(){jQuery(this).css('background-color','transparent');}});}},AnimPagination:function(els){if(undefined===els)
els=[];if(0==els.length)
return;var canim=[];for(var i=0;i<els.length;++i){canim[canim.length]=new YAHOO.util.Anim(els[i],{opacity:{from:0.2,to:1}});if(HPBrowser.isIEOld()){canim[canim.length-1].onComplete.subscribe(function(){Dom.setStyle(this.getEl(),'zoom','normal');});}
canim[canim.length-1].animate();}},getCookie:function(name){var prefix=name+'=';var c=document.cookie;var nullstring='';var cookieStartIndex=c.indexOf(prefix);if(cookieStartIndex==-1)
return nullstring;var cookieEndIndex=c.indexOf(";",cookieStartIndex+prefix.length);if(cookieEndIndex==-1)
cookieEndIndex=c.length;return unescape(c.substring(cookieStartIndex+prefix.length,cookieEndIndex));},loadAndRun:function(files,callback,param,scope){LazyLoad.load(files,callback,param,scope);return false;},trackerImg:function(url,holder_el){url=url.replace(/%n/,ord);if(holder_el){var img=new Image();img.src=url;img.width=img.height=1;img.style.display='none';try{holder_el.appendChild(img);}catch(e){return;}
return;}
document.write('<img src="'+url+'" width="1" height="1" style="display:none"/>');},scriptTag:function(url,holder_el){if(document.createElement&&((script=document.createElement('script')))){script.type='text/javascript';script.src=url;if(holder_el){}
else{var heads=document.getElementsByTagName('head');if(heads[0])
holder_el=heads[0];}
try{holder_el.appendChild(script);return;}catch(e){}}
document.write('<script type="text/javascript" src="'+url+'"></script>');},checkEmail:function(email){if(email&&((email.indexOf('@')>0)&&(email.indexOf('.')>0))&&(email.indexOf('.')!=email.length-1)){return true;}
return false;},getDisplayName:function(username){if('undefined'===typeof username||!username)
username=HuffCookies.getUserName()||'';var user=username.replace(/[\+_]/g,' ');var display_name=user.replace("hp blogger ","");return display_name;},flash:function(element,color){var anim_color=color||'#ff0000';jQuery(element)
.css('background-color',anim_color)
.animate({opacity:'-=0.5'},300,function(){jQuery(this).css('background-color',"#FFFFFF");jQuery(this).css('opacity',"1");});},yellowFlash:function(element){this.flash(element,'#F9E801');},enforceTextAreaLimit:function(e,obj){if(!obj||!obj.chars)obj={chars:100};if(this.value.length>obj.chars){HuffPoUtil.flash(this);this.value=this.value.substring(0,obj.chars);this.scrollTop=this.scrollHeight;}},enforceTextAreaLimit_v2:function(event)
{var chars=100;if(event.data&&event.data.chars)
chars=event.data.chars;if(jQuery(this).attr("value").length>chars){HuffPoUtil.flash(this);this.value=this.value.substring(0,chars);this.scrollTop=this.scrollHeight;}
return;},initLogout:function(){if((typeof HuffCookies=='undefined')||!(HPUtil.isWWW()||HPConfig.site))return;jQuery('#wendybird_user_name').html("");jQuery('#wendybird_user').hide();jQuery('#not_logged_user').show();return;},initUserNavStatus:function(vert_header){huff.use('util/user',function(u){u.updateAuthStatus();});return;},reinit:function(){HPUtil.initUserNavStatus();},isIE6:function(){return HPBrowser.isIE6();},getCorrectVideoContentForIE6:function(video_code){return video_code;},onPageReady:function(callback){jQuery(window).ready(callback);},getQueryVariables:function(){var query=window.location.search.substring(1);var vars=query.split("&");var res=new Array();for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");res[pair[0]]=pair[1];}
return res;},region_contains:function(container,region){return(region.left>=container.left&&region.right<=container.right&&region.top>=container.top&&region.bottom<=container.bottom);},resize:function(){if(window.innerWidth<970){re=new RegExp(/.*?Netscape.(.*)/);matches=re.exec(navigator.userAgent);if(matches&&matches.length>=2&&matches[1]<7.2){document.body.style.margin='0';}}},showad:function(){this.show('rightad');this.show('frontmidad');},SharePollToFacebook:function(poll_id,poll_question){huff.use('util/util',function(u){u.sharePollOnFacebook(poll_id,poll_question);});},vote:function(poll_id){huff.use('util/util',function(u){u.voteOnPoll(poll_id);});},UpdateEntriesComments:function(){huff.use('util/util',function(u){u.updateEntriesComments();});},number_format:function(number,decimals,dec_point,thousands_sep){var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==='undefined')?',':thousands_sep,dec=(typeof dec_point==='undefined')?'.':dec_point,s='',toFixedFix=function(n,prec){var k=Math.pow(10,prec);return''+Math.round(n*k)/k;};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}
if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0');}return s.join(dec);},int2size:function(number,precision){var kilobyte=1000;var megabyte=kilobyte*1000;var gigabyte=megabyte*1000;if(typeof precision=="undefined"){precision=1;}
if((number>=0)&&(number<kilobyte)){return number;}else if((number>=kilobyte)&&(number<megabyte)){return(number/kilobyte).toFixed(precision)+'K';}else if((number>=megabyte)&&(number<gigabyte)){return(number/megabyte).toFixed(precision)+'M';}else{return number;}},updateContent:function(target,msg,callback,duration){huff.use('util/util',function(u){u.fadeOutfadeInContent(target,msg,callback,duration);});},addCSS:function(cssFile)
{huff.use('util/util',function(u){u.addCSSFile(cssFile);});return;},render_video:function(id)
{huff.use('util/util',function(u){u.renderVideo(id);});},cleanup_cookies:function(){huff.use('util/util',function(u){u.cleanupCookies();});},migrate_cookies:function(){huff.use('util/util',function(u){u.migrateCookies();});},PeriodicalExecute:function(o_function,period,condition_to_start,condition_to_stop){if(undefined===condition_to_start||(undefined!==condition_to_start&&condition_to_start()))
o_function.apply(this);var _this=this;if(undefined!==period&&(undefined===condition_to_stop||(undefined!==condition_to_stop&&!condition_to_stop()))){window.setTimeout(function(){HuffPoUtil.PeriodicalExecute.apply(_this,[o_function,period,condition_to_start,condition_to_stop]);},period);}},Strip_Tags:function(str,allowed_tags){var key='',allowed=false;var matches=[];var allowed_array=[];var allowed_tag='';var i=0;var k='';var html='';var replacer=function(search,replace,str){return str.split(search).join(replace);};if(allowed_tags){allowed_array=allowed_tags.match(/([a-zA-Z]+)/gi);}
str+='';matches=str.match(/(<\/?[\S][^>]*>)/gi);for(key in matches){if(isNaN(key)){continue;}
html=matches[key].toString();allowed=false;for(k in allowed_array){allowed_tag=allowed_array[k];i=-1;if(i!=0){i=html.toLowerCase().indexOf('<'+allowed_tag+'>');}
if(i!=0){i=html.toLowerCase().indexOf('<'+allowed_tag+' ');}
if(i!=0){i=html.toLowerCase().indexOf('</'+allowed_tag);}
if(i==0){allowed=true;break;}}
if(!allowed){str=replacer(html,"",str);}}
return str;},PreloadImages:function(images){if(Y.lang.isArray(images)){for(var i=0;i<images.length;++i){this.images_preload[this.images_preload.length]=new Image();this.images_preload[this.images_preload.length-1].src=images[i];}}else{for(var image_src in images){this.images_preload[this.images_preload.length]=new Image();if(images[image_src].callback)
this.images_preload[this.images_preload.length-1].onload=images[image_src].callback;this.images_preload[this.images_preload.length-1].src=image_src;}}},bitly_url:function(url,cb){huff.use('util/util',function(u){u.bitlyUrl(url,cb);});},checkUserInfluence:function(){huff.use('util/user',function(u){u.updateUserInfluence();});},setInfluenceCookie:function(cookie_value){huff.use('util/user',function(u){u.setInfluenceCookie(cookie_value);});},updateInfluenceCookie:function(update,value){huff.use('util/user',function(u){u.updateInfluenceCookie(update,value);});},removeEmptyInfluence:function(){if(HuffCookies.getCookie('huffpost_influence_null')){HuffCookies.destroyCookie('huffpost_influence_null');}},updateNavByReferrer:function(){huff.use('util/user',function(u){u.updateNavByReferrer();});},providerOverview:function(provider){huff.use('util/user',function(u){u.providerOverview(provider);});}};var HPUtil=HuffPoUtil;HuffPoUtil.WEDGJE=function(){ad_store={};WEDGJE_ord=Math.random();WEDGJE_ord=WEDGJE_ord*10000000000000000000;isIE=(true||(navigator.userAgent&&navigator.userAgent.match(/MSIE/)));getIframe=function(ad_spec){innerH='<iframe width="'+ad_spec.width+'" height="'+ad_spec.height+'" ';innerH+='src="'+getSource(ad_spec)+'"';innerH+=' marginheight="0" marginwidth="0" frameborder="0" scrolling="no"></iframe>';if(this.isIE){return innerH;}else{i=document.createElement('span');i.innerHTML=innerH;return i;}};getScript=function(ad_spec){if(this.isIE)
{ad_spec.prefix='http://ad.doubleclick.net/adj/';innerH='<script type="text/javascript" src="'+getSource(ad_spec)+'"></script>';return innerH;}
else
{ad_spec.prefix='http://ad.doubleclick.net/adj/';s=document.createElement('script');s.type="text/javascript";s.src=getSource(ad_spec);return s;}};getQCSegs=function(){a=HuffPoUtil.getCookie('__qseg');return(a)?a.replace(/\|{0,1}Q_/gi,';qcs=').replace(/^;/,'')+';':'';};getSource=function(ad_spec){if(ad_spec.prefix)
adSource=ad_spec.prefix;else
adSource="http://ad.doubleclick.net/adi/";adSource+=ad_spec.zone_info+';global=1;';adSource+=getQCSegs();if(ad_spec.interstitial&&(typeof ads_page_type!='undefined'&&ads_page_type!='big_news')&&!(document.referrer&&document.referrer.match(/.*(yahoo|aol)\.com.*/)))adSource+="dcopt=ist;";adSource+=(test_kws=location.href.match(/dc_kw\=[^\&]*/gi))?'kw='+test_kws.toString().replace(/dc_kw\=/gi,'').replace(/\,/gi,';kw=')+';':'';adSource+=(location.href.match(/beta\./))?'kw=beta;':'';adSource+=(document.referrer.match('google.com/cse'))?'utm_hp_ref=hp_search;':'';adSource+=(document.referrer.match('google.com/search'))?'utm_hp_ref=google;':'';adSource+=(navigator.userAgent.toLowerCase().match('chrome/'))?'brsr=chrome;':'';adSource+=(typeof ads_page_type!='undefined')?'page_type='+ads_page_type+';':'';adSource+=(ad_spec.kv)?ad_spec.kv:'postload=0;';adSource+="tile="+ad_spec.tile+";";adSource+="sz="+(ad_spec.sizes||(ad_spec.width+"x"+ad_spec.height))+";";adSource+="ord="+WEDGJE_ord+"?";return adSource;};getBareScript=function(ad_spec){if(this.isIE){innerH='<script type="text/javascript" src="'+ad_spec["src"]+'"></script>';return innerH;}else{s=document.createElement('script');s.type="text/javascript";s.src=ad_spec["src"];return s;}};return{double_adsense:false,ads:function(ad_name){return ad_store[ad_name];},ord:function(ad_name){return WEDGJE_ord;},debug_ad_code:function(ad_spec){return(location.href.toLowerCase().match('debugadcode'))?'<div style="position:relative;z-index:1000"><div style="z-index:10000;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px">'+getSource(ad_spec).replace(/\;/gi,';<br/>')+'<br/><a style="font-weight:bold;font-size:12px" target="_blank" href="/ads/test/ad_isolator.html?'+escape('<s\cript type="text/javascript" src="'+getSource(ad_spec)+'"></s\cript>')+'">See Ad In New Page</a></div></div>':'';},inline_ad:function(ad_spec){ad_spec.prefix='http://ad.doubleclick.net/adj/';document.write('<s\cript type="text/javascript" src="'+getSource(ad_spec)+'"></s\cript>'+this.debug_ad_code(ad_spec));},postload_ad:function(ad_spec,container_id){var width_str='height: '+ad_spec.height+'px; ';var height_str='width: '+ad_spec.width+'px; ';if(ad_spec.no_container){width_str='';height_str='';}
if(ad_spec.type=='iframe'){ad_store[ad_spec.el_id]=getIframe(ad_spec);}else if(ad_spec.type=='script'){ad_store[ad_spec.el_id]=getScript(ad_spec);}else if(ad_spec.type=='bare'){ad_store[ad_spec.el_id]=getBareScript(ad_spec);}
if(isIE){if(typeof(container_id)=="undefined"){document.write('<div style="'+height_str+width_str+'" class="'+ad_spec.class_name+'" id="'+ad_spec.el_id+'">'+ad_store[ad_spec.el_id]+'<\/div>'+this.debug_ad_code(ad_spec));}else{document.getElementById(container_id).innerHTML='<div style="'+height_str+width_str+'" class="'+ad_spec.class_name+'" id="'+ad_spec.el_id+'">'+ad_store[ad_spec.el_id]+'<\/div>'+this.debug_ad_code(ad_spec);}}else{if(typeof(container_id)=="undefined"){document.write('<div style="'+height_str+width_str+'" class="'+ad_spec.class_name+'" id="'+ad_spec.el_id+'"><\/div>'+this.debug_ad_code(ad_spec));}else{document.getElementById(container_id).innerHTML='<div style="'+height_str+width_str+'" class="'+ad_spec.class_name+'" id="'+ad_spec.el_id+'"><\/div>'+this.debug_ad_code(ad_spec);}
setTimeout("document.getElementById('"+ad_spec.el_id+"').appendChild(HuffPoUtil.WEDGJE.ads('"+ad_spec.el_id+"'));",(ad_spec.tile*200)+1);}},interstitial:true,tile:1,write:function(ad_spec,container_id)
{if(!HPBrowser.isIEOld()&&ad_spec.width!='234'&&container_id!='ad_advertisement'&&!(typeof ads_page_type!='undefined'&&ads_page_type=='front'&&(ad_spec.zone_info.match('comedy')||ad_spec.zone_info.match('world')))||location.href.match('postload_test')){ad_spec.interstitial=this.interstitial;this.interstitial=false;this.deferred_write(ad_spec,container_id);return;}
ad_spec.tile=this.tile++;if(location.href.match('no_ads')||location.href.match('nsup'))return;if(container_id){this.postload_ad(ad_spec,container_id)}else{ad_spec.interstitial=this.interstitial;this.interstitial=false;this.inline_ad(ad_spec)}},google_ads:{primed:false,counter:0,vars:{'ad_client':'pub-3264687723376607','ad_output':'js','max_num_ads':'4','ad_type':'text','feedback':'on'},init:function(){if(!HuffPoUtil.WEDGJE.google_ads.primed){HuffPoUtil.WEDGJE.google_ads.primed=true;}
HuffPoUtil.WEDGJE.google_ads.executions=HuffPoUtil.WEDGJE.google_ads.executions||[];var z=HuffPoUtil.WEDGJE.google_ads.executions.length;HuffPoUtil.WEDGJE.google_ads.executions[z]=[];for(var _name in HuffPoUtil.WEDGJE.google_ads.vars){HuffPoUtil.WEDGJE.google_ads.executions[z][_name]=HuffPoUtil.WEDGJE.google_ads.vars[_name];}
for(var _name in arguments[0]){HuffPoUtil.WEDGJE.google_ads.executions[z][_name]=arguments[0][_name];}},exec:function(){if(!HuffPoUtil.WEDGJE.google_ads.executions||!HuffPoUtil.WEDGJE.google_ads.executions[0])return;var google_skip=0;for(z=0;HuffPoUtil.WEDGJE.google_ads.executions[z];z++)
{var params='page_url---'+document.location.href+'*';for(_var in HuffPoUtil.WEDGJE.google_ads.executions[z])
{if(typeof HuffPoUtil.WEDGJE.google_ads.executions[z][_var]=='string')
{params+=_var+'---'+HuffPoUtil.WEDGJE.google_ads.executions[z][_var]+'*';}}
params=params.replace(/\*$/gi,'');iframe=document.createElement('iframe');iframe.src='/ads/google_ads_iframe_loader.html#'+escape(escape(params));iframe.style.marginBottom="10px";iframe.frameBorder='0';iframe.id='iframe_'+HuffPoUtil.WEDGJE.google_ads.executions[z]['hp_dest_id'];iframe.height=1;iframe.scrolling='no';iframe.width='100%';iframe.name='adsense_iframe_'+Math.round(Math.random()*100000);adloc=document.getElementById(HuffPoUtil.WEDGJE.google_ads.executions[z]['hp_dest_id'].replace(/\"/gi,''));adloc.innerHTML='';adloc.appendChild(iframe);}},render:function(google_ads){var contextual_ad_elem=document.getElementById(google_hp_dest_id);if(google_ads.length==0||!contextual_ad_elem)return;var s='<div class="adsense_left">';s+='<div class="google_links_header"><a target="_blank" href=\"'+google_info.feedback_url+'\" ><span>Ads by Google</span></a></div>';for(var i=0;i<google_ads.length;++i){s+=HuffPoUtil.WEDGJE.google_ads.make_link(google_ads[i]);}
s+='</div>';contextual_ad_elem.innerHTML=s;HuffPoUtil.WEDGJE.google_ads.contextual_ad_unit++;HuffPoUtil.WEDGJE.google_ads.counter+=google_ads.length;HuffPoUtil.WEDGJE.google_ads.executions.splice(0,1);HuffPoUtil.WEDGJE.google_ads.exec();},make_link:function(ad){var render_order=(arguments[1])?arguments[1]:['header','description','visible_url'];var google_elems={header:'<div class="link_header"><a target="_blank" href="'+ad.url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'go to '+ad.visible_url+'\';return true">'+ad.line1+'</a></div>',description:'<div class="link_description"><span class="line2">'+ad.line2+'</span><span class="spacer">&nbsp;</span><span class="line3">'+ad.line3+'</span></div>',visible_url:'<div class="link_visible_url"><a target="_blank" href="'+ad.url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'go to '+ad.visible_url+'\';return true"><span>'+ad.visible_url+'</a></span></div>'}
var google_code='<div class="adsense_block">';for(var a=0;a<render_order.length;a++)
{google_code+=google_elems[render_order[a]];}
google_code+='</div>';return google_code;}}};}();HuffPoUtil.WEDGJE.deferred_write=function(ad_spec,container_id){ad_spec.tile=this.tile++;if(location.href.match('no_ads')||location.href.match('nsup'))return;var width_str='height: '+ad_spec.height+'px; ';var height_str='width: '+ad_spec.width+'px; ';if(ad_spec.no_container){width_str='';height_str='';}
ad_spec.type='script';ad_spec.kv='postload=1;';isIE=true;if(ad_spec.type=='iframe'){ad_store[ad_spec.el_id]=getIframe(ad_spec);}else if(ad_spec.type=='script'){ad_store[ad_spec.el_id]=getScript(ad_spec);}else if(ad_spec.type=='bare'){ad_store[ad_spec.el_id]=getBareScript(ad_spec);}
if(typeof(container_id)=="undefined"){document.write('<div style="'+height_str+width_str+'" class="'+ad_spec.class_name+'" id="'+ad_spec.el_id+'"><\/div>'+this.debug_ad_code(ad_spec));}
else{document.getElementById(container_id).innerHTML='<div style="'+height_str+width_str+'" class="'+ad_spec.class_name+'" id="'+ad_spec.el_id+'"><\/div>'+this.debug_ad_code(ad_spec);}
HuffPoUtil.WEDGJE.ad_renders.push(function(){document.write('<div id="defer-'+ad_spec.el_id+'">'+ad_store[ad_spec.el_id]+'<\/div>');(function(){var defer_node=$('defer-'+ad_spec.el_id);if(!defer_node)
{setTimeout(arguments.callee,100);return;}
defer_node.parentNode.removeChild(defer_node);$(ad_spec.el_id).appendChild(defer_node);})();});};HuffPoUtil.WEDGJE.ad_renders=[];HuffPoUtil.ImageLoader={foldCheck:function(container_id,check_if_visible_element,add_dimensions,old_handler_id){huff.beta&&console.error('HuffPoUtil.ImageLoader is DEPRECATED');}};HuffPoUtil.AvatarLoader={loadAvatar:function(base_link){huff.beta&&console.error('HuffPoUtil.AvatarLoader is DEPRECATED');},loadAvatarHomeStyle:function(base_link){huff.beta&&console.error('HuffPoUtil.AvatarLoader is DEPRECATED');},loadAvatarArticleStyle:function(){huff.beta&&console.error('HuffPoUtil.AvatarLoader is DEPRECATED');}};HPConnect={Login:function(){huff.use('user','connect/auth','connect/modal',function(user,auth,modal){if(user.logged)return;auth.Login.init();});return;},Signup:function(){huff.use('user','connect/auth','connect/modal',function(user,auth,modal){if(user.logged)return;auth.Signup.init();});},Forgot:function(){huff.use('user','connect/auth','connect/modal',function(user,auth,modal){if(user.logged)return;auth.ResetPassword.init();});}};var HPError={DEFAULT_ERROR:"Sorry, an error occurred.  Please check your internet connection",DEBUG:0,is_error:0,setDebug:function(enable){if(enable){HuffCookies.setCookie('debug_mode','1','1');HPError.DEBUG=1;window.onbeforeunload=function(e){var nav_confirm='Your debug cookie is set, please confirm you want to leave the page';e=e||window.event;if(e)
e.returnValue=nav_confirm;return nav_confirm;};}
else{HuffCookies.destroyCookie('debug_mode');HPError.DEBUG=0;window.onbeforeunload=function(){};}},throwError:function(e,throw_alert){throw_alert=throw_alert||false;if(e&&typeof e!=='object')e={msg:e};if(!e)e=new Array();if(!(e.show===0))e.show=1;if(!e.msg||e.msg==this.DEFAULT_ERROR){e.msg=this.DEFAULT_ERROR;e.show=0;}
this.is_error=1;if(this.DEBUG){try{throw('Err');}catch(e){if(e.stack)
console.log('Stack:',e.stack);}
console.log('Msg: ',e.msg);if(e.obj)console.log(e.obj);}
if(e.show){if(throw_alert)alert(e.msg);}},debugMessage:function(str,obj){if(!this.DEBUG)return false;if(!obj)obj={};if(!str)str='';HPError.e({'show':0,'msg':str,'obj':obj});}};if(typeof HuffCookies!='undefined'&&HuffCookies.getCookie('debug_mode')){HPError.setDebug(true);}
HPError.e=HPError.throwError;HPError.d=HPError.debugMessage;String.prototype.format=function(){return String.format(this,arguments.length==1?arguments[0]:arguments);};String.format=function(source,params){var _toString=function(obj,format){var ctor=function(o){if(typeof o=='number')
return Number;else if(typeof o=='boolean')
return Boolean;else if(typeof o=='string')
return String;else
return o.constructor;}(obj);var proto=ctor.prototype;var formatter=typeof obj!='string'?proto?proto.format||proto.toString:obj.format||obj.toString:obj.toString;if(formatter)
if(typeof format=='undefined'||format=="")
return formatter.call(obj);else
return formatter.call(obj,format);else
return"";};if(arguments.length==1)
return function(){return String.format.apply(null,[source].concat(Array.prototype.slice.call(arguments,0)));};if(arguments.length==2&&typeof params!='object'&&typeof params!='array')
params=[params];if(arguments.length>2)
params=Array.prototype.slice.call(arguments,1);source=source.replace(/\{\{|\}\}|\{([^}: ]+?)(?::([^}]*?))?\}/g,function(match,num,format){if(match=="{{")return"{";if(match=="}}")return"}";if(typeof params[num]!='undefined'&&params[num]!==null){return _toString(params[num],format);}else{return"";}});return source;};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1);};(function($){$.fn.disable_inputs=function(){return this.each(function(){jQuery(this).find("input,select,textarea").attr("disabled","disabled");});};$.fn.enable_inputs=function(){return this.each(function(){jQuery(this).find("input,select,textarea").removeAttr("disabled");});};$.fn.set_iframe_height=function(){return this.filter('iframe').each(function(){if(this.contentDocument){this.height=this.contentDocument.body.offsetHeight+35;}else{this.height=this.contentWindow.document.body.scrollHeight+40;}});};})(jQuery);
var HPBrowser={};HPBrowser.isAppleFirefox=function()
{if(navigator&&navigator.userAgent)
return jQuery.browser.mozilla&&(-1!==navigator.userAgent.toLowerCase().indexOf("macintosh"));return false;}
HPBrowser.isFirefox=function()
{if(navigator&&navigator.userAgent)
return jQuery.browser.mozilla&&(-1!==navigator.userAgent.toLowerCase().indexOf("mozilla"));return false;}
HPBrowser.isAppleSafari=function()
{if(navigator&&navigator.userAgent)
return jQuery.browser.webkit&&(-1!==navigator.userAgent.toLowerCase().indexOf("macintosh"));return false;}
HPBrowser.isSafari=function()
{var userAgent=navigator.userAgent.toString().toLowerCase();if((userAgent.indexOf('safari')!=-1)&&!(userAgent.indexOf('chrome')!=-1))
return true;else
return false;}
HPBrowser.isChrome=function()
{if(navigator&&navigator.vendor)
return-1!==navigator.vendor.toLowerCase().indexOf("google");return false;}
HPBrowser.isIE6=function()
{if(navigator&&navigator.userAgent)
return jQuery.browser.msie&&/MSIE 6.0/i.test(navigator.userAgent);return false;}
HPBrowser.isIE7=function()
{if(navigator&&navigator.userAgent)
return jQuery.browser.msie&&/MSIE 7./i.test(navigator.userAgent);return false;}
HPBrowser.isIE8=function()
{var rv=-1;var ua=navigator.userAgent;var re=new RegExp("Trident\/([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null){rv=parseFloat(RegExp.$1);}
return(rv==4);}
HPBrowser.isIEOld=function(){return HPBrowser.isIE6()||HPBrowser.isIE7()||HPBrowser.isIE8();}
HPBrowser.isIE=HPBrowser.isIEOld;HPBrowser.isWebkit=function(){return HPBrowser.isChrome()||HPBrowser.isAppleFirefox()||HPBrowser.isAppleSafari();}
HPBrowser.nameBrowser=function(){if(HPBrowser.isChrome())return'Chrome';else if(jQuery.browser.msie)return'Explorer';else if(HPBrowser.isFirefox()||HPBrowser.isAppleFirefox())
return'Firefox';else if(HPBrowser.isAppleSafari())return'Safari';else if(HPBrowser.isWebkit())return'Webkit';else if(jQuery.browser.opera)return'Opera';else if(jQuery.browser.camino)return'Camino';else if(jQuery.browser.konqueror)return'Konqueror';else if(jQuery.browser.omniweb)return'OmniWeb';else if(/netscape/.test(navigator.userAgent))
return'Netscape';else return'An unknown browser';}
HPBrowser.browser_class=function(){var browser=HPBrowser.nameBrowser();return browser.replace(' ','_');}
HPBrowser.version=function(){var versionSearch=HPBrowser.nameBrowser();if(versionSearch=='Explorer')versionSearch="MSIE";if(versionSearch=='OmniWeb')versionSearch="OmniWeb/";if(versionSearch=='Netscape')versionSearch="Mozilla";var index=navigator.userAgent.indexOf(versionSearch);if(index==-1){index=navigator.appVersion.indexOf(versionSearch);if(index==-1)return"an unknown version";else return parseFloat(navigator.appVersion.substring(index+versionSearch.length+1));}
else return parseFloat(navigator.userAgent.substring(index+versionSearch.length+1));}
HPBrowser.major_version=function(){return parseInt(HPBrowser.version());}
HPBrowser.minor_version=function(){var _version=HPBrowser.version();var _major=HPBrowser.major_version();return(_version+"").substring((_major+"").length+1)||0;}
HPBrowser.version_class=function(){var _class=HPBrowser.version();return(''+_class).replace(' ','_').replace('.','_');}
HPBrowser.OS=function(){var os={name:(/(win|mac|linux|sunos|solaris|iphone|ipad)/.exec(navigator.platform.toLowerCase())||['unknown'])[0].replace('sunos','solaris')};if(os.name=='win')return'Windows';if(os.name=='mac')return'Mac';if(os.name=='linux')return'Linux';return os.name;}
HPBrowser.OS_class=function(){var os=HPBrowser.OS();return os.replace(' ','_');}
(function(window){var fontTestDiv,fontTestDivStatus,docElem=document.documentElement,timers={},timerId=0;var getFont=function(fontName,options){var options=options||{},callback=options.callback,pollDelay=options.pollDelay||100,timeout=options.timeout||10000,fontDiv,fontDivParent=docElem;if(!fontTestDiv){fontTestDiv=createHTML('<div style="position:absolute;top:-999em;left:-999em;width:auto;font-size:200px;font-family:serif">fONT TeST</div>');}
function fontReady(fontDiv){function fontReadyTest(){fontDivParent.insertBefore(fontDiv,fontDivParent.firstChild);poll(function(){return fontTestDiv.offsetWidth!==fontDiv.offsetWidth;},function(isTimeout){fontDivParent.removeChild(fontDiv);fontDivParent.removeChild(fontTestDiv);if(callback){callback(fontName,isTimeout);}},pollDelay,timeout);}
if(fontTestDivStatus===2){fontReadyTest();}else{poll(function(){return fontTestDivStatus===2;},fontReadyTest,pollDelay);}}
if(!fontTestDivStatus){docElem.insertBefore(fontTestDiv,docElem.firstChild);fontTestDivStatus=1;if(fontTestDiv.offsetWidth===0){poll(function(){return document.body;},function(){fontDivParent=document.body;fontDivParent.insertBefore(fontTestDiv,fontDivParent.firstChild);fontTestDivStatus=2;},pollDelay);}else{fontTestDivStatus=2;}}
fontDiv=fontTestDiv.cloneNode(true);fontDiv.style.fontFamily="'"+fontName+"',serif";fontReady(fontDiv);};window.getFont=getFont;function createHTML(html){var div=document.createElement('div');div.innerHTML=html;return div.firstChild;}
function now(){return new Date().getTime();}
function poll(check,callback,pollDelay,timeout){var name=timerId++,start=now(),time,isTimeout=false;pollDelay=pollDelay||1;timers[name]=setInterval(function(){time=now()-start;if(check()||(timeout&&(isTimeout=time>timeout))){callback.call(window,isTimeout,time);clearInterval(timers[name]);}},pollDelay);}}(this));
huff.use('conf',function(c){c.set('topnav/font-load-status',-1);getFont('OpenSansCondensed',{callback:function(f,t){c.set('topnav/font-load-status',(t?0:1));}});});
var Y=YAHOO;var E=Y.util.Event;var R=Y.util.Region;var Dom=Y.util.Dom;var C=Y.util.Connect;var $=Dom.get;var addEvent=E.addListener;var addListener=E.addListener;var axel=Math.random()+"";var ord=axel*1000000000000000000;var HpSupport={script_eval:null};var TrackingData=new Object;if('undefined'===typeof Array.prototype.inArray){Array.prototype.inArray=function(value){var i;for(i=0;i<this.length;i++){if(this[i]===value){return true;}}
return false;};}
if('undefined'===typeof Array.prototype.arrayPos){Array.prototype.arrayPos=function(value){for(var i=0;i<this.length;i++){if(this[i]===value){return i;}}
return-1;};}
function extend(obj,params){for(var key in params){if(!params.hasOwnProperty(key))
continue;obj[key]=params[key];}}
function form_to_iframe_callback(callback){try{callback();}
catch(e){}}
function isset(varname){if(typeof(window[varname])!="undefined")return true;else return false;}
function simulateClick(divid){jQuery('#'+divid).click();}
function supress_keyvalues(keys,str){jQuery.each(keys,function(i,key){r=new RegExp(key+'=[^;]+;','g');str=str.replace(r,'');})
return str;}
HPUtil.onPageReady(function(){HuffPoUtil.init();var lottery=(ClickTracker.sample==1)?1:(Math.round(Math.random()*(ClickTracker.sample-1))==1);ClickTracker.trackClicks=(lottery||ClickTracker.debug)&&(Dom.hasClass(document.body,'frontpage')||Dom.hasClass(document.body,'big_news_class')||document.getElementById('partner_box')||((typeof(bN_cfg)!='undefined')&&(typeof(bN_cfg.p)!='undefined')&&(bN_cfg.p.dL_dpt=='front')));if(ClickTracker.trackClicks){ClickTracker.init();}
Dom.batch(document.getElementsByTagName('UL'),function(el){if(el&&el.getElementsByTagName){lis=el.getElementsByTagName('LI');if(lis[0]){Dom.addClass(lis[0],'first');Dom.addClass(lis[lis.length-1],'last');}}});lists=Dom.getElementsByClassName("widget_children","div");for(var i=0;i<lists.length;i++){els=lists[i].getElementsByTagName("div");wi_els=new Array();for(var j=0;j<els.length;j++){o=els[j];if(Dom.hasClass(o,'widget_item')){wi_els.push(o);}}
for(var k=0;k<wi_els.length;k++){o=wi_els[k];if(k==0)
Dom.addClass(o,'first_child');if(k==wi_els.length-1)
Dom.addClass(o,'last_child');}}
setInterval(HuffPoUtil.UpdateEntriesComments,1000*300);var loggedin_user=document.getElementById('loggedin_user');if(loggedin_user){if(HuffCookies.getUserName()){loggedin_user.innerHTML='<a href="/users/logout/?referer='+encodeURIComponent(HPConfig.current_uri)+'" onclick="QuickLogin.SocialLogout(\'http://'+HPConfig.current_web_address+'/users/logout/?referer='+encodeURIComponent(HPConfig.current_uri)+'\'); return false;">'+_("Logout")+'</a> <span class="sign_bar">|</span> ';}else{loggedin_user.innerHTML='<a href="http://'+HPConfig.current_web_address+'/users/login/" onclick="HPConnect.Login(); return false;">'+_("Log In")+'</a> <span class="sign_bar">|</span> ';}}
if(HPBrowser.isIE8()){var icons=Dom.getElementsByClassName('webslice_icons');for(var len=icons.length;len--;){icons[len].style.display='inline';}}});
var FloatingPrompt={type:'bottom',embed_id:null,container:null,html_or_url:'',default_class:'prompting_overlay',embed:function(container,html,url,type,params)
{if(!this.container)
{this.container=document.createElement('div');Dom.addClass(this.container,this.default_class);this.embed_id=Dom.generateId(this.container);document.body.appendChild(this.container);}
else
{this.container.className=this.default_class;}
if(!container.id)
{Dom.generateId(container);}
this.type=type||this.type;params=params||{};var after_cb=params.after_cb||function(){},params_arrow_style=params.arrow_style||'',timeout_remove=params.timeout_remove||100,fp_intersects=params.fp_intersects,pre_cb=params.pre_cb||function(){},ignore_arrow=params.ignore_arrow||false,class_name=params.class_name||'',forget_intersect=params.forget_intersect,base_coords=params.base_coords||undefined;if(fp_intersects)
container.setAttribute('on_hover','yes');if(params.width)
this.container.style.width=params.width+'px';if(class_name)
Dom.addClass(this.container,class_name);this.container.setAttribute('embedded_to',container.id);var floating_prompt_mouseout=function(){container.removeAttribute('on_hover');var self=this,callback=function()
{if(self.parentNode&&!container.getAttribute('on_hover')){after_cb();if(self.getAttribute('embedded_to')==container.id)
{E.removeListener(self,'mouseout');E.removeListener(self,'mouseover');self.style.display='none';}
container.removeAttribute('floating_id');}}
if(container.getAttribute('fp_intersects'))
setTimeout(callback,timeout_remove);else
callback();}
container.setAttribute('floating_id',this.embed_id);E.on(container,'mouseout',function(){this.removeAttribute('on_hover');var self=this,callback=function()
{if(Dom.get(self.getAttribute('floating_id'))&&!self.getAttribute('on_hover')){after_cb();if(Dom.get(self.getAttribute('floating_id')).getAttribute('embedded_to')==container.id)
{E.removeListener(self.getAttribute('floating_id'),'mouseout');E.removeListener(self.getAttribute('floating_id'),'mouseover');Dom.get(self.getAttribute('floating_id')).style.display='none';}
self.removeAttribute('floating_id');}}
if(container.getAttribute('fp_intersects'))
setTimeout(callback,timeout_remove);else
callback();});var arrow_style='',type_embedding='',add_xy=params.add_xy||[0,0];switch(this.type)
{case'bottom':arrow_style=' style="top:-5px;left:-14px;" ';type_embedding='right-top';break;case'top':arrow_style='';type_embedding='left-top';break;case'top-right':arrow_style='';type_embedding='right-top';break;}
arrow_style=params_arrow_style||arrow_style;if(undefined===fp_intersects&&!forget_intersect)
{var container_region=Y.util.Region.getRegion(container);container_region.left-=1;container_region.right+=1;container_region.top-=1;container_region.bottom+=1;}
if(''!=html)
{this.container.innerHTML=!ignore_arrow?this._GetContent(arrow_style,html):html;this.container.style.display='block';var self=this;HPUtil.ShowNearElement(type_embedding,container,this.container,add_xy,function(){pre_cb(self,floating_prompt_mouseout);},base_coords);if(undefined===fp_intersects&&!forget_intersect)
{var intersects=Y.util.Region.getRegion(this.container).intersect(container_region)?1:0;container.setAttribute('fp_intersects',intersects);if(intersects)
{container.setAttribute('on_hover','yes');E.on(this.container,'mouseout',floating_prompt_mouseout);E.on([this.container,container],'mouseover',function(){container.setAttribute('on_hover','yes');return false;});}}
else if(!forget_intersect)
{container.setAttribute('fp_intersects',fp_intersects.toString());if(fp_intersects)
{E.on(this.container,'mouseout',floating_prompt_mouseout);E.on([this.container,container],'mouseover',function(){container.setAttribute('on_hover','yes');return false;});}}}
else
{var me=this;C.asyncRequest('GET',url,{success:function(o){me.container.innerHTML=!ignore_arrow?me._GetContent(arrow_style,o.responseText):o.responseText;me.container.style.display='block';HPUtil.ShowNearElement(type_embedding,container,me.container,add_xy,function(){pre_cb(me,floating_prompt_mouseout);},base_coords);if(undefined===fp_intersects&&!forget_intersect)
{var intersects=Y.util.Region.getRegion(me.contaner).intersect(container_region)?1:0;container.setAttribute('fp_intersects',intersects);if(intersects)
{container.setAttribute('on_hover','yes');E.on(me.container,'mouseout',floating_prompt_mouseout);E.on(me.container,'mouseover',function(){container.setAttribute('on_hover','yes');return false;});}}
else if(!forget_intersect)
{container.setAttribute('fp_intersects',fp_intersects.toString());if(fp_intersects)
{E.on(me.container,'mouseout',floating_prompt_mouseout);E.on(me.container,'mouseover',function(){container.setAttribute('on_hover','yes');return false;});}}},failure:function(){HPError.e();}});}},_GetContent:function(arrow_style,html)
{switch(this.type)
{case'bottom':return'<div class="btm_embed_arrow" '+arrow_style+'></div>'+html;break;case'top':case'top-right':return html+'<div class="top_embed_arrow" '+arrow_style+'></div>';break;}}}
huff.unit('tmp/floating_promt',function(ready){ready(FloatingPrompt)});
var HPEventModule={js_main_modules_loaded:{},js_events_loaded:{},yui_version_default:'2.7.0',events_dependencies:{'slideshow_participate':{immediately:{'our':['quickslideshowparticipate']},delayed:{'yui':{'button':'default'}}},'quiz_share':{immediately:{'our':['comments']}}},modules_loaded:{},yui_modules_loaded:{},Load:function(event_name,callback,scope,args)
{scope=scope||this;args=args||[];callback=callback||(function(){});if(this.js_events_loaded[event_name])
{callback.apply(scope,args);}
else
{var me=this;this._LoadModules(event_name,function(){callback.apply(scope,args);});}},Wait:function(event_name,callback,preloading_callback,wait_for_delayed_modules,scope)
{if(preloading_callback)
{preloading_callback();}
wait_for_delayed_modules=(undefined===wait_for_delayed_modules)?true:wait_for_delayed_modules;scope=scope||this;var me=this;HPUtil.WaitForCondition.apply(scope,[function(){setTimeout(function(){callback.apply(scope);},100)},1,function(){return!wait_for_delayed_modules?me.js_main_modules_loaded[event_name]:me.js_events_loaded[event_name]}]);},_LoadModules:function(event_name,callback,type_dependencies)
{callback=callback||(function(){});type_dependencies=type_dependencies||'immediately';var events_dependencies=this.events_dependencies[event_name][type_dependencies];var loading_url='/assets/js.php?'+HPConfig.timestamp_for_clearing_js+'&f=';var needed_modules=[],module_name='';if(events_dependencies['our'])
{for(var i=0;i<events_dependencies['our'].length;++i)
{module_name=events_dependencies['our'][i];if(this.modules_loaded[module_name])
{continue;}
needed_modules[needed_modules.length]='modules/'+module_name+'.js';}}
if(events_dependencies['yui'])
{for(var module_name in events_dependencies['yui'])
{if(this.yui_modules_loaded[module_name])
{continue;}
needed_modules[needed_modules.length]='yui_'+('default'!==events_dependencies['yui'][module_name]?events_dependencies['yui'][module_name]:this.yui_version_default)+'/'+module_name+'/'+module_name+'-min.js';}}
if(needed_modules.length)
{needed_modules=needed_modules.sort();loading_url+=needed_modules.join('%2C');var me=this;var hpmodule_callback=function()
{var module_name='';for(var i=0;i<needed_modules.length;++i)
{module_name=(new RegExp(/\/(.*?)\.js$/)).exec(needed_modules[i]);if(-1!==needed_modules[i].indexOf('yui_'))
{me.yui_modules_loaded[module_name[1]]=true;}
else
{me.modules_loaded[module_name[1]]=true;}}
callback();if('immediately'==type_dependencies&&me.events_dependencies[event_name]['delayed'])
{me.js_main_modules_loaded[event_name]=1;me._LoadModules(event_name,null,'delayed');}
else
{me.js_events_loaded[event_name]=1;}}
HPUtil.loadAndRun(loading_url,hpmodule_callback);}}
};huff.unit('tmp/event_module.js',function(ready){ready(HPEventModule)});
YAHOO.namespace('HPDocStatus');var HPDocStatus=YAHOO.HPDocStatus;HPDocStatus.on_focus=true;HPDocStatus.setFocusHandler=function(callback)
{if(!callback)
hpcallback=function(){HPDocStatus.on_focus=true;};else
hpcallback=function(){callback();HPDocStatus.on_focus=true;};if(HPBrowser.isIEOld())
window.onfocusin=hpcallback;else
YAHOO.util.Event.addListener(window,"focus",hpcallback);}
HPDocStatus.setBlurHandler=function(callback)
{if(!callback)
hpcallback=function(){HPDocStatus.on_focus=false;};else
hpcallback=function(){callback();HPDocStatus.on_focus=false;};if(HPBrowser.isIEOld())
window.onfocusout=hpcallback;else
YAHOO.util.Event.addListener(window,"blur",hpcallback);}
huff.unit('tmp/doc_status',function(ready){ready(HPDocStatus)});
var ViewTracker={VerticalType:-1,VerticalTypeViews:null,AddView:function(vertical_type,views)
{if(!this.VerticalTypeViews)
{this.Init();}
if(!vertical_type)vertical_type=this.VerticalType;if(!views)views=1;if(this.VerticalTypeViews[vertical_type])
{this.VerticalTypeViews[vertical_type]+=views;}
else
{this.VerticalTypeViews[vertical_type]=views;}
HuffCookies.set('huffpo_type_views',JSON.stringify(this.VerticalTypeViews),30*24);},Init:function()
{var value=HuffCookies.get('huffpo_type_views');if(value)
{this.VerticalTypeViews=JSON.parse(value);}
if(!this.VerticalTypeViews)
{this.VerticalTypeViews={};}},GetMostViewedVertical:function()
{var max=0;var vertical=-1;for(var i in this.VerticalTypeViews)
{if(parseInt(i)=='NaN')continue;if(max<this.VerticalTypeViews[i])
{max=this.VerticalTypeViews[i];vertical=i;}}
return vertical;}}
huff.unit('tmp/view_tracker',function(ready){ready(ViewTracker)});
var ClickTracker={debug:false,disabled:false,trackerImg:{},blogRecentRanking:0,trackMe:function(event)
{if(ClickTracker.disabled)
return 1;if(ClickTracker.debug)
event.preventDefault();var container;var el=this;for(i=0;i<6;i++)
{if(el.id&&el.id.match(/(entry|blog|recent|href)_\d+/))
{container=el;break;}
if(el.parentNode)
{el=el.parentNode;}}
this.trackerImg=new Image();this.trackerImg.onload=function(){HPTrack.navigateAfterTrack(event,this.href,this.target,0);};if(container)
{var expr=container.id.match(/href_(\d+)/);var tdata=(expr)?TrackingData["entry_"+expr[1]]:TrackingData[container.id];if(!tdata){tdata={type:'popular',id:this.href.match(/(\d+).html/).pop(),blog_id:this.href.match(/_n_/)?2:3}}
tdata.url=escape(this.href);if(!tdata.type)
{if(this.innerHTML.match(/read post/i))
tdata.type='read%20post';else if(this.innerHTML.match(/quick read/i))
tdata.type='in%20brief';else if(this.innerHTML.match(/Related/))
tdata.type='related';else if(this.innerHTML.match(/Comment/))
tdata.type='comments';else if(this.innerHTML.match(/bio/i))
tdata.type='bio';else if(Dom.hasClass(this.parentNode,'tag_wrap'))
tdata.type='tag';else if(this.parentNode.className=='author'||this.parentNode.className=='byline')
tdata.type='author';else if(tdata.blog_id==2&&this.firstChild&&this.firstChild.tagName=='IMG')
tdata.type='image';else if(tdata.blog_id==2)
tdata.type='headline';else if(tdata.blog_id==3&&this.parentNode.tagName&&this.parentNode.tagName=='H2')
tdata.type='headline';else if(tdata.blog_id==3&&this.parentNode.tagName&&this.parentNode.tagName=='P')
tdata.type='entry%20body';else if(tdata.zone_id==30)
tdata.type='from-partners';else
tdata.type='other';}
tdata.sample=ClickTracker.sample;this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(tdata);}
else if(!Dom.hasClass(document.body,'big_news_class'))
{el=this;for(i=0;i<6;i++)
{if(el.id&&!Dom.hasClass(el,'ignore_id')&&!el.id.match(/yuievtautoid/))
{container=el;break;}
el=el.parentNode;}
var tdata={url:'',type:'',id:-1,blog_id:-1,rank:-1,zone:-1,sample:ClickTracker.sample,vertical:ClickTracker.vertical_id}
tdata.url=escape(this.href);container&&(tdata.type=escape(container.id));this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(tdata);}
event.preventDefault();if(ClickTracker.debug){console.log(this.trackerImg.src);console.log(tdata);}else{HPTrack.navigateAfterTrack(event,this.href,this.target,400);}},trackTicker:function(tracking_url){if(ClickTracker.trackClicks)
{if(!(url_chunks=tracking_url.match(/_([nb])_(\d+)\.html/)))
window.location.href=tracking_url;blog_id=(url_chunks[1]=='n')?2:3;var tdata={url:escape(tracking_url),type:'ticker_flash',id:-1,blog_id:blog_id,rank:-1,zone:-1,vertical:ClickTracker.vertical_id}
this.trackerImg=new Image();this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(tdata);}
if(Dom.hasClass(document.body,'frontpage'))
{if(Dom.hasClass(document.body,'homepage'))
{ticker_area="front";}
else
{ticker_area=document.body.id;}}
else
{ticker_area='secondary';}
HPTrack.trackPageview("/t/a/ticker/"+ticker_area);window.location.href=tracking_url;},trackComment:function(comment_id,entry_id){this.trackerImg=new Image();this.trackerImg.src="/clicktracking/best-of.php?comment_id="+comment_id+"&entry_id="+entry_id;},deprecated_flagComment:function(comment_id,entry_id){this.trackerImg=new Image();this.trackerImg.src="/huff-send-comment.cgi?id="+comment_id+"&entry_id="+entry_id;Dom.addClass('flag_'+comment_id,'flagged');$('flag_'+comment_id).innerHTML='Flagged';},flagComment:function(comment_id,entry_id,blog_id){var button_text=$('flag_'+comment_id);if(button_text.innerHTML.indexOf('Flagged')==-1){this.trackerImg=new Image();this.trackerImg.src="/include/flagComment.php?type=abuse&blog_id="+blog_id+"&cmt_id="+comment_id+"&entry_id="+entry_id;var number=parseInt(/\((\d+)\)/.exec(button_text.innerHTML)[1])+1;button_text.innerHTML='Flagged ('+number+')';}},favComment:function(comment_id,entry_id,blog_id){var button_text=$('best_'+comment_id);if(button_text.innerHTML.indexOf('Marked')==-1){this.trackerImg=new Image();this.trackerImg.src="/include/flagComment.php?type=best&blog_id="+blog_id+"&cmt_id="+comment_id+"&entry_id="+entry_id;var number=parseInt(/\((\d+)\)/.exec(button_text.innerHTML)[1])+1;button_text.innerHTML='Marked as favorite ('+number+')';SNProject.track(comment_id,'comment_favored',entry_id);}},initRelatedTracker:function(){lists=Dom.getElementsByClassName("relatedposts","ul");for(var i=0;i<lists.length;i++)
{Dom.batch(lists[i].getElementsByTagName("a"),function(o){o.href='http://www.huffingtonpost.com/include/lib/RelatedTracker.php?type=related&utm_hp_ref='+document.URL+'&dest='+o.href;});}
lists=Dom.getElementsByClassName("topposts","ul");for(var i=0;i<lists.length;i++)
{Dom.batch(lists[i].getElementsByTagName("a"),function(o){o.href='http://www.huffingtonpost.com/include/lib/RelatedTracker.php?type=top&utm_hp_ref='+document.URL+'&dest='+o.href;});}},init:function(){var selector=ClickTracker.type=='from-partners'?'#partner_box a':'a';jQuery(document).delegate(selector,'click',ClickTracker.trackMe);}}
huff.unit('tmp/click_tracker',function(ready){ready(ClickTracker)});
var Slider={Next:function(vertical)
{if(Slider.Positions[vertical]<Slider.Lengths[vertical]-1)
{Slider.Positions[vertical]++;}
else
{return false;}
Slider.LoadImage(vertical);Dom.setStyle(Dom.getElementsByClassName('slider_slide','div','slider_'+vertical),'display','none');Dom.setStyle('slider_'+vertical+"_slide_"+Slider.Positions[vertical],'display','block');if(Slider.Positions[vertical]==Slider.Lengths[vertical]-1)
{Dom.addClass('slider_right_'+vertical,'slider_off');}
Dom.removeClass('slider_left_'+vertical,'slider_off');},Previous:function(vertical)
{if(Slider.Positions[vertical]>0)
{Slider.Positions[vertical]--;}
else
{return false;}
Slider.LoadImage(vertical);Dom.setStyle(Dom.getElementsByClassName('slider_slide','div','slider_'+vertical),'display','none');Dom.setStyle('slider_'+vertical+"_slide_"+Slider.Positions[vertical],'display','block');if(Slider.Positions[vertical]==0)
{Dom.addClass('slider_left_'+vertical,'slider_off');}
Dom.removeClass('slider_right_'+vertical,'slider_off');},LoadImage:function(vertical){this_slide=$("slider_"+vertical+"_img_"+Slider.Positions[vertical]);if(this_slide&&!this_slide.src<2&&this_slide.alt)
{this_slide.src=this_slide.alt;}},Positions:new Array(),Lengths:new Array()};huff.unit('tmp/slider',function(ready){ready(Slider)});
StructuredImage=function(Tag){if(!(decon=/<HH--(DEV--)?PHOTO--([A-Z\-_0-9]*)--(\d+)--HH>/.exec(Tag)))
return false;this.keywords=decon[2];this.id=decon[3];this.domain=(decon[1])?'dev.assets.huffingtonpost.com':'i.huffpost.com';this.path="http://"+this.domain+"/gen/"+this.id+"/thumbs/";}
StructuredImage.prototype.Url=function(aspect,size){return this.path+aspect+"-"+this.keywords+"-"+size+".jpg";}
huff.unit('tmp/structured_image.js',function(ready){ready(StructuredImage)});
function CommonPaginator(){this.init.apply(this,arguments);};CommonPaginator.prototype={init:function(params){this.currentPage=1;this.currentCustomPage=0;this.startPage=1;this.to_hide=0;this.lock=false;var _this=this;huff.use('common_paginator',function(common_paginator){common_paginator.init(_this,params);});},Previous:function(){var _this=this;huff.use('common_paginator',function(common_paginator){common_paginator.Previous(_this);});},Goto:function(page){var _this=this;huff.use('common_paginator',function(common_paginator){common_paginator.Goto(_this,page);});},Next:function(){var _this=this;huff.use('common_paginator',function(common_paginator){common_paginator.Next(_this);});}};huff.unit('tmp/common_paginator',function(ready){ready(CommonPaginator)});
var CurtainModule={collapse:function(){$("main_container").style.display="none";HuffCookies.set('huffpost_curtain',1);}}
huff.unit('tmp/curtain',function(ready){ready(CurtainModule)});
function Paginator(config){if(!config.hasOwnProperty('paginator_id'))
return;if(!config.hasOwnProperty('name'))
return;if(!config.hasOwnProperty('entry_class'))
return;if(!config.hasOwnProperty('entries_id'))
return;if(!config.hasOwnProperty('entries_per_page'))
this.entries_per_page=5;this.entries_id=config.entries_id;this.paginator_id=config.paginator_id;this.name=config.name;this.entry_class=config.entry_class;this.entries_per_page=this.entries_per_page?this.entries_per_page:config.entries_per_page;this.entries=Dom.getElementsByClassName(this.entry_class);this.entries_tmp=[];var div=document.createElement('div');for(var i=0;i<this.entries.length;i++){if(this.entries[i]){var div=document.createElement('div');div.appendChild(this.entries[i]);this.entries_tmp.push(div.innerHTML);}}
this.BuildPaginator=BuildPaginator;this.RenderPage=RenderPage;this.UpdateFadeInOut=UpdateFadeInOut;;this.RenderPage(1);Dom.setStyle(this.entries_id,'display','block');function RenderPage(page){var ftw=(page-1)*this.entries_per_page;var ltw=ftw+this.entries_per_page-1;var html='';for(var c=ftw;c<=ltw;c++)
{if(this.entries_tmp[c]){html+=this.entries_tmp[c];}}
this.UpdateFadeInOut(this.entries_id,html);var paginator=this.BuildPaginator(page);Dom.get(this.paginator_id).innerHTML=paginator;}
function BuildPaginator(page){var pagination='Pages: ';var epsilon=5;var per_page=this.entries_per_page;var total=this.entries_tmp.length;if(1<(page-epsilon)){pagination+='<a href="javascript:'+this.name+'.RenderPage(1);">1</a> ';if(1<(page-epsilon-1)){pagination+='... ';}}
var pages=Math.ceil(total/per_page);var first=page-epsilon;if(first<1){first=1;}
var last=page+epsilon;if(last>pages){last=pages;}
for(var i=first;i<=last;i++){var p=(i-1)*4;if(i==page){pagination+=i+' ';}else{pagination+='<a href="javascript:'+this.name+'.RenderPage('+i+');">'+i+'</a> ';}}
if((page+epsilon)<pages){if((page+epsilon+1)<pages){pagination+='... ';}
pagination+='<a href="javascript:'+this.name+'.RenderPage('+pages+');">'+pages+'</a> ';}
return pagination;}
function UpdateFadeInOut(id,msg)
{var fadeOut=new YAHOO.util.Anim($(id),{opacity:{to:0}},0.5);var fadeIn=function(type,args){$(id).innerHTML=msg;var fadeIn=new YAHOO.util.Anim($(id),{opacity:{to:1}},0.5);fadeIn.animate();};fadeOut.onComplete.subscribe(fadeIn);fadeOut.animate();}}
huff.unit('tmp/paginator',function(ready){ready()});
var OnFocusTimer=function(){var active=true;var _functionProxy=function(code){if(typeof(code)=='string'){return function(){if(active){eval(code);}}}else if(typeof(code)=='function'){return function(){if(active){code();}}}
return function(){};}
var _onFocus=function(){active=true;}
var _onBlur=function(){active=false;}
YAHOO.util.Event.on(window,'focus',_onFocus);YAHOO.util.Event.on(window,'blur',_onBlur);return{'setTimeout':function(code,timeout){return setTimeout(_functionProxy(code),timeout);},'setInterval':function(code,interval){return setInterval(_functionProxy(code),interval);}}}();huff.unit('tmp/on_focus_timer',function(ready){ready(OnFocusTimer)});
jQuery(document).ready(function(){setTimeout('HPAds.ugc_suppress_check()',3000);})
var HPAds={ad_timezone_store:[],ad_store:[],iframe_ads_queue:[],iframe_ads_callback:[],iframe_ads_timeout:4000,iframe_ads_queue_running:false,ad_capchecked:false,ad_cap:'n',snpmodule_skin:false,homepage_trailer:{},spot_rendered:{},page_spots:[],curr_page_config:false,full_page_config:false,revsplit:{getAdId:function(spot,backup){if(typeof io_c3sd!='undefined'&&typeof io_c3sd.ads!="undefined"&&typeof io_c3sd.ads[spot]!='undefined'){var magic_number=io_c3sd.ads[spot];return magic_number.replace(/\s/g,"");}else{return backup;}}},hide_ugc_ads:function()
{if(HPAds.ugc_ads_hidden)return;var iframe_collection=jQuery('iframe[src*="adpage.html"]');for(x=0;iframe_collection[x];x++)
{if(iframe_collection[x].contentWindow.document.body.innerHTML.indexOf('ugc_flag')>1)
{jQuery(iframe_collection[x]).closest('.ad_728_90b_fix,.ad_wrapper_top, .ad_wrapper_, .ad_wrapper').css('display','none');HPAds.ugc_ads_hidden=true;}}},ugc_suppress_check:function(){if('undefined'!=typeof(twitter_suppress)&&twitter_suppress){jQuery('#twitter_block_holder').css('display','none');jQuery('#show_twitter_block').css('display','block');jQuery('#show_twitter_block').click(function(){jQuery('#twitter_block_holder').css('display','block');jQuery('#show_twitter_block').css('display','none');HPAds.hide_ugc_ads();return false;});}else{jQuery('#show_twitter_block').css('display','none');jQuery('#twitter_block_holder').css('display','block');};if('undefined'!=typeof(comments_suppress)&&comments_suppress){jQuery('.comments_block_holder').css('display','none');jQuery('#show_comments_block').css('display','block');jQuery('#show_comments_block').click(function(){jQuery('.comments_block_holder').css('display','block');jQuery('#show_comments_block').css('display','none');HPAds.hide_ugc_ads();return false;});}else{jQuery('#show_comments_block').css('display','none');jQuery('.comments_block_holder').css('display','block');}},iframe_ads_queue_callback:function(callback)
{if(callback){this.iframe_ads_callback.push(callback);if(this.iframe_ads_queue_running)return;}
if((this.iframe_ads_queue.length==0)||(this.iframe_ads_timeout<=0)){this.iframe_ads_queue_running=false;if(this.iframe_ads_callback.length>0){for(var i=0;i<this.iframe_ads_callback.length;i++){this.iframe_ads_callback[i].call();this.iframe_ads_callback.slice(i,1);}}}else{this.iframe_ads_timeout=this.iframe_ads_timeout-200;this.iframe_ads_queue_running=true;setTimeout("HPAds.iframe_ads_queue_callback(null)",200);}},adSonar:function(plid,pid,w,h)
{document.write('<s'+'cript type="text/javascript">adsonar_placementId='+plid+';adsonar_pid='+pid+';adsonar_ps=-1;adsonar_zw='+w+';adsonar_zh='+h+';adsonar_jv="ads.tw.adsonar.com";</s'+'cript><s'+'cript language="JavaScript" src="http://js.adsonar.com/js/tw_dfp_adsonar.js"></s'+'cript>')
if(location.href.match('debugadcode'))
{document.write('<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px">');document.write('<b>ADSONAR PLACEMENT</b>');document.write('<br />plid: '+plid);document.write('<br />pid: '+pid);document.write('<br />width: '+w);document.write('<br />height: '+h);document.write('</div>');}},iframe_ads_queue_remove:function(ad_spot_rm)
{for(var i=0;i<this.iframe_ads_queue.length;i++){if(this.iframe_ads_queue[i]==ad_spot_rm){this.iframe_ads_queue.splice(i,1);break;}}},ad_check_savecookie:function()
{var cn='huffpost_adssale';if(this.ad_capchecked)
{return;}
var cval=HuffCookies.getCookie(cn);if(cval=='y')
{HuffCookies.setCookie(cn,'n',12);this.ad_cap='y';}
else if(cval=='n')
{this.ad_cap='n';}
else
{HuffCookies.setCookie(cn,'y',-1);}
this.ad_capchecked=true;},ad_store_push:function(ad_position_name,ad_type,ad_container_width,ad_content,defer,ad_positioned_callback,slug,refresh_rate)
{var r_rate=refresh_rate||false;HPAds.ad_store[ad_position_name]={'ad_type':ad_type,'ad_container_width':ad_container_width,'ad_content':ad_content,'defer':defer,'positioned_callback':ad_positioned_callback,'slug':slug,'refresh_rate':r_rate};},homepage_trailer_add:function(id,video_params,caller,exec)
{if(HPAds.homepage_trailer[id])
{HPAds.homepage_trailer[id].video_params=video_params;}
if(exec){QV.popHomepageTrailer(id,caller)}},ads_ord:function()
{return ord;},ads_client_info:function()
{var src_param='';var os_param='null';var browser_param='null';if(HPBrowser.OS()=='Windows')os_param='win';else if(HPBrowser.OS()=='Linux')os_param='lin';else if(HPBrowser.OS()=='Mac')os_param='mac';var _browser=HPBrowser.nameBrowser();if(_browser=='Explorer')browser_param='ie';else if(_browser=='Firefox')browser_param='ff';else if(_browser=='Chrome')browser_param='ch';else if(_browser=='Opera')browser_param='op';else if(_browser=='Safari')browser_param='sa';else if(_browser=='Konqueror')browser_param='ko';else if(_browser=='Camino')browser_param='ca';else if(_browser=='OmniWeb')browser_param='om';var query=HPUtil.getQueryVariables();var no_keyvalue=new Array();if(typeof(query.no_keyvalue)!='undefined')no_keyvalue=query.no_keyvalue.split(",");if(no_keyvalue.inArray("plat")===false){src_param+='plat='+os_param+';';}
if(no_keyvalue.inArray("br")===false){src_param+='br='+browser_param+';';}
if(no_keyvalue.inArray("bv")===false){src_param+='bv='+HPBrowser.major_version()+';';}
if(no_keyvalue.inArray("subbv")===false){src_param+='subbv='+HPBrowser.minor_version();}
return src_param;},ads_u_value:function()
{var src_params=HuffCookies.getSNPstatus()=='1'?'y|':'|';var c=document.cookie;var cn='__qseg=';var csi=c.indexOf(cn);if(csi!=-1)
{if((cei=c.indexOf(';',csi+cn.length))==-1)
{cei=c.length;}
a=unescape(c.substring(csi+cn.length,cei));src_params+=a.replace(/\|{0,1}Q_/gi,',').replace(/^,/,'');}
return src_params;},ads_inf_value:function()
{var inf=HuffCookies.getUserInfluence();var src_params=inf.commented.value==1||inf.shared.value==1||inf.emailed.value==1||inf.blogged.value==1||inf.blogged.value==1?'y':''
return src_params;},adtech_client_side_inf:function()
{var query=HPUtil.getQueryVariables();var no_keyvalue=new Array();if(typeof(query.no_keyvalue)!='undefined')no_keyvalue=query.no_keyvalue.split(",");var inf=HuffCookies.getUserInfluence();if((inf.commented.value==1||inf.shared.value==1||inf.emailed.value==1||inf.blogged.value==1||inf.blogged.value==1)&&(no_keyvalue.inArray('inf')===false))
{return'kvinf=y;';}
return'';},ads_client_side_qvs:function()
{var src_params='';var a=false;var cn='__qseg=';var c=document.cookie;var csi=c.indexOf(cn);var query=HPUtil.getQueryVariables();var no_keyvalue=new Array();if(typeof(query.no_keyvalue)!='undefined')no_keyvalue=query.no_keyvalue.split(",");if(csi!=-1)
{if((cei=c.indexOf(';',csi+cn.length))==-1)
{cei=c.length;}
a=unescape(c.substring(csi+cn.length,cei));}
if((HuffCookies.getSNPstatus()=='1')&&(no_keyvalue.inArray('snn')===false))
{src_params+='snn=y;';}
var inf=HuffCookies.getUserInfluence();if((inf.commented.value==1||inf.shared.value==1||inf.emailed.value==1||inf.blogged.value==1||inf.blogged.value==1)&&(no_keyvalue.inArray('inf')===false))
{src_params+='inf=y;';}
this.ad_check_savecookie();if(no_keyvalue.inArray("cap_12")===false){src_params+='cap_12='+this.ad_cap+';';}
if(no_keyvalue.inArray("ref")===false){var rexp=/ref=([^&]+)/ig;var match;while((match=rexp.exec(location.search))!=null){src_params+='utm_hp_ref='+match[1]+';';}}
if(no_keyvalue.inArray("qcs")===false){src_params+=(a?a.replace(/\|{0,1}Q_/gi,';qcs=').replace(/^;/,'')+';':'');}
return src_params;},timeout_store:{},ad_move_to_place:function(spot_name,post_load)
{var spot=HPAds.ad_store[spot_name];var type=spot.ad_type;var width=spot.ad_container_width;if('by_request'==type&&!post_load&&!spot.defer)
{setTimeout(function(){HPAds.ad_reload(spot_name)},2000);}
else if('dom_move'==type&&!post_load&&!('pushdown'==spot_name&&'Explorer'==HPBrowser.nameBrowser()))
{document.getElementById('ad_'+spot_name).innerHTML='';document.getElementById('ad_'+spot_name).appendChild(document.getElementById('ad_store_'+spot_name));YAHOO.util.Dom.removeClass('ad_store_'+spot_name,'ad_store');}
else if('css_positioned'==type)
{var adCont=document.getElementById('ad_store_'+spot_name);if(adCont.clientHeight>59)
{var im=document.createElement('IMG');im.src='/images/spacer.gif';im.width=adCont.clientWidth;im.height=adCont.clientHeight;Dom.setStyle(im,'margin','0');Dom.setStyle(im,'padding','0');var posCont=document.getElementById('ad_'+spot_name);if(posCont.hasChildNodes()){posCont.removeChild(posCont.firstChild);}
document.getElementById('ad_'+spot_name).appendChild(im);var placeholder_position=YAHOO.util.Dom.getXY(im);var wrapper_horiz_offset=YAHOO.util.Dom.getXY(document.getElementById('wrapper'))[0];var wrapper_vert_offset=YAHOO.util.Dom.getXY(document.getElementById('wrapper'))[1];adCont.style.top=parseInt(parseInt(placeholder_position[1])-wrapper_vert_offset)+'px';adCont.style.left=parseInt(parseInt(placeholder_position[0]-wrapper_horiz_offset))+'px';YAHOO.util.Dom.removeClass(adCont,'ad_store');adCont.style.visibility='visible';adCont.style.position='absolute';if(HPAds.timeout_store[spot_name])
{clearInterval(HPAds.timeout_store[spot_name].interval);}
if(spot.positioned_callback&&typeof(spot.positioned_callback)=='function')spot.positioned_callback();}
else if(!HPAds.timeout_store[spot_name])
{HPAds.timeout_store[spot_name]={'interval':setInterval(function(){HPAds.ad_move_to_place(spot_name);},200),'attempt':1}}
else if(HPAds.timeout_store[spot_name].attempt<12)
{HPAds.timeout_store[spot_name].attempt++;}
else
{clearInterval(HPAds.timeout_store[spot_name].interval);HPAds.timeout_store[spot_name]=null;HPAds.ad_store[spot_name]=null;var store_to_clear=document.getElementById('ad_store_'+spot_name);var x=store_to_clear.parentNode;x.removeChild(store_to_clear);}}},ad_store_move_to_place:function(post_load)
{var AS=HPAds.ad_store;for(i in AS)
{if(AS[i]&&typeof(AS[i])=='object'){HPAds.ad_move_to_place(i,post_load);}}
if(location.href.match('debugadcode')){jQuery('script[src*="PlayerSeed.js"]').each(function(index){var _isComm=jQuery(this).attr('src').match('&siteSection=');var _debugBox='<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;clear:both">'+
'Player: 5min '+(_isComm?'commercial':'classic');var _sc=commercial_video.site_and_category!==""?commercial_video.site_and_category:"N/A";if(_isComm&&typeof(commercial_video)=="object")_debugBox+="<br />Site Section: "+_sc;var _vp=commercial_video.package!==""?commercial_video.package:"N/A";if(_isComm&&typeof(commercial_video)=="object")_debugBox+='<br />Sponsorship: '+_vp;_debugBox+='</div>';jQuery(this).parent().append(_debugBox);});jQuery('script[src*="videoplayer/loader.js"]').each(function(index){var _debugBox='<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;clear:both">'+
'Player: Brightcove'+
'<br />Sponsorship: '+AOLVP_cfg[index].sponsorship+
'</div>';jQuery('#'+AOLVP_cfg[index].id).after(_debugBox);});}},ad_reload:function(spot_name,ad_holder_id,replace_el)
{if(!HPAds.ad_check_page_config(spot_name))
{return false;}
var holder_el;if(!ad_holder_id||ad_holder_id==''){if('slideshow_300x250_req'===spot_name){holder_el=jQuery('.ad_wrapper[id^="ad_slideshow_"]:visible');}else if('slideshow_728x90_req'===spot_name){holder_el=jQuery('.ad_wrapper[id^="ad_slideshow_"]:visible');}else{holder_el=jQuery('#ad_'+spot_name);}}else{holder_el=jQuery('#'+ad_holder_id);}
holder_el=holder_el[0];if(holder_el&&HPAds.ad_store[spot_name]){if(HPAds.ad_store[spot_name].reload_count&&HPAds.ad_store[spot_name].refresh_rate&&(HPAds.ad_store[spot_name].reload_count%Math.round(100/HPAds.ad_store[spot_name].refresh_rate))){HPAds.ad_store[spot_name].reload_count++;return false;}
var ad_content=HPAds.ad_store[spot_name].ad_content;try{var adtech_data=jQuery.parseJSON(ad_content);if("undefined"!=typeof(adtech_data.adRealMediaPos)){realmedia_url='/ads/ads_realmedia.php?ad_pos='+adtech_data.adRealMediaPos+'&ad_name='+spot_name+'&site='+HPConfig.site;holder_el.innerHTML='<iframe id="'+ad_holder_id+'_proxy" src="'+realmedia_url+'" scrolling="no" frameborder="no" border="0" width="300" height="250" style="width:300px;height:250px;"></iframe>';if(location.href.match('debugadcode')){var debugadcode=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">RealMedia</div>Position: '+adtech_data.adRealMediaPos+'</div></div>');jQuery(holder_el).after(debugadcode);}}
else{adtech_data.magic_number=HPAds.revsplit.getAdId(spot_name,adtech_data.magic_number);if(adtech_data.height=='RR'){htmlAdWHDyn(adtech_data.magic_number,adtech_data.sizes,adtech_data.call_type,holder_el);}else{htmlAdWH(adtech_data.magic_number,adtech_data.width,adtech_data.height,adtech_data.call_type,holder_el);}
if("undefined"!=typeof(adtech_data.debugadcode)&&adtech_data.debugadcode){var debugadcode=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">AdTech</div>'+adtech_data.debugadcode.replace('customAdId',adtech_data.magic_number)+'</div></div>');jQuery(holder_el).after(debugadcode);}}}catch(e){var ord=parseInt(Math.random()*1000000000000000);if(/ajax_ord=/i.test(ad_content)){ad_content=ad_content.replace(/ajax_ord=\d*;/ig,'ajax_ord='+ord+';');}
else{ad_content=ad_content.replace(/ord=/ig,'ajax_ord='+ord+';ord=');}
if(HPAds.ad_store[spot_name].slug){holder_el.className=holder_el.className+' ad_wrapper_'+HPAds.ad_store[spot_name].slug;}
if(typeof replace_el!=='undefined')jQuery(holder_el).replaceWith(ad_content);else holder_el.innerHTML=ad_content;}
if(HPAds.ad_store[spot_name].reload_count)HPAds.ad_store[spot_name].reload_count++;else HPAds.ad_store[spot_name].reload_count=1;if(spot_name=='quickread'){HPAds.ad_html_wh(HPConfig.current_vertical_name,'quickread');}
if((spot_name=='slideshow_300x250_req')&&(jQuery.isArray(HPConfig.entry_tags))){var current_vertical_name=HPConfig.entry_tags.inArray('healthy-living-health-news')?'healthy-living-health-news':HPConfig.current_vertical_name
HPAds.ad_html_wh(current_vertical_name,'slideshow');}}},ad_html_wh:function(vert,placement)
{HPUtil.appendScript('/ads/ad_html_wh.php?vert='+vert+'&placement='+placement);},ad_check_handlers:{referer:function(params)
{return(document.referrer.search(params)>=0);}},ad_check_wrapper:function(handler,params)
{if(typeof(this.ad_check_handlers[handler])!='undefined')
{return this.ad_check_handlers[handler](params);}
else
return true;},trackSponsorContent:function(urlTmpl,sponsorName)
{if(sponsorName&&sponsorName.length)
{HPTrack.trackPageview(urlTmpl.replace(/__SPONSOR__/g,sponsorName));}},ad_flight_to_store:function(ad_position_name,ad_content,date_start,date_end)
{if("undefined"==typeof(HPAds.ad_timezone_store[ad_position_name])){HPAds.ad_timezone_store[ad_position_name]=new Array();}
HPAds.ad_timezone_store[ad_position_name].push({'content':ad_content,'date_start':date_start,'date_end':date_end});},time_check:function(ad_position_name)
{var d=new Date();var date_for_compare='';date_for_compare+=d.getFullYear();var month=d.getMonth()+1;month+='';if(1==month.length){date_for_compare+='0';}
date_for_compare+=month;var day=d.getDate()+'';if(1==day.length){date_for_compare+='0';}
date_for_compare+=day;var hours=d.getHours()+'';if(1==hours.length){date_for_compare+='0';}
date_for_compare+=hours;var minutes=d.getMinutes()+'';if(1==minutes.length){date_for_compare+='0';}
date_for_compare+=minutes;date_for_compare=parseInt(date_for_compare);jQuery(HPAds.ad_timezone_store[ad_position_name]).each(function(i,element){try{if(element.date_start>=date_for_compare||element.date_end<=date_for_compare){HPAds.ad_timezone_store[ad_position_name].splice(i,1);}}catch(e){HPAds.ad_timezone_store[ad_position_name].splice(i,1);}});},ad_flight_store_render:function(ad_position_name,execute_all)
{try{if(!execute_all){HPAds.ad_timezone_store[ad_position_name]=new Array(HPAds.ad_timezone_store[ad_position_name].pop());}
jQuery(HPAds.ad_timezone_store[ad_position_name]).each(function(i,element){document.write(element.content);});}catch(e){}},page_config_set:function(name)
{if(typeof HPAds.full_page_config.flights!='undefined'){for(var i=0;i<HPAds.full_page_config.flights.length;i++){if(HPAds.full_page_config.flights[i].name==name){HPAds.curr_page_config=HPAds.full_page_config.flights[i];break;}}}},ad_check_page_config:function(ad_position)
{var result=(typeof ad_overrides=='undefined'||(ad_overrides.spots&&jQuery.inArray(ad_position,ad_overrides.spots)>-1));if(!HPAds.curr_page_config&&(typeof aol_devil_flag!=="undefined")&&aol_devil_flag){HPAds.page_config_set("devil");}
if(HPAds.curr_page_config){if(HPAds.curr_page_config.mode=='all_but'){result=(jQuery.inArray(ad_position,HPAds.curr_page_config.spots)==-1);}else{result=(jQuery.inArray(ad_position,HPAds.curr_page_config.spots)>-1);}}
return result;},ad_onload:function(e,fn){jQuery(e).bind('load',function(){eval(fn)});},ad_uac_onload_handler:function(selector_to_check_on_page_ready,ad_wrapper_selector,css_class_to_add,calls_count)
{var ad_wrapper_selector="#"+jQuery(ad_wrapper_selector).parent().parent().attr("id");var selector_to_check_on_page_ready=typeof selector_to_check_on_page_ready!=="undefined"?ad_wrapper_selector+selector_to_check_on_page_ready:ad_wrapper_selector;var _calls_count=calls_count||3;var interval_counter=1;var interval_handle=setInterval(function(){if(jQuery(selector_to_check_on_page_ready).length){jQuery(ad_wrapper_selector).addClass(css_class_to_add);}
if(_calls_count==interval_counter)
clearInterval(interval_handle);interval_counter++;},300);},get_banner_ids:function()
{var result=new Array();try{jQuery('iframe[title="Ad"]').each(function(i,el){var banId=jQuery(el).attr('banid').split('|');if('undefined'!=typeof(banId[0])&&banId[0].length){result.push(banId[0]);}});}catch(e){}
return result;},get_banners_str:function(){try{var banners=HPAds.get_banner_ids();return banners.join();}catch(e){return'';}},lookbook:{click_track:function(el){if(typeof HPAds.lookbook.href!=="undefined"){jQuery(el).each(function(){this.href=HPAds.lookbook.href+this.href;});}},imp_track:{init:function(el){if(typeof HPAds.lookbook.src!=="undefined"){this.setup(el)}},rand:function(){return Math.floor(Math.random()*10000000);},setup:function(el){if(jQuery("div.hp-lookbook-tracking").length==0){jQuery(el).append('<div class="hp-lookbook-tracking" style="display:none;"></div>');}
this.exec();},exec:function(){jQuery("div.hp-lookbook-tracking").append('<img src="'+HPAds.lookbook.src+'?'+this.rand()+'" alt="" border="0" height="1" width="1"/>');}}},ad_sharebox_260x60_fix:function()
{jQuery(document).ready(function(){setTimeout(function(){if(jQuery('#ad_sharebox_260x60 iframe').height()>10){jQuery('#ad_sharebox_260x60').parent().addClass('padding_bottom_5 margin_right_20 block');}
if(jQuery.browser.msie){jQuery('.ad_share_box').addClass('block');}},2000);});}}
huff.unit('tmp/hp_ads',function(ready){ready(HPAds)});
window.sprintf||(window.sprintf=function(str){return str;});window._||(window._=function(str){return str;});var TwitterUtil={elapsedTime:function(created_at,need_ie_fix){var date=created_at;var ageInSeconds;var from_date;from_date=new Date(created_at).getTime();if(need_ie_fix){date=this.fixDate(date);ageInSeconds=(new Date().getTime()-new Date(date).getTime())/1000;if(isNaN(ageInSeconds)){ageInSeconds=(new Date().getTime()-from_date)/1000;}}else{ageInSeconds=(new Date().getTime()-from_date)/1000;}
var s=function(n){return n==1;};if(ageInSeconds<60){return _('less than a minute ago');}
if(ageInSeconds<60*60){var n=Math.floor(ageInSeconds/60);return s(n)?sprintf(_('%s minute ago'),n):sprintf(_('%s minutes ago'),n);}
if(ageInSeconds<60*60*24){var n=Math.floor(ageInSeconds/60/60);return s(n)?sprintf(_('%s hour ago'),n):sprintf(_('%s hours ago'),n);}
if(ageInSeconds<60*60*24*7){var n=Math.floor(ageInSeconds/60/60/24);return s(n)?sprintf(_('%s day ago'),n):sprintf(_('%s days ago'),n);}
if(ageInSeconds<60*60*24*31){var n=Math.floor(ageInSeconds/60/60/24/7);return s(n)?sprintf(_('%s week ago'),n):sprintf(_('%s weeks ago'),n);}
if(ageInSeconds<60*60*24*365){var n=Math.floor(ageInSeconds/60/60/24/31);return s(n)?sprintf(_('%s month ago'),n):sprintf(_('%s months ago'),n);}
var n=Math.floor(ageInSeconds/60/60/24/365);return s(n)?sprintf(_('%s year ago'),n):sprintf(_('%s years ago'),n);},fixDate:function(d)
{if(HPBrowser.isIEOld())
{var a=d.split(' ');var year=a.pop();return a.slice(0,3).concat([year]).concat(a.slice(3)).join(' ');}
else
return d;},linkifyTextLinks:function(arg)
{return arg.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(m){return'<a href="'+m+'" target="_blank">'+((m.length>25)?m.substr(0,24)+'...':m)+'</a>';});},twittify:function(tweet_text){var at=function(t){return t.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(m,m1,m2){return m1+'<a href="http://twitter.com/'+m2+'" target="_blank" class="twitter-anywhere-user">'+'@'+m2+'</a>';});};var hash=function(t){return t.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9_]+)/g,function(m,m1,m2){return m1+'#<a href="http://search.twitter.com/search?q=%23'+m2+'" target="_blank">'+m2+'</a>';});};return hash(at(this.linkifyTextLinks(tweet_text)));},arrayChunk:function(startArr,chunkSize){chunkSize=parseInt(chunkSize,10);chunkSize=isNaN(chunkSize)||!chunkSize?1:chunkSize;var base=[];var startArr_len=startArr.length;for(var i=0;i<startArr_len;i+=chunkSize){base.push(startArr.slice(i,i+chunkSize));}
return base;},ucwords:function(str){str=str||'';return str.toLowerCase().replace(/\w+/g,function(s){return s.charAt(0).toUpperCase()+s.substr(1);});}};huff.unit('tmp/twitter_util',function(ready){ready(TwitterUtil);});
huff.unit('tmp/aol_search',function(ready){(function($){ready(window.AOLSearch={changeTab:function(el,type){if(type=='news'){$('#aol-web-search').hide();$('#aol-news-search').show();if(HPConfig.page_type=="frontpage"){$('.aol-tabs > li > a').removeClass('vertical_color');$(el).addClass('vertical_color');}else{$('.aol-tabs > li > a').removeClass('active');$(el).addClass('active');}}else if(type=='web'){$('#aol-news-search').hide();$('#aol-web-search').show();if(HPConfig.page_type=="frontpage"){$('.aol-tabs > li > a').removeClass('vertical_color');$(el).addClass('vertical_color');}else{$('.aol-tabs > li > a').removeClass('active');$(el).addClass('active');}}},focusInput:function(el){if(el.value=='Search News and Topics'||el.value=='Search the Web'||el.value=='*Please add search phrase'||el.value=='Search the Huffington Post'||el.value=='Search AOL Healthy Living'){$('#'+el.id).attr('value','').removeClass('red').removeClass('color_a1a1a1').addClass('color_111111');}},blurInput:function(el){if(el.value==''){if(el.id[0]=='w'){$('#'+el.id).attr('value','Search the Web').removeClass('red').addClass('color_a1a1a1');}else if(HPConfig.current_vertical_name=='healthy-living'){$('#'+el.id).attr('value','Search AOL Healthy Living').removeClass('red').addClass('color_a1a1a1');}else if(el.id[0]=='h'){$('#'+el.id).attr('value','Search the Huffington Post').removeClass('red').addClass('color_a1a1a1');}else{$('#'+el.id).attr('value','Search News and Topics').removeClass('red').addClass('color_a1a1a1');}}},submitForm:function(id,_form){if($(id).attr('value')==''||$(id).attr('value')=='Search News and Topics'||$(id).attr('value')=='Search the Web'||$(id).attr('value')=='Search the Huffington Post'||$(id).attr('value')=='Search AOL Healthy Living'||$(id).attr('value')=='*Please add search phrase'){$(id).attr('value','*Please add search phrase').removeClass('color_a1a1a1').addClass('red');return false;}else{_form.submit();}}});})(jQuery);});
var ElectionWidgets={per_page:1,pages:4,cur_page:1,showed_pages:[],goState:function(el){var count=el.options.length;for(var i=0;i<count;i++)
{if(el.options[i].selected){var url='http://www.pollster.com/polls/'+el.options[i].value.toLowerCase();window.location.href=url;break;}}},changeTab:function(active_tab_id,active_container_id,tabs,tabs_content)
{if(typeof active_tab_id=='undefined'||typeof active_container_id=='undefined'||typeof tabs=='undefined'||typeof tabs_content=='undefined')
return false;var tabs=tabs.childNodes;for(var i=0;i<tabs.length;i++)
{if(tabs[i].nodeType==1)
{if(tabs[i].id==active_tab_id)
{Dom.removeClass(active_tab_id,'election-nonactive-tab');Dom.addClass(active_tab_id,'election-active-tab');}
else
{Dom.removeClass(tabs[i].id,'election-active-tab');Dom.addClass(tabs[i].id,'election-nonactive-tab');}}}
var tabs_container=tabs_content.childNodes;for(i=0;i<tabs_container.length;i++)
{if(tabs_container[i].nodeType==1)
{if(tabs_container[i].id==active_container_id)
{Dom.setStyle(active_container_id,'display','block');}
else
{Dom.setStyle(tabs_container[i].id,'display','none');}}}}};huff.unit('tmp/election_widgets',function(ready){ready(ElectionWidgets)});
function getSlide(switching,element){if(element=='INPUT'||element=='TEXTAREA'){return false;}
if(HPConfig.slideshow_type=='pollajax'){switch(switching){case"prev":window["oSlideshowPollAjax_"+HPConfig.slideshow_id].prev();break;case"next":window["oSlideshowPollAjax_"+HPConfig.slideshow_id].next();break;}
return false;}
else if(HPConfig.slideshow_type=='fullscreen'){switch(switching){case"prev":if(!window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].openSlideShow();return false;}
window["FullScreen_"+HPConfig.slideshow_id].prevPhoto();break;case"next":if(!window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].openSlideShow();return false;}
window["FullScreen_"+HPConfig.slideshow_id].nextPhoto();break;case"esc":if(window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].closeSlideShow();return;}
break;case"fullscreen":if(!window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].openSlideShow();return;}
break;case"up":E.removeListener(window,"mousemove");HPUtil.show('fs_page_layout_'+HPConfig.slideshow_id);break;case"down":E.on(window,'mousemove',window["FullScreen_"+HPConfig.slideshow_id].showPageLayout,null,window["FullScreen_"+HPConfig.slideshow_id]);HPUtil.hide('fs_page_layout_'+HPConfig.slideshow_id);break;}
return false;}else if(HPConfig.slideshow_type=='adbigshot'){switch(switching){case"prev":if(!window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].showBigShot();return false;}
window["BigShot_"+HPConfig.slideshow_id].prevPhoto();break;case"next":if(!window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].showBigShot();return false;}
window["BigShot_"+HPConfig.slideshow_id].nextPhoto();break;case"esc":if(window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].closeSlideShow();return;}
break;case"fullscreen":if(!window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].openSlideShow();return;}
break;}
return false;}};var HPHotKeys={init:function(){var klLeft=new YAHOO.util.KeyListener(document,{ctrl:false,keys:37},function(event,element){getSlide('prev',(element[1].srcElement||element[1].target).nodeName);});var klRight=new YAHOO.util.KeyListener(document,{ctrl:false,keys:39},function(event,element){getSlide('next',(element[1].srcElement||element[1].target).nodeName);});klLeft.enable();klRight.enable();if(HPConfig.slideshow_type=='fullscreen'){var klESC=new YAHOO.util.KeyListener(document,{ctrl:false,keys:27},function(event,element){getSlide('esc',(element[1].srcElement||element[1].target).nodeName);});var klUp=new YAHOO.util.KeyListener(document,{ctrl:false,keys:38},function(event,element){getSlide('up',(element[1].srcElement||element[1].target).nodeName);});var klDown=new YAHOO.util.KeyListener(document,{ctrl:false,keys:40},function(event,element){getSlide('down',(element[1].srcElement||element[1].target).nodeName);});klESC.enable();klUp.enable();klDown.enable();if(!HPBrowser.isIEOld())
{var klFullScreen=new YAHOO.util.KeyListener(document,{ctrl:false,keys:70},function(event,element){getSlide('fullscreen',(element[1].srcElement||element[1].target).nodeName);});klFullScreen.enable();}}}};huff.unit('tmp/hot_keys',function(ready){ready(HPHotKeys)});
var Modal={};Modal.hideMaskCustom=new Array();Modal.showMaskCustom=new Array();Modal.ShowCommonHpLightbox=function(data)
{//@todo show loading lightbox
E.onAvailable('hp_vertical_common_lightbox',function(data)
{data=data.data||{};if(data.title)
{Dom.getElementsByClassName('hp_common_message','div','hp_vertical_common_lightbox')[0].getElementsByTagName('span')[0].innerHTML=data.title;}
if(data.vertical)
{Dom.getElementsByClassName('close_modal','a','hp_vertical_common_lightbox')[0].getElementsByTagName('img')[0].src='/images/modal/close-'+data.vertical+'.gif';Dom.addClass(Dom.getElementsByClassName('modal_inner','div','hp_vertical_common_lightbox')[0],data.vertical+'_modal_inner');}
Modal.id='hp_vertical_common_lightbox';Modal.setPosition();Modal.showMask(Modal.id);},{data:data},true,true);}
Modal.SetWideFormat=function()
{jQuery('.modal_inner').first().addClass('wide_popup');}
Modal.SetHtml=function(html,callback)
{E.onAvailable('hp_vertical_common_lightbox',function(data)
{var content_containers=Dom.getElementsByClassName('content','div',Modal.id);if(content_containers.length)
{content_containers[0].innerHTML='<div id="sf_ad_block_'+Modal.id+'" class="ad_block ad_wide_top floatright"></div>'+data.html;if(typeof(callback)=='function')
{callback(content_containers[0]);}}
else
{HPError.e('There\'s no container with class content');}},{html:html},true,true);}
Modal.buildMask=function()
{if(!this.mask){this.mask=document.createElement("DIV");this.mask.id="wrapper_mask";this.mask.className="mask";this.mask.style.zIndex="887";this.mask.innerHTML="&nbsp;";var firstChild=document.body.firstChild;if(firstChild){document.body.insertBefore(this.mask,document.body.firstChild);}else{document.body.appendChild(this.mask);}}};Modal.hideMask=function(params){params=params||false;var show_qr_ad=false;var show_mask=false;if(params){show_qr_ad=params.show_qr_ad||false;show_mask=params.show_mask||false;}
if(Modal.mask){if(Modal.hideMaskCustom.length)
{for(var i=0;i<Modal.hideMaskCustom.length;i++)
{Modal.hideMaskCustom[i]();}}
this.mask=Modal.mask
var tmp_modal_id='huff_modal';if(typeof(Modal.id)!="undefined")
{tmp_modal_id=Modal.id;delete Modal.id;}
YAHOO.util.Dom.setStyle(tmp_modal_id,'visibility','hidden');if(!show_mask)
{Modal.mask.style.display="none";YAHOO.util.Dom.removeClass(document.body,"masked");}}
jQuery('#qr_ad')&&!show_qr_ad&&jQuery('#qr_ad').html('');jQuery('#snn_qr_ad')&&jQuery('#snn_qr_ad').hide();jQuery('#qr_frame')&&jQuery('#qr_frame').attr('src','');jQuery('#ad_im')&&jQuery('#ad_im').html();jQuery('#ad_email')&&jQuery('#ad_email').html('');jQuery('#ad_300_250_1')&&HuffPoUtil.show('ad_300_250_1');Modal.HideEmbed();!show_mask&&Modal.ShowEmbed('object:not(div.content object), embed:not(div.content embed)');Modal.restoreDefaults();};Modal.setWidth=function(width){var outer=document.getElementById(Modal.id);if(outer){outer.style.width=width+'px';outer.style.marginLeft='-'+(width/2)+'px';}
var inner=document.getElementById('huff_snn_modal_common_inner');if(inner)
{inner.style.width=width+'px';}}
Modal.restoreDefaults=function(width)
{width=width||400;el=document.getElementById('huff_modal_common_inner');if(el){el.innerHTML='<img src="/images/lightbox/loading.gif" class="block margin_auto" width="24" height="24" alt="">';}
Modal.setWidth(width);}
Modal.setMaskListener=function(fn)
{var listener_function=((typeof(fn)=="function")?fn:Modal.hideMask);E.removeListener("wrapper_mask","click");E.addListener("wrapper_mask",'click',listener_function);}
Modal.showMask=function(modal_id){if(!this.mask)
{Modal.buildMask();Modal.movePanel();}
if(this.mask)
{var tmp_modal_id='huff_modal';if(typeof(modal_id)!="undefined")
{Modal.id=modal_id;tmp_modal_id=modal_id;}
if(Modal.showMaskCustom.length)
{for(var i=0;i<Modal.showMaskCustom.length;i++)
{Modal.showMaskCustom[i]();}}
YAHOO.util.Dom.addClass(document.body,"masked");this.sizeMask();Modal.setMaskListener();this.mask.style.display="block";YAHOO.util.Dom.setStyle(this.mask,'opacity','.7');Modal.setPosition();YAHOO.util.Dom.setStyle(tmp_modal_id,'visibility','visible');if(null!==$('ticker_flash'))
{HuffPoUtil.hide('ticker_flash');}
if(null!==$('ew_FlashDiv'))
{HuffPoUtil.hide('ew_FlashDiv');}
if(null!==$('ad_300_250_1'))
{HuffPoUtil.hide('ad_300_250_1');}
Modal.HideEmbed();Modal.ShowIframe();}};Modal.sizeMask=function()
{if(Modal.mask)
{Modal.mask.style.height=YAHOO.util.Dom.getDocumentHeight()+"px";Modal.mask.style.width=YAHOO.util.Dom.getViewportWidth()+"px";}};Modal.extraEmbeds=['curtainunit','ad_leaderboard_top','ad_store_leaderboard_top'];Modal.ShowEmbed=function(selector)
{Modal.ChangeEmbedState('visible',selector);};Modal.HideEmbed=function(selector)
{Modal.ChangeEmbedState('hidden',selector);};Modal.ChangeEmbedState=function(state,selector)
{if(typeof selector=='undefined')
{var objects=document.getElementsByTagName('object');var embeds=document.getElementsByTagName('embed');for(var i=0;i<embeds.length;i++)
{embeds[i].style.visibility=state;if(embeds[i].getAttribute('belongs_modal'))
{embeds[i].style.display='visible'==state?'block':'none';}}}
else
{objects=jQuery(selector);}
jQuery(objects).each(function(){jQuery(this)[jQuery(this).attr('belongs_modal')?'show':'hide']();});for(i=0;i<Modal.extraEmbeds.length;i++)
if(Modal.extraEmbeds[i].length){var domElement=jQuery('#'+Modal.extraEmbeds[i]);domElement.css('visibility',state);if(domElement.attr('belongs_modal')){domElement[state==='visible'?'show':'hide']();}}};Modal.ShowIframe=function()
{var modal_content=$("huff_modal_common");YAHOO.util.Dom.removeClass(modal_content,"hide_iframe");YAHOO.util.Dom.addClass(modal_content,"show_iframe");};Modal.HideIframe=function()
{var modal_content=$("huff_modal_common");YAHOO.util.Dom.removeClass(modal_content,"show_iframe");YAHOO.util.Dom.addClass(modal_content,"hide_iframe");};Modal.applyDefault=function()
{el=getElementById('modal_inner');el.style.width='652px';el.className='';Modal.HideIframe();};Modal.setPosition=function()
{var tmp_modal_id='huff_modal';if(typeof(Modal.id)!="undefined")
{tmp_modal_id=Modal.id;}
currentHeight=(document.body&&document.body.scrollTop)?document.body.scrollTop:document.documentElement.scrollTop;YAHOO.util.Dom.setStyle(tmp_modal_id,'top',(currentHeight+20)+"px");}
Modal.movePanel=function()
{if(!Modal.mask)return;var tmp_modal_id='huff_modal';if(typeof(Modal.id)!="undefined")
{tmp_modal_id=Modal.id;}
if(!Dom.hasClass(document.body,'masked'))
{currentHeight=(document.body&&document.body.scrollTop)?document.body.scrollTop:document.documentElement.scrollTop;YAHOO.util.Dom.setStyle(tmp_modal_id,'top',(currentHeight+20)+"px");}};huff.unit('tmp/modal',function(ready){ready(Modal)});
var UserPoll={};UserPoll.entry_id=false;UserPoll.createPoll=function(){return false;}
huff.unit('tmp/user_poll',function(ready){ready(UserPoll)});
var QuickSNProject={};QuickSNProject.isLoadedDialog=false;QuickSNProject.followingPaging=false;QuickSNProject.userString=false;QuickSNProject.hideMask_cb=new Array();QuickSNProject.hideMask=function(params)
{HuffConnect.hideModal();}
QuickSNProject.returnModalContainer=function(){return"huff_snn_modal_common_inner";};QuickSNProject.modalCache=[];QuickSNProject.showJoinDialog=function()
{if(!this.isLoadedDialog){HuffConnect.showLoader();}else{this.isLoadedDialog=false;}
return false;};QuickSNProject.GetDialogSuccess=function(o)
{HuffConnect.socialModal({inner_html:o.responseText});QuickSNProject.isLoadedDialog=true;};QuickSNProject.GetDialogFail=function(o)
{HPError.e();HuffConnect.hideModal();};huff.unit('tmp/quick_snp',function(ready){ready(QuickSNProject)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var QuickLogin={};QuickLogin.SocialLogout=function(sRedirect){HuffConnect.SocialLogout(sRedirect);return;};QuickLogin.FacebookLogout=function(sRedirect){HuffConnect.FacebookLogout(sRedirect);return;};QuickLogin.pop=function(){HPConnect.Login();return;};QuickLogin.onLoginSuccess=function(){HuffConnect.Login.onLoginSuccess();return;};QuickLogin.googleAdsExec=function(_gfcHint){_google_vertical_name=(typeof _google_vertical_name!='undefined')?_google_vertical_name:'';_google_hints=(typeof _google_hints!='undefined')?_google_hints:'';_google_test_channel=(typeof _google_test_channel!='undefined')?_google_test_channel:'';if(document.getElementById('contextual_ad_unit_1'))
{HuffPoUtil.WEDGJE.google_ads.init({'ad_channel':'8073093451,'+_google_vertical_name+',9299244974,'+_google_test_channel,'hints':_google_hints+' '+_gfcHint,'hp_dest_id':'contextual_ad_unit_1'});}
if(document.getElementById('contextual_ad_unit_2'))
{HuffPoUtil.WEDGJE.google_ads.init({'ad_channel':'8073093451,'+_google_vertical_name+',4661083346,'+_google_test_channel,'hints':_google_hints+' '+_gfcHint,'max_num_ads':'1','hp_dest_id':'contextual_ad_unit_2'});}
HuffPoUtil.WEDGJE.google_ads.exec();};huff.unit('tmp/quick_login',function(ready){ready(QuickLogin)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var QuickFacebookInvite={invitationContentConfirmLink:_("http://www.huffingtonpost.com/"),lock:false,init:function(invitationConfirmLink){QuickFacebookInvite.invitationContent=sprintf(_("Please join me at %sHuffington Post%s"),"&lt;a href=&quot;"+_("http://www.huffingtonpost.com/")+"&quot;&gt;","&lt;/a&gt;!&lt;fb:req-choice url=&quot;");if(invitationConfirmLink){QuickFacebookInvite.invitationContent+=invitationConfirmLink;}
else{QuickFacebookInvite.invitationContent+=QuickFacebookInvite.invitationContentConfirmLink;}
QuickFacebookInvite.invitationContent+="&quot; label=&quot;"+_("Confirm")+"&quot;/&gt;";},pop:function(callbackChain)
{if(!HPFB.authResponse)
return false;jQuery.ajax({url:'/include/facebook.php',type:'POST',data:'app_friends='+HPFB.authResponse.userID+'&'+HPFB.getSessionForServer(),success:function(data,func,req){if(req.status!=200)return;if(data=='all'){if(typeof(callbackChain)=="function"){callbackChain();}else{HuffConnect.hideModal();HuffConnect.Login.onLoginSuccess();}}
else
{HuffConnect.hideModal();if("function"==typeof ConnectOverview.onSuccess)
{setTimeout(function(){ConnectOverview.onSuccess();ConnectOverview.onSuccess=false;},100);return;}
else
{QuickFacebookInvite.showInviteForm(data);}}},error:function()
{HPError.e();return;},timeout:7000});},showInviteForm:function(appUsers){var dialogHeight=575+((appUsers!='')?(appUsers.split(',').length/4*20):0);var fbml="<fb:request-form style=\"width:575px; height:580px;\" action=\"";fbml+=window.location.href+"\" method=\"POST\" type=\"HuffingtonPost\" invite=\"true\" ";fbml+="content=\""+QuickFacebookInvite.invitationContent+"\">";if(appUsers!=''){uids=appUsers.split(',');fbml+="<div style=\"padding:20px\"><h2>"+sprintf(_("%s of your friends are already here!"),uids.length)+"</h2>";j=0;for(i in uids){if(uids[i]==parseInt(uids[i])){fbml+="<div style=\"float:left;width:150px;padding-top:4px\"><fb:name linked=\"false\" uid=\""+uids[i]+"\"></fb:name></div>";j++;if(j==4){j=0;fbml+="<div style=\"clear:both\"></div>";}}}
fbml+="</div>";}
fbml+="<div style=\"margin: 0 auto; width: 466px;\"><fb:multi-friend-selector showborder=\"false\" exclude_ids=\""+appUsers+"\" ";fbml+="actiontext=\""+_("Invite your friends to HuffPost")+"\" rows=\"3\" cols=\"3\" bypass=\"cancel\" showborder=\"false\">";fbml+="</fb:multi-friend-selector></div>";fbml+="</fb:request-form>";FB.ui({'method':'fbml.dialog','fbml':fbml,'display':'iframe',width:1,height:1});return;}};huff.unit('tmp/quick_facebook_invite',function(ready){ready(QuickFacebookInvite)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var FanAction={send_action:function(fan,action)
{YAHOO.util.Connect.asyncRequest('POST','/users/favorite-bloggers/fan_action.php',this,'fan='+fan+'&action='+action);},success:function(o)
{resp=o.responseText;action=resp.substring(0,3);var resparr=resp.split('::');if(action=='add')
{var userid=resparr[2];SNProject.track(userid,'user_follow');}
fan=resparr[1];var fanDivs=document.getElementsByName(""+fan+"");if(action=='add')
{for(i=0;i<fanDivs.length;i++)
{fanDivs[i].innerHTML='<B>'+_("added")+'</B>';}}
else if(action=='mov')
{for(i=0;i<fanDivs.length;i++)
{fanDivs[i].innerHTML='<B>'+_("removed")+'</B>';}}
else
{HPError.e();}},failure:function(o)
{HPError.e();}
};huff.unit('tmp/fan_action',function(ready){ready(FanAction)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var QuickSubscribeUser={user_connected:false,pop:function(vertical,category,hideIframe,el_id)
{var tmp=vertical.split('_');vertical=tmp[0];hideIframe=hideIframe||1;if(!el_id)
{el_id="subscribe_user_email";}
if(jQuery("#"+el_id).val()=="")
{alert(_("Please enter your email address."));$(el_id).focus();return false;}
if(!HPUtil.checkEmail(jQuery("#"+el_id).val()))
{alert(_("Please specify a valid e-mail."));$(el_id).focus();return false;}
HuffConnect.showLoader();var sEmail=jQuery("#"+el_id).val();var url='/users/favorite-bloggers/get_subscribe_user.php';var post_data=category+"=1"+"&"+"daily=1&fid="+category+"&vertical="+vertical+"&ajax=1&update=1&mode=add";if(hideIframe)
{var pass_params={post_data:post_data+"&third_party_user=1",url:url};post_data+="&email="+encodeURIComponent(sEmail);jQuery.ajax({url:url,type:'POST',data:post_data,success:function(data,func,req)
{QuickSubscribeUser.Success(data,func,req,pass_params);return;},error:QuickSubscribeUser.Fail});}
else
{jQuery("#huff_modal_common_inner").html("<iframe id='alert_email_iframe' frameborder=no src='http:\/\/www.huffingtonpost.com\/users\/favorite-bloggers\/get_subscribe_user.php?email="+encodeURIComponent(sEmail)+"&iframe=1&fid="+category+"' style='width:544px; height:110px; visibility:hidden; overflow:hidden;' onload='QuickSubscribeUser.setIframeSize()'><\/iframe>");}
return false;},checkAll:function()
{var check_value=false;if($('check_all').checked==true)
check_value=true;var forma=$('unsub_form');for(var i=0;i<forma.length;i++)
{if(forma.elements[i].type=="checkbox")
{forma.elements[i].checked=check_value;}}},checkInput:function(el){if(el.value==_('Enter email address')){el.value='';jQuery(el).removeClass('color_ACACAC');}},Success:function(data,func,req,param)
{var HCL=HuffConnect.Login;if(req.status!=200)
{if(QuickSubscribeUser.user_connected)
HCL.onLoginSuccess();return;}
var onclose=function(){};if(QuickSubscribeUser.user_connected)
onclose=function(){HCL.onLoginSuccess();};HuffConnect.socialModal({inner_html:data,onclose:onclose});return;},Fail:function()
{HuffConnect.hideModal();var HCL=HuffConnect.Login;if(QuickSubscribeUser.user_connected)HCL.onLoginSuccess();return;},Subscribe:function(email)
{jQuery('#subscribe_loader').css("display","block");var forma=jQuery('#unsub_form').get(0);var form_fields=new Array();var j=0;for(var i=0;i<forma.length;i++){if(forma.elements[i].type=='checkbox'){form_fields[j]=forma.elements[i].name;j+=1;if(forma.elements[i].checked==true){forma.elements[i].value=1;}else{forma.elements[i].value=0;}}}
var post_data="update=1&email="+encodeURIComponent(email);for(i=0;i<form_fields.length;i++){var field=$(form_fields[i]+'');if(field!=null)
{post_data+='&'+escape(field.name)+"="+escape(field.value);}}
jQuery.ajax({url:'/subscription/get_email_alerts.php',type:"POST",data:post_data,success:QuickSubscribeUser.SubscribeSuccessEmail,error:QuickSubscribeUser.SubscribeFailEmail});return false;},SubscribeSuccessEmail:function(data,func,req)
{if(req.status!=200)return;var el=jQuery("#subscribe_alerts_div");var html="<div class='center'><h3>"+_("Thank You")+"</h3><p class='note padding_5'>"+_("Your subscription settings have been updated")+"</p></div>";if(el.length){el.html(html);}else{if(QuickSubscribeUser.user_connected)HCL.onLoginSuccess();HuffConnect.hideModal();}
return;},SubscribeFailEmail:function()
{if(QuickSubscribeUser.user_connected)HCL.onLoginSuccess();HPError.e();},setIframeSize:function()
{h=document.getElementById("alert_email_iframe").myheight||770;try
{document.getElementById("alert_email_iframe").style.height=document.getElementById("alert_email_iframe").contentDocument.body.clientHeight+"px";}
catch(e)
{document.getElementById("alert_email_iframe").style.height=h+"px";}
document.getElementById('alert_email_iframe').style.visibility='visible';},pop2:function(vertical,internal_id)
{internal_id=internal_id||'';var sEmail="";var post_data="f32"+"=1"+"&"+internal_id+"=1";var uri='/users/alerts/signup.php?'+post_data;HuffConnect.socialModal({url:uri,modal_head_image:"",modal_subhead_image:"",width:595});},getAlerts:function(form,hide_close_button,daily_brief,show_modal)
{show_modal=show_modal||false;if(form.email.value=="")
{alert(_("Please enter your email address."));form.email.focus();return false;}
if(!(form.email&&HPUtil.checkEmail(form.email.value)))
{alert(_("Please specify a valid e-mail."))
form.email.focus();return false;}
if(show_modal)
HuffConnect.showLoader();post_data="email="+encodeURIComponent(form.email.value);if(hide_close_button)
post_data+="&hide_close_button=1";if(daily_brief)
post_data+="&daily_brief=1";YAHOO.util.Connect.asyncRequest('POST','/subscription/get_email_alerts.php',{success:QuickSubscribeUser.SubscribeSuccess,failure:QuickSubscribeUser.SubscribeFail},post_data);},SubscribeSuccess:function(o){HuffConnect.socialModal({inner_html:o.responseText});},SubscribeFail:function(o){HuffConnect.hideModal();HPError.e();}};huff.unit('tmp/quick_subscribe_user',function(ready){ready(QuickSubscribeUser)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var QuickSignup={checkSingupForm:function(email)
{if(undefined===email)
{email='';}
var error={F_USERNAME:_('User Name'),F_ZIPCODE:_('Zip code'),F_EMAIL:_('Email'),F_OPTIN:_('Check Box'),F_PASSWORD:_('Password'),F_PASSWORDAGAIN:_('Confirm Password')};var forma=$('signup_subscribe_form');var post_data='';$("form_signup_result").innerHTML='';for(var i=0;i<forma.length;i++)
{if(forma.elements[i].name=='F_EMAIL'&&forma.elements[i].value!=='')
{if(!HPUtil.checkEmail(forma.elements[i].value))
{alert(_('Please specify a valid e-mail'));forma.elements[i].value='';forma.elements[i].focus();return false;}}
if(forma.elements[i].name=='F_PASSWORDAGAIN'&&forma.elements[i].value!=='')
{if(forma.elements[i].value!==forma.elements[i-1].value)
{alert(_('Please confirm your password'));forma.elements[i].value='';forma.elements[i].focus();return false;}}
if(forma.elements[i].name=='F_OPTIN'&&forma.elements[i].checked==true)
{forma.elements[i].value=1;}
if(forma.elements[i].value=='')
{alert("Fill in the field - "+error[forma.elements[i].name]);forma.elements[i].focus();return false;}
post_data=post_data+(escape(forma.elements[i].name)+"="+encodeURIComponent(forma.elements[i].value)+"&");}
YAHOO.util.Connect.asyncRequest('POST',$('signup_subscribe_form').action,{success:function(o){QuickSignup.FormSuccess(o,email);},failure:QuickSignup.FormFail},post_data);return false;},FormSuccess:function(o,email)
{if(o.responseText=='ok')
{if($("creating_user")){$("creating_user").innerHTML='';$("creating_user").style.display="none";}
if($("user_created")){$("user_created").style.display="block";}
post_data="email="+encodeURIComponent(email);YAHOO.util.Connect.asyncRequest('POST','/subscription/get_email_alerts.php',{success:QuickSignup.SubscribeSuccess,failure:QuickSignup.SubscribeFail},post_data);}
else
{$("form_signup_result").innerHTML=o.responseText;}},FormFail:function(o)
{alert(o.responseText);},SubscribeSuccess:function(o)
{if($("creating_user"))$("creating_user").style.display="block";if($("user_created"))$("user_created").style.display="none";if($("creating_user")){$("creating_user").innerHTML=o.responseText;}else{HuffConnect.socialModal({inner_html:o.responseText});}},SubscribeFail:function(o)
{HuffConnect.hideModal();HPError.e();},Subscribe:function(email)
{jQuery('#subscribe_loader').css("display","block");var forma=jQuery('#unsub_form').get(0);var form_fields=new Array();var j=0;for(var i=0;i<forma.length;i++)
{if(forma.elements[i].type=='checkbox')
{form_fields[j]=forma.elements[i].name;j+=1;if(forma.elements[i].checked==true)
{forma.elements[i].value=1;}
else
{forma.elements[i].value=0;}}}
var post_data="update=1&email="+encodeURIComponent(email);for(i=0;i<form_fields.length;i++)
{var field=$(form_fields[i]+'');if(field!=null)
{post_data+='&'+escape(field.name)+"="+escape(field.value);}}
jQuery.ajax({url:'/subscription/get_email_alerts.php',type:"POST",data:post_data,success:QuickSignup.SubscribeSuccessEmail,error:QuickSignup.SubscribeFailEmail});return false;},SubscribeSuccessEmail:function(data,func,req)
{if(req.status!=200)return;var el=jQuery("#subscribe_alerts_div");var html="<div class='center'><h3>"+_("Thank You")+"</h3><p class='note padding_5'>"+_("Your subscription settings have been updated")+"</p></div>";if(el.length)
{el.html(html);}
else
{if(QuickSubscribeUser.user_connected)HCL.onLoginSuccess();HuffConnect.hideModal();}
return;},SubscribeFailEmail:function()
{if(QuickSubscribeUser.user_connected)HCL.onLoginSuccess();HPError.e();},CheckUsername:function(uname){if(uname!="")
{$('ajax_uname').innerHTML='<img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" />';var post_data='uname='+uname+'&verify=username';YAHOO.util.Connect.asyncRequest('POST','/users/signup/inline_verify.php',{success:QuickSignup.UsernameVerifyResponse,failure:QuickSignup.UsernameVerifyFailed},post_data);return false;}
else
return false;},UsernameVerifyResponse:function(o){$('ajax_uname').innerHTML=o.responseText;},UsernameVerifyFailed:function()
{HPError.e();},CheckEmail:function(email){if(email!="")
{$('ajax_email').innerHTML='<img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" />';var post_data='email='+email+'&verify=email';YAHOO.util.Connect.asyncRequest('POST','/users/signup/inline_verify.php',{success:QuickSignup.EmailVerifyResponse,failure:QuickSignup.EmailVerifyFailed},post_data);}
else
return false},EmailVerifyResponse:function(o){$('ajax_email').innerHTML=o.responseText;},EmailVerifyFailed:function()
{HPError.e();},TwitterOauth:function(params)
{Provider.SignUp(params);return;},TwitterUnconnect:function()
{var QS=QuickSignup;QS.connected[QS.selectedService]=false;QS.toggleOverlays('twitter');QS.fadeForm(true);}};huff.unit('tmp/quick_signup',function(ready){ready(QuickSignup)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var QuickFan={fan_timeout:null,pop_similar:function(blogger)
{HPTrack.trackPageview('/t/a/similar_bloggers');YAHOO.util.Connect.asyncRequest('GET','/users/favorite-bloggers/get_similar_bloggers.php?author='+blogger,{success:QuickFan.GetSimilarSuccess,failure:QuickFan.GetSimilarFail},{});return false;},GetSimilarSuccess:function(o)
{HuffConnect.socialModal({inner_html:o.responseText,modal_subhead_image:'',modal_head_image:'',width:600});},GetSimilarFail:function(o)
{HPError.e();HuffConnect.hideModal();},pop:function(blogger)
{if(HuffCookies.getUserName())
{QuickFan.becomeFan(blogger);}
else
{HPConnect.Login();}},become_fan_mouseover:function()
{if(QuickFan.fan_timeout)
clearTimeout(QuickFan.fan_timeout);},become_fan_hovercard:function(evt,blogger,nickname,add_xy,y_offset)
{y_offset=y_offset||27;add_xy=add_xy||[0,0];var evt=evt||window.event;var target=evt.target||evt.srcElement;var event_type=evt.type.toLowerCase();if(target.getAttribute('floating_id'))
return false;QuickFan.fan_timeout=setTimeout(function()
{target.setAttribute('on_hover','yes');var html='';if(!HuffCookies.getUserName())
html='<div class="become_fan_tooltip">'+
'<div class="float_left bold"><img src="/contributors/'+nickname+'/headshot.jpg" class="float_left margin_right_5" /><div class="float_left become_fan_text">'+
blogger.charAt(0).toUpperCase()+blogger.substr(1,blogger.length-1)+
'<div class="margin_top_5"><img onclick="return QuickFan.hovercard_handle(this, \'hp_blogger_'+blogger.replace(/'/g,"\\'")+'\');" class="cursor_pointer social fan-bloger" src="/images/blank.gif"></div>'+
'</div></div><div class="clear_first"></div>'+
'<div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>';else
html='<div class="become_fan_tooltip"><div class="fp_loader">'+_('Loading...')+'</div><div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>';FloatingPrompt.embed(target,html,undefined,'top',{ignore_arrow:true,width:180,add_xy:[-72+add_xy[0],add_xy[1]+(HuffCookies.getUserName()?-50:-72)],class_name:'clear-overlay',fp_intersects:1});if(HuffCookies.getUserName())
{var post_string='author_name=hp_blogger_'+encodeURIComponent(blogger);C.asyncRequest('POST','/web-services/author/friendship.php',{success:function(o)
{var result=JSON.parse(o.responseText);var img_class=result.friendship?'unfan-bloger':'fan-bloger';var html='<div class="become_fan_tooltip">'+
'<div class="float_left bold"><img src="/contributors/'+nickname+'/headshot.jpg" class="float_left margin_right_5" /><div class="float_left become_fan_text">'+
blogger.charAt(0).toUpperCase()+blogger.substr(1,blogger.length-1)+
'<div class="margin_top_5"><img onclick="return QuickFan.hovercard_handle(this, \'hp_blogger_'+blogger.replace(/'/g,"\\'")+'\');" class="cursor_pointer social '+img_class+'" src="/images/blank.gif"></div>'+
'</div></div><div class="clear_first"></div>'+
'<div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>';FloatingPrompt.container.style.top=(parseInt(FloatingPrompt.container.style.top)-y_offset).toString()+'px';FloatingPrompt.container.innerHTML=html;},failure:function(){HPError.e();},timeout:10000},post_string);}},1000);return false;},hovercard_handle:function(obj,username)
{if(!HuffCookies.getUserName())
{ConnectOverview.showBenefits({provider:'signup'});return false;}
var friendship=!jQuery(obj).hasClass('fan-bloger');jQuery.ajax({url:'/users/favorite-bloggers/fan_action.php',data:'fan='+username+'&action='+(friendship?'delete':'add'),type:'POST',success:function(res)
{if(-1!==res.indexOf('::'))
{if(!friendship)
{jQuery(obj).removeClass('fan-bloger').addClass('unfan-bloger');}
else
{jQuery(obj).removeClass('unfan-bloger').addClass('fan-bloger');}}},error:function()
{HPError.e();}});return false;},becomeFan:function(blogger)
{jQuery.ajax({url:'/users/favorite-bloggers/fan_action.php',data:'fan='+blogger+'&action=add',type:'POST',success:QuickFan.Success,error:QuickFan.Fail});return;},Success:function(data,func,req)
{if(req.status!=200){HuffConnect.hideModal();return;}
resp=data;action=resp.substring(0,3);if(action=='add')
{var resparr=resp.split('::');SNProject.track(resparr[2],'user_follow');var fan_success=resparr[3];var fan_reason=resparr[4];QuickFan.pop_email_alerts(resparr[1],fan_success,fan_reason);}
else if(resp=='notificationsaved')
{jQuery("#quick_alert_div").html("<div style='margin:30px 0;' class='arial_16 bold center color_444444'>"+_("Social preferences successfully saved")+"</div>")
setTimeout(function(){HuffConnect.hideModal();},4000);}
else if(action!='mov')
{return QuickFan.Fail();}
return false;},Fail:function()
{HPError.e();HuffConnect.hideModal();return;},pop_email_alerts:function(blogger,fan_success,fan_reason)
{if(HuffCookies.getUserName())
{HuffConnect.showLoader();jQuery.ajax({type:'GET',url:'/users/favorite-bloggers/qet_email_alerts.php?blogger='+blogger+'&fan_success='+fan_success+'&fan_reason='+fan_reason,success:QuickFan.GetEmailAlertsSuccess,error:QuickFan.GetEmailAlertsFail});}
else
{ConnectOverview.showBenefits({provider:'signup',message:_("You must be logged in to subscribe."),onSuccess:function()
{QuickFan.user_connected=true;QuickFan.pop_email_alerts(blogger,fan_success,fan_reason);}});}},GetEmailAlertsSuccess:function(data,func,req)
{if(req.status!=200){HuffConnect.hideModal();return;}
var social_modal_params={inner_html:data,width:670,modal_head_image:"",modal_subhead_image:""};if(QuickFan.user_connected)
{social_modal_params.onclose=function(){HuffConnect.Login.onLoginSuccess();};}
HuffConnect.socialModal(social_modal_params);if(HPConfig.current_vertical_name&&!(/homepage/.test(HPConfig.current_vertical_name)))
{var vertical_name=HuffPoUtil.trim(HPConfig.current_vertical_name);vertical_name=vertical_name.replace("-"," ");vertical_name=vertical_name.toLowerCase().replace(/\w+/g,function(s){return s.charAt(0).toUpperCase()+s.substr(1);});jQuery("#quick_vertical_alert").html('<input type="checkbox" name="'+vertical_name+' Brief" value="1" checked /><span class="">&nbsp;'+sprintf(_('Sign me up for the HuffPost %s Newsletter'),vertical_name)+'</span>').removeClass("hidden");}
return;if(typeof(QuickFan._HeaderText)!="undefined")
{$('header_id').innerHTML=QuickFan._HeaderText;delete QuickFan._HeaderText;}},GetEmailAlertsFail:function()
{HPError.e();HuffConnect.hideModal();return;},sendForm:function(dont_check_email)
{var forma=jQuery('#quick_email_alerts_form').get(0);var dont_check_email=dont_check_email||false;if(!dont_check_email)
{if(!HPUtil.checkEmail(forma['blogger_alert_email'].value)){jQuery("#qa_error_notify").html(_("Please submit a valid email address"));jQuery("#qa_error_notify").removeClass("hidden");forma['blogger_alert_email'].value="";forma['blogger_alert_email'].focus();return false;}}
var post_data="";post_data+=jQuery("#save").attr("name")+"="+jQuery("#save").val()+"&";post_data+=forma['blogger_alert_email'].name+"="+forma['blogger_alert_email'].value+"&";post_data+=document.getElementById("notify[blogger]").name+"="+document.getElementById("notify[blogger]").value+"&";post_data+=document.getElementById("blogger_name").name+"="+document.getElementById("blogger_name").value+"&";for(var i=0;i<forma.length;i++)
{if(forma[i].type=="checkbox")
{var value=(forma[i].checked)?1:0;post_data+="&"+forma[i].name+"="+value;}}
jQuery("#quick_alert_button").addClass("hidden");jQuery("#quick_alert_loader").removeClass("hidden");jQuery.ajax({url:forma.action,type:"POST",data:post_data,success:QuickFan.Success,error:QuickFan.Fail});return false;},focusOnBox:function(el)
{if(jQuery(el).val()==_("Type your email address here..."))
jQuery(el).val("");return;},blurOnBox:function(el)
{if(jQuery(el).val()=="")
jQuery(el).val(_("Type your email address here..."));return;}};huff.unit('tmp/quick_fan',function(ready){ready(QuickFan)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var SayIt={pop_email_form:function()
{YAHOO.util.Connect.asyncRequest('POST','/users/get_say_it_form.php',{success:SayIt.Success,failure:SayIt.Fail});},Success:function(o)
{var modal_params={inner_html:o.responseText,width:595};HuffConnect.socialModal(modal_params);if(typeof(SayIt._HeaderText)!="undefined")
{$('header_id').innerHTML=SayIt._HeaderText;delete SayIt._HeaderText;}},Fail:function(o)
{HPError.e();HuffConnect.hideModal();},validateForm:function()
{var name=$('name').value;var short_bio=$('short_bio').value;var email=$('email').value;var blog_pitch=$('blog_pitch').value;var emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;var validEmail=emailPattern.test(email);var maxlength=4000;var err;if(name==''&&short_bio==''&&email==''&&blog_pitch==''){alertText=_('All fields are required.');err=true;}
else if(name==''){alertText=_('Please enter your name.');err=true;}
else if(short_bio==''){alertText=_('Please enter your short bio.');err=true;}
else if(email==''){alertText=_('Please enter your email.');err=true;}
else if(!validEmail){alertText=_('Please enter a valid email.');err=true;}
else if(blog_pitch==''){alertText=_('Please enter your blog pitch.');err=true;}
else if(blog_pitch.length>maxlength){alertText=_('You have exceeded the maximum blog pitch characters.');err=true;}
if(err){$('say_error_message').style.display='block';$('say_error_message').innerHTML=alertText;}
else{$('say_error_message').innerHTML='';$('say_error_message').style.display='none';SayIt.sendForm();}},sendForm:function()
{post_body='';post_body=escape($('save').name)+"="+escape($('save').value)+"&"+
escape($('name').name)+"="+encodeURIComponent($('name').value)+"&"+
escape($('short_bio').name)+"="+escape($('short_bio').value)+"&"+
escape($('email').name)+"="+escape($('email').value)+"&"+
escape($('blog_pitch').name)+"="+escape($('blog_pitch').value)+"&";YAHOO.util.Connect.asyncRequest('POST','/users/notifications/say_it_notification.php',{success:SayIt.Success,failure:SayIt.Fail},post_body);}};huff.unit('tmp/say_it',function(ready){ready(SayIt)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});QuickHuffListContribute={};QuickHuffListContribute=function(){this.init.apply(this,arguments);};QuickHuffListContribute.prototype={listId:0,isFormLoaded:false,currentMap:null,currentMarker:null,authStatus:null,init:function(listId,auth_status){HuffConnect.hideModal();this.listId=listId;this.authStatus=auth_status||null;},show:function(){if(!this.isFormLoaded){var me=this;YAHOO.util.Connect.asyncRequest('POST','/hufflists/webservice.php?action=get_contribute_form_html'+'&'+Math.random(),{success:function(o){me.onFormLoadSuccess(o);},failure:function(o){me.onFormLoadFail(o);}},'list_id='+me.listId);}},close:function(){HuffConnect.hideModal();},onFormLoadSuccess:function(o){var me=this;var onshow=function(){me.isFormLoaded=true;me.show();me.loadMap();Y.util.Event.addListener('hufflist_contribute_close','click',function(event){Y.util.Event.preventDefault(event);me.close();});Y.util.Event.addListener('hufflist_contribute_form','submit',function(event){this.action+='&'+Math.random();me.onFormSubmit(event);});Y.util.Event.addListener('hufflist_contribute_map_search','keypress',function(event){if(event.keyCode==13){Y.util.Event.preventDefault(event);me.onMapSearch(this.value);}});};HuffConnect.socialModal({inner_html:o.responseText,modal_subhead_image:'',modal_head_image:'',width:600,onshow:onshow,onclose:function(){if(me.authStatus=='loggedout'){me.authStatus=null;huff.use('connect/auth',function(ca){ca.Login.updateLoginStatus();});}}});},loadMap:function(){var me=this;Y.util.Event.addListener('body','unload',function(){me.currentMap.dispose();});Y.util.Event.addListener('hufflist_contribute_map_search_button','click',function(){me.onMapSearch($('hufflist_contribute_map_search').value);});this.currentMap=new MQA.TileMap({elt:$("hufflist_contribute_map")});MQA.withModule('largezoom','viewoptions','geocoder',function(){me.currentMap.addControl(new MQA.LargeZoom(),new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT,new MQA.Size(10,10)));me.currentMap.addControl(new MQA.ViewOptions(),new MQA.MapCornerPlacement(MQA.MapCorner.TOP_RIGHT));});MQA.EventManager.addListener(this.currentMap,'click',function(e){me.currentMap.removeAllShapes();me.currentMap.addShape(new MQA.Poi(e.ll));$("hufflist_contribute_lat").value=e.ll.lat;$("hufflist_contribute_lng").value=e.ll.lng;});},onMapSearch:function(address){var me=this;if($('hufflist_contribute_map_search').value==''){alert(_('Please enter some address.'));return;}
this.currentMap.removeAllShapes();this.currentMap.geocodeAndAddLocations(address,function(response){try{if(response.info.statuscode>0){throw'Search error.';}
if(!response.results.length||!response.results[0].locations.length){throw"Sorry, address hasn't been found.";}
if(response.results.length>1||response.results[0].locations.length>1){throw'Too many places have been found.\nPlease enter more precise address.';}
var result=response.results[0].locations[0];if(result.geocodeQuality=='COUNTRY'||result.geocodeQuality=='COUNTY'||result.geocodeQuality=='STATE'){throw'Location based on address you entered is detected as a '+result.geocodeQuality.toLowerCase()+".\nPlease enter more precise address.";}
$("hufflist_contribute_lat").value=result.latLng.lat;$("hufflist_contribute_lng").value=result.latLng.lng;}
catch(msg){$("hufflist_contribute_lat").value='';$("hufflist_contribute_lng").value='';$('hufflist_contribute_map_search').value='';me.currentMap.removeAllShapes();me.currentMap.setZoomLevel(3);alert(msg);return;}});},onFormLoadFail:function(o){HPError.e();this.hideMask();},onFormSubmit:function(event){var me=this,list_id=parseInt($('hufflist_contribute_list_id').value),title=$('hufflist_contribute_title').value,body=$('hufflist_contribute_body').value,image=$('hufflist_contribute_image').value,lat=parseFloat($('hufflist_contribute_lat').value),lng=parseFloat($('hufflist_contribute_lng').value);if(title.length<3){alert(_('Please enter title'));E.preventDefault(event);return false;}
if(body.length<3){alert(_('Please enter body'));E.preventDefault(event);return false;}
if(list_needed_photo&&image==''){alert(_('Please select image'));E.preventDefault(event);return false;}
if(!lat||!lng){alert(_('Please choose location'));E.preventDefault(event);return false;}
this.onFormSubmitStart();return true;},onFormSubmitStart:function(){$('hufflist_contribute_submit_loader').style.display='inline';$('hufflist_contribute_submit').disabled=true;},onFormSubmitEnd:function(o){$('hufflist_contribute_submit_loader').style.display='none';$('hufflist_contribute_submit').disabled=false;try{var response=o;if(response.error!==''){this.onFormSubmitFail(response.error);}else{SNProject.track(parseInt(response.item_id),'hufflist_item_added',parseInt(HPUtil.GetEntryID(location.href)));this.onFormSubmitSuccess(o);}}catch(e){this.onFormSubmitFail(o);}},onFormSubmitSuccess:function(o){alert(_('Thank you for your contribution!'));this.close();if(HPFB.user_just_login)
{location.href=location.href;}},onFormSubmitFail:function(error){HPError.e(error,true);}};huff.unit('tmp/quick_contribute',function(ready){ready(QuickHuffListContribute)});
var LightboxSearch={TabClick:function(tabTag){var tabs=new Array('ap_images','youtube','flickr','google');for(var i=0;i<tabs.length;i++){el_cont=$('modal_'+tabs[i]+'_content');if(el_cont){el_cont.style.display=(tabs[i]==tabTag?'block':'none');HPUtil.show(tabs[i]+'_search');}
else{return false;}
el_link=$('modal_tab_'+tabs[i]+'_link');if(el_link)
{el_cell=el_link.parentNode;if(tabs[i]==tabTag&&!Dom.hasClass(el_cell,'active')){Dom.addClass(el_cell,'active');Dom.replaceClass(el_link,'','active');}
else if(tabs[i]!=tabTag&&Dom.hasClass(el_cell,'active')){Dom.removeClass(el_cell,'active');Dom.replaceClass(el_link,'active','');}}}
return false;}};huff.unit('tmp/lightbox_search',function(ready){ready(LightboxSearch)});
var GetEmailAlerts={array_default:[],u_old:0,Unsubscribe:function()
{var elements=document.getElementById('unsub_form');if(this.u_old==2)
{for(var i=0;i<elements.length;i++)
{if(elements[i].name!="status")
{elements[i].disabled=false;}}}
else if(this.u_old==1)
{for(var i=0;i<elements.length;i++)
{if(this.array_default[i]&&elements[i].name!="status")
{elements[i].checked=true;}
elements[i].disabled=false;}}
this.u_old=document.getElementById('sub_status').selectedIndex;if(this.u_old==2)
{for(var i=0;i<elements.length;i++)
{if(elements[i].name!="status"&&elements[i].name!="sub_button"&&elements[i].type!="hidden"&&elements[i].type!="submit")
{elements[i].disabled=true;}}}
else if(this.u_old==1)
{this.array_default=[];for(var i=0;i<elements.length;i++)
{if(elements[i].name!="status"&&elements[i].name!="sub_button"&&elements[i].type!="hidden"&&elements[i].type!="submit")
{this.array_default[i]=elements[i].checked;elements[i].checked=false;elements[i].disabled=true;}}}}};huff.unit('tmp/email_alerts',function(ready){ready(GetEmailAlerts)});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});HPConfig.current_web_address=HPConfig.current_web_address.replace(/^http:\/\//i,'');HPConfig.current_web_domain=HPConfig.current_web_domain.replace(/^http:\/\//i,'');var Provider={auto_link_email:true,force_login:false,user_provider_info:{'facebook':{},'twitter':{},'yahoo':{},'google':{},'linkedin':{},'aol':{},'winlive':{}},login_config:{'facebook':{},'twitter':{w:800,h:680},'yahoo':{w:500,h:500},'google':{w:850,h:600},'linkedin':{w:600,h:500},'aol':{w:520,h:500},'winlive':{w:500,h:500}},SignUp:function(parameters,provider)
{var get_data='';if("object"==typeof parameters)
{for(var i in parameters)
{get_data='&'+i+'='+parameters[i]+',';}
get_data=get_data.substr(0,get_data.length-1);}
var domain=HPConfig.current_web_address;var getdata="";if(HPConfig.site){domain=HPConfig.huffsite;getdata="&multid="+HPConfig.site;}
var fl="";if(Provider.force_login){fl="&force_login=true";}
var url="http://"+domain+"/users/signup/provider/index.php?type="+provider+get_data+'&'+Math.random()+getdata+fl;PopupManager.open(url,Provider.login_config[provider].w,Provider.login_config[provider].h);PopupManager.onClose=function(){Provider.Connect(provider);};},Connect:function(provider)
{if("undefined"!=typeof(Provider.user_provider_info[provider].id))
{HuffConnect.loadConnectModal({provider:provider});}
return;},QuickLogin:function(provider)
{var SA=linkSocialAccount;if("undefined"==typeof provider){provider='yahoo';}
var domain=HPConfig.current_web_address;var getdata="";if(HPConfig.site){domain=HPConfig.huffsite;getdata="&multid="+HPConfig.site;}
var fl="";if(Provider.force_login){fl="&force_login=true";}
var url="http://"+domain+"/users/login/provider/index.php?type="+provider+'&'+Math.random()+getdata+fl;if(SA.linkOptions.disable_connect)
url+="&disable_connect=1";if("new_user"==Provider.user_provider_info[provider].Status){Provider.LoginConnect(provider);return;}
PopupManager.open(url,Provider.login_config[provider].w,Provider.login_config[provider].h);PopupManager.onClose=function(){Provider.LoginConnect(provider);};},resetProviderStatus:function(provider){Provider.user_provider_info[provider]={};},LoginConnect:function(provider)
{var HL=HuffConnect.Login;var SA=linkSocialAccount;if("undefined"!=typeof(Provider.user_provider_info[provider].Status))
{if(!SA.linkOptions.disable_connect)
{if(Provider.user_provider_info[provider].Status=="existed_user")
{huff.use('connect/auth',function(ConnectAuth){ConnectAuth.Login.loginSuccess();});}
else if(Provider.user_provider_info[provider].Status=="new_user")
{huff.use('connect/provider',function(ConnectProvider){ConnectProvider.loadModal(provider);});}
else if(Provider.user_provider_info[provider].Status=="self_closed_user")
{huff.use('connect/provider',function(ConnectProvider){ConnectProvider.loadModal(provider);});}
else{HPError.e('something went wrong');}}
else
{if(typeof SA.linkOptions.callback=='function')
SA.linkOptions.callback(Provider.user_provider_info[provider].Status);}}
else
HPError.e('something else went wrong');}};var linkSocialAccount={provider:'',facebookInfo:{},gfcInfo:{},onLinkSuccess:false,onLinkFailed:false,linkOptions:{},check_fans:true,checkLoginStatus:function(provider,callbacks,params,facebook_override)
{huff.use('connect/auth','connect/modal','connect/provider');this.linkOptions=params||{};facebook_override=facebook_override||false;if('function'==typeof(facebook_override))
{facebook_override();}
else
{HPFB.force_login=false;HPFB.overridden_permissions=false;HPFB.onAuthenticateRequestSuccess=false;}
var SNP=SNProject;if('undefined'===typeof provider)
return false;if(callbacks&&typeof callbacks.onLinkSuccess=='function')
{this.onLinkSuccess=callbacks.onLinkSuccess;}
this.onLinkFailed=false;if(callbacks&&typeof callbacks.onLinkFailed=='function')
{this.onLinkFailed=callbacks.onLinkFailed;}
if(HuffCookies.getUserName())
{if(HuffPrefs.get(provider+'')&&!this.linkOptions.reauth)
{if(callbacks&&typeof callbacks.linked==='function')
callbacks.linked();return false;}
if('facebook'===provider)
{this.provider='facebook';linkSocialAccount.FacebookPromtLogin();}
else if('undefined'!=typeof Provider.login_config[provider])
{this.provider=provider;linkSocialAccount.PromptLogin();}}
else
{if('facebook'===provider)
{HPFB.login(SNP._tryToJoinUser);}
else if('undefined'!=typeof Provider.login_config[provider])
{Provider.QuickLogin(provider);}}},FacebookPromtLogin:function()
{var HL=HuffConnect.Login;HPFB.waitForSession(function()
{if('connected'==HPFB.user_status)
{var rt=new Date().getTime();var session=HPFB.getSessionForServer();jQuery.ajax({url:'/users/login/provider/check_user_status.php',type:'POST',data:'provider=facebook'+(session?'&'+session:''),success:linkSocialAccount.FacebookSuccess,error:HL.FacebookFail});}
else if('notConnected'==HPFB.user_status)
{return false;}});},FacebookSuccess:function(data,func,req)
{var HL=HuffConnect.Login;var result=JSON.parse(data);switch(result.msg)
{case'existed_user':case'new_user':linkSocialAccount.facebookInfo.fb_id=result.fb_id||'';linkSocialAccount.facebookInfo.user_id=result.user_id||'';linkSocialAccount.facebookInfo.user_name=result.user_name||'';linkSocialAccount.facebookInfo.Status=result.msg;HuffConnect.hideModal();if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback('facebook',result.msg);}else{linkSocialAccount.PromptForConnectPop();}
break;case'current_user':HuffConnect.hideModal();if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback('facebook','current_user');}
break;default:HL.FacebookFail(result);break;}
return;},PromptLogin:function()
{var domain=HPConfig.current_web_address;var getdata="";if(HPConfig.site)
{domain=HPConfig.huffsite;getdata="&multid="+HPConfig.site;}
var url="http://"+domain+"/users/login/provider/link_login.php?provider="+linkSocialAccount.provider+'&'+Math.random()+getdata;if(this.linkOptions.reauth)
url+="&reauth=1";else if(this.linkOptions.disable_connect)
url+="&disable_connect=1";if(!this.linkOptions.popup)
{if(Provider.user_provider_info[linkSocialAccount.provider]&&Provider.user_provider_info[linkSocialAccount.provider].Status)
{linkSocialAccount.PromptLoginConnect();}
else if('undefined'!=typeof Provider.login_config[linkSocialAccount.provider])
{PopupManager.open(url,Provider.login_config[linkSocialAccount.provider].w,Provider.login_config[linkSocialAccount.provider].h);PopupManager.onClose=function(){linkSocialAccount.PromptLoginConnect();};}}
else
{setTimeout(function(){linkSocialAccount.linkOptions.popup.location=url;if("twitter"==linkSocialAccount.provider)
linkSocialAccount.linkOptions.popup.resizeTo(800,550);PopupManager.onClose=function(){linkSocialAccount.PromptLoginConnect();};},100);}},PromptLoginConnect:function(){var SA=linkSocialAccount;if(Provider.user_provider_info[SA.provider].Status&&"undefined"!=typeof(Provider.user_provider_info[SA.provider]))
{if(SA.linkOptions.disable_connect)
{if(typeof SA.linkOptions.callback=="function")
{SA.linkOptions.callback();return;}}
else
linkSocialAccount.PromptForConnectPop();}
else
{HuffConnect.hideModal();HPError.e('something went wrong');}
return;},PromptForConnectPop:function()
{HuffConnect.hideModal();if(linkSocialAccount.provider=='facebook'){var status=linkSocialAccount.facebookInfo.Status;}
else{var status=Provider.user_provider_info[linkSocialAccount.provider].Status;}
var html=this.getPromptPopHtml(status);if(html!="")
{var modal_config={inner_html:html,width:550};if(/existed_user/.test(status))
{modal_config.cb=linkSocialAccount.callback;if(linkSocialAccount.provider=="facebook")
var existed_user_id=linkSocialAccount.facebookInfo.user_id;else
var existed_user_id=Provider.user_provider_info[linkSocialAccount.provider].user_id;if(existed_user_id==HPUser.user_id()&&!this.linkOptions.reauth)
{alert("You are already linked to this "+linkSocialAccount.provider.charAt(0).toUpperCase()+linkSocialAccount.provider.substr(1,linkSocialAccount.provider.length)+" account!");return;}}
if(this.linkOptions.reauth)
{linkSocialAccount.ConnectProvider();return;}
HuffConnect.socialModal(modal_config);}
else
{HuffConnect.hideModal();HPError.e('something went wrong');}
return;},getPromptPopHtml:function(status)
{var html="";var userName=HuffCookies.getUserName().replace('hp_blogger_','').replace('_',' ');var provider=linkSocialAccount.provider.charAt(0).toUpperCase()+linkSocialAccount.provider.substr(1);if(/new_user/.test(status))
{html+="<div class=\"align_left modal_link_your_social_account\"><div class=\"connect_pop_head\">"+sprintf(_("Link your %s account?"),provider)+"</div>"+
"<p class=\"connect_pop_name\">"+sprintf(_("Hi %s"),userName)+",</p>"+
"<br />"+
"<p class=\"connect_pop_main_text\">"+_("Would you like to link your account to your Huffington Post account?")+"</p>"+
"<br />"+
"<p class=\"connect_pop_sub_text\">"+sprintf(_("By linking your %s account to your Huffington Post account, you will be able to log in to Huffpost using your %s credentials. You will also gain access to new features and be able to more easily see what your %s friends are up to on this site.</p>"),provider,provider,provider)+
"<br />"+
"<div id=\"user_link_reaction\">"+
"<div class=\"connect_pop_yes\" onclick=\"linkSocialAccount.ConnectProvider(); return false;\">"+_("Yes")+"</div>"+
"<div class=\"connect_pop_no\" onclick=\"linkSocialAccount.closePromptPop(); return false;\">"+_("No")+"</div>"+
"</div>"+
"<div class=\"clear\"></div>"+
"<br /><br />"+
"<p class=\"connect_pop_notyou\">"+sprintf(_("Not %s? Please %sclick here%s to log out, then log back in with your correct account."),userName,"<a href=\"/users/logout/\" onclick=\"QuickLogin.SocialLogout('/users/logout/'); return false;\">","</a>")+"</p>"+
"</div></div><br />";}
else if(/existed_user/.test(status))
{if('facebook'==linkSocialAccount.provider){oldUserName=linkSocialAccount.facebookInfo.user_name;}else{oldUserName=Provider.user_provider_info[linkSocialAccount.provider].user_name;}
html+="<div class=\"align_left modal_link_your_social_account\"><div class=\"connect_pop_head\">"+sprintf(_("Do you wish to re-link your %s account?"),provider)+"</div>"+
"<p class=\"connect_pop_name\">"+sprintf(_("Hi %s"),userName)+",</p>"+
"<br />"+
"<p class=\"connect_pop_sub_text\">"+sprintf(_("This %s account is already linked to the Huffington Post username '%s'. Would you like to instead associate it with your current account '%s'?"),provider,oldUserName,userName)+"</p>"+
"<br />"+
"<div id=\"user_link_reaction\">"+
"<div class=\"connect_pop_yes\" onclick=\"linkSocialAccount.ConnectProvider(); return false;\">"+_("Yes")+"</div>"+
"<div class=\"connect_pop_no\" onclick=\"linkSocialAccount.closePromptPop(); return false;\">"+_("No")+"</div>"+
"</div>"+
"<div class=\"clear\"></div>"+
"</div><br /><br /></div>";}
return html;},closePromptPop:function()
{HuffConnect.hideModal(linkSocialAccount.onLinkFailed);return;},ConnectProvider:function()
{var HL=HuffConnect.Login;var SA=linkSocialAccount;var snn_loading_el=jQuery("#huffpo_snn_is_loading");var user_link_reaction_el=jQuery("#user_link_reaction");if(snn_loading_el.length)snn_loading_el.css('display','block');if(user_link_reaction_el.length)user_link_reaction_el.css('display','none');var provider_uid=0;var uid=0;var uname='';var custom_data='';var post_data='';var status='';var rt=new Date().getTime();switch(SA.provider)
{case'facebook':provider_uid=SA.facebookInfo.fb_id;status=SA.facebookInfo.Status;uid=SA.facebookInfo.user_id||'';uname=SA.facebookInfo.user_name||'';custom_data='&'+HPFB.getSessionForServer();break;case'twitter':provider_uid=Provider.user_provider_info[SA.provider].id;status=Provider.user_provider_info[SA.provider].Status;uid=Provider.user_provider_info[SA.provider].user_id||'';uname=Provider.user_provider_info[SA.provider].user_name||'';custom_data='&name='+Provider.user_provider_info.twitter.screen_name+
'&t='+encodeURIComponent(Provider.user_provider_info.twitter.oauth_token)+
'&s='+encodeURIComponent(Provider.user_provider_info.twitter.oauth_token_secret)+
'&img='+escape(Provider.user_provider_info.twitter.profile_image);break;case'yahoo':case'google':case'linkedin':provider_uid=Provider.user_provider_info[SA.provider].id;status=Provider.user_provider_info[SA.provider].Status;uid=Provider.user_provider_info[SA.provider].user_id||'';uname=Provider.user_provider_info[SA.provider].user_name||'';custom_data='&access_token='+encodeURIComponent(Provider.user_provider_info[SA.provider].access_token)+
'&img='+escape(Provider.user_provider_info[SA.provider].profile_image);break;case'aol':provider_uid=Provider.user_provider_info[SA.provider].id;uid=Provider.user_provider_info[SA.provider].user_id||'';uname=Provider.user_provider_info[SA.provider].user_name||'';status=Provider.user_provider_info[SA.provider].Status+
'&img='+escape(Provider.user_provider_info.aol.profile_image);break;case'winlive':provider_uid=Provider.user_provider_info[SA.provider].WinliveId;status=Provider.user_provider_info[SA.provider].Status;uid=Provider.user_provider_info[SA.provider].user_id||'';uname=Provider.user_provider_info[SA.provider].user_name||'';custom_data='&WinliveAccessToken='+encodeURIComponent(Provider.user_provider_info[SA.provider].WinliveAccessToken)
+'&WinliveAccessTokenExpiresAt='+encodeURIComponent(Provider.user_provider_info[SA.provider].WinliveAccessTokenExpiresAt)
+'&WinliveRefreshToken='+encodeURIComponent(Provider.user_provider_info[SA.provider].WinliveRefreshToken)
+'&img='+escape(Provider.user_provider_info[SA.provider].profile_image);break;default:HuffConnect.hideModal();HPError.e(_('something went wrong'));return;}
post_data="provider="+SA.provider+"&puid="+provider_uid+custom_data+"&r="+rt;post_data+="&status="+status+"&uid="+uid+"&uname="+uname;if(provider_uid!="0")
{jQuery.ajax({url:'/users/login/provider/link_provider.php',type:'POST',data:post_data,success:linkSocialAccount.LinkSuccess,error:HL.FacebookFail});}
else if(SA.linkOptions.reauth&&provider_uid=="0")
{if(typeof linkSocialAccount.onLinkSuccess=='function'){linkSocialAccount.onLinkSuccess();}}
return;},LinkSuccess:function(data,func,req)
{if(jQuery('#huffpo_snn_is_loading').length)
jQuery('#huffpo_snn_is_loading').css('display','none');if(jQuery('#user_link_reaction').length)
jQuery('#user_link_reaction').html(data);if(jQuery('#user_relink_reaction').length)
jQuery('#user_relink_reaction').css('display','block');switch(data)
{case"success":if(!linkSocialAccount.linkOptions.reauth)
HuffConnect.hideModal();if(linkSocialAccount.check_fans)
HuffCookies.setCookie('check_for_fans',1);if(typeof linkSocialAccount.onLinkSuccess=='function'){return linkSocialAccount.onLinkSuccess();}else{if(typeof IS_NEWSGLIDE==='boolean'&&IS_NEWSGLIDE){$(document).trigger('userlogedin');HuffConnect.hideModal();}else{location.href=location.href;}}
break;case"error":linkSocialAccount.closePromptPop();break;default:linkSocialAccount.closePromptPop();break;}},callback:function(){HuffConnect.hideModal();if(typeof IS_NEWSGLIDE==='boolean'&&IS_NEWSGLIDE){$(document).trigger('userlogedin');HuffConnect.hideModal();}else{location.href=location.href;}}};
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});PlaceTools=function(seed,soil,adjacent){ps=soil.getElementsByTagName('P');id=seed.id;if(ps.length>2)
{ps[2].parentNode.insertBefore(seed,ps[2]);HuffPoUtil.show(seed.id);}
else
if(ps.length>1)
{ps[1].parentNode.insertBefore(seed,ps[1]);HuffPoUtil.show(seed.id);}
else if(ps.length==1&&ps[0].innerHTML.match(/(<br.?>\s*?<br.?>)/))
{outerHTML='<div class="'+seed.className+'" id="'+seed.id+'">'+seed.innerHTML+'</div>';seed.parentNode.removeChild(seed);ps[0].innerHTML=ps[0].innerHTML.replace(/(<br.?>\s*?<br.?>)/,'<br><br>'+outerHTML);HuffPoUtil.show(seed.id);}
y1=HuffPoUtil.getRegion(id).top;y2=HuffPoUtil.getRegion(adjacent).top;if(y1&&y2&&(y1+150)>=y2)
{HuffPoUtil.hide(id);}};function addBookmark(url,title){title=title||_("HuffingtonPost");url=(!url)?location.href:url;title=(!title)?document.title:title;if((typeof window.sidebar=="object")&&(typeof window.sidebar.addPanel=="function")){}
else if(typeof window.external=="object"){window.external.AddFavorite(url,title);}
else if(window.opera&&document.createElement){return true;}else{return false;}
return false;};function addBookmark_mac(url,title){if(document.all){window.external.AddFavorite(url,title);}else{window.sidebar.addPanel(url,title);}};SharePost={share_form_ajax_response:false,cache:{},contacts:{yahoo:{},gmail:{},aol:{},winlive:{}},process_type:"regular",files_loaded:false,contacts_details:new Array(),pop:function(eid,vert,big_news_title)
{this.trackingPixelOnShareAction();this.emailForm(eid,vert,big_news_title);return;},fill_me:function(title,link)
{var my_name=document.forms['email_share_form'].your_name.value;var tmp=my_name.split(' ');var fixed='';var ind=0;for(z=0;(z<tmp.length&&ind++<3);z++)
{fixed=fixed+' '+tmp[z].replace(/[^a-zA-Z]/g,'');}
my_name=fixed.replace(/^\s+|\s+$/g,"");},emailForm:function(eid,vert,big_news_title)
{this.trackingPixelOnShareAction();this.share_id=eid;this.big_news_title=big_news_title;HPTrack.trackPageview('/t/a/initiate_share');if(typeof Badges!='undefined')
Badges.trackShare({eid:eid,badge:'email'});var config={share_id:eid||"",vertical:vert||"",title:this.big_news_title||""};this.loadModal(config);return;},loadModal:function(config)
{this.config=config;if(this.cache[this.config.share_id])
{var modal_window_config={width:650,inner_html:this.cache[this.config.share_id].html,modal_head_image:"",modal_subhead_image:"",onshow:function(){HuffPoUtil.EvalScript(SharePost.cache[SharePost.config.share_id].html);FB.XFBML.parse(jQuery('.email_share_block').get(0),function(){});}};HuffConnect.socialModal(modal_window_config);}
else
{HuffConnect.showLoader();this.loadForm();}
this.process_type="regular";return;},loadForm:function()
{var url="/social/entry_share_v2.php";var _this=this;jQuery.ajax({url:url,type:'GET',data:'share_id='+this.config.share_id,success:function(data,func,req){if(req.status!=200){HuffConnect.hideModal();return;}
_this.loadFormSuccess(data);},error:function(){HuffConnect.hideModal();HPError.e();return;}});return;},loadFormSuccess:function(data)
{oResp=JSON.parse(data);if(oResp.status&&/success/.test(oResp.status)&&oResp.html)
{oResp.html="<div class='align_left'>"+oResp.html+"</div>";var onshow=function()
{var title_el=jQuery("#email_share_title");var title_success_el=jQuery("#email_share_title_success");if(title_el.length)
{var es_title="";if(SharePost.config&&SharePost.config.title)
es_title=SharePost.config.title;else if(es_title==""&&jQuery("#title_permalink"))
es_title=jQuery("#title_permalink").html();else if(jQuery("#title_permalink_bold"))
es_title=jQuery("#title_permalink_bold").html();title_el.html(es_title);title_success_el.html('"'+es_title+'"');}
FB.XFBML.parse(jQuery('.email_share_block').get(0),function(){});HuffPoUtil.EvalScript(oResp.html);SharePost.cache[SharePost.config.share_id]={html:oResp.html};return;}
HuffConnect.socialModal({width:650,inner_html:oResp.html,modal_head_image:"",modal_subhead_image:"",onshow:onshow});}
else
{HuffConnect.hideModal();}
return;},selectOption:function(option)
{var mail_options=["gmail","yahoo","aol","winlive"];var radio_el=document.getElementById("email_share_radio_"+option);var box_el=jQuery("#single_box_"+option);var arrow_el=jQuery("#mailbox_arrow_"+option);HPTrack.trackEvent('Email Share','Select Import Provider',option);for(var i=0;i<mail_options.length;i++){var el1=jQuery("#single_box_"+mail_options[i]);var el2=jQuery("#mailbox_arrow_"+mail_options[i]);var el3=jQuery("#email_share_radio_"+mail_options[i]);if(el1)jQuery(el1).removeClass("selected_box");if(el2)jQuery(el2).addClass("hidden");if(el3)el3.checked=false;}
if(radio_el)radio_el.checked=true;if(box_el.length)box_el.addClass("selected_box");if(arrow_el.length)arrow_el.removeClass("hidden");if(option)
this.importContacts(option);this.hideMessage();return;},send:function()
{var valid_config=this.validateForm();if(typeof valid_config=="object")
{jQuery("#es_send_button").addClass("hidden");jQuery("#es_send_status").removeClass("hidden");var url="/send/send.php",id=escape(valid_config.id);var postdata="id="+id+"&"+
"your_name="+encodeURIComponent(valid_config.your_name.substr(0,30))+"&"+
"your_email="+encodeURIComponent(valid_config.your_email.substr(0,320))+"&"+
"email_list="+encodeURIComponent(valid_config.email_list);if(id==-1){postdata+='&url='+encodeURIComponent(window.location.href)+
'&title='+encodeURIComponent(document.title);}
if((typeof social_campaign!=='undefined')&&(typeof social_campaign_creative!=="undefined")&&(typeof social_campaign_creative.email!=="undefined")){var share_ad_text="";if((typeof social_campaign_creative.email.link!=='undefined')&&(typeof social_campaign_creative.email.link!=='function')&&(social_campaign_creative.email.link!='')){share_ad_text+=(typeof social_campaign_creative.email.pre_link!=="undefined")?encodeURIComponent(social_campaign_creative.email.pre_link.replace(/\\+"/g,'"')):'';share_ad_text+='<a href="'+social_campaign_creative.email.link+'">'+((typeof social_campaign_creative.email.text!=="undefined")?encodeURIComponent(social_campaign_creative.email.text.replace(/\\+"/g,'"')):'')+'</a>';share_ad_text+=(typeof social_campaign_creative.email.post_link!=="undefined")?encodeURIComponent(social_campaign_creative.email.post_link.replace(/\\+"/g,'"')):'';}else{share_ad_text+=encodeURIComponent(social_campaign_creative.email.replace(/\\+"/g,'"'));}
postdata+="&share_ad_text="+share_ad_text;postdata+="&share_link_ref="+encodeURIComponent(social_campaign);}else if((typeof social_campaign!='undefined')&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].email_message)
{postdata+="&share_ad_text="+encodeURIComponent(HPAds.social_campaigns[social_campaign].email_message.replace(/\\+"/g,'"'));postdata+="&share_link_ref="+encodeURIComponent(social_campaign);}
else if(SharePost.share_email_comm_text)
{postdata+="&share_ad_text="+encodeURIComponent(SharePost.share_email_comm_text);}
postdata+='&send_this=1';var get_paramters=jQuery(location).attr("search")||"";get_paramters=decodeURIComponent(get_paramters);get_paramters=get_paramters.replace(/\s/g,"");get_paramters=get_paramters.substr(0,255);if(get_paramters!==""){postdata+="&get="+encodeURIComponent(get_paramters);}
postdata+="&banners="+HPAds.get_banners_str();jQuery.ajax({type:"POST",url:url,data:postdata,dataType:'json',error:function(){SharePost.sendFailure();},success:SharePost.sendSuccess});}
return;},sendSuccess:function(oResp)
{if(oResp&&oResp.status&&/success/.test(oResp.status))
{jQuery("#es_share_started").addClass("hidden");jQuery("#es_share_ended").removeClass("hidden");jQuery("#es_send_status").addClass("hidden");jQuery("#es_send_button").removeClass("hidden");jQuery("#es_error_dialogue").addClass("hidden");var title=jQuery("#es_share_ended .title");if(title.html()=='""'){title.html('"'+document.title+'"');}
var form=window.document.email_share_form;if(form['email_list'])form['email_list'].value="";if(form['your_name'])form['your_name'].value="";if(form['your_email'])form['your_email'].value="";SharePost.selectAll(false);window.location.hash="#es_share_ended";}
else
{var msg=oResp.message||false;SharePost.sendFailure(msg);}
return;},sendFailure:function(msg)
{jQuery("#es_send_status").addClass("hidden");jQuery("#es_send_button").removeClass("hidden");SharePost.displayMessage(msg);return;},validateForm:function()
{var form=window.document.email_share_form;if(this.process_type=="regular")
{if(form['email_list'].value==""){SharePost.displayMessage(_("Send to email(s) box cannot be empty"));form['email_list'].focus();return;}
else if(form['your_name'].value==""){SharePost.displayMessage(_("Please enter your name"));form['your_name'].focus();return;}
else if(form['your_email'].value==""){SharePost.displayMessage(_("Please enter your email"));form['your_email'].focus();return;}
var config={id:form['email_share_id'].value,your_name:form['your_name'].value,your_email:form['your_email'].value,email_list:form['email_list'].value};}
else if(this.process_type=="import")
{if(form['email_list'].value=="")
{var msg=_("Please enter the email addresses");if(this.total_contacts_found==0)
msg=_("No contacts found");SharePost.displayMessage(msg);return;}
var oUserContacts=(this.contacts[this.current_option]);var config={id:form['email_share_id'].value,your_name:oUserContacts.name,your_email:oUserContacts.email,email_list:form['email_list'].value};}
return config;},displayMessage:function(err)
{if(err)
var error=err;else
var error=_("Unable to process!");jQuery("#es_error_dialogue").html(error);jQuery("#es_error_dialogue").removeClass("hidden");return;},hideMessage:function()
{jQuery("#es_error_dialogue").addClass("hidden");return;},importContacts:function(option)
{if(this.contacts[option].linked)
{this.importContactsSuccess(option);}
else
{if(HPConfig.site){domain='http://'+HPConfig.huffsite;multid="&multid="+HPConfig.site;}else{domain=HuffPoUtil.getHostName();multid='';}
var url=domain+"/users/contacts/index.php?provider="+option+"&nofilter=1"+multid;var w=500,h=500;if(option=='gmail'){w=860,h=550;}
PopupManager.open(url,w,h);PopupManager.onClose=function()
{SharePost.importContactsSuccess(option);huff.use('provider/logout',function(ProviderLogout){ProviderLogout.OnAfterContactsImport(option);})};}
return;},importContactsSuccess:function(option)
{jQuery("#es_share_started").removeClass("hidden");jQuery("#es_share_ended").addClass("hidden");if(this.contacts[option].linked)
{var rad_el=jQuery("#es_mailbox_rad_"+option);var div_el=jQuery("#email_form_left_section");var provider_el=jQuery("#es_provider");var es_pic_el=jQuery("#es_pic");var es_user_data_el=jQuery("#es_user_data");var oUserContacts=(this.contacts[option]);rad_el.html("").addClass("selected_mailbox email_share_pixie");provider_el.html(option.charAt(0).toUpperCase()+option.substr(1));if(oUserContacts.avatar)
es_pic_el.html('<div class="mailbox_avatar float_left" style="margin-right:2px;"><img width="27" height="27" src="'+oUserContacts.avatar+'" /></div>');else
es_pic_el.html('<div class="email_share_pixie mailbox_avatar float_left avatar_pic_'+option+'"></div>');es_user_data_el.html(oUserContacts.name+" ("+oUserContacts.email+")");if("string"===typeof oUserContacts.contacts)
oUserContacts.contacts=JSON.parse(oUserContacts.contacts);if(oUserContacts.contacts&&oUserContacts.contacts.length)
{var left_html="";left_html+="<div class=\"es_margins\">";left_html+="	<div class=\"es_form_label uppercase float_left\">"+_("SEND TO EMAIL(S)")+"</div>";left_html+="	<div class=\"email_share_pixie es_required_ico float_left\"></div>";left_html+="	<div class=\"clear\"></div>";left_html+="	<div class=\"es_input_box\"><input type=\"text\" class=\"email_share_box email_listing_box\" name=\"email_list\" id=\"cbox_email_listing\" /></div>";left_html+="<input type=\"hidden\" id=\"project-id\" />";left_html+="	<div class=\"es_form_small_text float_left es_helper_text\">"+_("Separate multiple addresses with comma")+"</div>";left_html+="	<div class=\"clear\"></div>";left_html+="</div>";left_html+="<div class='contact_list'>";this.contacts_details=new Array();for(var i=0;i<oUserContacts.contacts.length;i++)
{var cropped_name=cropped_email="";if(oUserContacts.contacts[i].name)
cropped_name=oUserContacts.contacts[i].name;if(cropped_name.length>12)
{cropped_name=cropped_name.substr(0,9)+"...";}
if(oUserContacts.contacts[i].email)
cropped_email=oUserContacts.contacts[i].email;if(cropped_email.length>22)
cropped_email=cropped_email.substr(0,19)+"...";this.contacts_details.push(oUserContacts.contacts[i].email);left_html+="<div class='es_single_contact'>";left_html+="<div class='es_contact_names float_left'>";left_html+="<span class='es_username' title='"+oUserContacts.contacts[i].name+"'>"+cropped_name+"</span>&nbsp;&nbsp;<span class='es_email' title='"+oUserContacts.contacts[i].email+"'>"+cropped_email+"</span>";left_html+="</div>";left_html+="<div class='es_contact_cbox float_right'>";left_html+="<input type='checkbox' name='"+oUserContacts.contacts[i].email+"' value='"+oUserContacts.contacts[i].email+"' onclick='SharePost.selectOne(this)' />";left_html+="</div>";left_html+="</div>";left_html+="<div class='clear es_contacts_border'></div>";}
left_html+="</div>";left_html+="<div class='es_selectall'><input type='checkbox' name='select_all_contacts' value='all' onclick='SharePost.selectAll(this.checked);' />&nbsp;"+_("Select All")+"</div>";div_el.html(left_html);this.total_contacts_found=oUserContacts.contacts.length;this.loadFiles();}
else if(""!=typeof this.contacts[option].error&&""!==this.contacts[option].error)
{div_el.html("<div class='es_provider_err'>"+this.contacts[option].error+"</div>");this.total_contacts_found=0;}
else
{div_el.html("<div class='es_list_empty'>"+_("No contacts found!")+"</div>");this.total_contacts_found=0;}
this.process_type="import";this.current_option=option;}
else
this.selectOption();return;},loadFiles:function()
{if(!this.files_loaded)
{var files=['/include/lib/jquery/jquery.ui.core.min.js','/include/lib/jquery/jquery.ui.widget.min.js','/include/lib/jquery/jquery.ui.position.min.js','/include/lib/jquery/jquery.ui.autocomplete.min.js'];var cb=function(){SharePost.files_loaded=true;SharePost.showOptions();};if(HuffPoUtil&&typeof(HuffPoUtil.loadAndRun)=="function")
HuffPoUtil.loadAndRun(files,cb);}
else
this.showOptions();return;},showOptions:function()
{if(!this.files_loaded)
return;jQuery.noConflict();(function($){$(function(){var availableTags=SharePost.contacts_details;function split(val){return val.split(/,\s*/);}
function extractLast(term){return split(term).pop();}
$("#cbox_email_listing")
.bind("keydown",function(event){if(event.keyCode===$.ui.keyCode.TAB&&$(this).data("autocomplete").menu.active){event.preventDefault();}})
.autocomplete({minLength:0,source:function(request,response){response($.ui.autocomplete.filter(availableTags,extractLast(request.term)));},focus:function(){return false;},select:function(event,ui){var terms=split(this.value);terms.pop();terms.push(ui.item.value);SharePost.checkOption(ui.item.value);terms.push("");this.value=terms.join(", ");return false;},open:function(event,ui){$('.ui-autocomplete').css('z-index',900);return;}});});})(jQuery);return;},checkOption:function(val)
{var form=window.document.email_share_form;if(form[val]&&form[val].type=="checkbox")
form[val].checked=true;return;},selectOne:function(cbox)
{var input_el=jQuery("#cbox_email_listing");var str=cbox.value+", ";if(cbox.checked){var current_val=input_el.val();input_el.val(current_val+str);}
else
input_el.val(input_el.val().replace(str,""));input_el.focus();this.setCursorPostion();return;},selectAll:function(state)
{var form=window.document.email_share_form;var input_el=jQuery("#cbox_email_listing");var all_emails=new Array();for(var i=0;i<form.length;i++)
{if(form[i].type=="checkbox"&&form[i].value!="all")
{form[i].checked=state;all_emails.push(form[i].value);}}
if(form['select_all_contacts'])
form['select_all_contacts'].checked=state;if(state){var all_val=input_el.val();all_val+=all_emails.join(", ")+", ";input_el.val(all_val);}
else
input_el.val("");input_el.focus();this.setCursorPostion();return;},setCursorPostion:function()
{return;},trackingPixelOnShareAction:function(){if(typeof social_campaign_tracking!='undefined'&&social_campaign_tracking.email_share_action){if(typeof social_campaign_tracking.email_share_action=="object"){for(tracking_url in social_campaign_tracking.email_share_action){if((typeof social_campaign_tracking.email_share_action[tracking_url]=="string")&&(social_campaign_tracking.email_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.email_share_action[tracking_url],document.body);}}}else{HPUtil.trackerImg(social_campaign_tracking.email_share_action,document.body);}
if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]){HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+social_campaign+".email",document.body);}else if(this.tracking_flight_name){HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+this.tracking_flight_name+".email",document.body);}}
HPUtil.updateInfluenceCookie('emailed',1);}
};function prepare_and_show_blogs_table_new(page){if(blogs_amount==0){return;}
var show_table='';var innerhtml='';var first_sponsored=0;var last_sponsored=0;var tds=0;page--;var forstop=rows_in_the_blogs_table*tds_in_the_blogs_table;var forstart=page*forstop+1;forstop=forstop+forstart-1;if(page>1&&null==document.getElementById('related_blogs_'+forstart)&&typeof prepare_and_show_blogs_table_new.pagination_requested=='undefined')
{prepare_and_show_blogs_table_new.pagination_requested=true;var elem=document.getElementById('related_blogs');elem.innerHTML="";elem.style.background="transparent url('http://s.huffpost.com/images/loader.gif') no-repeat center top";elem.style.height="60px";var request_url='/entries/pagination_load.php?module=linked_entries&entry_id='+HPUtil.GetEntryID()+'&blog_id=3&load_from='+loaded_blogs_amount+'&showed_expanded_blogs_amount='+showed_expanded_blogs_amount;jQuery.ajax({type:"GET",url:request_url,dataType:"text",error:function(){},success:function(transport){if(transport)
{var elem=document.getElementById('related_blogs');elem.style.background="transparent";elem.style.height="auto";document.getElementById('related_blogs_ajax_loaded').innerHTML=transport;prepare_and_show_blogs_table_new(page+1);}}})
return;}
for(i=forstart;i<=forstop;i++){var news_html=i>blogs_amount?'':document.getElementById('related_blogs_'+i).innerHTML;if('undefined'!==typeof html&&(html.search("div onclick=")>-1)&&(first_sponsored==0)){first_sponsored=1;innerhtml+='<div class="sponsored_preview"><div class="commercial_title commercial_title_'+HPConfig.current_vertical_name+'">SPONSOR GENERATED POST</div><div style="clear: both; line-height: 10px; height: 10px;"></div>';}
if('undefined'!==typeof html&&(html.search("div onclick=")==-1)&&(first_sponsored==1)&&(last_sponsored==0)){last_sponsored=1;innerhtml+='</div>';}
innerhtml+=news_html;if((0==i%2)&&(i!=forstart))
{innerhtml+='<div class="clear"></div>';}
if(i>blogs_amount){break;}}
tds=0;document.getElementById('related_blogs').innerHTML=innerhtml;innerhtml='';if(blogs_amount<=(rows_in_the_blogs_table*tds_in_the_blogs_table)){return;}
i--;var pagination='';if(page>0){pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_blogs_table_new("+1+"); return false;\">&laquo;&nbsp;"+_("First")+"</a>&nbsp;";var prev_page=page;pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_blogs_table_new("+prev_page+"); return false;\">&nbsp;"+_("Prev")+"</a>&nbsp;";}else{pagination=pagination+"&nbsp;&laquo;&nbsp;"+_("First")+"&nbsp;&nbsp;&nbsp;"+("Prev")+"&nbsp;";}
var cur_page=page+1;var j;var half_pages=show_pages_amount/2;forstart=cur_page-half_pages+1;if(forstart<1){forstart=1;}
forstop=forstart+half_pages;if((forstop-forstart+1)<show_pages_amount){forstop=forstop+show_pages_amount-(forstop-forstart+1);}
if(forstop>pages_amount){forstop=pages_amount;}
if((forstop-forstart+1)<show_pages_amount){forstart=forstart-(show_pages_amount-(forstop-forstart+1));}
if(forstart<1){forstart=1;}
for(j=forstart;j<=forstop;j++){if(j>pages_amount){break;}
if(j==cur_page){pagination=pagination+"&nbsp;"+j+"&nbsp;";}else{pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_blogs_table_new("+j+"); return false;\">"+j+"</a>&nbsp;";}}
if(i<blogs_amount){var next_page=page+2;pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_blogs_table_new("+next_page+"); return false;\">"+_("Next")+"&nbsp;</a>&nbsp;";pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_blogs_table_new("+pages_amount+"); return false;\">"+_("Last")+"&nbsp;&raquo;</a>&nbsp";}else{pagination=pagination+"&nbsp;"+_("Next")+"&nbsp;&nbsp;&nbsp;"+_("Last")+"&nbsp;&raquo;&nbsp";}
document.getElementById('blogs_pages').innerHTML=_("More Blog Posts:")+"&nbsp;"+pagination+"<br />";}
function prepare_and_show_news_table_original(page){if(news_amount==0){return;}
var show_table='';var innerhtml='';var tds=0;var first_sponsored=0;var last_sponsored=0;page--;var forstop=rows_in_the_news_table*tds_in_the_news_table;var forstart=page*forstop+1;forstop=forstop+forstart-1;if(page>1&&null==document.getElementById('related_news_'+forstart)&&typeof prepare_and_show_news_table_original.pagination_requested=='undefined')
{prepare_and_show_news_table_original.pagination_requested=true;var elem=document.getElementById('related_news');elem.innerHTML="";elem.style.background="transparent url('http://s.huffpost.com/images/loader.gif') no-repeat center top";elem.style.height="60px";var request_url='/entries/pagination_load.php?module=linked_entries&entry_id='+HPUtil.GetEntryID()+'&blog_id=2&load_from='+loaded_news_amount;jQuery.ajax({type:"GET",url:request_url,dataType:"text",error:function(){},success:function(transport){if(transport)
{var elem=document.getElementById('related_news');elem.style.background="transparent";elem.style.height="auto";document.getElementById('related_news_ajax_loaded').innerHTML=transport;prepare_and_show_news_table_original(page+1);}}})
return;}
for(i=forstart;i<=forstop;i++){var html=i>news_amount?'':document.getElementById('related_news_'+i).innerHTML;html=html.split('height: 10px;').join('height: 0;');if((html.indexOf('onclick="HPAds')>-1)&&(first_sponsored==0)){first_sponsored=1;innerhtml+='<div class="sponsored_preview"><div class="commercial_title commercial_title_'+HPConfig.current_vertical_name+'">SPONSOR GENERATED POST</div><div style="clear: both; line-height: 10px; height: 10px;"></div>';}
if((html.indexOf('onclick="HPAds')==-1)&&(first_sponsored==1)&&(last_sponsored==0)){last_sponsored=1;innerhtml+='</div>';}
innerhtml+=html;if(i>news_amount){break;}}
document.getElementById('related_news').innerHTML=innerhtml;innerhtml='';tds=0;if(news_amount<=(rows_in_the_news_table*tds_in_the_news_table)){return;}
i--;var pagination='';if(page>0){pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_news_table_original("+1+"); return false;\">&laquo;&nbsp;"+_("First")+"</a>&nbsp;";var prev_page=page;pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_news_table_original("+prev_page+"); return false;\">&nbsp;"+_("Prev")+"</a>&nbsp;";}else{pagination=pagination+"&nbsp;&laquo;&nbsp;"+_("First")+"&nbsp;&nbsp;&nbsp;"+_("Prev")+"&nbsp;";}
var cur_page=page+1;var j;var half_pages=show_pages_amount/2;forstart=cur_page-half_pages+1;if(forstart<1){forstart=1;}
forstop=forstart+half_pages;if((forstop-forstart+1)<show_pages_amount){forstop=forstop+show_pages_amount-(forstop-forstart+1);}
if(forstop>news_pages_amount){forstop=news_pages_amount;}
if((forstop-forstart+1)<show_pages_amount){forstart=forstart-(show_pages_amount-(forstop-forstart+1));}
if(forstart<1){forstart=1;}
for(j=forstart;j<=forstop;j++){if(j>news_pages_amount){break;}
if(j==cur_page){pagination=pagination+"&nbsp;"+j+"&nbsp;";}else{pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_news_table_original("+j+"); return false;\">"+j+"</a>&nbsp;";}}
if(i<news_amount){var next_page=page+2;pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_news_table_original("+next_page+"); return false;\">"+_("Next")+"&nbsp;</a>&nbsp;";pagination=pagination+"&nbsp;<a href=\"#\" onclick=\"prepare_and_show_news_table_original("+news_pages_amount+"); return false;\">"+_("Last")+"&nbsp;&raquo;</a>&nbsp";}else{pagination=pagination+"&nbsp;"+_("Next")+"&nbsp;&nbsp;&nbsp;"+_("Last")+"&nbsp;&raquo;&nbsp";}
document.getElementById('news_pages').innerHTML=_("More News Posts:")+"&nbsp;"+pagination+"<br />";}
var ShareBox={submitFlag:false,checkMail:false,count:false,chooseShareVia:function(via)
{via=(via==undefined)?'email':via;if(via=='email')
{ShareBox.set_email_class();this.ad('ad_email');jQuery('#all_email').show();jQuery('#all_im').hide();if(jQuery('#ad_im').length==0)return;jQuery('#ad_im').attr("class","");jQuery('#ad_email').attr("class",'show_flash_mask');}
else
{ShareBox.set_im_class();this.ad('ad_im');jQuery('#all_im').show();jQuery('#all_email').hide();jQuery('#ad_email').attr("class","");jQuery('#ad_im').attr("class",'show_flash_mask');}},triggerStepFourIM:function()
{if(jQuery('#share_screen_name').val()!=''&&jQuery('#share_im_service').val()!=''){jQuery.remove('#share_im_option_blank');this.submitFlag=true;return true;}},triggerStepThreeEmail:function(login,pass,service)
{var elem=jQuery("#login");if(elem.val()=="")
{alert(sprintf(_("Please enter your login for %s."),service));elem.focus();return false;}
elem=jQuery("#pass");if(elem.val()=="")
{alert(_("Please enter your password."));elem.focus();return false;}
jQuery('#share_email_spinner').show();jQuery.ajax({url:'/_share_email.php?login='+login+'&pass='+pass+'&service='+service,success:function(data){jQuery('#share_email_spinner').hide();jQuery('#share_email_inner').html(data);finishLoading();}});},triggerStepFourEmail:function()
{var els=document.getElementsByName('more_friends[]');for(var i=0;i<els.length;i++)
{if(els[i].value=="")continue;if(!HPUtil.checkEmail(els[i].value))
{alert(_("Please specify a valid e-mail."));els[i].focus();return false;}
this.count=true;}
this.triggerStepFour();this.showSend();return true;},triggerImport:function()
{if(jQuery('#login').val()!=''&&jQuery('#pass').val()!='')
{jQuery('#importButton').css("display","inline");}
else
{jQuery('#importButton').hide();}
return true;},triggerStepFour:function()
{jQuery('#share_note').show();this.submitFlag=true;},showSend:function()
{jQuery('#share_send').show();},doDebug:function()
{alert(jQuery('#im_message_share').val());alert(jQuery('#entry_id_share').val());},checkSubmit:function(id,flag,tag)
{var check=false;var count=false;var post_data=false;var more_friends=false;if(flag=="email")
{var elem=jQuery("#share_your_name");if(elem.val()=="")
{alert(_("Please enter your name"));elem.focus();return false;}
elem=jQuery("#share_your_email");if(elem.val()=="")
{alert(_("Please enter your email"));elem.focus();return false;}
else
{if(!(jQuery('#share_your_email').length&&HPUtil.checkEmail(jQuery('#share_your_email').val())))
{alert("Please specify a valid e-mail.");jQuery('#share_your_email').focus();return false;}}
if(jQuery("#share_friends_email").val()!=''){check=true;}
var els=document.getElementsByName('more_friends[]');for(var i=0;i<els.length;i++)
{if(els[i].value!='')
{count=true;break;}}
if(!check&&!count)
{alert(_("Please enter or import email(s)"));return false;}
if(count&&!this.triggerStepFourEmail())
{count=0;return false;}
if((id==0)&&jQuery('#quickread_entry_id').length>0)
{id=jQuery('#quickread_entry_id').html();}
postBoby="id"+"="+escape(id)+"&"+
"mode"+"="+"submit_form"+"&"+
"type"+"="+"email";if(tag!='')
{postBoby+="&p=big_news";}
if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].email_message)
{postBoby+="&share_ad_text="+encodeURIComponent(HPAds.social_campaigns[social_campaign].email_message.replace(/\\+"/g,'"'));postBoby+="&share_link_ref="+social_campaign;}
else if(SharePost.share_email_comm_text)
{postBoby+="&share_ad_text="+encodeURIComponent(SharePost.share_email_comm_text);}
jQuery.ajax({type:"POST",url:"/_share_email.php?"+jQuery("#share_tool_form").serialize(),success:function(data){jQuery('#message_sent').show();jQuery('#menu_title_share').html(data);if(jQuery('#share_tool_form').length>0){jQuery('#share_friends_email_1').val('');jQuery('#share_friends_email_2').val('');jQuery('#login').val('');jQuery('#pass').val('');jQuery('#share_note').val('');}}});return false;}
else if(flag=="im")
{jQuery.ajax({type:"POST",url:"/_share_email.php?mode=submit_form&type=im&"+jQuery("#share_tool_form").serialize(),success:function(data){jQuery('#share_tool_form').html(data);jQuery('#menu_im_email').hide();}});}
jQuery('#bottom_notes').hide();return false;},set_im_class:function()
{document.getElementById("email_b_page").className='im_b_page';document.getElementById("im_b_page").className='email_b_page';},set_email_class:function()
{if(jQuery("#email_b_page").length>0)jQuery("#email_b_page").attr("class","email_b_page");if(jQuery("#im_b_page").length>0)jQuery("#im_b_page").attr("class","im_b_page");}}
function getCheckboxes(form,checkbox){var str='';for(var i=0;i<getElementsByName_iefix('input',checkbox).length;i++){if(getElementsByName_iefix('input',checkbox)[i].checked)str+=getElementsByName_iefix('input',checkbox)[i].value+", ";}
document.getElementById('share_friends_email_1').value=str;ShareBox.triggerStepFourEmail();}
function checkAll(form,checkbox){for(var i=0;i<getElementsByName_iefix('input',checkbox).length;i++){getElementsByName_iefix('input',checkbox)[i].checked='false';getElementsByName_iefix('input',checkbox)[i].checked=getElementsByName_iefix('input','checkall')[0].checked;}}
function getElementsByName_iefix(tag,name){var elem=document.getElementsByTagName(tag);var arr=new Array();for(i=0,iarr=0;i<elem.length;i++){att=elem[i].getAttribute("name");if(att==name){arr[iarr]=elem[i];iarr++;}}
return arr;}
function clearAdressBook(form,checkbox,div){for(var i=0;i<document.forms[form].elements[checkbox].length;i++){document.forms[form].elements[checkbox][i].checked='false';}
jQuery(div).html('');}
function startLoading(){if(jQuery("#login").val()==""&&jQuery("#pass").val()==""){return false;}
if(jQuery('#adressBookMails').length>0){jQuery('#adressBookMails').html('');}
jQuery("#load_contacts").show();jQuery('#load').html("<img src=\"/images/ajax-loader.gif\" /><em>"+_("Loading...")+"</em>");}
function finishLoading(){jQuery('#load').html(getElementsByName_iefix('input','checkmail').length>=1?("<em><strong>"+_("success")+"</strong></em>"):("<em><strong>"+_("none")+"</strong></em>"));}
var HuffPromo={placeholder:"huff_promo_space",placeholder_el:false,promo_displayed:false,ny_promo:false,is_on:true,init:function()
{if(this.placeholder_el)
return true;var el=$(this.placeholder);if(el)
this.placeholder_el=el;else
return false;return true},ieUpgradePromo:function()
{var ie_version=HPBrowser.version();if(!this.init()||this.promo_displayed==true||ie_version!=6)
return;var promo_cookie=HuffCookies.getCookie('ieupgrade_promo');if(promo_cookie!="1")
{var promo_html="\
			<div>\
				<div class='close_promo_link'><a href='javascript:HuffPromo.closePromo(\"ie_upgrade\");'><img src='/images/close-black.png' /></a></div>\
				<div class='float_left ie_icon'></div>\
				<div class='float_left ie_icon_text'><span class='ie_promo_bold'>Enhance your web experience!</span>&nbsp;HuffPost recommends that users&nbsp;<a href='http://www.microsoft.com/nz/windows/internet-explorer/default.aspx' target='_blank'>upgrade to the latest version of Internet Explorer.</a></div>\
				<div class='ie_icon_link'></div>\
				<div class='clear'></div>\
			</div>\
			";var promo_el=document.createElement('div');promo_el.id="ieupgrade_promo";promo_el.className="ieupgrade_promo_main promo_blue";promo_el.innerHTML=promo_html;this.displayPromo('ieupgrade_promo',promo_el);}
return;},displayPromo:function(promo_name,el)
{if($('service_bottom_bar'))
return;if(el&&this.placeholder_el)
{this.placeholder_el.appendChild(el);this.promo_displayed=true;switch(promo_name)
{case"gbuzz_promo":var cookie_duration=24;HuffCookies.setCookie(promo_name,1,cookie_duration);break;default:break;}}
return;},closePromo:function(type)
{if(type=='ie_upgrade')
{el=$('ieupgrade_promo');var cookie_name="ieupgrade_promo";}
if(el&&this.placeholder_el)
{this.placeholder_el.removeChild(el);HuffCookies.setCookie(cookie_name,1);}
return;},chromeExtensionPromo:function()
{if(navigator.userAgent.toLowerCase().indexOf('chrome')>-1&&typeof(localStorage)!='undefined'&&localStorage['show-chromeapp-popup']!='0')
{var tracker=HPTrack.Module('top promo','Top Promo');tracker.impression('chrome');var install_app_url='https://chrome.google.com/webstore/detail/khjialelnkjdomiblmnpcpjongleegef?hl=en-US';var dismiss=function()
{$('chrome_extension_promo').style.display='none';localStorage['show-chromeapp-popup']=0;}
var acceptedApp=function()
{tracker.click('Chrome App');dismiss();};var container=document.createElement('div');container.id='chrome_extension_promo';var label=document.createElement('span');label.innerHTML='Check out <a id="goog_newsglide_ch" href="'+install_app_url+'" target="_blank">NewsGlide</a>, our <a id="goog_ch" href="'+install_app_url+'" target="_blank">Google Chrome App</a>. The fastest news experience on the web...';container.appendChild(label);var install_button=document.createElement('a');install_button.href=install_app_url;install_button.id='install_button';install_button.target='_blank';install_button.onclick=acceptedApp;container.appendChild(install_button);var close_button=document.createElement('a');close_button.href='#';close_button.id='close_button';close_button.onclick=dismiss;container.appendChild(close_button);document.body.insertBefore(container,document.body.firstChild);$('goog_ch').onclick=acceptedApp;$('goog_newsglide_ch').onclick=acceptedApp;HuffPromo.animateHuffPromo('chrome_extension_promo');}},verticalPromo:function(verticalName)
{var show_vert_promo=true,verticalText='';verticalName=verticalName.toLowerCase();if(show_vert_promo&&HPConfig.current_vertical_name!=verticalName&&typeof(localStorage)!='undefined'&&localStorage['show-vertical-popup']!='0')
{var tracker=HPTrack.Module('top promo','Top Promo');tracker.impression(verticalName);var install_url='http://www.huffingtonpost.com/'+verticalName;switch(verticalName){case'new-york':verticalText='<a id="vertical_ch" href="'+install_url+'" target="_blank">HuffPost New York</a>: Your news and city guide from the inside out.';break;default:verticalText='Have you checked out <a id="vertical_ch" href="'+install_url+'" target="_blank">HuffPost Divorce</a>? It\'s everything you need to know to conquer the Big D.';break;}
var dismiss=function()
{$('vertical_promo').style.display='none';localStorage['show-vertical-popup']=0;}
var container=document.createElement('div');container.id='vertical_promo';var label=document.createElement('span');label.innerHTML=verticalText;container.appendChild(label);var close_button=document.createElement('a');close_button.href='#';close_button.id='close_button';close_button.onclick=dismiss;container.appendChild(close_button);document.body.insertBefore(container,document.body.firstChild);$('vertical_ch').onclick=function()
{tracker.click(verticalName);dismiss();return;}
HuffPromo.animateHuffPromo('vertical_promo',{to:26});}},eventPromo:function(type)
{var show_vert_promo=true;var eventTypes={};eventTypes.a="HuffPost Spotlight: Live Interview At 3:00 PM EST With <a href='http://www.huffingtonpost.com/2010/11/17/ok-go-video_n_777868.html' id='vertical_ch'>OK GO</a>.";eventTypes.b="HuffPost Spotlight: Live Interview At 4:00 PM EST With <a href='http://www.huffingtonpost.com/2010/11/17/perry-chen-kickstarter_n_777870.html' id='vertical_ch'>Perry Chen</a>.";if(show_vert_promo&&typeof(localStorage)!='undefined'&&localStorage['show-event-popup']!='0'&&typeof(eventTypes[type])!=='undefined')
{var tracker=HPTrack.Module('top promo','Top Promo');tracker.impression('event'+type);var dismiss=function()
{$('vertical_promo').style.display='none';localStorage['show-event-popup']=0;}
var container=document.createElement('div');container.id='vertical_promo';var label=document.createElement('span');label.innerHTML=eventTypes[type];container.appendChild(label);var close_button=document.createElement('a');close_button.href='#';close_button.id='close_button';close_button.onclick=dismiss;container.appendChild(close_button);document.body.insertBefore(container,document.body.firstChild);$('vertical_ch').onclick=function()
{tracker.click('event'+type);dismiss();return;}
HuffPromo.animateHuffPromo('vertical_promo',{to:26});}},adPromo:function()
{return false;},customPromo:function(type)
{if(typeof(type)==='undefined')return false;var show_vert_promo=true;var promoTypes={};promoTypes.Blackberry="Check out HuffPost's NEW BlackBerry app. Click <a href='http://appworld.blackberry.com/webstore/content/19143' id='vertical_ch' target='_blank'>here</a> to download.";promoTypes.Prediction="Polish off your crystal ball. Play HuffPost's <a href='http://www.huffingtonpost.com/predict-the-news/' id='vertical_ch' target='_blank'>Predict the News</a>.";promoTypes.Facebook="Breaking news sent directly to your News Feed. Get <a href='http://facebook.com/huffingtonpost' id='vertical_ch' target='_blank'>HuffPost on Facebook</a>.";promoTypes.Twitter="Real-time updates from the Internet Newspaper. Follow <a href='http://twitter.com/huffingtonpost' id='vertical_ch' target='_blank'>HuffPost on Twitter</a>.";promoTypes.facebook_twitter="The Internet Newspaper &mdash; at your doorstep. Follow HuffPost on <a href='http://facebook.com/huffingtonpost' id='vertical_chf' target='_blank'>Facebook</a> and <a href='http://twitter.com/huffingtonpost' id='vertical_cht' target='_blank'>Twitter</a>.";promoTypes.DailyBrief="<a href='http://www.huffingtonpost.com/huffingtonpost/new-daily-brief_b_811083.html' target='_blank'><img src='/images/chrome_extension/H_logo_2ox20.png' height='20' width='20' align='top' /> Sign Up for HuffPost's Newly Redesigned Daily Brief</a>";promoTypes.commercial=HuffPromo.adPromo();promoTypes.SiteModeA="<img src='/images/promo/huff_promo_icon.png' height='20' width='20' align='top' class='msPinSite' />&nbsp;&nbsp;Unlock the hidden powers of The Huffington Post with a click and a drag. <a href='javascript:void(0);' onclick='HuffPromo.siteModeModal();'>Learn more</a>";promoTypes.SiteModeB="<img src='/images/promo/huff_promo_icon.png' height='20' width='20' align='top' class='msPinSite' />&nbsp;&nbsp;Experience Huffington Post as a Pinned Site.  Drag the icon to your Windows Taskbar to pin.";promoTypes.SiteModeC="";var can_store=(typeof(localStorage)!='undefined')?true:false;if(can_store&&/SiteMode/.test(type))
{localStorage['show-custom-popup']=1;}
if(show_vert_promo&&can_store&&localStorage['show-custom-popup']!='0'&&promoTypes[type])
{var tracker=HPTrack.Module('top promo','Top Promo');tracker.impression(type.toLowerCase());var dismiss=function()
{$('custom_promo').style.display='none';localStorage['show-custom-popup']=0;}
var container=document.createElement('div');container.id='custom_promo';var label=document.createElement('span');if(/SiteMode/.test(type))
{localStorage.siteModePromoType=type;if(type=="SiteModeC")return;label.className='promo-sitemode';}
else
{label.className='promo-'+type.toLowerCase();}
label.innerHTML=promoTypes[type];container.appendChild(label);var close_button=document.createElement('a');close_button.href='#';close_button.id='close_button';close_button.onclick=dismiss;container.appendChild(close_button);document.body.insertBefore(container,document.body.firstChild);if('facebook_twitter'==type){$('vertical_chf').onclick=function(){tracker.click('Facebook via twitter/fb');dismiss();return;}
$('vertical_cht').onclick=function(){tracker.click('Twitter via twitter/fb');dismiss();return;}}else{var link=$('vertical_ch');if(link)
{link.onclick=function(){tracker.click(type);dismiss();return;}}}
HuffPromo.animateHuffPromo('custom_promo',{to:26});}},siteModeModal:function()
{HuffConnect.showLoader();HPUtil.addCSS("huff_promo_sitemode.css");HPUtil.loadAndRun(['/include/lib/modules/sitemode_promo.js'],function()
{HPTrack.Module('top promo').click('Show SiteMode Details');PromoSiteMode.LoadModal();return;});return;},NY:function()
{if(HuffPromo.adPromo())return;if(HPConfig.current_vertical_name!=='homepage')return false;var geoState=HuffCookies.get("geostate");if(geoState=='New+York'||geoState=='New+Jersey'||geoState=='Connecticut'){$('promo_ny').innerHTML='<a href="/new-york/"><img src="/images/promo/geolocal_promo_ny.jpg" alt="The Huffington Post: New York City" width="224" height="29" onload="HPUtil.show(\'promo_ny\');" /></a>';this.ny_promo=true;}},NewsGlide:function()
{if(navigator.userAgent.toLowerCase().indexOf('chrome')>-1&&typeof(localStorage)!='undefined'&&localStorage['show-newsglide-popup']!='0'&&!this.ny_promo&&$('promo_ny'))
{if(HPConfig.current_vertical_name=='homepage'){$('promo_ny').innerHTML='<a href="https://chrome.google.com/webstore/detail/khjialelnkjdomiblmnpcpjongleegef?hl=en-US" target="_blank"><img src="/images/promo/geolocal_promo_newsglide.png" width="282" height="28" alt="The Huffington Post -- NewsGlide" onload="HPUtil.show(\'promo_ny\');" /></a>';}else{$('promo_ny').innerHTML='<a href="http://www.huffingtonpost.com/NewsGlide/#'+HPConfig.current_vertical_id+'/'+HPConfig.current_vertical_name+'" target="_blank"><img src="/images/promo/geolocal_promo_newsglide.png" width="282" height="28" alt="The Huffington Post -- NewsGlide" onload="HPUtil.show(\'promo_ny\');" /></a>';}}else if(HPConfig.current_vertical_name!=='homepage'&&HPConfig.current_vertical_name!=='new-york'&&$('promo_ny')){$('promo_ny').innerHTML='<a href="/'+HPConfig.current_vertical_name+'/twitter/"><img src="http://s.huffpost.com/images/v/logos/twitter/promo.png" width="224" height="29" alt="The Huffington Post -- Twitter Edition" onload="HPUtil.show(\'promo_ny\');" /></a>';}},animateHuffPromo:function(id,params)
{if(!id)
return false;params=params||{};var _to=params.to||37;$(id).style.display='block';var a=new Y.util.Anim(id,{height:{to:_to}},1,Y.util.Easing.easeOut);a.animate();},rotation:function()
{if(typeof(skin_driver)!=='undefined')return false;if(HuffPromo.adPromo()!=false){HuffPromo.customPromo('commercial');return false;}
if(HuffPromo.is_on==false){return false;}
var types=['Chrome','Prediction','Facebook','Twitter','facebook_twitter','Blackberry','DailyBrief'];if((navigator.userAgent.indexOf('Trident/5.')>-1&&!window.SiteMode))
{var random_pick=Math.floor(Math.random()*3);var sitemode_option="C";if(random_pick==1)sitemode_option="A";else if(random_pick==2)sitemode_option="B";HuffPromo.customPromo('SiteMode'+sitemode_option);}
else if(navigator.userAgent.toLowerCase().indexOf('chrome')>-1)
{var types=['Chrome','Prediction','Facebook','Twitter','facebook_twitter','Blackberry','DailyBrief'];var type=types[Math.floor(Math.random()*types.length)];if(type==='Chrome'){HuffPromo.chromeExtensionPromo();}else{HuffPromo.customPromo(type);}}else{types.splice(0,1);HuffPromo.customPromo(types[Math.floor(Math.random()*types.length)]);}}};HuffPoUtil.onPageReady(function()
{if(location.hash&&location.hash.indexOf('sitemode')!=-1){HuffPromo.siteModeModal();}});
(function(jQuery){jQuery.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','color','outlineColor'],function(i,attr){jQuery.fx.step[attr]=function(fx){if(fx.state==0||fx.start.constructor!=Array||fx.end.constructor!=Array){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);}
fx.elem.style[attr]="rgb("+[Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2]),255),0)].join(",")+")";}});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)
return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))
return[parseInt(result[1]),parseInt(result[2]),parseInt(result[3])];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))
return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))
return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))
return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];return colors[jQuery.trim(color).toLowerCase()];}
function getColor(elem,attr){var color;do{color=jQuery.curCSS(elem,attr);if(color!=''&&color!='transparent'||jQuery.nodeName(elem,"body"))
break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};})(jQuery);
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();var FlashObject=swfobject;
var LazyLoad=function(){var E=document,D=null,A=[],C;function B(){if(C){return}var G=navigator.userAgent,F;C={gecko:0,ie:0,webkit:0};F=G.match(/AppleWebKit\/(\S*)/);if(F&&F[1]){C.webkit=parseFloat(F[1])}else{F=G.match(/MSIE\s([^;]*)/);if(F&&F[1]){C.ie=parseFloat(F[1])}else{if((/Gecko\/(\S*)/).test(G)){C.gecko=1;F=G.match(/rv:([^\s\)]*)/);if(F&&F[1]){C.gecko=parseFloat(F[1])}}}}}return{load:function(K,L,J,I){var H=E.getElementsByTagName("head")[0],G,F;if(K){K=K.constructor===Array?K:[K];for(G=0;G<K.length;++G){A.push({url:K[G],callback:G===K.length-1?L:null,obj:J,scope:I})}}if(D||!(D=A.shift())){return}B();F=E.createElement("script");F.src=D.url;if(C.ie){F.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){LazyLoad.requestComplete()}}}else{if(C.gecko||C.webkit>=420){F.onload=LazyLoad.requestComplete;F.onerror=LazyLoad.requestComplete}}H.appendChild(F);if(!C.ie&&!C.gecko&&!(C.webkit>=420)){F=E.createElement("script");F.appendChild(E.createTextNode("LazyLoad.requestComplete();"));H.appendChild(F)}},loadOnce:function(N,O,L,P,G){var H=[],I=E.getElementsByTagName("script"),M,J,K,F;N=N.constructor===Array?N:[N];for(M=0;M<N.length;++M){K=false;F=N[M];for(J=0;J<I.length;++J){if(F===I[J].src){K=true;break}}if(!K){H.push(F)}}if(H.length>0){LazyLoad.load(H,O,L,P)}else{if(G){if(L){if(P){O.call(L)}else{O.call(window,L)}}else{O.call()}}}},requestComplete:function(){if(D.callback){if(D.obj){if(D.scope){D.callback.call(D.obj)}else{D.callback.call(window,D.obj)}}else{D.callback.call()}}D=null;if(A.length){LazyLoad.load()}}}}();
HPFB={_redirect:'',enabled:true,session:false,authResponse:false,api_key:false,app_id:false,app_namespace:false,initialized:false,is_logged_in_on_huffpost:false,user_status:"unknown",user_just_login:false,callback_init:null,initialized_session:false,force_login:false,maybeFacebookConnected:function()
{var regex=/(fbcdn|facebook\.com)/;if(HPFB.authResponse||HuffCookies.getCookie('fb_uid'))
{return true;}
return false;},init:function(user_id)
{if(!user_id){el=document.getElementById('fConnect_img_container');if(el)el.style.display="block";}
if("undefined"!==typeof FB)
{HPFB.initUser();}
else
{window.fbAsyncInit=function()
{var params={appId:HPFB.app_id,cookies:false,xfbml:true,oauth:true};if(window.HPConfig&&HPConfig.current_web_address)
params.channelUrl='http://'+HPConfig.current_web_address+'/facebook/channel.html';if('undefined'!==typeof HPUtil&&HPUtil.getUrlVar('fb_no_channel')==="1")
{delete(params.channelUrl);}
FB.init(params);HPFB.initEvents();HPFB.initUser();};(function($){var lang=jQuery.I18N.getLocale()||'en_US';lang=(lang=='es_US')?'es_LA':lang;$('<script>',{type:'text/javascript',src:'//connect.facebook.net/'+lang+'/all.js',async:true}).appendTo('#fb-root');})(jQuery);}},initEvents:function()
{FB.Event.subscribe('auth.login',HPFB.handleStateChange);HPFB.Tracking.Subscribe(['Liked','Unliked','Recommended','Unrecommended'],[],false,HPFB.trackFBAction);HPFB.Tracking.Init();},trackFBAction:function(action,href,elem)
{var author_nickname=elem.getAttribute('author_nickname');if(author_nickname&&'Liked'==action)
{jQuery.ajax({url:'/users/favorite-bloggers/fan_action.php',data:'fan='+author_nickname+'&action=add',type:'POST',success:function(){},error:function(){}});}
var track_params={};if(elem.getAttribute('entry_id'))
{track_params.entity_type=2;track_params.entity_id=parseInt(elem.getAttribute('entry_id'));}
else if(elem.getAttribute('entity_type'))
{track_params.entity_type=parseInt(elem.getAttribute('entity_type'));track_params.entity_id=parseInt(elem.getAttribute('entity_id'));}
if(track_params.entity_type)
{if('Liked'==action||'Recommended'==action)
track_params.action=1;else if('Unliked'==action||'Unrecommended'==action)
track_params.action=2;else
return{};}
if(![0,1,2].inArray(track_params.entity_type))
return{};if(isNaN(track_params.entity_id)||(track_params.reference_id&&isNaN(track_params.reference_id)))
return{};if(![1,2].inArray(track_params.action))
return{};if(window.HPConfig&&HPConfig.inst_type=='dev')
return{};if(!HPFB.authResponse||"undefined"===typeof(HPFB.authResponse.userID))
return{};var func=function()
{var tracking_url_base='http://fb-stats.huffpost.com/';var fb_stats_project_image_src=tracking_url_base+"?"+HPFB.authResponse.userID+"&"
+Math.random().toString(16).replace('0.','')+'&'+escape(track_params.entity_type)+'&'
+escape(track_params.entity_id)+'&'+escape(track_params.action)+'&'
+(track_params.reference_id||0);my_img=document.createElement('img');my_img.setAttribute('src',fb_stats_project_image_src);my_img.setAttribute('style',"height:1px; line-height:1px; overflow:hidden");var snp_tracking=document.getElementById('_snp_tracking');snp_tracking&&snp_tracking.appendChild(my_img);var hp_track=elem.getAttribute('hp_track')||'Unknown';HPTrack.trackSocial('facebook',action,'['+HPTrack.Module.getTrackingPrefix(elem)+'] - '+hp_track);}
func();return{};},handleStateChange:function(response)
{HPFB.authResponse=response.authResponse;HPFB.user_status=response.status;if(typeof HuffZodiac1!=="undefined"&&document.getElementById('zodiac_container')&&'connected'==HPFB.user_status)
{HuffZodiac1.buildHtml();}},initUser:function(manual_login_response,params)
{this.initialized=true;var callback=function(response,is_manual_login)
{if(typeof(HPFB.mobileAuthFacebookCallback)!=="undefined"){HPFB.mobileAuthFacebookCallback(response.status);}
var HC=HuffCookies;if(typeof(SNProject)!=="undefined"){SNProject.fanCheck();}
HPFB.user_status=response.status;if(response.status=='notConnected'&&!HC.getUserName())
{HPFB.initialized_session=true;if(!window.IS_NEWSGLIDE&&!window.IS_CHROMEAPP&&!/twitter\.com/.test(document.referrer))
{HPUtil.addCSS("hp_modules/module.facebook_promo.css");HuffPoUtil.onAvailable('#facebook_promo',function(){$('fb_facepile').innerHTML='<fb:facepile max_rows="2" width="264px"/>';var trk=HPTrack.Module('fb_promo','Facebook Promo');trk.impression();jQuery('#facebook_promo_link').click(function(e){e.preventDefault();trk.click('Connect with Facebook');linkSocialAccount.checkLoginStatus('facebook');});});setTimeout(function(){HPFB.loadFacePilePromo();},1000);}}
else if(response.status=='connected')
{HPFB.authResponse=response.authResponse;if(typeof SNPModule!=="undefined"&&typeof Recommendations!=="undefined")
Recommendations.load({fb_session:HPFB.authResponse,status:HPFB.user_status});HuffCookies.setCookie('fb_uid',HPFB.authResponse.userID,86400*14);HuffCookies.setCookie('fb_access_token',HPFB.authResponse.accessToken);HPFB.initialized_session=true;if(typeof HuffConnect!=="undefined"&&!HC.getUserName()&&(is_manual_login||!HC.getCookie('autologin')))
{if(HPUtil.GetEntryID())
{HuffConnect.Login.onLoginSuccessCallback=function()
{var cb=HPFB.callback_init||function(){if(HPFB.user_just_login)
{if(window.IS_NEWSGLIDE){$(document).trigger('userlogedin');HuffConnect.hideModal();}else if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent('userlogedin');HuffConnect.hideModal();}else{location.href=location.href;}
return;}
if(-1===window.location.href.indexOf('just_reloaded'))
if(window.IS_NEWSGLIDE){$(document).trigger('userlogedin');HuffConnect.hideModal();}else if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent('userlogedin');HuffConnect.hideModal();}else{window.location.href=HPUtil.AddStringToQueryString(window.location.href,'just_reloaded=2');}};cb();if(HPFB.callback_init)
{HPFB.callback_init=null;}}}
else
{HuffConnect.Login.onLoginSuccessCallback=function()
{HPUtil.reinit();if(HPFB.callback_init)
{HPFB.callback_init();HPFB.callback_init=null;}}}
HPFB.authenticate(!!!is_manual_login,params);}
else if(HC.getUserName())
{HPFB.is_logged_in_on_huffpost=true;if(HPFB.callback_init)
{HPFB.callback_init();HPFB.callback_init=null;}}}
else
{HPFB.initialized_session=true;}
return;};if(manual_login_response)
{callback(manual_login_response,true);}
else
{FB.getLoginStatus(callback);}},loadFacePilePromo:function()
{var cn="hp_disable_fb_promo";var HC=HuffCookies;if(HC.getCookie(cn))
return;var tst='cookie_test';HC.setCookie(tst,'1');if(HC.getCookie(tst))
HC.destroyCookie(tst);else
return;if(-1!==location.href.indexOf('stylelist.com'))
return;var onshow=function()
{FB.XFBML.parse(document.getElementById('facebook_promo_lb_friends'));var trk=HPTrack.Module('fb_promo_lb','Facebook Promo Lightbox');trk.impression();jQuery('#facebook_promo_lb_connect,#facebook_promo_lb_mock').bind('click',function(){trk.click('Connect with Facebook');linkSocialAccount.checkLoginStatus('facebook');return;});};HuffConnect.socialModal({inner_html:'<div class="facebook_promo_lb">'+
'<div class="facebook_promo_lb_head facebook_promo_text">'+
_("Check out stories you might like,<br/>and see what your friends are sharing!")+
'</div>'+
'<div class="facebook_promo_lb_friends float_left" id="facebook_promo_lb_friends"><fb:facepile app_id="46744042133" width="264" style="display:block" max_rows="4"></fb:facepile></div>'+
'<div id="facebook_promo_lb_mock" class="facebook_promo_lb_sprite facebook_promo_lb_screens float_right cursor_pointer" title="'+_("Connect with Facebook")+'"></div>'+
'<div class="facebook_promo_lb_connect clear_first"><img class="cursor_pointer" id="facebook_promo_lb_connect" src="/images/facebook_promo_connect.png?3" /></div>'+
'</div>',modal_head_image:"",modal_subhead_image:"",onclose:function(){HC.setCookie(cn,1,(24*60));},onshow:onshow});return;}}
HPFB.overridden_permissions=false;HPFB.login=function(callback,needed_session,params,permissions,force_login)
{var func_params=params||{};permissions=permissions||false;force_login=force_login||false;if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
var ab_tests=new Array();ab_tests[0]={'attempt_key':'/t/a/facebook/perms-test/lots/attempt','success_key':'/t/a/facebook/perms-test/lots/success','permissions':'user_about_me,user_birthday,user_interests,user_likes,user_location,read_stream,email'};ab_tests[1]={'attempt_key':'/t/a/facebook/perms-test/some/attempt','success_key':'/t/a/facebook/perms-test/some/success','permissions':'user_birthday,user_location,email'};HPFB.ab_set=ab_tests[0];var fb_permissions=HPFB.ab_set.permissions;if(HPFB.overridden_permissions!==false)
{fb_permissions=HPFB.overridden_permissions;}
if('string'===typeof permissions&&permissions!=='')
{fb_permissions=fb_permissions+','+permissions;}
needed_session=undefined===needed_session?true:needed_session;HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;callback="function"==typeof callback?callback:undefined;var HCLogin=HuffConnect.Login;if(!HPFB.authResponse||HPFB.force_login||force_login)
{FB.login(function(response)
{if(callback)
{HPFB.callback_init=callback;HCLogin.registerCallback('after_facebook_login',callback,'facebook');}
var fb_init_callback=function(response)
{HPFB.initUser(response,func_params);FB.Event.unsubscribe('auth.authResponseChange',arguments.callee);}
if(response.authResponse)
{fb_init_callback(response);}
else if(response.status==='connected')
{FB.Event.subscribe('auth.authResponseChange',fb_init_callback);var params={appId:HPFB.app_id,cookies:false,status:true,xfbml:true,oauth:true};if(window.HPConfig&&HPConfig.current_web_address)
params.channelUrl='http://'+HPConfig.current_web_address+'/facebook/channel.html';if('undefined'!==typeof HPUtil&&HPUtil.getUrlVar('fb_no_channel')==="1")
{delete(params.channelUrl);}
FB.init(params);}},{scope:fb_permissions});}
else if(!HPFB.is_logged_in_on_huffpost&&needed_session)
{if(callback)
HCLogin.registerCallback('after_facebook_login',callback,'facebook');HPFB.authenticate(false,func_params);}
else if(callback&&needed_session)
{callback();}
else if(HPFB.user_just_login)
{if(window.IS_NEWSGLIDE){$(document).trigger('userlogedin');HuffConnect.hideModal();}else if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent('userlogedin');HuffConnect.hideModal();}else{location.href=location.href;}}else{linkSocialAccount.provider='facebook';linkSocialAccount.FacebookPromtLogin();}}
HPFB.authenticate=function(is_automatic_login,params)
{var func_params=params||{};var HCLogin=HuffConnect.Login;if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var QL=window.QuickLogin||false;if(!HPFB.authResponse)
return false;if(HPFB.is_logged_in_on_huffpost)
{HCLogin.callback('after_facebook_login');return false;}
if(QL&&is_automatic_login)
QL._auto_login=true;var autologin='';var args={};var post_string=HPFB.getSessionForServer();if(QL&&QL._auto_login)
{post_string+='&autologin=1';args.autologin=true;}
if(func_params&&func_params.fb_signup)
post_string+='&not_login_to_huff=1';if(QL)
delete(QL._auto_login);jQuery.ajax({type:"post",url:"/commentsv3/_facebookLogin.php",data:post_string,error:HCLogin.FacebookFail,success:function(response,request_object){var result=JSON.parse(response);switch(result.msg){case'success':case'new_user':HPFB.user_just_login=true;break;default:HPFB.user_just_login=false;break;}
if('function'===typeof(HPFB.onAuthenticateRequestSuccess))
{HPFB.onAuthenticateRequestSuccess(result,args);return;}
HCLogin.FacebookSuccess(result,args);}});};HPFB.getSessionForServer=function(return_type)
{if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
var authResponse=HPFB.authResponse;if(!authResponse)
return'';var prefix='fb_sig';var str='';var obj={};for(var key in authResponse)
{if(!(authResponse&&authResponse.hasOwnProperty(key)))
continue;var full_key=prefix+'_'+key;if(str&&return_type!="obj")
str+='&';if(key=='sig')
full_key=prefix;if(return_type!="obj")
str+=encodeURIComponent(full_key)+'='+encodeURIComponent(authResponse[key]);else if(return_type=="obj")
obj[full_key]=authResponse[key];}
if(return_type=="obj")return obj;else return str;}
HPFB.authenticate.setCallback=function()
{}
HPFB.showErrorLightbox=function()
{var c_name='hpfb_tmp_tech_issue',c=HuffCookies;if(!c.get(c_name)){c.set(c_name,1,24);HuffConnect.socialModal({inner_html:_("Sorry, This feature is temporarily disabled due to technical difficulties.  Please check back soon!"),inner_wrapper_class:'padding_10_0'});}}
HPFB.markFBDisabled=function()
{HPFB.ensureInit=HPFB.showErrorLightbox;if(typeof(FB)=='undefined')FB={};FB.ensureInit=HPFB.showErrorLightbox;HPFB.enabled=false;}
HPFB.ensureInit=function(callback,deprecated_param)
{if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var me=this;HPUtil.WaitForCondition.apply(this,[callback,10,function(){return me.initialized;}]);}
HPFB.ensureUserSessionStarted=function(callback)
{if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var me=this;HPUtil.WaitForCondition.apply(this,[callback,10,function(){return me.initialized_session;}]);}
HPFB.waitForSession=function(callback,params)
{var func_params=params||{};if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;if(HPFB.authResponse)
{callback();return;}
HPFB.login(callback,false,func_params);}
HPFB.getFBInfo=function(success_callback,failure_callback)
{if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
success_callback=success_callback||function(){};failure_callback=failure_callback||function(){};if(!HPFB.authResponse)
return false;var user_id=HPFB.authResponse.userID;var query=FB.Data.query('SELECT name, email, pic_square, pic_square_with_logo, uid FROM user WHERE uid = {0}',user_id);function make_callback(success_callback,failure_callback)
{function callback(o)
{if(o&&o[0])
success_callback(o);else
failure_callback(o);}
return callback;}
query.wait(make_callback(success_callback,failure_callback));};HPFB.chrome_fix={stage:0,top:false,handler:false,time_to_stop:false};HPFB.streamPublish=function(user_message,feed_data,action_links,target_id,user_message_prompt,callback,auto_publish,actor_id)
{if(!HPFB.enabled)
{HPFB.showErrorLightbox();return;}
HuffConnect.hideModal();if(feed_data&&feed_data.description&&feed_data.description.length>422)
{feed_data.description=feed_data.description.substr(0,420)+'...';}
if(user_message&&user_message.length>422)
{user_message=user_message.substr(0,420)+'...';}
if(feed_data&&feed_data.media&&feed_data.media[0]&&!feed_data.media[0].src)
{feed_data.media=[];}
HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var ui_params={method:'stream.publish',message:user_message,attachment:feed_data,action_links:action_links,target_id:target_id,user_message_prompt:user_message_prompt,actor_id:actor_id}
var bodyEl;if(jQuery.browser.safari)
bodyEl=jQuery("body");else
bodyEl=jQuery("html,body");var initial_y_position=bodyEl.scrollTop();var ui_callback=function(response)
{bodyEl.scrollTop(initial_y_position)
if(callback)
callback(response);if(response&&response.post_id&&console&&console.log){console.log(response.post_id)}};if(HPFB.authResponse)
{FB.ui(ui_params,ui_callback);return;}
else
{HPFB.login(function()
{FB.ui(ui_params,ui_callback);},false);}}
HPFacebookVoteV2={status:0,status_limit:0,vote_status:[],lock:false,init_done:false,init:function(entryId,entryTitle,entryBrief,permalink,entryImgSrc,inviteContent,bpage,vote_words){if(this.init_done===true){return;}
this.init_done=true;this.userLoggedIn=HuffCookies.getUserName();this.voteUpCalled=false;this.entryId=entryId;this.entryTitle=entryTitle;this.entryBrief=entryBrief;this.permalink=permalink;this.entryImgSrc=entryImgSrc;this.inviteContent=inviteContent;this.userDefaultComment='';if("undefined"!=typeof(bpage))
{this.bpage=bpage;}else{this.bpage='';}
if("undefined"!=typeof(vote_words))
{this.vote_status=vote_words;}
else
{this.vote_status=['Amazing','Inspiring','Funny','Scary','Hot','Crazy','Important','Weird'];}
this.status_limit=this.vote_status.length;if(HuffCookies.get('facebook_user_has_voted')&&null==HuffCookies.get('facebook_user_is_voting'))
{this.status=HuffCookies.get('facebook_user_has_voted');HuffCookies.del('facebook_user_has_voted');HuffPoUtil.onPageReady(HPFacebookVoteV2.postVote());return;}
if(this.userLoggedIn&&null!=HuffCookies.get('facebook_user_is_voting'))
{this.status=HuffCookies.get('facebook_user_is_voting');HuffCookies.del('facebook_user_is_voting');HPFacebookVoteV2.onFacebookVote();}},postVoteCallback:function(data){try{eval('oVoteData = '+data);}catch(err){return;}
if(oVoteData.error)
{HPError.e(oVoteData.error);return;}
if(oVoteData.total_votes){if("news"==HPFacebookVoteV2.bpage)
{if(jQuery('#link_vote_0').length>0)
{for(var i=0;i<HPFacebookVoteV2.status_limit;i++)
{if("undefined"!=typeof(oVoteData[i]))
{jQuery('#link_vote_'+oVoteData[i].status).html(HPFacebookVoteV2.vote_status[oVoteData[i].status]+"<br/>"+" ("+oVoteData[i].count+")");}else{jQuery('#link_vote_'+i).html(HPFacebookVoteV2.vote_status[i]);}}}
if(jQuery('#bottom_link_vote_0').length>0)
{for(i=0;i<HPFacebookVoteV2.status_limit;i++)
{if("undefined"!=typeof(oVoteData[i]))
{jQuery('#bottom_link_vote_'+oVoteData[i].status).html(HPFacebookVoteV2.vote_status[oVoteData[i].status]+"<br/>"+" ("+oVoteData[i].count+")");}else{jQuery('#bottom_link_vote_'+i).html(HPFacebookVoteV2.vote_status[i]);}}}}
}},postVote:function(update){var q='/include/vote.php?entry_id=';q+=this.entryId;q+='&vote_status='+this.status;q+=("undefined"!=typeof(update))?'&update=1':'';q+="&v=2";var cObj=jQuery.ajax({url:q,timeout:7000,success:HPFacebookVoteV2.postVoteCallback});},onFeedDialogClosed:function(response){if(response&&response.post_id)
{HuffCookies.set('facebook_user_has_voted',HPFacebookVoteV2.status);HuffCookies.del('facebook_user_is_voting');HPFacebookVoteV2.voteUpCalled=false;HPFacebookVoteV2.lock=false;}
else
{HPFacebookVoteV2.lock=false;if(HPFB.user_just_login)
location.href=location.href;}},onFacebookVote:function(){HuffCookies.del('snn_popup_needed');HuffCookies.del('facebook_user_is_voting');if(HPFacebookVoteV2.voteUpCalled)return;HPFacebookVoteV2.postVote(true);HPFB.ensureInit(function(){HPFB.waitForSession(function()
{if('connected'==HPFB.user_status)
{HPFacebookVoteV2.voteUpCalled=true;feedData={"name":HPFacebookVoteV2.entryTitle,"description":HPFacebookVoteV2.entryBrief,"href":HPFacebookVoteV2.permalink,"media":[{"type":"image","src":HPFacebookVoteV2.entryImgSrc,"href":HPFacebookVoteV2.permalink}]};HPFB.streamPublish(HPFacebookVoteV2.vote_status[HPFacebookVoteV2.status]+'... '+HPFacebookVoteV2.userDefaultComment,feedData,null,null,_('Your comment is here'),HPFacebookVoteV2.onFeedDialogClosed);}
else{alert(_("You're not connected to Facebook. Please try again."));FB.logout(function(){});}});})},onVote:function(vote_status){if(this.lock)return;this.lock=true;HPFacebookVoteV2.voteUpCalled=false;this.status=vote_status;if(this.status>this.status_limit)return;if(HPFB.authResponse)
{HuffCookies.set('facebook_user_is_voting',this.status);HPFB.ensureInit(function(){HPFB.waitForSession(function(){HPFacebookVoteV2.onFacebookVote();});});}
else if(this.userLoggedIn)
{HPFacebookVoteV2.postVote(true);this.lock=false;}
else
{var me=this;HPFB.ensureInit(function(){HPFB.waitForSession(function(){me.lock=false;HPFacebookVoteV2.onFacebookVote();});});}}}
HPFB.likeButton=function(el,url,type,fbXmlId,ignore_ie,hp_track){ignore_ie=(typeof ignore_ie==='undefined')?false:ignore_ie;if(HPBrowser.isIEOld()&&ignore_ie){jQuery(el).unbind("mouseover");return false;}
var add_params_str='';if('undefined'!=typeof hp_track)
add_params_str+=' hp_track="'+hp_track+'" ';var elem=jQuery("#"+fbXmlId);if(elem.length){if(elem.attr('author_nickname'))
add_params_str+=' author_nickname="'+elem.attr('author_nickname')+'" ';elem.html('<fb:like '+add_params_str+' width="180" href="'+url+'" action="'+type+'" layout="button_count" show_faces="false" colorscheme="light" locale="en_US"></fb:like>');FB.XFBML.parse(document.getElementById(fbXmlId),function(){jQuery("#"+fbXmlId).prev().addClass('visibility_hidden');});}
jQuery(el).unbind("mouseover");}
HPFB.likeButton_v2=function(el,type,ignore_ie){if(HPBrowser.isIEOld()&&ignore_ie){jQuery(el).attr('onmouseover',null);return false;}
type=type||'like';var real_el=jQuery(el).hasClass('i_v_fb_like')?el:jQuery(el).find('.i_v_fb_like')[0];if(!real_el)return;jQuery(el).get(0).onmouseover='';var fb_like_xml_cont=jQuery(el).find('.fb_like_xml')[0];jQuery(fb_like_xml_cont).html(HPFB.GetHtmlLikeWidget(JSON.parse(real_el.getAttribute('fblike_params')),type));FB.XFBML.parse(fb_like_xml_cont,function(){jQuery(fb_like_xml_cont).prev().addClass('visibility_hidden');});jQuery(real_el).addClass('i_v_with_count');jQuery(real_el).get(0).onmouseover='';}
HPFB.parseLikeButton=function(el){jQuery(el).addClass('fb-like').removeAttr('onmouseover').empty();FB.XFBML.parse(el.parentNode);};HPFB.blocked_follow_bignews=false;HPFB.bignews_timeout=null;HPFB.follow_bignews_page=function(evt)
{if(window.location.href.indexOf('huffingtonpost.com')==-1){return;}
var target=evt.target||evt.srcElement;var jtarget=jQuery(target);var position=jtarget.offset();var x=position.left+jtarget.width()/2;var y=position.top;var evt=evt||window.event;var event_type=evt.type.toLowerCase();if(-1===target.className.toLowerCase().indexOf('follow_bignews'))
return false;if('a'==target.nodeName.toLowerCase())
target=target.parentNode;if(target.getAttribute('floating_id'))
return false;var params=JSON.parse(target.getAttribute('hovercard_params'));if(false===params)
return false;HPFB.bignews_timeout=setTimeout(function(){target.setAttribute('on_hover','yes');FloatingPrompt.embed(target,'<div class="follow_bignwes_tooltip"><div class="fp_loader">'+_("Loading")+'...</div><div class="follow_bignews_corner"><div class="first"></div><div class="second"></div></div></div>',undefined,'top',{ignore_arrow:true,width:340,class_name:'clear-overlay',fp_intersects:1,base_coords:[x,y]});var popup=jQuery(FloatingPrompt.container);popup.css({left:x-popup.width()/2,top:y-popup.height()-10});jQuery.ajax({type:"post",url:'/big-news/follow.php?root_tag_id='+params.root_tag_id,success:function(data){var answer=JSON.parse(data);if(false===answer){HPFB.blocked_follow_bignews=false;return false;}
target.setAttribute('on_hover','yes');var fb_like_html='<div class="center">'+answer.fb_like_html+'</div>';var tw_like_html=answer.tw_like_html;var html='\
					<div class="follow_bignwes_tooltip">\
						<div class="margin_top_5 arial_13 bold" style="height:34px;">\
							'+_("Get updates about")+'\
							<span class="georgia_11 '+HPConfig.current_vertical_name+'_vertical_color" style="text-transform:capitalize;">'+params.tag_name+'</span>\
						</div>\
						<div class="clearfix margin_top_5">\
							<div class="float_left">'+tw_like_html+'</div>\
							<div class="float_left">'+fb_like_html+'</div>\
							<div class="clear"></div>\
						</div>\
						<div class="follow_bignews_corner">\
							<div class="first"></div>\
							<div class="second"></div>\
						</div>\
					</div>';this.container.innerHTML=html;this.container.style.top=y-popup.height()-10+'px';},error:function(){HPFB.blocked_follow_bignews=false;HPError.e();},timeout:10000,context:FloatingPrompt});},500);return false;}
HPFB.GetHtmlLikeWidget=function(params,type)
{return'<fb:like action="'+type.toLowerCase()+'" '+HPFB.__construct_params_for_widget(params).join(' ')+'></fb:'+type+'>';}
HPFB.follow_bignews_page_mouseout=function(evt)
{if(window.location.href.indexOf('huffingtonpost.com')==-1){return;}
evt=evt||window.event;var target=evt.target||evt.srcElement;var event_type=evt.type.toLowerCase();if(-1===target.className.toLowerCase().indexOf('follow_bignews'))
return false;if('a'==target.nodeName.toLowerCase())
target=target.parentNode;if(target.getAttribute('floating_id'))
return false;var params=JSON.parse(target.getAttribute('hovercard_params'));if(false===params)
return false;if(HPFB.bignews_timeout)
clearTimeout(HPFB.bignews_timeout);}
HPFB.__construct_params_for_widget=function(params)
{var _ret=[];for(var _tmp_key in params)
{if(params.hasOwnProperty(_tmp_key))
{_ret[_ret.length]=_tmp_key+'='+'"'+params[_tmp_key]+'"';}}
return _ret;}
HPFB.handleTwitterFollowClick=function(obj,root_tag_id)
{if(jQuery(obj).hasClass("tw-follow-btn"))
{jQuery(obj).removeClass("tw-follow-btn");jQuery(obj).addClass("tw-unfollow-btn");}
else
{jQuery(obj).removeClass("tw-unfollow-btn");jQuery(obj).addClass("tw-follow-btn");}}
HPFB.Tracking={};HPFB.Tracking._subscribers=new Array();HPFB.Tracking.Subscribe=function(fb_events,hptrack_codes,is_tracking,callback){if('string'!=typeof fb_events&&!jQuery.isArray(fb_events))
return false;if('string'!=typeof hptrack_codes&&!jQuery.isArray(hptrack_codes))
return false;if('boolean'!=typeof is_tracking)
return false;if('function'!=typeof callback)
return false;var params={};if('string'==typeof fb_events)
fb_events=[fb_events];for(var i=0;i<fb_events.length;i++){fb_events[i]=fb_events[i].toLowerCase();}
params['fb_events']=fb_events;if('string'==typeof hptrack_codes)
hptrack_codes=[hptrack_codes];for(var i=0;i<hptrack_codes.length;i++){hptrack_codes[i]=hptrack_codes[i].toLowerCase();}
params['hptrack_codes']=hptrack_codes;params['is_tracking']=is_tracking;params['callback']=callback;HPFB.Tracking._subscribers.push(params);return true;}
HPFB.Tracking.Init=function(){FB.Event.subscribe('edge.create',HPFB.Tracking._onEdgeCreate);FB.Event.subscribe('edge.remove',HPFB.Tracking._onEdgeRemove);}
HPFB.Tracking._onEdgeCreate=function(url,elem){HPFB.Tracking._processEvent('edge.create',url,elem)}
HPFB.Tracking._onEdgeRemove=function(url,elem){HPFB.Tracking._processEvent('edge.remove',url,elem)}
HPFB.Tracking._processEvent=function(event_type,href,elem){if('edge.create'==event_type&&('like'==elem.dom.getAttribute('action')||null===elem.dom.getAttribute('action')))
event_type='Liked';else if('edge.create'==event_type&&'recommend'==elem.dom.getAttribute('action'))
event_type='Recommended';else if('edge.remove'==event_type&&('like'==elem.dom.getAttribute('action')||null===elem.dom.getAttribute('action')))
event_type='Unliked';else if('edge.remove'==event_type&&'recommend'==elem.dom.getAttribute('action'))
event_type='Unrecommended';var tracked=false;var pathname='';if(null!==elem.dom.getAttribute('hp_track')){hptrack=elem.dom.getAttribute('hp_track');}else{hptrack='Unknown';}
pathname=decodeURIComponent(href);pathname=pathname.split("?")[0].split("/").slice(3).join("/");if(pathname.length>0)
pathname='/'+pathname;if('Unknown'==hptrack&&null!==elem.dom.getAttribute('entity_id')&&null!==elem.dom.getAttribute('author_nickname')&&1==elem.dom.getAttribute('entity_type')){hptrack='Author Info';}
for(var j=0;j<HPFB.Tracking._subscribers.length;j++){var opt=HPFB.Tracking._subscribers[j];var cb_result={};var track_params={};track_params.module=hptrack;track_params.action=event_type;track_params.label=HPTrack.Module.getTrackingPrefix(elem)+'Facebook';if('Unknown'==hptrack){track_params.label+=' v2 '+pathname;}
track_params.localy_tracked=false;if(!opt.is_tracking){opt.callback(event_type,href,elem);continue;}else if(opt.is_tracking&&!tracked){if
((0==opt.fb_events.length||opt.fb_events.inArray(event_type.toLowerCase()))&&(0==opt.hptrack_codes.length||(null!==hptrack&&opt.hptrack_codes.inArray(hptrack.toLowerCase()))))
{cb_result=opt.callback(event_type,href,elem);if('object'==typeof cb_result&&('undefined'!=typeof cb_result.module||'undefined'!=typeof track_params.localy_tracked)){for(var prop in cb_result){track_params[prop]=cb_result[prop];}
if('undefined'!=typeof track_params.localy_tracked&&true!==track_params.localy_tracked){HPTrack.trackEvent(track_params.module,track_params.action,track_params.label);HPTrack.trackSocial('facebook',track_params.action,'['+HPTrack.Module.getTrackingPrefix(elem)+'] - '+hptrack);if(huff.beta||location.search.indexOf('debug')>0)
console.log('Tracking: '+track_params.module+' | '+track_params.action+' | '+track_params.label);}else if(true!==track_params.localy_tracked){if(huff.beta||location.search.indexOf('debug')>0)
console.log('Localy tracked');}
tracked=true;elem.dom.setAttribute('hp_tracked',1);}}
continue;}}
if(!tracked){if('mostpop_entry'==track_params.module){var _classname='';if(elem&&elem.dom&&elem.dom.className)
_classname=' | '+elem.dom.className+' | ';track_params.label+=_classname+pathname;}
HPTrack.trackEvent(track_params.module,track_params.action,track_params.label);tracked=true;elem.dom.setAttribute('hp_tracked',1);if(huff.beta||location.search.indexOf('debug')>0)
console.log('Tracking: '+track_params.module+' | '+track_params.action+' | '+track_params.label);}};HPFB.saveTokens=function(onsuccess,onfailure)
{onsuccess=onsuccess||false;onfailure=onfailure||false;if('connected'==HPFB.user_status&&HPUser.is_logged_in())
{var url='/users/refresh_facebook_tokens.php';var fb_session=HPFB.getSessionForServer();var postdata=(fb_session?''+fb_session:'');jQuery.ajax({url:url,type:'POST',data:postdata,success:function(data,func,req)
{try{var response=JSON.parse(data);}
catch(e){var response={status:'failure',msg:'Some error occured'};}
if(/success/.test(response.status)){if('function'==typeof(onsuccess)){onsuccess();}}
else{if('function'==typeof(onfailure)){onfailure();}}
return;},error:function()
{HPError.e();return;}});}};HPFB.removeSocialReading=function()
{HPFB.ensureInit(function()
{FB.getLoginStatus(function(r1)
{if(r1&&'connected'==r1.status)
{FB.api('/me/permissions',function(r2)
{if(r2&&r2.data[0]&&r2.data[0].publish_actions&&r2.data[0].publish_actions==1)
{jQuery("#readedge_removal").show();jQuery("#re_removal_big").click(function(){jQuery("#re_removal_buttons").show();});jQuery("#re_removal_revert").click(function(){jQuery("#re_removal_buttons").hide();});jQuery("#re_removal_confirm").click(function()
{jQuery("#re_removal_buttons").html("Removing reads...");var postdata=HPFB.getSessionForServer("obj");jQuery.ajax({url:'/users/read_edge/v2/remove_social_reading.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{if(/success/.test(data.status))
{if(data.action_ids&&data.action_ids.length)
{var total_actions=data.action_ids.length;for(var i=0;i<total_actions;i++)
{FB.api('/'+data.action_ids[i],'delete',function(resp)
{});}}
FB.api({method:'auth.revokeExtendedPermission',perm:'publish_actions'},function(response)
{if(response===true)
{jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Social reading experience has been removed.</div>');setTimeout(function(){jQuery("#readedge_removal").fadeOut();},5000);}});}
else
{jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Some error occurred.</div>');}},error:function()
{jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Some error occurred.</div>');HPUtil.error();}});});}});}});});};HPFB.facebookAppCenterCallback=function()
{var facebook_user_connected=false;var publish_actions_granted=false;var fb_user_data={};var showInfoModal=function()
{if(document.loading_info_modal){return;}
document.loading_info_modal=true;var getimgdir=function()
{var imgdir='';switch(HPConfig.site)
{case'france':imgdir='/images/facebook/fr/';break;default:imgdir='/images/facebook/';break;}
return imgdir;};var getslideshtml=function()
{var html='';html+='<div id="readedge_modal">';html+='	<div class="center readedge_slides" id="slideshow_div">';html+='		<div id="readedge_slide1" class="readedge_slide"> <h2>'+_('Welcome')+" "+fb_user_data.first_name+", "+_('See what your friends are reading')+'</h2><img src="'+getimgdir()+'facebook_readedge1.jpg" alt="'+_('See what your friends are reading')+'" /> </div>';html+='		<div id="readedge_slide2" class="hidden readedge_slide"> <h2>'+_('Share only the stories you want')+'</h2><img src="'+getimgdir()+'facebook_readedge2.jpg" alt="'+_('Share only the stories you want')+'" /> </div>';html+='		<div id="readedge_slide3" class="hidden readedge_slide"> <h2>'+_('Full control over what you share')+'</h2><img src="'+getimgdir()+'facebook_readedge3.jpg" alt="'+_('Full control over what you share')+'" /> </div> ';html+='		<div id="readedge_slide4" class="hidden readedge_slide"> <h2>'+_('Access your reading history on Facebook timeline')+'</h2><img src="'+getimgdir()+'facebook_readedge4.jpg" alt="'+_('Access your reading history on Facebook timeline')+'" /> </div> ';html+='	</div>';html+='	<div class="readedge_bg readedge_left_arr"></div>';html+='	<div class="readedge_bg readedge_right_arr"></div>';html+='	<div class="readedge_paging" style="text-align:center"></div>';html+='	<ul class="re-fb-modal-actions">';html+='		<li id="re-start-share" style="height:12px;"><a href="javascript:void(0);" id="re-fb-button"><img src="https://graph.facebook.com/'+fb_user_data.id+'/picture" style="position:absolute; top:0; left:-10px; height:28px;" />'+_('Start Sharing')+' </a></li>';html+='		<li><a id="re-modal-faq" href="/faq/#socialnews" target="_blank">'+_('Learn More')+'</a></li>'
html+='	</ul>';html+='	<div class="clear"></div>';html+='</div>';return html;};var on_slides_modal_ready=function()
{if(document.loading_info_modal_plugin){return;}
document.loading_info_modal_plugin=true;jQuery.getScript('/include/lib/jquery/jquery.cycles.all.min.js',function()
{jQuery('div.readedge_slides').cycle({fx:'scrollHorz',pager:'.readedge_paging',next:'.readedge_right_arr',prev:'.readedge_left_arr',width:635,speed:250,cleartype:1});jQuery('div.readedge_slides').cycle('pause');jQuery('#re-fb-button').bind('click',function(){huff.use('modal',function(modal){modal.hide();});});return;});return;};onmodalshow=function()
{on_slides_modal_ready();};onmodalclose=function()
{delete(document.loading_info_modal);delete(document.loading_info_modal_plugin);if(document.loading_info_modal2)
{delete(document.loading_info_modal2);}};huff.use('connect/modal','modal',function(connect_modal,modal)
{connect_modal.init(function()
{if(document.loading_info_modal2){return;}
document.loading_info_modal2=true;modal.show({theme:'connect_modal',width:750,position:'fixed',onshow:onmodalshow,onclose:onmodalclose,content:getslideshtml()});});});return;};jQuery(document).ready(function()
{if('undefined'!==typeof HPUtil&&'appcenter'===HPUtil.getUrlVar('fb_source'))
{HPFB.ensureInit(function()
{FB.getLoginStatus(function(resp)
{resp=resp||{};if('connected'===resp.status)
{facebook_user_connected=true;FB.api('/me',function(response)
{fb_user_data=response;FB.api('/me/permissions',function(resp1)
{resp1=resp1||{};var publish_actions=resp1.data[0].publish_actions||0;if(1===publish_actions)
{publish_actions_granted=true;showInfoModal();}});});}});});}});return;};HPFB.facebookAppCenterCallback();
var ReadEdgeLite={_config:{user:{},entry:{},meta:{}},_events:{'re.loading':'','re.notConnected':'','re.publishActionsNotGranted':'','re.Error':'','re.Ready':'','re.firstRun':'','re.selectShareAll':'','re.selectShareAllButNsfw':'','re.selectShareNothing':'','re.sharingRead':'','re.notSharingRead':'','re.alreadyShared':'','re.sharePending':'','re.shareSuccess':'','re.shareFailed':'','re.deletePending':'','re.deleteSuccess':'','re.deleteFailed':''},init:function()
{var _this=this;_this.fire('re.loading');_this._initFacebook(function()
{_this._initHuffPost();});},_initFacebook:function(callback)
{var _this=this;callback=callback||false;HPFB.ensureInit(function(){FB.getLoginStatus(function(resp1)
{if('connected'===resp1.status)
{FB.api('/me/permissions',function(resp2)
{if(resp2.data&&resp2.data[0])
{for(var perm_name in resp2.data[0])
{_this._config.user[perm_name]=resp2.data[0][perm_name];}
if(resp2.data[0].publish_actions==1)
{if('function'==typeof(callback))
{callback();}}
else
{_this.fire('re.publishActionsNotGranted');}}
else
{_this.fire('re.Error');}});}
else
{_this.fire('re.notConnected');}});});},_initHuffPost:function()
{var _this=this;var postdata=HPFB.getSessionForServer("obj");if(HPUtil.GetEntryID())
{postdata.entry_id=HPUtil.GetEntryID();}
jQuery.ajax({url:'/users/read_edge/v2/readedge_config.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{if(/success/.test(data.status))
{if(data.user)
{_this._config.user=data.user;if(_this._config.user.first_run)
{_this.fire('re.firstRun');}
if(_this._config.user.share_settings==1)
{_this.fire('re.selectShareAll');}
else if(_this._config.user.share_settings==2)
{_this.fire('re.selectShareAllButNsfw');}
else if(_this._config.user.share_settings==0)
{_this.fire('re.selectShareNothing');}
if(_this._config.user.share_settings==1||_this._config.user.share_settings==2)
{_this.fire('re.sharingRead');}
else
{_this.fire('re.notSharingRead');}}
if(data.entry)
{_this._config.entry=data.entry;if(_this._config.entry.is_nsfw&&_this._config.user.share_settings==2)
{_this.fire('re.notSharingRead');}
if(_this._config.entry.user_entry_state=='enabled')
{if(_this._config.entry.published_id)
{_this.fire('re.alreadyShared');}
else
{_this.fire('re.notSharingRead');}}}
if(data.meta)
{_this._config.meta=data.meta;}
_this.fire('re.Ready');}
else
{_this.trace("An error occurred while setting the ReadEdge config");_this.fire('re.Error');}
return;},error:function()
{_this.trace("Ajax error");_this.fire('re.Error');}});},updateUserConfig:function(name,value,callback)
{var _this=this;var postdata=HPFB.getSessionForServer("obj");postdata[name]=value;jQuery.ajax({url:'/users/read_edge/v2/update_prefs.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{if(/success/.test(data.status))
{var conf=data.user;for(var key in conf)
{_this._config.user[key]=conf[key];}
if('function'==typeof callback)
{callback();}
return;}},error:function()
{_this.trace("Ajax error");}});},getUserConfig:function(key)
{var _this=this;return _this._config.user[key];},getEntryConfig:function(key)
{var _this=this;return _this._config.entry[key];},getMetaConfig:function(key)
{var _this=this;return _this._config.meta[key];},share:function(object_id,object,action,override)
{var _this=this;if(object_id)
{var postdata=HPFB.getSessionForServer("obj");postdata['object_id']=object_id;postdata['object']=object||'article';postdata['action']=action||'reads';postdata['override']=override||0;_this.fire('re.sharePending');jQuery.ajax({url:'/users/read_edge/v2/share.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{if(/success/.test(data.status))
{var conf=data.entry;for(var key in conf)
{_this._config.entry[key]=conf[key];}
_this.fire('re.shareSuccess');return;}
_this.fire('re.shareFailed');},error:function()
{_this.trace("Ajax error");_this.fire('re.shareFailed');}});return;}},deleteShare:function(action_id,object_id)
{var _this=this;var postdata=HPFB.getSessionForServer("obj");postdata['action_id']=action_id||0;postdata['object_id']=object_id;_this.fire('re.deletePending');jQuery.ajax({url:'/users/read_edge/v2/delete.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{if(/success/.test(data.status))
{var conf=data.entry;for(var key in conf)
{_this._config.entry[key]=conf[key];}
_this.fire('re.deleteSuccess');return;}
_this.fire('re.deleteFailed');},error:function()
{_this.trace("Ajax error");_this.fire('re.deleteFailed');}});return;},subscribe:function(event_name,event_function)
{this._events[event_name]=event_function;},fire:function(event_name)
{if('function'===typeof(this._events[event_name]))
{this._events[event_name]();}},reset:function()
{for(var event_name in this._events)
{this._events[event_name]='';}
return;},trace:function(msg)
{if((HPConfig.inst_type==='dev'||/debug/.test(window.location.href))&&window.console&&'function'==typeof(window.console.log))
{window.console.log("ReadEdgeLite: "+msg);}}};
var ReadEdgeView={elements:{},init:function()
{var _this=this;_this.initElements();_this.subscribeReadEdgeEvents();ReadEdgeLite.init();return;},initElements:function()
{var _this=this;_this.elements.read_edge=jQuery("#read-edge");_this.elements.re_error=jQuery("#read-edge-error");_this.elements.re_loader=jQuery("#read-edge-loader");_this.elements.re_enabled=jQuery("#read-edge-enabled");_this.elements.re_disabled=jQuery("#read-edge-disabled");_this.elements.re_expand_ctrl=jQuery("#re-expand-control");_this.elements.re_expand_ctrl_link=jQuery("#re-expand-control-link");_this.elements.re_friends_hldr=jQuery("#re-friends");_this.elements.re_ctrls=jQuery("#re-controls");_this.elements.re_status_hldr=jQuery("#re-status-container");_this.elements.re_share_indicator=jQuery("#re-share-status");_this.elements.re_share_tooltip=jQuery("#re-status-tooltip");_this.elements.re_share_tooltip_text=jQuery("#re-status-tooltip-text");_this.elements.re_share_override=jQuery("#re-share-override");_this.elements.re_share_override_button=jQuery("#share-override-button");_this.elements.re_settings_tab=jQuery("#re-settings-tab");_this.elements.re_settings_button=jQuery('#re-settings-button');_this.elements.re_settings_hldr=jQuery("#re-settings");_this.elements.re_share_set_all=jQuery("#re-share-setting-all");_this.elements.re_share_set_all_but_nsfw=jQuery("#re-share-setting-all-but-nsfw");_this.elements.re_share_set_nothing=jQuery("#re-share-setting-nothing");_this.elements.re_share_history_link=jQuery("#re-share-history");_this.elements.re_share_learn_more_link=jQuery("#re-learn-more");_this.elements.re_enable_share_button=jQuery("#re-enable-share");_this.elements.re_info_button=jQuery("#re-info-tab");_this.elements.re_expand_ctrl.hide();return;},subscribeReadEdgeEvents:function()
{var _this=this;ReadEdgeLite.subscribe('re.Error',function()
{_this.elements.re_error.show();_this.elements.re_disabled.hide();_this.elements.re_enabled.hide();_this.elements.re_loader.hide();});ReadEdgeLite.subscribe('re.notConnected',function()
{_this.elements.re_loader.hide();_this.elements.re_disabled.show();_this.elements.re_enable_share_button
.unbind('click')
.bind({click:function()
{_this.clickFacebookButton();}});_this.elements.re_info_button
.unbind('click')
.bind({click:function()
{_this.showInfoModals();}});});ReadEdgeLite.subscribe('re.publishActionsNotGranted',function()
{_this.elements.re_loader.hide();_this.elements.re_disabled.show();_this.elements.re_enable_share_button
.unbind('click')
.bind({click:function()
{_this.clickFacebookButton();}});_this.elements.re_info_button
.unbind('click')
.bind({click:function()
{_this.showInfoModals();}});});ReadEdgeLite.subscribe('re.firstRun',function()
{_this.showInfoModals();});ReadEdgeLite.subscribe('re.selectShareAll',function()
{_this.elements.re_share_set_all.parent().addClass('re-selected');});ReadEdgeLite.subscribe('re.selectShareAllButNsfw',function()
{_this.elements.re_share_set_all_but_nsfw.parent().addClass('re-selected');});ReadEdgeLite.subscribe('re.selectShareNothing',function()
{_this.elements.re_share_set_nothing.parent().addClass('re-selected');});ReadEdgeLite.subscribe('re.sharingRead',function()
{_this.elements.re_share_override_button.html(_('Sharing with friends'));_this.elements.re_share_indicator.removeClass().addClass('re-pending');_this.elements.re_share_tooltip_text.html(_('Click to stop this share'));});ReadEdgeLite.subscribe('re.notSharingRead',function()
{_this.elements.re_share_override_button.html(_('Not shared with friends'));_this.elements.re_share_indicator.removeClass().addClass('re-disabled');_this.elements.re_share_tooltip_text.html(_('Click to share this read'));});ReadEdgeLite.subscribe('re.alreadyShared',function()
{_this.elements.re_share_override_button.html(_('Shared with friends'));_this.elements.re_share_indicator.removeClass().addClass('re-enabled');_this.elements.re_share_tooltip_text.html(_('Click to remove this share'));});ReadEdgeLite.subscribe('re.sharePending',function()
{_this.elements.re_share_indicator.removeClass().addClass('re-pending');_this.elements.re_share_tooltip_text.html(_('This read will be shared momentarily'));});ReadEdgeLite.subscribe('re.shareSuccess',function()
{_this.elements.re_share_indicator.removeClass().addClass('re-enabled');_this.elements.re_share_tooltip_text.html(_('Click to remove this share'));_this.elements.re_share_override_button.html(_('Shared with friends'));});ReadEdgeLite.subscribe('re.shareFailed',function()
{_this.elements.re_share_indicator.removeClass().addClass('re-disabled');_this.elements.re_share_tooltip_text.html(_('Click to share this read'));_this.elements.re_share_override_button.html(_('Not shared with friends'));});ReadEdgeLite.subscribe('re.deletePending',function()
{_this.elements.re_share_indicator.removeClass().addClass('re-pending');_this.elements.re_share_tooltip_text.html(_('Please wait...'));});ReadEdgeLite.subscribe('re.deleteSuccess',function()
{_this.elements.re_share_indicator.removeClass().addClass('re-disabled');_this.elements.re_share_tooltip_text.html(_('Click to share this read'));_this.elements.re_share_override_button.html(_('Not shared with friends'));ReadEdgeView.Triggers.setOnTriggersReadyCallback(function(){return;});});ReadEdgeLite.subscribe('re.deleteFailed',function()
{_this.elements.re_share_indicator.removeClass().addClass('re-enabled');_this.elements.re_share_tooltip_text.html(_('Click to remove this share'));_this.elements.re_share_override_button.html(_('Shared with friends'));});ReadEdgeLite.subscribe('re.Ready',function()
{_this.elements.re_loader.hide();_this.elements.re_disabled.hide();_this.elements.re_enabled.show();_this.attachEvents();_this.elements.re_share_history_link.attr('href','http://www.facebook.com/profile.php?id='+ReadEdgeLite.getUserConfig('facebook_id')+'&sk=news');_this.elements.re_share_learn_more_link.attr('href',ReadEdgeLite.getMetaConfig('faq_link'));_this.autoShareTrigger();ReadEdgeView.Facepile.load();});return;},attachEvents:function()
{var _this=this;_this.elements.re_expand_ctrl
.unbind('click')
.bind({click:function()
{_this.toggleBar();}});_this.elements.re_share_override_button
.unbind('click')
.unbind('mouseover')
.unbind('mouseout')
.bind({mouseover:function()
{if(document.re_timer1){clearTimeout(document.re_timer1);}
document.re_timer1=setTimeout(function(){_this.elements.re_share_tooltip.show();},600);},mouseout:function()
{if(document.re_timer1){clearTimeout(document.re_timer1);}
document.re_timer1=setTimeout(function(){_this.elements.re_share_tooltip.hide();},400);},click:function()
{_this.overrideClicked();}});_this.elements.re_settings_button
.unbind('click')
.unbind('mouseout')
.bind({click:function(){_this.elements.re_settings_hldr.toggleClass('re-closed');ReadEdgeView.Facepile.toggleVideoContent(!_this.elements.re_settings_hldr.hasClass('re-closed'));},mouseout:function(){if(document.re_timer2){clearTimeout(document.re_timer2);}
document.re_timer2=setTimeout(function(){ReadEdgeView.Facepile.toggleVideoContent(false);_this.elements.re_settings_hldr.addClass('re-closed');},400);}});_this.elements.re_settings_hldr
.unbind('mouseover')
.unbind('mouseout')
.bind({mouseover:function()
{if(document.re_timer2){clearTimeout(document.re_timer2);}
_this.elements.re_settings_hldr.removeClass('re-closed');},mouseout:function()
{if(document.re_timer2){clearTimeout(document.re_timer2);}
document.re_timer2=setTimeout(function(){_this.elements.re_settings_hldr.addClass('re-closed');ReadEdgeView.Facepile.toggleVideoContent(false);},900);}});_this.elements.re_share_set_all
.unbind('click')
.bind('click',function(){_this.setReadShareSetting(1,_this.elements.re_share_set_all);});_this.elements.re_share_set_all_but_nsfw
.unbind('click')
.bind('click',function(){_this.setReadShareSetting(2,_this.elements.re_share_set_all_but_nsfw);});_this.elements.re_share_set_nothing
.unbind('click')
.bind('click',function(){_this.setReadShareSetting(0,_this.elements.re_share_set_nothing);});return;},autoShareTrigger:function()
{var _this=this;if('enabled'==ReadEdgeLite.getEntryConfig('user_entry_state')){ReadEdgeView.Triggers.start();return;}
if(0==ReadEdgeLite.getEntryConfig('share_settings')){ReadEdgeView.Triggers.start();return;}
if(2==ReadEdgeLite.getEntryConfig('share_settings')&&ReadEdgeLite.getEntryConfig('is_nsfw')){ReadEdgeView.Triggers.start();return;}
ReadEdgeView.Triggers.start(function(){ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads');});return;},clickFacebookButton:function()
{if(HuffCookies.getUserId())
{HPFB.login
(function()
{linkSocialAccount.checkLoginStatus
('facebook',{onLinkSuccess:function()
{ReadEdgeLite.init();},onLinkFailed:function()
{ReadEdgeLite.init();}},{reauth:true,disable_connect:true,callback:function(provider,user_type)
{if(/new_user/.test(user_type)||/existed_user/.test(user_type))
{linkSocialAccount.linkOptions.reauth=false;linkSocialAccount.PromptForConnectPop();}
else if(/current_user/.test(user_type))
{ReadEdgeLite.init();}}});return;},true,{},'publish_actions',true);}
else
{linkSocialAccount.checkLoginStatus
('facebook',{},false,function()
{HPFB.force_login=true;HPFB.overridden_permissions='user_about_me,user_birthday,user_interests,user_likes,user_location,read_stream,email,publish_actions';HPFB.onAuthenticateRequestSuccess=function(result,args)
{huff.use('modal',function(m)
{m.hide();if('new_user'===result.msg)
{ReadEdgeLite.init();}
else
{HuffConnect.Login.FacebookSuccess(result,args);}});}});}
return;},overrideClicked:function()
{var _this=this;var html=_this.elements.re_share_tooltip_text.html();if(_('Click to stop this share')==html||_('Click to remove this share')==html)
{var published_id=ReadEdgeLite.getEntryConfig('published_id')||0;ReadEdgeLite.deleteShare(published_id,HPUtil.GetEntryID());}
else if(_('Click to share this read')==html)
{ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads',1);}},setReadShareSetting:function(value,el)
{var _this=this;if(el.parent().hasClass('re-selected')){return;}
ReadEdgeLite.updateUserConfig('share_settings',value,function()
{_this.elements.re_share_set_all.parent().removeClass('re-selected');_this.elements.re_share_set_all_but_nsfw.parent().removeClass('re-selected');_this.elements.re_share_set_nothing.parent().removeClass('re-selected');el.parent().addClass('re-selected');_this.postShareSetting(value);});return;},postShareSetting:function(value)
{var share_all=(value===1);var share_all_but_nsfw=(value===2);var share_nothing=(value===0);var user_to_entry=ReadEdgeLite.getEntryConfig('user_entry_state');var user_to_entry_enabled=('enabled'===user_to_entry);var user_to_entry_disabled=('disabled'===user_to_entry);var published_id=0;var is_published=false;var triggers_enabled=ReadEdgeView.Triggers.areTriggersReady();var entry_is_nsfw=ReadEdgeLite.getEntryConfig('is_nsfw');if(user_to_entry_enabled)
{published_id=ReadEdgeLite.getEntryConfig('published_id');is_published=(published_id!==0);}
if(share_all)
{if(user_to_entry_enabled)
{return;if(!is_published)
{if(triggers_enabled)
{ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads',1);}
else if(!triggers_enabled)
{ReadEdgeLite.fire('re.sharingRead');ReadEdgeView.Triggers.start(function(){ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads');});}}}
else if(user_to_entry_disabled)
{if(triggers_enabled)
{ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads',1);}
else
{ReadEdgeLite.fire('re.sharingRead');ReadEdgeView.Triggers.start(function(){ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads');});}}}
else if(share_all_but_nsfw)
{if(user_to_entry_enabled)
{if(is_published)
{if(entry_is_nsfw)
{ReadEdgeLite.deleteShare(published_id,HPUtil.GetEntryID());}}}
else if(user_to_entry_disabled)
{if(entry_is_nsfw)
{ReadEdgeLite.fire('re.notSharingRead');ReadEdgeView.Triggers.setOnTriggersReadyCallback(function(){return;});}
else if(!entry_is_nsfw)
{if(triggers_enabled)
{ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads',1);}
else if(!triggers_enabled)
{ReadEdgeLite.fire('re.sharingRead');ReadEdgeView.Triggers.start(function(){ReadEdgeLite.share(HPUtil.GetEntryID(),'article','reads');});}}}}
else if(share_nothing)
{if(user_to_entry_enabled)
{if(is_published)
{ReadEdgeLite.deleteShare(published_id,HPUtil.GetEntryID());}}
else if(user_to_entry_disabled)
{ReadEdgeLite.fire('re.notSharingRead');ReadEdgeView.Triggers.setOnTriggersReadyCallback(function(){return;});}}
return;},setOGFirstRun:function(val)
{if(ReadEdgeLite.getUserConfig('first_run')==1){ReadEdgeLite.updateUserConfig('first_run',val);}
return;},toggleBar:function()
{var _this=this;_this.elements.read_edge.toggleClass('re-expanded');ReadEdgeView.Facepile.toggle();},showInfoModals:function()
{var _this=this;if(document.loading_info_modal){return;}
document.loading_info_modal=true;var getimgdir=function()
{var imgdir='';switch(HPConfig.site){case'france':imgdir='/images/facebook/fr/';break;default:imgdir='/images/facebook/';}
return imgdir;}
var getslideshtml=function()
{var html='';html+='<div id="readedge_modal">';html+='	<div class="center readedge_slides" id="slideshow_div">';html+='		<div id="readedge_slide1" class="readedge_slide"> <h2>'+_('See what your friends are reading')+'</h2><img src="'+getimgdir()+'facebook_readedge1.jpg" alt="'+_('See what your friends are reading')+'" /> </div>';html+='		<div id="readedge_slide2" class="hidden readedge_slide"> <h2>'+_('Share only the stories you want')+'</h2><img src="'+getimgdir()+'facebook_readedge2.jpg" alt="'+_('Share only the stories you want')+'" /> </div>';html+='		<div id="readedge_slide3" class="hidden readedge_slide"> <h2>'+_('Full control over what you share')+'</h2><img src="'+getimgdir()+'facebook_readedge3.jpg" alt="'+_('Full control over what you share')+'" /> </div> ';html+='		<div id="readedge_slide4" class="hidden readedge_slide"> <h2>'+_('Access your reading history on Facebook timeline')+'</h2><img src="'+getimgdir()+'facebook_readedge4.jpg" alt="'+_('Access your reading history on Facebook timeline')+'" /> </div> ';html+='	</div>';html+='	<div class="readedge_bg readedge_left_arr"></div>';html+='	<div class="readedge_bg readedge_right_arr"></div>';html+='	<div class="readedge_paging" style="text-align:center"></div>';html+='	<ul class="re-fb-modal-actions">';html+='		<li id="re-start-share"><a href="javascript:void(0);" id="re-fb-button"><span class="re-fb-icon"></span>'+_('Start Sharing')+' </a></li>';html+='		<li><a id="re-modal-faq" href="javascript:void(0);" target="_blank">'+_('Learn More')+'</a></li>'
html+='	</ul>';html+='	<div class="clear"></div>';html+='</div>';return html;};var on_slides_modal_ready=function()
{jQuery.getScript('/include/lib/jquery/jquery.cycles.all.min.js',function()
{jQuery('div.readedge_slides').cycle({fx:'scrollHorz',pager:'.readedge_paging',next:'.readedge_right_arr',prev:'.readedge_left_arr',width:635,speed:250,cleartype:1});jQuery('div.readedge_slides').cycle('pause');if(ReadEdgeLite.getUserConfig('facebook_id')&&ReadEdgeLite.getUserConfig('publish_actions'))
{jQuery("#re-start-share").hide();jQuery("#re-modal-faq").attr('href',ReadEdgeLite.getMetaConfig('faq_link'));}
else
{jQuery("#re-fb-button").bind('click',function(){_this.clickFacebookButton();});jQuery("#re-modal-faq").hide();}
return;});return;};onmodalshow=function(){on_slides_modal_ready();};onmodalclose=function(){delete(document.loading_info_modal);_this.setOGFirstRun(0);};huff.use('connect/modal',function(connect_modal)
{connect_modal.init(function()
{huff.use('modal',function(modal){modal.show({theme:'connect_modal',width:750,position:'fixed',onshow:onmodalshow,onclose:onmodalclose,content:getslideshtml()});});});});return;}};ReadEdgeView.Triggers={_triggers:{timer:{threshold:10000,triggered:false},scroll:{threshold:0.33,triggered:false}},_onTriggersReady:false,_initTimerTrigger:function()
{var _this=this;if(_this._triggers.timer.triggered){return;}
setTimeout(function()
{_this._triggers.timer.triggered=true;_this._checkTriggers();},_this._triggers.timer.threshold);},_initScrollTrigger:function()
{var _this=this;var el=jQuery('.entry_right');var diff=0;if(!el.length)
{el=jQuery('#news_content');if(!el.length){el=jQuery('body');}
diff=800;}
if(el.length)
{var scrollable_height=jQuery('body').get(0).scrollHeight;var scroll_height=Math.ceil(_this._triggers.scroll.threshold*((el.height()+el.position().top)-diff));if(scrollable_height>scroll_height)
{jQuery(window).bind({scroll:function()
{if(_this._triggers.scroll.triggered){return;}
var y_pos=Math.ceil(jQuery(document).scrollTop())||0;if(y_pos>scroll_height)
{_this._triggers.scroll.triggered=true;_this._checkTriggers();}}});}
else
{_this._triggers.scroll.triggered=true;_this._checkTriggers();}}
else
{_this._triggers.scroll.triggered=true;_this._checkTriggers();}},_checkTriggers:function()
{var _this=this;if(_this.areTriggersReady())
{ReadEdgeLite.trace('All triggers ready');if('function'==typeof _this._onTriggersReady)
{_this._onTriggersReady();}
return;}},areTriggersReady:function()
{var _this=this;return(_this._triggers.timer.triggered&&_this._triggers.scroll.triggered);},setOnTriggersReadyCallback:function(on_triggers_ready)
{var _this=this;_this._onTriggersReady=on_triggers_ready;},start:function(on_triggers_ready)
{this._onTriggersReady=on_triggers_ready||false
this._initTimerTrigger();this._initScrollTrigger();}};ReadEdgeView.Facepile={facepile_page:0,hovercard_page:0,users_in_pile:0,users_in_card:0,friends_type:0,elements:{},users:{},cache:{},current_user:{},reads:{},load:function()
{var _this=this;var postdata=HPFB.getSessionForServer("obj");postdata['entry_id']=HPUtil.GetEntryID();jQuery.ajax({url:'/users/read_edge/v2/facepile.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{data=data||{};if(/success/.test(data.status)&&data.html)
{_this.initElements(data);}},error:function(){HPUtil.error();}});},initElements:function(data)
{var _this=this;ReadEdgeView.elements.re_friends_hldr.html(data.html);ReadEdgeView.elements.re_expand_ctrl.show();_this.elements.facepile_el=jQuery("#re-facepile");_this.elements.facepile_pictures=jQuery("#re-facepile-pictures");_this.elements.facepile_controls=jQuery("#re-facepile-controls");_this.elements.facepile_prev=jQuery("#re-prev-inpile");_this.elements.facepile_next=jQuery("#re-next-inpile");_this.elements.read_by=jQuery("#re-read-by");_this.elements.bar_togglers=jQuery(".re-bar-toggle");_this.elements.card_hover_els=jQuery(".re-facepile-card-hover");_this.elements.facepile_card=jQuery("#re-card-friends");_this.elements.card_prev=jQuery("#re-card-friends-prev");_this.elements.card_next=jQuery("#re-card-friends-next");_this.elements.card_users=jQuery(".re-hovercard-user");_this.elements.reads_hover_els=jQuery(".re-facepile-fb-user");_this.elements.popup=jQuery("#re-popup-bubble");_this.elements.current_user_tab=jQuery("#re-current-user-tab");_this.users_in_pile=data.users_in_pile||0;_this.users_in_card=data.users_in_card||0;_this.friends_type=data.friends_type||'';_this.users=data.users||{};var fbid=ReadEdgeLite.getUserConfig('facebook_id');if(fbid)
{FB.api('/me',function(resp)
{if(resp.id)
{_this.current_user[resp.id]=resp;_this.current_user[resp.id].profile_url=resp.link;_this.elements.current_user_tab.html('<img src="http://graph.facebook.com/'+fbid+'/picture?type=square" />');_this.elements.current_user_tab.addClass('re-facepile-fb-user');_this.elements.current_user_tab.attr('id','re-fb-friend-'+fbid);_this.elements.current_user_tab=jQuery("#re-fb-friend-"+fbid);_this.elements.reads_hover_els=jQuery(".re-facepile-fb-user");if(data.expand)
{ReadEdgeView.toggleBar();}
else
{_this.elements.read_by.show();_this.elements.facepile_el.addClass('re-closed');}
_this.attachEvents();}});}
else
{if(data.expand)
{ReadEdgeView.toggleBar();}
else
{_this.elements.read_by.show();_this.elements.facepile_el.addClass('re-closed');}
_this.attachEvents();}
return;},attachEvents:function()
{var _this=this;_this.elements.bar_togglers.bind('click',function()
{ReadEdgeView.toggleBar();});_this.elements.facepile_prev.click(function()
{var c=_this.facepile_page;var p=c-1;var el1=jQuery("#re-facepile-block-"+c);var el2=jQuery("#re-facepile-block-"+p);if(el2.length)
{el1.hide();el2.show();_this.lazyLoadImages(el2);_this.facepile_page=p;}});_this.elements.facepile_next.click(function()
{var c=_this.facepile_page;var p=c+1;var el1=jQuery("#re-facepile-block-"+c);var el2=jQuery("#re-facepile-block-"+p);if(el2.length)
{el1.hide();el2.show();_this.lazyLoadImages(el2);_this.facepile_page=p;}});_this.elements.card_hover_els
.bind({mouseover:function(e)
{var el=jQuery(this);document.re_timer3=setTimeout(function(){if(ReadEdgeView.elements.read_edge.hasClass('re-expanded')){return;}
_this.setCardPosition(_this.elements.facepile_card,el,e);_this.elements.facepile_card.show();_this.lazyLoadImages('re-card-friends-page-'+_this.hovercard_page);_this.toggleVideoContent(true);ReadEdgeView.elements.re_share_tooltip.hide();},700);},mouseout:function(e)
{if(document.re_timer3){clearTimeout(document.re_timer3);}
document.re_timer3=setTimeout(function(){_this.elements.facepile_card.hide();_this.toggleVideoContent(false);},500);}});_this.elements.facepile_card.bind({mouseover:function()
{if(document.re_timer3){clearTimeout(document.re_timer3);}
_this.elements.facepile_card.show();},mouseout:function()
{document.re_timer3=setTimeout(function(){_this.elements.facepile_card.hide();_this.toggleVideoContent(false);},500);}});_this.elements.card_prev.click(function()
{var c=_this.hovercard_page;var p=c-1;var el1=jQuery("#re-card-friends-page-"+c);var el2=jQuery("#re-card-friends-page-"+p);if(el2.length)
{el1.hide();el2.show();_this.lazyLoadImages(el2);_this.hovercard_page=p;}});_this.elements.card_next.click(function()
{var c=_this.hovercard_page;var p=c+1;var el1=jQuery("#re-card-friends-page-"+c);var el2=jQuery("#re-card-friends-page-"+p);if(el2.length)
{el1.hide();el2.show();_this.lazyLoadImages(el2);_this.hovercard_page=p;}});_this.elements.card_users.bind({click:function()
{var el_class=jQuery(this).attr('class');var classes=el_class.split(" ");if(classes.length&&classes[1])
{var user_pos=classes[1].replace('card-user-','');var facepile_page=Math.floor(user_pos/_this.users_in_pile);ReadEdgeView.toggleBar();jQuery("#re-facepile-block-"+_this.facepile_page).hide();jQuery("#re-facepile-block-"+facepile_page).show();_this.facepile_page=facepile_page;return;}}});_this.elements.reads_hover_els.bind({mouseover:function(e)
{if(document.re_timer4){clearTimeout(document.re_timer4);}
var el=jQuery(this);var id=el.attr('id');var facebook_id=id.replace('re-fb-friend-','')||false;document.re_timer4=setTimeout(function()
{if(facebook_id==ReadEdgeLite.getUserConfig('facebook_id'))
{_this.showAllUserReads(facebook_id,el,e);}
else
{_this.showUserReads(facebook_id,el,e);}},600);},mouseout:function()
{if(document.re_timer4){clearTimeout(document.re_timer4);}
document.re_timer4=setTimeout(function(){_this.hideUserReads();},400);}});_this.elements.popup.bind({mouseover:function(e)
{if(document.re_timer4){clearTimeout(document.re_timer4);}
_this.elements.popup.show();},mouseout:function()
{if(document.re_timer4){clearTimeout(document.re_timer4);}
document.re_timer4=setTimeout(function(){_this.hideUserReads();},400);}});},getReadsCardHTML:function(user_data)
{user_data.read_date=user_data.read_date||false;var card_html='';card_html+='	<div class="re-user-data">';card_html+='		<div class="re-top-arrow"></div>';card_html+='		<img src="http://graph.facebook.com/'+user_data.id+'/picture?type=square" />';card_html+='		<a target="_blank" href="'+user_data.profile_url+'" class="re-username">'+user_data.name+'</a>';if(user_data.read_date)
{card_html+='		<span class="re-member-since">'+user_data.read_date+'</span>';card_html+='		<span class="re-activity">'+_('Recent Reading Activity')+'</span>';}
card_html+='	</div>';card_html+='	<div class="clear"></div>';card_html+='	<div id="re-read-activity-'+user_data.id+'">';card_html+='		<div id="re-activity-loader"><img src="http://s.huffpost.com/images/loader.gif" /></div>';card_html+='	</div>';return card_html;},showUserReads:function(facebook_id,el,e)
{if(document.re_xhr){document.re_xhr.abort();}
var _this=this;var user_data=_this.users[facebook_id]||false;if(!user_data)
{return;}
_this.elements.popup.html(_this.getReadsCardHTML(user_data));var div_el=jQuery('#re-read-activity-'+user_data.id);_this.toggleVideoContent(true);_this.setCardPosition(_this.elements.popup,el,e);_this.elements.popup.show();if(_this.cache[user_data.id])
{var data=_this.cache[user_data.id];if(/success/.test(data.status)&&data.html)
{div_el.html(data.html);jQuery("#re-more-username-"+user_data.id).html(user_data.name);}
else
{div_el.html('');}
return;}
var postdata=HPFB.getSessionForServer("obj");postdata['facebook_id']=user_data.id;document.re_xhr=jQuery.ajax({url:'/users/read_edge/v2/read_activity.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{if(/success/.test(data.status)&&data.html)
{div_el.html(data.html);jQuery("#re-more-username-"+user_data.id).html(user_data.name);}
else
{div_el.html('');}
_this.cache[user_data.id]=data;},error:function(){HPError.e();}});},getHTMLFromCache:function(user_data)
{var _this=this;if(_this.reads[user_data.id]&&_this.reads[user_data.id].cache&&_this.reads[user_data.id].cache.html){return _this.reads[user_data.id].cache.html;}
return false;},setHTMLToCache:function(user_data,html)
{var _this=this;if('undefined'===typeof _this.reads[user_data.id]){_this.reads[user_data.id]={};}
_this.reads[user_data.id].cache={html:html};},showAllUserReads:function(facebook_id,el,e)
{if(document.re_xhr_all){document.re_xhr_all.abort();}
var _this=this;var get_self_reads=(facebook_id==ReadEdgeLite.getUserConfig('facebook_id'));if(get_self_reads)
{user_data=_this.current_user[facebook_id]||false;}
else
{user_data=_this.users[facebook_id]||false;}
if(!user_data)
{return;}
user_data.read_date=user_data.read_date||'';_this.elements.popup.html(_this.getReadsCardHTML(user_data));var div_el=jQuery('#re-read-activity-'+user_data.id);_this.toggleVideoContent(true);_this.setCardPosition(_this.elements.popup,el,e);_this.elements.popup.show();var get_from_cache=function()
{if(_this.reads[user_data.id]&&_this.reads[user_data.id].cache&&_this.reads[user_data.id].cache.html)
{return _this.reads[user_data.id].cache.html;}
return false;};if(_this.getHTMLFromCache(user_data))
{div_el.html(_this.getHTMLFromCache(user_data));_this.attachAllUserReadEvents(div_el,user_data);return;}
var postdata=HPFB.getSessionForServer("obj");postdata['facebook_id']=user_data.id;document.re_xhr_all=jQuery.ajax({url:'/users/read_edge/v2/read_activity_all.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req)
{if(/success/.test(data.status)&&data.html)
{_this.initAllUserReads(div_el,data,user_data);_this.attachAllUserReadEvents(div_el,user_data);}
else
{div_el.html('');}},error:function(){HPError.e();}});},initAllUserReads:function(div_el,data,user_data)
{var _this=this;if(data[user_data.id])
{_this.reads[user_data.id]=data[user_data.id];}
div_el.html(data.html);jQuery("#re-more-username-"+user_data.id).html(user_data.name);if(user_data.id==ReadEdgeLite.getUserConfig('facebook_id'))
{jQuery(".remove-read-link").css('display','block');}
_this.setHTMLToCache(user_data,div_el.html());return;},attachAllUserReadEvents:function(div_el,user_data)
{var _this=this;jQuery("#re-prev-reads-"+user_data.id).click(function()
{var el="#re-read-activity-list-"+user_data.id+"-page-";var c=_this.reads[user_data.id].current_page;var p=c-1;if(jQuery(el+p).length)
{jQuery(el+p).show();jQuery(el+c).hide();_this.reads[user_data.id].current_page=p;_this.setHTMLToCache(user_data,div_el.html());}});jQuery("#re-next-reads-"+user_data.id).click(function()
{var el="#re-read-activity-list-"+user_data.id+"-page-";var c=_this.reads[user_data.id].current_page;var p=c+1;if(jQuery(el+p).length)
{jQuery(el+p).show();jQuery(el+c).hide();_this.reads[user_data.id].current_page=p;_this.setHTMLToCache(user_data,div_el.html());}});jQuery(".remove-read-link").click(function()
{var curr_el=jQuery(this);var id=curr_el.attr('id');id=id.replace('remove-read-link-','');var ids=id.split('-');var entry_id=ids[0];var action_id=ids[1];var postdata=HPFB.getSessionForServer("obj");postdata['object_id']=entry_id;postdata['action_id']=action_id;var el=jQuery('#read-block-'+entry_id+'-'+action_id);curr_el.css('visibility','hidden');jQuery.ajax({url:'/users/read_edge/v2/delete.php',type:'post',data:postdata,dataType:'json',success:function(data,func,req){if(/success/.test(data.status))
{el.addClass('state-disabled');_this.setHTMLToCache(user_data,div_el.html());if(entry_id==ReadEdgeLite.getEntryConfig('entry_id')&&ReadEdgeLite.getEntryConfig('published_id'))
{ReadEdgeLite.fire('re.deleteSuccess');}}
else
{curr_el.css('visibility','visible');}},error:function(){curr_el.css('visibility','visible');HPError.e();}});return;});},hideUserReads:function()
{var _this=this;_this.elements.popup.hide();_this.toggleVideoContent(false);},setCardPosition:function(card_el,positioning_el,event)
{var left=positioning_el.offset().left;var top=positioning_el.offset().top+positioning_el.height()+5;if('img'===event.target.localName){left=left-Math.ceil(positioning_el.width()/2);}
jQuery('body').append(card_el);card_el.css({'left':left,'top':top});return;},toggle:function()
{var _this=this;if(ReadEdgeView.elements.read_edge.hasClass('re-expanded'))
{_this.elements.facepile_pictures.show();_this.elements.read_by.hide();_this.elements.facepile_el.removeClass('re-closed');_this.elements.facepile_card.hide();_this.lazyLoadImages('re-facepile-block-'+_this.facepile_page);}
else
{_this.elements.facepile_pictures.hide();_this.elements.read_by.show();_this.elements.facepile_el.addClass('re-closed');}
if('friends_read_this_story'==_this.friends_type)
{_this.elements.read_by.show();}},toggleVideoContent:function(hide)
{hide=hide||false;var visibility=(hide)?'hidden':'visible';jQuery("#news_content object, #news_content iframe").css("visibility",visibility);return;},lazyLoadImages:function(el){el=('object'===typeof el)?el:jQuery("#"+el);huff.use('layout',function(l){l.lazy_images(el);});}};
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var SNProject={join_max_tries:5,facebook_join_retried:0,popup_needed:HuffCookies.get('snn_popup_needed'),init:function()
{this.user_logged_in=!!HuffCookies.getUserName();this.maybe_facebook=HPFB.maybeFacebookConnected();this.snp_cookie=HuffCookies.getSNPstatus();this.read_tracking_enabled=HuffPrefs.get('read_tracking');},_tryToJoinUser:function()
{var SNP=SNProject;var HC=HuffCookies;HPError.d('snn join callback');if(SNP.join_max_tries>0)
{if(HC.getUserId())
{huff.use('connect/auth',function(ConnectAuth){ConnectAuth.Login.loginSuccess();});}
else
{SNP.join_max_tries--;setTimeout(SNP._tryToJoinUser,200);}}
else
{if(typeof IS_NEWSGLIDE==='boolean'&&IS_NEWSGLIDE){$(document).trigger('userlogedin');HuffConnect.hideModal();}else{window.location='/social/join.html?autojoin=1';}}},joinCheckingUserStatus:function(params)
{var SNP=SNProject;var QL=QuickLogin;var HL=HuffConnect.Login;params=params||{};var service=params['service']||false;if(HuffCookies.getSNPstatus()==1&&HuffCookies.getUserName()&&!HuffPrefs.get('yahoo')&&HPUtil.getUrlVar('just_reloaded')!=='3')
{location.href=HPUtil.AddStringToQueryString(location.href,'just_reloaded=3');return false;}
if(!service)
{HuffConnect.loadConnectModal();return false;}
QL.calledBySNN=true;if(HuffCookies.getUserName())
{if(service=='facebook')
{QL.FacebookLoginCallback=SNP._tryToJoinUser;HPFB.login();}
else
{SNP._join();}}
else
{if(service=='facebook')
{QL.FacebookLoginCallback=SNP._tryToJoinUser;HPFB.login();}
else
{HL.onLoginSuccessCallback=SNP._tryToJoinUser;HuffConnect.loadConnectModal();}}
return false;},installYApp:function()
{var url='http://apps.yahoo.com/-AIjuiA4o';PopupManager.open(url,800,600);HuffConnect.hideModal();return;},checkFriendsFansOnJoin:function()
{var linked=false;var providers={'facebook':'','twitter':'','google':'','linkedin':'','aol':'','winlive':''};for(var provider in providers){if(HuffPrefs.get(provider)){linked=true;break;}}
if(!linked){return;}
jQuery.ajax({url:'/users/social_news_project/make_friends_fans.php',type:'POST',data:HPFB.getSessionForServer()+'&showall=1'||'showall=1',success:function(data,func,req){if(req.status!=200)return;if(HuffPoUtil.trim(data)!='')
{var splits=data.split(':::::');var modal_html='<div id="auto_friends_modal" class="padding_10">'+splits[0]+'</div>';huff.use('modal',function(m){m.show({content:modal_html,width:680,position:'absolute',onshow:function(){if("undefined"!=typeof(FB)){setTimeout(function(){FB.XFBML.parse(jQuery('#auto_friends_modal').get(0));},500);}
SocialFriends.init();return;}});});}},error:function(){HPError.e();return;},timeout:30000});},checkFriendsFansOnLogin:function()
{SNProject.checkFriendsFansOnJoin();},track:function(id,action,reference)
{var snp=SNProject;var tracking_url_base='http://user-stats.huffpost.com/';if(window.location.host!='www.huffingtonpost.com')
{if(window.HPConfig&&HPConfig.inst_type=='dev')
tracking_url_base='/FAKE_SNProject.track_FROM_BETA/';else
return true;}
if(!id||id==''){id=0;}
if(!reference||reference==''){reference=0;}
if(/[^\d+]/.test(id)||/[^\d+]/.test(reference)||(action!='delete_entry_view'&&action!='entry_view'&&action!='entry_like'&&action!='entry_unlike'
&&action!='comment_comment'&&action!='entry_vote'&&action!='slideshow_poll_vote'&&action!='slideshow_poll_facebook_share'&&action!='user_snp_join'&&action!='hufflist_item_added'&&action!='comment_favored'&&action!='user_log_in'&&action!='user_log_out'&&action!='user_follow'&&action!='poll_vote'&&action!='prediction_vote'&&action!='entry_facebook_share'&&action!='entry_twitter_share'))
{return false;}
can_track=true;if(action=='entry_view')
{can_track=HuffPrefs.get('read_tracking');}
can_track=can_track?1:0;if(HuffCookies.getUserId())
{var func=function()
{var user_stats_project_image_src=tracking_url_base+"?"+HuffCookies.getUserId()+"&"+Math.random().toString(16).replace('0.','')+'&'+escape(id)+'&'+escape(action)+'&'+escape(reference)+'&'+can_track;my_img=document.createElement('img');my_img.setAttribute('src',user_stats_project_image_src);my_img.setAttribute('style',"height:1px; line-height:1px; overflow:hidden");var snp_tracking=document.getElementById('_snp_tracking');if(snp_tracking){document.getElementById('_snp_tracking').appendChild(my_img);}}
if(action=='entry_view')
{setTimeout(func,1000);}
else
{func();}}
return true;},fanCheck:function(){if(SNProject.user_logged_in&&1==HuffCookies.getCookie('check_for_fans'))
SNProject.checkFriendsFansOnLogin();else if(SNProject.user_logged_in&&SNProject.snp_cookie==1&&HuffCookies.get('snn_popup_needed')){HPFB.ensureInit(function(){if('connected'==HPFB.user_status)
setTimeout(function(){SNProject.checkFriendsFansOnLogin();},3000);});}
HuffCookies.del('snn_popup_needed');HuffCookies.destroyCookie('check_for_fans');},initModal:function(name)
{name=name||"tweet";huff.use('modal',function(m)
{var modal_frame="";modal_frame+="<div class='"+name+"_modal_frame'>";modal_frame+="<div class='border_top'></div>";modal_frame+="<div class='"+name+"_modal_close close_button'></div>";modal_frame+="<div style='clear:both;'></div>"
modal_frame+="<div class='main_container'>"
modal_frame+="<div class='head_image'></div>"
modal_frame+="<div class='content'>"
modal_frame+="</div>";modal_frame+="</div>";modal_frame+="<div style='clear:both;'></div>"
modal_frame+="<div class='border_bottom'></div>";modal_frame+="</div>";modal_frame+="<div class='"+name+"_modal_close' style='position:fixed; z-index:900; left:0px; top:0px; width:100%; height:100%; background:#000; opacity:0.7; filter:alpha(opacity=70);'></div>";m.theme(name+'_modal',{frame:modal_frame,window:'div:first',content:'div.content',closer:'.'+name+'_modal_close',init:function(window,options){window.width(options.width||'').height(options.height||'').css('margin-left','-'+(window.width()/2)+'px');}});});return;}};SNProject.init();(function($,window){var SocialNotifications={config:{ajax:true},CONSTANTS:{updateInterval:1000*60*3,countNotificationsUrl:'/users/social/notifications/action.php?count'},setCounter:function(value){var counter=this.getCounter();var setCounter=function(count){var current_count=counter.text();if(current_count!=''&&count==current_count){return;}
var duration=100,count_v=count;count>100&&(count_v='100+');count>=0&&counter.animate({top:20},duration,'linear',function(){counter.html(count_v).css({top:-20}).animate({top:0},duration,'linear');});};counter.length&&typeof value=='undefined'&&$.ajax({url:this.CONSTANTS.countNotificationsUrl,success:setCounter});value>=0&&setCounter(value);return;window.clearTimeout(this.counter_timer);this.counter_timer=window.setTimeout(function(){SocialNotifications.setCounter();},this.CONSTANTS.updateInterval);},getCounter:function(){return $('.notifications .counter-box .value');},clearVisited:function(){var frame=$('#social-nav-bar iframe').contents(),visited=frame.find('.notification.visited');visited.length>0&&visited.remove();return true;},clearAll:function(){$.ajax({url:'/users/social_news_project/profile/notifications/clear.php',success:function(){window.location=window.location;}});},setEvents:function(){$(document).ready(function(){var iframe='<iframe id="notifications-window" frameborder="0" title="Notifications" src="/users/social/notifications/frame.php" width="350" height="480"></iframe>';var is_visible=function(n){return n.css('visibility')=='visible';};var hidePopups=function(){var $snb=jQuery('#social-nav-bar'),$wu=jQuery('#wendybird_user'),$dd=$wu.find('.dropdown'),$n_caption=$wu.find('.notifications-link'),$u_caption=$wu.find('.wendybird_user_data'),$popup=$snb.find('.popup'),sn=SocialNotifications;is_visible($snb)&&$snb.css({visibility:'hidden'})&&$n_caption.removeClass('active')&&sn.clearVisited()&&$popup.html(iframe)&&sn.setCounter();$dd.is(':visible')&&$dd.slideUp(200,function(){$u_caption.removeClass('active');});};$('#wendybird_user .notifications-link').click(function(event){HPTrack.trackEvent('Social/Notifications','Click','Popup');event.stopPropagation();event.preventDefault();var $snb=jQuery('#social-nav-bar'),$wu=jQuery('#wendybird_user'),$u_caption=$wu.find('.wendybird_user_data'),$n_caption=$wu.find('.notifications-link'),$popup=$snb.find('.popup'),sn=SocialNotifications;$wu.find('.dropdown').hide()&&$u_caption.removeClass('active');if(is_visible($snb)){$snb.css({visibility:'hidden'})&&$n_caption.removeClass('active')&&sn.clearVisited()&&$popup.html(iframe);}else{jQuery(this).addClass('active');if(!$popup.find('iframe').length||sn.getCounter().text()>0){$popup.html(iframe);}
$snb.css({visibility:'visible'});}});jQuery('#wendybird_user .wendybird_user_data').unbind().click(function(event){event.stopPropagation();var $snb=jQuery('#social-nav-bar'),$wu=jQuery('#wendybird_user'),$dd=$wu.find('.dropdown'),$n_caption=$wu.find('.notifications-link'),$u_caption=jQuery(this),$trg=jQuery(event.target);!$trg.closest($dd).length&&event.preventDefault();is_visible($snb)&&$snb.css({visibility:'hidden'})&&$n_caption.removeClass('active');if($dd.is(':visible')){$dd.slideUp(200,function(){$u_caption.removeClass('active');});}else{$dd.slideDown(200)&&$u_caption.addClass('active');}});jQuery('body').click(hidePopups);});}};window.SocialNotifications=SocialNotifications;})(jQuery,window);
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});YAHOO.namespace('SNP');YAHOO.SNP.SNPBlock=function(params)
{params=params||{};extend(this,params);this.load();}
YAHOO.SNP.SNPBlock.prototype={url:'',id:'',cur_obj:null,paginator:null,paginated:true,update_max_page:false,is_circle:true,next:function(){},prev:function(){},load:function(){if(this.cur_obj)
{this.cur_obj.loadSNPBlock();}},goto:function(){},init_pagination:function(page,maxPage,url,passed_params)
{if(this.paginated)
{var params={moduleName:this.id,update_max_page:this.update_max_page,maxPage:maxPage,is_circle:this.is_circle,is_ajax_update:true,update_images:true,url:url};extend(params,passed_params);this.paginator=new CommonPaginator(params);}}}
YAHOO.SNP.RecommendBlock=function(params)
{YAHOO.SNP.SNPBlock.call(this,params);}
YAHOO.extend(YAHOO.SNP.RecommendBlock,YAHOO.SNP.SNPBlock);var SNPModule={current_notSNN_vertical:'',loaded:false,arr_pages:Array(),arr_current_page:Array(),arr_max_page:Array(),arr_lock_status:Array(),arr_non_snn_modules:['not_signed_mp','not_signed_mbc','not_signed_mbf','not_signed_mbt','not_signed_mpr','not_signed_dm'],non_snn_made_init:0,arr_snn_modules:['comment','friends','mp','mp_bn','mp_hp','follower','dm_hp','mbc','mbf','mbt','mbt','act','mpr','entry_inside_comment','twitter_friends','twitter_influencers'],snn_made_init:0,animation:null,url_user_id:'',isFormLoaded:false,mpTimeout:null,ms:24000,twitter_timeline_type:'home',tweetout_module_div:'hidden_twitter_module',skin:null,hide_hp_module:true,load:function(trends_mode)
{if(!HPConfig.no_social_module&&HuffCookies.getUserName()&&document.domain!=='preview.huffingtonpost.com')
{var get_data='';get_data='?v='+HPConfig.current_vertical_name;var path=window.location.pathname.split('/');if(typeof path[1]!=="undefined"&&path[1]=='big-news'){get_data+='&page_type=big_news_list';}else if(typeof path[1]!=="undefined"&&path[1]=='social'){get_data+='&page_type=profile_page';}else if(typeof path[1]!=="undefined"&&path[1]=='theblog'){get_data+='&page_type=theblog';}
if(trends_mode)get_data+='&hot_trends_mode='+trends_mode;if(HuffPoUtil.getUrlVar("level"))get_data+='&level=1';if(HuffPoUtil.getUrlVar("snp"))get_data+='&snp=v2';get_data+='&includefbrecom=1';location.href.match(/[?&]external=1/)&&(get_data+='&external=1');C.asyncRequest('GET','/users/social_news_project/snp_module.php'+get_data,{success:function(o){if(o.responseText!=''){var display_module_arr=o.responseText.split('::module_to_disp::');var display_module=display_module_arr[1];var response=o.responseText.replace('::module_to_disp::'+display_module,'');if(display_module=="snn"){if("undefined"!=typeof(response)){var ffu=Dom.get('facebook_friends_unit_wrapper');if(ffu){ffu.innerHTML=response;}}}
else if(display_module=="twitter_popular"){SNPModule.hide_hp_module=false;SNPModule.tweetout_module_div="hidden_twitter_module_frontpage";}
else if(display_module=="popular"){SNPModule.hide_hp_module=false;}
SNPModule.snn_made_init=false;SNPModule.init();if(typeof HPAds.page_spots["most_popular_edit_promo"]!=="undefined"){var mp_adv_items=jQuery("#snp_mp_hp_page_0 div[id^='snp_mp_hp_subpage_']");var mp_adv_item;if(mp_adv_items.length>3)mp_adv_item=jQuery(mp_adv_items[2]);else if(mp_adv_items.length)mp_adv_item=jQuery(mp_adv_items[mp_adv_items.length-1]);if(mp_adv_item.length){HPAds.ad_reload('most_popular_edit_promo',mp_adv_item.attr('id'),true);}}
if(SNPModule.skin){setTimeout("SNPModule.show_skinned_module()",1000);setTimeout("HPAds.ad_reload('snn_234x60_req','ad_snn_234x60_req')",3000);return;}
setTimeout("HPAds.ad_reload('snn_234x60_req','ad_snn_234x60_req')",2000);SNPModule.loaded=true;if(typeof Recommendations!=="undefined"){if(HPFB.initialized&&HPFB.authResponse){Recommendations.load({fb_session:HPFB.authResponse,status:HPFB.user_status});}}}},failure:function(o){if($('hidden_snp_body')){HuffPoUtil.hide('hidden_snp_body');HPError.e();}},timeout:20000});}else{jQuery(document).ready(function(){if(typeof HPAds.page_spots["most_popular_edit_promo"]!=="undefined"){var mp_adv_items=jQuery("#snp_not_signed_mp_page_0 div[id^='snp_mp_hp_subpage_']");var mp_adv_item;if(mp_adv_items.length>3)mp_adv_item=jQuery(mp_adv_items[2]);else if(mp_adv_items.length)mp_adv_item=jQuery(mp_adv_items[mp_adv_items.length-1]);if(mp_adv_item.length){HPAds.ad_reload('most_popular_edit_promo',mp_adv_item.attr('id'),true);}}});this.trackLoaded();}
if(HuffCookies.getSNPstatus()==1){HuffPoUtil.hide('snn_fb_promo_box');}},init_module:function(mod_name,force_reinit){if('undefined'==typeof(this.arr_pages[mod_name])){this.arr_pages[mod_name]=new Array();}
if('undefined'==typeof(this.arr_current_page[mod_name])){this.arr_current_page[mod_name]=0;}
if($('snp_'+mod_name+'_max_page_counter')){this.arr_max_page[mod_name]=parseInt($('snp_'+mod_name+'_max_page_counter').innerHTML)-1;if($('snp_'+mod_name+'_page_ids_0')){for(var pg_num=0;pg_num<=this.arr_max_page[mod_name];pg_num++){this.arr_pages[mod_name][pg_num]=$('snp_'+mod_name+'_page_ids_'+pg_num).innerHTML;}}}
else{this.arr_max_page[mod_name]=0;}},init:function(){if(this.snn_made_init)return false;if(HPAds.snpmodule_skin=='motorola'&&Dom.get('snp_friends_pages')){this.skin='moto';}
if(!this.url_user_id&&$('snp_module_user_id')){this.url_user_id=$('snp_module_user_id').innerHTML;}
this.lightbox.init();this.stealth.init();for(i=0;i<this.arr_snn_modules.length;i++){this.init_module(this.arr_snn_modules[i]);}
var entry_id=HuffPoUtil.GetEntryID(window.location.href);if(SNProject.read_tracking_enabled==1&&entry_id&&!$('snp_activity_read_entry_'+entry_id)&&$('snp_current_reading_entry_title')){this.current_reading_entry_id=entry_id;$('snp_current_reading_entry_title').innerHTML=document.title;$('snp_current_reading_entry').style.display='block';}
this.snn_made_init=1;this.hideHpModules();if($('most_popular_ad_stub')&&HuffPoUtil.trim($('most_popular_ad_stub').innerHTML)==''){$('most_popular_ad_stub').innerHTML='<iframe src="http://ad.doubleclick.net/adi/huffpost.socialnews;tile=1;sz=234x60;ord='+HuffPoUtil.WEDGJE.ord()+'?" width="234" height="60" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" name="social_news_234x60" id="social_news_234x60"></iframe>';}
this.networkToLink();if(HuffPrefs.get('twitter')&&!HPConfig.no_twitter){SNPModule.twitterModule(function(){SNPModule.init_module('twitter_friends');SNPModule.init_module('twitter_influencers');E.on('tweet_status','keyup',HPUtil.enforceTextAreaLimit,{chars:140});E.on('tweet_status','change',HPUtil.enforceTextAreaLimit,{chars:140});});}
this.trackLoaded();if(HuffPoUtil.getUrlVar("level")||HPConfig.user_show_levels_and_badges_disabled==false){var my_level=$("snn_module_my_level");if(my_level){my_level=my_level.innerHTML;Y.util.Event.onDOMReady(SNPModule.show_user_level_box);}}
for(i=0;i<this.arr_snn_modules.length;i++){var page_0='snp_'+this.arr_snn_modules[i]+'_page_0'
if($(page_0))
huff.emit('content/update','#'+page_0);}
huff.emit('content/update');},not_snn_init:function(){if(this.non_snn_made_init)return false;for(i=0;i<this.arr_non_snn_modules.length;i++){this.init_module(this.arr_non_snn_modules[i]);}
this.non_snn_made_init=1;},trackEvent:function(action,label){this.tracker.event(action,label);},trackLoaded:function()
{if(typeof HPTrack=='undefined')
return;var long_name='Sidebar - ';var short_name='sb-';if(this.snn_made_init)
{short_name+='social';long_name+='Social';}
else
{var preffix=(HPConfig.most_popular_version>1)?'-viralsort':'-hpsort';short_name+='mostpop'+preffix;long_name+='non-Social'+preffix;}
var HPM=HPTrack.Module;this.tracker=HPM(short_name,long_name);this.tracker.impression();HPM.Impressions.fire();var event_handler=new HPTrack.Module.DelegatedHandler(this.trackEvent,this);E.on('snp_friends_module','click',event_handler,this,true);this.initLikeTracking(this.tracker);},networkToLink:function(){if(HuffPrefs.get('facebook')===false){if($('sidebar_service_connect')){$('sidebar_service_connect').innerHTML="<div style=\"text-align:center\"><a href=\"/social/join.html?autojoin=1\" onclick=\"HPFB.login(QuickLogin.FacebookLoginCallback);return false;\" target=\"_blank\"><img border=\"0\" src=\""+_("/images/fb-large.gif")+"\" alt=\""+_("Connect with Facebook")+"\" style=\"padding: 16px;\"/></a></div>";}}
else if(HuffPrefs.get('twitter')===false){if($('sidebar_service_connect')){$('sidebar_service_connect').innerHTML="<div style=\"text-align:center\"><a href=\"javascript:void(0);\" onclick=\"linkSocialAccount.checkLoginStatus('twitter'); return false;\" target=\"_blank\"><img border=\"0\" src=\""+_("/images/Sign-in-with-Twitter-darker.png")+"\" alt=\""+_("Connect with Twitter")+"\" style=\"padding: 16px;\"/></a></div>";}}
else
if($('sidebar_service_connect'))$('sidebar_service_connect').style.display="none";return;},hideHpModules:function(){if(this.hide_hp_module)
HuffPoUtil.hide('all_frontpage_widgets');return;},showHpModules:function(){HuffPoUtil.show('all_frontpage_widgets');},refreshPagination:function(page,type){if($('snp_'+type+'_page_counter')){$('snp_'+type+'_page_counter').innerHTML=page+1;}
this.arr_current_page[type]=page;},get_url_to_call:function(page,type){var get_data='';if(''!=HuffPoUtil.trim(this.current_notSNN_vertical)||false==HuffPoUtil.GetEntryID(location.href))
get_data='&is_frontpage=1';switch(type){case'friends':return'/users/social_news_project/snp_module_page.php?page='+page+'&page_ids='+this.arr_pages[type][page]+'&user_id='+this.url_user_id;break;case'mp':return'/users/social_news_project/snp_module_page.php?type=mp&page='+page+'&page_ids='+this.arr_pages[type][page]+'&user_id='+this.url_user_id;break;case'act':return'/users/social_news_project/snp_module_page.php?type=act&page='+page+'&user_id='+this.url_user_id;break;case'comment':return'/users/social_news_project/snp_module_page.php?type=comment&page='+page+'&page_ids='+this.arr_pages[type][page]+'&user_id='+this.url_user_id;break;case'mpr':return'/widget/frontpage/frontpage_widgets_update.php?type=mpr&page='+page+'&entry_ids='+this.arr_pages[type][page]+'&status=snp'+get_data;break;case'entry_inside_comment':return'/users/social_news_project/snp_module_page.php?type=entry_inside_comment&page='+page+'&page_ids='+this.arr_pages[type][page]+'&user_id='+this.url_user_id;break;case'mp_bn':return'/widget/big_news_mp_update.php?type=mp&page='+page+'&entry_ids='+this.arr_pages[type][page]+get_data;break;case'not_signed_mp':return'/widget/frontpage/frontpage_widgets_update.php?type=mp&page='+page+'&entry_ids='+this.arr_pages[type][page]+get_data;break;case'not_signed_dm':return'/widget/frontpage/frontpage_widgets_update.php?type=dm&page='+page+'&entry_ids='+this.arr_pages[type][page]+get_data;break;case'not_signed_mpr':return'/widget/frontpage/frontpage_widgets_update.php?type=mpr&page='+page+'&entry_ids='+this.arr_pages[type][page]+get_data;break;case'twitter_friends':return'/users/social_news_project/twitter/snn_twitter_page.php?page='+page+"&type="+this.twitter_timeline_type;break;case'not_signed_mbc':var notSNN_mbc_shifted_ids='';if($('snp_not_signed_mbc_shifted_ids')){notSNN_mbc_shifted_ids='&mbc_shifted_ids='+$('snp_not_signed_mbc_shifted_ids').innerHTML;}
return'/ajax/common/hot_on.php?type=mbc&page='+page+notSNN_mbc_shifted_ids+
(this.current_notSNN_vertical!=''?'&v='+this.current_notSNN_vertical:'');break;case'not_signed_mbf':var notSNN_mbf_shifted_ids='';if($('snp_not_signed_mbf_shifted_ids')){notSNN_mbf_shifted_ids='&mbf_shifted_ids='+$('snp_not_signed_mbf_shifted_ids').innerHTML;}
return'/ajax/common/hot_on.php?type=mbf&page='+page+notSNN_mbf_shifted_ids+
(this.current_notSNN_vertical!=''?'&v='+this.current_notSNN_vertical:'');break;case'not_signed_mbt':return'/ajax/common/hot_on.php?type=mbt&page='+page;break;case'mp_hp':return'/widget/frontpage/frontpage_widgets_update.php?status=snp&type=mp_hp&page='+page+'&entry_ids='+this.arr_pages[type][page]+get_data;break;}},get_current_page:function(page,type){if(page==this.arr_current_page[type])return false;return this.arr_current_page[type];},get_max_page:function(type){return this.arr_max_page[type];},setPage:function(page,type){var current_page=this.get_current_page(page,type);if(current_page===false){return false;}
if(this.isLocked(type))return false;this.animatePage(0,'snp_'+type+'_module_all_pages_here');if($('snp_'+type+'_page_'+page)){HuffPoUtil.hide('snp_'+type+'_page_'+current_page);HuffPoUtil.show('snp_'+type+'_page_'+page);this.refreshPagination(page,type);this.animatePage(1,'snp_'+type+'_module_all_pages_here');if($('snp_'+type+'_page_'+page))
huff.emit('content/update','#snp_'+type+'_page_'+page);}else{this.setLock(type);var url_to_call=this.get_url_to_call(page,type);if(typeof(url_to_call)!="string"){return url_to_call;}
if(SNPModule.skin){url_to_call+='&skin='+SNPModule.skin;}
if(null!=$("snp_twitter_friends_left_arrow")){$("snp_twitter_friends_left_arrow").style.visibility="hidden";}
if(null!=$("snp_twitter_friends_act_right_arrow")){$("snp_twitter_friends_act_right_arrow").style.visibility="hidden";}
var content_container=$('snp_'+type+'_module_all_pages_here').parentNode;YAHOO.util.Dom.addClass(content_container,"mp-ajax-notify");C.asyncRequest('GET',url_to_call,{success:function(o){YAHOO.util.Dom.removeClass(content_container,"mp-ajax-notify");if(o.responseText!=''){HuffPoUtil.hide('snp_'+type+'_page_'+current_page);$('snp_'+type+'_module_all_pages_here').innerHTML+=o.responseText;SNPModule.animatePage(1,'snp_'+type+'_module_all_pages_here');SNPModule.refreshPagination(page,type);SNPModule.releaseLock(type);if(null!=$("snp_twitter_friends_left_arrow")){$("snp_twitter_friends_act_right_arrow").style.visibility="visible";}
if(null!=$("snp_twitter_friends_act_right_arrow")){$("snp_twitter_friends_left_arrow").style.visibility="visible";}
if($('snp_'+type+'_page_'+page))
huff.emit('content/update','#snp_'+type+'_page_'+page);}else{HPError.e();SNPModule.animatePage(1,'snp_'+type+'_module_all_pages_here');SNPModule.releaseLock(type);}},failure:function(o){YAHOO.util.Dom.removeClass(content_container,"mp-ajax-notify");if(SNPModule.mpTimeout){clearTimeout(SNPModule.mpTimeout);}
SNPModule.animatePage(1,'snp_'+type+'_module_all_pages_here');SNPModule.releaseLock(type);},timeout:5000});setTimeout('SNPModule.checkTwitterPage()',5000);}
return true;},checkTwitterPage:function(){if($("snp_twitter_friends_left_arrow")&&$("snp_twitter_friends_left_arrow").style.visibility=="hidden"){$("snp_twitter_friends_left_arrow").style.visibility="visible";}
if($("snp_twitter_friends_act_right_arrow")&&$("snp_twitter_friends_act_right_arrow").style.visibility=="hidden"){$("snp_twitter_friends_act_right_arrow").style.visibility="visible";}
return;},animatePage:function(enable,id,callback,set_time){if(id=="snp_twitter_friends_module_all_pages_here"&&HPBrowser.isIEOld())
{return;}else{if(this.animation){this.animation.stop(true);}
var direction={from:0,to:1};var time=0.5;if(!enable){direction={from:1,to:0};time=0.9;}
if("undefined"!=set_time){time=set_time;}
this.animation=new Y.util.Anim($(id),{opacity:direction},time,Y.util.Easing.easeOut);if(typeof(callback)=='function'){this.animation.onComplete.subscribe(callback);}
this.animation.animate();}},setLock:function(type){this.arr_lock_status[type]=1;},releaseLock:function(type){this.arr_lock_status[type]=0;},isLocked:function(type){if('undefined'==typeof(this.arr_lock_status[type])){return false;}else if(this.arr_lock_status[type]){return true;}else{return false;}},getModuleType:function(type){for(var j=0;j<this.arr_non_snn_modules.length;j++){if(this.arr_non_snn_modules[j]==type)return"non_snn";}
for(var i=0;i<this.arr_snn_modules.length;i++){if(this.arr_snn_modules[i]==type)return"snn";}
return'';},nextPage:function(type,vertical){if("undefined"!=typeof(vertical))
this.current_notSNN_vertical=vertical;var mod_type=this.getModuleType(type);if("snn"==mod_type){this.init();}else if("non_snn"==mod_type){this.not_snn_init();}
var next_index=this.arr_current_page[type]+1;if(next_index>this.arr_max_page[type]){if("snn"==mod_type){next_index=this.arr_max_page[type];}else{next_index=0;}}
this.setPage(next_index,type);},prevPage:function(type,vertical){if("undefined"!=typeof(vertical))
this.current_notSNN_vertical=vertical;var mod_type=this.getModuleType(type);if("snn"==mod_type){this.init();}else if("non_snn"==mod_type){this.not_snn_init();}
var prev_index=this.arr_current_page[type]-1;if(prev_index<0){if("snn"==mod_type){prev_index=0;}else{prev_index=this.arr_max_page[type];}}
this.setPage(prev_index,type);},initAutoClickMpPage:function(){this.nextNotSnnMpPage();this.mpTimeout=setTimeout("SNPModule.initAutoClickMpPage()",this.ms);},nextNotSnnMpPage:function(vertical,user_click){this.nextPage('not_signed_mp',vertical);},prevNotSnnMpPage:function(vertical,user_click){this.prevPage('not_signed_mp',vertical);},initAutoClickMBCPage:function(){this.nextNotSnnMBCommentsPage();this.mpTimeout=setTimeout("SNPModule.initAutoClickMBCPage()",this.ms);},nextNotSnnMBCommentsPage:function(vertical,user_click){this.nextPage('not_signed_mbc',vertical);},prevNotSnnMBCommentsPage:function(vertical,user_click){this.prevPage('not_signed_mbc',vertical);},initAutoClickMBFPage:function(){this.nextNotSnnMBFacebookPage();this.mpTimeout=setTimeout("SNPModule.initAutoClickMBFPage()",this.ms);},nextNotSnnMBFacebookPage:function(vertical,user_click){this.nextPage('not_signed_mbf',vertical);},prevNotSnnMBFacebookPage:function(vertical,user_click){this.prevPage('not_signed_mbf',vertical);},initAutoClickMBTPage:function(){this.nextNotSnnMBTwitterPage();this.mpTimeout=setTimeout("SNPModule.initAutoClickMBTPage()",this.ms);},nextNotSnnMBTwitterPage:function(vertical,user_click){this.nextPage('not_signed_mbt',vertical);},prevNotSnnMBTwitterPage:function(vertical,user_click){this.prevPage('not_signed_mbt',vertical);},nextNotSnnMpReportersPage:function(vertical){this.nextPage('not_signed_mpr',vertical);},prevNotSnnMpReportersPage:function(vertical){this.prevPage('not_signed_mpr',vertical);},nextNotSnnDontMissPage:function(){this.nextPage('not_signed_dm');},prevNotSnnDontMissPage:function(){this.prevPage('not_signed_dm');},nextFriendsPage:function(){this.nextPage('friends');},prevFriendsPage:function(){this.prevPage('friends');},nextMpPage:function(){this.nextPage('mp');},prevMpPage:function(){this.prevPage('mp');},nextMpReportersPage:function(){this.nextPage('mpr');},prevMpReportersPage:function(){this.prevPage('mpr');},nextMpBNPage:function(){this.nextPage('mp_bn');},prevMpBNPage:function(){this.prevPage('mp_bn');},nextMpHPPage:function(){this.nextPage('mp_hp');},prevMpHPPage:function(){this.prevPage('mp_hp');},nextMBCPage:function(){this.nextPage('mbc');},prevMBCPage:function(){this.prevPage('mbc');},nextMBFPage:function(){this.nextPage('mbf');},prevMBFPage:function(){this.prevPage('mbf');},nextMBTPage:function(){this.nextPage('mbt');},prevMBTPage:function(){this.prevPage('mbt');},nextDMPage:function(){this.nextPage('dm_hp');},prevDMPage:function(){this.prevPage('dm_hp');},nextActPage:function(){this.nextPage('act');},prevActPage:function(){this.prevPage('act');},nextCommentPage:function(){this.nextPage('comment');},prevCommentPage:function(){this.prevPage('comment');},nextFollowerPage:function(){this.nextPage('follower');},prevFollowerPage:function(){this.prevPage('follower');},removeCurrentFollower:function(){if(this.arr_max_page['follower']==0){HuffPoUtil.hide('snp_follower');}else{var page=$('snp_follower_page_'+this.arr_current_page['follower']);if(this.arr_max_page['follower']!=this.arr_current_page['follower']){SNPModule.nextFollowerPage();this.arr_current_page['follower']--;}else SNPModule.prevFollowerPage();this.arr_max_page['follower']--;var parent=page.parentNode;parent.removeChild(page);for(var i=0,j=0;i<parent.childNodes.length;i++)if(parent.childNodes[i].nodeName=='DIV')
parent.childNodes[i].id='snp_follower_page_'+j++;if(this.arr_max_page['follower']==0){HuffPoUtil.hide('snp_follower_pagination');}else{$('snp_follower_max_page_counter').innerHTML=this.arr_max_page['follower']+1;$('snp_follower_page_counter').innerHTML=this.arr_current_page['follower']+1;}}},acceptFollower:function(e,userid){SocialFriends.acceptFollower(userid,function(){SNPModule.removeCurrentFollower();},function(){});},declineFollower:function(e,userid){SocialFriends.declineFollower(userid,function(){SNPModule.removeCurrentFollower();},function(){});},nextTwitterPage:function(){this.nextPage('twitter_friends');},prevTwitterPage:function(){this.prevPage('twitter_friends');},nextInfluencersPage:function(){this.nextPage('twitter_influencers');},prevInfluencersPage:function(){this.prevPage('twitter_influencers');},removeRecentActivity:function(id,is_first){this.init();var o_id='snp_recent_activity_'+id;var get_url='/users/social_news_project/snp_module_action.php?action=delete&id='+id+'&user_id='+this.url_user_id+'&page='+this.arr_current_page['act'];if(is_first){o_id='snp_current_reading_entry';get_url+='&type=entry';SNProject.track(id,'delete_entry_view');}
SNPModule.animatePage(0,o_id);C.asyncRequest('GET',get_url,{success:function(o){if(o.responseText!=''){if(SNPModule.animation){SNPModule.animation.stop();}
var obj=$(o_id);var p=obj.parentNode;p.removeChild(obj);if(o.responseText!='ok'){p.innerHTML+=o.responseText;SNPModule.animatePage(1,p.lastChild.id);for(var i=SNPModule.arr_current_page['act']+1;i<=SNPModule.arr_max_page['act'];i++){var tmp='';if(tmp=$('snp_act_page_'+i)){var parent=tmp.parentNode;parent.removeChild(tmp);}}}
else{var last_child=Dom.getLastChild(p);if(!last_child||last_child.id=='snp_current_reading_entry'){p.innerHTML='You have no recorded activities';}}}
else{HPError.e();SNPModule.animatePage(1,o_id);}},failure:function(o){HPError.e();SNPModule.animatePage(1,o_id);},timeout:5000});},show_user_level_box:function(){var height=173;var animation=new Y.util.Anim($("snn_module_user_badge"),{height:{to:height}},1,Y.util.Easing.easeOut);animation.animate();},hide_user_level_box:function(my_level){var animation=new Y.util.Anim($("snn_module_user_badge"),{height:{to:0}},1,Y.util.Easing.bounceOut);HuffCookies.setCookie("level_knowledge",my_level);animation.animate();},lightbox:{isFormLoaded:false,zone_info:'',init:function(){if(typeof(zone_info)!="undefined")
this.zone_info=zone_info;else if(typeof(QV)!="undefined"&&typeof(QV.ad_zone)!="undefined")
this.zone_info=QV.ad_zone;else
this.zone_info='huffpost.general/general';},show:function(ltype,entry_id,entity_id,friend_user_id,identification){if(!this.isFormLoaded){var me=this;var url='/users/social_news_project/snp_module_lightbox.php?type=entry_details&entry_id='+entry_id+'&user_id='+SNPModule.url_user_id;switch(ltype){case'comment_details':url='/users/social_news_project/snp_module_lightbox.php?type=comment_details&entry_id='+entry_id+'&user_id='+SNPModule.url_user_id+'&comment_id='+entity_id;break;case'vote_details':url='/users/social_news_project/snp_module_lightbox.php?type=vote_details&entry_id='+entry_id+'&user_id='+SNPModule.url_user_id+'&friend_user_id='+friend_user_id+'&slideshow_id='+entity_id;break;case'poll_vote_details':url='/users/social_news_project/snp_module_lightbox.php?type=poll_vote_details&entry_id='+entry_id+'&user_id='+SNPModule.url_user_id+'&friend_user_id='+friend_user_id+'&user_answer_id='+entity_id;break;case'comment_activity_details':url='/users/social_news_project/snp_module_lightbox.php?type=comment_activity_details&entry_id='+entry_id+'&user_id='+SNPModule.url_user_id+'&parent_id='+entity_id+'&reply_user_id='+friend_user_id+'&comment_id='+identification;break;case'contribute_details':url='/users/social_news_project/snp_module_lightbox.php?type=contribute_details&entry_id='+entry_id+'&user_id='+SNPModule.url_user_id+'&contribute_id='+entity_id+'&friend_user_id='+friend_user_id;break;}
HuffConnect.showLoader();YAHOO.util.Connect.asyncRequest('GET',url,{success:function(o){me.onLoadSuccess(o);},failure:function(o){me.onLoadFail(o);}});}},onLoadSuccess:function(o){HuffConnect.hideModal();HuffConnect.socialModal({inner_html:o.responseText,onclose:this.close});this.isFormLoaded=true;if(jQuery('#snn_qr_ad').length)
{if(HuffPoUtil.trim(jQuery('#snn_qr_ad').html())=="")
{$('snn_qr_ad').innerHTML='<div class="visible_frame"><iframe src="http://ad.doubleclick.net/adi/'+this.zone_info+';ptile=4;sz=300x250;ord='+HuffPoUtil.WEDGJE.ord()+'?" width="300" height="250" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" name="social_news_300x250" id="social_news_300x250"></iframe></div>';}else{$('snn_qr_ad').style.display="block";}}},onLoadFail:function(o){HPError.e();HuffConnect.hideModal();},close:function(){SNPModule.lightbox.isFormLoaded=false;}},stealth:{current_status:'',hidden:false,init:function(){if(jQuery('#snp_friends_module .stealth-mode')){jQuery('#snp_friends_module .stealth-mode .switcher').click(function(){SNPModule.stealth.update();});if(HuffPrefs.get('read_tracking')===true){this.disableStealthMode();}
else{this.enableStealthMode();}}},update:function(){var url='';switch(this.current_status){case'on':url='/users/social_news_project/snp_module_action.php?action=change_stealth&user_id='+SNPModule.url_user_id+'&value='+1;break;default:url='/users/social_news_project/snp_module_action.php?action=change_stealth&user_id='+SNPModule.url_user_id+'&value='+0;break;}
var me=this;YAHOO.util.Connect.asyncRequest('GET',url,{success:function(o){me.onSuccess(o);},failure:function(o){me.onFail(o);}});},onSuccess:function(o){if('ok'==o.responseText){if(SNPModule.skin)
SNPModule.skinned_module_stealth.onUpdated();if('on'==SNPModule.stealth.current_status){this.disableStealthMode();}
else
{this.enableStealthMode();}}
else{HPError.e();}},onFail:function(o){},close:function(){HuffPoUtil.hide('snp_stealth_bubble');this.hidden=true;},disableStealthMode:function(){jQuery('#snp_friends_module .stealth-mode .on').removeClass('active');jQuery('#snp_friends_module .stealth-mode .off').addClass('active');SNPModule.stealth.current_status='off';},enableStealthMode:function(){jQuery('#snp_friends_module .stealth-mode .off').removeClass('active');jQuery('#snp_friends_module .stealth-mode .on').addClass('active');SNPModule.stealth.current_status='on';}},entryInside:{loading:function(responseText){if($('huffpost_snn_entry_inside')){var removed=$('huffpost_snn_entry_inside').parentNode.removeChild($('huffpost_snn_entry_inside'));}
var div=document.createElement('div');div.setAttribute('id','huffpost_snn_entry_inside');div.innerHTML='<br/>'+responseText+'<br/>';if(HPConfig.wide_format){if(2==HPConfig.blog_id){var news_content=Dom.get('news_content');var news_content_first_child=Dom.getFirstChild(news_content);if(HPConfig.entry_expanded>0){var element=Dom.getElementsByClassName('link_entries','DIV',news_content_first_child)[0];if(element)news_content_first_child.insertBefore(div,element.nextSibling);else news_content.insertBefore(div,news_content_first_child);}else{news_content.insertBefore(div,news_content_first_child);}}else if(3==HPConfig.blog_id){Dom.get('blog_content').insertBefore(div,Dom.get('blog_content').firstChild);}}else if($('entry_12345')){$('entry_12345').appendChild(div);}else if($('entry_body')){var added=$('entry_body').appendChild(div);}
var tabView=new YAHOO.widget.TabView('snn_entry_inside');this.init();},init:function(){SNPModule.init_module('entry_inside_comment');if(SNPModule.arr_max_page['entry_inside_comment']>9){$('entry_inside_all_pages').style.width="140px";}},next:function(){this.set_page(SNPModule.arr_current_page['entry_inside_comment']+1);},prev:function(){this.set_page(SNPModule.arr_current_page['entry_inside_comment']-1);},set_page:function(page){if(SNPModule.isLocked('entry_inside_comment'))return false;if(page==SNPModule.arr_current_page['entry_inside_comment']){return false;}else if(page<0){return false;}else if(page>SNPModule.arr_max_page['entry_inside_comment']){return false;}
$("count_comment_"+SNPModule.arr_current_page['entry_inside_comment']).className="";$("count_comment_"+page).className="entry_inside_current_page";SNPModule.setPage(page,'entry_inside_comment');if("none"==$('count_comment_'+page).style.display){HuffPoUtil.hide('count_comment_'+(page+9));$('count_comment_'+page).style.display="inline-block";}
if(page>8){HuffPoUtil.hide('count_comment_'+(page-9));$('count_comment_'+page).style.display="inline-block";}}},snnTwitterStatus:function(params){var url_to_short=(params&&params.url_to_short)||false;var status=$('tweet_status').value;status=status.replace(/^\s+/g,"");status=status.replace(/\s+$/g,"");if(status.length<=140&&status!=''){status=encodeURIComponent(status);var get_data="?tweet="+status+"&eid="+HuffPoUtil.GetEntryID();if(url_to_short){get_data+="&url_to_short="+encodeURIComponent(url_to_short);}
$('snn_resp_tweet').innerHTML="<div style=\"text-align:center\"><img src=\"/images/ajax-loader.gif\" /></div>";C.asyncRequest('GET','/users/social_news_project/twitter/post_to_twitter.php'+get_data,{success:function(o){var response_obj=eval(" ( "+o.responseText+" ) ");if(response_obj&&response_obj.response_code=="200"){$('snn_resp_tweet').innerHTML=_("Twitter status set!");HuffPoUtil.flash($('snn_resp_tweet'));$('tweet_status').value="";SNPModule.textCounter();}
else{$('snn_resp_tweet').innerHTML=_("Unable to process!");HuffPoUtil.hide('hidden_snp_body');}},failure:function(o){if($('hidden_snp_body')){HuffPoUtil.hide('hidden_snp_body');HPError.e();}},timeout:20000});}
else if(status.length>140){$('snn_resp_tweet').innerHTML=_("Tweet limit exceeded!");$('tweet_status').focus();}
else{$('snn_resp_tweet').innerHTML=_("Please enter some text!");$('tweet_status').focus();}
if($('snn_resp_tweet'))
setTimeout("$('snn_resp_tweet').innerHTML='';",5000);return false;},twitterModule:function(callback){this.error_msg=_("Sorry, we had some trouble getting your Tweets. Please check back soon!");var entry=HuffPoUtil.GetEntryID();this.twitter_timeline_type='home';var mod_el=$(this.tweetout_module_div);if(mod_el){mod_el.style.display="block";mod_el.innerHTML='<div style="text-align:center; padding:20px 0;"><div class="snn_twitter_loading">'+_("Loading Twitter module...")+'</div><div class="snn_twitter_loading_img"><img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" alt="" /></div></div>';var callback={argument:[callback],success:function(o){var callback=o.argument[0];SNPModule.TwitterCallbacks(o,callback);},failure:function(o){if($('hidden_snp_body')){HuffPoUtil.hide('hidden_snp_body');HPError.e();}}};var fb_session=HPFB.getSessionForServer();var url='/users/social_news_project/twitter/show_twitter_module.php?'+(entry?'entry_id='+entry:'')+'&'+fb_session;if(SNPModule.skin)
url+=((/\?/.test(url))?'&':'?')+'skin='+SNPModule.skin;var co=YAHOO.util.Connect.asyncRequest('GET',url,callback);}},TwitterCallbacks:function(o,callback){var callback_type=typeof(callback);var response=o.responseText;var error_msg=SNPModule.twitterModule.error_msg;if(response!=""){var js_resp=JSON.parse(response);var resp=js_resp.html;var resp_code=js_resp.response_code;var mod_el=$(this.tweetout_module_div);if(resp&&resp_code==200){if(mod_el){mod_el.innerHTML=resp;if($('top_twitter_info'))
Dom.setStyle($('top_twitter_info'),'display','none');if($('service_bottom_bar')&&SNProject.service_bar=='twitter')
Dom.setStyle($('service_bottom_bar'),'display','none');if(callback_type=='function')
callback();SNPModule.init_module('twitter_friends');HuffPoUtil.yellowFlash(this.tweetout_module_div);E.on($('tweet_status'),'keyup',HPUtil.enforceTextAreaLimit,{chars:140});E.on($('tweet_status'),'change',HPUtil.enforceTextAreaLimit,{chars:140});if($('twitter_linked_status')){if(parseInt($('twitter_linked_status').innerHTML)==0){mod_el.innerHTML="";Dom.setStyle(mod_el,'display','none');SNPModule.networkToLink();HuffCookies.setCookie('twitter_linked','0');}}
SNPModule.resetTwitterModuleValues();huff.emit('content/update');if($('max_tweet_id'))
SNPModule.max_tweet_id=parseInt($('max_tweet_id').innerHTML);if(SNPModule.check_new_tweets_flag)
{if(SNPModule.interval_id){clearInterval(SNPModule.interval_id);SNPModule.interval_id=false;}
SNPModule.interval_id=setInterval(function(){SNPModule.checkNewTweets();},SNPModule.check_tweets_rate);}
SNPModule.new_tweets_found=false;if(SNPModule.skin){SNPModule.show_skinned_twitter_module();}
if(HPAds.tweet_comm_info&&$('tweet_status')){$('tweet_status').value+=' '+HPAds.tweet_comm_info.hash;$('snn_twitter_comm_text').innerHTML=HPAds.tweet_comm_info.text;$('snn_twitter_comm_text_cb').checked=true;Dom.removeClass('snn_twitter_comm_text_wrapper','hidden');E.on('snn_twitter_comm_text_cb','click',function(){if($('snn_twitter_comm_text_cb').checked){if(!$('tweet_status').value.match(HPAds.tweet_comm_info.hash))$('tweet_status').value+=' '+HPAds.tweet_comm_info.hash;}
else{$('tweet_status').value=$('tweet_status').value.replace(' '+HPAds.tweet_comm_info.hash,'');}
SNPModule.textCounter();});}}}
else{mod_el.innerHTML="<div class='module_error_response' style='text-align:center; padding:5px 0; color:#444;'><div class='error_message'>"+_("Unable to load the Twitter module")+"</div></div>";HPError.e({msg:error_msg,obj:response});}}
else{HPError.e(error_msg);}},check_new_tweets_flag:true,max_tweet_id:0,check_tweets_rate:300000,new_tweets_found:false,new_tweet_call_status:false,times:1,interval_id:false,checkNewTweets:function()
{if(HPConfig&&HPConfig.no_twitter_refresh){return false;}
if(this.max_tweet_id&&!this.new_tweet_call_status)
{var url="/users/social_news_project/twitter/check_new_tweets.php";url+="?since_id="+this.max_tweet_id+"&type="+this.twitter_timeline_type;var cObj=C.asyncRequest('GET',url,{success:function(o)
{var resp=JSON.parse(o.responseText);var new_tweets=parseInt(resp.total_new_tweets);var check_tweets=resp.check_new_tweets;if(new_tweets>=20){check_tweets=0;}
if(check_tweets==0)
{clearInterval(SNPModule.interval_id);if(window.HPConfig){window.HPConfig.no_twitter_refresh=true;}}
if(new_tweets&&SNPModule.max_tweet_id)
{SNPModule.new_tweets_found=true;if($("more_friend_tweets"))
{if(SNPModule.twitter_timeline_type=='home')
{var ttext=_("New tweets!");if(new_tweets==1){ttext=_("New tweet!");}}
else if(SNPModule.twitter_timeline_type=='mentions')
{var ttext=_("New mentions!");if(new_tweets==1){ttext=_("New mention!");}}
$('more_friend_tweets').innerHTML="<a style=\"color:#222;\" href=\"javascript:void(0);\" onclick=\"SNPModule.twitterTimeline('"+SNPModule.twitter_timeline_type+"')\"><div class=\"some_new_tweets\">"+new_tweets+" "+ttext+"</div></a>";}}
SNPModule.new_tweet_call_status=false;},failure:function(o){if($('hidden_snp_body')){HuffPoUtil.hide('hidden_snp_body');HPError.e();SNPModule.new_tweet_call_status=false;}},timeout:10000});this.new_tweet_call_status=true;}
return false;},textCounter:function(input,countField){var maxlimit=140;var field=input||$('tweet_status');countField=countField||$('tweet_char_limit');if(field){if(field.value.length>maxlimit){countField.innerHTML=0;new YAHOO.util.ColorAnim(field,{backgroundColor:{from:'#26CFCC',to:'#FFFFFF'}});}
else
countField.innerHTML=maxlimit-field.value.length;}},favoriteTweet:function(status_id,cb){if(cb==null)cb=function(){};var get_data="?status_id="+status_id;var el=$('fav_span_'+status_id);C.asyncRequest('GET','/users/social_news_project/twitter/favorite_tweet.php'+get_data,{success:function(o){if(o.responseText&&/success_favorited/.test(o.responseText)){if(el)el.innerHTML="<img src=\"/images/tfaved.gif\" />";$('snn_resp_tweet').innerHTML=_("Already a favorite!");HuffPoUtil.flash($('snn_resp_tweet'));}
else if(o.responseText&&/success/.test(o.responseText)){if(el)el.innerHTML="<img src=\"/images/tfaved.gif\" />";$('snn_resp_tweet').innerHTML=_("Tweet added to Favorites");HuffPoUtil.flash($('snn_resp_tweet'));}
else{$('snn_resp_tweet').innerHTML=_("Unable to process!");HuffPoUtil.hide('hidden_snp_body');}
cb(o.responseText);if($('snn_resp_tweet'))
setTimeout("if($('snn_resp_tweet')){$('snn_resp_tweet').innerHTML='';}",5000);},failure:function(o){if($('hidden_snp_body')){HuffPoUtil.hide('hidden_snp_body');HPError.e();}
cb('failure');},timeout:20000});},reTweet:function(status_id){var screen_name=$('username_'+status_id).innerHTML;var tweet=$('plain_tweet_'+status_id).innerHTML;var el=$('tweet_status');if(tweet&&screen_name){el.value="RT @"+screen_name+" "+tweet;if(el.value.length>140){el.value=el.value.substr(0,137)+"...";}
this.textCounter();el.focus();}
HPTrack.trackEvent('twitter_snn','click','retweet');return;},replyTweet:function(status_id){var screen_name=$('username_'+status_id).innerHTML;var el=$('tweet_status');if(el&&screen_name){el.value="@"+screen_name+" ";var end=el.value.length;if(el.setSelectionRange)
el.setSelectionRange(end,end);}
return false;},twitterTimeline:function(type){if(type==this.twitter_timeline_type&&!this.new_tweets_found)
return;else if(this.new_tweets_found){if($("more_friend_tweets"))$("more_friend_tweets").innerHTML="";}
var error_msg=SNPModule.twitterModule.error_msg;this.max_tweet_id=0;if(type=='mentions'){$('ttop_links').innerHTML="<a href=\"javascript:void(0);\" id=\"tmore_links\" onclick=\"SNPModule.twitterTimeline('home');\"><span class=\"small_ttext\">"+_("Get Back")+"</span></a>";}
else if(type=='home'){$('ttop_links').innerHTML="";}
var entry=HuffPoUtil.GetEntryID();var fb_session=HPFB.getSessionForServer();var get_data="?type="+type+"&new_tweets_found="+this.new_tweets_found+(entry?'&entry_id='+entry:'')+'&get_updates=1&'+fb_session;this.twitter_timeline_type=type;$('snp_twitter_friends_module_all_pages_here').innerHTML='<div style="text-align:center; padding:15px 0;"><div class="snn_twitter_loading_img"><img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" alt="" /></div></div>';HuffPoUtil.hide('tmodpaging');C.asyncRequest('GET','/users/social_news_project/twitter/show_twitter_module.php'+get_data,{success:function(o)
{var response=o.responseText;if(response!="")
{var js_resp=JSON.parse(response);var resp=js_resp.html;var resp_code=js_resp.response_code;if(resp_code==200)
{jQuery('#snp_twitter_friends_module_all_pages_here').html(resp);jQuery('#snp_twitter_friends_page_counter').html(1);SNPModule.arr_max_page['twitter']=parseInt(jQuery('#snp_twitter_max_page_counter').text())-1;SNPModule.arr_current_page['twitter']=0;HuffPoUtil.show('tmodpaging');SNPModule.new_tweets_found=false;SNPModule.max_tweet_id=js_resp.max_friend_tweet_id;}
else
{HPError.e({msg:error_msg,obj:response});}}
else{HPError.e(error_msg);}},failure:function(o){HPError.e();},timeout:20000});},replyToUser:function(status_id){var screen_name=$('username_'+status_id).innerHTML;var el=$('tweet_status');if(screen_name){el.value="@"+screen_name+" ";this.textCounter();el.focus();}
HPTrack.trackEvent('twitter_snn','click','reply');return;},user_profile_open:false,twitter_id_opened:0,user_profile_call_status:false,show_user_bio:false,resetTwitterModuleValues:function(){this.user_profile_open=false;this.twitter_id_opened=0;this.user_profile_call_status=false;this.show_user_bio=false;},facebook_like_button:function(id,url,type,obj){if(HPBrowser.isIEOld()){Dom.setAttribute($('snp_mp_hp_subpage_'+id),'onmouseover',null);return false;}
if($('fb_like_button_iframe_'+id)){$('fb_like_button_iframe_'+id).src='http://www.facebook.com/plugins/like.php?locale=en_US&href='+url+'&layout=button_count&amp;show_faces=true&width=165&action='+type+'&colorscheme=light&height=21';$('fb_like_button_iframe_'+id).onload=function(){$('fb_like_button_iframe_'+id).className+=' white_bg';};}
if($('snp_mp_hp_subpage_'+id)){Dom.setAttribute($('snp_mp_hp_subpage_'+id),'onmouseover',null);}
else if(obj){Dom.setAttribute(obj,'onmouseover',null);}}};SNPModule.HotOn={init:function()
{var tracker=HPTrack.Module('hot_on','Hot On');tracker.impression();var event_handler=new HPTrack.Module.DelegatedHandler(tracker);E.on('most_popular_social','click',event_handler,this,true);}};SNPModule.initLikeTracking=function(tracker)
{HPFB.ensureInit(function()
{var callback=function(action,href,elem)
{var label='Facebook';label=HPTrack.Module.getTrackingPrefix(elem.dom)+label;tracker.event(action,label);return{localy_tracked:true};}
HPFB.Tracking.Subscribe(['Liked','Unliked','Recommended','Unrecommended'],['mostpop_entry'],true,callback);});};SNPModule.addEntriesInside=function(html){html=html||'';HPUtil.loadAndRun('/assets/js.php?f=yui_2.7.0/build/tabview/tabview-min.js',function(){HPUtil.onPageReady(function(){SNPModule.entryInside.loading(html);});},null,this);return;};
var HPUser={'is_logged_in':function()
{if(HuffCookies.getCookie('huffpost_user')&&HuffCookies.getCookie('huffpost_user_id'))
return true;return false;},'user_id':function(){return HuffCookies.getUserId()},'username':HuffCookies.getUserName(),'user_guid':HuffCookies.getUserGuid(),'logout':function(logout_by_url,logout_facebook)
{SNProject.track(HuffCookies.getUserId(),'user_log_out',1);if($('avatar_logged_in'))$('avatar_logged_in').style.display='none';if($("wendybird_user"))$("wendybird_user").style.display='none';if($('not_logged_user'))$('not_logged_user').style.display='block';var el=document.getElementById('fbook_main_text_notloggedin');if(el)el.style.display="block";el=document.getElementById('join_login_fbook_notloggedin');if(el)el.style.display="block";el=document.getElementById('fConnect_img_container');if(el)el.style.display="block";el=document.getElementById('fbook_main_text_loggedin');if(el)el.style.display="none";el=document.getElementById('join_login_fbook_loggedin');if(el)el.style.display="none";el=document.getElementById('fbook_main_text_name');if(el)el.innerHTML=HuffCookies.getUserName().replace(/[\+_]/g,' ');el=document.getElementById('fConnect_img_container');if(el)el.style.display="block";var cookie_names=new Array('huffpost_user','huffpost_photo_mode','huffpost_snp_status','huffpost_user_id','huffpost_user_guid');for(var c=0;c<cookie_names.length;c++)
{HuffCookies.destroyCookie(cookie_names[c]);}
el=$('facebook_friends_unit_wrapper');if(el)HuffPoUtil.hide('facebook_friends_unit_wrapper');el=$('snn_entry_inside_module');if(el)HuffPoUtil.hide(el);SNPModule.showHpModules();return true;},getUserCookies:function(get_empty_cookies)
{get_empty_cookies=get_empty_cookies||false;var resp={huffpost_user_guid:false,huffpost_user_id:false,huffpost_user:false,huffpost_levels:false,huffpost_prefs:false,huffpost_photo_mode:false};if(get_empty_cookies)
return resp;var HC=HuffCookies;resp.huffpost_user_guid=HuffCookies.getUserGuid()||false;resp.huffpost_user_id=HuffCookies.getUserId()||false;resp.huffpost_user=HuffCookies.getUserName()||false;resp.huffpost_levels=HC.getCookie('huffpost_levels')||false;resp.huffpost_prefs=HC.getCookie('huffpost_prefs')||false;resp.huffpost_photo_mode=HC.getCookie('huffpost_photo_mode')||false;return resp;}};
var HpMessage={message_ids:Array(),contacts:Array(),my_id:0,reply_id:0,reply_type:null,reply_all_str:'',first_unread:0,Init:function()
{if($('hp_message_ids')){if(!HuffPoUtil.getUrlVar('dm')&&!$('hp_message_ids').innerHTML.length)
{HuffPoUtil.hide('snp_message_notice');return false;}
var div_inner=$('hp_message_ids');if(div_inner)
{this.InitNotice(div_inner.innerHTML);}
this.lightbox.init();this.my_id=HuffCookies.getUserId();}},InitNotice:function(str_ids)
{if(!str_ids.length)
{HuffPoUtil.hide('snp_message_notice_a');this.message_ids=new Array();}
else
{this.message_ids=str_ids.split(',');$('snp_message_notice_a').innerHTML=(this.message_ids.length>1)?sprintf(_("read %s new messages"),this.message_ids.length):sprintf(_("read %s new message"),this.message_ids.length);HuffPoUtil.show('snp_message_notice_a','inline');}},ReadNext:function()
{if(!this.message_ids.length)return false;this.lightbox.show(this.message_ids[0]);},ReplyBoxEdited:function()
{HpMessage.reply_type='custom';},ShowReplyBox:function(message_id)
{var rbox=$('hp_message_reply_box');var new_parent=$('hpm_message_'+message_id);if(!rbox)return false;if(new_parent)
{rbox.parentNode.removeChild(rbox);new_parent.appendChild(rbox);}
HuffPoUtil.show('hp_message_reply_box');$('hpm_reply_box').focus();if(message_id>0)
{$('hpm_reply_box_subject').value='Re: '+HuffPoUtil.trim($('hpm_subject_text').innerHTML);var btn_y=Dom.getY('hpm_btn_submit');var mess_y=Dom.getY('hpm_message_'+message_id);var scroll_top=Dom.getDocumentScrollTop()
var viewport_y=Dom.getViewportHeight();var d_offset=scroll_top+viewport_y;if(btn_y>d_offset-20)
{if(btn_y-mess_y>viewport_y)
{HuffPoUtil.ScrollTo('hp_message_reply_box');}
else
{HuffPoUtil.ScrollTo('hpm_message_'+message_id);}}
else
{if(mess_y<scroll_top&&viewport_y<mess_y-btn_y)
{console.log('scroll (2) to hpm_message_'+message_id);HuffPoUtil.ScrollTo('hpm_message_'+message_id);}}}
(function(){var oDS=new YAHOO.util.LocalDataSource(HpMessage.contacts);oDS.responseSchema={fields:["name"]};var oAC=new YAHOO.widget.AutoComplete("hpm_reply_box_to","hpm_reply_box_to_container",oDS);oAC.prehighlightClassName="yui-ac-prehighlight";oAC.delimChar=[","];oAC.animSpeed=0.2;oAC.autoHighlight=true;oAC.useIFrame=true;oAC.queryMatchContains=true;oAC.animVert=false;oAC.queryDelay=0;oAC.resultTypeList=false;var highlightMatch=function(full,snippet,matchindex){return full.substring(0,matchindex)+
"<span style='font-weight:bold;'>"+
full.substr(matchindex,snippet.length)+
"</span>"+
full.substring(matchindex+snippet.length);};oAC.formatResult=function(oResultData,sQuery,sResultMatch)
{var data=oResultData.name;var display='';var index=data.toLowerCase().indexOf(sQuery);if(index>-1){display=highlightMatch(data,sQuery,index);}
else{display=data;}
return display;};return{oDS:oDS,oAC:oAC};})();},EmptyMessageForm:function(message_id)
{if(!this.reply_id||this.reply_id==message_id)return true;var rbox=$('hpm_reply_box');if(HuffPoUtil.trim(rbox.value)!='')
{if(confirm(_('You have not sent a message, do you want to discard it?')))
{rbox.value='';return true;}
else
{rbox.focus();return false;}}
return true;},WriteNew:function(loaded)
{if(!loaded)
this.lightbox.show(0)
else
{if(!this.LoadContacts(1,null,0))
{HpMessage.ShowReplyBox(0);HpMessage.reply_type='custom';HpMessage.reply_id=0;}}},Reply:function(message_id)
{if(!this.EmptyMessageForm(message_id))return false;if(!this.LoadContacts(1,function(){HpMessage.FillReplyToBox(0,message_id)},message_id))
{HpMessage.ShowReplyBox(message_id);HpMessage.FillReplyToBox(0,message_id);}
this.reply_id=message_id;this.reply_type='reply_to_author';if(HuffPoUtil.trim($('hpm_reply_box_to').value)==this.reply_all_str)
{this.reply_type='reply_to_all';}},ReplyAll:function(message_id)
{if(!this.EmptyMessageForm(message_id))return false;if(!this.LoadContacts(1,function(){HpMessage.FillReplyToBox(1,message_id)},message_id))
{HpMessage.ShowReplyBox(message_id);HpMessage.FillReplyToBox(1,message_id);}
this.reply_id=message_id;this.reply_type='reply_to_all';},Send:function()
{var txt=HuffPoUtil.trim($('hpm_reply_box_to').value);if(!txt.length)
{HPError.e(_('Please set recipients (Tip: try to type any of your friends and you get a list of matched names)'),1);return false;}
txt=HuffPoUtil.trim($('hpm_reply_box_subject').value);if(!txt.length)
{HPError.e(_('Please write a subject'),1);return false;}
txt=HuffPoUtil.trim($('hpm_reply_box').value);if(!txt.length)
{HPError.e(_('Please write a message'),1);return false;}
if(txt.length>1000)
{HPError.e(sprintf(_('Your message is too long. Please remove %s characters'),(txt.length-1000)),1);return false;}
$('hpm_btn_submit').src=_('/images/v/btn_submit.png');var me=this;var url='/users/direct_message/send.php?user_id='+this.lightbox.url_user_id;var post_body='reply_id='+encodeURIComponent(this.reply_id)+'&reply_type='+encodeURIComponent(this.reply_type)+'&to='+encodeURIComponent($('hpm_reply_box_to').value)+'&text='+encodeURIComponent($('hpm_reply_box').value)+'&subject='+encodeURIComponent($('hpm_reply_box_subject').value);YAHOO.util.Connect.asyncRequest('POST',url,{success:function(o){me.sendSuccess(o);},failure:function(o){me.sendFail(o);}},post_body);},sendSuccess:function(o)
{$('hpm_btn_submit').src=_('/images/v/btn_submit-blue.png');var response=JSON.parse(o.responseText);if(!response)
{HPError.e(o.responseText,1);}
else if(typeof(response.message_id)=="undefined"||response.message_id<=0)
{HPError.e(response.error_message,1)}
else
{HuffPoUtil.hide('hp_message_reply_box');$('hpm_reply_box').value='';if(response.parent_id)
{var parent_node=$('hpm_message_'+response.parent_id);var p=document.createElement('p');p.className='comment-posted';p.innerHTML='';if(HpMessage.reply_type=='reply_to_all')
{p.innerHTML+=_('You just replied to all');}
else
{p.innerHTML+=sprintf(_('You just replied to %s'),$('hpm_reply_box_to').value);}
p.innerHTML+=': '+response.message;parent_node.appendChild(p);}
else
{HuffConnect.hideModal();}}},sendFail:function(o)
{HPError.e(null,1);$('hpm_btn_submit').src=_('/images/v/btn_submit-blue.png');},FillReplyToBox:function(type,message_id)
{if(type==0)
{$('hpm_reply_box_to').value=$('hpm_user_from_'+message_id).innerHTML;}
else
{$('hpm_reply_box_to').value=this.reply_all_str;}},LoadContacts:function(display_spinner,callback,message_id)
{if(this.contacts.length)
{HuffPoUtil.hide('hp_message_contacts_loading');return false;}
if(this.contacts==-1)
{return false;}
if(display_spinner)
{var spinner=$('hp_message_contacts_loading');var new_parent=$('hpm_message_'+message_id);if(spinner&&new_parent)
{spinner.parentNode.removeChild(spinner);new_parent.appendChild(spinner);HuffPoUtil.show('hp_message_contacts_loading');}}
this.contacts=-1;var me=this;var url='/users/direct_message/get_contacts.php?user_id='+this.lightbox.url_user_id;YAHOO.util.Connect.asyncRequest('GET',url,{success:function(o){me.contactsLoadSuccess(o,display_spinner,callback,message_id);},failure:function(o){me.contactsLoadFail(o,display_spinner,callback,message_id);}});return true;},contactsLoadSuccess:function(o,display_spinner,callback,message_id)
{HpMessage.contacts=JSON.parse(o.responseText);HuffPoUtil.hide('hp_message_contacts_loading');if(display_spinner)
{HpMessage.ShowReplyBox(message_id);}
if(typeof(callback)=="function")
{callback();}},contactsLoadFail:function(o,display_spinner,callback,message_id)
{HPError.e(_("Sorry, can't get your contacts list"),1);HuffPoUtil.hide('hp_message_contacts_loading');if(display_spinner)
{HpMessage.ShowReplyBox(message_id);}
if(typeof(callback)=="function")
{callback();}},ScrollToUnread:function()
{if(!this.first_unread)return false;HuffPoUtil.ScrollTo('hpm_message_'+this.first_unread);},lightbox:{isFormLoaded:false,zone_info:'',url_user_id:'',init:function()
{if(typeof(zone_info)!="undefined")
this.zone_info=zone_info;else if(typeof(QV)!="undefined"&&typeof(QV.ad_zone)!="undefined")
this.zone_info=QV.ad_zone;else
this.zone_info='huffpost.general/general';this.url_user_id=SNPModule.url_user_id;},show:function(message_id)
{if(HpMessage.contacts!=0)
{}
HuffConnect.showLoader();if(!this.isFormLoaded)
{var me=this;var url='/users/direct_message/show_message.php?id='+message_id+'&user_id='+this.url_user_id+(new Date()).getTime();HuffPoUtil.show("huffpo_snn_is_loading");$('huff_snn_modal_common_inner').innerHTML="";YAHOO.util.Connect.asyncRequest('GET',url,{success:function(o){me.onLoadSuccess(o,message_id);},failure:function(o){me.onLoadFail(o);}});}},onLoadSuccess:function(o,message_id)
{HuffConnect.hideModal();HuffConnect.socialModal({inner_html:o.responseText});var hpm_all_other_users=$('hpm_all_other_users');if(hpm_all_other_users)
HpMessage.reply_all_str=HuffPoUtil.trim(hpm_all_other_users.innerHTML);this.isFormLoaded=true;this.show();var snn_qr_ad=$('snn_qr_ad');if(HuffPoUtil.trim(snn_qr_ad.innerHTML)==""){snn_qr_ad.innerHTML='<div class="visible_frame"><iframe src="http://ad.doubleclick.net/adi/'+this.zone_info+';ptile=4;sz=300x250;ord='+HuffPoUtil.WEDGJE.ord()+'?" width="300" height="250" marginwidth="0" marginheight="0" frameborder="0" scrolling="no"></iframe></div>';}else{snn_qr_ad.style.display="block";}
var el=$('_hp_message_ids_update');if(el)
{var update=HuffPoUtil.trim(el.innerHTML);if(!update.length)
{HuffPoUtil.hide('snp_message_notice_a','inline');}
else
{HpMessage.InitNotice(update);}}
if(message_id)
{E.addListener('hpm_reply_box_to','change',HpMessage.ReplyBoxEdited);HpMessage.first_unread=message_id;}
else
{HpMessage.WriteNew(1);}},onLoadFail:function(o){HPError.e(null,1);HuffConnect.hideModal();},close:function(){HpMessage.lightbox.isFormLoaded=false;}
}}
var SocialFriends={page_config:{current_page:{mutual:0,favored:0,fans:0},total_pages:{mutual:0,favored:0,fans:0}},user_ids:"",ignore_ids:"",happy_join:false,init:function()
{this.page_config.total_pages.mutual=parseInt(jQuery("#sf_mutual_total_pages").html())||0;this.page_config.total_pages.favored=parseInt(jQuery("#sf_favored_total_pages").html())||0;this.page_config.total_pages.fans=parseInt(jQuery("#sf_fans_total_pages").html())||0;this.user_ids=jQuery("#sf_fan_uids").html()||"";return;},previous_page:function(type)
{var page=this.page_config.current_page[type]-1;var divid_prefix="#social_friends_"+type+"_page_";if(jQuery(divid_prefix+page).length)
{jQuery(divid_prefix+this.page_config.current_page[type]).addClass("hidden");jQuery(divid_prefix+page).removeClass("hidden");this.page_config.current_page[type]=page;}
this.setPage(type);return;},next_page:function(type)
{var page=this.page_config.current_page[type]+1;var divid_prefix="#social_friends_"+type+"_page_";if(jQuery(divid_prefix+page).length)
{jQuery(divid_prefix+this.page_config.current_page[type]).addClass("hidden");jQuery(divid_prefix+page).removeClass("hidden");this.page_config.current_page[type]=page;}
this.setPage(type);return;},setPage:function(type)
{var page_num=this.page_config.current_page[type]+1;if(page_num==1)
{jQuery(".sf_"+type+"_prev").addClass("sf_prev_disabled").removeClass("sf_prev_enabled");jQuery(".sf_"+type+"_next").addClass("sf_next_enabled").removeClass("sf_next_disabled");}
else if(page_num==this.page_config.total_pages[type])
{jQuery(".sf_"+type+"_next").addClass("sf_next_disabled").removeClass("sf_next_enabled");jQuery(".sf_"+type+"_prev").addClass("sf_prev_enabled").removeClass("sf_prev_disabled");}
else
{jQuery(".sf_"+type+"_prev").addClass("sf_prev_enabled").removeClass("sf_prev_disabled");jQuery(".sf_"+type+"_next").addClass("sf_next_enabled").removeClass("sf_next_disabled");}
jQuery("#sf_"+type+"_current_page").html(page_num);return;},selectFriends:function(uid)
{var divid=jQuery("#follower_"+uid);var switcher=!(jQuery(divid).hasClass("friend_to_fan_checked"));jQuery(divid).toggleClass("friend_to_fan_checked",switcher);if(!switcher)
{this.user_ids=this.user_ids.replace(uid+",","");this.ignore_ids+=uid+",";}
else
{this.user_ids+=uid+",";this.ignore_ids=this.ignore_ids.replace(uid+",","");}
return;},saveFriends:function()
{if(this.user_ids==""&&this.ignore_ids=="")return;var postdata={user_ids:this.user_ids,ignore_ids:this.ignore_ids};var url="/users/social_news_project/followers_to_friends.php";jQuery(".sf_save_friends_button").addClass("hidden");jQuery(".sf_save_friends_loader").removeClass("hidden");jQuery.ajax({url:url,data:postdata,type:"POST",success:function(data,func,req){if(req.status!=200)return;var resp=JSON.parse(data);if(/success/.test(resp.status))
{SocialFriends.user_ids=SocialFriends.ignore_ids="";var text=resp.friends_message+""+resp.ignored_message;jQuery('.sf_fans_block').html(text);}},error:function(){HPError.e();}});},acceptFollower:function(userid,onsuccess,onerror)
{jQuery.ajax({url:"/users/friend_relations.php",data:{fan_id:userid,action:"accept"},type:"POST",success:function(data,func,req){if(/failure/.test(data))
HPError.e();if(onsuccess)
onsuccess(userid);},error:function(){if(onerror)
onsuccess(onerror);}});},declineFollower:function(userid,onsuccess,onerror)
{jQuery.ajax({url:"/users/friend_relations.php",data:{fan_id:userid,action:"ignore"},type:"POST",success:function(data,func,req){if(onsuccess)onsuccess(userid);},error:function(){if(onerror)onsuccess(onerror);}});}};var ProviderFriends={inited:false,init:function(type){if(this.inited)return;if(jQuery('#su2_total_mutual_pages').length)this.total_mutual_pages=parseInt(jQuery('#su2_total_mutual_pages').html());if(jQuery('#su2_total_following_pages').length)this.total_following_pages=parseInt(jQuery('#su2_total_following_pages').html());if(jQuery('#su2_total_followers_pages').length)this.total_followers_pages=parseInt(jQuery('#su2_total_followers_pages').html());this.current_mutual_page=this.current_following_page=this.current_followers_page=1;this.inited=true;return;},nextMutualPage:function(){this.init();var page=this.current_mutual_page+1;if(page>this.total_mutual_pages)
return;this.showPage('mutual',page);this.setMutualPagination(page);return;},prevMutualPage:function(){this.init();var page=this.current_mutual_page-1;if(page<1)
return;this.showPage('mutual',page);this.setMutualPagination(page);return;},setMutualPagination:function(page){var prev_el=jQuery('#su_modal2_prev_link_mutual');var next_el=jQuery('#su_modal2_next_link_mutual');if(page<=1){prev_el.addClass("su_modal2_prev_disabled").removeClass("su_modal2_prev_enabled");next_el.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_mutual_page=1;}
if(page>1&&page<this.total_mutual_pages){prev_el.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");next_el.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_mutual_page=page;}
if(page>=this.total_mutual_pages){prev_el.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");next_el.addClass("su_modal2_next_disabled").removeClass("su_modal2_next_enabled");this.current_mutual_page=this.total_mutual_pages;}
return;},nextFollowingPage:function(){this.init();var page=this.current_following_page+1;if(page>this.total_following_pages)
return;this.showPage('following',page);this.setFollowingPagination(page);return;},prevFollowingPage:function(){this.init();var page=this.current_following_page-1;if(page<1)
return;this.showPage('following',page);this.setFollowingPagination(page);return;},setFollowingPagination:function(page){var prev_el=jQuery('#su_modal2_prev_link_following');var next_el=jQuery('#su_modal2_next_link_following');if(page<=1){prev_el.addClass("su_modal2_prev_disabled").removeClass("su_modal2_prev_enabled");next_el.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_following_page=1;}
if(page>1&&page<this.total_following_pages){prev_el.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");next_el.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_following_page=page;}
if(page>=this.total_following_pages){prev_el.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");next_el.addClass("su_modal2_next_disabled").removeClass("su_modal2_next_enabled");this.current_following_page=this.total_following_pages;}
return;},nextFollowersPage:function(){this.init();var page=this.current_followers_page+1;if(page>this.total_followers_pages)
return;this.showPage('followers',page);this.setFollowersPagination(page);return;},prevFollowersPage:function(){this.init();var page=this.current_followers_page-1;if(page<1)
return;this.showPage('followers',page);this.setFollowersPagination(page);return;},setFollowersPagination:function(page){var prev_el=jQuery('#su_modal2_prev_link_followers');var next_el=jQuery('#su_modal2_next_link_followers');if(page<=1){prev_el.addClass("su_modal2_prev_disabled").removeClass("su_modal2_prev_enabled");next_el.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_followers_page=1;}
if(page>1&&page<this.total_followers_pages){prev_el.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");next_el.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_followers_page=page;}
if(page>=this.total_followers_pages){prev_el.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");next_el.addClass("su_modal2_next_disabled").removeClass("su_modal2_next_enabled");this.current_followers_page=this.total_followers_pages;}
return;},showPage:function(type,page){if(type=='mutual')
total=this.total_mutual_pages;if(type=='following')
total=this.total_following_pages;if(type=='followers')
total=this.total_followers_pages;for(var i=1;i<=total;i++){if(i==page)
jQuery('#su2_'+type+'_page_'+i).css("display","block");else
jQuery('#su2_'+type+'_page_'+i).css("display","none");}},setFollowersToFans:function(user_id,el){var div_el=el.firstChild;var input_el=jQuery('#followers_to_fans_box');var val=user_id+"|";if(input_el.length)
var user_ids=input_el.attr("value");if(jQuery(div_el).hasClass('friend_to_fan_checked_small'))
{jQuery(div_el).addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small");input_el.attr("value",user_ids.replace(val,""));}
else{jQuery(div_el).addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled");input_el.attr("value",input_el.attr("value")+val);}
this.updateTwitterFriendCount();return;},checkAllTwitterFollower:function(str){var input_el=jQuery('#followers_to_fans_box');input_el.attr("value",str);this.updateTwitterFriendCount();var ids=str.split("|");for(var i=0;i<ids.length;i++){var el=jQuery('#twitter_check_'+ids[i]);if(el.length){if(el.hasClass('friend_to_fan_checked_small_disabled')){el.addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled");}}}
return;},unCheckAllTwitterFollower:function(str){var input_el=jQuery('#followers_to_fans_box');input_el.attr("value","");this.updateTwitterFriendCount();var ids=str.split("|");for(var i=0;i<ids.length;i++){var el=jQuery('#twitter_check_'+ids[i]);if(el.length){if(el.hasClass('friend_to_fan_checked_small')){el.addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small");}}}
return;},updateTwitterFriendCount:function(){var input_el=jQuery('#followers_to_fans_box');var str=input_el.attr("value");var id_arr=str.split("|");var total=id_arr.length-1;jQuery('twitter_selected_count').html(total);return;},setCustomFans:function(user_id,el){var div_el=el.firstChild;var input_el=jQuery('#custom_friends_box');var val=user_id+"|";if(input_el.length)
var user_ids=input_el.attr("value");if(jQuery(div_el).hasClass('friend_to_fan_checked_small')){jQuery(div_el).addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small");input_el.attr("value",user_ids.replace(val,""));}
else{jQuery(div_el).addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled");input_el.attr("value",input_el.attr("value")+val);}
this.updateGooleFriendCount();return;},checkAllCustom:function(str){var input_el=jQuery('#custom_friends_box');input_el.attr("value",str);this.updateGooleFriendCount();var ids=str.split("|");for(var i=0;i<ids.length;i++){var el=jQuery('#google_check_'+ids[i]);if(el.length){if(el.hasClass('friend_to_fan_checked_small_disabled')){el.addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled");}}}
return;},unCheckAllCustom:function(str){var input_el=jQuery('#custom_friends_box');input_el.attr("value","");this.updateGooleFriendCount();var ids=str.split("|");for(var i=0;i<ids.length;i++){var el=jQuery('#google_check_'+ids[i]);if(el.length){if(el.hasClass('friend_to_fan_checked_small')){el.addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small");}}}
return;},updateGooleFriendCount:function(){var input_el=jQuery('#custom_friends_box');var str=input_el.attr("value");var id_arr=str.split("|");var total=id_arr.length-1;jQuery('google_selected_count').html(total);return;}};
window._||(window._=new Function("return arguments[0]"));window.ngettext||(window.ngettext=new Function("return arguments[0]"));window.sprintf||(window.sprintf=new Function("return arguments[0]"));var Recommendations={page_entries_loading:false,entries_loaded:false,max_page:1,loaded:false,fb_session:null,is_inited:false,load:function(response)
{if(this.loaded)
return;if('undefined'!==typeof response.session)
{console.log('Someone called Recommendations.load() with session param instead of fb_session which is the new style');}
this.fb_session=response.fb_session;if("unknown"!=response.status&&(-1!==location.href.indexOf('SNN=fb_recommendations')||-1!==location.href.indexOf('snn=2')||'fb_recommendations'==HuffCookies.getCookie('snn_version')||(response.fb_session&&response.fb_session.userID&&!isNaN(response.fb_session.userID)))&&response.fb_session&&response.fb_session.userID&&!isNaN(response.fb_session.userID))
{HuffCookies.setCookie('snn_version','fb_recommendations',2000);E.onAvailable('facebook_friends_unit_wrapper_fb',function(){Dom.get('facebook_friends_unit_wrapper_fb').style.display='block';huff.emit('content/update','#facebook_friends_unit_wrapper_fb');});E.onAvailable('fb_recommendations_cont_loaded',function(){E.on('fb_recom_help','mouseover',function()
{if(!this.getAttribute('floating_id'))
{var html='<div class="relative">'+_('We\'re using Facebook to personalize your experience. The stories below reflect what you like on Facebook and around the web.Send us feedback at <a href="mailto:beta@huffingtonpost.com">beta@huffingtonpost.com</a>')+'<div class="bottom_bg relative"></div></div>';var add_xy=[-156,-118];FloatingPrompt.embed(this,html,undefined,'top',{fp_intersects:1,timeout_remove:2000,ignore_arrow:true,width:251,add_xy:add_xy,class_name:'fp_fb_recom'});}});Recommendations.init();Recommendations.loaded=true;});}
else
{var self=this;if($('avatar_logged_in_snn')&&typeof FB!=="undefined"&&this.fb_session.userID&&HuffCookies.getUserName())
{$('avatar_logged_in_snn').innerHTML=sprintf('<a href="/social/%s/"><img src="http://graph.facebook.com/%s/picture" width="20"></a>',HuffCookies.getUserName(),this.fb_session.userID);FB.api({method:'fql.query',query:'SELECT name FROM user WHERE uid='+this.fb_session.userID},function(response){if(response[0]&&response[0].name)
$('wendybird_user_name_snn').innerHTML=sprintf(_('Welcome, <a href="/social/%s/">%s</a>'),HuffCookies.getUserName(),response[0].name);});}}},init:function()
{if(this.is_inited)
return;this.is_inited=true;this.snp_block=new YAHOO.SNP.RecommendBlock({cur_obj:this,id:'snp_recom_block',update_max_page:true});},buildHtml:function(data)
{var html='';var cur_page=this.snp_block.paginator.currentPage;html+='<div id="hp_snp_recom_block_page_'+cur_page+'">';var showed=0;var current_entry=HPUtil.GetEntryID();for(var i=0;i<data.entries.length;++i)
{if(current_entry===data.entries[i].entry_id||showed===3)
continue;var entry_data=data.entries[i];if('dev'==HPConfig.inst_type)
entry_data.entry_link=entry_data.entry_link.replace(/beta.*?\//,'www.huffingtonpost.com/');html+='<div class="float_left hp_snp_recom_entry" id="tag_fb_recom_'+entry_data.specified_tag+'" \
                onmouseover="HPFB.likeButton_v2(this, \''+entry_data.fb_button+'\', false);" style="'+(showed!=0?'padding-top:7px;':'')+'\
                '+(2>showed?'padding-bottom:7px;border-bottom:1px dotted #afafaf;':'')+'">';html+='<div class="snp_most_popular_entry_image">';if(entry_data.image)
{html+='<a href="'+entry_data.entry_link+'" class="track_page_article white_bg"> \
                    <img style="margin-right:5px;" class="img_border" src="'+entry_data.image+'"/></a>';}
html+='</div>';html+='<div class="snp_most_popular_entry_desc">';html+='<a class="track_page_article white_bg black bold arial_13" href="'+entry_data.entry_link+'"> \
                '+entry_data.entry_title+'</a> <br class="clear_first" />';html+=entry_data.fb_like_html;if("undefined"!==entry_data._tag_data)
{html+='<div class="floatright relative hp_fb_tag_cont">';html+='<div class="hp_fb_recom_tag_name float_left relative overflow_hidden margin_right_5 overflow_hidden \
                    align_right hp_fb_recom_fblike_'+entry_data.fb_button+'">';html+='<a class="capitalize track_page_tag white_bg bold underline line_height_22 hp_fb_recom_tag_link" href="/tag/'+entry_data._tag_data.tag_name+'">'+entry_data._tag_data.tag_name+'</a>';html+='</div>';html+='<div class="float_left margin_top_5 relative" style="z-index:102;">';html+='<a title="'+_("Remove this entry from my likes")+'" class="track_action_remove" href="#fb_recommendations" onclick=" \
                    Recommendations.removeTag('+entry_data.specified_tag+', '+entry_data.entry_id+')"><img \
                    src="/images/facebook/recommendations/delete-icon.png" width="13" height="13" /></a>';html+='</div>';html+='</div>';}
html+='</div>';html+='</div>';++showed;}
html+='</div>';return html;},loadSNPBlock:function()
{var self=this;if($('avatar_logged_in_snn')&&typeof FB!=="undefined"&&this.fb_session.userID&&HuffCookies.getUserName())
{$('avatar_logged_in_snn').innerHTML=sprintf('<a href="/social/%s/"><img src="http://graph.facebook.com/%s/picture" width="20"></a>',HuffCookies.getUserName(),this.fb_session.userID);FB.api({method:'fql.query',query:'SELECT name FROM user WHERE uid='+this.fb_session.userID},function(response){if(response[0]&&response[0].name)
$('wendybird_user_name_snn').innerHTML=sprintf(_('Welcome, <a href="/social/%s/">%s</a>'),HuffCookies.getUserName(),response[0].name);});}
var fb_data='&uid='+this.fb_session.userID+'&access_token='+encodeURIComponent(this.fb_session.accessToken);var tried=0,requesting_entries=false,username=HPUtil.getUrlVar('username'),self=this;var logged_username=HuffCookies.getUserName()?'&logged_username='+HuffCookies.getUserName():'';var request_server_for_entries=function()
{if(requesting_entries)
return;requesting_entries=true;C.asyncRequest('GET','/ajax/users/recommendations/load_entries.php?'+fb_data+'&try='+tried,{success:function(o)
{requesting_entries=false;var _=jQuery.parseJSON(o.responseText);if("undefined"!==typeof _['loading'])
{++tried;if(5<=tried)
{clearInterval(self.pollingID);Dom.get('facebook_friends_unit_wrapper_fb').style.display='none';Dom.get('hp_snp_recom_block_all_pages').innerHTML='<h4>'+jQuery.I18N.gettext("There are no stories for you")+'</h4>';Dom.get('hp_snp_recom_block_all_pages').style.textAlign='center';Dom.get('hp_snp_recom_block_main').style.background='transparent';}
return;}
if("undefined"!==typeof _['cmd']&&'hide_block'===_['cmd']&&$('facebook_friends_unit_wrapper_fb'))
{$('facebook_friends_unit_wrapper_fb').style.display='none';}
clearInterval(self.pollingID);var url='/ajax/users/recommendations/load_entries.php?'+fb_data;self.max_page=_.c_pages;if(self.max_page>1)
{self.snp_block.init_pagination(1,self.max_page,url,{is_loaded_callback:function(_){return"undefined"===typeof _['loading'];},main_block_to_hide:$('facebook_friends_unit_wrapper_fb'),render_content_after_requested:function(_){return self.buildHtml(_);},recognize_cmd:function(_){return"undefined"!==typeof _['cmd']?_['cmd']:'';},cPages:function(_)
{return _['c_pages'];},dataType:'json'});Dom.removeClass('snp_recom_block_pagination','hidden');}
Dom.get('hp_snp_recom_block_all_pages').innerHTML=self.buildHtml(_);HPUtil.ImageLoader.foldCheck('hp_snp_recom_block_page_1');Dom.get('hp_snp_recom_block_main').style.background='transparent';Dom.get('hp_snp_recom_block_main').style.height='auto';HPUtil.ImageLoader.foldCheck('hp_snp_recom_block_page_1');HPTrack.Module.Impressions.queue('recommend');},failure:function(){requesting_entries=false;clearInterval(self.pollingID);Dom.get('facebook_friends_unit_wrapper_fb').style.display='none';Dom.get('hp_snp_recom_block_all_pages').innerHTML='<h4>'+jQuery.I18N.gettext("There are no stories for you")+'</h4>';Dom.get('hp_snp_recom_block_all_pages').style.textAlign='center';Dom.get('hp_snp_recom_block_main').style.background='transparent';HPError.e();},timeout:10000});}
request_server_for_entries();self.pollingID=window.setInterval(request_server_for_entries,5000);},removeTag:function(tag,entry_id)
{var self=this;var query_string='entry_id='+entry_id;var fb_data='&uid='+self.fb_session.userID+'&access_token='+encodeURIComponent(self.fb_session.accessToken);C.asyncRequest('POST','/users/recommendations/remove_tag.php?'+query_string+fb_data+'&tag='+tag,{success:function(o)
{var _paginator=self.snp_block.paginator;var cur_page=_paginator.currentPage;var parentNode=Dom.get('tag_fb_recom_'+tag).parentNode;var did_something=false;while(1)
{if(Dom.get('hp_snp_recom_block_page_'+(++cur_page).toString()))
{Dom.get(Dom.get('hp_snp_recom_block_page_'+cur_page)).parentNode.removeChild(Dom.get('hp_snp_recom_block_page_'+cur_page));continue;}
break;}
Dom.get(Dom.get('hp_snp_recom_block_page_'+_paginator.currentPage)).parentNode.removeChild(Dom.get('hp_snp_recom_block_page_'+_paginator.currentPage));_paginator.Goto(_paginator.currentPage);},failure:function()
{HPError.e();}});}
}
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var Submissions={init_time:0,saved_data:{},init:function(){var d=new Date();Submissions.init_time=d.getTime();jQuery("#submissions_shortcuts .sbm_send").bind('click',function(){var match=this.id.match(/submissions_send_(.+)/);if(match){Submissions.Form.init(match[1]);}});jQuery.getScript("/include/lib/pop-contact.js",function(){var el=jQuery("#submission_contact_us");if(el.length==0){return;};if(typeof(el.pop_contact)!=="undefined"){el.pop_contact();}});},toggleForm:function(){var action=document.getElementById("submission_anonymous").checked?"hide":"show";var field_names=["fname","lname","email","phone","author"];for(var i=0;i<field_names.length;i++){var el=jQuery("#submission_"+field_names[i]);if(!el)continue;if(action=="hide"){this.saved_data[field_names[i]]=el.val();el.attr('disabled','disabled').val('');}else{el.attr('disabled','').val(this.saved_data[field_names[i]]);}}},radioButtonClick:function(){var el=jQuery(this);if(el.hasClass("sbm_video")){jQuery("#submission_upload").hide();jQuery("#submission_web_source").hide();jQuery("#submission_video_code").show();jQuery("#submission_rights_block").hide();}else{jQuery("#submission_upload").show();jQuery("#submission_web_source").show();jQuery("#submission_video_code").hide();jQuery("#submission_rights_block").show();}},Form:{init:function(type){this.type=type;this.prep_message_holder_init=false;jQuery.ajax({cache:false,url:"/submissions/get_form_content.php?type="+this.type,context:this,success:this.display});},check_completeness:function(){var el;this.req_reason=false;if(jQuery("#submission_name").val()==""||jQuery("#submission_name").val()==_("Name")){this.req_reason=_("Please, enter your name");return false;}
var email=jQuery("#submission_email").val();if(email==""||email==_("Email address")){this.req_reason=_("Please, enter your email");return false;}
if(email!=_("Email address")){if(!(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/.test(email))){this.req_reason=_("Wrong email address");return false;}}
if(this.type=="tip"){if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter the Subject Line");return false;}
if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("Enter Message here (1,000 character limit)")){this.req_reason=_("Please, enter the Message Content");return false;}}
else if(this.type=="correction"){if(jQuery("#submission_error_kind").val()==""){this.req_reason=_("Please, select the kind of error");return false;}
if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("Describe the error here (1,000 character limit)")){this.req_reason=_("Please, enter the Correction");return false;}}
else if(this.type=="link"){var url_link=jQuery("#submission_url").val();if(url_link==""){this.req_reason=_("Please, enter the URL");return false;}
var regexp=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(!regexp.test(url_link)){this.req_reason=_("Please, enter a valid URL");return false;}
if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("(1,000 character limit)")){this.req_reason=_("Please, enter a correction");return false;}}
else if(this.type=="media"){if(jQuery("#submission_radio_group input:checked").hasClass("sbm_video")){if(jQuery("#submission_embed").val()==""||jQuery("#submission_embed").val()==_("Enter embed code")){this.req_reason=_("Please, enter a link");return false;}
if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter a title");return false;}
if(jQuery("#submission_caption").val()==""){this.req_reason=_("Please, enter a caption");return false;}}else{if((jQuery("#submission_url").val()==""||jQuery("#submission_url").val()==_("Enter link"))&&jQuery("#submission_file_to_upload").val()==""){this.req_reason=_("Please, enter a link or choose a photo");return false;}
if(jQuery("#submission_file_to_upload").val()!="")
{var ext=['png','jpg','jpeg','gif','bmp'];var uploaded_img=jQuery("#submission_file_to_upload").val();var uploaded_ext=uploaded_img.split(".").pop();if("function"!==typeof(ext.inArray)){ext.inArray=function(value){var i;for(i=0;i<this.length;i++){if(this[i]===value){return true;}}
return false;};}
if("function"===typeof(ext.inArray)&&!ext.inArray(uploaded_ext))
{this.req_reason=_("Please, choose a valid photo");return false;}}
if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter a title");return false;}
if(jQuery("#submission_caption").val()==""){this.req_reason=_("Please, enter a caption");return false;}
if(jQuery("#submission_file_to_upload").val()!=""&&!jQuery("#submission_rights:checked").val()){this.req_reason=_("Please verify that you have the rights to use this photo");return false;}}}
return true;},display:function(html_code){var _this=this;HuffConnect.socialModal({onclose:function(){_this.UploadButton.stop();},inner_html:html_code,width:650,onshow:function(){_this.onshow();}});},onshow:function(){if(HPAds.page_spots["submissions_captcha"]){jQuery.ajax({url:'http://'+HPConfig.current_web_domain+'/ads/adyoulike/adyoulike.php',dataType:'html'}).done(function(data){jQuery('#submissions_form').append(data);});}else{jQuery.getScript("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field});});}
jQuery("#submission_title, #submission_embed, #submission_body").each(function(){jQuery(this).focus(function(){jQuery(this).unbind("focus").addClass("black").val("");});});jQuery("#submission_name, #submission_email, #submission_url").bind("focus blur",function(e)
{var el=jQuery(this);var id=el.attr("id");var val=jQuery.trim(el.val());var event_type=e.type;var check_val="";switch(id)
{case"submission_name":check_val=_("Name");break;case"submission_email":check_val=_("Email address");break;case"submission_url":check_val=_("Enter link");break;default:return;}
if('focus'==event_type&&check_val==val){el.val("").addClass("black");}
else if('blur'==event_type&&""==val){el.val(check_val).removeClass("black");}
return;});jQuery("#submission_url, #submission_file_to_upload").bind("change keyup",function()
{var el_url=jQuery("#submission_url");var el_upload=jQuery("#submission_file_to_upload");var el_toggle=jQuery("#submission_rights_block");if(""!==el_upload.val()){el_toggle.show();return;}
if(""===el_url.val()||_("Enter link")==el_url.val()){el_toggle.show();}else{el_toggle.hide();}
return;});var _this=this;this.counter=jQuery("#sbm_counter");this.message_body=jQuery("#submission_body");this.message_body_content="";this.message_body.keyup(function(){var limit=1000;var we_have=_this.message_body.val().length;if(we_have>limit){_this.counter.html(sprintf(_("%s count"),limit));_this.message_body.val(_this.message_body_content);}else{_this.counter.html(sprintf(_("%s count"),we_have));_this.message_body_content=_this.message_body.val();}
if(we_have>=limit){_this.counter.addClass("red");}else{_this.counter.removeClass("red");}});if(this.type==="media"){this.UploadButton.init();}
jQuery("#submission_submit").click(function()
{var url="/submissions/post.php?type="+_this.type+"&entry_id="+HPConfig.entry_id;var media_type=jQuery("#submission_radio_group input:checked");if(media_type.val()=="Photo")
{var uploading_photo=(jQuery("#submission_file_to_upload").val()!=="")?true:false;if(uploading_photo)
{var progress_id=document.createElement("input");progress_id.setAttribute("type","hidden");progress_id.setAttribute("name","APC_UPLOAD_PROGRESS");progress_id.setAttribute("value",Submissions.ProgressBar.get_salt());jQuery("#submissions_form").prepend(progress_id);}}
_this.clear_failure();if(!_this.check_completeness())
{_this.show_requirement();return false;}
var el;el=jQuery("#submission_name");if(el.val()==_("Name")){el.val("");}
el=jQuery("#submission_email");if(el.val()==_("Email address")){el.val("");}
el=jQuery("#submission_url");if(el.length!==0){if(el.val()==_("Enter link")){el.val("");}}
if(uploading_photo)
{Submissions.ProgressBar.init(media_type.val());}
if(media_type.val()=="Photo")
{if(uploading_photo)
{jQuery.ajax({type:"POST",url:"/upload_progress.php?progress_key=init_key"});}
else
{jQuery("#submission_ajax_loader").show();jQuery("#submissions_bottom_area").hide();}
jQuery.getScript("/include/lib/jquery/jquery.form.js",function(){jQuery("#submissions_form").ajaxSubmit({type:"post",url:url,success:function(data)
{if(uploading_photo)
{Submissions.ProgressBar.finish();}
try{var oResponse=JSON.parse(data);}
catch(e){var oResponse={status:false,reason:"Some error occurred"};return;}
if(oResponse.status)
{if(uploading_photo)
{HuffConnect.hideModal();var slideshow_crop=HpImageCrop;HpImageCrop.init(oResponse.image_id_crypted,'submission');slideshow_crop.Load(this.show,_this.onImageCropper,this);}
else
{_this.show_success();}}
else
{_this.show_requirement(oResponse.reason);if(oResponse.sub_reason&&/incorrect-captcha-sol/.test(oResponse.sub_reason)){if(HPAds.page_spots["submissions_captcha"]&&typeof(Adyoulike)!=="undefined"){jQuery("#submission_recaptcha").empty();Adyoulike.create(adyoulike_options);}else{Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field});}}
jQuery("#submission_ajax_loader, #submission_progress_bar").hide();jQuery("#submissions_bottom_area").show();}
return;}});});return false;}
jQuery("#submission_ajax_loader").show();jQuery("#submissions_bottom_area").hide();url+="&"+jQuery("#submissions_form").serialize();jQuery.ajax({type:"POST",url:url,context:_this,success:_this.read_response});return false;});jQuery("#submission_anonymous").change(function(){Submissions.toggleForm();});if(this.type==="media"){jQuery("#submission_radio_group input").change(Submissions.radioButtonClick);}},onImageCropper:function(response)
{HuffConnect.hideModal();if(!response.error){var msg="<div class='sm_submission_msg'>Thank you for your contribution</div>";}
else{var error=(sprintf(_("Error crop image in reason : %s"),response.reason));var msg="<div class='sm_submission_msg'>"+error+"</div>";}
HuffConnect.socialModal({inner_html:msg,width:450,modal_head_image:"",modal_subhead_image:"",position:"fixed"});setTimeout(function(){HuffConnect.hideModal()},3000);return;},read_response:function(text,func,req){Submissions.ProgressBar.finish();var response=JSON.parse(text);if(!response){this.show_failure();return;}
if(response.status===true){this.show_success();}else{this.show_failure(response.reason,response);}},prep_message_holder_init:false,prep_message_holder:function(){if(this.prep_message_holder_init==false){jQuery("#submission_header").hide();jQuery("#submission_notify").css("visibility","hidden").show();}
this.prep_message_holder_init=true;},show_requirement:function(another_reason){this.prep_message_holder();var reason=another_reason||(this.req_reason||_("Please, fill the form!"));jQuery("#submission_notify").html(reason).css("visibility","visible").show();setTimeout("Submissions.Form.hide_requirement();",5000);},hide_requirement:function(){jQuery("#submission_notify").css("visibility","hidden");},show_failure:function(reason,response){this.prep_message_holder();if(typeof(response.capthca_failed)!=="undefined"){jQuery("#submission_recaptcha").empty();if(HPAds.page_spots["submissions_captcha"]&&typeof(Adyoulike)!=="undefined"){Adyoulike.create(adyoulike_options);}else{Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field});}}
jQuery("#submission_ajax_loader").hide();jQuery("#submission_progress_bar").hide();jQuery("#submissions_bottom_area").show();reason=(reason?sprintf(_("Failed to submit: %s"),reason):_("Failed to submit"));jQuery("#submission_notify").html(reason).css("visibility","visible");},clear_failure:function(reason){jQuery("#submission_notify").css("visibility","hidden");},show_success:function(){jQuery("#submission_submit").remove();jQuery("#submission_progress_bar").remove();jQuery("#submission_ajax_loader").remove();jQuery("#submission_thanks").show();setTimeout(function(){HuffConnect.hideModal();},3000);},UploadButton:{state:false,box:false,justClicked:false,getMouseCoords:function(e){if(!e.pageX&&e.clientX){var zoom=1;var body=document.body;if(body.getBoundingClientRect){var bound=body.getBoundingClientRect();zoom=(bound.right-bound.left)/body.clientWidth;}
return{x:e.clientX/zoom+document.body.scrollLeft+document.documentElement.scrollLeft,y:e.clientY/zoom+document.body.scrollTop+document.documentElement.scrollTop};}
return{x:e.pageX,y:e.pageY};},getBox:function(el){var left,right,top,bottom;var offset=jQuery(el).offset();left=offset.left;top=offset.top;right=left+el.offsetWidth;bottom=top+el.offsetHeight;return{left:left,right:right,top:top,bottom:bottom};},init:function(){var self=this;jQuery(document).ready(function(){var file_to_upload=jQuery("#submission_file_to_upload"),over=false;self.box=self.getBox(document.getElementById("submission_upload_button"));self.box_interval=setInterval(function(){self.box=self.getBox(document.getElementById("submission_upload_button"));},100);self.mouse_handler_event=function(e){var c=self.getMouseCoords(e);if((c.x>=self.box.left)&&(c.x<=self.box.right)&&(c.y>=self.box.top)&&(c.y<=self.box.bottom)){over=true;var dialog_pos=file_to_upload.offset();file_to_upload.show();file_to_upload.offset({top:c.y-5,left:c.x-185});}else{over=false;var check=setInterval(function(){if(self.justClicked){return;}
if(!over){file_to_upload.hide();}
clearInterval(check);},25);}};jQuery(document).mousemove(self.mouse_handler_event);file_to_upload.change(function(){jQuery("#submission_upload_button").html(_("Selected!")).css("color","#2f7e03");});file_to_upload.click(function(){self.justClicked=true;setTimeout(function(){self.justClicked=false;},2500);});});this.state=true;},stop:function(){if(!this.state)return;clearInterval(this.box_interval);this.box_interval=false;jQuery(document).unbind("mousemove",self.mouse_handler_event);this.state=false;}}},ProgressBar:{enabled:true,salt:false,stop_flag:false,init:function(media_type){if(!this.enabled||media_type!=="Photo"){jQuery("#submissions_bottom_area").hide();jQuery("#submission_ajax_loader").show();return;}
jQuery("#submissions_bottom_area").hide();jQuery("#submission_progress_bar").show();this.set_progress(0);this.stop_flag=false;setTimeout("Submissions.ProgressBar.get_progress()",500);},get_salt:function(){if(!this.salt){var d=new Date();this.salt=Submissions.init_time+"|"+d.getTime();}
return this.salt;},get_progress:function(){jQuery.ajax({type:"POST",url:"/upload_progress.php?progress_key="+this.get_salt(),context:this,success:this.display_progress});},display_progress:function(data){if(!this.stop_flag){setTimeout("Submissions.ProgressBar.get_progress()",500);}
if(!data)return;data=JSON.parse(data);if(!data)return;this.set_progress(parseInt(data.current/data.total*100));},set_progress:function(value){value=parseInt(value);if(value>100){value=100;}
jQuery("#submission_progress_bar_number").html(value+"%");jQuery("#submission_progress_bar_line").css("width",parseInt(value*220/100));},cancel:function(){this.stop_flag=true;this.set_progress(0);},stop:function(){this.stop_flag=true;},finish:function(){this.stop_flag=true;this.set_progress(100);}},Box:{current_sid_num:false,display_sid:function(sid_num){var _this=this;if(this.current_sid_num!==false){jQuery("#submission_box_content_"+this.sids[this.current_sid_num]).hide();}
if(typeof(this.sids[sid_num])==="undefined"){return;}
var sid=this.sids[sid_num];if(typeof(this.data[sid])==="undefined"){return;}
var sid_info=this.data[sid];jQuery("#submission_box_title").html(sid_info.title);jQuery("#submission_box_title2").html(sid_info.title2);jQuery("#submission_box_message").html(sid_info.message);jQuery("#submission_box_content_"+sid).show().css("marginTop",(sid_info.type==1?45:0)+"px").css("marginBottom",(sid_info.type==1?5:0)+"px");if(typeof(sid_info.no_user)!=="undefined"){jQuery("#submission_box_user_info").hide();}else{jQuery("#submission_box_user_info").show();jQuery("#submission_box_user_photo").attr("src",sid_info.userPic);jQuery("#submission_box_username").html("<a href='/social/"+sid_info.userName+"'>"+sid_info.userDisplayName+"</a>");jQuery("#submission_box_user_badge").html(sid_info.user_badge_title);if(sid_info.user_facebook_id){jQuery("#submission_box_facebook").html(sprintf(_("%s on Facebook"),("<a href='http://www.facebook.com/profile.php?id="+sid_info.user_facebook_id+"' target='_blank'>"+sid_info.userDisplayName+"</a>")));}else{jQuery("#submission_box_facebook").html("");}
if(sid_info.user_twitter){jQuery("#submission_box_twitter").html(sprintf(_("%s on Twitter"),("@<a class='twitter-anywhere-user' href='http://twitter.com/"+sid_info.user_twitter+"' target='_hplink'>"+sid_info.user_twitter+"</a>")));}else{jQuery("#submission_box_twitter").html("");}}
var badges_html="",badge;for(badge in sid_info.user_badges){if(!sid_info.user_badges.hasOwnProperty(badge)){continue;}
badge=sid_info.user_badges[badge];badges_html+="<div class='user-level-icon "+badge.user_type+" level-"+badge.user_subtype_index+"'></div>";}
jQuery("#submission_box_user_badges").html(badges_html);this.current_sid_num=sid_num;var prev=jQuery("#submission_box_prev");if(sid_num>0){prev.show();}else{prev.hide();}
var next=jQuery("#submission_box_next");if(sid_num<(this.sids.length-1)){next.show();}else{next.hide();}
TwitterAnywhere.anywhere("submission_box_twitter");try{var closure_sid_num=this.current_sid_num;FB.api({method:'fql.query',query:'SELECT name, username FROM user WHERE uid='+sid_info.user_facebook_id},function(response){if(_this.current_sid_num!==closure_sid_num){return;}
if(response[0]&&response[0].username){jQuery("#submission_box_facebook").html(sprintf(_("%s on Facebook"),("<a href='http://www.facebook.com/"+response[0].username+"' target='_blank'>"+response[0].name+"</a>")));}});}catch(e){};},show_prev:function(){this.display_sid(this.current_sid_num-1);},show_next:function(){this.display_sid(this.current_sid_num+1);},start:function(config){this.data=config.data;this.amount_of_subs=0;this.sids=[];for(var item in config.data){if(config.data.hasOwnProperty(item)){this.amount_of_subs++;this.sids.push(item);}}
var me=this;jQuery("#submission_box_prev").click(function(){me.show_prev();});jQuery("#submission_box_next").click(function(){me.show_next();});jQuery("#submission_box").show();this.display_sid(0);}}};
(function($,root){function now(){return Math.floor(+new Date/1000);}
var container,savedTs,page=1,perPage,maxEntry,inited=false,entriesLoadedCallback=null;var setup=function(){$(function(){container=$('#liveblog_container');perPage=container.children().length;maxEntry=getMaxId();initScrollbar.call(LB);updateDates();initShareBadges();setupOrdering();setupPagging();inited=true;if(jQuery.I18N.getLocale()=='es_ES'){$("#liveblog_heading .twttr-fw-btn").remove();$(".twitter_share").remove();}});};var LB;root.HPLiveBlog=LB={init:function(liveblogId,title,lastChecked){if(typeof(liveblogId/1)!='number'){throw TypeError('liveblogId param suppose to be a number');}
this['blog_id']=liveblogId;this['title']=title||'';savedTs=lastChecked?Math.floor(lastChecked.getTime()/1000):now();$(function(){var channel='liveblog_'+liveblogId;huff.use('ws/websocket','jquery',function(ws,$){ws.subscribe(channel);});huff.on('websocket/'+channel,function(message){if(message){message=JSON.parse(message);var id=message.entry.id;var entry=$('#entry_'+id);if(entry.length){entry.replaceWith(message.entry.html);}else{if(LB['order']!=='older'){$(message.entry.html).hide().prependTo('#liveblog_container').fadeIn(500);}else{$(message.entry.html).hide().appendTo('#liveblog_container').fadeIn(500);}}
updateDates();savedTs=message.ts;}});huff.on('websocket/close',function(){LB.periodicalUpdate();});huff.on('websocket/error',function(){LB.periodicalUpdate();});});},periodicalUpdate:function(){LB.update();var seconds2update=60;setTimeout(HPLiveBlog.periodicalUpdate,seconds2update*1000);},update:function(){var url='http://'+HPConfig.current_web_address+'/ajax/liveblog/index.php?last_updated='+
savedTs+'&id='+this['blog_id'],data,ts;$.getJSON(url,function(resp){if(typeof resp!=='object'){return false;}
data=resp.data||[];ts=resp.ts||now();if(!$.isArray(data)||!data.length){return false;}
for(var i=data.length,currentNode;i--;){currentNode=container.find('#entry_'+data[i][0]);if(currentNode.length){scriptParser.replaceWith(currentNode,data[i][1]);}else{currentNode=scriptParser[!LB['order']||LB['order']!=='older'?'prepend':'append'](container,data[i][1]);}
currentNode.hide().fadeIn(500);}
updateDates(jQuery);LB.scrollContainer.length&&LB.scrollbar.update();maxEntry=getMaxId();savedTs=ts;if(entriesLoadedCallback){entriesLoadedCallback();}});},loadPoll:function(pollId){$(function(){var container=$('#sidebar_right'),pollContainer=$('<div>',{id:'poll'}).appendTo(container);pollInner=$('div',{id:'poll-inner'});var url='http://'+HPConfig.current_web_address+'/ajax/liveblog/get_poll.php?id='+pollId;pollInner.appendTo(pollContainer).load(url);});},setEntriesLoadedCallback:function(callback){entriesLoadedCallback=callback;}};function getMaxId(){if(!(container&&container.children()[0]))
return;return+container.children()[0].id.split('_')[1];}
function setupOrdering(){var getEntries=function(e){var type=this.id.split(/_/)[1],url='http://'+HPConfig.current_web_address+'/ajax/liveblog/get_entries.php?id='+LB['blog_id']+'&type='+type;$('#liveblog_heading .selected').removeClass('selected');$(this).addClass('selected');$.get(url,[],function(resp){scriptParser.html(container,resp);LB['order']=type;page=1;updateDates();if(entriesLoadedCallback){entriesLoadedCallback();}});return false;};$('#view_new, #view_older').click(getEntries);}
function initScrollbar(){this.scrollContainer=$('#liveblog_splash_scrollbar');if(this.scrollContainer.length){this.scrollbar=new HPScrollbar(container[0],this.scrollContainer[0],240);}}
var scriptParser=(function(){function addCode(mode,target,data){data=data.replace(/(<script.*?type=['"])([^'"]+)?(['"][^>]+><\/script>)/g,function(all,p1,p2,p3){return p1.replace(/<script/,'<span')+'to_insert'+p3.replace(/<\/script/,'</span');});$(target).each(function(i,block){var context=block=$(block);if(mode=='append'){block.append(data);}else if(mode=='prepend'){block.prepend(data);}else if(mode=='html'){block.html(data);}else if(mode=='replaceWith'){context=block.parent().get(0);block.replaceWith(data);}
$(context).find("span[type='to_insert']").each(function(index,element){var script=document.createElement('script');script.type='text/javascript';script.src=$(element).attr("src");$(element).parent().get(0).insertBefore(script,element);$(element).remove();});});return $(target);}
return{html:function(target,data){return addCode('html',target,data);},append:function(target,data){return addCode('append',target,data);},prepend:function(target,data){return addCode('prepend',target,data);},replaceWith:function(target,data){return addCode('replaceWith',target,data);}}})();var updateDates=(function(){var startOfDay=new Date();startOfDay.setHours(0);startOfDay.setMinutes(0);startOfDay.setSeconds(0);startOfDay.setMilliseconds(0);return function(){huff.use('strftime',function(strftime){$('.liveblog_entry .lb_heading').each(function(){var lbRow=$(this),timestamp=+(lbRow.find('input[type=hidden]').val()/1000);var timeString=' '+strftime(_("%l:%M %p"),timestamp);var dateString=(timestamp*1000>startOfDay)?_("Today"):strftime(_("%m/%e/%Y"),timestamp);lbRow.find('.time').html('<span class="hours">'+timeString+'</span>&nbsp;&ndash;&nbsp;<span class="day">'+dateString+'</span>');});});}})();var paginate=function(callback,specificPage){if(typeof callback!=='function'){throw TypeError('first param should be a function');}
var url='http://'+root.location.host+'/ajax/liveblog/get_entries.php',params={id:LB['blog_id'],type:HPLiveBlog['order']||'new',page:specificPage||page};$.get(url,params,function(resp){try{resp=$.parseJSON(resp);typeof resp==='object'&&resp.error&&callback.call(this,false);}catch(e){callback.call(this,resp);specificPage&&(page=specificPage)||page++;}});};function setupPagging(){$('#more').click(function(){var moreButton=$(this);paginate(function(html){!html&&moreButton.hide()||scriptParser.append(container,html)&&updateDates();if(entriesLoadedCallback){entriesLoadedCallback();}});return false;});};var initShareBadges=function(){var windowOptions='scrollbars=yes,resizable=yes,toolbar=no,location=yes',width=550,height=420,winHeight=root.screen.height,winWidth=root.screen.width,left=Math.round((winWidth/2)-(width/2)),top=winHeight>height?Math.round((winHeight/2)-(height/2)):0;urlsCache={};function shortenUrl(url,callback){var url=url.replace(/\/mobileweb/,'');if(urlsCache[url]){callback(urlsCache[url]);return;}
var urlOpts={login:HPConfig.bit_ly_key.user_name,apiKey:HPConfig.bit_ly_key.user_key,longUrl:url};$.getJSON('http://api.bit.ly/v3/shorten?callback=?',urlOpts,function(resp){var shortUrl='';if(resp&&resp.status_code&&resp.status_code==200){shortUrl=resp.data.url;}else{shortUrl=url;}
callback(shortUrl);urlsCache[url]=shortUrl;});}
function openPopup(url){root.open(url,'intent',windowOptions+',width='+width+',height='+height+',left='+left+',top='+top);}
function tweetUpdate(){var tweetTitle=this.alt;function onUrlRetrieve(url){var update_title=$(".liveblog_entry.liveblog_permalink .lb_heading .lb_title").html(),title=(tweetTitle?tweetTitle+'':'')+(update_title||''),signature=HPConfig.twitter_signature||'@huffingtonpost',text=title+' '+_('live updates on')+' '+signature+' '+url,t_reg=new RegExp(signature+'*','i');text.length>140&&(text=text.replace(t_reg,''));var lang=jQuery.I18N.getLocale().substr(0,2);var domain=(lang=='en')?'com':lang;openPopup('http://twitter.com/intent/tweet/?lang='+lang+'&text='+encodeURIComponent(text));}
shortenUrl(this.href,onUrlRetrieve);return false;}
function facebookShare(){var update_title=$(".liveblog_entry.liveblog_permalink .lb_heading .lb_title").html();var share_url="http://"+HPConfig.current_web_domain+"/hpfb/?r=false&link_to=permalink&object=article&id="+HPConfig.entry_id+"&t="+encodeURIComponent(update_title)+"&u="+encodeURIComponent(this.href);var fb_obj={method:'stream.share',u:this.href,name:update_title,display:'popup'};function callback(response){location.href=location.href;}
FB.ui(fb_obj,callback);}
function tumblrShare(){id=$(this).attr("entity_id");var type="quote",currentEntry=$(".liveblog_entry.liveblog_permalink"),source_url=this.href,title=encodeURIComponent('<a href="'+source_url+'">'+$(".lb_heading .lb_title",currentEntry).html()+'</a>'),body=encodeURIComponent($(".lb_body",currentEntry).html()),source=encodeURIComponent('<a href="'+source_url+'">'+$(".lb_heading .lb_title",currentEntry).html()+'</a>'),quote=encodeURIComponent($(".lb_body",currentEntry).html()),tags=encodeURIComponent($("#liveblog_container").data('tags'));tweet=encodeURIComponent(source_url);var url="http://www.tumblr.com/share?"+
"type="+(type?type:'')+
"&source="+(source?source:'')+
"&quote="+(quote?quote:'')+
"&tags="+(tags?tags:'')+
"&language="+jQuery.I18N.getLocale()+
"&tweet="+(tweet?tweet:'');PopupManager.open(url,500,450);return;}
container.delegate('.twitter_share','click',tweetUpdate)
.delegate('.facebook_share','click',facebookShare)
.delegate('.tumblr_share','click',tumblrShare);function setHashtag(value){var value=value||location.hash,elem=$('a[name="'+value+'"]');elem.attr('name',value+'-tmp');window.location.hash=value;elem.attr('name',value);}
var permalinkClass='liveblog_permalink',openPermalink=(function(){var bodyEl=$('body'),doc=$(document),overlay,permalinkWrapper,closeBtn,parent;function closePermalink(){parent.removeClass(permalinkClass);$(".share_marker",parent).removeClass("selected").show();permalinkWrapper.remove();closeBtn.remove();overlay.fadeOut(700,function(){$(this).remove();$('.topnav_first_row > ul').css('position','relative');});return false;}
return function(anchor,scroll){anchor=$(anchor);scroll=typeof scroll==='undefined'?true:scroll;setHashtag(anchor.attr('name'));if((!anchor.length||isNaN(parseInt(anchor.attr('name'))))){return false;}
parent=anchor.parents('.liveblog_entry').addClass(permalinkClass).removeClass('selected');$(".share_marker",parent).hide();overlay=$('<div>').addClass('liveblog_overlay').hide()
.appendTo('#liveblog_container').fadeIn(300).click(closePermalink);$('.topnav_first_row > ul').css('position','static');closeBtn=$('<a>').attr('href','#').appendTo(parent).addClass('permalink_close').click(closePermalink);var permalink=$('<input type="text" class="liveblog_permalink" readonly id="permalink_'+anchor[0].name+'"/>'),permalinkLabel=$('<label>').attr('for','permalink_'+anchor[0].name)
.html('<span>'+jQuery.I18N.gettext('Link to this')+':</span>').append(permalink).appendTo(parent);permalinkWrapper=permalinkLabel.wrap('<div class="permalinks">');shortenUrl(anchor[0].href,function(url){permalink.val(url).click(function(){this.select()});});bodyEl.one('keyup',function keyClose(e){e.keyCode===27?closePermalink():bodyEl.one('keyup',keyClose);});scroll&&$('body,html').animate({scrollTop:anchor.offset().top-50},'slow');return true;}}());function loadUpdate(marker){matches=/^\d+/.exec(marker);var entryPosition=matches!==null?matches[0]:-1;if(entryPosition<=1){return false;}
var page=Math.ceil((maxEntry-entryPosition)/perPage);page>1&&paginate(function(html){scriptParser.append(container,html);updateDates();openPermalink($('a[name = '+marker+']'));if(entriesLoadedCallback){entriesLoadedCallback();}},page-1);}
var marker=root.location.hash.substr(1).replace(/[^a-zA-Z0-9_-]/g,"");if(marker.length&&marker!=='liveblog'){if(!openPermalink('a[name='+marker+']')){loadUpdate(marker);}}
container.delegate('.liveblog_entry','click',function(e){if($.inArray(e.target.tagName.toLowerCase(),['a','object','embbed'])!==-1){return true;}
var update=$(this);update.hasClass(permalinkClass)||openPermalink(update.find('a[name]')[0],false);return false;});container.delegate('.liveblog_entry','mouseenter',function(){var update=$(this);update.hasClass(permalinkClass)||$(".share_marker",update).addClass('selected')&&update.addClass('selected');});container.delegate('.liveblog_entry','mouseleave',function(){var update=$(this);update.hasClass(permalinkClass)||$(".share_marker",update).removeClass('selected')&&update.removeClass('selected');});};!inited&&setup();})(jQuery,window);
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var HpImageCrop=function(item_id_crypted,type)
{this.item_id_crypted=null;this.type='slideshow';this.back_callback=undefined;this.end_callback=undefined;this.scope=undefined;this.image_width=0;this.image_height=0;};HpImageCrop.init=function(item_id_crypted,type)
{this.item_id_crypted=item_id_crypted;this.type=type||'slideshow';};HpImageCrop.RemoveReuploadCallback=function()
{jQuery('#imagecrop_reupload_submit_loader1').css('display','none');};HpImageCrop.Reload=function()
{this.RemoveReuploadCallback();this.Load(this.back_callback,this.end_callback,this.scope);};HpImageCrop.Load=function(back_callback,end_callback,scope)
{var me=this;this.back_callback=back_callback;this.end_callback=end_callback;scope=scope||this;this.scope=scope;if(HuffCookies.getUserName())
{HuffConnect.socialModal({url:'/imagecrop_front/index.php?item_id_crypted='+this.item_id_crypted+'&'+Math.random(),onshow:function(o)
{jQuery(document.body).addClass('yui-skin-sam');me.onLoadSuccess(o,back_callback,end_callback,scope);},width:840,inner_wrapper_class:'snn_slideshow_participation align_left'});}
else
{QuickLogin.onLoginSuccess=function(){me.Load();};QuickLogin.pop();return;}};HpImageCrop.Close=function()
{HuffConnect.hideModal();};HpImageCrop.EndCropping=function(o)
{jQuery('#imagecrop_submit_loader1').css('display','none');if(this.end_callback)
{var response=JSON.parse(o.responseText);end_callback.apply(this.scope,[response]);}};HpImageCrop.onLoadSuccess=function(o,back_callback,end_callback,scope)
{if(this.type=='submission'){jQuery('#back_button2').css('display','none');jQuery('#reupload_image').css('display','none');jQuery('#submit_photo').addClass('button medium white');}
var crop_me=this;jQuery('#back_button2, #reupload_image, #submit_photo, #reupload_image2').bind('click',function(event)
{switch(this.id)
{case'back_button2':if(back_callback)
{back_callback.apply(scope,[{item_id_crypted:crop_me.item_id_crypted}]);}
break;case'reupload_image':case'reupload_image2':jQuery('#yui_reupload_form').css('display','block');return false;break;case'submit_photo':jQuery('yui_reupload_form').css('display','none');jQuery('#imagecrop_submit_loader1').css('display','inline');var crop_width=jQuery('#w').val();var crop_scale=jQuery('#scale').val().replace(',','.');var recrop_width=crop_width>0?parseInt(jQuery('#w').val()/crop_scale):jQuery('#image_width').val();var recrop_height=crop_width>0?parseInt(jQuery('#h').val()/crop_scale):jQuery('#image_height').val();var recrop_t=crop_width>0?parseInt(jQuery('#t').val()/crop_scale):0;var recrop_l=crop_width>0?parseInt(jQuery('#l').val()/crop_scale):0;var append_url='&h='+recrop_height+'&step='+jQuery('#step').val()+'&w='+recrop_width+'&t='+recrop_t+'&l='+recrop_l;jQuery.ajax({url:'/imagecrop_front/index.php?item_id_crypted='+crop_me.item_id_crypted+append_url+'&'+Math.random(),type:'POST',success:function(data){jQuery('#imagecrop_submit_loader1').css('display','none');if(end_callback)
{var response=JSON.parse(data);end_callback.apply(scope,[response]);}},failure:function(o){jQuery('#imagecrop_submit_loader1').css('display','none');crop_me.Close();HPError.e();},timeout:10000});break;}});if(back_callback)
{jQuery('back_button2').css('display','inline');}
jQuery('#yui_cropper').bind('submit',function(event)
{this.action+='&'+Math.random();jQuery('yui_reupload_form').css('display','none');jQuery('#imagecrop_submit_loader1').css('display','inline');return false;});jQuery('#yui_reupload').bind('submit',function(event){if(''==jQuery('#yui_file_reupload').val())
{alert(_('Please select file for uploading'));return false;}
this.action+='&'+Math.random();jQuery('#imagecrop_reupload_submit_loader1').css('display','inline');});var scale=jQuery('#scale').val();var min_width=parseInt(550*scale);var min_height=parseInt(400*scale);huff.css('jquery/jquery.Jcrop');jQuery.getScript('/include/lib/jquery/jquery.Jcrop.min.js',function(){jQuery('#yui_img').Jcrop({onSelect:crop_me.showCoords,onChange:crop_me.showCoords,bgColor:'black',bgOpacity:.4,setSelect:[0,0,min_width,min_height],minSize:[min_width,min_height],aspectRatio:1.375});});};HpImageCrop.showCoords=function(c)
{jQuery('#t').val(c.y);jQuery('#l').val(c.x);jQuery('#h').val(c.h);jQuery('#w').val(c.w);};HpImageCrop.onLoadFail=function(o)
{HPError.e();this.hideMask();};
(function(c){function j(){var a,e={height:window.innerHeight,width:window.innerWidth};if(!e.height)if((a=document.compatMode)||!c.support.boxModel){a=a=="CSS1Compat"?document.documentElement:document.body;e={height:a.clientHeight,width:a.clientWidth}}return e}setInterval(function(){var a=[],e,g=0;c.each(c.cache,function(){if(this.events&&this.events.inview)if(this.events.live){var k=c(this.handle.elem);c.each(this.events.live,function(){a=a.concat(k.find(this.selector).toArray())})}else a.push(this.handle.elem)});if(e=a.length){viewportSize=j();for(viewportOffset={top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft};g<e;g++)if(c.contains(document.documentElement,a[g])){var f=c(a[g]),d={height:f.height(),width:f.width()},b=f.offset(),h=f.data("inview"),i;if(b.top+d.height>b.top&&b.top<viewportOffset.top+viewportSize.height&&b.left+d.width>viewportOffset.left&&b.left<viewportOffset.left+viewportSize.width){i=viewportOffset.left>b.left?"right":viewportOffset.left+viewportSize.width<b.left+d.width?"left":"both";d=viewportOffset.top>b.top?"bottom":viewportOffset.top+viewportSize.height<b.top+d.height?"top":"both";b=i+"-"+d;if(!h||h!==b)f.data("inview",b).trigger("inview",[true,i,d])}else h&&f.data("inview",false).trigger("inview",[false])}}},250)})(jQuery);
(function($){var getEntityFromUrl=function(url){var groups=url.match(/(\d+).html$/);if(groups&&groups.length>1){return groups[1];}
return null;};var getCurrentUrl=function(qs){if(qs){return document.URL;}
return[location.protocol,'//',location.host,location.pathname].join('');};var getSelectedText=function(){var sText=null;var oActive=document.activeElement;if(window.getSelection&&oActive){if($.inArray(oActive.nodeName,['TEXTAREA','INPUT'])!=-1){sText=oActive.value.substring(oActive.selectionStart,oActive.selectionEnd);}else{sText=window.getSelection().toString();}}else{sText=document.getSelection?document.getSelection().toString():document.selection.createRange().text;}
return sText;};$.fn.quoteable=function(options){var my_handler=function(quote,success,failure){if(!options.service){return;}
var url=getCurrentUrl(true);var entity=getEntityFromUrl(url);if(!entity){return;}
var jqxhr=$.get(options.service,{'snippet[entity]':entity,'snippet[text]':quote,'snippet[referer]':url,'snippet[explicit]':false},function(data,st){if(data.success){success(data);}else{failure(data);}},'jsonp');jqxhr.fail(function(){failure(false);});};var my_success=function(){};var my_failure=function(remote){};var my_prepare=function(raw){raw=$.trim(raw);if(options.minlength!==null&&raw.length<options.minlength){return null;}
if(options.maxlength!==null&&raw.length>options.maxlength){return null;}
return raw;};options=$.extend({'service':null,'handler':my_handler,'success':my_success,'failure':my_failure,'prepare':my_prepare,'minlength':null,'maxlength':null,'sample':null},options);this.each(function(){var $this=$(this);$this.bind('copy',function(e){if(options.sample!==null&&Math.random()>options.sample){return true;}
var quote=options.prepare(getSelectedText());if(!quote){return true;}
options.handler(quote,options.success,options.failure);});});return this;};})(jQuery);
huff.unit('highlights',function(ready){huff.use('jquery',function($){$.fn.HPhighlight=function(pat,hl_id,hl_score){patternFound=false;function getTextNodesIn(node,includeWhitespaceNodes){var textNodes=[],whitespace=/^\s*$/;function getTextNodes(node){if(node.nodeType==3){if(includeWhitespaceNodes||!whitespace.test(node.nodeValue)){textNodes.push(node);}}else{for(var i=0,len=node.childNodes.length;i<len;++i){getTextNodes(node.childNodes[i]);}}}
getTextNodes(node);return textNodes;}
function nonSpace(token){return(token.length>0);}
function innerHighlight(node,pat){if(patternFound)return;txtNodes=getTextNodesIn(node);allTokens=[]
for(i=0;i<txtNodes.length;i++){txt=txtNodes[i].data;tokens=txt.replace(/\s\s+/g,' ').split(' ').filter(nonSpace);idx=0;for(t=0;t<tokens.length;t++){startIdx=txt.indexOf(tokens[t],idx)
allTokens.push({value:tokens[t].toUpperCase(),nodeIdx:i,startIdx:startIdx})
idx=startIdx+tokens[t].length+1;}}
patTokens=pat.split(' ').filter(nonSpace);firstToken=patTokens[0].replace(/[^a-zA-Z0-9]+/g,'').toUpperCase();lastToken=patTokens[patTokens.length-1].replace(/[^a-zA-Z 0-9]+/g,'').toUpperCase();for(t=0;t<allTokens.length;t++){if(allTokens[t].value.replace(/[^a-zA-Z 0-9]+/g,'')==firstToken){estLastTokenIdx=t+patTokens.length-1;for(v=-1;v<=1;v+=2){for(i=0;i<=5;i++){idx=estLastTokenIdx+(i*v);if(idx>=0&&idx<allTokens.length&&allTokens[idx].value.replace(/[^a-zA-Z 0-9]+/g,'')==lastToken){patternFound=true;startToken=allTokens[t];endToken=allTokens[idx];break;}}
if(patternFound)break;}
if(patternFound)break;}}
if(patternFound){for(i=startToken.nodeIdx;i<=endToken.nodeIdx;i++){n=txtNodes[i];start=(i==startToken.nodeIdx)?startToken.startIdx:0;end=(i==endToken.nodeIdx)?endToken.startIdx+endToken.value.length:n.data.length;var spannode=document.createElement('span');spannode.className='hl_text';spannode.setAttribute('data-id',hl_id);spannode.setAttribute('data-score',hl_score);var middlebit=n.splitText(start);var endbit=middlebit.splitText(end-start);var middleclone=middlebit.cloneNode(true);spannode.appendChild(middleclone);n.parentNode.replaceChild(spannode,middlebit);}}}
try{return this.each(function(){innerHighlight(this,pat);});}catch(err){}};var HuffHighlights=this;HuffHighlights.constants={highlights_limit:5,vertical_id:'',vertical_name:'',vertical_color:'0088C3',entry_id:'',rotation_speed:10000,min_highlight_size:50,highlight_this_timeout:8000,entry_text_classname:'.articleBody',enable_hl:0};HuffHighlights.highlights=new Array();HuffHighlights.entry_highlights=new Array();HuffHighlights.urls={entry:'',author:'',home:'http://labs.huffingtonpost.com/highlights/#list/verticals/',api_endpoint:'http://labs.huffingtonpost.com/highlights/processed_snippets/index.json',send_api_endpoint:'http://labs.huffingtonpost.com/highlights/snippets/create.json'};HuffHighlights.current=0;HuffHighlights.selection='';HuffHighlights.init=function(enable_hl){if($(this.constants.entry_text_classname).length==0){this.constants.entry_text_classname='.entry_body_text';}
this.constants.entry_id=HPConfig.entry_id;this.constants.vertical_id=HPConfig.current_vertical_id;this.constants.vertical_name=HPConfig.current_vertical_name;this.constants.enable_hl=enable_hl;this.get_highlights(false);this.get_entry_highlights();$('#huffhighlights_logo, .hl_flyout .btn').click(function(){location.href=HuffHighlights.urls.home;});$('#huffhighlights_text').click(function(){if(HuffHighlights.urls.entry!=undefined){location.href=HuffHighlights.urls.entry;}});$('#huffhighlights_author').click(function(){if(HuffHighlights.urls.author!=undefined){location.href=HuffHighlights.urls.author;}});$('.huffhighlights_control').live('click',function(){var index=$(this).data('id')-1;HuffHighlights.show(index);});$('.hl_flyout').appendTo('body');$('.highlight_this').appendTo('body');$(".hl_text").live('click',function(e){var score=$(this).data('score');$("#huffhighlights_popup_score").html(score);$(".highlight_thank_you").css('display','none');if(score>=8){$(".highlight_score").css('display','block');}else{$(".highlight_score").css('display','none');}
HuffHighlights.show_popup(e);});$(".hl_flyout").mouseleave(function(){$(this).fadeOut('fast');});$(".close-flyout").click(function(){$(".hl_flyout").fadeOut('fast');});$('.highlight_this button').click(function(e){$('.highlight_this').hide();HuffHighlights.add_highlight();$(".highlight_score").css('display','none');$(".highlight_thank_you").css('display','block');HuffHighlights.show_popup(e);});$('#huffhighlights').hover(function(){HuffHighlights.rotation=clearInterval(HuffHighlights.rotation);},function(){HuffHighlights.rotation=setInterval(HuffHighlights.show,HuffHighlights.constants.rotation_speed);});};HuffHighlights.show=function(index){if(index==undefined){index=(HuffHighlights.current==HuffHighlights.highlights.length-1)?0:HuffHighlights.current+1;}
var quote=HuffHighlights.highlights[index];$('#huffhighlights_main').fadeOut('slow',function(){$('#huffhighlights_text').html(quote.text);$('#huffhighlights_author').html(quote.entity.authors[0].name);if(quote.text.length>120){$('#huffhighlights_text').addClass('huffhighlights_long');}else{$('#huffhighlights_text').removeClass('huffhighlights_long');}
$('#huffhighlights_main').fadeIn('slow');});HuffHighlights.urls.entry=quote.url;HuffHighlights.urls.author=quote.entity.authors[0].url;HuffHighlights.current=index;$('.huffhighlights_control').removeClass('active');$('#huffhighlights_controls').find("[data-id='"+(index+1)+"']").addClass('active');};HuffHighlights.apply_highlights=function(){var highlights=HuffHighlights.entry_highlights;for(var i=0;i<highlights.length;i++){var id=highlights[i]._id;var text=highlights[i].text;var score=highlights[i].n_highlights;$(HuffHighlights.constants.entry_text_classname).HPhighlight(text,id,score);}};HuffHighlights.get_selected=function(){var selObj='';var selText='';var range='';var placement='top';if(window.getSelection){selObj=window.getSelection();selText=selObj.toString();}else if(document.getSelection){selObj=document.getSelection();selText=selObj.toString();}else if(document.selection){selObj=document.selection.createRange();selText=selObj.text;}
if(selText==''){return false;}
range=(range=='')?selObj.getRangeAt(0):range;var dummy=document.createElement("span");var clean_text=$.trim(selText);if($.browser.mozilla){placement='top';}else if((clean_text==selText)&&(range.endOffset>0)&&(range.startOffset>0)){range.collapse(false);placement='bottom';}
range.insertNode(dummy);var position=$(dummy).offset();dummy.parentNode.removeChild(dummy);return{position:position,text:clean_text,mode:placement};};HuffHighlights.show_popup=function(e){var top=e.pageY-$('.hl_flyout').height()+30;var offset_top=$(window).scrollTop()+10;$(".hl_flyout").css('top',Math.max(top,offset_top)+'px');$(".hl_flyout").css('left',e.pageX-$('.hl_flyout').width()/2+'px');$(".hl_flyout").fadeIn('fast');};HuffHighlights.get_highlights=function(get_all){var api_params={length_max:240,limit:HuffHighlights.constants.highlights_limit,use_moderated:'true',score_wilson_min:0.001};if(!get_all){api_params.verticals=HuffHighlights.constants.vertical_id;}
$.ajax({url:HuffHighlights.urls.api_endpoint,data:api_params,dataType:'jsonp',cache:true,jsonpCallback:'hlVertical',success:function(data){if(data.success){if(data.count<HuffHighlights.constants.highlights_limit){if(!get_all){HuffHighlights.get_highlights(true);}else{return false;}}
HuffHighlights.highlights=data.snippets;var vertical_color=data.snippets[0]['entity']['vertical_color'];vertical_color=(vertical_color=='')?HuffHighlights.constants.vertical_color:vertical_color;$('#huffhighlights_more_vertical').html(HuffHighlights.constants.vertical_name);$('#huffhighlights_more a').attr('href',HuffHighlights.urls.home+HuffHighlights.constants.vertical_id);$('#huffhighlights_author').css('color','#'+vertical_color);$('.huffhighlights_control .active').css('color','#'+vertical_color);$('.huffhighlights_control:hover').css('color','#'+vertical_color);$('#huffhighlights_more').css('background','#'+vertical_color);HuffHighlights.show(0);$('#huffhighlights').show();HuffHighlights.rotation=setInterval(function(){HuffHighlights.show();},HuffHighlights.constants.rotation_speed);}}});};HuffHighlights.get_entry_highlights=function(){var api_params={length_max:240,limit:HuffHighlights.constants.highlights_limit,entities:HuffHighlights.constants.entry_id,use_moderated:'true',score_wilson_min:0.001};$.ajax({url:HuffHighlights.urls.api_endpoint,data:api_params,dataType:'jsonp',cache:true,jsonpCallback:'hlEntry',success:function(data){if(data.success&&data.count>0){HuffHighlights.entry_highlights=data.snippets;if(HuffHighlights.constants.enable_hl){HuffHighlights.apply_highlights();}}}});};HuffHighlights.add_highlight=function(){if(HuffHighlights.selection.length==0){return false;}
var api_params={'snippet[entity]':HuffHighlights.constants.entry_id,'snippet[text]':HuffHighlights.selection,'snippet[referer]':HPConfig.current_web_domain+HPConfig.current_uri,'snippet[explicit]':'true'};$.ajax({url:HuffHighlights.urls.send_api_endpoint,data:api_params,dataType:'jsonp',success:function(data){console.log('Message sent successfully!')}});};ready(HuffHighlights);});});
var PopupManager={popup_window:null,interval:null,interval_time:80,onClose:null,onCloseParams:null,waitForPopupClose:function(){if(PopupManager.isPopupClosed())
{PopupManager.destroyPopup();if('function'==typeof(PopupManager.onClose))
{PopupManager.onClose(PopupManager.onCloseParams);PopupManager.onClose=null;}}},destroyPopup:function(){this.popup_window=null;window.clearInterval(this.interval);this.interval=null;this.callback=null;},isPopupClosed:function(){return(!this.popup_window||(this.popup_window.closed===true||typeof(this.popup_window.closed)==="undefined"));},open:function(url,width,height){url=HuffPoUtil.trim(url);this.popup_window=window.open(url,'_blank',this.getWindowParams(width,height));this.popup_window.name="hp_popup_"+new Date().getTime();this.interval=window.setInterval(this.waitForPopupClose,this.interval_time);if(!this.popup_window||this.popup_window.closed)
{alert('Please accept the pop-up for this, check your pop-up blocker');return false;}
return this.popup_window;},getWindowParams:function(width,height){var center=this.getCenterCoords(width,height);return"width="+width+",height="+height+",status=1,location=1,resizable=yes,left="+center.x+",top="+center.y;},getCenterCoords:function(width,height){var parentPos=this.getParentCoords();var parentSize=this.getWindowInnerSize();var xPos=parentPos.width+Math.max(0,Math.floor((parentSize.width-width)/2));var yPos=parentPos.height+Math.max(0,Math.floor((parentSize.height-height)/2));return{x:xPos,y:yPos};},getWindowInnerSize:function(){var w=0;var h=0;if('innerWidth'in window){w=window.innerWidth;h=window.innerHeight;}else{var elem=null;if(('BackCompat'===window.document.compatMode)&&('body'in window.document)){elem=window.document.body;}else if('documentElement'in window.document){elem=window.document.documentElement;}
if(elem!==null){w=elem.offsetWidth;h=elem.offsetHeight;}}
return{width:w,height:h};},getParentCoords:function(){var w=0;var h=0;if('screenLeft'in window){w=window.screenLeft;h=window.screenTop;}else if('screenX'in window){w=window.screenX;h=window.screenY;}
return{width:w,height:h};}};
var social_campaign=false;var social_campaign_ref_param='comm_ref';var social_creative_ref_param='comm_crv';function Badges(params){this.unique_id="";if(params.unique_id){this.unique_id=params.unique_id;}
this.lazy_slices=[];this.holders={};this.holder_id="";this.holder=false;if(params.holder_id){this.holder_id=params.holder_id;this.holder=document.getElementById(this.holder_id);if(!this.holder){this.holder=false;}}
document.getElementById(this.holder_id);this.entry_params={};if(params.entry_params){this.entry_params=params.entry_params;}
if(!this.entry_params.hasOwnProperty('url')){this.entry_params.url=window.location.href;}
this.comment_params={};if(params.comment_params){this.comment_params=params.comment_params;}
this.global_object_name="";if(params.global_name){this.global_object_name=params.global_name;}
this.force_link_to_share=false;if(params.force_link_to_share){this.force_link_to_share=params.force_link_to_share;}
this.complete_callback_func_name=false;if(params.complete_callback_func_name){this.complete_callback_func_name=params.complete_callback_func_name;}
this.complete_callback=false;if(params.complete_callback){this.complete_callback=params.complete_callback;}
this.share_details_callback=false;if(params.share_details_callback){this.share_details_callback=params.share_details_callback;}
this.additional_panel_classes="";if(params.additional_panel_classes){this.additional_panel_classes=params.additional_panel_classes;}
this.panel_layout=1;if(params.panel_layout){this.panel_layout=params.panel_layout;}
this.human_readable=0;if(params.human_readable){this.human_readable=1;}
this.slices={};this.slice_params={};this.panel_border_style="standard";this.redirect_domains=[];this.redirect_domains.push('www.aol.com');this.slices_id=[];this.prev_amounts=[];this.current_amounts=[];this.current_delta=[0,0,0,0];if(HPConfig.inst_type==="dev")this.share_badges_test=0;this.layout_bottom=false;if(params.hasOwnProperty('layout_bottom')){this.layout_bottom=params.layout_bottom;}
HPFB.ensureInit(function(){var callback=function(action,href,elem){var entry_id=HPUtil.GetEntryID(href);if('Liked'==action||'Recommended'==action){Badges.trackShare({eid:entry_id,badge:'fblike'});SNProject.track(entry_id,'entry_like');}else if('Uniked'==action||'Unecommended'==action){SNProject.track(entry_id,'entry_unlike');}
return{module:Badges.getModuleName()};};HPFB.Tracking.Subscribe(['Liked','Unliked','Recommended','Unrecommended'],['badges'],true,callback);});}
Badges.getModuleName=function(config){var event_type="Badges";if('undefined'!==typeof config&&'undefined'!==typeof config.badge_version&&2==config.badge_version){event_type="Badges v2";}
if(config&&config.hasOwnProperty('layout_bottom')&&config.layout_bottom){event_type+=' - Bottom';}
return event_type;}
Badges.trackEvent=function(config){var event_type=Badges.getModuleName(config);HPTrack.trackEvent(event_type,config.action,config.label);};Badges.trackedShares=[];Badges.trackShare=function(config)
{var badge=config.badge;var eid=config.eid;if(!(badge&&eid))return;if(-1===jQuery.inArray(badge,Badges.trackedShares)){var banners='';if("undefined"!=typeof(HPAds)){banners=HPAds.get_banners_str();}
jQuery.getJSON("/include/share_track.php?a=post&eid="+eid+"&b="+badge+"&banners="+banners);Badges.trackedShares.push(badge);try{var share_type='';if('facebook'===badge){share_type='fb_share';}else if('fblike'===badge){share_type='fb_like';}else if('twitter'===badge){share_type=badge;}else if('email'===badge){share_type=badge;}else if('meneame'===badge){share_type=badge;}
if(share_type){bN.set("dL_shareType",share_type,1);bN.set("dL_shareURL",escape(window.location.href),1);bN.ping("aol-share");}}catch(e){}}};Badges.getUniqName=function(){if(typeof(this.last_uniq_id)==="undefined"){this.last_uniq_id=0;}
this.last_uniq_id++;var d=new Date();var uniq_record={};var uniq_timestamp=Math.floor((d.getTime()/(6000*12*5)));uniq_record.unique_id=uniq_timestamp+"_"+this.last_uniq_id;uniq_record.obj_name="Badges_"+uniq_record.unique_id;return uniq_record;};Badges.getInstance=function(config_vars){if(!config_vars){return false;}
if(!config_vars.badge_div_id){return false;}
config_vars.force_class=config_vars.use_glamorous||false;var inst_def=Badges.getUniqName();config_vars.is_glamorous=config_vars.is_glamorous||false;window[inst_def.obj_name]=new Badges({unique_id:inst_def.unique_id,holder_id:config_vars.badge_div_id,complete_callback_func_name:"",share_details_callback:false,additional_panel_classes:"",entry_params:{"id":config_vars.entry_id,"url":config_vars.entry_url,"title":config_vars.entry_title,"vertical_name":config_vars.vertical_name},global_name:"window."+inst_def.obj_name});var slices_set={1:"facebook_glamorous",2:"retweet_glamorous",3:"email_glamorous",4:"google_plusone_glamorous",5:"linkedin_glamorous",6:"pinterest_glamorous",7:"meneame_glamorous"};if(jQuery.browser.mozilla&&(jQuery.browser.version<='1.9.2')||(jQuery.browser.safari&&(jQuery.browser.version<='526.12.2')))
{slices_set[4]='comment_glamorous';}
if(typeof(config_vars.active_badges)!=="undefined"){slices_set={};for(var i=0;i<config_vars.active_badges.length;i++){slices_set[i+1]=config_vars.active_badges[i];}}
window[inst_def.obj_name].setPanelBorderStyle(config_vars.force_class||"glamorous_4");window[inst_def.obj_name].setSlices(slices_set);window[inst_def.obj_name].panel_layout=8;Badges.launch(config_vars.badge_div_id,inst_def);};Badges.launch=function(holder_div_id,inst_def){jQuery("#"+holder_div_id).ready(function(){window[inst_def.obj_name].start();});};Badges.prototype={};Badges.prototype.setPanelBorderStyle=function(panel_border_style){this.panel_border_style=panel_border_style;};Badges.prototype.setSlices=function(slices){this.slices=slices;};Badges.prototype.getSlices=function(){return this.slices;};Badges.prototype.applyHolderStyle=function(){jQuery(this.holder).addClass("badges_v2 "+this.panel_border_style+" "+this.additional_panel_classes);if(this.entry_params.force_fb_like){jQuery(this.holder).addClass("fb_like_contain");}};Badges.prototype.getShareArticleTitle=function(){var title=this.entry_params.title;return escape(title);};Badges.prototype.getArticleLink=function(append_param,badge_type){var url=this.entry_params.url;if(append_param){url=HuffPoUtil.AddStringToQueryString(url,append_param);}
if(typeof social_campaign!=='undefined'){url=HuffPoUtil.AddStringToQueryString(url,social_campaign_ref_param+"="+social_campaign);if((typeof social_campaign_creative!=="undefined")&&(typeof social_campaign_creative.facebook!=="undefined")){url=HuffPoUtil.AddStringToQueryString(url,social_creative_ref_param+"="+social_campaign_creative.facebook);}}
var user_id=HuffCookies.getUserId();if(user_id&&badge_type){url+="#sb="+user_id+",b="+badge_type;}
return escape(url);};Badges.prototype.getCommentLink=function(append_param,badge_type)
{var url=this.comment_params.url;if(append_param){url=HuffPoUtil.AddStringToQueryString(url,append_param);}
var user_id=HuffCookies.getUserId();if(user_id&&badge_type){url+="#sb="+user_id+",b="+badge_type;}
return escape(url);};Badges.prototype.getShareArticleLink=function(append_param,badge_type){if(this.force_link_to_share){return this.force_link_to_share;}
return this.getArticleLink(append_param,badge_type);};Badges.prototype.getShareCommentLink=function(append_param,badge_type){if(this.force_link_to_share){return this.force_link_to_share;}
return this.getCommentLink(append_param,badge_type);};Badges.prototype.getShareCommentData=function(){var def_mock={title:"",link:""};if(!this.share_details_callback){return def_mock;}
var sharing_data=window[this.share_details_callback](def_mock);if(!sharing_data){return def_mock;}
return sharing_data;};Badges.prototype.slicesCallback=function(cb_params){var me,func_name,slice_holder_id,i,slice_name;if(typeof(cb_params)!=="object"){return;}
me=eval(cb_params.global_name);for(i=0;i<cb_params.slice_names.length;i++){slice_name=cb_params.slice_names[i];func_name="sliceHandler_"+slice_name;if(typeof(me[func_name])=="function"&&cb_params.slice_params[slice_name]){slice_holder_id=me.slice_params[slice_name].slice_holder_id;me[func_name](slice_holder_id,cb_params.slice_params[slice_name]);}}
if(me.comment_params&&me.comment_params.id)
{jQuery(".hp_network_badge").html("");jQuery(".hp_network_badge").each(function()
{var className=jQuery(this).attr("class");if(className.indexOf("facebook")!==-1)
jQuery(this).addClass("no_count_facebook_badge comment_share_badge");else if(className.indexOf("retweet")!==-1)
jQuery(this).addClass("no_count_retweet_badge comment_share_badge");else if(className.indexOf("stumble")!==-1)
jQuery(this).addClass("no_count_stumble_badge comment_share_badge");});return;}};Badges.prototype.start=function(){if(!this.holder){return false;}
this.applyHolderStyle();var slice_id,slice,slice_name,slice_holder_id,script,need_param_flag,func_name,i,slice_array=[];for(slice_id in this.slices){if(this.slices.hasOwnProperty(slice_id)){slice_name=this.slices[slice_id];slice_holder_id=this.holder_id+"_slice_"+slice_id;this.slice_params[slice_name]={"slice_holder_id":slice_holder_id};slice=document.createElement("div");slice.setAttribute("id",slice_holder_id);jQuery(slice).addClass("slice slice_"+slice_id);this.holder.appendChild(slice);need_param_flag="sliceHandler_"+slice_name+"_needParams";if(typeof(this[need_param_flag])!=="undefined"){this.lazy_slices.push(slice_name);}else{func_name="sliceHandler_"+slice_name;if(typeof(this[func_name])=="function"){this[func_name](slice_holder_id,false);}}
slice_array.push(slice_name.substr(0,2));}}
var _url="";if(this.lazy_slices.length>0){var _slices_string="";for(i=0;i<this.lazy_slices.length;i++){if(_slices_string!==""){_slices_string+=",";}
_slices_string+=this.lazy_slices[i];}
script=document.createElement("script");script.setAttribute("type","text/javascript");this.holder.appendChild(script);_url="/badge/badges_json_v2.php?sn="+_slices_string+"&gn="+this.global_object_name+"&eu="+this.getArticleLink()+"&id="+this.entry_params.id+"&ebi"+HPConfig.blog_id+"&entry_design="+HPConfig.entry_design+"&cb="+this.global_object_name+".slicesCallback"+"&ng="+((HPConfig.ipad_application===true)?1:0);if(typeof(this.comment_params.id)!=="undefined"){_url+="&cd="+this.comment_params.id+"&cu="+this.comment_params.url;}
for(i=0;i<this.redirect_domains.length;i++){if(this.redirect_domains[i]==HPConfig.current_web_domain){_url="http://www.huffingtonpost.com"+_url;break;}}
script.setAttribute("src",_url);}
if(this.complete_callback_func_name){window[this.complete_callback_func_name]({badge_object:this,badge_holder_id:this.holder_id});}
if(this.complete_callback){this.complete_callback({badge_object:this,badge_holder_id:this.holder_id});}
var badges_type="badges_v1";if(this.panel_layout==8){badges_type="badges_v2";}
HPTrack.Module.Impressions.queue(badges_type+"/"+slice_array.join("_"));if(this.comment_params&&this.comment_params.id)
return;if(_url.length>0&&false){var what=".slicesCallback";var to=".slicesAmount_badges_glamorous";_url=_url.replace(new RegExp(what,'g'),to);var delta_time=0,clearTimeoutSecond=0;slices_id=this.slices_id;var _this=this;var updateEachSecond=function(current_delta,current_amounts){delta_time+=1;if(typeof current_delta!=='undefined'){for(i=0;i<current_delta.length;i++){var amount=current_amounts[i];if(isNaN(amount))amount=0;amount+=Math.floor(delta_time*current_delta[i]);jQuery("#"+slices_id[i]).html(HuffPoUtil.number_format(amount));}}};var updateEachMinute=function(clear){if(HPConfig.inst_type==="dev")this.share_badges_test=getEmulData();jQuery.getScript(_url);delta_time=0;if(typeof clear!=='undefined')clearTimeout(setTimeout_id);var funcEachMinute=function(){clearInterval(clearTimeoutSecond);clearTimeoutSecond=setInterval(updateEachSecond,1000,this.current_delta,this.current_amounts);}
var __this=this;var funcEMin=function(){funcEachMinute.apply(__this,[]);};setTimeout(funcEMin,2000);};var funcMin=function(){updateEachMinute.apply(_this,[]);};var setTimeout_id=setTimeout(funcMin,30000);setInterval(funcMin,60000,true);}
return true;};Badges.prototype.HpBuildIfr=function(w,h,src){var ifrm=document.createElement("iframe");ifrm.height=h;ifrm.width=w;ifrm.src=src;ifrm.frameBorder='0';ifrm.scrolling='no';ifrm.style.border="0px";ifrm.setAttribute("frameBorder","0");return ifrm;};Badges.prototype.newWindow=function(url,width,height,xpos,ypos){width=width||750;height=height||325;xpos=xpos||(screen.width/2)-(width/2);ypos=ypos||(screen.height/2)-(height/2)-150;var winopts="scrollbars=0,width="+width+",height="+height+",top="+ypos+",left="+xpos;var new_window=window.open(url,"badge_v2_share_window",winopts);new_window.focus();return new_window;};Badges.prototype.trackBadgeClick=function(config){var slice_name=config.slice_name;if(typeof(config.badge_version)==="undefined"){config.badge_version=1;}
var renameSliceForTracking=function(slice_name){slice_name=slice_name.charAt(0).toUpperCase()+slice_name.substr(1);if(slice_name=='retweet'){slice_name='Twitter';}
else if(slice_name=='retweet_glamorous'){slice_name='Twitter';}
else if(slice_name=='pinterest'){slice_name='Pinterest';}
else if(slice_name=='pinterest_glamorous'){slice_name='Pinterest';}
else if(slice_name=='meneame'){slice_name='Meneame';}
else if(slice_name=='meneame_glamorous'){slice_name='Meneame';}
return slice_name;};var renameSliceForQuant=function(slice_name){if(slice_name=='retweet'){return"twitter";}
else if(slice_name=='retweet_glamorous'){return"twitter";}
else if(slice_name=='facebook'){return"fb";}
else if(slice_name=='facebook_glamorous'){return"fb";}
else if(slice_name=='pinterest'){slice_name='pinterest';}
else if(slice_name=='pinterest_glamorous'){slice_name='pinterest';}
else if(slice_name=='meneame'){slice_name='Meneame';}
else if(slice_name=='meneame_glamorous'){slice_name='Meneame';}
return false;};var renameSliceForDoubleclick=function(slice_name){if(slice_name=='retweet'){return"twitter";}
else if(slice_name=='retweet_glamorous'){return"twitter";}
else if(slice_name=='facebook'){return"facebook";}
else if(slice_name=='facebook_glamorous'){return"facebook";}
else if(slice_name=='pinterest'){slice_name='pinterest';}
else if(slice_name=='pinterest_glamorous'){slice_name='pinterest';}
else if(slice_name=='meneame'){slice_name='Meneame';}
else if(slice_name=='meneame_glamorous'){slice_name='Meneame';}
return false;};if(slice_name){Badges.trackEvent({badge_version:config.badge_version,action:'Click',label:renameSliceForTracking(slice_name),layout_bottom:this.layout_bottom});var nslice=renameSliceForDoubleclick(slice_name);if(nslice){if((slice_name=='retweet')&&(typeof social_campaign_tracking!=="undefined")&&social_campaign_tracking.twitter_share_action){if(typeof social_campaign_tracking.twitter_share_action=="object"){for(tracking_url in social_campaign_tracking.twitter_share_action){if((typeof social_campaign_tracking.twitter_share_action[tracking_url]=="string")&&(social_campaign_tracking.twitter_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.twitter_share_action[tracking_url],document.body);}}}else if(social_campaign_tracking.twitter_share_action!=""){HPUtil.trackerImg(social_campaign_tracking.twitter_share_action,document.body);}
if((typeof social_campaign!='undefined')&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]){nslice=renameSliceForQuant(slice_name);HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+social_campaign+"."+nslice,document.body);}else if(this.tracking_flight_name){nslice=renameSliceForQuant(slice_name);HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+this.tracking_flight_name+"."+nslice,document.body);}}else if((slice_name=='facebook')&&(typeof social_campaign_tracking!=="undefined")&&social_campaign_tracking.facebook_share_action){if(typeof social_campaign_tracking.facebook_share_action=="object"){for(tracking_url in social_campaign_tracking.facebook_share_action){if((typeof social_campaign_tracking.facebook_share_action[tracking_url]=="string")&&(social_campaign_tracking.facebook_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.facebook_share_action[tracking_url],document.body);}}}else if(social_campaign_tracking.facebook_share_action!=""){HPUtil.trackerImg(social_campaign_tracking.facebook_share_action,document.body);}}}}
HPUtil.updateInfluenceCookie('shared',1);};Badges.prototype.getPinterestCounts=function(url,cb){var snode=document.createElement('script');var hnode=document.getElementsByTagName('head')[0];snode.setAttribute('async','true');var pin_counts_url='http://api.pinterest.com/v1/urls/count.json';snode.setAttribute('src',pin_counts_url+'?callback='+cb+'&url='+url);hnode.appendChild(snode);};window.pinterestGetCounts=function(data){if(data['error'])
return;var targetUrl=data['url'];var count=data['count'];if(count>999&&count<=999999)
count=Math.floor(count/1000)+"K+";else if(count>999999&&count<=999999999)
count=Math.floor(count/1000000)+"M+";else if(count>999999999)
count="++";jQuery("#badges_v2_1 .badge_v2_pinterest").html(count);};Badges.prototype.sliceHandler_pinterest_glamorous=function(holder_id,params){this.slices_id.push("badge_v2_pinterest_"+this.unique_id);var a=jQuery(document.createElement("a"));a.attr("id","badge_v2_pinterest_"+this.unique_id);a.attr("href","javascript:void(0);");a.addClass("badge_v2_pinterest hp_network_badge");a.html(0).appendTo(document.getElementById(holder_id));;this.getPinterestCounts(this.entry_params.url,'pinterestGetCounts');var scope=this;a.click({scope:this,handler:this.userFunc_pinterest_share},function(e){e.data.handler.apply(e.data.scope);})
.click({handler:this.trackBadgeClick},function(e){e.data.handler({badge_version:params.badge_version,slice_name:'pinterest'});return false;});};Badges.prototype.userFunc_pinterest_share=function(e){var description='',img=jQuery('img.pinit').attr('src'),unique_id=this.unique_id,meta=document.getElementsByTagName('meta'),c=meta.length,entry_url=this.entry_params.url.replace(/\?.*/,'');if(jQuery('.pinitdesc').length==0){for(var i=0;i<c;i++){if(!meta[i].name)
continue;if(meta[i].name=='description'){description=meta[i].content;}}}
else{description=jQuery('.pinitdesc').html();}
if(jQuery('.piniturl').length>0){entry_url=encodeURIComponent(jQuery('.piniturl').attr('href'));}
var maxLimit=500;var content=encodeURIComponent(description);if(content.length>maxLimit){content=content.substr(0,maxLimit-3)+'...';}
var pinUrl='http://pinterest.com/pin/create/button/?'
+'url='+entry_url
+'&media='+img
+'&description='+content;var modal=this.newWindow(pinUrl,665,600),_this=this;var wait=function(){setTimeout(function(){if(modal==null){return;}
if(modal.closed){_this.getPinterestCounts(entry_url,'pinterestGetCounts');}else{wait();}},25);};wait();return false;};Badges.prototype.sliceHandler_linkedin_glamorous_needParams=true;Badges.prototype.sliceHandler_linkedin_glamorous=function(holder_id,params){var count_amount=parseInt(params.linkedin_amount);if(isNaN(count_amount))count_amount=0;this.slices_id.push("badge_v2_retweet_"+this.unique_id);this.current_amounts.push(count_amount);this.prev_amounts.push(count_amount);var a=jQuery(document.createElement("a"));a.attr("id","badge_v2_linkedin_"+this.unique_id);a.attr("href","javascript:void(0);");a.addClass("badge_v2_linkedin hp_network_badge");a.html(HuffPoUtil.number_format(count_amount)).appendTo(document.getElementById(holder_id));;params.badge_version=8;var on_click=function(e,params){Badges.trackShare({eid:params.eid,badge:'linkedin'});};var on_click_params={eid:this.entry_params.id};var scope=this;a.click(function(){on_click(scope,on_click_params);})
.click({scope:this,handler:this.userFunc_linkedin_share},function(e){e.data.handler.apply(e.data.scope);})
.click({handler:this.trackBadgeClick},function(e){e.data.handler({badge_version:params.badge_version,slice_name:'linkedin'});return false;});};Badges.prototype.userFunc_linkedin_share=function(e){var description='';var thumbnail=(HPConfig&&HPConfig.image)?HPConfig.image:'';var meta=document.getElementsByTagName('meta');var c=meta.length;for(var i=0;i<c;i++){if(!meta[i].name)
continue;if(meta[i].name=='description'){description=meta[i].content;}}
var maxLimit=256;var content=encodeURIComponent(description);!content&&(content=jQuery('.qr_entry_content').text());if(content.length>maxLimit){content=content.substr(0,maxLimit-3)+'...';}
var bdiv=$("badge_v2_linkedin"+this.unique_id);var l_count=parseInt(jQuery("#badge_v2_linkedin_"+this.unique_id).html())+1;jQuery("#badge_v2_linkedin_"+this.unique_id).html(l_count);var title=this.getShareArticleTitle();if(title.length>maxLimit){title=title.substr(0,maxLimit-3)+'...';}
var linkedin_share_config={comment:'',entry_id:this.entry_params.id,url:this.getShareArticleLink(),title:title,content:content,thumbnail:thumbnail,badge_divel:bdiv,on_success:function(){}};if(!(HuffCookies.getUserId()&&HuffPrefs.get("linkedin")))
{linkedin_share_config.on_success=this.userFunc_linkedin_show_modal;linkedin_share_config.on_success_params=this.holder_id;linkedin_share_config.on_success_timeout=1000;}
Sharer.Linkedin.share(linkedin_share_config);return false;};Badges.prototype.sliceHandler_facebook_glamorous_needParams=true;Badges.prototype.sliceHandler_facebook_glamorous=function(holder_id,params){var a=document.createElement("a");a.setAttribute("id","badge_v2_facebook_"+this.unique_id);a.setAttribute("href","javascript:void(0);");jQuery(a).addClass("badge_v2_facebook_ipad_app hp_network_badge");var count_amount=parseInt(params.share_amount);if(isNaN(count_amount))count_amount=0;if(this.human_readable){a.innerHTML=HuffPoUtil.int2size(count_amount);}else{a.innerHTML=HuffPoUtil.number_format(count_amount);}
this.slices_id.push("badge_v2_facebook_"+this.unique_id);this.current_amounts.push(count_amount);this.prev_amounts.push(count_amount);document.getElementById(holder_id).appendChild(a);this.userFunc_facebook_add_click_listener(a,params);};Badges.prototype.sliceHandler_facebook_techcrunch_needParams=true;Badges.prototype.sliceHandler_facebook_techcrunch=function(holder_id,params){var li=document.createElement("li");var anchor=document.createElement("a");anchor.setAttribute("id","badge_v2_facebook_"+this.unique_id);jQuery(anchor).addClass("facebook");anchor.innerHTML=HuffPoUtil.number_format(params.share_amount);li.appendChild(anchor);document.getElementById(holder_id).appendChild(li);this.userFunc_facebook_add_click_listener(anchor,params);}
Badges.prototype.userFunc_facebook_add_click_listener=function(element,params){var on_click=function(e,params){var url=params[0],slice_name=params[1];e.userFunc_facebook_share_url(url);e.trackBadgeClick({badge_version:9,slice_name:slice_name});var entry_id=HPUtil.GetEntryID(url);if(typeof(SNProject)==="object"){SNProject.track(entry_id,'entry_facebook_share');}
return false;};var on_click_params=["http://www.facebook.com/sharer.php?u="+this.getShareArticleLink("utm_hp_ref=fb&src=sp","facebook"),'facebook'];var scope=this;jQuery(element).bind("click",function(){on_click(scope,on_click_params);});}
Badges.prototype.userFunc_facebook_share_url=function(url){this.userFunc_facebook_show_sharer(url);if(HuffCookies.getUserId()&&!HuffPrefs.get('facebook')){this.userFunc_facebook_show_promo_connect_window();}
return false;};Badges.prototype.userFunc_facebook_show_sharer=function(url){if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].fb_100x20){var hLinks=document.getElementsByTagName('link');for(x in hLinks){if(hLinks[x].rel&&hLinks[x].rel=='image_src'){hLinks[x].href='http://www.huffingtonpost.com/ads/creative/image_compositor.php?overlay='+escape(HPAds.social_campaigns[social_campaign].fb_100x20)+'&image='+escape(hLinks[x].href);}}}
this.newWindow(url);Badges.trackShare({eid:this.entry_params.id,badge:'facebook'});};Badges.prototype.userFunc_facebook_show_promo_connect_window=function(){var HC=HuffConnect;HC.hideModal();var html='<div style="font-size: 14pt; font-weight: bold">'+_('Do you want to connect to HuffPost using Facebook?')+'</div>';html+='<a class="login_light_link" ';html+='href="/social/join.html?autojoin=1" ';html+='onclick="linkSocialAccount.checkLoginStatus(\'facebook\'); return false;"';html+='target="_blank">';html+='<img border="0" src="'+_('/images/fb-large.gif')+'" alt="'+_('Connect with Facebook')+'" style="padding: 16px;"/>';html+='</a>';HC.socialModal({inner_html:html,modal_head_image:'',modal_subhead_image:'',position:'fixed'});};Badges.prototype.sliceHandler_retweet_glamorous_needParams=true;Badges.prototype.sliceHandler_retweet_glamorous=function(holder_id,params){var count_amount=parseInt(params.views_amount)||0;this.slices_id.push('badge_v2_retweet_'+this.unique_id);this.current_amounts.push(count_amount);this.prev_amounts.push(count_amount);var tmp_amount=count_amount;if(this.human_readable){tmp_amount=HuffPoUtil.int2size(count_amount);}else{tmp_amount=HuffPoUtil.number_format(count_amount);}
var button=jQuery('<a />').attr('id','badge_v2_retweet_'+this.unique_id)
.addClass('badge_v2_retweet_ipad_app hp_network_badge')
.html(tmp_amount)
.appendTo(document.getElementById(holder_id));var text=this.entry_params.custom_tweet_text||this.entry_params.title||'',url=params.short_url||'';var comm_info,sc=window.social_campaign,scc=window.social_campaign_creative,hp_sc=HPAds.social_campaigns;if((typeof(scc)!=='undefined')&&(typeof(scc.constructor)=='function')&&scc.twitter&&text.search(scc.twitter)==-1){var twitter_optout_lang=scc.twitter_optout_language?scc.twitter_optout_language:'';comm_info={text:twitter_optout_lang,hash:scc.twitter};}else if(sc&&hp_sc&&hp_sc[sc]&&hp_sc[sc].hashtag&&text.search(hp_sc[sc].hashtag)==-1){comm_info={text:hp_sc[sc].twitter_optout_language,hash:hp_sc[sc].hashtag}}
else if(this.entry_params.tweet_comm_hash&&text.search(this.entry_params.tweet_comm_hash)==-1){comm_info={text:this.entry_params.tweet_comm_text,hash:this.entry_params.tweet_comm_hash};}
if(!url||sc||(typeof(scc)!=="undefined")){url=decodeURIComponent(this.getShareArticleLink("utm_hp_ref=twitter"))||'';}
var cb=function(short_url){var twitter_signature=HPConfig.twitter_signature?HPConfig.twitter_signature:'@HuffingtonPost';var component=' '+short_url+' '+_('via')+' '+twitter_signature;if(text.length>140-component.length){text=text.substring(0,140-component.length-3)+'...'+component;}
else{text+=component;}
if(comm_info){text=comm_info.text?comm_info.text:text;text+=' '+comm_info.hash;}
var lang='en';if(typeof jQuery.I18N!=="undefined"){lang=jQuery.I18N.getLocale().substr(0,2);}
button.attr("href","https://twitter.com/intent/tweet?text="
+encodeURIComponent(text)
+'&lang='
+lang);};if(url&&url.length>30){HPUtil.bitly_url(url,cb);}else{cb(url);}
var scope=this,eid=this.entry_params.id;button.click(function(){Badges.trackShare({eid:eid,badge:'twitter'});scope.trackBadgeClick({badge_version:params.badge_version,slice_name:'retweet'});if(HuffCookies.getUserId()&&!HuffPrefs.get("twitter")){}});};Badges.prototype.sliceHandler_retweet_techcrunch_needParams=true;Badges.prototype.sliceHandler_retweet_techcrunch=function(holder_id,params){var li=document.createElement("li");var anchor=jQuery(document.createElement("a"));anchor.attr("id","badge_v2_retweet_"+this.unique_id)
.addClass("twitter")
.html(HuffPoUtil.number_format(params.views_amount))
.appendTo(li)
.parent().appendTo(document.getElementById(holder_id));params.badge_version=9;this.userFunc_retweet_prepare_button(anchor,params);}
Badges.prototype.userFunc_retweet_prepare_button=function(element,params){var maxLimit=140;var tweet=this.entry_params.custom_tweet_text||this.entry_params.title||'';if(tweet.length>maxLimit){tweet=tweet.substr(0,maxLimit-3)+'...';}
this.tweet_descr={is_ready:false,maxLimit:maxLimit,shortUrl:params.short_url||"",tweet_text:tweet};var on_click=function(e,params){Badges.trackShare({eid:params.eid,badge:'twitter'});};var on_click_params={eid:this.entry_params.id};var scope=this;element.click(function(){on_click(scope,on_click_params);})
.click({scope:this,handler:this.userFunc_post_tweet},function(e){e.data.handler.apply(e.data.scope);})
.click({handler:this.trackBadgeClick},function(e){e.data.handler({badge_version:params.badge_version,slice_name:'retweet'});return false;});}
Badges.prototype.userFunc_post_tweet=function(){var comm_info=false,links;if((typeof social_campaign!='undefined')&&(typeof social_campaign_creative=="object")&&(typeof social_campaign_creative.twitter!=='undefined')&&(this.tweet_descr.tweet_text.search(social_campaign_creative.twitter)==-1)){var twitter_optout_language=(typeof social_campaign_creative.twitter_optout_language!='undefined')?social_campaign_creative.twitter_optout_language:'';comm_info={text:twitter_optout_language,hash:social_campaign_creative.twitter}}else if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].hashtag&&(this.tweet_descr.tweet_text.search(HPAds.social_campaigns[social_campaign].hashtag)==-1)){comm_info={text:HPAds.social_campaigns[social_campaign].twitter_optout_language,hash:HPAds.social_campaigns[social_campaign].hashtag}}
else if(this.entry_params.tweet_comm_hash&&(this.tweet_descr.tweet_text.search(this.entry_params.tweet_comm_hash)==-1)){comm_info={text:this.entry_params.tweet_comm_text,hash:this.entry_params.tweet_comm_hash};}
var url_to_share="";switch(this.tweet_descr.url_mode){case"comment_share":var sharing_data=this.getShareCommentData();url_to_share=sharing_data.link;break;case"comment":url_to_share=this.getShareCommentLink();break;default:url_to_share=this.getShareArticleLink("utm_hp_ref=twitter");break;}
var short_url=false;if(this.tweet_descr.shortUrl===""||social_campaign){links=[{insert_type:"add_to_end",make_short:true,url:url_to_share}];}else{links=[{insert_type:"add_to_end",url:this.tweet_descr.shortUrl}];short_url=this.tweet_descr.shortUrl;}
var on_success_cb=function(){Badges.trackEvent({action:'Shared',label:'Twitter'});};var on_success_tout=25;var on_success_cb_params="";if(HuffCookies.getUserId()&&!HuffPrefs.get("twitter")){on_success_cb=Badges.prototype.userFunc_twitter_show_promo_modal_window;on_success_tout=1000;on_success_cb_params=this.holder_id;}
Sharer.Twitter.share({tweet_text:this.tweet_descr.tweet_text,commercial_info:comm_info,links:links,on_success_callback:on_success_cb,on_success_timeout:on_success_tout,on_success_callback_params:on_success_cb_params,badge_holder_id:this.holder_id,entry_url:this.entry_params.url,entry_short_url:short_url});return false;};Badges.prototype.userFunc_twitter_show_promo_modal_window=function(holder_id)
{HuffConnect.hideModal();var html='<div style="font-size: 14pt; font-weight: bold">'+_('Do you want to connect to HuffPost using Twitter?')+'</div>';html+='<a class="login_light_link" ';html+='href="/social/join.html?autojoin=1" ';html+='onclick="linkSocialAccount.checkLoginStatus(\'twitter\'); return false;"';html+='target="_blank">';html+='<img border="0" src="'+_('/images/Sign-in-with-Twitter-darker.png')+'" alt="'+_('Connect with Twitter')+'" style="padding: 16px;"/>';html+='</a>';var modal_params={inner_html:html,modal_head_image:'',modal_subhead_image:'',position:'fixed'};if(holder_id&&"quickread_badges"==holder_id){modal_params.onclose=function(){HPAds.ad_reload('quickread','qr_ad');return;}
HuffConnect.socialModal(modal_params);}else{HuffConnect.socialModal(modal_params);}
return;};Badges.prototype.sliceHandler_comment_glamorous_needParams=true;Badges.prototype.sliceHandler_comment_glamorous=function(holder_id,params){var a=document.createElement("a");jQuery(a).addClass("badge_v2_comments");a.setAttribute("href","javascript:void(0);");a.setAttribute("id","badge_v2_comments_"+this.unique_id);jQuery(a).addClass("badge_v2_comments_ipad_app");var count_amount=parseInt(params.comments_amount);if(isNaN(count_amount))count_amount=0;if(this.human_readable){a.innerHTML=HuffPoUtil.int2size(count_amount);}else{a.innerHTML=HuffPoUtil.number_format(count_amount);}
a.innerHTML=count_amount;this.slices_id.push("badge_v2_comments_"+this.unique_id);this.current_amounts.push(count_amount);this.prev_amounts.push(count_amount);if(HPConfig.ipad_application===true){jQuery(a).bind("click",function(){var target=jQuery("a[name=comments]");var container=jQuery("div#container-for-entry");if(!target||!container)return;var duration="slow";var offset=-45;container.animate({scrollTop:target.offset().top+offset},duration);});}else{jQuery(a).bind("click",function(){jQuery('html,body').animate({scrollTop:jQuery("a[name=comments]").offset().top},1700);});}
document.getElementById(holder_id).appendChild(a);if(typeof(document.badgeCommentAmountIncrease)==="undefined"){document.badge_comment_panels=[];document.badgeCommentRegisterPanel=function(panel){document.badge_comment_panels.push(panel);};document.badgeCommentAmountIncrease=function(amount){var panel,panel_id;for(panel_id in document.badge_comment_panels){if(document.badge_comment_panels.hasOwnProperty(panel_id)){panel=document.badge_comment_panels[panel_id];panel.userFunc_set_comments_amount(amount);}}};}
document.badgeCommentRegisterPanel(this);jQuery(a).click(jQuery.proxy(function(){this.trackBadgeClick({badge_version:2,slice_name:'comments'});},this));this.userFunc_set_comments_amount=function(number){var holder=document.getElementById("badge_v2_comments_"+this.unique_id);if(!holder){return;}
while(holder.childNodes.length>=1){holder.removeChild(holder.firstChild);}
holder.appendChild(document.createTextNode(number));};};Badges.prototype.sliceHandler_digg_small=function(holder_id,params){var holder=HuffPoUtil.getNode("#"+holder_id);this._innerHandler_digg_small(holder,params,{});return;};Badges.prototype._innerHandler_digg_small=function(holder,params,custom_params){var my_custom_params=custom_params||{};var param={url:this.entry_params.url,title:this.entry_params.title};this._createDiggButton(holder,param,my_custom_params);this._digg_track(holder);return;};Badges.prototype._createDiggButton=function(holder,params,custom_params)
{var link=document.createElement("a");link.href='http://digg.com/submit?url='+escape(params.url)+'&title='+encodeURIComponent(params.title);link.className='DiggThisButton DiggThisButtonMedium';if(custom_params&&custom_params.class_name)
{var container=document.createElement('div');container.className=custom_params.class_name;container.appendChild(link);holder.appendChild(container);}
else
{holder.appendChild(link);}
HPUtil.loadAndRun('http://widgets.digg.com/buttons.js');};Badges.prototype._digg_track=function(holder){jQuery(holder).bind("click",function(e){var entry_id=HuffPoUtil.GetEntryID();if(!entry_id){return;}
var target=e.target||e.srcElement;if(target.className&&target.className.indexOf('db-')===0){this.trackEvent('Click','Digg');}
Badges.trackShare({eid:entry_id,badge:'digg'});});};Badges.prototype.sliceHandler_stumble_needParams=true;Badges.prototype.sliceHandler_stumble=function(holder_id,params){var div=document.createElement("div");if(params.stumble_views>9){jQuery(div).addClass("badge_v2_stumble_count_div");div.innerHTML=params.stumble_views;}else{jQuery(div).addClass("badge_v2_stumble_no_count_div");}
var _this=this;jQuery(div).bind("click",{url:"http://www.stumbleupon.com/toolbar/badge_click.php?r="+this.getShareArticleLink(null,"stumble"),eid:this.entry_params.id},function(e){Badges.trackEvent({action:'Click',label:'Stumble'});Badges.trackShare({eid:e.data.eid,badge:'stumble'});_this.newWindow(e.data.url,830,500);return false;});HuffPoUtil.getNode("#"+holder_id+'').appendChild(div);};Badges.prototype.sliceHandler_stumble_comment_needParams=true;Badges.prototype.sliceHandler_stumble_comment=function(holder_id,params){var div=document.createElement("div");if(params.stumble_views>9){jQuery(div).addClass("badge_v2_stumble_count_div");div.innerHTML=params.stumble_views;}else{jQuery(div).addClass("badge_v2_stumble_no_count_div");}
var _this=this;jQuery(div).bind("click",{url:"http://www.stumbleupon.com/toolbar/badge_click.php?r="+this.getShareCommentLink(null,"stumble")},function(e){Badges.trackEvent({action:'Click',label:'Stumble'});_this.newWindow(e.data.url);return false;});HuffPoUtil.getNode("#"+holder_id+'').appendChild(div);};Badges.prototype.sliceHandler_email_glamorous_needParams=true;Badges.prototype.sliceHandler_email_glamorous=function(holder_id,params){var anchor=document.createElement("a"),current_amount=parseInt(params.emails_amount);if(isNaN(current_amount))current_amount=0;anchor.setAttribute("id","badge_v2_email_"+this.unique_id);jQuery(anchor).addClass("badge_v2_email_ipad_app");if(this.human_readable){anchor.innerHTML=HuffPoUtil.int2size(current_amount);}else{anchor.innerHTML=HuffPoUtil.number_format(current_amount);}
this.slices_id.push("badge_v2_email_"+this.unique_id);this.current_amounts.push(current_amount);this.prev_amounts.push(current_amount);if(HPConfig.ipad_application===true){anchor.href="mailto:?subject="+escape(this.entry_params.title)+"&body="+this.entry_params.url;jQuery(anchor).bind("click",{eid:this.entry_params.id,human_readable:this.human_readable},function(e){if(e.data.human_readable){anchor.innerHTML=HuffPoUtil.int2size(current_amount+1);}else{anchor.innerHTML=HuffPoUtil.number_format(current_amount+1);}
Badges.trackEvent({badge_version:2,action:'Click',label:'Email'});Badges.trackShare({eid:e.data.eid,badge:'email'});return false;});}else{anchor.href="javascript:void(0)";jQuery(anchor).bind("click",{eid:this.entry_params.id,human_readable:this.human_readable},function(e){if(e.data.human_readable){anchor.innerHTML=HuffPoUtil.int2size(current_amount+1);}else{anchor.innerHTML=HuffPoUtil.number_format(current_amount+1);}
SharePost.emailForm(e.data.eid,'','');Badges.trackEvent({badge_version:8,action:'Click',label:'Email'});return false;});}
document.getElementById(holder_id).appendChild(anchor);};Badges.prototype.sliceHandler_comments_techcrunch_needParams=true;Badges.prototype.sliceHandler_comments_techcrunch=function(holder_id,params){var li=document.createElement("li");var anchor=document.createElement("a");anchor.setAttribute("id","badge_v2_comments_"+this.unique_id);anchor.setAttribute("href",this.entry_params.url+"#comments");jQuery(anchor).addClass("message");anchor.innerHTML=HuffPoUtil.number_format(params.comments_amount);li.appendChild(anchor);document.getElementById(holder_id).appendChild(li);}
Badges.prototype.sliceHandler_meneame_glamorous_needParams=true;Badges.prototype.sliceHandler_meneame_glamorous=function(holder_id,params){var url=window.location.href,title=document.title,slice='badge_v2_meneame',slice_id=slice+'_'+this.unique_id,_this=this,counts=params.meneame_amount;isNaN(counts)&&(counts=0);if(this.human_readable){counts=HuffPoUtil.int2size(counts);}else{counts=HuffPoUtil.number_format(counts);}
this.slices_id.push(slice_id);this.current_amounts.push(params.share_amount);this.prev_amounts.push(params.share_amount);huff.use('jquery',function($){var badge=$('<a href="http://www.meneame.net/submit.php?url='+encodeURIComponent(url)+'&title='+encodeURIComponent(title)+'"></a>');badge.addClass(slice).attr('id',slice_id).html(counts);holder_id=$('#'+holder_id);holder_id.append(badge);badge.click(function(e){e.preventDefault();_this.newWindow($(this).attr('href'),790,600);Badges.trackShare({eid:HPUtil.GetEntryID(url),badge:'meneame'});badge.html(++counts);}).click({handler:_this.trackBadgeClick},function(e){e.data.handler({badge_version:params.badge_version,slice_name:'meneame'});});});};Badges.prototype.sliceHandler_google_plusone_glamorous_needParams=true;Badges.prototype.sliceHandler_google_plusone_glamorous=function(holder_id,params){var entry_url=this.entry_params.url.split('?',1)[0];(window.IS_NEWSGLIDE||window.IS_CHROMEAPP)&&!window.huff&&(window.huff={});if(window.IS_NEWSGLIDE||window.IS_CHROMEAPP){(function($){holder_id=$('#'+holder_id);$.getScript("https://apis.google.com/js/plusone.js?lang=en-US",function($){if(!(window.gapi&&gapi.plusone)){return;}
holder_id.html('<div id="plusone-div"></div>').parent().addClass('google_plus1_badge');gapi.plusone.render('plusone-div',{size:'tall',href:entry_url});});}(jQuery));}else{huff.use('jquery',function($){holder_id=$('#'+holder_id);var googleplus_lang='en-US';if(typeof jQuery.I18N!=="undefined"){googleplus_lang=jQuery.I18N.getLocale().replace('_','-');}
window.___gcfg={lang:googleplus_lang};$.getScript("https://apis.google.com/js/plusone.js",function($){if(!(window.gapi&&gapi.plusone))
return;holder_id.html('<div id="plusone-div"></div>').parent().addClass('google_plus1_badge');jQuery('#plusone-div').parent().addClass('google-plusone');gapi.plusone.render('plusone-div',{size:'tall',href:entry_url,callback:function(jsonParam){try{if('on'===jsonParam.state){bN.set("dL_shareType","google+",1);bN.set("dL_shareURL",escape(jsonParam.href),1);bN.ping("dL_share");}}catch(e){}}});});});}};Badges.prototype.slicesAmount_badges_glamorous=function(cb_params){var me,func_name,i,slice_name;if(typeof(cb_params)!=="object"){return;}
this.prev_amounts=this.current_amounts;this.current_amounts=[];this.current_delta=[];me=eval(cb_params.global_name);for(i=0;i<cb_params.slice_names.length;i++){slice_name=cb_params.slice_names[i];func_name="sliceAmount_"+slice_name;if(typeof(me[func_name])=="function"&&cb_params.slice_params[slice_name]){me[func_name](cb_params.slice_params[slice_name]);}}
for(i=0;i<this.current_amounts.length;i++){if(this.current_amounts[i]>0){var delta=(this.current_amounts[i]-this.prev_amounts[i])/60;this.current_delta[i]=(delta>0?delta:0)}else{this.current_delta[i]=0;}}};Badges.prototype.sliceAmount_facebook_glamorous_needParams=true;Badges.prototype.sliceAmount_facebook_glamorous=function(params){if(HPConfig.inst_type==="dev")count_amount=(params.share_amount)?share_badges_test:0;else count_amount=parseInt(params.share_amount);if(isNaN(count_amount))count_amount=0;jQuery("#"+this.slices_id[0]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount);};Badges.prototype.sliceAmount_retweet_glamorous_needParams=true;Badges.prototype.sliceAmount_retweet_glamorous=function(params){count_amount=parseInt(params.views_amount);if(isNaN(count_amount))count_amount=0;jQuery("#"+this.slices_id[1]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount);};Badges.prototype.sliceAmount_email_glamorous_needParams=true;Badges.prototype.sliceAmount_email_glamorous=function(params){count_amount=parseInt(params.emails_amount);if(isNaN(count_amount))count_amount=0;jQuery("#"+this.slices_id[2]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount);};Badges.prototype.sliceAmount_comment_glamorous_needParams=true;Badges.prototype.sliceAmount_comment_glamorous=function(params){count_amount=parseInt(params.comments_amount);if(isNaN(count_amount))count_amount=0;jQuery("#"+this.slices_id[3]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount);};function getEmulData(){var test_time=new Date();var test=test_time.getTime().toString();share_badges_test=Math.floor(test.substr(10));return share_badges_test;}
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var Sharer={check_incomplete_sessions:function(){this.Twitter.check_incomplete_session();},Facebook:{links:[],facebook_post:{message:"",attachment:{"name":"","description":"","href":""},action_links:[{"text":_("Join HuffPost Social News now!"),"href":HuffPoUtil.getHostName()+'/social/?r='+escape(HuffCookies.getUserGuid())}],target_id:null,user_message_prompt:null,callback:null,auto_publish:false,actor_id:null},share:function(params){for(var property in params.facebook_post){if(params.facebook_post.hasOwnProperty(property)){this.facebook_post[property]=params.facebook_post[property];}}
if(params.links){Sharer.Links.process(params.links,Sharer.Facebook.real_share,Sharer.Facebook);return false;}
this.real_share();},real_share:function(){HPFB.ensureInit(function(){HPFB.waitForSession(function(){if(Sharer.Facebook.facebook_post.attachment.description){var _tmp=Sharer.Facebook.facebook_post.attachment.description;_tmp=Sharer.Links.expand_text_with_links(_tmp);Sharer.Facebook.facebook_post.attachment.description=_tmp;}
HPFB.streamPublish(Sharer.Facebook.facebook_post.message,Sharer.Facebook.facebook_post.attachment,Sharer.Facebook.facebook_post.action_links,Sharer.Facebook.facebook_post.target_id,Sharer.Facebook.facebook_post.user_message_prompt,Sharer.Facebook.facebook_post.callback,Sharer.Facebook.facebook_post.auto_publish,Sharer.Facebook.facebook_post.actor_id);});});}},Twitter:{hp_cookie_continue:"hp_sharer_twitter_sharing",hp_cookie_continue_obj:"hp_sharer_twitter_share_text",twitter_messg_limit:140,modal_element_ids:{},oauthInfo:{},user_supply_vars:["tweet_text","commercial_info","links","callbacks","badge_holder_id","entry_url","entry_short_url","add_via","on_success_callback","on_success_callback_params","on_success_timeout"],tweet_text:"",links:[],add_via:true,commercial_info:false,callbacks:false,badge_holder_id:null,entry_url:null,entry_short_url:false,check_incomplete_session:function(){if(HuffCookies.getCookie(this.hp_cookie_continue)){this.load_last_share_session();HuffCookies.destroyCookie(this.hp_cookie_continue);if(HuffCookies.getUserId()&&HuffPrefs.get('twitter')){this.check_credentials();}}},load_last_share_session:function(){var text=HuffCookies.getCookie(this.hp_cookie_continue_obj);if(!text)return;var obj_to_restore=JSON.parse(text);if(!obj_to_restore)return;var property,i;for(i=0;i<this.user_supply_vars.length;i++){property=this.user_supply_vars[i];if(obj_to_restore[property]){this[property]=obj_to_restore[property];}}
HuffCookies.destroyCookie(this.hp_cookie_continue_obj);},save_session:function(){HuffCookies.setCookie(this.hp_cookie_continue,1,2);var obj_to_save={},property,i;for(i=0;i<this.user_supply_vars.length;i++){property=this.user_supply_vars[i];if(this[property]){obj_to_save[property]=this[property];}}
HuffCookies.setCookie(this.hp_cookie_continue_obj,JSON.stringify(obj_to_save),2);},get_theme_descr:function(theme_to_use)
{var theme={ids:{},html:""};if(theme_to_use=="basic_twitter"||theme_to_use=="basic_twitter_frontpage")
{SNProject.initModal('tweet');theme.ids={error_msg:theme_to_use+"_modal_window_error_msg",comm_text:theme_to_use+"_modal_window_comm_text",comm_checkbox:theme_to_use+"_modal_window_share_checkbox",textarea:theme_to_use+"_modal_window_text_area",chars_left_title:theme_to_use+"_modal_window_chars_left",close_button:theme_to_use+"_modal_window_close_button",submit_button:theme_to_use+"_modal_window_submit_button",submit_button_hider:theme_to_use+"_modal_window_submit_button_hider",loader_icon:theme_to_use+"_modal_window_loader_icon",status_text:theme_to_use+"_modal_window_status_text",comm_block:theme_to_use+"_modal_window_comm_block"};var avatar_url=this.oauthInfo.twitter_pic||HuffCookies.getCurrentUserPhotoUrl();theme.html="\
						<div id='"+theme.ids.chars_left_title+"' class='counter_container float_right'></div>\
                            <div class='clear'></div>\
						    <div class='avatar'"+(avatar_url?" style='background: url(\""+avatar_url+"\") no-repeat scroll 0pt 0pt transparent;'></div>":"></div>")+"<div class='textarea_container'><textarea id='"+theme.ids.textarea+"' class='textarea'></textarea></div>\
						<div style='clear: both;'></div>\
						<div id='"+theme.ids.comm_block+"' style='display: none;'>\
							<div class='checkbox_container'>\
							<input id='"+theme.ids.comm_checkbox+"' type='checkbox'>\
							</div>\
							<div id='"+theme.ids.comm_text+"' class='checkbox_label_container'></div>\
							<div style='clear: both;'></div>\
						</div>\
						<div class='submit_container'>\
							<div id='"+theme.ids.loader_icon+"' class='loader_icon'></div>\
							<div id='"+theme.ids.error_msg+"' class='error_msg'></div>\
							<div id='"+theme.ids.submit_button+"' class='submit_button'>&nbsp;</div>\
							<div id='"+theme.ids.status_text+"' class='status_text'></div>\
						</div>";}
return theme;},share:function(params){var property,i;var user_supply_vars_len=this.user_supply_vars.length;for(i=0;i<user_supply_vars_len;i++){property=this.user_supply_vars[i];if(params.hasOwnProperty(property)){this[property]=params[property];}}
if(this.callbacks!==false){if(!this.callbacks.scope)this.callbacks.scope=null;if(!this.callbacks.timeout)this.callbacks.timeout=25;if(!this.callbacks.params)this.callbacks.params=null;if(!this.callbacks.success)this.callbacks.success=null;if(!this.callbacks.failure)this.callbacks.failure=null;}
Sharer.Twitter.check_credentials();},check_credentials:function(){if((HuffCookies.getUserId()&&HuffPrefs.get("twitter"))||this.oauthInfo.token)
{if(this.links){Sharer.Links.process(this.links,Sharer.Twitter.show_modal_window,Sharer.Twitter);return false;}
this.show_modal_window();}
else
{linkSocialAccount.checkLoginStatus('twitter',false,{disable_connect:true,callback:function(){var ST=Sharer.Twitter;if(Provider.user_provider_info.twitter.oauth_token&&Provider.user_provider_info.twitter.oauth_token_secret)
{ST.oauthInfo={token:Provider.user_provider_info.twitter.oauth_token,secret:Provider.user_provider_info.twitter.oauth_token_secret,twitter_pic:Provider.user_provider_info.twitter.profile_image||"http://s.huffpost.com/images/profile/user_placeholder.gif"};ST.check_credentials();}
else
{ST.connect_modal();}
return false;}});}},connect_modal:function(){if(HPConfig.ipad_application===false)
{if(HuffCookies.getUserId()&&!HuffPrefs.get("twitter")){Badges.prototype.userFunc_twitter_show_promo_modal_window(this.badge_holder_id);}
else if(HuffCookies.getUserId()==null){setTimeout(function(){ConnectOverview.showBenefits({provider:'twitter'});},200);}}
return;},show_modal_window:function()
{var limit_for_inserting_links=this.twitter_messg_limit;if(this.commercial_info){limit_for_inserting_links-=(this.commercial_info.hash.length+1);}
this.tweet_text=Sharer.Links.expand_text_with_links(this.tweet_text,limit_for_inserting_links);if(this.commercial_info){this.tweet_text=this.tweet_text+" "+this.commercial_info.hash;}
var window_theme="";if(HuffPoUtil.GetEntryID(location.href))
window_theme="basic_twitter";else
window_theme="basic_twitter_frontpage";var theme_descr=this.get_theme_descr(window_theme);var _this=this;huff.use('modal',function(m){m.show({theme:'tweet_modal',content:theme_descr.html,onclose:Sharer.Twitter.connect_modal,onshow:function()
{_this.modal_element_ids=theme_descr.ids;_this.setTwitterModal();}});});return;},setTwitterModal:function(){var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);if(textarea){textarea.value=this.tweet_text;if(this.add_via)textarea.value+=" via "+HPConfig.twitter_signature;HuffPoUtil.bind(textarea,"keyup",this.key_up_handler,null,this);HuffPoUtil.bind(textarea,"change",this.key_up_handler,null,this);HuffPoUtil.bind(textarea,"keydown",this.key_up_handler,null,this);HuffPoUtil.bind(textarea,"keypress",this.key_up_handler,null,this);}
this.key_up_handler();var submit_button=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);if(submit_button){HuffPoUtil.bind(submit_button,"click",this.submit_handler,null,this);if(typeof(HPBrowser)!=="undefined"){if(HPBrowser.isIE6()||HPBrowser.isIE7()){jQuery(submit_button).css("left","220px");}}}
if(this.commercial_info){jQuery(this.modal_element_ids.comm_block).css('display','block');var comm_text=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_text);if(comm_text){comm_text.innerHTML=this.commercial_info.text;var checkbox=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);checkbox.checked=true;HuffPoUtil.bind(comm_text,"click",this.commercial_checkbox_handler,null,this);HuffPoUtil.bind(checkbox,"click",this.commercial_checkbox_handler,null,this);}}},commercial_checkbox_handler:function(e){var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var checkbox=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);var hash=this.commercial_info.hash;if(checkbox.disabled){return;}
var nodeName=(e.srcElement||e.target).nodeName.toLowerCase();if(nodeName!="input"){if(HPBrowser.isIE6()||HPBrowser.isIE7()){if(checkbox.checked)checkbox.setAttribute("checked",false);else checkbox.setAttribute("checked",true);}else{if(checkbox.checked)checkbox.checked=false;else checkbox.checked=true;}}
if(checkbox.checked){textarea.value+=' '+hash;}else{textarea.value=textarea.value.replace(' '+hash,'');}},key_up_handler:function(){var maxlimit=this.twitter_messg_limit;var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var chars_left_title=HuffPoUtil.getNode("#"+this.modal_element_ids.chars_left_title);var chars_left=maxlimit-textarea.value.length;chars_left_title.innerHTML=chars_left;chars_left_title.style.color=chars_left<0?'#D40D12':'#999999';},submit_handler:function()
{var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var error_msg_div=HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg);var twitter_tweet=textarea.value;if(twitter_tweet==""){error_msg_div.innerHTML=_("Please enter some text!");textarea.focus();return false;}
if(twitter_tweet.length>this.twitter_messg_limit){error_msg_div.innerHTML=_("Tweet limit exceeded!");textarea.focus();return false;}
this.show_sibmitting_proccess();var postdata="tweet="+encodeURIComponent(twitter_tweet);if(this.oauthInfo.token){postdata+="&user_ot="+this.oauthInfo.token+"&user_os="+this.oauthInfo.secret;}
var modal_element_ids=this.modal_element_ids;var cb={onLinkSuccess:function()
{Sharer.Twitter.oauthInfo={token:Provider.user_provider_info.twitter.oauth_token,secret:Provider.user_provider_info.twitter.oauth_token_secret};Sharer.Twitter.no_popup=true;Sharer.Twitter.modal_element_ids=modal_element_ids;Sharer.Twitter.submit_handler();return false;}};postdata+='&eid='+HPUtil.GetEntryID(window.location.href);postdata+='&banners='+HPAds.get_banners_str();jQuery.ajax({type:"POST",url:"/badge/post_to_twitter.php",data:postdata,dataType:"json",error:function(o){Sharer.Twitter.show_failure_final();HPError.e();},success:function(resp)
{if(resp.status&&resp.message)
{if(/success/.test(resp.status))
{Sharer.Twitter.show_successfull_final();}
else if(/duplicate/.test(resp.message))
{Sharer.Twitter.show_duplicate_final();}
else if(/invalid_token/.test(resp.message))
{}
else
{Sharer.Twitter.show_failure_final();}
return;}}});return false;},show_sibmitting_proccess:function(){var submit_button=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);var loader_icon=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var checkbox=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);var status_text=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){loader_icon.style.display="block";}
status_text.innerHTML="";HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg).innerHTML='';submit_button.style.display="none";loader_icon.style.display="block";textarea.disabled=true;if(checkbox)checkbox.disabled=true;},show_successfull_final:function(){var loader_icon=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var status_text=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){loader_icon.style.display="none";}
loader_icon.style.display="none";status_text.innerHTML=_("Posted to Twitter!");status_text.style.display="block";if(typeof this.on_success_callback=="function")
{setTimeout(function(){Sharer.Twitter.on_success_callback(Sharer.Twitter.on_success_callback_params);},Sharer.Twitter.on_success_timeout);}
else
{HuffConnect.hideModal();setTimeout(function(){Sharer.Twitter.connect_modal();},1000);}},show_duplicate_final:function(){var submit_button=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var checkbox=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);var loader_icon=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var status_text=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){loader_icon.style.display="none";}
loader_icon.style.display="none";status_text.innerHTML=_("You already shared this Tweet");status_text.style.display="block";submit_button.style.display="block";textarea.disabled=false;if(checkbox)checkbox.disabled=false;},show_failure_final:function(){var loader_icon=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var status_text=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){loader_icon.style.display="none";}
loader_icon.style.display="none";status_text.innerHTML=_("Unable to process your request!");status_text.style.display="block";}},Links:{links:[],not_completed:true,need_to_short:0,shorten:0,check_for_complete:function(){if(this.shorten==this.need_to_short){this.not_completed=false;return true;}
return false;},bitly_shorten_complete:function(data){var s='',r,i,key,first_result,longUrl,shortUrl="",link;for(r in data.results){first_result=data.results[r];longUrl=r;break;}
for(key in first_result){s+=key+":"+first_result[key].toString()+"\n";if(key=="shortUrl")
shortUrl=first_result[key].toString();}
for(i=0;i<Sharer.Links.links.length;i++){link=Sharer.Links.links[i];if(unescape(link.url)==longUrl){link.long_url=unescape(link.url);link.url=shortUrl;Sharer.Links.shorten++;break;}}},process:function(links,callback_action,scope){var i,link_desc,short_url,url,jsonp_script;if(links){this.links=links;}
for(i=0;i<this.links.length;i++){link_desc=this.links[i];if(link_desc.make_short&&link_desc.url){url="http://api.bit.ly/shorten?version=2.0.1&longUrl="+((link_desc.url==unescape(link_desc.url))?escape(link_desc.url):link_desc.url)+"&login="+HPConfig.bit_ly_key.user_name+"&apiKey="+HPConfig.bit_ly_key.user_key+"&callback=Sharer.Links.bitly_shorten_complete";jsonp_script=document.createElement("script");jsonp_script.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(jsonp_script);jsonp_script.setAttribute("src",url);this.need_to_short++;}}
this.wait_for_completed(callback_action,scope,10);},wait_for_completed:function(callback_action,scope,interval){if(this.check_for_complete()){callback_action.call(scope);return;}
var _this=this;setTimeout(function(){_this.wait_for_completed(callback_action,scope,interval);},interval);},expand_text_with_links:function(text,max_text_length){var new_text=text,i,link_desc;if(!text){return"";}
max_text_length=max_text_length||false;for(i=0;i<this.links.length;i++){link_desc=this.links[i];if(link_desc.insert_type=="add_to_end"){if(max_text_length&&(new_text.length>(max_text_length-(link_desc.url.length+1)))){new_text=new_text.substr(0,(max_text_length-(link_desc.url.length+1))-3)+"...";}
new_text=new_text+" "+link_desc.url;}else if(link_desc.insert_type=="replace_mock"){new_text=new_text.replace(link_desc.mock,link_desc.url);if(max_text_length&&(new_text.length>max_text_length)){new_text=new_text.substr(0,max_text_length-3)+"...";}}else if(link_desc.insert_type=="add_to_begining"){new_text=link_desc.url+" "+new_text;if(max_text_length&&(new_text.length>max_text_length)){new_text=new_text.substr(0,max_text_length-3)+"...";}}}
return new_text;}},trackedShares:[],Digg:{digg_it:function(entry_title,entry_url){var digg_base_url="http://digg.com/submit?phase=2&title="+entry_title+"&url="+(entry_url?escape(entry_url):escape(window.location));window.open(digg_base_url,"digg_window","width=650,height=520,status=yes,location=no,left=0,top=0");try{if(-1===jQuery.inArray('digg',Badges.trackedShares)){var e_url=entry_url?entry_url:window.location.href;jQuery.post('/include/social_track.php',{t:'digg',entry:HPUtil.GetEntryID(e_url),banners:HPAds.get_banners_str()});Sharer.trackedShares.push('digg');bN.set("dL_shareType",'digg',1);bN.set("dL_shareURL",escape(e_url),1);bN.ping("aol-share");}}catch(e){}}},Linkedin:{UserData:null,AccessTokens:null,modal_element_ids:{},linkedin_messg_limit:700,share:function(config)
{this.entry_id=config.entry_id||null;this.title=config.title||null;this.url=config.url||null;this.content=config.content||null;this.thumbnail=config.thumbnail||null;this.on_success=config.on_success||null;this.on_success_params=config.on_success_params||null;this.on_success_timeout=config.on_success_timeout||25;this.badge_div_el=config.badge_div_el||null;this.comment=config.comment||'';this.holder_id=config.holder_id||'';this.startShare();return;},startShare:function(){if(this.entry_id&&this.title&&this.url&&this.content)
{if((HuffCookies.getUserId()&&HuffPrefs.get("linkedin"))||(this.AccessTokens&&this.AccessTokens.oauth_token)){this.showShareModal();}
else{var url=HuffPoUtil.getHostName()+"/users/linkedin/index.php?action=auth&step=1";PopupManager.open(url,750,325);PopupManager.onCloseParams=this;PopupManager.onClose=function(_this){if(QuickLogin.LinkedinData){_this.UserData=JSON.parse(QuickLogin.LinkedinData.UserData);_this.AccessTokens=JSON.parse(QuickLogin.LinkedinData.AccessTokens);if(_this.UserData&&_this.AccessTokens)
_this.showShareModal();}
return;}}}
else
return false;},showShareModal:function()
{var window_theme="";if(HuffPoUtil.GetEntryID(location.href))
window_theme="basic_linkedin";else
window_theme="basic_linkedin_frontpage";var theme_descr=this.get_theme_descr(window_theme);var _this=this;huff.use('modal',function(m){m.show({theme:'tweet_modal',content:theme_descr.html,onshow:function()
{_this.modal_element_ids=theme_descr.ids;var textarea=HuffPoUtil.getNode("#"+_this.modal_element_ids.textarea);if(textarea){textarea.value=_this.comment;HuffPoUtil.bind(textarea,"keyup",_this.key_up_handler,null,_this);HuffPoUtil.bind(textarea,"change",_this.key_up_handler,null,_this);}
var chars_left_title=HuffPoUtil.getNode("#"+_this.modal_element_ids.chars_left_title);if(chars_left_title){chars_left_title.innerHTML=_this.linkedin_messg_limit-_this.comment.length;}
var submit_button=HuffPoUtil.getNode("#"+_this.modal_element_ids.submit_button);if(submit_button){HuffPoUtil.bind(submit_button,"click",_this.submit_handler,null,_this);}
var preview_block_el=HuffPoUtil.getNode("#"+_this.modal_element_ids.preview_block);if(preview_block_el){var preview_html="";if(_this.thumbnail&&_this.thumbnail!="")
preview_html+="<div class='lin_share_pic float_left'><img src='"+_this.thumbnail+"' /></div>";preview_html+="\
									<div class='align_left'>\
										<div class='lin_share_top'>\
											<span class='lin_share_title'>"+unescape(_this.title)+"</span>\
											<span class='lin_share_small'>"+unescape(document.location.hostname)+"</span>\
										</div>\
										<div class='lin_share_text'>"+unescape(_this.content)+"</div>\
										<div style='clear: both;'></div>\
									</div>";preview_block_el.innerHTML=preview_html;}
if(_this.holder_id){HuffPoUtil.bind(HuffPoUtil.getNode("#"+_this.modal_element_ids.close_button),"click",function(e,_this){_this.connect_modal();},_this);}}});});return;},connect_modal:function()
{if(!(HuffCookies.getUserId()&&HuffPrefs.get("linkedin")))
{Badges.prototype.userFunc_linkedin_show_modal(this.badge_holder_id);}
return;},get_theme_descr:function(theme_to_use){var theme={ids:{},html:""};if(theme_to_use=="basic_linkedin"||theme_to_use=="basic_linkedin_frontpage")
{SNProject.initModal('tweet');theme.ids={error_msg:theme_to_use+"_modal_window_error_msg",comm_text:theme_to_use+"_modal_window_comm_text",comm_checkbox:theme_to_use+"_modal_window_share_checkbox",textarea:theme_to_use+"_modal_window_text_area",chars_left_title:theme_to_use+"_modal_window_chars_left",close_button:theme_to_use+"_modal_window_close_button",submit_button:theme_to_use+"_modal_window_submit_button",submit_button_hider:theme_to_use+"_modal_window_submit_button_hider",loader_icon:theme_to_use+"_modal_window_loader_icon",status_text:theme_to_use+"_modal_window_status_text",comm_block:theme_to_use+"_modal_window_comm_block",preview_block:theme_to_use+"_modal_window_preview_block"};theme.close_button_id=theme.ids.close_button;var avatar_url=(this.UserData&&this.UserData.profile_picture)?this.UserData.profile_picture:HuffCookies.getCurrentUserPhotoUrl();theme.html="\
						<div id='"+theme.ids.chars_left_title+"' class='counter_container'></div>\
						<div class='avatar' style='margin-right:1px;'><img style='border:1px solid #ccc;' src='"+avatar_url+"' width='48' height='48' /></div><div class='textarea_container'><textarea id='"+theme.ids.textarea+"' class='textarea'></textarea></div>\
						<div style='clear: both;'></div>\
						<div class='preview_separator'></div>\
						<div class='linkedin_share_preview' id='"+theme.ids.preview_block+"'></div>\
						<div id='"+theme.ids.comm_block+"' style='display: none;'>\
							<div class='checkbox_container'>\
							<input id='"+theme.ids.comm_checkbox+"' type='checkbox'>\
							</div>\
							<div id='"+theme.ids.comm_text+"' class='checkbox_label_container'></div>\
							<div style='clear: both;'></div>\
						</div>\
						<div class='submit_container'>\
						<div id='"+theme.ids.loader_icon+"' class='loader_icon'></div>\
						<div id='"+theme.ids.error_msg+"' class='error_msg'></div>\
						<div id='"+theme.ids.submit_button+"' class='linkedin_submit_button'>&nbsp;</div>\
						<div id='"+theme.ids.status_text+"' class='status_text'></div>\
						</div>";}
return theme;},key_up_handler:function(){var maxlimit=this.linkedin_messg_limit;var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var chars_left_title=HuffPoUtil.getNode("#"+this.modal_element_ids.chars_left_title);if(textarea.value.length>maxlimit){chars_left_title.innerHTML=0;}
else{chars_left_title.innerHTML=maxlimit-textarea.value.length;}},submit_handler:function()
{var oauth_token=null;var oauth_token_secret=null;if(this.AccessTokens)
{oauth_token=this.AccessTokens.oauth_token;oauth_token_secret=this.AccessTokens.oauth_token_secret;}
var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var error_msg_div=HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg);var linkedin_comment=textarea.value;if(linkedin_comment.length>this.linkedin_messg_limit){error_msg_div.innerHTML="Please shorten your comment text";textarea.focus();return false;}
this.show_sibmitting_proccess();var postdata='1=1';if(linkedin_comment)postdata+="&comment="+encodeURIComponent(linkedin_comment);postdata+="&eid="+this.entry_id;if(this.url)postdata+="&url="+this.url;if(this.title)postdata+="&title="+this.title;if(this.content)postdata+="&content="+this.content;if(this.thumbnail)postdata+="&thumbnail="+this.thumbnail;if(oauth_token&&oauth_token_secret){postdata+="&user_ot="+oauth_token+"&user_os="+oauth_token_secret;}
jQuery.ajax({type:"POST",url:"/badge/post_to_linkedin.php",data:postdata,success:function(data){if(data&&/success/.test(data)){Sharer.Linkedin.show_successfull_final();}else{Sharer.Linkedin.show_failure_final();}},error:function(o){Sharer.Linkedin.show_failure_final();HPError.e();},timeout:20000});},show_sibmitting_proccess:function(){var submit_button=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);var loader_icon=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var textarea=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var checkbox=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);if(HPBrowser.isIE6()||HPBrowser.isIE7()){loader_icon.style.display="block";}
HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg).innerHTML='';submit_button.style.display="none";loader_icon.style.display="block";textarea.disabled=true;return;},show_successfull_final:function(){var loader_icon=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var status_text=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){loader_icon.style.display="none";}
loader_icon.style.display="none";status_text.innerHTML=_("Posted to LinkedIn!");status_text.style.display="block";Sharer.Linkedin.AccessTokens=null;if(typeof Sharer.Linkedin.on_success=="function")
setTimeout(function(){Sharer.Linkedin.on_success(Sharer.Linkedin.on_success_params)},Sharer.Linkedin.on_success_timeout);},show_failure_final:function(){var loader_icon=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var status_text=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){loader_icon.style.display="none";}
loader_icon.style.display="none";status_text.innerHTML=_("Unable to process your request!");status_text.style.display="block";Sharer.Linkedin.UserData="";Sharer.Linkedin.AccessTokens="";}}};Sharer.hp_amazing_video_module_fb_share=function(message,name,description,href,media_src)
{Sharer.Facebook.share({'facebook_post':{'message':message,'attachment':{'name':name,'description':description,'href':href,'media':[{'type':'image','src':media_src,'href':href}]},'callback':function(){}},'links':[]});};jQuery(function(){Sharer.check_incomplete_sessions()});
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var UserLevels={BadgePopup:{timeout:0,badge_popup_timer_id:0,showBadgePopup:function(params){if(HPConfig.ipad_application){this.leftside_popup=true;}
badge_el=params.badge_el||false;badge_el_offset_x=params.badge_el_offset_x||(this.leftside_popup?-312:28);badge_el_offset_y=params.badge_el_offset_y||55;user_name=params.user_name||false;user_type=params.user_type||false;user_level=params.user_level||0;gift_points=params.gift_points||0;gift_name=params.gift_name||'';comments_cnt=params.comments_cnt||0;fans_cnt=params.fans_cnt||0;friends_cnt=params.friends_cnt||0;following_cnt=params.following_cnt||0;shares_cnt=params.shares_cnt||0;twitter_id=params.twitter_id||0;facebook_id=params.facebook_id||0;level_aquired=params.level_aquired===false?false:true;hide_learn_more=params.hide_learn_more||false;sponsor_display_name=params.sponsor_display_name||'';author_created_on=params.author_created_on||'';author_nickname=params.author_nickname||'';if(this.badge_popup_timer_id){clearTimeout(this.badge_popup_timer_id);this.badge_popup_timer_id=0;}
var popup_div=document.getElementById('badge_popup');var popup_text_div=document.getElementById('badge_popup_text');var popup_top_div=jQuery('#badge_popup .badge_popup_top');if(!popup_div||!badge_el)return;var text="",title='';if(user_type=='sponsor')level_aquired=false;if(level_aquired){title='<span class="'+user_type+'_title title">'+user_name;}
var colored_user_name='<span class="'+user_type+'_name"><b>'+user_name+'</b></span>';switch(user_type){case'networker':if(level_aquired){title+=' '+sprintf(_("is a Level %s Networker!"),user_level)+'</span>';switch(user_level){case 1:text+=sprintf(_("%s has earned the Level 1 Networker Badge! %s has <b>%s friends and %s followers</b>."),colored_user_name,colored_user_name,friends_cnt,fans_cnt);text+='<br/><br/>'+_("Networkers with a Level 1 Badge are very socially connected users on the sitewith lots of friends and followers.");break;case 2:var social='';if((twitter_id>0)&&(facebook_id>0))social='Twitter '+_("and")+' Facebook';else if(twitter_id>0)social='Twitter';else if(facebook_id>0)social='Facebook';text+=sprintf(_("%s has earned the Level 2 Networker Badge! With <b>%s friends and %s followers</b>, %s has comments featured in red. %s has created a HuffPost account using %s."),colored_user_name,friends_cnt,fans_cnt,colored_user_name,colored_user_name,social);text+="<br/><br/>"+_("Networkers with a Level 2 Badge are among the most socially connected users on the sitewith tons of friends and followers. They have also created a HuffPost account using Twitter or Facebook, and their comments are featured in red.");break;}}else{text+=_("Networkers are very socially connected users on the sitewith lots of friends and followers! Users who connect with Facebook and Twitter can earn higher levels of this badge.");}
break;case'superuser':if(level_aquired){title+=' '+sprintf(_("is a Level %s Superuser!"),user_level)+'</span>';switch(user_level){case 1:text+=sprintf(_("%s has earned the Level 1 Superuser Badge! %s has <b>%s comments</b> and <b>%s shares</b> to a social network."),colored_user_name,colored_user_name,comments_cnt,shares_cnt);break;case 2:var social='';if((twitter_id>0)&&(facebook_id>0))social='Twitter '+_("and")+' Facebook';else if(twitter_id>0)social='Twitter';else if(facebook_id>0)social='Facebook';text+=sprintf(_("%s has earned the Level 2 Superuser Badge! With <b>%s comments</b> and <b>%s shares</b> to a social network, %s has comments featured in purple. %s has created a HuffPost account using %s."),colored_user_name,comments_cnt,shares_cnt,colored_user_name,colored_user_name,social);break;}}else{text+=_("Superusers are very engaged users on the site-with lots of comments and shares! Users who connect with Facebook and Twitter can earn higher levels of this badge.");}
break;case'moderator':if(level_aquired){title+=' '+sprintf(_("is a Level %s Community Moderator!"),user_level)+'</span>';switch(user_level){case 1:text+=sprintf(_("%s has earned the Level 1 Community Moderator Badge! %s flagged at least 20 comments that we deleted and has a high ratio of good flags to mistaken flags, so <span class='%s_name'>%s's</span> flags carry five times the weight as standard flags."),colored_user_name,colored_user_name,user_type,user_name);break;case 2:text+=sprintf(_("%s has earned the Level 2 Community Moderator Badge! %s flagged at least <b>100 comments</b> that we deleted and has a very high ratio of good flags to mistaken flags, so %s is trusted to delete inappropriate comments from the site. %s has maintained the ability to delete inappropriate comments by handling it responsibly."),colored_user_name,colored_user_name,colored_user_name,colored_user_name);break;}}else{text+=_("Moderators have flagged at least 20 comments that we deleted and have a strong ratio of good flags to mistaken flags. Their flags carry five times the weight as standard flags. Users who earn higher levels of the Moderator badge can directly delete comments.");}
break;case'expert':if(level_aquired){title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Politics Pundit!"),colored_user_name)+'</span>';text+=sprintf(_("%s has earned a Politics Pundit Badge. HuffPost Pundits are our most engaged and thought-provoking commenters. Pundit Badges are awarded based on a strong history of insightful comments."),colored_user_name);}
break;case'predictor':if(level_aquired){switch(user_level){case 1:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Predictor!"),colored_user_name)+'</span>';text+=sprintf(_("%s has an amazing track record predicting the future on HuffPost's Predict the News -- play now!"),colored_user_name);break;case 11:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Level 1 Olympics Predictor!"),colored_user_name)+'</span>';break;case 12:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Level 2 Olympics Predictor!"),colored_user_name)+'</span>';break;case 13:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Level 3 Olympics Predictor!"),colored_user_name)+'</span>';break;case 14:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Level 1 Olympics Predictor Winner!"),colored_user_name)+'</span>';break;case 15:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Level 2 Olympics Predictor Winner!"),colored_user_name)+'</span>';break;case 16:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Level 3 Olympics Predictor Winner!"),colored_user_name)+'</span>';break;}}
break;case'pledge':if(level_aquired){switch(user_level){case 1:title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s has taken the Third World America pledge!"),colored_user_name)+'</span>';text+=sprintf(_("%s pledges to rebuild the American Dream and prevent a Third World America."),colored_user_name);break;}}
break;case'sponsor':title='<span class="sponsor_badge_title title">'+_("Sponsor Badge")+'</span>';text+='<span class="arial_16 bold">'+_("What is this?")+'</span><br/>'+sprintf(_("This comments thread is brought to you by <span class='sponsor_name'>%s</span>."),sponsor_display_name)+' <br/><br/>'+_("We offer our advertisers the opportunity to facilitate meaningful discussion around issues that are relevant to them and our community.<br/><br/>All sponsored comments are clearly marked as such and solely reflect the views of the advertiser. If you have feedback about sponsored comments, please <a href='#' class='sponsor_link'>contact us</a>.");break;case'betatester':title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s is a Beta Tester!"),colored_user_name)+'</span>';text+=colored_user_name+' ... '+_("Need a correction");break;case'blogger':title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s has been a HuffPost Blogger since %s."),colored_user_name,author_created_on)+'</span>';if(author_nickname)text+=sprintf(_("Click %shere%s to see all of %s's articles."),'<a target="_hplink" class="'+user_type+'_link" href="http://www.huffingtonpost.com/'+author_nickname+'">','</a>',colored_user_name);break;case'staff':title='<span class="'+user_type+'_title title">';title+=sprintf(_("%s has been a HuffPost employee since %s."),colored_user_name,author_created_on)+'</span>';if(author_nickname)text+=sprintf(_("Click %shere%s to see all of %s's articles."),'<a target="_hplink" class="'+user_type+'_link" href="http://www.huffingtonpost.com/'+author_nickname+'">','</a>',colored_user_name);break;case'crimesolver':if(level_aquired){if(user_level<=12){title='<span class="crimesolver_badge_title title">';title+=sprintf(_("%s is a Level %s Crime Solver!"),colored_user_name,user_level)+'</span>';if('undefined'!=typeof(badge_promo_ad)&&badge_promo_ad['crime-solver']){var promo=badge_promo_ad['crime-solver'];text=title+'<br/><br/>';if(promo.commercial_text!=''){text+=promo.commercial_text+'<br/><br/>';}
title='</td><td align="right" width="100%">'+promo.custom_html;}
text+=sprintf(_("%s has taken one or more Crime quizzes and earned the Crime Solver badge."),colored_user_name);text+="<br/><br/>"+sprintf(_("Find crime quizzes to win this badge %shere%s."),'<a href="/news/tnt-quizzes" class="bold underline">','</a>');}}
break;}
if(gift_name.length>0){title+=sprintf(_("'s comments have received a total of <b>%s</b> %s gift badges."),gift_points,gift_name)+'</span>';}
if(!hide_learn_more){text+='<br/><br/><a target="_hplink" class="'+user_type+'_link" href="http://www.huffingtonpost.com/p/frequently-asked-question.html#socialnews">'+_("Learn more about Badges")+'</a>';}
popup_top_div.html('<table><tr><td width="64px"><div class="badge_sprite float_left big_badge_'+user_type+user_level+'"></div></td><td valign="middle">'+title+'</td></tr></table>');popup_text_div.innerHTML=text;var badge_position=jQuery(badge_el).offset();var popup_x=badge_position.left-parseInt(jQuery('.badge_popup_corner.bottom').css('margin-left'))+jQuery(badge_el).width()/2;var popup_y=badge_position.top-jQuery(popup_div).height();if(jQuery(window).scrollTop()<popup_y){jQuery('.badge_popup_corner.bottom').show().css({visibility:'visible'});jQuery('.badge_popup_corner.top').hide().css({visibility:'hidden'});}else{popup_y=badge_position.top+jQuery(badge_el).height();jQuery('.badge_popup_corner.top').show().css({visibility:'visible'});jQuery('.badge_popup_corner.bottom').hide().css({visibility:'hidden'});}
popup_div.style.display='block';var el=jQuery(popup_div);el.offset({left:popup_x,top:popup_y});HuffPoUtil.bind(el,'mouseover',this.onMouseOverBadgePopup,null,this);HuffPoUtil.bind(el,'mouseout',this.onMouseOutBadgePopup,null,this);},getActivePopupDiv:function(){var popup_div=document.getElementById('badge_popup');if(!popup_div||(popup_div.style.display=='none')){return null;}
return popup_div;},hideBadgePopup:function(){UserLevels.BadgePopup.badge_popup_timer_id=0;var popup_div=this.getActivePopupDiv();if(!popup_div)return;jQuery(popup_div).unbind();popup_div.style.display='none';jQuery(popup_div).offset({left:-1000,top:-1000});},cancelBadgePopupHiding:function(){if(this.badge_popup_timer_id){clearTimeout(this.badge_popup_timer_id);this.badge_popup_timer_id=0;}},onMouseOutBadge:function(){this.cancelBadgePopupHiding();this.badge_popup_timer_id=setTimeout('UserLevels.BadgePopup.hideBadgePopup()',this.timeout);},onMouseOverBadgePopup:function(e){this.cancelBadgePopupHiding();},onMouseOutBadgePopup:function(e){this.cancelBadgePopupHiding();this.badge_popup_timer_id=setTimeout('UserLevels.BadgePopup.hideBadgePopup()',this.timeout);},onBadgeClick:function(user_name){new_window=window.open(_('http://www.huffingtonpost.com/p/frequently-asked-question.html#socialnews'),'');new_window.focus();}},GiftBadgePopup:{timeout:100,gift_badge_popup_timer_id:0,badge_allowance:0,badge_types:[],inited:false,setTypes:function(badge_allowance,badge_types){this.badge_allowance=badge_allowance;this.badge_types=badge_types;if(this.badge_types.length==0)
this.badge_allowance=0;},init:function(){if(!this.inited)
{try
{var badge_allowance=jQuery.parseJSON(jQuery('#gift_badge_allowance').attr('allowance'));var badge_types=jQuery.parseJSON(jQuery('#gift_badge_types').attr('types'));this.setTypes(badge_allowance,badge_types);this.inited=true;}
catch(err)
{this.setTypes(0,[]);}}},showBadgePopup:function(params){this.init();this.leftside_popup=params.leftside_popup||false;if(HPConfig.ipad_application){this.leftside_popup=true;}
is_own_comment=params.is_own_comment||false;badge_el=params.badge_el||false;comment_icons_id=params.comment_icons_id||false;user_name=params.user_name||false;user_id=params.user_id||0;entry_id=params.entry_id||0;comment_id=params.comment_id||0;current_user_name=params.current_user_name||'';current_user_id=params.current_user_id||0;vertical=params.vertical||'';if(is_own_comment||UserLevels.GiftBadgePopup.badge_allowance==0)return;if(this.gift_badge_popup_timer_id){clearTimeout(this.gift_badge_popup_timer_id);this.gift_badge_popup_timer_id=0;}
var popup_div=document.getElementById('gift_badge_popup');var popup_text_div=document.getElementById('gift_badge_popup_text');var popup_top_div=document.getElementById('gift_badge_popup_top');if(!popup_div||!badge_el)return;var text="";text+='<p>'+sprintf(_("You can give <b>%s</b> the following badges"),user_name)+':</p>';common_params='\''+comment_icons_id+'\','+current_user_id+',\''+vertical+'\','+comment_id+','+entry_id+','+user_id+',\''+user_name+'\'';var gift_badges='';gift_badges+='<div class="gift_badge_icons">';var len=UserLevels.GiftBadgePopup.badge_types.length;for(var i=0;i<len;i++){gift_badges+='<div class="gift_badge" onclick="UserLevels.GiftBadgePopup.giftBadgeAction('+common_params+','+i+')'+';return false;">';gift_badges+='<div class="badge_sprite badge_'+
UserLevels.GiftBadgePopup.badge_types[i]["badge_name"].toLowerCase()+'0"></div>';gift_badges+=UserLevels.GiftBadgePopup.badge_types[i]["display_name"];gift_badges+='</div>';}
gift_badges+='</div>';text+=gift_badges;if(UserLevels.GiftBadgePopup.badge_allowance==1){text+='<p>'+_("You can only give one badge a day, so give it to the best comment you see.")+'</p>';}else{text+='<p>'+sprintf(_("You have %s badges left to give, so give them to the best comments you see."),UserLevels.GiftBadgePopup.badge_allowance)+'</p>';}
text+='<p class="gift_badge_learn_more"><a target="_hplink" href="http://www.huffingtonpost.com/macgregor-thomson/gift-badges_b_927585.html">'+_("Learn more about these badges")+'</a></p>';popup_text_div.innerHTML=text;badge_el_offset_x=(this.leftside_popup?jQuery(badge_el).width()+5:5);badge_el_offset_y=(this.leftside_popup?0:jQuery(popup_div).height()+10);var badge_position=jQuery(badge_el).offset();var popup_x=badge_position.left+badge_el_offset_x;var popup_y=badge_position.top-badge_el_offset_y;popup_div.style.display='block';var el=jQuery(popup_div);el.offset({left:popup_x,top:popup_y});HuffPoUtil.bind(el,'mouseover',this.onMouseOverBadgePopup,null,this);HuffPoUtil.bind(el,'mouseout',this.onMouseOutBadgePopup,null,this);},getActivePopupDiv:function(){var popup_div=document.getElementById('gift_badge_popup');if(!popup_div||(popup_div.style.display=='none')){return null;}
return popup_div;},hideBadgePopup:function(){UserLevels.GiftBadgePopup.timer_id=0;var popup_div=this.getActivePopupDiv();if(!popup_div)return;jQuery(popup_div).unbind();popup_div.style.display='none';jQuery(popup_div).offset({left:-1000,top:-1000});},cancelBadgePopupHiding:function(){if(this.gift_badge_popup_timer_id){clearTimeout(this.gift_badge_popup_timer_id);this.gift_badge_popup_timer_id=0;}},onMouseOutBadge:function(){this.cancelBadgePopupHiding();this.gift_badge_popup_timer_id=setTimeout('UserLevels.GiftBadgePopup.hideBadgePopup()',this.timeout);},onMouseOverBadgePopup:function(e){this.cancelBadgePopupHiding();},onMouseOutBadgePopup:function(e){this.cancelBadgePopupHiding();this.gift_badge_popup_timer_id=setTimeout('UserLevels.GiftBadgePopup.hideBadgePopup()',this.timeout);},onBadgeClick:function(user_name){new_window=window.open('http://www.huffingtonpost.com/p/frequently-asked-question.html#socialnews','');new_window.focus();},giftBadgeAction:function(comment_icons_id,current_user_id,vertical,comment_id,entry_id,comment_user_id,user_name,badge_index){var badge_id=UserLevels.GiftBadgePopup.badge_types[badge_index]["badge_id"];var badge_type=UserLevels.GiftBadgePopup.badge_types[badge_index]["badge_name"].toLowerCase();var badge_display_name=UserLevels.GiftBadgePopup.badge_types[badge_index]["display_name"];if(typeof Comments!=='undefined'){Comments.trackEvent('GiftBadgeAction');}
jQuery.ajax({url:'/commentsv3/giftBadgeAction.php?badge_id='+badge_id+'&entry_id='+entry_id+'&comment_id='+comment_id+'&user_id='+current_user_id+'&comment_user_id='+comment_user_id,success:function(responseText){var popup_text_div=document.getElementById('gift_badge_popup_text');result=parseInt(responseText);if(isNaN(result)){return;}
if(result<0){popup_text_div.innerHTML=_("Error occurred while trying to award gift badge, please try again later.");}else if(result==0){popup_text_div.innerHTML=sprintf(_("You have already awarded the %s badge to this comment."),badge_display_name);}else{UserLevels.GiftBadgePopup.badge_allowance--;var comment_icons=document.getElementById(comment_icons_id);var oldInnerHTML=comment_icons?comment_icons.innerHTML:'';if(comment_icons&&oldInnerHTML.indexOf(badge_type)<0){newInnerHTML='<div class="badge_sprite badge_'+badge_type+'0" ';newInnerHTML+='onmouseout="UserLevels.BadgePopup.onMouseOutBadge();" ';newInnerHTML+='onmouseover="UserLevels.BadgePopup.showBadgePopup({ ';newInnerHTML+='badge_el: this, ';newInnerHTML+='user_name: \''+user_name+'\', ';newInnerHTML+='user_type: \''+badge_type+'\', ';newInnerHTML+='user_level: 0, ';newInnerHTML+='gift_points: 1, ';newInnerHTML+='gift_name: \''+badge_display_name+'\', ';newInnerHTML+='});" ';newInnerHTML+='onclick="UserLevels.BadgePopup.onBadgeClick(\''+user_name+'\');">';newInnerHTML+='</div>';var num_children=jQuery(comment_icons).children('.badge_sprite').length;if(num_children%4==0&&num_children!=0)
newInnerHTML='<br/>'+newInnerHTML;comment_icons.innerHTML=comment_icons.innerHTML+newInnerHTML;}
var successText='<p>'+sprintf(_("You have awarded <b>%s</b>\'s comment the <b>%s</b> gift badge"),user_name,badge_display_name)+'</p>';var HPf=HuffPrefs;var is_twitter=HPf.get('twitter');var is_facebook=HPf.get('facebook');if(is_twitter||is_facebook)
{successText+='<br/><br/><p>'+_("Share your action with your friends on")+':</p><br/><br/>';if(is_facebook)
successText+='<div class="gift-badge-share-button gift-badge-share-fb" '+
'onclick="UserLevels.Share.facebook('+comment_id+',\''+
user_name+'\',\''+badge_display_name+'\');return false"></div>';if(is_twitter)
successText+='<div class="gift-badge-share-button gift-badge-share-tw" '+
'onclick="UserLevels.Share.twitter('+comment_id+',\''+
user_name+'\',\''+badge_display_name+'\');return false"></div>';successText+='<div class="clear"></div>';}
popup_text_div.innerHTML=successText;}},failure:function(){HPError.throwError('giftBadgeAction ajax error');}});}},Share:{facebook:function(comment_id,user_name,gift_badge_name)
{var at_title=sprintf(_("%s's Comment On Huffington Post"),user_name);var at_desc='';var msg=sprintf(_("I just gave %s a %s gift badge for their comment on The Huffington Post. Check out their comment. It's awesome!"),user_name,gift_badge_name);var permalink_dom='#comment_share_'+comment_id+'_data_link';var permalink=jQuery(permalink_dom).text();var img_link=jQuery('#comment_'+comment_id).children('.comment_top').children('.comment_top_inner').children('.author_photo').children('img').attr('src');if(img_link.indexOf('facebook.com')!=-1)
img_link=HPConfig.image;Sharer.Facebook.share({'facebook_post':{'message':msg,'attachment':{'name':at_title,'description':at_desc,'href':permalink,'media':[{'type':'image','src':img_link,'href':permalink}]},'callback':function(post_id){}},'links':[]});return false;},twitter:function(comment_id,user_name,gift_badge_name)
{var permalink_dom='#comment_share_'+comment_id+'_data_link';var permalink=jQuery(permalink_dom).text();var msg=sprintf(_("I just gave @%s a %s gift badge on @huffingtonpost "),user_name,gift_badge_name);Sharer.Twitter.share({tweet_text:msg,links:[{url:permalink,make_short:true,insert_type:'add_to_end'}],on_success_callback:function(){HuffConnect.hideModal();Sharer.Twitter.connect_modal();},on_success_callback_params:0,on_success_timeout:1000,add_via:false});return false;}},Agreement:{participation:false,badges_box_enabled:false,box_animation:false,activate:function(params){if(!HuffCookies.getUserId()){return;}
if(HPConfig.user_badges_participation){this.participation=true;}
if(params.slider==true){this.Slider.activate(this);}
if(params.checkbox){this.Checkbox.activate(this,params.checkbox.listen_on_id,params.checkbox.input_id);}},set_participation:function(mode){this.participation=mode;this.update_badges_box();},flip_participation:function(){this.set_participation(!this.get_participation());},get_participation:function(){return this.participation;},update_badges_box:function(){var box=document.getElementById("all_user_levels");if(!box){return;}
var animation_attributes={height:0,marginBottom:0};if(this.get_participation()){box.style.height="0px";box.style.display="block";var height=134+Math.floor(jQuery(".data .item",box).length/4)*50;animation_attributes={height:height,marginBottom:15};}
if(!this.box_animation){jQuery(box).animate(animation_attributes,{duration:500,complete:function(){if(parseInt(jQuery(this).css("height"))<10){this.style.display="none";}}});}},update_server_side:function(){jQuery.ajax({url:"/users/user_level_json.php?action=badges_participate&state="+(this.participation==true?"true":"false"),cache:false});},Checkbox:{A:false,activated:false,checkbox:false,nodeName:false,activate:function(A,listen_on_id,checkbox_id){this.A=A;if(!HuffCookies.getUserId()){return;}
this.checkbox=document.getElementById(checkbox_id);if(!this.checkbox){return;}
if(HPBrowser.isIE6()||HPBrowser.isIE7()){if(!this.A.get_participation())this.checkbox.setAttribute("checked",false);else this.checkbox.setAttribute("checked",true);}else{if(!this.A.get_participation())this.checkbox.checked=false;else this.checkbox.checked=true;}
HuffPoUtil.bind("#"+listen_on_id,"click",this.catch_click,null,this);this.activated=true;},catch_click:function(e){console.log("click");this.nodeName=(e.srcElement||e.target).nodeName.toLowerCase();this.A.flip_participation();this.Hint.show();this.change_state();this.A.Slider.change_state();this.A.update_server_side();},change_state:function(){if(!this.activated||!this.checkbox){return;}
if(this.nodeName!="input"){if(HPBrowser.isIE6()||HPBrowser.isIE7()){if(!this.A.get_participation())this.checkbox.setAttribute("checked",false);else this.checkbox.setAttribute("checked",true);}else{if(!this.A.get_participation())this.checkbox.checked=false;else this.checkbox.checked=true;}}},Hint:{activated:false,hint:false,animation:false,animation_attributes:{},hint_timer:false,activate:function(){if(this.activated){return;}
if(!this.hint){this.hint=document.getElementById("badge_participating_updated");if(!this.hint){return;}}
this.activated=true;},animate:function(){jQuery(this.hint).animate(this.animation_attributes,{duration:1500,complete:function(){if(parseInt(jQuery(this).css("opacity"))<0.5){this.style.display="none";}}});},show:function(){this.activate();if(!this.activated){return;}
this.animation_attributes={opacity:1};this.animate();this.hint.style.display="block";clearTimeout(this.hint_timer);this.hint_timer=setTimeout('UserLevels.Agreement.Checkbox.Hint.hide()',3000);},hide:function(){this.activate();if(!this.activated){return;}
clearTimeout(this.hint_timer);this.animation_attributes={opacity:0};this.animate();}}},Slider:{A:false,activated:false,slider_holder:false,amination:false,animation_attributes:{},activate:function(A){this.A=A;this.slider_holder=document.getElementById("badges_participate_slider");if(this.A.get_participation()){this.slider_holder.style.backgroundPosition="left 0";}else{this.slider_holder.style.backgroundPosition="right 0";}
this.Tip.activate();HuffPoUtil.bind("#badges_participate_slider","click",this.catch_click,null,this);document.getElementById("badges_participate_switcher").style.display="block";this.activated=true;},catch_click:function(){this.A.flip_participation();if(!this.A.get_participation()){this.Tip.show();}else{this.Tip.quickly_hide();}
this.change_state();this.A.Checkbox.change_state();this.A.update_server_side();},change_state:function(){if(!this.activated||!this.slider_holder){return;}
if(this.A.get_participation()){jQuery(this.slider_holder).css("backgroundPosition","left 0");}else{jQuery(this.slider_holder).css("backgroundPosition","right 0");}},animate:function(){},Tip:{state:false,activated:false,tip:false,triangle:false,close_button:false,animation:false,tri_animation:false,animation_attributes:{},tri_animation_attributes:{},tip_timer:false,activate:function(){if(this.activated)return;if(!this.tip){this.tip=document.getElementById("badges_participate_tip");if(!this.tip){return;}}
if(!this.close_button){this.close_button=document.getElementById("badges_participate_tip_close");if(!this.close_button){return;}}
if(!this.triangle){this.triangle=document.getElementById("badges_participate_tip_triangle");if(!this.triangle){return;}}
this.tip.style.display="none";this.triangle.style.display="none";HuffPoUtil.bind(this.close_button,"click",this.quickly_hide,null,this);this.activated=true;},animate:function(){jQuery(this.tip).animate(this.animation_attributes,{duration:1500,complete:function(){if(parseInt(jQuery(this).css("opacity"))<0.5){this.style.display="none";}}});jQuery(this.triangle).animate(this.tri_animation_attributes,{duration:1500,complete:function(){if(parseInt(jQuery(this).css("opacity"))<0.5){this.style.display="none";}}});},show:function(){this.activate();if(!this.activated)return;jQuery(this.tip).css("display","block").css("opacity","0");jQuery(this.triangle).css("display","block").css("opacity","0");this.animation_attributes={opacity:1};this.tri_animation_attributes={opacity:1};this.animate();clearTimeout(this.tip_timer);this.tip_timer=setTimeout('UserLevels.Agreement.Slider.Tip.hide()',5000);},quickly_hide:function(){this.tip.style.display="none";this.triangle.style.display="none";},hide:function(){this.activate();if(!this.activated)return;clearTimeout(this.tip_timer);this.animation_attributes={opacity:0};this.tri_animation_attributes={opacity:0};this.animate();}}}},update_beta_tester_mode:function(){jQuery.ajax({url:"/users/user_level_json.php?action=badges_betatester&state="+(isBT?"false":"true"),cache:false,dataType:"html",success:function(data,textStatus){isBT=(data==='true')?true:false;}});}};var AwardCommentBadge={badges:'',giftBadges:'',ieResized:{},init:function(){this.fansystem();this.pagination();this.bindEventsToGiftBadges();this.ieFix(1);jQuery("#more_badges").live('click',function(){if(jQuery("div.comments-badges-single-badge-hidden:visible").length){jQuery("div.comments-badges-single-badge-hidden").hide(200);jQuery("#more_badges").text('more..');}else{jQuery("div.comments-badges-single-badge-hidden").show(200);jQuery("#more_badges").text('less..');}});},favComment:function(comment_id,entry_id,blog_id){var button_text=document.getElementById('best_'+comment_id);if(button_text&&(button_text.innerHTML.indexOf('Marked')==-1)&&(button_text.innerHTML.indexOf('Favorited')==-1)){this.trackEvent('Favorite');jQuery.ajax({url:'/include/flagComment.php?type=best&blog_id='+blog_id+'&cmt_id='+comment_id+'&entry_id='+entry_id,success:function(responseText){result=parseInt(responseText);if(isNaN(result)){return;}
if(result<0){button_text.innerHTML='Already Favorited'+' ('+(-result)+')';}else{button_text.innerHTML='Favorited'+' ('+result+')';}},failure:function(){}});}},fansystem:function(){huff.use('fansystem',function(fansystem){jQuery(document).delegate('.become_fan_link','click',function(e){e.preventDefault();if(!jQuery(this).length)return;var username=jQuery.trim(jQuery(this).attr("id").replace("become_fan_of_",""))||"";fansystem.becomeFan(username);return;});jQuery(document).delegate('.remove_fan_link','click',function(e){e.preventDefault();if(!jQuery(this).length)return;var userdata=jQuery.trim(jQuery(this).attr("id").replace("remove_fan_of_",""))||"";var id_array=userdata.split("_");fansystem.removeFan(id_array[0],id_array[1]);return;});});},pagination:function(){if(!jQuery('div.comments-badges-arrow-right')||!jQuery('div.comments-badges-arrow-left'))return false;jQuery('div.comments-badges-arrow-right').live('click',function(){var oCurrComment=jQuery("div.comments-badges-tread").children("div[class!='clear']:visible");var oNextComment=oCurrComment.next("div[class!='clear']");var oPage=jQuery("div.comments-badges-pages-counter").children().first();if(!oNextComment.length){var oNextComment=jQuery("div.comments-badges-tread").children("div[class!='clear']").first();oPage.text(1);}else{oPage.text(oPage.text()*1+1);}
oCurrComment.hide();oNextComment.show();AwardCommentBadge.ieFix(oPage.text()*1);});jQuery('div.comments-badges-arrow-left').live('click',function(e){var oCurrComment=jQuery("div.comments-badges-tread").children("div[class!='clear']:visible");var oPrevComment=oCurrComment.prev("div[class!='clear']");var oPage=jQuery("div.comments-badges-pages-counter").children().first();if(!oPrevComment.length){var oPrevComment=jQuery("div.comments-badges-tread").children("div[class!='clear']").last();oPage.text(jQuery("div.comments-badges-pages-counter").children().last().text()*1);}else{oPage.text(oPage.text()*1-1);}
oCurrComment.hide();oPrevComment.show();AwardCommentBadge.ieFix(oPage.text()*1);});},bindEventsToGiftBadges:function(){if(!jQuery("a.share_favorite_comment_popup_trigger"))return false;jQuery.each(jQuery("a.share_favorite_comment_popup_trigger"),function(i,val){var el=jQuery(val);if(AwardCommentBadge.giftBadges[el.attr("comment_id")]&&!el.attr("isGiftBadgeBinded")){var data=AwardCommentBadge.giftBadges[el.attr("comment_id")];el.bind('click',function(){UserLevels.BadgePopup.onBadgeClick(data.comment_user_name);});el.bind('mouseout',function(){UserLevels.GiftBadgePopup.onMouseOutBadge();});el.bind('mouseover',function(){data.badge_el=el;UserLevels.GiftBadgePopup.showBadgePopup(data);});el.attr("isGiftBadgeBinded",true);}});},ieFix:function(page){if(!this.ieResized[page]&&jQuery.browser.version<=7.0&&jQuery.browser.msie){this.ieResized[page]=true;var margin_top=(jQuery(".comments-badges-tread:visible").height()/2)-(jQuery(".comments-badges-right-block:visible").height()/2)-12;jQuery(".comments-badges-right-block:visible").css('margin-top',margin_top+'px');jQuery(".comments-badges-monster-badge:visible").css('margin-top',margin_top+'px');}}};
function PopUp(params){this.activated=false;this.wrong_params=false;this.opts={};this.holders={};var args_to_get=["display_mode","lazy_init","place_type","offset","position","showcase_timeout","timeout","popup_event_callback","type"];var args_amount=args_to_get.length,property;for(var a=0;a<args_amount;a++){property=args_to_get[a];if(params[property]){this.opts[property]=params[property];}}
if(!this.opts.place_type){this.wrong_params=true;return false;}
var tmp=jQuery(params.target);if(tmp.length===0){this.opts.lazy_init=true;}else{this.holders.target_id=params.target;this.holders.target=tmp;}
if(!params.trigger){params.trigger=[];}else if(!HuffPoUtil.isArray(params.trigger)){params.trigger=[params.trigger];}
this.holders.triggers={};this.holders.trigger_selectors=[];var _len=params.trigger.length,_test;for(var _i=0;_i<_len;_i++){_test=jQuery(params.trigger[_i]);if(_test.length!==0){this.holders.triggers[params.trigger[_i]]=_test;this.holders.trigger_selectors.push(params.trigger[_i]);}}
if(!this.opts.timeout){this.opts.timeout=500;}
if(!this.opts.showcase_timeout){this.opts.showcase_timeout=500;}
if(this.opts.display_mode){this.opts.display_mode="advanced";}
if(!this.opts.type){this.opts.type="common";}
switch(this.opts.place_type){case"at_position":if(!params.position){this.wrong_params=true;return false;}
this.opts.position=params.position;break;case"near_trigger":if(!params.offset){this.wrong_params=true;return false;}
this.opts.offset=params.offset;break;}
if(!this.opts.lazy_init){this.activate();}};PopUp.prototype={};PopUp.prototype.activate=function(){if(this.activated)return true;if(this.wrong_params)return false;var holder_id="popup_"+this.holders.target_id;var holder=document.createElement("div");this.holders.holder_id=holder_id;this.holders.holder=holder;holder.setAttribute("id",holder_id);jQuery(holder).css("display","none");jQuery(holder).css("zIndex","4");switch(this.opts.place_type){case"at_position":jQuery(holder).css("position","absolute");jQuery(holder).offset({left:this.opts.position.x,top:this.opts.position.y});break;case"near_trigger":jQuery(holder).css("position","absolute");break;}
if(this.opts.display_mode=="advanced"){}
if(this.opts.type=="left_side"){jQuery(this.holders.target).addClass("left_side");}
this.holders.target.parentNode.appendChild(holder);this.holders.target.parentNode.removeChild(this.holders.target);holder.appendChild(this.holders.target);HuffPoUtil.bind(holder,"mouseover",this.showcaseCountdown,{esource:"holder"},this);HuffPoUtil.bind(holder,"mouseout",this.start_hide,{esource:"holder"},this);var _len=this.holders.trigger_selectors.length,trigger;for(var _i=0;_i<_len;_i++){HuffPoUtil.bind(this.holders.triggers[this.holders.trigger_selectors[_i]],"mouseover",this.showcaseCountdown,{esource:"trigger",trigger_selector:this.holders.trigger_selectors[_i]},this);HuffPoUtil.bind(this.holders.triggers[this.holders.trigger_selectors[_i]],"mouseout",this.start_hide,{esource:"trigger",trigger_selector:this.holders.trigger_selectors[_i]},this);}
this.activated=true;};PopUp.prototype.addTrigger=function(trigger_selector){var trigger=jQuery(trigger_selector);if(trigger.length===0){return false;}
this.holders.trigger_selectors.push(trigger_selector);this.holders.triggers[trigger_selector]=trigger;HuffPoUtil.bind(trigger,"mouseover",this.showcaseCountdown,{esource:"trigger",trigger_selector:trigger_selector},this);HuffPoUtil.bind(trigger,"mouseout",this.start_hide,{esource:"trigger",trigger_selector:trigger_selector},this);};PopUp.prototype.setTarget=function(target_id){var tmp=document.getElementById(target_id);if(!tmp){return false;}
this.holders.target_id=target_id;this.holders.target=tmp;this.activate();};PopUp.prototype.showcaseCountdown=function(e){var _this=this;this.cancelHiding();this.showcase_timeout_id=setTimeout(function(){_this.show(e.data)},this.opts.showcase_timeout);};PopUp.prototype.cancelShow=function(){if(this.showcase_timeout_id){clearTimeout(this.showcase_timeout_id);this.showcase_timeout_id=0;}},PopUp.prototype.show=function(params){this.cancelHiding();this.cancelShow();jQuery(this.holders.holder).css("display","block");if(this.opts.place_type=="near_trigger"&&params.esource=="trigger"){var trigger=this.holders.triggers[params.trigger_selector];var trigger_pos=trigger.offset();jQuery(this.holders.holder).offset({top:parseInt(trigger_pos.top)+parseInt(this.opts.offset.y),left:parseInt(trigger_pos.left)+parseInt(this.opts.offset.x)});if(this.opts.display_mode=="advanced"){jQuery(this.holders.target).css("display","block");}
if(this.opts.popup_event_callback){this.opts.popup_event_callback.funct.apply(this.opts.popup_event_callback.scope,[{"trigger_selector":params.trigger_selector},this.opts.popup_event_callback.params]);}}
clearTimeout(this.timeout_id);};PopUp.prototype.cancelHiding=function(){if(this.timeout_id){clearTimeout(this.timeout_id);this.timeout_id=0;}},PopUp.prototype.start_hide=function(e){this.cancelHiding();this.cancelShow();var _this=this;this.timeout_id=setTimeout(function(){_this.hide()},this.opts.timeout);};PopUp.prototype.hide=function(){jQuery(this.holders.holder).css("display","none");if(this.opts.display_mode=="advanced"){jQuery(this.holders.target).css("display","none");}
clearTimeout(this.timeout_id);};
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});var HuffConnect={loadConnectModal:function(params){HPConnect.Login();return;},SignUp:{Facebook:function(status){setTimeout(function()
{HPFB.ensureInit(function()
{HPFB.waitForSession(function()
{HPFB.getFBInfo
(function(o)
{Provider.user_provider_info.facebook={};Provider.user_provider_info.facebook.profile_image=o[0].pic_square;Provider.user_provider_info.facebook.screen_name=o[0].name;Provider.user_provider_info.facebook.id=o[0].uid;Provider.user_provider_info.facebook.email=o[0].email||'';if(/proxymail.facebook.com/.test(Provider.user_provider_info.facebook.email)){Provider.user_provider_info.facebook.email='';}
Provider.user_provider_info.facebook.Status='new_user';setTimeout(function()
{huff.use('connect/auth','connect/modal','connect/provider',function(ConnectAuth,ConnectModal,ConnectProvider){ConnectProvider.loadModal('facebook');});},500);return;});},{fb_signup:true});});},1000);}},Login:{is_become_fan:false,callbacks:{},onLoginSuccess:function(){huff.use('connect/auth',function(ConnectAuth){ConnectAuth.Login.updateLoginStatus();});},FacebookSuccess:function(result,args){document.cookie=document.cookie;var HC=HuffCookies;if(args&&args.autologin){HC.setCookie('autologin','1',2);}
switch(result.msg){case'success':HC.destroyCookie('autologin');HC.set('snn_popup_needed','1','1');var QL=window.QuickLogin||false;if(QL&&"function"==typeof QL.FacebookLoginCallback){this.registerCallback('after_facebook_login',QL.FacebookLoginCallback,'facebook');}
this.callback('after_facebook_login');break;case'self_closed_user':case'new_user':if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback('facebook','new_user');}else{HuffConnect.SignUp.Facebook(result.msg);}
break;case'prompt_for_connect':HuffConnect.hideModal();linkSocialAccount.provider='facebook';linkSocialAccount.FacebookPromtLogin();break;default:this.FacebookFail(result);break;}
return;},FacebookFail:function(o){var HL=HuffConnect.Login;if(o.argument&&o.argument.autologin)
HuffCookies.setCookie('autologin','1',2);if(o.tld!=null){HPError.d('ServiceLoginFail',o);}
else if(o.is_error){HPError.d('ServiceLoginFail2',o);}
if(typeof(HL.is_become_fan)!="undefined"){HL.is_become_fan=false;}
return;},registerCallback:function(name,callback,provider_name)
{if("undefined"==typeof(provider_name))
provider_name=false;if(name&&"function"==typeof callback)
this.callbacks[name]={Func:callback,ProviderName:provider_name};return;},callback:function(name)
{if(name&&"undefined"!=typeof this.callbacks[name]&&"function"==typeof this.callbacks[name].Func)
{if(HPConfig.site)
{XDAuth.syncRemoteWithLocal('login',[{args:[],on_success:HuffConnect.Login.callbacks[name].Func}]);}
else
{this.callbacks[name].Func();}
return;}
else
{if(HPConfig.site)
{var func=function(){HuffConnect.hideModal();HuffConnect.Login.onLoginSuccess();return;};if('after_facebook_login'==name){XDAuth.syncRemoteWithLocal('login',[{args:[],on_success:func}]);}
else{XDAuth.syncRemoteWithLocal('login',[{args:[],on_success:func}]);}}
else
{HuffConnect.hideModal();this.onLoginSuccess();}
return;}}},SocialLogout:function(sRedirect,do_redirect,exec_server_logout)
{if("undefined"!=typeof exec_server_logout)exec_server_logout=false;if(do_redirect!==false)do_redirect=true;if(!sRedirect)sRedirect='';SNProject.track(HuffCookies.getUserId(),'user_log_out');huff.use('provider/logout',function(ProvidersLogout){ProvidersLogout.Main(sRedirect,do_redirect,exec_server_logout);});return;},loader_active:false,socialModal:function(params)
{if(HuffConnect.loader_active){HuffConnect.loader_active=false;HuffConnect.hideModal();}
params=params||{};if(params.modal_head_image||""==params.modal_head_image)
{params.modal_head_image=params.modal_head_image;}
else
{params.modal_head_image='<img width="368" height="36" alt="" src="'+_("/images/social-profile/lightbox/huffpo_logo_lightbox.png")+'"/>';if(HPConfig&&HPConfig.site)
{switch(HPConfig.site)
{case"stylelist":params.modal_head_image='<img class="margin_5_0" height="42" alt="" src="'+_("/images/social-profile/lightbox/stylelist_logo_lightbox.png")+'"/>';break;case"france":case"canada-quebec":params.modal_head_image='<img width="550" height="29" alt="" src="'+_("/images/social-profile/lightbox/huffpo_logo_lightbox_beta.png")+'"/>';break;case"spain":case"voces":params.modal_head_image='<img width="550" height="29" alt="" src="'+_("/images/v/spain/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"italy":params.modal_head_image='<img width="550" height="29" alt="" src="'+_("/images/v/italy/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;}}}
if(params.modal_subhead_image||""==params.modal_subhead_image)
{params.modal_subhead_image=params.modal_subhead_image;}
else
{params.modal_subhead_image='<img height="22" alt="" src="'+_("/images/social/benefits/social_logo_inner.png")+'"/>';if(HPConfig&&HPConfig.site)
{switch(HPConfig.site)
{case"canada-quebec":params.modal_subhead_image='';break;case"stylelist":case"spain":params.modal_subhead_image='';break;case"voces":params.modal_subhead_image='';break;case"italy":params.modal_subhead_image='';break;}}}
params.inner_wrapper_class=(params.inner_wrapper_class)?params.inner_wrapper_class:"";params.width=(params.width)?params.width:680;params.onshow=("function"==typeof params.onshow)?params.onshow:false;params.onclose=("function"==typeof params.onclose)?params.onclose:false;params.inner_html=params.inner_html||"";params.url=params.url||"";params.type=params.type||"GET";params.cache=(params.cache===false)?false:true;params.position=params.position||"absolute";params.content="";var image_content="";var modal_content="";if((params.modal_head_image||params.modal_subhead_image)&&HPConfig.current_vertical_id!=43)
{image_content+='<div class="hp_blue_lb_head_image">'+params.modal_head_image+'</div>';if('france'!=HPConfig.site&&HPConfig.current_vertical_name!='canada-quebec')image_content+='<div class="hp_blue_lb_head_subimage margin_top_5">'+params.modal_subhead_image+'</div>';image_content+='<div class="hp_blue_lb_hr"></div>';}
modal_content+='<div><div class="'+params.inner_wrapper_class+'">';modal_content+=image_content;modal_content+='<div class="social_modal_content">'+params.inner_html+'</div>';modal_content+='</div></div>';params.content+=modal_content;if(!params.inner_html&&params.url)
{if(HuffConnect.socialModalCache&&HuffConnect.socialModalCache[params.url])
{params.inner_html=HuffConnect.socialModalCache[params.url];delete(params.url);HuffConnect.socialModal(params);return;}
else
{params.content='<div style="width:32px; height:32px; background:url(http://s.huffpost.com/images/loader.gif);'+
'margin:33px auto;"></div>';jQuery.ajax({url:params.url,type:params.type,success:function(data,func,req)
{HuffConnect.hideModal();if(req.status!=200)return;if(params.cache){HuffConnect.socialModalCache={};HuffConnect.socialModalCache[params.url]=data;}
params.inner_html=data;delete(params.url);HuffConnect.socialModal(params);return;},error:function()
{HPError.e();return;}});}}
huff.use('modal',function(m)
{var modal_config={content:params.content,width:(params.url)?300:params.width,onshow:(!params.url)?params.onshow:false,onclose:(!params.url)?params.onclose:false,position:(!params.url)?params.position:"fixed"};m.show(modal_config);});return;},hideModal:function(onhide)
{onhide=onhide||false;huff.use('modal',function(m){m.hide();if('function'==typeof(onhide))
{onhide();}
return;});},showLoader:function()
{huff.use('modal',function(m){m.show({content:'<div style="width:32px; height:32px;margin:33px auto;"><img src="http://s.huffpost.com/images/loader.gif"></div>',width:300});return;});HuffConnect.loader_active=true;return;},showMask:function()
{jQuery('<div id="hp_modal_mask" style="position:fixed; z-index: 800; left:0px; top:0px;width:100%; height:100%; background:#000; opacity:0.7; filter:alpha(opacity=70);"></div>').prependTo("body");return;},hideMask:function()
{jQuery('#hp_modal_mask').remove();return;},ShowEmbed:function()
{this.ChangeEmbedState('visible',selector);},HideEmbed:function()
{this.ChangeEmbedState('hidden',selector);},ChangeEmbedState:function(state,selector)
{if(typeof selector=='undefined'){var objects=document.getElementsByTagName('object');var embeds=document.getElementsByTagName('embed');for(var i=0;i<embeds.length;i++){embeds[i].style.visibility=state;if(embeds[i].getAttribute('belongs_modal')){embeds[i].style.display='visible'==state?'block':'none';}}}else{objects=jQuery(selector);}
for(i=0;i<objects.length;i++){objects[i].style.visibility=state;if(objects[i].getAttribute('belongs_modal')){objects[i].style.display='visible'==state?'block':'none';}}
var extra_embeds=['curtainunit','ad_leaderboard_top','ad_store_leaderboard_top'];for(i=0;i<extra_embeds.length;i++)
{var extra=jQuery("#"+extra_embeds[i]);if(extra.length){extra.css('visibility',state);if(extra.attr('belongs_modal')){extra.css("display",'visible'==state?'block':'none');}}}}};
var ConnectOverview={config:null,current_page:null,interval_id:null,auto_paging_timeout_id:null,showBenefits:function(params){HuffConnect.hideModal();var type=params.provider||null;var message='';this.configureModal(type);this.clearIntervals();return;},configureModal:function(provider,message){var page_path=_("/images/social/benefits/")+provider+"/";huff.use('user','connect/auth','connect/modal');switch(provider){case"facebook":var config={type:'facebook',text:_('Connect to the Huffington Post through Facebook'),slides:[page_path+"facebook_benefit1.jpg",page_path+"facebook_benefit2.jpg",page_path+"facebook_benefit3.jpg"]};break;case"twitter":var config={type:'twitter',text:_('Connect to the Huffington Post through Twitter'),slides:[page_path+"twitter_benefit1.jpg",page_path+"twitter_benefit2.jpg",page_path+"twitter_benefit3.jpg",page_path+"twitter_benefit4.jpg"]};break;default:HPConnect.Login();return;break;}
return;if(config){this.config=config;var html=this.getHtml(message);this.showLightbox(html);}
return;},showLightbox:function(html){html='<div class="social_benefit_modal">'+html+'</div>';var onshow_cb=function(){ConnectOverview.auto_paging_timeout_id=setTimeout(function(){ConnectOverview.startAutoPaging();},5000);};var onclose_cb=false;var position="fixed";HuffConnect.socialModal({inner_html:html,width:680,onclose:onclose_cb,onshow:onshow_cb,position:position});return;},closeLightbox:function(){HuffConnect.hideModal();},showPage:function(p){for(var i=0,slides_len=this.config.slides.length;i<slides_len;i++)
{var page=jQuery('#benefit_page_'+i);var slide=jQuery('#benefit_slide_'+i);if(i==p){slide.removeClass("display_none");page.removeClass('active_page_link').addClass('passive_page_link').unbind("click");this.current_page=p;}
else{slide.addClass("display_none");page.removeClass('passive_page_link').addClass('active_page_link').unbind('click').click({page:i},function(e){ConnectOverview.showPage(e.data.page);});}}
return;},prevPage:function(){var page=this.current_page-1;if(page<0)
page=(this.config.slides.length-1);this.showPage(page);},nextPage:function(){var page=this.current_page+1;if(page>=this.config.slides.length)
page=0;this.showPage(page);},autoPaging:function(){this.nextPage();return;},getHtml:function(message){var config=this.config;var html="";var paging_html="";var content_html="";var p=1;var btn_img=_("/images/social/benefits/")+config.type+"_button_big.png";content_html+='<div class="float_left benefit_bg benft_left_arr" onclick="ConnectOverview.prevPage();"></div>';for(var i=0;i<config.slides.length;i++){var cls=(i===0)?'':'display_none';content_html+='<div class="'+cls+' single_slide float_left" id="benefit_slide_'+i+'"><img id="benefit_img_src_'+i+'" src="'+config.slides[i]+'" /></div>';paging_html+='<span class="benefit_pages '+(i==0?'passive':'active')+'_page_link" id="benefit_page_'+i+'">'+p+'</span>';this.current_page=i;p++;}
content_html+='<div class="float_left benefit_bg benft_right_arr" onclick="ConnectOverview.nextPage();"></div>';content_html+='<div class="clear" style="clear:both;"></div>';html+='<div class="social_benefits social_benefits_lightbox" id="benefits_lb">';html+='<div class="social_link_text center">'+config.text+'</div>';html+='<div class="center"><a href="javascript:void(0);" onclick="linkSocialAccount.checkLoginStatus(\''+config.type+'\')"><img src="'+btn_img+'" /></a></div>';html+='<div class="benefit_paging" style="text-align:right">'+paging_html+'<div class="clear"></div></div>';html+='<div class="benefit_slides" id="slideshow_div">'+content_html+'</div>';html+='<div class="clear"></div><br class="clear" />';html+='</div>';return html;},startAutoPaging:function(){this.interval_id=self.setInterval(function(){ConnectOverview.autoPaging();},5000);},clearIntervals:function(_this){var obj=_this||this;if(obj.auto_paging_timeout_id)clearTimeout(obj.auto_paging_timeout_id);if(obj.interval_id)clearInterval(obj.interval_id);},showQuickModal:function(provider){var provider_name=provider.charAt(0).toUpperCase()+provider.substr(1,provider.length-1);var html='';var button='';switch(provider){case"facebook":button=_("/images/fb-large.gif");break;case"twitter":button=_("/images/Sign-in-with-Twitter-darker.png");break;default:return;}
html+='<div style="font-size: 14pt; font-weight: bold">'+sprintf(_("Do you want to connect to HuffPost using %s"),provider_name)+'?</div>';html+='<a class="login_light_link" ';html+='href="/social/join.html?autojoin=1" ';html+='onclick="linkSocialAccount.checkLoginStatus(\''+provider+'\'); return false;"';html+='target="_blank">';html+='<img border="0" src="'+button+'" alt="'+sprintf(_("Connect with %s"),provider_name)+'" style="padding: 16px;"/>';html+='</a>';HuffConnect.socialModal({inner_html:html,modal_subhead_image:""});return;}};
BingPageModule={app_id:'6AE728F21E27915214035B81C99B54592DE4D651',offset:0,limit:{Video:4,Image:3,Web:2},count_image:3,count_web:2,search_type:'',search_text:'',bing_container:'',search_url:'',web_url:'',videos_url:'',images_url:'',hp_url:'',atdm_imp_pixel:'',imr_imp_pixel:'',bing_df_tag:'',interclick_url:'http://idcs.interclick.com/Segment.aspx?sid=697a8088-0d41-4f72-9fb6-5bc7ecc099e8',version:'',ord:'',track_click:function(){HPTrack.trackPageview('/t/a/bing/2/out/'+escape(BingPageModule.search_text));jQuery.ajax({type:'post',url:'/ajax/bing/clicks_tracking.php',data:'keyword='+escape(this.bingText.value)+'&vertical_id='+HPConfig.current_vertical_id});},entry_extra_sort_bing:'',bing_metrics_bing_qtr_click_video:'',bingText:null,bingButton:null,bing_logo:null,bing_hp:null,bing_search_script:null,bing_item_web:null,bing_item_video:null,bing_item_image:null,entries:null,a_bing_videos:null,a_bing_web:null,a_bing_images:null,head:null};BingPageModule.setBingListeners=function()
{E.removeListener(BingPageModule.bingButton);E.removeListener(BingPageModule.bing_logo);E.removeListener(BingPageModule.see_more);E.removeListener(BingPageModule.bing_hp);E.addListener(BingPageModule.bing_hp,"click",function()
{this.track_click();window.open(BingPageModule.hp_url);},this,true);E.addListener(BingPageModule.bing_logo,"click",function()
{this.track_click();window.open(this.search_url+'?q='+escape(BingPageModule.bingText.value));},this,true);E.addListener(BingPageModule.bingButton,"click",function()
{this.track_click();BingPageModule.bingSearch();window.open(this.search_url+'?q='+escape(BingPageModule.bingText.value));},this,true);E.addListener(BingPageModule.see_more,"click",function()
{switch(BingPageModule.search_type){case'Video':imr=BingPageModule.imr_videos_url;s_url=this.videos_url+'?q='+escape(BingPageModule.bingText.value);break;case'Image':imr=BingPageModule.imr_images_url;s_url=this.images_url+'?q='+escape(BingPageModule.bingText.value);break;case'Web':imr=BingPageModule.imr_web_url;s_url=this.web_url+'?q='+escape(BingPageModule.bingText.value);break;}
this.track_click();window.open(s_url);},this,true);}
BingPageModule.bingStart=function(){BingPageModule.bing_container=$('bing_container');BingPageModule.bingText=$('sb_form_q');BingPageModule.bingButton=$('sb_form_go');BingPageModule.bing_logo=$('bing_logo');BingPageModule.bing_search_script=$('bing_search_script');BingPageModule.bing_item_web=$('bingItemWeb');BingPageModule.bing_item_video=$('bingItemVideo');BingPageModule.bing_item_image=$('bingItemImage');BingPageModule.entries=$('entries');BingPageModule.a_bing_videos=$('a_bing_videos');BingPageModule.a_bing_web=$('a_bing_web');BingPageModule.a_bing_images=$('a_bing_images');BingPageModule.head=document.getElementsByTagName('head');BingPageModule.search_type="Video";var disapble_time=Math.random()*100;var curr_date=new Date();b4_june_30_2011=curr_date.getMonth()<6&&curr_date.getYear()<2012;if(b4_june_30_2011&&disapble_time<=80){BingPageModule.initVersion();this.bingSearch();HPTrack.trackPageview('/t/a/bing/2/impression/'+escape(this.search_text));}}
BingPageModule.initVersion=function(){BingPageModule.version=Math.random()*100;if(BingPageModule.version<50){BingPageModule.version='v0';BingPageModule.search_url=BingPageModule.search_url.v0+BingPageModule.ord;BingPageModule.web_url=BingPageModule.web_url.v0+BingPageModule.ord;BingPageModule.videos_url=BingPageModule.videos_url.v0+BingPageModule.ord;BingPageModule.images_url=BingPageModule.images_url.v0+BingPageModule.ord;BingPageModule.hp_url=BingPageModule.hp_url.v0+BingPageModule.ord;BingPageModule.bing_metrics_bing_qtr_click_video=BingPageModule.bing_metrics_bing_qtr_click_video.v0+BingPageModule.ord;BingPageModule.atdm_imp_pixel=BingPageModule.atdm_imp_pixel.v0;BingPageModule.imr_imp_pixel=BingPageModule.imr_imp_pixel.v0;document.getElementById("bing_bottom").innerHTML='<div style="padding: 12px 0px 0px 445px;"><a id="see_more" href="javascript: void();" ><img id="see_more_image" border="0" src="/images/bing_new/see_more_v.gif" alt="See more" /></a></div>';}else if((BingPageModule.version>=50)&&(BingPageModule.version<75)){BingPageModule.version='v1';BingPageModule.search_url=BingPageModule.search_url.v1+BingPageModule.ord;BingPageModule.web_url=BingPageModule.web_url.v1+BingPageModule.ord;BingPageModule.videos_url=BingPageModule.videos_url.v1+BingPageModule.ord;BingPageModule.images_url=BingPageModule.images_url.v1+BingPageModule.ord;BingPageModule.hp_url=BingPageModule.hp_url.v1+BingPageModule.ord;BingPageModule.bing_metrics_bing_qtr_click_video=BingPageModule.bing_metrics_bing_qtr_click_video.v1+BingPageModule.ord;BingPageModule.atdm_imp_pixel=BingPageModule.atdm_imp_pixel.v1;BingPageModule.imr_imp_pixel=BingPageModule.imr_imp_pixel.v1;var aTag=document.createElement("a");aTag.id="bing_hp";aTag.style.cursor="pointer";aTag.href="javascript: void();";aTag.innerHTML="<div class=\"HomepageTop\"></div>";document.getElementById("bing_header").appendChild(aTag);document.getElementById("bing_bottom").innerHTML='<div style="padding: 12px 0px 0px 445px;"><a id="see_more" href="javascript: void();" ><img id="see_more_image" border="0" src="/images/bing_new/see_more_v.gif" alt="See more" /></a></div>';}else{BingPageModule.version='v2';BingPageModule.search_url=BingPageModule.search_url.v2+BingPageModule.ord;BingPageModule.web_url=BingPageModule.web_url.v2+BingPageModule.ord;BingPageModule.videos_url=BingPageModule.videos_url.v2+BingPageModule.ord;BingPageModule.images_url=BingPageModule.images_url.v2+BingPageModule.ord;BingPageModule.hp_url=BingPageModule.hp_url.v2+BingPageModule.ord;BingPageModule.bing_metrics_bing_qtr_click_video=BingPageModule.bing_metrics_bing_qtr_click_video.v2+BingPageModule.ord;BingPageModule.atdm_imp_pixel=BingPageModule.atdm_imp_pixel.v2;BingPageModule.imr_imp_pixel=BingPageModule.imr_imp_pixel.v2;document.getElementById("bing_bottom").innerHTML='<div style="padding: 6px 0px 0px 340px;">\
                                                                <a  id="bing_hp" style="cursor: pointer;" href="javascript: void();" ><img border="0" src="/images/bing_new/homepage_bottom.gif" alt="See more" /></a>\
                                                                <a id="see_more" href="javascript: void();" ><img id="see_more_image" border="0" src="/images/bing_new/se_more_new.gif" alt="See more" /></a>\
                                                            </div>';}
BingPageModule.bing_hp=$('bing_hp');BingPageModule.see_more=$('see_more');BingPageModule.see_more_image=$('see_more_image');};BingPageModule.bingSearch=function()
{$('bingItemWeb').className='WebPassive';$('bingItemVideo').className='VideoPassive';$('bingItemImage').className='ImagePassive';$('bingItem'+BingPageModule.search_type).className=BingPageModule.search_type+'Active';BingPageModule.setBingListeners();BingPageModule.entries.innerHTML='<i>Loading...</i>';if(BingPageModule.bingText.value=='')
{BingPageModule.entries.innerHTML='There is no result...';}
else
{BingPageModule.bingText.value=BingPageModule.bingText.value.replace(/\&FORM\=SOAPGN/,'');this.search_text=BingPageModule.bingText.value;var a_image='/images/bing_new/see_more_';switch(BingPageModule.search_type){case'Video':a_image=a_image+'v.gif';break;case'Image':a_image=a_image+'i.gif';break;case'Web':a_image=a_image+'r.gif';break;}
if(BingPageModule.version!='v2')
BingPageModule.see_more_image.src=a_image;var baseString='http://api.search.live.net/json.aspx?Appid='+BingPageModule.app_id+'&Query='+escape(BingPageModule.bingText.value);searchString=baseString
+'&Sources='+BingPageModule.search_type
+'&'+BingPageModule.search_type+'.count='+BingPageModule.limit[BingPageModule.search_type]
+'&'+BingPageModule.search_type+'.offset='+BingPageModule.offset
+'&Version=2.1'
+'&'+BingPageModule.search_type+'.SortBy='+BingPageModule.entry_extra_sort_bing
+'&JsonType=callback'
+'&SafeSearch=Strict'
+'&JsonCallback=BingPageModule.Search'+BingPageModule.search_type+'Completed';if(BingPageModule.bing_search_script!=null)
{BingPageModule.head[0].removeChild(BingPageModule.bing_search_script);}
var script=document.createElement('script');script.id='bing_search_script';script.src=searchString;BingPageModule.head[0].appendChild(script);BingPageModule.bing_search_script=document.getElementById('bing_search_script')}};BingPageModule.TabClick=function(tab)
{var search_url;switch(tab){case'Video':search_url=BingPageModule.videos_url+'?q='+escape(BingPageModule.bingText.value);break;case'Image':search_url=BingPageModule.images_url+'?q='+escape(BingPageModule.bingText.value);break;case'Web':search_url=BingPageModule.web_url+'?q='+escape(BingPageModule.bingText.value);break;}
BingPageModule.track_click();window.open(search_url,'bing_web_popup');return false;}
BingPageModule.SearchImageCompleted=function(response)
{resultHTML='<div>';var results=response&&response.SearchResponse&&response.SearchResponse.Image&&response.SearchResponse.Image.Results||[];if(!results.length)
{BingPageModule.entries.innerHTML='There is no result...';return;}else{BingPageModule.bing_container.style.display='block';if(BingPageModule.atdm_imp_pixel!=''){HPUtil.trackerImg(BingPageModule.atdm_imp_pixel,BingPageModule.bing_container);BingPageModule.atdm_imp_pixel='';}
if(BingPageModule.imr_imp_pixel!=''){HPUtil.trackerImg(BingPageModule.imr_imp_pixel,BingPageModule.bing_container);BingPageModule.imr_imp_pixel='';}
if(BingPageModule.bing_df_tag!=''){HPUtil.scriptTag(BingPageModule.bing_df_tag,BingPageModule.bing_container);BingPageModule.bing_df_tag='';}
if(BingPageModule.interclick_url!=''){HPUtil.trackerImg(BingPageModule.interclick_url,BingPageModule.bing_container);BingPageModule.interclick_url='';}}
var image_width=new Array();var image_height=new Array();var average_height=0;for(var i=0;i<BingPageModule.limit['Image'];++i)
{image_width[i]=results[i].Thumbnail.Width;image_height[i]=results[i].Thumbnail.Height;average_height=average_height+results[i].Thumbnail.Height;}
average_height=Math.ceil(average_height/BingPageModule.limit['Image']);var full_width=0;for(i=0;i<BingPageModule.limit['Image'];++i)
{image_width[i]=Math.ceil(image_width[i]/(image_height[i]/average_height));image_height[i]=average_height;full_width=full_width+image_width[i];}
var block_width=495;var image_style='margin-right: 10px;';if(full_width<(block_width-50)){image_style='margin-left: 15px; margin-right: 15px;';block_width=435;}
if(full_width<(block_width-100)){image_style='margin-left: 25px; margin-right: 25px;';block_width=375;}
var coeff=block_width/full_width;for(i=0;i<BingPageModule.limit['Image'];++i)
{resultHTML=resultHTML+'<div class="imageItem" style="'+image_style+'">'
+'<a href="'+BingPageModule.images_url+'?q='+escape(BingPageModule.bingText.value)+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_images_url, document.body); window.open(this.href, \'bing_image_popup\'); return false;">'
+'<img src="'+results[i].Thumbnail.Url+'" border="0" width="'+Math.ceil(image_width[i]*coeff)+'" height="'+Math.ceil(image_height[i]*coeff)+'" />'
+'</a>'
+'</div>';}
resultHTML=resultHTML+'<div style="clear: both;"></div></div>';BingPageModule.entries.innerHTML=resultHTML;};BingPageModule.SearchWebCompleted=function(response)
{resultHTML='';var results=response&&response.SearchResponse&&response.SearchResponse.Web&&response.SearchResponse.Web.Results||[];if(!results.length)
{BingPageModule.entries.innerHTML='There is no result...';return;}else{BingPageModule.bing_container.style.display='block';if(BingPageModule.imp_pixel_common!=''){HPUtil.trackerImg(BingPageModule.imp_pixel_common,BingPageModule.bing_container);BingPageModule.imp_pixel_common='';}
if(BingPageModule.imp_pixel!=''){HPUtil.trackerImg(BingPageModule.imp_pixel,BingPageModule.bing_container);BingPageModule.imp_pixel='';}
if(BingPageModule.bing_df_tag!=''){HPUtil.scriptTag(BingPageModule.bing_df_tag,BingPageModule.bing_container);BingPageModule.bing_df_tag='';}
if(BingPageModule.interclick_url!=''){HPUtil.trackerImg(BingPageModule.interclick_url,BingPageModule.bing_container);BingPageModule.interclick_url='';}}
for(var i=0;i<BingPageModule.limit['Web'];++i)
{if('undefined'==typeof(results[i]))break;resultHTML=resultHTML+'<div>'
+'<a style="text-decoration: underline; font-weight: bold; color: #5462c3;" href="'+BingPageModule.web_url+'?q='+escape(BingPageModule.bingText.value)+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_web_url, document.body); window.open(this.href, \'bing_web_popup\'); return false;">'
+results[i].Title
+'</a><br />'
+'<div style="width: 520px; margin-bottom:3px;">'
+results[i].Description+'&nbsp'
+'</div>'
+'<span style="color: #688156">'+results[i].DisplayUrl+'</span>&nbsp;<span style="color: #4e7cc0;">-</span>&nbsp;<a style="color: #4e7cc0;" href="'+BingPageModule.web_url+'?q='+escape(BingPageModule.bingText.value)+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_web_url, document.body); window.open(this.href, \'bing_web2_popup\'); return false;">Cached page</a>'
+'<div style="height: 10px;"></div>'
+'</div>';}
BingPageModule.entries.innerHTML=resultHTML;};BingPageModule.SearchVideoCompleted=function(response)
{resultHTML='<div>';var results=response&&response.SearchResponse&&response.SearchResponse.Video&&response.SearchResponse.Video.Results||[];if(!results.length)
{BingPageModule.entries.innerHTML='There is no result...';return;}else if(results.length>=BingPageModule.limit['Video']){BingPageModule.bing_container.style.display='block';if(BingPageModule.atdm_imp_pixel!=''){HPUtil.trackerImg(BingPageModule.atdm_imp_pixel,BingPageModule.bing_container);BingPageModule.atdm_imp_pixel='';}
if(BingPageModule.imr_imp_pixel!=''){HPUtil.trackerImg(BingPageModule.imr_imp_pixel,BingPageModule.bing_container);BingPageModule.imr_imp_pixel='';}
if(BingPageModule.bing_df_tag!=''){HPUtil.scriptTag(BingPageModule.bing_df_tag,BingPageModule.bing_container);BingPageModule.bing_df_tag='';}
if(BingPageModule.interclick_url!=''){HPUtil.trackerImg(BingPageModule.interclick_url,BingPageModule.bing_container);BingPageModule.interclick_url='';}}
for(var i=0;i<BingPageModule.limit['Video'];++i)
{if('undefined'==typeof(results[i]))break;var PlayUrl='';if(results[i].ClickThroughPageUrl==null)
{PlayUrl=results[i].PlayUrl;}
else
{PlayUrl=results[i].ClickThroughPageUrl;}
PlayUrl=PlayUrl.toString().replace(/http:\/\/www\.bing\.com\/videos/gi,BingPageModule.bing_metrics_bing_qtr_click_video);PlayUrl=PlayUrl.replace(/\&FORM\=SOAPGN/gi,'');PlayUrl=PlayUrl.replace(/\&scope\=video/gi,'');resultHTML=resultHTML+'<div class="videoItem'+((i==(BingPageModule.count_video-1))?'':' viRightMargin')+'">'
+'<a href="'+PlayUrl+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_videos_url, document.body);">'
+'<div>'
+'<div class="bingImage" style="margin-bottom: 3px; width:123px; height: 92px;   background: url(\''+results[i].StaticThumbnail.Url+'\') no-repeat center black;">'
+'<img src="http://s.huffpost.com/images/bing/icon-play.png" style="position: relative; top: 80%; left: 40%" width="16" height="16" alt="Play" />'
+'</div>'
+'</div>'
+'<div class="bing_video_title">';if(results[i].SourceTitle==null)
{}
else
{resultHTML=resultHTML+'<div><b style="color:#5462c3;">'+results[i].Title+'</b></div>';}
resultHTML=resultHTML+'<div style="margin-top: 3px;"><b>'+results[i].SourceTitle+'</b></div></div></a></div>';}
resultHTML=resultHTML+'<div style="clear: both;"></div></div>';BingPageModule.entries.innerHTML=resultHTML;};BingPageModule.clearString=function()
{BingPageModule.search_text=BingPageModule.bingText.value;BingPageModule.bingText.value='';};BingPageModule.setString=function()
{if(BingPageModule.bingText.value=='')
{BingPageModule.bingText.value=this.search_text;}
BingPageModule.setBingListeners();};BingPageModule.setStartPage=function(obj)
{if(document.all)
{obj.setHomePage('http://www.bing.com');}
return false;};
window._||(window._=function(str){return str;});window.ngettext||(window.ngettext=function(str){return str;});window.sprintf||(window.sprintf=function(str){return str;});(function($){var AnywhereCache={};var Constant={FRIENDSHIP_URL:'/ajax/twitter/friendship.php',ANYWHERE_URL:'/ajax/twitter/anywhere/anywhere.php',ANYWHERE_URL_V2:'/ajax/twitter/anywhere/anywhere_v2.php'};var TwitterAnywhere={};TwitterAnywhere.anywhereWnd={hideTimeout:undefined,version:1,followTo:{},config:{window_delay:250}};TwitterAnywhere.anywhere=function(root_node_or_id,config){if(!root_node_or_id){root_node_or_id=$('body');}
var target=typeof(root_node_or_id)==='string'?$('#'+root_node_or_id):root_node_or_id;if(target.length==0){return;}
$.proxy(this.setConfig(config),this);if($('#hp_anywhere_wnd').length==0){this.anywhereWnd.loadCSS();var anywhere_wnd=document.createElement('div');anywhere_wnd.id='hp_anywhere_wnd';anywhere_wnd.style.cssText='position:absolute;left:0;top:-999px;';anywhere_wnd.innerHTML='<div id="aw_content" class="round"></div><div id="aw_triangle"></div>';var rootElem=$('#anywhere_block').length>0?$('#anywhere_block'):(/BODY|HTML/.test(target.parent().attr('tag'))?$('body'):target);rootElem.append(anywhere_wnd);$('#hp_anywhere_wnd').mouseenter($.proxy(this.anywhereWnd.onMouseOver,this.anywhereWnd));$('#hp_anywhere_wnd').mouseleave($.proxy(this.anywhereWnd.onMouseOut,this.anywhereWnd));}
this.anywhereWnd.wnd=$('#hp_anywhere_wnd');this.anywhereWnd.content=$('#aw_content');this.anywhereWnd.triangle=$('#aw_triangle');showWndLoader();target.mouseover($.proxy(this.anywhereWnd.show,this.anywhereWnd));target.mouseout($.proxy(function(event){var target=event.target;var cls=target.className;if(!cls||typeof(cls.indexOf)!='function'){return;}
else
return;var anywhere_support=cls.indexOf('twitter-anywhere-user')>-1;var anywhere_support_v2=cls.indexOf('twitter-anywhere-user-v2')>-1;if(!anywhere_support&&!anywhere_support_v2){return;}
var self=this;clearTimeout(this.mouseoverTimeout);TwitterAnywhere.anywhereWnd.timeoutHide();},this.anywhereWnd));};TwitterAnywhere.setConfig=function(config){if(config){if(config.hasOwnProperty('window_delay')){this.anywhereWnd.config.window_delay=config.window_delay;}}};TwitterAnywhere.anywhereWnd.loadCSS=function(){var link=document.createElement('link');link.setAttribute('rel','stylesheet');link.setAttribute('href','http://s.huffpost.com/assets/css.php?f=hptwitter_anywhere.css&9');link.setAttribute('type','text/css');link.setAttribute('media','screen');$('head').append(link);};TwitterAnywhere.anywhereWnd.show=function(event){var target=event.target;var cls=target.className;if(!cls||typeof(cls.indexOf)!='function'){return;}
var anywhere_support=cls.indexOf('twitter-anywhere-user')>-1;var anywhere_support_v2=cls.indexOf('twitter-anywhere-user-v2')>-1;if(!anywhere_support&&!anywhere_support_v2){return;}
if(anywhere_support_v2){this.version=2;this.wnd.addClass('v2');}else{this.version=1;this.wnd.removeClass('v2');}
var trg=target.nodeName==='IMG'?target.parentNode:target;var user=this.getUsernameFromTarget(trg);var tid=this.getTweetIdFromTarget(target);var self=this;this.mouseoverTimeout=window.setTimeout(function(){if(self.request&&isCallInProgress(self.request)){self.request.abort();}
self.target=target;clearTimeout(self.hideTimeout);self.setContent(user,tid,{author_nickname:self.target&&$(self.target).attr('author_nickname')?$(self.target).attr('author_nickname').toString():''});$.proxy(self.setPosition(),self);},this.config.window_delay);};TwitterAnywhere.anywhereWnd.hide=function(){this.request.abort();this.wnd.offset({top:-999});};TwitterAnywhere.anywhereWnd.timeoutHide=function(){var self=this;this.hideTimeout=setTimeout(function(){self.hide();},500);};TwitterAnywhere.anywhereWnd.cancelHiding=function(){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0;}};TwitterAnywhere.anywhereWnd.getUsernameFromTarget=function(target){if(target.href){return target.href.replace(/.+\//,'');}else{return $.trim(target.innerHTML).replace('@','');}};TwitterAnywhere.anywhereWnd.getTweetIdFromTarget=function(target){return $(target).attr('tid');};TwitterAnywhere.anywhereWnd.onMouseOver=function(event){var coord={left:event.pageX,top:event.pageY};var wnd=$('#hp_anywhere_wnd');var wnd_coord={top:wnd.offset().top,right:wnd.offset().left+wnd.width(),bottom:wnd.offset().top+wnd.height()+13,left:wnd.offset().left};this.cancelHiding();};TwitterAnywhere.anywhereWnd.onMouseOut=function(event){var coord={left:event.pageX,top:event.pageY};var wnd=$('#hp_anywhere_wnd');var wnd_coord={top:wnd.offset().top,right:wnd.offset().left+wnd.width(),bottom:wnd.offset().top+wnd.height(),left:wnd.offset().left};if(!(coord.left>=wnd_coord.left&&coord.left<=wnd_coord.right&&coord.top>=wnd_coord.top&&coord.top<=wnd_coord.bottom)){this.timeoutHide();}};TwitterAnywhere.anywhereWnd.onClick=function(obj,user,cb,destroy_friendship,event){var is_twitter=HuffPrefs.get('twitter');if(is_twitter){if(!destroy_friendship)
this.createFriendship(event,user,cb);else
this.destroyFriendship(event,user,cb);}else{linkSocialAccount.checkLoginStatus('twitter');}};TwitterAnywhere.anywhereWnd.setPosition=function(){var coordinates=$(this.target).offset();var x=coordinates.left+($(this.target).width()/2-(20+19/2));var y=coordinates.top-$(this.wnd).height()+3;$(this.wnd).offset({left:x,top:y});};TwitterAnywhere.anywhereWnd.setContent=function(user,tid,custom_params){var parameters={author_nickname:''};extend(parameters,custom_params);if(AnywhereCache.hasOwnProperty(user)){this.content.removeClass('smallwidth');this.content.html(AnywhereCache[user]);if(this.followTo.hasOwnProperty(user)){$.proxy(this.showUnfollow(user),this);}else{$.proxy(this.showFollow(user),this);}
$.proxy(this.setMoreEvent(),this);return;}else{showWndLoader();}
var tid_query='';if(tid>0)tid_query='&tid='+tid;var url;if(this.version==2){url=Constant.ANYWHERE_URL_V2+'?user='+user+tid_query;}else{url=Constant.ANYWHERE_URL+'?user='+user;}
url+='&'+'author_nickname='+parameters.author_nickname;this.request=$.ajax({context:this,url:url,dataType:'json',success:function(data,textStatus){if(data.status=='error'){this.showError(_('Sorry, this does not appear to be an active Twitter account'));$.proxy(this.setPosition(),this);return;}
this.content.removeClass('smallwidth');this.content.html(data.userinfo_html);this.setMoreEvent();if(data.friendship=='true'){this.showUnfollow(user);this.followTo[user]=1;}else{this.showFollow(user);}
AnywhereCache[user]=data.userinfo_html;$.proxy(this.setPosition(),this);}});};TwitterAnywhere.anywhereWnd.setMoreEvent=function(){var aw_more=$('#aw_more');if(aw_more.length==0){return;}
aw_more.click($.proxy(function(event){$(event.target).remove();$('#aw_more_details').removeClass('force_hidden');$.proxy(this.setPosition(),this);},this));};TwitterAnywhere.anywhereWnd.createFriendship=function(e,user,cb){user=user?user:e.data['user'];var target=e.target;var author_nickname=$(target).attr('author_nickname')||'';var query='id='+user+'&action=create'+'&author_nickname='+author_nickname;$.ajax({url:Constant.FRIENDSHIP_URL,method:'post',data:query,context:this,success:cb?cb:this.createFriendshipCallback(user)});};TwitterAnywhere.anywhereWnd.createFriendshipCallback=function(user){$.proxy(this.showUnfollow(user),this);this.followTo[user]=1;$.proxy(this.setPosition(),this);};TwitterAnywhere.anywhereWnd.destroyFriendship=function(e,user,cb){user=user?user:e.data['user'];var query='id='+user+'&action=destroy';$.ajax({url:Constant.FRIENDSHIP_URL,method:'post',data:query,context:this,success:cb?cb:this.destroyFriendshipCallback(user)});};TwitterAnywhere.anywhereWnd.destroyFriendshipCallback=function(user){$.proxy(this.showFollow(user),this);if(this.followTo.hasOwnProperty(user)){delete this.followTo[user];}
$.proxy(this.setPosition(),this);};TwitterAnywhere.anywhereWnd.showFollow=function(user){var follow_elem=$('#aw_follow');var unfollow_elem=$('#aw_unfollow');follow_elem.unbind();var is_twitter=HuffPrefs.get('twitter');if(is_twitter){follow_elem.click({'user':user},$.proxy(this.createFriendship,this));}else{follow_elem.click(function(){linkSocialAccount.checkLoginStatus('twitter');});}
if(!unfollow_elem.hasClass('force_hidden')){unfollow_elem.addClass('force_hidden');}
follow_elem.removeClass('force_hidden');};TwitterAnywhere.anywhereWnd.showUnfollow=function(user){var follow_elem=$('#aw_follow');var unfollow_elem=$('#aw_unfollow');unfollow_elem.unbind();var is_twitter=HuffPrefs.get('twitter');if(is_twitter){unfollow_elem.click({'user':user},$.proxy(this.destroyFriendship,this));}else{unfollow_elem.click(function(){linkSocialAccount.checkLoginStatus('twitter');});}
if(!follow_elem.hasClass('force_hidden')){follow_elem.addClass('force_hidden');}
unfollow_elem.removeClass('force_hidden');};TwitterAnywhere.anywhereWnd.showError=function(err_text){this.content.removeClass('smallwidth');this.content.html('<div style="padding:3px;">'+err_text+'</div>');};function showWndLoader(){TwitterAnywhere.anywhereWnd.content.addClass('smallwidth');TwitterAnywhere.anywhereWnd.content.html('<div class="aw_loader">'+_('Loading...')+'</div>');};function isCallInProgress(conn){if(conn){return conn.readyState!==4&&conn.readyState!==0;}
else{return false;}}
window.TwitterAnywhere=TwitterAnywhere;})(jQuery);
var Constant={GET_LISTS_TWEETS_URL:'/ajax/twitter/list_tweets.php',GET_TWEETS_URL:'http://search.twitter.com/search.json',GET_USER_TIMELINES:'/twitter/get_user_timelines.php',FRIENDSHIP_EXISTS_URL:'/twitter/friendship_exists.php',RETWEET_TWEET_URL:'/twitter/retweet_tweet.php',FOLLOW_LIST_URL:'/twitter/ajax_follow_tlist.php',FRIENDSHIP_URL:'/twitter/friendship.php',PUBLIC_INFO_URL:'/twitter/public_info.php',IS_USER_LISTS_SUBSCRIBER_URL:'/twitter/is_user_lists_subscriber.php'};var HPTwitter={lists:[],getListsTweets:function(full_names,params,callback,context,additional_query){if(!full_names||!full_names.length){return;}
if(typeof(full_names)=='string'){full_names=[full_names];}
if(!params){params={};}
var full_names_len=full_names.length;for(var i=full_names_len;i--;){if(!params[full_names[i]]){params[full_names[i]]={};}
params[full_names[i]].since_id=params[full_names[i]].since_id||1;}
var query='lists='+JSON.stringify(params);if(additional_query){query+=additional_query;}
this._sendRequest('GET',Constant.GET_LISTS_TWEETS_URL,query,callback,context);},followList:function(full_name,callback,arg,context){this._sendFollowUnfollowRequest(true,full_name,callback,arg,context);},unfollowList:function(full_name,callback,arg,context){this._sendFollowUnfollowRequest(false,full_name,callback,arg,context);},getTweets:function(search_phrase,params){search_phrase=search_phrase||'';var query_fields=[];if(params){if(params.lang){query_fields.push('lang='+params.lang);}
if(params.callback){query_fields.push('callback='+params.callback);}
if(params.locale){query_fields.push('locale='+params.locale);}
if(params.rpp){query_fields.push('rpp='+params.rpp);}
if(params.page){query_fields.push('page='+params.page);}
if(params.since_id){query_fields.push('since_id='+params.since_id);}
if(params.geocode){query_fields.push('geocode='+params.geocode);}
if(params.show_user){query_fields.push('show_user='+params.show_user);}}
var query='?q='+escape(search_phrase);if(query_fields.length){query+='&'+query_fields.join('&');}
var url=Constant.GET_TWEETS_URL+query;HuffPoUtil.loadAndRun(url);},retweetTweet:function(tweet_id,callback_ok,callback_fail){if(!tweet_id){callback_fail();return false;}
var query='tweet_id='+tweet_id;C.asyncRequest('POST',Constant.RETWEET_TWEET_URL,{success:callback_ok,failure:callback_fail},query);return true;},favorTweet:function(tweet_id,callback_ok,callback_fail){if(!tweet_id){callback_fail();return false;}},getUserTimelines:function(screen_name,chunk_size,callback,context){screen_name=screen_name||'';chunk_size=parseInt(chunk_size,10);var ch_size=isNaN(chunk_size)?0:chunk_size;var query='screen_name='+screen_name+'&chunk_size='+ch_size;this._sendRequest('GET',Constant.GET_USER_TIMELINES,query,callback,context);},_sendFollowUnfollowRequest:function(do_follow,full_name,callback,arg,context){var query='list='+full_name+'&action='+(do_follow?'post':'delete');this._sendRequest('GET',Constant.FOLLOW_LIST_URL,query,callback,context,arg,false);},getFollowStatus:function(user_b,callback,context){if(!user_b){return;}
var query='user_b='+user_b;this._sendRequest('GET',Constant.FRIENDSHIP_EXISTS_URL,query,callback,context,undefined,false);},createFriendship:function(screen_name,callback,context,arg){if(!screen_name){return;}
var query='id='+screen_name+'&action=create';this._sendRequest('POST',Constant.FRIENDSHIP_URL,query,callback,context,arg);},destroyFriendship:function(screen_name,callback,context,arg){if(!screen_name){return;}
var query='id='+screen_name+'&action=destroy';this._sendRequest('POST',Constant.FRIENDSHIP_URL,query,callback,context,arg);},getPublicInfo:function(screen_name,callback,context,arg){if(!screen_name){return;}
var query='id='+screen_name;this._sendRequest('GET',Constant.PUBLIC_INFO_URL,query,callback,context,arg);},isUserListsSubscriber:function(lists,callback,context){if(!lists){return;}
if(!YAHOO.lang.isArray(lists)){lists=[lists];}
var query='lists='+JSON.stringify(lists);this._sendRequest('POST',Constant.IS_USER_LISTS_SUBSCRIBER_URL,query,callback,context,undefined,false);},_sendRequest:function(req_type,url,query,callback,context,arg,need_caching){if(!req_type){req_type=req_type.toUpperCase();}
var ctx=context||this;var postData;var args={success:function(o){var cb_func=o.argument[0];var user_arg=o.argument[1];var args=[o.responseText];if(user_arg){args.push(user_arg);}
if(typeof(cb_func)==='function'){cb_func.apply(ctx,args);}},argument:[callback,arg],scope:ctx};if(req_type=='POST'){postData=query;}else if(req_type=='GET'){url=url+'?'+query;if(need_caching===false||need_caching===true){args.cache=need_caching;}}
C.asyncRequest(req_type,url,args,postData);}};HPTwitter.Widgets={};(function(h,$){h.Widgets.activateFollowButton=function(cfg){var container=$('#'+cfg.node_id+' .container');var frame=$('#frame-'+cfg.node_id);frame.html('<iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/follow_button.html?'+cfg.query+'" '+cfg.style+'></iframe>');frame.find('iframe').bind('load',function(){$(this).parent().removeClass('hidden');container.remove();});};(function(target){if(window.__twitterIntentHandler)return;var intentRegex=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,windowOptions='scrollbars=yes,resizable=yes,toolbar=no,location=yes',width=550,height=520,winHeight=screen.height,winWidth=screen.width;var handleIntent=function(e){var target=$(e.target),m,left,top;while(target.get(0)&&target.get(0).nodeName.toLowerCase()!=='a'){target=target.parent();}
if(target.get(0)&&target.get(0).nodeName.toLowerCase()==='a'&&target.attr('href')!==undefined){m=target.attr('href').match(intentRegex);if(m){left=Math.round((winWidth/2)-(width/2));top=0;if(winHeight>height){top=Math.round((winHeight/2)-(height/2));}
window.open(target.attr('href'),'intent',windowOptions
+',width='+width
+',height='+height
+',left='+left
+',top='+top);e.preventDefault();}}};target.click(handleIntent);window.__twitterIntentHandler=true;})($(document));})(HPTwitter,jQuery);
function AddSiteMode()
{window.SiteMode={buttons_to_names:{},UPDATE_ICON_FRAMES:3,notification_showing:false,simulateUpdate:function()
{Refresh.loadingStartUI();Refresh.update('news_col_1.html'+"?45435"+'&vertical='+Refresh.vertical+(HPAds.doubleclick?'&doubleclick='+escape(HPAds.doubleclick):''));},verticalIsPinned:function()
{if(typeof HPConfig=='undefined')
return false;if(!window.sessionStorage.pinMode)
window.sessionStorage.pinMode=HPConfig.current_vertical_name;if(window.sessionStorage.pinMode==HPConfig.current_vertical_name)
return true;return false;},init:function()
{try
{if(window.external.msIsSiteMode())
{var firstrun=window.external.msIsSiteModeFirstRun(false);if(firstrun)
{var ls=window.localStorage;var type=ls.siteModePromoType||'SiteModeC';ls.removeItem('siteModePromoType');var action='NA';if(firstrun==1)
{action='Drag-drop';}
else if(firstrun==2)
{action='Shortcut Icon';}
HPTrack.trackEvent('Sitemode',action,'Via promo '+type);}
E.addListener(window,'focus',this.replayUpdate,this);E.addListener(window,'focus',this.hideNotification,this);this.updateButtons();if(!this.verticalIsPinned())
return;var list_items=[];var big_news=Dom.getElementsByClassName('big_news_item','a','topnav_big_news_module');for(var i=0,len=big_news.length;i<len;i++)
{var text=big_news[i].innerHTML||'';var match=big_news[i].className.match(/bn_v_([\w\-_]+)/);var attrs={text:text,href:big_news[i].href};if(match&&match.length>1)
attrs.vert=match[1];if(text)
list_items.push(attrs);}
this.updateJumpList(list_items);}}
catch(error)
{}},modalStyle:function()
{},buttonHandlers:{'twitter':function()
{window.open('http://twitter.com/share?url='+encodeURIComponent(window.location),'twitter_share',"width=500,height=350");},'facebook':function()
{window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(window.location),'facebook_share',"width=500,height=350");}},updateButtons:function()
{var fb_button=window.external.msSiteModeAddThumbBarButton('/images/sitemode/facebook.ico','Facebook');var tw_button=window.external.msSiteModeAddThumbBarButton('/images/sitemode/twitter.ico','Twitter');this.buttons_to_names[fb_button]='facebook';this.buttons_to_names[tw_button]='twitter';function onButtonClicked(btn)
{var IE=SiteMode;var id=btn.buttonID;var name=IE.buttons_to_names[id]||false;if(!name)
return;IE.buttonHandlers[name]();}
if(document.addEventListener)
document.addEventListener('msthumbnailclick',onButtonClicked,false);else if(document.attachEvent)
document.attachEvent('onmsthumbnailclick',onButtonClicked);window.external.msSiteModeShowThumbBar();},updateJumpList:function(list)
{if(list&&list.length)
{var now=new Date();window.external.msSiteModeCreateJumplist('Big News - '+(parseInt(now.getMonth())+1)+'/'+now.getDate()+'/'+now.getFullYear());for(var i=list.length-1;i>=0;i--)
{var favicon='/images/sitemode/verts/'+(list[i].vert||'homepage')+'.ico';window.external.msSiteModeAddJumpListItem(list[i].text,list[i].href,favicon);}
window.external.msSiteModeShowJumplist();}
else
{window.external.msSiteModeClearJumplist();}},notifyUser:function(params)
{try
{if(window.external.msIsSiteMode())
{var update="New headlines!";if(params.is_splash)
update="New top story!";SiteMode.animator=window.setInterval(function()
{SiteMode.cycleNotification(update);},500);this.notification_showing=true;}}
catch(exception)
{}},cycleNotification:function(tooltip)
{var IE=SiteMode;if(!IE.icon_index||IE.icon_index==IE.UPDATE_ICON_FRAMES)
IE.icon_index=1;else
IE.icon_index++;window.external.msSiteModeSetIconOverlay('/images/sitemode/update'+IE.icon_index+'.ico',tooltip);},hideNotification:function()
{try
{if(window.external.msIsSiteMode())
{if(SiteMode.animator)
window.clearInterval(SiteMode.animator);window.external.msSiteModeClearIconOverlay();}}
catch(exception)
{}},replayUpdate:function()
{if(!(window.Refresh&&Refresh.last_block))
return;Refresh.animateBlock(Refresh.last_block);HPUtil.ScrollTo(Refresh.last_block);Refresh.last_block=false;}};}
try
{if(window.external.msIsSiteMode())
{AddSiteMode();}}
catch(e)
{}
jQuery(document).ready(function($){$('.search-huffpost form').submit(function(){if($('.search-huffpost form .inp-text').val()=='Search the Huffington Post'){$('.search-huffpost form .inp-text').focus();return false;}});});
huff.on('topnav/load-start',function(el){el.className+=' nav_repositioning';});huff.on('topnav/loaded',function(el){huff.use('jquery','conf','user',function($,c,u){var $topnav=$(el),$nav=$topnav.find('> ul > li'),$hoverTargets=$nav.children('div'),$subnav_list=$topnav.next().find('div.featured ul'),$network_list=$topnav.next().find('ul.subnav_list'),$fNav=$nav.slice(1),navWrapW=$topnav.outerWidth(),navW=navWrapW-$nav.first().outerWidth(),hasLive=($nav.has('li.n_live'))?true:false,hasLastItem=($nav.last().hasClass('n_all_sections'))?true:false,mouseEnterDelay=125,mouseLeaveDelay=500,hoverIntent,hoverIntentTarget,is_ie7=(jQuery.browser.msie&&(jQuery.browser.version<='7.0'))?true:false,delay_menu=150,is_touch=(!!('ontouchstart'in window)?1:0);mouseEnterDelay=HPUtil.getUrlVar('onDelay')||mouseEnterDelay;mouseLeaveDelay=HPUtil.getUrlVar('offDelay')||mouseLeaveDelay;var prepare=function(){if(hasLastItem){navW-=$fNav.last().outerWidth();$fNav=$fNav.slice(0,-1);}
if(hasLive){navW-=$fNav.filter('li.n_live').outerWidth();$fNav=$fNav.not('li.n_live');}
if($nav.parent().outerWidth()>navWrapW){for(var i=1,w=0;i<$nav.length;i++){w+=$nav.eq(i).outerWidth();if(w>navW){$fNav.slice(i-1).remove();break;}}}
else if($nav.length<=6){var iw=Math.floor(navW/$fNav.length);$fNav.css({'min-width':iw+'px','padding-left':0,'padding-right':0});$fNav.slice(0,-1).css({'border-right-width':1,'border-right-style':'solid'});if(is_ie7){$fNav.css({'width':iw+'px'});}}
else if(!is_ie7){var $fNavLinks=$fNav.find('div.relative > a'),$fNavLink=$fNavLinks.first(),fNavEl=$fNavLink.html(),fNavTxt=$fNavLink.text(),minPadding=8;$fNavLink.html('<u>'+fNavTxt+'</u>');var offPadding=Math.floor($fNavLink.find('u').position().left);if(offPadding<minPadding)offPadding=minPadding;$fNavLink.html(fNavEl);var addPaddings=function(offPadding){$fNavLinks.css({'padding-right':offPadding+'px','padding-left':offPadding+'px'});};do{addPaddings(offPadding--);}
while(offPadding>minPadding&&$nav.parent().outerWidth()>navWrapW);}};var reveal=setInterval(function(){var ls=c.get('topnav/font-load-status');if(typeof ls!=='number'||ls>-1){try{prepare();}catch(e){}
$topnav.removeClass('nav_repositioning');clearInterval(reveal);}},100);var menu_fix_width=function(){var w_max,w=0,n,el_w=0;if(hasLastItem){w_max=$nav.parent().width()-$nav.first().width()-$nav.last().width()-2;$nav=$nav.slice(1,-1);}
else{w_max=$nav.parent().width()-$nav.first().width();$nav=$nav.slice(1);}
$nav.each(function(){w+=$(this).width();});n=w/w_max;w=0;$nav.each(function(index){if(index<$nav.length-1){el_w=Math.floor($(this).width()/n);$(this).css('width',el_w);w+=el_w;}else{$(this).css('width',w_max-w);}});};if(is_ie7){$topnav.removeClass('nav_repositioning');menu_fix_width();$nav.first().closest('ul').css({'visibility':'visible'});$nav.last().css({'margin-right':'-1px'});}
if($nav.length>=4){$nav.slice($nav.length/2).find('div.menu').addClass('right_align');}
if(is_touch){$hoverTargets.bind('click',function(evt){var $el=$(this);if(evt.target.parentNode!==this&&!$el.find('a').is(evt.target.parentNode)){return;}
if(!$el.children('.menu').length){return;}
if(!$el.hasClass('hover')){$hoverTargets.removeClass('hover');$el.addClass('hover');evt.preventDefault();}
else if(hasLastItem&&$el.parent().is(':last-child')){$el.removeClass('hover');evt.preventDefault();}});$('body').bind('click',function(evt){var $el=$(this);if($hoverTargets.find($(evt.target)).length===0)
$hoverTargets.removeClass('hover');});}else{var dropdown_timer={show:function(params){var _this=this,delay=params.delay||200;this.clear_timer();hoverIntent=setTimeout(function(){_this.clear_hover();params.el.addClass('hover');},delay);},hide:function(params){var _this=this,delay=params.delay||200;this.clear_timer();if(params.el.hasClass('hover')){hoverIntent=setTimeout(function(){params.el.removeClass('hover');},delay);}
else{hoverIntent=setTimeout(function(){_this.clear_hover();},delay);}},clear_hover:function(){$hoverTargets.each(function(){$(this).removeClass('hover');})},clear_timer:function(){clearTimeout(hoverIntent);}};$hoverTargets.bind({mouseenter:function(event){dropdown_timer.show({el:$(this)});},mouseleave:function(event){dropdown_timer.hide({el:$(this),delay:700});}});}
$nav.find('a').unbind('click').bind('click',function(event){var $topLevelTab=$(this).parent();var isTopLevelTab=is_touch&&$topLevelTab.parent().parent().hasClass('jd_menu');var hasDropdown=is_touch&&isTopLevelTab&&($topLevelTab.children('.menu').length);if(isTopLevelTab&&hasDropdown&&is_touch&&!$topLevelTab.hasClass('hover'))
{return;}
else if(isTopLevelTab&&hasDropdown&&is_touch&&$topLevelTab.hasClass('hover')&&hasLastItem&&$topLevelTab.parent().is(':last-child'))
{return;}
var parentId=$(this).parent().attr("id");if((parentId!=undefined)&&(parentId!=null)&&parentId.indexOf("id_trending")===0)
{var commentsClicked=!$(event.target).is(this);if(commentsClicked)this.href+=$(this).children('.comments').data('anchor');event.target=this;huff.emit('topnavnew_trending/click',event);}
else
{var eventClassName=$(this).parent().parent().attr("class");if((eventClassName!=undefined)&&(eventClassName!=undefined)&&eventClassName==="vertical_list")
{event.target=this;huff.emit('topnavnew_vertical_list/click',event);}
else if((eventClassName!=undefined)&&(eventClassName!=undefined)&&eventClassName==="like_list")
{event.target=this;huff.emit('topnavnew_like_list/click',event);}
else if((eventClassName!=undefined)&&(eventClassName!=undefined)&&eventClassName==="all_sections_section")
{event.target=this;huff.emit('topnavnew_all_sections/click',event);}
else if((eventClassName!=undefined)&&(eventClassName!=undefined)&&eventClassName==="topnav_blogs")
{event.target=this;huff.emit('topnavnew_blogs/click',event);}
else
{event.target=this;huff.emit('topnavnew/click',event);}}});$(".new-topnav_second_row a").unbind("click").bind("click",function(event){event.target=this;huff.emit('topnavnew_subnav/click',event);});$topnav.addClass('topnav_first_row_squre_right');$('#li_local').removeClass('rounded_top_right_4');var $fbs=$('#fb_social'),$tws=$('#tw_social');if(!u.logged){$fbs.addClass('fb_social_btn').removeClass('display_none');$tws.addClass('tw_social_btn').removeClass('display_none');}else{u.pref('facebook','twitter',function(fb,tw){if(!fb&&!tw){$fbs.addClass('fb_social_btn').removeClass('display_none');$tws.addClass('tw_social_btn').removeClass('display_none');}else if(!fb){$('#not_logged_user, #wendybird_user').css('right','125px');$fbs.addClass('fb_social_btn_only').removeClass('display_none');}else if(!tw){$('#not_logged_user, #wendybird_user').css('right','125px');$tws.addClass('tw_social_btn_only').removeClass('display_none');}});}
$fbs.bind('click',function(){huff.emit('topnav/signup','Facebook');return false;});$tws.bind('click',function(){huff.emit('topnav/signup','Twitter');return false;});var subnav_position=function(list,nt){$.each(list.find('li'),function(id,el){if((id!==0)&&($(el).position().left<=12)&&nt.find('li').length){nt.find('li:first-child').remove();return subnav_position(list,nt);}});};$network_list.length&&subnav_position($subnav_list,$network_list);$network_list.css({'visibility':'visible'});});});

/* From: wfe5-ewr : 4163 *//* defa11bfc3889105c201147f1b52c08780 */