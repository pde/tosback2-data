/*1344825595,169775556*/

if (window.CavalryLogger) { CavalryLogger.start_js(["0fo8U"]); }

__d("legacy:placeholder-onsubmit-form-listener",["PlaceholderOnsubmitFormListener"],function(a,b,c,d){b('PlaceholderOnsubmitFormListener');},3);
function NAX2Callout(a){this.parent.construct(this);this.tourMode=a||false;this.modifiedButtons=[];}Class.extend(NAX2Callout,'TourAutoPilot');copyProperties(NAX2Callout.prototype,{handleTransition:function(){if(this.tourComplete)return;this.scrollToTop();if(this.tourMode)this.showContextualBlind($('sideNav'));this.parent.handleTransition();},handleTourComplete:function(){this.scrollToTop();this.restoreContextLinks();this.parent.handleTourComplete();},handleShowDialog:function(a,b){if(b=='status'&&ge('profile_stream_blankstate'))CSS.hide('profile_stream_blankstate');var c=this.overrideContextLinks(a),d=a.getContext();if(this.tourMode)this.showContextualBlind(d,!c);DOMScroll.scrollTo(d,true,true,0);},logAction:function(a,b,c){new AsyncRequest().setURI('/ajax/pages/nax2_callout.php').setData({action:b,step:c,pid:a}).send();},overrideContextLinks:function(a){var b=a.getContext(),c=this.getButtonForOverride(a);if(c){var d=DOM.scry(b,c.tagName);if(d.length>0){var e=d[0],f=DOM.create(c.tagName);this.copyClickHandlers(f,e);DataStore.set(e,'override_original',f);this.modifiedButtons.push(e);this.copyClickHandlers(e,c);}}return !!c;},restoreContextLinks:function(){for(var a=0;a<this.modifiedButtons.length;a++){var b=this.modifiedButtons[a],c=DataStore.get(b,'override_original',false);this.copyClickHandlers(b,c);}this.modifiedButtons=[];},getButtonForOverride:function(a){var b=DataStore.get(a._root,'override');if(b){var c=ge(b);if(c.tagName.toLowerCase()=='label')c=DOM.find(c,'input');return c;}return null;},copyClickHandlers:function(a,b){var c;for(var d in {href:1,onclick:1,ajaxify:1})if((c=b.getAttribute(d))){a.setAttribute(d,c);}else if(a.getAttribute(d))a.removeAttribute(d);},registerStep:function(a,b){a.disableBehavior(LayerDestroyOnHide);this.parent.registerStep(a,b);},scrollToTop:function(){DOMScroll.scrollToTop(true);}});