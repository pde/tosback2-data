window.fbAsyncInit=function(){FB.init({appId:fb_app.id,channelUrl:"//www.miniclip.com/xd_receiver.htm",status:true,cookie:true,xfbml:true});FB.Event.subscribe("edge.create",function(a){if(a=="http://www.facebook.com/miniclip"){jQuery.ajax({type:"POST",url:"/games/ajax/likefacebookpage/"})}});FB.Event.subscribe("edge.remove",function(a){if(a=="http://www.facebook.com/miniclip"){jQuery.ajax({type:"POST",url:"/games/ajax/unlikefacebookpage/"})}})};(function(b){var a,c="facebook-jssdk";if(b.getElementById(c)){return}a=b.createElement("script");a.id=c;a.async=true;a.src="//connect.facebook.net/en_US/all.js";b.getElementsByTagName("head")[0].appendChild(a)}(document));$(function(){$("#fb-login, #fb-login-button").click(function(){fb_login(false)})});function fb_login(a){FB.login(function(b){if(b.authResponse){if(b.status=="connected"){if(a==false||a=="false"){notifyFlash(b.authResponse.accessToken);$.ajax({type:"POST",url:"/games/ajax/facebooklogin/",data:{access_token:b.authResponse.accessToken},dataType:"json",success:function(c){if(c.success==true){if(c.msg!=""){window.location="http://"+window.location.hostname+c.msg}window.location.reload()}}})}else{notifyFlash(b.authResponse.accessToken)}}}},{scope:"email,user_birthday,publish_actions"})}function notifyFlash(b){var a=null;if(typeof(jQuery(".loginBox embed, .loginBox object")[0])!="undefined"&&typeof(jQuery(".loginBox embed, .loginBox object")[0].notifyFacebookConnected)!="undefined"){a=jQuery(".loginBox embed, .loginBox object")[0]}else{if(typeof(jQuery("#leagueInfo embed, #leagueInfo object")[0])!="undefined"&&typeof(jQuery("#leagueInfo embed, #leagueInfo object")[0].notifyFacebookConnected)!="undefined"){a=jQuery("#leagueInfo embed, #leagueInfo object")[0]}else{if(typeof(jQuery("#flashCommsWrapper object, #flashCommsWrapper embed")[0])!="undefined"&&typeof(jQuery("#flashCommsWrapper object, #flashCommsWrapper embed")[0].notifyFacebookConnected)!="undefined"){a=jQuery("#flashCommsWrapper object, #flashCommsWrapper embed")[0]}}}if(a!=null){a.notifyFacebookConnected(b)}}function sendEvent(d,e){return true;var a=document.getElementsByTagName("link");for(var c=0;c<a.length;c++){if(a[c].getAttribute("rel")==="canonical"){canonical=a[c].getAttribute("href")}}var b;switch(d){case"score":b="/me/"+fb_app.namespace+":score?game="+canonical;break;case"play":b="/me/"+fb_app.namespace+":play?game="+canonical+"&expires_in=600";break;case"achieve":b="/me/"+fb_app.namespace+":achieve?award=http://apps.fb.miniclip.com/open-graph/award/id/"+e+"/app_id/"+fb_app.id;break;case"buy":b="/me/"+fb_app.namespace+":buy?game="+canonical;break}if(fb_app.id==111411968896241&&game_data.is_visible==1){FB.api(b,"post",function(f){if(!f||f.error){return false}else{return true}})}};