/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,e,b){var c="hashchange",h=document,f,g=$.event.special,i=h.documentMode,d="on"+c in e&&(i===b||i>7);function a(j){j=j||location.href;return"#"+j.replace(/^[^#]*#?(.*)$/,"$1")}$.fn[c]=function(j){return j?this.bind(c,j):this.trigger(c)};$.fn[c].delay=50;g[c]=$.extend(g[c],{setup:function(){if(d){return false}$(f.start)},teardown:function(){if(d){return false}$(f.stop)}});f=(function(){var j={},p,m=a(),k=function(q){return q},l=k,o=k;j.start=function(){p||n()};j.stop=function(){p&&clearTimeout(p);p=b};function n(){var r=a(),q=o(m);if(r!==m){l(m=r,q);$(e).trigger(c)}else{if(q!==m){location.href=location.href.replace(/#.*/,"")+q}}p=setTimeout(n,$.fn[c].delay)}$.browser.msie&&!d&&(function(){var q,r;j.start=function(){if(!q){r=$.fn[c].src;r=r&&r+a();q=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){r||l(a());n()}).attr("src",r||"javascript:0").insertAfter("body")[0].contentWindow;h.onpropertychange=function(){try{if(event.propertyName==="title"){q.document.title=h.title}}catch(s){}}}};j.stop=k;o=function(){return a(q.location.href)};l=function(v,s){var u=q.document,t=$.fn[c].domain;if(v!==s){u.title=h.title;u.open();t&&u.write('<script>document.domain="'+t+'"<\/script>');u.close();q.location.hash=v}}})();return j})()})(jQuery,this);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(d){var b=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks){for(var a=b.length;a;){d.event.fixHooks[b[--a]]=d.event.mouseHooks}}d.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=b.length;e;){this.addEventListener(b[--e],c,false)}}else{this.onmousewheel=c}},teardown:function(){if(this.removeEventListener){for(var e=b.length;e;){this.removeEventListener(b[--e],c,false)}}else{this.onmousewheel=null}}};d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function c(j){var h=j||window.event,g=[].slice.call(arguments,1),k=0,i=true,f=0,e=0;j=d.event.fix(h);j.type="mousewheel";if(h.wheelDelta){k=h.wheelDelta/120}if(h.detail){k=-h.detail/3}e=k;if(h.axis!==undefined&&h.axis===h.HORIZONTAL_AXIS){e=0;f=-1*k}if(h.wheelDeltaY!==undefined){e=h.wheelDeltaY/120}if(h.wheelDeltaX!==undefined){f=-1*h.wheelDeltaX/120}g.unshift(j,k,f,e);return(d.event.dispatch||d.event.handle).apply(this,g)}})(jQuery);(function(){var a=jQuery.event.special,c="D"+(+new Date()),b="D"+(+new Date()+1);a.resizeStart={setup:function(){var e,d=function(f){f.type="resizeStart";jQuery.event.handle.apply(_self,_args);jQuery(this).unbind("resize",jQuery(this).data(c))};jQuery(this).bind("resize",d).data(c,d)},teardown:function(){jQuery(this).unbind("resize",jQuery(this).data(c))}};a.resizeStop={latency:200,setup:function(){var e,d=function(h){var f=this,g=arguments;if(e){clearTimeout(e)}e=setTimeout(function(){e=null;h.type="resizeStop";jQuery.event.handle.apply(f,g)},a.resizeStop.latency)};jQuery(this).bind("resize",d).data(b,d)},teardown:function(){jQuery(this).unbind("resize",jQuery(this).data(b))}}})();(function(){var a=jQuery.event.special,c="D"+(+new Date()),b="D"+(+new Date()+1);a.scrollStart={setup:function(){var e,d=function(f){f.type="scrollStart";jQuery.event.handle.apply(_self,_args);jQuery(this).unbind("scroll",jQuery(this).data(c))};jQuery(this).bind("scroll",d).data(c,d)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(c))}};a.scrollStop={latency:200,setup:function(){var e,d=function(h){var f=this,g=arguments;if(e){clearTimeout(e)}e=setTimeout(function(){e=null;h.type="scrollStop";jQuery.event.handle.apply(f,g)},a.scrollStop.latency)};jQuery(this).bind("scroll",d).data(b,d)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(b))}}})();(function(a){a.fn.cleanWhitespace=function(){this.contents().filter(function(){if(this.nodeType!=3){a(this).cleanWhitespace();return false}else{return !/\S/.test(this.nodeValue)}}).remove();return this}})(jQuery);
/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,p){var i,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,c,l,v,b=$.bbq=$.bbq||{},q,u,j,e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,h,C={};function E(F){return typeof F==="string"}function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(H,M,F,I,G){var O,L,K,N,J;if(I!==i){K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);J=K[3]||"";if(G===2&&E(I)){L=I.replace(H?w:x,"")}else{N=l(K[2]);I=E(I)?l[H?D:A](I):I;L=G===2?I:G===1?$.extend({},I,N):$.extend({},N,I);L=a(L);if(H){L=L.replace(h,r)}}O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J}else{O=M(F!==i?F:p[g][k])}return O}a[A]=B(f,0,o);a[D]=c=B(f,1,n);c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")};c.noEscape(",/");$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};$.each(I.replace(/\+/g," ").split("&"),function(L,Q){var K=Q.split("="),P=r(K[0]),J,O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])){R[N]=R[N].replace(/\]$/,"");R=R.shift().split("[").concat(R);N=R.length-1}else{N=0}if(K.length===2){J=r(K[1]);if(F){J=J&&!isNaN(J)?+J:J==="undefined"?i:G[J]!==i?G[J]:J}if(N){for(;M<=N;M++){P=R[M]===""?O.length:R[M];O=O[P]=M<N?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J}}else{if($.isArray(H[P])){H[P].push(J)}else{if(H[P]!==i){H[P]=[H[P],J]}else{H[P]=J}}}}else{if(P){H[P]=F?i:""}}});return H};function z(H,F,G){if(F===i||typeof F==="boolean"){G=F;F=a[H?D:A]()}else{F=E(F)?F.replace(H?w:x,""):F}return l(F,G)}l[A]=B(z,0);l[D]=v=B(z,1);$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t});j=$[y];function s(I,G,H,F){if(!E(H)&&typeof H!=="object"){F=H;H=G;G=i}return this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})}$.fn[A]=B(s,A);$.fn[D]=B(s,D);b.pushState=q=function(I,F){if(E(I)&&/^#/.test(I)&&F===i){F=2}var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")};b.getState=u=function(F,G){return F===i||typeof F==="boolean"?v(F):v(G)[F]};b.removeState=function(F){var G={};if(F!==i){G=u();$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})}q(G,2)};e[d]=$.extend(e[d],{add:function(F){var H;function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||typeof K==="boolean"?l(I,K):l(I,L)[K]};H.apply(this,arguments)}if($.isFunction(F)){H=F;return G}else{H=F.handler;F.handler=G}}})})(jQuery,this);
/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,i,b){var j,k=$.event.special,c="location",d="hashchange",l="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in i&&!h;function a(m){m=m||i[c][l];return m.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;k[d]=$.extend(k[d],{setup:function(){if(e){return false}$(j.start)},teardown:function(){if(e){return false}$(j.stop)}});j=(function(){var m={},r,n,o,q;function p(){o=q=function(s){return s};if(h){n=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;q=function(){return a(n.document[c][l])};o=function(u,s){if(u!==s){var t=n.document;t.open().close();t[c].hash="#"+u}};o(a())}}m.start=function(){if(r){return}var t=a();o||p();(function s(){var v=a(),u=q(t);if(v!==t){o(t=v,u);$(i).trigger(d)}else{if(u!==t){i[c][l]=i[c][l].replace(/#.*/,"")+"#"+u}}r=setTimeout(s,$[d+"Delay"])})()};m.stop=function(){if(!n){r&&clearTimeout(r);r=0}};return m})()})(jQuery,this);(function(b){function a(d,f,g){var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c=e[Modernizr.prefixed("transition")];d.each(function(i,j){function h(k){j.removeEventListener(c,h);g(j)}j.addEventListener(c,h)})}b.fn.addClassWithAnimationCallback=function(c,d){if(typeof Modernizr=="undefined"||!Modernizr.csstransitions){this.addClass(c);this.each(function(e,f){d(f)});return this}a(this,c,d);this.addClass(c);return this};b.fn.removeClassWithAnimationCallback=function(c,d){if(typeof Modernizr=="undefined"||!Modernizr.csstransitions){this.removeClass(c);this.each(function(e,f){d(f)});return this}a(this,c,d);this.removeClass(c);return this}})(jQuery);
/*!
 * jQuery Cookie Plugin
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(a){a.cookie=function(g,f,k){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(f))||f===null||f===undefined)){k=a.extend({},k);if(f===null||f===undefined){k.expires=-1}if(typeof k.expires==="number"){var h=k.expires,j=k.expires=new Date();j.setDate(j.getDate()+h)}f=String(f);return(document.cookie=[encodeURIComponent(g),"=",k.raw?f:encodeURIComponent(f),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join(""))}k=f||{};var b=k.raw?function(i){return i}:decodeURIComponent;var c=document.cookie.split("; ");for(var e=0,d;d=c[e]&&c[e].split("=");e++){if(b(d[0])===g){return b(d[1]||"")}}return null}})(jQuery);(function($j){$j.fn.greatToggler=function(method){var $obj,toggleData;var methods={init:function(config){return this.each(function(){$obj=$j(this);toggleData=$obj.data("great-toggler");if(typeof(toggleData)=="object"){if(typeof(toggleData.custom)=="undefined"){$obj.bind("click",helpers.hideAndToggle)}else{eval("$obj.bind('click',custom."+toggleData.custom+");")}}else{$obj.bind("click",helpers.justToggle)}})}};var helpers={justToggle:function(){$j(toggleData).toggle();$obj.toggleClass("toggled");return false},hideAndToggle:function(){$j(toggleData.hide).hide();$j(toggleData.show).show();return false}};var custom={toggleAndRestHeroOverlay:function(){$overlayToOpen=$j(toggleData.hero);$activeOverlay=$j(".hero-overlay:visible");$activeOverlay.trigger("resetSlider").hide();if($activeOverlay.attr("id")!==$overlayToOpen.attr("id")){$overlayToOpen.show()}$j(this).toggleClass("open");return false},speedReadingSlide:function(){$obj.hide();$j(toggleData.swapMe).show();$j(toggleData.slideMe).slideToggle(400);return false}};if(methods[method]&&method.toLowerCase()!="init"){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error('Method "'+method+'" does not exist in the Great Toggler plugin!')}}}})(jQuery);(function(b,a){var c=b(a);b.fn.lazyload=function(d){var f=this;var g;var e={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:a,data_attribute:"original",skip_invisible:true,appear:null,load:null};function h(){var i=0;f.each(function(){var j=b(this);if(e.skip_invisible&&!j.is(":visible")){return}if(b.abovethetop(this,e)||b.leftofbegin(this,e)){}else{if(!b.belowthefold(this,e)&&!b.rightoffold(this,e)){j.trigger("lazyload:appear")}else{if(++i>e.failure_limit){return false}}}})}if(d){if(undefined!==d.failurelimit){d.failure_limit=d.failurelimit;delete d.failurelimit}if(undefined!==d.effectspeed){d.effect_speed=d.effectspeed;delete d.effectspeed}b.extend(e,d)}g=(e.container===undefined||e.container===a)?c:b(e.container);if(0===e.event.indexOf("scroll")){g.bind(e.event,function(i){return h()})}this.each(function(){var i=this;var j=b(i);i.loaded=false;j.one("lazyload:appear",function(){if(!this.loaded){if(e.appear){var l=f.length;e.appear.call(i,l,e)}if(this.tagName==="IMG"){b("<img />").bind("load",function(){j.hide().attr("src",j.data(e.data_attribute))[e.effect](e.effect_speed);i.loaded=true;var m=b.grep(f,function(o){return !o.loaded});f=b(m);if(e.load){var n=f.length;e.load.call(i,n,e)}}).attr("src",j.data(e.data_attribute))}else{j.css("background-image","url("+j.data(e.data_attribute)+")")[e.effect](e.effect_speed);i.loaded=true;var k=b.grep(f,function(m){return !m.loaded});f=b(k);if(e.load){var l=f.length;e.load.call(i,l,e)}}}});if(0!==e.event.indexOf("scroll")){j.bind(e.event,function(k){if(!i.loaded){j.trigger("lazyload:appear")}})}});c.bind("resize",function(i){h()});h();return this};b.belowthefold=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.height()+c.scrollTop()}else{d=b(f.container).offset().top+b(f.container).height()}return d<=b(e).offset().top-f.threshold};b.rightoffold=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.width()+c.scrollLeft()}else{d=b(f.container).offset().left+b(f.container).width()}return d<=b(e).offset().left-f.threshold};b.abovethetop=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.scrollTop()}else{d=b(f.container).offset().top}return d>=b(e).offset().top+f.threshold+b(e).height()};b.leftofbegin=function(e,f){var d;if(f.container===undefined||f.container===a){d=c.scrollLeft()}else{d=b(f.container).offset().left}return d>=b(e).offset().left+f.threshold+b(e).width()};b.inviewport=function(d,e){return !b.rightofscreen(d,e)&&!b.leftofscreen(d,e)&&!b.belowthefold(d,e)&&!b.abovethetop(d,e)};b.extend(b.expr[":"],{"below-the-fold":function(d){return b.belowthefold(d,{threshold:0})},"above-the-top":function(d){return !b.belowthefold(d,{threshold:0})},"right-of-screen":function(d){return b.rightoffold(d,{threshold:0})},"left-of-screen":function(d){return !b.rightoffold(d,{threshold:0})},"in-viewport":function(d){return !b.inviewport(d,{threshold:0})},"above-the-fold":function(d){return !b.belowthefold(d,{threshold:0})},"right-of-fold":function(d){return b.rightoffold(d,{threshold:0})},"left-of-fold":function(d){return !b.rightoffold(d,{threshold:0})}})})(jQuery,window);(function(b){function a(d){var e=b(b(d.target).find("option").get(d.target.selectedIndex)).data("listItem"),c=e.children();if(c.length>0){c[0].click()}else{e[0].click()}}b.fn.listToSelect=function(c){var d=c||{};this.each(function(f,i){var g=b(i),h=g.find("li"),e=b("<select />");h.each(function(j,n){var k=b(n),m=b("<option>"+k.text()+"</option>"),l=k.is(".ui-state-selected, .ui-state-active");m.data("listItem",k);if(l){m.attr("selected","selected")}e.append(m)});e.change(a);g.append(e)});return this}})(jQuery);(function(b){b.fn.noUiSlider=function(a,n){function l(d){var c=new Array;if(d.find(".noUi_handle.noUi_lowerHandle").length){c[0]=parseInt(d.find(".noUi_handle.noUi_lowerHandle").css("left"));if(isNaN(c[0])){c[0]=0}}else{c[0]=0}if(d.find(".noUi_handle.noUi_upperHandle").length){c[1]=parseInt(d.css("width"))-parseInt(d.find(".noUi_handle.noUi_upperHandle").css("left"));if(isNaN(c[1])){c[1]="100%"}}else{c[1]=0}d.find(".noUi_midBar").css({left:c[0],right:c[1]})}function k(h,g,r,q){var p=parseInt(h.css("width"));var o=parseInt(r.css("width"));if(!q){q=[0,100]}return p/(q[1]-q[0])*(parseFloat(g)-q[0])-o/2}function j(o,h,t){var s=parseInt(o.css("width"));var r=parseInt(h.css("width"));if(!t){t=[0,100]}var q=h.css("left");if(q=="auto"){q=0}var p=parseInt(q)+r/2;p=p/(s/(t[1]-t[0]));p=p+t[0];return p}var m={bar:true,dontActivate:"",scale:"",startMin:"25",startMax:"75",point:"",saveScale:false,moveStyle:"",setTo:"",change:"",callback:"",knobRelease:"",tracker:"",clickmove:""};var i={init:function(){var c=b('<style title="tempNoUiSlider">.temp-show{position:absolute !important; visibility:hidden !important; display:block !important;}.autoWidth{width:auto !important;}</style>');b("html > head").append(c);return this.each(function(){if(!m.knobRelease&&m.callBack){m.knobRelease=m.callBack}var d=b(this);if(!d.is(":visible")&&d.css("width").indexOf("%")!=-1){b.error("Placing a percentage sized slider in a hidden element will cause trouble!")}var f=parseInt(d.css("width"));b.event.props=b.event.props.join("|").replace("layerX|layerY|","").split("|");b(this).css("position","relative");if(m.dontActivate.toLowerCase()!="lower"){b(this).append('<div class="noUi_handle noUi_lowerHandle"><div class="noUi_sliderKnob"></div></div>')}if(m.bar&&m.bar!="off"){b(this).append('<div class="noUi_midBar"></div>')}if(m.dontActivate.toLowerCase()!="upper"){b(this).append('<div class="noUi_handle noUi_upperHandle"><div class="noUi_sliderKnob"></div></div>')}b(this).data("activated",[d.find(".noUi_handle.noUi_lowerHandle").length,d.find(".noUi_handle.noUi_upperHandle").length]);b(this).children().css("position","absolute");b(this).data("change",n.change);b(this).find(".noUi_midBar").css({left:0,right:0});if(m.scale){b(this).data("scale",m.scale)}var e=b(this).find(".noUi_sliderKnob");e.each(function(){var g=b(this).parent(".noUi_handle");if(g.hasClass("noUi_lowerHandle")&&(m.startMin||m.startMin===0)){if(typeof m.startMin=="string"&&m.startMin.indexOf("%")!=-1){g.css("left",k(d,m.startMin,g))}else{g.css("left",k(d,m.startMin,g,m.scale))}}if(g.hasClass("noUi_upperHandle")&&m.startMax){if(typeof m.startMax=="string"&&m.startMax.indexOf("%")!=-1){g.css("left",k(d,m.startMax,g))}else{g.css("left",k(d,m.startMax,g,m.scale))}}});if(m.bar&&m.bar!="off"){l(d)}e.bind("mousedown.noUiSlider",function(o){o.preventDefault();b("body").bind("selectstart.noUiSlider",function(p){return false});b(this).addClass("noUi_activeHandle");var h=b(this).parent(".noUi_handle");var g=d.data("activated")[0]&&d.data("activated")[1];b(document).bind("mousemove.noUiSlider",function(q){var t=parseInt(h.css("width"));var s=q.pageX-d.offset().left;if(h.hasClass("noUi_lowerHandle")||!g){if(s<-1*(parseInt(h.css("width"))/2)){s=-1*(parseInt(h.css("width"))/2)}if(g){var r=parseInt(h.parent().find(".noUi_upperHandle").css("left"))-t;if(s>r){s=r}}}if(h.hasClass("noUi_upperHandle")||!g){f=parseInt(d.css("width"));var p=f-t/2;if(s>p){s=p}if(g){var r=parseInt(h.parent().find(".noUi_lowerHandle").css("left"))+t;if(s<r){s=r}}}h.css({left:s});if(m.bar&&m.bar!="off"){l(d)}if(typeof n.tracker=="function"){n.tracker.call(this)}});b(document).bind("mouseup.noUiSlider",function(){b(this).unbind("mousemove.noUiSlider");e.removeClass("noUi_activeHandle");b("body").unbind("selectstart.noUiSlider");if(typeof n.knobRelease=="function"){n.knobRelease.call(d)}if(typeof n.change=="function"){n.change.call(d)}b(this).unbind("mouseup.noUiSlider")})});b(this).bind("click.noUiSlider",function(t){var s=t.pageX;var r=b(this).offset().left;if(b(this).data("activated")[0]&&b(this).data("activated")[1]){var q=b(this).children(".noUi_lowerHandle").offset().left;var p=b(this).children(".noUi_upperHandle").offset().left;var o=(q+p)/2;if(s>o){b(this).children(".noUi_upperHandle").css("left",s-r)}else{b(this).children(".noUi_lowerHandle").css("left",s-r)}}else{if(b(this).data("activated")[0]){b(this).children(".noUi_lowerHandle").css("left",s-r)}if(b(this).data("activated")[1]){b(this).children(".noUi_upperHandle").css("left",s-r)}}if(m.bar&&m.bar!="off"){l(d)}if(typeof n.clickmove=="function"){n.clickmove.call(this)}if(typeof n.change=="function"){n.change.call(this)}t.stopPropagation()}).children().not(".noUi_midBar").click(function(g){return false})})},move:function(){var r=b(this);var q=false;if(!m.point){if(b(this).data("activated")[0]&&b(this).data("activated")[1]){q=true}else{if(b(this).data("activated")[0]){m.point=0}if(b(this).data("activated")[1]){m.point=1}}}if(m.saveScale){b(this).data("scale",m.scale)}if(!m.scale){if(!b(this).data("scale")){m.scale=[0,100]}else{m.scale=b(this).data("scale")}}if(typeof m.setTo!="object"){if(m.point=="lower"||m.point==0){m.setTo=[m.setTo,0]}if(m.point=="upper"||m.point==1){m.setTo=[0,m.setTo]}}if(m.point=="lower"||m.point==0||q){var p=b(this).find(".noUi_lowerHandle");var o=k(r,m.setTo[0],p,m.scale);if(m.moveStyle=="animate"){p.animate({left:o},{step:function(){if(m.bar&&m.bar!="off"){l(r)}}})}else{p.css("left",o)}}if(m.point=="upper"||m.point==1||q){var f=b(this).find(".noUi_upperHandle");var e=k(r,m.setTo[1],f,m.scale);if(m.moveStyle=="animate"){f.animate({left:e},{step:function(){if(m.bar&&m.bar!="off"){l(r)}}})}else{f.css("left",e)}}var d=b(this).data("change");if(m.bar&&m.bar!="off"){l(r)}if(typeof d=="function"){d.call(this)}},reset:function(){},getValue:function(){if(!m.point){m.point="array"}if(!m.scale){if(b(this).data("scale")=="undefined"){m.scale=[0,100]}else{m.scale=b(this).data("scale")}}returnA=new Array;if(b(this).data("activated")[0]){returnA.push(j(b(this),b(this).find(".noUi_lowerHandle"),m.scale))}if(b(this).data("activated")[1]){returnA.push(j(b(this),b(this).find(".noUi_upperHandle"),m.scale))}if(m.point=="lower"||m.point==0){return returnA[0]}if(m.point=="upper"||m.point==1){return returnA[1]}if(m.point=="array"){return returnA}}};var n=b.extend(m,n);if(i[a]){return i[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof a==="object"||!a){return i.init.apply(this,arguments)}else{b.error("Method "+a+" does not exist on jQuery.noUiSlider")}}}})(jQuery);
/*! http://mths.be/placeholder v2.0.7 by @mathias */
(function(r,p,n){var w="placeholder" in p.createElement("input"),t="placeholder" in p.createElement("textarea"),o=n.fn,u=n.valHooks,l,m;if(w&&t){m=o.placeholder=function(){return this};m.input=m.textarea=true}else{m=o.placeholder=function(){var a=this;a.filter((w?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":v,"blur.placeholder":s}).data("placeholder-enabled",true).trigger("blur.placeholder");return a};m.input=w;m.textarea=t;l={get:function(a){var b=n(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,c){var b=n(a);if(!b.data("placeholder-enabled")){return a.value=c}if(c==""){a.value=c;if(a!=p.activeElement){s.call(a)}}else{if(b.hasClass("placeholder")){v.call(a,true,c)||(a.value=c)}else{a.value=c}}return b}};w||(u.input=l);t||(u.textarea=l);n(function(){n(p).delegate("form","submit.placeholder",function(){var a=n(".placeholder",this).each(v);setTimeout(function(){a.each(s)},10)})});n(r).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})})}function q(a){var b={},c=/^jQuery\d+$/;n.each(a.attributes,function(d,e){if(e.specified&&!c.test(e.name)){b[e.name]=e.value}});return b}function v(a,d){var b=this,c=n(b);if(b.value==c.attr("placeholder")&&c.hasClass("placeholder")){if(c.data("placeholder-password")){c=c.hide().next().show().attr("id",c.removeAttr("id").data("placeholder-id"));if(a===true){return c[0].value=d}c.focus()}else{b.value="";c.removeClass("placeholder");b==p.activeElement&&b.select()}}}function s(){var c,b=this,d=n(b),a=d,e=this.id;if(b.value==""){if(b.type=="password"){if(!d.data("placeholder-textinput")){try{c=d.clone().attr({type:"text"})}catch(f){c=n("<input>").attr(n.extend(q(this),{type:"text"}))}c.removeAttr("name").data({"placeholder-password":true,"placeholder-id":e}).bind("focus.placeholder",v);d.data({"placeholder-textinput":c,"placeholder-id":e}).before(c)}d=d.removeAttr("id").hide().prev().attr("id",e).show()}d.addClass("placeholder");d[0].value=d.attr("placeholder")}else{d.removeClass("placeholder")}}}(this,document,jQuery));
/*!
 * Play GIF v1
 * 
 * by Jesse Young
 *
 * a jQuery plugin to play GIF animations on mouseover (or any other event).
 * 
 * Examples:
 *    $('img[src$=".gif"]').playGIF();             // default is mouseover
 *    $('img[src$=".gif"]').playGIF({on:'click'}); // play animation on click
 */
var PLAYGIF_DISABLE_FLAG;(function(b){b.fn.playGIF=function(d){var e=b.extend({on:"mouseenter",off:"mouseleave",autoResize:false,enable:true,circleColor:"ff0000"},d);if(typeof PLAYGIF_DISABLE_FLAG!=="undefined"){e.enable=!PLAYGIF_DISABLE_FLAG}var c=function(h,g,i){var f=35;h.fillStyle="#"+e.circleColor;h.beginPath();h.arc(g,i,f,0,Math.PI*2,true);h.closePath();h.fill();h.fillStyle="#ffffff";h.font="bold 15px 'Gotham SSm A', sans-serif";h.textAlign="center";h.textBaseline="middle";h.fillText("GIF",g,i)};return this.each(function(){if(e.enable===false){return}var k=b(this);if(!k.is("img")||!/\.gif$/i.test(k.attr("src"))){return true}var i=document.createElement("canvas");var j=i.getContext("2d");var h=new Image();var g=function(m,l){l.on(e.off,function(){f(m,l)});m.replaceWith(l)};var f=function(m,l){m.on(e.on,function(){g(m,l)});l.replaceWith(m)};h.onload=function(){var m=k.width();var l=k.height();i.width=m;i.height=l;j.drawImage(h,0,0,m,l);c(j,Math.floor(m/2),Math.floor(l/2));var n=b(i);if(e.autoResize===true){i.setAttribute("data-src",k.attr("src"));i.setAttribute("class","gif");var o=b('<span class="faux-image">');o.css({"float":k.css("float"),margin:k.css("margin"),padding:k.css("padding"),"max-width":"100%",position:"relative",display:"block",height:i.height});n.css({position:"absolute",top:0,left:0});n=o.append(n)}else{n.css({"float":k.css("float"),margin:k.css("margin"),padding:k.css("padding"),display:k.css("display")})}k.replaceWith(n);n.on(e.on,function(){g(n,k)})};h.src=k.attr("src")})};var a=function(e){var c=e.getContext("2d");var f=b(e).parent();var d=new Image();d.onload=function(){var g=d.width;var i=d.height;var h=f.width();var j=Math.floor(h*i/g);e.width=h;e.height=j;c.drawImage(d,0,0,h,j);f.css("height",j)};d.src=e.getAttribute("data-src")};b(window).bind("resizeStop",function(){b("canvas.gif").each(function(c,d){a(d)})})})(jQuery);(function(a){a.fn.redraw=function(){return a(this).each(function(){var b=document.createTextNode(" ");a(this).append(b);setTimeout(function(){b.parentNode.removeChild(b)},0)})}})(jQuery);(function(a){a.fn.sbnFanPoll=function(c){var d=a.extend({min:0,max:100,step:10},c);var b=function(g){var h=a(".submit-vote",g);if(!h.length){return false}h.click(function(){var j=g.data("id");var i=g.data("value");a.ajax({url:"/fan_con_polls/vote_sbnu",data:{poll_vote:i,id:j},type:"POST"}).done(function(){var k="Thanks for voting. New results will be tallied on "+g.data("ends-on");a(".sbn-slider-wrapper",g).text(k)});return false})};var f=function(h){var g='<div class="sbn-slider-wrapper">';g+='<div class="sbn-slider">';g+='<div class="scale">';g+='<span class="a">0</span><span class="b">50</span><span class="c">100</span>';g+="</div>";g+="</div>";g+='<div><a href="#" class="submit-vote">Vote</a></div>';g+="</div>";h.append(a(g));h.data("value",50);a(".sbn-slider",h).noUiSlider("init",{dontActivate:"lower",scale:[0,100],startMax:[50],change:function(){var i=Math.floor(a(this).noUiSlider("getValue")[0]);h.data("value",i)}})};var e=function(g){f(g);b(g)};return this.each(function(){e(a(this))})}})(jQuery);(function(c){function d(g,f){c('*[data-recommend-entry-id="'+f+'"]').each(function(h,k){var j=c(k);var i=parseInt(j.attr("data-rec-count"));j.find(".recommend-link-count").remove();if(g===true){j.attr("href",j.attr("data-rec-url"));j.removeClass("unrecommend").addClass("recommend");j.find(".recommend-link-action").text("rec");i--}else{j.attr("href",j.attr("data-unrec-url"));j.removeClass("recommend").addClass("unrecommend");j.find(".recommend-link-action").text("unrec");i++}j.attr("data-rec-count",i);if(i>0){j.append('<span class="recommend-link-count">('+i+")</span>")}})}function a(f){d(true,f.data("recommend-entry-id"))}function e(f){d(false,f.data("recommend-entry-id"))}function b(i){i.preventDefault();var h=i.data;var f=h.attr("href");var g=h.hasClass("unrecommend");c.post(f,function(){if(g){a(h)}else{e(h)}})}c.fn.sbnRecommendLink=function(){return this.each(function(){var f=c(this);f.on("click",f,b)})}})(jQuery);(function(b){var a="https:"==document.location.protocol?true:false;var c=a?"https://":"http://";b.fn.sbnSocial=function(e){var g=b.extend({},e);var f={user:{},tweets:[],getUser:function(j,k){var h=c+"api.twitter.com/1/users/show.json?callback=?";var i=this;b.getJSON(h,{screen_name:j},function(l){i.user.screen_name=l.screen_name;i.user.name=l.name;i.user.avatar=a?l.profile_image_url_https:l.profile_image_url;i.user.id=l.id_str}).done(function(){if(k){k()}})},getTweets:function(j,k){var h=c+"api.twitter.com/1/statuses/user_timeline.json?callback=?";var i=this;b.getJSON(h,{count:4,screen_name:j,include_entities:true},function(l){i.tweets=l}).success(function(){b(".s-cnv-social").removeClass("is-unloaded");if(k){k()}})},_intents:function(l){var k=[],h;var n=[["https://twitter.com/intent/tweet?in_reply_to=","Reply","reply"],["https://twitter.com/intent/retweet?tweet_id=","Retweet","retweet"],["https://twitter.com/intent/favorite?tweet_id=","Favorite","fav"]];for(var j=0,m=n.length;j<m;j++){h='<a class="s-cnv-social-tweet-'+n[j][2]+'" href="'+n[j][0]+l+'">'+n[j][1]+"</a>";k.push(h)}return k.join("")},_toDate:function(k){var h=new Date(k);var j=isNaN(h.getTime())?k.split(" "):h.toDateString().split(" ");var l=j[1];var i=j[2];return i+" "+l},render:function(j){if(!this.user.hasOwnProperty("screen_name")||this.tweets.length==0){return false}var i=this;var h='<p class="s-cnv-social-community-handle">';h+='  <span class="s-cnv-social-username">';h+='    <a href="https://twitter.com/intent/user?user_id='+i.user.id+'">@'+this.user.screen_name+"</a>";h+="  </span>";h+='  <span class="s-cnv-social-meatspace-name">'+this.user.name+"</span>";h+='  <span class="s-cnv-social-follow-btn">';h+='    <a href="https://twitter.com/'+this.user.screen_name+'" class="twitter-follow-button" data-show-count="false" data-lang="en">Follow @'+this.user.screen_name+"</a>";h+="  </span>";h+="</p>";b.each(this.tweets,function(k,l){h+='<div class="s-cnv-social-tweet">';h+='  <span class="s-cnv-social-twitter-avatar">';h+='    <a target="_blank" href="https://twitter.com/intent/user?user_id='+i.user.id+'"><img src="'+i.user.avatar+'" /></a>';h+="  </span>";h+='  <div class="s-cnv-social-tweet-contents">';h+='    <span class="s-cnv-social-twitter-username"><a href="https://twitter.com/'+this.user.screen_name+'">@'+this.user.screen_name+"</a></span>";h+='    <span class="s-cnv-social-tweet-date"><a target="_blank" href="https://twitter.com/'+i.user.screen_name+"/statuses/"+l.id_str+'">'+i._toDate(l.created_at)+"</a></span>";h+='    <div class="s-cnv-social-tweet-msg">'+twttr.txt.autoLink(l.text,l.entities)+"</div>";h+='    <span class="s-cnv-social-tweet-details">';h+="    </span>";h+='    <div class="s-cnv-social-tweet-controls-wrapper">';h+='    <span class="s-cnv-social-tweet-controls">'+i._intents(l.id_str)+"</span>";h+="    </div>";h+="  </div>";h+="</div>"});h+='<p class="s-cnv-social-continuance">';h+='  <a href="https://twitter.com/intent/user?user_id='+i.user.id+'">more tweets</a>';h+="</p>";j.append(b(h))},init:function(i,j){var h=this;this.getUser(i,function(){h.getTweets(i,function(){h.render(j)})})}};var d={init:function(h,i){}};return this.each(function(){if(g.hasOwnProperty("twitter")&&g.twitter!==""){f.init(g.twitter,b(this))}if(g.hasOwnProperty("facebook")&&g.facebook!==""){d.init(g.facebook,b(this))}})}})(jQuery);(function(g){function h(i){f();a(i)}function d(i,j){var j=j||{};var k=g.extend(j,{autoNext:false,autoNextInterval:5000});i.data("simple-carousel-opts",k);i.data("simple-carousel-pane-width")=i.width();if(k.autoNext){i.data("auto-next-timeout-id",setTimeout(h,autoNextInterval))}}function c(i){f();i.data("auto-next-timeout-id",setTimeout(h,autoNextInterval))}function f(i){clearTimeout(i.data("auto-next-timeout-id"));i.data("auto-next-timeout-id",null)}function e(j,i){f();var k=j.data("simple-carousel-opts");if(k.autoNext){c(j)}j.data("simple-carousel-current-idx",i);j.trigger("indexChanged.simpleCarousel",i)}function a(i){e(i,i.data("simple-carousel-current-idx")+1)}function b(i){e(i,i.data("simple-carousel-current-idx")-1)}g.fn.simpleCarousel=function(j){if(this.length>0){var k=j||{};var i=this;d(table,k)}return this}})(jQuery);(function(b){var a=function(c){return parseInt(c,10)||0};b.each(["min","max"],function(d,c){b.fn[c+"Size"]=function(g){var f,e;if(g){if(g.width!==undefined){this.css(c+"-width",g.width)}if(g.height!==undefined){this.css(c+"-height",g.height)}return this}else{f=this.css(c+"-width");e=this.css(c+"-height");return{width:(c==="max"&&(f===undefined||f==="none"||a(f)===-1)&&Number.MAX_VALUE)||a(f),height:(c==="max"&&(e===undefined||e==="none"||a(e)===-1)&&Number.MAX_VALUE)||a(e)}}}});b.fn.isVisible=function(){return this.is(":visible")};b.each(["border","margin","padding"],function(d,c){b.fn[c]=function(e){if(e){if(e.top!==undefined){this.css(c+"-top"+(c==="border"?"-width":""),e.top)}if(e.bottom!==undefined){this.css(c+"-bottom"+(c==="border"?"-width":""),e.bottom)}if(e.left!==undefined){this.css(c+"-left"+(c==="border"?"-width":""),e.left)}if(e.right!==undefined){this.css(c+"-right"+(c==="border"?"-width":""),e.right)}return this}else{return{top:a(this.css(c+"-top"+(c==="border"?"-width":""))),bottom:a(this.css(c+"-bottom"+(c==="border"?"-width":""))),left:a(this.css(c+"-left"+(c==="border"?"-width":""))),right:a(this.css(c+"-right"+(c==="border"?"-width":"")))}}}})}(jQuery));(function(d){function c(g){if(!g){return}if(g.href){window.location.href=g.href;return}var f=g.tab.parents(g.containerSelector);if(g.toggle&&g.tab.hasClass(g.activeCls)){f.find("."+g.activeCls).removeClass(g.activeCls);return}if(g.toggle==false){location.hash=g.handle.data("tabId")}f.find("."+g.activeCls).not(g.tab).not(g.handle).removeClass(g.activeCls);g.tab.addClass(g.activeCls);g.handle.addClass(g.activeCls)}function b(f){c(f.data);if(typeof f.data.callback==="function"){f.data.callback()}}function a(f){if(f.data.trackHash==true){d('li[data-tab-id="'+location.hash+'"]').trigger("click")}}function e(o,p){var q=p.titleSlc||".ui-tab-title",t=p.titleAttr||"tab-title",f=p.tabContentsSlc||".ui-tab-content",l=p.tabContainerCls||"ui-tab-container",m=p.tabHandleCls||"sbn-color-tab ui-tab-handle",v=p.capsSlc||".ui-tab-cap",n=p.hasCapCls||"ui-state-has-cap",u=p.initCls||"ui-state-active",h=p.activeCls||"ui-state-active",w=o.find(f),g=o.find(v),x=d('<ul class="sbn-color-tabset '+l+'" />'),s=w.filter("."+h),k=false,i=null,r=(p.toggle===true)?true:false,j=p.callback||false;w.each(function(y,A){var z=d(A);handleText=z.find(q).text()||z.data(t),handle=d('<li class="'+m+'" data-tab-id="'+handleText.replace(/ /g,"_").toLowerCase()+'_tab" />'),evtData={toggle:r,handle:handle,containerSelector:o.selector,tab:z,activeCls:h,callback:j};if(z.data("href")){evtData.href=z.data("href")}handle.bind("click",evtData,b);handle.text(handleText);if(r===false){if(y==0){i=evtData}if(location.hash.indexOf(handle.data("tabId"))>-1){k=true;c(evtData)}else{if(z.hasClass(h)){if(k==false){k=true;c(evtData)}else{z.removeClass(h)}}}}x.append(handle)});if(r===false&&k==false){c(i)}o.addClass(u);o.prepend(x);if(g.length>0){o.addClass(n);x.before(g)}}d.fn.tabs=function(f){var g=f||{};e(this,g);d(window).bind("hashchange",{trackHash:(g.toggle===true)?true:false},a);return this}})(jQuery);(function(a){a.fn.textTruncate=function(b){var c=b||{};if(Vox.Environment.currentBreakpoint().index>1){return this}this.each(function(d,f){var e=a(f),g=e.text();if(g.length>65){e.text(g.substr(0,65)+"â€¦")}});return this}})(jQuery);(function(y){function d(g){if(g&&void 0===g.allowPageScroll&&(void 0!==g.swipe||void 0!==g.swipeStatus)){g.allowPageScroll=k}g||(g={});g=y.extend({},y.fn.swipe.defaults,g);return this.each(function(){var m=y(this),n=m.data(j);n||(n=new a(this,g),m.data(j,n))})}function a(ag,ah){var ad,X,W,R;function C(D){var D=D.originalEvent,F,E=t?D.touches[0]:D;af=c;t?ac=D.touches.length:D.preventDefault();ab=0;aa=null;Z=0;!t||ac===ah.fingers||ah.fingers===i?(W=ad=E.pageX,R=X=E.pageY,z=(new Date).getTime(),ah.swipeStatus&&(F=Y(D,af))):Q(D);if(!1===F){return af=u,Y(D,af),F}ae.bind(B,A);ae.bind(x,w)}function A(D){D=D.originalEvent;if(!(af===r||af===u)){var I,F=t?D.touches[0]:D;ad=F.pageX;X=F.pageY;G=(new Date).getTime();aa=n();t&&(ac=D.touches.length);af=h;var F=D,E=aa;if(ah.allowPageScroll===k){F.preventDefault()}else{var H=ah.allowPageScroll===b;switch(E){case l:(ah.swipeLeft&&H||!H&&ah.allowPageScroll!=f)&&F.preventDefault();break;case s:(ah.swipeRight&&H||!H&&ah.allowPageScroll!=f)&&F.preventDefault();break;case p:(ah.swipeUp&&H||!H&&ah.allowPageScroll!=e)&&F.preventDefault();break;case o:(ah.swipeDown&&H||!H&&ah.allowPageScroll!=e)&&F.preventDefault()}}ac===ah.fingers||ah.fingers===i||!t?(ab=m(),Z=G-z,ah.swipeStatus&&(I=Y(D,af,aa,ab,Z)),ah.triggerOnTouchEnd||(F=!(ah.maxTimeThreshold?!(Z>=ah.maxTimeThreshold):1),!0===T()?(af=r,I=Y(D,af)):F&&(af=u,Y(D,af)))):(af=u,Y(D,af));!1===I&&(af=u,Y(D,af))}}function w(D){D=D.originalEvent;D.preventDefault();G=(new Date).getTime();ab=m();aa=n();Z=G-z;if(ah.triggerOnTouchEnd||!1===ah.triggerOnTouchEnd&&af===h){if(af=r,(ac===ah.fingers||ah.fingers===i||!t)&&0!==ad){var E=!(ah.maxTimeThreshold?!(Z>=ah.maxTimeThreshold):1);if((!0===T()||null===T())&&!E){Y(D,af)}else{if(E||!1===T()){af=u,Y(D,af)}}}else{af=u,Y(D,af)}}else{af===h&&(af=u,Y(D,af))}ae.unbind(B,A,!1);ae.unbind(x,w,!1)}function Q(){z=G=X=ad=R=W=ac=0}function Y(D,F){var E=void 0;ah.swipeStatus&&(E=ah.swipeStatus.call(ae,D,F,aa||null,ab||0,Z||0,ac));if(F===u&&ah.click&&(1===ac||!t)&&(isNaN(ab)||0===ab)){E=ah.click.call(ae,D,D.target)}if(F==r){switch(ah.swipe&&(E=ah.swipe.call(ae,D,aa,ab,Z,ac)),aa){case l:ah.swipeLeft&&(E=ah.swipeLeft.call(ae,D,aa,ab,Z,ac));break;case s:ah.swipeRight&&(E=ah.swipeRight.call(ae,D,aa,ab,Z,ac));break;case p:ah.swipeUp&&(E=ah.swipeUp.call(ae,D,aa,ab,Z,ac));break;case o:ah.swipeDown&&(E=ah.swipeDown.call(ae,D,aa,ab,Z,ac))}}(F===u||F===r)&&Q(D);return E}function T(){return null!==ah.threshold?ab>=ah.threshold:null}function m(){return Math.round(Math.sqrt(Math.pow(ad-W,2)+Math.pow(X-R,2)))}function n(){var D;D=Math.atan2(X-R,W-ad);D=Math.round(180*D/Math.PI);0>D&&(D=360-Math.abs(D));return 45>=D&&0<=D?l:360>=D&&315<=D?l:135<=D&&225>=D?s:45<D&&135>D?o:p}function g(){ae.unbind(N,C);ae.unbind(M,Q);ae.unbind(B,A);ae.unbind(x,w)}var v=t||!ah.fallbackToMouseEvents,N=v?"touchstart":"mousedown",B=v?"touchmove":"mousemove",x=v?"touchend":"mouseup",M="touchcancel",ab=0,aa=null,Z=0,ae=y(ag),af="start",ac=0,z=X=ad=R=W=0,G=0;try{ae.bind(N,C),ae.bind(M,Q)}catch(q){y.error("events not supported "+N+","+M+" on jQuery.swipe")}this.enable=function(){ae.bind(N,C);ae.bind(M,Q);return ae};this.disable=function(){g();return ae};this.destroy=function(){g();ae.data(j,null);return ae}}var l="left",s="right",p="up",o="down",k="none",b="auto",f="horizontal",e="vertical",i="all",c="start",h="move",r="end",u="cancel",t="ontouchstart" in window,j="TouchSwipe";y.fn.swipe=function(n){var g=y(this),m=g.data(j);if(m&&"string"===typeof n){if(m[n]){return m[n].apply(this,Array.prototype.slice.call(arguments,1))}y.error("Method "+n+" does not exist on jQuery.swipe")}else{if(!m&&("object"===typeof n||!n)){return d.apply(this,arguments)}}return g};y.fn.swipe.defaults={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto",fallbackToMouseEvents:!0};y.fn.swipe.phases={PHASE_START:c,PHASE_MOVE:h,PHASE_END:r,PHASE_CANCEL:u};y.fn.swipe.directions={LEFT:l,RIGHT:s,UP:p,DOWN:o};y.fn.swipe.pageScroll={NONE:k,HORIZONTAL:f,VERTICAL:e,AUTO:b};y.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:i}})(jQuery);(function(b){function a(f,d){var e={oddClass:d.oddClass||"ui-state-odd",evenClass:d.evenClass||"ui-state-even",highlightRows:(d.highlightRows===true)?true:false,highlightClass:d.highlighClass||"ui-state-hover"};var c=f.find("tbody tr");if(e.highlightRows){c.unbind("mouseenter",function(){b(this).addClass(e.highlighClass)});c.unbind("mouseleave",function(){b(this).removeClass(e.highlighClass)});c.bind("mouseenter",function(){b(this).addClass(e.highlighClass)});c.bind("mouseleave",function(){b(this).removeClass(e.highlighClass)})}if(e.oddClass){c.filter(":odd").addClass(e.oddClass)}if(e.evenClass){c.filter(":even").addClass(e.evenClass)}}b.fn.zebraTables=function(c){if(this.length>0){var d=c||{};table=this;a(table,d);this.bind("DOMNodeInserted",function(){a(table,d)})}return this}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(a){if(typeof a.fn.each2=="undefined"){a.fn.extend({each2:function(f){var d=a([0]),e=-1,b=this.length;while(++e<b&&(d.context=d[0]=this[e])&&f.call(d[0],e,d)!==false){}return this}})}})(jQuery);(function(j,l){if(window.Select2!==l){return}var c,e,w,G,u,a,C,D;c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(H){H=H.which?H.which:H;switch(H){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return true}return false},isControl:function(I){var H=I.which;switch(H){case c.SHIFT:case c.CTRL:case c.ALT:return true}if(I.metaKey){return true}return false},isFunctionKey:function(H){H=H.which?H.which:H;return H>=112&&H<=123}};D=j(document);u=(function(){var H=1;return function(){return H++}}());function b(J,K){var I=0,H=K.length;for(;I<H;I=I+1){if(q(J,K[I])){return I}}return -1}function q(I,H){if(I===H){return true}if(I===l||H===l){return false}if(I===null||H===null){return false}if(I.constructor===String){return I===H+""}if(H.constructor===String){return H===I+""}return false}function m(I,K){var L,J,H;if(I===null||I.length<1){return[]}L=I.split(K);for(J=0,H=L.length;J<H;J=J+1){L[J]=j.trim(L[J])}return L}function n(H){return H.outerWidth(false)-H.width()}function B(I){var H="keyup-change-value";I.bind("keydown",function(){if(j.data(I,H)===l){j.data(I,H,I.val())}});I.bind("keyup",function(){var J=j.data(I,H);if(J!==l&&I.val()!==J){j.removeData(I,H);I.trigger("keyup-change")}})}D.bind("mousemove",function(H){C={x:H.pageX,y:H.pageY}});function v(H){H.bind("mousemove",function(J){var I=C;if(I===l||I.x!==J.pageX||I.y!==J.pageY){j(J.target).trigger("mousemove-filtered",J)}})}function g(K,I,H){H=H||l;var J;return function(){var L=arguments;window.clearTimeout(J);J=window.setTimeout(function(){I.apply(H,L)},K)}}function E(J){var H=false,I;return function(){if(H===false){I=J();H=true}return I}}function f(H,J){var I=g(H,function(K){J.trigger("scroll-debounced",K)});J.bind("scroll",function(K){if(b(K.target,J.get())>=0){I(K)}})}function r(H){if(H[0]===document.activeElement){return}window.setTimeout(function(){var J=H[0],K=H.val().length,I;H.focus();if(J.setSelectionRange){J.setSelectionRange(K,K)}else{if(J.createTextRange){I=J.createTextRange();I.collapse(true);I.moveEnd("character",K);I.moveStart("character",K);I.select()}}},0)}function d(H){H.preventDefault();H.stopPropagation()}function F(H){H.preventDefault();H.stopImmediatePropagation()}function z(I){if(!a){var H=I[0].currentStyle||window.getComputedStyle(I[0],null);a=j(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:H.fontSize,fontFamily:H.fontFamily,fontStyle:H.fontStyle,fontWeight:H.fontWeight,letterSpacing:H.letterSpacing,textTransform:H.textTransform,whiteSpace:"nowrap"});a.attr("class","select2-sizer");j("body").append(a)}a.text(I.val());return a.width()}function y(I,M,H){var K,L=[],J;K=I.attr("class");if(typeof K==="string"){j(K.split(" ")).each2(function(){if(this.indexOf("select2-")===0){L.push(this)}})}K=M.attr("class");if(typeof K==="string"){j(K.split(" ")).each2(function(){if(this.indexOf("select2-")!==0){J=H(this);if(typeof J==="string"&&J.length>0){L.push(this)}}})}I.attr("class",L.join(" "))}function i(M,L,J,H){var K=M.toUpperCase().indexOf(L.toUpperCase()),I=L.length;if(K<0){J.push(H(M));return}J.push(H(M.substring(0,K)));J.push("<span class='select2-match'>");J.push(H(M.substring(K,K+I)));J.push("</span>");J.push(H(M.substring(K+I,M.length)))}function p(J){var M,I=0,K=null,N=J.quietMillis||100,L=J.url,H=this;return function(O){window.clearTimeout(M);M=window.setTimeout(function(){I+=1;var Q=I,S=J.data,P=L,U=J.transport||j.ajax,R=J.type||"GET",T={};S=S?S.call(H,O.term,O.page,O.context):null;P=(typeof P==="function")?P.call(H,O.term,O.page,O.context):P;if(null!==K){K.abort()}if(J.params){if(j.isFunction(J.params)){j.extend(T,J.params.call(H))}else{j.extend(T,J.params)}}j.extend(T,{url:P,dataType:J.dataType,data:S,type:R,cache:false,success:function(W){if(Q<I){return}var V=J.results(W,O.page);O.callback(V)}});K=U.call(H,T)},N)}}function s(I){var L=I,K,J,M=function(N){return""+N.text};if(j.isArray(L)){J=L;L={results:J}}if(j.isFunction(L)===false){J=L;L=function(){return J}}var H=L();if(H.text){M=H.text;if(!j.isFunction(M)){K=L.text;M=function(N){return N[K]}}}return function(P){var O=P.term,N={results:[]},Q;if(O===""){P.callback(L());return}Q=function(S,U){var T,R;S=S[0];if(S.children){T={};for(R in S){if(S.hasOwnProperty(R)){T[R]=S[R]}}T.children=[];j(S.children).each2(function(V,W){Q(W,T.children)});if(T.children.length||P.matcher(O,M(T),S)){U.push(T)}}else{if(P.matcher(O,M(S),S)){U.push(S)}}};j(L().results).each2(function(S,R){Q(R,N.results)});P.callback(N)}}function o(I){var H=j.isFunction(I);return function(L){var K=L.term,J={results:[]};j(H?I():I).each(function(){var M=this.text!==l,N=M?this.text:this;if(K===""||L.matcher(K,N)){J.results.push(M?this:{id:this,text:this})}});L.callback(J)}}function k(H,I){if(j.isFunction(H)){return true}if(!H){return false}throw new Error("formatterName must be a function or a falsy value")}function t(H){return j.isFunction(H)?H():H}function h(H){var I=0;j.each(H,function(J,K){if(K.children){I+=h(K.children)}else{I++}});return I}function A(P,Q,N,H){var I=P,R=false,K,O,L,J,M;if(!H.createSearchChoice||!H.tokenSeparators||H.tokenSeparators.length<1){return l}while(true){O=-1;for(L=0,J=H.tokenSeparators.length;L<J;L++){M=H.tokenSeparators[L];O=P.indexOf(M);if(O>=0){break}}if(O<0){break}K=P.substring(0,O);P=P.substring(O+M.length);if(K.length>0){K=H.createSearchChoice(K,Q);if(K!==l&&K!==null&&H.id(K)!==l&&H.id(K)!==null){R=false;for(L=0,J=Q.length;L<J;L++){if(q(H.id(K),H.id(Q[L]))){R=true;break}}if(!R){N(K)}}}}if(I!==P){return P}}function x(H,I){var J=function(){};J.prototype=new H;J.prototype.constructor=J;J.prototype.parent=H.prototype;J.prototype=j.extend(J.prototype,I);return J}e=x(Object,{bind:function(I){var H=this;return function(){I.apply(H,arguments)}},init:function(K){var J,I,L=".select2-results",H;this.opts=K=this.prepareOpts(K);this.id=K.id;if(K.element.data("select2")!==l&&K.element.data("select2")!==null){this.destroy()}this.enabled=true;this.container=this.createContainer();this.containerId="s2id_"+(K.element.attr("id")||"autogen"+u());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=E(function(){return K.element.closest("body")});y(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.css(t(K.containerCss));this.container.addClass(t(K.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabIndex");this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){j(this).select2("focus")}).attr("tabIndex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(t(K.dropdownCssClass));this.dropdown.data("select2",this);this.results=J=this.container.find(L);this.search=I=this.container.find("input.select2-input");I.attr("tabIndex",this.elementTabIndex);this.resultsPage=0;this.context=null;this.initContainer();v(this.results);this.dropdown.delegate(L,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent));f(80,this.results);this.dropdown.delegate(L,"scroll-debounced",this.bind(this.loadMoreIfNeeded));if(j.fn.mousewheel){J.mousewheel(function(Q,R,O,N){var P=J.scrollTop(),M;if(N>0&&P-N<=0){J.scrollTop(0);d(Q)}else{if(N<0&&J.get(0).scrollHeight-J.scrollTop()+N<=J.height()){J.scrollTop(J.get(0).scrollHeight-J.height());d(Q)}}})}B(I);I.bind("keyup-change input paste",this.bind(this.updateResults));I.bind("focus",function(){I.addClass("select2-focused")});I.bind("blur",function(){I.removeClass("select2-focused")});this.dropdown.delegate(L,"mouseup",this.bind(function(M){if(j(M.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(M);this.selectHighlighted(M)}}));this.dropdown.bind("click mouseup mousedown",function(M){M.stopPropagation()});if(j.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(K.element.is(":disabled")||K.element.is("[readonly='readonly']")){this.disable()}},destroy:function(){var H=this.opts.element.data("select2");if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}if(H!==l){H.container.remove();H.dropdown.remove();H.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show()}},prepareOpts:function(L){var J,I,H,K;J=L.element;if(J.get(0).tagName.toLowerCase()==="select"){this.select=I=L.element}if(I){j.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in L){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}L=j.extend({},{populateResults:function(M,Q,S){var R,P,U,O,N=this.opts.id,T=this;R=function(ab,V,aa){var ac,X,ah,ae,Y,ag,W,af,ad,Z;ab=L.sortResults(ab,V,S);for(ac=0,X=ab.length;ac<X;ac=ac+1){ah=ab[ac];Y=(ah.disabled===true);ae=(!Y)&&(N(ah)!==l);ag=ah.children&&ah.children.length>0;W=j("<li></li>");W.addClass("select2-results-dept-"+aa);W.addClass("select2-result");W.addClass(ae?"select2-result-selectable":"select2-result-unselectable");if(Y){W.addClass("select2-disabled")}if(ag){W.addClass("select2-result-with-children")}W.addClass(T.opts.formatResultCssClass(ah));af=j(document.createElement("div"));af.addClass("select2-result-label");Z=L.formatResult(ah,af,S,T.opts.escapeMarkup);if(Z!==l){af.html(Z)}W.append(af);if(ag){ad=j("<ul></ul>");ad.addClass("select2-result-sub");R(ah.children,ad,aa+1);W.append(ad)}W.data("select2-data",ah);V.append(W)}};R(Q,M,0)}},j.fn.select2.defaults,L);if(typeof(L.id)!=="function"){H=L.id;L.id=function(M){return M[H]}}if(j.isArray(L.element.data("select2Tags"))){if("tags" in L){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+L.element.attr("id")}L.tags=L.element.attr("data-select2-tags")}if(I){L.query=this.bind(function(P){var O={results:[],more:false},N=P.term,M,R,Q;Q=function(S,U){var T;if(S.is("option")){if(P.matcher(N,S.text(),S)){U.push({id:S.attr("value"),text:S.text(),element:S.get(),css:S.attr("class"),disabled:q(S.attr("disabled"),"disabled")})}}else{if(S.is("optgroup")){T={text:S.attr("label"),children:[],element:S.get(),css:S.attr("class")};S.children().each2(function(V,W){Q(W,T.children)});if(T.children.length>0){U.push(T)}}}};M=J.children();if(this.getPlaceholder()!==l&&M.length>0){R=M[0];if(j(R).text()===""){M=M.not(R)}}M.each2(function(S,T){Q(T,O.results)});P.callback(O)});L.id=function(M){return M.id};L.formatResultCssClass=function(M){return M.css}}else{if(!("query" in L)){if("ajax" in L){K=L.element.data("ajax-url");if(K&&K.length>0){L.ajax.url=K}L.query=p.call(L.element,L.ajax)}else{if("data" in L){L.query=s(L.data)}else{if("tags" in L){L.query=o(L.tags);if(L.createSearchChoice===l){L.createSearchChoice=function(M){return{id:M,text:M}}}if(L.initSelection===l){L.initSelection=function(M,O){var N=[];j(m(M.val(),L.separator)).each(function(){var R=this,Q=this,P=L.tags;if(j.isFunction(P)){P=P()}j(P).each(function(){if(q(this.id,R)){Q=this.text;return false}});N.push({id:R,text:Q})});O(N)}}}}}}}if(typeof(L.query)!=="function"){throw"query function not defined for Select2 "+L.element.attr("id")}return L},monitorSource:function(){var H=this.opts.element,I;H.bind("change.select2",this.bind(function(J){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));I=this.bind(function(){var L,K,J=this;L=this.opts.element.attr("disabled")!=="disabled";K=this.opts.element.attr("readonly")==="readonly";L=L&&!K;if(this.enabled!==L){if(L){this.enable()}else{this.disable()}}y(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(t(this.opts.containerCssClass));y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(t(this.opts.dropdownCssClass))});H.bind("propertychange.select2 DOMAttrModified.select2",I);if(typeof WebKitMutationObserver!=="undefined"){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new WebKitMutationObserver(function(J){J.forEach(I)});this.propertyObserver.observe(H.get(0),{attributes:true,subtree:false})}},triggerChange:function(H){H=H||{};H=j.extend({},H,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(H);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange){this.opts.element.blur()}},enable:function(){if(this.enabled){return}this.enabled=true;this.container.removeClass("select2-container-disabled");this.opts.element.removeAttr("disabled")},disable:function(){if(!this.enabled){return}this.close();this.enabled=false;this.container.addClass("select2-container-disabled");this.opts.element.attr("disabled","disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var N=this.container.offset(),W=this.container.outerHeight(false),I=this.container.outerWidth(false),M=this.dropdown.outerHeight(false),P=j(window).scrollLeft()+j(window).width(),S=j(window).scrollTop()+j(window).height(),H=N.top+W,V=N.left,T=H+M<=S,R=(N.top-M)>=this.body().scrollTop(),J=this.dropdown.outerWidth(false),K=V+J<=P,L=this.dropdown.hasClass("select2-drop-above"),O,U,Q;if(this.body().css("position")!=="static"){O=this.body().offset();H-=O.top;V-=O.left}if(L){U=true;if(!R&&T){U=false}}else{U=false;if(!T&&R){U=true}}if(!K){V=N.left+I-J}if(U){H=N.top-M;this.container.addClass("select2-drop-above");this.dropdown.addClass("select2-drop-above")}else{this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")}Q=j.extend({top:H,left:V,width:I},t(this.opts.dropdownCss));this.dropdown.css(Q)},shouldOpen:function(){var H;if(this.opened()){return false}H=j.Event("opening");this.opts.element.trigger(H);return !H.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}window.setTimeout(this.bind(this.opening),1);return true},opening:function(){var M=this.containerId,H="scroll."+M,K="resize."+M,J="orientationchange."+M,I;this.clearDropdownAlignmentPreference();this.container.addClass("select2-dropdown-open").addClass("select2-container-active");if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}this.updateResults(true);I=j("#select2-drop-mask");if(I.length==0){I=j(document.createElement("div"));I.attr("id","select2-drop-mask").attr("class","select2-drop-mask");I.hide();I.appendTo(this.body());I.bind("mousedown touchstart",function(O){var P=j("#select2-drop"),N;if(P.length>0){N=P.data("select2");if(N.opts.selectOnBlur){N.selectHighlighted({noFocus:true})}N.close()}})}if(this.dropdown.prev()[0]!==I[0]){this.dropdown.before(I)}j("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");I.css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});I.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();var L=this;this.container.parents().add(window).each(function(){j(this).bind(K+" "+H+" "+J,function(N){j("#select2-drop-mask").css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});L.positionDropdown()})});this.focusSearch()},close:function(){if(!this.opened()){return}var K=this.containerId,H="scroll."+K,J="resize."+K,I="orientationchange."+K;this.container.parents().add(window).each(function(){j(this).unbind(H).unbind(J).unbind(I)});this.clearDropdownAlignmentPreference();j("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.opts.element.trigger(j.Event("close"))},clearSearch:function(){},getMaximumSelectionSize:function(){return t(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var K=this.results,J,H,O,N,L,M,I;H=this.highlight();if(H<0){return}if(H==0){K.scrollTop(0);return}J=this.findHighlightableChoices();O=j(J[H]);N=O.offset().top+O.outerHeight(true);if(H===J.length-1){I=K.find("li.select2-more-results");if(I.length>0){N=I.offset().top+I.outerHeight(true)}}L=K.offset().top+K.outerHeight(true);if(N>L){K.scrollTop(K.scrollTop()+(N-L))}M=O.offset().top-K.offset().top;if(M<0&&O.css("display")!="none"){K.scrollTop(K.scrollTop()+M)}},findHighlightableChoices:function(){var H=this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)");return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(K){var J=this.findHighlightableChoices(),I=this.highlight();while(I>-1&&I<J.length){I+=K;var H=j(J[I]);if(H.hasClass("select2-result-selectable")&&!H.hasClass("select2-disabled")&&!H.hasClass("select2-selected")){this.highlight(I);break}}},highlight:function(I){var K=this.findHighlightableChoices(),H,J;if(arguments.length===0){return b(K.filter(".select2-highlighted")[0],K.get())}if(I>=K.length){I=K.length-1}if(I<0){I=0}this.results.find(".select2-highlighted").removeClass("select2-highlighted");H=j(K[I]);H.addClass("select2-highlighted");this.ensureHighlightVisible();J=H.data("select2-data");if(J){this.opts.element.trigger({type:"highlight",val:this.id(J),choice:J})}},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(I){var H=j(I.target).closest(".select2-result-selectable");if(H.length>0&&!H.is(".select2-highlighted")){var J=this.findHighlightableChoices();this.highlight(J.index(H))}else{if(H.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted")}}},loadMoreIfNeeded:function(){var L=this.results,K=L.find("li.select2-more-results"),O,N=-1,M=this.resultsPage+1,H=this,J=this.search.val(),I=this.context;if(K.length===0){return}O=K.offset().top-L.offset().top-L.height();if(O<=this.opts.loadMorePadding){K.addClass("select2-active");this.opts.query({element:this.opts.element,term:J,page:M,context:I,matcher:this.opts.matcher,callback:this.bind(function(P){if(!H.opened()){return}H.opts.populateResults.call(this,L,P.results,{term:J,page:M,context:I});if(P.more===true){K.detach().appendTo(L).text(H.opts.formatLoadMore(M+1));window.setTimeout(function(){H.loadMoreIfNeeded()},10)}else{K.remove()}H.positionDropdown();H.resultsPage=M;H.context=P.context})})}},tokenize:function(){},updateResults:function(N){var Q=this.search,L=this.results,H=this.opts,K,P=this,O;if(N!==true&&(this.showSearchInput===false||!this.opened())){return}Q.addClass("select2-active");function M(){L.scrollTop(0);Q.removeClass("select2-active");P.positionDropdown()}function I(R){L.html(R);M()}var J=this.getMaximumSelectionSize();if(J>=1){K=this.data();if(j.isArray(K)&&K.length>=J&&k(H.formatSelectionTooBig,"formatSelectionTooBig")){I("<li class='select2-selection-limit'>"+H.formatSelectionTooBig(J)+"</li>");return}}if(Q.val().length<H.minimumInputLength){if(k(H.formatInputTooShort,"formatInputTooShort")){I("<li class='select2-no-results'>"+H.formatInputTooShort(Q.val(),H.minimumInputLength)+"</li>")}else{I("")}return}else{if(H.formatSearching()&&N===true){I("<li class='select2-searching'>"+H.formatSearching()+"</li>")}}if(H.maximumInputLength&&Q.val().length>H.maximumInputLength){if(k(H.formatInputTooLong,"formatInputTooLong")){I("<li class='select2-no-results'>"+H.formatInputTooLong(Q.val(),H.maximumInputLength)+"</li>")}else{I("")}return}O=this.tokenize();if(O!=l&&O!=null){Q.val(O)}this.resultsPage=1;H.query({element:H.element,term:Q.val(),page:this.resultsPage,context:null,matcher:H.matcher,callback:this.bind(function(S){var R;if(!this.opened()){return}this.context=(S.context===l)?null:S.context;if(this.opts.createSearchChoice&&Q.val()!==""){R=this.opts.createSearchChoice.call(null,Q.val(),S.results);if(R!==l&&R!==null&&P.id(R)!==l&&P.id(R)!==null){if(j(S.results).filter(function(){return q(P.id(this),P.id(R))}).length===0){S.results.unshift(R)}}}if(S.results.length===0&&k(H.formatNoMatches,"formatNoMatches")){I("<li class='select2-no-results'>"+H.formatNoMatches(Q.val())+"</li>");return}L.empty();P.opts.populateResults.call(this,L,S.results,{term:Q.val(),page:this.resultsPage,context:null});if(S.more===true&&k(H.formatLoadMore,"formatLoadMore")){L.append("<li class='select2-more-results'>"+P.opts.escapeMarkup(H.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){P.loadMoreIfNeeded()},10)}this.postprocessResults(S,N);M()})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur){this.selectHighlighted({noFocus:true})}this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){r(this.search)},selectHighlighted:function(I){var H=this.highlight(),J=this.results.find(".select2-highlighted"),K=J.closest(".select2-result").data("select2-data");if(K){this.highlight(H);this.onSelect(K,I)}},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function I(){var M,K,N,L,J;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){M=this.opts.element.attr("style");if(M!==l){K=M.split(";");for(L=0,J=K.length;L<J;L=L+1){N=K[L].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(N!==null&&N.length>=1){return N[1]}}}if(this.opts.width==="resolve"){M=this.opts.element.css("width");if(M.indexOf("%")>0){return M}return(this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px")}return null}else{if(j.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var H=I.call(this);if(H!==null){this.container.css("width",H)}}});w=x(e,{createContainer:function(){var H=j(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return H},disable:function(){if(!this.enabled){return}this.parent.disable.apply(this,arguments);this.focusser.attr("disabled","disabled")},enable:function(){if(this.enabled){return}this.parent.enable.apply(this,arguments);this.focusser.removeAttr("disabled")},opening:function(){this.parent.opening.apply(this,arguments);this.focusser.attr("disabled","disabled");this.opts.element.trigger(j.Event("open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments);this.focusser.removeAttr("disabled");r(this.focusser)},focus:function(){if(this.opened()){this.close()}else{this.focusser.removeAttr("disabled");this.focusser.focus()}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var J,I=this.container,K=this.dropdown,H=false;this.showSearch(this.opts.minimumResultsForSearch>=0);this.selection=J=I.find(".select2-choice");this.focusser=I.find(".select2-focusser");this.search.bind("keydown",this.bind(function(L){if(!this.enabled){return}if(L.which===c.PAGE_UP||L.which===c.PAGE_DOWN){d(L);return}switch(L.which){case c.UP:case c.DOWN:this.moveHighlight((L.which===c.UP)?-1:1);d(L);return;case c.TAB:case c.ENTER:this.selectHighlighted();d(L);return;case c.ESC:this.cancel(L);d(L);return}}));this.focusser.bind("keydown",this.bind(function(L){if(!this.enabled){return}if(L.which===c.TAB||c.isControl(L)||c.isFunctionKey(L)||L.which===c.ESC){return}if(this.opts.openOnEnter===false&&L.which===c.ENTER){d(L);return}if(L.which==c.DOWN||L.which==c.UP||(L.which==c.ENTER&&this.opts.openOnEnter)){this.open();d(L);return}if(L.which==c.DELETE||L.which==c.BACKSPACE){if(this.opts.allowClear){this.clear()}d(L);return}}));B(this.focusser);this.focusser.bind("keyup-change input",this.bind(function(L){if(this.opened()){return}this.open();if(this.showSearchInput!==false){this.search.val(this.focusser.val())}this.focusser.val("");d(L)}));J.delegate("abbr","mousedown",this.bind(function(L){if(!this.enabled){return}this.clear();F(L);this.close();this.selection.focus()}));J.bind("mousedown",this.bind(function(L){H=true;if(this.opened()){this.close()}else{if(this.enabled){this.open()}}d(L);H=false}));K.bind("mousedown",this.bind(function(){this.search.focus()}));J.bind("focus",this.bind(function(L){d(L)}));this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active")}}));this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}));this.initContainerWidth();this.setPlaceholder()},clear:function(){var H=this.selection.data("select2-data");this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();this.opts.element.trigger({type:"removed",val:this.id(H),choice:H});this.triggerChange({removed:H})},initSelection:function(){var I;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.close();this.setPlaceholder()}else{var H=this;this.opts.initSelection.call(null,this.opts.element,function(J){if(J!==l&&J!==null){H.updateSelection(J);H.close();H.setPlaceholder()}})}},prepareOpts:function(){var H=this.parent.prepareOpts.apply(this,arguments);if(H.element.get(0).tagName.toLowerCase()==="select"){H.initSelection=function(I,K){var J=I.find(":selected");if(j.isFunction(K)){K({id:J.attr("value"),text:J.text(),element:J})}}}else{if("data" in H){H.initSelection=H.initSelection||function(I,K){var J=I.val();H.query({matcher:function(L,N,M){return q(J,H.id(M))},callback:!j.isFunction(K)?j.noop:function(L){K(L.results.length?L.results[0]:null)}})}}}return H},getPlaceholder:function(){if(this.select){if(this.select.find("option").first().text()!==""){return l}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var H=this.getPlaceholder();if(this.opts.element.val()===""&&H!==l){if(this.select&&this.select.find("option:first").text()!==""){return}this.selection.find("span").html(this.opts.escapeMarkup(H));this.selection.addClass("select2-default");this.selection.find("abbr").hide()}},postprocessResults:function(L,I){var K=0,H=this,M=true;this.findHighlightableChoices().each2(function(N,O){if(q(H.id(O.data("select2-data")),H.opts.element.val())){K=N;return false}});this.highlight(K);if(I===true){var J=this.opts.minimumResultsForSearch;M=J<0?false:h(L.results)>=J;this.showSearch(M)}},showSearch:function(H){this.showSearchInput=H;this.dropdown.find(".select2-search")[H?"removeClass":"addClass"]("select2-search-hidden");j(this.dropdown,this.container)[H?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(J,I){var H=this.opts.element.val();this.opts.element.val(this.id(J));this.updateSelection(J);this.opts.element.trigger({type:"selected",val:this.id(J),choice:J});this.close();if(!I||!I.noFocus){this.selection.focus()}if(!q(H,this.id(J))){this.triggerChange()}},updateSelection:function(J){var H=this.selection.find("span"),I;this.selection.data("select2-data",J);H.empty();I=this.opts.formatSelection(J,H);if(I!==l){H.append(this.opts.escapeMarkup(I))}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==l){this.selection.find("abbr").show()}},val:function(){var K,I=false,J=null,H=this;if(arguments.length===0){return this.opts.element.val()}K=arguments[0];if(arguments.length>1){I=arguments[1]}if(this.select){this.select.val(K).find(":selected").each2(function(L,M){J={id:M.attr("value"),text:M.text()};return false});this.updateSelection(J);this.setPlaceholder();if(I){this.triggerChange()}}else{if(this.opts.initSelection===l){throw new Error("cannot call val() if initSelection() is not defined")}if(!K&&K!==0){this.clear();if(I){this.triggerChange()}return}this.opts.element.val(K);this.opts.initSelection(this.opts.element,function(L){H.opts.element.val(!L?"":H.id(L));H.updateSelection(L);H.setPlaceholder();if(I){H.triggerChange()}})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(I){var H;if(arguments.length===0){H=this.selection.data("select2-data");if(H==l){H=null}return H}else{if(!I||I===""){this.clear()}else{this.opts.element.val(!I?"":this.id(I));this.updateSelection(I)}}}});G=x(e,{createContainer:function(){var H=j(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return H},prepareOpts:function(){var H=this.parent.prepareOpts.apply(this,arguments);if(H.element.get(0).tagName.toLowerCase()==="select"){H.initSelection=function(I,K){var J=[];I.find(":selected").each2(function(L,M){J.push({id:M.attr("value"),text:M.text(),element:M[0]})});K(J)}}else{if("data" in H){H.initSelection=H.initSelection||function(I,K){var J=m(I.val(),H.separator);H.query({matcher:function(L,N,M){return j.grep(J,function(O){return q(O,H.id(M))}).length},callback:!j.isFunction(K)?j.noop:function(L){K(L.results)}})}}}return H},initContainer:function(){var H=".select2-choices",I;this.searchContainer=this.container.find(".select2-search-field");this.selection=I=this.container.find(H);this.search.bind("input paste",this.bind(function(){if(!this.enabled){return}if(!this.opened()){this.open()}}));this.search.bind("keydown",this.bind(function(K){if(!this.enabled){return}if(K.which===c.BACKSPACE&&this.search.val()===""){this.close();var L,J=I.find(".select2-search-choice-focus");if(J.length>0){this.unselect(J.first());this.search.width(10);d(K);return}L=I.find(".select2-search-choice:not(.select2-locked)");if(L.length>0){L.last().addClass("select2-search-choice-focus")}}else{I.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")}if(this.opened()){switch(K.which){case c.UP:case c.DOWN:this.moveHighlight((K.which===c.UP)?-1:1);d(K);return;case c.ENTER:case c.TAB:this.selectHighlighted();d(K);return;case c.ESC:this.cancel(K);d(K);return}}if(K.which===c.TAB||c.isControl(K)||c.isFunctionKey(K)||K.which===c.BACKSPACE||K.which===c.ESC){return}if(K.which===c.ENTER){if(this.opts.openOnEnter===false){return}else{if(K.altKey||K.ctrlKey||K.shiftKey||K.metaKey){return}}}this.open();if(K.which===c.PAGE_UP||K.which===c.PAGE_DOWN){d(K)}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(J){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");if(!this.opened()){this.clearSearch()}J.stopImmediatePropagation()}));this.container.delegate(H,"mousedown",this.bind(function(J){if(!this.enabled){return}if(j(J.target).closest(".select2-search-choice").length>0){return}this.clearPlaceholder();this.open();this.focusSearch();J.preventDefault()}));this.container.delegate(H,"focus",this.bind(function(){if(!this.enabled){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.clearSearch()},enable:function(){if(this.enabled){return}this.parent.enable.apply(this,arguments);this.search.removeAttr("disabled")},disable:function(){if(!this.enabled){return}this.parent.disable.apply(this,arguments);this.search.attr("disabled",true)},initSelection:function(){var I;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var H=this;this.opts.initSelection.call(null,this.opts.element,function(J){if(J!==l&&J!==null){H.updateSelection(J);H.close();H.clearSearch()}})}},clearSearch:function(){var H=this.getPlaceholder();if(H!==l&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(H).addClass("select2-default");this.resizeSearch()}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch();this.opts.element.trigger(j.Event("open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus();this.opts.element.triggerHandler("focus")},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(K){var J=[],I=[],H=this;j(K).each(function(){if(b(H.id(this),J)<0){J.push(H.id(this));I.push(this)}});K=I;this.selection.find(".select2-search-choice").remove();j(K).each(function(){H.addSelectedChoice(this)});H.postprocessResults()},tokenize:function(){var H=this.search.val();H=this.opts.tokenizer(H,this.data(),this.bind(this.onSelect),this.opts);if(H!=null&&H!=l){this.search.val(H);if(H.length>0){this.open()}}},onSelect:function(I,H){this.addSelectedChoice(I);this.opts.element.trigger({type:"selected",val:this.id(I),choice:I});if(this.select||!this.opts.closeOnSelect){this.postprocessResults()}if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:I});if(!H||!H.noFocus){this.focusSearch()}},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(K){var I=!K.locked,O=j("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),N=j("<li class='select2-search-choice select2-locked'><div></div></li>");var H=I?O:N,M=this.id(K),L=this.getVal(),J;J=this.opts.formatSelection(K,H.find("div"));if(J!=l){H.find("div").replaceWith("<div>"+this.opts.escapeMarkup(J)+"</div>")}if(I){H.find(".select2-search-choice-close").bind("mousedown",d).bind("click dblclick",this.bind(function(P){if(!this.enabled){return}j(P.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(j(P.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue();d(P)})).bind("focus",this.bind(function(){if(!this.enabled){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}H.data("select2-data",K);H.insertBefore(this.searchContainer);L.push(M);this.setVal(L)},unselect:function(I){var K=this.getVal(),J,H;I=I.closest(".select2-search-choice");if(I.length===0){throw"Invalid argument: "+I+". Must be .select2-search-choice"}J=I.data("select2-data");if(!J){return}H=b(this.id(J),K);if(H>=0){K.splice(H,1);this.setVal(K);if(this.select){this.postprocessResults()}}I.remove();this.opts.element.trigger({type:"removed",val:this.id(J),choice:J});this.triggerChange({removed:J})},postprocessResults:function(){var J=this.getVal(),K=this.results.find(".select2-result"),I=this.results.find(".select2-result-with-children"),H=this;K.each2(function(M,L){var N=H.id(L.data("select2-data"));if(b(N,J)>=0){L.addClass("select2-selected");L.find(".select2-result-selectable").addClass("select2-selected")}});I.each2(function(M,L){if(!L.is(".select2-result-selectable")&&L.find(".select2-result-selectable:not(.select2-selected)").length===0){L.addClass("select2-selected")}});if(this.highlight()==-1){H.highlight(0)}},resizeSearch:function(){var M,K,J,H,I,L=n(this.search);M=z(this.search)+10;K=this.search.offset().left;J=this.selection.width();H=this.selection.offset().left;I=J-(K-H)-L;if(I<M){I=J-L}if(I<40){I=J-L}if(I<=0){I=M}this.search.width(I)},getVal:function(){var H;if(this.select){H=this.select.val();return H===null?[]:H}else{H=this.opts.element.val();return m(H,this.opts.separator)}},setVal:function(I){var H;if(this.select){this.select.val(I)}else{H=[];j(I).each(function(){if(b(this,H)<0){H.push(this)}});this.opts.element.val(H.length===0?"":H.join(this.opts.separator))}},val:function(){var K,I=false,J=[],H=this;if(arguments.length===0){return this.getVal()}K=arguments[0];if(arguments.length>1){I=arguments[1]}if(!K&&K!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(I){this.triggerChange()}return}this.setVal(K);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(I){this.triggerChange()}}else{if(this.opts.initSelection===l){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(M){var L=j(M).map(H.id);H.setVal(L);H.updateSelection(M);H.clearSearch();if(I){H.triggerChange()}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var I=[],H=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){I.push(H.opts.id(j(this).data("select2-data")))});this.setVal(I);this.triggerChange()},data:function(I){var H=this,J;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return j(this).data("select2-data")}).get()}else{if(!I){I=[]}J=j.map(I,function(K){return H.opts.id(K)});this.setVal(J);this.updateSelection(I);this.clearSearch()}}});j.fn.select2=function(){var K=Array.prototype.slice.call(arguments,0),L,J,M,I,H=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];this.each(function(){if(K.length===0||typeof(K[0])==="object"){L=K.length===0?{}:j.extend({},K[0]);L.element=j(this);if(L.element.get(0).tagName.toLowerCase()==="select"){I=L.element.attr("multiple")}else{I=L.multiple||false;if("tags" in L){L.multiple=I=true}}J=I?new G():new w();J.init(L)}else{if(typeof(K[0])==="string"){if(b(K[0],H)<0){throw"Unknown method: "+K[0]}M=l;J=j(this).data("select2");if(J===l){return}if(K[0]==="container"){M=J.container}else{M=J[K[0]].apply(J,K.slice(1))}if(M!==l){return false}}else{throw"Invalid arguments to select2 plugin: "+K}}});return(M===l)?this:M};j.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(I,J,L,H){var K=[];i(I.text,L.term,K,H);return K.join("")},formatSelection:function(I,H){return I?I.text:l},sortResults:function(I,H,J){return I},formatResultCssClass:function(H){return l},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(H,I){var J=I-H.length;return"Please enter "+J+" more character"+(J==1?"":"s")},formatInputTooLong:function(I,H){var J=I.length-H;return"Please enter "+J+" less character"+(J==1?"":"s")},formatSelectionTooBig:function(H){return"You can only select "+H+" item"+(H==1?"":"s")},formatLoadMore:function(H){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(H){return H.id},matcher:function(H,I){return I.toUpperCase().indexOf(H.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:A,escapeMarkup:function(H){var I={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(H).replace(/[&<>"'/\\]/g,function(J){return I[J[0]]})},blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(H){return H},adaptDropdownCssClass:function(H){return null}};window.Select2={query:{ajax:p,local:s,tags:o},util:{debounce:g,markMatch:i},"class":{"abstract":e,single:w,multi:G}}}(jQuery));(function(a){"undefined"==typeof a.fn.each2&&a.fn.extend({each2:function(d){for(var e=a([0]),b=-1,c=this.length;++b<c&&(e.context=e[0]=this[b])&&!1!==d.call(e[0],b,e);){}return this}})})(jQuery);(function(ab,Z){function W(f,e){for(var k=0,h=e.length;k<h;k+=1){if(X(f,e[k])){return k}}return -1}function X(f,e){return f===e?!0:f===Z||e===Z||null===f||null===e?!1:f.constructor===String?f===e+"":e.constructor===String?e===f+"":!1}function q(f,e){var m,k,h;if(null===f||1>f.length){return[]}m=f.split(e);k=0;for(h=m.length;k<h;k+=1){m[k]=ab.trim(m[k])}return m}function R(e){e.bind("keydown",function(){ab.data(e,"keyup-change-value")===Z&&ab.data(e,"keyup-change-value",e.val())});e.bind("keyup",function(){var f=ab.data(e,"keyup-change-value");f!==Z&&e.val()!==f&&(ab.removeData(e,"keyup-change-value"),e.trigger("keyup-change"))})}function Q(f,e,k){k=k||Z;var h;return function(){var m=arguments;window.clearTimeout(h);h=window.setTimeout(function(){e.apply(k,m)},f)}}function P(e){e[0]!==document.activeElement&&window.setTimeout(function(){var f=e[0],h=e.val().length;e.focus();f.setSelectionRange?f.setSelectionRange(h,h):f.createTextRange&&(f=f.createTextRange(),f.collapse(!0),f.moveEnd("character",h),f.moveStart("character",h),f.select())},0)}function Y(e){e.preventDefault();e.stopPropagation()}function i(f,e,n){var m,h=[],k;m=f.attr("class");"string"===typeof m&&ab(m.split(" ")).each2(function(){0===this.indexOf("select2-")&&h.push(this)});m=e.attr("class");"string"===typeof m&&ab(m.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(k=n(this),"string"===typeof k&&0<k.length&&h.push(this))});f.attr("class",h.join(" "))}function t(f,e,m,k){var h=f.toUpperCase().indexOf(e.toUpperCase());e=e.length;0>h?m.push(k(f)):(m.push(k(f.substring(0,h))),m.push("<span class='select2-match'>"),m.push(k(f.substring(h,h+e))),m.push("</span>"),m.push(k(f.substring(h+e,f.length))))}function p(h){var e,r=0,n=null,k=h.quietMillis||100,m=h.url,f=this;return function(u){window.clearTimeout(e);e=window.setTimeout(function(){var w=r+=1,A=h.data,v=m,z=h.transport||ab.ajax,B=h.type||"GET",y={},A=A?A.call(f,u.term,u.page,u.context):null,v="function"===typeof v?v.call(f,u.term,u.page,u.context):v;null!==n&&n.abort();h.params&&(ab.isFunction(h.params)?ab.extend(y,h.params.call(f)):ab.extend(y,h.params));ab.extend(y,{url:v,dataType:h.dataType,data:A,type:B,cache:!1,success:function(C){w<r||(C=h.results(C,u.page),u.callback(C))}});n=z.call(f,y)},k)}}function o(f){var e=f,m,k,h=function(n){return""+n.text};ab.isArray(e)&&(k=e,e={results:k});!1===ab.isFunction(e)&&(k=e,e=function(){return k});f=e();f.text&&(h=f.text,ab.isFunction(h)||(m=e.text,h=function(n){return n[m]}));return function(n){var v=n.term,u={results:[]},r;""===v?n.callback(e()):(r=function(w,A){var y,z;w=w[0];if(w.children){y={};for(z in w){w.hasOwnProperty(z)&&(y[z]=w[z])}y.children=[];ab(w.children).each2(function(C,B){r(B,y.children)});(y.children.length||n.matcher(v,h(y),w))&&A.push(y)}else{n.matcher(v,h(w),w)&&A.push(w)}},ab(e().results).each2(function(y,w){r(w,u.results)}),n.callback(u))}}function j(f){var e=ab.isFunction(f);return function(m){var k=m.term,h={results:[]};ab(e?f():f).each(function(){var r=this.text!==Z,n=r?this.text:this;if(""===k||m.matcher(k,n)){h.results.push(r?this:{id:this,text:this})}});m.callback(h)}}function l(e){if(ab.isFunction(e)){return !0}if(!e){return !1}throw Error("formatterName must be a function or a falsy value")}function T(e){return ab.isFunction(e)?e():e}function g(f){var e=0;ab.each(f,function(h,k){k.children?e+=g(k.children):e++});return e}function b(z,y,w,v){var n=z,u=!1,k,m,r,h;if(!v.createSearchChoice||!v.tokenSeparators||1>v.tokenSeparators.length){return Z}for(;;){u=-1;m=0;for(r=v.tokenSeparators.length;m<r&&!(h=v.tokenSeparators[m],u=z.indexOf(h),0<=u);m++){}if(0>u){break}k=z.substring(0,u);z=z.substring(u+h.length);if(0<k.length&&(k=v.createSearchChoice(k,y),k!==Z&&null!==k&&v.id(k)!==Z&&null!==v.id(k))){u=!1;m=0;for(r=y.length;m<r;m++){if(X(v.id(k),v.id(y[m]))){u=!0;break}}u||w(k)}}if(n!==z){return z}}function V(f,e){var h=function(){};h.prototype=new f;h.prototype.constructor=h;h.prototype.parent=f.prototype;h.prototype=ab.extend(h.prototype,e);return h}if(window.Select2===Z){var aa,x,U,S,d,s,c;aa={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case aa.LEFT:case aa.RIGHT:case aa.UP:case aa.DOWN:return !0}return !1},isControl:function(e){switch(e.which){case aa.SHIFT:case aa.CTRL:case aa.ALT:return !0}return e.metaKey?!0:!1},isFunctionKey:function(e){e=e.which?e.which:e;return 112<=e&&123>=e}};x=ab(document);var a=1;d=function(){return a++};x.bind("mousemove",function(e){c={x:e.pageX,y:e.pageY}});x=V(Object,{bind:function(f){var e=this;return function(){f.apply(e,arguments)}},init:function(h){var e,r;this.opts=h=this.prepareOpts(h);this.id=h.id;h.element.data("select2")!==Z&&null!==h.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.containerId="s2id_"+(h.element.attr("id")||"autogen"+d());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var n=!1,k;this.body=function(){!1===n&&(k=h.element.closest("body"),n=!0);return k};i(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.css(T(h.containerCss));this.container.addClass(T(h.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabIndex");this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){ab(this).select2("focus")}).attr("tabIndex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(T(h.dropdownCssClass));this.dropdown.data("select2",this);this.results=e=this.container.find(".select2-results");this.search=r=this.container.find("input.select2-input");r.attr("tabIndex",this.elementTabIndex);this.resultsPage=0;this.context=null;this.initContainer();this.results.bind("mousemove",function(v){var u=c;(u===Z||u.x!==v.pageX||u.y!==v.pageY)&&ab(v.target).trigger("mousemove-filtered",v)});this.dropdown.delegate(".select2-results","mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent));var m=this.results,f=Q(80,function(u){m.trigger("scroll-debounced",u)});m.bind("scroll",function(u){0<=W(u.target,m.get())&&f(u)});this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));ab.fn.mousewheel&&e.mousewheel(function(u,y,w,v){y=e.scrollTop();0<v&&0>=y-v?(e.scrollTop(0),Y(u)):0>v&&e.get(0).scrollHeight-e.scrollTop()+v<=e.height()&&(e.scrollTop(e.get(0).scrollHeight-e.height()),Y(u))});R(r);r.bind("keyup-change input paste",this.bind(this.updateResults));r.bind("focus",function(){r.addClass("select2-focused")});r.bind("blur",function(){r.removeClass("select2-focused")});this.dropdown.delegate(".select2-results","mouseup",this.bind(function(u){0<ab(u.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(u),this.selectHighlighted(u))}));this.dropdown.bind("click mouseup mousedown",function(u){u.stopPropagation()});ab.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());(h.element.is(":disabled")||h.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);e!==Z&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(f){var e,k,h;e=f.element;"select"===e.get(0).tagName.toLowerCase()&&(this.select=k=f.element);k&&ab.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in f){throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}});f=ab.extend({},{populateResults:function(m,w,v){var n,u=this.opts.id,r=this;n=function(F,E,D){var z,C,B,A,y,G,H;F=f.sortResults(F,E,v);z=0;for(C=F.length;z<C;z+=1){B=F[z],y=!0===B.disabled,A=!y&&u(B)!==Z,G=B.children&&0<B.children.length,H=ab("<li></li>"),H.addClass("select2-results-dept-"+D),H.addClass("select2-result"),H.addClass(A?"select2-result-selectable":"select2-result-unselectable"),y&&H.addClass("select2-disabled"),G&&H.addClass("select2-result-with-children"),H.addClass(r.opts.formatResultCssClass(B)),A=ab(document.createElement("div")),A.addClass("select2-result-label"),y=f.formatResult(B,A,v,r.opts.escapeMarkup),y!==Z&&A.html(y),H.append(A),G&&(G=ab("<ul></ul>"),G.addClass("select2-result-sub"),n(B.children,G,D+1),H.append(G)),H.data("select2-data",B),E.append(H)}};n(w,m,0)}},ab.fn.select2.defaults,f);"function"!==typeof f.id&&(h=f.id,f.id=function(m){return m[h]});if(ab.isArray(f.element.data("select2Tags"))){if("tags" in f){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+f.element.attr("id")}f.tags=f.element.attr("data-select2-tags")}if(k){f.query=this.bind(function(m){var w={results:[],more:!1},v=m.term,n,u,r;r=function(y,A){var z;y.is("option")?m.matcher(v,y.text(),y)&&A.push({id:y.attr("value"),text:y.text(),element:y.get(),css:y.attr("class"),disabled:X(y.attr("disabled"),"disabled")}):y.is("optgroup")&&(z={text:y.attr("label"),children:[],element:y.get(),css:y.attr("class")},y.children().each2(function(C,B){r(B,z.children)}),0<z.children.length&&A.push(z))};n=e.children();this.getPlaceholder()!==Z&&0<n.length&&(u=n[0],""===ab(u).text()&&(n=n.not(u)));n.each2(function(z,y){r(y,w.results)});m.callback(w)}),f.id=function(m){return m.id},f.formatResultCssClass=function(m){return m.css}}else{if(!("query" in f)){if("ajax" in f){if((k=f.element.data("ajax-url"))&&0<k.length){f.ajax.url=k}f.query=p.call(f.element,f.ajax)}else{"data" in f?f.query=o(f.data):"tags" in f&&(f.query=j(f.tags),f.createSearchChoice===Z&&(f.createSearchChoice=function(m){return{id:m,text:m}}),f.initSelection===Z&&(f.initSelection=function(m,r){var n=[];ab(q(m.val(),f.separator)).each(function(){var u=this,w=this,v=f.tags;ab.isFunction(v)&&(v=v());ab(v).each(function(){if(X(this.id,u)){return w=this.text,!1}});n.push({id:u,text:w})});r(n)}))}}}if("function"!==typeof f.query){throw"query function not defined for Select2 "+f.element.attr("id")}return f},monitorSource:function(){var f=this.opts.element,e;f.bind("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}));e=this.bind(function(){var k,h;k="disabled"!==this.opts.element.attr("disabled");h="readonly"===this.opts.element.attr("readonly");k=k&&!h;this.enabled!==k&&(k?this.enable():this.disable());i(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(T(this.opts.containerCssClass));i(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(T(this.opts.dropdownCssClass))});f.bind("propertychange.select2 DOMAttrModified.select2",e);"undefined"!==typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(h){h.forEach(e)}),this.propertyObserver.observe(f.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(e){e=e||{};e=ab.extend({},e,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(e);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var B=this.container.offset(),A=this.container.outerHeight(!1),z=this.container.outerWidth(!1),y=this.dropdown.outerHeight(!1),v=ab(window).scrollLeft()+ab(window).width(),m=ab(window).scrollTop()+ab(window).height(),A=B.top+A,w=B.left,m=A+y<=m,r=B.top-y>=this.body().scrollTop(),u=this.dropdown.outerWidth(!1),v=w+u<=v,e=this.dropdown.hasClass("select2-drop-above"),n;"static"!==this.body().css("position")&&(n=this.body().offset(),A-=n.top,w-=n.left);e?(e=!0,!r&&m&&(e=!1)):(e=!1,!m&&r&&(e=!0));v||(w=B.left+z-u);e?(A=B.top-y,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above"));B=ab.extend({top:A,left:w,width:z},T(this.opts.dropdownCss));this.dropdown.css(B)},shouldOpen:function(){var e;if(this.opened()){return !1}e=ab.Event("opening");this.opts.element.trigger(e);return !e.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return !1}window.setTimeout(this.bind(this.opening),1);return !0},opening:function(){var f=this.containerId,e="scroll."+f,m="resize."+f,k="orientationchange."+f;this.clearDropdownAlignmentPreference();this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());this.updateResults(!0);f=ab("#select2-drop-mask");0==f.length&&(f=ab(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body()),f.bind("mousedown touchstart",function(){var n=ab("#select2-drop");0<n.length&&(n=n.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close())}));this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f);ab("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");f.css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});f.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();var h=this;this.container.parents().add(window).each(function(){ab(this).bind(m+" "+e+" "+k,function(){ab("#select2-drop-mask").css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});h.positionDropdown()})});this.focusSearch()},close:function(){if(this.opened()){var f=this.containerId,e="scroll."+f,k="resize."+f,h="orientationchange."+f;this.container.parents().add(window).each(function(){ab(this).unbind(e).unbind(k).unbind(h)});this.clearDropdownAlignmentPreference();ab("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.opts.element.trigger(ab.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var f=this.results,e,m,k,h;m=this.highlight();0>m||(0==m?f.scrollTop(0):(e=this.findHighlightableChoices(),k=ab(e[m]),h=k.offset().top+k.outerHeight(!0),m===e.length-1&&(e=f.find("li.select2-more-results"),0<e.length&&(h=e.offset().top+e.outerHeight(!0))),e=f.offset().top+f.outerHeight(!0),h>e&&f.scrollTop(f.scrollTop()+(h-e)),h=k.offset().top-f.offset().top,0>h&&"none"!=k.css("display")&&f.scrollTop(f.scrollTop()+h)))},findHighlightableChoices:function(){this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)");return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(f){for(var e=this.findHighlightableChoices(),k=this.highlight();-1<k&&k<e.length;){var k=k+f,h=ab(e[k]);if(h.hasClass("select2-result-selectable")&&!h.hasClass("select2-disabled")&&!h.hasClass("select2-selected")){this.highlight(k);break}}},highlight:function(f){var e=this.findHighlightableChoices();if(0===arguments.length){return W(e.filter(".select2-highlighted")[0],e.get())}f>=e.length&&(f=e.length-1);0>f&&(f=0);this.results.find(".select2-highlighted").removeClass("select2-highlighted");e=ab(e[f]);e.addClass("select2-highlighted");this.ensureHighlightVisible();(e=e.data("select2-data"))&&this.opts.element.trigger({type:"highlight",val:this.id(e),choice:e})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(f){f=ab(f.target).closest(".select2-result-selectable");if(0<f.length&&!f.is(".select2-highlighted")){var e=this.findHighlightableChoices();this.highlight(e.index(f))}else{0==f.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")}},loadMoreIfNeeded:function(){var k=this.results,h=k.find("li.select2-more-results"),v,u=this.resultsPage+1,m=this,r=this.search.val(),n=this.context;0!==h.length&&(v=h.offset().top-k.offset().top-k.height(),v<=this.opts.loadMorePadding&&(h.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:u,context:n,matcher:this.opts.matcher,callback:this.bind(function(e){m.opened()&&(m.opts.populateResults.call(this,k,e.results,{term:r,page:u,context:n}),!0===e.more?(h.detach().appendTo(k).text(m.opts.formatLoadMore(u+1)),window.setTimeout(function(){m.loadMoreIfNeeded()},10)):h.remove(),m.positionDropdown(),m.resultsPage=u,m.context=e.context)})})))},tokenize:function(){},updateResults:function(y){function w(){n.scrollTop(0);u.removeClass("select2-active");m.positionDropdown()}function v(f){n.html(f);w()}var u=this.search,n=this.results,r=this.opts,e,m=this;if(!(!0!==y&&(!1===this.showSearchInput||!this.opened()))){u.addClass("select2-active");var h=this.getMaximumSelectionSize();if(1<=h&&(e=this.data(),ab.isArray(e)&&e.length>=h&&l(r.formatSelectionTooBig,"formatSelectionTooBig"))){v("<li class='select2-selection-limit'>"+r.formatSelectionTooBig(h)+"</li>");return}u.val().length<r.minimumInputLength?l(r.formatInputTooShort,"formatInputTooShort")?v("<li class='select2-no-results'>"+r.formatInputTooShort(u.val(),r.minimumInputLength)+"</li>"):v(""):(r.formatSearching()&&!0===y&&v("<li class='select2-searching'>"+r.formatSearching()+"</li>"),r.maximumInputLength&&u.val().length>r.maximumInputLength?l(r.formatInputTooLong,"formatInputTooLong")?v("<li class='select2-no-results'>"+r.formatInputTooLong(u.val(),r.maximumInputLength)+"</li>"):v(""):(e=this.tokenize(),e!=Z&&null!=e&&u.val(e),this.resultsPage=1,r.query({element:r.element,term:u.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(f){var z;this.opened()&&(this.context=f.context===Z?null:f.context,this.opts.createSearchChoice&&""!==u.val()&&(z=this.opts.createSearchChoice.call(null,u.val(),f.results),z!==Z&&null!==z&&m.id(z)!==Z&&null!==m.id(z)&&0===ab(f.results).filter(function(){return X(m.id(this),m.id(z))}).length&&f.results.unshift(z)),0===f.results.length&&l(r.formatNoMatches,"formatNoMatches")?v("<li class='select2-no-results'>"+r.formatNoMatches(u.val())+"</li>"):(n.empty(),m.opts.populateResults.call(this,n,f.results,{term:u.val(),page:this.resultsPage,context:null}),!0===f.more&&l(r.formatLoadMore,"formatLoadMore")&&(n.append("<li class='select2-more-results'>"+m.opts.escapeMarkup(r.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(f,y),w()))})})))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){P(this.search)},selectHighlighted:function(f){var e=this.highlight(),h=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");h&&(this.highlight(e),this.onSelect(h,f))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var e=function(){var f,m,k,h;if("off"===this.opts.width){return null}if("element"===this.opts.width){return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"}if("copy"===this.opts.width||"resolve"===this.opts.width){f=this.opts.element.attr("style");if(f!==Z){f=f.split(";");k=0;for(h=f.length;k<h;k+=1){if(m=f[k].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==m&&1<=m.length){return m[1]}}}return"resolve"===this.opts.width?(f=this.opts.element.css("width"),0<f.indexOf("%")?f:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return ab.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==e&&this.container.css("width",e)}});U=V(x,{createContainer:function(){return ab(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>   <div><b></b></div></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop' style='display:none'>   <div class='select2-search'>       <input type='text' autocomplete='off' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments);this.focusser.attr("disabled","disabled");this.opts.element.trigger(ab.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),P(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var f,e=this.container,h=this.dropdown;this.showSearch(0<=this.opts.minimumResultsForSearch);this.selection=f=e.find(".select2-choice");this.focusser=e.find(".select2-focusser");this.search.bind("keydown",this.bind(function(k){if(this.enabled){if(k.which===aa.PAGE_UP||k.which===aa.PAGE_DOWN){Y(k)}else{switch(k.which){case aa.UP:case aa.DOWN:this.moveHighlight(k.which===aa.UP?-1:1);Y(k);break;case aa.TAB:case aa.ENTER:this.selectHighlighted();Y(k);break;case aa.ESC:this.cancel(k),Y(k)}}}}));this.focusser.bind("keydown",this.bind(function(k){if(this.enabled&&!(k.which===aa.TAB||aa.isControl(k)||aa.isFunctionKey(k)||k.which===aa.ESC)){if(!1===this.opts.openOnEnter&&k.which===aa.ENTER){Y(k)}else{if(k.which==aa.DOWN||k.which==aa.UP||k.which==aa.ENTER&&this.opts.openOnEnter){this.open(),Y(k)}else{if(k.which==aa.DELETE||k.which==aa.BACKSPACE){this.opts.allowClear&&this.clear(),Y(k)}}}}}));R(this.focusser);this.focusser.bind("keyup-change input",this.bind(function(k){this.opened()||(this.open(),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.focusser.val(""),Y(k))}));f.delegate("abbr","mousedown",this.bind(function(k){this.enabled&&(this.clear(),k.preventDefault(),k.stopImmediatePropagation(),this.close(),this.selection.focus())}));f.bind("mousedown",this.bind(function(k){this.opened()?this.close():this.enabled&&this.open();Y(k)}));h.bind("mousedown",this.bind(function(){this.search.focus()}));f.bind("focus",this.bind(function(k){Y(k)}));this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")}));this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}));this.initContainerWidth();this.setPlaceholder()},clear:function(){var e=this.selection.data("select2-data");this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();this.opts.element.trigger({type:"removed",val:this.id(e),choice:e});this.triggerChange({removed:e})},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()){this.close(),this.setPlaceholder()}else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(f){f!==Z&&null!==f&&(e.updateSelection(f),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(f,k){var h=f.find(":selected");ab.isFunction(k)&&k({id:h.attr("value"),text:h.text(),element:h})}:"data" in e&&(e.initSelection=e.initSelection||function(f,k){var h=f.val();e.query({matcher:function(m,r,n){return X(h,e.id(n))},callback:!ab.isFunction(k)?ab.noop:function(m){k(m.results.length?m.results[0]:null)}})});return e},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?Z:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();""===this.opts.element.val()&&e!==Z&&!(this.select&&""!==this.select.find("option:first").text())&&(this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide())},postprocessResults:function(h,f){var n=0,m=this,k=!0;this.findHighlightableChoices().each2(function(r,e){if(X(m.id(e.data("select2-data")),m.opts.element.val())){return n=r,!1}});this.highlight(n);!0===f&&(k=this.opts.minimumResultsForSearch,k=0>k?!1:g(h.results)>=k,this.showSearch(k))},showSearch:function(e){this.showSearchInput=e;this.dropdown.find(".select2-search")[e?"removeClass":"addClass"]("select2-search-hidden");ab(this.dropdown,this.container)[e?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(f,e){var h=this.opts.element.val();this.opts.element.val(this.id(f));this.updateSelection(f);this.opts.element.trigger({type:"selected",val:this.id(f),choice:f});this.close();(!e||!e.noFocus)&&this.selection.focus();X(h,this.id(f))||this.triggerChange()},updateSelection:function(f){var e=this.selection.find("span");this.selection.data("select2-data",f);e.empty();f=this.opts.formatSelection(f,e);f!==Z&&e.append(this.opts.escapeMarkup(f));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==Z&&this.selection.find("abbr").show()},val:function(){var f,e=!1,k=null,h=this;if(0===arguments.length){return this.opts.element.val()}f=arguments[0];1<arguments.length&&(e=arguments[1]);if(this.select){this.select.val(f).find(":selected").each2(function(n,m){k={id:m.attr("value"),text:m.text()};return !1}),this.updateSelection(k),this.setPlaceholder(),e&&this.triggerChange()}else{if(this.opts.initSelection===Z){throw Error("cannot call val() if initSelection() is not defined")}!f&&0!==f?(this.clear(),e&&this.triggerChange()):(this.opts.element.val(f),this.opts.initSelection(this.opts.element,function(m){h.opts.element.val(!m?"":h.id(m));h.updateSelection(m);h.setPlaceholder();e&&h.triggerChange()}))}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(f){var e;if(0===arguments.length){return e=this.selection.data("select2-data"),e==Z&&(e=null),e}!f||""===f?this.clear():(this.opts.element.val(!f?"":this.id(f)),this.updateSelection(f))}});S=V(x,{createContainer:function(){return ab(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi' style='display:none;'>   <ul class='select2-results'>   </ul></div>")},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(f,k){var h=[];f.find(":selected").each2(function(n,m){h.push({id:m.attr("value"),text:m.text(),element:m[0]})});k(h)}:"data" in e&&(e.initSelection=e.initSelection||function(f,k){var h=q(f.val(),e.separator);e.query({matcher:function(m,r,n){return ab.grep(h,function(u){return X(u,e.id(n))}).length},callback:!ab.isFunction(k)?ab.noop:function(m){k(m.results)}})});return e},initContainer:function(){var e;this.searchContainer=this.container.find(".select2-search-field");this.selection=e=this.container.find(".select2-choices");this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())}));this.search.bind("keydown",this.bind(function(f){if(this.enabled){if(f.which===aa.BACKSPACE&&""===this.search.val()){this.close();var h;h=e.find(".select2-search-choice-focus");if(0<h.length){this.unselect(h.first());this.search.width(10);Y(f);return}h=e.find(".select2-search-choice:not(.select2-locked)");0<h.length&&h.last().addClass("select2-search-choice-focus")}else{e.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")}if(this.opened()){switch(f.which){case aa.UP:case aa.DOWN:this.moveHighlight(f.which===aa.UP?-1:1);Y(f);return;case aa.ENTER:case aa.TAB:this.selectHighlighted();Y(f);return;case aa.ESC:this.cancel(f);Y(f);return}}f.which===aa.TAB||aa.isControl(f)||aa.isFunctionKey(f)||f.which===aa.BACKSPACE||f.which===aa.ESC||f.which===aa.ENTER&&(!1===this.opts.openOnEnter||f.altKey||f.ctrlKey||f.shiftKey||f.metaKey)||(this.open(),(f.which===aa.PAGE_UP||f.which===aa.PAGE_DOWN)&&Y(f))}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(f){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.opened()||this.clearSearch();f.stopImmediatePropagation()}));this.container.delegate(".select2-choices","mousedown",this.bind(function(f){this.enabled&&!(0<ab(f.target).closest(".select2-search-choice").length)&&(this.clearPlaceholder(),this.open(),this.focusSearch(),f.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(f){f!==Z&&null!==f&&(e.updateSelection(f),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==Z&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.resizeSearch()):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch();this.opts.element.trigger(ab.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus();this.opts.element.triggerHandler("focus")},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(f){var e=[],k=[],h=this;ab(f).each(function(){0>W(h.id(this),e)&&(e.push(h.id(this)),k.push(this))});f=k;this.selection.find(".select2-search-choice").remove();ab(f).each(function(){h.addSelectedChoice(this)});h.postprocessResults()},tokenize:function(){var e=this.search.val(),e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts);null!=e&&e!=Z&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(f,e){this.addSelectedChoice(f);this.opts.element.trigger({type:"selected",val:this.id(f),choice:f});(this.select||!this.opts.closeOnSelect)&&this.postprocessResults();this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10));this.triggerChange({added:f});(!e||!e.noFocus)&&this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(h){var e=!h.locked,r=ab("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),n=ab("<li class='select2-search-choice select2-locked'><div></div></li>"),r=e?r:n,n=this.id(h),k=this.getVal(),m;m=this.opts.formatSelection(h,r.find("div"));m!=Z&&r.find("div").replaceWith("<div>"+this.opts.escapeMarkup(m)+"</div>");e&&r.find(".select2-search-choice-close").bind("mousedown",Y).bind("click dblclick",this.bind(function(f){this.enabled&&(ab(f.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(ab(f.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue(),Y(f))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));r.data("select2-data",h);r.insertBefore(this.searchContainer);k.push(n);this.setVal(k)},unselect:function(f){var e=this.getVal(),k,h;f=f.closest(".select2-search-choice");if(0===f.length){throw"Invalid argument: "+f+". Must be .select2-search-choice"}if(k=f.data("select2-data")){h=W(this.id(k),e),0<=h&&(e.splice(h,1),this.setVal(e),this.select&&this.postprocessResults()),f.remove(),this.opts.element.trigger({type:"removed",val:this.id(k),choice:k}),this.triggerChange({removed:k})}},postprocessResults:function(){var f=this.getVal(),e=this.results.find(".select2-result"),k=this.results.find(".select2-result-with-children"),h=this;e.each2(function(m,r){var n=h.id(r.data("select2-data"));0<=W(n,f)&&(r.addClass("select2-selected"),r.find(".select2-result-selectable").addClass("select2-selected"))});k.each2(function(n,m){!m.is(".select2-result-selectable")&&0===m.find(".select2-result-selectable:not(.select2-selected)").length&&m.addClass("select2-selected")});-1==this.highlight()&&h.highlight(0)},resizeSearch:function(){var h,e,n,m,k=this.search.outerWidth(!1)-this.search.width();h=this.search;s||(n=h[0].currentStyle||window.getComputedStyle(h[0],null),s=ab(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),s.attr("class","select2-sizer"),ab("body").append(s));s.text(h.val());h=s.width()+10;e=this.search.offset().left;n=this.selection.width();m=this.selection.offset().left;e=n-(e-m)-k;e<h&&(e=n-k);40>e&&(e=n-k);0>=e&&(e=h);this.search.width(e)},getVal:function(){var e;if(this.select){return e=this.select.val(),null===e?[]:e}e=this.opts.element.val();return q(e,this.opts.separator)},setVal:function(f){var e;this.select?this.select.val(f):(e=[],ab(f).each(function(){0>W(this,e)&&e.push(this)}),this.opts.element.val(0===e.length?"":e.join(this.opts.separator)))},val:function(){var f,e=!1,h=this;if(0===arguments.length){return this.getVal()}f=arguments[0];1<arguments.length&&(e=arguments[1]);if(!f&&0!==f){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),e&&this.triggerChange()}else{this.setVal(f);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection)),e&&this.triggerChange()}else{if(this.opts.initSelection===Z){throw Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(k){var m=ab(k).map(h.id);h.setVal(m);h.updateSelection(k);h.clearSearch();e&&h.triggerChange()})}this.clearSearch()}},onSortStart:function(){if(this.select){throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var f=[],e=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){f.push(e.opts.id(ab(this).data("select2-data")))});this.setVal(f);this.triggerChange()},data:function(f){var e=this,h;if(0===arguments.length){return this.selection.find(".select2-search-choice").map(function(){return ab(this).data("select2-data")}).get()}f||(f=[]);h=ab.map(f,function(k){return e.opts.id(k)});this.setVal(h);this.updateSelection(f);this.clearSearch()}});ab.fn.select2=function(){var h=Array.prototype.slice.call(arguments,0),e,u,r,n,m="val destroy opened open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data".split(" ");this.each(function(){if(0===h.length||"object"===typeof h[0]){e=0===h.length?{}:ab.extend({},h[0]),e.element=ab(this),"select"===e.element.get(0).tagName.toLowerCase()?n=e.element.attr("multiple"):(n=e.multiple||!1,"tags" in e&&(e.multiple=n=!0)),u=n?new S:new U,u.init(e)}else{if("string"===typeof h[0]){if(0>W(h[0],m)){throw"Unknown method: "+h[0]}r=Z;u=ab(this).data("select2");if(u!==Z&&(r="container"===h[0]?u.container:u[h[0]].apply(u,h.slice(1)),r!==Z)){return !1}}else{throw"Invalid arguments to select2 plugin: "+h}}});return r===Z?this:r};ab.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(f,e,k,h){e=[];t(f.text,k.term,e,h);return e.join("")},formatSelection:function(e){return e?e.text:Z},sortResults:function(e){return e},formatResultCssClass:function(){return Z},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(f,e){var h=e-f.length;return"Please enter "+h+" more character"+(1==h?"":"s")},formatInputTooLong:function(f,e){var h=f.length-e;return"Please enter "+h+" less character"+(1==h?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(f,e){return 0<=e.toUpperCase().indexOf(f.toUpperCase())},separator:",",tokenSeparators:[],tokenizer:b,escapeMarkup:function(f){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(f).replace(/[&<>"'/\\]/g,function(h){return e[h[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}};window.Select2={query:{ajax:p,local:o,tags:j},util:{debounce:Q,markMatch:t},"class":{"abstract":x,single:U,multi:S}}}})(jQuery);(function(a){a.extend(a.fn.select2.defaults,{formatNoMatches:function(){return"No se encontraron resultados"},formatInputTooShort:function(b,c){var d=c-b.length;return"Por favor adicione "+d+" caracter"+(d==1?"":"es")},formatInputTooLong:function(c,b){var d=c.length-b;return"Por favor elimine "+d+" caracter"+(d==1?"":"es")},formatSelectionTooBig:function(b){return"Solo puede seleccionar "+b+" elemento"+(b==1?"":"s")},formatLoadMore:function(b){return"Cargando mÃ¡s resultados..."},formatSearching:function(){return"Buscando..."}})})(jQuery);(function(a){a.extend(a.fn.select2.defaults,{formatNoMatches:function(){return"Nincs talÃ¡lat."},formatInputTooShort:function(b,c){var d=c-b.length;return"TÃºl rÃ¶vid. MÃ©g "+d+" karakter hiÃ¡nyzik."},formatInputTooLong:function(c,b){var d=c.length-b;return"TÃºl hosszÃº. "+d+" kerekterrel tÃ¶bb mint kellene."},formatSelectionTooBig:function(b){return"Csak "+b+" elemet lehet kivÃ¡lasztani."},formatLoadMore:function(b){return"TÃ¶ltÃ©s..."},formatSearching:function(){return"KeresÃ©s..."}})})(jQuery);(function(a){a.extend(a.fn.select2.defaults,{formatNoMatches:function(){return"Nessuna corrispondenza trovata"},formatInputTooShort:function(b,c){var d=c-b.length;return"Inserisci ancora "+d+" caratter"+(d==1?"e":"i")},formatInputTooLong:function(c,b){var d=c.length-b;return"Inserisci "+d+" caratter"+(d==1?"e":"i")+" in meno"},formatSelectionTooBig:function(b){return"Puoi selezionare solo "+b+" element"+(b==1?"o":"i")},formatLoadMore:function(b){return"Caricamento in corso..."},formatSearching:function(){return"Ricerca..."}})})(jQuery);var Vox=Vox||{};Vox.Config=Vox.Config||(function(){var a={};return{set:function(b,c){a[b]=c},get:function(c){var b=a[c];if(b===null||b===undefined){throw"Attempting to retrieve a configuration that has not been set :"+c}return b}}})();var VoxDict=function(){};VoxDict.prototype.mappings={};VoxDict.prototype.replaceToken="%TOKEN%";VoxDict.prototype.replaceRegEx=/%TOKEN%/;VoxDict.prototype.get=function(d,e){var b=this.mappings[d];if(e){if(typeof e==="string"){return b.replace(this.replaceRegEx,e.toString())}for(var c=0,a=e.length;c<a;c++){b=b.replace(this.replaceRegEx,e[c].toString())}}return b};var Vox=Vox||{};Vox.Environment=function(h){var c=h(window);var g=h("body");var n=null,i=null,m=null,l=null;var j=(("ontouchstart" in window)||window.navigator.msMaxTouchPoints||(window.DocumentTouch&&document instanceof DocumentTouch)==true)?true:false,f=!!window.devicePixelRatio?window.devicePixelRatio:1,e,b=false;function d(){var o=o||null;if(o){if(o==0||o==180){e="landscape"}if(o==90||o==-90){e="portrait"}}else{e=null}}function k(o){if(i!=null){l=o;return}if(l==null){l=o}i=setTimeout(function(){clearTimeout(i);i=null;c.trigger("throttledScroll",m);l=null;d()},50)}function a(o){if(n!=null){m=o;return}if(m==null){m=o}n=setTimeout(function(){clearTimeout(n);n=null;c.trigger("throttledResize",m);m=null;d()},50)}(function(){var o=document.createElement("div");o.innerHTML='<div style="-webkit-transition:color 1s linear;-moz-transition:color 1s linear;"></div>';cssTransitionsSupported=(o.firstChild.style.webkitTransition!==undefined)||(o.firstChild.style.MozTransition!==undefined);delete o})();c.bind("resize",a);c.bind("scroll",k);d();g.addClass("jsAvailable");if(j){g.addClass("touchAvailable")}else{g.addClass("touchUnavailable")}if(f>1){g.addClass("retina")}if(f>=2){g.addClass("retina-2x")}if(Util.UserAgentProfiler.isAndroidLt3()){g.addClass("android-lt-3")}if(Util.UserAgentProfiler.isMobile()){g.addClass("mobile-context")}return{breakpoints:function(){return Proxy.Breakpoints.breakpoints()},currentBreakpoint:function(){return Proxy.Breakpoints.getCurrentBreakpoint()},touch:function(){return j},clickEvent:function(){return !!j?(window.navigator.msPointerEnabled?"MSPointerDown":"touchstart"):"click"},pixelRatio:function(){return f},orientation:function(){return e},cssTransitions:function(){return b},addEnvVar:function(o,p){this[o]=p}}}(jQuery);var Vox=Vox||{};Vox.EventDispatcher=function(){var f={};var h={};var a=Util.getUrlVars()["debugEventDispatcher"]==true;var c=Util.getUrlVars()["debugVerbose"]==true;function g(k,i,j){if(!k[i]){k[i]=[]}k[i].push(j)}function e(l,o,k){var o=o||{};var n=f[l];if(a){console.log("Vox.EventDispatcher is publishing the following event",l,o)}if(k){if(a){console.log("Vox.EventDispatcher event "+l+" should be applied to all subsequent events",l,o)}g(h,l,o)}if(!f[l]){return}o.eventType=l;for(var m=0,j=n.length;m<j;m++){n[m](o)}}function d(k,m){g(f,k,m);if(a&&!c){console.log("Vox.EventDispatcher is subscribing to the following event",k)}if(a&&c){console.log("Vox.EventDispatcher is subscribing to the following event",k,m)}var n=h[k];if(n){for(var l=0,j=n.length;l<j;l++){if(a){console.log("Vox.EventDispatcher has found an event of the type "+k+" that should be applied to any subsequent subscriber",k,n[l])}m(n[l])}}}function b(j,m){if(!f[j]){return}var k=f[j];for(var l=k.length-1;l>-1;l--){if(k[l]==m){k.splice(l,0)}}}return{publish:function(j,k,i){var i=i||false;e(j,k,i)},subscribe:function(i,j){d(i,j)},unsubscribe:function(i,j){b(i,j)}}}();var Vox=Vox||{};Vox.Modules={};jQuery(document).ready(function(g){Vox.Module.prototype.instrumentation=Util.Instrumentation;Vox.Module.prototype.eventDispatcher=Vox.EventDispatcher;var e=Vox.Modules,b=Vox.ModulesUtil,f=[],a=0;for(var d in e){f[f.length]=d}function c(){for(var i=f.length;a<i;a++){e[f[a]]._init()}if(window.removeEventListener){window.removeEventListener("error",h)}else{if(window.detachEvent){window.detachEvent("error",h)}}}function h(k,j,i){a+=1;c()}if(window.addEventListener){window.addEventListener("error",h,false)}else{if(window.attachEvent){window.attachEvent("error",h)}}c()});Vox.Module=function(){};Vox.Module.prototype.util=Vox.ModuleUtil;Vox.Module.prototype.templates=["default"];Vox.Module.prototype.name=null;Vox.Module.prototype.view=null;Vox.Module.prototype.views=[];Vox.Module.prototype.bindings={};Vox.Module.prototype.isInit=false;Vox.Module.prototype.env=Vox.Environment;Vox.Module.prototype.instrumentation=null;Vox.Module.prototype.eventDispatcher=null;Vox.Module.prototype.construct=function(){this.util.construct.apply(this,arguments)};Vox.Module.prototype.init=function(a){throw"You must provide an init method for "+this.name};Vox.Module.prototype.initUI=function(){throw"You must provide an initUI method for "+this.name};Vox.Module.prototype.detachUI=function(){throw"You must provide an detachUI method for "+this.name};Vox.Module.prototype._init=function(){this.init();this.isInit=true};var Vox=Vox||{};Vox.PageLayouts={};jQuery(document).ready(function(c){var a=Vox.PageLayouts;for(var b in a){a[b]._init()}});Vox.PageLayout=function(){};Vox.PageLayout.prototype.util=Vox.PageLayoutUtil;Vox.PageLayout.prototype._init=function(){this.isInit=true;this.init()};Vox.PageLayout.prototype.instrumentation=Util.Instrumentation;Vox.PageLayout.prototype.env=Vox.Environment;Vox.PageLayout.prototype.name=null;Vox.PageLayout.prototype.isInit=false;Vox.PageLayout.prototype.init=function(){throw"You must provide an init method for "+this.name};Vox.Module.prototype.initUI=function(){throw"You must provide an initUI method for "+this.name};var Dict=Dict||{};Dict.Events=function(){var a=new VoxDict();a.mappings={click:"click tap",mousewheel:"mousewheel scrollstop"};return a}();Dict.voxRemoteDataCalls=function(){var a=new VoxDict();a.mappings={entryContent:a.replaceToken+"?layout_section="+a.replaceToken,adContent:"/data-stubs/adContent/"+a.replaceToken+"/",gravyTrain:"/data-stubs/gravyTrain/train.html"};return a}();Dict.sbnRemoteDataCalls=function(){var a=new VoxDict();a.mappings={networkNavMenu:"/data-stubs/network_bar/nav_items.json"};return a}();jQuery(document).ready(function(b){var a={networkVars:{sbn:{scope:b(".sbn-entry-body-text, .feature-body"),linkable:"p",buffer:false},verge:{scope:b(".article-body, .entry-content"),linkable:"p",buffer:b("#network-bar")},polygon:{scope:b("article .body, .forum_article"),linkable:"p",buffer:b("#polybar")}},init:function(){this.config(function(){if(a.scope.length){b(document).bind("keydown",a.keydown);a.buildLinks(a.readHash)}})},config:function(c){this.network=b("head").data("network");this.scope=this.networkVars[this.network].scope;this.linkable=this.scope.find(this.networkVars[this.network].linkable).filter(function(){if(b(this).parents("table").length==0){return b(this)}});this.keyStore=this.keyDivider="|";this.trigger="|16|16|";this.linksVisible=false;this.linkClassname="pgh-link";this.scrollSpeed=200;this.highlightFadeSpeed=5000;this.extraBuffer=100;this.loaded=false;this.paragraphClassname="pgh-paragraph";this.buffer=(this.networkVars[this.network].buffer)?this.networkVars[this.network].buffer.outerHeight():0;c()},buildLinks:function(c){b("head").append('<link rel="stylesheet" href="/stylesheets/chorus/lib/paragraph.css" type="text/css" />');a.linkable.each(function(d,e){var g=b(e);if(g.text().replace(/^\s+|\s+$/g,"")!==""){var h=g.offset();var f=b('<a href="" id="pgh'+d+'" class="'+a.linkClassname+'" />').css({top:h.top,left:h.left}).data({id:d,top:Math.floor(h.top)});g.attr("id","paragraph"+d).addClass(a.paragraphClassname).data("id",d);b("body").append(f)}});a.links=b("."+a.linkClassname);a.links.on("click",a.buildHash);c()},recalculateLinks:function(){b("."+a.paragraphClassname).each(function(c,d){var f=b(d);var g=f.offset();var e=b("#pgh"+f.data("id"));e.css("top",g.top).data("top",g.top)})},buildHash:function(){var c=b(this).data();window.location.hash="pgh/"+c.id+"/"+c.top;a.scrollToParagraph(c.id,c.top,false);return false},readHash:function(){if(window.location.hash){var c=window.location.hash.split("/");a.scrollToParagraph(c[1],c[2],true)}},scrollToParagraph:function(h,f,d){var c=f-this.buffer;var g=b("#paragraph"+h);if(d){var e=this.scope.find(this.networkVars[this.network].linkable);c-=this.extraBuffer;e.fadeTo(0,0.25,function(){g.fadeTo(0,1)});setTimeout(function(){e.fadeTo(500,1)},this.highlightFadeSpeed)}b("html, body").animate({scrollTop:c},this.scrollSpeed)},keydown:function(d){var c=d.keyCode;a.keyStore=a.keyStore+c+a.keyDivider;if(a.keyStore.indexOf(a.trigger)>-1){if(a.linksVisible){a.linksVisible=false;a.links.hide()}else{if(!a.loaded){a.recalculateLinks();a.loaded=true}a.linksVisible=true;a.links.show()}}setTimeout(function(){a.keyStore=a.keyDivider},500)}};a.init()});Dict.sbnRemoteDataCalls=function(){var a=new VoxDict();a.mappings={networkNavMenu:"/data-stubs/network_bar/nav_items.json"};return a}();Vox.PageLayouts.sbnEntryGroup=function(c){var g=new Vox.PageLayout();g.name="sbnHome";g.statsdKey="";var m=c(window);var p=c("body");var e=".sbn-pl-nav-header",s=".sbn-pl-home-upper-cover",u=".sbn-pl-home-lower-cover",f=".sbn-pl-home-inner-content",o="ui-scroll-stage-one",r="ui-scroll-stage-two";var l=0,j=false;var q,i,d,b,t;var k=g.name+"StyleOverRides";function n(){var w=g.view.find(s),v=g.view.find(u),x=g.view.find(f);q=w.offset().top;i=w.height();d=v.height();b=v.width();t=v.offset().top;if(j===false){return}p.find("#"+k).remove();if(g.env.currentBreakpoint().index<3){return}p.append('<style id="'+k+'" type="text/css">'+s+" { min-height : "+d+"px;} "+f+" { margin-top : -"+(d+20)+"px; max-width : "+b+"px;}</style>")}function h(v){n();a(v)}function a(w){if(j===false){return}var v=g.view.find(s),x=m.scrollTop();q=v.offset().top;i=v.height();if(x>=q+i){if(l<2){g.view.addClass("ui-scroll-stage-two");g.view.addClass("ui-scroll-stage-one");l=2}}else{if(l>1){g.view.removeClass("ui-scroll-stage-two");l=1}}if(x>=q-20){if(l<1){g.view.addClass("ui-scroll-stage-one");l=1}}else{if(l>0){g.view.removeClass("ui-scroll-stage-one");l=0}}}g.init=function(){this.view=c(".sbn-pl-home");if(this.view.length<1){return}this.initUI()};g.initUI=function(v){var w=this.instrumentation.start(this.name+" addViews");if(g.view.find(".sbn-pl-home-upper-cover").length>0){j=true;return}m.bind("throttledScroll",a);m.bind("resizeStop",h);n();h();this.instrumentation.finish(w)};return g}(jQuery);Vox.Modules.sbnEntryDropCap=function(b){var a=new Vox.Module();a.name="sbnEntryDropCap";a.statsdKey=" pls.modules.12268821-1861-458C-B3AC-41BAB7D4B8CB";var c=b(window);a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".sbn-entry-body-text");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){var e=this.view.find("p:first-child");if(typeof e!=="undefined"){e=e.first();var f=e.text();if(f.match(/^[a-zA-Z]/)!==null&&f.length>170&&f.split(" ").length>30){e.addClass("dropcap")}}};return a}(jQuery);Vox.Modules.sbnFanShotsRecommended=function(b){var a=new Vox.Module();a.name="sbnFanShotsRecommended";a.statsdKey=" pls.modules.9217D42D-ECAB-4330-8920-A820B656F4C9";var c=b(window);a.events=[""];a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".sbn-fan-shots-recommended");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){};return a}(jQuery);Vox.Modules.sbnFeaturedPoll=(function(h){var c=new Vox.Module();var d,g;var b=function(){h.ajax({url:"/polls/results_sbnu",data:{id:g},context:d}).done(function(i){h(this).html(i);e()});return false};var a=function(){location.reload(true);return false};var f=function(){var i=h("input:radio:checked",d);if(i.length){h.ajax({url:"/polls/vote_sbnu",data:{poll_option:i[0].value,id:g},type:"POST"}).done(b)}return false};var e=function(){var j=h(".view-results",d),k=h(".submit-vote",d),i=h(".view-options",d);if(i.length){i.unbind();i.click(a)}if(j.length){j.unbind();j.click(b)}if(k.length){k.unbind();k.click(f)}};c.init=function(){d=h("#featured-poll-container");g=d.data("id");e()};c.initUI=function(){};return c})(jQuery);(function(a){$window=a(window),$document=a(document),$body=a("body"),bd=$body.data(),methods={init:function(){}},_sbn={ie8_background_cover:function(){var b=[a(".sbn-site-logo-image div"),a("[data-original]")];a(b).each(function(c,d){a(d).each(function(g,i){if(a(i).is(":visible")){var h=a(i).css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");var f=a(i).attr("style")+";";f=f+"filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+h+"',sizingMethod='scale');";f=f+"-ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+h+"',sizingMethod='scale');";a(i).attr("style",f);a(i).css("background-image","url()")}})})},remove_empty_breakers:function(){var b=a(".sbn-river-horizontal-breaker");b.each(function(c,d){if(a.trim(a(d).text())===""){a(d).remove()}})},scrollable_tables:function(){var b=a(".sbnu-legacy-content-table");b.each(function(c,d){var e=a(d).parent();if(a(d).width()>e.width()){e.css("overflow-x","scroll")}})}};a.fn.sbn=function(b){if(methods[b]){return methods[b].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof b==="object"||!b){return methods.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist in SBN plugin")}}};$document.ready(function(){$document.sbn()})})(jQuery);Vox.Modules.sbnHomeIntroBlock=function(b){var a=new Vox.Module();a.name="sbnHomeIntroBlock";a.statsdKey=" pls.modules.12268821-1861-458C-B3AC-41BAB7D4B8CA";var c=b(window);a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".s-hm-itr");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){this.view.find(".s-hm-itr-nav").tabs({toggle:true,tabContentsSlc:".s-hm-itr-nav-item",tabHandleCls:"s-hm-itr-nav-tab"});this.view.find("li").filter(":odd").addClass("ui-state-odd")};return a}(jQuery);Vox.Modules.lookitCarousel=(function(e){var i=new Vox.Module();function c(k){var l=k.width();k.removeClass("display-3-up display-4-up display-5-up, lookit-size-sm, lookit-size-md, lookit-size-lg");if(l<600){k.addClass("display-2-up lookit-size-sm");k.data("carousel-boxes-per-pane",2);return}if(l<900){k.addClass("display-3-up lookit-size-md");k.data("carousel-boxes-per-pane",3);return}k.addClass("display-4-up lookit-size-lg");k.data("carousel-boxes-per-pane",4)}function b(l){var k=l.width();var m=l.data("carousel-boxes-per-pane");var o=k/m;var n=l.find(".lookit-box");l.data("carousel-pane-width",k);l.data("carousel-box-width",o);l.data("carousel-full-panes",Math.floor(n.length/m));l.data("carousel-boxes-per-last-pane",n.length%m);n.css({height:o+"px"});l.find(".lookit-box-micro-inner").css({width:o+"px",height:o+"px"})}function j(n,s){var l=n.data("carousel-full-panes");var r=(n.data("carousel-boxes-per-last-pane")>0)?1:0;var k=l+r;var p=n.data("carousel-box-width");var q=n.data("carousel-pane-width");var o;if(s+1>k){s=0}if(s<0){s=k-1}if(s+1>l){o=(l*q)-(p*(n.data("carousel-boxes-per-pane")-n.data("carousel-boxes-per-last-pane")))}else{o=s*q}var m=n.find(".lookit-carousel-entries").css("left","-"+o+"px");n.data("carousel-current-pane",s);Vox.Modules.DynamicSizedImages.initUI(e(".lookit-carousel-entries"))}function d(k){var l=k.data("carousel-current-pane")+1;j(k,l)}function a(k){var l=k.data("carousel-current-pane")-1;j(k,l)}function f(l){l.preventDefault();var k=l.data.main;a(k)}function h(l){l.preventDefault();var k=l.data.main;d(k)}function g(l){var k=l.data.main;var m=k.data("carousel-current-pane")||0;c(k);b(k);j(k,m)}i.init=function(){this.view=e(".lookit-carousel");if(this.view.length<1){return}this.initUI()};i.initUI=function(){this.view.each(function(k,m){var l=e(m);l.find(".lookit-carousel-prev").bind("click",{main:l},f);l.find(".lookit-carousel-next").bind("click",{main:l},h);var n=l.data("carousel-current-pane")||0;$window.bind("resizeStop",{main:l},g);g({data:{main:l}})})};return i})(jQuery);Vox.Modules.lookitCover=(function(h){var m=new Vox.Module();function i(q){var o=q.data.main;var p=o.width();o.removeClass("lookit-size-sm lookit-size-md lookit-size-lg");if(p<470){o.addClass("lookit-size-sm");return}if(p<730){o.addClass("lookit-size-md");return}o.addClass("lookit-size-lg")}function n(p,o){g(p);p.data("carousel-nav-index",o);p.find(".is-active").addClassWithAnimationCallback("is-animating",function(q){h(q).removeClass("is-animating")}).removeClass("is-active");p.find(".lookit-cover-nav li:eq("+o+"), .lookit-box:eq("+o+")").addClassWithAnimationCallback("is-animating",function(q){h(q).removeClass("is-animating")}).addClass("is-active");c(p)}function f(o){var p=o.data("carousel-nav-index")+1;if(p>o.data("carousel-pane-last-index")){p=0}n(o,p)}function b(o){var p=o.data("carousel-nav-index")-1;if(p<0){p=o.data("carousel-pane-last-index")}n(o,p)}function g(o){clearTimeout(o.data("carousel-timeout-id"))}function c(o){o.data("carousel-timeout-id",setTimeout(function(){k(o)},5000))}function k(o){g(o);f(o)}function d(p){p.preventDefault();var o=p.data.main;g(o);n(o,h(p.currentTarget).data("carousel-nav-index"))}function j(p){p.preventDefault();var o=p.data.main;g(o);b(o)}function l(p){p.preventDefault();var o=p.data.main;g(o);f(o)}function e(p){var o=p.data.main;c(o)}function a(p){var o=p.data.main;g(o)}m.init=function(){this.view=h(".lookit-cover");if(this.view.length<1){return}this.initUI()};m.initUI=function(){this.view.each(function(o,q){var p=h(q);p.data("carousel-pane-last-index",p.find(".lookit-box").length-1);p.find(".lookit-cover-nav li").bind("click",{main:p},d);p.find(".lookit-cover-prev").bind("click",{main:p},j);p.find(".lookit-cover-next").bind("click",{main:p},l);p.bind("mouseenter",{main:p},a);p.bind("mouseleave",{main:p},e);var r=p.find(".is-active");i({data:{main:p}});$window.bind("resizeStop",{main:p},i);if(r.length>0){n(p,r.index())}else{n(p,0)}c(p)})};return m})(jQuery);Vox.Modules.lookitGifBadge=(function(d){var b=new Vox.Module();function c(f){var e=f.data.main;e.find(".gif-play").addClass("is-hidden")}function a(f){var e=f.data.main;e.find(".gif-play").removeClass("is-hidden")}b.init=function(){this.view=d(".lookit-image.uses-gif");if(this.view.length<1){return}this.initUI()};b.initUI=function(){this.view.each(function(e,g){var f=d(g);f.bind("mouseenter",{main:f},c);f.bind("mouseleave",{main:f},a)})};return b})(jQuery);Vox.Modules.lookitTagBrowser=(function(b){var a=new Vox.Module();a.init=function(){this.view=b(".lookit-tag-browser");if(this.view.length<1){return}this.initUI()};a.initUI=function(){this.view.each(function(c,f){var d=b(f);var e=d.find("ul").width();d.find("li").each(function(g,i){var h=b(i);if((h.position().left+h.width())>e){h.addClass("is-hidden")}})})};return a})(jQuery);Vox.Modules.sbnModalFanShotsUpload=function(b){var a=new Vox.Module();a.name="sbnModalFanShotsUpload";a.statsdKey=" pls.modules.6D540D13-8227-4C44-B8C6-9C31CAE27299";var c=b(window);a.events=[""];a.clickToOpen=function(e,d){e=jQuery(e);jQuery(e).click(function(g){g.preventDefault();var f=e.data("tease-modal-url");if(typeof f!=="undefined"){d=f}Vox.EventDispatcher.publish("requestOpenModalForUrl",{url:d})})};a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".sbn-modal-fanshots");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(n){var m=this.view;var f=function(){b("form",m)[0].reset();b("#fanshot-validation-messages").text("");b("form input:submit",m).val("Post");b("#twitter-box").hide()};b("#fanshots-tabbed-content").tabs({toggle:true,callback:function(){var q=this.handle.data("tabId").split("_tab")[0],p=q.slice(0,1).toUpperCase()+q.slice(1,q.length-1)+"Shot";f();b("input#type",m).val(p)}});if(b(this).data("tease-modal-url")){a.eventDispatcher.publish("requestOpenModalForUrl",b(this).data("tease-modal-url"));return false}var k="link",e=b(".sbn-fan-shots-header-text").val().replace(/^\s+|\s+$/g,""),o=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;f();if(e!=""&&/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)){if(/\.(gif|jpg|png|jpeg)$/i.test(e)){k="image"}else{if(/^http:\/\/(www\.|)flickr.com\/photos\/(\w+|\w+@\w+)\/(\d+)(\/|$)/i.test(e)){k="image"}else{if(/^http:\/\/(www\.|)youtube.com\/(watch\?v=((\w|-)+)|swf\/l\.swf\?video_id=(\w+)|v\/(\w+))/i.test(e)){k="video"}}}}if(!b('li[data-tab-id="'+k+'s_tab"]',m).hasClass("ui-state-active")){b('li[data-tab-id="'+k+'s_tab"]',m).trigger("click")}b("input#"+k+"_shot_url").val(e);if(k=="video"){var i=e.match(o);if(i&&i[7].length==11){b("textarea#video_shot_html").val('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+i[7]+'" frameborder="0" allowfullscreen></iframe>')}}else{if(k=="image"){}}b("form",m).submit(function(){var p=b(this),s=p.serialize(),q=p.attr("action"),r=b("input:submit",p);b.ajax({type:"POST",url:q,data:s,beforeSend:function(){r.val("Saving...")}}).always(function(t){b("#fanshot-validation-messages").text(t.message)}).done(function(t){if(t.status!==200){r.val("Post")}else{r.val("Saved!");b(".new-fanshot-container input.vox-new-post").val("");location.reload()}});return false});var h=b("#entry_twitter_blurb_char_status"),j=110,d=0,l="",g=b("input:submit",m);h.text(j);b("textarea#entry_twitter_blurb").keyup(function(){d=j-b(this).val().length;g.prop("disabled",d<0?true:false);l=d<0?"(Your tweet is too long)":"";h.text([d,l].join(" "))});b("#twitter-integration input").change(function(){if(b("#twitter-integration input:checked").length>0){b("#twitter-box").show()}else{b("#twitter-box").hide()}})};return a}(jQuery);Vox.Modules.sbnModalLogin=function(b){var a=new Vox.Module();a.name="sbnModalLogin";a.statsdKey="pls.modules.";var c=b(window);a.events=[""];a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".s-modal-login");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){this.view.find(".s-modal-login-openid-link").bind("click",function(e){e.preventDefault();a.view.find(".s-modal-login-openid").addClass("ui-state-active")})};return a}(jQuery);Vox.Modules.sbnModal=function(f){var c=new Vox.Module();c.name="sbnModal";c.statsdKey=" pls.modules.D0EB5738-2A9F-48D7-A50D-954C889949A1";var g=f(window);var e=f("body");var a=f("head");var b="sbnModalStyleOverrides";c.events=[""];function d(){a.find("#"+b).remove();var h=f('<style id="'+b+'" type="text/css"> .s-modal-body { max-height: '+Math.floor(g.height()*0.8)+"px;} </style>");a.append(h)}c.init=function(){var h=this.instrumentation.start(this.name+" init");this.views=f(".s-modal");d();f(window).bind("resizeStop",d);if(this.views.length<1){return}this.initUI();this.instrumentation.finish(h)};c.initUI=function(h){var i=f(".sbn-pl-modal-parking-lot");f(".s-modal .s-modal-close").on("click",function(l){var k=f(l.target).parents(".s-modal");function j(m){c.eventDispatcher.unsubscribe("modalClosed",j);if(k.data("keepModal")!=false){i.append(k)}else{k.remove()}}c.eventDispatcher.subscribe("modalClosed",j);c.eventDispatcher.publish("requestCloseModal",k)});d()};return c}(jQuery);Vox.Modules.sbnModalVideo=function(e){var a=new Vox.Module();a.name="sbnModalVideo";a.statsdKey="pls.modules.sbnModalVideo";var f=e(window);a.events=[""];var c="custom-video-modal-container";function b(k){var h=k.videoService,m=k.videoId,j=k.videoDimensions;if(typeof h==="undefined"&&typeof m==="undefined"){return false}var l='<div class="vox-module s-modal s-modal-video">';l+='  <div class="s-modal-head">';l+='    <div class="s-modal-close">X</div>';l+="  </div>";if(h==="youtube"&&typeof j!=="undefined"){var i=j.split("x")[0],g=j.split("x")[1];l+='<iframe width="'+i+'" height="'+g+'" src="http://www.youtube.com/embed/'+m+'" frameborder="0" allowfullscreen></iframe>'}else{if(h==="custom"){l+='<div id="'+c+'"></div>'}}l+="</div>";return l}function d(h){var i=b(h);if(i){var g=e(i);a.eventDispatcher.publish("requestOpenModal",g);if(h.videoService==="custom"){e("#"+c).html(h.videoId)}e(".s-modal-close",g).bind("click",function(){a.eventDispatcher.publish("requestCloseModal",g)})}}a.init=function(){var g=this.instrumentation.start(this.name+" init");this.initUI();this.instrumentation.finish(g)};a.initUI=function(g){a.eventDispatcher.subscribe("requestVideoModal",d)};return a}(jQuery);Vox.Modules.sbnNewsletterSignup=function(b){var a=new Vox.Module();a.name="sbnNewsletterSignup";a.statsdKey=" pls.modules.B9BE277B-4DC4-45BD-8369-9E034C4EA9D5";var c=b(window);a.events=[""];a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".sbn-newsletter-signup");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){b(".ui-state-selectable").each(function(e,f){b(f).click(function(){f=b(f);if(f.hasClass("ui-state-selected")){f.removeClass("ui-state-selected");a.Manager.findClone(f).remove()}else{var g=f.clone(false).removeClass("ui-state-selectable").addClass("ui-state-selected");g.click(function(){g.remove();f.removeClass("ui-state-selected")});b("#selected-newsletters").append(g);f.addClass("ui-state-selected")}a.Manager.setState();a.Manager.collectSelected()})});b("#selected-newsletters li").each(function(e,f){f=b(f);f.click(function(){a.Manager.findClone(f).removeClass("ui-state-selected");f.remove();a.Manager.setState()})});b(".sbn-newsletter-signup-left-rail-field").bind("focus",function(){a.Manager.resetField(b(this),"")})};a.Manager={collectSelected:function(){var d=[];var e=[];b('ul[id="selected-newsletters"] li').each(function(f,g){g=b(g);d.push(g.attr("data-list_id"));e.push(g.attr("data-team_id"))});b("#lists_").val(d.toString());b("#team_ids_").val(e.toString())},findClone:function(f){var h=f.data("list_id");var e=f.data("team_id");var d=f.className;var g=b("li[data-list_id = '"+h+"'][data-team_id = '"+e+"'][class!='"+d+"']").not(f);if(typeof g=="undefined"){return[]}else{console.log(g[0]);return b(g[0])}},setState:function(e){var d=b("newsletter-manager");d.removeClass("error-newsletter");d.removeClass("working");d.removeClass("success");switch(e){case"error":d.addClass("error-newsletter");break;case"working":d.addClass("working");break;case"success":d.addClass("success");break;default:break}},resetField:function(e,d){e=b(e);if(e.val()==this.postBadEmailMessage||e.val()==this.postWinMessage||e.val()==this.postEmptyMessage||e.val()=="Email Address"){e.val(d);this.setState()}},postBadEmail:function(){b(".sbn-newsletter-signup-left-rail-field").removeAttr("disabled");b(".sbn-newsletter-signup-left-rail-field").value=this.postBadEmailMessage;this.setState("error")},postEmpty:function(){b(".sbn-newsletter-signup-left-rail-field").removeAttr("disabled");b(".sbn-newsletter-signup-left-rail-field").value=this.postEmptyMessage;this.setState("error")},postWin:function(){b(".sbn-newsletter-signup-left-rail-field").removeAttr("disabled");if($j(".ui-state-selected").length===0){b(".sbn-newsletter-signup-left-rail-field").val(this.postWinEmptyMessage)}else{b(".sbn-newsletter-signup-left-rail-field").val(this.postWinMessage)}this.setState("success")},postBadEmailMessage:"Invalid email!",postEmptyMessage:"No newsletters selected!",postWinMessage:"Thanks for signing up!",postWinEmptyMessage:"Unsubscribed from all!"};return a}(jQuery);Vox.Modules.sbnPick6=(function(f){var k=new Vox.Module();var g={},b,h;var m=function(){return h};var e=function(){return Math.floor(m()/60)};var l=function(){return Math.floor(e()/60)};var j=function(){return Math.floor(l()/24)};var c=function(){var n=l();var o=e()%60;var p=m()%60;if(n<10){n="0"+n}if(o<10){o="0"+o}if(p<10){p="0"+p}f(".pick6-countdown .hours").text(n);f(".pick6-countdown .minutes").text(o)};var a=function(){b=window.setInterval(d,1000)};var d=function(){h=h-1;if(h<=0){window.clearInterval(b)}else{c()}};var i=function(){var n=g.leaderboard;var p=f("<ul></ul>"),o;f.each(n,function(q,r){o=f("<li>"+r.name+"<span>"+Math.round(r.score*100)/100+"</span></li>");p.append(o)});f(".pick6-leaderboard").append(p)};k.render=function(n){if(n.hasOwnProperty("group")&&n.group.hasOwnProperty("time_left")&&n.group.hasOwnProperty("leaderboard")){g=n.group;h=parseInt(g.time_left);c();a();i()}};k.initUI=function(n){f.ajax({url:n,cache:true,jsonpCallback:"Vox.Modules.sbnPick6.render",type:"GET",dataType:"jsonp"})};k.init=function(){};return k}(jQuery));Vox.Modules.sbnPteBoxscore=function(b){var a=new Vox.Module();a.name="sbnPteBoxscore";a.statsdKey=" pls.modules.75EEA13E-ED5E-4A3B-B9F7-AF5C56EB06C2";var c=b(window);a.events=[""];a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".sbn-pte-boxscore");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){this.view.find(".boxscore table").each(function(e,g){var f=b(g),h=f.find(".title");f.before('<h3 class="sbn-data-table-headline">'+h.text()+"</h3>");h.remove()})};return a}(jQuery);Vox.Modules.sbnPteCommunity=function(d){var b=new Vox.Module();b.name="sbnPteCommunity";b.statsdKey="pls.modules.378D6A52-DD83-4E34-ADEC-ADF4E88C468E";var g=d(window);b.events=[""];var a,f="lockupSrc",c="badgeSrc";function h(i){var i=i||b.env.currentBreakpoint(),j=(i.index>1)?c:f;imgs.each(function(k,m){var l=d(m);l.src=l.attr("src",l.data(j))})}function e(i){h()}b.init=function(){var i=this.instrumentation.start(this.name+" init");this.view=d(".sbn-pte-community");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(i)};b.initUI=function(i){g.bind("breakpointchange",e);imgs=this.view.find("img");h()};return b}(jQuery);Vox.Modules.sbnPteGameThreadsCallout=function(c){var b=new Vox.Module();b.name="sbnPteGameThreadsCallout";b.statsdKey=" pls.modules.81B1D3E5-7EF0-4226-A07E-D28839947570";var d=c(window);b.events=[""];function a(e){Proxy.RemoteData.get("/events/gamethread",{data:{gamethread_id:e},success:function(f){c("#gamethread_"+e).empty().html(f)}})}b.init=function(){var e=this.instrumentation.start(this.name+" init");this.view=c(".sbn-pte-gamethreads");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(e)};b.initUI=function(){this.view.find(".sbn-pte-gamethreads-thread").each(function(f,g){var e=c(g).find("[data-gamethread-id]");a(e.data("gamethreadId"))})};return b}(jQuery);Vox.Modules.sbnPtePlayerStats=function(b){var a=new Vox.Module();a.name="sbnPtePlayerStats";a.statsdKey=" pls.modules.378D6A52-DD83-4E34-ADEC-ADF4E88C468E";var c=b(window);a.events=[""];a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".sbn-pte-head-player ");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){this.view.find(".sbn-pte-head-player-stats-toggle").click(function(h){var g=b(this),f=a.view.find(".sbn-pte-table");if(g.hasClass("ui-state-active")){g.html("<span>Show Full Career Stats</span>");g.removeClass("ui-state-active");f.removeClass("ui-state-open")}else{g.html("<span>Hide Full Career Stats</span>");g.addClass("ui-state-active");f.addClass("ui-state-open")}h.preventDefault()})};return a}(jQuery);Vox.Modules.sbnRiverCoversStreams=function(b){var a=new Vox.Module();a.name="sbnRiverCoversStreams";a.statsdKey=" pls.modules.sbnRiverCoversStreams";var e=b(window);a.events=[""];function d(){a.view.find(".box.storystream ul").each(function(f,l){var i=b(l),k=i.parent(),h=i.find("li:not(.fullstream-li)"),m=k.height(),g=25+m-(i.position().top-parseInt(k.css("paddingTop").replace("px",""))),j=h.length-1;h.css({display:"block"});while(j>-1&&i.height()>g){h.eq(j).css({display:"none"});j--}})}function c(f){d()}a.init=function(){var f=this.instrumentation.start(this.name+" init");this.view=b(".sbn-home-upper-cover .cover, .sbn-home-inner-cover .cover");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(f)};a.initUI=function(f){this.view.find(".updates").each(function(g,i){var h=b(i);if(parseInt(h.text())===1){h.addClass("ui-state-singular")}});content:"updates";if(this.view.hasClass("tryptic")){e.bind("resizeStop",c);d()}};return a}(jQuery);Vox.Modules.sbnRiverRocksYahooFantasyBaseball=function(b){var a=new Vox.Module();a.name="sbnRiverRocksYahooFantasyBaseball";a.statsdKey=" pls.modules.E95A12E5-C097-42ED-9486-E350D58691E1";var c=b(window);a.events=[""];a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".sbn-river-rocks-yahoo-fantasy-baseball");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){};return a}(jQuery);Vox.Modules.sbnInit=function(e){var b=new Vox.Module();function d(f){f.find(".sbn-entry-content-main, .sbn-fan-shots").each(function(g,j){var h=e(j);var k=h.find(".sbn-sidebar-col, .fanshots-sidebar");if(k.length>0){var i=k.height();h.css({"min-height":i+"px"})}})}function a(m){var m=m||e(document);m.find(".sbn-tabbed-content").tabs();m.find(".sbn-network-nav ul").cleanWhitespace();m.find(".sbn-list-to-select").listToSelect();m.find(".breaker a h3").textTruncate();m.find(".sbn-entry-body img[height]").each(function(){var o=e(this);o.height(o.attr("height"))});m.find(".s-ecnt iframe, .sbn-body-feature iframe, .sbn-story-stream-title-intro iframe, .sbn-story-stream-entries iframe").each(Util.Video.wrapVideoIframe);m.find(".s-ecnt table:not([class])").addClass("sbn-data-table");m.find(".sbn-data-table, .sbn-pte-table-player, .sports_data_widget .zebra").zebraTables();if(typeof sbn_social_settings!=="undefined"&&Util.UserAgentProfiler.isDesktop()){m.filter(".s-cnv-social").sbnSocial(sbn_social_settings)}m.find(".advertorial").each(function(o,s){var q=e(s);var t=q.data("brand-color");if(typeof t==="undefined"){return true}var p=[".sp-preamble",".byline a"];for(var r=p.length;r--;){q.find(p[r]).css("color",t)}});m.find(".cover .comments.unread").each(function(o,r){var p=e(r),q=p.next(".comments");p.css({right:(q.width()+10).toString()+"px"})});m.find(".sbn-entry-body").each(function(q,r){var p=e(r);var o=p.find(".sbn-entry-body-inner").width();p.find(".sbn-entry-body-text > table").each(function(s,u){var t=e(u);var v=e(u).width();if(v>o){t.wrap('<div class="sbn-entry-body-max-width-wrapper"></div>')}})});function g(q){var p=q.closest(".fanshot-box");var o=p.hasClass("is-expanded");if(o){p.removeClass("is-expanded");p.find(".fanshot-expand-controls-action").text("Expand")}else{p.addClass("is-expanded");p.find(".fanshot-expand-controls-action").text("Collapse")}}m.find(".fanshot-box").find(".fanshot-expand-controls a, .image-body, .video-body, .tweet-body, .quote-body").on("click",function(o){o.preventDefault();g(e(this))});m.find(".sbn-fan-shots-river-entry embed-body.video-wrap").each(function(o,q){var p=e(q).find("object, embed");p.attr("width","");p.attr("height","")});m.find(".tryptic .article.e .text h2").each(function(p,r){var r=e(r);var q=r.css("lineHeight");var q=parseInt(q.substr(0,q.indexOf("px")));var o=r.height();if(o>q*2){r.css({"padding-top":0})}});m.find(".is-expandable .fanshot-desc").each(function(p,t){var s=e(this);var r=s.find(".fanshot-desc-inner");var o=r.height();if(o<=42){var q=s.closest(".fanshot-box");if(q.hasClass("fanshot-type-imageshot")==false){s.closest(".fanshot-box").addClass("is-expandable-unneeded")}}});m.find(".box.video.b").each(function(o,q){var q=e(q);var p=q.find(".image");var r=q.find(".play");p.bind("load",function(){var s=(p.height()-r.height())*0.7;r.css("top",s.toString()+"px")})});m.find(".recommend-link").sbnRecommendLink();var f=m.find(".entry-social-bar");if(f.length>0){e("body").addClass("ui-state-has-social-bar")}m.find(".entry-social-bar a.close").bind("click",{params:["Social Bar","close",location.href]},function(o){e.cookie("closed_follow_bar","true",{expires:365,path:"/"});e(".entry-social-bar").hide();e("body").removeClass("ui-state-has-social-bar");Util.gaTrackEvent(o);return false});var h=m.find(".chunk.cover.inside.three-up-flat.one-up.full.d .box.group.d");if(h.length>0){var l=h.find("header");var n=h.find("header .text");l.css({"padding-top":0,"padding-bottom":0});var j=l.height();var i=n.height();n.css("bottom",0.5*(j-i))}d(m);var k=setTimeout(function(){d(m)},5000)}function c(f){a(f.modules)}b.init=function(){b.eventDispatcher.subscribe("moduleInserted",c);this.initComponents()},b.initComponents=function(f){a(f)};return b}(jQuery);Vox.Modules.sbnSiteDirectory=(function(b){var a=new Vox.Module();a.name="sbnSiteDirectory";a.statsdKey="pls.modules.AE0B6B4F-A858-40D4-B6C4-C4F911596E66";a.events=[""];a.init=function(){var c=this.instrumentation.start(this.name+" init");this.view=b(".sbn-site-directory");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(c)};a.initUI=function(){var g=b("#blog-query"),d=b("#blog-search"),e=b(".sbn-site-directory-league-title, .sbn-site-directory-conference-title, .sbn-site-directory-division-title"),f=b(".sbn-site-directory-entry");function c(h){h.preventDefault();if(g.val().length===0){e.show();f.show()}else{if(h.type==="keyup"&&g.val().length<3){e.show();f.show()}else{e.hide();f.each(function(i,k){var j=b(k),m=j.text().toUpperCase(),l=g.val().toUpperCase();j.toggle(m.indexOf(l)>=0)})}}}g.on("keyup",_.debounce(c,300));d.on("submit",c)};return a})(jQuery);Vox.Modules.sbnStoryStreamEntries=function(F){var f=new Vox.Module();f.name="sbnStoryStream";f.statsdKey=" pls.modules.2543276C-FFDC-42BB-BB69-6C5229F47642";var R=F(window);var A="storyStreamFilter",U="important",K=0,d=[],L=[];var T="%X%",w="Load "+T+" More Update",B="Load "+T+" More Updates";var D="filterInfo";f.events=[""];var G=".sbn-story-stream-entries-e",u=".sbn-story-stream-entries-e-close",ab=".sbn-story-stream-entries-e-continuance a",P=".sbn-story-stream-entries-e-fb-like",X=".sbn-story-stream-entries-e-tw-tweet",y=".sbn-story-stream-entries-e-link",a=".sbn-story-stream-entries-e-link-copy",b="sbn-story-stream-entries-icon",H="ui-state-hidden",Z="sbn-story-stream-entries-load-flag",n="."+Z,s="ui-state-open",r=b,k="ui-state-hover",C="ui-state-active",N="sbn-story-stream-entries-new-updates",g="."+N,q=".sbn-story-stream-entries-e-shortlink",z=".sbn-story-stream-entries-e-shortlink-close";var h="http://www.facebook.com/share.php?u=",W="http://twitter.com/share";function m(ad,ag){var ae=575,ac=400,ai=(R.width()-ae)/2,ah=(R.height()-ac)/2,af="status=1,width="+ae+",height="+ac+",top="+ah+",left="+ai;R[0].open(ad,"twitter",af)}function l(ae){f.view.find(n).detach();var ai=L[ag],ak=[],ac=0,al=F(),ah=F();for(var ag=L.length-1;ag>-1;ag--){var ai=L[ag],af=JSON.parse(ai.data(D));if(af.indexOf(ae)>-1){ai.removeClass(H);ac=0;continue}var ad=ai.next();ac+=1;ai.addClass(H);if(ad.hasClass(Z)==false){ad=F('<div class="'+Z+'"></div>');al=F('<div class="'+r+'"></div>');ah=F("<span></span>");ad.append(al).append(ah);ad.bind("click",{flag:ad},i)}ai.before(ad);var aj=(ac>1)?B.replace(T,ac.toString()):w.replace(T,ac.toString());ah.text(aj)}}function v(ac){if(ac.hasClass(s)){c(ac);return}x(ac)}function x(ac){ac.addClass(s);ac.find(ab).text("close")}function c(ac){ac.removeClass(s);ac.find(ab).text("continue")}function e(ac){var ad=ac.next();ac.detach();while(ad.hasClass(H)){ad.removeClass(H);ad=ad.next()}}function E(ad){var ac="<p>";ac=ac+"<input type='text' readonly='readonly' value='"+ad+"' ";ac=ac+"onclick='this.focus(); this.select();'>";ac=ac+"</p>";return ac}function Y(ad){var ac=ad.find(q);ac.addClass(C);ac.find("input").select()}function O(ac){ac.find(q).removeClass(C)}f.pollForUpdates=function(ae){var ad="/sbn_entries/get_stream_updates";var ac=30*1000;K=ae.startingUpdateCount;setInterval(function(){jQuery.ajax({url:ad,dataType:"json",data:{entryId:ae.entryId,updatesSeen:K},success:function(ah){for(var af=0,ag=ah.length;af<ag;af++){K+=1;d.push(ah[af])}if(d.length>0){t()}}})},ac)};function t(){var ac=f.view.parent().find(g),ae=d.length;var ad;if(ae===1){ad=ae+" new update"}else{ad=ae+" new updates"}if(ac.size()===0){f.view.parent().prepend(jQuery('<div class="'+N+'"/>'));ac=f.view.parent().find(g);ac.click(V)}ac.html('<a href="#">'+ad+"</a>");ac.append('<div class="'+r+'"></div>')}function V(ae){ae.preventDefault();d.sort(function(ag,af){return ag.timestamp-af.timestamp});var ad;while(d.length>0){ad=jQuery(d.shift().html);ad.insertBefore(f.view.find(G)[0])}var ac=f.view.parent().find(g);ac.remove()}function p(ac){Y(ac.data.entry)}function j(ac){O(ac.data.entry)}function S(ac){l(ac)}function i(ac){e(ac.data.flag)}function aa(ac){ac.preventDefault();v(ac.data.entry)}function o(ac){c(ac.data.entry)}function M(ad){ad.preventDefault();var ac=h+R[0].location.href;m(ac,ad)}function I(ac){ac.preventDefault();m(W,ac)}function J(ac){ac.data.entry.addClass(k)}function Q(ac){ac.data.entry.removeClass(k)}f.init=function(){var ac=this.instrumentation.start(this.name+" init");this.view=F(".sbn-story-stream-entries");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(ac)};f.detachUI=function(){};f.initUI=function(){this.view.find(G).each(function(ac,ae){var ad=F(ae);ad.find(u).bind("click",{entry:ad},o);ad.find(P).bind("click",{entry:ad},M);ad.find(X).bind("click",{entry:ad},I);ad.bind("mouseenter",{entry:ad},J);ad.bind("mouseleave",{entry:ad},Q);ad.find(y).bind("mouseenter",{entry:ad},p);ad.find(z).bind("click",{entry:ad},j);ad.append(F('<div class="'+b+'"></div>'));L.push(ad)});this.eventDispatcher.subscribe(A,S);l(U)};return f}(jQuery);Vox.Modules.sbnStoryStreamFilter=function(d){var g=new Vox.Module();g.name="sbnStoryStream";g.statsdKey=" pls.modules.E7728FB3-CAFB-4E5D-A187-8DB1C231BBD5";var b=d(window);var i="storyStreamFilter";var c="filterId";var h=".sbn-story-stream-filter-item",e="ui-state-selected",f=h+"."+e;g.events=[i];function j(k){g.view.find(f).removeClass(e);k.addClass(e);g.eventDispatcher.publish(i,k.data(c))}function a(k){k.preventDefault();j(k.data.item)}g.init=function(){var k=this.instrumentation.start(this.name+" init");this.view=d(".sbn-story-stream-filter");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(k);if(d(".sbn-story-stream-entries-e").length<8){j(d(".sbn-story-stream-filter-item[data-filter-id='all']"))}};g.detachUI=function(){};g.initUI=function(k){this.view.find(h).each(function(l,n){var m=d(n);m.bind("click",{item:m},a);if(l==0){m.trigger("click")}})};return g}(jQuery);Vox.Modules.sbnStoryStreamHead=function(e){var i=new Vox.Module();i.name="sbnStoryStreamHead";i.statsdKey=" pls.modules.05FD2773-33BA-4377-93B3-54741408CC54";var a=e(window);var d=e("body");var h=e("head");var b=i.name+"StyleOverRides";var l,m,g=".sbn-pl-dfl-left-rail",c=g+"-inner";function k(){h.find("#"+b).remove();h.append('<style id="'+b+'" type="text/css">.sbn-story-stream-head-inner { width : '+i.view.width()+"px;} </style>")}function j(n){k();f(n)}function f(o){var q=a.scrollTop(),n=i.view.offset().top,p=l.height(),r=m.height();if((q-n)>=(p-r)){if(l.hasClass("ui-state-bottom")==false){l.addClass("ui-state-bottom")}if(l.hasClass("ui-state-float")){l.removeClass("ui-state-float")}return}if(q>n){if(i.view.hasClass("ui-state-float")==false){i.view.addClass("ui-state-float");l.addClass("ui-state-float")}if(l.hasClass("ui-state-float")==false){l.addClass("ui-state-float")}if(l.hasClass("ui-state-bottom")){l.removeClass("ui-state-bottom")}return}if(i.view.hasClass("ui-state-float")){i.view.removeClass("ui-state-float");l.removeClass("ui-state-float")}}i.init=function(){var n=this.instrumentation.start(this.name+" init");this.view=e(".sbn-story-stream-head");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(n)};i.initUI=function(n){a.bind("throttledScroll",f);a.bind("resizeStop",j);l=e(g);m=e(c);k();l.css({height:(m.height()+50).toString()+"px"})};return i}(jQuery);Vox.Modules.sbnTopNav=function(E){var f=new Vox.Module(),T=E(window);f.name="sbnNetworkNav";f.statsdKey="pls.modules.1A660854-1BAE-42F0-A756-72FC1BA8C395";var H=[];var h=".nav-bar";var a="nav-title";var u="."+a;var x="is-active";var N="."+x;var A="is-hiding-level-";var s="is-showing-nn";var v="nav-drop";var J="."+v;var R="more";var C="nav-more";var X=".drop-container";var p=".mobile-nav-handle";var b="is-mobile-nav-open";var t=".site-logo";var e=".nav-search-input";var P="navoverflow";var z="navId";var M="dropPos";var F="is-search-open";var j,q;var r=55;var K=30;var c=null;var V=1000;function i(){f.view.find(N).removeClass(x)}E(".sbn-logo").hover(function(){E(".sbn-logo").stop().animate({opacity:1},300)},function(){E(".sbn-logo").stop().animate({opacity:0.6},300)});function Q(ac,ae){i();if(ae=="nav-sbnation"){o()}ac.addClass(x);var ae=ae||ac.data(z);var Z=q.find(J+'[data-nav-id="'+ae+'"]');if(Z.length<1){return}var aa=Math.floor(ac.offset().left-j.offset().left);var ad=ac.width();var Y=Z.width();var ab=f.view.width();var aa=parseInt((aa+Y>ab)?aa-(Y-ad)+1:aa);ac.addClass(x);if(ae=="nav-search"){Z.css({right:"0px"})}else{Z.css({left:aa})}Z.addClass(x)}function W(){E.each(H,function(aa,af){var ah=E(af);var ai=ah.find(u);var ab=ah.width();var ae=0;var ad=[];var aj=false;var Z=Z||ah.data(z);var ac=q.find(J+'[data-nav-id="'+Z+'-navItemMore"]');ai.each(function(ak,ao){var am=E(ao);var an=am.width()+10;if(am.attr("data-remove-idx")){var al=parseInt(am.attr("data-remove-idx"));ad[al]=an}else{if(am.hasClass(C)==false){ae=ae+an}}});for(var ag=ad.length-2;ag>-1;ag--){ad[ag]=ad[ag]+ad[ag+1]}for(var ag=ad.length-1;ag>-1;ag--){var Y=(ad[ag]+ae+K);var Y=(aj)?Y+r:Y;if(Y>ab){if(aj===false){ag++}aj=true}ah[(aj)?"addClass":"removeClass"](A+ag);ac[(aj)?"addClass":"removeClass"](A+ag)}})}function U(ad,aa,ac){if(ac){f.view.addClass("is-solid-bg")}var ae=f.view.find(".site-logo");var Y=ae.attr("data-dark-logo-url");var ab=ae.attr("data-light-logo-url");if(!Y||!ab){return}ae.attr("src",(ad)?ab:Y);if(aa){var Z=ae.attr("data-third-logo-url");if(Z){ae.attr("src",Z)}else{console.log("Tried to apply third logo, but none was available for this site/network.")}}}function I(){f.view[(f.view.hasClass(b))?"removeClass":"addClass"](b)}function g(){f.view.removeClass(s)}function o(){f.view.addClass(s)}function d(){f.view[(f.view.hasClass(F))?"removeClass":"addClass"](F)}function n(ae){if(E.inArray(ae,H)<0){H[H.length]=ae;var ad=ae.attr("data-nav-id");var ac=ae.attr("data-nav-use-rev-hide")=="true";var Z=(ac)?ae.find(u):ae.find(u+"[data-remove-idx]");if(Z.length>0){var Y=E('<li class="more-li"><span class="'+a+" "+C+'" data-nav-id="'+ad+'-navItemMore">'+R+"</span></li>");var ab=E('<div class="'+v+' nav-more-drop" data-nav-id="'+ad+'-navItemMore"></div>');var ag=E("<ul/>");q.append(ab.append(ag));var aa=Z.length-1;Z.each(function(ai,aj){var aj=E(aj),ah=(ac)?aa-ai:aj.attr("data-remove-idx").toString();if(ac){aj.attr("data-remove-idx",(aa-ai).toString())}aj.addClass("is-more-level-"+ah);ag.append('<li class="is-more-level-'+ah+'"><a href="'+jQuery(aj).find("a").attr("href")+'">'+aj.text()+"</a></li>")});ae.find("> ul").first().append(Y)}var af=ae.find(u);af.each(function(ah,aj){var ai=E(aj);ai.bind("mouseenter",{id:ai.data(z),navitem:ai},l)})}W()}function l(Y){if(f.env.currentBreakpoint().index<2){return}Q(Y.data.navitem,Y.data.id);clearTimeout(c)}function m(){i();c=setTimeout(function(){clearTimeout(c);k()},V)}function G(Y){o()}function k(Y){g()}function w(Y){W()}function D(Y){toggleActive()}function L(Y){I()}function O(Y){i();g()}function y(Y){d()}function S(Y){d()}function B(ab){var aa=(ab.useLightLogo===true);var Y=(ab.useThirdLogo===true);var Z=(ab.useSolidBackground===true);U(aa,Y,Z)}f.init=function(){this.view=E(".sbn-top-nav");if(this.view.length<1){return}this.initUI();f.eventDispatcher.subscribe("campaignReskinApplied",B)};f.initUI=function(){E(window).bind("resizeStop",w);j=this.view.find(h);q=this.view.find(X);q.append(this.view.find(J));this.view.find(p).bind("click",L);this.view.bind("mouseleave",m);this.view.find(t).bind("mouseenter",O);this.view.find(e).bind("focus",y).bind("blur",S);this.view.find(".community-nav, .network-nav, .network-tagnav").each(function(Z,ab){var aa=E(ab);aa.find("> ul").cleanWhitespace();n(aa)});var Y=setTimeout(function(){clearTimeout(Y);W()},1000)};return f}(jQuery);Vox.Modules.sbnUserNav=function(b){var a=new Vox.Module();a.name="sbnUserNav";a.statsdKey=" pls.modules.4AE06D62-37E9-433D-BD77-C959F8073020";var d=b(window);var c=b("html");a.events=[""];a.init=function(){var e=this.instrumentation.start(this.name+" init");this.view=b(".sbn-user-nav");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(e)};a.initUI=function(e){this.view.find(".login-link").bind("click",function(f){f.preventDefault();a.eventDispatcher.publish("requestOpenModalForUrl",{url:Vox.Config.get("login_modal_url")})});this.view.find(".mysbn").bind("click",function(f){if(c.hasClass("lt-ie9")==false){f.preventDefault()}a.eventDispatcher.publish("requestOpenModalForUrl",{url:Vox.Config.get("my_sbn_modal_url")})})};return a}(jQuery);var Vox=Vox||{};Vox.Modules=Vox.Modules||{};Vox.Modules.DynamicSizedImages=function(e){var b={};if(Vox.Module){var b=new Vox.Module()}else{e(document).ready(function(){Vox.Modules.DynamicSizedImages.init()})}function g(k){var l=k.data("ratio"),j=k.outerWidth(),h=k.outerHeight(),i=l*h;if(i>j){if(l!==1&&h!==j){j=i}}return j}function d(i){var m=i.data("sizes");if(typeof m==="undefined"){return}var k=g(i),l;if(typeof window.devicePixelRatio!=="undefined"){k*=window.devicePixelRatio}for(var j in m){if(!m.hasOwnProperty(j)){continue}j=+j;if(typeof l==="undefined"){l=j}if(Math.abs(k-j)<Math.abs(l-k)){l=j}}if(Util.UserAgentProfiler.profile()==="desktop"&&typeof l!=="undefined"&&k<=350){var h;for(var j in m){if(!m.hasOwnProperty(j)||+j<=+l){continue}if(typeof h==="undefined"){h=j}if(Math.abs(l-j)<Math.abs(h-k)){h=j}}l=h}return m[l]}var f=".vox-lazy-load";function c(i){var i=i||e("body");var h={failure_limit:20,load:function(){var n=e(this);if(n.is("img")){n.css("height","auto")}n.addClass("lazy-loaded");if(e.fn.playGIF){var m={circleColor:Vox.Config.get("primaryColor")};if(typeof PLAYGIF_DISABLE_FLAG==="undefined"){var l=e('#sbnu-article-main-row img[src*=".gif"].photo');var o=e('#sbnu-article-main-row img[data-original*=".gif"]');if((l.length+o.length)===1){PLAYGIF_DISABLE_FLAG=true}else{PLAYGIF_DISABLE_FLAG=false;l.playGIF(m)}}n.playGIF(m)}},threshold:a()};var j=jQuery.extend({},h);var k=i.find(f);k.each(function(){var o=e(this),m=d(o);if(o.is("img")){var n=o.data("ratio"),l=Math.ceil(o.outerWidth()/n);o.css("height",l)}if(typeof m!=="undefined"&&o.data("original")!==m){o.data("original",m)}});k.lazyload(j)}function a(){var i;if(Util.UserAgentProfiler.profile()==="desktop"){i=0.25}else{i=0.1}var j=e(document).height(),h=Math.floor(j*i);return h}b.calculateThreshold=function(){a()};b.init=function(){this.initUI();jQuery(window).bind("breakpointchange",function(h){c()});if(this.eventDispatcher){this.eventDispatcher.subscribe("moduleInserted",function(h){c(h.modules)})}};b.initUI=function(h){c(h)};return b}(jQuery);Vox.Modules.voxEntryGallery=function(h){var y=new Vox.Module();y.name="voxEntryGallery";y.statsdKey=" pls.modules.DBF77540-7782-4F12-BFE5-B7FF49D0A54A";var p=h(window);var r=h("body");y.events=[""];var i="galleryIsInit",t="galleryFullSize",w="galleryCaption",f="galleryImagesArray",n="galleryParentNode";var m=".v-gal-primary-nav .v-gal-prev",x=".v-gal-primary-nav .v-gal-next",a=".v-gal-image",l=".v-gal-caption",s=".v-gal-caption-body",b=".v-gal-caption-index",o=".v-gal-metadata div",k="ui-state-selected",z="ui-state-active",v="."+k;var u=false;function j(A){A.find("[data-gallery-full-size]").each(function(B,E){var D=h(E),C=new Image();C.src=D.attr("data-gallery-full-size")})}function e(J,F,A){var F=F||A.data(t),C=J.find(a),A=A||J.find('[data-gallery-full-size="'+F+'"]'),I=A.data(w),H=A.data("galleryTitle"),D=(H)?'<span class="gallery-title">'+H+"<span> : "+I:I;if(F==C.attr("src")){return}function G(){C.attr("src",F);C.addClass(z)}if(!C.attr("src")){G()}else{C.removeClassWithAnimationCallback(z,G)}var E=A.index()+1;var B=J.find(o).length;J.find(b).text(E+" of "+B);J.find(s).html(D)}function d(B,F){var A=B.data(f),G=B.find(a),C=G.attr("src"),D=A.indexOf(C),E=(F===true)?D+1:D-1,E=(E<0)?A.length-1:(E>=A.length)?0:E;if(A[E]){e(B,A[E])}}function g(A){A.preventDefault();d(A.data.gallery,true)}function c(A){A.preventDefault();d(A.data.gallery,false)}function q(A){}y.init=function(C){var B=this.instrumentation.start(this.name+" init"),C=C||r;var A=C.find(".v-gal");if(A){if(this.views.length>0){this.views.add(A)}else{this.views=A}}if(this.views.length<1){return}this.initUI();this.instrumentation.finish(B)};y.initUI=function(A){this.views.each(function(B,G){var F=h(G);if(F.data(i)===true){return}var E=F.find(o),D=null,C=[];F.find(m).bind("click",{gallery:F},c);F.find(x).bind("click",{gallery:F},g);F.find(a).swipe({swipe:function(I,K,L,J,H){I.data={gallery:F};if(K=="left"){g(I)}else{if(K=="right"){c(I)}}},click:function(H,I){h(".v-gal-caption").toggle()}});F.find(a).bind("load",function(){console.log("load")});E.each(function(K,J){var I=h(J),H=I.data(t);if(K==0||I.hasClass(k)){D=I}C.push(H)});F.data(f,C);F.data(i,true);if(D){e(F,D.data(t),D)}if(u===false){F.data(i,true);p.bind("scrollStop",q)}j(F)})};return y}(jQuery);Vox.Modules.voxModalManager=function(g){var y=new Vox.Module();y.name="voxModalManager";y.statsdKey=" pls.modules.C788225F-722D-417E-B439-16D35206D8C9";var m=g(window);y.events=[""];var d={login:".sbn-pl-modal-parking-lot .s-modal-login",mySbn:".sbn-pl-modal-parking-lot .s-modal-mysbn",fanshots:".sbn-pl-modal-parking-lot .sbn-modal-fanshots"};function u(B){return g(d[B])}var l=".v-mmg-hook",c="ui-state-active",o="ui-state-animating",j=".v-mmg-overlay",b="v-mmg-instance";var h="modalId";var k,s;function q(B){var C;if(g("html").hasClass("lt-ie9")==false){C=g('<div class="'+b+'"></div>').append(g('<div class="'+b+'-inner"></div>').append(g('<div class="'+b+'-inner"></div>').append(B)))}else{C=g("<div class='"+b+"'><div class='"+b+"-inner'><div class='"+b+"-inner'>"+B.html()+"</div></div></div>")}return C}function a(C){var B=q(C);B.data(h,new Date().getTime());r();k.prepend(B);var D=setTimeout(function(){clearTimeout(D);B.addClass(c)},200);y.eventDispatcher.publish("modalOpened")}function f(){var B=k.children();for(var C=B.length-1;C>-1;C--){var D=g(B[C]);D.detach();y.eventDispatcher.publish("modalClosed",D)}t()}function n(D){var C=k.children(),B=D.parents("."+b).data(h);if(B){C.each(function(E,F){var G=g(F);if(G.data(h)!=B){return}G.removeClass(c);G.addClassWithAnimationCallback(o,function(){G.detach();y.eventDispatcher.publish("modalClosed",D);if(k.children().length<1){t()}})})}if(k.children().length<1){t()}}function r(){y.view.addClass(o);var B=setTimeout(function(){y.view.addClass(c);y.view.removeClass(o)},400)}function t(){if(y.view.hasClass(c)){y.view.addClass(o);var B=setTimeout(function(){y.view.removeClass(o);y.view.removeClass(c)},400)}}function i(C){C=g.extend({modalClass:""},C);g(".sbn-pl-modal-parking-lot .sbn-modal-dynamic").remove();var B=g('<div class="vox-module s-modal sbn-modal-dynamic '+C.modalClass+'"></div>');g(".sbn-pl-modal-parking-lot").append(B);return B}function w(B){if(typeof B=="string"){B=u(B)}a(B)}function A(B){if(B.jquery){n(B)}else{f()}}function p(B){if(g(B.target).hasClass("s-modal-close")){f()}}function z(C){var B=i(C);B.html(C.contents);B.data("keepModal",false);w(B)}function e(B){B=B||window.event;if(B.keyCode==27){f()}}function x(B){r();g.ajax({url:B.url,success:function(D){var C=i(B).html(D);C.data("keepModal",false);w(C)},error:function(){t()}})}function v(B){g.extend(B,{contents:'<iframe src="'+B.url+'" width="100%" height="100%" frameborder="0" scrolling="auto" style="overflow-x: hidden; overflow-y: scroll;" id="modal_iframe"></iframe>'});z(B)}y.init=function(){var B=this.instrumentation.start(this.name+" init");this.view=g(".v-mmg");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(B)};y.detachUI=function(){};y.initUI=function(B){k=this.view.find(l);s=this.view.find(j);this.view.bind("click",p);y.eventDispatcher.subscribe("requestOpenModal",w);y.eventDispatcher.subscribe("requestCloseModal",A);y.eventDispatcher.subscribe("requestOpenModalWithContents",z);y.eventDispatcher.subscribe("requestOpenModalForUrl",x);y.eventDispatcher.subscribe("requestOpenModalInIframe",v);m.bind("keyup",e)};return y}(jQuery);Vox.Modules.ModuleLoader=(function(c){var a=new Vox.Module();a.loadStoryMetadata=function(e){e=e||c(document);if(!Vox.Config.get("loggedIn")){return}var d=[];e.find("[data-delayed-load-storybox]").each(function(){var f=c(this);if(typeof f.data("has-loaded")==="undefined"){d.push(f.data("delayed-load-storybox"));f.data("has-loaded",true)}});if(d.length==0){return}c.post("/sbn_entries/delayed_load_storyboxes",{entryIds:d},function(f){c.each(f,function(i,h){var g=c(i);g.each(function(j,n){var l=c(n);l.html(h);var m=l.data("comments-unread-token");if(typeof m!=="undefined"){var k=l.find("a");if(k.length>0){l.prepend(", ");k.append(" "+m)}}})})})};var b=function(d){d=d||c(document);var e=[];d.find("div[data-delayed-load-cell-class]").each(function(){var g=c(this),f={};if(g.data("unless-profile-is")!==Util.UserAgentProfiler.profile()){f={klass:g.data("delayed-load-cell-class")};if(g.data("state")){f.state=g.data("state")}e.push(f)}});if(e.length>0){if(e.length==1){e=e[0]}c.ajax({url:"/chorus_page/delayed_load_cells",dataType:"json",contentType:"application/json",data:{cells:JSON.stringify(e),serializedContext:Vox.Config.get("serializedContext")},success:function(g){if(g===null){return}var f,h;c.each(g,function(m,j){var i=c(j);var l=c("#"+m).replaceWith(i);var k=i.attr("data-vox-module-name");a.eventDispatcher.publish("moduleInserted",{modules:i});if(k&&Vox.Modules[k]){Vox.Modules[k].init()}});Vox.Modules.ModuleLoader.loadStoryMetadata()}})}};a.init=function(){this.initUI()};a.initUI=function(){b();this.loadStoryMetadata()};return a})(jQuery);Vox.Modules.voxSearchSearchForm=function(b){var a=new Vox.Module();a.name="voxSearchSearchForm";a.statsdKey=" pls.modules.0EA22C7F-BA14-4088-8E5B-2D3648822F06";var c=b(window);a.events=[""];a.init=function(){var d=this.instrumentation.start(this.name+" init");this.view=b(".vox-search-form");if(this.view.length<1){return}this.initUI();this.instrumentation.finish(d)};a.initUI=function(d){this.view.find("#created_after_freeform").bind("focus blur",function(){Util.Dates.updateDate("created_after")});this.view.find("#created_before_freeform").bind("focus blur",function(){Util.Dates.updateDate("created_before")});Util.Dates.updateDate("created_after");Util.Dates.updateDate("created_before");this.view.find(".vox-search-form-toggler span").bind("click",function(f){var e=a.view.find(".vox-search-form-basic");if(e.hasClass("ui-state-active")){e.removeClass("ui-state-active");a.view.find(".vox-search-form-advanced").addClass("ui-state-active");b("#all_these_words").val(b("#q").val());b(f.target).html("Basic Search")}else{e.addClass("ui-state-active");a.view.find(".vox-search-form-advanced").removeClass("ui-state-active");b("#q").val(b("#all_these_words").val());b(f.target).html("Advanced Search")}})};return a}(jQuery);Vox.Modules.SocialCount=(function(f){var d=new Vox.Module();function g(){e()}function e(){f("[data-facebook-share-count-url]").each(function(){var i=f(this);b(i.data("facebook-share-count-url"),function(j){if(j>0){if(i.data("use-parens")===false){i.text(j).redraw()}else{i.text("("+j+")").redraw()}}})});f("[data-twitter-share-count-url]").each(function(){var i=f(this);a(i.data("twitter-share-count-url"),function(j){if(j>0){if(i.data("use-parens")===false){i.text(j).redraw()}else{i.text("("+j+")").redraw()}}})})}var c={};function b(i,j){if(c[i]){j(c[i]);return}d.eventDispatcher.subscribe("facebookSdkAvailable",function(){FB.api({method:"fql.query",query:"SELECT total_count FROM link_stat WHERE url = '"+i+"'"},function(k){c[i]=k[0].total_count;j(k[0].total_count)})})}var h={};function a(i,j){if(h[i]){j(h[i]);return}f.ajax({url:"http://cdn.api.twitter.com/1/urls/count.json",dataType:"jsonp",data:{url:i},success:function(k){h[i]=k.count;j(k.count)}})}f.extend(d,{init:g,initUI:e});return d})(jQuery);