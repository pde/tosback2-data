!function(window,undefined){if(window.post_widget!==undefined)return;function detectIE(){if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search(new RegExp("MSIE 6.0"))!==-1)return"IE6";if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search(new RegExp("MSIE 7.0"))!==-1)return"IE7";if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search(new RegExp("MSIE 8.0"))!==-1)return"IE8";return"Other"}var html=document.getElementsByTagName("html");
if(html)html=html[0];switch(detectIE()){case "IE6":return;case "IE7":html.className+=" ra1-pw-ie7";break;case "IE8":html.className+=" ra1-pw-ie8";break}var enums={};enums.sizeItem={small:{text:"small",X:16,Y:16,margin:3},medium:{text:"medium",X:24,Y:24,margin:3},large:{text:"large",X:32,Y:32,margin:3},custom:{text:"custom",X:10,Y:10}};enums.counter={vertical:"vertical",horizontal:"horizontal",none:"none",show:"show"};enums.boxes={toolbox:"toolbox",custombox:"custombox",nativebox:"nativebox",alonebox:"alonebox",
looknativebox:"looknativebox",relikebox:"relikebox"};enums.shareMode={classic:"classic",html:"html",flash:"flash"};var helper={};helper.args=function(){var args={};var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var src=scripts[i].src;if(src.search(new RegExp("post-widget.js"))==-1)continue;var jsUrlParts=src.split("#");if(jsUrlParts.length!==2)continue;var supported=["publisherKey","init","lc"],params=jsUrlParts[1].split("&");for(var j=0;j<supported.length;j++)for(var p=
0;p<params.length;p++){if(params[p].search(new RegExp(supported[j]+"="))==-1)continue;var value=params[p].replace(supported[j]+"=","");if(value!=="")args[supported[j]]=value;break}break}return{getPublisherKey:function(key){return key?key:args["publisherKey"]||window.pwidget_config.publisherKey},getInitType:function(){return args["init"]},getLocale:function(){return args["lc"]}}}();helper.idIndex=0;helper.containersForRecycling=[];helper.clickBackFired=false;helper.initialized=false;helper.allWidgets=
[];helper.preInitWidgets=[];helper.getRandomTime=function(){return(new Date).getTime()+parseInt(Math.random()*1E5)};helper.jsonpRequest=function(url,func,context,callback){window.__pwidgetCallbacks=window.__pwidgetCallbacks||{};var functionName="__pwidgetData"+helper.getRandomTime();window.__pwidgetCallbacks[functionName]=function(data){func.call(context,data);if(callback)callback.call(context)};var callbackFunction="window.__pwidgetCallbacks."+functionName;var fullUrl=url+"&callback="+callbackFunction;
helper.loadScript(fullUrl)};helper.initClass=function(newClass,baseClass){if(!newClass)throw new Error("ArgumentException");if(baseClass){var f=function(){};f.prototype=baseClass.prototype;newClass.prototype=new f;newClass.prototype.constructor=newClass;newClass.base=baseClass.prototype;newClass.baseClass=baseClass}};helper.domEvent=function(){var guid=0;function fixEvent(event){event=event||window.event;if(event.isFixed)return event;event.isFixed=true;event.preventDefault=event.preventDefault||function(){this.returnValue=
false};event.stopPropagation=event.stopPropagaton||function(){this.cancelBubble=true};if(!event.target)event.target=event.srcElement;if(!event.relatedTarget&&event.fromElement)event.relatedTarget=event.fromElement==event.target?event.toElement:event.fromElement;if(event.pageX==null&&event.clientX!=null){var html=document.documentElement,body=document.body;event.pageX=event.clientX+(html&&html.scrollLeft||body&&body.scrollLeft||0)-(html.clientLeft||0);event.pageY=event.clientY+(html&&html.scrollTop||
body&&body.scrollTop||0)-(html.clientTop||0)}if(!event.which&&event.button)event.which=event.button&1?1:event.button&2?3:event.button&4?2:0;return event}function commonHandle(event,object,args){event=fixEvent(event);var handlers=this.events[event.type];for(var g in handlers){var handler=handlers[g];event.Args=args;var ret=handler.call(object,this,event);if(ret===false){event.preventDefault();event.stopPropagation()}}}return{add:function(elem,type,handler,object,args){if(elem.setInterval&&elem!=window&&
!elem.frameElement)elem=window;if(!handler.guid)handler.guid=++guid;if(!elem.events){elem.events={};elem.handle=function(event){if(event!==undefined)return commonHandle.call(elem,event,object,args)}}if(!elem.events[type]){elem.events[type]={};if(elem.addEventListener)elem.addEventListener(type,elem.handle,true);else if(elem.attachEvent)elem.attachEvent("on"+type,elem.handle)}elem.events[type][handler.guid]=handler},remove:function(elem,type,handler){var handlers=elem.events&&elem.events[type];if(!handlers)return;
delete handlers[handler.guid];for(var any in handlers)return;if(elem.removeEventListener)elem.removeEventListener(type,elem.handle,true);else if(elem.detachEvent)elem.detachEvent("on"+type,elem.handle);delete elem.events[type];for(var any in elem.events)return;try{delete elem.handle;delete elem.events}catch(e){elem.handle=null;elem.events=null}}}}();helper.hideNode=function(node){if(node)node.style.display="none"};helper.showNode=function(node){if(node)node.style.display=""};helper.DOMReady=function(handler){if(document.readyState==
"complete")handler();var called=false;function ready(){if(called)return;called=true;handler()}if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){ready()},false);else if(document.attachEvent){if(document.documentElement.doScroll&&window==window.top){function tryScroll(){if(called)return;if(!document.body)return;try{document.documentElement.doScroll("left");ready()}catch(e){setTimeout(tryScroll,0)}}tryScroll()}document.attachEvent("onreadystatechange",function(){if(document.readyState===
"complete")ready()})}if(window.addEventListener)window.addEventListener("load",ready,false);else if(window.attachEvent)window.attachEvent("onload",ready)};helper.getScrollPosition=function(){var x=window.pageXOffset||document.documentElement.scrollLeft;var y=window.pageYOffset||document.documentElement.scrollTop;return{X:x,Y:y}};helper.insertAfter=function(node,newNode){node.parentNode.insertBefore(newNode,node.nextSibling)};helper.nodeListToArray=function(nodeList){var array=[];for(var i=0;i<nodeList.length;i++)array.push(nodeList[i]);
return array};helper.isFlashPlayerInstalled=function(){var installed=false;if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin)installed=true}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");installed=true}catch(err){}return installed};helper.stopEventBubble=function(nodes,args){var anchor=null;
if(nodes.length>0)anchor=nodes[0];var e=args.toElement||args.target;if(e.parentNode==anchor||e.parentNode==this._DomNode)return false;return true};helper.clearContainersForInit=function(){for(var i=0;i<helper.containersForRecycling.length;i++)if(helper.containersForRecycling[i].parentNode)helper.containersForRecycling[i].parentNode.removeChild(helper.containersForRecycling[i]);helper.containersForRecycling=[]};helper.getCenterCoordForNode=function(node){var result={};var size=helper.getClientOffset();
var centerX=size.Width/2;var centerY=size.Height/2;result.X=centerX-node.offsetWidth/2;result.Y=centerY-node.offsetHeight/2;return result};helper.getSizeItem=function(sizeString){switch(sizeString){case "large":case "32":return enums.sizeItem.large;case "medium":case "24":return enums.sizeItem.medium;default:return enums.sizeItem.small}};helper.isIdString=function(str){if(str.search(new RegExp("#"))==0){var id=str.replace("#","");if(id.length>0)return id}return false};helper.isClassString=function(str){if(str.search(new RegExp("."))==
0){var className=str.replace(".","");if(className.length>0)return className}return false};helper.getComputedStyle=function(node){if(window.getComputedStyle)return window.getComputedStyle(node,null);else return node.currentStyle};helper.getElementsByClassName=function(classList,node){var nodeIn=node||document,list=nodeIn.getElementsByTagName("*"),length=list.length,classArray=classList.split(/\s+/),classes=classArray.length,result=[],i,j,z,classArrayOfElemets,listClasses;for(i=0;i<length;i++)for(j=
0;j<classes;j++){if(list[i].namespaceURI=="http://www.w3.org/2000/svg")listClasses=list[i].className.baseVal;else listClasses=list[i].className;classArrayOfElemets=listClasses.split(" ");for(z=0;z<classArrayOfElemets.length;z++)if(classArrayOfElemets[z]==classArray[j]){result.push(list[i]);break}}return result};helper.getOffsetElement=function(element){if(element.getBoundingClientRect)return helper.getOffsetRect(element);else return helper.getOffsetSum(element)};helper.popupPositionElClass={right:"pw-popup-side_right",
left:"pw-popup-side_left"};helper.getOffsetRect=function(elem){var box=elem.getBoundingClientRect();var body=document.body;var docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop;var scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+scrollTop-clientTop;var left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),
left:Math.round(left)}};helper.getOffsetSum=function(elem){var top=0,left=0;while(elem){top=top+parseInt(elem.offsetTop);left=left+parseInt(elem.offsetLeft);elem=elem.offsetParent}return{top:top,left:left}};helper.getClientOffset=function(){var size={};if(window.opera){size.Width=window.innerWidth;size.Height=window.innerHeight}else if(document.compatMode=="CSS1Compat"){size.Width=document.documentElement.clientWidth;size.Height=document.documentElement.clientHeight}else{size.Width=document.body.clientWidth;
size.Height=document.body.clientHeight}return size};helper.isContainClassName=function(node,className){var classList=node.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i]===className)return true;return false};helper.log=function(message){if(window.console&&window.console.log)window.console.log(message)};helper.loadScript=function(url,onload){var script=document.createElement("script");script.src=url;if("onreadystatechange"in script)script.onreadystatechange=function(e){if(this.readyState==
"loaded"||this.readyState=="complete"){if(onload)onload(e);script.parentNode.removeChild(script);script=null;this.onreadystatechange=null}};else script.onload=function(e){if(onload)onload(e);script.parentNode.removeChild(script);script=null};var model=rapost.getApplicationModel();model.PwRoot.appendChild(script)};helper.isArray=function(elements){var type=Object.prototype.toString.call(elements);return type==="[object NodeList]"||type==="[object HTMLCollection]"||type==="[object Array]"};helper.getNewId=
function(){helper.idIndex++;return"pw_post_"+helper.idIndex};helper.getS4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};helper.getGuid=function(){return helper.getS4()+helper.getS4()+"-"+helper.getS4()+"-"+helper.getS4()+"-"+helper.getS4()+"-"+helper.getS4()+helper.getS4()+helper.getS4()};helper.clearOfUrl=function(url){if(pwidget_config.track==true||pwidget_config.track=="query")return helper.removeTrackingParameter(url);else return url};helper.removeTrackingParameter=function(url){return url.replace(/[\?&#]{1}([a-z\d]{16})\.([\d]{2})(?:|$)/i,
"")};helper.getInstanceWidgetById=function(id){for(var i=0;i<helper.allWidgets.length;i++)if(id==helper.allWidgets[i]._Id)return helper.allWidgets[i];return null};helper.getPartsOfUrl=function(url){var result={};var partsOfUrl=url.split("?");result.pu=partsOfUrl[0];if(partsOfUrl[1])result.pq=partsOfUrl[1];else{partsOfUrl=partsOfUrl[0].split("#");result.pu=partsOfUrl[0];if(partsOfUrl[1])result.pq="#"+partsOfUrl[1];else result.pq=""}return result};helper.getWrapersOfWidgets=function(widgets){if(widgets instanceof
rapost.PostWidget)return{id:widgets._Id,url:widgets._SharerUrl,title:widgets._Title,updateConfig:function(config){var widget=helper.getInstanceWidgetById(this.id);if(widget){widget.updateConfig(config);this.url=widget._SharerUrl;this.title=widget._Title}return this}};if(helper.isArray(widgets)){var widgetsList=[];for(var i=0;i<widgets.length;i++)widgetsList.push(helper.getWrapersOfWidgets(widgets[i]));return widgetsList}return[]};helper.updateGlobalConfig=function(){window.pwidget_config=window.pwidget_config||
{};window.pwidget_config.onload=window.pwidget_config.onload||null;window.pwidget_config.onshare=window.pwidget_config.onshare||null;window.pwidget_config.publisherKey=window.pwidget_config.publisherKey||null;window.pwidget_config.init=window.pwidget_config.init||helper.args.getInitType()||null;window.pwidget_config.track=window.pwidget_config.track!==undefined?window.pwidget_config.track:true;window.pwidget_config.copypaste=window.pwidget_config.copypaste!==undefined?window.pwidget_config.copypaste:
null;window.pwidget_config.locale=window.pwidget_config.locale||helper.args.getLocale()||null;if(window.pwidget_config.locale==="auto")window.pwidget_config.locale=navigator.language||navigator.systemLanguage;window.pwidget_config.defaults=window.pwidget_config.defaults||{};window.pwidget_config.defaults.transformations=window.pwidget_config.defaults.transformations||{};window.pwidget_config.defaults.transformations.shorten=window.pwidget_config.defaults.transformations.shorten!==undefined?window.pwidget_config.defaults.transformations.shorten:
null;window.pwidget_config.defaults.transformations.tracking=window.pwidget_config.defaults.transformations.tracking!==undefined?window.pwidget_config.defaults.transformations.tracking:true;window.pwidget_config.defaults.afterShare=window.pwidget_config.defaults.afterShare!==undefined?window.pwidget_config.defaults.afterShare:true;window.pwidget_config.defaults.sharePopups=window.pwidget_config.defaults.sharePopups?window.pwidget_config.defaults.sharePopups:false;window.pwidget_config.defaults.image=
window.pwidget_config.defaults.image||null;if(window.pwidget_config.defaults.image==null){window.pwidget_config.defaults.imageURL=window.pwidget_config.defaults.imageURL||null;window.pwidget_config.defaults.image=window.pwidget_config.defaults.imageURL}if(!window.pwidget_config.defaults.url)if(helper.canonicalUrl.get()){window.pwidget_config.defaults.url=helper.canonicalUrl.get();helper.canonicalUrl.setActive(true)}else{window.pwidget_config.defaults.url=document.location.href;helper.canonicalUrl.setActive(false)}if(window.pwidget_config.defaults.title!==
"")window.pwidget_config.defaults.title=window.pwidget_config.defaults.title!==undefined?window.pwidget_config.defaults.title:document.title;window.pwidget_config.defaults.showPost=window.pwidget_config.defaults.showPost!==undefined?window.pwidget_config.defaults.showPost:false;window.pwidget_config.defaults.services=window.pwidget_config.defaults.services||{};window.pwidget_config.defaults.size=window.pwidget_config.defaults.size||enums.sizeItem.small;window.pwidget_config.defaults.buttons=window.pwidget_config.defaults.buttons||
["facebook","twitter","linkedin"];window.pwidget_config.defaults.click=window.pwidget_config.defaults.click!==undefined?window.pwidget_config.defaults.click:false;window.pwidget_config.defaults.button=window.pwidget_config.defaults.button||null;window.pwidget_config.defaults.vertical=window.pwidget_config.defaults.vertical!==undefined?window.pwidget_config.defaults.vertical:false;window.pwidget_config.defaults.counter=window.pwidget_config.defaults.counter!==undefined?window.pwidget_config.defaults.counter:
null};helper.analizeOfCustomConfig=function(customConfig){helper.updateGlobalConfig();var config={};config.container=customConfig.container!==undefined?customConfig.container:enums.boxes.custombox;config.publisherKey=customConfig.publisherKey!==undefined?customConfig.publisherKey:window.pwidget_config.publisherKey;config.url=customConfig.url!==undefined?customConfig.url:window.pwidget_config.defaults.url;var title=customConfig.title;if(title=="")config.title="";else config.title=customConfig.title!==
undefined?customConfig.title:window.pwidget_config.defaults.title;if(customConfig.hasOwnProperty("copypaste"))config.copypaste=customConfig.copypaste;if(customConfig.hasOwnProperty("mode"))config.mode=customConfig.mode;config.sharePopups=customConfig.sharePopups!==undefined?customConfig.sharePopups:window.pwidget_config.defaults.sharePopups;config.showPost=customConfig.showPost!==undefined?customConfig.showPost:window.pwidget_config.defaults.showPost;config.isHtmlInit=customConfig.isHtmlInit!==undefined?
customConfig.isHtmlInit:false;config.size=customConfig.size!==undefined?customConfig.size:window.pwidget_config.defaults.size;config.services=customConfig.services!==undefined?customConfig.services:undefined;config.afterShare=customConfig.afterShare!==undefined?customConfig.afterShare:window.pwidget_config.defaults.afterShare;config.transformations=customConfig.transformations!==undefined?customConfig.transformations:{};config.counter=customConfig.counter!==undefined?customConfig.counter:window.pwidget_config.defaults.counter;
config.buttons=customConfig.buttons!==undefined?customConfig.buttons:window.pwidget_config.defaults.buttons;config.button=customConfig.button!==undefined?customConfig.button:window.pwidget_config.defaults.button;config.vertical=customConfig.vertical!==undefined?customConfig.vertical:window.pwidget_config.defaults.vertical;config.click=customConfig.click!==undefined?customConfig.click:window.pwidget_config.defaults.click;config.onshare=customConfig.onshare!==undefined?customConfig.onshare:window.pwidget_config.onshare;
config.image=customConfig.image!==undefined?customConfig.image:null;if(config.image==null){config.image=customConfig.pinterestImage!==undefined?customConfig.pinterestImage:null;config.image=customConfig.imageURL!==undefined?customConfig.imageURL:config.image}return config};helper.initWidgets=function(){helper.initialized=true;helper.googleAnalytics.init();var nodes=helper.getElementsByClassName("pw_counter_buttons");if(nodes.length>0)helper.postWidget(nodes,{container:"nativebox",showPost:true,isHtmlInit:true});
nodes=helper.getElementsByClassName("pw_widget");if(nodes.length>0)helper.postWidget(nodes,{container:"toolbox",showPost:true,isHtmlInit:true});nodes=helper.getElementsByClassName("pw-widget");var typeOfContainer=null;if(nodes.length>0)for(var i=0;i<nodes.length;i++){typeOfContainer=enums.boxes.toolbox;var items=nodes[i].getElementsByTagName("a");for(var j=0;j<items.length;j++){if(helper.isContainClassName(items[j],"pw_title")||helper.isContainClassName(items[j],"pw-title")||helper.isContainClassName(items[j],
"pw_url")||helper.isContainClassName(items[j],"pw-url")||helper.isContainClassName(items[j],"pw_separator"))continue;if(items[j].className.search(new RegExp("post-share"))!=-1)continue;if(items[j].className.search(new RegExp("-like?|-share?|twitter-twitt?|-plus?"))!==-1)typeOfContainer=enums.boxes.nativebox;break}helper.postWidget(nodes[i],{container:typeOfContainer,isHtmlInit:true})}var model=rapost.getApplicationModel();for(var i=0;i<model.Metadata.length;i++){var className="pw-button-";className+=
model.Metadata[i].name;nodes=helper.getElementsByClassName(className);if(nodes.length>0){var filter_nodes=helper.filterAloneWd(nodes);if(filter_nodes.length>0){var config={button:model.Metadata[i].name,container:"alonebox",isHtmlInit:true};helper.postWidget(filter_nodes,config)}}}for(var i=0;i<helper.preInitWidgets.length;i++)helper.postWidget(helper.preInitWidgets[i].idOrClass,helper.preInitWidgets[i].config);helper.clearContainersForInit();if(window.pwidget_config.onload)window.pwidget_config.onload();
helper.setCopypasteOption()};helper.setCopypasteOption=function(){var setCopypasteTrueForAllWidgets,checkAllWidgetsCopyPasteState,copypaste,widget;setCopypasteTrueForAllWidgets=function(){for(var i=0;i<helper.allWidgets.length;i++)helper.allWidgets[i]._CopyPaste=true};checkAllWidgetsCopyPasteState=function(){var state=false;for(var i=0;i<helper.allWidgets.length;i++)if(helper.allWidgets[i]._CopyPaste){setCopypasteTrueForAllWidgets();state=true;break}return state};if(window.pwidget_config.copypaste){if(checkAllWidgetsCopyPasteState())helper.loadCopyPaste()}else{for(var i=
0;i<helper.allWidgets.length;i++){widget=helper.allWidgets[i];if(widget._CopyPaste){copypaste=true;break}}if(copypaste){setCopypasteTrueForAllWidgets();helper.loadCopyPaste();window.pwidget_config.copypaste=true}else window.pwidget_config.copypaste=false}};helper.loadCopyPaste=function(){if(!window.radium){var model=rapost.getApplicationModel();var scriptName=model.PostCDNServer+"/script/post-copypaste.js";var onload=function(){var locationHref=helper.canonicalUrl.get()||window.location.href;var sGuid=
model.getSGuid();var url=model.getSharerUrl(locationHref,"clipboard",sGuid,window.pwidget_config.defaults.transformations.tracking);var radvars={"min":7,"url":url,"msg":model.l10n("readMore")+" ","allowLink":false,"callback":function(){helper.googleAnalytics.track("event","Clipboard",locationHref);helper.googleAnalytics.track("social","Clipboard",locationHref);helper.trackClickBack(helper.createLogCopyPaste());helper.updateCopyPasteCounter()}};window.radium.init(radvars)};helper.loadScript(scriptName,
onload)}};helper.updateCopyPasteCounter=function(){var shareUrl=helper.canonicalUrl.get()||document.location.href,widget,i,callbackFunction,url;window.__pwidgetCallbacks=window.__pwidgetCallbacks||{};window.__pwidgetCallbacks.___raCallbackUpdateWidgetsCounters=function(data){var counterValue=data.total;for(i=0;i<helper.allWidgets.length;i++){widget=helper.allWidgets[i];if(widget._SharerUrl==shareUrl)widget._callbackUpdateCounter({total:counterValue})}};callbackFunction="window.__pwidgetCallbacks.___raCallbackUpdateWidgetsCounters";
url=rapost.getApplicationModel().PostShortenerURL+"/v1/counter?publisherKey="+helper.args.getPublisherKey()+"&increment="+true+"&channel="+"clipboard"+"&url="+encodeURIComponent(shareUrl)+"&callback="+callbackFunction+"&"+(new Date).getTime();helper.loadScript(url)};helper.createLogCopyPaste=function(){var result={},shareUrl=helper.canonicalUrl.get()||document.location.href;result.pub=helper.args.getPublisherKey();result.random=(new Date).getTime()+parseInt(Math.random()*1E5);result.pu=helper.clearOfUrl(shareUrl);
result.t="share";if(!rapost.getApplicationModel().OptOutStatus){result.ru=document.referrer;result.pt=document.title;result.vGUID=helper.getGuid();result.cGUID=helper.getGuid();result.sGUID=rapost.getApplicationModel().getSGuid();if(window.pwidget_config.hasOwnProperty("mode"))result.sm=window.pwidget_config.mode;else result.sm=enums.shareMode.classic;result.sc1="clipboard";result.su1=""}return result};helper.trackClickBack=function(event){if(event.t==undefined)return;var model=rapost.getApplicationModel();
if(model.OptOutStatusLoaded){var logUrl=model.PostPixelLogServer,first=true;for(key in event){if(first){logUrl+="?";first=false}else logUrl+="&";logUrl+=key+"="+encodeURIComponent(event[key])}var tracker=document.createElement("img");tracker.setAttribute("id",(new Date).getTime());tracker.className="ra1-pw-logImage";tracker.setAttribute("src",logUrl);model.PwRoot.appendChild(tracker);tracker.parentNode.removeChild(tracker)}else model.DelayedEvents.push(event)};helper.filterAloneWd=function(nodes){var filter_nodes=
[];var parentClass="";for(var i2=0;i2<nodes.length;i2++){parentClass=nodes[i2].parentNode.className;if(!parentClass.match(/\bpw-widget\b/)&&!parentClass.match(/\bpw_widget\b/))filter_nodes.push(nodes[i2])}return filter_nodes};helper.chekInitType=function(){var doc=document,win=window;helper.canonicalUrl.save();helper.updateGlobalConfig();helper.setLocaleToBody();win._comscore=win._comscore||[];win._comscore.push({c1:"7",c2:"15935512",c3:"1"});(function(){var s=doc.createElement("script"),el=doc.getElementsByTagName("script")[0];
s.async=true;s.src=(doc.location.protocol=="https:"?"https://sb":"http://b")+".scorecardresearch.com/beacon.js";el.parentNode.insertBefore(s,el)})();switch(window.pwidget_config.init||""){case "immediate":helper.initWidgets();break;case "lazy":helper.initialized=true;if(window.pwidget_config.onload){var callback=window.pwidget_config.onload;window.pwidget_config.onload=null;callback()}break;default:helper.DOMReady(helper.initWidgets);break}};helper.setLocaleToBody=function(){var htmlNode=window.document.getElementsByTagName("html")[0],
locale;locale=i18n.getDefaultBCP47Tag(pwidget_config.locale).split("_")[0]||"en";htmlNode.className+=" pw-locale-"+locale};helper.postWidget=function(){var arguments=arguments;if(!helper.initialized){var settings={};if(arguments.length>0){if(arguments.length==1){settings.idOrClass=arguments[0];settings.config={}}if(arguments.length==2){settings.idOrClass=arguments[0];settings.config=arguments[1]}helper.preInitWidgets.push(settings)}return[]}if(arguments.length==1&&arguments[0]instanceof rapost.PostWidget)return helper.getWrapersOfWidgets(arguments[0]);
if(arguments.length==0)return helper.getWrapersOfWidgets(helper.allWidgets);var customConfig={};if(arguments[1])customConfig=helper.analizeOfCustomConfig(arguments[1]);var type=Object.prototype.toString.call(arguments[0]);if(type==="[object String]"){if(helper.isIdString(arguments[0])){var id=helper.isIdString(arguments[0]);for(var i=0;i<helper.allWidgets.length;i++)if(helper.allWidgets[i]._Id==id)return helper.postWidget(helper.allWidgets[i]);var node=document.getElementById(id);var wdg=helper.postWidget(node,
customConfig);return wdg}else if(helper.isClassString(arguments[0])){var className=helper.isClassString(arguments[0]);var nodes=helper.getElementsByClassName(className);var createdWidgets=[];for(var i=0;i<nodes.length;i++){var id=nodes[i].getAttribute("id")?nodes[i].getAttribute("id"):helper.getNewId();nodes[i].setAttribute("id",id);createdWidgets.push(helper.postWidget(nodes[i],customConfig))}return helper.getWrapersOfWidgets(createdWidgets)}return[]}if(arguments[0].getAttribute){var node=arguments[0];
if(node.getAttribute("pw-widget")!=="init"){node.setAttribute("pw-widget","init");var widget=new rapost.PostWidget({domNode:arguments[0],config:customConfig});helper.allWidgets.push(widget);return helper.postWidget(widget)}}if(helper.isArray(arguments[0])){var nodes=arguments[0];var createdWidgets=[];for(var i=0;i<nodes.length;i++){var id=nodes[i].getAttribute("id")?nodes[i].getAttribute("id"):helper.getNewId();nodes[i].setAttribute("id",id);createdWidgets.push(helper.postWidget(nodes[i],customConfig))}return helper.getWrapersOfWidgets(createdWidgets)}return[]};
helper.canonicalUrl=function(){var url,save,get,active=false,setActive,isActive,documentLocation=document.location;function getTagBaseValue(){var tag,value,href;tag=document.getElementsByTagName("base")[0];if(tag){href=tag.getAttribute("href");if(href.length>0)if(helper.URL.getType(href)==="absolute")value=helper.URL.normalize(href)}return value}function prepareBaseURL(){var urlDetails=helper.URL.parseAbsoluteURL(documentLocation.toString()),rootUrl=urlDetails.shema+"://"+urlDetails.domain,pathLastSymbol,
path=urlDetails.path,url;if(!urlDetails.path)url=rootUrl;else{pathLastSymbol=urlDetails.path.charAt(urlDetails.path.length-1);if(pathLastSymbol==="/")url=rootUrl+urlDetails.path.slice(0,-1);else{path=path.split("/");path.pop();url=rootUrl+path.join("/")}}return url}setActive=function(mode){active=mode};isActive=function(){return active};save=function(){var i,iLen,linkNodes,linkNode,baseURL,tagBaseValue,urlFirstChar;linkNodes=document.getElementsByTagName("link");iLen=linkNodes.length;for(i=0;i<iLen;i++){linkNode=
linkNodes[i];if(linkNode.getAttribute("rel")==="canonical"){url=linkNode.getAttribute("href");break}}if(url)if(helper.URL.getType(url)==="relative"){urlFirstChar=url.substr(0,1);tagBaseValue=getTagBaseValue();if(urlFirstChar==="/"||urlFirstChar==="."){url=url.substr(1);if(tagBaseValue){tagBaseValue=helper.URL.parseAbsoluteURL(tagBaseValue);url=tagBaseValue.shema+"://"+tagBaseValue.domain+"/"+url}else url=documentLocation.protocol+"//"+documentLocation.host+"/"+url}else if(tagBaseValue)url=tagBaseValue+
"/"+url;else{baseURL=prepareBaseURL();url=baseURL+"/"+url}}};get=function(){return url};return{setActive:setActive,isActive:isActive,save:save,get:get}}();helper.URL=function(){var URL_TYPE_REGEX=/^(?:(https?:\/\/|\/\/|\s)|(..|\/|\?|#)|[^;:@=\.\s])/i,URL_ABSOLUTE_REGEX=/^(?:(https?):\/\/|\/\/)(?:([^:@\s]+:?[^:@\s]+?)@)?((?:[^;:@=\/\?\.\s]+\.)+[A-Za-z0-9\-]{2,})(?::(\d+))?(?=\/|\?|#|$)([^\?#]+)?(?:\?([^#]+))?(?:#(.+))?/i,URL_RELATIVE_REGEX=/^([^\?#]+)?(?:\?([^#]+))?(?:#(.+))?/i,ABSOLUTE="absolute",
RELATIVE="relative",URL={};function removeSpaces(url){return url.replace(/\s/gi,"")}URL.getType=function(url){var match=url.match(URL_TYPE_REGEX),type=null;if(match)type=match[1]?ABSOLUTE:RELATIVE;return type};URL.normalize=function(url){if(url.charAt(url.length-1)==="/")url=url.slice(0,-1);return url};URL.parseAbsoluteURL=function(absoluteURL){var matchedData=absoluteURL.match(URL_ABSOLUTE_REGEX);if(matchedData)return{shema:matchedData[1],domain:matchedData[3],path:matchedData[5],params:{query:matchedData[6],
hash:matchedData[7]}};else return absoluteURL};return URL}();helper.googleAnalytics=function(){var win,init,track,gaTrack,fbEvents,pw_config,trackEvent,trackParams,trackSocial,twitterEvents,extractParamFromUri,gaTrackSocialOptions,gaTrackSocialInteractions;gaTrack={enabled:false,nonInteraction:false};gaTrackSocialInteractions={enabled:false};extractParamFromUri=function(uri,paramName){var regex,params;if(!uri)return;regex=new RegExp("[\\?&#]"+paramName+"=([^&#]*)");params=regex.exec(uri);if(params!=
null)return unescape(params[1])};init=function(){win=window;win._gaq=win._gaq||[];pw_config=win.pwidget_config;if(pw_config.hasOwnProperty("gaTrackEvents")){trackParams=pw_config.gaTrackEvents;if(trackParams.hasOwnProperty("enabled")){gaTrack.enabled=trackParams.enabled;gaTrack.nonInteraction=trackParams.nonInteraction}else gaTrack.enabled=trackParams}if(pw_config.hasOwnProperty("gaTrackSocialInteractions")){gaTrackSocialOptions=pw_config.gaTrackSocialInteractions;if(gaTrackSocialOptions.hasOwnProperty("enabled")){gaTrackSocialInteractions.enabled=
gaTrackSocialOptions.enabled;gaTrackSocialInteractions.pagePath=gaTrackSocialOptions.pagePath}else gaTrackSocialInteractions.enabled=gaTrackSocialOptions}};trackEvent=function(sharingChannel,sharingUrl){if(gaTrack.enabled)win._gaq.push(["_trackEvent","Po.st",sharingChannel,sharingUrl,undefined,gaTrack.nonInteraction])};trackSocial=function(sharingChannel,sharingUrl,shareName){if(gaTrackSocialInteractions.enabled){shareName=shareName||"Po.st";win._gaq.push(["_trackSocial",shareName,sharingChannel,
sharingUrl,gaTrackSocialInteractions.pagePath])}};track=function(method,channelName,url){url=url||win.location.toString();switch(method){case "social":trackSocial(channelName,url);break;case "event":trackEvent(channelName,url);break}};fbEvents=function(){var channelName="Facebook";if(gaTrackSocialInteractions.enabled){FB.Event.subscribe("edge.create",function(targetUrl){trackSocial("like",targetUrl,channelName)});FB.Event.subscribe("edge.remove",function(targetUrl){trackSocial("unlike",targetUrl,
channelName)});FB.Event.subscribe("message.send",function(targetUrl){trackSocial("send",targetUrl,channelName)})}};twitterEvents=function(){var channelName="Twitter";if(gaTrackSocialInteractions.enabled)twttr.ready(function(twttr){twttr.events.bind("tweet",function(intent_event){var opt_target;if(intent_event){if(intent_event.target&&intent_event.target.nodeName=="IFRAME")opt_target=extractParamFromUri(intent_event.target.src,"url");trackSocial("tweet",opt_target,channelName)}})})};return{init:init,
track:track,fbEvents:fbEvents,twitterEvents:twitterEvents}}();var i18n=function(){var bundles=[];var defaultRegions={en:"us",de:"de",fr:"fr",it:"it",pt:"br",ru:"ru",ja:"jp",es:"es",zh:"cn",pl:"pl"};function findDefaultRegionLocale(locale){var region=findBestMatchLocale(locale,defaultRegions);return region==""?"":locale.split("-").shift()+"-"+defaultRegions[region]}function getDefaultBCP47Tag(locale){var region=findBestMatchLocale(locale,defaultRegions);return region==""?"":locale.split("-").shift()+
"_"+defaultRegions[region].toUpperCase()}function findBestMatchLocale(locale,localizedMap){var parts=(locale||"").toLowerCase().split("-");while(parts.length){var key=parts.join("-");if(localizedMap[key])return key;if(parts.length>1){parts.pop();continue}if(localizedMap==defaultRegions)break;key=findDefaultRegionLocale(locale);if(key!==""&&localizedMap[key])return key;break}return""}function getBundle(locale){return bundles[i18n.findBestMatchLocale(locale,bundles)||"en"]}function addBundle(locale,
messages){var bundle=function(key){return messages[key]||"!"+locale+":"+key+"!"};bundle.locale=locale;bundle.lang=locale.split("-").shift();bundles[locale.toLowerCase()]=bundle}function addBundles(locales,messages){for(var i=0;i<locales.length;i++){var locale=locales[i],bundle={};for(var prop in messages)bundle[prop]=messages[prop][locale];addBundle(locale,bundle)}}addBundles(["en","de","fr","it","pt-br","ru","ja-jp","es-la","zh-cn","pl"],{"share":{"en":"Share","de":"Teilen","fr":"Partager","it":"Condividi",
"pt-br":"Compartilhar","ru":"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f","ja-jp":"\u5171\u6709\u3059\u308b","es-la":"Compartir","zh-cn":"\u5206\u4eab","pl":"Udost\u0119pnij"},"shareTitle":{"en":"Share with friends","de":"Mit Freunden teilen","fr":"Partager avec vos amis","it":"Condividi con gli amici","pt-br":"Compartilhar com amigos","ru":"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438","ja-jp":"\u53cb\u9054\u3068\u5171\u6709\u3059\u308b",
"es-la":"Compartir con amigos","zh-cn":"\u4e0e\u597d\u53cb\u5206\u4eab","pl":"Udost\u0119pnij znajomym"},"privacy":{"en":"Privacy","de":"Datenschutz","fr":"Confidentialit\u00e9","it":"Privacy","pt-br":"Privacidade","ru":"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c","ja-jp":"\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc","es-la":"Privacidad","zh-cn":"\u9690\u79c1\u653f\u7b56","pl":"Prywatno\u015b\u0107"},"powered":{"en":"Powered by Po.st","de":"Bereitgestellt von Po.st","fr":"Op\u00e9r\u00e9 par Po.st",
"it":"Con tecnologia Po.st","pt-br":"Habilitado por Po.st","ru":"\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438 Po.st","ja-jp":"Po.st\u306b\u3088\u308b\u63d0\u4f9b","es-la":"Publicado gracias a Po.st","zh-cn":"\u91c7\u7528 Po.st \u5e73\u53f0","pl":"Dzia\u0142a w oparciu o rozwi\u0105zania Po.st"},"more":{"en":"More","de":"Mehr","fr":"Plus","it":"Altro","pt-br":"Mais","ru":"\u0415\u0449\u0435","ja-jp":"\u3082\u3063\u3068",
"es-la":"M\u00e1s","zh-cn":"\u66f4\u591a","pl":"Wi\u0119cej"},"email":{"en":"Email","de":"E-Mail","fr":"E-mail","it":"E-mail","pt-br":"Email","ru":"Email","ja-jp":"E\u30e1\u30fc\u30eb","es-la":"Correo electr\u00f3nico","zh-cn":"\u7535\u5b50\u90ae\u4ef6","pl":"E-mail"},"favorites":{"en":"Favorites","de":"Favoriten","fr":"Favoris","it":"Preferiti","pt-br":"Favoritos","ru":"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435","ja-jp":"\u304a\u6c17\u306b\u5165\u308a","es-la":"Favoritos","zh-cn":"\u6536\u85cf\u5939",
"pl":"Ulubione"},"print":{"en":"Print","de":"Drucken","fr":"Imprimer","it":"Stampa","pt-br":"Imprimir","ru":"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c","ja-jp":"\u5370\u5237","es-la":"Imprimir","zh-cn":"\u6253\u5370","pl":"Drukuj"},"sharingSuccessful":{"en":"Sharing Successful!","de":"Teilen erfolgreich!","fr":"Partage effectu\u00e9!","it":"Condivisione riuscita!","pt-br":"Compartilhamento Feito!","ru":"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c \u0441\u0441\u044b\u043b\u043a\u043e\u0439",
"ja-jp":"\u304d\u3061\u3093\u3068\u5171\u6709\u3055\u308c\u307e\u3057\u305f","es-la":"Compartido exitosamente","zh-cn":"\u5206\u4eab\u6210\u529f","pl":"Udost\u0119pnianie zako\u0144czone powodzeniem"},"successfullyShared":{"en":"You've successfully shared using Po.st!","de":"Sie haben etwas erfolgreich \u00fcber Po.st geteilt!","fr":"Vous avez partag\u00e9 en utilisant Po.st !","it":"Hai effettuato una condivisione usando Po.st!","pt-br":"Voc\u00ea compartilhou com sucesso usando Po.st!","ru":"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 Po.st!",
"ja-jp":"Po.st\u3092\u4f7f\u3063\u3066\u304d\u3061\u3093\u3068\u5171\u6709\u51fa\u6765\u307e\u3057\u305f\uff01","es-la":"\u00a1Haz compartido exitosamente usando Po.st!","zh-cn":"\u5df2\u6210\u529f\u901a\u8fc7 Po.st \u5206\u4eab\uff01","pl":"Udost\u0119pni\u0142e\u015b tre\u015bci, korzystaj\u0105c z serwisu Po.st!"},"shareAgain":{"en":"Share again!","de":"Mehr teilen!","fr":"Partager de nouveau!","it":"Condividi ancora!","pt-br":"Compartilhar novamente!","ru":"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441\u043d\u043e\u0432\u0430",
"ja-jp":"\u3082\u3046\u4e00\u5ea6\u5171\u6709\u3059\u308b","es-la":"Compartir otra vez","zh-cn":"\u518d\u6b21\u5206\u4eab","pl":"Udost\u0119pniaj ponownie"},"readMore":{"en":"Read more at {link}","de":"Mehr lesen auf {link}","fr":"En savoir plus sur {link}","it":"Scopri di pi\u00f9 su {link}","pt-br":"Leia mais em {link}","ru":"\u0427\u0438\u0442\u0430\u0439\u0442\u0435 \u0434\u0430\u043b\u0435\u0435 \u043d\u0430 {link}","ja-jp":"{link} \u3067\u8a73\u7d30\u3092\u8aad\u3080","es-la":"Lea m\u00e1s en {link}",
"zh-cn":"\u5728 {link} \u4e86\u89e3\u8be6\u60c5","pl":"Przeczytaj wi\u0119cej tutaj: {link}"},"enterWordpressURL":{"en":"Please enter your WordPress Blog URL","de":"Geben Sie Ihre Wordpress-Blog-URL ein","fr":"Entrez le lien de votre blog WordPress","it":"Inserisci l'URL del tuo blog WordPress","pt-br":"Digite a URL do seu Blog WordPress","ru":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0432\u0430\u0448\u0435\u0433\u043e \u0431\u043b\u043e\u0433\u0430 \u043d\u0430 WordPress",
"ja-jp":"WordPress\u30d6\u30ed\u30b0\u306eURL\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002","es-la":"Por favor introduzca la direcci\u00f3n URL de su blog de WordPress","zh-cn":"\u8bf7\u8f93\u5165 WordPress \u535a\u5ba2 URL","pl":"Wprowad\u017a adres URL swojego bloga w serwisie WordPress"},"pressToBookmark":{"en":"Please press Ctrl+D to bookmark this page.","de":"Bitte dr\u00fccken Sie Strg+D, um diese Seite als Lesezeichen zu speichern.","fr":"Merci d'appuyer sur Ctrl+D pour sauvegarder cette page.",
"it":"Premi Ctrl+D per salvare questa pagina nei segnalibri.","pt-br":"Por favor, digite Ctrl+D para favoritar esta p\u00e1gina.","ru":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 Ctrl+D, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435.","ja-jp":"\u3053\u306e\u30da\u30fc\u30b8\u3092\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u8ffd\u52a0\u3059\u308b\u306b\u306fCtrl+D\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
"es-la":"Por favor, pulse Ctrl + D para marcar esta p\u00e1gina.","zh-cn":"\u8bf7\u6309 Ctrl+D \u5bf9\u6b64\u9875\u9762\u6dfb\u52a0\u4e66\u7b7e\u3002","pl":"Aby doda\u0107 t\u0119 stron\u0119 do ulubionych, naci\u015bnij Ctr+D"},"disableBlocker":{"en":"Please disable pop-up blocker to share.","de":"Bitte deaktivieren Sie zum Teilen den Popup-Blocker.","fr":"Merci de d\u00e9sactiver vos bloqueurs de pop-up afin de pouvoir partager. ","it":"Disattiva il blocco dei popup per condividere.","pt-br":"Por favor, desabilite o bloqueador de pop-up para compartilhar.",
"ru":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0443 \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0438\u0445 \u043e\u043a\u043e\u043d, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f.","ja-jp":"\u5171\u6709\u3059\u308b\u306b\u306f\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3092\u6709\u52b9\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
"es-la":"Por favor, deshabilite el bloqueador de ventanas emergentes para compartir.","zh-cn":"\u8bf7\u7981\u7528\u5f39\u51fa\u7a97\u53e3\u963b\u6b62\u7a0b\u5e8f\u4ee5\u4fbf\u5206\u4eab\u3002","pl":"Aby udost\u0119pni\u0107, wy\u0142\u0105cz blokad\u0119 wyskakuj\u0105cych okienek."}});return{getDefaultBCP47Tag:getDefaultBCP47Tag,findBestMatchLocale:findBestMatchLocale,getBundle:getBundle}}();var rapost={};rapost.Object=function(settings){this._Model=rapost.getApplicationModel()};rapost.Delegate=
function(func,context,args){if(!(this instanceof rapost.Delegate))return new rapost.Delegate(func,context,args);if(func)this.add(func,context,args)};var raDel=rapost.Delegate.prototype;raDel.fire=function(sender,args){if(!sender)throw new Error("ArgumentNullException");if(!this._On)return;var res=null;if(!args)args={};for(var i=0;i<this._On.length;i++){var element=this._On[i];if(element&&element.Callback){if(element.Context){args.Args=element.Args;res=element.Callback.call(element.Context,sender,
args)}else res=element.Callback.call(sender,sender,args);if(args&&args.Break)break}}return res};raDel.clear=function(context){if(!context)context=null;if(this._On)for(var i=0;i<this._On.length;i++)if(this._On[i]&&context===this._On[i].Context)delete this._On[i]};raDel.add=function(func,context,args){if(!func)return null;if(!this._On)this._On=[];if(func instanceof rapost.Delegate)if(func._On){this._On=this._On.concat(func._On);return this._On.length}else return false;else{var id=this._On.length;if(!context)context=
null;this._On.push({Callback:func,Context:context,Args:args});return id}};raDel.remove=function(func,context){if(!this._On)return;var type=(typeof func).toLowerCase();if(type=="number"){if(this._On.length>func)delete this._On[func]}else if(type=="function")for(var i=0;i<this._On.length;i++){if(!this._On[i])continue;if(this._On[i].Callback==func)if(context&&this._On[i].Context===context){delete this._On[i];return}}else throw new Error("ArgumentException");};rapost.getApplicationModel=function(){var undefinedValue;
function ApplicationModel(){this.PostPixelLogServer="http://p.po.st/p";this.PostCDNServer="http://i.po.st/static";this.PostShortenerURL="http://po.st";this.PostCssURL=this.PostCDNServer+"/css/r1post.css?2_17_0_rel_1098";this.WidgetBuildNumber="2.17.0-rel-1098";this.displayCmUrl="http://rp.gwallet.com/r1/cm/t0p23";this.PrivacyPolicyLink="http://www.radiumone.com/about/privacy.html";this.PoStLink="http://www.po.st";var l10n=this.l10n=i18n.getBundle(pwidget_config.locale);this.CompatModeAnalized=false;
this.CSSLoaded=false;this.OptOutStatusLoading=false;this.OptOutStatusLoaded=false;this.OptOutStatus=false;this.DelayedEvents=[];this.IntersitialMapping=[];this.PwRoot=document.createElement("div");this.PwRoot.className="pw-root";document.body.appendChild(this.PwRoot);this.SharePopUpSizeByDefault={width:640,height:480};this.SharingServices=[];this.SharingChannels=[];this.NativePartyButtons=["facebook","twitter","linkedin","googleplus","pinterest"];this.Metadata=[{name:"facebook",id:"1",value:"http://www.facebook.com/share.php?src=bm&u=[URL]&t=[TITLE]&v=3",
popUpSize:this.SharePopUpSizeByDefault,displayName:"Facebook",counter:true},{name:"twitter",id:"2",value:"http://twitter.com/share?url=[URL]&text=[TITLE]&via=[VIA]",popUpSize:this.SharePopUpSizeByDefault,displayName:"Twitter",shorten:true,counter:true},{name:"mail",id:"3",value:"emailButtonClick",displayName:l10n("email"),gaName:"Email"},{name:"print",id:"4",value:"printButtonClick",displayName:l10n("print"),gaName:"Print"},{name:"stumbleupon",id:"5",value:"http://www.stumbleupon.com/submit?url=[URL]&title=[TITLE]",
displayName:"StumbleUpon"},{name:"favorites",id:"6",value:"favoritesButtonClick",displayName:l10n("favorites"),gaName:"Favorites"},{name:"linkedin",id:"7",value:"http://www.linkedin.com/shareArticle?mini=true&url=[URL]&title=[TITLE]",popUpSize:{width:600,height:420},displayName:"LinkedIn",shorten:true,counter:true},{name:"googlebookmarks",id:"8",value:"http://www.google.com/bookmarks/mark?op=edit&bkmk=[URL]&title=[TITLE]",displayName:"Google Bookmarks",otherNames:["google_bookmarks","google-bookmarks"]},
{name:"msmessenger",id:"9",value:"http://profile.live.com/badge?url=[URL]&title=[TITLE]",displayName:"MS Messenger"},{name:"myspace",id:"10",value:"http://www.myspace.com/Modules/PostTo/Pages/?u=[URL]&t=[TITLE]",displayName:"MySpace"},{name:"delicious",id:"11",value:"http://delicious.com/save?url=[URL]&title=[TITLE]",displayName:"Delicious"},{name:"digg",id:"12",value:"http://digg.com/submit?phase=2&url=[URL]&title=[TITLE]",displayName:"Digg"},{name:"orkut",id:"13",value:"http://promote.orkut.com/preview?nt=orkut.com&tt=[TITLE]&du=[URL]",
displayName:"Orkut"},{name:"gmail",id:"14",value:"http://mail.google.com/mail/?view=cm&fs=1&to&su=[TITLE]&body=[URL]&ui=2&tf=1",displayName:"GMail"},{name:"blogger",id:"15",value:"http://www.blogger.com/blog_this.pyra?t&u=[URL]&n=[TITLE]&pli=1",displayName:"Blogger"},{name:"reddit",id:"16",value:"http://reddit.com/submit?resubmit=true&url=[URL]&title=[TITLE]",displayName:"Reddit"},{name:"yahoomail",id:"17",value:"http://compose.mail.yahoo.com/?Subject=[TITLE]&Body=[URL]",displayName:"Yahoo Mail",
"extraUrlEncoding":true},{name:"tumblr",id:"18",value:"http://www.tumblr.com/share?v=3&u=[URL]&t=[TITLE]&s=",displayName:"Tumblr"},{name:"hotmail",id:"19",value:"http://www.hotmail.msn.com/secure/start?action=compose&to=&subject=[TITLE]&body=[URL]",displayName:"Hotmail"},{name:"aolmail",id:"20",value:"http://webmail.aol.com/25045/aol/en-us/Mail/compose-message.aspx?to=&subject=[TITLE]&body=[URL]",displayName:"AOL Mail"},{name:"livejournal",id:"21",value:"http://www.livejournal.com/update.bml?subject=[TITLE]&event=[URL]",
displayName:"LiveJournal"},{name:"posterous",id:"22",value:"http://posterous.com/share?linkto=[URL]",displayName:"Posterous"},{name:"aollifestream",id:"23",value:"http://lifestream.aol.com/share/?url=[URL]&title=[TITLE]&description=",displayName:"AOL LifeStream",shorten:true},{name:"wordpress",id:"24",value:"wordpressButtonClick",displayName:"WordPress"},{name:"vkontakte",id:"26",value:"http://vkontakte.ru/share.php?url=[URL]&title=[TITLE]",displayName:"VKontakte"},{name:"baidu",id:"27",value:"http://cang.baidu.com/do/add?it=[TITLE]&iu=[URL]&fr=ien&dc=",
displayName:"Baidu"},{name:"mailru",id:"28",value:"http://connect.mail.ru/share?url=[URL]&title=[TITLE]",displayName:"Mail.ru"},{name:"hyves",id:"29",value:"http://www.hyves.net/profilemanage/add/tips/?name=[TITLE]&text=[URL]&type=12",displayName:"Hyves"},{name:"googleplus",id:"30",value:"https://plus.google.com/share?url=[URL]&t=[TITLE]",popUpSize:this.SharePopUpSizeByDefault,displayName:"Google+",counter:true},{name:"pinterest",id:"32",value:"http://pinterest.com/pin/create/button/?url=[URL]&description=[TITLE]&media=[IMAGEURL]",
popUpSize:{width:680,height:500},displayName:"Pinterest",counter:true},{name:"xing",id:"33",value:"https://www.xing.com/app/startpage?op=home;func_share=1;tab=link;url=[URL];force_dest=1",displayName:"XING"},{name:"meinvz",id:"34",value:"http://www.meinvz.net/Link/Share/?url=[URL]&title=[TITLE]",displayName:"MeinVZ"},{name:"skyrock",id:"35",value:"http://www.skyrock.com/m/blog/share.php?url=[URL]",displayName:"Skyrock"},{name:"clipboard",id:"99",hideFromPopPup:true},{name:"post",displayName:l10n("share"),
hideFromPopPup:true,gaName:"Po.St"},{name:"post-share",displayName:l10n("share"),hideFromPopPup:true,gaName:"Po.St Share"},{name:"share",displayName:l10n("share"),hideFromPopPup:true,gaName:"Share"},{name:"clink",id:"98",hideFromPopPup:true}];var regionalTargeting={"":["facebook","twitter","mail","print","stumbleupon","favorites","linkedin","googlebookmarks","tumblr","reddit","pinterest"],"ru-ru":["vkontakte","twitter","facebook","mailru","favorites","livejournal","googlebookmarks","print","stumbleupon",
"googleplus","reddit","delicious","blogger","gmail","digg","myspace"],"en-us":["facebook","twitter","print","mail","pinterest","gmail","stumbleupon","favorites","reddit","tumblr","googlebookmarks","blogger","linkedin","yahoomail","digg","googleplus","myspace"],"en-gb":["facebook","twitter","print","mail","stumbleupon","favorites","gmail","reddit","blogger","googlebookmarks","linkedin","tumblr","googleplus","pinterest","digg","myspace","delicious"],"fr-fr":["facebook","twitter","print","mail","stumbleupon",
"gmail","favorites","googlebookmarks","blogger","msmessenger","reddit","googleplus","linkedin","myspace","delicious"],"fr-ch":["facebook","print","mail","twitter","favorites","gmail","blogger","stumbleupon"],"de-de":["facebook","print","twitter","stumbleupon","favorites","mail","googlebookmarks","xing","meinvz","reddit","blogger","tumblr","googleplus","digg","delicious","myspace"],"de-ch":["facebook","twitter","mail","print","reddit","stumbleupon","favorites","gmail","blogger","tumblr","pinterest"],
"it-it":["facebook","twitter","print","mail","stumbleupon","linkedin","googlebookmarks","favorites","googleplus","blogger","tumblr","reddit","gmail","msmessenger","myspace"],"it-ch":["facebook","twitter","mail","print","reddit","stumbleupon","favorites","gmail","blogger","tumblr","pinterest"],"pt-br":["facebook","twitter","orkut","mail","print","googlebookmarks","msmessenger","blogger","favorites","googleplus","aollifestream","gmail","digg","stumbleupon","myspace","reddit","linkedin"],"pt-pt":["facebook",
"twitter","print","mail","blogger","googlebookmarks","gmail","orkut","favorites","msmessenger","aollifestream","googleplus","stumbleupon","digg","linkedin","myspace","tumblr"],"ja-jp":["twitter","facebook","print","favorites","googlebookmarks","stumbleupon","myspace","delicious","mail","blogger","tumblr","msmessenger","digg","googleplus","gmail","linkedin"],"zh-cn":["twitter","facebook","stumbleupon","googlebookmarks","favorites","mail","print","reddit","linkedin","baidu","myspace","msmessenger",
"delicious","gmail","tumblr","digg","blogger"],"es-la":["facebook","twitter","print","mail","gmail","stumbleupon","favorites","googlebookmarks","blogger","googleplus","msmessenger","linkedin","hotmail","myspace","tumblr"],"pl-pl":["facebook","twitter","print","reddit","googlebookmarks","vkontakte","stumbleupon","favorites","digg","myspace","gmail","mail","linkedin","googleplus","delicious"]},targetRegion=i18n.findBestMatchLocale(pwidget_config.locale,regionalTargeting);reorderMetadata.call(this,regionalTargeting[targetRegion||
""]);fillData.call(this)}function reorderMetadata(priorityList){var meta=this.Metadata,i;for(i=0;i<priorityList.length;i++){if(meta[i].name===priorityList[i])continue;var position=indexOf.call(meta,priorityList[i],i);var element=meta.splice(position,1)[0];meta.splice(i,0,element)}}function indexOf(name,startFrom){for(i=startFrom;i<this.length;i++)if(this[i].name===name)return i;return-1}function fillData(){for(var i=0;i<this.Metadata.length;i++){this.SharingServices[this.Metadata[i].name]=this.Metadata[i].value;
var id=this.Metadata[i].id||"undefinedId";if(id!=="undefinedId")if(id.length==1)id="0"+id;this.SharingChannels["id"+id]=this.Metadata[i].name}}ApplicationModel.prototype={getInterstitial:function(pubKey){var table=this.IntersitialMapping,tableL=table.length,val,i;for(i=0;i<tableL;i++)if(table[i].publisherKey===pubKey)val=table[i].value;return val},addInterstitial:function(pubKey,value){if(this.getInterstitial(pubKey)===undefinedValue)this.IntersitialMapping.push({publisherKey:pubKey,value:value})},
getMetadataByName:function(name,skipPredicate){if(name=="email")name="mail";if(name.match(/popular-([1-9]|1[01])/))for(var i=parseInt(name.replace("popular-",""))-1;i<this.Metadata.length;i++){var meta=this.Metadata[i];if(typeof skipPredicate!=="undefined"&&skipPredicate(meta.name))continue;return meta}for(var i=0;i<this.Metadata.length;i++)if(this.Metadata[i].name==name)return this.Metadata[i]},getSharerUrl:function(url,service,sguid,tracking,transformationsShorten){if(url==undefined)return;if(transformationsShorten)return url;
sguid=sguid||this.getSGuid();if(pwidget_config.track==true||pwidget_config.track=="query"){var reg=/[\?#]/;if((url.search(new RegExp("http://"))!==-1||url.search(new RegExp("https://"))!==-1)&&url.search(reg)==-1){var partsOfurl=url.split("//");if(partsOfurl[1].search(new RegExp("/"))==-1)url+="/"}else if(url.search(new RegExp("/"))==-1&&url.search(reg)==-1)url+="/";var separator=pwidget_config.track==true?"#":"?";var hash="";var hashIndex=url.indexOf("#");if(hashIndex>-1){hash=url.substring(hashIndex);
url=url.substring(0,hashIndex)}if(separator==="?"){var splittedUrl=url.split(separator);if(splittedUrl[1]){var queryParams=splittedUrl[1].split("&");if(queryParams[queryParams.length-1].indexOf("=")===-1)queryParams.pop();if(queryParams.length>0)separator="&";else separator="";url=splittedUrl[0]+"?"+queryParams.join("&")}}else hash="";var sharerId=this.getSharerId(service);var fullShareGuid="";if(tracking)fullShareGuid=sguid+"."+sharerId;else separator="";return url+separator+fullShareGuid+hash}return url},
getSharerId:function(service){var sharerId,i,iLen;iLen=this.Metadata.length;for(i=0;i<iLen;i++)if(this.Metadata[i].name==service){if(this.Metadata[i].hasOwnProperty("id"))if(this.Metadata[i].id.length==1)sharerId="0"+this.Metadata[i].id;else sharerId=this.Metadata[i].id;break}return sharerId},getSGuid:function(){var s="abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMOPQRSTUVWXYZ0123456789";var sGUID="";while(sGUID.length!=16)sGUID+=s.charAt(Math.round(Math.random()*(s.length-1)));return sGUID},correctSeparatorsInServices:function(node){if(helper.isContainClassName(node,
"pw_google_bookmarks")||helper.isContainClassName(node,"pw-google-bookmarks")){node.className="pw-googlebookmarks";return}if(helper.isContainClassName(node,"pw_microsoft_messenger")||helper.isContainClassName(node,"pw-microsoft-messenger")){node.className="pw-msmessenger";return}if(helper.isContainClassName(node,"pw_yahoo_mail")||helper.isContainClassName(node,"pw-yahoo-mail")){node.className="pw-yahoomail";return}if(helper.isContainClassName(node,"pw_aol_mail")||helper.isContainClassName(node,"pw-aol-mail")){node.className=
"pw-aolmail";return}if(helper.isContainClassName(node,"pw_live_journal")||helper.isContainClassName(node,"pw-live-journal")){node.className="pw-livejournal";return}if(helper.isContainClassName(node,"pw_aol_lifestream")||helper.isContainClassName(node,"pw-aol-lifestream")){node.className="pw-aollifestream";return}if(helper.isContainClassName(node,"pw_mail.ru")||helper.isContainClassName(node,"pw-mail.ru")){node.className="pw-mailru";return}if(helper.isContainClassName(node,"pw_stumble_upon")||helper.isContainClassName(node,
"pw-stumble-upon")){node.className="pw-stumbleupon";return}}};var modelInstance;return function(){if(!modelInstance)modelInstance=new ApplicationModel;return modelInstance}}();rapost.PostWidget=function(settings){var _this=this,trackEvents;settings=settings||{};settings.domNode=settings.domNode?settings.domNode:null;if(settings.domNode==null)throw new Error("domNode is not defined");settings.config=settings.config?settings.config:helper.analizeOfCustomConfig(pwidget_config);this._Settings=settings;
this._DomNode=settings.domNode;this._Id=settings.domNode.getAttribute("id")||helper.getNewId();this._DomNode.setAttribute("id",this._Id);this._CountClicked="";this._Container=settings.config.container||null;this._IsHtmlInit=settings.config.isHtmlInit!==undefined?settings.config.isHtmlInit:false;this._Click=settings.config.click!==undefined?settings.config.click:pwidget_config.defaults.click;this._AloneService=settings.config.button||pwidget_config.defaults.button;this._Services=settings.config.buttons||
pwidget_config.defaults.buttons;this._OnShare=settings.config.onshare||null;this._Vertical=settings.config.vertical!==undefined?settings.config.vertical:pwidget_config.defaults.vertical;this._Counter=settings.config.counter||pwidget_config.defaults.counter;this._CounterFromHtml=null;this._PublisherKey=settings.config.publisherKey||pwidget_config.publisherKey;this._SizeItem=helper.getSizeItem(settings.config.size)||pwidget_config.defaults.size;this._Settings.config.size=this._SizeItem;this._Title=
settings.config.title!==undefined?settings.config.title:pwidget_config.defaults.title;this._SharerUrl=settings.config.url||pwidget_config.defaults.url;this._Tracking=settings.config.transformations.tracking!==undefined?settings.config.transformations.tracking:window.pwidget_config.defaults.transformations.tracking;this._Settings.config.transformations.tracking=this._Tracking;this._UrlWithoutSguid=null;this._ShowPost=settings.config.showPost!==undefined?settings.config.showPost:pwidget_config.defaults.showPost;
this._QueryString="";this._CopyPaste=window.pwidget_config.copypaste!==null?window.pwidget_config.copypaste:true;this._IsClassicPopUpOpenedLastOpend=false;this._ImageUrl=settings.config.image?settings.config.image:pwidget_config.defaults.image;this._Settings.config.image=this._ImageUrl;this._TwitterVia=this.setTwitterVia(settings);this._VGuid=this._getGuid();this._Settings.config.transformations.shorten=settings.config.transformations.shorten!==undefined?settings.config.transformations.shorten:window.pwidget_config.defaults.transformations.shorten;
this._UsingAfterShare=settings.config.afterShare!==undefined?settings.config.afterShare:window.pwidget_config.defaults.afterShare;this._IsContainLookNativeButtons=false;if(window.pwidget_config.hasOwnProperty("vguid"))this._VGuid=window.pwidget_config.vguid;this._ShareMode=enums.shareMode.classic;if(window.pwidget_config.hasOwnProperty("mode"))this._ShareMode=window.pwidget_config.mode;this._gaTrackEvents={enabled:false,nonInteraction:false};this.fetchingStatus=false;this._ToolBoxesView=null;this._AloneBoxView=
null;this._NativePartyButtonsView=null;this._ArbitraryView=null;this._RelikeBoxView=null;this._LookNativeBox=null;rapost.PostWidget.base.constructor.apply(this,arguments);this._UrlWithoutSguid=this._clearOfUrl(this._SharerUrl);this._PublisherKey=helper.args.getPublisherKey(this._PublisherKey);if(this._IsHtmlInit)this._analizeOfContainer();if(this._Container!==enums.boxes.relikebox)this._trackClickBack(this._createLogEvent("view"));this._loadStatus();this._analizeCompatMode();if(this._Settings.config.transformations.shorten)this._getShortUrl();
else{this._init();this._bindEvents()}_this._getInterstition()};helper.initClass(rapost.PostWidget,rapost.Object);var rapostWidget=rapost.PostWidget.prototype;rapostWidget._getShortUrl=function(){var url=this._Model.PostShortenerURL+"/v1/shorten?longUrl="+encodeURIComponent(this._SharerUrl)+"&sGUID="+this._Model.getSGuid()+"&pub="+helper.args.getPublisherKey();function one(data){if(data&&data.url)this._Settings.config.shortUrl=data.url}helper.jsonpRequest(url,one,this,function(){this._init();this._bindEvents()})};
rapostWidget._clearOfUrl=helper.clearOfUrl;rapostWidget.findPostButton=function(){var container=this._DomNode,containerChilds,className,i,iLen;this._hasPostButton=false;if(container){containerChilds=container.childNodes;iLen=containerChilds.length;for(i=0;i<iLen;i++){className=containerChilds[i].className;if(containerChilds[i].nodeName==="A")if(className.indexOf("pw-button-post")>-1||className.indexOf("pw-button-post-share")>-1)this._hasPostButton=true}}};rapostWidget.setTwitterVia=function(settings){var twitterVia=
"po_st";var services=settings.config.services!==undefined?settings.config.services:window.pwidget_config.defaults.services;if(services.twitter)if(services.twitter.via)twitterVia=services.twitter.via;return twitterVia};rapostWidget._init=function(){if(this._PublisherKey==null)throw new Error("PublisherKey is not found!");if(this._Container){if(!this._IsHtmlInit)if(this._isLookNativeButtons()){this._Container=enums.boxes.looknativebox;this._IsContainLookNativeButtons=true}switch(this._Container){case enums.boxes.relikebox:this._RelikeBoxView=
new rapost.RelikeBoxView(this._Settings);break;case enums.boxes.nativebox:var layout=this._Vertical==true?"vertical":"horizontal";if(layout=="vertical")this._Vertical=true;if(this._Counter==null)this._Counter=this._Vertical?enums.counter.vertical:enums.counter.horizontal;this._Settings.config.counter=this._Counter;if(this._Settings.config.twitterVia==undefined)this._Settings.config.twitterVia=this._TwitterVia;this._Settings.config.title=this._Title;this._Settings.config.url=this._SharerUrl;this._NativePartyButtonsView=
new rapost.NativePartyButtonsView(this._Settings);this._NativePartyButtonsView.updateCounter(this._CountClicked);break;case enums.boxes.custombox:this._ArbitraryView=new rapost.ArbitraryView(this._Settings);break;case enums.boxes.alonebox:this._Settings.config.counter=this._Counter;this._AloneBoxView=new rapost.AloneBoxView(this._Settings);this._AloneBoxView.updateCounter(this._CountClicked);break;case enums.boxes.toolbox:this._Counter=this._Counter||enums.counter.none;this._Settings.config.counter=
this._Counter;this._ToolBoxesView=new rapost.ToolBoxesView(this._Settings);this._ToolBoxesView.updateCounter(this._CountClicked);break;case enums.boxes.looknativebox:this._IsContainLookNativeButtons=true;this._Settings.config.size=this._SizeItem=enums.sizeItem.small;var layout=this._Vertical==true?"vertical":"horizontal";if(layout=="vertical")this._Vertical=true;if(this._Counter==null||this._Counter=="show")this._Counter=this._Vertical?enums.counter.vertical:enums.counter.horizontal;this._createButtonBox();
break}}this._createPopUps()};rapostWidget._isLookNativeButtons=function(){for(var i=0;i<this._Services.length;i++)if(typeof this._Services[i]=="object")if(this._Services[i].look&&this._Services[i].look=="native")return true};rapostWidget._createButtonBox=function(){var counterForLookNative;if(this._Counter==null){this._Counter=enums.counter.none;counterForLookNative=this._Settings.config.vertical?enums.counter.vertical:enums.counter.horizontal}else counterForLookNative=this._Counter;var box=[];if(this._IsHtmlInit){var nodes=
helper.nodeListToArray(this._DomNode.getElementsByTagName("a"));for(var i=0;i<nodes.length;i++){this._Settings.childNode=nodes[i];this._Settings.config.counter=this._CounterFromHtml||this._Counter;this._Settings.config.counterForLookNative=counterForLookNative;var buttonView=new rapost.AloneBoxView(this._Settings);if(!buttonView._isButtonCorrect){buttonView._DomNode.parentNode.removeChild(buttonView._DomNode);continue}buttonView.updateCounter("");this._bindEventsForLookNativeButtons(buttonView);box.push(buttonView)}}else{var container=
document.createElement("div");this._DomNode.parentNode.insertBefore(container,this._DomNode);var id=this._DomNode.getAttribute("id");if(id)container.setAttribute("id",id);else container.setAttribute("id",helper.getNewId());helper.containersForRecycling.push(this._DomNode);this._DomNode=container;for(var i=0;i<this._Services.length;i++){this._Settings.config.counter=this._CounterFromHtml||this._Counter;this._Settings.config.counterForLookNative=counterForLookNative;this._Settings.config.button=this._Services[i];
var buttonNode=document.createElement("a");this._DomNode.appendChild(buttonNode);this._Settings.domNode=buttonNode;var buttonView=new rapost.AloneBoxView(this._Settings);if(!buttonView._isButtonCorrect){buttonView._DomNode.parentNode.removeChild(buttonView._DomNode);continue}buttonView.updateCounter("");this._bindEventsForLookNativeButtons(buttonView);box.push(buttonView)}}this._DomNode.className+=" ra1-pw-widget-looknative";this._Counter=this._CounterFromHtml||this._Counter;this._addClassesForLookNativeBoxNode(this._DomNode,
counterForLookNative);this._LookNativeBox=box};rapostWidget._addClassesForLookNativeBoxNode=function(node,counter){if(this._Vertical)node.className+=" ra1-pw-layout-vertical";else node.className+=" ra1-pw-layout-horizontal";switch(counter){case enums.counter.horizontal:node.className+=" ra1-pw-counter-horizontal";break;case enums.counter.vertical:node.className+=" ra1-pw-counter-vertical";break;case enums.counter.none:node.className+=" ra1-pw-counter-none";break}};rapostWidget._updateCounterInLookNativeBox=
function(response){for(var i=0;i<this._LookNativeBox.length;i++){var currentbox=this._LookNativeBox[i],serviceId=currentbox._Service.id;if(serviceId.match(/popular-([0-9]+)/g))serviceId=this._Model.getMetadataByName(serviceId).name;switch(serviceId){case "linkedin":this._universalUpdateCounter(currentbox,response.linkedin);break;case "facebook":this._universalUpdateCounter(currentbox,response.facebook);break;case "twitter":this._universalUpdateCounter(currentbox,response.twitter);break;case "pinterest":this._universalUpdateCounter(currentbox,
response.pinterest);break;case "googleplus":this._universalUpdateCounter(currentbox,response.googleplus);break;default:this._universalUpdateCounter(currentbox,response.total)}}};rapostWidget._universalUpdateCounter=function(buttonView,count){buttonView.updateCounter(count)};rapostWidget._bindEventsForLookNativeButtons=function(buttonView){buttonView.Click.add(this._onItemsClick,this);buttonView.PostOver.add(this._onToolBoxesPostOver,this);buttonView.PostOut.add(this._onToolBoxesPostOut,this)};rapostWidget._bindEvents=
function(){if(this._ToolBoxesView){this._ToolBoxesView.Click.add(this._onItemsClick,this);this._ToolBoxesView.PostOver.add(this._onToolBoxesPostOver,this);this._ToolBoxesView.PostOut.add(this._onToolBoxesPostOut,this)}if(this._NativePartyButtonsView){this._NativePartyButtonsView.PostOver.add(this._onToolBoxesPostOver,this);this._NativePartyButtonsView.PostOut.add(this._onToolBoxesPostOut,this)}if(this._ArbitraryView)if(this._Click){this._ArbitraryView.Click.add(this._onToolBoxesPostOver,this);this._ArbitraryView.MouseOut.add(this._onToolBoxesPostOut,
this)}else{this._ArbitraryView.MouseOver.add(this._onToolBoxesPostOver,this);this._ArbitraryView.MouseOut.add(this._onToolBoxesPostOut,this)}if(this._AloneBoxView){this._AloneBoxView.Click.add(this._onItemsClick,this);this._AloneBoxView.PostOver.add(this._onToolBoxesPostOver,this);this._AloneBoxView.PostOut.add(this._onToolBoxesPostOut,this)}if(this._RelikeBoxView)this._RelikeBoxView.Click.add(this._onItemsClick,this)};rapostWidget._analizeOfContainer=function(){if(this._Container){var container=
this._DomNode;if(helper.isContainClassName(container,"pw_vertical")||helper.isContainClassName(container,"pw-vertical"))this._Vertical=true;if(helper.isContainClassName(container,"pw_horizontal")||helper.isContainClassName(container,"pw-horizontal"))this._Vertical=false;if(helper.isContainClassName(container,"pw_copypaste_true")||helper.isContainClassName(container,"pw-copypaste-true"))this._CopyPaste=true;if(helper.isContainClassName(container,"pw_post_false")||helper.isContainClassName(container,
"pw-post-false"))this._ShowPost=false;if(helper.isContainClassName(container,"pw_share_false")||helper.isContainClassName(container,"pw-share-false"))this._ShowPost=false;if(helper.isContainClassName(container,"pw_counter_vertical")||helper.isContainClassName(container,"pw-counter-vertical")){this._Counter=enums.counter.vertical;this._CounterFromHtml=this._Counter}if(helper.isContainClassName(container,"pw_counter_horizontal")||helper.isContainClassName(container,"pw-counter-horizontal")||helper.isContainClassName(container,
"pw_counter_true")||helper.isContainClassName(container,"pw-counter-show")){this._Counter=enums.counter.horizontal;this._CounterFromHtml=this._Counter}if(helper.isContainClassName(container,"pw_counter_none")||helper.isContainClassName(container,"pw_counter_false")||helper.isContainClassName(container,"pw-counter-none")){this._Counter=enums.counter.none;this._CounterFromHtml=this._Counter}if(helper.isContainClassName(container,"pw-share-popups"))this._Settings.config.sharePopups=true;var classList=
container.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("pw_size_"))!==-1||classList[i].search(new RegExp("pw-size-"))!==-1){var sizeItem=classList[i].replace("pw_size_","").replace("pw-size-","");this._SizeItem=helper.getSizeItem(sizeItem)}var items=container.getElementsByTagName("a");if(items.length>0){var isFirstButton=true;for(var i=0;i<items.length;i++){if(helper.isContainClassName(items[i],"pw_title")||helper.isContainClassName(items[i],"pw-title")){this._Title=
items[i].innerHTML;continue}if(helper.isContainClassName(items[i],"pw_url")||helper.isContainClassName(items[i],"pw-url")){this._SharerUrl=items[i].innerHTML;continue}if(helper.isContainClassName(items[i],"pw_separator")){if(items[i].innerHTML=="?")pwidget_config.track="query";continue}if(items[i].className.search(new RegExp("post-share"))!=-1)continue;if(isFirstButton&&items[i].className.search(new RegExp("-like?|-share?|twitter-twitt?|-plus?"))!==-1)this._Container=enums.boxes.nativebox;if(isFirstButton&&
helper.isContainClassName(items[i],"pw-look-native"))this._Container=enums.boxes.looknativebox;isFirstButton=false;var pintImg=items[i].getAttribute("pw:image");if(!pintImg)pintImg=items[i].getAttribute("pw:pinterest-image");if(pintImg){this._ImageUrl=pintImg;this._Settings.config.image=pintImg}this._Model.correctSeparatorsInServices(items[i])}}this._SharerUrl=container.getAttribute("pw:url")||this._SharerUrl;var title=container.getAttribute("pw:title");if(title=="")this._Title=title;this._Title=
title||this._Title;var image=container.getAttribute("pw:image");if(!image)image=container.getAttribute("pw:pinterest-image");if(image)this._ImageUrl=this._Settings.config.image=image;var sizeItem=container.getAttribute("pw:size");if(sizeItem)this._SizeItem=helper.getSizeItem(sizeItem);var twitterVia=container.getAttribute("pw:twitter-via");if(twitterVia)this._TwitterVia=twitterVia;var layout=this._Vertical==true?"vertical":"horizontal";if(container.getAttribute("pw:layout"))var layout=container.getAttribute("pw:layout");
if(layout=="vertical"){this._Vertical=true;this._CounterFromHtml=this._Counter}else if(layout=="horizontal"){this._Vertical=false;this._CounterFromHtml=this._Counter}switch(this._Container){case enums.boxes.relikebox:case enums.boxes.custombox:case enums.boxes.alonebox:case enums.boxes.toolbox:if(this._Counter==null)this._Counter=enums.boxes.none;break;case enums.boxes.looknativebox:case enums.boxes.nativebox:if(this._Counter==null)this._Counter=this._Vertical?enums.counter.vertical:enums.counter.horizontal;
break}this._CounterFromHtml=this._Counter;var counterPosition=container.getAttribute("pw:counter");if(counterPosition){switch(counterPosition){case "horizontal":this._Counter=enums.counter.horizontal;break;case "vertical":this._Counter=enums.counter.vertical;break;case "none":this._Counter=enums.counter.none;break;case "show":this._Counter=enums.counter.horizontal;break}this._CounterFromHtml=this._Counter}var copypaste=container.getAttribute("pw:copypaste");if(copypaste)if(copypaste=="true")this._CopyPaste=
true;else if(copypaste=="false")this._CopyPaste=false;var postbuttonShow=container.getAttribute("pw:postbutton");if(postbuttonShow)if(postbuttonShow=="false")this._ShowPost=false;if(container.getAttribute("pw:share-popups")=="true")this._Settings.config.sharePopups=true;this.findPostButton();this._updateSettings()}};rapostWidget._updateSettings=function(){this._Settings.config.counter=this._Counter;this._Settings.config.vertical=this._Vertical;this._Settings.config.size=this._SizeItem;this._Settings.config.showPost=
this._ShowPost};rapostWidget._createPopUps=function(){if(this._Container!==enums.boxes.relikebox){this._Settings.viaTwitter=this._ViaTwitter;this._ClassicPopUpView=rapost.ClassicPopUpView(this._Settings);this._ClassicPopUpOpenedView=rapost.ClassicPopUpOpenedView(this._Settings);this._updateCounterValue(false,"")}if(this._UsingAfterShare)this._ClassicPopUpSuccessView=rapost.ClassicPopUpSuccessView()};rapostWidget._checkClickBack=function(){if(pwidget_config.track)if(!helper.clickBackFired)this._getClickBackInfo()};
rapostWidget._getGuid=helper.getGuid;rapostWidget._sanitizeString=function(str){try{str=str.replace("\n","","g");str=str.replace("\t","","g");str=str.replace("\r","","g")}catch(e){}return str};rapostWidget._createLogEvent=function(eventType,shareGuid,sharerName,clickGuid){var result={};result.pub=this._PublisherKey;result.random=helper.getRandomTime();var url=this._clearOfUrl(this._SharerUrl);if(eventType=="view"||eventType=="clickback")url=this._clearOfUrl(document.location.href);result.pu=url;if(sharerName==
"mail")sharerName="email";result.t=eventType;if(!this._Model.OptOutStatus){result.pt=this._Title;result.ru=document.referrer;if(eventType=="clickback"){result.sc=sharerName;result.sGUID=shareGuid;result.bGUID=this._getGuid()}else{result.vGUID=this._VGuid;if(eventType=="copylink")result.lGUID=this._getGuid();else if(eventType=="more"){result.mGUID=this._getGuid();result.label="More"}else if(eventType=="click"){result.cGUID=clickGuid;result.clicked=sharerName}else if(eventType=="share"){result.cGUID=
clickGuid;result.sGUID=shareGuid;result.sm=this._ShareMode;result.sc1=sharerName;result.su1=""}}}result.v=this._Model.WidgetBuildNumber;if(window.pwidget_config.hasOwnProperty("version"))result.v=window.pwidget_config.version;return result};rapostWidget._updateViewEvent=function(event){if(this._Model.OptOutStatus){delete event.pt;delete event.ru;delete event.vGUID}return event};rapostWidget._loadStatus=function(){var callbackFunction;if(!this._Model.OptOutStatusLoading){this._Model.OptOutStatusLoading=
true;this.fetchingStatus=true;callbackFunction="window.postJsonP('"+this._Id+"').getStatus";this.fetchStatus(callbackFunction)}};rapostWidget._getInterstition=function(){var _this=this,interval;interval=setInterval(function(){if(_this._Model.OptOutStatusLoaded){_this.fetchInterstition();clearInterval(interval)}},1E3)};rapostWidget.fetchInterstition=function(){var _this=this,pubKey=_this._PublisherKey,callbackFunction,undefinedValue;if(_this._Model.getInterstitial(pubKey)===undefinedValue){window.__pwidgetCallbacks=
window.__pwidgetCallbacks||{};window.__pwidgetCallbacks.___raCallbackSetInterstition=function(data){_this._Model.addInterstitial(pubKey,!!data.interstitial)};callbackFunction="window.__pwidgetCallbacks.___raCallbackSetInterstition";this.fetchStatus(callbackFunction)}};rapostWidget.fetchStatus=function(fbCallback){var url,pubKey=this._PublisherKey;url=this._Model.PostShortenerURL+"/v1/status?pubKey="+pubKey+"&callback="+fbCallback+"&random"+(new Date).getTime();helper.loadScript(url)};rapostWidget.updateStatus=
function(data){var cmImage;if(data.optout)this._Model.OptOutStatus=true;this._Model.addInterstitial(this._PublisherKey,!!data.interstitial);this._Model.OptOutStatusLoaded=true;this._checkClickBack();if(data.firedisplaycm){cmImage=document.createElement("img");cmImage.setAttribute("id","r1cmImage-"+(new Date).getTime());cmImage.className="ra1-pw-logImage";cmImage.setAttribute("src",this._Model.displayCmUrl);document.getElementsByTagName("body")[0].appendChild(cmImage)}for(var i=0;i<this._Model.DelayedEvents.length;i++)if(this._Model.DelayedEvents[i].t==
"view")this._trackClickBack(this._updateViewEvent(this._Model.DelayedEvents[i]));else this._trackClickBack(this._Model.DelayedEvents[i])};rapostWidget._trackClickBack=helper.trackClickBack;rapostWidget._getClickBackInfo=function(){var patterns=[{regex:/^#([a-z\d]{16})\.([\d]{2})$/i,target:document.location.hash},{regex:/[\?&]{1}([a-z\d]{16})\.([\d]{2})(?:#|$)/i,target:document.location.href}];for(var i in patterns){if(!patterns.hasOwnProperty(i))continue;var matcher=patterns[i];var match=matcher.regex.exec(matcher.target);
if(match){var channelId=match[2];var sharerName=this._Model.SharingChannels["id"+channelId];if(sharerName){this._trackClickBack(this._createLogEvent("clickback",match[1],sharerName));helper.clickBackFired=true}}}};rapostWidget._parseUrl=function(){var startQueryIndexOffset=1;var startQueryIndex=this._SharerUrl.indexOf("?");if(startQueryIndex<0){startQueryIndex=this._SharerUrl.indexOf("#");startQueryIndexOffset=0}if(startQueryIndex>-1){if(startQueryIndex+startQueryIndexOffset<this._SharerUrl.length)this._QueryString=
this._SharerUrl.substring(startQueryIndex+startQueryIndexOffset);this._SharerUrl=this._SharerUrl.substring(0,startQueryIndex)}};rapostWidget._analizeCompatMode=function(){if(!this._Model.CompatModeAnalized){this._Model.CompatModeAnalized=true;if(!window.addEventListener&&document.documentMode&&document.documentMode<=6)document.getElementsByTagName("html")[0].className+=" pw-compatmode"}};rapostWidget._showEmailFrame=function(cGuid){var shareMode=enums.shareMode.classic,shorten;if(window.pwidget_config.hasOwnProperty("mode"))shareMode=
window.pwidget_config.mode;this._EmailFrameView=rapost.EmailFrameView();var sharerUrl=this._clearOfUrl(this._SharerUrl),trackParam=false;if(this._Tracking)trackParam=pwidget_config.track;sharerUrl=this.resolveShema(sharerUrl);shorten=encodeURIComponent(this._Settings.config.transformations.shorten?"true":"false");if(this._Model.getInterstitial(this._PublisherKey))shorten=true;var url=this._Model.PostShortenerURL+"/share"+"/classic-email.html?secure&pubKey="+encodeURIComponent(this._PublisherKey)+
"&url="+encodeURIComponent(sharerUrl)+"&sharerId="+encodeURIComponent(this._Model.getSharerId("mail"))+"&track="+encodeURIComponent(trackParam)+"&title="+encodeURIComponent(this._Title)+"&shorten="+shorten+"&cGUID="+encodeURIComponent(cGuid)+"&referrer="+encodeURIComponent(document.referrer)+"&vGUID="+encodeURIComponent(this._VGuid)+"&lc="+encodeURIComponent(this._Model.l10n.locale)+"&sm="+shareMode;this._EmailFrameView.show({emailUrl:url})};rapostWidget._updateClassicPopUpSuccess=function(){var callbackFunction=
"window.postJsonP('"+this._Id+"').getData";var url=this._Model.PostShortenerURL+"/v1/aftershare?publisherKey="+this._PublisherKey+"&callback="+callbackFunction+"&random"+(new Date).getTime();helper.loadScript(url)};rapostWidget._updateCounterValue=function(increment,sharerName,ignoreCondition){var shareUrl,callbackFunction,exParam="",lookNativeButtons,i,iLen,scParams="",url,channelId,channelParam="",channelsList=["facebook","twitter","linkedin","pinterest","googleplus"];if(this._Container===enums.boxes.nativebox)if(this._NativePartyButtonsView._CounterNode==
null)return;if(ignoreCondition||this._Counter&&this._Counter!==enums.counter.none||this._ToolBoxesView&&this._ToolBoxesView._IfInnerCounter||this._Container==enums.boxes.looknativebox&&this._Settings.config.counterForLookNative!==enums.counter.none){shareUrl=encodeURIComponent(this._SharerUrl);callbackFunction="window.postJsonP('"+this._Id+"').getData";exParam=this._NativePartyButtonsView||this._ToolBoxesView&&!this._ToolBoxesView._IfInnerCounter?"":"ex&";if(this._IsContainLookNativeButtons){exParam=
"ex&";if(this._LookNativeBox){lookNativeButtons=this._LookNativeBox;iLen=lookNativeButtons.length;for(i=0;i<iLen;i++)if(lookNativeButtons[i]._LookNative){channelId=this._Model.getSharerId(lookNativeButtons[i]._Service.id);if(channelId)scParams+="sc="+channelId+"&"}}}if(exParam)if(channelsList.join(" ").indexOf(sharerName)===-1)exParam="";if(increment)channelParam="&channel="+(sharerName==="mail"?"email":sharerName);url=this._Model.PostShortenerURL+"/v1/counter?"+exParam+scParams+"publisherKey="+this._PublisherKey+
"&increment="+increment+"&url="+shareUrl+"&callback="+callbackFunction+"&"+(new Date).getTime()+channelParam;helper.loadScript(url)}};rapostWidget._callbackUpdateCounter=function(response){var count=0;if(this._ToolBoxesView)this._ToolBoxesView.updateCounter(response);if(this._NativePartyButtonsView)this._NativePartyButtonsView.updateCounter(response.total);if(this._AloneBoxView){if(this._AloneService in response)count=response[this._AloneService];else if(this._AloneService==="post"||this._AloneService===
"post-share")count=response.total;this._AloneBoxView.updateCounter(count)}if(this._Container==enums.boxes.looknativebox)this._updateCounterInLookNativeBox(response);this._CountClicked=response.total};rapostWidget._addFavorites=function(){if(window.chrome){alert(this._Model.l10n("pressToBookmark"));return}if(window.sidebar)window.sidebar.addPanel(this._Title,this._SharerUrl,"");else if(window.external)window.external.AddFavorite(this._SharerUrl,this._Title);else alert(this._Model.l10n("pressToBookmark"))};
rapostWidget._getSizeItemOfView=function(){var sizeItem=this._SizeItem;if(this._ToolBoxesView)sizeItem=this._ToolBoxesView._SizeItem;else if(this._ArbitraryView)sizeItem=this._ArbitraryView._SizeItem;else if(this._AloneBoxView)sizeItem=this._AloneBoxView._SizeItem;else if(this._NativePartyButtonsView)sizeItem={X:60,Y:20};return sizeItem};rapostWidget.trackGA=function(sharingChannel){helper.googleAnalytics.track("event",sharingChannel,this._SharerUrl);helper.googleAnalytics.track("social",sharingChannel,
this._SharerUrl)};rapostWidget._onItemsClick=function(sender,args){if(args.service=="post")return;function getChannelNode(opts){var returnNode,nodeName;if(opts.args){returnNode=opts.args.target;nodeName=returnNode.nodeName.toLowerCase();if(nodeName==="i")returnNode=returnNode.parentNode}else if(opts.clickedElement){returnNode=opts.clickedElement;nodeName=returnNode.nodeName.toLowerCase();if(nodeName==="span")returnNode=returnNode.parentNode}return returnNode}var cGuid=this._getGuid();var sGuid=this._Model.getSGuid();
var clickedElement;if(this._ClassicPopUpView&&this._ClassicPopUpOpenedView){this._ClassicPopUpView.hide();this._ClassicPopUpOpenedView.hide()}if(args.service==="more"){if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.hide();this._ClassicPopUpOpenedView.show({image:this._ImageUrl});this._ClassicPopUpOpenedView.Click.add(this._onItemsClick,this);this._ClassicPopUpOpenedView.Closed.add(this._onClassicPopUpOpenedClosed,this);this._IsClassicPopUpOpenedLastOpend=true;this._trackClickBack(this._createLogEvent("more"));
return false}var sharer=this._Model.getMetadataByName(args.service),redirectUrl=null,showAfterShare=true;this._trackClickBack(this._createLogEvent("click",null,sharer.name,cGuid));switch(sharer.name){case "mail":this._showEmailFrame(cGuid);this._updateCounterValue(true,"mail",true);break;case "print":if(window.navigator.appName=="Opera")setTimeout("window.print()",1E3);else window.print();this._updateCounterValue(true,"print",true);break;case "favorites":this._addFavorites();this._updateCounterValue(true,
"favorites",true);this._showPopUpSuccessView(args.args);break;default:redirectUrl=sharer.value;if(redirectUrl){if(redirectUrl=="wordpressButtonClick"){redirectUrl=this._wordpressButtonClick();if(redirectUrl==null)return}else if(args.service=="pinterest"){var pintUrl=null;if(this._ImageUrl)pintUrl=this._ImageUrl;else if(args.pinterestUrl)pintUrl=args.pinterestUrl;if(pintUrl)redirectUrl=redirectUrl.replace("[IMAGEURL]",encodeURIComponent(pintUrl))}else if(args.service=="twitter")redirectUrl=redirectUrl.replace("[VIA]",
encodeURIComponent(this._TwitterVia));showAfterShare=this._shareClickHandler(sharer,redirectUrl,sGuid)}if(showAfterShare)this._showPopUpSuccessView(args.args)}if(this._OnShare)this._OnShare(sharer.name==="mail"?"email":sharer.name,getChannelNode(args));if(sharer.name!=="mail")this._trackClickBack(this._createLogEvent("share",sGuid,sharer.name,cGuid));this.trackGA(sharer.gaName||sharer.displayName);return false};rapostWidget._showPopUpSuccessView=function(args){if(this._ClassicPopUpSuccessView){if(args){var coord=
helper.getOffsetElement(args.target);this._ClassicPopUpSuccessView.show({left:coord.left,top:coord.top+args.target.offsetHeight})}else if(this._ClassicPopUpView)this._ClassicPopUpSuccessView.show({left:this._ClassicPopUpView._Location.left,top:this._ClassicPopUpView._Location.top});else if(this._RelikeBoxView){var fullRelikeBox=helper.getElementsByClassName("pw-sharelist");fullRelikeBox=fullRelikeBox.length>0?fullRelikeBox[0]:null;if(fullRelikeBox){var coordRelikeBox=helper.getOffsetElement(this._DomNode);
var coordOuterBox=helper.getOffsetElement(fullRelikeBox);this._ClassicPopUpSuccessView.show({left:coordRelikeBox.left,top:coordOuterBox.top});fullRelikeBox.style.display="none";this._ClassicPopUpSuccessView.Closed.add(this._onPopUpSuccessShare,this)}}this._updateClassicPopUpSuccess();this._ClassicPopUpSuccessView.ClickShareAgain.add(this._onPopUpSuccessShare,this)}};rapostWidget.resolveShema=function(url){var first2chars=url.substring(0,2),shema="http://";if(first2chars==="//")url=shema+url.substr(2);
if(url.indexOf("://")===-1)url="http://"+url;if(url.charAt(url.length-1)==="/")url=url.slice(0,-1);return url};rapostWidget._shareClickHandler=function(sharer,redirectUrl,sharerGuid){var shareUrl,l10n=this._Model.l10n,shortenUrl,wndUrl,url=this._SharerUrl;url=this.resolveShema(url);shortenUrl=this._Settings.config.transformations.shorten==false?this._Settings.config.transformations.shorten:sharer.shorten;shareUrl=this._Model.getSharerUrl(url,sharer.name,sharerGuid,this._Tracking,this._Settings.config.transformations.shorten);
wndUrl=this._Model.PostCDNServer+"/share.html?secure"+"&url="+(shortenUrl?encodeURIComponent(url):encodeURIComponent(shareUrl))+"&via="+encodeURIComponent(this._TwitterVia)+"&title="+encodeURIComponent(this._Title)+"&sharer="+encodeURIComponent(sharer.displayName)+"&sharerUrl="+encodeURIComponent(redirectUrl)+this._getShortenUrlParameter(sharer)+(sharer.extraUrlEncoding?"&extraUrlEncoding=true":"")+"&sGUID="+sharerGuid+"&pub="+this._PublisherKey+"&lc="+l10n.locale;var params=this._getWindowParams(sharer);
var wnd=window.open(wndUrl,"postShare",params);if(wnd==null)return false;else{this._updateCounterValue(true,sharer.name,true);return true}};rapostWidget._getWindowParams=function(sharer){if(sharer.popUpSize&&this._Settings.config.sharePopups){var size=sharer.popUpSize;var result="width="+size.width+",height="+size.height+",left="+parseInt(window.screen.width/2-sharer.popUpSize.width/2)+",top="+parseInt(window.screen.height/2-sharer.popUpSize.height/2);return result}else return""};rapostWidget._getShortenUrlParameter=
function(sharer){var parameter="",shortenParam="&shorten=true";if(this._Settings.config.transformations.shorten==null)parameter=sharer.shorten?shortenParam:"";else if(this._Settings.config.transformations.shorten)parameter=shortenParam;if(this._Model.getInterstitial(this._PublisherKey))parameter=shortenParam;return parameter};rapostWidget._wordpressButtonClick=function(){var blogName=prompt(this._Model.l10n("enterWordpressURL")+":","http://");if(blogName!=null){blogName=blogName.replace(/^\s+|\/+\s+$/g,
"");if(/http[s]{0,1}:\/\/[\S]+\.[\S]+.*/.test(blogName))return blogName+"/wp-admin/press-this.php?u=[URL]&t=[TITLE]&v=4"}return null};rapostWidget._onToolBoxesPostOver=function(sender,args){var coord=helper.getOffsetElement(args.target);this._ClassicPopUpOpenedView.hide();if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.hide();if(this._ClassicPopUpView){this._ClassicPopUpView.hide();var sizeItem=this._getSizeItemOfView();this._ClassicPopUpView.show({x:coord.left,y:coord.top+args.target.offsetHeight,
sizeItem:sizeItem,image:this._ImageUrl});this._ClassicPopUpView.Click.add(this._onItemsClick,this);this._ClassicPopUpView.Closed.add(this._onClassicPopUpClosed,this);this._IsClassicPopUpOpenedLastOpend=false}};rapostWidget._onToolBoxesPostOut=function(sender,args){if(this._ClassicPopUpView)this._ClassicPopUpView.hideWithTimeOut()};rapostWidget._onClassicPopUpClosed=function(sender,args){this._ClassicPopUpView.Click.remove(this._onItemsClick,this);this._ClassicPopUpView.Closed.remove(this._onClassicPopUpClosed,
this);if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.ClickShareAgain.remove(this._onPopUpSuccessShare,this)};rapostWidget._onClassicPopUpOpenedClosed=function(sender,args){this._ClassicPopUpOpenedView.Click.remove(this._onItemsClick,this);this._ClassicPopUpOpenedView.Closed.remove(this._onClassicPopUpOpenedClosed,this);if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.ClickShareAgain.remove(this._onPopUpSuccessShare,this)};rapostWidget._onPopUpSuccessShare=function(sender,
args){if(this._RelikeBoxView){var fullRelikeBox=helper.getElementsByClassName("pw-sharelist");fullRelikeBox=fullRelikeBox.length>0?fullRelikeBox[0]:null;if(fullRelikeBox){fullRelikeBox.style.display="";this._ClassicPopUpSuccessView.ClickShareAgain.remove(this._onPopUpSuccessShare,this);this._ClassicPopUpSuccessView.Closed.remove(this._onPopUpSuccessShare,this)}return}if(this._IsClassicPopUpOpenedLastOpend){if(this._ClassicPopUpOpenedView){this._ClassicPopUpOpenedView.show({image:this._ImageUrl});
this._ClassicPopUpOpenedView.Click.add(this._onItemsClick,this);this._ClassicPopUpOpenedView.Closed.add(this._onClassicPopUpOpenedClosed,this)}}else if(this._ClassicPopUpView){this._ClassicPopUpView.Click.add(this._onItemsClick,this);this._ClassicPopUpView.Closed.add(this._onClassicPopUpClosed,this);this._ClassicPopUpView.show({x:this._ClassicPopUpSuccessView._Location.left,y:this._ClassicPopUpSuccessView._Location.top,sizeItem:this._SizeItem,image:this._ImageUrl})}};rapostWidget.updateConfig=function(settings){settings=
settings||{};if(settings.total||settings.total==0){this._callbackUpdateCounter(settings);return}if(settings.html){this._ClassicPopUpSuccessView.updateShareContent(settings.html);return}if(settings.title)this._Title=settings.title;if(settings.url){this._SharerUrl=settings.url;this._updateCounterValue(false,"")}if(settings.image)this._ImageUrl=settings.image;if(settings.buttons){var buttons=settings.buttons;for(var i=0;i<buttons.length;i++)if(typeof buttons[i]=="object")if(buttons[i]["pinterest"])if(buttons[i]["pinterest"].imageURL){this._ImageUrl=
buttons[i]["pinterest"].imageURL;settings.image=this._ImageUrl}else if(buttons[i]["pinterest"].image){this._ImageUrl=buttons[i]["pinterest"].image;settings.image=this._ImageUrl}}if(this._Container==enums.boxes.nativebox)this._NativePartyButtonsView.updateConfig(this._Id,settings)};rapost.PostWidgetView=function(settings){settings=settings||{};settings.config=settings.config||{};this._Showed=true;this._PinterestImageURL=settings.config.image!==undefined&&settings.config.image!==null?settings.config.image:
pwidget_config.defaults.image;this._RenderSuccsess=true;this._Style=null;rapost.PostWidgetView.base.constructor.apply(this,arguments);if(!this._Model.CSSLoaded){this._loadCss(this._Model.PostCssURL);this._Model.CSSLoaded=true}if(settings.config&&settings.config.buttons){this._analizeButtonsList(settings.config.buttons);this._Service=settings.config.buttons[0]}this._render();if(this._RenderSuccsess){this._setStyle();this._bindEvents()}};helper.initClass(rapost.PostWidgetView,rapost.Object);var raPWV=
rapost.PostWidgetView.prototype;raPWV._analizeButtonsList=function(buttons){for(var i=0;i<buttons.length;i++)if(typeof buttons[i]=="object"&&buttons[i]!==null)if(buttons[i].id){if(buttons[i].look&&buttons[i].look=="native")this._LookNative=true;if(buttons[i].id=="pinterest"||buttons[i].id=="pinterest-share")if(buttons[i].imageURL)this._PinterestImageURL=buttons[i].imageURL;else if(buttons[i].image)this._PinterestImageURL=buttons[i].image}else buttons[i].id="";else if(typeof buttons[i]==="string")buttons[i]=
{id:buttons[i]}};raPWV._render=function(){return new Error("Not Implements")};raPWV._setStyle=function(){if(this._Style!==null){var style=this._DomNode.getAttribute("style");if(style===null)style="";this._DomNode.setAttribute("style",style+this._Style)}};raPWV.setContent=function(html){this._DomNode.innerHTML=html};raPWV._bindEvents=function(){return new Error("Not Implements")};raPWV._loadCss=function(url){var head=document.getElementsByTagName("head")[0];var link=document.createElement("link");
link.rel="stylesheet";link.href=url;link.media="screen";link.type="text/css";head.appendChild(link)};raPWV._getUserClasses=function(node){this._Style=node.getAttribute("style");var classList=node.className.split(" ");var result="";for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("pw"))==-1)result+=" "+classList[i];return result};raPWV._analizeOfContainer=function(domNode){var params={};var items=domNode.getElementsByTagName("a");if(items.length==0)return null;var servicesList=
[];for(var i=0;i<items.length;i++){var className=items[i].className.split(" ")[0];var service=className.replace("pw_","").replace("pw-","").replace("button-","");if(service=="email")service="mail";if(service=="title"||service=="url")continue;if(service=="pinterest"||service=="pinterest-share"){var attribute=items[i].getAttribute("pw:pinterest-image")||null;if(attribute)params.image=attribute}servicesList.push({id:service})}params.services=servicesList;return params};raPWV.show=function(){this._Showed=
true;this._DomNode.style.display="block"};raPWV.hide=function(){this._Showed=false;this._DomNode.style.display="none"};rapost.NativePartyButtonsView=function(settings){settings=settings||{};this._DomNode=settings.domNode;this._PostNode=null;this._CounterNode=null;this._Counter=settings.config.counter;this._SizeItem=settings.config.size;this._TwitterVia=settings.config.twitterVia;this._Vertical=settings.config.vertical;this._Services=settings.config.buttons;this._ShowPost=settings.config.showPost;
this._CounterNode=null;this._Title=settings.config.title;this._Shorten=settings.config.transformations.shorten;this._SharerUrl=settings.config.url;this._ShortUrl=settings.config.shortUrl||null;this._PinterestImageURL=null;this._Tracking=settings.config.transformations.tracking;rapost.NativePartyButtonsView.base.constructor.apply(this,arguments);this.PostOver=new rapost.Delegate;this.PostOut=new rapost.Delegate};helper.initClass(rapost.NativePartyButtonsView,rapost.PostWidgetView);var raNPBView=rapost.NativePartyButtonsView.prototype;
raNPBView._render=function(){this._correctServicesList();var container=document.createElement("span");if(this._Vertical){if(this._Counter!==enums.counter.horizontal)container.style.width="66px";else container.style.width="120px";container.className="ra1-pw-layout-vertical"}else container.className="ra1-pw-layout-horizontal";var html="";var linkedInNode=null;for(var i=0;i<this._Services.length;i++){var cssClass="ra1-pw-originalbuttons";cssClass+=" ra1-pw-native-"+this._Services[i].id;switch(this._Services[i].id){case "post":html+=
this._addPostButton(cssClass);break;case "pinterest":html+=this._addPinterestButton(cssClass);break;case "facebook":html+=this._addFacebookButton(cssClass);break;case "twitter":html+=this._addTwitterButton(cssClass);break;case "linkedin":html+="<span class='pw_linkedIn'></span>";linkedInNode=this._addLinkedinButton(cssClass);break;case "googleplus":if(detectIE()!=="IE7")html+=this._addGooglePlusButton(cssClass);break}}if(this._ShowPost)html+=this._addPostButton();container.innerHTML=html;var linkedInSpan=
helper.getElementsByClassName("pw_linkedIn",container);if(linkedInSpan.length>0){linkedInSpan=linkedInSpan[0];linkedInSpan.parentNode.insertBefore(linkedInNode,linkedInSpan);linkedInSpan.parentNode.removeChild(linkedInSpan)}container.setAttribute("id",this._DomNode.getAttribute("id"));this._DomNode.parentNode.insertBefore(container,this._DomNode);helper.containersForRecycling.push(this._DomNode);var userClasses=this._getUserClasses(this._DomNode);this._DomNode=container;this._DomNode.className+=userClasses;
for(var i=0;i<this._Services.length;i++)switch(this._Services[i].id){case "facebook":this._loadFacebookScript();break;case "twitter":this._loadTwitterScript();break;case "googleplus":if(detectIE()!=="IE7")this._loadGooglePlusScript();break;case "pinterest":this._loadPinterestScript();break;case "linkedin":this._loadLinkedInScript();break}};raNPBView._addPostButton=function(cssClass){var html="";html+="<span class='[SPANCLASS]'>";var buttonPost='<span class="ra1-pw-originalbuttons ra1-pw-postshare"><a href="" class="ra1-pw-sharealone-brd ra1-pw-sharealone-brd__16"><i class="ra1-pw-icon ra1-pw-icon-post"></i><span class="ra1-pw-sharealone-txt">'+
this._Model.l10n("share")+"</span></a></span>";var counterPost='<span class="ra1-pw-counter"><b class="ra1-pw-count"><span>0</span><i class="ra1-pw-count-brd"></i></b></span>';if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){html+=counterPost;html+=buttonPost;cssClass+=" ra1-pw-vertical"}else{html+=buttonPost;html+=counterPost;cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){html+=buttonPost;
html+=counterPost;cssClass+=" ra1-pw-post-share"}else{html+=counterPost;html+=buttonPost;cssClass+=" ra1-pw-counter-vertical"}else{html+=buttonPost;cssClass+=" ra1-pw-without-counter"}html+="</span>";html=html.replace("[SPANCLASS]",cssClass);return html};raNPBView._addGooglePlusButton=function(cssClass){var button='<span class="[SPANCLASS]"><div class="g-plusone" data-annotation="[COUNTER]" data-size="[DATACOUNTER]" data-href="[SHARERURL]"></div></span>';var size="[SIZE]";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==
enums.counter.horizontal){size="tall";cssClass+=" ra1-pw-vertical"}else{size="medium";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){size="medium";cssClass+=" ra1-pw-googleplus"}else{size="tall";cssClass+=" ra1-pw-counter-vertical"}else{button=button.replace("[COUNTER]","none");size="tall";cssClass+=" ra1-pw-without-counter"}var fullUrl=this._Shorten?this._ShortUrl:this._SharerUrl;button=this._replacePlaceholders(button,size,fullUrl,cssClass);
return button};raNPBView._addLinkedinButton=function(cssClass){var dataCounter=null;if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="top";cssClass+=" ra1-pw-vertical"}else{dataCounter="right";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="right";cssClass+=" ra1-pw-linkedin"}else{dataCounter="top";cssClass+=" ra1-pw-counter-vertical"}else cssClass+=" ra1-pw-without-counter";
var fullUrl=this._Shorten?this._ShortUrl:this._SharerUrl;var span=document.createElement("span");span.className=cssClass;var scriptLinkedIn=document.createElement("script");scriptLinkedIn.setAttribute("type","IN/Share");scriptLinkedIn.setAttribute("data-url",fullUrl);if(dataCounter!==null)scriptLinkedIn.setAttribute("data-counter",dataCounter);span.appendChild(scriptLinkedIn);return span};raNPBView._addTwitterButton=function(cssClass){var button='<span class="[SPANCLASS]"><a href="https://twitter.com/share" class="twitter-share-button" data-url="[SHARERURL]" data-text="[TITLE]" data-count="[DATACOUNTER]" data-via="[VIA]" data-counturl="[URLFORSEARCH]" data-lang="[LANG]">Tweet</a></span>';
var dataCounter="none";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="vertical";cssClass+=" ra1-pw-vertical"}else{dataCounter="horizontal";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="horizontal";cssClass+=" ra1-pw-twitter"}else{dataCounter="vertical";cssClass+=" ra1-pw-counter-vertical"}else cssClass+=" ra1-pw-without-counter";var fullUrl=this._Shorten?this._ShortUrl:
this._Model.getSharerUrl(this._SharerUrl,"twitter",null,this._Tracking);button=this._replacePlaceholders(button,dataCounter,fullUrl,cssClass,this._Title);button=button.replace("[URLFORSEARCH]",this._SharerUrl);button=button.replace("[VIA]",this._TwitterVia);button=button.replace("[LANG]",this._Model.l10n.lang);return button};raNPBView._addPinterestButton=function(cssClass){if(this._PinterestImageURL==null){helper.log("pw:pinterest-image attribute is not found. Widget-ID: "+this._DomNode.getAttribute("id"));
return""}var button='<span class="[SPANCLASS]"><a href="http://pinterest.com/pin/create/button/?url=[SHARERURL]&media=[IMG]&description=[TITLE]" class="pin-it-button" count-layout="[DATACOUNTER]"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a></span>';button=button.replace("[IMG]",encodeURIComponent(this._PinterestImageURL));var dataCounter="";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="vertical";
cssClass+=" ra1-pw-vertical"}else{dataCounter="horizontal";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="horizontal";cssClass+=" ra1-pw-pinterest"}else{dataCounter="vertical";cssClass+=" ra1-pw-counter-vertical"}else{dataCounter="none";cssClass+=" ra1-pw-without-counter"}button=this._replacePlaceholders(button,dataCounter,encodeURIComponent(this._SharerUrl),cssClass,encodeURIComponent(this._Title));return button};raNPBView._addFacebookButton=
function(cssClass){var fbRoot=document.getElementById("fb-root");if(!fbRoot){fbRoot=document.createElement("div");fbRoot.setAttribute("id","fb-root");document.body.appendChild(fbRoot)}var button='<span class="[SPANCLASS]"><fb:like href="[SHARERURL]" width="[WIDTH]" send="false" layout="[DATACOUNTER]" show_faces="false"></fb:like></span>';var dataCounter="";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="box_count";cssClass+=" ra1-pw-vertical"}else{dataCounter=
"button_count";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="button_count";cssClass+=" ra1-pw-facebook";button=button.replace("[WIDTH]","75")}else{dataCounter="box_count";cssClass+=" ra1-pw-counter-vertical"}else{cssClass+=" ra1-pw-without-counter";button='<span class="[SPANCLASS]"><fb:send href="[SHARERURL]"></fb:send></span>'}var url=this._Shorten?this._ShortUrl:this._SharerUrl;button=this._replacePlaceholders(button,dataCounter,
url,cssClass);return button};raNPBView._replacePlaceholders=function(buttonStr,dataCounter,url,cssClass,title){buttonStr=buttonStr.replace("[DATACOUNTER]",dataCounter);buttonStr=buttonStr.replace("[SHARERURL]",url);buttonStr=buttonStr.replace("[SPANCLASS]",cssClass);buttonStr=buttonStr.replace("[TITLE]",title);return buttonStr};raNPBView.updateConfig=function(widgetId,settings){if(settings.url)this._SharerUrl=settings.url;if(settings.title)this._Title=settings.title;var widgetNode=document.getElementById(widgetId);
if(widgetNode){this._updateParametersInNativeButton(widgetNode,settings,"facebook");this._updateParametersInNativeButton(widgetNode,settings,"pinterest");this._updateParametersInNativeButton(widgetNode,settings,"twitter");this._updateParametersInNativeButton(widgetNode,settings,"googleplus");this._updateParametersInLinkedInNativeButton(widgetNode,settings)}};raNPBView._updateParametersInLinkedInNativeButton=function(widgetNode,settings){if(settings.url){var buttonIsNotRendered=false;var linkedInNodes=
helper.getElementsByClassName("ra1-pw-native-linkedin");if(linkedInNodes.length>0){for(var i=0;i<linkedInNodes.length;i++){var nativeButtonsLinkedIn=helper.getElementsByClassName("IN-widget",linkedInNodes[i]);if(nativeButtonsLinkedIn[0]&&nativeButtonsLinkedIn[0].innerHTML!==""){for(var j=0;j<nativeButtonsLinkedIn.length;j++)nativeButtonsLinkedIn[j].style.display="none";helper.containersForRecycling.push(nativeButtonsLinkedIn[0]);setTimeout(function(){helper.clearContainersForInit()},5E3);var boxForInit=
linkedInNodes[i].getElementsByTagName("script")[0];boxForInit.removeAttribute("type");boxForInit.setAttribute("data-url",settings.url);boxForInit.setAttribute("type","IN/Share");IN.parse()}else{buttonIsNotRendered=true;break}}if(buttonIsNotRendered){var self=this;setTimeout(function(){self._updateParametersInLinkedInNativeButton(widgetNode,settings)},10)}}}};raNPBView._updateParametersInNativeButton=function(widgetNode,settings,buttonType){var className="ra1-pw-native-"+buttonType;var nativeButtonNodes=
helper.getElementsByClassName(className,widgetNode);var buttonIsNotRendered=false;for(var i=0;i<nativeButtonNodes.length;i++){var iframeNode=nativeButtonNodes[i].getElementsByTagName("iframe")[0];if(iframeNode){var url=iframeNode.src;switch(buttonType){case "facebook":url=this._replaceParameterValueInUrl(url,"href",settings.url);break;case "pinterest":url=this._replaceParameterValueInUrl(url,"media",settings.image);url=this._replaceParameterValueInUrl(url,"url",settings.url);url=this._replaceParameterValueInUrl(url,
"description",settings.title);break;case "googleplus":url=this._replaceParameterValueInUrl(url,"url",settings.url);break;case "twitter":var twitterHtmlForInit=this._addTwitterButton("").replace('<span class=" ra1-pw-twitter">',"").replace("</span>","");nativeButtonNodes[i].innerHTML=twitterHtmlForInit;twttr.widgets.load();return}this._iframeRenderAgain(iframeNode,url)}else{buttonIsNotRendered=true;break}}if(buttonIsNotRendered){var self=this;setTimeout(function(){self._updateParametersInNativeButton(widgetNode,
settings,buttonType)},10)}};raNPBView._replaceParameterValueInUrl=function(url,paramenter,newValue){if(newValue!==undefined){var currentValue=url.split(paramenter+"=")[1].split("&")[0];var result=url.replace(currentValue,encodeURIComponent(newValue));return result}return url};raNPBView._iframeRenderAgain=function(iframe,url){iframe.src=url};raNPBView._bindEvents=function(){var nodes=helper.getElementsByClassName("ra1-pw-postshare",this._DomNode),nodesCount=nodes.length;if(nodesCount>0)for(var j=0;j<
nodesCount;j++){this._PostNode=nodes[j];helper.domEvent.add(this._PostNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._PostNode,"mouseout",this._onMouseOut,this);helper.domEvent.add(this._PostNode,"click",this._onMouseClick,this)}nodes=helper.getElementsByClassName("ra1-pw-counter",this._DomNode);nodesCount=nodes.length;if(nodesCount>0)for(var j=0;j<nodesCount;j++){this._CounterNode=nodes[j];helper.domEvent.add(this._CounterNode,"click",this._onMouseClick,this)}};raNPBView._correctServicesList=
function(){var result=this._analizeOfContainer(this._DomNode),serviceId;if(result){this._Services=result.services;if(result.image)this._PinterestImageURL=result.image}if(this._Services)for(var i=0;i<this._Services.length;i++){serviceId=this._Services[i].id;if(serviceId.search(new RegExp("-like?|-share?|twitter-twitt?|-plus?"))==-1)if(serviceId.search(new RegExp("_button"))===-1)this._Services[i].id="";this._Services[i].id=this._Services[i].id.replace("_button","");this._Services[i].id=this._Services[i].id.replace("-like",
"");this._Services[i].id=this._Services[i].id.replace("-twitt","");this._Services[i].id=this._Services[i].id.replace("-plus","");this._Services[i].id=this._Services[i].id.replace("-share","");this._Services[i].id=this._Services[i].id.replace("button-","");if(this._Services[i].id=="google")this._Services[i].id="googleplus";if(this._Services[i].id=="post")this._ShowPost=false}else this._Services=this._Model.NativePartyButtons};raNPBView._loadPinterestScript=function(){helper.loadScript("//assets.pinterest.com/js/pinit.js?")};
raNPBView._loadFacebookScript=function(){if(window.FB){FB.init({status:true,cookie:true,xfbml:true});helper.googleAnalytics.fbEvents()}else{window.fbAsyncInit=function(){FB.init({status:true,cookie:true,xfbml:true});helper.googleAnalytics.fbEvents()};var locale=i18n.getDefaultBCP47Tag(this._Model.l10n.locale);helper.loadScript("//connect.facebook.net/"+(locale||"en_US")+"/all.js#xfbml=1")}};raNPBView._loadTwitterScript=function(){function initTwitter(){if(twttr.widgets)twttr.widgets.load();else setTimeout(initTwitter,
1)}if(window.twttr)initTwitter();else window.twttr=function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs");helper.googleAnalytics.twitterEvents()};raNPBView._loadGooglePlusScript=function(){if(window.gapi)gapi.plusone.go();else{window.___gcfg=window.___gcfg||
{lang:i18n.getDefaultBCP47Tag(this._Model.l10n.locale).replace("_","-")};helper.loadScript("https://apis.google.com/js/plusone.js")}};raNPBView._loadLinkedInScript=function(){if(window.IN)IN.init();else helper.loadScript("http://platform.linkedin.com/in.js")};raNPBView.updateCounter=function(value){if(this._Counter!==enums.counter.none){var nodes=helper.getElementsByClassName("ra1-pw-counter",this._DomNode);if(nodes.length>0){var counterContainer=nodes[0];nodes=counterContainer.getElementsByTagName("span");
if(nodes.length>0){var counterNode=nodes[0];counterNode.innerHTML=value}}}};raNPBView._onMouseOver=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOver.fire(this,args);return false};raNPBView._onMouseOut=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOut.fire(this,args);return false};raNPBView._onMouseClick=
function(sender,args){return false};rapost.ArbitraryView=function(settings){settings=settings||{};this._DomNode=settings.domNode;this.Click=new rapost.Delegate;this.MouseOver=new rapost.Delegate;this.MouseOut=new rapost.Delegate;rapost.ArbitraryView.base.constructor.apply(this,arguments)};helper.initClass(rapost.ArbitraryView,rapost.PostWidgetView);var raArbView=rapost.ArbitraryView.prototype;raArbView._render=function(){};raArbView._bindEvents=function(){this._SizeItem={X:this._DomNode.offsetWidth,
Y:this._DomNode.offsetHeight};helper.domEvent.add(this._DomNode,"click",this._onClick,this);helper.domEvent.add(this._DomNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._DomNode,"mouseout",this._onMouseOut,this)};raArbView._onClick=function(sender,args){this.Click.fire(this,args);return false};raArbView._onMouseOver=function(sender,args){this.MouseOver.fire(this,args)};raArbView._onMouseOut=function(sender,args){this.MouseOut.fire(this,args)};rapost.AloneBoxView=function(settings){settings=
settings||{};settings.config=settings.config||{};this._isButtonCorrect=true;this._isAloneBox=settings.config.isAloneBox!==undefined?settings.config.isAloneBox!==undefined:false;this._DomNode=settings.childNode||settings.domNode;this._ButtonNode=null;this._CounterNode=null;this._IsHtmlInit=settings.config.isHtmlInit||false;this._LookNative=settings.config.lookNative||false;this._CounterForLookNative=settings.config.counterForLookNative||null;if(!helper.isArray(settings.config.buttons)){var button=
settings.config.buttons;settings.config.buttons=[];settings.config.buttons.push(button)}else if(!helper.isArray(settings.config.button)){settings.config.buttons=[];settings.config.buttons.push(settings.config.button)}else{settings.config.buttons=[];settings.config.buttons.push("post-share")}this._SizeItem=settings.config.size;this._Counter=settings.config.counter||null;this._PinterestImageURL=null;this._PostShareTransparent=false;this._TwitterVia=null;this.Click=new rapost.Delegate;this.PostOver=
new rapost.Delegate;this.PostOut=new rapost.Delegate;rapost.AloneBoxView.base.constructor.apply(this,arguments)};helper.initClass(rapost.AloneBoxView,rapost.PostWidgetView);var raAloneView=rapost.AloneBoxView.prototype;raAloneView._render=function(){this._RenderSuccsess=false;if(this._IsHtmlInit)this._analizeOfContainer(this._DomNode);var image=this._PinterestImageURL,meta=this._Model.getMetadataByName(this._Service.id,function(id){return id==="pinterest"&&image==null});if(meta){var container=document.createElement("span");
container.className="ra1-pw-alone-button";container.className+=" ra1-pw-button-"+this._SizeItem.text;var buttonNode=null;if(meta.name=="post-share"){buttonNode=this._createLookNativeButton(container,"post");this._LookNative=true}else if(meta.name=="facebook"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"facebook");else if(meta.name=="googleplus"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"googleplus");else if(meta.name=="twitter"&&this._LookNative)buttonNode=
this._createLookNativeButton(container,"twitter");else if(meta.name=="linkedin"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"linkedin");else if(meta.name=="pinterest"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"pinterest");else{if(this._Counter==null)this._Counter=enums.counter.none;this._LookNative=false;var buttonNode=document.createElement("a");buttonNode.href="#";buttonNode.className="ra1-pw-icon ra1-pw-icon-"+meta.name}if(this._Counter==enums.counter.vertical||
this._CounterForLookNative==enums.counter.vertical){if(!this._LookNative)container.style.minWidth=this._SizeItem.X+"px";container.className+=" ra1-pw-counter-vertical"}else if(this._Counter==enums.counter.horizontal)container.className+=" ra1-pw-counter-horizontal";var counterNode=null;if(this._Counter!==enums.counter.none||this._CounterForLookNative!==enums.counter.none){counterNode=document.createElement("b");counterNode.className="ra1-pw-count";counterNode.innerHTML='<span>0</span><i class="ra1-pw-count-brd"></i>'}var id=
this._DomNode.getAttribute("id");if(id)container.setAttribute("id",id);container.appendChild(buttonNode);this._DomNode.parentNode.insertBefore(container,this._DomNode);helper.containersForRecycling.push(this._DomNode);var userClasses=this._getUserClasses(this._DomNode);this._DomNode=container;this._DomNode.className+=userClasses;if(counterNode)if(!this._LookNative)if(this._Counter==enums.counter.horizontal)helper.insertAfter(buttonNode,counterNode);else{if(this._Counter==enums.counter.vertical)buttonNode.parentNode.insertBefore(counterNode,
buttonNode)}else if(this._CounterForLookNative==enums.counter.horizontal)helper.insertAfter(buttonNode,counterNode);else if(this._CounterForLookNative==enums.counter.vertical)buttonNode.parentNode.insertBefore(counterNode,buttonNode);if(meta.name=="pinterest")this._pinterestIsCorrect(buttonNode,counterNode);this._ButtonNode=buttonNode;this._CounterNode=counterNode;this._RenderSuccsess=true}};raAloneView._pinterestIsCorrect=function(buttonNode,counterNode){if(this._PinterestImageURL==null){helper.log("pw:pinterest-image attribute is not found");
if(buttonNode)buttonNode.style.display="none";if(counterNode)counterNode.style.display="none";this._isButtonCorrect=false}};raAloneView._createLookNativeButton=function(container,buttonName){if(this._CounterForLookNative==null)if(this._Counter==null)this._CounterForLookNative=enums.counter.horizontal;else this._CounterForLookNative=this._Counter;var buttonNode=document.createElement("span");buttonNode.className="ra1-pw-originalbuttons";var shareHtml="";if(buttonName=="post"){container.className+=
" pw-widget-postshare-"+this._SizeItem.X;buttonNode.className+=" ra1-pw-postshare";shareHtml+='<a class="ra1-pw-sharealone-brd ra1-pw-sharealone-brd__'+this._SizeItem.X}else{container.className+=" pw-widget-ln-"+buttonName+"-"+this._SizeItem.X;buttonNode.className+=" ra1-pw-button-"+buttonName;shareHtml+='<a class="ra1-pw-ln-'+buttonName}buttonNode.style.cursor="pointer";if(this._PostShareTransparent)shareHtml+=" ra1-pw-post-share-transparent";shareHtml+='"><i class="ra1-pw-icon ra1-pw-icon-'+buttonName+
'"></i> <span class="ra1-pw-sharealone-txt">[SHARE]</span></a>';shareHtml=this._replaceShareLabel(shareHtml,buttonName);buttonNode.innerHTML=shareHtml;return buttonNode};raAloneView._replaceShareLabel=function(html,buttonName){switch(buttonName){case "twitter":html=html.replace("[SHARE]","Tweet");break;case "pinterest":html=html.replace("[SHARE]","Pin It");break;case "googleplus":html=html.replace("[SHARE]","+1");break;case "post":html=html.replace("[SHARE]",this._Model.l10n("share"));break;default:html=
html.replace("[SHARE]","Share")}return html};raAloneView._bindEvents=function(){helper.domEvent.add(this._ButtonNode,"click",this._onClick,this);helper.domEvent.add(this._ButtonNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._ButtonNode,"mouseout",this._onMouseOut,this)};raAloneView.updateCounter=function(value){if(!value)return;var counterNode;if(this._CounterNode){counterNode=this._CounterNode.getElementsByTagName("span")[0];counterNode.innerHTML=value}};raAloneView.isPostItem=
function(className){var classList=className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i]==="ra1-pw-postshare"||classList[i]==="ra1-pw-icon-post")return true;return false};raAloneView._analizeOfContainer=function(container){if(!this._SizeItem)this._SizeItem=helper.getSizeItem(container.getAttribute("pw:size"));var classList=container.className.split(" ");for(var i=0;i<classList.length;i++){if(classList[i].search(new RegExp("pw-size-"))!==-1)if(!this._SizeItem){var value=classList[i].replace("pw-size-",
"");this._SizeItem=helper.getSizeItem(value)}if(classList[i].search(new RegExp("pw-button-post-share-transparent"))!==-1||classList[i].search(new RegExp("pw_share_transparent"))!==-1)this._PostShareTransparent=true;if(classList[i].search("pw-look-native")!==-1)this._LookNative=true;if(classList[i].search("pw-button-")!==-1)this._Service={id:classList[i].replace("pw-button-","")}}var image=container.getAttribute("pw:image");if(!image)image=container.getAttribute("pw:pinterest-image");if(image)this._PinterestImageURL=
image};raAloneView._onClick=function(sender,args){var classList=sender.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("ra1-pw-icon-"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-icon-")[1],args:args,pinterestUrl:this._PinterestImageURL});return false}var buttonName=this._getButtonName(sender);if(buttonName!==null&&buttonName!=="post")this.Click.fire(this,{service:buttonName,args:args,pinterestUrl:this._PinterestImageURL});return false};
raAloneView._onMouseOver=function(sender,args){var anchor=null;var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._DomNode);if(nodes.length>0)anchor=nodes[0];var e=args.toElement||args.target;if(e.parentNode==anchor)return false;if(this.isPostItem(sender.className))this.PostOver.fire(this,args);return false};raAloneView._onMouseOut=function(sender,args){var anchor=null;var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._DomNode);if(nodes.length>0)anchor=nodes[0];
var e=args.toElement||args.target;if(e.parentNode==anchor)return false;if(this.isPostItem(sender.className))this.PostOut.fire(this,args);return false};raAloneView._getButtonName=function(node){var classList=node.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search("ra1-pw-button-")!==-1){var buttonName=classList[i].replace("ra1-pw-button-","");return buttonName}return null};rapost.ToolBoxesView=function(settings){settings=settings||{};this._DomNode=settings.domNode;this._Counter=
settings.config.counter;this._SizeItem=settings.config.size;this._Vertical=settings.config.vertical;this._Services=settings.config.buttons;this._ShowPost=settings.config.showPost;this._CounterNode=null;this._GooglePlusShown=false;this._ShowPostShare=false;this._PostNode=null;this._IfInnerCounter=null;this.Click=new rapost.Delegate;this.PostOver=new rapost.Delegate;this.PostOut=new rapost.Delegate;rapost.ToolBoxesView.base.constructor.apply(this,arguments)};helper.initClass(rapost.ToolBoxesView,rapost.PostWidgetView);
var raTBV=rapost.ToolBoxesView.prototype;raTBV._render=function(){this._analizeOfContainer(this._DomNode);var container=document.createElement("div");container.className+="ra1-pw ra1-pw-classicWidget";var services=this._Services,resolved=[],buttons=this._DomNode.getElementsByTagName("a",this._DomNode),image=this._PinterestImageURL,buttonNode,checkPostButton=null;for(var i=0;i<services.length;i++){var skipMetaPredicate=function(id){if(id==="pinterest"&&image==null)return true;for(var j=0;j<services.length;j++)if(services[j].id===
id)return true;return resolved[id]&&resolved[id]!==services[i].id},meta=this._Model.getMetadataByName(services[i].id,skipMetaPredicate);if(!meta)continue;resolved[meta.name]=services[i].id;if(meta.name=="pinterest"&&image==null){helper.log("pw:image attribute is not found. Widget-ID: "+this._DomNode.getAttribute("id"));continue}if(meta.name=="share"||meta.name=="post-share"){var shareButton=document.createElement("span");shareButton.className="ra1-pw-postshare";shareButton.style.zIndex=1E4;var htmlShareButton=
'<a href="" class="ra1-pw-sharealone-brd ra1-pw-sharealone-brd__'+this._SizeItem.X+'"><i class="ra1-pw-icon ra1-pw-icon-post"></i> <span class="ra1-pw-sharealone-txt">'+this._Model.l10n("share")+"</span></a>";shareButton.innerHTML=htmlShareButton;this._setCounterAttribute(this._Services[i],shareButton);container.className+=" pw-widget-postshare-"+this._SizeItem.X;container.appendChild(shareButton);this._ShowPost=false;this._ShowPostShare=true;checkPostButton=shareButton;continue}if(meta.name=="googleplus")this._GooglePlusShown=
true;buttonNode=document.createElement("a");buttonNode.href="#";buttonNode.className="ra1-pw-icon ra1-pw-icon-"+meta.name;buttonNode.setAttribute("data-service",meta.name);if(meta.counter){this._setCounterAttribute(this._Services[i],buttonNode);if(buttons[i]){var oldCounter=buttons[i].getAttribute("pw:counter");if(oldCounter)buttonNode.setAttribute("pw:counter",oldCounter);var className=buttons[i].className;if(className.indexOf("pw-counter")>-1)buttonNode.setAttribute("pw:counter",true)}}container.appendChild(buttonNode);
if(meta.name=="post")checkPostButton=buttonNode}if(this._ShowPost){buttonNode=document.createElement("a");buttonNode.href="#";buttonNode.className="ra1-pw-icon ra1-pw-icon-post";container.appendChild(buttonNode);checkPostButton=buttonNode}if(this._Counter!==enums.counter.none&&checkPostButton!==null){var counterNode=document.createElement("b");counterNode.className="ra1-pw-count";counterNode.innerHTML='<span>0</span><i class="ra1-pw-count-brd"></i>';helper.insertAfter(checkPostButton,counterNode);
this._CounterNode=counterNode}container.className+=" ra1-pw_size_"+this._SizeItem.text;if(this._Vertical)container.className+=" ra1-pw-vertical";container.setAttribute("id",this._DomNode.getAttribute("id"));this._DomNode.parentNode.insertBefore(container,this._DomNode);helper.containersForRecycling.push(this._DomNode);var userClasses=this._getUserClasses(this._DomNode);this._DomNode=container;this._DomNode.className+=userClasses;this._setWidth();this._insertCounters()};raTBV._setCounterAttribute=
function(service,target){if(service.counter&&service.counter=="true")target.setAttribute("pw:counter","true")};raTBV._setWidth=function(){if(this._Vertical)if(this._GooglePlusShown)switch(this._SizeItem){case enums.sizeItem.small:this._DomNode.style.width="24px";break;case enums.sizeItem.medium:case enums.sizeItem.large:this._DomNode.style.width="32px";break}else this._DomNode.style.width=this._SizeItem.X+"px"};raTBV._insertCounters=function(){var counterValue;var buttons=helper.getElementsByClassName("ra1-pw-icon",
this._DomNode);var postshare=helper.getElementsByClassName("ra1-pw-postshare",this._DomNode);var array1=helper.nodeListToArray(buttons);var array2=helper.nodeListToArray(postshare);buttons=array1.concat(array2);for(var i=0;i<buttons.length;i++){counterValue=buttons[i].getAttribute("pw:counter");if(typeof counterValue==="boolean")counterValue=counterValue.toString();if(counterValue==="true"){var counterNode=document.createElement("b");counterNode.className="ra1-pw-count pw-counter-inner";counterNode.setAttribute("data-service",
buttons[i].getAttribute("data-service"));counterNode.innerHTML='<span>0</span><i class="ra1-pw-count-brd"></i>';buttons[i].parentNode.insertBefore(counterNode,buttons[i].nextSibling);this._IfInnerCounter=true}}};raTBV._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this);helper.domEvent.add(this._DomNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._DomNode,"mouseout",this._onMouseOut,this)};raTBV._analizeOfContainer=function(domNode){var result=rapost.ToolBoxesView.base._analizeOfContainer.call(this,
domNode);if(result!==null){this._Services=result.services?result.services:this._Services;for(var i=0;i<this._Services.length;i++)if(this._Services[i].id=="post"){this._ShowPost=false;break}if(result.image)this._PinterestImageURL=result.image}};raTBV.updateCounter=function(value){var counterNode;if(this._CounterNode){counterNode=this._CounterNode.getElementsByTagName("span")[0];counterNode.innerHTML=value.total!==undefined?value.total:""}var serviceNodes=helper.getElementsByClassName("ra1-pw-count",
this._DomNode);for(var i=0;i<serviceNodes.length;i++){var service=serviceNodes[i].getAttribute("data-service");counterNode=serviceNodes[i].getElementsByTagName("span")[0];if(counterNode)switch(service){case "facebook":if(value.facebook)counterNode.innerHTML=value.facebook;break;case "twitter":if(value.twitter)counterNode.innerHTML=value.twitter;break;case "pinterest":if(value.pinterest)counterNode.innerHTML=value.pinterest;break;case "linkedin":if(value.linkedin)counterNode.innerHTML=value.linkedin;
break;case "googleplus":if(value.googleplus)counterNode.innerHTML=value.googleplus;break}}};raTBV.isPostItem=function(className,tagName){var returnValue=false;if(className.search(new RegExp("ra1-pw-icon-post?|pw-sharealone-brd?"))>-1&&tagName==="A")returnValue=true;return returnValue};raTBV._onClick=function(sender,args){var classList=args.target.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("ra1-pw-icon-"))!==-1)this.Click.fire(this,{service:classList[i].split("ra1-pw-icon-")[1],
pinterestUrl:this._PinterestImageURL,args:args});return false};raTBV._onMouseOver=function(sender,args){if(this.isPostItem(args.target.className,args.target.nodeName))this.PostOver.fire(this,args)};raTBV._onMouseOut=function(sender,args){if(this.isPostItem(args.target.className,args.target.nodeName))this.PostOut.fire(this,args)};raTBV._onPostShareMouseOver=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOver.fire(this,
args);return false};raTBV._onPostShareMouseOut=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOut.fire(this,args);return false};rapost.RelikeBoxView=function(settings){settings=settings||{};this._Settings=settings;this._DomNode=settings.domNode;this._PinterestImageUrl=window.pwidget_config.defaults.image?window.pwidget_config.defaults.image:"";this.Click=new rapost.Delegate;rapost.RelikeBoxView.base.constructor.apply(this,
arguments)};helper.initClass(rapost.RelikeBoxView,rapost.PostWidgetView);var raRBView=rapost.RelikeBoxView.prototype;raRBView._render=function(){var content='<ul class="ra1-pw-relike">';for(var i=0;i<this._Model.Metadata.length;i++){var meta=this._Model.Metadata[i];if(meta.hideFromPopPup)continue;switch(meta.name){case "print":case "favorites":continue;case "wordpress":case "blogger":if(this._Settings.config.title=="")continue;break;case "pinterest":if(this._PinterestImageUrl=="")continue;break}content+=
'<li><a href="#" class="ra1-pw-icon ra1-pw-icon-'+meta.name+' ra1-pw_size_small"></a><span style="cursor: pointer" class="ra1-pw-txt-'+meta.name+'">'+meta.displayName+"</span></li>"}content+="</ul>";this._DomNode.innerHTML=content};raRBView._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this)};raRBView._onClick=function(sender,args){var classList=args.target.className.split(" ");for(var i=0;i<classList.length;i++){if(classList[i].search(new RegExp("ra1-pw-icon-"))!==
-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-icon-")[1],pinterestUrl:this._PinterestImageUrl,clickedElement:args.target});break}if(classList[i].search(new RegExp("ra1-pw-txt"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-txt-")[1],pinterestUrl:this._PinterestImageUrl,clickedElement:args.target});break}}return false};rapost.ClassicPopUpSuccessView=function(settings){if(!rapost._CPUSVInstance)rapost._CPUSVInstance=new rapost.ClassicPopUpSuccess(settings);return rapost._CPUSVInstance};
rapost.ClassicPopUpSuccess=function(settings){this._DomNode=null;this._BasicClassList="ra1-pw-popup pw-popup-type_aftershare";this._Location={top:0,left:0};this._Width=320;this._StartHeight=126;this.ClickShareAgain=new rapost.Delegate;this.Closed=new rapost.Delegate;rapost.ClassicPopUpSuccess.base.constructor.apply(this,arguments)};helper.initClass(rapost.ClassicPopUpSuccess,rapost.PostWidgetView);var raCPUSView=rapost.ClassicPopUpSuccess.prototype;raCPUSView._render=function(){this._DomNode=document.createElement("div");
this._DomNode.className=this._BasicClassList;if(detectIE()=="IE7")this._DomNode.style.width=this._Width+"px";this._DomNode.style.minWidth=this._Width+"px";this._DomNode.style.position="absolute";this._DomNode.style.left="-9999px";this._DomNode.style.top="-9999px";var l10n=this._Model.l10n;var html='<div class="ra1-pw-popup-i"><span class="ra1-pw-popup-close"></span><h2 class="ra1-pw-popup-title">'+l10n("sharingSuccessful")+'</h2><div class="ra1-pw-share-success"><div class="ra1-pw-share-txt"><a href="" class="ra1-pw-small-btn"><span><span class="ra1-pw-share-again">'+
l10n("shareAgain")+"</span></span></a><p>"+l10n("successfullyShared")+' </p></div><div class="ra1-pw-share-offer">'+"Welcome to po.st!"+'</div></div><div class="ra1-pw-popup-footer"><a target="_blank" href="'+this._Model.PoStLink+'" class="ra1-pw-powered">'+l10n("powered")+'</a><a target="_blank" href="'+this._Model.PrivacyPolicyLink+'" class="ra1-pw-privacy">'+l10n("privacy")+"</a></div></div>";this._DomNode.innerHTML=html;document.body.appendChild(this._DomNode)};raCPUSView.updateShareContent=function(data){data=
data.replace("[R1_FLASH]",helper.isFlashPlayerInstalled()?"f":"");var nodeShareOffer=helper.getElementsByClassName("ra1-pw-share-offer",this._DomNode);if(nodeShareOffer.length>0)nodeShareOffer=nodeShareOffer[0];else return;nodeShareOffer.innerHTML=data;var scripts=nodeShareOffer.getElementsByTagName("script");var script;for(var i=0;script=scripts[i];i++)eval(script.innerHTML)};raCPUSView.show=function(data){var position,coord,self=this,offerNode,positionClass=helper.popupPositionElClass.left;offerNode=
helper.getElementsByClassName("ra1-pw-share-offer",this._DomNode);if(this._DomNode.offsetHeight>this._StartHeight||offerNode[0].innerHTML.indexOf("<img")===-1){position={browserHeight:helper.getClientOffset().Height+helper.getScrollPosition().Y,browserWidth:helper.getClientOffset().Width+helper.getScrollPosition().X,popUpHeight:this._DomNode.offsetHeight,popUpWidth:this._DomNode.offsetWidth};coord={X:data.left,Y:data.top};if(position.popUpHeight<position.browserHeight&&position.popUpHeight+data.top>
position.browserHeight)coord.Y=position.browserHeight-position.popUpHeight;if(position.popUpWidth<position.browserWidth&&position.popUpWidth+data.left>position.browserWidth){coord.X=position.browserWidth-position.popUpWidth;positionClass=helper.popupPositionElClass.right}rapost.ClassicPopUpSuccess.base.show.call(this);this._DomNode.className=this._BasicClassList+" "+positionClass;this._DomNode.style.position="absolute";this._DomNode.style.left=coord.X+"px";this._DomNode.style.top=coord.Y+"px";this._Location.left=
data.left;this._Location.top=data.top}else setTimeout(function(){self.show(data)},1E3)};raCPUSView.hide=function(){this._DomNode.style.left="-9999px";this._DomNode.style.top="-9999px";this.Closed.fire(this,{})};raCPUSView._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this)};raCPUSView._onClick=function(sender,args){if(helper.isContainClassName(args.target,"ra1-pw-share-again")){this.hide();this.ClickShareAgain.fire(this,{});return false}if(helper.isContainClassName(args.target,
"ra1-pw-popup-close")){this.hide();return false}return true};rapost.ClassicPopUpView=function(settings){if(!rapost._ClassicPopUpInstance)rapost._ClassicPopUpInstance=new rapost.ClassicPopUp(settings);return rapost._ClassicPopUpInstance};rapost.ClassicPopUp=function(settings){this._SizeItem=enums.sizeItem.small;this._BasicClassList="ra1-pw-popup pw-popup-type_simplelist";this._Location={left:0,right:0};this._Width=280;this._TimeOutId=null;this._TimeOut=1500;this._TwitterVia=settings.twitterVia;this.Click=
new rapost.Delegate;this.Closed=new rapost.Delegate;rapost.ClassicPopUp.base.constructor.apply(this,arguments);this.hide()};helper.initClass(rapost.ClassicPopUp,rapost.PostWidgetView);var raClassicPopUp=rapost.ClassicPopUp.prototype;raClassicPopUp._render=function(){var l10n=this._Model.l10n;var content='<div class="ra1-pw-popup-i"><span class="ra1-pw-popup-close"></span><h2 class="ra1-pw-popup-title">'+l10n("shareTitle")+":"+'</h2><div class="ra1-pw-popup-area"><ul class="ra1-pw-popup__ul ra1-pw_size_small">';
for(var i=0;i<this._Model.Metadata.length;i++){var meta=this._Model.Metadata[i];if(meta.hideFromPopPup)continue;content+='<li><a href=""><i class="ra1-pw-icon ra1-pw-icon-'+meta.name+'"></i> <span class="ra1-pw-txt ra1-pw-txt-'+meta.name+'">'+meta.displayName+"</span></a></li>"}content+='<li><a href=""><i class="ra1-pw-icon ra1-pw-icon-more"></i> <span class="ra1-pw-txt ra1-pw-txt-more">'+l10n("more")+"</span></a></li>";content+="</ul></div>";content+='<div class="ra1-pw-popup-footer"><a href="'+
this._Model.PoStLink+'" class="ra1-pw-powered">'+l10n("powered")+'</a><a href="'+this._Model.PrivacyPolicyLink+'" class="ra1-pw-privacy">'+l10n("privacy")+"</a></div></div>";this._DomNode=document.createElement("div");this._DomNode.style.width=this._Width+"px";this._DomNode.className=this._BasicClassList;this._DomNode.style.textAlign="left";this._DomNode.innerHTML=content;document.body.appendChild(this._DomNode)};raClassicPopUp._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,
this);helper.domEvent.add(this._DomNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._DomNode,"mouseout",this._onMouseOut,this)};raClassicPopUp.show=function(settings){var x=settings.x||0;var y=settings.y||0;var sizeItem=settings.sizeItem;rapost.ClassicPopUp.base.show.call(this);this._enableActiveIcons(settings,11);this._DomNode.style.position="absolute";var position={browserHeight:helper.getClientOffset().Height+helper.getScrollPosition().Y,browserWidth:helper.getClientOffset().Width+
helper.getScrollPosition().X,popUpHeight:this._DomNode.offsetHeight,popUpWidth:this._DomNode.offsetWidth},positionClass=helper.popupPositionElClass.left;this._DomNode.style.top=y+"px";this._DomNode.style.left=x+"px";if(y+position.popUpHeight>position.browserHeight&&position.popUpHeight<position.browserHeight)this._DomNode.style.top=y-position.popUpHeight-sizeItem.Y+"px";if(x+position.popUpWidth>position.browserWidth&&position.popUpWidth<position.browserWidth){this._DomNode.style.left=x-position.popUpWidth+
sizeItem.X+"px";positionClass=helper.popupPositionElClass.right}this._DomNode.className=this._BasicClassList+" "+positionClass;this._Location.left=parseInt(this._DomNode.style.left);this._Location.top=parseInt(this._DomNode.style.top)};raClassicPopUp._enableActiveIcons=function(settings,limit){var icons=this._DomNode.getElementsByTagName("li"),enabled=0;for(var i=0,j=0;i<this._Model.Metadata.length;i++){var meta=this._Model.Metadata[i];if(meta.hideFromPopPup)continue;if(limit!==undefined&&enabled>=
limit){helper.hideNode(icons[j++]);continue}if(this._isServiceActive(meta.name,settings)){helper.showNode(icons[j++]);enabled++}else helper.hideNode(icons[j++])}};raClassicPopUp._isServiceActive=function(service,settings){return service!=="pinterest"||!!settings.image};raClassicPopUp.hide=function(){this._clearTimeOut();rapost.ClassicPopUp.base.hide.call(this);this.Closed.fire(this,{})};raClassicPopUp.hideWithTimeOut=function(){this._clearTimeOut();var self=this;this._TimeOutId=setTimeout(function(){self.hide()},
self._TimeOut)};raClassicPopUp._clearTimeOut=function(){if(this._TimeOutId){clearTimeout(this._TimeOutId);this._TimeOutId=null}};raClassicPopUp._onClick=function(sender,args){this._clearTimeOut();if(helper.isContainClassName(args.target,"ra1-pw-popup-close"))this.hide();var classList=args.target.className.split(" ");for(var i=0;i<classList.length;i++){if(classList[i].search(new RegExp("ra1-pw-icon-"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-icon-")[1],pinterestUrl:this._PinterestImageUrl,
clickedElement:args.target});return false}if(classList[i].search(new RegExp("ra1-pw-txt-"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-txt-")[1],pinterestUrl:this._PinterestImageUrl,clickedElement:args.target});return false}if(classList[i].search(new RegExp("ra1-pw-powered"))!==-1||classList[i].search(new RegExp("ra1-pw-privacy"))!==-1){if(window.open(args.target.href)==null)return true;return false}}return false};raClassicPopUp._onMouseOver=function(sender,args){this._clearTimeOut()};
raClassicPopUp._onMouseOut=function(sender,args){this._clearTimeOut();var self=this;this._TimeOutId=setTimeout(function(){self.hide()},self._TimeOut)};rapost.ClassicPopUpOpenedView=function(settings){if(!rapost.ClassicPopUpOpenedInstance)rapost.ClassicPopUpOpenedInstance=new rapost.ClassicPopUpOpened(settings);return rapost.ClassicPopUpOpenedInstance};rapost.ClassicPopUpOpened=function(settings){settings=settings||{};rapost.ClassicPopUpOpened.base.constructor.apply(this,arguments)};helper.initClass(rapost.ClassicPopUpOpened,
rapost.ClassicPopUp);var raCPUOpened=rapost.ClassicPopUpOpened.prototype;raCPUOpened._render=function(){var l10n=this._Model.l10n;var html='<div class="ra1-pw-popup-i"><span class="ra1-pw-popup-close"></span><h2 class="ra1-pw-popup-title">'+l10n("shareTitle")+":"+'</h2><div class="ra1-pw-popup-area"><ul class="ra1-pw-popup__ul ra1-pw_size_small">';for(var i=0;i<this._Model.Metadata.length;i++){var meta=this._Model.Metadata[i];if(meta.hideFromPopPup)continue;html+='<li><a href=""><i class="ra1-pw-icon ra1-pw-icon-'+
meta.name+'"></i> <span class="ra1-pw-txt ra1-pw-txt-'+meta.name+'">'+meta.displayName+"</span></a></li>"}html+="</ul></div>";html+='<div class="ra1-pw-popup-footer"><a href="'+this._Model.PoStLink+'" class="ra1-pw-powered">'+l10n("powered")+'</a><a href="'+this._Model.PrivacyPolicyLink+'" class="ra1-pw-privacy">'+l10n("privacy")+"</a></div></div>";this._DomNode=document.createElement("div");this._DomNode.className="ra1-pw-popup ra1-pw-popup-area-scroll pw-popup-type_extendlist";this._DomNode.style.position=
"fixed";this._DomNode.style.textAlign="left";this._DomNode.innerHTML=html;document.body.appendChild(this._DomNode)};raCPUOpened._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this)};raCPUOpened.show=function(settings){helper.domEvent.add(window,"resize",this._onWindowResize,this);this._DomNode.style.display="block";var size=helper.getClientOffset();var centerX=size.Width/2;var centerY=size.Height/2;this._DomNode.style.left=centerX-this._DomNode.offsetWidth/2+"px";this._DomNode.style.top=
centerY-this._DomNode.offsetHeight/2+"px";this._enableActiveIcons(settings)};raCPUOpened.hide=function(){this._DomNode.style.display="none";helper.domEvent.remove(window,"resize",this._onWindowResize,this);this.Closed.fire(this,{})};raCPUOpened._onWindowResize=function(sender,args){this.show()};rapost.EmailFrameView=function(settings){if(!rapost._EmailFrameInstance)rapost._EmailFrameInstance=new rapost.EmailFrame(settings);return rapost._EmailFrameInstance};rapost.EmailFrame=function(settings){this._DomNode=
null;this._IframeNode=null;this._CloseButtonNode=null;this._CloseButtonSize={width:54,height:30};this._UrlForRequest="#";this._DomNode=null;this._Width=495;this._Height=500;rapost.EmailFrame.base.constructor.apply(this,arguments)};helper.initClass(rapost.EmailFrame,rapost.PostWidgetView);var raEmailFrameView=rapost.EmailFrame.prototype;raEmailFrameView._render=function(){this._DomNode=document.createElement("div");this._DomNode.style.width="100%";this._DomNode.style.height="100%";this._DomNode.style.backgroundColor=
"black";this._DomNode.style.zIndex=1E4;this._DomNode.style.position="fixed";this._DomNode.style.left="0px";this._DomNode.style.top="0px";this._DomNode.style.opacity="0.8";this._DomNode.style.filter="alpha(opacity = 80)";document.body.appendChild(this._DomNode);this._CloseButtonNode=document.createElement("div");this._CloseButtonNode.style.width=this._CloseButtonSize.width+"px";this._CloseButtonNode.style.height=this._CloseButtonSize.height+"px";this._CloseButtonNode.style.zIndex=10002;this._CloseButtonNode.style.cursor=
"pointer";this._CloseButtonNode.style.position="fixed";this._CloseButtonNode.style.left="0px";this._CloseButtonNode.style.top="0px";document.body.appendChild(this._CloseButtonNode)};raEmailFrameView._bindEvents=function(){helper.domEvent.add(this._CloseButtonNode,"click",this._onClick,this)};raEmailFrameView.show=function(data){helper.domEvent.add(window,"resize",this._onWindowResize,this);this._DomNode.style.display="block";this._CloseButtonNode.style.display="block";this._IframeNode=document.createElement("iframe");
this._IframeNode.src=data.emailUrl;this._IframeNode.style.border="0px";this._IframeNode.style.position="fixed";this._IframeNode.style.left="0px";this._IframeNode.style.top="0px";this._IframeNode.style.zIndex=10001;this._IframeNode.frameBorder=0;this._IframeNode.allowTransparency=true;this._IframeNode.style.width=this._Width+"px";this._IframeNode.style.height=this._Height+"px";this._IframeNode.setAttribute("scrolling","no");this._DomNode.parentNode.insertBefore(this._IframeNode,this._DomNode);this._showInCenter()};
raEmailFrameView.hide=function(){this._DomNode.style.display="none";this._CloseButtonNode.style.display="none";this._IframeNode.parentNode.removeChild(this._IframeNode);helper.domEvent.remove(window,"resize",this._onWindowResize,this)};raEmailFrameView._showInCenter=function(){var size=helper.getClientOffset();var centerX=size.Width/2;var centerY=size.Height/2;this._IframeNode.style.left=centerX-this._Width/2+"px";this._IframeNode.style.top=centerY-this._Height/2+"px";this._CloseButtonNode.style.left=
parseInt(this._IframeNode.style.left)+this._Width-this._CloseButtonSize.width+"px";this._CloseButtonNode.style.top=this._IframeNode.style.top};raEmailFrameView._onClick=function(sender,args){this.hide()};raEmailFrameView._onWindowResize=function(sender,args){if(this._IframeNode)this._showInCenter()};window.postJsonP=function(id){var widgets=helper.allWidgets;for(var i=0;i<widgets.length;i++)if(id==widgets[i]._Id)return{getData:function(data){widgets[i].updateConfig(data)},getStatus:function(data){widgets[i].updateStatus(data)}}};
window.post_widget=helper.postWidget;window.post_init=helper.initWidgets;helper.chekInitType()}(window);