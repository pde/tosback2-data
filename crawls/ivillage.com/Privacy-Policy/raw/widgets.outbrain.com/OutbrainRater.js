window.OB_releaseVer="70879";var ObStartTime=typeof ObStartTime!="undefined"?ObStartTime:(new Date).getTime(),outbrain_browsers=typeof outbrain_browsers=="object"?outbrain_browsers:new (function(){this.browserListVersion="6.2";this.ready=false;this.doc=document;this.agt=navigator.userAgent.toLowerCase();this.opera=navigator.userAgent.toLowerCase().indexOf("opera")!=-1;this.avant=navigator.userAgent.toLowerCase().indexOf("avant")!=-1;this.chrome=navigator.userAgent.toLowerCase().indexOf("chrome")!=-1;this.iPhone=navigator.userAgent.toLowerCase().indexOf("iphone")!=
-1;this.iPod=navigator.userAgent.toLowerCase().indexOf("ipod")!=-1;this.iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!=-1;this.android=navigator.userAgent.toLowerCase().indexOf("android")!=-1;this.windows_ce=navigator.userAgent.toLowerCase().indexOf("windows ce")!=-1;this.blackberry=navigator.userAgent.toLowerCase().indexOf("blackberry")!=-1;this.palm=navigator.userAgent.toLowerCase().indexOf("palm")!=-1;this.ie=!this.opera&&navigator.appName.indexOf("Microsoft")!=-1;this.safari=!this.ie&&
navigator.userAgent.toLowerCase().indexOf("safari")!=-1;this.mozilla=!this.opera&&!this.ie&&!this.safari&&!this.chrome;this.is_major=parseInt(navigator.appVersion);this.ie5=this.ie&&this.is_major==4&&this.agt.indexOf("msie 5.")!=-1;this.ie55=this.ie&&this.is_major==4&&this.agt.indexOf("msie 5.5")!=-1;this.ie6=this.ie&&this.is_major==4&&this.agt.indexOf("msie 6.")!=-1;this.ie7=this.ie&&this.is_major==4&&this.agt.indexOf("msie 7.")!=-1;this.ie8=this.ie&&this.is_major==4&&this.agt.indexOf("trident/4.0")!=
-1;this.ie9=this.ie&&this.is_major==5&&this.agt.indexOf("trident/5.0")!=-1;this.ieDocMode=this.doc.documentMode?this.doc.documentMode:this.doc.compatMode&&this.doc.compatMode=="CSS1Compat"?7:5;this.ie8Doc8=this.ie8&&this.ieDocMode==8;this.ie9Doc8Plus=this.ie9&&this.ieDocMode>=8;this.isMobile=this.iPhone||this.iPod||this.iPad||this.android||this.windows_ce||this.blackberry||this.palm;this.sc=this.safari||this.chrome;this.os=navigator.platform.toLowerCase();this.osMac=this.os.indexOf("mac")!=-1;this.osWin=
this.os.indexOf("win")!=-1;this.osLinux=this.os.indexOf("linux")!=-1;this.ready=true});OB_freeze=typeof outbrain_settings=="object"&&outbrain_settings.versions.numVer<651?true:false;
var outbrain_settings=typeof outbrain_settings=="object"?outbrain_settings:new (function(){var d=this;this.PLATFORM_TYPE_TYPEPAD=0;this.PLATFORM_TYPE_BLOGGER_SIDEBAR=1;this.PLATFORM_TYPE_TUMBLR=2;this.PLATFORM_TYPE_SQUARESPACE=9;this.isBlogger=this.platformType=null;this.versions=new function(){this.numVer=651;this.whatIs=this.css=this.raterFull=this.mp=this.rater=typeof OB_releaseVer=="string"?OB_releaseVer:"";this.language="7.0.0";this.images="6.3.1";this.odb="0.6"};this.demoMode=false;this.globals=
new function(){this.scriptType="text/javascript";this.cssType="text/css";this.cssRel="stylesheet"};this.domains=new function(){this.odb="http://odb.outbrain.com/";this.outbrain="http://www.outbrain.com/";this.language=this.templates=this.css=this.images=this.js="http://widgets.outbrain.com/";if(typeof OB_testHost==="string")this.js=this.images=this.css=this.templates=this.language=OB_testHost+"/";if(typeof OB_odbTestHost==="string")this.odb=OB_odbTestHost+"/";this.traffic="http://traffic.outbrain.com/network/redir"};
this.keys_and_users=new function(){this.odbKey="AYQHSUWJ8576";this.agentId="blog_JS";this.userName=this.outbrainKey=this.partnerName=null;this.partnerKey=this.odbKey};this.odb=new function(){this.odbRatesRecorder="http://rate.outbrain.com/rate.do";this.odbGetDataUrlGlobal=d.domains.odb+"utils/get?url=$PERMA_LINK$SOURCE_URL&settings=$IS_SETTINGS&recs=$IS_RECS&widgetJSId=$WIDGET_ID&key=$PARTNER_KEY&idx=$VOTER_INDEX&version=$VERSION&ref=$REFERRER&apv=$ADS_PV$EXTRA_DATA";this.odbGetDataUrlSettings=d.domains.odb+
"utils/get?url=$LOCAL_URL$SOURCE_URL&settings=true&recs=false&widgetJSId=NA&key=$PARTNER_KEY&idx=-1&version=$VERSION$EXTRA_DATA";this.odbGetDataUrlRec=this.odbGetDataUrlGlobal;this.adsPv=false;this.topPaddingThreshold=0.1;this.bottomPaddingThreshold=1.3;this.isOdbCallsSerial=false;this.isSemafor=true;this.OUTSIDEFOLD=0;this.INSIDEFOLD=1;this.NEARFOLD=2;this.EAGER=10;this.ERRED=-1};this.blogUtils=new (function(){this.baseUrl=d.domains.odb+"blogutils/";this.cancelRecs=this.baseUrl+"ExcludeRec.action?bocr=$BOCR&index=$VOTER_INDEX&templateIndex=$TEMPLATE_INDEX";
this.errorManager=d.domains.outbrain+"WidgetsErrorManager?localUrl=$LOCAL_URL&err_code=$ERROR_CODE&err_desc=$ERROR_DESC&err_severity=$ERROR_SEVERITY&err_tmpl=$ERROR_TEMPLATE&err_browser=$ERROR_BROSWER&err_machine=$ERROR_OS&err_source_id=$ERROR_SOURCE";this.timeCounter="http://traffic.outbrain.com/network/rtime/?docid=$DOC_ID&url=$ENCODED_URL&tpassed=$TIME_PASSED&srcid=$SOURCE_ID&reqid=$REQUEST_ID";this.widgetId="NA";this.hrefLocation=location.href;this.blogHrefLocation=encodeURIComponent(location.href);
this.blogReferrer=document.referrer;this.sourceId=null});this.ping=new function(){this.id="odbPingIframeId";this.url="http://odb.outbrain.com/utils/ping.html";this.maxTime=10};this.language=new function(){this.defaultLangName="deflang";this.id="outbrainLanguageJs";this.url=d.domains.language+"lang_en.js";this.retrayMilliSeconds=100;this.retrayMaxTimes=10;this.retrayGradualTimeout=false};this.rater=new (function(){this.cssId="cssLinkID";this.cssUrl=d.domains.css+"mu/css/outbrainWidget.css?v="+d.versions.css;
this.globalElementClass="outbrainGlobalClass";this.firstRaterPositionElementId="outbrainCurrentPosition";this.cleanPermalink=this.isThumbs=false;this.windowName=null;this.firstRandom=Math.random();this.recommendations=new function(){this.type="popular";this.always=false;this.openNewTab=this.showFramePage=true;this.rel=new function(){this.REL_NONE="none";this.REL_ALL="all";this.REL_ADS="ads";this.REL_ORGANIC="organics"}};this.statuses=new function(){this.RATER_PRE_RATE_MODE=0;this.RATER_RATE_MODE=
1;this.RATER_POST_RATE_MODE=2};this.odb=new function(){this.getScoreId="outbrainPostRankRequestID";this.getScoreRecId="outbrainPostRecRankRequestID";this.getCancelRecId="outbrainPostCancelRecRequestID"}});this.whatIs=new function(){this.id="whatIsOutbrainJs";this.url=d.domains.js+"whatisModal.js?v="+d.versions.whatIs;this.position=new function(){this.TOP="top";this.BOTTOM="bottom"};this.type=new function(){this.BALLOON="balloon";this.POP="pop"}};this.textualVideoPosition=new function(){this.BEGINNING=
"Beginning";this.MIDDLE="Middle";this.END="End"};this.customSettings=new function(){this.keyTagName="OBKey";this.enabled=false};this.Enums=new function(){this.StripFlavors=new function(){this.COLS="cols";this.ROWS="rows";this.SBS="sbs";this.LIGHT="light"}};this.isBackwards=false;this.defaultTemplateName="general";this.defaultImage=d.domains.images+"jmatrix.png";this.defaultMatrixInfos={};this.defaultSettings=function(){this.timeCounter=this.platformType=this.srcId=null;this.isDisqus=true;this.stopWidget=
false;this.jsInjection=null;this.comScoreDone=this.isBackwards=false;this.homePageRegx=null;this.stopRaterOnHP=false;this.partnerKey="AYQHSUWJ8576";this.cssStyle=null;this.cssUrl=d.rater.cssUrl;this.extraBRType=null;this.defaultRecNumber=4;this.sameSourceVisible=false;this.showOriginalUrl=true;this.addNofollow=d.rater.recommendations.rel.REL_ADS;this.openNewTab=false;this.recsTrancateLimit=null;this.sourceNameAfter=true;this.recsTrancateEllipsis="&hellip;";this.externalBlogElementId="outbrain_ext_element";
this.recsTarget="_self";this.userClear=this.noBullets=this.noRecsBorder=false;this.sameSrcLoctionString=null;this.locationString=' <span class="rec-src-link">($SOURCE_NAME)</span>';this.displaySameSiteTitle=true;this.postRecsHtml=this.preRecsHtml="";this.widgetHookId=null;this.videoIconUrl="default|5|5";this.videoIconPosition="5x5";this.youMightLikeString=null;this.langJs=d.language.url;this.eagerOdbCalls=this.lang_override=null;this.recMode="rec";this.raterMode="none";this.displayMode=null;this.adMarkingOnTop=
this.isAdsIcon=true;this.hookId=null;this.filterRegRecs=false;this.imagePadding=null;this.isPaidLabel=true;this.stripFlavor=outbrain_settings.Enums.StripFlavors.COLS;this.flyCardProp=this.stripItemWidth=null;this.whatIsLabel="[?]";this.whatIsType=outbrain_settings.whatIs.type.POP;this.whatIsPosition=outbrain_settings.whatIs.position.BOTTOM;this.balloonText="";this.mpFetchMode=null;this.mpLocationString="($RATED_X_BY_1_OR_Y)"};this.get=function(b,a,c){return OB_widgetObjArray[b].getSetting(a,c)};this.getNum=
function(b,a,c){b=OB_widgetObjArray[b].getSetting(a,c);return isNaN(b)?typeof c=="number"?c:b:Number(b)};this.set=function(b,a,c){OB_widgetObjArray[b].setSetting(a,c)}});var outbrain_resources_manager=typeof outbrain_resources_manager!="undefined"?outbrain_resources_manager:new (function(){var d=this;this.resources={};this.isKey=function(b){if(typeof d.resources[b]!="undefined")return true;return false};this.isKeyReady=function(b){if(typeof d.resources[b]!="undefined"&&d.resources[b]==true)return true;return false};this.isKeyPending=function(b){if(typeof d.resources[b]!="undefined"&&d.resources[b]==false)return true;return false};this.callResource=function(b,a){if(!d.isKey(b)){d.resources[b]=
false;typeof a=="function"&&a(b);return false}return true};this.readyResource=function(b){d.resources[b]=true}}),outbrain_globals=new (function(){this.$=function(d){return document.getElementById(d)};this.trim=function(d){return d.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};this.isObject=function(d){return typeof d=="object"};this.isArray=function(d){return this.isObject(d)&&d.constructor==Array};this.getDateFromPubDate=function(d){if(d==null)return null;try{var b=d.match(/(\d\d\d\d)-(\d\d)-(\d\d)\s(\d\d):(\d\d)/);
if(b==null||b.length!=6)return null}catch(a){return null}d=parseInt(b[1],10);var c=parseInt(b[2],10)-1,e=parseInt(b[3],10),f=parseInt(b[4],10);b=parseInt(b[5],10);var g=new Date;g.setDate(e);g.setMonth(c);g.setFullYear(d);g.setHours(f);g.setMinutes(b);return g};this.zeroFill=function(d,b){b-=d.toString().length;return b>0?(new Array(b+(/\./.test(d)?2:1))).join("0")+d:d}}),outbrain_timeout=function(d,b,a,c,e,f,g,i){var j=this,k=0;this.start=function(){k++;if(d(k))b(k);else if(typeof i=="function"&&
i(k)||k==f&&f!=1E3)typeof c=="function"&&c(k);else{typeof a=="function"&&a(k);g?setTimeout(function(){j.start()},e):setTimeout(function(){j.start()},k*e)}};this.start()},outbrain_odb_life_object=typeof outbrain_odb_life_object=="function"?outbrain_odb_life_object:function(d,b,a){this.STAT_OK=1;this.STAT_NO_LOAD_EVENT=2;this.STAT_TIME_ELAPSED=3;this.odbLife=false;this.frameSrc=b;this.frameId=a;this.timeDiff=this.finishTime=this.startTime=null;this.maxOkTimeDiff=d;this.noResponseTimeout=this.responseTimeout=
null;outbrain_log.addSign(0,"Start ping","strtPng");this.staticMode=typeof OB_odb_static_mode=="boolean"?OB_odb_static_mode:false;var c=this;this.init=function(){if(typeof OB_disable_odbl=="boolean"&&OB_disable_odbl==true||typeof OB_disable_odbl_ie6=="boolean"&&OB_disable_odbl_ie6==true&&(outbrain_browsers.ie5||outbrain_browsers.ie55||outbrain_browsers.ie6))this.odbLife=true;else{this.addRandomNumber();this.insert("<iframe id="+this.frameId+" src='about:blank' frameBorder='0' name='odbFrame' style='width:0px;height:0px;display:none;'></iframe>");
c.staticMode||this.start()}};this.addRandomNumber=function(){var e=this.frameSrc.indexOf("?"),f="random="+Math.random();this.frameSrc+=e>-1?"&"+f:"?"+f};this.getIframeElement=function(){return document.getElementById(this.frameId)};this.getWindowName=function(){if(outbrain_settings.windowName==null){for(var e="",f=0;f<8;f++){var g=Math.floor(Math.random()*61);e+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(g,g+1)}if(typeof window.name=="string"&&(window.name==""||window.name.indexOf("frame")>
-1)){window.name=e;outbrain_settings.rater.windowName=window.name}else outbrain_settings.rater.windowName=typeof window.name=="string"&&window.name!=""?window.name:e}};this.insert=function(e){if(typeof outbrain_dom=="object"&&typeof outbrain_dom.documentWrite=="function")outbrain_dom.documentWrite(e);else typeof OB_isLateStarter=="boolean"&&OB_isLateStarter==true||(document.readyState!="complete"?document.write(e):outbrain_error_manager.addError(1100,"Document.write after page load!",outbrain_error_manager.FATAL))};
this.redirect=function(e){if(c.getIframeElement()){this.startTime=new Date;window.frames.odbFrame.location.replace(e)}};this.start=function(){var e=c.getIframeElement();if(e){if(document.addEventListener)e.addEventListener("load",function(){c.frameReady()},false);else if(document.attachEvent)e.attachEvent("onload",function(){c.frameReady()});else if(document.getElementById)e.onload=function(){c.frameReady()};c.redirect(c.frameSrc);this.noResponseTimeout=setTimeout(function(){c.noResponseAfterMaxTime()},
c.maxOkTimeDiff*1E3)}else this.responseTimeout=setTimeout(c.start,1E3)};this.frameReady=function(){outbrain_log.addSign(0,"End ping","endPng");this.finishTime=new Date;clearTimeout(this.noResponseTimeout);this.getTimeDiff();this.odbLife=true};this.noResponseAfterMaxTime=function(){clearTimeout(this.responseTimeout);this.removeFrame()};this.getTimeDiff=function(){this.timeDiff=(this.finishTime.getTime()-this.startTime.getTime())/1E3};this.removeFrame=function(){var e=this.getIframeElement();if(e){window.frames.odbFrame.location.replace("about:blank");
e.parentNode.removeChild(e)}};this.getStatus=function(){var e=this.STAT_OK;if(!c.staticMode)if(this.odbLife){if(this.timeDiff>this.maxOkTimeDiff)e=this.STAT_TIME_ELAPSED}else e=this.STAT_NO_LOAD_EVENT;return e};this.init()},outbrain_dom_object=typeof outbrain_dom_object=="function"?outbrain_dom_object:function(){this.$=function(d){return document.getElementById(d)};this.elementInsertion=function(d,b,a,c){if(typeof b=="string"){var e=document.createElement("div");e.innerHTML=b;b=e.firstChild}b=a==
true?c?this.insertBefore(b,d.firstChild):this.insertBefore(b,d):c?this.insertInside(b,d):this.insertAfter(b,d);return[b,d]};this.insertBefore=function(d,b){return b.parentNode.insertBefore(d,b)};this.insertInside=function(d,b){return b.appendChild(d)};this.extractFooter=function(d,b){var a=null;if(typeof d=="undefined")return null;d=d.getElementsByTagName("DIV");for(var c=0;c<d.length;c++){var e=d[c];if(e.className==b)a=e}return a};this.truncateBySize=function(d,b,a){if(typeof b!=="number")if(typeof d!==
"string")return"N/A";if(d.length<=b||typeof b!=="number")return d;a=typeof a!=="string"?"...":a;d=d.substring(0,b-a.length);b=-1;b=d.lastIndexOf(" ")>b?d.lastIndexOf(" "):b;b=d.lastIndexOf(",")>b?d.lastIndexOf(","):b;b=d.lastIndexOf(".")>b?d.lastIndexOf("."):b;d=b>0?d.substring(0,b):d;a=typeof a!=="string"?"...":a;return d+a};this.uncleFinder=function(d){try{for(d=d.parentNode;typeof d!=null;){if(typeof d.nextSibling!=null)return true;d=d.parentNode}return false}catch(b){return false}};this.insertAfter=
function(d,b){var a=null,c=outbrain_rater.pmd;if(outbrain_settings.platformType==outbrain_settings.PLATFORM_TYPE_BLOGGER_SIDEBAR&&outbrain_browsers.ie==true){if(c.postFooterDivClassname!=null)for(var e=0;e<c.postFooterDivClassname.length;e++)if(this.extractFooter(b.parentNode,c.postFooterDivClassname[e])!=null||this.uncleFinder(b)){try{a=b.parentNode.insertBefore(d,b.nextSibling)}catch(f){try{a=b.nextSibling.parentNode.insertBefore(d,b.nextSibling)}catch(g){a=null}}break}}else a=b.parentNode.insertBefore(d,
b.nextSibling);return a};this.isBlogger=function(){if(outbrain_settings.isBlogger!==null)return outbrain_settings.isBlogger;for(var d=false,b=document.getElementsByTagName("meta"),a=0;a<b.length&&!d;++a){currEle=b[a];if(currEle.name!=null&&currEle.name=="generator"&&currEle.content=="blogger"){outbrain_log.addSign(-1,"Blogger Generator detected","");d=outbrain_settings.isBlogger=true}}return d};this.getLocalUrl=function(){var d=null;d=this.getFullUrlFromAttributes("property","og:url","meta",false,
"content");if(d===null)d=this.getFullUrlFromAttributes("rel","canonical","link",false,"href");if(d===null)d=location.href;return d};this.getFullUrlFromAttributes=function(d,b,a,c,e){var f=null;d=this.getElementsByAttribute(d,b,a,c);if(d!=null&&d.length>0)f=d[0].getAttribute(e);return f};this.setInnerHTML=function(d,b){try{d.innerHTML=b}catch(a){var c=d.cloneNode(false);c.innerHTML=b;d.parentNode.replaceChild(c,d)}};this.extractFeedUrl=function(){if(typeof OB_MP_feed=="string")return OB_MP_feed;var d=
document.getElementsByTagName("head"),b=null;if(d&&d.length>0){d=d[0].getElementsByTagName("link");for(var a=null,c=0;c<d.length&&b==null;++c){a=d[c];if(a.type!=null&&(a.type=="application/rss+xml"||a.type=="application/atom+xml")&&a.href!=null&&a.href!="")b=a.href}}return b};this.insertElementToHead=function(d){var b=document.getElementsByTagName("head");if(b&&b.length>0){b[0].insertBefore(d,b[0].firstChild);return true}return false};this.insertScriptToHead=function(d,b){if(this.insertElementToHead(this.getScriptElement(d,
b)))return true;return false};this.getScriptElement=function(d,b){var a=document.createElement("script");typeof b!="string"&&a.setAttribute("id",b);a.setAttribute("type",outbrain_settings.globals.scriptType);a.setAttribute("async","async");a.setAttribute("src",d);return a};this.getElementsByAttribute=function(d,b,a,c){a=a||"*";c=!!c;var e=[];a=document.getElementsByTagName(a);for(var f=0;f<a.length;f++){var g=d==="class"?a[f].className:a[f].getAttribute(d);(c?g.indexOf(b)>-1:g===b)&&e.push(a[f])}return e};
this.getFirstClassByName=function(d){d=this.getElementsByAttribute("class",d,null,false);return d.length>0?d[0]:null};this.documentWriteScript=function(d,b){if(typeof OB_isLateStarter=="boolean"&&OB_isLateStarter==true)if(typeof OB_containerClass=="string"){var a=this.getFirstClassByName(OB_containerClass);a&&this.insertBefore(this.getScriptElement(d,b),a)}else this.insertScriptToHead(d,b);else document.readyState!="complete"?document.write(d):outbrain_error_manager.addError(1100,"Document.write after page load!",
outbrain_error_manager.FATAL)};this.strToElement=function(d){try{var b=document.createElement("span");b.innerHTML=d;return b.firstChild}catch(a){return null}};this.docCompleated=function(){return document.readyState!="complete"};this.documentWrite=function(d){if(typeof OB_isLateStarter=="boolean"&&OB_isLateStarter==true)if(typeof OB_containerClass=="string"){var b=this.getFirstClassByName(OB_containerClass);if(b!=null)(d=this.strToElement(d))&&this.insertBefore(d,b)}else(d=this.strToElement(d))&&
this.insertElementToHead(d);else document.readyState!="complete"?document.write(d):outbrain_error_manager.addError(1100,"Document.write after page load!",outbrain_error_manager.FATAL)}};var OB_lang_object=function(){this.isInit=false;this.id="EN";this.name="LANGUAGE_NAME";this.RATE_POST_RATE_FOR_RECOMMENDATIONS=["You might also like:"];this.WHATS_THIS="WHATS_THIS";this.THIS_SITE="THIS_SITE";this.MOST_POPULAR="Most_Popular_Posts";this.MIGHT_ALSO_LIKE="You might also like";this.MORE_RECOMMENDED_SINGLE="MORE_RECOMMENDED_SINGLE";this.MORE_RECOMMENDED_PLURAL="MORE_RECOMMENDED_POSTS";this.MORE_RECOMMENDED_CLOSE_SINGLE="HIDE_MORE_RECOMMENDED_POST";this.MORE_RECOMMENDED_CLOSE_PLURAL="HIDE_MORE_RECOMMENDED_POSTS";
this.PI_LEGEND_TITLE=this.PC_LEGEND_TITLE="Selected for you by our sponsor";this.SPONSORED_LINK_IMAGE="Paid Distribution";this.SPONSORED_LINK_TITLE="From around the web";this.COMMENT="COMMENT";this.IS_RTL=false;this.OPTIONAL_ADDONS=new function(){this.thumbs=this.pc=this.disqus=this.recommendations=this.mostPopular=false};this.initLang=function(d){this.id=typeof d.id!="undefined"&&d.id!=null?d.id:"en";this.name=typeof d.name!="undefined"&&d.name!=null?d.name:"en";this.initStr(d,"MIGHT_ALSO_LIKE");
this.initStr(d,"PC_LEGEND_TITLE");this.initStr(d,"PI_LEGEND_TITLE");this.initStr(d,"SPONSORED_LINK_IMAGE");this.initStr(d,"SPONSORED_LINK_TITLE");this.initStr(d,"UNABLE_TO_SUBMIT_STR");this.initStr(d,"HOW");this.initStr(d,"WHATS_THIS");this.initStr(d,"BY");this.initStr(d,"THIS_SITE");this.initStr(d,"MOST_POPULAR");if(d.RATE_POST_RATE_FOR_RECOMMENDATIONS)for(var b=0;b<this.RATE_POST_RATE_FOR_RECOMMENDATIONS.length;b++)if(d.RATE_POST_RATE_FOR_RECOMMENDATIONS[b]!=null)this.RATE_POST_RATE_FOR_RECOMMENDATIONS[b]=
d.RATE_POST_RATE_FOR_RECOMMENDATIONS[b];if(typeof d.COMMENT!="undefined")this.COMMENT=d.COMMENT;if(typeof d.IS_RTL=="boolean")this.IS_RTL=d.IS_RTL;if(typeof d.OPTIONAL_ADDONS!="undefined"){if(typeof d.OPTIONAL_ADDONS.mostPopular=="boolean")this.OPTIONAL_ADDONS.mostPopular=d.OPTIONAL_ADDONS.mostPopular;if(typeof d.OPTIONAL_ADDONS.recommendations=="boolean")this.OPTIONAL_ADDONS.recommendations=d.OPTIONAL_ADDONS.recommendations;if(typeof d.OPTIONAL_ADDONS.disqus=="boolean")this.OPTIONAL_ADDONS.disqus=
d.OPTIONAL_ADDONS.disqus;if(typeof d.OPTIONAL_ADDONS.pc=="boolean")this.OPTIONAL_ADDONS.pc=d.OPTIONAL_ADDONS.pc;if(typeof d.OPTIONAL_ADDONS.thumbs=="boolean")this.OPTIONAL_ADDONS.thumbs=d.OPTIONAL_ADDONS.thumbs}this.isInit=true};this.initStr=function(d,b){if(typeof d[b]!="undefined"&&d[b]!=null){this[b]=d[b];return true}return false}},outbrain_language_manager_object=function(){this.languages_list={};var d=this;this.addLanguage=function(b,a){var c=outbrain_settings.language.id;a+="?v="+outbrain_settings.versions.language;
var e=document.createElement("script");e.setAttribute("id",c+"_"+b);e.setAttribute("type",outbrain_settings.globals.scriptType);e.setAttribute("src",a);e.setAttribute("async","async");e.setAttribute("charset","utf-8");b=document.getElementsByTagName("head");b.length>0?b[0].appendChild(e):outbrain_dom.documentWrite('<script id="'+c+'" src="'+a+'" type="'+outbrain_settings.globals.scriptType+'" charset="utf-8" async="async"><\/script>')};this.loadLanguagePerWidget=function(b){b=outbrain_settings.get(b,
"langJs",outbrain_settings.language.url);if(b===outbrain_settings.language.url){outbrain_settings.language.defaultLangName="en";outbrain_resources_manager.readyResource(outbrain_settings.language.defaultLangName);this.initLang(OB_language_en);this.initLanguageForAllWidgets()}else if(outbrain_resources_manager.isKey(outbrain_settings.language.defaultLangName))this.initLanguageForAllWidgets();else{outbrain_language_manager.addLanguage(outbrain_settings.language.defaultLangName,b);outbrain_resources_manager.callResource(outbrain_settings.language.defaultLangName,
null)}};this.initLanguageForAllWidgets=function(){for(var b=0;b<OB_widgetObjArray.length;b++)if(OB_widgetObjArray[b].language==null)if(outbrain_resources_manager.isKeyReady(outbrain_settings.language.defaultLangName)){var a=this.languages_list[outbrain_settings.language.defaultLangName];OB_widgetObjArray[b].language=new OB_lang_object;OB_widgetObjArray[b].language.initLang(a);this.langOverride(b)}};this.langOverride=function(b){var a=outbrain_settings.get(b,"lang_override");typeof a!="undefined"&&
a!=null&&d.isInit(b)&&OB_widgetObjArray[b].language.initLang(a)};this.initLang=function(b){b.id=outbrain_settings.language.defaultLangName;this.languages_list[b.id]=b};this.isLanguageReady=function(b){return this.isInit(b)};this.isInit=function(b){return typeof OB_widgetObjArray[b].language!="undefined"&&OB_widgetObjArray[b].language!=null&&typeof OB_widgetObjArray[b].language.isInit!="undefined"&&OB_widgetObjArray[b].language.isInit};this.getName=function(b){return OB_widgetObjArray[b].language.name};
this.isRtl=function(b){return OB_widgetObjArray[b].language.IS_RTL};this.getSponsoredLinkImage=function(b){return OB_widgetObjArray[b].language.SPONSORED_LINK_IMAGE};this.getSponsoredLinkTitle=function(b){return OB_widgetObjArray[b].language.SPONSORED_LINK_TITLE};this.getRatePostRateForRecommendations=function(b,a){return OB_widgetObjArray[b].language.RATE_POST_RATE_FOR_RECOMMENDATIONS[a]};this.getYouMightAlsoLike=function(b){return OB_widgetObjArray[b].language.RATE_POST_RATE_FOR_RECOMMENDATIONS[0]};
this.getUnableToSubmitString=function(b){return OB_widgetObjArray[b].language.UNABLE_TO_SUBMIT_STR};this.getByString=function(b){return OB_widgetObjArray[b].language.BY};this.getThisSiteString=function(b){return OB_widgetObjArray[b].language.THIS_SITE};this.whatsThis=function(b){return OB_widgetObjArray[b].language.WHATS_THIS};this.getMoreRecommendedLinkText=function(b,a){var c="";c=(a==1?OB_widgetObjArray[b].language.MORE_RECOMMENDED_SINGLE:OB_widgetObjArray[b].language.MORE_RECOMMENDED_PLURAL)+
" &raquo;";return c=c.replace(/{N}/g,a)};this.getPcLegendText=function(b,a){b=OB_widgetObjArray[b].language.PC_LEGEND_TITLE;if(a!=null&&typeof a=="string"&&a.length>0)b=b.replace(/{PC}/g,a);return b};this.getPiLegendText=function(b,a){b=OB_widgetObjArray[b].language.PI_LEGEND_TITLE;if(a!=null&&typeof a=="string"&&a.length>0)b=b.replace(/{PC}/g,a);return b};this.getMoreRecommendedCloseLinkTest=function(b,a){var c="";c="&laquo; "+(a==1?OB_widgetObjArray[b].language.MORE_RECOMMENDED_CLOSE_SINGLE:OB_widgetObjArray[b].language.MORE_RECOMMENDED_CLOSE_PLURAL);
return c=c.replace(/{N}/g,a)};this.GetMostPopular=function(b){return OB_widgetObjArray[b].language.MOST_POPULAR};this.isMostPopularAvailable=function(b){return OB_widgetObjArray[b].language.OPTIONAL_ADDONS.mostPopular};this.isRecommendationsAvailable=function(b){return OB_widgetObjArray[b].language.OPTIONAL_ADDONS.recommendations}},OB_lang=typeof OB_lang=="object"?OB_lang:new (function(){this.initLang=function(d){outbrain_language_manager.initLang(d);outbrain_resources_manager.readyResource(outbrain_settings.language.defaultLangName);
outbrain_language_manager.initLanguageForAllWidgets()}});var OB_widgetObjArray=typeof OB_widgetObjArray!="undefined"?OB_widgetObjArray:[],outbrain_log=typeof outbrain_log=="object"?outbrain_log:new (function(){var d=typeof d=="object"?d:[],b=typeof b=="object"?b:[];this.addSign=function(a,c,e){if(!(b.length>1E3)){var f=((new Date).getTime()-ObStartTime)/1E3;if(a===0){b.push(e);b.push(f)}d.push(">"+c+"("+f+") <br>")}};this.printSigns=function(){var a=document.getElementById("outbrainCurrentPosition");if(a)a.innerHTML=d.join("");return d.join("")};this.getMiniSigns=
function(){return b.join("|")}}),printSigns=function(){return outbrain_log.printSigns()},outbrain_error_manager_object=typeof outbrain_error_manager_object=="function"?outbrain_error_manager_object:function(){var d=this;this.isAlreadySent=false;this.errorList=[];this.init=function(){new outbrain_timeout(function(){return d.checkIsError()},function(){d.sendError()},null,null,1E4,8,true)};this.isPassFilterError=function(b){var a=true;if(outbrain_settings.blogUtils.blogHrefLocation.toLowerCase().indexOf("search")>
0)a=false;if(outbrain_settings.blogUtils.blogHrefLocation.toLowerCase().indexOf("translate")>0)a=false;if(outbrain_settings.blogUtils.blogHrefLocation.toLowerCase().indexOf("archives.html")>0)a=false;if(outbrain_settings.blogUtils.blogHrefLocation.toLowerCase().indexOf("archive.html")>0)a=false;if(typeof OB_error_level=="number"&&OB_error_level>b)a=false;return a};this.addError=function(b,a,c){if(this.isPassFilterError(c))this.errorList[this.errorList.length]=new this.error_obj(b,a,c);typeof OB_error_output==
"string"&&OB_error_output=="console"&&console.log(this.getErrorString(c)+":"+a)};this.checkIsError=function(){if(d.errorList.length==0)return false;return true};this.sendError=function(){if(!d.isAlreadySent){d.isAlreadySent=true;for(var b=null,a=0;a<d.errorList.length;a++)if(d.errorList[a].error_severity>0)b=this.errorList[a];b&&d.createErrorRequest(b)}};this.whatBroswer=function(){};this.createErrorRequest=function(b){if(b!=null){outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$ERROR_CODE/g,
b.error_id);outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$ERROR_DESC/g,encodeURIComponent(b.error_desc));outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$ERROR_SEVERITY/g,b.error_severity);outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$ERROR_TEMPLATE/g,b.error_tmpl);outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$ERROR_BROSWER/g,
outbrain_browsers.agt);outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$ERROR_OS/g,outbrain_browsers.os);outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$ERROR_SOURCE/g,outbrain_settings.blogUtils.sourceId);outbrain_settings.blogUtils.errorManager=outbrain_settings.blogUtils.errorManager.replace(/\$LOCAL_URL/g,outbrain_settings.blogUtils.blogHrefLocation);d.addErrorRequest(outbrain_settings.blogUtils.errorManager)}};
this.addErrorRequest=function(b){var a=document.createElement("script");a.setAttribute("id","OBErrorCall");a.setAttribute("type","text/javascript");a.setAttribute("src",b);a.setAttribute("async","async");b=document.getElementsByTagName("head");b.length>0&&b[0].insertBefore(a,b[0].firstChild)};this.error_obj=function(b,a,c){this.error_id=b;this.error_desc=a;this.error_severity=c;this.error_tmpl=typeof OB_Template=="string"?OB_Template:"NA"};this.getErrorString=function(b){switch(b){case 1:return"Debug";
case 2:return"Error";case 3:return"Fatal";default:return"unknown"}};this.DEBUG=1;this.ERROR=2;this.FATAL=3;this.init()},outbrain=typeof outbrain=="object"?outbrain:new (function(){this.returnedError=function(){outbrain_log.addSign(0,"Error code returned","errCalBk")}}),outbrain_PositionCalc=function(){this.bottomThreshold=this.topThreshold=0;this.isSerial=false;this.vpHeight=this.topY=0;this.setSerialMode=function(d){this.isSerial=d};this.reCalc=function(){this.topY=this.getTopY();this.vpHeight=this.getViewportHeight()};
this.getTopY=function(){var d;try{if(typeof window.pageYOffset!="undefined")d=window.pageYOffset;d=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}catch(b){return outbrain_settings.odb.ERRED}return d};this.getElementY=function(d){var b=0;try{if(typeof d=="undefined")return outbrain_settings.odb.ERRED;if(d.offsetParent)for(;;){b+=d.offsetTop;if(typeof d.offsetParent==null)return outbrain_settings.odb.ERRED;if(!d.offsetParent)break;d=d.offsetParent}else if(d.y)b+=
d.y}catch(a){outbrain_log.addSign(0,"obj has exception","");return outbrain_settings.odb.ERRED}return b};this.getDocumentHeight=function(){var d=document;return Math.max(Math.max(d.body.scrollHeight,d.documentElement.scrollHeight),Math.max(d.body.offsetHeight,d.documentElement.offsetHeight),Math.max(d.body.clientHeight,d.documentElement.clientHeight))};this.getViewportHeight=function(){try{var d=null;d=typeof window.innerWidth!="undefined"?window.innerHeight:typeof document.documentElement!="undefined"&&
typeof document.documentElement.clientHeight!="undefined"&&document.documentElement.clientHeight!=0?document.documentElement.clientHeight:document.getElementsByTagName("body")[0].clientHeight}catch(b){return outbrain_settings.odb.ERRED}return d};this.checkIfElementInViewPort=function(d){if(d==null)return outbrain_settings.odb.OUTSIDEFOLD;d=this.getElementY(d);var b=this.topY,a=this.vpHeight,c=parseInt(a+b);return d==outbrain_settings.odb.ERRED||b==outbrain_settings.odb.ERRED||a==outbrain_settings.odb.ERRED?
outbrain_settings.odb.ERRED:c>=d&&(b<d||this.isSerial)?outbrain_settings.odb.INSIDEFOLD:parseInt(c+this.bottomThreshold)>=d&&(b-this.topThreshold<d||this.isSerial)?outbrain_settings.odb.NEARFOLD:outbrain_settings.odb.OUTSIDEFOLD}},outbrain_template_object=typeof outbrain_template_object=="function"?outbrain_template_object:function(d){var b=this;this.templateName=d;this.templateHaveImages=this.templateHaveOdbAndLang=this.templateReplacedOnce=this.templateArrayInit=this.ready=false;this.languageName=
outbrain_settings.language.defaultLangName;this.dom=new outbrain_dom_object;this.positionFirstLine=this.positionSecondLine=true;this.positionDynSecondLine=false;this.positionsStars=this.positionRec=true;this.all_optional_elements=outbrain_settings.templateOptions;this.all_user_elements=[];this.top=false;this.position="bottom";this.inside=false;this.constants=this.templateDOM=null;this.smallImageSufix="png";this.rateYarray=[];this.lastRate=-1;this.matrixImage=null;this.isMatrixReady=false;this.mouseOutTimer=
null;this.isPcHidden=false;this.pluginsArray=[];this.closeInTooltip="<div class=outbrain_tooltip_close><img alt='Close' width='13' height='13' src='"+outbrain_settings.domains.images+"spacer.gif' onclick='javascript:UnTip()'/></div>";this.txtInTooltip='<span class="outbrain-tooltip-content">$BALLOON_TEXT</span>';this.showBalloon=true;this.waitImageUrl=outbrain_settings.domains.images+"/spinner-gray.gif";this.waitBackgroundClass="outbrain_waiting_background";this.cancelRecommendationId="CancelRecommendation";
this.isOwnerNotLoading=true;this.createInfoIcon=function(a,c,e,f,g,i,j,k){c="background:transparent url("+outbrain_settings.domains.images+"outbrain_info."+(b.fixPngOnThisBrowser()?"gif":"png")+") no-repeat scroll 0 0;width:"+c+"px;height:"+e+"px;vertical-align:middle;padding:0;-moz-box-shadow:none;";i=i?' onClick="javascript:'+this.callForToolTip(a,"this",true)+'"':"";return"<img border='0' "+(a!=null&&!a.isNaN&&k?'id="outbrain_toolTip_img_'+a+'"':"")+" src='"+outbrain_settings.domains.images+"spacer.gif' class='"+
f+"' "+(j?" onmouseout=\"this.className='"+f+"'\" onmouseover=\"this.className='"+g+"'\"":"")+" "+i+" style='"+c+"'>"};this.getElementWithFullName=function(a,c){return this.dom.$(a+"_"+c+"_"+this.templateName)};this.fixPngOnThisBrowser=function(){return outbrain_browsers.ie5||outbrain_browsers.ie55||outbrain_browsers.ie6};this.isSomeSecondLine=function(){return this.positionSecondLine};this.isDynSecondLine=function(){return this.positionDynSecondLine};this.toggleMoreRecommendations=function(a){var c=
this.getElementWithFullName(this.constants.recommendationsMoreDivId,a).getElementsByTagName("a")[0],e=this.getElementWithFullName(this.constants.recommendationsUlId,a),f=e.getElementsByTagName("li"),g=outbrain_settings.getNum(a,"defaultRecNumber"),i=f.length;if(typeof e.opened=="boolean"&&e.opened){for(var j=g;j<i;j++)f[j].style.display="none";e.opened=false;b.dom.setInnerHTML(c,outbrain_language_manager.getMoreRecommendedLinkText(a,i-g));this.pcVisibilty(a,"none")}else{c.onclick=function(){b.toggleMoreRecommendations(a)};
for(j=g;j<i;j++)f[j].style.display="";e.opened=true;b.dom.setInnerHTML(c,outbrain_language_manager.getMoreRecommendedCloseLinkTest(a,i-g));this.pcVisibilty(a,"block")}this.checkBottomTableWrapper(a)};this.pcVisibilty=function(a,c){var e=this.getElementWithFullName(this.constants.recommendationsPcLegendId,a);if(typeof OB_widgetObjArray[a].isPcHidden=="boolean"&&OB_widgetObjArray[a].isPcHidden&&e!=null)e.style.display=c=="none"?"none":"block"};this.checkBottomTableWrapper=function(a){var c=this.getElementWithFullName(this.constants.recommendationsPcLegendId,
a),e=this.getElementWithFullName(this.constants.recommendationsMoreDivId,a);a=this.getElementWithFullName(this.constants.recommStatusTableId,a);if(c!=null&&e!=null&&a!=null)a.style.display=c.style.display!="none"||e.style.display!="none"?"":"none"};this.textForToolTip=function(a){var c=this.closeInTooltip,e=this.txtInTooltip,f=outbrain_settings.get(a,"balloonText","");if(f.length<=0){f="<b>Paid Distribution</b><br><br>An Outbrain customer paid to distribute this content. ";f+="We do our best to ensure that all of the links recommended to you lead to interesting content. To find out more information about driving traffic to your content or to place this widget on your site, ";
f+="visit <a href='http://outbrain.com/?utm_source=widget&utm_medium=whatsthis&utm_campaign=vistlink' target='_blank'>outbrain.com</a>. ";f+="We welcome your feedback at <a href='mailto:feedback@outbrain.com'>feedback@outbrain.com</a>.";f+="View our <a href='http://www.outbrain.com/privacy?utm_source=widget&utm_medium=whatsthis&utm_campaign=privacy' target='_blank'>privacy policy here."}a=this.createInfoIcon(a,16,16,"ob_bigInfo_off","ob_bigInfo_off",false,false,false);e=e.replace(/\$ICON/g,a);e=e.replace(/\$BALLOON_TEXT/g,
f);return c+e};this.callForToolTip=function(a,c,e){if(c!="this")c="'"+c+"'";var f="outbrain_template_manager.templates['"+this.templateName+"'].unTip();";f+="outbrain_template_manager.templates['"+this.templateName+"'].tip("+a+","+c+","+(e?-20:-378)+","+(e?15:370)+")";return f};this.unTip=function(){try{UnTip()}catch(a){return false}};this.tip=function(a,c,e,f){outbrain_rater.loadToolTip(a);try{var g=this.textForToolTip(a);new outbrain_timeout(function(){return typeof Tip=="function"},function(){Tip(g,
BALLOON,true,ABOVE,true,WIDTH,390,FIX,[c,e,-7],EXCLUSIVE,true,BALLOONSTEMOFFSET,f)},null,null,1E3,20,true)}catch(i){return false}};this.createLinkOfPC=function(a,c,e){var f=this.createInfoIcon(a,14,14,"ob_smallInfo_off","ob_smallInfo_on",true,true,true),g="outbrain_toolTip_img_"+a,i=this.callForToolTip(a,g,true),j="";g='<a href="javascript:void(0)" onmouseout="javascript:document.getElementById(\''+g+"').className='ob_smallInfo_off'\" onmouseover=\"javascript:document.getElementById('"+g+"').className='ob_smallInfo_on'\" onClick=\"javascript:"+
i+'">';j=e!=null&&e==2&&typeof outbrain_language_manager.getPiLegendText=="function"?outbrain_language_manager.getPiLegendText(a,c):outbrain_language_manager.getPcLegendText(a,c);return j="("+g+j+"</a>&nbsp;"+f+")"};this.createRecommendationLi=function(a,c,e,f,g){var i=g.postLink,j=g.linkText,k=g.sourceName,m=g.pubDate,l=g.isSameSource,n=g.isAdId,o=g.bocr,y=g.origUrl,q=g.isVideo,r='target="_blank"',u=g.showLogo,v=g.campaignId,C=g.pcId,w=outbrain_settings.get(a,"displaySameSiteTitle"),s=outbrain_settings.get(a,
"openNewTab"),t=outbrain_settings.get(a,"addNofollow",outbrain_settings.rater.recommendations.rel.REL_ADS),z=outbrain_settings.get(a,"sameSourceVisible",false),A=outbrain_settings.get(a,"sourceNameAfter",true),D=outbrain_settings.get(a,"isAdsIcon"),B=outbrain_settings.get(a,"recsTarget","_self");g=outbrain_settings.get(a,"textualVideoIconUrl","http://widgets.outbrain.com/images/textualVideoIcon/video-icon.png");var p=outbrain_settings.get(a,"videoIconTextualPosition","Middle"),x=document.createElement("li");
x.className=n?this.constants.recommendationAdsLiClass:this.constants.recommendationLiClass;x.style.display=f?"":"none";f=typeof outbrain_settings.rater.recommendations.selfPost=="boolean"&&outbrain_settings.rater.recommendations.selfPost==true;r="_blank";if(!n&&!s)r=B;if(l&&w)k='<span style="font-weight:'+(!f&&e?"normal":"bold")+';">'+outbrain_language_manager.getThisSiteString(a)+"</span>";if(l&&!n&&!s)r=B;f=n&&this.showBalloon&&D==true?this.createInfoIcon(a,16,16,"ob_bigInfo_off","ob_bigInfo_on",
true,true,false)+" ":"";w="true";if(typeof o=="string"&&o.length>0&&typeof OB_user_mode=="number"&&OB_user_mode==1)w="outbrain_template_manager.templates['"+b.templateName+"'].checkWaitStatus()";s="";if(n&&typeof t=="string"&&(t==outbrain_settings.rater.recommendations.rel.REL_ALL||t==outbrain_settings.rater.recommendations.rel.REL_ADS))s="rel='nofollow'";if(!n&&typeof t=="string"&&(t==outbrain_settings.rater.recommendations.rel.REL_ALL||t==outbrain_settings.rater.recommendations.rel.REL_ORGANIC))s=
"rel='nofollow'";n="";if(q&&p===outbrain_settings.textualVideoPosition.BEGINNING)n+=b.createTextualVideoIcon(p).replace(/\$TEXTUAL_VIDEO_ICON/g,g);if(!A&&(!e||z==true)){n+=b.buildLocationString(a,k,l,m);if(q&&p===outbrain_settings.textualVideoPosition.MIDDLE)n+=b.createTextualVideoIcon(p).replace(/\$TEXTUAL_VIDEO_ICON/g,g)}n+=f+"<a "+s+' class="rec-link" target="'+r+'" href="'+y+'" onMouseDown="this.href=\''+i+'\';return true;" onClick="javascript:return('+w+')">'+j+"</a>";if(A&&(!e||z==true)){if(q&&
p===outbrain_settings.textualVideoPosition.MIDDLE)n+=b.createTextualVideoIcon(p).replace(/\$TEXTUAL_VIDEO_ICON/g,g);n+=b.buildLocationString(a,k,l,m)}if(u){e=b.createPopUpDescription().replace(/\$IDX/g,a).replace(/\$PCID/g,C).replace("$CAMPAIGNID",v);n+=e}if(q&&p===outbrain_settings.textualVideoPosition.END)n+=b.createTextualVideoIcon(p).replace(/\$TEXTUAL_VIDEO_ICON/g,g);if(typeof o=="string"&&o.length>0&&typeof OB_user_mode=="number"&&OB_user_mode==1)n+=b.renderRecCancelation(a,c,o);x.innerHTML=
n;return x};this.createPopUpDescription=function(){return"&nbsp<span class='ob_pdesc' style='cursor: pointer;'><img id='$IDX_$PCID' onClick='javascript:OBR.extern.showDescription($CAMPAIGNID,\"$IDX_$PCID\"); return false;' src='http://widgets.outbrain.com/images/descriptionIcons/descriptionInfoIcon.png'/></span>"};this.createTextualVideoIcon=function(a){var c="";if(a===outbrain_settings.textualVideoPosition.BEGINNING)c="<span class='ob_txtual_Icon' ><img class='textual-video-img'   src='$TEXTUAL_VIDEO_ICON' onError='this.style.display=\"none\"' /></span>&nbsp;";
if(a===outbrain_settings.textualVideoPosition.MIDDLE)c="&nbsp;<span class='ob_txtual_Icon' ><img class='textual-video-img'   src='$TEXTUAL_VIDEO_ICON' onError='this.style.display=\"none\"' /></span>&nbsp;";if(a===outbrain_settings.textualVideoPosition.END)c="&nbsp;<span class='ob_txtual_Icon' ><img class='textual-video-img'   src='$TEXTUAL_VIDEO_ICON' onError='this.style.display=\"none\"' /></span>";return c};this.buildLocationString=function(a,c,e,f){var g=outbrain_settings.get(a,"locationString");
if(e&&outbrain_settings.get(a,"sameSrcLoctionString",null)!=null)g=outbrain_settings.get(a,"sameSrcLoctionString");a=outbrain_globals.getDateFromPubDate(f);g=this.replaceDates(g,a);return g=g.replace("$SOURCE_NAME",c)};this.replaceDates=function(a,c){var e=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),f=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");if(c==null)return a.replace(/(\$YYYY|\$MMMM|\$MMM|\$MM|\$DDDD|\$DDD|\$DD|\$HH|\$NN|\$SS|\$AP)/g,
"");return a.replace(/(\$YYYY|\$MMMM|\$MMM|\$MM|\$DDDD|\$DDD|\$DD|\$HH|\$NN|\$SS|\$AP)/g,function(g){switch(g){case "$YYYY":return c.getFullYear();case "$MMMM":return e[c.getMonth()];case "$MMM":return e[c.getMonth()].substr(0,3);case "$MM":return outbrain_globals.zeroFill(c.getMonth()+1,2);case "$DDDD":return f[c.getDay()];case "$DDD":return f[c.getDay()].substr(0,3);case "$DD":return outbrain_globals.zeroFill(c.getDate(),2);case "$HH":return outbrain_globals.zeroFill((h=c.getHours()%12)?h:12,2);
case "$NN":return outbrain_globals.zeroFill(c.getMinutes(),2);case "$SS":return outbrain_globals.zeroFill(c.getSeconds(),2);case "$AP":return c.getHours()<12?"AM":"PM"}})};this.renderOneRecommendation=function(a,c,e,f,g,i){e=outbrain_template_manager.getRecommendationDataPerDoc(this.templateName,a,e,f);var j=e.linkText,k=e.sourceName,m=e.isSameSource;if(e.postLink==null||j==null||k==null||m==null)return false;if(c){recommendedLi=b.createRecommendationLi(a,f,g,i,e);c.appendChild(recommendedLi)}else return false};
this.recommendationsLegendUpdate=function(a,c){if(a=this.getElementWithFullName(this.constants.fieldsetId,a))if((a=a.getElementsByTagName("legend")[0])&&a.innerHTML!=c){a.className=this.constants.recommendationsLegendClass;b.dom.setInnerHTML(a,c)}};this.recommendationsShowBefore=function(a){var c=false;c=this.getElementWithFullName(this.constants.fieldsetId,a)?this.getElementWithFullName(this.constants.fieldsetId,a).style.display!="none":false;c==true&&typeof OB_user_mode=="number"&&OB_user_mode==
1&&this.removeWaitClock(a);return c};this.enableBlogExternalElements=function(a){var c=outbrain_settings.get(a,"externalBlogElementId"),e=document.getElementById(c);if(e)e.style.display="block";if(e=document.getElementById(c+"_"+a))e.style.display="block"};this.showRecommendations=function(a,c){var e=c.recTitle;c=c.jsonObj;if(!this.recommendationsShowBefore(a)&&this.positionRec){var f=this.getElementWithFullName(this.constants.recommendationsUlId,a);this.recommendationsLegendUpdate(a,e);e=outbrain_template_manager.isAllSameSource(c.response.documents);
var g=c.response.documents.doc.length,i=outbrain_settings.getNum(a,"defaultRecNumber");i=i<=g?i:g;var j=g-i,k=outbrain_template_manager.getRecommendationsPerDoc(outbrain_template_manager.DATA_REC_MIXED,c.response.documents.doc,null,null),m=f&&typeof f.opened=="boolean"&&f.opened==true;if(typeof OB_user_mode=="number"&&OB_user_mode==1){if(m)i=g;this.clearRecommendations(a,j)}for(var l=0;l<g;l++)this.renderOneRecommendation(a,f,k[l],l,e,l<i?true:false);this.checkIfMoreRecs(a,j,m);this.showHideRecsElements(a,
c);this.enableBlogExternalElements(a);this.checkBottomTableWrapper(a);outbrain_log.addSign(a,"Set recommendations for index:"+a,"recRdy")}else this.recommendationsLegendUpdate(a,e);OB_widgetObjArray[a].widgetWroteOnce=true};this.checkIfMoreRecs=function(a,c,e){if(c>0&&!e){c=outbrain_language_manager.getMoreRecommendedLinkText(a,c);if(currElement=this.getElementWithFullName(this.constants.recommendationsMoreDivId,a)){b.dom.setInnerHTML(currElement,"<a href='javascript:void(0);' onclick='outbrain_template_manager.templates[\""+
this.templateName+'"].toggleMoreRecommendations('+a+");'> "+c+"</a>");currElement.style.display="block"}}};this.showHideRecsElements=function(a,c){outbrain_settings.get(a,"isAdsIcon")==true&&this.setAdLegend(a,c);if(c=this.getElementWithFullName(this.constants.rateStatusInfoTableId,a))c.style.display="none";if(c=this.getElementWithFullName(this.constants.rateStatusInfoTdId,a))c.style.display="none";if(c=this.getElementWithFullName(this.constants.fieldsetId,a)){c.style.display="block";OB_widgetObjArray[a].hasRecommendations=
true}};this.setAdLegend=function(a,c){var e=this.getpcName(a,c.response.documents);c=this.getCampType(a,c.response.documents);if(e.length>0){e=this.createLinkOfPC(a,e,c);if(c=this.getElementWithFullName(this.constants.recommendationsPcLegendId,a)){b.dom.setInnerHTML(c,e);if(!(typeof OB_widgetObjArray[a].isPcHidden=="boolean"&&OB_widgetObjArray[a].isPcHidden))c.style.display="block"}}};this.getpcName=function(a,c){for(var e="",f=false,g=0;g<c.doc.length;g++)if(typeof c.doc[g].adv_name!="undefined"){e=
c.doc[g].adv_name;if(g>=outbrain_settings.getNum(a,"defaultRecNumber")&&!f)OB_widgetObjArray[a].isPcHidden=true;else f=true}return e};this.getCampType=function(a,c){for(var e=a=0;e<c.doc.length;e++)if(typeof c.doc[e].ct!="undefined")a=c.doc[e].ct;return a};this.clearRecommendations=function(a,c){var e=this.getElementWithFullName(this.constants.recommendationsUlId,a);if(e!=null)e.innerHTML="";a=this.getElementWithFullName(this.constants.recommendationsMoreDivId,a);if(a!=null&&c<1)a.innerHTML=""};this.firstLineTextReplacer=
function(){};this.setFirstLineInnerHTML=function(a,c){if(a=this.getElementWithFullName(this.constants.rateInfoDivId,a)){b.dom.setInnerHTML(a,c);return true}return false};this.updateRateInfo=function(a,c,e,f){c.rateInfo=c.rateInfo;if(f!=true){var g=this.getElementWithFullName(this.constants.voterDivName,a);if(g)if(outbrain_browsers.ie6||outbrain_browsers.ie55||outbrain_browsers.ie55)waitForCss=window.setInterval(function(){if(outbrain_resources_manager.isKeyReady(outbrain_settings.rater.cssUrl)){g.style.display=
"block";window.clearInterval(waitForCss)}},1);else g.style.display="block";if(this.recommendationsShowBefore(a))this.showRecommendations(a,c,e);else if(this.positionSecondLine){c=this.getElementWithFullName(this.constants.rateStatusInfoTdId,a);e=false;if(!c||c&&this.isDynSecondLineOff(a)){if(c)c.innerHTML=""}else e=outbrain_rater.lastOdbRotationReturnedItem<a?true:this.positionRec?typeof OB_widgetObjArray[a].jsonObj.response.documents!="undefined"&&typeof OB_widgetObjArray[a].jsonObj.response.documents.total_count!=
"undefined"&&OB_widgetObjArray[a].jsonObj.response.documents.total_count>0?false:true:true;e&&b.dom.setInnerHTML(c,"")}}};this.isDynSecondLineOff=function(a){return OB_widgetObjArray[a].SecLineOn};this.changeView=function(){};this.imageLoadEvent=function(){this.isMatrixReady=true};this.initTemplate=function(){this.templateArrayInit=true};this.supportRecommendations=function(){return true};this.buildDomMainWrapperStart=function(){return'<div id="$CONTAINER_DIV_ID_$INDEX_$TEMPLATE_NAME" class="$GLOBAL_CLASS" style="$DIV_WRAPPER_STYLE" >$upperBR<div class="$VOTER_DIV_CLASS" style="display:none;"  id="$VOTER_DIV_NAME_$INDEX_$TEMPLATE_NAME"  >'};
this.buildDomMainWrapperEnd=function(){return"</div>$lowerBR</div> "};this.buildDomStarsWrapperStart=function(){return""};this.buildDomStarsFixPng=function(){return""};this.buildDomStars=function(){return""};this.buildDomFirstPos=function(){return""};this.buildDomStarsWrapperEnd=function(){return""};this.buildDomSecondPos=function(){return'<table id="$RATE_STATUS_INFO_TABLE_ID_$INDEX_$TEMPLATE_NAME" class="table-css" cellspacing="0" cellpadding="0" border="0" style="$TABLE_STYLEwidth:100%;"><tbody class="$TBODY_CLASS" style="$TABLE_STYLEwidth:100%;"><tr style="$TABLE_STYLEwidth:auto;"><td id="$RATE_STATUS_INFO_TD_ID_$INDEX_$TEMPLATE_NAME" style="$TABLE_STYLEwidth:100%;" class="outbrain_my_rating"> </td></tr></tbody></table>'};
this.buildDomRecommendations=function(){return'<fieldset style="display:none;$FIELDSET_STYLE" id="$FIELDSET_ID_$INDEX_$TEMPLATE_NAME" class="$FIELDSET_CLASS" >      <div id="$RECOMMENDATIONS_WAIT_ID_outer_$INDEX" class="$RECOMMENDATIONS_WAIT_CLASS_outer" style="display:none;"><div class="$RECOMMENDATIONS_WAIT_CLASS_inner">               <p ><img style="border:0px !important"/></p>       </div></div>  <legend class="$RECOMMENDATIONS_LEGEND_CLASS"></legend>    <ul id="$RECOMMENDATIONS_UL_ID_$INDEX_$TEMPLATE_NAME" class="$RECOMMENDATIONS_UL_CLASS">    </ul></fieldset><table id="$RECOMMENDATIONS_STATUS_ID_$INDEX_$TEMPLATE_NAME" class="$RECOMMENDATIONS_STATUS_TABLE_CLASS" style="display:none;"><tr><td>  <div id="$RECOMMENDATIONS_PC_LEGEND_$INDEX_$TEMPLATE_NAME" class="$RECOMMENDATIONS_PC_LEGENED_CLS" style="display:none;"></div></td><td>  <div id="$RECOMMENDATIONS_MORE_DIV_ID_$INDEX_$TEMPLATE_NAME" class="$RECOMMENDATIONS_MORE_LINK_DIV_CLASS" style="display:none;"></div></td></tr></table>'};
this.buildDOMOnce=function(a){if(this.templateArrayInit){this.templateDOM="";this.templateDOM+=this.buildDomMainWrapperStart(a);if(this.positionSecondLine)this.templateDOM+=this.buildDomSecondPos(a);if(this.positionRec)this.templateDOM+=this.buildDomRecommendations(a);this.templateDOM+=this.buildDomMainWrapperEnd(a);this.templateDOMInit=true}else setTimeout(b.buildDOMOnce,1E3)};this.constants=new (function(){var a=this;this.init=function(c){if(b.fixPngOnThisBrowser()){a.divWrapperStyle=a.divWrapperStyle.replace(/\$COLOR_STR/g,
"");a.divWrapperStyle=b.isSomeSecondLine()?a.divWrapperStyle.replace(/\$ONE_LINE/g,"height:100%;"):a.divWrapperStyle.replace(/\$ONE_LINE/g,"")}else{a.divWrapperStyle=a.divWrapperStyle.replace(/\$COLOR_STR/g,"");a.divWrapperStyle=a.divWrapperStyle.replace(/\$ONE_LINE/g,"")}a.recommendationsUlClass="recommendations_ul"+(outbrain_browsers.ie?"_ie":"");a.globalClass=a.globalClass.replace(/\$ONE_LINE/g,"");outbrain_language_manager.isLanguageReady(c)&&outbrain_language_manager.isRtl(c)};this.starsTextDistance=
4;this.divWrapperStyle="$CLEAR_STR;";this.divWrapperStyle+="padding:0 0 10px 0;";this.tableStyleTop="padding:0 0 0 0;margin:5px 0;border:none;background:none;border-spacing:0px;";this.tableStyle="padding:0 0 0 0;margin:0 0 0 0;border:none;background:none;border-spacing:0px;";this.divWrapperStyle+="$COLOR_STR";this.divWrapperStyle+="$ONE_LINE";this.starsClassname="";this.globalClass="div-wrapper";this.voterDivClass="voterDiv";this.tbodyClass="outbrain-tbody-css";this.rateInfoTdClass="rateInfo";this.recommendationsUlClass=
"";this.recommendationsMoreLinkId="moreRecommendationsLinkDiv";this.recommendationsWaitId="recommendationsWait";this.recommendationsWaitClass="Outbrain_recommendationsWait";this.recommendationsLegendClass="Outbrain_recommendations_legend";this.recommendationsPcLegendId="recommendationsPcLegend";this.recommendationsPcLegendCls="Outbrain_recommendations_pc_legend";this.recommStatusTableClass="outbrain-table-recommendations-bottom";this.recommStatusTableId="outbrainTableRecommendation";this.starsSpanClass=
"star-span";this.globalClass+="$ONE_LINE";this.starsClassname+="$ONE_LINE";this.lowerBR=this.upperBR="";this.voterDivName="OutbrainVoterDiv";this.containerId="outbrain_container";this.ratesDivId="rates";this.fieldsetId="recommendationsFieldset";this.recommendationsUlId="recommendationsList";this.recommendationsStripId="recommendationsStrip";this.recommendationsMoreDivId="recommendationsMoreDiv";this.rateStatusInfoTableId="rateStatusInfoTable";this.rateStatusInfoTdId="rateStatusInfo";this.rateInfoDivId=
"rateInfo";this.whatIsId="outbrain_whatIs";this.pngfixRatesHelper="pngfixRatesMatrixHelper";this.pngfixMatrix="pngfixMatrix";this.pngfixStarsDivClass="pngfixStarsDivs";this.pngfixDivsContainer="pngfixDivs";this.recommendationAdsLiClass="outbrain_rec_li outbrain_ad_li";this.recommendationLiClass="outbrain_rec_li"});this.replacerOnce=function(a){this.logicalReplace(a);this.externalReplace(a);this.templateDOM=this.templateDOM.replace(/\$TEMPALATE_NAME_APS/g,"'"+this.templateName+"'");this.templateDOM=
this.templateDOM.replace(/\$TEMPLATE_NAME/g,this.templateName);this.templateDOM=this.templateDOM.replace(/\$TABLE_STYLE_TOP/g,this.constants.tableStyleTop);this.templateDOM=this.templateDOM.replace(/\$TABLE_STYLE/g,this.constants.tableStyle);this.templateDOM=this.templateDOM.replace(/\$VOTER_DIV_NAME/g,this.constants.voterDivName);this.templateDOM=this.templateDOM.replace(/\$VOTER_DIV_CLASS/g,this.constants.voterDivClass);this.templateDOM=this.templateDOM.replace(/\$CONTAINER_DIV_ID/g,this.constants.containerId);
this.templateDOM=this.templateDOM.replace(/\$TBODY_CLASS/g,this.constants.tbodyClass);this.templateDOM=this.templateDOM.replace(/\$RATE_INFO_TD_CLASS/g,this.constants.rateInfoTdClass);this.templateDOM=this.templateDOM.replace(/\$RATE_INFO_DIV_ID/g,this.constants.rateInfoDivId);this.templateDOM=this.templateDOM.replace(/\$FIELDSET_ID/g,this.constants.fieldsetId);this.templateDOM=this.templateDOM.replace(/\$DIV_WRAPPER_STYLE/g,this.constants.divWrapperStyle);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_UL_ID/g,
this.constants.recommendationsUlId);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_STRIP_ID/g,this.constants.recommendationsStripId);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_UL_CLASS/g,this.constants.recommendationsUlClass);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_WAIT_ID/g,this.constants.recommendationsWaitId);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_WAIT_CLASS/g,this.constants.recommendationsWaitClass);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_MORE_DIV_ID/g,
this.constants.recommendationsMoreDivId);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_MORE_LINK_DIV_CLASS/g,this.constants.recommendationsMoreLinkId);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_LEGEND_CLASS/g,this.constants.recommendationsLegendClass);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_STATUS_TABLE_CLASS/g,this.constants.recommStatusTableClass);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_STATUS_ID/g,this.constants.recommStatusTableId);
this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_PC_LEGEND/g,this.constants.recommendationsPcLegendId);this.templateDOM=this.templateDOM.replace(/\$RECOMMENDATIONS_PC_LEGENED_CLS/g,this.constants.recommendationsPcLegendCls);this.templateDOM=this.templateDOM.replace(/\$RATE_STATUS_INFO_TABLE_ID/g,this.constants.rateStatusInfoTableId);this.templateDOM=this.templateDOM.replace(/\$RATE_STATUS_INFO_TD_ID/g,this.constants.rateStatusInfoTdId);this.templateDOM=this.templateDOM.replace(/\$GLOBAL_CLASS/g,
this.constants.globalClass);this.templateDOM=this.templateDOM.replace(/\$WHAT_IS_ID/g,this.constants.whatIsId);this.templateReplacedOnce=true};this.logicalReplace=function(a){var c=outbrain_settings.get(a,"noRecsBorder",null),e=outbrain_settings.get(a,"noBullets",null),f=outbrain_settings.get(a,"userClear",false),g=outbrain_settings.get(a,"extraBRType",null);a=typeof g=="number"&&(OB_extraBRType==1||OB_extraBRType==2)?"<br />":"";g=typeof g=="number"&&(OB_extraBRType==2||OB_extraBRType==3)?"<br />":
"";var i=typeof c=="boolean"&&c==true?"1px":"8px",j=outbrain_browsers.ie?"outbrain-recommendationsFieldset-ie":"outbrain-recommendationsFieldset";j+=outbrain_browsers.ie&&!(outbrain_browsers.ie8Doc8||outbrain_browsers.ie9Doc8Plus)?" outbrain-ie-old":"";j+=outbrain_browsers.ie&&outbrain_browsers.ie8Doc8?" outbrain-ie8":"";j+=outbrain_browsers.ie&&outbrain_browsers.ie9Doc8Plus?" outbrain-ie9":"";j=outbrain_browsers.sc?"outbrain-recommendationsFieldset-sc":j;var k="";k+=typeof e=="boolean"&&e==true?
" outbrain-no-bullets":"";k+=typeof c=="boolean"&&c==true?" outbrain-no-border":" outbrain-border";i=outbrain_browsers.ie&&!(outbrain_browsers.ie8Doc8||outbrain_browsers.ie9Doc8Plus)?"padding-left:0px;padding-right:"+i+";":"padding-left:"+i+";padding-right:"+i+";";if(outbrain_browsers.ie&&!(outbrain_browsers.ie8Doc8||outbrain_browsers.ie9Doc8Plus)){this.uglyIe6MultiClass="outbrain-ie6";this.uglyIe6MultiClass+=typeof e=="boolean"&&e==true?"-no-bullets":"";this.uglyIe6MultiClass+=typeof c=="boolean"&&
c==true?"-no-border":"";i+=typeof c=="boolean"&&c==true?"border-width:0px;":""}c=typeof f=="boolean"?f?"":"clear:both;":"clear:both;";this.templateDOM=this.templateDOM.replace(/\$upperBR/g,a);this.templateDOM=this.templateDOM.replace(/\$lowerBR/g,g);this.templateDOM=this.templateDOM.replace(/\$FIELDSET_CLASS/g,j+k);this.templateDOM=this.templateDOM.replace(/\$EXTRA_CLASS/g,k);this.templateDOM=this.templateDOM.replace(/\$FIELDSET_STYLE/g,i);this.constants.divWrapperStyle=this.constants.divWrapperStyle.replace(/\$CLEAR_STR/g,
c)};this.externalReplace=function(){};this.getLanguageId=function(){return b.languageName};this.changeContainerClassWhenExists=function(a){if(a=this.getElementWithFullName(this.constants.containerId,a))a.className=this.constants.globalClass};this.replaceWhenHaveLang=function(a){new outbrain_timeout(function(){return typeof outbrain_language_manager[a]!="object"&&outbrain_language_manager.isLanguageReady(a)},function(){if(outbrain_language_manager.isRtl(a)){b.constants.globalClass=b.constants.globalClass=
"div-wrapper-right";b.templateDOM=b.templateDOM.replace('div-wrapper"','div-wrapper-right"');b.templateDOM=b.templateDOM.replace("padding-left:0px;padding-right:8px;","padding-left:8px;padding-right:0px;");b.changeContainerClassWhenExists(a)}},null,null,100,1E3,true)};this.resetTemplate=function(a){if(typeof OB_user_mode=="number"&&OB_user_mode==1){var c=this.getElementWithFullName(this.constants.fieldsetId,a);if(c=this.getElementWithFullName(this.constants.recommendationsPcLegendId,a))c.style.display=
"none"}};this.replaceEveryTime=function(a){this.replaceWhenHaveLang(a);var c=this.templateDOM;c=c.replace(/\$INDEX/g,a);return c=c.replace(/\$GLOBAL_CLASS/g,this.constants.globalClass)};this.getDomPerPost=function(a){this.constants.init(a);this.buildDOMOnce(a);this.replacerOnce(a);return this.replaceEveryTime(a)};this.getRateModeInfoText=function(){};this.getRateModeStatusText=function(){};this.getPreModeInfoText=function(){};this.getPostModeInfoText=function(){};this.getRatedStatusText=function(a,
c){return outbrain_language_manager.getRatePostRate(a,c-1)+" ({starsImage})"};this.getDisqusText=function(a,c){return c=outbrain_rater.isDisqusOn(a)?c.replace(/\$COMMENT/g,' | <span class="ob_commentOut" onmouseout="javascript:this.className=\'ob_commentOut\'" onmouseover="javascript:this.className=\'ob_commentOver\'" onClick="javascript:location.href=\''+outbrain_rater.cleanLink(location.href)+"#"+outbrain_rater.getDisqusLink()+'\'" style="cursor:hand;">'+OB_widgetObjArray[a].language.COMMENT+"</span>"):
c.replace(/\$COMMENT/g,"")};this.getRecTitle=function(a){return outbrain_language_manager.getRatePostRateForRecommendations(a,0)};this.getYouMightAlsoLike=function(a){var c=outbrain_language_manager.getYouMightAlsoLike(a);a=outbrain_settings.get(a,"youMightLikeString",null);c=typeof a==="string"&&a.length>0?a:c;return c.toLowerCase()!=="none"?c:""};this.getRateInfo=function(a,c){b.getLanguageId();var e=OB_widgetObjArray[a];c=c!=null?c:OB_widgetObjArray[a].rateMode;var f="",g="";f=this.getDisqusText(a,
f);g=this.getRecTitle(a,0);return[e,f,"",c,g]};this.renderRecCancelation=function(a,c,e,f){f=f?f:b.getElementWithFullName(b.constants.fieldsetId,a).id;return" <span class='"+b.cancelRecommendationId+"Div' id='"+b.cancelRecommendationId+"_"+a+"_"+c+"'><a href='javascript:void(0);' alt='Cancel this recommendation' onclick='javasctipt:outbrain_template_manager.templates[\""+b.templateName+'"].checkWaitStatus();outbrain_template_manager.templates["'+b.templateName+'"].doWaiting("'+f+'",'+a+","+c+");outbrain_rater.setRecCancellationOdbScript("+
a+',"'+b.templateName+'","'+encodeURIComponent(e)+'");outbrain_template_manager.templates["'+b.templateName+'"].onAfterRecCancelation('+a+","+c+"); return false;' style='text-decoration:none;color:red;font-weight:bold'>[x]</a></span>"};this.checkWaitStatus=function(){if(!b.isOwnerNotLoading)return false};this.onAfterRecCancelation=function(){};this.doWaiting=function(a,c,e){b.addWaitClock(a,c);b.waitTimer(c,e)};this.waitTimer=function(a){new outbrain_timeout(function(){return b.checkWaitStatus()!=
false},function(){},null,function(){b.noMoreWaitting(a)},1E3,60,true)};this.addWaitClock=function(a,c,e){a=document.getElementById(a);if(e=document.getElementById(b.constants.recommendationsWaitId+"_outer_"+e)){e.style.display="block";b.isOwnerNotLoading=false;if(e=e.getElementsByTagName("img")[0]){e.src=b.waitImageUrl;if(a)if(a.className.indexOf(b.waitBackgroundClass)<0)a.className+=" "+b.waitBackgroundClass}}};this.removeWaitClock=function(a){var c=b.getElementWithFullName(b.constants.fieldsetId,
a);a=document.getElementById(b.constants.recommendationsWaitId+"_outer_"+a);b.isOwnerNotLoading=true;if(a){a.style.display="none";if(c)c.className=c.className.replace(b.waitBackgroundClass,"")}};this.noMoreWaitting=function(a,c){if(c==null||typeof c!="string"||c.length<=0)c="There was unknown error while sending data";confirm(c+"\nPress OK to reload the page or Cancel to abort. ")?window.location.reload():b.removeWaitClock(a)};this.startTemplate=function(){this.initTemplate();this.ready=true}},outbrain_template_manager_object=
function(){this.ready=false;var d=this;this.globalElementId="outbrain_template_element_";this.helperElementId="outbrain_manager_helper_div";this.initElementDivId="outbrain_widget_";this.isRecOnly=true;this.userTemplatesFileUrl="";this.isTemplateWithStars=this.allTemplatesWasReadyBefore=this.templatesListInit=this.userTemplatesFileReturned=false;this.dom=this.templateSTR=null;this.DATA_REC_MIXED=0;this.DATA_REC_REGULAR_ONLY=1;this.DATA_REC_AD_ONLY=2;this.isAdMarking=false;var b=outbrain_settings.domains.templates;
this.templateMapping={rec:{name:"rec",position:"bottom",rec:true,stars:false,file:"",preload:false},strip:{name:"stripBox",position:"bottom",rec:true,stars:false,file:b+"mu/templates/stripBoxTemplate.js",preload:false},nm:{name:"nm",position:"bottom",rec:true,stars:false,file:b+"mu/templates/nmTemplate.js",preload:false},dual:{name:"dual",position:"bottom",rec:true,stars:false,file:b+"mu/templates/dualTemplate.js",preload:false},stripBox:{name:"stripBox",position:"bottom",rec:true,stars:false,file:b+
"mu/templates/stripBoxTemplate.js",preload:false},flyThrough:{name:"flyThrough",position:"bottom",rec:false,stars:false,file:b+"mu/templates/flyThroughDisplay.js",preload:false},dualBox:{name:"dualBox",position:"bottom",rec:true,stars:false,file:b+"mu/templates/dualBoxTemplate.js",preload:false},box:{name:"box",position:"bottom",rec:true,stars:false,file:"",preload:false}};this.templates={};this.getSettingExceptions=function(a){if(a==null||a.length<=0)return a;var c=a;switch(a.toLowerCase()){case "stripbox":c=
"stripBox";break;case "singlethumb":c="singleThumb";break;case "flythrough":c="flyThrough";break}return c};this.getArrayTemplateskeysPerPost=function(a){var c=[],e=this.getSettingExceptions(outbrain_settings.get(a,"raterMode"));if(typeof e=="string"&&e.toLowerCase()!="none"&&d.templateMapping[e]!="undefined"){e=d.templateMapping[e];if(typeof e!="undefined"){c.push(e);outbrain_settings.set(a,"whatIsType","none")}}e=this.getSettingExceptions(outbrain_settings.get(a,"recMode"));if(typeof e=="string"&&
e.toLowerCase()!="none"&&d.templateMapping[e]!="undefined"){e=d.templateMapping[e];typeof e!="undefined"&&c.push(e)}a=this.getSettingExceptions(outbrain_settings.get(a,"displayMode"));if(typeof a=="string"&&a.toLowerCase()!="none"&&d.templateMapping[a]!="undefined"){e=d.templateMapping[a];typeof e!="undefined"&&c.push(e)}return c};this.templatesLoop=function(a){for(var c=0;c<this.templates.length;c++)a()};this.isThumbs=function(){return false};this.hasRater=function(a){a=outbrain_settings.get(a,"raterMode");
if(typeof a=="string"&&a.toLowerCase()!=="none")return true;return false};this.getDataAllPosts=function(){return OB_widgetObjArray};this.getDataPerPost=function(a,c,e){var f=OB_widgetObjArray[c];a=this.templates[a].getRateInfo(c,e);f.rateInfo=a[1];f.rateStatus=a[2];f.rateMode=a[3];f.recTitle=a[4];return f};this.getRecommendationDataPerDoc=function(a,c,e,f){var g=null,i="",j=null;if(typeof e.content=="string"){if(typeof e.url=="string"&&e.url.indexOf("key")>0)g=e.url;i+="&version="+outbrain_settings.versions.rater}a=
null;if(typeof e.content=="string"){a=e.content;j=outbrain_settings.get(c,"recsTrancateLimit",null);var k=outbrain_settings.get(c,"recsTrancateEllipsis");a=outbrain_dom.truncateBySize(a,j,k)}k=null;if(typeof e.source_name=="string")k=e.source_name;var m=null;if(typeof e.author=="string")m=e.author;var l=null;if(typeof e.publish_date=="string")l=e.publish_date;var n=false;if(typeof e.same_source=="string")n=e.same_source=="true";var o=false;if(typeof e.pc_id!="undefined")try{if(typeof e.adv_name!=
"undefined")if(e.adv_name.length>0)o=true}catch(y){o=false}var q=false;if(typeof e.isVideo=="string")q=e.isVideo==="true";var r=false;if(typeof e.bocr=="string")r=e.bocr;if(outbrain_settings.getNum(c,"defaultRecNumber")<=f)i+="&hr=1";if(f!=null&&typeof f=="number")i+="&idx="+f;f=false;if(typeof e.showLogo=="boolean")f=e.showLogo;var u=false;if(typeof e.pc_id=="string")u=e.pc_id;var v=false;if(typeof e.campaign_id=="string")v=e.campaign_id;g=j=g+i;if(typeof e.orig_url=="string"&&outbrain_settings.get(c,
"showOriginalUrl")==true)g=e.orig_url;c={};c.postLink=j;c.linkText=a;c.sourceName=k;c.authorName=m;c.pubDate=l;c.isSameSource=n;c.recType=null;c.isAdId=o;c.bocr=r;c.origUrl=g;c.isVideo=q;c.showLogo=f;c.pcId=u;c.campaignId=v;return c};this.getDocsPerDoc=function(a,c){var e=[];if(typeof a=="object"&&a!=null&&a.length>0)e=a;else if(typeof c=="number")e=OB_widgetObjArray[c].jsonObj.response.documents.doc;else return e;return e};this.getRecommendationsPerDoc=function(a,c,e,f){var g=[];c=this.getDocsPerDoc(c,
e);for(e=0;e<c.length;e++)if(a==1&&typeof c[e].pc_id=="undefined"||a==2&&typeof c[e].pc_id!="undefined"||a!=2&&a!=1)g.push(c[e]);if(typeof f=="number"){if(g.length<=f)return[];return g[f]}return g};this.isAllSameSource=function(a){for(var c=true,e=0;e<a.doc.length;e++)if(typeof a.doc[e].same_source=="string")if(a.doc[e].same_source!="true")c=false;return a.isAllSameSource=c};this.recommendationsStatusPerItem=function(){return true};this.hasDocuments=function(a){if(OB_widgetObjArray[a].jsonObj)return d.recommendationsHaveDataPerItem(a,
OB_widgetObjArray[a].jsonObj);return false};this.recommendationsHaveDataPerItem=function(a,c){return typeof c.response!="undefined"&&typeof c.response.documents!="undefined"&&typeof c.response.documents.total_count!="undefined"&&c.response.documents.total_count>0};this.showRecommendationsPerTemplateIsOk=function(a,c,e,f){d.templates[a].showRecommendations(c,e,f)};this.showRecommendationsPerTemplate=function(a,c,e,f){this.recommendationsStatusPerItem(a,c,f)&&this.recommendationsHaveDataPerItem(c,e.jsonObj)&&
this.showRecommendationsPerTemplateIsOk(a,c,e,f)};this.updateRateInfoPerTemplate=function(a,c,e,f){this.templates[a].updateRateInfo(c,e,f)};this.updateRateInfo=function(a,c,e){for(var f=d.getArrayTemplateskeysPerPost(a),g=0;g<f.length;g++)d.updateRateInfoPerTemplate(f[g],a,c,e)};this.changeViewPerTemplate=function(a,c,e,f){this.templates[a].changeView(c,e,f)};this.changeView=function(a,c,e){for(var f=d.getArrayTemplateskeysPerPost(a),g=0;g<f.length;g++)d.changeViewPerTemplate(f[g],a,c,e)};this.isDocGotAds=
function(a){a=d.getRecommendationsPerDoc(d.DATA_REC_AD_ONLY,null,a,null);return a!=null&&a.length>0};this.updateAllDataPerTemplate=function(a,c,e){if(typeof e=="undefined")e=null;var f=this.getDataPerPost(a,c,e);if(e==null)e=f.rateMode;this.updateRateInfoPerTemplate(a,c,f,e);this.changeViewPerTemplate(a,c,f,e);this.showRecommendationsPerTemplate(a,c,f,e)};this.updateAllData=function(a,c){for(var e=d.getArrayTemplateskeysPerPost(a),f=0;f<e.length;f++){var g=e[f].name;if(typeof c=="undefined")c=null;
var i=this.getDataPerPost(g,a);if(c==null)c=i.rateMode;d.resetTemplate(g,a);d.showRecommendationsPerTemplate(g,a,i,c);d.changeViewPerTemplate(g,a,i,c);d.updateRateInfoPerTemplate(g,a,i,c)}};this.resetTemplate=function(a,c){d.templates[a].resetTemplate(c)};this.postDataLoaded=function(a){new outbrain_timeout(function(){return outbrain_language_manager.isLanguageReady(a)&&OB_widgetObjArray[a].widgetInited},function(){outbrain_log.addSign(a,"Language ready for index:"+a,"lngRdy");d.insertDomPerPost(a)&&
d.updateAllData(a,null)},null,function(){},100,500,true)};this.isCssReady=function(a){a=outbrain_settings.get(a,"cssUrl");return outbrain_resources_manager.isKeyReady(a)};this.userRated=function(){};this.addTemplate=function(a){var c="";for(c in a){d.templates[c]=new a[c](c);d.templates[c].startTemplate();outbrain_resources_manager.readyResource(c)}d.checkUnreadyWidgets()};this.checkUnreadyWidgets=function(){for(var a=0;a<OB_widgetObjArray.length;a++)OB_widgetObjArray[a].templatesReady===false&&d.loadTemplatesPerWidget(a)};
this.userScriptTag="userTemplateElement";this.removeTemplateScriptElement=function(){var a=outbrain_dom.$(this.userScriptTag);if(a){a.src="about:blank";this.removeElementFromManagerHelper(a);return true}return false};this.addTemplateScriptElement=function(a){a=outbrain_dom.getScriptElement(a);d.addElementToManagerHelper(a)};this.loadDefaultTemplates=function(){this.addTemplate({general:outbrain_template_object});this.addTemplate({rec:outbrain_rec_template_object});this.addTemplate({box:outbrain_box_template_object})};
this.insertPlaceHolderPerPost=function(a,c){var e=null;e=document.createElement("div");e.id=d.initElementDivId+a;e.style.display="inline";e.className="OB_"+(OB_widgetObjArray[a].widgetId==="NA"?"default":OB_widgetObjArray[a].widgetId);return e=this.dom.elementInsertion(c,e,typeof OB_isOnHeader=="boolean"?OB_isOnHeader:false,typeof OB_insertInElement=="boolean"?OB_insertInElement:false)};this.getHookElement=function(a){var c=null;c=outbrain_settings.get(a,"displayMode",null);return c=c!==null?c:outbrain_settings.get(a,
"widgetHookId",null)};this.insertDomPerPost=function(a){var c=[];if(OB_widgetObjArray[a].widgetInitedOnce!=false){OB_widgetObjArray[a].widgetInitedOnce=false;var e=this.getHookElement(a),f=outbrain_settings.get(a,"isOnHeader",false),g=outbrain_settings.get(a,"insertInElement",true),i=document.getElementById(d.initElementDivId+a);i.classname=OB_widgetObjArray[a].widgetId;c.push(d.getCustomHtml(a,"preRecsHtml"));for(var j=true,k=d.getArrayTemplateskeysPerPost(a),m=0;m<k.length;m++){var l=k[m].name;
l=d.templates[l].positionDynSecondLine;OB_widgetObjArray[a].SecLineOn=OB_widgetObjArray[a].SecLineOn&&l}OB_widgetObjArray[a].SecLineOn=OB_widgetObjArray[a].SecLineOn&&this.hasDocuments(a);for(m=0;m<k.length;m++){l=k[m].name;l=d.templates[l].getDomPerPost(a);c.push(l)}c.push(d.getCustomHtml(a,"postRecsHtml"));if(e!==null&&c.length>0&&d.dom.$(e)){j="outbrain_hook_"+a;(i=d.dom.$(j))&&i.parentNode.removeChild(i);i=document.createElement("div");i.id=j;i.className="OB_"+(OB_widgetObjArray[a].widgetId===
"NA"?"default":OB_widgetObjArray[a].widgetId);i.innerHTML=c.join("");j=d.dom.elementInsertion(d.dom.$(e),i,f,g)}else if(e!==null&&c.length>0){(c=d.dom.docCompleated())||setTimeout(function(){d.postDataLoaded(a)},1E3);outbrain_log.addSign(a,"Hook id :"+e+" was not found for index:"+a+" Dom is ready:"+c,"hokNoFund")}else if(c.length>0){outbrain_log.addSign(a,"Templates inserted for index:"+a,"tmplsInstd");i.style.display="block";i.innerHTML=c.join("")}return j}};this.getCustomHtml=function(a,c){if((d.hasDocuments(a)||
d.hasRater(a))&&outbrain_settings.get(a,c,"").length>0)return outbrain_settings.get(a,c,"")};this.loadTemplatesPerWidget=function(a){if(!((OB_widgetObjArray[a].templatesReady===true||OB_widgetObjArray[a].widgetInited===false)&&OB_widgetObjArray[a].sentToZapper===false))if(outbrain_settings.get(a,"stopWidget",false)!=true){var c=d.getArrayTemplateskeysPerPost(a),e=true;Math.random();for(var f=0;f<c.length;f++){var g=c[f].name;if(!outbrain_resources_manager.isKeyReady(g)){e=false;outbrain_log.addSign(a,
"Calling Template:"+g+" for index:"+a,"calTmpl");outbrain_resources_manager.callResource(g,d.callTemplateFile)}}if(e){outbrain_log.addSign(a,"Templates ready for index:"+a,"tmlRdy");OB_widgetObjArray[a].templatesReady=true;d.postDataLoaded(a)}}};this.callTemplateFile=function(a){if(typeof d.templateMapping[a]!="undefined"&&d.templateMapping[a].file.length>0){a=d.templateMapping[a].file;a+="?v="+outbrain_settings.versions.raterFull;d.addTemplateScriptElement(a)}};this.initTemplateManager=function(){this.dom=
new outbrain_dom_object;outbrain_dom.documentWrite("<div id='"+this.helperElementId+"' style='display:none;'></div>")};this.getHelperElement=function(){return this.dom.$(this.helperElementId)};this.getElementsPerPost=function(a){var c=[];if(a=document.getElementById(d.initElementDivId+a))c[c.length]=a;return c};this.loadRankDataForPost=function(a){outbrain_rater.loadRankData(a)};this.addElementToManagerHelper=function(a){var c=this.getHelperElement();if(c)return c.appendChild(a);return false};this.removeElementFromManagerHelper=
function(a){if(a)return a.parentNode.removeChild(a);return false};this.getQueryParam=function(a,c){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");try{var e=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.href);return e===null?c:e[1]}catch(f){return c}};this.initTemplateManager()},outbrain_whatIs=typeof outbrain_whatIs=="object"?outbrain_whatIs:new (function(){this.openedBefore=false;var d=this;this.start=function(b){new outbrain_timeout(function(){return typeof OBR.modal==="object"},function(){var a=
d.getPopData(b);OBR.modal.openModal(a.url,null,a.width,a.height)},null,null,100,500,true)};this.loadJs=function(b){this.getPopData=function(e){var f=outbrain_settings.get(e,"WhatIsUrl","NA|500|450");e="";var g=500,i=450;if(typeof f==="string"&&f.length>0){f=f.split("|");e=this.getLandingPage(f[0]);if(f.length>1&&!isNaN(f[1]))g=f[1]<=0?g:f[1];if(f.length>2&&!isNaN(f[2]))i=f[2]<=0?i:f[2]}return{url:e,width:g,height:i}};if(outbrain_browsers.isMobile){b=this.getPopData(b);window.open(b.url,"About Outbrain",
"")}else if(this.openedBefore){b=this.getPopData(b);OBR.modal.openModal(b.url,null,b.width,b.height)}else{var a=document.createElement("script");a.src=outbrain_settings.whatIs.url;a.setAttribute("id",outbrain_settings.whatIs.id);a.setAttribute("type",outbrain_settings.globals.scriptType);a.setAttribute("async","async");var c=document.getElementsByTagName("head");if(c.length>0)c[0].insertBefore(a,c[0].firstChild);else(c=outbrain_template_manager.getHelperElement())&&c.parentNode.insertBefore(a,c);
this.openedBefore=true;this.start(b)}};this.getLandingPage=function(b){if(this.validateUrl(b))return b;return outbrain_browsers.isMobile?"http://blog.outbrain.com/whatismobilepage":"http://blog.outbrain.com/whatispage"};this.validateUrl=function(b){if(typeof b!=="string")return false;return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(b)}}),outbrain_rater_object=function(){var d=this;this.halt=this.supportRecommendations=this.isRunning=false;this.pmd=null;
this.startTime=new Date;this.odbSemafor=false;this.delay=outbrain_browsers.mozilla?1E3:200;this.odbDynamicCallsArray=[];this.isHomePage=this.insertReady=this.pageLoaded=this.isLoadDynamicDataOn=false;this.adIdHelper=null;this.mpInjectedAlready=false;this.readMoreClass="entry-more-link";this.extPermalinkEleId="outbrain_ext_permalink_element";this.itemInserted=this.fullSettingReady=false;this.itemInsertedCounter=0;this.blogSettingsOk=false;this.permalinksUsed=[];this.userCustomizeFooterClass=this.userCustomizePermaLinkClass=
this.userCustomizeContainerDivClass=null;this.userAppendContainerDivClass=[];this.elementToSearch="div";this.countInsertedItems=-1;this.lastOdbRotationReturnedItem=this.lastOdbRotationRequestedItem=0;this.isRecEnabled=true;this.odbCallsList=[];this.odbCallsListSemaforIsLock=false;this.scrollMaxTimeInterval=150;this.scrollHeightLast=0;this.scrollHeightFactor=70;this.isToolTipLoaded=false;this.getQSParam=function(b){for(var a=document.location.search.substring(1).split("&"),c=null,e=0;e<a.length;e++){var f=
a[e].indexOf("=");if(f>0){var g=a[e].substring(0,f);if(b==g){c=a[e].substring(f+1);break}}}return c};this.returnedOdbData=function(b,a){outbrain_log.addSign(a,"Odb is back:"+a,"odbBck");this.lastOdbRotationReturnedItem=a;OB_widgetObjArray[a].jsonObj=b;outbrain_settings.odb.adsPv==false&&this.checkIfAdsPv(a);this.widgetInit(a);if(!(typeof OB_stop_rater=="boolean"&&OB_stop_rater==true)){this.odbCallsListSemaforIsLock=false;this.fireNextOdbRequestItem()}};this.returnedHtmlData=function(b,a){outbrain_log.addSign(a,
"Odb is back:"+a,"odbBck");this.lastOdbRotationReturnedItem=a;OB_widgetObjArray[a].jsonObj=b;outbrain_settings.odb.adsPv==false&&this.checkIfAdsPv(a);this.widgetHTMLInit(a);if(!(typeof OB_stop_rater=="boolean"&&OB_stop_rater==true)){this.odbCallsListSemaforIsLock=false;this.fireNextOdbRequestItem()}};this.widgetHTMLInit=function(b){var a=OB_widgetObjArray[b].jsonObj;if(a!=null){OB_widgetObjArray[b].setSettingObject(a.response.settings);this.settingExceptions(b);if(outbrain_settings.get(b,"stopWidget")==
true||typeof OB_stop_rater=="boolean"&&OB_stop_rater==true)return false;else{this.injectOdbHtml(b,a);return true}}};this.injectOdbHtml=function(b,a){if(a&&a.response&&a.response.html)if(b=document.getElementById(outbrain_template_manager.initElementDivId+b))returnValue=outbrain_dom.elementInsertion(b,a.response.html,false,true)};this.checkIfAdsPv=function(b){if(OB_widgetObjArray[b].jsonObj&&OB_widgetObjArray[b].jsonObj.response&&OB_widgetObjArray[b].jsonObj.response.settings&&OB_widgetObjArray[b].jsonObj.response.settings.apv&&
OB_widgetObjArray[b].jsonObj.response.settings.apv===true)outbrain_settings.odb.adsPv=true};this.returnedCancelOdbData=function(b,a,c){if(b!=null)if(typeof b.ob_exclude_resp!="undefined"&&typeof b.ob_exclude_resp.code=="number")if(b.ob_exclude_resp.code==0){if(a==null){window.location.reload();return}OB_widgetObjArray[a].sentToZapper=true;this.setRecOdbScript(a,true);return}else if(typeof b.ob_exclude_resp.message=="string"&&a!=null){outbrain_template_manager.templates[c].noMoreWaitting(a,b.ob_exclude_resp.message);
return}typeof a=="number"&&outbrain_template_manager.templates[c].noMoreWaitting(a,"")};this.widgetInit=function(b){var a=OB_widgetObjArray[b].jsonObj;if(a!=null){OB_widgetObjArray[b].setSettingObject(a.response.settings);this.loadCssPerWidget(b);outbrain_language_manager.loadLanguagePerWidget(b);this.settingExceptions(b);if(outbrain_settings.get(b,"stopWidget")==true||typeof OB_stop_rater=="boolean"&&OB_stop_rater==true)return false;else{this.widgetInitRank(b,a);outbrain_template_manager.loadTemplatesPerWidget(b);
return true}}};this.settingExceptions=function(b){if(outbrain_settings.get(b,"stopRater",false)==true)OB_stop_rater=true;else{if(outbrain_settings.get(b,"isBackwards",false)==true)outbrain_settings.isBackwards=true;if(outbrain_settings.get(b,"homePageRegx",null)!==null)if(outbrain_settings.get(b,"stopRaterOnHP",false)!==false){var a=outbrain_settings.get(b,"homePageRegx",null);a=outbrain_settings.blogUtils.hrefLocation.match(a);if(a!=null&&a.length>0){OB_stop_rater=true;return}}outbrain_language_manager.langOverride(b);
if(outbrain_settings.get(b,"user_mode",null)===1)OB_user_mode=outbrain_settings.get(b,"user_mode");if(typeof outbrain_settings.get(b,"cssStyle",null)=="string"){a="cssInjection_"+OB_widgetObjArray[b].widgetId;if(!outbrain_resources_manager.isKeyReady(a)){outbrain_resources_manager.readyResource(a);this.injectCssString(outbrain_settings.get(b,"cssStyle"))}}typeof outbrain_settings.get(b,"jsInjection",null)=="function"&&outbrain_settings.get(b,"jsInjection")();if(outbrain_settings.get(b,"eagerOdbCalls")!=
null){outbrain_settings.odb.eagerOdbCalls=outbrain_settings.getNum(b,"eagerOdbCalls",1);this.checkLocations(false);this.fireNextOdbRequestItem()}outbrain_settings.get(b,"showMp",false)==true&&this.putMpStyleWidget(b);this.checkComScore(b)}};this.checkComScore=function(b){if(outbrain_settings.get(b,"tracking",false)===false&&outbrain_settings.get(b,"comScoreEnabled",true)===true&&!outbrain_browsers.isMobile&&!outbrain_settings.comScoreDone)if(typeof OB_odb_life!="undefined"){OB_odb_life.redirect(outbrain_settings.domains.js+
"nanoWidget/3rd/comScore/comScore.htm");outbrain_settings.comScoreDone=true}};this.putMpStyleWidget=function(b){if(!(this.mpInjectedAlready===true||typeof outbrain_settings.platformType!=="number")){this.mpInjectedAlready=true;this.insertMP(OB_widgetObjArray[b].permalink,"MP_1")}};this.widgetInitRank=function(b){OB_widgetObjArray[b].widgetInited=true;OB_widgetObjArray[b].widgetInitedOnce=true;OB_widgetObjArray[b].widgetWroteOnce=false};this.injectCssString=function(b){var a=document.getElementsByTagName("head")[0];
a=a!=null?a:document.getElementById("outbrain_manager_helper_div");if(a!=null){var c=document.createElement("STYLE");c.setAttribute("type","text/css");if(c.styleSheet)c.styleSheet.cssText=b;else{b=document.createTextNode(b);c.appendChild(b)}a.appendChild(c)}};this.loadCssPerWidget=function(b){b=outbrain_settings.get(b,"cssUrl");if(b!=="none"){outbrain_settings.rater.cssUrl=b;outbrain_resources_manager.callResource(outbrain_settings.rater.cssUrl,outbrain_rater.addCssFileByUrl)}};this.addCssFileByUrl=
function(b){var a=document.createElement("link");a.rel=outbrain_settings.globals.cssRel;a.type=outbrain_settings.globals.cssType;a.id=outbrain_settings.rater.cssId;a.href=b;a.onload=function(){outbrain_resources_manager.readyResource(b);cssFile_Loaded=true};var c=document.getElementsByTagName("head");c.length>0?c[0].appendChild(a):outbrain_template_manager.addElementToManagerHelper(a)};this.disqusOnPage=false;this.isDisqusOn=function(b){var a=outbrain_settings.get(b,"isDisqus",true);if(this.disqusOnPage)return true;
if(OB_widgetObjArray[b].language.OPTIONAL_ADDONS.disqus&&a&&document.getElementById("disqus_thread")!=null)return this.disqusOnPage=true;else return false};this.getDisqusLink=function(){for(var b=null,a=typeof OB_dsqTagList!="undefined"?OB_dsqTagList:["dsq-add-new-comment","dsq-content","disqus_thread"],c=0;c<a.length;c++){b=document.getElementById(a[c]);if(b!=null)break}return b!=null?a[c]:""};this.cleanLink=function(b){if(typeof b==="string"&&b.indexOf("#")>0)b=b.substr(0,b.lastIndexOf("#"));return b};
this.changeOdbCallMode=function(){if(d.isRecEnabled==false)outbrain_settings.odb.isSemafor=false};this.isBloggerValidPermalink=function(b){var a=true;if(outbrain_dom.isBlogger()===true)if(!(b&&b.length>0&&b.toLowerCase().match(/(archive.html)/)===null&&b.toLowerCase().match(/html?$/)!==null)){outbrain_log.addSign(-1,"Bad Permalink for blogger platform: "+b,"");a=false}return a};this.registerOdbRequest=function(b){if(!(typeof OB_odb_static_mode=="boolean"&&OB_odb_static_mode==true)){d.isRecEnabled=
true;d.changeOdbCallMode();for(var a=outbrain_template_manager.getElementsPerPost(b),c=b<1,e=null,f=0;f<a.length;f++){e=this.getOdbRequestObject(b,a[f],function(){d.setRecOdbScript(b)});if(c==true){outbrain_settings.odb.eagerOdbCalls--;this.addOdbRequestItem(e)}else this.objLocationItemHolder.addLocationItem(e)}this.checkLocations(false);this.fireNextOdbRequestItem()}};this.getOdbRequestObject=function(b,a,c){var e={};e.index=b;e.element=a;e.func=c;return e};this.insertJsScript=function(b,a){var c=
document.createElement("script");c.setAttribute("id",b);c.setAttribute("type",outbrain_settings.globals.scriptType);c.setAttribute("src",a);c.setAttribute("async","async");var e=document.getElementsByTagName("head");e.length>0?e[0].appendChild(c):outbrain_dom.documentWrite('<script id="'+b+'" src="'+a+'" type="'+outbrain_settings.globals.scriptType+'" async="async"><\/script>')};this.addOdbRequestItem=function(b){this.odbCallsList[this.odbCallsList.length]=b};this.fireNextOdbRequestItem=function(){if(!(outbrain_settings.odb.isSemafor==
true&&this.odbCallsListSemaforIsLock==true)){for(var b=0;b<this.odbCallsList.length;b++)if(this.odbCallsList[b]!=null){this.odbCallsListSemaforIsLock=true;var a=this.odbCallsList[b];this.removeItemsByPostIndex(this.odbCallsList[b].index);try{outbrain_log.addSign(0,"Fire odb","firOdb");a.func()}catch(c){outbrain_log.addSign(-1,"Fire Odb Fail:"+c,"firOdbFail")}if(outbrain_settings.odb.isSemafor==true)return}this.cleanList()}};this.removeItemsByPostIndex=function(b){for(var a=this.odbCallsList.length-
1;a>=0;a-=1)if(this.odbCallsList[a]!=null)if(this.odbCallsList[a].index==b)this.odbCallsList[a]=null};this.cleanList=function(){for(var b=this.odbCallsList.length-1;b>=0;b-=1)this.odbCallsList[b]==null&&this.odbCallsList.splice(b,1)};this.externalScroll=function(){};this.checkLocationsWithDimmer=function(){clearTimeout(d.scrollLocationCheckTimer);this.scrollLocationCheckTimer=setTimeout(d.checkLocations,d.scrollMaxTimeInterval);this.externalScroll()};this.checkLocations=function(b){if(b==true){b=
Math.round(d.objLocationItemHolder.objPositionCalc.getTopY()/d.scrollHeightFactor);if(b==d.scrollHeightLast)return;else d.scrollHeightLast=b}b=d.objLocationItemHolder.getElementsInScope();if(b.length>0){for(var a=0;a<b.length;a++)d.odbCallsList[d.odbCallsList.length]=b[a];d.fireNextOdbRequestItem()}};this.createOdbScriptElement=function(b,a,c){var e=null;a+=c?"&sig="+outbrain_settings.rater.windowName:"";a+=this.getQSParam("obdraft",false)==="true"?"&obdraft=true":"";e=document.createElement("script");
e.setAttribute("id",b);e.setAttribute("async","async");e.setAttribute("type",outbrain_settings.globals.scriptType);e.setAttribute("src",a);return e};this.setRecOdbScript=function(b,a){var c=d.odbPathReplacer(outbrain_settings.odb.odbGetDataUrlRec,b);if(a)c=d.odbBcrReplacer(c);a=d.createOdbScriptElement(outbrain_settings.rater.odb.getScoreRecId+"_"+b,c,true,true);this.setOdbScript(b,a)};this.setRecCancellationOdbScript=function(b,a,c){var e="";e=outbrain_settings.blogUtils.cancelRecs;e=e.replace(/\$VOTER_INDEX/g,
b);e=e.replace(/\$TEMPLATE_INDEX/g,a);e=e.replace(/\$BOCR/g,c);a=d.createOdbScriptElement(outbrain_settings.rater.odb.getCancelRecId+"_"+b,e,true,false);this.setOdbScript(b,a)};this.callPopUpDescScript=function(b,a){var c="",e="";e="?campaignId="+b+"&tooltipElement="+a;c+=outbrain_settings.domains.outbrain+"campaignDescription";d.hasJqueryInstalled()||(e+="&includeJQ=true");c+=e;b=d.createOdbScriptElement(b+"_"+a,c,true,false);this.setOdbScript(a,b)};this.hasJqueryInstalled=function(){if(typeof jQuery!=
"undefined"){if(/1\.(0|1|2|3|4)\.(0|1)/.test(jQuery.fn.jquery)||/^1.1/.test(jQuery.fn.jquery)||/^1.2/.test(jQuery.fn.jquery)||/^1.3/.test(jQuery.fn.jquery))return false;return true}return false};this.setOdbScript=function(b,a){var c;c=document.getElementsByTagName("head").length>-1?document.getElementsByTagName("head")[0]:outbrain_template_manager.getHelperElement();outbrain_log.addSign(b,"insert req into dom","rdom");d.insertOdbRequestIntoDom(c,a)};this.odbPathReplacer=function(b,a){var c=null,e=
"",f="",g=false;if(a>=0&&typeof OB_widgetObjArray[a].mpWidget=="boolean"&&OB_widgetObjArray[a].mpWidget==true)g=true;var i=outbrain_settings.keys_and_users.partnerKey;if(a>=0){i=outbrain_settings.get(a,"partnerKey");c=OB_widgetObjArray[a].widgetId;c=encodeURIComponent(c);e=OB_widgetObjArray[a].permalink;e=d.cleanLink(e);e=e!==null?encodeURIComponent(e):""}else{c="NA";f=outbrain_dom.getLocalUrl();f=d.cleanLink(f);f=encodeURIComponent(f)}var j=outbrain_dom.extractFeedUrl();j=d.cleanLink(j);j=j!==null?
encodeURIComponent(j):null;if(g){b=b.replace(/\$EXTRA_DATA/g,d.getExtraData(a));j=typeof OB_widgetObjArray[a].mpSourceUrl=="string"?OB_widgetObjArray[a].mpSourceUrl:j}else b=b.replace(/\$EXTRA_DATA/g,"");b=b.replace(/\$SOURCE_URL/g,j==null?"":"&srcUrl="+j);b=b.replace(/\$IS_RECS/g,"true");b=b.replace(/\$IS_SETTINGS/g,"true");b=b.replace(/\$WIDGET_ID/g,c);b=b.replace(/\$VOTER_INDEX/g,a);b=b.replace(/\$PERMA_LINK/g,e);b=b.replace(/\$LOCAL_URL/g,f);b=b.replace(/\$PARTNER_KEY/g,i);b=b.replace(/\$VERSION/g,
outbrain_settings.versions.rater);b=b.replace(/\$ADS_PV/g,outbrain_settings.odb.adsPv);b=b.replace(/\$REFERRER/g,encodeURIComponent(outbrain_settings.blogUtils.blogReferrer));if(a==0){a=this.getSearchReferrer();if(a!=null&&typeof a!="undefined"&&a.length>0)b+="&refsearch="+a}b+="&rand="+Math.random();return b};this.getExtraData=function(b){var a="",c=d.getExtraDataProp(b,"mpCount","number","&num=$VALUE");if(c.length==0)c=d.getExtraDataParam("OB_MP_itemsCount","number","&num=$VALUE");a+=c;a+=d.getExtraDataProp(b,
"mpPwl","number","&wlId=$VALUE");a+=d.getExtraDataProp(b,"mpFetchType","string","&srcDocFetchMode=$VALUE");return a};this.getExtraDataParam=function(b,a,c){return typeof window[b]===a&&window[b]!=null?c.replace(/\$VALUE/g,window[b]):""};this.getExtraDataProp=function(b,a,c,e){return typeof OB_widgetObjArray[b][a]===c?e.replace(/\$VALUE/g,OB_widgetObjArray[b][a]):""};this.getSearchReferrer=function(){var b="",a="",c="";try{var e=document.referrer;if(e!="")if(e.indexOf("google")>0){a="[\\?&]q=([^&#]*)";
c="goo:"}else if(e.indexOf("search.yahoo")>0){a="[\\?&]p=([^&#]*)";c="yho:"}else if(e.indexOf("search.live")>0||e.indexOf("search.msn")>0){a="[\\?&]q=([^&#]*)";c="mic:"}var f=(new RegExp(a)).exec(e);if(f==null||f=="undefined")b="";else{b=f[1];if(b!=null&&b!="undefined"&&b.length>0)b=c+encodeURIComponent(b)}}catch(g){return""}return b};this.odbBcrReplacer=function(b){b+="&bcr=true";return b};this.insertOdbRequestIntoDom=function(b,a){b.appendChild(a)};this.isDuplicatedContainer=function(b){for(var a=
0;a<d.permalinksUsed.length;a++)if(d.permalinksUsed[a]==b)return true;d.permalinksUsed.push(b);return false};this.extractStopElement=function(b){d.adIdHelper=null;b=b.getElementsByTagName("input");for(var a=0;a<b.length;a++)if(b[a].name!=null&&b[a].name.toLowerCase()=="postattribute")if(b[a].value!=null&&b[a].value.toLowerCase()=="hide")return true;return false};this.extractePermalinkByCanonical=function(){var b=null;if(d.countInsertedItems===0){b=outbrain_dom.getLocalUrl();b=d.isBloggerValidPermalink(b)?
b:null;b!==null&&outbrain_log.addSign(-1,"taking canonical: "+b,"")}return b};this.extractePermalinkByFixedId=function(){var b=null;if(typeof OB_permalinkArray=="object"&&OB_permalinkArray!=null&&OB_permalinkArray.constructor==Array&&OB_permalinkArray.length>d.countInsertedItems)b=OB_permalinkArray[d.countInsertedItems];var a=document.getElementById(this.elementName);if(a&&a.value!=null&&a.value!="undefined")b=a.value;return b};this.extractePermalinkByFooter=function(b){var a=null,c=b.getElementsByTagName("div");
if(d.pmd.postFooterDivClassname!=null)for(var e=0;e<c.length&&a==null;e++)if(c[e].parentNode==b)for(var f=c[e].getElementsByTagName("a"),g=0;g<d.pmd.postFooterDivClassname.length&&a==null;g++)if(c[e].className==d.pmd.postFooterDivClassname[g])for(var i=0;i<f.length;i++){var j=f[i];if(j.title=="permanent link"&&j.href!=null)if(j.href!=""){d.pmd.postFooterDivClassname=[d.pmd.postFooterDivClassname[g]];a=j.href;break}}return a};this.extractePermalinkByClass=function(b){var a=null;b=b.getElementsByTagName("a");
for(var c=0;c<b.length&&a==null;c++)for(var e=b[c],f=0;f<d.pmd.permalinkClassName.length;f++)if(e.href!=null&&e.href!="")if(e.className==d.pmd.permalinkClassName[f]){d.pmd.permalinkClassName=[d.pmd.permalinkClassName[f]];a=e.href;break}return a};this.extractePermalinkByHTag=function(b){for(var a=null,c=0;c<=6&&a==null;c++)for(var e=b.getElementsByTagName("h"+c),f=0;f<e.length&&a==null;f++)for(var g=e[f].getElementsByTagName("a"),i=0;i<g.length;i++){var j=g[i];if(j.href!=null&&j.href!=""&&j.className!=
"comment-bubble"){a=j.href;break}}return a};this.extractePermalinkByFirstLink=function(b){var a=null;b=b.getElementsByTagName("a");for(var c=0;c<b.length;c++){var e=b[c];if(e.href!=null&&e.href!=""){a=e.href;break}}return a};this.extractePermalink=function(b){if(typeof b=="undefined")return null;var a=null;switch(outbrain_settings.platformType){case null:default:break;case outbrain_settings.PLATFORM_TYPE_BLOGGER_SIDEBAR:a=this.extractePermalinkByFixedId();if(a==null){a=this.extractePermalinkByFooter(b);
if(a==null){a=this.extractePermalinkByCanonical();if(a==null){a=this.extractePermalinkByHTag(b);if(a==null){a=this.extractePermalinkByClass(b);if(a==null)a=this.extractePermalinkByFirstLink(b)}}}}break;case outbrain_settings.PLATFORM_TYPE_TYPEPAD:a=this.extractePermalinkByClass(b);break;case outbrain_settings.PLATFORM_TYPE_TUMBLR:a=this.extractePermalinkByHTag(b);if(a==null)a=this.extractePermalinkByFirstLink(b);break;case outbrain_settings.PLATFORM_TYPE_SQUARESPACE:a=this.extractePermalinkByClass(b);
if(a==null){a=this.extractePermalinkByHTag(b);if(a==null)a=this.extractePermalinkByFirstLink(b)}break}return a};this.isAllLanguagesPerTemplatesInited=function(b){for(var a=0;a<outbrain_template_manager.templates.length;a++)if(!outbrain_language_manager.isLanguageReady(b))return false;return true};this.getWindowName=function(){if(outbrain_settings.windowName==null){for(var b="",a=0;a<8;a++){var c=Math.floor(Math.random()*61);b+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(c,
c+1)}if(typeof window.name=="string"&&(window.name==""||window.name.indexOf("frame")>-1)){window.name=b;outbrain_settings.rater.windowName=window.name}else outbrain_settings.rater.windowName=typeof window.name=="string"&&window.name!=""?window.name:b}};this.createPmd=function(){var b=null,a=null,c=null,e=null;switch(outbrain_settings.platformType){case outbrain_settings.PLATFORM_TYPE_BLOGGER_SIDEBAR:b=["jump-link","post-body","post-body entry-content","entry-content","excerpt post-body entry-content",
"postcontent","cover","entry","single-entry","storycontent","entry clearfloat","text","itemtext"];a=["timestamp-link","post-title entry-title"];c=["post-footer","footer","postfooter"];break;case outbrain_settings.PLATFORM_TYPE_TYPEPAD:b=["entry-more","entry-body"];a=["permalink"];break;case outbrain_settings.PLATFORM_TYPE_TUMBLR:b=["regular"];break;case outbrain_settings.PLATFORM_TYPE_SQUARESPACE:b=["journal-entry-text"];a=["title"];break;case null:default:b=[outbrain_settings.rater.globalElementClass];
break}e=d.userAppendContainerDivClass;if(typeof e=="object"&&e!=null&&e.length>0)for(var f=0;f<e.length;f++)b.push(e[f]);d.userCustomizeContainerDivClass!=null&&b.unshift(d.userCustomizeContainerDivClass);if(d.userCustomizePermaLinkClass!=null)a=[d.userCustomizePermaLinkClass];if(d.userCustomizeFooterClass!=null)c=[d.userCustomizeFooterClass];d.pmd=new OB_platformMetaData(b,a,c)};this.loadMP=function(){};this.checkNextBrother=function(b,a,c){try{for(var e=b[a].parentNode.childNodes,f=b[a].className,
g=0,i=0,j=null,k=0;k<e.length;k++)if(e[k].className==f){g=k;break}for(var m=0;m<c.postDivClassname.length;m++)if(f!=c.postDivClassname[m])for(k=g;k<e.length;k++)if(e[k].className==c.postDivClassname[m]){j=e[k];i=k}if(j==null)return 0;c=0;for(k=a;k<b.length;k++,c++)if(e[i]==b[k])return c}catch(l){return 0}return 0};this.checkNextPBrother=function(b){for(var a=b.nextSibling;a!=null;){if(a.className==d.readMoreClass)return a;if(a.nodeType==1)break;a=a.nextSibling}return b};this.dynamicInsertion=function(){outbrain_log.addSign(0,
"Entering Dynamic Insertion","dynIns");var b=this.elementToSearch;this.halt||new outbrain_timeout(function(){var a=false;if(d.pageLoaded==true)a=true;for(var c=document.getElementsByTagName(b),e=outbrain_settings.platformType==outbrain_settings.PLATFORM_TYPE_TYPEPAD,f=0,g=0;g<d.pmd.postDivClassname.length;g++)for(f=0;f<c.length;f++)if(c[f].className==d.pmd.postDivClassname[g])if(typeof c[f].outbrainWidget!="boolean"){if(typeof OB_parentsCount=="number")try{k=c[f];for(var i=0;i<OB_parentsCount;i++)k=
k.parentNode}catch(j){continue}else{var k=null;try{switch(outbrain_settings.platformType){case outbrain_settings.PLATFORM_TYPE_TYPEPAD:k=c[f].parentNode.parentNode;break;case outbrain_settings.PLATFORM_TYPE_BLOGGER_SIDEBAR:k=c[f].parentNode;break;case outbrain_settings.PLATFORM_TYPE_TUMBLR:k=c[f];break;case outbrain_settings.PLATFORM_TYPE_SQUARESPACE:k=c[f];default:k=c[f];break}}catch(m){continue}}d.countInsertedItems++;if(OB_widgetObjArray.length>=d.countInsertedItems&&typeof OB_widgetObjArray[d.countInsertedItems]!=
"undefined"&&typeof OB_widgetObjArray[d.countInsertedItems].permalink=="string"){var l=OB_widgetObjArray[d.countInsertedItems].permalink;if(l==null||!d.isBloggerValidPermalink(l))continue;i=d.countInsertedItems;d.extractStopElement(document)}else{l=d.extractePermalink(k);if(l==null||!d.isBloggerValidPermalink(l)){d.countInsertedItems--;continue}if(d.extractStopElement(k)==true||d.isDuplicatedContainer(l)){d.countInsertedItems--;continue}i=d.countInsertedItems;OB_widgetObjArray[i]=new voterWidgetObj;
OB_widgetObjArray[i].permalink=l;OB_widgetObjArray[i].widgetId="NA"}l=c[f];if(e){f+=d.checkNextBrother(c,f,d.pmd,g);l=d.checkNextPBrother(c[f])}if(outbrain_template_manager.insertPlaceHolderPerPost(i,l)!=null){outbrain_log.addSign(i,"Item found:"+i+"("+d.pmd.postDivClassname[g]+")","itmFnd");d.itemInserted=true;l.outbrainWidget=true;if(d.pmd.postDivClassname[g]!==d.pmd.jumpLink){d.pmd.postDivClassname=[d.pmd.postDivClassname[g]];g=0}d.registerOdbRequest(i)}else d.countInsertedItems--}return a&&d.itemInserted?
true:false},function(){outbrain_log.addSign(-1,"Dynamic Insertion Finished Successfully","dynSuccess");d.fireNextOdbRequestItem()},function(){d.itemInserted&&d.fireNextOdbRequestItem()},function(){outbrain_log.addSign(-1,"Dynamic Insertion Failed","dynFail");outbrain_error_manager.addError(1001,"No rater inserted",outbrain_error_manager.FATAL)},100,1E3,true,function(){})};this.getSettingsForThisSource=function(){var b=this.createOdbScriptElement("OB_settings_call",this.odbPathReplacer(outbrain_settings.odb.odbGetDataUrlSettings,
-1),true,true);outbrain_log.addSign(0,"Fire Settings request","blgStFir");this.setOdbScript(-1,b)};this.returnedSettingsData=function(b){outbrain_log.addSign(0,"Fire Settings returned","blgStRtn");if(typeof b!="undefined"&&typeof b.response!="undefined"&&typeof b.response.settings!="undefined"){if(typeof b.response.settings.containerAppend!="undefined")for(var a=b.response.settings.containerAppend,c=0;c<a.length;c++)d.userAppendContainerDivClass.push(a[c]);if(typeof b.response.settings.containerClass!=
"undefined")d.userCustomizeContainerDivClass=b.response.settings.containerClass;if(typeof b.response.settings.parentsCount!="undefined")OB_parentsCount=b.response.settings.parentsCount;if(typeof b.response.settings.isOnHeader!="undefined")OB_isOnHeader=b.response.settings.isOnHeader;if(typeof b.response.settings.insertInElement!="undefined")OB_insertInElement=b.response.settings.insertInElement;d.blogSettingsOk=true;d.createPmd()}};this.pageLoadedEvent=function(){d.pageLoaded=true};this.loadToolTip=
function(){if(this.isToolTipLoaded!=true){this.isToolTipLoaded=true;var b=document.createElement("script");b.setAttribute("id","ToolTip");b.setAttribute("type","text/javascript");b.setAttribute("src",outbrain_settings.domains.js+"mu/3rd/wz/wz_tooltip.js");b.setAttribute("async","async");var a=document.getElementsByTagName("head");a.length>0&&a[0].insertBefore(b,a[0].firstChild)}};this.initActions=function(){d.getWindowName();d.resetClassNames();d.createPmd();outbrain_template_manager.loadDefaultTemplates();
d.objLocationItemHolder.setLocationsSettingsOnce();new outbrain_timeout(function(){return OB_odb_life.getStatus()==OB_odb_life.STAT_OK},function(){d.getSettingsIfBlogspot();d.waitForSettings()},null,null,10,200,true)};this.waitForSettings=function(){if(d.blogSettingsOk==true)d.dynamicInsertion();else new outbrain_timeout(function(){return d.blogSettingsOk===true},function(){d.dynamicInsertion()},null,null,50,1E3,true)};this.firstRater=function(){this.isRunning=true;if(window.addEventListener)window.addEventListener("load",
function(){d.pageLoadedEvent()},false);else if(window.attachEvent)window.attachEvent("onload",function(){d.pageLoadedEvent()});else if(document.getElementById)window.onload=function(){d.pageLoadedEvent()};outbrain_dom.documentWrite("<span id='"+outbrain_settings.rater.firstRaterPositionElementId+"'></span>");this.initActions()};this.insertGlobalSpan=function(b,a){b="";b=this.elementToSearch;if(a){b=document.createElement(b);b.className=outbrain_settings.rater.globalElementClass;return b}else outbrain_dom.documentWrite("<"+
b+" class='"+outbrain_settings.rater.globalElementClass+"'></"+b+">")};this.insertRater=function(){if(!this.halt){outbrain_settings.platformType=typeof OB_platformType=="number"?OB_platformType:null;if(!this.isRunning&&typeof OB_platformType=="number"||typeof OB_platformType!="number"){this.elementToSearch="div";if(typeof OB_elementToSearch=="string")this.elementToSearch=OB_elementToSearch;OB_widgetObjArray.length==0&&this.firstRater();if(typeof OB_platformType!="number"){var b=OB_widgetObjArray.length;
OB_widgetObjArray[b]=new voterWidgetObj;OB_widgetObjArray[b].permalink=typeof OutbrainPermaLink!="string"?null:OutbrainPermaLink;OB_widgetObjArray[b].permalink=typeof OB_permalink!="string"?OB_widgetObjArray[b].permalink:OB_permalink;OB_widgetObjArray[b].permalink=OB_widgetObjArray[b].permalink==null?outbrain_dom.getLocalUrl():OB_widgetObjArray[b].permalink;OB_widgetObjArray[b].widgetId=typeof OB_widgetId!="string"?outbrain_settings.blogUtils.widgetId:OB_widgetId;OB_widgetId=OB_permalink=null;if(typeof OB_isMP==
"boolean"&&OB_isMP===true){OB_isMP=false;d.getMPSettings(b)}this.insertGlobalSpan(b,false)}}}};this.getSettingsIfBlogspot=function(){if(typeof OB_platformType=="number")d.getSettingsForThisSource();else d.blogSettingsOk=true};this.getMPSettings=function(b){OB_widgetObjArray[b].mpWidget=true;OB_widgetObjArray[b].mpSourceUrl=typeof OB_multi_MP_url=="string"?OB_multi_MP_url:null;OB_widgetObjArray[b].mpCount=typeof OB_multi_MP_count=="number"?OB_multi_MP_count:null;OB_widgetObjArray[b].mpPwl=typeof OB_multi_MP_pwl_id==
"number"?OB_multi_MP_pwl_id:null;OB_widgetObjArray[b].mpFetchType=typeof OB_multi_MP_fetch_type=="string"?OB_multi_MP_fetch_type:null};this.insertMP=function(b,a){var c=OB_widgetObjArray.length;OB_widgetObjArray[c]=new voterWidgetObj;OB_widgetObjArray[c].permalink=b;OB_widgetObjArray[c].widgetId=a;if(b=outbrain_dom.$(outbrain_settings.rater.firstRaterPositionElementId)){outbrain_log.addSign(c,"Insert Mp PlaceHolder for index:"+c,"insrtMp");outbrain_template_manager.insertPlaceHolderPerPost(c,b);outbrain_log.addSign(c,
"Call Mp Odb for index:"+c,"callodbMp");this.registerOdbRequest(c)}};this.resetClassNames=function(){};this.init=function(){d.resetClassNames();d.bindLocationEvent();d.bindResizeEvent()};this.bindLocationEvent=function(){if(window.addEventListener)window.addEventListener("scroll",function(){d.checkLocationsWithDimmer()},false);else if(window.attachEvent)window.attachEvent("onscroll",function(){d.checkLocationsWithDimmer()});else if(document.getElementById){var b=window.onscroll;window.onload=function(){b();
d.checkLocationsWithDimmer()}}};this.bindResizeEvent=function(){if(window.addEventListener)window.addEventListener("resize",function(){d.resizeMethods()},false);else if(window.attachEvent)window.attachEvent("onresize",function(){d.resizeMethods()});else if(document.getElementById){var b=window.onresize;window.onresize=function(){b();d.resizeMethods()}}};this.resizeMethods=function(){d.objLocationItemHolder.setLocationsSettings()};this.locationItemHolder=function(){var b=this;this.objPositionCalc=
new outbrain_PositionCalc;this.actionList=[];this.counter=0;this.addLocationItem=function(a){this.actionList[this.actionList.length]=a};this.cleanList=function(){for(var a=this.actionList.length-1;a>=0;a-=1)this.actionList[a]==null&&this.actionList.splice(a,1)};this.removeItemByPostIndex=function(a){for(var c=this.actionList.length-1;c>=0;c-=1)if(this.actionList[c]!=null)if(this.actionList[c].index==a)this.actionList[c]=null};this.getElementsInScope=function(){var a=false,c=[];this.objPositionCalc.reCalc();
for(var e=0;e<this.actionList.length;e++)if(this.actionList[e]!=null){var f=outbrain_settings.odb.eagerOdbCalls;if(f>0){a=true;outbrain_settings.odb.eagerOdbCalls=f-1}else var g=this.objPositionCalc.checkIfElementInViewPort(this.actionList[e].element);if(a==true||g==outbrain_settings.odb.INSIDEFOLD||g==outbrain_settings.odb.NEARFOLD||g==outbrain_settings.odb.ERRED){c[c.length]=this.actionList[e];this.removeItemByPostIndex(this.actionList[e].index)}}this.cleanList();return c};this.setLocationsSettings=
function(){var a=this.objPositionCalc.getViewportHeight();this.objPositionCalc.setSerialMode=outbrain_settings.odb.isOdbCallsSerial;this.objPositionCalc.topThreshold=Math.round(outbrain_settings.odb.topPaddingThreshold*a);this.objPositionCalc.bottomThreshold=Math.round(outbrain_settings.odb.bottomPaddingThreshold*a)};this.setLocationsSettingsOnce=function(){b.setLocationsSettings()}};this.objLocationItemHolder=new this.locationItemHolder;this.init()},OB_platformMetaData=typeof OB_platformMetaData==
"function"?OB_platformMetaData:function(d,b,a){this.postDivClassname=d;this.permalinkClassName=b;this.postFooterDivClassname=a;this.jumpLink="jump-link"},voterWidgetObj=typeof voterWidgetObj=="object"?voterWidgetObj:function(){var d=this;this.frezz=false;this.rateMode=outbrain_settings.rater.statuses.RATER_PRE_RATE_MODE;this.wratedBy=this.ratedBy=this.rateScore=this.frezzSemaphore=0;this.isPersonalized=false;this.userName="";this.mainDiv=this.jsonObj=null;this.currentRateValue=1;this.permalink=this.rankInfo=
null;this.rated=false;this.SecLineOn=true;this.widgetShowRecOnce=this.widgetInitedOnce=this.widgetInited=false;this.rateStatus=this.rateInfo="";this.language=null;this.settingsData=new outbrain_settings.defaultSettings;this.mpWidget=this.sentToZapper=this.templatesReady=false;this.mpFetchType=this.mpPwl=this.mpCount=this.mpSourceUrl=null;this.setSettingObject=function(b){if(typeof b!="undefined")for(var a in b)d.settingsData[a]=b[a]};this.getSetting=function(b,a){if(typeof this.settingsData[b]=="undefined")return a;
return this.settingsData[b]};this.setSetting=function(b,a){this.settingsData[b]=a}};var outbrain_rec_template_object=typeof outbrain_rec_template_object=="function"?outbrain_rec_template_object:function(){outbrain_rec_template_object.baseConstructor.call(this,"rec");this.positionFirstLine=this.positionSecondLine=false;this.positionRec=this.positionDynSecondLine=true;this.positionsStars=false};outbrain_rec_template_object.prototype=outbrain_template_object;outbrain_rec_template_object.prototype.constructor=outbrain_rec_template_object;
outbrain_rec_template_object.baseConstructor=outbrain_template_object;var outbrain_stars_template_object=typeof outbrain_stars_template_object=="function"?outbrain_stars_template_object:function(){outbrain_rec_template_object.baseConstructor.call(this,"stars");this.positionDynSecondLine=this.positionFirstLine=this.positionSecondLine=true;this.positionRec=false;this.positionsStars=true};outbrain_stars_template_object.prototype=outbrain_template_object;
outbrain_stars_template_object.prototype.constructor=outbrain_stars_template_object;outbrain_stars_template_object.baseConstructor=outbrain_template_object;
var outbrain_box_template_object=typeof outbrain_box_template_object=="function"?outbrain_box_template_object:function(d){outbrain_box_template_object.baseConstructor.call(this,d);this.positionDynSecondLine=this.positionFirstLine=this.positionSecondLine=false;this.positionRec=true;this.positionsStars=false;this.imagesPreload=function(){};this.buildDomWhatIs=function(b){var a="",c=outbrain_settings.get(b,"whatIsType",outbrain_settings.whatIs.type.BALLOON),e=outbrain_settings.get(b,"whatIsLabel");if(c===
outbrain_settings.whatIs.type.POP)a+='<div id="$WHAT_IS_ID_$INDEX_$TEMPLATE_NAME" class="what_is_container"><a class="what_is_link" onclick="outbrain_whatIs.loadJs('+b+');">'+e+"</a></div>";else if(c===outbrain_settings.whatIs.type.BALLOON)a+='<div id="$WHAT_IS_ID_$INDEX_$TEMPLATE_NAME" class="what_is_container">'+this.balloonWhatsThis(b,e)+"</div>";return a};this.buildDomRecommendations=function(){var b=[];b.push('<div id="$FIELDSET_ID_$INDEX_$TEMPLATE_NAME" class="outbrain_box_template $EXTRA_CLASS" style="display:none;">');
b.push("$PRE_WHAT_IS");b.push('<ul id="$RECOMMENDATIONS_UL_ID_$INDEX_$TEMPLATE_NAME" class="$RECOMMENDATIONS_UL_CLASS">');b.push(" </ul>");b.push("$POST_WHAT_IS");b.push("</div>");b.push('<div id="$RECOMMENDATIONS_PC_LEGEND_$INDEX_$TEMPLATE_NAME" class="$RECOMMENDATIONS_PC_LEGENED_CLS" style="display:none;"></div>');return b.join("")};this.externalReplace=function(b){var a=outbrain_settings.get(b,"whatIsPosition",outbrain_settings.whatIs.position.BOTTOM);this.templateDOM=this.templateDOM.replace(/\$PRE_WHAT_IS/g,
a===outbrain_settings.whatIs.position.TOP?this.buildDomWhatIs(b):"");this.templateDOM=this.templateDOM.replace(/\$POST_WHAT_IS/g,a===outbrain_settings.whatIs.position.BOTTOM?this.buildDomWhatIs(b):"")};this.balloonWhatsThis=function(b,a){a=typeof a=="string"&&a.length>0?a:outbrain_language_manager.whatsThis(b);return'<a class=\'\' href="javascript:void(0)" onClick="javascript:'+this.callForToolTip(b,"this",false)+'" >'+a+"</a>"}};outbrain_box_template_object.prototype=outbrain_template_object;
outbrain_box_template_object.prototype.constructor=outbrain_box_template_object;outbrain_box_template_object.baseConstructor=outbrain_template_object;
var OB_language_en={id:"english",name:"en",RATE_POST_RATE_FOR_RECOMMENDATIONS:["You might like:"],HOW:"How?",BY:"by",THIS_SITE:"this site",MOST_POPULAR:"Most Popular Posts",MIGHT_ALSO_LIKE:"You might also like",MORE_RECOMMENDED_SINGLE:"{N} more recommended post",MORE_RECOMMENDED_PLURAL:"{N} more recommended posts",MORE_RECOMMENDED_CLOSE_SINGLE:"hide more recommended post",MORE_RECOMMENDED_CLOSE_PLURAL:"hide more recommended posts",PC_LEGEND_TITLE:"Selected for you by our sponsor",PI_LEGEND_TITLE:"Selected for you by our sponsor",
WHATS_THIS:"what's this",IS_RTL:false,COMMENT:"comment",OPTIONAL_ADDONS:{mostPopular:true,recommendations:true,disqus:true,pc:true,thumbs:true}};function OutbrainStart(){if(!(outbrain_browsers.opera||OB_freeze===true||typeof OB_stop_rater=="boolean"&&OB_stop_rater===true)){outbrain_log.addSign(0,"start Widget","wdgStrt");outbrain_rater.insertRater()}}
if(!outbrain_browsers.opera&&OB_freeze===false&&!(typeof OB_stop_rater=="boolean"&&OB_stop_rater===true)){var outbrain_dom=typeof outbrain_dom=="object"?outbrain_dom:new outbrain_dom_object,outbrain_error_manager=typeof outbrain_error_manager=="object"?outbrain_error_manager:new outbrain_error_manager_object,outbrain_language_manager=typeof outbrain_language_manager=="object"?outbrain_language_manager:new outbrain_language_manager_object,outbrain_template_manager=typeof outbrain_template_manager==
"object"?outbrain_template_manager:new outbrain_template_manager_object,OB_odb_life=typeof OB_odb_life=="object"?OB_odb_life:null;if(OB_odb_life==null)OB_odb_life=new outbrain_odb_life_object(outbrain_settings.ping.maxTime,outbrain_settings.ping.url,outbrain_settings.ping.id);var outbrain_rater=typeof outbrain_rater=="object"?outbrain_rater:new outbrain_rater_object;OutbrainStart()}var OBR=typeof OBR!=="undefined"?OBR:{};OBR.extern=typeof OBR.extern!=="undefined"?OBR.extern:{};
OBR.extern.returnedHtmlData=typeof OBR.extern.returnedHtmlData!=="undefined"?OBR.extern.returnedHtmlData:function(d,b){outbrain_rater.returnedHtmlData(d,b)};
OBR.extern.cancelRecommendation=typeof OBR.extern.cancelRecommendation!=="undefined"?OBR.extern.cancelRecommendation:function(d){if(typeof d==="string")var b=confirm("Removing this recommendation will remove it permanently for this section and will refresh the page.\n Are you sure you want to remove this recommendation?");b&&outbrain_rater.setRecCancellationOdbScript(null,null,d)};
OBR.extern.showDescription=typeof OBR.extern.showDescription!=="undefined"?OBR.extern.showDescription:function(d,b){typeof d=="number"&&typeof b=="string"&&outbrain_rater.callPopUpDescScript(d,b)};OBR.extern.callWhatIs=function(){outbrain_rater.addCssFileByUrl(outbrain_settings.domains.css+"mu/css/modal.css");outbrain_whatIs.loadJs(0)};outbrain={};outbrain.recClicked=function(d,b){d=b.getAttribute("data-redirect");if(d!==null)b.href=d;return true};
