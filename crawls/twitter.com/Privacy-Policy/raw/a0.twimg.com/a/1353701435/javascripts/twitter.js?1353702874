(function(a){var b=new Array();a.Watermark={ShowAll:function(){for(var c=0;c<b.length;c++){if(b[c].obj.val()==""){b[c].obj.val(b[c].text);b[c].obj.css("color",b[c].WatermarkColor)}else{b[c].obj.css("color",b[c].DefaultColor)}}},HideAll:function(){for(var c=0;c<b.length;c++){if(b[c].obj.val()==b[c].text){b[c].obj.val("")}}}};a.fn.Watermark=function(d,c){if(!c){c="#aaa"}return this.each(function(){var f=a(this);var j=f.css("color");b[b.length]={text:d,obj:f,DefaultColor:j,WatermarkColor:c};function g(){if(f.val()==d){f.val("")}f.css("color",j)}function e(){if(f.val().length==0||f.val()==d){f.val(d);f.css("color",c)}else{f.css("color",j)}}f.focus(g);f.blur(e);f.change(e);e()})}})(jQuery);jQuery.cookie=function(b,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n.expires=-1}var e="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var f;if(typeof n.expires=="number"){f=new Date();f.setTime(f.getTime()+(n.expires*24*60*60*1000))}else{f=n.expires}e="; expires="+f.toUTCString()}var m=n.path?"; path="+(n.path):"";var g=n.domain?"; domain="+(n.domain):"";var a=n.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(k),e,m,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var c=jQuery.trim(l[j]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(d){d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor","borderColor"],function(f,e){d.fx.step[e]=function(g){if(g.state==0){g.start=c(g.elem,e);g.end=b(g.end)}g.elem.style[e]="rgb("+[Math.max(Math.min(parseInt((g.pos*(g.end[0]-g.start[0]))+g.start[0]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[1]-g.start[1]))+g.start[1]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[2]-g.start[2]))+g.start[2]),255),0)].join(",")+")"}});function b(f){var e;if(f&&f.constructor==Array&&f.length==3){return f}if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}return a[d.trim(f).toLowerCase()]}function c(g,e){var f;do{f=d.curCSS(g,e);if(f!=""&&f!="transparent"||d.nodeName(g,"body")){break}e="backgroundColor"}while(g=g.parentNode);return b(f)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(a){a.extend(a.fn,{livequery:function(f,e,d){var c=this,g;if(a.isFunction(f)){d=e,e=f,f=undefined}a.each(a.livequery.queries,function(j,k){if(c.selector==k.selector&&c.context==k.context&&f==k.type&&(!e||e.$lqguid==k.fn.$lqguid)&&(!d||d.$lqguid==k.fn2.$lqguid)){return(g=k)&&false}});g=g||new a.livequery(this.selector,this.context,f,e,d);g.stopped=false;g.run();return this},expire:function(f,e,d){var c=this;if(a.isFunction(f)){d=e,e=f,f=undefined}a.each(a.livequery.queries,function(g,j){if(c.selector==j.selector&&c.context==j.context&&(!f||f==j.type)&&(!e||e.$lqguid==j.fn.$lqguid)&&(!d||d.$lqguid==j.fn2.$lqguid)&&!this.stopped){a.livequery.stop(j.id)}});return this}});a.livequery=function(c,e,g,f,d){this.selector=c;this.context=e||document;this.type=g;this.fn=f;this.fn2=d;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;f.$lqguid=f.$lqguid||a.livequery.guid++;if(d){d.$lqguid=d.$lqguid||a.livequery.guid++}return this};a.livequery.prototype={stop:function(){var c=this;if(this.type){this.elements.unbind(this.type,this.fn)}else{if(this.fn2){this.elements.each(function(d,e){c.fn2.apply(e)})}}this.elements=[];this.stopped=true},run:function(){if(this.stopped){return}var e=this;var f=this.elements,d=a(this.selector,this.context),c=d.not(f);this.elements=d;if(this.type){c.bind(this.type,this.fn);if(f.length>0){a.each(f,function(g,j){if(a.inArray(j,d)<0){a.event.remove(j,e.type,e.fn)}})}}else{c.each(function(){e.fn.apply(this)});if(this.fn2&&f.length>0){a.each(f,function(g,j){if(a.inArray(j,d)<0){e.fn2.apply(j)}})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length){var c=a.livequery.queue.length;while(c--){a.livequery.queries[a.livequery.queue.shift()].run()}}},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(d,e){if(!a.fn[e]){return}var c=a.fn[e];a.fn[e]=function(){var f=c.apply(this,arguments);a.livequery.run();return f}})},run:function(c){if(c!=undefined){if(a.inArray(c,a.livequery.queue)<0){a.livequery.queue.push(c)}}else{a.each(a.livequery.queries,function(d){if(a.inArray(d,a.livequery.queue)<0){a.livequery.queue.push(d)}})}if(a.livequery.timeout){clearTimeout(a.livequery.timeout)}a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(c){if(c!=undefined){a.livequery.queries[c].stop()}else{a.each(a.livequery.queries,function(d){a.livequery.queries[d].stop()})}}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove");a(function(){a.livequery.play()});var b=a.prototype.init;a.prototype.init=function(d,f){var e=b.apply(this,arguments);if(d&&d.selector){e.context=d.context,e.selector=d.selector}if(typeof d=="string"){e.context=f||document,e.selector=d}return e};a.prototype.init.prototype=a.prototype})(jQuery);(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";var getData=function(data){if(typeof data!="string"){return data}if(data.indexOf("{")<0){data=eval("("+data+")")}};var getObject=function(data){if(typeof data!="string"){return data}data=eval("("+data+")");return data};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/)){name=name.replace(/^data-/,"")}else{return true}object[name]=getObject(this.nodeValue)})}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}$.data(elem,settings.single,object);return object}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);(function(a){a.fn.tipsy=function(c){c=a.extend({fade:false,gravity:"n"},c||{});if(!c.offsetTop){c.offsetTop=0}if(!c.offsetLeft){c.offsetLeft=0}if(!c.header){c.header=""}if(!c.footer){c.footer=""}if(!c.hideTimeout){c.hideTimeout=100}if(!c.showTimeout){c.hideTimeout=0}if(!c.additionalCSSClass){c.additionalCSSClass=""}var b=false;var d=null,e=false;this.hover(function(){var g=a(this).text();var o=c.header.replace("%{link}",g);var n=c.footer.replace("%{link}",g);a.data(this,"cancel.tipsy",true);var j=a.data(this,"active.tipsy");if(!j){a(".tipsy").hide();j=a('<div class="tipsy '+c.additionalCSSClass+'"><div class="tipsy-inner">'+o+a(this).attr("title")+n+"</div></div>");j.css({position:"absolute",zIndex:100000});a(this).attr("title","");a.data(this,"active.tipsy",j)}else{if(a(this).attr("title")!=""){j.find(".tipsy-inner").html(a(this).attr("title"));a(this).attr("title","")}}var m=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});m.top=m.top+c.offsetTop;m.left=m.left+c.offsetLeft;a(".tipsy").hide();j.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var k=j[0].offsetWidth,l=j[0].offsetHeight;switch(c.gravity.charAt(0)){case"n":j.css({top:m.top+m.height,left:m.left+m.width/2-k/2}).addClass("tipsy-north");break;case"l":j.css({top:m.top+m.height,left:m.left+m.width/2-18}).addClass("tipsy-north");break;case"s":j.css({top:m.top-l,left:m.left+m.width/2-k/2}).addClass("tipsy-south");break;case"e":j.css({top:m.top+m.height/2-l/2,left:m.left-k}).addClass("tipsy-east");break;case"w":j.css({top:m.top+m.height/2-l/2,left:m.left+m.width}).addClass("tipsy-west");break}function f(){if(c.fade){j.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:1})}else{j.css({visibility:"visible"})}}if(c.showTimeout){b=setTimeout(f,c.showTimeout)}else{f()}},function(){clearTimeout(b);a.data(this,"cancel.tipsy",false);var f=this;setTimeout(function(){if(a.data(this,"cancel.tipsy")){return}var g=a.data(f,"active.tipsy");if(c.fade){g.stop().fadeOut(function(){a(this).remove()})}else{g.remove()}},c.hideTimeout)})}})(jQuery);(function(b){b.fn.ajaxSubmit=function(v){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof v=="function"){v={success:v}}var e=b.trim(this.attr("action"));if(e){e=(e.match(/^([^#]+)/)||[])[1]}e=e||window.location.href||"";v=b.extend({url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},v||{});var x={};this.trigger("form-pre-serialize",[this,v,x]);if(x.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(v.beforeSerialize&&v.beforeSerialize(this,v)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var p=this.formToArray(v.semantic);if(v.data){v.extraData=v.data;for(var f in v.data){if(v.data[f] instanceof Array){for(var g in v.data[f]){p.push({name:f,value:v.data[f][g]})}}else{p.push({name:f,value:v.data[f]})}}}if(v.beforeSubmit&&v.beforeSubmit(p,this,v)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[p,this,v,x]);if(x.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var d=b.param(p);if(v.type.toUpperCase()=="GET"){v.url+=(v.url.indexOf("?")>=0?"&":"?")+d;v.data=null}else{v.data=d}var w=this,o=[];if(v.resetForm){o.push(function(){w.resetForm()})}if(v.clearForm){o.push(function(){w.clearForm()})}if(!v.dataType&&v.target){var t=v.success||function(){};o.push(function(j){b(v.target).html(j).each(t,arguments)})}else{if(v.success){o.push(v.success)}}v.success=function(q,k){for(var n=0,j=o.length;n<j;n++){o[n].apply(v,[q,k,w])}};var c=b("input:file",this).fieldValue();var u=false;for(var m=0;m<c.length;m++){if(c[m]){u=true}}var l=false;if((c.length&&v.iframe!==false)||v.iframe||u||l){if(v.closeKeepAlive){b.get(v.closeKeepAlive,r)}else{r()}}else{b.ajax(v)}this.trigger("form-submit-notify",[this,v]);return this;function r(){var z=w[0];if(b(":input[name=submit]",z).length){alert('Error: Form elements must not be named "submit".');return}var q=b.extend({},b.ajaxSettings,v);var J=b.extend(true,{},b.extend(true,{},b.ajaxSettings),q);var y="jqFormIO"+(new Date().getTime());var F=b('<iframe id="'+y+'" name="'+y+'" src="'+q.iframeSrc+'" />');var H=F[0];F.css({position:"absolute",top:"-1000px",left:"-1000px"});var I={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;F.attr("src",q.iframeSrc)}};var G=q.global;if(G&&!b.active++){b.event.trigger("ajaxStart")}if(G){b.event.trigger("ajaxSend",[I,q])}if(J.beforeSend&&J.beforeSend(I,J)===false){J.global&&b.active--;return}if(I.aborted){return}var k=0;var C=0;var j=z.clk;if(j){var A=j.name;if(A&&!j.disabled){v.extraData=v.extraData||{};v.extraData[A]=j.value;if(j.type=="image"){v.extraData[name+".x"]=z.clk_x;v.extraData[name+".y"]=z.clk_y}}}setTimeout(function(){var M=w.attr("target"),K=w.attr("action");z.setAttribute("target",y);if(z.getAttribute("method")!="POST"){z.setAttribute("method","POST")}if(z.getAttribute("action")!=q.url){z.setAttribute("action",q.url)}if(!v.skipEncodingOverride){w.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(q.timeout){setTimeout(function(){C=true;D()},q.timeout)}var L=[];try{if(v.extraData){for(var N in v.extraData){L.push(b('<input type="hidden" name="'+N+'" value="'+v.extraData[N]+'" />').appendTo(z)[0])}}F.appendTo("body");H.attachEvent?H.attachEvent("onload",D):H.addEventListener("load",D,false);z.submit()}finally{z.setAttribute("action",K);M?z.setAttribute("target",M):w.removeAttr("target");b(L).remove()}},10);var B=50;function D(){if(k++){return}H.detachEvent?H.detachEvent("onload",D):H.removeEventListener("load",D,false);var K=true;try{if(C){throw"timeout"}var L,O;O=H.contentWindow?H.contentWindow.document:H.contentDocument?H.contentDocument:H.document;var P=q.dataType=="xml"||O.XMLDocument||b.isXMLDoc(O);a("isXml="+P);if(!P&&(O.body==null||O.body.innerHTML=="")){if(--B){k=0;setTimeout(D,100);return}a("Could not access iframe DOM after 50 tries.");return}I.responseText=O.body?O.body.innerHTML:null;I.responseXML=O.XMLDocument?O.XMLDocument:O;I.getResponseHeader=function(R){var Q={"content-type":q.dataType};return Q[R]};if(q.dataType=="json"||q.dataType=="script"){var n=O.getElementsByTagName("textarea")[0];if(n){I.responseText=n.value}else{var N=O.getElementsByTagName("pre")[0];if(N){I.responseText=N.innerHTML}}}else{if(q.dataType=="xml"&&!I.responseXML&&I.responseText!=null){I.responseXML=E(I.responseText)}}L=b.httpData(I,q.dataType)}catch(M){K=false;b.handleError(q,I,"error",M)}if(K){q.success(L,"success");if(G){b.event.trigger("ajaxSuccess",[I,q])}}if(G){b.event.trigger("ajaxComplete",[I,q])}if(G&&!--b.active){b.event.trigger("ajaxStop")}if(q.complete){q.complete(I,K?"success":"error")}setTimeout(function(){F.remove();I.responseXML=null},100)}function E(n,K){if(window.ActiveXObject){K=new ActiveXObject("Microsoft.XMLDOM");K.async="false";K.loadXML(n)}else{K=(new DOMParser()).parseFromString(n,"text/xml")}return(K&&K.documentElement&&K.documentElement.tagName!="parsererror")?K:null}}};b.fn.ajaxForm=function(c){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){b(this).ajaxSubmit(c);return false}).bind("click.form-plugin",function(k){var j=k.target;var f=b(j);if(!(f.is(":submit,input:image"))){var d=f.closest(":submit");if(d.length==0){return}j=d[0]}var g=this;g.clk=j;if(j.type=="image"){if(k.offsetX!=undefined){g.clk_x=k.offsetX;g.clk_y=k.offsetY}else{if(typeof b.fn.offset=="function"){var l=f.offset();g.clk_x=k.pageX-l.left;g.clk_y=k.pageY-l.top}else{g.clk_x=k.pageX-j.offsetLeft;g.clk_y=k.pageY-j.offsetTop}}}setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(r){var q=[];if(this.length==0){return q}var d=this[0];var k=r?d.getElementsByTagName("*"):d.elements;if(!k){return q}for(var l=0,o=k.length;l<o;l++){var e=k[l];var f=e.name;if(!f){continue}if(r&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){q.push({name:f,value:b(e).val()});q.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}var t=b.fieldValue(e,true);if(t&&t.constructor==Array){for(var g=0,c=t.length;g<c;g++){q.push({name:f,value:t[g]})}}else{if(t!==null&&typeof t!="undefined"){q.push({name:f,value:t})}}}if(!r&&d.clk){var m=b(d.clk),p=m[0],f=p.name;if(f&&!p.disabled&&p.type=="image"){q.push({name:f,value:m.val()});q.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return q};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var j=this.name;if(!j){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:j,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(j){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,j);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(g,d):g.push(d)}return g};b.fieldValue=function(c,k){var e=c.name,q=c.type,r=c.tagName.toLowerCase();if(typeof k=="undefined"){k=true}if(k&&(!e||c.disabled||q=="reset"||q=="button"||(q=="checkbox"||q=="radio")&&!c.checked||(q=="submit"||q=="image")&&c.form&&c.form.clk!=c||r=="select"&&c.selectedIndex==-1)){return null}if(r=="select"){var l=c.selectedIndex;if(l<0){return null}var o=[],d=c.options;var g=(q=="select-one");var m=(g?l+1:d.length);for(var f=(g?l:0);f<m;f++){var j=d[f];if(j.selected){var p=j.value;if(!p){p=(j.attributes&&j.attributes.value&&!(j.attributes.value.specified))?j.text:j.value}if(g){return p}o.push(p)}}return o}return c.value};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var d=this.type,c=this.tagName.toLowerCase();if(d=="text"||d=="password"||c=="textarea"){this.value=""}else{if(d=="checkbox"||d=="radio"){this.checked=false}else{if(c=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c==undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c==undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)}this.selected=c}}})};function a(){if(b.fn.ajaxSubmit.debug&&window.console&&window.console.log){window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}}})(jQuery);if(!Array.forEach){Array.prototype.forEach=function(d,e){var c=e||window;for(var b=0,a=this.length;b<a;++b){d.call(c,this[b],b,this)}};Array.prototype.map=function(f,g){var e=g||window;var b=[];for(var d=0,c=this.length;d<c;++d){b.push(f.call(e,this[d],d,this))}return b};Array.prototype.filter=function(f,g){var e=g||window;var b=[];for(var d=0,c=this.length;d<c;++d){if(!f.call(e,this[d],d,this)){continue}b.push(this[d])}return b};Array.prototype.every=function(d,e){var c=e||window;for(var b=0,a=this.length;b<a;++b){if(!d.call(c,this[b],b,this)){return false}}return true};Array.prototype.indexOf=function(b,c){var c=c||0;for(var a=0;a<this.length;++a){if(this[a]===b){return a}}return -1}}Array.prototype.contains=function(a){if(Array.contains){return this.contains(a)}return this.indexOf(a)>-1};Array.prototype.insert=function(a){if(!this.contains(a)){this.push(a)}};if(!Array.remove){Array.remove=function(d,c,b){var a=d.slice((b||c)+1||d.length);d.length=c<0?d.length+c:c;return d.push.apply(d,a)}}Function.prototype.method=function(a,b){this.prototype[a]=b;return this};Function.prototype.methods=function(b){for(var a in b){this.method(a,b[a])}return this};Function.prototype.augmentProto=function(a){for(key in a){this.prototype[key]=a[key]}return this};Function.prototype.pBind=function(b){var a=this;return function(){return a.apply(b,arguments)}};Function.prototype.widget=function(){this.prototype.bind=function(b,a){this.$root.bind(b,a);return this};this.prototype.trigger=function(a,b){this.$root.trigger(a,b)};this.prototype.find=function(a){return this.$root.find(a)};return this};String.prototype.toCamel=function(){return this.replace(/[-_\s]\D/gi,function(a){return a.charAt(a.length-1).toUpperCase()})};String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};String.prototype.unescapeHTML=function(){return this.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')};String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,"").replace(/<|>/g,"")};String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};window.twttr=window.twttr||{};twttr.actionsTillReady=new Array("canTweet","sidebarTab","inPageLink");twttr.augmentObject=function(b,c){for(var a in c){b[a]=c[a]}return b};twttr.augmentObject(twttr,{namespaceOf:function(a){return twttr.is.object(a)?a:window},merge:function(){var e=arguments;var f=e[0];var k=arguments[arguments.length-1];var d=false;if(twttr.is.nil(f)||!twttr.is.def(f)){if(e.length<2){return{}}[].shift.call(e);return this.merge.apply(this,e)}if(twttr.is.bool(k)){d=k;[].pop.call(e)}for(var j=1,c=e.length;j<c;j++){var b=e[j];for(var g in b){if(d&&b[g]&&typeof b[g]==="object"){if(!f[g]){f[g]=(b[g] instanceof Array)?[]:{}}else{if(typeof f[g]!=="object"){f[g]=b[g]}}this.merge(f[g],b[g],true)}else{f[g]=b[g]}}}return f},extend:function(b,c){var a=function(){};a.prototype=c.prototype;b.prototype=new a();b.prototype.constructor=b;b.uber=c.prototype;if(c.prototype.constructor==Object.prototype.constructor){c.prototype.constructor=c}},klass:function(a,b){return twttr.magic(a,b)},augmentAndExtend:function(b,c,d){var a=twttr.namespaceOf(b);a[c]=function(){a[c].uber.constructor.apply(this,arguments)};twttr.extend(a[c],d);return a[c]},auxo:function(c,d,b){var a=twttr.is.object(b)?b:twttr;return twttr.augmentAndExtend(a,c,d)},augmentString:function(c,a){var b=window;c.split(".").forEach(function(f,e,d){b=b[f]=b[f]||(twttr.is.def(d[e+1])?{}:a)});return b},magic:function(b,a){if(twttr.is.string(b)){return twttr.augmentString(b,a)}else{return twttr.augmentObject(b,a)}},inspect:function(b){console.clear();var c=$(b);var k=c.data("events");var a=0;var j=0;var e=[];var d=[];for(key in k){e.push(key);a++;d.push("\n*******************\n");d.push("Events for "+key+"\n\n");for(fn in k[key]){var g=k[key][fn];j++;d.push(g.toString()+"\n")}}console.log("************* Summary *************");console.log("for target",c);console.log(a+" types of events",e);console.log(j,"Total Event Listeners");console.log("Event listeners assigned to target");console.log(d.join(" "))},is:{bool:function(a){return typeof a==="boolean"},nil:function(a){return a===null},def:function(a){return !(typeof a==="undefined")},number:function(a){return typeof a==="number"&&isFinite(a)},fn:function(a){return typeof a==="function"},array:function(b){return b?this.number(b.length)&&this.fn(b.splice):false},string:function(a){return typeof a==="string"},blank:function(a){return a===""},falsy:function(a){return a===false||a===null||a===undefined},object:function(a){return(a&&(typeof a==="object"||this.fn(a)))||false}},widget:function(a){a.prototype.bind=function(c,b){this.$element.bind(c,b)}}});if(!window.console){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}function setupTranslationCallback(){if(!twttr.i18n_missing_interval){twttr.i18n_missing_interval=window.setInterval(function(){if(twttr.i18n_missing&&twttr.i18n_missing.length>0){$.ajax({type:"POST",data:$.param({authenticity_token:twttr.form_authenticity_token,location:window.location.href,"strings[]":twttr.i18n_missing}),url:"/translate/untranslated_javascript"});twttr.i18n_missing=new Array()}},10000)}}function recordUntranslatedString(a){if(!twttr.i18n_missing){twttr.i18n_missing=new Array()}if(!twttr.i18n_missing_reported){twttr.i18n_missing_reported={}}if(!twttr.i18n_missing_reported[a]){twttr.i18n_missing.push(encodeURIComponent(a));twttr.i18n_missing_reported[a]=true}}function _(c,a){if(!twttr.i18n){}else{var b=twttr.i18n[c];if(b){c=b}else{recordUntranslatedString(c)}}return replaceParams(c,a)}function replaceParams(b,a){if(a){for(var c in a){b=b.replace(new RegExp("\\%\\{"+c+"\\}","gi"),a[c])}}return b}var h=function(){var a=$("<div/>");return function(b){return b?a.text(b).html().replace(/\"/gi,"&quot;"):b}}();function unh(a){return a?a.replace(/&(amp;)+/g,"&").replace(/&[a-z]+;/gi,function(b){if(unh.HTML_ESCAPE_TOKENS[b]){return unh.HTML_ESCAPE_TOKENS[b]}return b}):a}window.unh.HTML_ESCAPE_TOKENS={"&lt;":"<","&gt;":">","&quot;":'"'};function addSlashes(a){return a.replace(/\'/g,"\\'").replace(/\"/g,'\\"')}var reverseString=function(a){return a?a.split("").reverse().join(""):a};var numberWithDelimiter=function(b,a){s=b.toString();if(s.indexOf(".")!=-1){return s}a=a?a:",";return s.replace(/(.)(?=(.{3})+$)/g,"$1"+a)};var timeAgo=function(c){if(!c){return false}var j=new Date();var g=new Date(c);if(document.all){g=new Date(Date.parse(c.replace(/( \+)/," UTC$1")))}var d=j-g;var b=1000,f=b*60,a=f*60;if(isNaN(d)||d<0){return false}var e=-1;$.each([5,10,20],function(){if(d<this*b){e=this;return false}});if(e!=-1){return _("less than %{time} seconds ago",{time:e})}if(d<b*40){return _("half a minute ago")}if(d<f){return _("less than a minute ago")}if(d<b*90){return _("1 minute ago")}if(d<f*45){return _("%{time} minutes ago",{time:Math.round(d/f)})}if(d<f*90){return _("about 1 hour ago")}if(d<a*24){return _("about %{time} hours ago",{time:Math.round(d/a)})}return g.toLocaleString().replace(/ GMT[+-][0-9]+:?[0-9]+/,"")};var updateTimeAgo=function(){$(".timestamp").each(function(){var b=$(this);var a=timeAgo(b.meta().time);if(b.meta().prefix!=null){a=b.meta().prefix+" "+a}if(a&&b.find("*").length==0){b.html(a)}});$(".timestamp-title").each(function(){var b=$(this);var a=timeAgo(b.meta().time);if(a){b.attr("title",a)}})};var DEBUG=false;$.extend({log:function(a){if(window.console){console.log(a)}},debug:function(a){if(DEBUG){console.log(a)}},inspect:function(b){var a="{\n";for(var c in b){a+="\t"+c+": "+b[c]+"\n"}a+="}";console.log(a);return a},getStackTrace:function(){var l=[];var c=false;try{d.dont.exist+=0}catch(g){if(g.stack){var m=g.stack.split("\n");for(var d=0,f=m.length;d<f;d++){l.push(m[d])}l.shift();c=true}else{if(window.opera&&g.message){var m=g.message.split("\n");for(var d=0,f=m.length;d<f;d++){if(m[d].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var k=m[d];if(m[d+1]){k+=" at "+m[d+1];d++}l.push(k)}}l.shift();c=true}}}if(!c){var b=arguments.callee.caller;while(b){var j=b.toString();var a=j.substring(j.indexOf("function")+8,j.indexOf(""))||"anonymous";l.push(a);b=b.caller}}return l}});(function(){if(document.all){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var a=new Number(RegExp.$1);if(a>=8){$.browser.msie8=true}else{if(a>=7){$.browser.msie7=true}else{$.browser.msie6=true}}}}})();var _tmp={};twttr.augmentObject(twttr,{templates:{},timeouts:{},wait:function(){var a={};twttr.clearWait=function(b){if(twttr.is.def(a[b])){clearTimeout(b);delete a[b]}};return function(e,c){var b="TIMER_"+(new Date()).getTime();var d=setTimeout(function(){if(!twttr.is.def(a[b])){return}e()},c);a[b]=d;return b}}(),processJson:function(json){if(typeof(json)=="object"){var evals=[];$.each(json,function(selector,content){var c=selector.charAt(0);if(c=="$"){evals.push(content)}else{if(c=="!"){var notification=window[selector.substring(1)+"Notification"];if(notification){(new notification()).setMessage(content).show()}}else{var $contentPadded=$("<div></div>").html(content);var $content=$(selector,$contentPadded);if($content.length==1){$(selector).replaceWith($content)}else{$(selector).html(content)}$(selector).show()}}});$.each(evals,function(index,js){if(js){eval(js)}})}},googleAnalytics:function(a){if(window.pageTracker){window.pageTracker._trackEvent("Ajax","refresh",a,null)}},trackPageView:function(c,b,d){if(window.pageTracker){var a;if(c){a=c.toString();if(b){a="/search/tweets/"+encodeURIComponent(h(page.query))}if(d){a=a+d}window.pageTracker._trackPageview(a)}else{window.pageTracker._trackPageview()}}},fadeAndReplace:function(a,b){$(a).fadeOut("medium",function(){$(a).html(b)});$(a).fadeIn("medium")},error:function(a){alert(a?a:_("Whoops! Something went wrong. Please refresh the page and try again!"))},loading:function(){$("#loader").fadeIn(200)},loaded:function(){$("#loader").fadeOut(200)},updateLocation:function(a,e){if(!e){e=document}if(a){var d=a.replace(/^https?:\/\/.+?\//,"").replace(/#/gi,"%23").replace(/\s/gi,"+");var c=d.replace(/[^\w\d_-].*$/,"");var b=(c.length>0)?$(e).find("#"+c):[];if(b.length>0){b.get(0).id=c+"_tmp_for_update_location"}e.location.hash=d;if(b.length>0){b.get(0).id=c}}},NON_CHAR_KEY_CODES:[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93],isNonCharKeyCode:function(a){return $.inArray(a.keyCode,twttr.NON_CHAR_KEY_CODES)!=-1||((a.ctrlKey||a.metaKey)&&$.inArray(a.keyCode,[67,88])!=-1)}});$.extend($.expr[":"],{onthepage:"($(elem).is(':visible') && $(elem).parents(':hidden').length == 0)"});jQuery.fn.move=function(a){var b=$(this).html();$(this).remove();$(a).html(b)};jQuery.fn.meta=function(){var b={type:"attr",name:"data"};var c=$(this);if(c.length==1){return c.metadata(b)}else{var a=[];c.each(function(){a.push($(this).metadata(b))});return a}};jQuery.fn.visible=function(a){$(this).each(function(){$(this).css("visibility",a?"visible":"hidden")})};jQuery.fn.isLoading=function(){$(this).addClass("loading")};$.fn.isLoaded=function(){$(this).removeClass("loading")};$.fn.replace_text=function(c,b){var a=$(this).html();if(a){$(this).html(a.replace(c,b))}};var pluralize=function(c,b,a){return c==1?b:a};var setDocumentTitle=function(a){document.title=unh(a.stripTags())||""};var addCountToDocumentTitle=function(a){document.title=(a?"("+numberWithDelimiter(a)+") ":"")+document.title.replace(/\([^)]*[0-9]\)\s+/gi,"")};var getSessionUserScreenName=function(){var a;if(page.user_screenname){a=page.user_screenname}else{if($('meta[name="session-user-screen_name"]:first').get(0)){a=$('meta[name="session-user-screen_name"]:first').get(0).content}else{a=$('meta[name="session-user-screen_name"]').get(0).content}}return a};var sessionUserIsPageUser=function(){try{return $('meta[name="session-user-screen_name"]:first').get(0).content==$('meta[name="page-user-screen_name"]:first').get(0).content}catch(a){return false}};$.fn.focusEnd=function(){return this.each(function(){var a=this;if(a.style.display!="none"){if($.browser.msie){a.focus();var b=a.createTextRange();b.collapse(false);b.select()}else{a.setSelectionRange(a.value.length,a.value.length);a.focus()}}})};$.fn.focusFirstTextField=function(){return this.find("input[type=text]:visible:enabled:first").focus().length>0};$.fn.focusFirstTextArea=function(){return this.find("textarea:visible:enabled:first").focus().length>0};$.fn.focusFirstTexttarget=function(){return this.focusFirstTextField()||this.focusFirstTextArea()};$.fn.maxLength=function(a){return this.each(function(){$(this).keydown(function(b){return this.value.length<=a||twttr.isNonCharKeyCode(b)})})};$.fn.replaceClass=function(b,a){return this.each(function(){var c=$(this);if(c.hasClass(b)){c.removeClass(b).addClass(a)}else{if(c.hasClass(a)){c.removeClass(a).addClass(b)}}})};$.fn.isSelectAll=function(a){return this.each(function(){var b=$(this);if(typeof(a)=="string"){var d=$(a).find("input[type=checkbox]")}else{var d=a}function c(){var e=true;d.each(function(){if(!this.checked){e=false;return false}});b.get(0).checked=e}b.click(function(){var e=b.get(0).checked;d.each(function(){this.checked=e});$(this).trigger("select-all-changed",e)});d.click(function(){c();$(this).trigger("checkbox-changed",this.checked)})})};function bodytarget(){return $("body")}twttr.klass("twttr.Observer",function(){this.fns=[]}).method("listen",function(a){this.fns.push(a)}).method("unlisten",function(a){this.fns=this.fns.filter(function(b){if(b!==a){return b}})}).method("trigger",function(c,b){var a=b||window;this.fns.forEach(function(d){d.call(a,c)})});twttr.klass("twttr.User",function(a){this.screen_name=a}).method("update",function(b,a){twttr.tweeters[this.screen_name][b]=a;return this}).method("updateAll",function(b){for(var a in b){twttr.tweeters[this.screen_name][a]=b[a]}return this}).method("data",function(b){var a=twttr.tweeters[this.screen_name];return b?a[b]:a});twttr.augmentObject(twttr.User,{UserFetchTimeout:5000,UserFetchUrl:"/users/show",_bail:false,_requesting:false,bail:function(){this._bail=true},isRequesting:function(){return this._requesting},getCurrentUser:function(a){return this.findById(page.sessionUserId,a)},find:function(f,c,g){var b,a;var d=this;if(twttr.is.fn(c)){b=window;a=c}else{b=c;a=g}var e=twttr.is.def(f.screen_name)?f.screen_name.toLowerCase():null;if(e&&twttr.tweeters[e]){a.call(b,new twttr.User(e),true);return true}else{$.ajax({url:this.UserFetchUrl,type:"GET",data:f,dataType:"json",timeout:this.UserFetchTimeout,beforeSend:function(){d._requesting=true},success:function(m){d._requesting=false;var j=m.user;if(j){var k={};var l=j.screen_name.toLowerCase();k[l]=j;twttr.User.merge(k,true);if(d._bail){d._bail=false;return false}a.call(b,new twttr.User(l),false)}else{if(d._bail){d._bail=false;return false}a.call(b,null,false)}},error:function(j){d._requesting=false;if(d._bail){d._bail=false;return false}a.call(b,null,false)}});return false}},findByScreenName:function(b,a,c){return this.find({screen_name:b,hovercard:true},a,c)},findById:function(d,a,c){var b=twttr._birdtags[d];if(twttr.is.def(b)){this.findByScreenName(b,a,c)}else{this.find({user_id:d,hovercard:true},a,c)}},merge:function(){twttr.tweeters={};twttr._birdtags={};return function(e,a){var e=e||{};if(a){twttr.merge(twttr.tweeters,e,true)}else{var d=twttr.merge(e,twttr.tweeters,true);twttr.merge(twttr.tweeters,d,true)}for(var c in twttr.tweeters){twttr._birdtags[twttr.tweeters[c].user_id]=c}}}()});twttr.loadTemplate=function(a,b){if(twttr.templates[a]){return twttr.templates[a]}b=b||function(){};$.get("/mustaches/"+a+".html",null,function(d){var c={templates:{}};c.templates[a]=d;twttr.merge(twttr,c,true);b(twttr.templates)},"html")};twttr.loadTemplates=function(a,b){b=b||function(){};a.forEach(function(d,c){twttr.loadTemplate(d,function(e){var f=a.every(function(g){return twttr.is.def(e[g])});if(f){b(twttr.templates)}})})};twttr.SimplePositioner={setPosition:function(j,k,l){var d={inline:false,direction:null,offsets:{inline:{top:0,left:0},below:{top:0,left:0},above:{top:0,left:0}},hasContainer:false};var a=twttr.merge({},d,l,true);var f=f instanceof jQuery?j:$(j);var c=k instanceof jQuery?k:$(k);var e=a.hasContainer?c.position():c.offset();if(!a.inline){var g=this;function b(m){g.clearPosition();switch(m){case"above":g._positionAbove(f,c,e,a.offsets.above,a.hasContainer);break;case"below":g._positionBelow(f,c,e,a.offsets.below);break;case"prefer below":b("below");if((f.offset().top-$(document).scrollTop())+(a.itemHeight||f.height())>$(window).height()){b("prefer above")}break;default:b("above");if((f.offset().top-$(document).scrollTop())<0){b("below")}break}}b(a.direction)}else{this._positionInline(f,c,e,a.offsets.inline);f.css("left",e.left+a.offsets.inline.left)}},clearPosition:function(){$("body").removeClass("loading-hoverer-above")},_positionAbove:function(e,f,c,a,b){e.addClass("position_above").removeClass("position_below").removeClass("position_inline");var g=Math.round(c.top+a.top);var j;if(b){j=f.parents().filter(function(){return $(this).css("position")=="relative"}).outerHeight()}else{var d=$("body");d.addClass("loading-hoverer-above");var k=parseInt(d.css("padding-top"));g+=k>0?12:0;j=d.outerHeight()}e.css({bottom:j-g,left:this._getLeftPosition(e,f,c)+a.left})},_positionBelow:function(a,c,d,e){var b=Math.round(d.top+c.height()+e.top);a.addClass("position_below").removeClass("position_above").removeClass("position_inline");a.css({top:b,left:this._getLeftPosition(a,c,d)+e.left})},_positionInline:function(a,b,d,c){a.css("top",d.top+c.top).addClass("position_inline").removeClass("position_below").removeClass("position_above")},_getLeftPosition:function(a,b,c){return Math.round(c.left+(b.width()/2))}};twttr.unparam=function(f){var e={};var c=f.split("&");for(var b=0,a=c.length;b<a;b++){var d=c[b].split("=",2);e[decodeURIComponent(d[0])]=(d.length==2?decodeURIComponent(d[1].replace(/\+/g," ")):null)}return e};twttr.klass("twttr.Validator",function(a,c,b){this.$field=$(a);this.value=this.$field.val();if(twttr.is.string(this.value)){this.value=jQuery.trim(this.value)}this.fieldName="";if(twttr.is.object(c)){b=c}else{this.fieldName=c}this.valid=b.valid;this.invalid=b.invalid});twttr.Validator.augmentProto({is:function(){var a=null;var b=this;$.each(arguments,function(d,c){if(!c._decorated){c=c()}if(!c(b.value)){a=c;return false}});if(a){this.invalid(this.$field,this.fieldName,a.errorMessage)}else{this.valid(this.$field,this.fieldName)}}});twttr.validate=function(b,a){function c(d,f,e){return new twttr.Validator(d,f,e)}twttr.augmentObject(c,b);return a(c)};$.fn.helpText=function(){this.each(function(){var b=$(this);var a=b.hasClass("help-focusable");if(a){b.mouseup(function(c){if(!b.helpVal()==""){b.select();c.preventDefault()}})}b.focus(function(c){b.setHelpState(false,a)}).blur(function(){if(document.selection){document.selection.empty()}else{getSelection().removeAllRanges()}b.setHelpState(true)});b.setHelpState(true)});return this};$.fn.helpVal=function(){var a=$.trim(this.val());return a==this.attr("title")?"":a};$.fn.setHelpState=function(a,b){this.each(function(){var d=$(this);var c="help-text";if(a){if(!d.helpVal()){d.val(d.attr("title"));d.addClass(c);if(this.hasFocus&&d.hasClass("help-focusable")){d.select()}}else{d.removeClass(c)}}else{d.removeClass(c);if(!d.helpVal()){if(b){d.select()}else{d.val("")}}}})};$.fn.selectOnClick=function(){this.each(function(){var b=$(this);var a=true;b.click(function(){if(a){a=false;this.select()}}).blur(function(){a=true})});return this};twttr.klass("twttr.autocomplete",function(a){var b=this;b.opts=twttr.merge({getInputVal:function(){return b.opts.$input.val()},hoverClass:"hover",delay:350},a);b.cache={};b._clearFakeFocus();b.opts.$input.keydown(function(c){switch(c.keyCode){case 38:b.arrowUp();break;case 40:b.arrowDown();break;case 13:if(!b.hasFakeFocus){return}b.$fakeFocus.click();break;case 27:if(b.opts.$dropdown.is(":visible")){b.hide()}else{return}break;case 9:if(b.opts.$dropdown.is(":visible")){b.hide()}return;default:b._onInputChange();return}b.keyDownEvent=true;c.stopPropagation();c.preventDefault()}).keypress(function(c){if(c.charCode==0&&(c.keyCode==38||c.keyCode==40)){if(!b.keyDownEvent){if(c.keyCode==38){b.arrowUp()}else{b.arrowDown()}}b.keyDownEvent=false;c.preventDefault()}}).change(function(){b._onInputChange()}).blur(function(){if(!b.hovering){b.hide()}})}).method("arrowDown",function(){if(this.hasFakeFocus){this._setFakeFocus(this.$fakeFocus.next())}else{this._show()}}).method("arrowUp",function(){this._setFakeFocus(this.$fakeFocus.prev())}).method("hide",function(){this._clearFakeFocus();this.opts.$dropdown.hide();this.displayedInputVal=this.opts.getInputVal()}).method("_show",function(){this.displayedInputVal="";this._display();this._setFakeFocus(this.opts.$dropdown.children(":first"))}).method("_clearFakeFocus",function(){this.$fakeFocus=$([]);this.hasFakeFocus=false;this.opts.$dropdown.children().removeClass(this.opts.HoverClass)}).method("_setFakeFocus",function(a){if(a.length>0){this.hasFakeFocus=true;this.$fakeFocus=a;this.$fakeFocus.addClass(this.opts.hoverClass).siblings().removeClass(this.opts.hoverClass)}}).method("_onInputChange",function(){var a=this;setTimeout(function(){a._display()},0)}).method("_display",function(){var b=this;var a=b.opts.getInputVal();if(b.displayedInputVal!=a){b._clearFakeFocus();var d=b.opts.$dropdown.hide().empty();b.displayedInputVal="";var c=b.cache[a];if(c){c.forEach(function(g,f){d.append(b.opts.renderMatch(g,f,c))});d.children().hover(function(){if(b.hasFakeFocus){b._setFakeFocus($(this))}else{$(this).addClass(b.opts.hoverClass)}b.hovering=true},function(){if(!b.hasFakeFocus){$(this).removeClass(b.opts.hoverClass)}b.hovering=false});var e=b.opts.$input.position();d.css({left:e.left,top:e.top+b.opts.$input.outerHeight()-1}).show();b.displayedInputVal=a}else{if(a&&c===undefined){b._fetch(a)}}}}).method("_fetch",function(a){var b=this;clearTimeout(b.timerId);b.timerId=setTimeout(function(){b.cache[a]=false;b.opts.fetchMatches(a,function(c){if(c&&c.length>0){b.cache[a]=c;b._display()}},function(){b.cache[a]=undefined})},b.opts.delay)});
/*!
 * twitter-text-js 1.5.0
 *
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this work except in compliance with the License.
 * You may obtain a copy of the License at:
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 */
if(typeof window==="undefined"||window===null){window={twttr:{}}}if(window.twttr==null){window.twttr={}}if(typeof twttr==="undefined"||twttr===null){twttr={}}(function(){twttr.txt={};twttr.txt.regexen={};var j={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(x){return x&&x.replace(/[&"'><]/g,function(y){return j[y]})};function g(y,x){x=x||"";if(typeof y!=="string"){if(y.global&&x.indexOf("g")<0){x+="g"}if(y.ignoreCase&&x.indexOf("i")<0){x+="i"}if(y.multiline&&x.indexOf("m")<0){x+="m"}y=y.source}return new RegExp(y.replace(/#\{(\w+)\}/g,function(A,z){var B=twttr.txt.regexen[z]||"";if(typeof B!=="string"){B=B.source}return B}),x)}twttr.txt.regexSupplant=g;function l(y,x){return y.replace(/#\{(\w+)\}/g,function(A,z){return x[z]||""})}twttr.txt.stringSupplant=l;function d(y,A,x){var z=String.fromCharCode(A);if(x!==A){z+="-"+String.fromCharCode(x)}y.push(z);return y}twttr.txt.addCharsToCharClass=d;var o=String.fromCharCode;var c=[o(32),o(133),o(160),o(5760),o(6158),o(8232),o(8233),o(8239),o(8287),o(12288)];d(c,9,13);d(c,8192,8202);var b=[o(65534),o(65279),o(65535)];d(b,8234,8238);twttr.txt.regexen.spaces_group=g(c.join(""));twttr.txt.regexen.spaces=g("["+c.join("")+"]");twttr.txt.regexen.invalid_chars_group=g(b.join(""));twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;var a=[];d(a,1024,1279);d(a,1280,1319);d(a,11744,11775);d(a,42560,42655);d(a,1425,1471);d(a,1473,1474);d(a,1476,1477);d(a,1479,1479);d(a,1488,1514);d(a,1520,1524);d(a,64274,64296);d(a,64298,64310);d(a,64312,64316);d(a,64318,64318);d(a,64320,64321);d(a,64323,64324);d(a,64326,64335);d(a,1552,1562);d(a,1568,1631);d(a,1646,1747);d(a,1749,1756);d(a,1758,1768);d(a,1770,1775);d(a,1786,1788);d(a,1791,1791);d(a,1872,1919);d(a,2208,2208);d(a,2210,2220);d(a,2276,2302);d(a,64336,64433);d(a,64467,64829);d(a,64848,64911);d(a,64914,64967);d(a,65008,65019);d(a,65136,65140);d(a,65142,65276);d(a,8204,8204);d(a,3585,3642);d(a,3648,3662);d(a,4352,4607);d(a,12592,12677);d(a,43360,43391);d(a,44032,55215);d(a,55216,55295);d(a,65441,65500);d(a,12449,12538);d(a,12540,12542);d(a,65382,65439);d(a,65392,65392);d(a,65296,65305);d(a,65313,65338);d(a,65345,65370);d(a,12353,12438);d(a,12441,12446);d(a,13312,19903);d(a,19968,40959);d(a,173824,177983);d(a,177984,178207);d(a,194560,195103);d(a,12291,12291);d(a,12293,12293);d(a,12347,12347);twttr.txt.regexen.nonLatinHashtagChars=g(a.join(""));var t=[];d(t,192,214);d(t,216,246);d(t,248,255);d(t,256,591);d(t,595,596);d(t,598,599);d(t,601,601);d(t,603,603);d(t,611,611);d(t,616,616);d(t,623,623);d(t,626,626);d(t,649,649);d(t,651,651);d(t,699,699);d(t,768,879);d(t,7680,7935);twttr.txt.regexen.latinAccentChars=g(t.join(""));twttr.txt.regexen.hashSigns=/[#＃]/;twttr.txt.regexen.hashtagAlpha=g(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.hashtagAlphaNumeric=g(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.endHashtagMatch=g(/^(?:#{hashSigns}|:\/\/)/);twttr.txt.regexen.hashtagBoundary=g(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);twttr.txt.regexen.validHashtag=g(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);twttr.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|RT:?)/;twttr.txt.regexen.atSigns=/[@＠]/;twttr.txt.regexen.validMentionOrList=g("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g");twttr.txt.regexen.validReply=g(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);twttr.txt.regexen.endMentionMatch=g(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);twttr.txt.regexen.validUrlPrecedingChars=g(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/);twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;twttr.txt.regexen.invalidDomainChars=l("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen);twttr.txt.regexen.validDomainChars=g(/[^#{invalidDomainChars}]/);twttr.txt.regexen.validSubdomain=g(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);twttr.txt.regexen.validDomainName=g(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);twttr.txt.regexen.validGTLD=g(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/);twttr.txt.regexen.validCCTLD=g(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))/);twttr.txt.regexen.validPunycode=g(/(?:xn--[0-9a-z]+)/);twttr.txt.regexen.validDomain=g(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);twttr.txt.regexen.validAsciiDomain=g(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);twttr.txt.regexen.invalidShortDomain=g(/^#{validDomainName}#{validCCTLD}$/);twttr.txt.regexen.validPortNumber=g(/[0-9]+/);twttr.txt.regexen.validGeneralUrlPathChars=g(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i);twttr.txt.regexen.validUrlBalancedParens=g(/\(#{validGeneralUrlPathChars}+\)/i);twttr.txt.regexen.validUrlPathEndingChars=g(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);twttr.txt.regexen.validUrlPath=g("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i");twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;twttr.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i;twttr.txt.regexen.extractUrl=g("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;twttr.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;twttr.txt.regexen.validCashtag=g("(?:^|#{spaces})\\$(#{cashtag})(?=$|\\s|[#{punct}])","gi");twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;twttr.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i;twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;twttr.txt.regexen.validateUrlPchar=g("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;twttr.txt.regexen.validateUrlUserinfo=g("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i");twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;twttr.txt.regexen.validateUrlIpv4=g(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;twttr.txt.regexen.validateUrlIp=g("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomain=g(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);twttr.txt.regexen.validateUrlHost=g("(?:#{validateUrlIp}|#{validateUrlDomain})","i");twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomain=g(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);twttr.txt.regexen.validateUrlUnicodeHost=g("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/;twttr.txt.regexen.validateUrlUnicodeAuthority=g("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i");twttr.txt.regexen.validateUrlAuthority=g("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i");twttr.txt.regexen.validateUrlPath=g(/(\/#{validateUrlPchar}*)*/i);twttr.txt.regexen.validateUrlQuery=g(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlFragment=g(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlUnencoded=g("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var v="tweet-url list-slug";var k="tweet-url username";var q="tweet-url hashtag";var f="tweet-url cashtag";var e={urlClass:true,listClass:true,usernameClass:true,hashtagClass:true,cashtagClass:true,usernameUrlBase:true,listUrlBase:true,hashtagUrlBase:true,cashtagUrlBase:true,usernameUrlBlock:true,listUrlBlock:true,hashtagUrlBlock:true,linkUrlBlock:true,usernameIncludeSymbol:true,suppressLists:true,suppressNoFollow:true,suppressDataScreenName:true,urlEntities:true,symbolTag:true,textWithSymbolTag:true,urlTarget:true,invisibleTagAttrs:true,linkAttributeBlock:true,linkTextBlock:true};var u={disabled:true,readonly:true,multiple:true,checked:true};function r(z){var y={};for(var x in z){if(z.hasOwnProperty(x)){y[x]=z[x]}}return y}twttr.txt.tagAttrs=function(z){var A="";for(var y in z){var x=z[y];if(u[y]){x=x?y:null}if(x==null){continue}A+=" "+twttr.txt.htmlEscape(y)+'="'+twttr.txt.htmlEscape(x.toString())+'"'}return A};twttr.txt.linkToText=function(y,B,x,z){if(!z.suppressNoFollow){x.rel="nofollow"}if(z.linkAttributeBlock){z.linkAttributeBlock(y,x)}if(z.linkTextBlock){B=z.linkTextBlock(y,B)}var A={text:B,attr:twttr.txt.tagAttrs(x)};return l("<a#{attr}>#{text}</a>",A)};twttr.txt.linkToTextWithSymbol=function(y,B,D,x,z){var C=z.symbolTag?"<"+z.symbolTag+">"+B+"</"+z.symbolTag+">":B;D=twttr.txt.htmlEscape(D);var A=z.textWithSymbolTag?"<"+z.textWithSymbolTag+">"+D+"</"+z.textWithSymbolTag+">":D;if(z.usernameIncludeSymbol||!B.match(twttr.txt.regexen.atSigns)){return twttr.txt.linkToText(y,C+A,x,z)}else{return C+twttr.txt.linkToText(y,A,x,z)}};twttr.txt.linkToHashtag=function(x,C,z){var B=C.substring(x.indices[0],x.indices[0]+1);var A=twttr.txt.htmlEscape(x.hashtag);var y=r(z.htmlAttrs||{});y.href=z.hashtagUrlBase+encodeURIComponent(A);y.title="#"+A;y["class"]=z.hashtagClass;return twttr.txt.linkToTextWithSymbol(x,B,A,y,z)};twttr.txt.linkToCashtag=function(y,B,A){var x=twttr.txt.htmlEscape(y.cashtag);var z=r(A.htmlAttrs||{});z.href=A.cashtagUrlBase+x;z.title="$"+x;z["class"]=A.cashtagClass;return twttr.txt.linkToTextWithSymbol(y,"$",x,z,A)};twttr.txt.linkToMentionAndList=function(z,D,B){var x=D.substring(z.indices[0],z.indices[0]+1);var y=twttr.txt.htmlEscape(z.screenName);var E=twttr.txt.htmlEscape(z.listSlug);var C=z.listSlug&&!B.suppressLists;var A=r(B.htmlAttrs||{});A["class"]=(C?B.listClass:B.usernameClass);A.href=C?B.listUrlBase+y+E:B.usernameUrlBase+y;if(!C&&!B.suppressDataScreenName){A["data-screen-name"]=y}return twttr.txt.linkToTextWithSymbol(z,x,C?y+E:y,A,B)};twttr.txt.linkToUrl=function(x,D,A){var z=x.url;var E=z;var B=twttr.txt.htmlEscape(E);var C=(A.urlEntities&&A.urlEntities[z])||x;if(C.display_url){B=twttr.txt.linkTextWithEntity(C,A)}var y=r(A.htmlAttrs||{});y.href=z;if(A.urlClass){y["class"]=A.urlClass}if(A.urlTarget){y.target=A.urlTarget}if(!A.title&&C.display_url){y.title=C.expanded_url}return twttr.txt.linkToText(x,B,y,A)};twttr.txt.linkTextWithEntity=function(A,B){var E=A.display_url;var z=A.expanded_url;var C=E.replace(/…/g,"");if(z.indexOf(C)!=-1){var D=z.indexOf(C);var y={displayUrlSansEllipses:C,beforeDisplayUrl:z.substr(0,D),afterDisplayUrl:z.substr(D+C.length),precedingEllipsis:E.match(/^…/)?"…":"",followingEllipsis:E.match(/…$/)?"…":""};for(var x in y){if(y.hasOwnProperty(x)){y[x]=twttr.txt.htmlEscape(y[x])}}y.invisible=B.invisibleTagAttrs;return l("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",y)}return E};twttr.txt.autoLinkEntities=function(D,B,E){E=r(E||{});E.hashtagClass=E.hashtagClass||q;E.hashtagUrlBase=E.hashtagUrlBase||"https://twitter.com/#!/search?q=%23";E.cashtagClass=E.cashtagClass||f;E.cashtagUrlBase=E.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";E.listClass=E.listClass||v;E.usernameClass=E.usernameClass||k;E.usernameUrlBase=E.usernameUrlBase||"https://twitter.com/";E.listUrlBase=E.listUrlBase||"https://twitter.com/";E.htmlAttrs=twttr.txt.extractHtmlAttrsFromOptions(E);E.invisibleTagAttrs=E.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var x,z,C;if(E.urlEntities){x={};for(z=0,C=E.urlEntities.length;z<C;z++){x[E.urlEntities[z].url]=E.urlEntities[z]}E.urlEntities=x}var F="";var A=0;B.sort(function(H,G){return H.indices[0]-G.indices[0]});for(var z=0;z<B.length;z++){var y=B[z];F+=D.substring(A,y.indices[0]);if(y.url){F+=twttr.txt.linkToUrl(y,D,E)}else{if(y.hashtag){F+=twttr.txt.linkToHashtag(y,D,E)}else{if(y.screenName){F+=twttr.txt.linkToMentionAndList(y,D,E)}else{if(y.cashtag){F+=twttr.txt.linkToCashtag(y,D,E)}}}}A=y.indices[1]}F+=D.substring(A,D.length);return F};twttr.txt.autoLinkWithJSON=function(C,A,x){var B=[];for(var z in A){B=B.concat(A[z])}for(var y=0;y<B.length;y++){entity=B[y];if(entity.screen_name){entity.screenName=entity.screen_name}else{if(entity.text){entity.hashtag=entity.text}}}twttr.txt.modifyIndicesFromUnicodeToUTF16(C,B);return twttr.txt.autoLinkEntities(C,B,x)};twttr.txt.extractHtmlAttrsFromOptions=function(z){var A={};for(var y in z){var x=z[y];if(e[y]){continue}if(u[y]){x=x?y:null}if(x==null){continue}A[y]=x}return A};twttr.txt.autoLink=function(z,x){var y=twttr.txt.extractEntitiesWithIndices(z,{extractUrlWithoutProtocol:false});return twttr.txt.autoLinkEntities(z,y,x)};twttr.txt.autoLinkUsernamesOrLists=function(z,x){var y=twttr.txt.extractMentionsOrListsWithIndices(z);return twttr.txt.autoLinkEntities(z,y,x)};twttr.txt.autoLinkHashtags=function(z,x){var y=twttr.txt.extractHashtagsWithIndices(z);return twttr.txt.autoLinkEntities(z,y,x)};twttr.txt.autoLinkCashtags=function(z,x){var y=twttr.txt.extractCashtagsWithIndices(z);return twttr.txt.autoLinkEntities(z,y,x)};twttr.txt.autoLinkUrlsCustom=function(z,x){var y=twttr.txt.extractUrlsWithIndices(z,{extractUrlWithoutProtocol:false});return twttr.txt.autoLinkEntities(z,y,x)};twttr.txt.removeOverlappingEntities=function(z){z.sort(function(B,A){return B.indices[0]-A.indices[0]});var y=z[0];for(var x=1;x<z.length;x++){if(y.indices[1]>z[x].indices[0]){z.splice(x,1);x--}else{y=z[x]}}};twttr.txt.extractEntitiesWithIndices=function(z,x){var y=twttr.txt.extractUrlsWithIndices(z,x).concat(twttr.txt.extractMentionsOrListsWithIndices(z)).concat(twttr.txt.extractHashtagsWithIndices(z,{checkUrlOverlap:false})).concat(twttr.txt.extractCashtagsWithIndices(z));if(y.length==0){return[]}twttr.txt.removeOverlappingEntities(y);return y};twttr.txt.extractMentions=function(A){var B=[],x=twttr.txt.extractMentionsWithIndices(A);for(var z=0;z<x.length;z++){var y=x[z].screenName;B.push(y)}return B};twttr.txt.extractMentionsWithIndices=function(A){var x=[];var z=twttr.txt.extractMentionsOrListsWithIndices(A);for(var y=0;y<z.length;y++){mentionOrList=z[y];if(mentionOrList.listSlug==""){x.push({screenName:mentionOrList.screenName,indices:mentionOrList.indices})}}return x};twttr.txt.extractMentionsOrListsWithIndices=function(z){if(!z||!z.match(twttr.txt.regexen.atSigns)){return[]}var y=[],x=0;z.replace(twttr.txt.regexen.validMentionOrList,function(G,H,D,C,A,E,I){var B=I.slice(E+G.length);if(!B.match(twttr.txt.regexen.endMentionMatch)){A=A||"";var F=z.indexOf(D+C+A,x);x=F+C.length+A.length+1;y.push({screenName:C,listSlug:A,indices:[F,x]})}});return y};twttr.txt.extractReplies=function(y){if(!y){return null}var x=y.match(twttr.txt.regexen.validReply);if(!x||RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)){return null}return x[1]};twttr.txt.extractUrls=function(B,y){var A=[],x=twttr.txt.extractUrlsWithIndices(B,y);for(var z=0;z<x.length;z++){A.push(x[z].url)}return A};twttr.txt.extractUrlsWithIndices=function(G,J){if(!J){J={extractUrlsWithoutProtocol:true}}if(!G||(J.extractUrlsWithoutProtocol?!G.match(/\./):!G.match(/:/))){return[]}var E=[];while(twttr.txt.regexen.extractUrl.exec(G)){var F=RegExp.$2,z=RegExp.$3,H=RegExp.$4,C=RegExp.$5,I=RegExp.$7;var A=twttr.txt.regexen.extractUrl.lastIndex,D=A-z.length;if(!H){if(!J.extractUrlsWithoutProtocol||F.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){continue}var y=null,B=false,x=0;C.replace(twttr.txt.regexen.validAsciiDomain,function(L){var K=C.indexOf(L,x);x=K+L.length;y={url:L,indices:[D+K,D+x]};B=L.match(twttr.txt.regexen.invalidShortDomain);if(!B){E.push(y)}});if(y==null){continue}if(I){if(B){E.push(y)}y.url=z.replace(C,y.url);y.indices[1]=A}}else{if(z.match(twttr.txt.regexen.validTcoUrl)){z=RegExp.lastMatch;A=D+z.length}E.push({url:z,indices:[D,A]})}}return E};twttr.txt.extractHashtags=function(A){var z=[],y=twttr.txt.extractHashtagsWithIndices(A);for(var x=0;x<y.length;x++){z.push(y[x].hashtag)}return z};twttr.txt.extractHashtagsWithIndices=function(D,z){if(!z){z={checkUrlOverlap:true}}if(!D||!D.match(twttr.txt.regexen.hashSigns)){return[]}var y=[],x=0;D.replace(twttr.txt.regexen.validHashtag,function(F,I,J,H,L,E){var K=E.slice(L+F.length);if(K.match(twttr.txt.regexen.endHashtagMatch)){return}var G=D.indexOf(J+H,x);x=G+H.length+1;y.push({hashtag:H,indices:[G,x]})});if(z.checkUrlOverlap){var B=twttr.txt.extractUrlsWithIndices(D);if(B.length>0){var C=y.concat(B);twttr.txt.removeOverlappingEntities(C);y=[];for(var A=0;A<C.length;A++){if(C[A].hashtag){y.push(C[A])}}}}return y};twttr.txt.extractCashtags=function(A){var x=[],y=twttr.txt.extractCashtagsWithIndices(A);for(var z=0;z<y.length;z++){x.push(y[z].cashtag)}return x};twttr.txt.extractCashtagsWithIndices=function(z){if(!z||z.indexOf("$")==-1){return[]}var y=[],x=0;z.replace(twttr.txt.regexen.validCashtag,function(C,A,E,B){var D=z.indexOf("$"+A,x);x=D+A.length+1;y.push({cashtag:A,indices:[D,x]})});return y};twttr.txt.modifyIndicesFromUnicodeToUTF16=function(y,x){twttr.txt.convertUnicodeIndices(y,x,false)};twttr.txt.modifyIndicesFromUTF16ToUnicode=function(y,x){twttr.txt.convertUnicodeIndices(y,x,true)};twttr.txt.convertUnicodeIndices=function(F,C,y){if(C.length==0){return}var x=0;var z=0;C.sort(function(H,G){return H.indices[0]-G.indices[0]});var B=0;var A=C[0];while(x<F.length){if(A.indices[0]==(y?x:z)){var D=A.indices[1]-A.indices[0];A.indices[0]=y?z:x;A.indices[1]=A.indices[0]+D;B++;if(B==C.length){break}A=C[B]}var E=F.charCodeAt(x);if(55296<=E&&E<=56319&&x<F.length-1){E=F.charCodeAt(x+1);if(56320<=E&&E<=57343){x++}}z++;x++}};twttr.txt.splitTags=function(D){var x=D.split("<"),C,B=[],A;for(var z=0;z<x.length;z+=1){A=x[z];if(!A){B.push("")}else{C=A.split(">");for(var y=0;y<C.length;y+=1){B.push(C[y])}}}return B};twttr.txt.hitHighlight=function(I,K,A){var G="em";K=K||[];A=A||{};if(K.length===0){return I}var z=A.tag||G,J=["<"+z+">","</"+z+">"],H=twttr.txt.splitTags(I),N,M,D="",x=0,E=H[0],F=0,y=0,R=false,B=E,L=[],C,O,S,Q,P;for(N=0;N<K.length;N+=1){for(M=0;M<K[N].length;M+=1){L.push(K[N][M])}}for(C=0;C<L.length;C+=1){O=L[C];S=J[C%2];Q=false;while(E!=null&&O>=F+E.length){D+=B.slice(y);if(R&&O===F+B.length){D+=S;Q=true}if(H[x+1]){D+="<"+H[x+1]+">"}F+=B.length;y=0;x+=2;E=H[x];B=E;R=false}if(!Q&&E!=null){P=O-F;D+=B.slice(y,P)+S;y=P;if(C%2===0){R=true}else{R=false}}else{if(!Q){Q=true;D+=S}}}if(E!=null){if(y<B.length){D+=B.slice(y)}for(C=x+1;C<H.length;C+=1){D+=(C%2===0?H[C]:"<"+H[C]+">")}}return D};var p=140;var m=[o(65534),o(65279),o(65535),o(8234),o(8235),o(8236),o(8237),o(8238)];twttr.txt.getTweetLength=function(B,y){if(!y){y={short_url_length:20,short_url_length_https:21}}var A=B.length;var x=twttr.txt.extractUrlsWithIndices(B);for(var z=0;z<x.length;z++){A+=x[z].indices[0]-x[z].indices[1];if(x[z].url.toLowerCase().match(/^https:\/\//)){A+=y.short_url_length_https}else{A+=y.short_url_length}}return A};twttr.txt.isInvalidTweet=function(y){if(!y){return"empty"}if(twttr.txt.getTweetLength(y)>p){return"too_long"}for(var x=0;x<m.length;x++){if(y.indexOf(m[x])>=0){return"invalid_characters"}}return false};twttr.txt.isValidTweetText=function(x){return !twttr.txt.isInvalidTweet(x)};twttr.txt.isValidUsername=function(y){if(!y){return false}var x=twttr.txt.extractMentions(y);return x.length===1&&x[0]===y.slice(1)};var n=g(/^#{validMentionOrList}$/);twttr.txt.isValidList=function(y){var x=y.match(n);return !!(x&&x[1]==""&&x[4])};twttr.txt.isValidHashtag=function(y){if(!y){return false}var x=twttr.txt.extractHashtags(y);return x.length===1&&x[0]===y.slice(1)};twttr.txt.isValidUrl=function(x,C,F){if(C==null){C=true}if(F==null){F=true}if(!x){return false}var y=x.match(twttr.txt.regexen.validateUrlUnencoded);if(!y||y[0]!==x){return false}var z=y[1],A=y[2],E=y[3],D=y[4],B=y[5];if(!((!F||(w(z,twttr.txt.regexen.validateUrlScheme)&&z.match(/^https?$/i)))&&w(E,twttr.txt.regexen.validateUrlPath)&&w(D,twttr.txt.regexen.validateUrlQuery,true)&&w(B,twttr.txt.regexen.validateUrlFragment,true))){return false}return(C&&w(A,twttr.txt.regexen.validateUrlUnicodeAuthority))||(!C&&w(A,twttr.txt.regexen.validateUrlAuthority))};function w(y,z,x){if(!x){return((typeof y==="string")&&y.match(z)&&RegExp["$&"]===y)}return(!y||(y.match(z)&&RegExp["$&"]===y))}if(typeof module!="undefined"&&module.exports){module.exports=twttr.txt}}());var updateCount=function(a,f,d){try{var e=$(a);var c=parseInt(e.html().replace(/[^0-9]/g,""))+f;return setCount(a,c,d)}catch(b){return false}};var setCount=function(a,c,d){try{var e=$(a);if(d){e.fadeOut(d,function(){e.html(numberWithDelimiter(c)).fadeIn(d)})}else{e.html(numberWithDelimiter(c))}return c}catch(b){return false}};var updateFollowingCount=function(a){return updateCount("#following_count",a)};var updateFollowersCount=function(a){return updateCount("#follower_count",a)};twttr.statusUpdateError={decider:function(req){var message;try{message=eval("("+req.responseText+")").error}catch(err){}if(!message){if(req&&req.status==403){message=_("You are not authorized to perform this operation.")}else{message=_("Something is technically wrong. Please try again in a moment.")}}if(message){new ShortNotification().setMessage(message).show();$("#tweeting_button, #update-submit").removeClass("btn-disabled").removeAttr("disabled");$(".char-counter").removeClass("loading")}},revoked:function(){twttr.reload()}};twttr.isReplyOnlyTweet=function(a){var b=/^\@([a-zA-Z0-9_]{1,20})\s*$/;if(a.match(b)){return true}return false};$.fn.isAlertBox=function(){return this.each(function(){var a=$(this);a.find("a").click(function(){var b=$(this).attr("href");$.ajax({type:"POST",dataType:"text",data:{authenticity_token:twttr.form_authenticity_token},url:"/account/clear_user_alert",success:function(){a.slideUp("fast");window.location=b}});return false})})};$.fn.isUpdateForm=function(){return this.each(function(){var q=$(this);var j=q.find("textarea").isCharCounter();var a=q.find("#tweeting_button, #update-submit");var b=q.find("label.doing");var l=q.find(".char-counter");var f=/^\s*@(\w+)\W+/;var d=/^\s*[dD][mM]?\s+(?:(\w+)\W+)?/;var k=q.find(".places-nearby");var e;var p=false;function o(){var r=j.val();if(twttr.isReplyOnlyTweet(r)){location.href=RegExp.$1;return false}if(r.length>140){alert(_("That tweet is over 140 characters!"));return false}else{if(r.replace(/s\*/g,"")==""){return false}else{a.addClass("btn-disabled").attr("disabled",true);return true}}}a.bind("click",function(t){var r=$(this);t.preventDefault();if(!r.hasClass("btn-disabled")){r.closest("form").submit()}});function m(r){if(twttr.is.def(r.users)){twttr.User.merge(r.users,true)}a.removeClass("btn-disabled").removeAttr("disabled");var t=r.text;if(r.messageForFlash){(new ShortNotification()).setMessage(r.messageForFlash).show()}else{if(r.errorForFlash){(new InfoNotification()).setMessage(r.errorForFlash).show()}else{if($("body").attr("id")!="home"){(new ShortNotification()).setMessage(_("Your status has been updated!")).show()}else{if(r.status_li){$("#timeline tr.hentry:first").removeClass("latest-status");$.Timeline.prepend(r.status_li)}}setCount("#update_count",r.status_count,250);if(r.latest_status){updateTimeAgo();$("#latest_status").html(r.latest_status).isCurrentStatus(true)}$("#place_content").trigger("tweet")}}j.val("").focusEnd();$("#in_reply_to_status_id").val("");$("#in_reply_to").val("");c("");j.trigger("change");l.removeClass("loading");if(document.all){l.text("140")}else{l.css("color","#ccc")}}function c(t){var r;if(r=t.match(d)){b.html(r[1]?_("Direct message %{person}:",{person:r[1]}):_("Direct message:"));a.val(_("send"))}else{if(r=t.match(f)){b.html(_("Reply to %{screen_name}:",{screen_name:r[1]}));a.val(_("reply"))}else{b.html(_("What’s happening?"));a.val(_("update"))}}}j.bind("keyup blur focus",function(){c($(this).val())});q.submit(function(){if(o()){twttr.googleAnalytics("/status/update/refresh");var w=j.val();e={authenticity_token:twttr.form_authenticity_token,status:w,twttr:true};var t=window.location.href;if($("body").attr("id")=="home"&&((t.indexOf("page=")==-1)||t.match(/page=1(?!\d)/))){e.return_rendered_status=true}var r=$("#in_reply_to_status_id").val();var v;if(r&&(v=w.match(f))){if(v[1]==$("#in_reply_to").val()){e.in_reply_to_status_id=r;twttr.countAdsReplies&&twttr.countAdsReplies(r)}}var u=$("#source").val();if(u){e.source=u}e.lat=$("#lat").val();e.lon=$("#lon").val();e.place_id=$("#place_id").val();e.display_coordinates=$("#display_coordinates").val();g(e)}return false});function g(r){$.ajax({type:"POST",dataType:"json",url:"/status/update",data:r,beforeSend:function(){l.addClass("loading");if(document.all){l.html("&nbsp;&nbsp;&nbsp;&nbsp;")}else{l.css("color","transparent")}},success:m,error:function(t){twttr.statusUpdateError.decider(t)}})}try{j.focusEnd()}catch(n){}})};$.fn.isDirectMessageForm=function(){return this.each(function(){var n=$(this);var d=n.find("textarea").isCharCounter();var b=/^\s*[dD][mM]?\s+([A-Za-z0-9]{1,20})[^A-Za-z0-9]/;var f=n.find("select");var a=n.find("#dm-submit");var e=n.find(".char-counter");var g="";a.attr("disabled","disabled").addClass("btn-disabled");try{d.focusEnd()}catch(k){}function c(p){if(f.val()){return}if((matches=p.match(b))&&matches[1]&&(g!=matches[1])){var o=true;f.find("option").each(function(){if(this.innerHTML.toLowerCase()==matches[1].toLowerCase()){f.val(this.value);o=false;return false}});if(o){f.append(_('<option value="%{screen_name}">%{screen_name}</option>',{screen_name:matches[1]}));f.val(matches[1])}g=matches[1]}}a.click(function(o){var r=d.val();var p=r.match(b);var q=f.find("option[value="+f.val()+"]");if(p&&p[1]&&p[1].toLowerCase()==q.text().toLowerCase()){d.val(r.replace(b,""))}return true});f.change(function(o){d.trigger("update",o)});d.bind("keyup blur focus",function(o){c($(this).val());d.trigger("update",o)});function j(o){(new ShortNotification()).setMessage(o.messageForFlash).show();if($("body").attr("id")=="sent"){$.Timeline.prepend(o.direct_message_li)}d.val("");f.val("");g="";d.trigger("change");e.removeClass("loading");if(document.all){e.text("140")}else{e.css("color","#ccc")}}if(f.length>0){function l(){if(f.length&&(f.find("option").length==0)){$.ajax({type:"GET",dataType:"json",url:"/direct_messages/recipients_list",data:{twttr:true},success:function(p){if(p){var o=[];$.each(p,function(){var q=this;if((q.length>1)&&q[0]&&q[1]){o.push('<option value="'+q[0]+'">'+q[1]+"</option>")}});f.html('<option value="" selected="selected"></option>'+o.join(""))}},error:function(o){$.debug("error: "+o.responseText)}})}}var m=$("body").attr("id");if(m=="direct_messages"||m=="inbox"||m=="sent"){l()}n.bind("loadrecipients",null,function(o){l()});n.submit(function(){twttr.googleAnalytics("/direct_messages/create/refresh");var p=d.val();var o={authenticity_token:twttr.form_authenticity_token,text:p,"user[id]":f.val(),twttr:true};$.ajax({type:"POST",dataType:"json",url:"/direct_messages/create",data:o,beforeSend:function(){e.addClass("loading");if(document.all){e.text("")}else{e.css("color","transparent")}},success:j,error:function(q){twttr.statusUpdateError.decider(q)}});return false})}})};$.fn.isTimelineTabLink=function(){return this.each(function(){var a=$(this);a.click(function(b){document.body.id=a.meta().dispatch_action}).bind("loading",null,function(b){a.parent("li").addClass("loading")}).bind("loaded",null,function(b){a.parent("li").removeClass("loading")}).bind("aborted",null,function(b){a.parent("li").removeClass("loading")})})};$.fn.isEmbeddedMediaExpander=function(){return this.livequery(function(){var a=$(this);var b=a.parent().find(".embedded_media");a.click(function(){b.slideToggle("normal",function(){if(a.hasClass("embedded_media_icon_active")){a.removeClass("embedded_media_icon_active")}else{a.addClass("embedded_media_icon_active")}})})})};twttr.TEXT_AREA_CHANGE_EVENTS="blur focus change "+($.browser.mozilla?"paste input":"keyup");$.fn.isCharCounter=function(){return this.each(function(){var a=true;var f=$(this);var k=f.closest("form");var e=k.find(".char-counter");var j=k.find("#tweeting_button, #update-submit, #dm-submit");var d=k.find("select");function c(){j.addClass("btn-disabled").attr("disabled","disabled");a=true}function g(){if(a){j.removeClass("btn-disabled").removeAttr("disabled");a=false}}function b(){var m=f.val();var l=m.length;e.html(""+(140-l));if(l<=0){e.css("color","#cccccc");c()}else{if(l<=140&&(d.length==0||d.val())){g()}else{c()}if(l>130){e.css("color","#d40d12")}else{if(l>120){e.css("color","#5c0002")}else{e.css("color","#cccccc")}}}}f.bind(twttr.TEXT_AREA_CHANGE_EVENTS,function(l){b()});d.change(function(l){b()});f.focus()})};$("body.profiles #user_description").each(function(){var j=$(this);var d=j.closest("td").find(".char-counter");var c=parseInt(d.text(),10);var e=!!$(".about-yourself").attr("data-decider-shorten-urls");var b={original:[c,d.css("color")],warning:[20,"#5c0002"],error:[10,"#d40d12"]};function g(){return 19}function f(){var k;if(e){var m=j.val();var l=twttr.txt.extractUrls(m);k=m.length;k-=l.join("").length;k=k+(l.length*g())}else{k=j.val().length}return c-k}function a(){var k=f();d.html(k);if(k<=b.error[0]){d.css("color",b.error[1])}else{if(k<=b.warning[0]){d.css("color",b.warning[1])}else{d.css("color",b.original[1])}}}a();j.bind(twttr.TEXT_AREA_CHANGE_EVENTS,a);j.closest("form").submit(function(k){if(f()<0){(new ShortNotification()).setMessage(_("Bio is too long")).show();k.preventDefault();return false}})});$.fn.isCurrentStatus=function(a){return this.each(function(){var c=$(this);var l=$("#latest_status");var e=c.find("#latest_text");var g=e.find(".status-text");var k=e.find(".retweet-source-user");var j=$(this).parent("#update_notifications");var b=l.find("strong");$("#latest_text_full, #latest_text").click(function(){$("#latest_text_full, #latest_text").toggle()});e.css("color","transparent");var f=$("#latest_text_full .status-text").text();if(k.length>0){g.append(f.escapeHTML())}else{g.html("<strong>"+_("Latest: ")+"</strong>").append(f.escapeHTML())}e.css("color","");if(a){var d=l.find("span, strong");d.each(function(){$(this).data("old_color",$(this).css("color")).animate({color:"#333"},500)});clearTimeout(twttr.timeouts.latest_status_timeout);twttr.timeouts.latest_status_timeout=setTimeout(function(){d.each(function(){$(this).animate({color:$(this).data("old_color")},1500,function(){$(this).css("color","")})})},1500)}})};function initializeTimeline(){$.Statuses.initialize($("#timeline"))}function getListItemFromChild(a){return a.parents(".hentry:first")}function getStatusIdFromListItem(b){var a=/status_(.*)/i.exec(b.attr("id"));return(a)?a[1]:null}function getScreenNameFromListItem(b){var a=/u-([A-Za-z0-9_]+)/i.exec(b.attr("class"));return(a)?a[1]:null}function getShareIdFromListItem(b){var a=/(.)* s-([\d]+)(.)*/i.exec(b.attr("class"));return(a)?a[2]:getStatusIdFromListItem(b)}function timelineRefresh(e,a){var c=$("#results_update");if(c.length==0){return}if(!e||(("home,search,replies,inbox".indexOf(e)==-1)&&!e.match(/^\/?list/))){return}if(!a){a=($("#results_update").attr("href").replace(/^\//,"")||window.location.hash.replace(/^#/,"")||e).replace(/^([^\/])/,"/$1")}a=a.replace(/\/?list\//,"/");var b,d=$("#new_results_notification").meta();if(e==="search"){b=d.search}else{b=d.timeline}$("#new_results_notification").data("count",0);if(page.timelineRefresher){if(page.timelineRefresher.dispatchAction==e){return}else{page.timelineRefresher.stop()}}page.newResults=null;page.timelineRefresher=new Occasionally(b.delay*1000,b.max_delay*1000,function(){var f=false;if($("ol#timeline").length){$.ajax({method:"GET",dataType:"json",url:a,data:{since_id:getMaxStatusIdFromTimeline(),refresh:true},success:function(g){processTimelineRefresh(g,e)},error:function(){if(page.timelineRefresher){page.timelineRefresher.stop();page.timelineRefresher=null}}})}},function(){return page.newResults},b.decay);page.timelineRefresher.dispatchAction=e;page.timelineRefresher.start()}function getMaxStatusIdFromTimeline(){var a=0;$("ol#timeline > li").each(function(){var b=parseInt(this.id.replace(/^[A-Z_]+/gi,""));if(a<b){a=b}});return a}function processTimelineRefresh(l,d){if(twttr.is.def(l.users)){twttr.User.merge(l.users)}var g=$("#new_results_notification").meta().timeline;var m=$("<div>"+l["#timeline"]+"</div>");var a=$("#content ol#timeline");m.find("#timeline > li").each(function(){if(a.find("li#"+this.id).length){$(this).remove()}});var f=m.find("ol > li");var c=f.length;var e=($("#new_results_notification").data("count")||0)+c;if(c){a.prepend(f.addClass("buffered"));m.remove();a.find("li.buffered:gt("+(g.max_refresh_size-1)+")").remove();var b={results_count:numberWithDelimiter(e),username:getSessionUserScreenName()};var j=$("#results_update").is(":visible")?"":' style="display:none;"';var k='<a id="results_update" class="minor-notification" href="/'+d+'" accesskey="n"'+j+">";if(d=="inbox"){k+=((e==1)?_("1 new message."):_("%{results_count} new messages.",b))}else{if(d=="replies"){k+=((e==1)?_("1 new mention of @%{username}.",b):_("%{results_count} new mentions of @%{username}.",b))}else{if(d=="search"){k+=((e==1)?_("1 new tweet since you started searching."):_("%{results_count} new tweets since you started searching.",b))}else{k+=((e==1)?_("1 new tweet."):_("%{results_count} new tweets.",b))}}}k+="</a>";$("#results_update").replaceWith(k);$("#results_update").click(function(){$("#content ol#timeline > li.buffered").addClass("unbuffered").removeClass("buffered");$("#content ol#timeline > li.last-on-refresh").removeClass("last-on-refresh");$("#content ol#timeline > li.unbuffered:last").addClass("last-on-refresh");updateTimeAgo();$("#content ol#timeline > li.unbuffered").removeClass("unbuffered");$("#results_update").hide();addCountToDocumentTitle();$.Timeline.triggerPageHeightChangedEvent();$.Timeline.triggerTimelineChanged();$("#new_results_notification").data("count",0);return false});$("#new_results_notification").data("count",e);$("#results_update:hidden").slideDown("normal",function(){$.Timeline.triggerPageHeightChangedEvent();var n=$(this);if(twttr.is.def(twttr.HOVERCARD)){twttr.HOVERCARD.reposition(n.get(0).offsetHeight+parseInt(n.css("margin-top")))}});addCountToDocumentTitle(e);if(g.interrupt&&page.timelineRefresher){page.timelineRefresher.stop()}}else{m.remove()}page.newResults=(c>0)}$(document).ready(function(){$().Page();twttr.setDefaultBucket();initializeTimeline();$("#pagination #more").isMoreButton();$("body").bind("ajaxSuccess",twttr.setupRetweetTips);twttr.setupRetweetTips();$("span.byline a").tipsy({gravity:"n"});$("#content #trend_description img").tipsy({gravity:"s"});$("a.promoted-trend").promotedTrendsTipsy()});$.fn.promotedTrendsTipsy=function(){return this.each(function(){var e=$(this);var a=e.find("span");var d=e.attr("data");var b=JSON.parse(d);var c=_("Promoted by %{name}",{name:b.promoted_content["user"]["name"]});a.attr("title",c);a.tipsy({gravity:"n",html:true,additionalCSSClass:"garuda-tipsy-container",showTimeout:300})})};twttr.augmentObject(twttr,{RETWEETING_BACKGROUND_COLOR:"#ffffe5",_bucket:null,setDefaultBucket:function(){this._bucket=parseInt(page.sessionUserId)%2},getBucket:function(){return this._bucket},setBucket:function(a){this._bucket=a},applyTipsy:function(a,c,b){if(!a.data("tipsy_applied")){a.data("tipsy_applied",true);a.attr("title",a.attr("title")+c);a.tipsy(b)}},isRetweetTimeline:function(){return !!(location.hash&&location.hash.match(/retweet/))},setupRetweetTips:function(){$("span.status-body span.shared-content a.screen-name, div.shared-by-avatar-tiles a.profile-pic img.photo").each(function(){var a=$(this);if(a.data("tipsy_applied")||!twttr.isRetweetTimeline()){return}var b="left-align";var c="";if($("body#home").length>0&&!a.hasClass("you")){var c=_('<div class="retweet_tip_tip">Tip: To hide/show retweets from this user, click on their username and look for the retweet setting <div class="retweet-icon"></div></div>');b+=" retweet-tooltip"}twttr.applyTipsy(a,c,{gravity:"l",hideTimeout:10000,additionalCSSClass:b})});$("span.big-retweet-icon").each(function(){if($("body#profile").length==0){twttr.applyTipsy($(this),"",{gravity:"s",hideTimeout:10000})}else{$(this).attr("title","")}})},getStatusBodyParent:function(a){return a.parents(".status-body").parent()},setRetweetingStyles:function(b,e,d){var a=getListItemFromChild(b);var c=twttr.getStatusBodyParent(b);c.append("<span class='retweeting loading'>"+e+"</span>");a.addClass("no-hover");if($("body.status").length==0){a.css("background-color",twttr.RETWEETING_BACKGROUND_COLOR)}},unsetRetweetingStyles:function(b){var a=getListItemFromChild(b);var c=twttr.getStatusBodyParent(b);a.removeClass("no-hover");c.find(".retweeting.loading").remove()},animateStatusReplacement:function(b,d){var c=getListItemFromChild(b);var f=$(d.status_li);f.hide();c.after(f);if(c.hasClass("latest-status")){f.addClass("latest-status")}var a=f.height();var e=c.height();f.remove().show().height(e);if($("body.status").length==0){f.css("background-color",twttr.RETWEETING_BACKGROUND_COLOR)}c.replaceWith(f);if(a!=e){f.animate({height:a},500,function(){f.css("height",null);twttr.animateStatusColorChange(f)})}else{twttr.animateStatusColorChange(f)}if(d.latest_status){$("#latest_status").html(d.latest_status).isCurrentStatus(true)}},animateStatusColorChange:function(a){a.animate({backgroundColor:"#FFF"},1500,function(){a.css("background-color",null)})}});$.fn.Page=function(){var a=$('meta[name="session-user-screen_name"]:first').get(0);var d=$('meta[name="page-user-screen_name"]:first').get(0);var b=$('meta[name="session-userid"]:first').get(0);var c=a&&d&&a.content==d.content;if(typeof(page)=="undefined"){page={}}page=$.extend(page,{timeline:null,sessionUserScreenName:(a?a.content:null),sessionUserId:(b?b.content:null),pageUserScreenName:(d?d.content:null),loggedIn:$('meta[name="session-loggedin"][content="y"]').length>0,hideUnfavorited:c,isTimelineChange:false,currentTimelineChange:{},$oldTimelineLink:""})};$.Statuses={initialize:function(a){if(page.loggedIn){var b=$(a).find(".hentry");$.each($.Statuses.actions,function(){var c=this;c.apply(b)})}},actions:{isTweet:function(){this.livequery(function(){var a=$("body#show.status").length>0;var b=$("body#profile").length>0;if(!a&&!b){var c=$(this).find("a.hashtag");c.isSearchLink(SEARCH_CALLBACKS.hashtagLink)}})},isHoverable:function(){if($("body.ie,body.ie6").get(0)){this.livequery(function(){var a=$(this);a.hover(function(){a.addClass("hover")},function(){a.removeClass("hover")})})}},isFavoriteable:function(){$(".fav-action").live("click",function(){var d=$(this);if(d.hasClass("blocked")){return false}var b=d.parents(".hentry:first");var e=b.attr("id").replace(/status_/,"");var c=d.hasClass("fav")?"destroy":"create";twttr.googleAnalytics("/favorites/"+c+"/refresh/"+e);function a(){var f=d.hasClass("fav");d.removeClass(f?"fav":"non-fav").addClass(f?"non-fav":"fav").attr("title",(f?_("favorite this tweet"):_("un-favorite this tweet")))}$.ajax({type:"POST",dataType:"json",url:"/favorites/"+c+"/"+e,data:{authenticity_token:twttr.form_authenticity_token},beforeSend:function(){a();d.addClass("blocked")},complete:function(){d.removeClass("blocked")}});return false},this)},isReplyable:function(){$(".reply").live("click",function(){var e=$(this);var c=e.parents(".hentry:first");var g=c.attr("id").replace(/status_/,"");var a=c.attr("class").match(/u-([A-Za-z0-9_]+)/);var b=a[1];if(!b){alert(_("Whoops! Something went wrong. Please refresh the page and try again!"));return}if(c.hasClass("direct_message")){var f=$("#text");twttr.googleAnalytics("/direct_messages/reply/"+b+"/"+g);var d=$("#direct_message_user_id");if(!d.find("option[text='"+b+"']").attr("selected",true).length){d.append('<option value="'+b+'" selected="selected">'+b+"</option>")}f.trigger("update");$("#text").focusEnd()}else{if(c.hasClass("status")||c.hasClass("share")){var f=$("#status");twttr.googleAnalytics("/reply/"+b+"/"+g);if(f.size()){f.val("@"+b+" "+f.val().replace(RegExp("@"+b+" ?","i"),"")).trigger("update");$("#status").focusEnd();$("#in_reply_to_status_id").val(g);$("#in_reply_to").val(b);window.scroll(0,0)}else{window.location=e.find("a").attr("href");return false}}}window.scroll(0,0);return false},this)},isRetweetable:function(){$(".retweet-link").live("click",function(a){new RetweetInlineForm().show({targetNode:$(this)});a.preventDefault()},this)},isDeleteable:function(){$(".del").live("click",function(d){var c=$(this);var a=c.parents(".hentry:first");var g=a.attr("id").replace(/[^\d]*/,"");var f=a.hasClass("latest-status");var b;if(a.hasClass("direct_message")){b="/direct_messages/destroy"}else{b="/status/destroy"}if(confirm(_("Sure you want to delete this tweet? There is NO undo!"))){twttr.googleAnalytics(b+"/refresh/"+g);$.ajax({type:"POST",url:b+"/"+g,data:{authenticity_token:twttr.form_authenticity_token,latest_status:f},dataType:(b=="/status/destroy"?"json":null),beforeSend:function(){a.fadeOut(500);updateCount("#update_count",-1,250)},success:function(e){a.remove();if(b=="/status/destroy"){if(f){twttr.processJson(e);updateLatest()}}setCount("#update_count",e.status_count)},error:function(e){a.fadeIn(0);var j=_("Whoops! Something went wrong. Please try again!");if(e&&e.status==403&&e.responseText!=""){j=e.responseText}(new InfoNotification()).setMessage(j).show()}})}d.preventDefault()},this)},isUndoable:function(){$(".undo").live("click",function(){var c=$(this);var b=c.parents(".hentry:first");var a=b.attr("id").replace(/status_/,"");$.ajax({type:"POST",url:"/statuses/"+a+"/retweet",data:{_method:"delete",authenticity_token:twttr.form_authenticity_token,controller_name:page.controller_name,action_name:page.action_name,user_screenname:page.pageUserScreenName},dataType:"json",beforeSend:function(){c.attr("title","").removeClass("undo");twttr.setRetweetingStyles(c,_("Undoing..."))},success:function(d){if(d.status_li){twttr.animateStatusReplacement(c,d)}else{b.fadeOut(500,function(){var e=$("ol#timeline .hentry:visible:first");if(!e.hasClass("share")){e.addClass("latest-status")}})}(new InfoNotification()).setMessage(_("Your followers will no longer see the tweet as retweeted by you.")).show()},complete:function(){twttr.unsetRetweetingStyles(b)}});return false},this)},isMappable:function(){$(".geo_pin").live("click",function(){var b=jQuery(this);var a=b.next();var c=b.position();a.css({left:c.left-25,bottom:c.top+20});a.show();a.find(".map_close").click(function(){a.hide();return false})},this)}}};$.Timeline={prepend:function(a){$("#timeline").prepend(a);$.Timeline.triggerTimelineChanged()},append:function(a){$("#timeline").append(a);$.Timeline.triggerTimelineChanged()},registerTimelineEvent:function(a){$("body").bind("timeline-changed",a)},unregisterTimelineEvent:function(a){$("body").unbind("timeline-changed",a)},triggerTimelineChanged:function(){$("body").trigger("timeline-changed")},registerPageHeightChangedEvent:function(a){$("body").bind("page-height-changed",a)},unregisterPageHeightChangedEvent:function(a){$("body").unbind("page-height-changed",a)},triggerPageHeightChangedEvent:function(){$("body").trigger("page-height-changed")}};function basicMoreButtonHandler(a){return function(){var c=$(this);c.blur();if(c.hasClass("loading")){return false}var b=c.attr("href");var d=$("#more").text();$.ajax(jQuery.extend({type:"GET",url:b,dataType:"json"},a));return false}}$.fn.isMoreButton=function(){return this.live("click",basicMoreButtonHandler({beforeSend:function(){$("#timeline li:last-child").addClass("last-on-page");$("#more").addClass("loading").html("")},success:function(a){updateTimeAgo();if(twttr.is.def(a.users)){twttr.User.merge(a.users)}$("#timeline").append($(a["#timeline"]).find(".hentry"));$("#pagination").html(a["#pagination"]);page.retainTimeline=true;if(window.onPageChange){onPageChange()}page.retainTimeline=null;$.Timeline.triggerTimelineChanged()},error:function(){$("#timeline li:last-child").removeClass("last-on-page");$("#more").removeClass("loading").text(_("more"));(new ShortNotification()).setMessage(_("Whoops! Something went wrong. Please try again!")).show()}}))};$(function(){var request=function(data,success){return function(){var self=this;var $this=$(this);var notification=(new ProgressNotification()).setProgressMessage($this.attr("progress")).setCompletedMessage($this.attr("completed"));$.ajax({type:$this.attr("method"),dataType:"json",url:$this.attr("href")||$this.attr("action"),data:data.apply(self),success:function(){notification.done();if(success){success.apply(self)}},beforeSend:function(){twttr.loading();notification.show()},complete:twttr.loaded});return false}};$("form.restful").livequery("submit",request(function(){return $(this).serializeArray()},function(){$(this).trigger("submitted")}));$("a.restful").livequery("click",request(function(){return eval("("+$(this).attr("data")+")")}))});function updateLatest(){var a=$("#latest_status");if(a.length){a.isCurrentStatus(true)}$("#timeline li:first").addClass("latest-status")}function setTitleAndHeading(j){var t=$("#timeline_heading h1");var r=$("#timeline_heading h2");var j=j||$("body").attr("id");var c=h(page.query);var f=h(page.prettyQuery);var l=getSessionUserScreenName();var b=$('meta[name="page-user-screen_name"]:first').get(0)||$('meta[name="page-user-screen_name"]').get(0);if(b){var o=b.content}if(!twttr.titles_and_headings){var p={user:l,name:page.user_fullname,pageUser:o};twttr.titles_and_headings={home:{title:_("Home"),heading:_("Home")},replies:{title:("@"+l),heading:_("Tweets mentioning @%{user}",p)},favorites:{title:_("Your Favorites"),heading:_("Your Favorites")},inbox:{title:_("Direct Messages"),heading:_("Direct messages sent only to you")},direct_messages:{title:_("Direct Messages"),heading:_("Direct messages sent only to you")},sent:{title:_("Sent Direct Messages"),heading:_("Direct messages you've sent")},retweets_by_others:{title:_("Retweets",p),heading:"&nbsp;"},profile_favorites:{title:_("%{pageUser}'s Favorites",p),heading:_("%{pageUser}'s Favorites",p)},profile:{title:_("%{name} (%{pageUser}) on Twitter",p),heading:null}}}var k,e='<li class="name-search-link"><a href="#">'+_("Search for users &raquo;")+"</a></li>";if(page.searchError!=undefined){k={title:page.searchError,heading:("<ul>"+e+"</ul>"+page.searchError)}}else{if(j=="search"){k={title:_("Search - %{query}",{query:f})};var g=$("#side #saved_searches ul.sidebar-menu li.active");var q;if(g.length){var m=g.attr("id").replace("ss_","");q='<a href="/saved_searches/destroy/'+m+'" title="'+f+'" _query="'+c+'" class="delete-search-link">'+_("Remove this saved search")+"</a>"}else{q='<a href="/saved_searches/create" class="save-search-link" title="'+f+'" _query="'+c+'" _place_details="'+h(page.placeDetails)+'" _place_map_link="'+h(page.placeMapLink)+'">'+_("Save this search")+"</a>"}var d=($("li.status").length>0);if(d){e='<ul class="has-saved-search"><li>'+q+"</li>"+e+"</ul>"}else{e="<ul>"+e+"</ul>"}if(d){k.heading=e+_("Real-time results for <b>%{query}</b>",{query:f})}else{k.heading=e+_("No real-time results for <b>%{query}</b>",{query:f})}}else{k=twttr.titles_and_headings[j]}}if(k){var n=(j=="profile")?"":"Twitter / ";setDocumentTitle(n+k.title);r.remove();if(k.heading){t.html(k.heading);t.parent("div").show()}else{t.parent("div").hide()}var a=$("#geo_place_details");if(page.placeDetails){a.text(page.placeDetails);$('<span class="geo_map_link_separator">|</span><a target="_blank" href="'+h(page.placeMapLink)+'">map</a>').appendTo(a);a.show()}else{a.hide()}if(j=="search"){t.find(".save-search-link").isSaveSearchLink().end().find(".delete-search-link").isRemoveSearchLink()}$("#heading .name-search-link a").attr("href","/search/users?q="+encodeURIComponent(page.query))}}function loadTrendDescriptions(){if(!page.trendDescriptions){page.trendDescriptions={}}$("#trends a").each(function(){var b=$(this);var d=b.parent().find("em");if(d.length){var c=b.text();var e=d.text().replace(new RegExp(c.replace(/([^\w])/gi,"\\$1"),"gi"),"<strong>"+c+"</strong>");var f=b.attr("title").length?b.attr("title"):b.attr("name");page.trendDescriptions[f]=[c,e]}});var a=page.trendDescriptions[page.query];if(a){$("#trend_info").hide();$("#trend_description span").text(_("%{trend} is a popular topic on Twitter right now.",{trend:a[0]}));$("#trend").text(_("%{trend}",{trend:a[0]}));$("#trend_description p").html(a[1]);$("#trend_description").show()}else{$("#trend_description").hide();$("#trend_info").show()}(a&&a[1].length>0)?$(".trenddesc").show():$(".trenddesc").hide()}$.fn.isSaveSearchLink=function(){return this.each(function(){var a=$(this);var b=$("#saved_searches");var c=b.find("ul.sidebar-menu");a.click(function(){if(c.find("li").length>=10){(new InfoNotification()).setMessage(_("You can only save ten searches. To remove a saved search, select the search and click <strong>remove this saved search</strong>.")).show();return false}var d=a.attr("title");var f=a.attr("_query")||d;var e=$('<li><a href="/search?q='+encodeURIComponent(f)+'" class="search-link" title="'+h(d)+'" _query="'+h(f)+'" _place_details="'+h(a.attr("_place_details"))+'" _place_map_link="'+h(a.attr("_place_map_link"))+'"><span>'+h(d)+"</span></a></li>");e.find("a").isSearchLink(SEARCH_CALLBACKS.savedSearchLink);e.fadeOut(1,function(){c.append(e);e.fadeIn(100)});if(b.hasClass("collapsed")){b.trigger("expand")}b.fadeIn();$("#side ul.sidebar-menu li").removeClass("active");$("#side #custom_search").removeClass("active");e.addClass("active");$.ajax({type:"POST",dataType:"json",url:"/saved_searches/create",data:{q:f,authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){a.replaceWith('<span class="loading">'+_("Save this search")+"</span>")},success:function(g){e.attr("id","ss_"+g.id);setTitleAndHeading("search")},error:function(g){(new InfoNotification()).setMessage(g.responseText).show();e.remove()}});return false})})};$.fn.isRemoveSearchLink=function(){return this.each(function(){var a=$(this);var c=a.attr("_query");var b=a.attr("href");a.click(function(){var d=$("#side #saved_searches li a[_query='"+c+"']").parent("li");d.fadeOut(100,function(){d.remove();var e=$("#saved_searches ul.sidebar-menu a");if(e.length==0){$("#saved_searches").hide()}setTitleAndHeading("search");$("#side #custom_search").addClass("active")});$.ajax({type:"POST",url:b,data:{authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){a.replaceWith('<span class="loading">'+_("Remove this saved search")+"</span>")},error:function(){(new InfoNotification()).setMessage(_("Whoops! Something went wrong. Please refresh the page and try again!")).show()}});return false})})};function showSearchHelpText(){if($("#timeline li").length==0){var a=[_("Try a more general search."),_("Try using different words.")];var b='<div class="no-results">'+_("Suggestions:")+"<ol>";for(var c=0;c<a.length;c++){b+="<li>"+a[c]+"</li>"}b+="</ol></div>";setTimeout(function(){$("#timeline_heading").after(b)},1)}else{if($("#pagination a.more").length==0){$("#pagination").empty().html('<p class="no-more-tweets">'+_("Older tweets are temporarily unavailable.")+"</p>")}}}function onPageChange(a){var c=$("body").attr("id");if(c!="search"){$("#sidebar_search_q").val("").blur()}else{twttr.updateLocation("search?q="+encodeURIComponent(page.query))}setTitleAndHeading(c);loadTrendDescriptions();if(c=="search"&&page.searchError==undefined){showSearchHelpText()}page.searchError=undefined;if(!a){if(!page.retainTimeline){$("#results_update").hide()}$(".no-results").remove();$("#new_results_count").html("0")}if(!$("body").hasClass("front")){$(".in-page-link").isInPageLink();$(".in-page-list-link").isListInPageLink();try{$(".in-page-list-label").isListInPageLabel();$(".in-page-label").isInPageLabel()}catch(b){}}if(c=="list"||c=="list_show"){c=(window.location.hash||window.location.pathname).replace(/^#/,"").replace(/^([^\/])/,"/$1");if(c.indexOf("/list")!=0){c="/list"+c}}twttr.trackPageView(c,(page.query&&page.query.length>0?page.query:null),a?null:"/ajax")}function initializePage(a){if(("home".indexOf(a)==-1)&&($("body#list_show").length==0)){twttr.updateLocation(a)}initializeSidebar();$("#side form#sidebar_search").isSearchForm();$("#side .collapsible").isCollapsibleMenu();onPageChange(true);timelineRefresh(a);$(".saved-search-links li a").isSearchLink(SEARCH_CALLBACKS.savedSearchLink);$("#dm_tabs a, #retweet_tabs a").isTimelineTabLink();$("div.bulletin").isBulletin();$("ul.sidebar-menu a").isSidebarTab();highlightSearchTerms()}function highlightSearchTerms(){function c(f,m){var l=document.createElement("div");var e=f.childNodes;for(var g=0,j=e.length;g<j;++g){c(e[g],m)}if(f.nodeType==3){if(!f.nodeValue.match(m)){return}var n=f.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(m,"<em>$1</em>");l.innerHTML=n;var d=f.parentNode;var k=l.lastChild;d.replaceChild(k,f);while(l.firstChild){d.insertBefore(l.firstChild,k)}}}var a={};function b(d){if(a[d]){return a[d]}a[d]=new RegExp("("+d+")","gi");return a[d]}$("#timeline > li .entry-content").livequery(function(){if(location.hash.match(/search\?q=(.+)/)){var e=decodeURIComponent(RegExp.$1);var d=b(e);c(this,d)}})}function initializeSidebar(){if($("#side ul.sidebar-menu li.active").length==0){var b=$("body").attr("id");var a=null;if(b=="search"){b=page.query;if(b){var c=$.grep($("#side ul.sidebar-menu li a"),function(d){return $(d).attr("_query")==page.query})[0];if(c){a=$(c).parent("li")}else{$("#side #custom_search").addClass("active")}}}else{if(b){if(b=="sent"||b=="inbox"){b="direct_messages"}a=$("#side ul.sidebar-menu li#"+b+"_tab")}}if(a&&a.length){$(a.get(0)).addClass("active")}}}$.fn.isCollapsibleMenu=function(){function a(){var b=[];$("#side .collapsible").each(function(){var c=$(this);var e=c.find("h2.sidebar-title").attr("id");if(e){e=e.replace("_menu","")}else{return true}var d=c.hasClass("collapsed")?"C":"O";b.push(e+d)});$.cookie("menus",b.join("_"))}return this.each(function(){var d=$(this);var b=d.find("h2.sidebar-title");function f(g){$.ajax({type:"GET",url:g,dataType:"html",beforeSend:function(){d.addClass("loading")},success:function(j){d.find(".sidebar-menu").remove();b.after(j);c()},complete:function(){d.removeClass("loading")}})}function c(){var g=d.find(".sidebar-menu");d.find("#friends_view_all").fadeIn();g.slideDown(100,function(){d.removeClass("collapsed");a()})}function e(){var g=d.find(".sidebar-menu");d.find("a.xref").fadeOut(100);d.find("div#friends_view_all").fadeOut(100);g.slideUp(100,function(){d.addClass("collapsed");a()})}d.bind("expand",function(){c()});d.bind("collapse",function(){e()});b.click(function(j){if(j.target.nodeName.toLowerCase()=="a"){return true}var g=d.find("a.fetch-contents");if(d.hasClass("collapsed")){d.find("a.xref").fadeIn(100);if(g.length){f(g.attr("href"));g.remove()}else{c()}}else{e()}})})};$.fn.isSidebarTab=function(){var a=this.each(function(){var b=$(this);b.bind("click",function(){b.trigger("active")}).bind("active",null,function(c){if(b.parents("#side").length>0){$(window).scrollTop(0);$("#side ul.sidebar-menu li, #trends_list li").removeClass("active");$("#side #custom_search").removeClass("active");b.parent("li").addClass("active")}}).bind("loading",null,function(c){b.parent("li").addClass("loading")}).bind("loaded",null,function(c){b.parent("li").removeClass("loading")}).bind("aborted",null,function(c){b.parent("li").removeClass("loading")})});return a};$.fn.isInPageLink=function(b){var a=this.each(function(){var c=$(this);var d=c.meta();var e=d.dispatch_action;c.click(function(j){var f=j.srcElement||j.originalTarget||j.target;if(f.tagName.toLowerCase()=="em"){j.stopImmediatePropagation();return true}if($.browser.msie){this.hideFocus=true}var g=c.attr("href");if(e!="search"){page.query=""}if(page.isTimelineChange){page.currentTimelineChange.abort();page.$oldTimelineLink.trigger("aborted")}page.currentTimelineChange=$.ajax({type:"GET",url:g,dataType:"json",beforeSend:function(){page.isTimelineChange=true;c.trigger("loading");page.$oldTimelineLink=c},success:function(k){if(twttr.is.def(k.users)){twttr.User.merge(k.users)}twttr.processJson(k);twttr.updateLocation(e=="list"?"/list"+g:g);if(e){page.action_name=e;$("body").attr("id",e);if(e=="direct_messages"||e=="inbox"||e=="sent"){$("#direct_message_form").trigger("loadrecipients")}if(k.searchError!=undefined){page.searchError=k.searchError}}if(page.timelineRefresher){page.timelineRefresher.stop();page.timelineRefresher=null}addCountToDocumentTitle();timelineRefresh(e,g);$.Timeline.triggerPageHeightChangedEvent();$.Timeline.triggerTimelineChanged()},complete:function(k){onPageChange();$("body").addClass("replyable");c.trigger("loaded");page.isTimelineChange=false;if(b){b(c)}}});return false})});return a};function reloadTimeline(b){var a=(window.location.hash||b).toString().replace(/^#?([^\/])/,"/$1").replace(/^\/?list/,"");page.currentTimelineChange=$.ajax({type:"GET",url:a,dataType:"json",beforeSend:function(){page.isTimelineChange=true},success:function(c){page.searchError=c.searchError;if(twttr.is.def(c.users)){twttr.User.merge(c.users)}twttr.processJson(c);if(page.timelineRefresher){page.timelineRefresher.stop();page.timelineRefresher=null}addCountToDocumentTitle();timelineRefresh(b,a)},error:function(){(new InfoNotification()).setMessage(_("Whoops! Something went wrong. Please refresh the page and try again!")).show()},complete:function(){$("#sidebar_search_q").val("").blur();onPageChange();$("body").addClass("replyable");initializeTimeline();$("#timeline").removeClass("loading");page.isTimelineChange=false;if(b.match(/\/?list\//)){var c=$(".lists-links a[href="+h(a)+"]");$("#side ul.sidebar-menu li, #trends_list li").removeClass("active");$("#side #custom_search").removeClass("active");if(c.length){c.parent("li").addClass("active");setTimelineForListInPageLink(c)}}}})}$.fn.isBulletin=function(){return this.each(function(){var a=$(this);var b=a.find("a.close, a.hide");b.click(function(){a.fadeOut();return false})})};$.fn.isBrowserUpgradeBulletin=function(a){return this.each(function(){var b=$(this);b.find("a.close, a.hide").click(function(){$.cookie(a+"_upgrade","y")})})};$.fn.isDeviceFailBulletin=function(){return this.each(function(){var a=$(this);var b=a.find("a.hide-fail-notice, a.close, a.hide");var c=b.attr("id").replace("hide_device_","");b.click(function(){$.ajax({type:"POST",dataType:"text",url:"/devices/update/"+c,data:{authenticity_token:twttr.form_authenticity_token,"device[fail_alert]":"0",twttr:true},success:function(d){if(d.match(/success/)){a.fadeOut(200)}else{twttr.error()}},beforeSend:null,complete:null});return false})})};$.fn.isDeviceBouncingBulletin=function(){return this.each(function(){var a=$(this);var b=a.find("a.hide-fail-notice, a.close, a.hide");b.click(function(){a.fadeOut(200);return false})})};$.fn.isBouncingEmailBulletin=function(){return this.each(function(){var a=$(this);a.find("a.close, a.hide").click(function(){$.ajax({type:"POST",dataType:"text",url:"/bouncers/reset",data:{authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:null,complete:function(){(new InfoNotification()).setMessage(_("Your email notifications should resume shortly.")).show()}});return false})})};$.fn.isNotificationSetting=function(){return this.each(function(){var b=$(this);var a=b.attr("id").replace("notify_on_","").replace("notify_off_","");b.click(function(){var c=b.attr("value");$.ajax({type:"POST",dataType:"text",url:"/friendships/device_"+c+"/"+a,data:{authenticity_token:twttr.form_authenticity_token,twttr:true},success:function(d){if(d.match(/success/)){$(".follow-control").trigger("refresh",["notify_"+(c=="follow"?"on":"off")])}else{twttr.error()}}})})})};$.fn.isNudgable=function(){return this.each(function(){var a=$(this);a.click(function(){var b=a.parents("form");b.find("input[name=authenticity_token]").val(twttr.form_authenticity_token);b.submit();return false})})};$.fn.isSlugField=function(b,a){return this.bind("keyup",function(){var c=slug($(this).val());if(b){b.val(c)}if(a){a.text(c)}})};var slug=function(a){return a.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^[_-]+|[_-]+$/g,"")};$.fn.isDeleteButton=function(a){if(!confirm(a)){return false}};$.fn.disable=function(){$(this).attr("disabled","disabled").addClass("disabled")};$.fn.enable=function(){$(this).removeAttr("disabled").removeClass("disabled")};$.fn.textAreaSizeLimiter=function(c){var d=$(this);var a=c.maxLength;var b=c.infoMessageSelector;var e=d.parents("form").find("input[type=submit]");d.keyup(function(){var f=d.val().length;if(f>a){e.attr("disabled","DISABLED").removeClass("btn").addClass("dbtn");$(b).show()}else{e.removeAttr("disabled").removeClass("dbtn").addClass("btn");$(b).hide()}})};$.fn.isPasswordStrengthField=function(a,b){return this.each(function(){if(!a){return}if(!b){b={}}var j=$(this);var l=$(a);l.append('<span class="pstrength-text"></span>');var f=l.find(".pstrength-text");function e(m){l.children().each(function(){var n=$(this);if(n.hasClass("pstrength-text")){if(m){n.show()}else{n.hide()}}else{if(m){n.hide()}else{n.show()}}})}function k(n){var r=0;var p=b.minlength?b.minlength:6;if(n.length<p){return{score:n.length,message:_("Too short"),className:"password-invalid"}}if(b.username){var t=(typeof(b.username)=="function")?b.username():b.username;if(t&&(n.toLowerCase()==t.toLowerCase())){return{score:0,message:_("Too obvious"),className:"password-invalid"}}}if($.inArray(n.toLowerCase(),twttr.BANNED_PASSWORDS)!=-1){return{score:0,message:_("Too obvious"),className:"password-invalid"}}if(b.requireStrong){size=10;var m="# ` ~ ! @ $ % ^ & * ( ) - _ = + [ ] { }  | ; : ' \" , . < > / ?".split(" ");m=$.map(m,function(u){return"\\"+u}).join("");var o=["\\d","[a-z]","[A-Z]","["+m+"]"];var q=$.map(o,function(u){return"(?=.*"+u+")"}).join("");if(!n.match(new RegExp("("+q+"){10,}"))){return{score:0,message:_("Too Weak"),className:"password-invalid"}}}r+=n.length*4;r+=(d(1,n).length-n.length)*1;r+=(d(2,n).length-n.length)*1;r+=(d(3,n).length-n.length)*1;r+=(d(4,n).length-n.length)*1;if(n.match(/(.*[0-9].*[0-9].*[0-9])/)){r+=5}if(n.match(/(.*[!@#$%^&*?_~].*[!@#$%^&*?_~])/)){r+=5}if(n.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){r+=10}if(n.match(/([a-zA-Z])/)&&n.match(/([0-9])/)){r+=15}if(n.match(/([!@#$%^&*?_~])/)&&n.match(/([0-9])/)){r+=15}if(n.match(/([!@#$%^&*?_~])/)&&n.match(/([a-zA-Z])/)){r+=15}if(n.match(/^\w+$/)||n.match(/^\d+$/)){r-=10}if(r<0){r=0}if(r>100){r=100}if(r<34){return{score:r,message:_("Weak"),className:"password-weak"}}if(r<50){return{score:r,message:_("Good"),className:"password-good"}}if(r<75){return{score:r,message:_("Strong"),className:"password-strong"}}return{score:r,message:_("Very Strong"),className:"password-verystrong"}}function d(n,q){var m="";for(var p=0;p<q.length;p++){var r=true;for(var o=0;o<n&&(o+p+n)<q.length;o++){r=r&&(q.charAt(o+p)==q.charAt(o+p+n))}if(o<n){r=false}if(r){p+=n-1;r=false}else{m+=q.charAt(p)}}return m}function c(m){if(m&&l.hasClass(m)){return false}l.removeClass("password-weak").removeClass("password-good").removeClass("password-strong").removeClass("password-verystrong").removeClass("password-invalid");return true}function g(){var n=j.val();if(n.length==0){c();e(false)}else{if(n.length){e(true)}}if(n.length>0){var m=k(n);f.html(m.message);if(c(m.className)){l.addClass(m.className)}}}j.bind("show-password-meter",function(){l.show()});j.bind("hide-password-meter",function(){l.hide()});j.keyup(function(){g()});j.blur(function(){if(this.value.length==0){c();j.trigger("hide-password-meter")}});if(j.val()){g();l.show()}})};$.fn.isOAuthApplication=function(){return this.each(function(){var c=$(this);var b=c.attr("id").replace("oauth_application_","");var a=c.find(".revoke-access");a.click(function(){$.ajax({type:"POST",dataType:"json",url:"/oauth/revoke",data:{authenticity_token:twttr.form_authenticity_token,token:b,twttr:true},success:function(d){if(d.revoked){c.addClass("revoked")}else{c.removeClass("revoked")}a.text(d.label)}});return false})})};$.fn.screenName=function(){return $(this).find(".screen-name").text()||page.sessionUserScreenName};$.fn.userId=function(){var a;if(a=$(this).attr("id")){return a.replace("user_","")}else{return page.sessionUserId}};twttr.klass("twttr.MinimumDelayCallback",function(a){this.waitUntil=twttr.getTimeMillis()+a}).method("delay",function(c){var a=twttr.getTimeMillis();var b=this.waitUntil-a;if(b>0){setTimeout(function(){this.delay(c)}.pBind(this),b)}else{c.apply()}});twttr.augmentObject(twttr,{getTimeMillis:function(){return new Date().getTime()}});twttr.augmentObject(twttr,{formatPromotedTrend:function(b,c){b.addClass("promoted-trend");b.attr("data",c);var d=JSON.parse(c);var a=$("<span/>");if(d.promoted_content.advertiser_name){a.append(_("Promoted by %{name}",{name:d.promoted_content.advertiser_name}))}else{a.append(_("Promoted"))}b.append(a).promotedTrendsTipsy();return b}});jQuery.fn.pulsate=function(f,c){var d=$(this);var e=1;var a=function(){e=e+0.5;var g=e>f?function(){}:b;d.fadeIn(c,g)};var b=function(){e=e+0.5;d.fadeOut(c,a)};b()};$("html").keypress(function(c){var b=c.charCode?c.charCode:c.keyCode?c.keyCode:0;var a=$(c.target);if(a&&a.hasClass("a-btn")&&b==32){a.click();c.preventDefault()}});$("#status_update_form").isUpdateForm();twttr.reload=function(){window.location.reload()};twttr.ajaxSetup=function(){$.ajaxSetup({data:{twttr:true,authenticity_token:twttr.form_authenticity_token}})};if(!window.SEARCH_CALLBACKS){window.SEARCH_CALLBACKS={summize:"processSummize",load:"pageLoadSearch",searchLink:"processSearchLink",trendLink:"processTrendLink",savedSearchLink:"processSavedSearchLink",searchForm:"processSearchForm",hashtagLink:"processHashtagLink",inResultsLink:"processInResultsLink",more:"processSearchMore",refresh:"processSearchRefresh"}}twttr.addRetweetSearchTipsy=function(){$("a.meta-retweets").tipsy({gravity:"n",html:true,additionalCSSClass:"garuda-tipsy-container",showTimeout:300});$("a.meta-retweets").click(function(a){a.preventDefault();return false})};twttr.decoratePromotedTweets=function(){$("#timeline li.garuda-tweet").bind("hovercard",function(b,a){var c=twttr.createAdHoverTrackingParameters($(b.target),a);twttr.asyncAdsClickCount(c)});$(".garuda-tweet").each(function(){var a=$(this);if(!a.is(":first-child")){a.siblings(":not(.garuda-tweet):first").before(a)}})};twttr.prepareSearchResults=function(){twttr.addRetweetSearchTipsy();twttr.decoratePromotedTweets()};$(twttr.prepareSearchResults);$.Timeline.registerTimelineEvent(twttr.prepareSearchResults);twttr.searchTwitter=function(b,a){a.trigger("loading");var c=$('<a href="search?q='+encodeURIComponent(b)+'" data="{&quot;dispatch_action&quot;:&quot;search&quot;}" />');c.bind("loaded",null,function(e){a.trigger("loaded")});var d=function(){c.isInPageLink().click()};$("#user_search_results").slideUp();$("#heading").removeClass("hide-name-search");if(!a.hasClass("promoted-trend")){twttr.oneboxUserSearch(b,d)}else{d()}};twttr.oneboxUserSearch=function(c,d){var b=$("#user_search_results"),a=3;c=b.length&&c.split(/\s/).length<3?c.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,""):"";if(c.split(/\:/).length>1){c=""}if(c){$.ajax({type:"POST",url:"/search/namesearch",dataType:"json",data:{q:c,limit:a},success:function(f){var e=Math.min(f.length,a);if(e){var k="",l=[];for(var j=0;j<e;++j){var n=["user"],m=f[j];l.push(m.id);m.escaped_name=m.name?m.name.escapeHTML():m.screen_name;m.profile_url="/"+m.screen_name+"?from_source=onebox";n.push("u-"+m.screen_name);if(!j){n.push("first")}if(j==e-1){n.push("last")}if(m.verified){n.push("verified")}else{if(m["protected"]){n.push("protected")}}k+='<li class="'+n.join(" ")+'" data-position="'+j+'" data-result-user-id="'+m.id+'">';k+=replaceParams('<a class="profilepic" href="%{profile_url}"><img class="fn" src="%{profile_image_url}" alt="%{escaped_name}" /></a><div class="bio"><p class="username"><span><a href="%{profile_url}">%{screen_name}</a></span></p><p class="fullname">%{name}</p></div>',m);k+="</li>"}b.find("ul").attr("class","clearfix size"+e).html(k);b.find("p.seeall a").attr("href","/search/users?q="+encodeURIComponent(c));b.find("h2 strong").html(c.escapeHTML());b.slideDown();$("#heading").addClass("hide-name-search");scribe({event_name:"onebox_search_results",query:c,user_results:l,user_results_count:e},"onebox_user_search",{filter:"onebox_user_search"});var g=function(o){scribe($.extend({event_name:"onebox_click_result"},o),"onebox_user_search",{filter:"onebox_user_search"})};b.find("li a").click(g).bind("hovercard",function(o,p){var r=$(this).parents("li:first"),q={query:c,position:r.attr("data-position"),result_user_id:r.attr("data-result-user-id")};switch(p){case"hovercard-profile-pic":case"hovercard-screen-name":g.call(this,q);break;case"hovercard-follow":scribe($.extend({event_name:"onebox_follow",follow_context:"hovercard"},q),"onebox_user_search",{filter:"onebox_user_search"});break;case"hovercard-show":case"hovercard-loading":setTimeout(function(){$("div.hovercard-inner:first a.tweet-url").each(function(){var t=$(this);t.attr("href",t.attr("href")+"?from_source=onebox")});$("div.hovercard-inner:first a.load-more").click()},5);default:if(p!="hovercard-loading"){scribe($.extend({event_name:"onebox_hovercard_action",hovercard_action:p},q),"onebox_user_search",{filter:"onebox_user_search"})}}})}}})}if(d){d()}};$.fn.isSearchForm=function(){return this.each(function(){var b=$(this);var a=$(b.find('input[type="text"]')[0]);var c=b.find("#sidebar_search_submit");a.Watermark(_("Search")).focus(function(){a.select();return true});c.click(function(){b.submit()});b.submit(function(f){f.preventDefault();var d=a.val();page.query=d;page.prettyQuery=d;page.placeDetails="";if(d!=""){c.addClass("loading");twttr.searchTwitter(d,b)}$("#side ul.sidebar-menu li").removeClass("active");$("#side #custom_search").addClass("active");return false});b.bind("loaded",null,function(d){c.removeClass("loading")})})};$.fn.isSearchLink=function(a){return this.each(function(){var b=$(this);b.click(function(c){c.preventDefault();page.prettyQuery=b.attr("name")||b.attr("title");page.query=b.attr("_query")||page.prettyQuery;page.placeDetails=b.attr("_place_details");page.placeMapLink=b.attr("_place_map_link");twttr.searchTwitter(page.query,b);if(b.parents("#side").length>0){$("#side ul.sidebar-menu li").removeClass("active");b.parent("li").addClass("active")}$("#trends_list li.active a").removeClass("active")})})};var LIST_PUBLIC_MODE="public";var LIST_PRIVATE_MODE="private";var LIST_MAX_NAME_LENGTH=25;var LIST_MAX_DESCRIPTION_LENGTH=100;var numeric_mode=function(a){switch(a){case"public":return 0;case"private":return 1;default:return 0}};var updateListFollowersCount=function(a){return updateCount("#subscribers_tab .stat-count",a)};var updateListFollowingCount=function(a){return updateCount("#members_tab .stat-count",a)};var fadeUserOnListUnfollow=function(a){a.fadeOut("medium",function(){a.remove()})};var onListMembersPage=function(a){return $("body").hasClass("lists_members")&&$('.list-header h2 a[href="'+a.uri+'"]').length==1};var linkToList=function(a,b){a.dispatch_action="list";return'<li><a class="list_'+a.id+'" href="'+a.uri+'" data="'+h(JSON.stringify(a))+'">'+(b?"<em />":"")+"<span>"+listDisplayName(a)+"</span></a></li>"};var listDisplayName=function(a){return(page.sessionUserScreenName&&page.sessionUserScreenName==a.user?h(a.slug):"<b>@</b>"+h(a.user)+"/<wbr/>"+h(a.slug))+lockIconForList(a)};var lockIconForList=function(a){return(a.mode==LIST_PRIVATE_MODE)?'<span class="lock-icon" title="Private List"></span>':""};var findListIndexBySlug=function(a,b){return jQuery.map(a,function(d,c){if(d.slug==b){return c}else{return null}})};$.fn.isUserListMenu=function(){var a=$("#list_menu");return this.one("click",function(){var d=$(this);var e=d.parents(".user");var c={};$.map(e.meta().lists,function(f){c[f.slug]=true});$("body").click();d.addClass("clicked").after(a.html());var b=d.siblings("ul");if(b.find("li:not(.new-list)").size()>=twttr.ListPerUserLimit){b.find(".new-list").remove()}b.find("li").each(function(){var f=$(this);if(f.hasClass("new-list")){f.isNewListLink()}else{f.isUserListItem(c[f.find('input[type="checkbox"]').meta().slug])}});$("html").one("click",function(){d.removeClass("clicked").blur().siblings("ul").remove().end().isUserListMenu();return false});return false})};$.fn.isUserListItem=function(d){var a=function(k,j,f,g){k.show();j.hide();var e=(g=="POST");j.attr("checked",e);f.unbind("click.checkbox");f.bind("click.while-processing",function(){return false})};var c=function(j,g,f,e){j.hide();g.show();f.unbind("click.while-processing");f.bind("click.checkbox",function(k){b.call(this,f,g,j,e);return false})};var b=function(o,f,k,n){var j=n?"DELETE":"POST";var g=o.parents(".user");var m=g.attr("id").replace("user_","");var l={authenticity_token:twttr.form_authenticity_token,twttr:true};var e=o.find('input[type="checkbox"]').meta().uri+"/members";if(j=="POST"){l["member[id]"]=m}else{e+="/"+m}$.ajax({type:j,dataType:"json",url:e,data:l,beforeSend:function(){a(k,f,o,j)},complete:function(){c(k,f,o,n)},success:function(p){n=(j=="POST");f.attr("checked",n);if(j=="POST"){addListToUser(g,p);if(onListMembersPage(p)){updateListFollowingCount(1)}}else{removeListFromUser(g,p);if(onListMembersPage(p)){fadeUserOnListUnfollow(g);updateListFollowingCount(-1)}}},error:function(){f.attr("checked",n)}})};return this.each(function(){var e=$(this);var f=e.find('input[type="checkbox"]');var j=e.find(".loading-spinner");var g=false;if(d){g=f.attr("checked",true)}e.bind("click.checkbox",function(k){b.call(this,e,f,j,g);return false})})};$.fn.isNewListLink=function(){return this.click(function(){var a=$(this).parents(".user");if(a.length==0){a=null}$(this).parent(".ul").remove();openListDialog(true,{userObject:a});return false})};$.fn.isEditListLink=function(){return this.click(function(){openListDialog(false,$(this).meta());return false})};var openListDialog=function(d,f){if(!f){f={}}var g=$("#list_dialog");var b=$(g.html());var a=new twttr.dialog({closeButton:true,content:b,heading:$($("#list_dialog_header").html()),modal:true,width:"405px"});a.bind("close",function(){a.$root.remove()});var e="";a.$root.addClass("list-dialog");if(d){a.$root.addClass("create-list-dialog")}else{e=f.description;a.$root.addClass("update-list-dialog").find('input[type="submit"]').val(_("Update list")).end().find(".list-name").val(f.name).end().find(".list-slug-title-and-slug").show().end().find(".list-description").val(e).end().find(".list-link span").text(f.slug).end().find('input[name="list[mode]"][value="'+numeric_mode(f.mode)+'"]').attr("checked",true);var c=a.find(".private-warning");a.find('input[name="list[mode]"]').change(function(){if(this.value==numeric_mode(LIST_PRIVATE_MODE)&&this.checked){c.show()}else{c.hide()}})}$(".list-description",a.$root).maxLength(LIST_MAX_DESCRIPTION_LENGTH-2);a.find(".list-name").focus();a.$root.isListDialog(d,f,a);a.open()};$.fn.isListDialog=function(c,a,b){return this.each(function(){var g=$(this);var f=a.userObject;var d=g.find("form");d.find(".list-name").one("keyup",function(){console.log("keyup");$(this).siblings(".list-slug-title-and-slug").show()}).isSlugField(d.find(".list-slug-field"),d.find(".list-link span"));if(f){d.find(".list-member-id").val(f.userId())}var e=$(this).find('input[type="submit"]');d.submit(function(k){var j=d.serialize();if(!c){j+="&"+$('<input type="hidden" name="_method" value="PUT" />').serialize()}$.ajax({type:"POST",dataType:"json",url:c?d.attr("action"):a.uri,data:j,beforeSend:function(){e.attr("disabled","disabled")},success:function(l){b.close();b.$root.remove();if(c){addListToMenu(l);if(f){addListToUser(f,l)}addListToLists(l);(new ShortNotification()).setMessage(_("Yay! Your list was created.")).show()}else{window.location=l.uri}},error:function(l){(new InfoNotification()).setMessage(l.responseText).show()},complete:function(){e.removeAttr("disabled","disabled")}});k.preventDefault()})})};$.fn.isDestroyListLink=function(){return this.click(function(d){var c=$(this);var a=c.next("form");var b=a.attr("action");if(confirm(_("Are sure you want to delete this list? There is NO undo!"))){$.ajax({url:b,type:"POST",dataType:"json",data:{_method:"delete",authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){c.disable()},success:function(){document.location="/"},error:function(){c.enable()}})}return false})};$.fn.isSubscribeListLink=function(){return this.click(function(b){var a=$(this);$.ajax({url:a.attr("href"),type:"POST",dataType:"json",data:{authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){a.disable()},complete:function(){a.enable()},success:function(){a.parents(".list").addClass("subscriber");updateListFollowersCount(1)},error:function(){a.parents(".list").removeClass("subscriber")}});return false})};$.fn.isUnsubscribeListLink=function(){return this.click(function(b){var a=$(this);$.ajax({url:a.attr("href"),type:"POST",dataType:"json",data:{_method:"delete",authenticity_token:twttr.form_authenticity_token,twttr:true},success:function(){a.parents(".list").removeClass("subscriber");var c=$("#lists_subscribers #follow_grid #user_"+page.sessionUserId);fadeUserOnListUnfollow(c);updateListFollowersCount(-1)},error:function(){a.parents(".list").addClass("subscriber")}});b.preventDefault()})};$.fn.isListInPageLink=function(){return this.each(function(){var a=$(this);a.isInPageLink(setTimelineForListInPageLink)})};var setTimelineForListInPageLink=function(a){$("#timeline_heading").show();var e=$("#timeline_heading h1");var d=$("#timeline_heading h2");var c=a.meta();var b=h(c.uri);var f=listDisplayName(c);d.remove();e.html(f);e.after('<h2 class="list-subheading"><p class="list-numbers"><a href="'+b+'/members">'+_("Following:")+" <span>"+h(c.member_count)+"</span></a>"+(c.mode==LIST_PRIVATE_MODE?"":'<a href="'+b+'/subscribers">'+_("Followers:")+" <span>"+h(c.subscriber_count)+"</span></a>")+'</p><p class="list-link"><a href="'+b+'">'+_("View list page")+"<span> ›</span></a></p></h2>");if(c.member_count==0){$("#timeline_heading h2").append($(c.user==page.sessionUserScreenName?"#list_no_members_owner":"#list_no_members").html())}setDocumentTitle("Twitter / "+c.full_name)};var addListToUser=function(b,a){return b.each(function(){if(findListIndexBySlug(b.meta().lists,a.slug).length==0){b.meta().lists.push(a);if(b.find(".list-tags").length>0){b.find(".list-tags-outer:hidden").show();b.find(".list-tags").append(linkToList(a))}}})};var removeListFromUser=function(b,a){$.each(findListIndexBySlug(b.meta().lists,a.slug),function(){Array.remove(b.meta().lists,this);b.find(".list-tags .list_"+a.id).each(function(){$(this).parent("li").remove()});if(b.meta().lists.length==0){b.find(".list-tags-outer:visible").hide()}})};var addListToMenu=function(b){var a=$("#list_menu");a.find(".new-list").before('<li><img class="loading-spinner" src="http://s.twimg.com/a/1353701435/images/spinner.gif" style="display: none;" alt="waiting" title="waiting" height="14" width="14"/><input type="checkbox" id="list_'+b.id+'" data="'+h(JSON.stringify(b))+'" /> <label for="list_'+b.id+'">'+h(b.name)+lockIconForList(b)+"</label></li>")};var isInPageLists=function(){return $("#side_lists.in-page-lists").length==1};var addListToLists=function(c){var b=isInPageLists();var a=$("ul.lists-links").siblings(".no-lists").remove().end().append(linkToList(c,b)).find(".list_"+c.id);if(b){a.addClass("in-page-list-link").isListInPageLink().isSidebarTab().click()}};var bindAdminListActions=function(){$("#admin_list a.destroy-list").isDestroyListLink();$("#admin_list a.edit-list").isEditListLink()};var isMoreButton=function(){$("#lists_pagination #more").live("click",basicMoreButtonHandler({beforeSend:function(){$("#more").addClass("loading").html("")},success:function(a){$("#lists_table tbody").append($(a["#lists"]));$("#lists_pagination").html(a["#pagination"])},error:function(){$("#more").removeClass("loading").text(_("more"));(new ShortNotification()).setMessage(_("Whoops! Something went wrong. Please try again!")).show()}}))};$.fn.equals=function(a){return this.length==1&&a.length==1&&this.get(0)==a.get(0)};$.fn.hasParent=function(a){return jQuery.inArray(a[0],this.parents())>-1};function InlineForm(a){this.initialize(a)}jQuery.extend(InlineForm.prototype,{defaultOptions:{title:"",submitBtnValue:"",showCancel:true,closeOnOutsideClick:true,formClass:"",timelineChangedEvents:false,pageHeightChangedEvents:false},overrideDefaultOptions:{},initialize:function(a){this.options=jQuery.extend({},this.defaultOptions);jQuery.extend(this.options,this.overrideDefaultOptions);jQuery.extend(this.options,a);this.$form=$('<div class="inline-form '+this.options.formClass+'"></div>');this.$buttonParent=$('<div class="inline-form-buttons"></div>');this.$button=$('<button type="button" class="btn">'+this.options.submitBtnValue+"</button>");if(this.options.showCancel){this.$cancel=$('<span class="cancel">&nbsp;</span>')}this.$form_inner=$('<div class="inline-form-inner"></div>');this.$input=$('<textarea class="inline-form-input"></textarea>');this.$inputsPrompt=$('<div class="inline-inputs-prompt"></div>');this.$title=$('<div class="title">'+this.options.title+"</div>");this.$body=$('<div class="body">'+(this.options.body||"")+"</div>");this.initEvents()},initEvents:function(){this.buttonEvent=this.submitForm.pBind(this);this.closeEvent=this.close.pBind(this);this.outsideClickEvent=this.destroyFromEvent.pBind(this);this.timelineEvent=this.timelineEvent.pBind(this);if(this.options.timelineChangedEvents){$.Timeline.registerTimelineEvent(this.timelineEvent)}if(this.options.pageHeightChangedEvents){this.pageHeightChangedEvent=this.pageHeightChangedEvent.pBind(this);$.Timeline.registerPageHeightChangedEvent(this.pageHeightChangedEvent)}},addEvents:function(){this.$button.click(this.buttonEvent);if(this.options.showCancel){this.$cancel.click(this.closeEvent)}if(this.options.closeOnOutsideClick){$(window).click(this.outsideClickEvent)}},removeEvents:function(){this.$button.unbind("click",this.buttonEvent);if(this.options.showCancel){this.$cancel.unbind("click",this.closeEvent)}if(this.options.closeOnOutsideClick){$(window).unbind("click",this.outsideClickEvent)}if(this.options.timelineChangedEvents){$.Timeline.unregisterTimelineEvent(this.timelineEvent)}$.Timeline.unregisterPageHeightChangedEvent(this.pageHeightChangedEvent)},onSendError:function(a){if(this.sendNotification){this.sendNotification.cancel()}(new InfoNotification()).setMessage(_("Whoops! Something went wrong. Please refresh the page and try again!")).show();this.close()},onSendSuccess:function(a){},formAction:function(){},timelineEvent:function(){},pageHeightChangedEvent:function(){this.positionForm()},postData:function(){},beforePost:function(){},onComplete:function(){},submitForm:function(){this.$button.disable();var a={authenticity_token:twttr.form_authenticity_token};jQuery.extend(a,this.postData());if(this.progressNotificationText){this.sendNotification=(new ProgressNotification()).setProgressMessage(this.progressNotificationText).setCompletedMessage(_("Ok, done.")).show()}this.beforePost();$.ajax({type:"POST",dataType:"json",dataFilter:function(b){if(!jQuery.trim(b)){return null}return b},url:this.formAction(),data:a,error:function(b){this.onSendError(b)}.pBind(this),success:function(b){this.onSendSuccess(b);this.close();if(this.sendNotification){this.sendNotification.done()}}.pBind(this),beforeSend:twttr.loading,complete:function(){twttr.loaded();this.onComplete()}.pBind(this)})},arrange:function(){var a=$('<div class="inline-form-inputs"></div>');if(this.options.showCancel){this.$buttonParent.append(this.$cancel)}this.$buttonParent.append(this.$button);this.$form_inner.append(a.append(this.$title).append(this.$body).append(this.$inputsPrompt).append(this.$input)).append(this.$buttonParent);this.$form.append(this.$form_inner);this.$form.hide();this.baseElement().append(this.$form)},baseElement:function(){return this.$parentNode||$(document.body)},show:function(a){this.addEvents();this.$targetNode=a.targetNode;this.$parentNode=a.parentNode;this.positionForm();this.arrange();this.$form.fadeIn(100);this.currentlyShown=true;this.afterShow()},afterShow:function(){},positionForm:function(){if(this.$targetNode&&this.$targetNode.width()>0){var c=this.position();var b=c[0];var a=c[1];this.$form.css("top",b).css("left",a)}else{this.close()}},close:function(){this.removeEvents();this.$form.remove();this.currentlyShown=false;this.afterClose()},afterClose:function(){},destroyFromEvent:function(b){var a=$(b.target);if(a.equals(this.$targetNode)||jQuery.inArray(this.$targetNode.get(0),a.parents())!=-1||a.equals(this.$form)||a.hasParent(this.$form)){return}this.close()},position:function(){var a=this.$targetNode.offset();return[a.top,a.left]}});RetweetInlineForm=function(){var a=_("Yes");var b=_("Retweet to your followers?");this.initialize({title:b,submitBtnValue:a})};RetweetInlineForm.prototype=new InlineForm();jQuery.extend(RetweetInlineForm.prototype,{overrideDefaultOptions:{formClass:"retweet-dlg",pageHeightChangedEvents:true},formAction:function(){var b=getListItemFromChild(this.$targetNode);var a=getStatusIdFromListItem(b);return"/statuses/"+a+"/retweet"},postData:function(){return{controller_name:page.controller_name,action_name:page.action_name}},beforePost:function(){this.close();twttr.setRetweetingStyles(this.$targetNode,_("Updating..."))},onSendSuccess:function(a){twttr.animateStatusReplacement(this.$targetNode,a);twttr.countAds(this.$targetNode)},onComplete:function(){twttr.unsetRetweetingStyles(this.$targetNode)},afterShow:function(){getListItemFromChild(this.$targetNode).addClass("perma-hover");this.$targetNode.find("a").blur()},afterClose:function(){getListItemFromChild(this.$targetNode).removeClass("perma-hover")},position:function(){var a=this.$targetNode.offset();return[parseInt(a.top)+20,parseInt(a.left)-220]}});$(document).ready(function(){try{var a="share-text-active";$(".status").each(function(){var e=$(this);var c=e.find(".retweet-link");var d=e.find(".share-text");c.hover(function(){d.addClass(a)},function(){d.removeClass(a)})})}catch(b){}});(function(){jQuery.inherits=function(a,c){function b(){}b.prototype=c.prototype;a.prototype=new b();a.prototype.constructor=a}})();(function(){jQuery.fn.equals=function(a){return this.get(0)==a.get(0)}})();(function(){jQuery.fn.hasParent=function(a){var b=false;this.parents().map(function(){if($(this).equals(a)){b=true}});return b}})();function Notification(b){this.$bar=jQuery('<div class="notification-bar"></div>');this.$barContainer=jQuery('<div class="notification-bar-container"></div>');this.$barContents=jQuery('<div class="notification-bar-contents"></div>');this.$barBackground=jQuery('<div class="notification-bar-bkg"></div>');this.$message=jQuery('<div class="message"></div>');this.$bar.hide();this.$barBackground.hide();var a=this;this.$bar.click(function(c){a.removeAfterEvent(c)});this.className=b}Notification.SLIDE_SPEED_IN_MS=300;Notification.prototype.remove=function(){var a=this;this.slideUp(function(){a.$bar.remove();a.$barBackground.remove();window.clearTimeout(a.timeout)})};Notification.prototype.removeAfterEvent=function(b){var a=$(b.target);if(a.get(0).nodeName.toLowerCase()=="a"&&a.hasParent(this.$message)){return}this.remove()};Notification.prototype.setMessage=function(a){this.msg=a;return this};Notification.prototype.show=function(){this.$message.addClass(this.className).html(this.msg);this.$barContainer.append(this.$barBackground).append(this.$bar.append(this.$barContents.append(this.$message)));jQuery("#notifications").append(this.$barContainer);this.$barBackground.height(this.$bar.height());this.showBar();if(this.onShow){this.onShow()}return this};Notification.prototype.removeInMilliseconds=function(){var a=this;this.timeout=window.setTimeout(function(){a.remove()},a.timeoutInMilliseconds)};Notification.prototype.showBar=function(){this.$bar.show();this.$barBackground.show()};Notification.prototype.onShow=function(){this.removeInMilliseconds()};Notification.prototype.slideUp=function(a){this.$bar.slideUp(Notification.SLIDE_SPEED_IN_MS);this.$barBackground.slideUp(Notification.SLIDE_SPEED_IN_MS,a)};function ShortNotification(){Notification.call(this,"message-info");this.timeoutInMilliseconds=3000}jQuery.inherits(ShortNotification,Notification);ShortNotification.prototype.showBar=function(){this.$bar.slideDown(Notification.SLIDE_SPEED_IN_MS);this.$barBackground.slideDown(Notification.SLIDE_SPEED_IN_MS)};function InfoNotification(){Notification.call(this,"message-info");this.timeoutInMilliseconds=6000}jQuery.inherits(InfoNotification,Notification);InfoNotification.prototype.showBar=function(){this.$bar.slideDown(Notification.SLIDE_SPEED_IN_MS);this.$barBackground.slideDown(Notification.SLIDE_SPEED_IN_MS)};function ProgressNotification(){Notification.call(this,"message-progress");this.timeoutInMilliseconds=1000}jQuery.inherits(ProgressNotification,Notification);ProgressNotification.prototype.setProgressMessage=function(a){return this.setMessage(a)};ProgressNotification.prototype.setCompletedMessage=function(a){this.completedMsg=a;return this};ProgressNotification.prototype.onShow=function(){};ProgressNotification.prototype.cancel=function(){this.timeoutInMilliseconds=0;this.removeInMilliseconds()};ProgressNotification.prototype.done=function(){this.$message.addClass("message-progress-done").removeClass(this.className).html(this.completedMsg);this.removeInMilliseconds()};function ErrorNotification(){Notification.call(this,"message-error");this.timeoutInMilliseconds=8000}jQuery.inherits(ErrorNotification,Notification);function Occasionally(a,d,c,b,e){this.interval=a;this.maxDecayTime=d;this.job=c;this.decayCallback=b;this.timesRun=0;this.decayRate=1;this.decayMultiplier=e||1.25;this.maxRequests=360}Occasionally.prototype.start=function(){this.stop();this.run()};Occasionally.prototype.stop=function(){if(this.worker){window.clearTimeout(this.worker)}};Occasionally.prototype.run=function(){var a=this;this.decayRate=this.decayCallback()?Math.max(1,this.decayRate/this.decayMultiplier):this.decayRate*this.decayMultiplier;var b=this.interval*this.decayRate;b=(b>=this.maxDecayTime)?this.maxDecayTime:b;this.worker=window.setTimeout(function(){a.execute()},Math.floor(b))};Occasionally.prototype.execute=function(){this.job();if(++this.timesRun<this.maxRequests){this.run()}};if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var scrobject={scribeHost:window.location.hostname,toScribeParams:function(a){var b=[];for(var c in a){b[b.length]=encodeURIComponent(c)+"="+encodeURIComponent(a[c])}return b.join("&")},scribeUrl:function(c,b){var a="/scribe?";if(b.host){a=window.location.protocol+"//"+b.host+a}else{if(!/[\/\.]twitter\.com/.test(scrobject.scribeHost)&&!/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/.test(scrobject.scribeHost)&&scrobject.scribeHost!="localhost"){a=window.location.protocol+"//twitter.com"+a}}return a+scrobject.toScribeParams(c)}};function scribe(a,d,c,b){c=c||{};var f=typeof console!=="undefined";if(window.DARKMODE_SCRIBE){return this}if(!d&&f){console.warn("You must specify a category in order to use scribe");return this}if(typeof(a)=="function"){a=a.call(this,b)}if(a==null&&f){console.warn("You must provide logged data in order to use scribe");return this}if(!a.event_name&&f){console.warn('You must include an "event_name" field in your logged data in order to use scribe');return this}var e={log:JSON.stringify(a),ts:(new Date()).getTime()};if(c.filter){e.filter=c.filter}if(d){e.category=d}(new Image()).src=scrobject.scribeUrl(e,c);return this}function scribeAB(a){scribe(a,"www_ab_testing")}function watchABEvent(c,b,d,a){if(c){var e=$(c);if(!d&&e.attr("abdata")){d=JSON.parse(e.attr("abdata"))}args={experimentData:d,handler:a};$(c).bind(b,args,function(f){scribeAB(f.data.experimentData);continuePropogation=true;if(f.data.handler){continuePropogation=f.data.handler();if(!continuePropogation){f.stopPropagation()}}return(continuePropogation)})}}function watchReloadingABLink(b){var a=$(b);if(a&&a.attr("abdata")){var c=JSON.parse(a.attr("abdata"));watchABEvent(a,"click",c,function(){setTimeout('document.location = "'+a.attr("href")+'"',100);return(false)})}}if(!window.console){window.console={warn:function(a){}}}if(window.jQuery){(function(a){a.extend(a.fn,{scribe:function(b,d,c){c=c||{};a(this).bind(c.clientEvent||"mousedown",function(f){window.scribe.call(this,b,d,c,f)});return this}})})(jQuery);(function(b){var a=b("a.ab-reloading");if(typeof a.livequery=="function"){a.livequery(function(){watchReloadingABLink(b(this))})}})(jQuery)}twttr.position={adjacent:function(k,j,a){var f,g;a=(a||{});f=g=j.offset();g.gravity=a.gravity;g.weight=a.weight;var d={height:j.outerHeight(),width:j.outerWidth()};var b={height:k.outerHeight(),width:k.outerWidth()};var c={height:$(window).height(),width:$(window).width()};var e={height:$("body").height(),width:$("body").width()};if(!g.gravity){g.gravity="vertical"}if("vertical,north,south".indexOf(g.gravity)!=-1){if("right,left,center".indexOf(g.weight)==-1){g.weight=(f.left>c.width/2)?"right":"left"}if(g.gravity=="vertical"){g.gravity=((f.top+b.height)>($(window).scrollTop()+c.height))?"south":"north"}if(a.position=="relative"){f={left:0,top:0};g.left=0}if(g.weight=="right"){g.left=f.left-b.width+d.width}else{if(g.weight=="center"){g.left=f.left-((b.width-d.width)/2)}}g.top=(g.gravity=="north")?(f.top+d.height):(f.top-b.height)}if("horizontal,east,west".indexOf(g.gravity)!=-1){if("top,bottom,center".indexOf(g.weight)==-1){if((f.top-(b.height/2))<0){g.weight="top"}else{if((f.top+(b.height/2))>Math.max(c.height,e.height)){g.weight="bottom"}else{g.weight="center"}}}if(g.gravity=="horizontal"){g.gravity=((f.left+(d.width/2))>c.width/2)?"east":"west"}if(a.position=="relative"){f={left:0,top:0};g.top=0}if(g.weight=="center"){g.top=f.top+(d.height/2)-(b.height/2)}else{if(g.weight=="bottom"){g.top=f.top-b.height+d.height}}g.left=(g.gravity=="west")?(f.left+d.width):(f.left-b.width)}return g},center:function(a){var c=$(window);var b={top:parseInt((c.height()-a.outerHeight())/2),left:parseInt((c.width()-a.outerWidth())/2)};if($("body.ie6").length){b.top+=c.scrollTop();b.left+=c.scrollLeft()}return b}};twttr.klass("twttr.dialog",function(a){this.opts=a;this.$heading=a.heading?$(a.heading):false;this.$footer=a.footer?$(a.footer):false;this.$content=$(a.content);this.createShell();this.bindEvents()}).widget().method("getHeaderHTML",function(){if(this.$heading&&this.$heading.length){return"<h2><span>"+this.$heading.html()+"</span>"+(this.opts.closeButton?'<a href="#" class="modal-close">&times;</a>':"")+"</h2>"}else{return(this.opts.closeButton?'<span class="no-heading"><a href="#" class="modal-close right">&times;</a></span>':"")}}).method("getShellHTML",function(){var a=(this.opts.modal===false);return['<div class="twttr-dialog'+(this.opts.cssClass?" "+this.opts.cssClass:"")+'" style="display: none;">','<div class="hanging"'+(this.opts.zIndex?' style="z-index: '+this.opts.zIndex+' !important;"':"")+">",'<div class="modal">','<div class="modal-inner">',this.getHeaderHTML(),'<div class="modal-content"> </div>',"</div>","</div>","</div>",(a?"":'<div class="modal-overlay"></div>'),"</div>"].join("")}).method("createShell",function(){var c=this;this.$root=$(this.getShellHTML());if(this.opts.width){this.find(".hanging").css({width:this.opts.width})}var d=this.$content.parent().length?this.$content.parent():$(document.body);this.$content.move(this.find(".modal-content"));if(this.$footer.length){this.find(".modal-content").after('<div class="footer"></div>');this.$footer.move(this.find(".footer"))}if(this.opts.renderInline){d.append(this.$root)}else{$(document.body).append(this.$root)}if(this.opts.fixed===false){this.find(".hanging").css({position:"absolute"})}var b=this.$root.find(".modal-submit");if(b.length>0){if(c.opts.noajax){b.bind("click",function(f){b.closest("form").submit()});return}var a=c.opts.ajax.complete;b.bind("click",function(g){g.preventDefault();b.attr("disabled",true);b.addClass("dbtn").removeClass("btn");var f=$(this).closest("form");$.ajax($.extend((c.opts.ajax||{}),{type:f.attr("method"),url:f.attr("action"),data:f.serialize(),complete:function(e){b.attr("disabled",false);b.addClass("btn").removeClass("dbtn");if(a){a(e)}}}))})}}).method("bindEvents",function(){var a=this;this.find(".modal-close").click(function(b){b.preventDefault();a.close()});if(this.find(".modal-close").length){$(document).keydown(function(b){if(b.which==27){b.preventDefault();a.close()}})}if(this.opts.popup){$(document).click(function(b){if(a.opened&&!$(b.target).parents(".modal").length){a.close()}})}}).method("windowHeight",function(){return $(window).height()}).method("scrollTop",function(){return $(window).scrollTop()}).method("open",function(){this.$root.fadeIn("fast");var a=this.find(".hanging");var b=this.center(a);if(this.opts.top){b.top=this.opts.top}if(this.opts.left){b.left=this.opts.left}if(this.opts.maxTop){b.top=Math.min(b.top,this.opts.maxTop)}if(this.opts.maxLeft){b.left=Math.min(b.left,this.opts.maxLeft)}a.css({top:b.top,left:b.left});this.$root.trigger("open");this.opened=true;if(this.windowHeight()<a.outerHeight()){a.css("position","absolute");a.css("top",this.scrollTop()+"px")}else{if(this.opts.fixed===false){a.css("top",b.top+this.scrollTop())}}this.$root.find("input[type=text]:first").focus()}).method("close",function(){this.$root.fadeOut("fast");this.opened=false;this.$root.trigger("close")}).method("toggle",function(){this.opened?this.close():this.open()});twttr.augmentObject(twttr.dialog.prototype,twttr.position);twttr.auxo("AttachedDialog",twttr.dialog).method("open",function(){this.$root.addClass("attached");this.$root.fadeIn("fast");this.opened=true;if(!this.positioned){var a=this.find(".hanging");var d=this.adjacent(this.find(".hanging"),$(this.opts.handle),this.opts);if(this.opts.offsetX){d.left+=this.opts.offsetX}if(this.opts.offsetY){d.top+=this.opts.offsetY}twttr.augmentObject(this.opts,d);var b=this.opts.gravity;if(b&&("horizontal,vertical".indexOf(b)==-1)){if("north,south".indexOf(b)==-1){var c=parseInt(this.find(".hanging").height());this.find(".modal-inner").prepend('<div class="'+b+'" style="height:'+c+'px;"></div>');d.left+=this.nudge(b);d.top+=this.nudge(this.opts.weight)}else{this.find(".modal")[(b=="north"?"before":"after")]('<div class="'+b+'"></div>');d.top+=this.nudge(b);d.left+=this.nudge(this.opts.weight)}}this.find(".hanging").css({top:d.top,left:d.left});if(this.opts.weight&&this.opts.weight!="auto"){this.find(".hanging").addClass("weight-"+this.opts.weight)}if(this.opts.modal){this.find(".modal-overlay").height(Math.max($(window).height(),$("body").height())+25)}this.positioned=true}}).method("nudge",function(a){return(twttr.AttachedDialog.offsets[a]||0)});twttr.AttachedDialog.offsets={top:-15,bottom:30,east:-10,west:10,south:-10,north:4};$.extend($.fn,{hoverTip:function(a,e){e=(e||{});var f=false;var b=$(this);var g=$(a);var d=document.all&&($.browser.version<8);var c=false;if(d){$("body").append(g);g.hover(function(j){clearTimeout(c)},function(j){g.fadeOut("fast")})}else{e.position="relative";b.prepend(g)}b.hover(function(j){f=setTimeout(function(){clearTimeout(f);pos=twttr.position.adjacent(g,b,e);var k=pos.top;g.css({left:pos.left,top:k}).fadeIn("fast")},400)},function(k){var j=$(k.target);clearTimeout(f);if(!j.is(b)){c=setTimeout(function(){g.fadeOut("fast")},(d?200:0))}})}});(function(a){a.fn.extend({isSigninMenu:function(){return this.each(function(){var d=a(this),b=a(".signin"),c=d.find(".textbox input"),e=true;b.bind("click focus",function(g){g.preventDefault();if(!e){return}e=false;setTimeout(function(){e=true},500);var f=a(this);f.toggleClass("menu-open");d.toggleClass("offscreen");if(f.hasClass("menu-open")){a(document).trigger("signinMenu.show");setTimeout(function(){a("#username").focus()},50)}else{a(document).trigger("signinMenu.hide");c.val("");setTimeout(function(){a("#home_search_q, #searchform_q").focus()},0)}});c.bind("focus keydown",function(f){if((f.type=="keydown"&&f.keyCode==27)||(f.type=="focus"&&!b.hasClass("menu-open"))){b.trigger("click")}});d.mouseup(function(){return false});a(document).mouseup(function(f){if(a(f.target).parent("a.signin").length==0&&b.hasClass("menu-open")){b.trigger("click")}})})}})})(jQuery);
