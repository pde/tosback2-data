/*!
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left")}catch(a){setTimeout(ma,1);return}c.ready()}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function X(a,b,d,f,e,j){var i=a.length;if(typeof b==="object"){for(var o in b)X(a,o,b[o],f,e,d);return a}if(d!==w){f=!j&&f&&c.isFunction(d);for(o=0;o<i;o++)e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);return a}return i?
e(a[0],b):w}function J(){return(new Date).getTime()}function Y(){return false}function Z(){return true}function na(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;i=c.data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;var u=i.live.slice(0);for(k=0;k<u.length;k++){i=u[k];i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1)}j=c(a.target).closest(f,a.currentTarget);n=0;for(r=
j.length;n<r;n++)for(k=0;k<u.length;k++){i=u[k];if(j[n].selector===i.selector){o=j[n].elem;f=null;if(i.preType==="mouseenter"||i.preType==="mouseleave")f=c(a.relatedTarget).closest(i.selector)[0];if(!f||f!==o)d.push({elem:o,handleObj:i})}}n=0;for(r=d.length;n<r;n++){j=d[n];a.currentTarget=j.elem;a.data=j.handleObj.data;a.handleObj=j.handleObj;if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;break}}return b}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,
"&")}function qa(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function ra(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);if(f=f&&f.events){delete e.handle;e.events={};for(var j in f)for(var i in f[j])c.event.add(this,j,f[j][i],f[j][i].data)}}})}function sa(a,b,d){var f,e,j;b=b&&b[0]?b[0].ownerDocument||b[0]:s;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=
true;if(j=c.fragments[a[0]])if(j!==1)f=j}if(!f){f=b.createDocumentFragment();c.clean(a,b,f,d)}if(e)c.fragments[a[0]]=j?f:1;return{fragment:f,cacheable:e}}function K(a,b){var d={};c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a});return d}function wa(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var c=function(a,b){return new c.fn.init(a,b)},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,
Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;c.fn=c.prototype={init:function(a,b){var d,f;if(!a)return this;if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(a==="body"&&!b){this.context=s;this[0]=s.body;this.selector="body";this.length=1;return this}if(typeof a==="string")if((d=Ta.exec(a))&&
(d[1]||!b))if(d[1]){f=b?b.ownerDocument||b:s;if(a=Xa.exec(a))if(c.isPlainObject(b)){a=[s.createElement(a[1])];c.fn.attr.call(a,b,true)}else a=[f.createElement(a[1])];else{a=sa([d[1]],[f]);a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes}return c.merge(this,a)}else{if(b=s.getElementById(d[2])){if(b.id!==d[2])return T.find(a);this.length=1;this[0]=b}this.context=s;this.selector=a;return this}else if(!b&&/^\w+$/.test(a)){this.selector=a;this.context=s;a=s.getElementsByTagName(a);return c.merge(this,
a)}else return!b||b.jquery?(b||T).find(a):c(b).find(a);else if(c.isFunction(a))return T.ready(a);if(a.selector!==w){this.selector=a.selector;this.context=a.context}return c.makeArray(a,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return R.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,b,d){var f=c();c.isArray(a)?ba.apply(f,a):c.merge(f,a);f.prevObject=this;f.context=this.context;if(b===
"find")f.selector=this.selector+(this.selector?" ":"")+d;else if(b)f.selector=this.selector+"."+b+"("+d+")";return f},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();if(c.isReady)a.call(s,c);else Q&&Q.push(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,
function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||c(null)},push:ba,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;if(typeof a==="boolean"){f=a;a=arguments[1]||{};b=2}if(typeof a!=="object"&&!c.isFunction(a))a={};if(d===b){a=this;--b}for(;b<d;b++)if((e=arguments[b])!=null)for(j in e){i=a[j];o=e[j];if(a!==o)if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||
c.isArray(i))?i:c.isArray(o)?[]:{};a[j]=c.extend(f,i,o)}else if(o!==w)a[j]=o}return a};c.extend({noConflict:function(a){A.$=Sa;if(a)A.jQuery=Ra;return c},isReady:false,ready:function(){if(!c.isReady){if(!s.body)return setTimeout(c.ready,13);c.isReady=true;if(Q){for(var a,b=0;a=Q[b++];)a.call(s,c);Q=null}c.fn.triggerHandler&&c(s).triggerHandler("ready")}},bindReady:function(){if(!xa){xa=true;if(s.readyState==="complete")return c.ready();if(s.addEventListener){s.addEventListener("DOMContentLoaded",
L,false);A.addEventListener("load",c.ready,false)}else if(s.attachEvent){s.attachEvent("onreadystatechange",L);A.attachEvent("onload",c.ready);var a=false;try{a=A.frameElement==null}catch(b){}s.documentElement.doScroll&&a&&ma()}}},isFunction:function(a){return $.call(a)==="[object Function]"},isArray:function(a){return $.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,
"isPrototypeOf"))return false;var b;for(b in a);return b===w||aa.call(a,b)},isEmptyObject:function(a){for(var b in a)return false;return true},error:function(a){throw a;},parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=c.trim(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+
a))();else c.error("Invalid JSON: "+a)},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");d.type="text/javascript";if(c.support.scriptEval)d.appendChild(s.createTextNode(a));else d.text=a;b.insertBefore(d,b.firstChild);b.removeChild(d)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);if(d)if(i)for(f in a){if(b.apply(a[f],
d)===false)break}else for(;e<j;){if(b.apply(a[e++],d)===false)break}else if(i)for(f in a){if(b.call(a[f],f,a[f])===false)break}else for(d=a[0];e<j&&b.call(d,e,d)!==false;d=a[++e]);return a},trim:function(a){return(a||"").replace(Wa,"")},makeArray:function(a,b){b=b||[];if(a!=null)a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);return b},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var d=0,f=b.length;d<f;d++)if(b[d]===
a)return d;return-1},merge:function(a,b){var d=a.length,f=0;if(typeof b.length==="number")for(var e=b.length;f<e;f++)a[d++]=b[f];else for(;b[f]!==w;)a[d++]=b[f++];a.length=d;return a},grep:function(a,b,d){for(var f=[],e=0,j=a.length;e<j;e++)!d!==!b(a[e],e)&&f.push(a[e]);return f},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;j<i;j++){e=b(a[j],j,d);if(e!=null)f[f.length]=e}return f.concat.apply([],f)},guid:1,proxy:function(a,b,d){if(arguments.length===2)if(typeof b==="string"){d=a;a=d[b];b=w}else if(b&&
!c.isFunction(b)){d=b;b=w}if(!b&&a)b=function(){return a.apply(d||this,arguments)};if(a)b.guid=a.guid=a.guid||b.guid||c.guid++;return b},uaMatch:function(a){a=a.toLowerCase();a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},browser:{}});P=c.uaMatch(P);if(P.browser){c.browser[P.browser]=true;c.browser.version=P.version}if(c.browser.webkit)c.browser.safari=
true;if(ya)c.inArray=function(a,b){return ya.call(b,a)};T=c(s);if(s.addEventListener)L=function(){s.removeEventListener("DOMContentLoaded",L,false);c.ready()};else if(s.attachEvent)L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);c.ready()}};(function(){c.support={};var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();d.style.display="none";d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,
parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};b.type="text/javascript";try{b.appendChild(s.createTextNode("window."+f+"=1;"))}catch(i){}a.insertBefore(b,a.firstChild);if(A[f]){c.support.scriptEval=true;delete A[f]}try{delete b.test}catch(o){c.support.deleteExpando=false}a.removeChild(b);if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=
false;d.detachEvent("onclick",k)});d.cloneNode(true).fireEvent("onclick")}d=s.createElement("div");d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=s.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var k=s.createElement("div");k.style.width=k.style.paddingLeft="1px";s.body.appendChild(k);c.boxModel=c.support.boxModel=k.offsetWidth===2;s.body.removeChild(k).style.display="none"});a=function(k){var n=
s.createElement("div");k="on"+k;var r=k in n;if(!r){n.setAttribute(k,"return;");r=typeof n[k]==="function"}return r};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=e=j=null}})();c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var G="jQuery"+J(),Ya=0,za={};c.extend({cache:{},expando:G,noData:{embed:true,object:true,
applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var f=a[G],e=c.cache;if(!f&&typeof b==="string"&&d===w)return null;f||(f=++Ya);if(typeof b==="object"){a[G]=f;e[f]=c.extend(true,{},b)}else if(!e[f]){a[G]=f;e[f]={}}a=e[f];if(d!==w)a[b]=d;return typeof b==="string"?a[b]:a}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var d=a[G],f=c.cache,e=f[d];if(b){if(e){delete e[b];c.isEmptyObject(e)&&c.removeData(a)}}else{if(c.support.deleteExpando)delete a[c.expando];
else a.removeAttribute&&a.removeAttribute(c.expando);delete f[d]}}}});c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length)return c.data(this[0]);else if(typeof a==="object")return this.each(function(){c.data(this,a)});var d=a.split(".");d[1]=d[1]?"."+d[1]:"";if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);if(f===w&&this.length)f=c.data(this[0],a);return f===w&&d[1]?this.data(d[0]):f}else return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,
a,b)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var f=c.data(a,b);if(!d)return f||[];if(!f||c.isArray(d))f=c.data(a,b,c.makeArray(d));else f.push(d);return f}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),f=d.shift();if(f==="inprogress")f=d.shift();if(f){b==="fx"&&d.unshift("inprogress");f.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===
w)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,
cb=/^(a|area)$/i,Ba=/radio|checkbox/;c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(n){var r=c(this);r.addClass(a.call(this,n,r.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1)if(e.className){for(var j=" "+e.className+" ",
i=e.className,o=0,k=b.length;o<k;o++)if(j.indexOf(" "+b[o]+" ")<0)i+=" "+b[o];e.className=c.trim(i)}else e.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(k){var n=c(this);n.removeClass(a.call(this,k,n.attr("class")))});if(a&&typeof a==="string"||a===w)for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1&&e.className)if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;i<o;i++)j=j.replace(" "+b[i]+" ",
" ");e.className=c.trim(j)}else e.className=""}return this},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";if(c.isFunction(a))return this.each(function(e){var j=c(this);j.toggleClass(a.call(this,e,j.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var e,j=0,i=c(this),o=b,k=a.split(ca);e=k[j++];){o=f?o:!i.hasClass(e);i[o?"addClass":"removeClass"](e)}else if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);this.className=
this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1)return true;return false},val:function(a){if(a===w){var b=this[0];if(b){if(c.nodeName(b,"option"))return(b.attributes.value||{}).specified?b.value:b.text;if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;b=b.type==="select-one";if(d<0)return null;var j=b?d:0;for(d=b?d+1:e.length;j<d;j++){var i=
e[j];if(i.selected){a=c(i).val();if(b)return a;f.push(a)}}return f}if(Ba.test(b.type)&&!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Za,"")}return w}var o=c.isFunction(a);return this.each(function(k){var n=c(this),r=a;if(this.nodeType===1){if(o)r=a.call(this,k,n.val());if(typeof r==="number")r+="";if(c.isArray(r)&&Ba.test(this.type))this.checked=c.inArray(n.val(),r)>=0;else if(c.nodeName(this,"select")){var u=c.makeArray(r);c("option",this).each(function(){this.selected=
c.inArray(c(this).val(),u)>=0});if(!u.length)this.selectedIndex=-1}else this.value=r}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8)return w;if(f&&b in c.attrFn)return c(a)[b](d);f=a.nodeType!==1||!c.isXMLDoc(a);var e=d!==w;b=f&&c.props[b]||b;if(a.nodeType===1){var j=$a.test(b);if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d}if(c.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;return a[b]}if(!c.support.style&&f&&b==="style"){if(e)a.style.cssText=""+d;return a.style.cssText}e&&a.setAttribute(b,""+d);a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);return a===null?w:a}return c.style(a,b,d)}});var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,
function(b){return"\\"+b})};c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement)a=A;var e,j;if(d.handler){e=d;d=e.handler}if(!d.guid)d.guid=c.guid++;if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;if(!o)j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w};o.elem=a;b=b.split(" ");for(var k,n=0,r;k=b[n++];){j=e?c.extend({},e):{handler:d,data:f};if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();j.namespace=r.slice(0).sort().join(".")}else{r=[];j.namespace=""}j.type=k;j.guid=d.guid;var u=i[k],z=c.event.special[k]||{};if(!u){u=i[k]=[];if(!z.setup||z.setup.call(a,f,r,o)===false)if(a.addEventListener)a.addEventListener(k,o,false);else a.attachEvent&&a.attachEvent("on"+k,o)}if(z.add){z.add.call(a,j);if(!j.handler.guid)j.handler.guid=d.guid}u.push(j);c.event.global[k]=true}a=null}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),
C=z&&z.events;if(z&&C){if(b&&b.type){d=b.handler;b=b.type}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(e in C)c.event.remove(a,e+b)}else{for(b=b.split(" ");e=b[j++];){n=e;i=e.indexOf(".")<0;o=[];if(!i){o=e.split(".");e=o.shift();k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(r=C[e])if(d){n=c.event.special[e]||{};for(B=f||0;B<r.length;B++){u=r[B];if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);n.remove&&n.remove.call(a,u)}if(f!=
null)break}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false)Ca(a,e,z.handle);delete C[e]}}else for(var B=0;B<r.length;B++){u=r[B];if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);r.splice(B--,1)}}}if(c.isEmptyObject(C)){if(b=z.handle)b.elem=null;delete z.events;delete z.handle;c.isEmptyObject(z)&&c.removeData(a)}}}}},trigger:function(a,b,d,f){var e=a.type||a;if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);if(e.indexOf("!")>=0){a.type=
e=e.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===8)return w;a.result=w;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(f=c.data(d,"handle"))&&f.apply(d,b);f=d.parentNode||d.ownerDocument;try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()]))if(d["on"+e]&&d["on"+e].apply(d,b)===false)a.result=false}catch(j){}if(!a.isPropagationStopped()&&
f)c.event.trigger(a,b,f,true);else if(!a.isDefaultPrevented()){f=a.target;var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e])f["on"+e]=null;c.event.triggered=true;f[e]()}}catch(n){}if(i)f["on"+e]=i;c.event.triggered=false}}},handle:function(a){var b,d,f,e;a=arguments[0]=c.event.fix(a||A.event);a.currentTarget=this;b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");a.type=d.shift();f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}e=c.data(this,"events");d=e[a.type];if(e&&d){d=d.slice(0);e=0;for(var j=d.length;e<j;e++){var i=d[e];if(b||f.test(i.namespace)){a.handler=i.handler;a.data=i.data;a.handleObj=i;i=i.handler.apply(this,arguments);if(i!==w){a.result=i;if(i===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[G])return a;var b=a;a=c.Event(b);for(var d=this.props.length,f;d;){f=this.props[--d];a[f]=b[f]}if(!a.target)a.target=a.srcElement||s;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){b=s.documentElement;d=s.body;a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==w)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}))},remove:function(a){var b=true,d=a.origType.replace(O,"");c.each(c.data(this,
"events").live||[],function(){if(d===this.origType.replace(O,""))return b=false});b&&c.event.remove(this,a.origType,oa)}},beforeunload:{setup:function(a,b,d){if(this.setInterval)this.onbeforeunload=d;return false},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&&a.type){this.originalEvent=
a;this.type=a.type}else this.type=a;this.timeStamp=J();this[G]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;var a=this.originalEvent;if(a){a.preventDefault&&a.preventDefault();a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=Z;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;this.stopPropagation()},isDefaultPrevented:Y,isPropagationStopped:Y,
isImmediatePropagationStopped:Y};var Da=function(a){var b=a.relatedTarget;try{for(;b&&b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},Ea=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a)},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da)}}});if(!c.support.submitBubbles)c.event.special.submit=
{setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length)return na("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13)return na("submit",this,arguments)})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};
if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},fa=function(a,b){var d=a.target,f,e;if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");e=Fa(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",
e);if(!(f===w||e===f))if(f!=null||e){a.type="change";return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return fa.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple")return fa.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,
"_change_data",Fa(a))}},setup:function(){if(this.type==="file")return false;for(var a in ea)c.event.add(this,a+".specialChange",ea[a]);return da.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return da.test(this.nodeName)}};ea=c.event.special.change.filters}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);f.type=b;return c.event.handle.call(this,f)}c.event.special[b]={setup:function(){this.addEventListener(a,
d,true)},teardown:function(){this.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d)this[b](j,f,d[j],e);return this}if(c.isFunction(f)){e=f;f=w}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);return e.apply(this,arguments)}):e;if(d==="unload"&&b!=="one")this.one(d,f,e);else{j=0;for(var o=this.length;j<o;j++)c.event.add(this[j],d,i,f)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&
!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else{d=0;for(var f=this.length;d<f;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,f){return this.live(b,d,f,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);a.preventDefault();a.stopPropagation();c.event.trigger(a,b,this[0]);return a.result}},
toggle:function(a){for(var b=arguments,d=1;d<b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,e+1);f.preventDefault();return b[e].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,
u=j?this:c(this.context);if(c.isFunction(f)){e=f;f=w}for(d=(d||"").split(" ");(i=d[o++])!=null;){j=O.exec(i);k="";if(j){k=j[0];i=i.replace(O,"")}if(i==="hover")d.push("mouseenter"+k,"mouseleave"+k);else{n=i;if(i==="focus"||i==="blur"){d.push(Ga[i]+k);i+=k}else i=(Ga[i]||i)+k;b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n})}):u.unbind(pa(i,r),e)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),
function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});(function(){function a(g){for(var h="",l,m=0;g[m];m++){l=g[m];if(l.nodeType===3||l.nodeType===4)h+=l.nodeValue;else if(l.nodeType!==8)h+=a(l.childNodes)}return h}function b(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];
if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1&&!p){t.sizcache=l;t.sizset=q}if(t.nodeName.toLowerCase()===h){y=t;break}t=t[g]}m[q]=y}}}function d(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1){if(!p){t.sizcache=l;t.sizset=q}if(typeof h!=="string"){if(t===h){y=true;break}}else if(k.filter(h,[t]).length>0){y=t;break}}t=t[g]}m[q]=y}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
e=0,j=Object.prototype.toString,i=false,o=true;[0,0].sort(function(){o=false;return 0});var k=function(g,h,l,m){l=l||[];var q=h=h||s;if(h.nodeType!==1&&h.nodeType!==9)return[];if(!g||typeof g!=="string")return l;for(var p=[],v,t,y,S,H=true,M=x(h),I=g;(f.exec(""),v=f.exec(I))!==null;){I=v[3];p.push(v[1]);if(v[2]){S=v[3];break}}if(p.length>1&&r.exec(g))if(p.length===2&&n.relative[p[0]])t=ga(p[0]+p[1],h);else for(t=n.relative[p[0]]?[h]:k(p.shift(),h);p.length;){g=p.shift();if(n.relative[g])g+=p.shift();
t=ga(g,t)}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0]}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);t=v.expr?k.filter(v.expr,v.set):v.set;if(p.length>0)y=z(t);else H=false;for(;p.length;){var D=p.pop();v=D;if(n.relative[D])v=p.pop();else D="";if(v==null)v=h;n.relative[D](y,v,M)}}else y=[]}y||(y=t);y||k.error(D||
g);if(j.call(y)==="[object Array]")if(H)if(h&&h.nodeType===1)for(g=0;y[g]!=null;g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g])))l.push(t[g])}else for(g=0;y[g]!=null;g++)y[g]&&y[g].nodeType===1&&l.push(t[g]);else l.push.apply(l,y);else z(y,l);if(S){k(S,q,l,m);k.uniqueSort(l)}return l};k.uniqueSort=function(g){if(B){i=o;g.sort(B);if(i)for(var h=1;h<g.length;h++)g[h]===g[h-1]&&g.splice(h--,1)}return g};k.matches=function(g,h){return k(g,null,null,h)};k.find=function(g,h,l){var m,q;if(!g)return[];
for(var p=0,v=n.order.length;p<v;p++){var t=n.order[p];if(q=n.leftMatch[t].exec(g)){var y=q[1];q.splice(1,1);if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");m=n.find[t](q,h,l);if(m!=null){g=g.replace(n.match[t],"");break}}}}m||(m=h.getElementsByTagName("*"));return{set:m,expr:g}};k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);g&&h.length;){for(var H in n.filter)if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;D=t[1];y=false;t.splice(1,1);if(D.substr(D.length-
1)!=="\\"){if(v===p)p=[];if(n.preFilter[H])if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true)continue}else y=I=true;if(t)for(var U=0;(D=v[U])!=null;U++)if(D){I=M(D,t,U,v);var Ha=m^!!I;if(l&&I!=null)if(Ha)y=true;else v[U]=false;else if(Ha){p.push(D);y=true}}if(I!==w){l||(v=p);g=g.replace(n.match[H],"");if(!y)return[];break}}}if(g===q)if(y==null)k.error(g);else break;q=g}return v};k.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},
relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);l=l&&!m;if(m)h=h.toLowerCase();m=0;for(var q=g.length,p;m<q;m++)if(p=g[m]){for(;(p=p.previousSibling)&&p.nodeType!==1;);g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h}l&&k.filter(h,g,true)},">":function(g,h){var l=typeof h==="string";if(l&&!/\W/.test(h)){h=h.toLowerCase();for(var m=0,q=g.length;m<q;m++){var p=g[m];if(p){l=p.parentNode;g[m]=l.nodeName.toLowerCase()===h?l:false}}}else{m=0;for(q=g.length;m<q;m++)if(p=g[m])g[m]=
l?p.parentNode:p.parentNode===h;l&&k.filter(h,g,true)}},"":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("parentNode",h,m,g,p,l)},"~":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("previousSibling",h,m,g,p,l)}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l)return(g=h.getElementById(g[1]))?[g]:[]},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);for(var m=0,q=h.length;m<q;m++)h[m].getAttribute("name")===g[1]&&l.push(h[m]);return l.length===0?null:l}},TAG:function(g,h){return h.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";if(p)return g;p=0;for(var v;(v=h[p])!=null;p++)if(v)if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0))l||m.push(v);else if(l)h[p]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},
CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=h[1]+(h[2]||1)-0;g[3]=h[3]-0}g[0]=e++;return g},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");if(!p&&n.attrMap[h])g[1]=n.attrMap[h];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,h,l,m,q){if(g[1]==="not")if((f.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=k(g[3],null,null,h);else{g=k.filter(g[3],h,l,true^q);l||m.push.apply(m,
g);return false}else if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,h,l){return!!k(l[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},
text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},
setFilters:{first:function(g,h){return h===0},last:function(g,h,l,m){return h===m.length-1},even:function(g,h){return h%2===0},odd:function(g,h){return h%2===1},lt:function(g,h,l){return h<l[3]-0},gt:function(g,h,l){return h>l[3]-0},nth:function(g,h,l){return l[3]-0===h},eq:function(g,h,l){return l[3]-0===h}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];if(p)return p(g,l,h,m);else if(q==="contains")return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;else if(q==="not"){h=
h[3];l=0;for(m=h.length;l<m;l++)if(h[l]===g)return false;return true}else k.error("Syntax error, unrecognized expression: "+q)},CHILD:function(g,h){var l=h[1],m=g;switch(l){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(l==="first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":l=h[2];var q=h[3];if(l===1&&q===0)return true;h=h[0];var p=g.parentNode;if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;for(m=p.firstChild;m;m=
m.nextSibling)if(m.nodeType===1)m.nodeIndex=++v;p.sizcache=h}g=g.nodeIndex-q;return l===0?g===0:g%l===0&&g/l>=0}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1},ATTR:function(g,h){var l=h[1];g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);l=g+"";var m=h[2];h=h[4];return g==null?m==="!=":m===
"="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false},POS:function(g,h,l,m){var q=n.setFilters[h[2]];if(q)return q(g,l,h,m)}}},r=n.match.POS;for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,
h){return"\\"+(h-0+1)}))}var z=function(g,h){g=Array.prototype.slice.call(g,0);if(h){h.push.apply(h,g);return h}return g};try{Array.prototype.slice.call(s.documentElement.childNodes,0)}catch(C){z=function(g,h){h=h||[];if(j.call(g)==="[object Array]")Array.prototype.push.apply(h,g);else if(typeof g.length==="number")for(var l=0,m=g.length;l<m;l++)h.push(g[l]);else for(l=0;g[l];l++)h.push(g[l]);return h}}var B;if(s.documentElement.compareDocumentPosition)B=function(g,h){if(!g.compareDocumentPosition||
!h.compareDocumentPosition){if(g==h)i=true;return g.compareDocumentPosition?-1:1}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;if(g===0)i=true;return g};else if("sourceIndex"in s.documentElement)B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h)i=true;return g.sourceIndex?-1:1}g=g.sourceIndex-h.sourceIndex;if(g===0)i=true;return g};else if(s.createRange)B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h)i=true;return g.ownerDocument?-1:1}var l=g.ownerDocument.createRange(),m=
h.ownerDocument.createRange();l.setStart(g,0);l.setEnd(g,0);m.setStart(h,0);m.setEnd(h,0);g=l.compareBoundaryPoints(Range.START_TO_END,m);if(g===0)i=true;return g};(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();g.innerHTML="<a name='"+h+"'/>";var l=s.documentElement;l.insertBefore(g,l.firstChild);if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p)return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&
q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[]};n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&p&&p.nodeValue===q}}l.removeChild(g);l=g=null})();(function(){var g=s.createElement("div");g.appendChild(s.createComment(""));if(g.getElementsByTagName("*").length>0)n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);if(h[1]==="*"){h=[];for(var m=0;l[m];m++)l[m].nodeType===1&&h.push(l[m]);l=h}return l};g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(h){return h.getAttribute("href",2)};g=null})();s.querySelectorAll&&function(){var g=k,h=s.createElement("div");h.innerHTML="<p class='TEST'></p>";if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;if(!v&&q.nodeType===9&&!x(q))try{return z(q.querySelectorAll(m),p)}catch(t){}return g(m,q,p,v)};for(var l in g)k[l]=g[l];h=null}}();
(function(){var g=s.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m)return l.getElementsByClassName(h[1])};g=null}}})();var E=s.compareDocumentPosition?function(g,h){return!!(g.compareDocumentPosition(h)&16)}:
function(g,h){return g!==h&&(g.contains?g.contains(h):true)},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false},ga=function(g,h){var l=[],m="",q;for(h=h.nodeType?[h]:h;q=n.match.PSEUDO.exec(g);){m+=q[0];g=g.replace(n.match.PSEUDO,"")}g=n.relative[g]?g+"*":g;q=0;for(var p=h.length;q<p;q++)k(g,h[q],l);return k.filter(m,l)};c.find=k;c.expr=k.selectors;c.expr[":"]=c.expr.filters;c.unique=k.uniqueSort;c.text=a;c.isXMLDoc=x;c.contains=E})();var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,
gb=/,/;R=Array.prototype.slice;var Ia=function(a,b,d){if(c.isFunction(b))return c.grep(a,function(e,j){return!!b.call(e,j,e)===d});else if(b.nodeType)return c.grep(a,function(e){return e===b===d});else if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1});if(Ua.test(b))return c.filter(b,f,!d);else b=c.filter(b,f)}return c.grep(a,function(e){return c.inArray(e,b)>=0===d})};c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;f<e;f++){d=b.length;
c.find(a,this[f],b);if(f>0)for(var j=d;j<b.length;j++)for(var i=0;i<d;i++)if(b[i]===b[j]){b.splice(j--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,f=b.length;d<f;d++)if(c.contains(this,b[d]))return true})},not:function(a){return this.pushStack(Ia(this,a,false),"not",a)},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j=
{},i;if(f&&a.length){e=0;for(var o=a.length;e<o;e++){i=a[e];j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i)}for(;f&&f.ownerDocument&&f!==b;){for(i in j){e=j[i];if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});delete j[i]}}f=f.parentNode}}return d}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;return this.map(function(n,r){for(;r&&r.ownerDocument&&r!==b;){if(k?k.index(r)>-1:c(r).is(a))return r;r=r.parentNode}return null})},index:function(a){if(!a||typeof a===
"string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);b=c.merge(this.get(),a);return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",
d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);eb.test(a)||(f=d);if(f&&typeof f==="string")e=c.filter(f,e);e=this.length>1?c.unique(e):e;if((this.length>1||gb.test(f))&&fb.test(a))e=e.reverse();return this.pushStack(e,a,R.call(arguments).join(","))}});c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return c.find.matches(a,b)},dir:function(a,b,d){var f=[];for(a=a[b];a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));){a.nodeType===
1&&f.push(a);a=a[b]}return f},nth:function(a,b,d){b=b||1;for(var f=0;a;a=a[d])if(a.nodeType===1&&++f===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?
a:b+"></"+d+">"},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};F.optgroup=F.option;F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;F.th=F.td;if(!c.support.htmlSerialize)F._default=[1,"div<div>","</div>"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=
c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==w)return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,f;(f=this[d])!=null;d++)if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));c.cleanData([f])}f.parentNode&&f.parentNode.removeChild(f)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;if(!d){d=f.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0]}else return this.cloneNode(true)});if(a===true){ra(this,b);ra(this.find("*"),b.find("*"))}return b},html:function(a){if(a===w)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,
""):null;else if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);try{for(var b=0,d=this.length;b<d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(f){this.empty().append(a)}}else c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();j.empty().append(function(){return a.call(this,e,i)})}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&
this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),f=d.html();d.replaceWith(a.call(this,b,f))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||
u.appendChild(u.ownerDocument.createElement("tbody")):u}var e,j,i=a[0],o=[],k;if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i))return this.each(function(){c(this).domManip(a,b,d,true)});if(c.isFunction(i))return this.each(function(u){var z=c(this);a[0]=i.call(this,u,b?z.html():w);z.domManip(a,b,d)});if(this[0]){e=i&&i.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);k=e.fragment;if(j=k.childNodes.length===
1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");for(var n=0,r=this.length;n<r;n++)d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k)}o.length&&c.each(o,Qa)}return this}});c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];d=c(d);var e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this}else{e=0;for(var j=d.length;e<j;e++){var i=(e>0?this.clone(true):this).get();c.fn[b].apply(c(d[e]),i);f=f.concat(i)}return this.pushStack(f,a,d.selector)}}});c.extend({clean:function(a,b,d,f){b=b||s;if(typeof b.createElement==="undefined")b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;for(var e=[],j=0,i;(i=a[j])!=null;j++){if(typeof i==="number")i+="";if(i){if(typeof i==="string"&&!jb.test(i))i=b.createTextNode(i);else if(typeof i==="string"){i=i.replace(Ka,Ma);var o=(La.exec(i)||["",
""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");for(r.innerHTML=k[1]+i+k[2];n--;)r=r.lastChild;if(!c.support.tbody){n=ib.test(i);o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];for(k=o.length-1;k>=0;--k)c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k])}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);i=r.childNodes}if(i.nodeType)e.push(i);else e=
c.merge(e,i)}}if(d)for(j=0;e[j];j++)if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript"))f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));d.appendChild(e[j])}return e},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;(o=a[i])!=null;i++)if(d=o[c.expando]){b=f[d];if(b.events)for(var k in b.events)e[k]?
c.event.remove(o,k):Ca(o,k,b.handle);if(j)delete o[c.expando];else o.removeAttribute&&o.removeAttribute(c.expando);delete f[d]}}});var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=
function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w)return c.curCSS(d,f);if(typeof e==="number"&&!kb.test(f))e+="px";c.style(d,f,e)})};c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8)return w;if((b==="width"||b==="height")&&parseFloat(d)<0)d=w;var f=a.style||a,e=d!==w;if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";a=f.filter||c.curCSS(a,"filter")||"";f.filter=
Na.test(a)?a.replace(Na,b):b}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":""}if(ha.test(b))b=Pa;b=b.replace(ia,ja);if(e)f[b]=d;return f[b]},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);if(f==="margin")e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;else e-=parseFloat(c.curCSS(a,
"border"+this+"Width",true))||0})}a.offsetWidth!==0?i():c.swap(a,ob,i);return Math.max(0,Math.round(e))}return c.curCSS(a,b,d)},curCSS:function(a,b,d){var f,e=a.style;if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return f===""?"1":f}if(ha.test(b))b=Pa;if(!d&&e&&e[b])f=e[b];else if(rb){if(ha.test(b))b="float";b=b.replace(lb,"-$1").toLowerCase();e=a.ownerDocument.defaultView;if(!e)return null;if(a=e.getComputedStyle(a,null))f=
a.getPropertyValue(b);if(b==="opacity"&&f==="")f="1"}else if(a.currentStyle){d=b.replace(ia,ja);f=a.currentStyle[b]||a.currentStyle[d];if(!mb.test(f)&&nb.test(f)){b=e.left;var j=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;e.left=d==="fontSize"?"1em":f||0;f=e.pixelLeft+"px";e.left=b;a.runtimeStyle.left=j}}return f},swap:function(a,b,d){var f={};for(var e in b){f[e]=a.style[e];a.style[e]=b[e]}d.call(a);for(e in b)a.style[e]=f[e]}});if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=
a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!==
"string")return zb.call(this,a);else if(!this.length)return this;var f=a.indexOf(" ");if(f>=0){var e=a.slice(f,a.length);a=a.slice(0,f)}f="GET";if(b)if(c.isFunction(b)){d=b;b=null}else if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);f="POST"}var j=this;c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified")j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);d&&j.each(d,[i.responseText,o,i])}});return this},
serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type))}).map(function(a,b){a=c(this).val();return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d}}):{name:b.name,value:a}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f})},getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&
e.success.call(k,o,i,x);e.global&&f("ajaxSuccess",[x,e])}function d(){e.complete&&e.complete.call(k,x,i);e.global&&f("ajaxComplete",[x,e]);e.global&&!--c.active&&c.event.trigger("ajaxStop")}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p)}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();if(e.data&&e.processData&&typeof e.data!=="string")e.data=c.param(e.data,e.traditional);if(e.dataType==="jsonp"){if(n==="GET")N.test(e.url)||(e.url+=(ka.test(e.url)?
"&":"?")+(e.jsonp||"callback")+"=?");else if(!e.data||!N.test(e.data))e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";e.dataType="json"}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;if(e.data)e.data=(e.data+"").replace(N,"="+j+"$1");e.url=e.url.replace(N,"="+j+"$1");e.dataType="script";A[j]=A[j]||function(q){o=q;b();d();A[j]=w;try{delete A[j]}catch(p){}z&&z.removeChild(C)}}if(e.dataType==="script"&&e.cache===null)e.cache=false;if(e.cache===
false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"")}if(e.data&&n==="GET")e.url+=(ka.test(e.url)?"&":"?")+e.data;e.global&&!c.active++&&c.event.trigger("ajaxStart");r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");C.src=e.url;if(e.scriptCharset)C.charset=e.scriptCharset;if(!j){var B=
false;C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;b();d();C.onload=C.onreadystatechange=null;z&&C.parentNode&&z.removeChild(C)}}}z.insertBefore(C,z.firstChild);return w}var E=false,x=e.xhr();if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);try{if(e.data||a&&a.contentType)x.setRequestHeader("Content-Type",e.contentType);if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",
c.lastModified[e.url]);c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url])}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default)}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");x.abort();return false}e.global&&f("ajaxSend",[x,e]);var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||
d();E=true;if(x)x.onreadystatechange=c.noop}else if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;x.onreadystatechange=c.noop;i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";var p;if(i==="success")try{o=c.httpData(x,e.dataType,e)}catch(v){i="parsererror";p=v}if(i==="success"||i==="notmodified")j||b();else c.handleError(e,x,i,p);d();q==="timeout"&&x.abort();if(e.async)x=null}};try{var h=x.abort;x.abort=function(){x&&h.call(x);
g("abort")}}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout")},e.timeout);try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null)}catch(m){c.handleError(e,x,null,m);d()}e.async||g();return x}},handleError:function(a,b,d,f){if(a.error)a.error.call(a.context||a,b,d,f);if(a.global)(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===
1223||a.status===0}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");if(d)c.lastModified[b]=d;if(f)c.etag[b]=f;return a.status===304||a.status===0},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;a=e?a.responseXML:a.responseText;e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");if(d&&d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b===
"json"||!b&&f.indexOf("json")>=0)a=c.parseJSON(a);else if(b==="script"||!b&&f.indexOf("javascript")>=0)c.globalEval(a);return a},param:function(a,b){function d(i,o){if(c.isArray(o))c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n)});else!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n)}):f(i,o)}function f(i,o){o=c.isFunction(o)?o():o;e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o)}var e=[];if(b===w)b=c.ajaxSettings.traditional;
if(c.isArray(a)||a.jquery)c.each(a,function(){f(this.name,this.value)});else for(var j in a)d(j,a[j]);return e.join("&").replace(yb,"+")}});var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b){if(a||a===0)return this.animate(K("show",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";if(c.css(this[a],"display")==="none"){d=this[a].nodeName;var f;if(la[d])f=la[d];else{var e=c("<"+d+" />").appendTo("body");f=e.css("display");if(f==="none")f="block";e.remove();la[d]=f}c.data(this[a],"olddisplay",f)}}a=0;for(b=this.length;a<b;a++)this[a].style.display=c.data(this[a],"olddisplay")||"";return this}},hide:function(a,b){if(a||a===0)return this.animate(K("hide",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");!d&&d!=="none"&&c.data(this[a],
"olddisplay",c.css(this[a],"display"))}a=0;for(b=this.length;a<b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";if(c.isFunction(a)&&c.isFunction(b))this._toggle.apply(this,arguments);else a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(K("toggle",3),a,b);return this},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d)},
animate:function(a,b,d,f){var e=c.speed(b,d,f);if(c.isEmptyObject(a))return this.each(e.complete);return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;for(i in a){var n=i.replace(ia,ja);if(i!==n){a[n]=a[i];delete a[i];i=n}if(a[i]==="hide"&&o||a[i]==="show"&&!o)return j.complete.call(this);if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");j.overflow=this.style.overflow}if(c.isArray(a[i])){(j.specialEasing=
j.specialEasing||{})[i]=a[i][1];a[i]=a[i][0]}}if(j.overflow!=null)this.style.overflow="hidden";j.curAnim=c.extend({},a);c.each(a,function(r,u){var z=new c.fx(k,j,r);if(Ab.test(u))z[u==="toggle"?o?"show":"hide":u](a);else{var C=Bb.exec(u),B=z.cur(true)||0;if(C){u=parseFloat(C[2]);var E=C[3]||"px";if(E!=="px"){k.style[r]=(u||1)+E;B=(u||1)/z.cur(true)*B;k.style[r]=B+E}if(C[1])u=(C[1]==="-="?-1:1)*u+B;z.custom(B,u,E)}else z.custom(B,u,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]);
this.each(function(){for(var f=d.length-1;f>=0;f--)if(d[f].elem===this){b&&d[f](true);d.splice(f,1)}});b||this.dequeue();return this}});c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f)}});c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};f.duration=c.fx.off?0:typeof f.duration===
"number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;f.old=f.complete;f.complete=function(){f.queue!==false&&c(this).dequeue();c.isFunction(f.old)&&f.old.call(this)};return f},easing:{linear:function(a,b,d,f){return d+f*a},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||
c.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0},custom:function(a,b,d){function f(j){return e.step(j)}this.startTime=J();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;
this.pos=this.state=0;var e=this;f.elem=this.elem;if(f()&&c.timers.push(f)&&!W)W=setInterval(c.fx.tick,13)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=J(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=
this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var f in this.options.curAnim)if(this.options.curAnim[f]!==true)d=false;if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;a=c.data(this.elem,"olddisplay");this.elem.style.display=a?a:this.options.display;if(c.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&c(this.elem).hide();if(this.options.hide||this.options.show)for(var e in this.options.curAnim)c.style(this.elem,
e,this.options.orig[e]);this.options.complete.call(this.elem)}return false}else{e=b-this.startTime;this.state=e/this.options.duration;a=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||
c.fx.stop()},stop:function(){clearInterval(W);W=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&&c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length};c.fn.offset="getBoundingClientRect"in s.documentElement?
function(a){var b=this[0];if(a)return this.each(function(e){c.offset.setOffset(this,a,e)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);var d=b.getBoundingClientRect(),f=b.ownerDocument;b=f.body;f=f.documentElement;return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:function(a){var b=
this[0];if(a)return this.each(function(r){c.offset.setOffset(this,a,r)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;for(var k=b.offsetTop,n=b.offsetLeft;(b=b.parentNode)&&b!==o&&b!==i;){if(c.offset.supportsFixedPosition&&f.position==="fixed")break;j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;n-=b.scrollLeft;if(b===d){k+=b.offsetTop;n+=b.offsetLeft;if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=d;d=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=j}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;n+=o.offsetLeft}if(c.offset.supportsFixedPosition&&
f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);n+=Math.max(i.scrollLeft,o.scrollLeft)}return{top:k,left:n}};c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);d=b.firstChild;f=d.firstChild;e=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=f.offsetTop!==5;this.doesAddBorderForTableAndCells=e.offsetTop===5;f.style.position="fixed";f.style.top="20px";this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;f.style.position=f.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;a.removeChild(b);
c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;d+=parseFloat(c.curCSS(a,"marginLeft",true))||0}return{top:b,left:d}},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position")))a.style.position="relative";var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;if(c.isFunction(b))b=b.call(a,
d,e);d={top:b.top-e.top+j,left:b.left-e.left+i};"using"in b?b.using.call(a,d):f.css(d)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;return{top:d.top-
f.top,left:d.left-f.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(f){var e=this[0],j;if(!e)return null;if(f!==w)return this.each(function(){if(j=wa(this))j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());else this[d]=f});else return(j=wa(e))?"pageXOffset"in j?j[a?"pageYOffset":
"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null};c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null};c.fn[d]=function(f){var e=this[0];if(!e)return f==null?null:this;if(c.isFunction(f))return this.each(function(j){var i=c(this);i[d](f.call(this,j,i[d]()))});return"scrollTo"in
e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px")}});A.jQuery=A.$=c})(window);
/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */

(function($){$.fn.jcarousel=function(o){if(typeof o=='string'){var instance=$(this).data('jcarousel'),args=Array.prototype.slice.call(arguments,1);return instance[o].apply(instance,args);}else
return this.each(function(){$(this).data('jcarousel',new $jc(this,o));});};var defaults={vertical:false,start:1,offset:1,size:null,scroll:3,visible:null,animation:'normal',easing:'swing',auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:'<div></div>',buttonPrevHTML:'<div></div>',buttonNextEvent:'click',buttonPrevEvent:'click',buttonNextCallback:null,buttonPrevCallback:null};$.jcarousel=function(e,o){this.options=$.extend({},defaults,o||{});this.locked=false;this.container=null;this.clip=null;this.list=null;this.buttonNext=null;this.buttonPrev=null;this.wh=!this.options.vertical?'width':'height';this.lt=!this.options.vertical?'left':'top';var skin='',split=e.className.split(' ');for(var i=0;i<split.length;i++){if(split[i].indexOf('jcarousel-skin')!=-1){$(e).removeClass(split[i]);skin=split[i];break;}}if(e.nodeName=='UL'||e.nodeName=='OL'){this.list=$(e);this.container=this.list.parent();if(this.container.hasClass('jcarousel-clip')){if(!this.container.parent().hasClass('jcarousel-container'))this.container=this.container.wrap('<div></div>');this.container=this.container.parent();}else if(!this.container.hasClass('jcarousel-container'))this.container=this.list.wrap('<div></div>').parent();}else{this.container=$(e);this.list=this.container.find('ul,ol').eq(0);}if(skin!=''&&this.container.parent()[0].className.indexOf('jcarousel-skin')==-1)this.container.wrap('<div class=" '+skin+'"></div>');this.clip=this.list.parent();if(!this.clip.length||!this.clip.hasClass('jcarousel-clip'))this.clip=this.list.wrap('<div></div>').parent();this.buttonNext=$('.jcarousel-next',this.container);if(this.buttonNext.size()==0&&this.options.buttonNextHTML!=null)this.buttonNext=this.clip.after(this.options.buttonNextHTML).next();this.buttonNext.addClass(this.className('jcarousel-next'));this.buttonPrev=$('.jcarousel-prev',this.container);if(this.buttonPrev.size()==0&&this.options.buttonPrevHTML!=null)this.buttonPrev=this.clip.after(this.options.buttonPrevHTML).next();this.buttonPrev.addClass(this.className('jcarousel-prev'));this.clip.addClass(this.className('jcarousel-clip')).css({overflow:'hidden',position:'relative'});this.list.addClass(this.className('jcarousel-list')).css({overflow:'hidden',position:'relative',top:0,left:0,margin:0,padding:0});this.container.addClass(this.className('jcarousel-container')).css({position:'relative'});var di=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null;var li=this.list.children('li');var self=this;if(li.size()>0){var wh=0,i=this.options.offset;li.each(function(){self.format(this,i++);wh+=self.dimension(this,di);});this.list.css(this.wh,wh+'px');if(!o||o.size===undefined)this.options.size=li.size();}this.container.css('display','block');this.buttonNext.css('display','block');this.buttonPrev.css('display','block');this.funcNext=function(){self.next();};this.funcPrev=function(){self.prev();};this.funcResize=function(){self.reload();};if(this.options.initCallback!=null)this.options.initCallback(this,'init');/*if($.browser.safari){this.buttons(false,false);$(window).bind('load.jcarousel',function(){self.setup();});}else*/
this.setup();};var $jc=$.jcarousel;$jc.fn=$jc.prototype={jcarousel:'0.2.4'};$jc.fn.extend=$jc.extend=$.extend;$jc.fn.extend({setup:function(){this.first=null;this.last=null;this.prevFirst=null;this.prevLast=null;this.animating=false;this.timer=null;this.tail=null;this.inTail=false;if(this.locked)return;this.list.css(this.lt,this.pos(this.options.offset)+'px');var p=this.pos(this.options.start);this.prevFirst=this.prevLast=null;this.animate(p,false);$(window).unbind('resize.jcarousel',this.funcResize).bind('resize.jcarousel',this.funcResize);},reset:function(){this.list.empty();this.list.css(this.lt,'0px');this.list.css(this.wh,'10px');if(this.options.initCallback!=null)this.options.initCallback(this,'reset');this.setup();},reload:function(){if(this.tail!=null&&this.inTail)this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=false;if(this.options.reloadCallback!=null)this.options.reloadCallback(this);if(this.options.visible!=null){var self=this;var di=Math.ceil(this.clipping()/this.options.visible),wh=0,lt=0;$('li',this.list).each(function(i){wh+=self.dimension(this,di);if(i+1<self.first)lt=wh;});this.list.css(this.wh,wh+'px');this.list.css(this.lt,-lt+'px');}this.scroll(this.first,false);},lock:function(){this.locked=true;this.buttons();},unlock:function(){this.locked=false;this.buttons();},size:function(s){if(s!=undefined){this.options.size=s;if(!this.locked)this.buttons();}return this.options.size;},has:function(i,i2){if(i2==undefined||!i2)i2=i;if(this.options.size!==null&&i2>this.options.size)i2=this.options.size;for(var j=i;j<=i2;j++){var e=this.get(j);if(!e.length||e.hasClass('jcarousel-item-placeholder'))return false;}return true;},get:function(i){return $('.jcarousel-item-'+i,this.list);},add:function(i,s){var e=this.get(i),old=0,add=0;if(e.length==0){var c,e=this.create(i),j=$jc.intval(i);while(c=this.get(--j)){if(j<=0||c.length){j<=0?this.list.prepend(e):c.after(e);break;}}}else
old=this.dimension(e);e.removeClass(this.className('jcarousel-item-placeholder'));typeof s=='string'?e.html(s):e.empty().append(s);var di=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null;var wh=this.dimension(e,di)-old;if(i>0&&i<this.first)this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-wh+'px');this.list.css(this.wh,$jc.intval(this.list.css(this.wh))+wh+'px');return e;},remove:function(i){var e=this.get(i);if(!e.length||(i>=this.first&&i<=this.last))return;var d=this.dimension(e);if(i<this.first)this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+d+'px');e.remove();this.list.css(this.wh,$jc.intval(this.list.css(this.wh))-d+'px');},next:function(){this.stopAuto();if(this.tail!=null&&!this.inTail)this.scrollTail(false);else
this.scroll(((this.options.wrap=='both'||this.options.wrap=='last')&&this.options.size!=null&&this.last==this.options.size)?1:this.first+this.options.scroll);},prev:function(){this.stopAuto();if(this.tail!=null&&this.inTail)this.scrollTail(true);else
this.scroll(((this.options.wrap=='both'||this.options.wrap=='first')&&this.options.size!=null&&this.first==1)?this.options.size:this.first-this.options.scroll);},scrollTail:function(b){if(this.locked||this.animating||!this.tail)return;var pos=$jc.intval(this.list.css(this.lt));!b?pos-=this.tail:pos+=this.tail;this.inTail=!b;this.prevFirst=this.first;this.prevLast=this.last;this.animate(pos);},scroll:function(i,a){if(this.locked||this.animating)return;this.animate(this.pos(i),a);},pos:function(i){var pos=$jc.intval(this.list.css(this.lt));if(this.locked||this.animating)return pos;if(this.options.wrap!='circular')i=i<1?1:(this.options.size&&i>this.options.size?this.options.size:i);var back=this.first>i;var f=this.options.wrap!='circular'&&this.first<=1?1:this.first;var c=back?this.get(f):this.get(this.last);var j=back?f:f-1;var e=null,l=0,p=false,d=0,g;while(back?--j>=i:++j<i){e=this.get(j);p=!e.length;if(e.length==0){e=this.create(j).addClass(this.className('jcarousel-item-placeholder'));c[back?'before':'after'](e);if(this.first!=null&&this.options.wrap=='circular'&&this.options.size!==null&&(j<=0||j>this.options.size)){g=this.get(this.index(j));if(g.length)this.add(j,g.children().clone(true));}}c=e;d=this.dimension(e);if(p)l+=d;if(this.first!=null&&(this.options.wrap=='circular'||(j>=1&&(this.options.size==null||j<=this.options.size))))pos=back?pos+d:pos-d;}var clipping=this.clipping();var cache=[];var visible=0,j=i,v=0;var c=this.get(i-1);while(++visible){e=this.get(j);p=!e.length;if(e.length==0){e=this.create(j).addClass(this.className('jcarousel-item-placeholder'));c.length==0?this.list.prepend(e):c[back?'before':'after'](e);if(this.first!=null&&this.options.wrap=='circular'&&this.options.size!==null&&(j<=0||j>this.options.size)){g=this.get(this.index(j));if(g.length)this.add(j,g.find('>*').clone(true));}}c=e;var d=this.dimension(e);if(d==0){alert('jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...');return 0;}if(this.options.wrap!='circular'&&this.options.size!==null&&j>this.options.size)cache.push(e);else if(p)l+=d;v+=d;if(v>=clipping)break;j++;}for(var x=0;x<cache.length;x++)cache[x].remove();if(l>0){this.list.css(this.wh,this.dimension(this.list)+l+'px');if(back){pos-=l;this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-l+'px');}}var last=i+visible-1;if(this.options.wrap!='circular'&&this.options.size&&last>this.options.size)last=this.options.size;if(j>last){visible=0,j=last,v=0;while(++visible){var e=this.get(j--);if(!e.length)break;v+=this.dimension(e);if(v>=clipping)break;}}var first=last-visible+1;if(this.options.wrap!='circular'&&first<1)first=1;if(this.inTail&&back){pos+=this.tail;this.inTail=false;}this.tail=null;if(this.options.wrap!='circular'&&last==this.options.size&&(last-visible+1)>=1){var m=$jc.margin(this.get(last),!this.options.vertical?'marginRight':'marginBottom');if((v-m)>clipping)this.tail=v-clipping-m;}while(i-->first)pos+=this.dimension(this.get(i));this.prevFirst=this.first;this.prevLast=this.last;this.first=first;this.last=last;return pos;},animate:function(p,a){if(this.locked||this.animating)return;this.animating=true;var self=this;var scrolled=function(){self.animating=false;if(p==0)self.list.css(self.lt,0);if(self.options.wrap=='circular'||self.options.wrap=='both'||self.options.wrap=='last'||self.options.size==null||self.last<self.options.size)self.startAuto();self.buttons();self.notify('onAfterAnimation');};this.notify('onBeforeAnimation');if(!this.options.animation||a==false){this.list.css(this.lt,p+'px');scrolled();}else{var o=!this.options.vertical?{'left':p}:{'top':p};this.list.animate(o,this.options.animation,this.options.easing,scrolled);}},startAuto:function(s){if(s!=undefined)this.options.auto=s;if(this.options.auto==0)return this.stopAuto();if(this.timer!=null)return;var self=this;this.timer=setTimeout(function(){self.next();},this.options.auto*1000);},stopAuto:function(){if(this.timer==null)return;clearTimeout(this.timer);this.timer=null;},buttons:function(n,p){if(n==undefined||n==null){var n=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!='first')||this.options.size==null||this.last<this.options.size);if(!this.locked&&(!this.options.wrap||this.options.wrap=='first')&&this.options.size!=null&&this.last>=this.options.size)n=this.tail!=null&&!this.inTail;}if(p==undefined||p==null){var p=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!='last')||this.first>1);if(!this.locked&&(!this.options.wrap||this.options.wrap=='last')&&this.options.size!=null&&this.first==1)p=this.tail!=null&&this.inTail;}var self=this;this.buttonNext[n?'bind':'unbind'](this.options.buttonNextEvent+'.jcarousel',this.funcNext)[n?'removeClass':'addClass'](this.className('jcarousel-next-disabled')).attr('disabled',n?false:true);this.buttonPrev[p?'bind':'unbind'](this.options.buttonPrevEvent+'.jcarousel',this.funcPrev)[p?'removeClass':'addClass'](this.className('jcarousel-prev-disabled')).attr('disabled',p?false:true);if(this.buttonNext.length>0&&(this.buttonNext[0].jcarouselstate==undefined||this.buttonNext[0].jcarouselstate!=n)&&this.options.buttonNextCallback!=null){this.buttonNext.each(function(){self.options.buttonNextCallback(self,this,n);});this.buttonNext[0].jcarouselstate=n;}if(this.buttonPrev.length>0&&(this.buttonPrev[0].jcarouselstate==undefined||this.buttonPrev[0].jcarouselstate!=p)&&this.options.buttonPrevCallback!=null){this.buttonPrev.each(function(){self.options.buttonPrevCallback(self,this,p);});this.buttonPrev[0].jcarouselstate=p;}},notify:function(evt){var state=this.prevFirst==null?'init':(this.prevFirst<this.first?'next':'prev');this.callback('itemLoadCallback',evt,state);if(this.prevFirst!==this.first){this.callback('itemFirstInCallback',evt,state,this.first);this.callback('itemFirstOutCallback',evt,state,this.prevFirst);}if(this.prevLast!==this.last){this.callback('itemLastInCallback',evt,state,this.last);this.callback('itemLastOutCallback',evt,state,this.prevLast);}this.callback('itemVisibleInCallback',evt,state,this.first,this.last,this.prevFirst,this.prevLast);this.callback('itemVisibleOutCallback',evt,state,this.prevFirst,this.prevLast,this.first,this.last);},callback:function(cb,evt,state,i1,i2,i3,i4){if(this.options[cb]==undefined||(typeof this.options[cb]!='object'&&evt!='onAfterAnimation'))return;var callback=typeof this.options[cb]=='object'?this.options[cb][evt]:this.options[cb];if(!$.isFunction(callback))return;var self=this;if(i1===undefined)callback(self,state,evt);else if(i2===undefined)this.get(i1).each(function(){callback(self,this,i1,state,evt);});else{for(var i=i1;i<=i2;i++)if(i!==null&&!(i>=i3&&i<=i4))this.get(i).each(function(){callback(self,this,i,state,evt);});}},create:function(i){return this.format('<li></li>',i);},format:function(e,i){var $e=$(e).addClass(this.className('jcarousel-item')).addClass(this.className('jcarousel-item-'+i)).css({'float':'left','list-style':'none'});$e.attr('jcarouselindex',i);return $e;},className:function(c){return c+' '+c+(!this.options.vertical?'-horizontal':'-vertical');},dimension:function(e,d){var el=e.jquery!=undefined?e[0]:e;var old=!this.options.vertical?el.offsetWidth+$jc.margin(el,'marginLeft')+$jc.margin(el,'marginRight'):el.offsetHeight+$jc.margin(el,'marginTop')+$jc.margin(el,'marginBottom');if(d==undefined||old==d)return old;var w=!this.options.vertical?d-$jc.margin(el,'marginLeft')-$jc.margin(el,'marginRight'):d-$jc.margin(el,'marginTop')-$jc.margin(el,'marginBottom');$(el).css(this.wh,w+'px');return this.dimension(el);},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-$jc.intval(this.clip.css('borderLeftWidth'))-$jc.intval(this.clip.css('borderRightWidth')):this.clip[0].offsetHeight-$jc.intval(this.clip.css('borderTopWidth'))-$jc.intval(this.clip.css('borderBottomWidth'));},index:function(i,s){if(s==undefined)s=this.options.size;return Math.round((((i-1)/s)-Math.floor((i-1)/s))*s)+1;}});$jc.extend({defaults:function(d){return $.extend(defaults,d||{});},margin:function(e,p){if(!e)return 0;var el=e.jquery!=undefined?e[0]:e;/*if(p=='marginRight'&&$.browser.safari){var old={'display':'block','float':'none','width':'auto'},oWidth,oWidth2;$.swap(el,old,function(){oWidth=el.offsetWidth;});old['marginRight']=0;$.swap(el,old,function(){oWidth2=el.offsetWidth;});return oWidth2-oWidth;}*/return $jc.intval($.css(el,p));},intval:function(v){v=parseInt(v);return isNaN(v)?0:v;}});})(jQuery);
/*
 * SimpleModal 1.4.2 - jQuery Plugin
 * http://simplemodal.com/
 * Copyright (c) 2011 Eric Martin
 * Licensed under MIT and GPL
 * Date: Sat, Dec 17 2011 15:35:38 -0800
 */
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){var j=[],k=b(document),l=b.browser.msie&&6===parseInt(b.browser.version)&&"object"!==typeof window.XMLHttpRequest,n=b.browser.msie&&7===parseInt(b.browser.version),m=null,h=b(window),i=[];b.modal=function(a,d){return b.modal.impl.init(a,d)};b.modal.close=function(){b.modal.impl.close()};b.modal.focus=function(a){b.modal.impl.focus(a)};b.modal.setContainerDimensions=function(){b.modal.impl.setContainerDimensions()};
b.modal.setPosition=function(){b.modal.impl.setPosition()};b.modal.update=function(a,d){b.modal.impl.update(a,d)};b.fn.modal=function(a){return b.modal.impl.init(this,a)};b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1E3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',
closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};b.modal.impl={d:{},init:function(a,d){if(this.d.data)return!1;m=b.browser.msie&&!b.boxModel;this.o=b.extend({},b.modal.defaults,d);this.zIndex=this.o.zIndex;this.occb=!1;if("object"===typeof a){if(a=a instanceof jQuery?a:b(a),this.d.placeholder=!1,0<a.parent().parent().size()&&(a.before(b("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),
this.d.placeholder=!0,this.display=a.css("display"),!this.o.persist))this.d.orig=a.clone(!0)}else if("string"===typeof a||"number"===typeof a)a=b("<div></div>").html(a);else return alert("SimpleModal Error: Unsupported data type: "+typeof a),this;this.create(a);this.open();b.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]);return this},create:function(a){this.getDimensions();if(this.o.modal&&l)this.d.iframe=b('<iframe src="javascript:false;"></iframe>').css(b.extend(this.o.iframeCss,
{display:"none",opacity:0,position:"fixed",height:i[0],width:i[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo);this.d.overlay=b("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(b.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?j[0]:0,width:this.o.modal?j[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo);this.d.container=b("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(b.extend({position:this.o.fixed?
"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?b(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo);this.d.wrap=b("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container);this.d.data=a.attr("id",a.attr("id")||this.o.dataId).addClass("simplemodal-data").css(b.extend(this.o.dataCss,{display:"none"})).appendTo("body");this.setContainerDimensions();
this.d.data.appendTo(this.d.wrap);(l||m)&&this.fixIE()},bindEvents:function(){var a=this;b("."+a.o.closeClass).bind("click.simplemodal",function(b){b.preventDefault();a.close()});a.o.modal&&a.o.close&&a.o.overlayClose&&a.d.overlay.bind("click.simplemodal",function(b){b.preventDefault();a.close()});k.bind("keydown.simplemodal",function(b){a.o.modal&&9===b.keyCode?a.watchTab(b):a.o.close&&a.o.escClose&&27===b.keyCode&&(b.preventDefault(),a.close())});h.bind("resize.simplemodal orientationchange.simplemodal",
function(){a.getDimensions();a.o.autoResize?a.setContainerDimensions():a.o.autoPosition&&a.setPosition();l||m?a.fixIE():a.o.modal&&(a.d.iframe&&a.d.iframe.css({height:i[0],width:i[1]}),a.d.overlay.css({height:j[0],width:j[1]}))})},unbindEvents:function(){b("."+this.o.closeClass).unbind("click.simplemodal");k.unbind("keydown.simplemodal");h.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var a=this.o.position;b.each([this.d.iframe||null,!this.o.modal?null:this.d.overlay,
"fixed"===this.d.container.css("position")?this.d.container:null],function(b,f){if(f){var g=f[0].style;g.position="absolute";if(2>b)g.removeExpression("height"),g.removeExpression("width"),g.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),g.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var c,e;a&&a.constructor===
Array?(c=a[0]?"number"===typeof a[0]?a[0].toString():a[0].replace(/px/,""):f.css("top").replace(/px/,""),c=-1===c.indexOf("%")?c+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(c.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',a[1]&&(e="number"===typeof a[1]?
a[1].toString():a[1].replace(/px/,""),e=-1===e.indexOf("%")?e+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(e.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(c='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',
e='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"');g.removeExpression("top");g.removeExpression("left");g.setExpression("top",c);g.setExpression("left",e)}}})},focus:function(a){var d=this,a=a&&-1!==b.inArray(a,["first","last"])?a:"first",f=b(":input:enabled:visible:"+a,d.d.wrap);setTimeout(function(){0<f.length?f.focus():d.d.wrap.focus()},
10)},getDimensions:function(){var a=b.browser.opera&&"9.5"<b.browser.version&&"1.3">b.fn.jquery||b.browser.opera&&"9.5">b.browser.version&&"1.2.6"<b.fn.jquery?h[0].innerHeight:h.height();j=[k.height(),k.width()];i=[a,h.width()]},getVal:function(a,b){return a?"number"===typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?i[0]:i[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){if(!this.d.data)return!1;this.d.origHeight=this.getVal(a,"h");this.d.origWidth=this.getVal(b,
"w");this.d.data.hide();a&&this.d.container.css("height",a);b&&this.d.container.css("width",b);this.setContainerDimensions();this.d.data.show();this.o.focus&&this.focus();this.unbindEvents();this.bindEvents()},setContainerDimensions:function(){var a=l||n,d=this.d.origHeight?this.d.origHeight:b.browser.opera?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),a=this.d.origWidth?this.d.origWidth:b.browser.opera?this.d.container.width():
this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),f=this.d.data.outerHeight(!0),g=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||d;this.d.origWidth=this.d.origWidth||a;var c=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,e=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,c=c&&c<i[0]?c:i[0],e=e&&e<i[1]?e:i[1],h=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",d=d?this.o.autoResize&&d>c?c:d<h?h:d:f?f>c?c:this.o.minHeight&&
"auto"!==h&&f<h?h:f:h,c=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>e?e:a<c?c:a:g?g>e?e:this.o.minWidth&&"auto"!==c&&g<c?c:g:c;this.d.container.css({height:d,width:a});this.d.wrap.css({overflow:f>d||g>a?"auto":"visible"});this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=i[0]/2-this.d.container.outerHeight(!0)/2;b=i[1]/2-this.d.container.outerWidth(!0)/2;var f="fixed"!==this.d.container.css("position")?h.scrollTop():0;this.o.position&&"[object Array]"===
Object.prototype.toString.call(this.o.position)?(a=f+(this.o.position[0]||a),b=this.o.position[1]||b):a=f+a;this.d.container.css({left:b,top:a})},watchTab:function(a){if(0<b(a.target).parents(".simplemodal-container").length){if(this.inputs=b(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),!a.shiftKey&&a.target===this.inputs[this.inputs.length-1]||a.shiftKey&&a.target===this.inputs[0]||0===this.inputs.length)a.preventDefault(),this.focus(a.shiftKey?"last":"first")}else a.preventDefault(),
this.focus()},open:function(){this.d.iframe&&this.d.iframe.show();b.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show());this.o.focus&&this.focus();this.bindEvents()},close:function(){if(!this.d.data)return!1;this.unbindEvents();if(b.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var a=b("#simplemodal-placeholder");this.o.persist?a.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",
this.display)):(this.d.data.hide().remove(),a.replaceWith(this.d.orig))}else this.d.data.hide().remove();this.d.container.hide().remove();this.d.overlay.hide();this.d.iframe&&this.d.iframe.hide().remove();this.d.overlay.remove();this.d={}}}}});
/*
 * jQuery Selectbox plugin 0.1.2
 *
 * Copyright 2011, Dimitar Ivanov (http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 * 
 * Date: Fri Mar 18 22:28:49 2011 +0200
 */
(function($,undefined){var PROP_NAME="selectbox",FALSE=false,TRUE=true;function Selectbox(){this._state=[];this._defaults={classHolder:"sbHolder",classHolderDisabled:"sbHolderDisabled",classSelector:"sbSelector",classOptions:"sbOptions",classToggleOpen:"sbToggleOpen",classToggle:"sbToggle",effect:"slide",onChange:null,onOpen:null,onClose:null}}$.extend(Selectbox.prototype,{_isOpenSelectbox:function(target){if(!target){return FALSE}var inst=this._getInst(target);return inst.isOpen},_isDisabledSelectbox:function(target){if(!target){return FALSE}var inst=this._getInst(target);return inst.isDisabled},_attachSelectbox:function(target,settings){if(this._getInst(target)){return FALSE}var $target=$(target),self=this,inst=self._newInst($target),sbHolder,sbSelector,sbToggle,sbOptions,s=FALSE,opts=$target.find("option"),olen=opts.length;$target.attr("sb",inst.uid);$.extend(inst.settings,self._defaults,settings);self._state[inst.uid]=FALSE;$target.hide();function closeOthers(){var key,uid=this.attr("id").split("_")[1];for(key in self._state){if(key!==uid){if(self._state.hasOwnProperty(key)){if($(":input[sb='"+key+"']")[0]){self._closeSelectbox($(":input[sb='"+key+"']")[0])}}}}}sbHolder=$("<div>",{id:"sbHolder_"+inst.uid,"class":inst.settings.classHolder});sbSelector=$("<a>",{id:"sbSelector_"+inst.uid,href:"#","class":inst.settings.classSelector,click:function(e){e.preventDefault();closeOthers.apply($(this),[]);var uid=$(this).attr("id").split("_")[1];if(self._state[uid]){self._closeSelectbox(target)}else{self._openSelectbox(target)}}});sbToggle=$("<a>",{id:"sbToggle_"+inst.uid,href:"#","class":inst.settings.classToggle,click:function(e){e.preventDefault();closeOthers.apply($(this),[]);var uid=$(this).attr("id").split("_")[1];if(self._state[uid]){self._closeSelectbox(target)}else{self._openSelectbox(target)}}});sbToggle.appendTo(sbHolder);sbOptions=$("<ul>",{id:"sbOptions_"+inst.uid,"class":inst.settings.classOptions,css:{display:"none"}});opts.each(function(i){var that=$(this),li=$("<li>");if(that.is(":selected")){sbSelector.text(that.text());s=TRUE}if(i===olen-1){li.addClass("last")}$("<a>",{href:"#"+that.val(),rel:that.val(),text:that.text(),click:function(e){e.preventDefault();var t=sbToggle,uid=t.attr("id").split("_")[1];self._changeSelectbox(target,$(this).attr("rel"),$(this).text());self._closeSelectbox(target)}}).appendTo(li);li.appendTo(sbOptions)});if(!s){sbSelector.text(opts.first().text())}$.data(target,PROP_NAME,inst);sbSelector.appendTo(sbHolder);sbOptions.appendTo(sbHolder);sbHolder.insertAfter($target)},_detachSelectbox:function(target){var inst=this._getInst(target);if(!inst){return FALSE}$("#sbHolder_"+inst.uid).remove();$.data(target,PROP_NAME,null);$(target).show()},_changeSelectbox:function(target,value,text){var inst=this._getInst(target),onChange=this._get(inst,"onChange");$("#sbSelector_"+inst.uid).text(text);$(target).children("option[value='"+value+"']").attr("selected",TRUE);if(onChange){onChange.apply((inst.input?inst.input[0]:null),[value,inst])}else{if(inst.input){inst.input.trigger("change")}}},_enableSelectbox:function(target){var inst=this._getInst(target);if(!inst||!inst.isDisabled){return FALSE}$("#sbHolder_"+inst.uid).removeClass(inst.settings.classHolderDisabled);inst.isDisabled=FALSE;$.data(target,PROP_NAME,inst)},_disableSelectbox:function(target){var inst=this._getInst(target);if(!inst||inst.isDisabled){return FALSE}$("#sbHolder_"+inst.uid).addClass(inst.settings.classHolderDisabled);inst.isDisabled=TRUE;$.data(target,PROP_NAME,inst)},_optionSelectbox:function(target,name,value){var inst=this._getInst(target);if(!inst){return FALSE}inst[name]=value;$.data(target,PROP_NAME,inst)},_openSelectbox:function(target){var inst=this._getInst(target);if(!inst||inst.isOpen||inst.isDisabled){return }var el=$("#sbOptions_"+inst.uid),viewportHeight=parseInt($(window).height(),10),offset=$("#sbHolder_"+inst.uid).offset(),scrollTop=$(window).scrollTop(),height=el.prev().height(),diff=viewportHeight-(offset.top-scrollTop)-height/2,onOpen=this._get(inst,"onOpen");el.css({top:height+"px",maxHeight:(diff-height)+"px"});inst.settings.effect==="fade"?el.fadeIn():el.slideDown();$("#sbToggle_"+inst.uid).addClass(inst.settings.classToggleOpen);this._state[inst.uid]=TRUE;inst.isOpen=TRUE;if(onOpen){onOpen.apply((inst.input?inst.input[0]:null),[inst])}$.data(target,PROP_NAME,inst)},_closeSelectbox:function(target){var inst=this._getInst(target);if(!inst||!inst.isOpen){return }var onClose=this._get(inst,"onClose");inst.settings.effect==="fade"?$("#sbOptions_"+inst.uid).fadeOut():$("#sbOptions_"+inst.uid).slideUp();$("#sbToggle_"+inst.uid).removeClass(inst.settings.classToggleOpen);this._state[inst.uid]=FALSE;inst.isOpen=FALSE;if(onClose){onClose.apply((inst.input?inst.input[0]:null),[inst])}$.data(target,PROP_NAME,inst)},_newInst:function(target){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,uid:Math.floor(Math.random()*99999999),isOpen:FALSE,isDisabled:FALSE,settings:{}}},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this selectbox"}},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]}});$.fn.selectbox=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&options=="isDisabled"){return $.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this].concat(otherArgs)):$.selectbox._attachSelectbox(this,options)})};$.selectbox=new Selectbox();$.selectbox.version="0.1.2"})(jQuery);/*jslint browser: true */ /*global jQuery: true */

/**
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

// TODO JsDoc

/**
 * Create a cookie with the given key and value and other optional parameters.
 *
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Set the value of a cookie.
 * @example $.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });
 * @desc Create a cookie with all available options.
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Create a session cookie.
 * @example $.cookie('the_cookie', null);
 * @desc Delete a cookie by passing null as value. Keep in mind that you have to use the same path and domain
 *       used when the cookie was set.
 *
 * @param String key The key of the cookie.
 * @param String value The value of the cookie.
 * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.
 * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.
 *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.
 *                             If set to null or omitted, the cookie will be a session cookie and will not be retained
 *                             when the the browser exits.
 * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
 * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
 * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will
 *                        require a secure protocol (like HTTPS).
 * @type undefined
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */

/**
 * Get the value of a cookie with the given key.
 *
 * @example $.cookie('the_cookie');
 * @desc Get the value of a cookie.
 *
 * @param String key The key of the cookie.
 * @return The value of the cookie.
 * @type String
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */
jQuery.cookie = function (key, value, options) {
    
    // key and at least value given, set cookie...
    if (arguments.length > 1 && String(value) !== "[object Object]") {
        options = jQuery.extend({}, options);

        if (value === null || value === undefined) {
            options.expires = -1;
        }

        if (typeof options.expires === 'number') {
            var days = options.expires, t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }
        
        value = String(value);
        
        return (document.cookie = [
            encodeURIComponent(key), '=',
            options.raw ? value : encodeURIComponent(value),
            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
            options.path ? '; path=' + options.path : '',
            options.domain ? '; domain=' + options.domain : '',
            options.secure ? '; secure' : ''
        ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || {};
    var result, decode = options.raw ? function (s) { return s; } : decodeURIComponent;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;
};
/*
 * jQuery validation plug-in 1.7
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2008 Jrn Zaefferer
 *
 * $Id: jquery.validate.js 6403 2009-06-17 14:27:16Z joern.zaefferer $
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var validator=$.data(this[0],'validator');if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}this.submit(function(event){if(validator.settings.debug)event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)this.element(element);else if(element.parentNode.name in this.submitted)this.element(element.parentNode);},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0]);}$(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate);if(this.settings.invalidHandler)$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method",e);throw e;}}if(dependencyMismatch)return;if(this.objectLength(rules))this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)return arguments[i];}return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(label).length)this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))return this.findByName(element.name).filter(':checked').length;}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages;}return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=(previous.message=response||validator.defaultMessage(element,"remote"));errors[element.name]=$.isFunction(message)?message(value):message;validator.showErrors(errors);}previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}else if(this.pending[element.name]){return"pending";}return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9-]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9;}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}return(pendingRequests[port]=ajax.apply(this,arguments));}return ajax.apply(this,arguments);};})(jQuery);;(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});};$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);
//Additional Methods
(function() {
	
	function stripHtml(value) {
		// remove html tags and space chars
		return value.replace(/<.[^<>]*?>/g, ' ').replace(/&nbsp;|&#160;/gi, ' ')
		// remove numbers and punctuation
		.replace(/[0-9.(),;:!?%#$'"_+=\/-]*/g,'');
	}
	jQuery.validator.addMethod("maxWords", function(value, element, params) { 
	    return this.optional(element) || stripHtml(value).match(/\b\w+\b/g).length < params; 
	}, jQuery.validator.format("Please enter {0} words or less.")); 
	 
	jQuery.validator.addMethod("minWords", function(value, element, params) { 
	    return this.optional(element) || stripHtml(value).match(/\b\w+\b/g).length >= params; 
	}, jQuery.validator.format("Please enter at least {0} words.")); 
	 
	jQuery.validator.addMethod("rangeWords", function(value, element, params) { 
	    return this.optional(element) || stripHtml(value).match(/\b\w+\b/g).length >= params[0] && value.match(/bw+b/g).length < params[1]; 
	}, jQuery.validator.format("Please enter between {0} and {1} words."));

})();

jQuery.validator.addMethod("letterswithbasicpunc", function(value, element) {
	return this.optional(element) || /^[a-z-.,()'\"\s]+$/i.test(value);
}, "Letters or punctuation only please");  

jQuery.validator.addMethod("alphanumeric", function(value, element) {
	// /^\w+$/i.test(value);
	return this.optional(element) || /^[\w\d\s]+$/i.test(value);
}, "Letters, numbers, spaces or underscores only please");  

jQuery.validator.addMethod("lettersnumbersonly", function(value, element) {
	// /^\w+$/i.test(value);
	return this.optional(element) || /^[\w\d]+$/i.test(value);
}, "Letters and numbers only please");  

jQuery.validator.addMethod("lettersdigitsspaceonly", function(value, element) {
	// /^\w+$/i.test(value);
	return this.optional(element) || /^[a-zA-Z0-9\s]+$/i.test(value);
}, "Letters, numbers, or spaces only please");  

jQuery.validator.addMethod("lettersonly", function(value, element) {
	return this.optional(element) || /^[a-z'\"\s]+$/i.test(value);
}, "Letters only please"); 

jQuery.validator.addMethod("lettersdashonly", function(value, element) {
	return this.optional(element) || /^[a-z-'\"\s]+$/i.test(value);
}, "Letters and dashes only please"); 

jQuery.validator.addMethod("lettersdashperiodonly", function(value, element) {
	return this.optional(element) || /^[a-z-.'\"\s]+$/i.test(value);
}, "Letters, dashes and periods only please"); 

jQuery.validator.addMethod("nowhitespace", function(value, element) {
	return this.optional(element) || /^\S+$/i.test(value);
}, "No white space please"); 

jQuery.validator.addMethod("ziprange", function(value, element) {
	return this.optional(element) || /^90[2-5]\d\{2}-\d{4}$/.test(value);
}, "Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx");

jQuery.validator.addMethod("integer", function(value, element) {
	return this.optional(element) || /^-?\d+$/.test(value);
}, "A positive or negative non-decimal number please");

/**
* Return true, if the value is a valid vehicle identification number (VIN).
*
* Works with all kind of text inputs.
*
* @example <input type="text" size="20" name="VehicleID" class="{required:true,vinUS:true}" />
* @desc Declares a required input element whose value must be a valid vehicle identification number.
*
* @name jQuery.validator.methods.vinUS
* @type Boolean
* @cat Plugins/Validate/Methods
*/ 
jQuery.validator.addMethod(
	"vinUS",
	function(v){
		if (v.length != 17)
			return false;
		var i, n, d, f, cd, cdv;
		var LL    = ["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"];
		var VL    = [1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9];
		var FL    = [8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2];
		var rs    = 0;
		for(i = 0; i < 17; i++){
		    f = FL[i];
		    d = v.slice(i,i+1);
		    if(i == 8){
		        cdv = d;
		    }
		    if(!isNaN(d)){
		        d *= f;
		    }
		    else{
		        for(n = 0; n < LL.length; n++){
		            if(d.toUpperCase() === LL[n]){
		                d = VL[n];
		                d *= f;
		                if(isNaN(cdv) && n == 8){
		                    cdv = LL[n];
		                }
		                break;
		            }
		        }
		    }
		    rs += d;
		}
		cd = rs % 11;
		if(cd == 10){cd = "X";}
		if(cd == cdv){return true;}
		return false; 
	},
	"The specified vehicle identification number (VIN) is invalid."
);

/**
  * Return true, if the value is a valid date, also making this formal check dd/mm/yyyy.
  *
  * @example jQuery.validator.methods.date("01/01/1900")
  * @result true
  *
  * @example jQuery.validator.methods.date("01/13/1990")
  * @result false
  *
  * @example jQuery.validator.methods.date("01.01.1900")
  * @result false
  *
  * @example <input name="pippo" class="{dateITA:true}" />
  * @desc Declares an optional input element whose value must be a valid date.
  *
  * @name jQuery.validator.methods.dateITA
  * @type Boolean
  * @cat Plugins/Validate/Methods
  */
jQuery.validator.addMethod(
	"dateITA",
	function(value, element) {
		var check = false;
		var re = /^\d{1,2}\/\d{1,2}\/\d{4}$/;
		if( re.test(value)){
			var adata = value.split('/');
			var gg = parseInt(adata[0],10);
			var mm = parseInt(adata[1],10);
			var aaaa = parseInt(adata[2],10);
			var xdata = new Date(aaaa,mm-1,gg);
			if ( ( xdata.getFullYear() == aaaa ) && ( xdata.getMonth () == mm - 1 ) && ( xdata.getDate() == gg ) )
				check = true;
			else
				check = false;
		} else
			check = false;
		return this.optional(element) || check;
	}, 
	"Please enter a correct date"
);

jQuery.validator.addMethod("dateNL", function(value, element) {
		return this.optional(element) || /^\d\d?[\.\/-]\d\d?[\.\/-]\d\d\d?\d?$/.test(value);
	}, "Vul hier een geldige datum in."
);

jQuery.validator.addMethod("time", function(value, element) {
		return this.optional(element) || /^([01][0-9])|(2[0123]):([0-5])([0-9])$/.test(value);
	}, "Please enter a valid time, between 00:00 and 23:59"
);

/**
 * matches US phone number format 
 * 
 * where the area code may not start with 1 and the prefix may not start with 1 
 * allows '-' or ' ' as a separator and allows parens around area code 
 * some people may want to put a '1' in front of their number 
 * 
 * 1(212)-999-2345
 * or
 * 212 999 2344
 * or
 * 212-999-0983
 * 
 * but not
 * 111-123-5434
 * and not
 * 212 123 4567
 */
jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ""); 
	return this.optional(element) || phone_number.length > 9 &&
		phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");

jQuery.validator.addMethod('phoneUK', function(phone_number, element) {
return this.optional(element) || phone_number.length > 9 &&
phone_number.match(/^(\(?(0|\+44)[1-9]{1}\d{1,4}?\)?\s?\d{3,4}\s?\d{3,4})$/);
}, 'Please specify a valid phone number');

jQuery.validator.addMethod('mobileUK', function(phone_number, element) {
return this.optional(element) || phone_number.length > 9 &&
phone_number.match(/^((0|\+44)7(5|6|7|8|9){1}\d{2}\s?\d{6})$/);
}, 'Please specify a valid mobile number');

// TODO check if value starts with <, otherwise don't try stripping anything
jQuery.validator.addMethod("strippedminlength", function(value, element, param) {
	return jQuery(value).text().length >= param;
}, jQuery.validator.format("Please enter at least {0} characters"));

// same as email, but TLD is optional
jQuery.validator.addMethod("email2", function(value, element, param) {
	return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value); 
}, jQuery.validator.messages.email);

// same as url, but TLD is optional
jQuery.validator.addMethod("url2", function(value, element, param) {
	return this.optional(element) || /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value); 
}, jQuery.validator.messages.url);

// NOTICE: Modified version of Castle.Components.Validator.CreditCardValidator
// Redistributed under the the Apache License 2.0 at http://www.apache.org/licenses/LICENSE-2.0
// Valid Types: mastercard, visa, amex, dinersclub, enroute, discover, jcb, unknown, all (overrides all other settings)
jQuery.validator.addMethod("creditcardtypes", function(value, element, param) {

	if (/[^0-9-]+/.test(value)) 
		return false;
	
	value = value.replace(/\D/g, "");
	
	var validTypes = 0x0000;
	
	if (param.mastercard) 
		validTypes |= 0x0001;
	if (param.visa) 
		validTypes |= 0x0002;
	if (param.amex) 
		validTypes |= 0x0004;
	if (param.dinersclub) 
		validTypes |= 0x0008;
	if (param.enroute) 
		validTypes |= 0x0010;
	if (param.discover) 
		validTypes |= 0x0020;
	if (param.jcb) 
		validTypes |= 0x0040;
	if (param.unknown) 
		validTypes |= 0x0080;
	if (param.all) 
		validTypes = 0x0001 | 0x0002 | 0x0004 | 0x0008 | 0x0010 | 0x0020 | 0x0040 | 0x0080;
	
	if (validTypes & 0x0001 && /^(51|52|53|54|55)/.test(value)) { //mastercard
		return value.length == 16;
	}
	if (validTypes & 0x0002 && /^(4)/.test(value)) { //visa
		return value.length == 16;
	}
	if (validTypes & 0x0004 && /^(34|37)/.test(value)) { //amex
		return value.length == 15;
	}
	if (validTypes & 0x0008 && /^(300|301|302|303|304|305|36|38)/.test(value)) { //dinersclub
		return value.length == 14;
	}
	if (validTypes & 0x0010 && /^(2014|2149)/.test(value)) { //enroute
		return value.length == 15;
	}
	if (validTypes & 0x0020 && /^(6011)/.test(value)) { //discover
		return value.length == 16;
	}
	if (validTypes & 0x0040 && /^(3)/.test(value)) { //jcb
		return value.length == 16;
	}
	if (validTypes & 0x0040 && /^(2131|1800)/.test(value)) { //jcb
		return value.length == 15;
	}
	if (validTypes & 0x0080) { //unknown
		return true;
	}
	return false;
}, "Please enter a valid credit card number.");

jQuery.validator.addMethod("defaultInvalid", function(value, element,param) {
    if (element.value == param)
    {
        return false;
    }
    return true;
});(function($){$.tiny=$.tiny||{};$.tiny.scrollbar={options:{axis:'y',wheel:40,scroll:true,size:'auto',sizethumb:'auto'}};$.fn.tinyscrollbar=function(options){var options=$.extend({},$.tiny.scrollbar.options,options);this.each(function(){$(this).data('tsb',new Scrollbar($(this),options));});return this;};$.fn.tinyscrollbar_update=function(sScroll){return $(this).data('tsb').update(sScroll);};function Scrollbar(root,options){var oSelf=this;var oWrapper=root;var oViewport={obj:$('.viewport',root)};var oContent={obj:$('.overview',root)};var oScrollbar={obj:$('.scrollbar',root)};var oTrack={obj:$('.track',oScrollbar.obj)};var oThumb={obj:$('.thumb',oScrollbar.obj)};var sAxis=options.axis=='x',sDirection=sAxis?'left':'top',sSize=sAxis?'Width':'Height';var iScroll,iPosition={start:0,now:0},iMouse={};function initialize(){oSelf.update();setEvents();return oSelf;}
this.update=function(sScroll){oViewport[options.axis]=oViewport.obj[0]['offset'+sSize];oContent[options.axis]=oContent.obj[0]['scroll'+sSize];oContent.ratio=oViewport[options.axis]/oContent[options.axis];oScrollbar.obj.toggleClass('disable',oContent.ratio>=1);oTrack[options.axis]=options.size=='auto'?oViewport[options.axis]:options.size;oThumb[options.axis]=Math.min(oTrack[options.axis],Math.max(0,(options.sizethumb=='auto'?(oTrack[options.axis]*oContent.ratio):options.sizethumb)));oScrollbar.ratio=options.sizethumb=='auto'?(oContent[options.axis]/oTrack[options.axis]):(oContent[options.axis]-oViewport[options.axis])/(oTrack[options.axis]-oThumb[options.axis]);iScroll=(sScroll=='relative'&&oContent.ratio<=1)?Math.min((oContent[options.axis]-oViewport[options.axis]),Math.max(0,iScroll)):0;iScroll=(sScroll=='bottom'&&oContent.ratio<=1)?(oContent[options.axis]-oViewport[options.axis]):isNaN(parseInt(sScroll))?iScroll:parseInt(sScroll);setSize();};function setSize(){oThumb.obj.css(sDirection,iScroll/oScrollbar.ratio);oContent.obj.css(sDirection,-iScroll);iMouse['start']=oThumb.obj.offset()[sDirection];var sCssSize=sSize.toLowerCase();oScrollbar.obj.css(sCssSize,oTrack[options.axis]);oTrack.obj.css(sCssSize,oTrack[options.axis]);oThumb.obj.css(sCssSize,oThumb[options.axis]);};function setEvents(){oThumb.obj.bind('mousedown',start);oThumb.obj[0].ontouchstart=function(oEvent){oEvent.preventDefault();oThumb.obj.unbind('mousedown');start(oEvent.touches[0]);return false;};oTrack.obj.bind('mouseup',drag);if(options.scroll&&this.addEventListener){oWrapper[0].addEventListener('DOMMouseScroll',wheel,false);oWrapper[0].addEventListener('mousewheel',wheel,false);}
else if(options.scroll){oWrapper[0].onmousewheel=wheel;}};function start(oEvent){iMouse.start=sAxis?oEvent.pageX:oEvent.pageY;var oThumbDir=parseInt(oThumb.obj.css(sDirection));iPosition.start=oThumbDir=='auto'?0:oThumbDir;$(document).bind('mousemove',drag);document.ontouchmove=function(oEvent){$(document).unbind('mousemove');drag(oEvent.touches[0]);};$(document).bind('mouseup',end);oThumb.obj.bind('mouseup',end);oThumb.obj[0].ontouchend=document.ontouchend=function(oEvent){$(document).unbind('mouseup');oThumb.obj.unbind('mouseup');end(oEvent.touches[0]);};return false;};function wheel(oEvent){if(!(oContent.ratio>=1)){oEvent=$.event.fix(oEvent||window.event);var iDelta=oEvent.wheelDelta?oEvent.wheelDelta/120:-oEvent.detail/3;iScroll-=iDelta*options.wheel;iScroll=Math.min((oContent[options.axis]-oViewport[options.axis]),Math.max(0,iScroll));oThumb.obj.css(sDirection,iScroll/oScrollbar.ratio);oContent.obj.css(sDirection,-iScroll);oEvent.preventDefault();};};function end(oEvent){$(document).unbind('mousemove',drag);$(document).unbind('mouseup',end);oThumb.obj.unbind('mouseup',end);document.ontouchmove=oThumb.obj[0].ontouchend=document.ontouchend=null;return false;};function drag(oEvent){if(!(oContent.ratio>=1)){iPosition.now=Math.min((oTrack[options.axis]-oThumb[options.axis]),Math.max(0,(iPosition.start+((sAxis?oEvent.pageX:oEvent.pageY)-iMouse.start))));iScroll=iPosition.now*oScrollbar.ratio;oContent.obj.css(sDirection,-iScroll);oThumb.obj.css(sDirection,iPosition.now);;}
return false;};return initialize();};})(jQuery);/* Copyright (c) 2009 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 *
 * Version: 3.0.2
 * 
 * Requires: 1.2.2+
 */
(function(c){var a=["DOMMouseScroll","mousewheel"];c.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var d=a.length;d;){this.addEventListener(a[--d],b,false)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var d=a.length;d;){this.removeEventListener(a[--d],b,false)}}else{this.onmousewheel=null}}};c.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}});function b(f){var d=[].slice.call(arguments,1),g=0,e=true;f=c.event.fix(f||window.event);f.type="mousewheel";if(f.wheelDelta){g=f.wheelDelta/120}if(f.detail){g=-f.detail/3}d.unshift(f,g);return c.event.handle.apply(this,d)}})(jQuery);/*!
 * jQuery UI 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,j){function k(a,b){var d=a.nodeName.toLowerCase();if("area"===d){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&l(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&l(a)}function l(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=
this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,m,n){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(m)g-=parseFloat(c.curCSS(f,"border"+this+"Width",true))||0;if(n)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,
outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){return k(a,!isNaN(c.attr(a,"tabindex")))},tabbable:function(a){var b=c.attr(a,
"tabindex"),d=isNaN(b);return(d||b>=0)&&k(a,!d)}});c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&
a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&
c.ui.isOverAxis(b,e,i)}})}})(jQuery);
;/*!
 * jQuery UI Widget 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{b(d).triggerHandler("remove")}catch(e){}k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(d){}});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=
function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):
d;if(e&&d.charAt(0)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=
b.extend(true,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;/*!
 * jQuery UI Mouse 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b){var d=false;b(document).mouseup(function(){d=false});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(true===b.data(c.target,a.widgetName+".preventClickEvent")){b.removeData(c.target,a.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(a){if(!d){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,f=a.which==1,g=typeof this.options.cancel=="string"&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:false;if(!f||g||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}true===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(e){return c._mouseMove(e)};this._mouseUpDelegate=function(e){return c._mouseUp(e)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return d=true}},_mouseMove:function(a){if(b.browser.msie&&
!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
;/*
 * jQuery UI Position 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,
left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=
k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+(parseInt(c.curCSS(this,"marginRight",true))||0),w=m+q+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=
m/2;i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=
d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=
a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),
g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);
;/*
 * jQuery UI Draggable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;if(b.iframeFix)d(b.iframeFix===true?"iframe":b.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return true},_mouseStart:function(a){var b=this.options;
this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a);return true},
_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=
false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},_mouseUp:function(a){this.options.iframeFix===true&&d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a);return d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||
!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&
a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=d(a.containment);var b=a[0];if(b){a.offset();var c=d(b).css("overflow")!=
"hidden";this.containment=[(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0),(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0),(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),
10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+
this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,h=a.pageY;if(this.originalPosition){var g;if(this.containment){if(this.relative_container){g=this.relative_container.offset();g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]}else g=this.containment;if(a.pageX-this.offset.click.left<g[0])e=g[0]+this.offset.click.left;
if(a.pageY-this.offset.click.top<g[1])h=g[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>g[2])e=g[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>g[3])h=g[3]+this.offset.click.top}if(b.grid){h=b.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY;h=g?!(h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3])?h:!(h-this.offset.click.top<g[1])?h-b.grid[1]:h+b.grid[1]:h;e=b.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/
b.grid[0])*b.grid[0]:this.originalPageX;e=g?!(e-this.offset.click.left<g[0]||e-this.offset.click.left>g[2])?e:!(e-this.offset.click.left<g[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,
c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.16"});d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var h=d.data(this,"sortable");if(h&&!h.options.disabled){c.sortables.push({instance:h,shouldRevert:h.options.revert});
h.refreshPositions();h._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=d(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;
c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("opacity"))b._opacity=
a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!=
"x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-b.overflowOffset.left<
c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-
c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,
width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,h=b.offset.left,g=h+c.helperProportions.width,n=b.offset.top,o=n+c.helperProportions.height,i=c.snapElements.length-1;i>=0;i--){var j=c.snapElements[i].left,l=j+c.snapElements[i].width,k=c.snapElements[i].top,m=k+c.snapElements[i].height;if(j-e<h&&h<l+e&&k-e<n&&n<m+e||j-e<h&&h<l+e&&k-e<o&&o<m+e||j-e<g&&g<l+e&&k-e<n&&n<m+e||j-e<g&&g<l+e&&k-e<o&&
o<m+e){if(f.snapMode!="inner"){var p=Math.abs(k-o)<=e,q=Math.abs(m-n)<=e,r=Math.abs(j-g)<=e,s=Math.abs(l-h)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:k-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:m,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:j-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:l}).left-c.margins.left}var t=
p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(k-n)<=e;q=Math.abs(m-o)<=e;r=Math.abs(j-h)<=e;s=Math.abs(l-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:k,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:m-c.helperProportions.height,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:j}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:l-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[i].snapping&&
(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[i].item}));c.snapElements[i].snapping=p||q||r||s||t}else{c.snapElements[i].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[i].item}));c.snapElements[i].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),
10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);
;/*
 * jQuery UI Droppable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(c){return c.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){if(a=="accept")this.accept=d.isFunction(b)?b:function(c){return c.is(b)};d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",a,this.ui(b))}},_out:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",a,this.ui(b))}},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return false;var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var g=
d.data(this,"droppable");if(g.options.greedy&&!g.options.disabled&&g.options.scope==c.options.scope&&g.accept.call(g.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(g,{offset:g.element.offset()}),g.options.tolerance)){e=true;return false}});if(e)return false;if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
a,this.ui(c));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.16"});d.ui.intersect=function(a,b,c){if(!b.offset)return false;var e=(a.positionAbs||a.position.absolute).left,g=e+a.helperProportions.width,f=(a.positionAbs||a.position.absolute).top,h=f+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;
switch(c){case "fit":return i<=e&&g<=k&&j<=f&&h<=l;case "intersect":return i<e+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<f+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(f>=j&&f<=l||h>=j&&h<=l||f<j&&h>l)&&(e>=
i&&e<=k||g>=i&&g<=k||e<i&&g>k);default:return false}};d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],e=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),f=0;a:for(;f<c.length;f++)if(!(c[f].options.disabled||a&&!c[f].accept.call(c[f].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[f].element[0]){c[f].proportions.height=0;continue a}c[f].visible=c[f].element.css("display")!=
"none";if(c[f].visible){e=="mousedown"&&c[f]._activate.call(c[f],b);c[f].offset=c[f].element.offset();c[f].proportions={width:c[f].element[0].offsetWidth,height:c[f].element[0].offsetHeight}}}},drop:function(a,b){var c=false;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&d.ui.intersect(a,this,this.options.tolerance))c=c||this._drop.call(this,b);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||
a.element)){this.isout=1;this.isover=0;this._deactivate.call(this,b)}}});return c},dragStart:function(a,b){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var c=d.ui.intersect(a,this,this.options.tolerance);
if(c=!c&&this.isover==1?"isout":c&&this.isover==0?"isover":null){var e;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");if(g.length){e=d.data(g[0],"droppable");e.greedyChild=c=="isover"?1:0}}if(e&&c=="isover"){e.isover=0;e.isout=1;e._out.call(e,b)}this[c]=1;this[c=="isout"?"isover":"isout"]=0;this[c=="isover"?"_over":"_out"].call(this,b);if(e&&c=="isout"){e.isout=0;e.isover=1;e._over.call(e,b)}}}})},dragStop:function(a,b){a.element.parents(":not(body,html)").unbind("scroll.droppable");
a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)}}})(jQuery);
;/*
 * jQuery UI Resizable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var c=this.handles.split(",");this.handles={};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle '+("ui-resizable-"+f)+'"></div>');/sw|se|ne|nw/.test(f)&&g.css({zIndex:++a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(h){h=h||this.element;for(var i in this.handles){if(this.handles[i].constructor==
String)this.handles[i]=e(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var j=e(this.handles[i],this.element),l=0;l=/sw|ne|nw|se|n|s/.test(i)?j.outerHeight():j.outerWidth();j=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");h.css(j,l);this._proportionallyResize()}e(this.handles[i])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!b.resizing){if(this.className)var h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=h&&h[1]?h[1]:"se"}});if(a.autoHide){this._handles.hide();e(this.element).addClass("ui-resizable-autohide").hover(function(){if(!a.disabled){e(this).removeClass("ui-resizable-autohide");b._handles.show()}},function(){if(!a.disabled)if(!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
var b=function(c){e(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=
false;for(var c in this.handles)if(e(this.handles[c])[0]==b.target)a=true;return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),d=this.element;this.resizing=true;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};if(d.is(".ui-draggable")||/absolute/.test(d.css("position")))d.css({position:"absolute",top:c.top,left:c.left});e.browser.opera&&/relative/.test(d.css("position"))&&d.css({position:"relative",top:"auto",left:"auto"});
this._renderProxy();c=m(this.helper.css("left"));var f=m(this.helper.css("top"));if(a.containment){c+=e(a.containment).scrollLeft()||0;f+=e(a.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff=
{width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio=typeof a.aspectRatio=="number"?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",a=="auto"?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return true},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];
if(!d)return false;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return false},
_mouseStop:function(b){this.resizing=false;var a=this.options,c=this;if(this._helper){var d=this._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName);d=f&&e.ui.hasScroll(d[0],"left")?0:c.sizeDiff.height;f=f?0:c.sizeDiff.width;f={width:c.helper.width()-f,height:c.helper.height()-d};d=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null;var g=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;a.animate||this.element.css(e.extend(f,
{top:g,left:d}));c.helper.height(c.size.height);c.helper.width(c.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return false},_updateVirtualBoundaries:function(b){var a=this.options,c,d,f;a={minWidth:k(a.minWidth)?a.minWidth:0,maxWidth:k(a.maxWidth)?a.maxWidth:Infinity,minHeight:k(a.minHeight)?a.minHeight:0,maxHeight:k(a.maxHeight)?a.maxHeight:
Infinity};if(this._aspectRatio||b){b=a.minHeight*this.aspectRatio;d=a.minWidth/this.aspectRatio;c=a.maxHeight*this.aspectRatio;f=a.maxWidth/this.aspectRatio;if(b>a.minWidth)a.minWidth=b;if(d>a.minHeight)a.minHeight=d;if(c<a.maxWidth)a.maxWidth=c;if(f<a.maxHeight)a.maxHeight=f}this._vBoundaries=a},_updateCache:function(b){this.offset=this.helper.offset();if(k(b.left))this.position.left=b.left;if(k(b.top))this.position.top=b.top;if(k(b.height))this.size.height=b.height;if(k(b.width))this.size.width=
b.width},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;if(k(b.height))b.width=b.height*this.aspectRatio;else if(k(b.width))b.height=b.width/this.aspectRatio;if(d=="sw"){b.left=a.left+(c.width-b.width);b.top=null}if(d=="nw"){b.top=a.top+(c.height-b.height);b.left=a.left+(c.width-b.width)}return b},_respectSize:function(b){var a=this._vBoundaries,c=this.axis,d=k(b.width)&&a.maxWidth&&a.maxWidth<b.width,f=k(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=k(b.width)&&a.minWidth&&
a.minWidth>b.width,h=k(b.height)&&a.minHeight&&a.minHeight>b.height;if(g)b.width=a.minWidth;if(h)b.height=a.minHeight;if(d)b.width=a.maxWidth;if(f)b.height=a.maxHeight;var i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,l=/sw|nw|w/.test(c);c=/nw|ne|n/.test(c);if(g&&l)b.left=i-a.minWidth;if(d&&l)b.left=i-a.maxWidth;if(h&&c)b.top=j-a.minHeight;if(f&&c)b.top=j-a.maxHeight;if((a=!b.width&&!b.height)&&!b.left&&b.top)b.top=null;else if(a&&!b.top&&b.left)b.left=
null;return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(g,h){g=parseInt(g,10)||
0;h=parseInt(f[h],10)||0;return g+h})}e.browser.msie&&(e(b).is(":hidden")||e(b).parents(":hidden").length)||c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var a=e.browser.msie&&e.browser.version<7,c=a?1:0;a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+
a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+
c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);
b!="resize"&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,{version:"1.8.16"});e.ui.plugin.add("resizable","alsoResize",{start:function(){var b=e(this).data("resizable").options,a=function(c){e(c).each(function(){var d=e(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),
10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10),position:d.css("position")})})};if(typeof b.alsoResize=="object"&&!b.alsoResize.parentNode)if(b.alsoResize.length){b.alsoResize=b.alsoResize[0];a(b.alsoResize)}else e.each(b.alsoResize,function(c){a(c)});else a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable");b=c.options;var d=c.originalSize,f=c.originalPosition,g={height:c.size.height-d.height||0,width:c.size.width-d.width||0,top:c.position.top-
f.top||0,left:c.position.left-f.left||0},h=function(i,j){e(i).each(function(){var l=e(this),q=e(this).data("resizable-alsoresize"),p={},r=j&&j.length?j:l.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(n,o){if((n=(q[o]||0)+(g[o]||0))&&n>=0)p[o]=n||null});if(e.browser.opera&&/relative/.test(l.css("position"))){c._revertToRelativePosition=true;l.css({position:"absolute",top:"auto",left:"auto"})}l.css(p)})};typeof b.alsoResize=="object"&&!b.alsoResize.nodeType?
e.each(b.alsoResize,function(i,j){h(i,j)}):h(b.alsoResize)},stop:function(){var b=e(this).data("resizable"),a=b.options,c=function(d){e(d).each(function(){var f=e(this);f.css({position:f.data("resizable-alsoresize").position})})};if(b._revertToRelativePosition){b._revertToRelativePosition=false;typeof a.alsoResize=="object"&&!a.alsoResize.nodeType?e.each(a.alsoResize,function(d){c(d)}):c(a.alsoResize)}e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=
e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height;f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g};g=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||null;var h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,
step:function(){var i={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:i.width,height:i.height});a._updateCache(i);a._propagate("resize",b)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c){b.containerElement=
e(a);if(/document/.test(c)||c==document){b.containerOffset={left:0,top:0};b.containerPosition={left:0,top:0};b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{var d=e(a),f=[];e(["Top","Right","Left","Bottom"]).each(function(i,j){f[i]=m(d.css("padding"+j))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};c=b.containerOffset;
var g=b.containerSize.height,h=b.containerSize.width;h=e.ui.hasScroll(a,"left")?a.scrollWidth:h;g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,f=a.position;b=a._aspectRatio||b.shiftKey;var g={top:0,left:0},h=a.containerElement;if(h[0]!=document&&/static/.test(h.css("position")))g=d;if(f.left<(a._helper?d.left:0)){a.size.width+=a._helper?a.position.left-d.left:
a.position.left-g.left;if(b)a.size.height=a.size.width/c.aspectRatio;a.position.left=c.helper?d.left:0}if(f.top<(a._helper?d.top:0)){a.size.height+=a._helper?a.position.top-d.top:a.position.top;if(b)a.size.width=a.size.height*c.aspectRatio;a.position.top=a._helper?d.top:0}a.offset.left=a.parentData.left+a.position.left;a.offset.top=a.parentData.top+a.position.top;c=Math.abs((a._helper?a.offset.left-g.left:a.offset.left-g.left)+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-
d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));if(f&&g)c-=a.parentData.left;if(c+a.size.width>=a.parentData.width){a.size.width=a.parentData.width-c;if(b)a.size.height=a.size.width/a.aspectRatio}if(d+a.size.height>=a.parentData.height){a.size.height=a.parentData.height-d;if(b)a.size.width=a.size.height*a.aspectRatio}},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,
f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width;g=g.outerHeight()-b.sizeDiff.height;b._helper&&!a.animate&&/relative/.test(f.css("position"))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&!a.animate&&/static/.test(f.css("position"))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,
display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof a.ghost=="string"?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=
e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid=typeof a.grid=="number"?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1);a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);if(/^(se|s|e)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a}else if(/^(ne)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}else{if(/^(sw)$/.test(g)){b.size.width=d.width+h;b.size.height=
d.height+a}else{b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}b.position.left=f.left-h}}});var m=function(b){return parseInt(b,10)||0},k=function(b){return!isNaN(parseInt(b,10))}})(jQuery);
;/*
 * jQuery UI Selectable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Selectables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c=this;this.element.addClass("ui-selectable");this.dragged=false;var f;this.refresh=function(){f=e(c.options.filter,c.element[0]);f.each(function(){var d=e(this),b=d.offset();e.data(this,"selectable-item",{element:this,$element:d,left:b.left,top:b.top,right:b.left+d.outerWidth(),bottom:b.top+d.outerHeight(),startselected:false,selected:d.hasClass("ui-selected"),
selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(c){var f=this;this.opos=[c.pageX,
c.pageY];if(!this.options.disabled){var d=this.options;this.selectees=e(d.filter,this.element[0]);this._trigger("start",c);e(d.appendTo).append(this.helper);this.helper.css({left:c.clientX,top:c.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var b=e.data(this,"selectable-item");b.startselected=true;if(!c.metaKey){b.$element.removeClass("ui-selected");b.selected=false;b.$element.addClass("ui-unselecting");b.unselecting=true;f._trigger("unselecting",
c,{unselecting:b.element})}});e(c.target).parents().andSelf().each(function(){var b=e.data(this,"selectable-item");if(b){var g=!c.metaKey||!b.$element.hasClass("ui-selected");b.$element.removeClass(g?"ui-unselecting":"ui-selected").addClass(g?"ui-selecting":"ui-unselecting");b.unselecting=!g;b.selecting=g;(b.selected=g)?f._trigger("selecting",c,{selecting:b.element}):f._trigger("unselecting",c,{unselecting:b.element});return false}})}},_mouseDrag:function(c){var f=this;this.dragged=true;if(!this.options.disabled){var d=
this.options,b=this.opos[0],g=this.opos[1],h=c.pageX,i=c.pageY;if(b>h){var j=h;h=b;b=j}if(g>i){j=i;i=g;g=j}this.helper.css({left:b,top:g,width:h-b,height:i-g});this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!(!a||a.element==f.element[0])){var k=false;if(d.tolerance=="touch")k=!(a.left>h||a.right<b||a.top>i||a.bottom<g);else if(d.tolerance=="fit")k=a.left>b&&a.right<h&&a.top>g&&a.bottom<i;if(k){if(a.selected){a.$element.removeClass("ui-selected");a.selected=false}if(a.unselecting){a.$element.removeClass("ui-unselecting");
a.unselecting=false}if(!a.selecting){a.$element.addClass("ui-selecting");a.selecting=true;f._trigger("selecting",c,{selecting:a.element})}}else{if(a.selecting)if(c.metaKey&&a.startselected){a.$element.removeClass("ui-selecting");a.selecting=false;a.$element.addClass("ui-selected");a.selected=true}else{a.$element.removeClass("ui-selecting");a.selecting=false;if(a.startselected){a.$element.addClass("ui-unselecting");a.unselecting=true}f._trigger("unselecting",c,{unselecting:a.element})}if(a.selected)if(!c.metaKey&&
!a.startselected){a.$element.removeClass("ui-selected");a.selected=false;a.$element.addClass("ui-unselecting");a.unselecting=true;f._trigger("unselecting",c,{unselecting:a.element})}}}});return false}},_mouseStop:function(c){var f=this;this.dragged=false;e(".ui-unselecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;f._trigger("unselected",c,{unselected:d.element})});e(".ui-selecting",this.element[0]).each(function(){var d=
e.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;f._trigger("selected",c,{selected:d.element})});this._trigger("stop",c);this.helper.remove();return false}});e.extend(e.ui.selectable,{version:"1.8.16"})})(jQuery);
;/*
 * jQuery UI Sortable 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,b){if(a===
"disabled"){this.options[a]=b;this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")}else d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var c=null,e=this;d(a.target).parents().each(function(){if(d.data(this,"sortable-item")==e){c=d(this);return false}});if(d.data(a.target,"sortable-item")==e)c=d(a.target);if(!c)return false;if(this.options.handle&&
!b){var f=false;d(this.options.handle,c).find("*").andSelf().each(function(){if(this==a.target)f=true});if(!f)return false}this.currentItem=c;this._removeCurrentsFromItems();return true},_mouseStart:function(a,b,c){b=this.options;var e=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,
left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();if(b.cursor){if(d("body").css("cursor"))this._storedCursor=d("body").css("cursor");d("body").css("cursor",b.cursor)}if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!=
document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("activate",a,e._uiHash(this));if(d.ui.ddmanager)d.ui.ddmanager.current=this;d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var b=this.options,c=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(a.pageY-this.overflowOffset.top<
b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(a.pageX-this.overflowOffset.left<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(a.pageY-d(document).scrollTop()<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed);if(a.pageX-d(document).scrollLeft()<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)}c!==false&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,
a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--){c=this.items[b];var e=c.item[0],f=this._intersectsWithPointer(c);if(f)if(e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],
e):true)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this;b=c.placeholder.offset();
c.reverting=true;d(this.helper).animate({left:b.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return false}},cancel:function(){var a=this;if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",null,a._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,a._uiHash(this));this.containers[b].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();d.extend(this,{helper:null,
dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};d(b).each(function(){var e=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(e)c.push((a.key||e[1]+"[]")+"="+(a.key&&a.expression?e[1]:e[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},
toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,k=i+a.height,j=this.offset.click.top,l=this.offset.click.left;j=e+j>i&&e+j<k&&b+l>g&&b+l<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||
this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:g<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();
var c=this._getDragHorizontalDirection();if(!b)return false;return this.floating?c&&c=="right"||a=="down"?2:1:a&&(a=="down"?2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&a||e=="left"&&!a:c&&(c=="down"&&b||c=="up"&&!b)},
_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();
if(e&&a)for(a=e.length-1;a>=0;a--)for(var f=d(e[a]),g=f.length-1;g>=0;g--){var h=d.data(f[g],"sortable");if(h&&h!=this&&!h.options.disabled)c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(a=c.length-1;a>=0;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),
this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=d(e[f]),h=g.length-1;h>=0;h--){var i=d.data(g[h],"sortable");if(i&&i!=this&&!i.options.disabled){c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]);this.containers.push(i)}}for(f=c.length-1;f>=0;f--){a=c[f][1];e=c[f][0];h=0;for(g=e.length;h<g;h++){i=d(e[h]);i.data("sortable-item",a);b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&
this.helper)this.offset.parent=this._getParentOffset();for(var b=this.items.length-1;b>=0;b--){var c=this.items[b];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;if(!a){c.width=e.outerWidth();c.height=e.outerHeight()}e=e.offset();c.left=e.left;c.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=
this.containers.length-1;b>=0;b--){e=this.containers[b].element.offset();this.containers[b].containerCache.left=e.left;this.containers[b].containerCache.top=e.top;this.containers[b].containerCache.width=this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var f=
d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)f.style.visibility="hidden";return f},update:function(f,g){if(!(e&&!c.forcePlaceholderSize)){g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||
0,10))}}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=null,c=null,e=this.containers.length-1;e>=0;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!(b&&d.ui.contains(this.containers[e].element[0],b.element[0]))){b=this.containers[e];c=e}}else if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",
a,this._uiHash(this));this.containers[e].containerCache.over=0}if(b)if(this.containers.length===1){this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}else if(this.currentContainer!=this.containers[c]){b=1E4;e=null;for(var f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[c].floating?"left":"top"];if(Math.abs(h-
f)<b){b=Math.abs(h-f);e=this.items[g]}}if(e||this.options.dropOnEmpty){this.currentContainer=this.containers[c];e?this._rearrange(a,e,null,true):this._rearrange(a,null,this.containers[c].element,true);this._trigger("change",a,this._uiHash());this.containers[c]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}}},_createHelper:function(a){var b=
this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):b.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||d(b.appendTo!="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==
""||b.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||b.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=
this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a=
{top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?
document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=d(a.containment)[0];a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),
10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){if(!b)b=
this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&
this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
var f=a.pageX,g=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-
this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f}}return{top:g-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],
this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,b){this.reverting=false;var c=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]=
"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(f){this._trigger("receive",f,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b)c.push(function(f){this._trigger("update",f,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){b||c.push(function(f){this._trigger("remove",
f,this._uiHash())});for(e=this.containers.length-1;e>=0;e--)if(d.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!b){c.push(function(f){return function(g){f._trigger("receive",g,this._uiHash(this))}}.call(this,this.containers[e]));c.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.containers[e]))}}for(e=this.containers.length-1;e>=0;e--){b||c.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,
this.containers[e]));if(this.containers[e].containerCache.over){c.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[e]));this.containers[e].containerCache.over=0}}this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",
a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return false}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});d.extend(d.ui.sortable,{version:"1.8.16"})})(jQuery);
;/*
 * jQuery UI Accordion 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Accordion
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(c){c.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var a=this,b=a.options;a.running=0;a.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");
a.headers=a.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){b.disabled||c(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){b.disabled||c(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){b.disabled||c(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){b.disabled||c(this).removeClass("ui-state-focus")});a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(b.navigation){var d=a.element.find("a").filter(b.navigationFilter).eq(0);if(d.length){var h=d.closest(".ui-accordion-header");a.active=h.length?h:d.closest(".ui-accordion-content").prev()}}a.active=a._findActive(a.active||b.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");a.active.next().addClass("ui-accordion-content-active");a._createIcons();a.resize();a.element.attr("role","tablist");a.headers.attr("role","tab").bind("keydown.accordion",
function(f){return a._keydown(f)}).next().attr("role","tabpanel");a.headers.not(a.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();a.active.length?a.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0);c.browser.safari||a.headers.find("a").attr("tabIndex",-1);b.event&&a.headers.bind(b.event.split(" ").join(".accordion ")+".accordion",function(f){a._clickHandler.call(a,f,this);f.preventDefault()})},_createIcons:function(){var a=
this.options;if(a.icons){c("<span></span>").addClass("ui-icon "+a.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var a=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(a.autoHeight||a.fillHeight)b.css("height","");return c.Widget.prototype.destroy.call(this)},_setOption:function(a,b){c.Widget.prototype._setOption.apply(this,arguments);a=="active"&&this.activate(b);if(a=="icons"){this._destroyIcons();
b&&this._createIcons()}if(a=="disabled")this.headers.add(this.headers.next())[b?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(a){if(!(this.options.disabled||a.altKey||a.ctrlKey)){var b=c.ui.keyCode,d=this.headers.length,h=this.headers.index(a.target),f=false;switch(a.keyCode){case b.RIGHT:case b.DOWN:f=this.headers[(h+1)%d];break;case b.LEFT:case b.UP:f=this.headers[(h-1+d)%d];break;case b.SPACE:case b.ENTER:this._clickHandler({target:a.target},a.target);
a.preventDefault()}if(f){c(a.target).attr("tabIndex",-1);c(f).attr("tabIndex",0);f.focus();return false}return true}},resize:function(){var a=this.options,b;if(a.fillSpace){if(c.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height();c.browser.msie&&this.element.parent().css("overflow",d);this.headers.each(function(){b-=c(this).outerHeight(true)});this.headers.next().each(function(){c(this).height(Math.max(0,b-c(this).innerHeight()+
c(this).height()))}).css("overflow","auto")}else if(a.autoHeight){b=0;this.headers.next().each(function(){b=Math.max(b,c(this).height("").height())}).height(b)}return this},activate:function(a){this.options.active=a;a=this._findActive(a)[0];this._clickHandler({target:a},a);return this},_findActive:function(a){return a?typeof a==="number"?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):a===false?c([]):this.headers.filter(":eq(0)")},_clickHandler:function(a,b){var d=this.options;
if(!d.disabled)if(a.target){a=c(a.currentTarget||b);b=a[0]===this.active[0];d.active=d.collapsible&&b?false:this.headers.index(a);if(!(this.running||!d.collapsible&&b)){var h=this.active;j=a.next();g=this.active.next();e={options:d,newHeader:b&&d.collapsible?c([]):a,oldHeader:this.active,newContent:b&&d.collapsible?c([]):j,oldContent:g};var f=this.headers.index(this.active[0])>this.headers.index(a[0]);this.active=b?c([]):a;this._toggle(j,g,e,b,f);h.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);
if(!b){a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected);a.next().addClass("ui-accordion-content-active")}}}else if(d.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass("ui-accordion-content-active");var g=this.active.next(),
e={options:d,newHeader:c([]),oldHeader:d.active,newContent:c([]),oldContent:g},j=this.active=c([]);this._toggle(j,g,e)}},_toggle:function(a,b,d,h,f){var g=this,e=g.options;g.toShow=a;g.toHide=b;g.data=d;var j=function(){if(g)return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data);g.running=b.size()===0?a.size():b.size();if(e.animated){d={};d=e.collapsible&&h?{toShow:c([]),toHide:b,complete:j,down:f,autoHeight:e.autoHeight||e.fillSpace}:{toShow:a,toHide:b,complete:j,down:f,autoHeight:e.autoHeight||
e.fillSpace};if(!e.proxied)e.proxied=e.animated;if(!e.proxiedDuration)e.proxiedDuration=e.duration;e.animated=c.isFunction(e.proxied)?e.proxied(d):e.proxied;e.duration=c.isFunction(e.proxiedDuration)?e.proxiedDuration(d):e.proxiedDuration;h=c.ui.accordion.animations;var i=e.duration,k=e.animated;if(k&&!h[k]&&!c.easing[k])k="slide";h[k]||(h[k]=function(l){this.slide(l,{easing:k,duration:i||700})});h[k](d)}else{if(e.collapsible&&h)a.toggle();else{b.hide();a.show()}j(true)}b.prev().attr({"aria-expanded":"false",
"aria-selected":"false",tabIndex:-1}).blur();a.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(!this.running){this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length)this.toHide.parent()[0].className=this.toHide.parent()[0].className;this._trigger("change",null,this.data)}}});c.extend(c.ui.accordion,{version:"1.8.16",
animations:{slide:function(a,b){a=c.extend({easing:"swing",duration:300},a,b);if(a.toHide.size())if(a.toShow.size()){var d=a.toShow.css("overflow"),h=0,f={},g={},e;b=a.toShow;e=b[0].style.width;b.width(parseInt(b.parent().width(),10)-parseInt(b.css("paddingLeft"),10)-parseInt(b.css("paddingRight"),10)-(parseInt(b.css("borderLeftWidth"),10)||0)-(parseInt(b.css("borderRightWidth"),10)||0));c.each(["height","paddingTop","paddingBottom"],function(j,i){g[i]="hide";j=(""+c.css(a.toShow[0],i)).match(/^([\d+-.]+)(.*)$/);
f[i]={value:j[1],unit:j[2]||"px"}});a.toShow.css({height:0,overflow:"hidden"}).show();a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(g,{step:function(j,i){if(i.prop=="height")h=i.end-i.start===0?0:(i.now-i.start)/(i.end-i.start);a.toShow[0].style[i.prop]=h*f[i.prop].value+f[i.prop].unit},duration:a.duration,easing:a.easing,complete:function(){a.autoHeight||a.toShow.css("height","");a.toShow.css({width:e,overflow:d});a.complete()}})}else a.toHide.animate({height:"hide",
paddingTop:"hide",paddingBottom:"hide"},a);else a.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},a)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1E3:200})}}})})(jQuery);
;/*
 * jQuery UI Autocomplete 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
(function(d){var e=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!(a.options.disabled||a.element.propAttr("readOnly"))){g=
false;var f=d.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:a._move("previousPage",c);break;case f.PAGE_DOWN:a._move("nextPage",c);break;case f.UP:a._move("previous",c);c.preventDefault();break;case f.DOWN:a._move("next",c);c.preventDefault();break;case f.ENTER:case f.NUMPAD_ENTER:if(a.menu.active){g=true;c.preventDefault()}case f.TAB:if(!a.menu.active)return;a.menu.select(c);break;case f.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){if(a.term!=
a.element.val()){a.selectedItem=null;a.search(null,c)}},a.options.delay);break}}}).bind("keypress.autocomplete",function(c){if(g){g=false;c.preventDefault()}}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a.element.val()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};
this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",b)[0]).mousedown(function(c){var f=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(h){h.target!==a.element[0]&&h.target!==f&&!d.ui.contains(f,h.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(c,f){f=f.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:f})&&/^key/.test(c.originalEvent.type)&&
a.element.val(f.value)},selected:function(c,f){var h=f.item.data("item.autocomplete"),i=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=i;setTimeout(function(){a.previous=i;a.selectedItem=h},1)}false!==a._trigger("select",c,{item:h})&&a.element.val(h.value);a.term=a.element.val();a.close(c);a.selectedItem=h},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
d.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&
b&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,b,g;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(c,f){f(d.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(c,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:g,data:c,dataType:"json",autocompleteRequest:++e,success:function(h){this.autocompleteRequest===e&&f(h)},error:function(){this.autocompleteRequest===e&&f([])}})}}else this.source=
this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(!this.options.disabled&&a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else this.close();
this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||
b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,b){var g=this;
d.each(b,function(c,f){g._renderItem(a,f)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate()}else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&")},filter:function(a,b){var g=new RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(c){return g.test(c.label||c.value||c)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){if(d(a.target).closest(".ui-menu-item a").length){a.preventDefault();e.select(a)}});this.refresh()},refresh:function(){var e=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(a){e.activate(a,d(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(e,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,g=this.element.scrollTop(),c=this.element.height();if(b<0)this.element.scrollTop(g+b);else b>=c&&this.element.scrollTop(g+b-c+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:a})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
this._trigger("blur");this.active=null}},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,a,b){if(this.active){e=this.active[e+"All"](".ui-menu-item").eq(0);e.length?this.activate(b,e):this.activate(b,this.element.children(a))}else this.activate(b,
this.element.children(a))},nextPage:function(e){if(this.hasScroll())if(!this.active||this.last())this.activate(e,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return c<10&&c>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(e,g)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||
this.last()?":first":":last"))},previousPage:function(e){if(this.hasScroll())if(!this.active||this.first())this.activate(e,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=d(this).offset().top-a+b-d(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(e,result)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[d.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})})(jQuery);
;/*
 * jQuery UI Button 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Button
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(b){var h,i,j,g,l=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},k=function(a){var c=a.name,e=a.form,f=b([]);if(c)f=e?b(e).find("[name='"+c+"']"):b("[name='"+c+"']",a.ownerDocument).filter(function(){return!this.form});return f};b.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l);if(typeof this.options.disabled!==
"boolean")this.options.disabled=this.element.propAttr("disabled");this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,e=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(!e?" ui-state-active":"");if(c.label===null)c.label=this.buttonElement.html();if(this.element.is(":disabled"))c.disabled=true;this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!c.disabled){b(this).addClass("ui-state-hover");
this===h&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||b(this).removeClass(f)}).bind("click.button",function(d){if(c.disabled){d.preventDefault();d.stopImmediatePropagation()}});this.element.bind("focus.button",function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){a.buttonElement.removeClass("ui-state-focus")});if(e){this.element.bind("change.button",function(){g||a.refresh()});this.buttonElement.bind("mousedown.button",function(d){if(!c.disabled){g=
false;i=d.pageX;j=d.pageY}}).bind("mouseup.button",function(d){if(!c.disabled)if(i!==d.pageX||j!==d.pageY)g=true})}if(this.type==="checkbox")this.buttonElement.bind("click.button",function(){if(c.disabled||g)return false;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(c.disabled||g)return false;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");
var d=a.element[0];k(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")});else{this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;b(this).addClass("ui-state-active");h=this;b(document).one("mouseup",function(){h=null})}).bind("mouseup.button",function(){if(c.disabled)return false;b(this).removeClass("ui-state-active")}).bind("keydown.button",function(d){if(c.disabled)return false;if(d.keyCode==b.ui.keyCode.SPACE||
d.keyCode==b.ui.keyCode.ENTER)b(this).addClass("ui-state-active")}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(d){d.keyCode===b.ui.keyCode.SPACE&&b(this).click()})}this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type===
"radio"){var a=this.element.parents().filter(":last"),c="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(c);if(!this.buttonElement.length){a=a.length?a.siblings():this.element.siblings();this.buttonElement=a.filter(c);if(!this.buttonElement.length)this.buttonElement=a.find(c)}this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=this.element},
widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title");
b.Widget.prototype.destroy.call(this)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments);if(a==="disabled")c?this.element.propAttr("disabled",true):this.element.propAttr("disabled",false);else this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);if(this.type==="radio")k(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")});else if(this.type==="checkbox")this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=b("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),e=this.options.icons,f=e.primary&&e.secondary,d=[];if(e.primary||e.secondary){if(this.options.text)d.push("ui-button-text-icon"+(f?"s":e.primary?"-primary":"-secondary"));e.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+e.primary+"'></span>");e.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+e.secondary+"'></span>");if(!this.options.text){d.push(f?"ui-button-icons-only":
"ui-button-icon-only");this.hasTitle||a.attr("title",c)}}else d.push("ui-button-text-only");a.addClass(d.join(" "))}}});b.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,c){a==="disabled"&&this.buttons.button("option",a,c);b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a=this.element.css("direction")===
"ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(a?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
b.Widget.prototype.destroy.call(this)}})})(jQuery);
;/*
 * jQuery UI Dialog 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function(c,l){var m={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},n={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},o=c.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};c.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,
position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;b<0&&c(this).css("top",a.top-b)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=b.title||"&#160;",e=c.ui.dialog.getTitleId(a.element),g=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){if(b.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===c.ui.keyCode.ESCAPE){a.close(i);i.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(i){a.moveToTop(false,i)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),
h=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(i){a.close(i);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(h);c("<span></span>").addClass("ui-dialog-title").attr("id",
e).html(d).prependTo(f);if(c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose))b.beforeClose=b.beforeclose;f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=false;c.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy();a.uiDialog.hide();a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
a.uiDialog.remove();a.originalTitle&&a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(false!==b._trigger("beforeClose",a)){b.overlay&&b.overlay.destroy();b.uiDialog.unbind("keypress.ui-dialog");b._isOpen=false;if(b.options.hide)b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)});else{b.uiDialog.hide();b._trigger("close",a)}c.ui.dialog.overlay.resize();if(b.options.modal){d=0;c(".ui-dialog").each(function(){if(this!==
b.uiDialog[0]){e=c(this).css("z-index");isNaN(e)||(d=Math.max(d,e))}});c.ui.dialog.maxZ=d}return b}},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this,e=d.options;if(e.modal&&!a||!e.stack&&!e.modal)return d._trigger("focus",b);if(e.zIndex>c.ui.dialog.maxZ)c.ui.dialog.maxZ=e.zIndex;if(d.overlay){c.ui.dialog.maxZ+=1;d.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ)}a={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()};c.ui.dialog.maxZ+=1;
d.uiDialog.css("z-index",c.ui.dialog.maxZ);d.element.attr(a);d._trigger("focus",b);return d},open:function(){if(!this._isOpen){var a=this,b=a.options,d=a.uiDialog;a.overlay=b.modal?new c.ui.dialog.overlay(a):null;a._size();a._position(b.position);d.show(b.show);a.moveToTop(true);b.modal&&d.bind("keypress.ui-dialog",function(e){if(e.keyCode===c.ui.keyCode.TAB){var g=c(":tabbable",this),f=g.filter(":first");g=g.filter(":last");if(e.target===g[0]&&!e.shiftKey){f.focus(1);return false}else if(e.target===
f[0]&&e.shiftKey){g.focus(1);return false}}});c(a.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus();a._isOpen=true;a._trigger("open");return a}},_createButtons:function(a){var b=this,d=false,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();typeof a==="object"&&a!==null&&c.each(a,
function(){return!(d=true)});if(d){c.each(a,function(f,h){h=c.isFunction(h)?{click:h,text:f}:h;var i=c('<button type="button"></button>').click(function(){h.click.apply(b.element[0],arguments)}).appendTo(g);c.each(h,function(j,k){if(j!=="click")j in o?i[j](k):i.attr(j,k)});c.fn.button&&i.button()});e.appendTo(b.uiDialog)}},_makeDraggable:function(){function a(f){return{position:f.position,offset:f.offset}}var b=this,d=b.options,e=c(document),g;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(f,h){g=d.height==="auto"?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",f,a(h))},drag:function(f,h){b._trigger("drag",f,a(h))},stop:function(f,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(g);b._trigger("dragStop",f,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(f){return{originalPosition:f.originalPosition,
originalSize:f.originalSize,position:f.position,size:f.size}}a=a===l?this.options.resizable:a;var d=this,e=d.options,g=d.uiDialog.css("position");a=typeof a==="string"?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(f,h){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",f,b(h))},resize:function(f,h){d._trigger("resize",
f,b(h))},stop:function(f,h){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",f,b(h));c.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if(typeof a==="string"||typeof a==="object"&&"0"in a){b=a.split?a.split(" "):
[a[0],a[1]];if(b.length===1)b[1]=b[0];c.each(["left","top"],function(g,f){if(+b[g]===b[g]){d[g]=b[g];b[g]=f}});a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")}}a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=false;c.each(a,function(g,f){b._setOption(g,f);
if(g in m)e=true;if(g in n)d[g]=f});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this,e=d.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":d._createButtons(b);break;case "closeText":d.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":e.removeClass(d.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?e.addClass("ui-dialog-disabled"):
e.removeClass("ui-dialog-disabled");break;case "draggable":var g=e.is(":data(draggable)");g&&!b&&e.draggable("destroy");!g&&b&&d._makeDraggable();break;case "position":d._position(b);break;case "resizable":(g=e.is(":data(resizable)"))&&!b&&e.resizable("destroy");g&&typeof b==="string"&&e.resizable("option","handles",b);!g&&b!==false&&d._makeResizable(b);break;case "title":c(".ui-dialog-title",d.uiDialogTitlebar).html(""+(b||"&#160;"));break}c.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var a=
this.options,b,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(a.minWidth>a.width)a.width=a.minWidth;b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);if(a.height==="auto")if(c.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();a=this.element.css("height","auto").height();e||this.uiDialog.hide();this.element.height(Math.max(a,d))}else this.element.height(Math.max(a.height-
b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.16",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");if(!a){this.uuid+=1;a=this.uuid}return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),
create:function(a){if(this.instances.length===0){setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(d){if(c(d.target).zIndex()<c.ui.dialog.overlay.maxZ)return false})},1);c(document).bind("keydown.dialog-overlay",function(d){if(a.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}});c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize)}var b=(this.oldInstances.pop()||
c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);b!=-1&&this.oldInstances.push(this.instances.splice(b,1)[0]);this.instances.length===0&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;if(c.browser.msie&&
c.browser.version<7){a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return a<b?c(window).height()+"px":a+"px"}else return c(document).height()+"px"},width:function(){var a,b;if(c.browser.msie){a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return a<b?c(window).width()+"px":a+"px"}else return c(document).width()+
"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
;/*
 * jQuery UI Slider 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=b.values&&b.values.length||1,e=[];this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(b.range){if(b.range===true){if(!b.values)b.values=[this._valueMin(),this._valueMin()];if(b.values.length&&b.values.length!==2)b.values=[b.values[0],b.values[0]]}this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(b.range==="min"||b.range==="max"?" ui-slider-range-"+b.range:""))}for(var j=c.length;j<f;j+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=c.add(d(e.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(g){g.preventDefault()}).hover(function(){b.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){if(b.disabled)d(this).blur();else{d(".ui-slider .ui-state-focus").removeClass("ui-state-focus");d(this).addClass("ui-state-focus")}}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(g){d(this).data("index.ui-slider-handle",
g)});this.handles.keydown(function(g){var k=true,l=d(this).data("index.ui-slider-handle"),i,h,m;if(!a.options.disabled){switch(g.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:k=false;if(!a._keySliding){a._keySliding=true;d(this).addClass("ui-state-active");i=a._start(g,l);if(i===false)return}break}m=a.options.step;i=a.options.values&&a.options.values.length?
(h=a.values(l)):(h=a.value());switch(g.keyCode){case d.ui.keyCode.HOME:h=a._valueMin();break;case d.ui.keyCode.END:h=a._valueMax();break;case d.ui.keyCode.PAGE_UP:h=a._trimAlignValue(i+(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:h=a._trimAlignValue(i-(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(i===a._valueMax())return;h=a._trimAlignValue(i+m);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(i===a._valueMin())return;h=a._trimAlignValue(i-
m);break}a._slide(g,l,h);return k}}).keyup(function(g){var k=d(this).data("index.ui-slider-handle");if(a._keySliding){a._keySliding=false;a._stop(g,k);a._change(g,k);d(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();
return this},_mouseCapture:function(a){var b=this.options,c,f,e,j,g;if(b.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:a.pageX,y:a.pageY});f=this._valueMax()-this._valueMin()+1;j=this;this.handles.each(function(k){var l=Math.abs(c-j.values(k));if(f>l){f=l;e=d(this);g=k}});if(b.range===true&&this.values(1)===b.min){g+=1;e=d(this.handles[g])}if(this._start(a,g)===false)return false;
this._mouseSliding=true;j._handleIndex=g;e.addClass("ui-state-active").focus();b=e.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-b.left-e.width()/2,top:a.pageY-b.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,g,c);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(a){var b=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return false},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;if(this.orientation==="horizontal"){b=
this.elementSize.width;a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{b=this.elementSize.height;a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}b=a/b;if(b>1)b=1;if(b<0)b=0;if(this.orientation==="vertical")b=1-b;a=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+b*a)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);
c.values=this.values()}return this._trigger("start",a,c)},_slide:function(a,b,c){var f;if(this.options.values&&this.options.values.length){f=this.values(b?0:1);if(this.options.values.length===2&&this.options.range===true&&(b===0&&c>f||b===1&&c<f))c=f;if(c!==this.values(b)){f=this.values();f[b]=c;a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:f});this.values(b?0:1);a!==false&&this.values(b,c,true)}}else if(c!==this.value()){a=this._trigger("slide",a,{handle:this.handles[b],value:c});
a!==false&&this.value(c)}},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=
this._trimAlignValue(a);this._refreshValue();this._change(null,0)}else return this._value()},values:function(a,b){var c,f,e;if(arguments.length>1){this.options.values[a]=this._trimAlignValue(b);this._refreshValue();this._change(null,a)}else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(e=0;e<c.length;e+=1){c[e]=this._trimAlignValue(f[e]);this._change(null,e)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):
this.value();else return this._values()},_setOption:function(a,b){var c,f=0;if(d.isArray(this.options.values))f=this.options.values.length;d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":if(b){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=false;break}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length){b=this.options.values[a];
return b=this._trimAlignValue(b)}else{b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=this._trimAlignValue(b[c]);return b}},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b;a=a-c;if(Math.abs(c)*2>=b)a+=c>0?b:-b;return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=
this.options.range,b=this.options,c=this,f=!this._animateOff?b.animate:false,e,j={},g,k,l,i;if(this.options.values&&this.options.values.length)this.handles.each(function(h){e=(c.values(h)-c._valueMin())/(c._valueMax()-c._valueMin())*100;j[c.orientation==="horizontal"?"left":"bottom"]=e+"%";d(this).stop(1,1)[f?"animate":"css"](j,b.animate);if(c.options.range===true)if(c.orientation==="horizontal"){if(h===0)c.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},b.animate);if(h===1)c.range[f?"animate":"css"]({width:e-
g+"%"},{queue:false,duration:b.animate})}else{if(h===0)c.range.stop(1,1)[f?"animate":"css"]({bottom:e+"%"},b.animate);if(h===1)c.range[f?"animate":"css"]({height:e-g+"%"},{queue:false,duration:b.animate})}g=e});else{k=this.value();l=this._valueMin();i=this._valueMax();e=i!==l?(k-l)/(i-l)*100:0;j[c.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](j,b.animate);if(a==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},
b.animate);if(a==="max"&&this.orientation==="horizontal")this.range[f?"animate":"css"]({width:100-e+"%"},{queue:false,duration:b.animate});if(a==="min"&&this.orientation==="vertical")this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},b.animate);if(a==="max"&&this.orientation==="vertical")this.range[f?"animate":"css"]({height:100-e+"%"},{queue:false,duration:b.animate})}}});d.extend(d.ui.slider,{version:"1.8.16"})})(jQuery);
;/*
 * jQuery UI Tabs 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Tabs
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(d,p){function u(){return++v}function w(){return++x}var v=0,x=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(b,e){if(b=="selected")this.options.collapsible&&
e==this.options.selected||this.select(e);else{this.options[b]=e;this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+u()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+w());return d.cookie.apply(null,[b].concat(d.makeArray(arguments)))},_ui:function(b,e){return{tab:b,panel:e,index:this.anchors.index(b)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=
d(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(b){function e(g,f){g.css("display","");!d.support.opacity&&f.opacity&&g[0].style.removeAttribute("filter")}var a=this,c=this.options,h=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(g,f){var i=d(f).attr("href"),l=i.split("#")[0],q;if(l&&(l===location.toString().split("#")[0]||
(q=d("base")[0])&&l===q.href)){i=f.hash;f.href=i}if(h.test(i))a.panels=a.panels.add(a.element.find(a._sanitizeSelector(i)));else if(i&&i!=="#"){d.data(f,"href.tabs",i);d.data(f,"load.tabs",i.replace(/#.*$/,""));i=a._tabId(f);f.href="#"+i;f=a.element.find("#"+i);if(!f.length){f=d(c.panelTemplate).attr("id",i).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[g-1]||a.list);f.data("destroy.tabs",true)}a.panels=a.panels.add(f)}else c.disabled.push(g)});if(b){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(c.selected===p){location.hash&&this.anchors.each(function(g,f){if(f.hash==location.hash){c.selected=g;return false}});if(typeof c.selected!=="number"&&c.cookie)c.selected=parseInt(a._cookie(),10);if(typeof c.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)c.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"));c.selected=c.selected||(this.lis.length?0:-1)}else if(c.selected===null)c.selected=-1;c.selected=c.selected>=0&&this.anchors[c.selected]||c.selected<0?c.selected:0;c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(g){return a.lis.index(g)}))).sort();d.inArray(c.selected,c.disabled)!=-1&&c.disabled.splice(d.inArray(c.selected,c.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
if(c.selected>=0&&this.anchors.length){a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active");a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[c.selected],a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash))[0]))});this.load(c.selected)}d(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs");a.lis=a.anchors=a.panels=null})}else c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);b=0;for(var j;j=this.lis[b];b++)d(j)[d.inArray(b,c.disabled)!=-1&&!d(j).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");c.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(c.event!=="mouseover"){var k=function(g,f){f.is(":not(.ui-state-disabled)")&&f.addClass("ui-state-"+g)},n=function(g,f){f.removeClass("ui-state-"+
g)};this.lis.bind("mouseover.tabs",function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){n("hover",d(this))});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){n("focus",d(this).closest("li"))})}var m,o;if(c.fx)if(d.isArray(c.fx)){m=c.fx[0];o=c.fx[1]}else m=o=c.fx;var r=o?function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.hide().removeClass("ui-tabs-hide").animate(o,o.duration||"normal",
function(){e(f,o);a._trigger("show",null,a._ui(g,f[0]))})}:function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.removeClass("ui-tabs-hide");a._trigger("show",null,a._ui(g,f[0]))},s=m?function(g,f){f.animate(m,m.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");e(f,m);a.element.dequeue("tabs")})}:function(g,f){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");a.element.dequeue("tabs")};
this.anchors.bind(c.event+".tabs",function(){var g=this,f=d(g).closest("li"),i=a.panels.filter(":not(.ui-tabs-hide)"),l=a.element.find(a._sanitizeSelector(g.hash));if(f.hasClass("ui-tabs-selected")&&!c.collapsible||f.hasClass("ui-state-disabled")||f.hasClass("ui-state-processing")||a.panels.filter(":animated").length||a._trigger("select",null,a._ui(this,l[0]))===false){this.blur();return false}c.selected=a.anchors.index(this);a.abort();if(c.collapsible)if(f.hasClass("ui-tabs-selected")){c.selected=
-1;c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){s(g,i)}).dequeue("tabs");this.blur();return false}else if(!i.length){c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this));this.blur();return false}c.cookie&&a._cookie(c.selected,c.cookie);if(l.length){i.length&&a.element.queue("tabs",function(){s(g,i)});a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(b){if(typeof b=="string")b=this.anchors.index(this.anchors.filter("[href$="+b+"]"));return b},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var e=
d.data(this,"href.tabs");if(e)this.href=e;var a=d(this).unbind(".tabs");d.each(["href","load","cache"],function(c,h){a.removeData(h+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});b.cookie&&this._cookie(null,b.cookie);return this},add:function(b,
e,a){if(a===p)a=this.anchors.length;var c=this,h=this.options;e=d(h.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,e));b=!b.indexOf("#")?b.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=c.element.find("#"+b);j.length||(j=d(h.panelTemplate).attr("id",b).data("destroy.tabs",true));j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(a>=this.lis.length){e.appendTo(this.list);j.appendTo(this.list[0].parentNode)}else{e.insertBefore(this.lis[a]);
j.insertBefore(this.panels[a])}h.disabled=d.map(h.disabled,function(k){return k>=a?++k:k});this._tabify();if(this.anchors.length==1){h.selected=0;e.addClass("ui-tabs-selected ui-state-active");j.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[a],this.panels[a]));return this},remove:function(b){b=this._getIndex(b);var e=this.options,a=this.lis.eq(b).remove(),c=this.panels.eq(b).remove();
if(a.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(b+(b+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(h){return h!=b}),function(h){return h>=b?--h:h});this._tabify();this._trigger("remove",null,this._ui(a.find("a")[0],c[0]));return this},enable:function(b){b=this._getIndex(b);var e=this.options;if(d.inArray(b,e.disabled)!=-1){this.lis.eq(b).removeClass("ui-state-disabled");e.disabled=d.grep(e.disabled,function(a){return a!=b});this._trigger("enable",null,
this._ui(this.anchors[b],this.panels[b]));return this}},disable:function(b){b=this._getIndex(b);var e=this.options;if(b!=e.selected){this.lis.eq(b).addClass("ui-state-disabled");e.disabled.push(b);e.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}return this},select:function(b){b=this._getIndex(b);if(b==-1)if(this.options.collapsible&&this.options.selected!=-1)b=this.options.selected;else return this;this.anchors.eq(b).trigger(this.options.event+".tabs");return this},
load:function(b){b=this._getIndex(b);var e=this,a=this.options,c=this.anchors.eq(b)[0],h=d.data(c,"load.tabs");this.abort();if(!h||this.element.queue("tabs").length!==0&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(b).addClass("ui-state-processing");if(a.spinner){var j=d("span",c);j.data("label.tabs",j.html()).html(a.spinner)}this.xhr=d.ajax(d.extend({},a.ajaxOptions,{url:h,success:function(k,n){e.element.find(e._sanitizeSelector(c.hash)).html(k);e._cleanup();a.cache&&d.data(c,
"cache.tabs",true);e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.success(k,n)}catch(m){}},error:function(k,n){e._cleanup();e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.error(k,n,b,c)}catch(m){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},
url:function(b,e){this.anchors.eq(b).removeData("cache.tabs").data("load.tabs",e);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.16"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(b,e){var a=this,c=this.options,h=a._rotate||(a._rotate=function(j){clearTimeout(a.rotation);a.rotation=setTimeout(function(){var k=c.selected;a.select(++k<a.anchors.length?k:0)},b);j&&j.stopPropagation()});e=a._unrotate||(a._unrotate=!e?function(j){j.clientX&&
a.rotate(null)}:function(){t=c.selected;h()});if(b){this.element.bind("tabsshow",h);this.anchors.bind(c.event+".tabs",e);h()}else{clearTimeout(a.rotation);this.element.unbind("tabsshow",h);this.anchors.unbind(c.event+".tabs",e);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
;/*
 * jQuery UI Datepicker 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function(d,C){function M(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["S",
"M","T","W","T","F","S"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=N(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function N(a){return a.bind("mouseout",
function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");b.length&&b.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!(d.datepicker._isDisabledDatepicker(J.inline?a.parent()[0]:J.input[0])||!b.length)){b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
b.addClass("ui-state-hover");b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover");b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")}})}function H(a,b){d.extend(a,b);for(var c in b)if(b[c]==null||b[c]==C)a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.16"}});var B=(new Date).getTime(),J;d.extend(M.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){H(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input")this._connectDatepicker(a,i);else f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:N(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b);b.settings.disabled&&this._disableDatepicker(a)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c==
"focus"||c=="both")a.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():
d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++)if(f[g].length>h){h=f[g].length;i=g}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,
b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b);b.settings.disabled&&this._disableDatepicker(a);b.dpDiv.css("display","block")}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=
1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}H(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/
2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=
d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(e=="div"||e=="span")b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=
a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(e=="div"||e=="span"){b=b.children("."+this._inlineClass);b.children().removeClass("ui-state-disabled");b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,
"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(e=="div"||e=="span"){b=b.children("."+this._inlineClass);b.children().addClass("ui-state-disabled");b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==
a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return false;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return true;return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?
d.extend({},e.settings):this._get(e,b):null;var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true),i=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");H(e.settings,f);if(i!==null&&f.dateFormat!==C&&f.minDate===C)e.settings.minDate=this._formatDate(e,i);if(g!==null&&f.dateFormat!==C&&f.maxDate===C)e.settings.maxDate=this._formatDate(e,g);this._attachments(d(a),e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);
this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");
b._keyEvent=true;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv);c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]);if(a=d.datepicker._get(b,"onSelect")){c=d.datepicker._formatDate(b);a.apply(b.input?b.input[0]:null,[c,b])}else d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,
a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey)d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey)d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?+1:-1,"D");c=
a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:+1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,
"stepMonths"),"M");break;case 40:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,+7,"D");c=a.ctrlKey||a.metaKey;break;default:c=false}else if(a.keyCode==36&&a.ctrlKey)d.datepicker._showDatepicker(this);else c=false;if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==C?a.keyCode:a.charCode);
return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input")a=d("input",
a.parentNode)[0];if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);if(d.datepicker._curInst&&d.datepicker._curInst!=b){d.datepicker._datepickerShowing&&d.datepicker._triggerOnClose(d.datepicker._curInst);d.datepicker._curInst.dpDiv.stop(true,true)}var c=d.datepicker._get(b,"beforeShow");c=c?c.apply(a,[a,b]):{};if(c!==false){H(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog)a.value=
"";if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return!e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
true;d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f)h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);J=a;a.dpDiv.empty().append(this._generateHTML(a));var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});
a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");c>1&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(b[0]!=1||b[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&
!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),
h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=
this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_triggerOnClose:function(a){var b=this._get(a,"onClose");if(b)b.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker")))if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);
this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();d.datepicker._triggerOnClose(b);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):
0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e["selected"+(c=="M"?
"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);
this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c)c.apply(a.input?a.input[0]:null,[b,a]);else a.input&&a.input.trigger("change");if(a.inline)this._updateDatepicker(a);else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");
if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?
b.toString():b+"";if(b=="")return null;var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);for(var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,j=c=-1,l=-1,u=-1,k=false,o=function(p){(p=A+1<a.length&&a.charAt(A+1)==p)&&A++;return p},m=function(p){var D=
o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"&&D?4:p=="o"?3:2)+"}");p=b.substring(q).match(p);if(!p)throw"Missing number at position "+q;q+=p[0].length;return parseInt(p[0],10)},n=function(p,D,K){p=d.map(o(p)?K:D,function(w,x){return[[x,w]]}).sort(function(w,x){return-(w[1].length-x[1].length)});var E=-1;d.each(p,function(w,x){w=x[1];if(b.substr(q,w.length).toLowerCase()==w.toLowerCase()){E=x[0];q+=w.length;return false}});if(E!=-1)return E+1;else throw"Unknown name at position "+q;},s=
function(){if(b.charAt(q)!=a.charAt(A))throw"Unexpected literal at position "+q;q++},q=0,A=0;A<a.length;A++)if(k)if(a.charAt(A)=="'"&&!o("'"))k=false;else s();else switch(a.charAt(A)){case "d":l=m("d");break;case "D":n("D",f,h);break;case "o":u=m("o");break;case "m":j=m("m");break;case "M":j=n("M",i,g);break;case "y":c=m("y");break;case "@":var v=new Date(m("@"));c=v.getFullYear();j=v.getMonth()+1;l=v.getDate();break;case "!":v=new Date((m("!")-this._ticksTo1970)/1E4);c=v.getFullYear();j=v.getMonth()+
1;l=v.getDate();break;case "'":if(o("'"))s();else k=true;break;default:s()}if(q<b.length)throw"Extra/unparsed characters found in date: "+b.substring(q);if(c==-1)c=(new Date).getFullYear();else if(c<100)c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100);if(u>-1){j=1;l=u;do{e=this._getDaysInMonth(c,j-1);if(l<=e)break;j++;l-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,j-1,l));if(v.getFullYear()!=c||v.getMonth()+1!=j||v.getDate()!=l)throw"Invalid date";return v},ATOM:"yy-mm-dd",
COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(a,b,c){if(!b)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:
null)||this._defaults.monthNames;var i=function(o){(o=k+1<a.length&&a.charAt(k+1)==o)&&k++;return o},g=function(o,m,n){m=""+m;if(i(o))for(;m.length<n;)m="0"+m;return m},j=function(o,m,n,s){return i(o)?s[m]:n[m]},l="",u=false;if(b)for(var k=0;k<a.length;k++)if(u)if(a.charAt(k)=="'"&&!i("'"))u=false;else l+=a.charAt(k);else switch(a.charAt(k)){case "d":l+=g("d",b.getDate(),2);break;case "D":l+=j("D",b.getDay(),e,f);break;case "o":l+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":l+=g("m",b.getMonth()+1,2);break;case "M":l+=j("M",b.getMonth(),h,c);break;case "y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":l+=b.getTime();break;case "!":l+=b.getTime()*1E4+this._ticksTo1970;break;case "'":if(i("'"))l+="'";else u=true;break;default:l+=a.charAt(k)}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=
0;f<a.length;f++)if(c)if(a.charAt(f)=="'"&&!e("'"))c=false;else b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":if(e("'"))b+="'";else c=true;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return a.settings[b]!==C?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);
var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;
i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case "d":case "D":g+=parseInt(k[1],10);break;case "w":case "W":g+=parseInt(k[1],10)*7;break;case "m":case "M":l+=parseInt(k[1],10);g=
Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case "y":case "Y":j+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break}k=u.exec(h)}return new Date(j,l,g)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>
12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c)this._notifyChange(a);this._adjustInstDate(a);if(a.input)a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&
a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?
new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a));
n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var s=this._get(a,"nextText");s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(m,
g+j,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>";j=this._get(a,"currentText");s=this._get(a,"gotoCurrent")&&
a.currentDay?u:b;j=!h?j:this.formatDate(j,s,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+B+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
B+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;j=this._get(a,"showWeek");s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var q=this._get(a,"dayNamesMin"),A=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),D=this._get(a,"showOtherMonths"),K=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var E=this._getDefaultDate(a),w="",x=0;x<i[0];x++){var O=
"";this.maxRows=4;for(var G=0;G<i[1];G++){var P=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",y="";if(l){y+='<div class="ui-datepicker-group';if(i[1]>1)switch(G){case 0:y+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:y+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:y+=" ui-datepicker-group-middle";t="";break}y+='">'}y+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&
x==0?c?f:n:"")+(/all|right/.test(t)&&x==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,x>0||G>0,A,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var z=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var r=(t+h)%7;z+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+s[r]+'">'+q[r]+"</span></th>"}y+=z+"</tr></thead><tbody>";z=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth)a.selectedDay=Math.min(a.selectedDay,
z);t=(this._getFirstDayOfMonth(m,g)-h+7)%7;z=Math.ceil((t+z)/7);this.maxRows=z=l?this.maxRows>z?this.maxRows:z:z;r=this._daylightSavingAdjust(new Date(m,g,1-t));for(var Q=0;Q<z;Q++){y+="<tr>";var R=!j?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(r)+"</td>";for(t=0;t<7;t++){var I=p?p.apply(a.input?a.input[0]:null,[r]):[true,""],F=r.getMonth()!=g,L=F&&!K||!I[0]||k&&r<k||o&&r>o;R+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(r.getTime()==
P.getTime()&&g==a.selectedMonth&&a._keyEvent||E.getTime()==r.getTime()&&E.getTime()==P.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!D?"":" "+I[1]+(r.getTime()==u.getTime()?" "+this._currentClass:"")+(r.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!F||D)&&I[2]?' title="'+I[2]+'"':"")+(L?"":' onclick="DP_jQuery_'+B+".datepicker._selectDay('#"+a.id+"',"+r.getMonth()+","+r.getFullYear()+', this);return false;"')+">"+(F&&!D?"&#xa0;":L?'<span class="ui-state-default">'+
r.getDate()+"</span>":'<a class="ui-state-default'+(r.getTime()==b.getTime()?" ui-state-highlight":"")+(r.getTime()==u.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+'" href="#">'+r.getDate()+"</a>")+"</td>";r.setDate(r.getDate()+1);r=this._daylightSavingAdjust(r)}y+=R+"</tr>"}g++;if(g>11){g=0;m++}y+="</tbody></table>"+(l?"</div>"+(i[0]>0&&G==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");O+=y}w+=O}w+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=false;return w},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',o="";if(h||!j)o+='<span class="ui-datepicker-month">'+i[b]+"</span>";else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var n=0;n<12;n++)if((!i||n>=e.getMonth())&&
(!m||n<=f.getMonth()))o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";o+="</select>"}u||(k+=o+(h||!(j&&l)?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(h||!l)k+='<span class="ui-datepicker-year">'+c+"</span>";else{g=this._get(a,"yearRange").split(":");var s=(new Date).getFullYear();i=function(q){q=q.match(/c[+-].*/)?c+parseInt(q.substring(1),10):q.match(/[+-].*/)?s+parseInt(q,10):parseInt(q,10);return isNaN(q)?s:q};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,
e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}}k+=this._get(a,"yearSuffix");if(u)k+=(h||!(j&&l)?"&#xa0;":"")+o;k+="</div>";return k},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+
(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y")this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b)b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,
e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;
if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));return this.each(function(){typeof a==
"string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new M;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.16";window["DP_jQuery_"+B]=d})(jQuery);
;/*
 * jQuery UI Progressbar 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Progressbar
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */
(function(b,d){b.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();b.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(a===d)return this._value();this._setOption("value",a);return this},_setOption:function(a,c){if(a==="value"){this.options.value=c;this._refreshValue();this._value()===this.options.max&&this._trigger("complete")}b.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;if(typeof a!=="number")a=0;return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var a=this.value(),c=this._percentage();if(this.oldValue!==a){this.oldValue=a;this._trigger("change")}this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(c.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}});b.extend(b.ui.progressbar,{version:"1.8.16"})})(jQuery);
;/*
 * jQuery UI Effects 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/
 */
jQuery.effects||function(f,j){function m(c){var a;if(c&&c.constructor==Array&&c.length==3)return c;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)];if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return[parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55];if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return[parseInt(a[1],
16),parseInt(a[2],16),parseInt(a[3],16)];if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(c))return n.transparent;return n[f.trim(c).toLowerCase()]}function s(c,a){var b;do{b=f.curCSS(c,a);if(b!=""&&b!="transparent"||f.nodeName(c,"body"))break;a="backgroundColor"}while(c=c.parentNode);return m(b)}function o(){var c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,
a={},b,d;if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;){b=c[e];if(typeof c[b]=="string"){d=b.replace(/\-(\w)/g,function(g,h){return h.toUpperCase()});a[d]=c[b]}}else for(b in c)if(typeof c[b]==="string")a[b]=c[b];return a}function p(c){var a,b;for(a in c){b=c[a];if(b==null||f.isFunction(b)||a in t||/scrollbar/.test(a)||!/color/i.test(a)&&isNaN(parseFloat(b)))delete c[a]}return c}function u(c,a){var b={_:0},d;for(d in a)if(c[d]!=a[d])b[d]=a[d];return b}function k(c,a,b,d){if(typeof c=="object"){d=
a;b=null;a=c;c=a.effect}if(f.isFunction(a)){d=a;b=null;a={}}if(typeof a=="number"||f.fx.speeds[a]){d=b;b=a;a={}}if(f.isFunction(b)){d=b;b=null}a=a||{};b=b||a.duration;b=f.fx.off?0:typeof b=="number"?b:b in f.fx.speeds?f.fx.speeds[b]:f.fx.speeds._default;d=d||a.complete;return[c,a,b,d]}function l(c){if(!c||typeof c==="number"||f.fx.speeds[c])return true;if(typeof c==="string"&&!f.effects[c])return true;return false}f.effects={};f.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor",
"borderTopColor","borderColor","color","outlineColor"],function(c,a){f.fx.step[a]=function(b){if(!b.colorInit){b.start=s(b.elem,a);b.end=m(b.end);b.colorInit=true}b.elem.style[a]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},q=["add","remove","toggle"],t={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};f.effects.animateClass=function(c,a,b,
d){if(f.isFunction(b)){d=b;b=null}return this.queue(function(){var e=f(this),g=e.attr("style")||" ",h=p(o.call(this)),r,v=e.attr("class");f.each(q,function(w,i){c[i]&&e[i+"Class"](c[i])});r=p(o.call(this));e.attr("class",v);e.animate(u(h,r),{queue:false,duration:a,easing:b,complete:function(){f.each(q,function(w,i){c[i]&&e[i+"Class"](c[i])});if(typeof e.attr("style")=="object"){e.attr("style").cssText="";e.attr("style").cssText=g}else e.attr("style",g);d&&d.apply(this,arguments);f.dequeue(this)}})})};
f.fn.extend({_addClass:f.fn.addClass,addClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{add:c},a,b,d]):this._addClass(c)},_removeClass:f.fn.removeClass,removeClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{remove:c},a,b,d]):this._removeClass(c)},_toggleClass:f.fn.toggleClass,toggleClass:function(c,a,b,d,e){return typeof a=="boolean"||a===j?b?f.effects.animateClass.apply(this,[a?{add:c}:{remove:c},b,d,e]):this._toggleClass(c,a):f.effects.animateClass.apply(this,
[{toggle:c},a,b,d])},switchClass:function(c,a,b,d,e){return f.effects.animateClass.apply(this,[{add:a,remove:c},b,d,e])}});f.extend(f.effects,{version:"1.8.16",save:function(c,a){for(var b=0;b<a.length;b++)a[b]!==null&&c.data("ec.storage."+a[b],c[0].style[a[b]])},restore:function(c,a){for(var b=0;b<a.length;b++)a[b]!==null&&c.css(a[b],c.data("ec.storage."+a[b]))},setMode:function(c,a){if(a=="toggle")a=c.is(":hidden")?"show":"hide";return a},getBaseline:function(c,a){var b;switch(c[0]){case "top":b=
0;break;case "middle":b=0.5;break;case "bottom":b=1;break;default:b=c[0]/a.height}switch(c[1]){case "left":c=0;break;case "center":c=0.5;break;case "right":c=1;break;default:c=c[1]/a.width}return{x:c,y:b}},createWrapper:function(c){if(c.parent().is(".ui-effects-wrapper"))return c.parent();var a={width:c.outerWidth(true),height:c.outerHeight(true),"float":c.css("float")},b=f("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),
d=document.activeElement;c.wrap(b);if(c[0]===d||f.contains(c[0],d))f(d).focus();b=c.parent();if(c.css("position")=="static"){b.css({position:"relative"});c.css({position:"relative"})}else{f.extend(a,{position:c.css("position"),zIndex:c.css("z-index")});f.each(["top","left","bottom","right"],function(e,g){a[g]=c.css(g);if(isNaN(parseInt(a[g],10)))a[g]="auto"});c.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return b.css(a).show()},removeWrapper:function(c){var a,b=document.activeElement;
if(c.parent().is(".ui-effects-wrapper")){a=c.parent().replaceWith(c);if(c[0]===b||f.contains(c[0],b))f(b).focus();return a}return c},setTransition:function(c,a,b,d){d=d||{};f.each(a,function(e,g){unit=c.cssUnit(g);if(unit[0]>0)d[g]=unit[0]*b+unit[1]});return d}});f.fn.extend({effect:function(c){var a=k.apply(this,arguments),b={options:a[1],duration:a[2],callback:a[3]};a=b.options.mode;var d=f.effects[c];if(f.fx.off||!d)return a?this[a](b.duration,b.callback):this.each(function(){b.callback&&b.callback.call(this)});
return d.call(this,b)},_show:f.fn.show,show:function(c){if(l(c))return this._show.apply(this,arguments);else{var a=k.apply(this,arguments);a[1].mode="show";return this.effect.apply(this,a)}},_hide:f.fn.hide,hide:function(c){if(l(c))return this._hide.apply(this,arguments);else{var a=k.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)}},__toggle:f.fn.toggle,toggle:function(c){if(l(c)||typeof c==="boolean"||f.isFunction(c))return this.__toggle.apply(this,arguments);else{var a=k.apply(this,
arguments);a[1].mode="toggle";return this.effect.apply(this,a)}},cssUnit:function(c){var a=this.css(c),b=[];f.each(["em","px","%","pt"],function(d,e){if(a.indexOf(e)>0)b=[parseFloat(a),e]});return b}});f.easing.jswing=f.easing.swing;f.extend(f.easing,{def:"easeOutQuad",swing:function(c,a,b,d,e){return f.easing[f.easing.def](c,a,b,d,e)},easeInQuad:function(c,a,b,d,e){return d*(a/=e)*a+b},easeOutQuad:function(c,a,b,d,e){return-d*(a/=e)*(a-2)+b},easeInOutQuad:function(c,a,b,d,e){if((a/=e/2)<1)return d/
2*a*a+b;return-d/2*(--a*(a-2)-1)+b},easeInCubic:function(c,a,b,d,e){return d*(a/=e)*a*a+b},easeOutCubic:function(c,a,b,d,e){return d*((a=a/e-1)*a*a+1)+b},easeInOutCubic:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a+b;return d/2*((a-=2)*a*a+2)+b},easeInQuart:function(c,a,b,d,e){return d*(a/=e)*a*a*a+b},easeOutQuart:function(c,a,b,d,e){return-d*((a=a/e-1)*a*a*a-1)+b},easeInOutQuart:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a*a+b;return-d/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(c,a,b,
d,e){return d*(a/=e)*a*a*a*a+b},easeOutQuint:function(c,a,b,d,e){return d*((a=a/e-1)*a*a*a*a+1)+b},easeInOutQuint:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a*a*a+b;return d/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(c,a,b,d,e){return-d*Math.cos(a/e*(Math.PI/2))+d+b},easeOutSine:function(c,a,b,d,e){return d*Math.sin(a/e*(Math.PI/2))+b},easeInOutSine:function(c,a,b,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+b},easeInExpo:function(c,a,b,d,e){return a==0?b:d*Math.pow(2,10*(a/e-1))+b},easeOutExpo:function(c,
a,b,d,e){return a==e?b+d:d*(-Math.pow(2,-10*a/e)+1)+b},easeInOutExpo:function(c,a,b,d,e){if(a==0)return b;if(a==e)return b+d;if((a/=e/2)<1)return d/2*Math.pow(2,10*(a-1))+b;return d/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(c,a,b,d,e){return-d*(Math.sqrt(1-(a/=e)*a)-1)+b},easeOutCirc:function(c,a,b,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+b},easeInOutCirc:function(c,a,b,d,e){if((a/=e/2)<1)return-d/2*(Math.sqrt(1-a*a)-1)+b;return d/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(c,a,b,
d,e){c=1.70158;var g=0,h=d;if(a==0)return b;if((a/=e)==1)return b+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g))+b},easeOutElastic:function(c,a,b,d,e){c=1.70158;var g=0,h=d;if(a==0)return b;if((a/=e)==1)return b+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*a)*Math.sin((a*e-c)*2*Math.PI/g)+d+b},easeInOutElastic:function(c,a,b,d,e){c=1.70158;var g=
0,h=d;if(a==0)return b;if((a/=e/2)==2)return b+d;g||(g=e*0.3*1.5);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/h);if(a<1)return-0.5*h*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)+b;return h*Math.pow(2,-10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)*0.5+d+b},easeInBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;return d*(a/=e)*a*((g+1)*a-g)+b},easeOutBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;return d*((a=a/e-1)*a*((g+1)*a+g)+1)+b},easeInOutBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;
if((a/=e/2)<1)return d/2*a*a*(((g*=1.525)+1)*a-g)+b;return d/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+b},easeInBounce:function(c,a,b,d,e){return d-f.easing.easeOutBounce(c,e-a,0,d,e)+b},easeOutBounce:function(c,a,b,d,e){return(a/=e)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},easeInOutBounce:function(c,a,b,d,e){if(a<e/2)return f.easing.easeInBounce(c,a*2,0,d,e)*0.5+b;return f.easing.easeOutBounce(c,
a*2-e,0,d,e)*0.5+d*0.5+b}})}(jQuery);
;/*
 * jQuery UI Effects Blind 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Blind
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.blind=function(c){return this.queue(function(){var a=b(this),g=["position","top","bottom","left","right"],f=b.effects.setMode(a,c.options.mode||"hide"),d=c.options.direction||"vertical";b.effects.save(a,g);a.show();var e=b.effects.createWrapper(a).css({overflow:"hidden"}),h=d=="vertical"?"height":"width";d=d=="vertical"?e.height():e.width();f=="show"&&e.css(h,0);var i={};i[h]=f=="show"?d:0;e.animate(i,c.duration,c.options.easing,function(){f=="hide"&&a.hide();b.effects.restore(a,
g);b.effects.removeWrapper(a);c.callback&&c.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
;/*
 * jQuery UI Effects Bounce 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Bounce
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(e){e.effects.bounce=function(b){return this.queue(function(){var a=e(this),l=["position","top","bottom","left","right"],h=e.effects.setMode(a,b.options.mode||"effect"),d=b.options.direction||"up",c=b.options.distance||20,m=b.options.times||5,i=b.duration||250;/show|hide/.test(h)&&l.push("opacity");e.effects.save(a,l);a.show();e.effects.createWrapper(a);var f=d=="up"||d=="down"?"top":"left";d=d=="up"||d=="left"?"pos":"neg";c=b.options.distance||(f=="top"?a.outerHeight({margin:true})/3:a.outerWidth({margin:true})/
3);if(h=="show")a.css("opacity",0).css(f,d=="pos"?-c:c);if(h=="hide")c/=m*2;h!="hide"&&m--;if(h=="show"){var g={opacity:1};g[f]=(d=="pos"?"+=":"-=")+c;a.animate(g,i/2,b.options.easing);c/=2;m--}for(g=0;g<m;g++){var j={},k={};j[f]=(d=="pos"?"-=":"+=")+c;k[f]=(d=="pos"?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing);c=h=="hide"?c*2:c/2}if(h=="hide"){g={opacity:0};g[f]=(d=="pos"?"-=":"+=")+c;a.animate(g,i/2,b.options.easing,function(){a.hide();e.effects.restore(a,l);e.effects.removeWrapper(a);
b.callback&&b.callback.apply(this,arguments)})}else{j={};k={};j[f]=(d=="pos"?"-=":"+=")+c;k[f]=(d=="pos"?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing,function(){e.effects.restore(a,l);e.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)})}a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);
;/*
 * jQuery UI Effects Clip 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Clip
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.clip=function(e){return this.queue(function(){var a=b(this),i=["position","top","bottom","left","right","height","width"],f=b.effects.setMode(a,e.options.mode||"hide"),c=e.options.direction||"vertical";b.effects.save(a,i);a.show();var d=b.effects.createWrapper(a).css({overflow:"hidden"});d=a[0].tagName=="IMG"?d:a;var g={size:c=="vertical"?"height":"width",position:c=="vertical"?"top":"left"};c=c=="vertical"?d.height():d.width();if(f=="show"){d.css(g.size,0);d.css(g.position,
c/2)}var h={};h[g.size]=f=="show"?c:0;h[g.position]=f=="show"?0:c/2;d.animate(h,{queue:false,duration:e.duration,easing:e.options.easing,complete:function(){f=="hide"&&a.hide();b.effects.restore(a,i);b.effects.removeWrapper(a);e.callback&&e.callback.apply(a[0],arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Drop 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Drop
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.drop=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right","opacity"],e=c.effects.setMode(a,d.options.mode||"hide"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a);var f=b=="up"||b=="down"?"top":"left";b=b=="up"||b=="left"?"pos":"neg";var g=d.options.distance||(f=="top"?a.outerHeight({margin:true})/2:a.outerWidth({margin:true})/2);if(e=="show")a.css("opacity",0).css(f,b=="pos"?-g:g);var i={opacity:e==
"show"?1:0};i[f]=(e=="show"?b=="pos"?"+=":"-=":b=="pos"?"-=":"+=")+g;a.animate(i,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){e=="hide"&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Explode 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Explode
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(j){j.effects.explode=function(a){return this.queue(function(){var c=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,d=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode=a.options.mode=="toggle"?j(this).is(":visible")?"hide":"show":a.options.mode;var b=j(this).show().css("visibility","hidden"),g=b.offset();g.top-=parseInt(b.css("marginTop"),10)||0;g.left-=parseInt(b.css("marginLeft"),10)||0;for(var h=b.outerWidth(true),i=b.outerHeight(true),e=0;e<c;e++)for(var f=
0;f<d;f++)b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-f*(h/d),top:-e*(i/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:i/c,left:g.left+f*(h/d)+(a.options.mode=="show"?(f-Math.floor(d/2))*(h/d):0),top:g.top+e*(i/c)+(a.options.mode=="show"?(e-Math.floor(c/2))*(i/c):0),opacity:a.options.mode=="show"?0:1}).animate({left:g.left+f*(h/d)+(a.options.mode=="show"?0:(f-Math.floor(d/2))*(h/d)),top:g.top+
e*(i/c)+(a.options.mode=="show"?0:(e-Math.floor(c/2))*(i/c)),opacity:a.options.mode=="show"?1:0},a.duration||500);setTimeout(function(){a.options.mode=="show"?b.css({visibility:"visible"}):b.css({visibility:"visible"}).hide();a.callback&&a.callback.apply(b[0]);b.dequeue();j("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
;/*
 * jQuery UI Effects Fade 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fade
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.fade=function(a){return this.queue(function(){var c=b(this),d=b.effects.setMode(c,a.options.mode||"hide");c.animate({opacity:d},{queue:false,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Fold 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fold
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.fold=function(a){return this.queue(function(){var b=c(this),j=["position","top","bottom","left","right"],d=c.effects.setMode(b,a.options.mode||"hide"),g=a.options.size||15,h=!!a.options.horizFirst,k=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,j);b.show();var e=c.effects.createWrapper(b).css({overflow:"hidden"}),f=d=="show"!=h,l=f?["width","height"]:["height","width"];f=f?[e.width(),e.height()]:[e.height(),e.width()];var i=/([0-9]+)%/.exec(g);if(i)g=parseInt(i[1],
10)/100*f[d=="hide"?0:1];if(d=="show")e.css(h?{height:0,width:g}:{height:g,width:0});h={};i={};h[l[0]]=d=="show"?f[0]:g;i[l[1]]=d=="show"?f[1]:0;e.animate(h,k,a.options.easing).animate(i,k,a.options.easing,function(){d=="hide"&&b.hide();c.effects.restore(b,j);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
;/*
 * jQuery UI Effects Highlight 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Highlight
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(b){b.effects.highlight=function(c){return this.queue(function(){var a=b(this),e=["backgroundImage","backgroundColor","opacity"],d=b.effects.setMode(a,c.options.mode||"show"),f={backgroundColor:a.css("backgroundColor")};if(d=="hide")f.opacity=0;b.effects.save(a,e);a.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(f,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){d=="hide"&&a.hide();b.effects.restore(a,e);d=="show"&&!b.support.opacity&&
this.style.removeAttribute("filter");c.callback&&c.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Pulsate 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Pulsate
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(d){d.effects.pulsate=function(a){return this.queue(function(){var b=d(this),c=d.effects.setMode(b,a.options.mode||"show");times=(a.options.times||5)*2-1;duration=a.duration?a.duration/2:d.fx.speeds._default/2;isVisible=b.is(":visible");animateTo=0;if(!isVisible){b.css("opacity",0).show();animateTo=1}if(c=="hide"&&isVisible||c=="show"&&!isVisible)times--;for(c=0;c<times;c++){b.animate({opacity:animateTo},duration,a.options.easing);animateTo=(animateTo+1)%2}b.animate({opacity:animateTo},duration,
a.options.easing,function(){animateTo==0&&b.hide();a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);
;/*
 * jQuery UI Effects Scale 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Scale
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.puff=function(b){return this.queue(function(){var a=c(this),e=c.effects.setMode(a,b.options.mode||"hide"),g=parseInt(b.options.percent,10)||150,h=g/100,i={height:a.height(),width:a.width()};c.extend(b.options,{fade:true,mode:e,percent:e=="hide"?g:100,from:e=="hide"?i:{height:i.height*h,width:i.width*h}});a.effect("scale",b.options,b.duration,b.callback);a.dequeue()})};c.effects.scale=function(b){return this.queue(function(){var a=c(this),e=c.extend(true,{},b.options),g=c.effects.setMode(a,
b.options.mode||"effect"),h=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:g=="hide"?0:100),i=b.options.direction||"both",f=b.options.origin;if(g!="effect"){e.origin=f||["middle","center"];e.restore=true}f={height:a.height(),width:a.width()};a.from=b.options.from||(g=="show"?{height:0,width:0}:f);h={y:i!="horizontal"?h/100:1,x:i!="vertical"?h/100:1};a.to={height:f.height*h.y,width:f.width*h.x};if(b.options.fade){if(g=="show"){a.from.opacity=0;a.to.opacity=1}if(g=="hide"){a.from.opacity=
1;a.to.opacity=0}}e.from=a.from;e.to=a.to;e.mode=g;a.effect("size",e,b.duration,b.callback);a.dequeue()})};c.effects.size=function(b){return this.queue(function(){var a=c(this),e=["position","top","bottom","left","right","width","height","overflow","opacity"],g=["position","top","bottom","left","right","overflow","opacity"],h=["width","height","overflow"],i=["fontSize"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],k=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
p=c.effects.setMode(a,b.options.mode||"effect"),n=b.options.restore||false,m=b.options.scale||"both",l=b.options.origin,j={height:a.height(),width:a.width()};a.from=b.options.from||j;a.to=b.options.to||j;if(l){l=c.effects.getBaseline(l,j);a.from.top=(j.height-a.from.height)*l.y;a.from.left=(j.width-a.from.width)*l.x;a.to.top=(j.height-a.to.height)*l.y;a.to.left=(j.width-a.to.width)*l.x}var d={from:{y:a.from.height/j.height,x:a.from.width/j.width},to:{y:a.to.height/j.height,x:a.to.width/j.width}};
if(m=="box"||m=="both"){if(d.from.y!=d.to.y){e=e.concat(f);a.from=c.effects.setTransition(a,f,d.from.y,a.from);a.to=c.effects.setTransition(a,f,d.to.y,a.to)}if(d.from.x!=d.to.x){e=e.concat(k);a.from=c.effects.setTransition(a,k,d.from.x,a.from);a.to=c.effects.setTransition(a,k,d.to.x,a.to)}}if(m=="content"||m=="both")if(d.from.y!=d.to.y){e=e.concat(i);a.from=c.effects.setTransition(a,i,d.from.y,a.from);a.to=c.effects.setTransition(a,i,d.to.y,a.to)}c.effects.save(a,n?e:g);a.show();c.effects.createWrapper(a);
a.css("overflow","hidden").css(a.from);if(m=="content"||m=="both"){f=f.concat(["marginTop","marginBottom"]).concat(i);k=k.concat(["marginLeft","marginRight"]);h=e.concat(f).concat(k);a.find("*[width]").each(function(){child=c(this);n&&c.effects.save(child,h);var o={height:child.height(),width:child.width()};child.from={height:o.height*d.from.y,width:o.width*d.from.x};child.to={height:o.height*d.to.y,width:o.width*d.to.x};if(d.from.y!=d.to.y){child.from=c.effects.setTransition(child,f,d.from.y,child.from);
child.to=c.effects.setTransition(child,f,d.to.y,child.to)}if(d.from.x!=d.to.x){child.from=c.effects.setTransition(child,k,d.from.x,child.from);child.to=c.effects.setTransition(child,k,d.to.x,child.to)}child.css(child.from);child.animate(child.to,b.duration,b.options.easing,function(){n&&c.effects.restore(child,h)})})}a.animate(a.to,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){a.to.opacity===0&&a.css("opacity",a.from.opacity);p=="hide"&&a.hide();c.effects.restore(a,
n?e:g);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Shake 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Shake
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(d){d.effects.shake=function(a){return this.queue(function(){var b=d(this),j=["position","top","bottom","left","right"];d.effects.setMode(b,a.options.mode||"effect");var c=a.options.direction||"left",e=a.options.distance||20,l=a.options.times||3,f=a.duration||a.options.duration||140;d.effects.save(b,j);b.show();d.effects.createWrapper(b);var g=c=="up"||c=="down"?"top":"left",h=c=="up"||c=="left"?"pos":"neg";c={};var i={},k={};c[g]=(h=="pos"?"-=":"+=")+e;i[g]=(h=="pos"?"+=":"-=")+e*2;k[g]=
(h=="pos"?"-=":"+=")+e*2;b.animate(c,f,a.options.easing);for(e=1;e<l;e++)b.animate(i,f,a.options.easing).animate(k,f,a.options.easing);b.animate(i,f,a.options.easing).animate(c,f/2,a.options.easing,function(){d.effects.restore(b,j);d.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);
;/*
 * jQuery UI Effects Slide 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Slide
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(c){c.effects.slide=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right"],f=c.effects.setMode(a,d.options.mode||"show"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a).css({overflow:"hidden"});var g=b=="up"||b=="down"?"top":"left";b=b=="up"||b=="left"?"pos":"neg";var e=d.options.distance||(g=="top"?a.outerHeight({margin:true}):a.outerWidth({margin:true}));if(f=="show")a.css(g,b=="pos"?isNaN(e)?"-"+e:-e:e);
var i={};i[g]=(f=="show"?b=="pos"?"+=":"-=":b=="pos"?"-=":"+=")+e;a.animate(i,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){f=="hide"&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
;/*
 * jQuery UI Effects Transfer 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Transfer
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(e){e.effects.transfer=function(a){return this.queue(function(){var b=e(this),c=e(a.options.to),d=c.offset();c={top:d.top,left:d.left,height:c.innerHeight(),width:c.innerWidth()};d=b.offset();var f=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:d.top,left:d.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(c,a.duration,a.options.easing,function(){f.remove();a.callback&&a.callback.apply(b[0],arguments);
b.dequeue()})})}})(jQuery);
;/*!
 * jQuery Form Plugin
 * version: 2.87 (20-OCT-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
;(function($) {

/*
	Usage Note:
	-----------
	Do not use both ajaxSubmit and ajaxForm on the same form.  These
	functions are intended to be exclusive.  Use ajaxSubmit if you want
	to bind your own submit handler to the form.  For example,

	$(document).ready(function() {
		$('#myForm').bind('submit', function(e) {
			e.preventDefault(); // <-- important
			$(this).ajaxSubmit({
				target: '#output'
			});
		});
	});

	Use ajaxForm when you want the plugin to manage all the event binding
	for you.  For example,

	$(document).ready(function() {
		$('#myForm').ajaxForm({
			target: '#output'
		});
	});

	When using ajaxForm, the ajaxSubmit function will be invoked for you
	at the appropriate time.
*/

/**
 * ajaxSubmit() provides a mechanism for immediately submitting
 * an HTML form using AJAX.
 */
$.fn.ajaxSubmit = function(options) {
	// fast fail if nothing selected (http://dev.jquery.com/ticket/2752)
	if (!this.length) {
		log('ajaxSubmit: skipping submit process - no element selected');
		return this;
	}
	
	var method, action, url, $form = this;

	if (typeof options == 'function') {
		options = { success: options };
	}

	method = this.attr('method');
	action = this.attr('action');
	url = (typeof action === 'string') ? $.trim(action) : '';
	url = url || window.location.href || '';
	if (url) {
		// clean url (don't include hash vaue)
		url = (url.match(/^([^#]+)/)||[])[1];
	}

	options = $.extend(true, {
		url:  url,
		success: $.ajaxSettings.success,
		type: method || 'GET',
		iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'
	}, options);

	// hook for manipulating the form data before it is extracted;
	// convenient for use with rich editors like tinyMCE or FCKEditor
	var veto = {};
	this.trigger('form-pre-serialize', [this, options, veto]);
	if (veto.veto) {
		log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');
		return this;
	}

	// provide opportunity to alter form data before it is serialized
	if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {
		log('ajaxSubmit: submit aborted via beforeSerialize callback');
		return this;
	}

   var traditional = options.traditional;
   if ( traditional === undefined ) {
      traditional = $.ajaxSettings.traditional;
   }
   
	var qx,n,v,a = this.formToArray(options.semantic);
	if (options.data) {
		options.extraData = options.data;
      qx = $.param(options.data, traditional);
	}

	// give pre-submit callback an opportunity to abort the submit
	if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {
		log('ajaxSubmit: submit aborted via beforeSubmit callback');
		return this;
	}

	// fire vetoable 'validate' event
	this.trigger('form-submit-validate', [a, this, options, veto]);
	if (veto.veto) {
		log('ajaxSubmit: submit vetoed via form-submit-validate trigger');
		return this;
	}

	var q = $.param(a, traditional);
   if (qx)
      q = ( q ? (q + '&' + qx) : qx );

	if (options.type.toUpperCase() == 'GET') {
		options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;
		options.data = null;  // data is null for 'get'
	}
	else {
		options.data = q; // data is the query string for 'post'
	}

	var callbacks = [];
	if (options.resetForm) {
		callbacks.push(function() { $form.resetForm(); });
	}
	if (options.clearForm) {
		callbacks.push(function() { $form.clearForm(options.includeHidden); });
	}

	// perform a load on the target only if dataType is not provided
	if (!options.dataType && options.target) {
		var oldSuccess = options.success || function(){};
		callbacks.push(function(data) {
			var fn = options.replaceTarget ? 'replaceWith' : 'html';
			$(options.target)[fn](data).each(oldSuccess, arguments);
		});
	}
	else if (options.success) {
		callbacks.push(options.success);
	}

	options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg
		var context = options.context || options;   // jQuery 1.4+ supports scope context 
		for (var i=0, max=callbacks.length; i < max; i++) {
			callbacks[i].apply(context, [data, status, xhr || $form, $form]);
		}
	};

	// are there files to upload?
	var fileInputs = $('input:file', this).length > 0;
	var mp = 'multipart/form-data';
	var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);

	// options.iframe allows user to force iframe mode
	// 06-NOV-09: now defaulting to iframe mode if file input is detected
   if (options.iframe !== false && (fileInputs || options.iframe || multipart)) {
	   // hack to fix Safari hang (thanks to Tim Molendijk for this)
	   // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d
	   if (options.closeKeepAlive) {
		   $.get(options.closeKeepAlive, function() { fileUpload(a); });
		}
	   else {
		   fileUpload(a);
		}
   }
   else {
		// IE7 massage (see issue 57)
		if ($.browser.msie && method == 'get' && typeof options.type === "undefined") {
			var ieMeth = $form[0].getAttribute('method');
			if (typeof ieMeth === 'string')
				options.type = ieMeth;
		}
		$.ajax(options);
   }

	// fire 'notify' event
	this.trigger('form-submit-notify', [this, options]);
	return this;


	// private function for handling file uploads (hat tip to YAHOO!)
	function fileUpload(a) {
		var form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;
        var useProp = !!$.fn.prop;

        if (a) {
            if ( useProp ) {
            	// ensure that every serialized input is still enabled
              	for (i=0; i < a.length; i++) {
                    el = $(form[a[i].name]);
                    el.prop('disabled', false);
              	}
            } else {
              	for (i=0; i < a.length; i++) {
                    el = $(form[a[i].name]);
                    el.removeAttr('disabled');
              	}
            };
        }

		if ($(':input[name=submit],:input[id=submit]', form).length) {
			// if there is an input with a name or id of 'submit' then we won't be
			// able to invoke the submit fn on the form (at least not x-browser)
			alert('Error: Form elements must not have name or id of "submit".');
			return;
		}
		
		s = $.extend(true, {}, $.ajaxSettings, options);
		s.context = s.context || s;
		id = 'jqFormIO' + (new Date().getTime());
		if (s.iframeTarget) {
			$io = $(s.iframeTarget);
			n = $io.attr('name');
			if (n == null)
			 	$io.attr('name', id);
			else
				id = n;
		}
		else {
			$io = $('<iframe name="' + id + '" src="'+ s.iframeSrc +'" />');
			$io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });
		}
		io = $io[0];


		xhr = { // mock object
			aborted: 0,
			responseText: null,
			responseXML: null,
			status: 0,
			statusText: 'n/a',
			getAllResponseHeaders: function() {},
			getResponseHeader: function() {},
			setRequestHeader: function() {},
			abort: function(status) {
				var e = (status === 'timeout' ? 'timeout' : 'aborted');
				log('aborting upload... ' + e);
				this.aborted = 1;
				$io.attr('src', s.iframeSrc); // abort op in progress
				xhr.error = e;
				s.error && s.error.call(s.context, xhr, e, status);
				g && $.event.trigger("ajaxError", [xhr, s, e]);
				s.complete && s.complete.call(s.context, xhr, e);
			}
		};

		g = s.global;
		// trigger ajax global events so that activity/block indicators work like normal
		if (g && ! $.active++) {
			$.event.trigger("ajaxStart");
		}
		if (g) {
			$.event.trigger("ajaxSend", [xhr, s]);
		}

		if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {
			if (s.global) {
				$.active--;
			}
			return;
		}
		if (xhr.aborted) {
			return;
		}

		// add submitting element to data if we know it
		sub = form.clk;
		if (sub) {
			n = sub.name;
			if (n && !sub.disabled) {
				s.extraData = s.extraData || {};
				s.extraData[n] = sub.value;
				if (sub.type == "image") {
					s.extraData[n+'.x'] = form.clk_x;
					s.extraData[n+'.y'] = form.clk_y;
				}
			}
		}
		
		var CLIENT_TIMEOUT_ABORT = 1;
		var SERVER_ABORT = 2;

		function getDoc(frame) {
			var doc = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument ? frame.contentDocument : frame.document;
			return doc;
		}
		
		// take a breath so that pending repaints get some cpu time before the upload starts
		function doSubmit() {
			// make sure form attrs are set
			var t = $form.attr('target'), a = $form.attr('action');

			// update form attrs in IE friendly way
			form.setAttribute('target',id);
			if (!method) {
				form.setAttribute('method', 'POST');
			}
			if (a != s.url) {
				form.setAttribute('action', s.url);
			}

			// ie borks in some cases when setting encoding
			if (! s.skipEncodingOverride && (!method || /post/i.test(method))) {
				$form.attr({
					encoding: 'multipart/form-data',
					enctype:  'multipart/form-data'
				});
			}

			// support timout
			if (s.timeout) {
				timeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);
			}
			
			// look for server aborts
			function checkState() {
				try {
					var state = getDoc(io).readyState;
					log('state = ' + state);
					if (state.toLowerCase() == 'uninitialized')
						setTimeout(checkState,50);
				}
				catch(e) {
					log('Server abort: ' , e, ' (', e.name, ')');
					cb(SERVER_ABORT);
					timeoutHandle && clearTimeout(timeoutHandle);
					timeoutHandle = undefined;
				}
			}

			// add "extra" data to form if provided in options
			var extraInputs = [];
			try {
				if (s.extraData) {
					for (var n in s.extraData) {
						extraInputs.push(
							$('<input type="hidden" name="'+n+'" />').attr('value',s.extraData[n])
								.appendTo(form)[0]);
					}
				}

				if (!s.iframeTarget) {
					// add iframe to doc and submit the form
					$io.appendTo('body');
	                io.attachEvent ? io.attachEvent('onload', cb) : io.addEventListener('load', cb, false);
				}
				setTimeout(checkState,15);
				form.submit();
			}
			finally {
				// reset attrs and remove "extra" input elements
				form.setAttribute('action',a);
				if(t) {
					form.setAttribute('target', t);
				} else {
					$form.removeAttr('target');
				}
				$(extraInputs).remove();
			}
		}

		if (s.forceSync) {
			doSubmit();
		}
		else {
			setTimeout(doSubmit, 10); // this lets dom updates render
		}

		var data, doc, domCheckCount = 50, callbackProcessed;

		function cb(e) {
			if (xhr.aborted || callbackProcessed) {
				return;
			}
			try {
				doc = getDoc(io);
			}
			catch(ex) {
				log('cannot access response document: ', ex);
				e = SERVER_ABORT;
			}
			if (e === CLIENT_TIMEOUT_ABORT && xhr) {
				xhr.abort('timeout');
				return;
			}
			else if (e == SERVER_ABORT && xhr) {
				xhr.abort('server abort');
				return;
			}

			if (!doc || doc.location.href == s.iframeSrc) {
				// response not received yet
				if (!timedOut)
					return;
			}
            io.detachEvent ? io.detachEvent('onload', cb) : io.removeEventListener('load', cb, false);

			var status = 'success', errMsg;
			try {
				if (timedOut) {
					throw 'timeout';
				}

				var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);
				log('isXml='+isXml);
				if (!isXml && window.opera && (doc.body == null || doc.body.innerHTML == '')) {
					if (--domCheckCount) {
						// in some browsers (Opera) the iframe DOM is not always traversable when
						// the onload callback fires, so we loop a bit to accommodate
						log('requeing onLoad callback, DOM not available');
						setTimeout(cb, 250);
						return;
					}
					// let this fall through because server response could be an empty document
					//log('Could not access iframe DOM after mutiple tries.');
					//throw 'DOMException: not available';
				}

				//log('response detected');
                var docRoot = doc.body ? doc.body : doc.documentElement;
                xhr.responseText = docRoot ? docRoot.innerHTML : null;
				xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;
				if (isXml)
					s.dataType = 'xml';
				xhr.getResponseHeader = function(header){
					var headers = {'content-type': s.dataType};
					return headers[header];
				};
                // support for XHR 'status' & 'statusText' emulation :
                if (docRoot) {
                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;
                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;
                }

				var dt = (s.dataType || '').toLowerCase();
				var scr = /(json|script|text)/.test(dt);
				if (scr || s.textarea) {
					// see if user embedded response in textarea
					var ta = doc.getElementsByTagName('textarea')[0];
					if (ta) {
						xhr.responseText = ta.value;
                        // support for XHR 'status' & 'statusText' emulation :
                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;
                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;
					}
					else if (scr) {
						// account for browsers injecting pre around json response
						var pre = doc.getElementsByTagName('pre')[0];
						var b = doc.getElementsByTagName('body')[0];
						if (pre) {
							xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;
						}
						else if (b) {
							xhr.responseText = b.textContent ? b.textContent : b.innerText;
						}
					}
				}
				else if (dt == 'xml' && !xhr.responseXML && xhr.responseText != null) {
					xhr.responseXML = toXml(xhr.responseText);
				}

                try {
                    data = httpData(xhr, dt, s);
                }
                catch (e) {
                    status = 'parsererror';
                    xhr.error = errMsg = (e || status);
                }
			}
			catch (e) {
				log('error caught: ',e);
				status = 'error';
                xhr.error = errMsg = (e || status);
			}

			if (xhr.aborted) {
				log('upload aborted');
				status = null;
			}

            if (xhr.status) { // we've set xhr.status
                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';
            }

			// ordering of these callbacks/triggers is odd, but that's how $.ajax does it
			if (status === 'success') {
				s.success && s.success.call(s.context, data, 'success', xhr);
				g && $.event.trigger("ajaxSuccess", [xhr, s]);
			}
            else if (status) {
				if (errMsg == undefined)
					errMsg = xhr.statusText;
				s.error && s.error.call(s.context, xhr, status, errMsg);
				g && $.event.trigger("ajaxError", [xhr, s, errMsg]);
            }

			g && $.event.trigger("ajaxComplete", [xhr, s]);

			if (g && ! --$.active) {
				$.event.trigger("ajaxStop");
			}

			s.complete && s.complete.call(s.context, xhr, status);

			callbackProcessed = true;
			if (s.timeout)
				clearTimeout(timeoutHandle);

			// clean up
			setTimeout(function() {
				if (!s.iframeTarget)
					$io.remove();
				xhr.responseXML = null;
			}, 100);
		}

		var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)
			if (window.ActiveXObject) {
				doc = new ActiveXObject('Microsoft.XMLDOM');
				doc.async = 'false';
				doc.loadXML(s);
			}
			else {
				doc = (new DOMParser()).parseFromString(s, 'text/xml');
			}
			return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;
		};
		var parseJSON = $.parseJSON || function(s) {
			return window['eval']('(' + s + ')');
		};

		var httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4

			var ct = xhr.getResponseHeader('content-type') || '',
				xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,
				data = xml ? xhr.responseXML : xhr.responseText;

			if (xml && data.documentElement.nodeName === 'parsererror') {
				$.error && $.error('parsererror');
			}
			if (s && s.dataFilter) {
				data = s.dataFilter(data, type);
			}
			if (typeof data === 'string') {
				if (type === 'json' || !type && ct.indexOf('json') >= 0) {
					data = parseJSON(data);
				} else if (type === "script" || !type && ct.indexOf("javascript") >= 0) {
					$.globalEval(data);
				}
			}
			return data;
		};
	}
};

/**
 * ajaxForm() provides a mechanism for fully automating form submission.
 *
 * The advantages of using this method instead of ajaxSubmit() are:
 *
 * 1: This method will include coordinates for <input type="image" /> elements (if the element
 *	is used to submit the form).
 * 2. This method will include the submit element's name/value data (for the element that was
 *	used to submit the form).
 * 3. This method binds the submit() method to the form for you.
 *
 * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely
 * passes the options argument along after properly binding events for submit elements and
 * the form itself.
 */
$.fn.ajaxForm = function(options) {
	// in jQuery 1.3+ we can fix mistakes with the ready state
	if (this.length === 0) {
		var o = { s: this.selector, c: this.context };
		if (!$.isReady && o.s) {
			log('DOM not ready, queuing ajaxForm');
			$(function() {
				$(o.s,o.c).ajaxForm(options);
			});
			return this;
		}
		// is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()
		log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));
		return this;
	}

	return this.ajaxFormUnbind().bind('submit.form-plugin', function(e) {
		if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed
			e.preventDefault();
			$(this).ajaxSubmit(options);
		}
	}).bind('click.form-plugin', function(e) {
		var target = e.target;
		var $el = $(target);
		if (!($el.is(":submit,input:image"))) {
			// is this a child element of the submit el?  (ex: a span within a button)
			var t = $el.closest(':submit');
			if (t.length == 0) {
				return;
			}
			target = t[0];
		}
		var form = this;
		form.clk = target;
		if (target.type == 'image') {
			if (e.offsetX != undefined) {
				form.clk_x = e.offsetX;
				form.clk_y = e.offsetY;
			} else if (typeof $.fn.offset == 'function') { // try to use dimensions plugin
				var offset = $el.offset();
				form.clk_x = e.pageX - offset.left;
				form.clk_y = e.pageY - offset.top;
			} else {
				form.clk_x = e.pageX - target.offsetLeft;
				form.clk_y = e.pageY - target.offsetTop;
			}
		}
		// clear form vars
		setTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);
	});
};

// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm
$.fn.ajaxFormUnbind = function() {
	return this.unbind('submit.form-plugin click.form-plugin');
};

/**
 * formToArray() gathers form element data into an array of objects that can
 * be passed to any of the following ajax functions: $.get, $.post, or load.
 * Each object in the array has both a 'name' and 'value' property.  An example of
 * an array for a simple login form might be:
 *
 * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]
 *
 * It is this array that is passed to pre-submit callback functions provided to the
 * ajaxSubmit() and ajaxForm() methods.
 */
$.fn.formToArray = function(semantic) {
	var a = [];
	if (this.length === 0) {
		return a;
	}

	var form = this[0];
	var els = semantic ? form.getElementsByTagName('*') : form.elements;
	if (!els) {
		return a;
	}

	var i,j,n,v,el,max,jmax;
	for(i=0, max=els.length; i < max; i++) {
		el = els[i];
		n = el.name;
		if (!n) {
			continue;
		}

		if (semantic && form.clk && el.type == "image") {
			// handle image inputs on the fly when semantic == true
			if(!el.disabled && form.clk == el) {
				a.push({name: n, value: $(el).val()});
				a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
			}
			continue;
		}

		v = $.fieldValue(el, true);
		if (v && v.constructor == Array) {
			for(j=0, jmax=v.length; j < jmax; j++) {
				a.push({name: n, value: v[j]});
			}
		}
		else if (v !== null && typeof v != 'undefined') {
			a.push({name: n, value: v});
		}
	}

	if (!semantic && form.clk) {
		// input type=='image' are not found in elements array! handle it here
		var $input = $(form.clk), input = $input[0];
		n = input.name;
		if (n && !input.disabled && input.type == 'image') {
			a.push({name: n, value: $input.val()});
			a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
		}
	}
	return a;
};

/**
 * Serializes form data into a 'submittable' string. This method will return a string
 * in the format: name1=value1&amp;name2=value2
 */
$.fn.formSerialize = function(semantic) {
	//hand off to jQuery.param for proper encoding
	return $.param(this.formToArray(semantic));
};

/**
 * Serializes all field elements in the jQuery object into a query string.
 * This method will return a string in the format: name1=value1&amp;name2=value2
 */
$.fn.fieldSerialize = function(successful) {
	var a = [];
	this.each(function() {
		var n = this.name;
		if (!n) {
			return;
		}
		var v = $.fieldValue(this, successful);
		if (v && v.constructor == Array) {
			for (var i=0,max=v.length; i < max; i++) {
				a.push({name: n, value: v[i]});
			}
		}
		else if (v !== null && typeof v != 'undefined') {
			a.push({name: this.name, value: v});
		}
	});
	//hand off to jQuery.param for proper encoding
	return $.param(a);
};

/**
 * Returns the value(s) of the element in the matched set.  For example, consider the following form:
 *
 *  <form><fieldset>
 *	  <input name="A" type="text" />
 *	  <input name="A" type="text" />
 *	  <input name="B" type="checkbox" value="B1" />
 *	  <input name="B" type="checkbox" value="B2"/>
 *	  <input name="C" type="radio" value="C1" />
 *	  <input name="C" type="radio" value="C2" />
 *  </fieldset></form>
 *
 *  var v = $(':text').fieldValue();
 *  // if no values are entered into the text inputs
 *  v == ['','']
 *  // if values entered into the text inputs are 'foo' and 'bar'
 *  v == ['foo','bar']
 *
 *  var v = $(':checkbox').fieldValue();
 *  // if neither checkbox is checked
 *  v === undefined
 *  // if both checkboxes are checked
 *  v == ['B1', 'B2']
 *
 *  var v = $(':radio').fieldValue();
 *  // if neither radio is checked
 *  v === undefined
 *  // if first radio is checked
 *  v == ['C1']
 *
 * The successful argument controls whether or not the field element must be 'successful'
 * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).
 * The default value of the successful argument is true.  If this value is false the value(s)
 * for each element is returned.
 *
 * Note: This method *always* returns an array.  If no valid value can be determined the
 *	   array will be empty, otherwise it will contain one or more values.
 */
$.fn.fieldValue = function(successful) {
	for (var val=[], i=0, max=this.length; i < max; i++) {
		var el = this[i];
		var v = $.fieldValue(el, successful);
		if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {
			continue;
		}
		v.constructor == Array ? $.merge(val, v) : val.push(v);
	}
	return val;
};

/**
 * Returns the value of the field element.
 */
$.fieldValue = function(el, successful) {
	var n = el.name, t = el.type, tag = el.tagName.toLowerCase();
	if (successful === undefined) {
		successful = true;
	}

	if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||
		(t == 'checkbox' || t == 'radio') && !el.checked ||
		(t == 'submit' || t == 'image') && el.form && el.form.clk != el ||
		tag == 'select' && el.selectedIndex == -1)) {
			return null;
	}

	if (tag == 'select') {
		var index = el.selectedIndex;
		if (index < 0) {
			return null;
		}
		var a = [], ops = el.options;
		var one = (t == 'select-one');
		var max = (one ? index+1 : ops.length);
		for(var i=(one ? index : 0); i < max; i++) {
			var op = ops[i];
			if (op.selected) {
				var v = op.value;
				if (!v) { // extra pain for IE...
					v = (op.attributes && op.attributes['value'] && !(op.attributes['value'].specified)) ? op.text : op.value;
				}
				if (one) {
					return v;
				}
				a.push(v);
			}
		}
		return a;
	}
	return $(el).val();
};

/**
 * Clears the form data.  Takes the following actions on the form's input fields:
 *  - input text fields will have their 'value' property set to the empty string
 *  - select elements will have their 'selectedIndex' property set to -1
 *  - checkbox and radio inputs will have their 'checked' property set to false
 *  - inputs of type submit, button, reset, and hidden will *not* be effected
 *  - button elements will *not* be effected
 */
$.fn.clearForm = function(includeHidden) {
	return this.each(function() {
		$('input,select,textarea', this).clearFields(includeHidden);
	});
};

/**
 * Clears the selected form elements.
 */
$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {
	var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list
	return this.each(function() {
		var t = this.type, tag = this.tagName.toLowerCase();
		if (re.test(t) || tag == 'textarea' || (includeHidden && /hidden/.test(t)) ) {
			this.value = '';
		}
		else if (t == 'checkbox' || t == 'radio') {
			this.checked = false;
		}
		else if (tag == 'select') {
			this.selectedIndex = -1;
		}
	});
};

/**
 * Resets the form data.  Causes all form elements to be reset to their original value.
 */
$.fn.resetForm = function() {
	return this.each(function() {
		// guard against an input with the name of 'reset'
		// note that IE reports the reset function as an 'object'
		if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {
			this.reset();
		}
	});
};

/**
 * Enables or disables any matching elements.
 */
$.fn.enable = function(b) {
	if (b === undefined) {
		b = true;
	}
	return this.each(function() {
		this.disabled = !b;
	});
};

/**
 * Checks/unchecks any matching checkboxes or radio buttons and
 * selects/deselects and matching option elements.
 */
$.fn.selected = function(select) {
	if (select === undefined) {
		select = true;
	}
	return this.each(function() {
		var t = this.type;
		if (t == 'checkbox' || t == 'radio') {
			this.checked = select;
		}
		else if (this.tagName.toLowerCase() == 'option') {
			var $sel = $(this).parent('select');
			if (select && $sel[0] && $sel[0].type == 'select-one') {
				// deselect all other options
				$sel.find('option').selected(false);
			}
			this.selected = select;
		}
	});
};

// expose debug var
$.fn.ajaxSubmit.debug = false;

// helper fn for console logging
function log() {
	if (!$.fn.ajaxSubmit.debug) 
		return;
	var msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');
	if (window.console && window.console.log) {
		window.console.log(msg);
	}
	else if (window.opera && window.opera.postError) {
		window.opera.postError(msg);
	}
};

})(jQuery);
/* Modernizr 2.5.2 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-touch-mq-cssclasses-addtest-teststyles-prefixes-ie8compat-load
 */
;window.Modernizr=function(a,b,c){function x(a){j.cssText=a}function y(a,b){return x(m.join(a+";")+(b||""))}function z(a,b){return typeof a===b}function A(a,b){return!!~(""+a).indexOf(b)}function B(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:z(f,"function")?f.bind(d||b):f}return!1}var d="2.5.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n={},o={},p={},q=[],r=q.slice,s,t=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["&#173;","<style>",a,"</style>"].join(""),k.id=h,m.innerHTML+=f,m.appendChild(k),l||g.appendChild(m),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},u=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return t("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},v={}.hasOwnProperty,w;!z(v,"undefined")&&!z(v.call,"undefined")?w=function(a,b){return v.call(a,b)}:w=function(a,b){return b in a&&z(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=r.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(r.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(r.call(arguments)))};return e});var C=function(c,d){var f=c.join(""),g=d.length;t(f,function(c,d){var f=b.styleSheets[b.styleSheets.length-1],h=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"",i=c.childNodes,j={};while(g--)j[i[g].id]=i[g];e.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch||(j.touch&&j.touch.offsetTop)===9},g,d)}([,["@media (",m.join("touch-enabled),("),h,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);n.touch=function(){return e.touch};for(var D in n)w(n,D)&&(s=D.toLowerCase(),e[s]=n[D](),q.push((e[s]?"":"no-")+s));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)w(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,g.className+=" "+(b?"":"no-")+a,e[a]=b}return e},x(""),i=k=null,e._version=d,e._prefixes=m,e.mq=u,e.testStyles=t,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+q.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=!!b.attachEvent,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("ie8compat",function(){return!window.addEventListener&&document.documentMode&&document.documentMode===7});/* Foundation v2.2.1 http://foundation.zurb.com */
(function(a){a("a[data-reveal-id]").live("click",function(c){c.preventDefault();var b=a(this).attr("data-reveal-id");a("#"+b).reveal(a(this).data())});a.fn.reveal=function(b){var c={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:true,dismissModalClass:"close-reveal-modal",open:a.noop,opened:a.noop,close:a.noop,closed:a.noop};b=a.extend({},c,b);return this.each(function(){var m=a(this),g=parseInt(m.css("top"),10),i=m.height()+g,h=false,e=a(".reveal-modal-bg"),d;if(e.length===0){e=a('<div class="reveal-modal-bg" />').insertAfter(m);e.fadeTo("fast",0.8)}function j(){h=false}function n(){h=true}function k(){if(!h){n();if(b.animation==="fadeAndPop"){m.css({top:a(document).scrollTop()-i,opacity:0,visibility:"visible"});e.fadeIn(b.animationSpeed/2);m.delay(b.animationSpeed/2).animate({top:a(document).scrollTop()+g+"px",opacity:1},b.animationSpeed,function(){m.trigger("reveal:opened")})}if(b.animation==="fade"){m.css({opacity:0,visibility:"visible",top:a(document).scrollTop()+g});e.fadeIn(b.animationSpeed/2);m.delay(b.animationSpeed/2).animate({opacity:1},b.animationSpeed,function(){m.trigger("reveal:opened")})}if(b.animation==="none"){m.css({visibility:"visible",top:a(document).scrollTop()+g});e.css({display:"block"});m.trigger("reveal:opened")}}}m.bind("reveal:open.reveal",k);function f(){if(!h){n();if(b.animation==="fadeAndPop"){m.animate({top:a(document).scrollTop()-i+"px",opacity:0},b.animationSpeed/2,function(){m.css({top:g,opacity:1,visibility:"hidden"})});e.delay(b.animationSpeed).fadeOut(b.animationSpeed,function(){m.trigger("reveal:closed")})}if(b.animation==="fade"){m.animate({opacity:0},b.animationSpeed,function(){m.css({opacity:1,visibility:"hidden",top:g})});e.delay(b.animationSpeed).fadeOut(b.animationSpeed,function(){m.trigger("reveal:closed")})}if(b.animation==="none"){m.css({visibility:"hidden",top:g});e.css({display:"none"});m.trigger("reveal:closed")}}}function l(){m.unbind(".reveal");e.unbind(".reveal");a("."+b.dismissModalClass).unbind(".reveal");a("body").unbind(".reveal")}m.bind("reveal:close.reveal",f);m.bind("reveal:opened.reveal reveal:closed.reveal",j);m.bind("reveal:closed.reveal",l);m.bind("reveal:open.reveal",b.open);m.bind("reveal:opened.reveal",b.opened);m.bind("reveal:close.reveal",b.close);m.bind("reveal:closed.reveal",b.closed);m.trigger("reveal:open");d=a("."+b.dismissModalClass).bind("click.reveal",function(){m.trigger("reveal:close")});if(b.closeOnBackgroundClick){e.css({cursor:"pointer"});e.bind("click.reveal",function(){m.trigger("reveal:close")})}a("body").bind("keyup.reveal",function(o){if(o.which===27){m.trigger("reveal:close")}})})}}(jQuery));(function(b){b.fn.findFirstImage=function(){return this.first().find("img").andSelf().filter("img").first()};var a={defaults:{animation:"horizontal-push",animationSpeed:600,timer:true,advanceSpeed:4000,pauseOnHover:false,startClockOnMouseOut:false,startClockOnMouseOutAfter:1000,directionalNav:true,directionalNavRightText:"Right",directionalNavLeftText:"Left",captions:true,captionAnimation:"fade",captionAnimationSpeed:600,resetTimerOnClick:false,bullets:false,bulletThumbs:false,bulletThumbLocation:"",afterSlideChange:b.noop,afterLoadComplete:b.noop,fluid:true,centerBullets:true},activeSlide:0,numberSlides:0,orbitWidth:null,orbitHeight:null,locked:null,timerRunning:null,degrees:0,wrapperHTML:'<div class="orbit-wrapper" />',timerHTML:'<div class="timer"><span class="mask"><span class="rotator"></span></span><span class="pause"></span></div>',captionHTML:'<div class="orbit-caption"></div>',directionalNavHTML:'<div class="slider-nav"><span class="right"></span><span class="left"></span></div>',bulletHTML:'<ul class="orbit-bullets"></ul>',init:function(f,e){var c,g=0,d=this;this.clickTimer=b.proxy(this.clickTimer,this);this.addBullet=b.proxy(this.addBullet,this);this.resetAndUnlock=b.proxy(this.resetAndUnlock,this);this.stopClock=b.proxy(this.stopClock,this);this.startTimerAfterMouseLeave=b.proxy(this.startTimerAfterMouseLeave,this);this.clearClockMouseLeaveTimer=b.proxy(this.clearClockMouseLeaveTimer,this);this.rotateTimer=b.proxy(this.rotateTimer,this);this.options=b.extend({},this.defaults,e);if(this.options.timer==="false"){this.options.timer=false}if(this.options.captions==="false"){this.options.captions=false}if(this.options.directionalNav==="false"){this.options.directionalNav=false}this.$element=b(f);this.$wrapper=this.$element.wrap(this.wrapperHTML).parent();this.$slides=this.$element.children("img, a, div");this.$element.bind("orbit.next",function(){d.shift("next")});this.$element.bind("orbit.prev",function(){d.shift("prev")});this.$element.bind("orbit.goto",function(i,h){d.shift(h)});this.$element.bind("orbit.start",function(i,h){d.startClock()});this.$element.bind("orbit.stop",function(i,h){d.stopClock()});c=this.$slides.filter("img");if(c.length===0){this.loaded()}else{c.bind("imageready",function(){g+=1;if(g===c.length){d.loaded()}})}},loaded:function(){this.$element.addClass("orbit").css({width:"1px",height:"1px"});this.$slides.addClass("orbit-slide");this.setDimentionsFromLargestSlide();this.updateOptionsIfOnlyOneSlide();this.setupFirstSlide();if(this.options.timer){this.setupTimer();this.startClock()}if(this.options.captions){this.setupCaptions()}if(this.options.directionalNav){this.setupDirectionalNav()}if(this.options.bullets){this.setupBulletNav();this.setActiveBullet()}this.options.afterLoadComplete.call(this)},currentSlide:function(){return this.$slides.eq(this.activeSlide)},setDimentionsFromLargestSlide:function(){var d=this,c;d.$element.add(d.$wrapper).width(this.$slides.first().width());d.$element.add(d.$wrapper).height(this.$slides.first().height());d.orbitWidth=this.$slides.first().width();d.orbitHeight=this.$slides.first().height();c=this.$slides.first().findFirstImage().clone();this.$slides.each(function(){var e=b(this),g=e.width(),f=e.height();if(g>d.$element.width()){d.$element.add(d.$wrapper).width(g);d.orbitWidth=d.$element.width()}if(f>d.$element.height()){d.$element.add(d.$wrapper).height(f);d.orbitHeight=d.$element.height();c=b(this).findFirstImage().clone()}d.numberSlides+=1});if(this.options.fluid){if(typeof this.options.fluid==="string"){c=b('<img src="http://placehold.it/'+this.options.fluid+'" />')}d.$element.prepend(c);c.addClass("fluid-placeholder");d.$element.add(d.$wrapper).css({width:"inherit"});d.$element.add(d.$wrapper).css({height:"inherit"});b(window).bind("resize",function(){d.orbitWidth=d.$element.width();d.orbitHeight=d.$element.height()})}},lock:function(){this.locked=true},unlock:function(){this.locked=false},updateOptionsIfOnlyOneSlide:function(){if(this.$slides.length===1){this.options.directionalNav=false;this.options.timer=false;this.options.bullets=false}},setupFirstSlide:function(){var c=this;this.$slides.first().css({"z-index":3}).fadeIn(function(){c.$slides.css({display:"block"})})},startClock:function(){var c=this;if(!this.options.timer){return false}if(this.$timer.is(":hidden")){this.clock=setInterval(function(){c.$element.trigger("orbit.next")},this.options.advanceSpeed)}else{this.timerRunning=true;this.$pause.removeClass("active");this.clock=setInterval(this.rotateTimer,this.options.advanceSpeed/180)}},rotateTimer:function(d){var c="rotate("+this.degrees+"deg)";this.degrees+=2;this.$rotator.css({"-webkit-transform":c,"-moz-transform":c,"-o-transform":c});if(this.degrees>180){this.$rotator.addClass("move");this.$mask.addClass("move")}if(this.degrees>360||d){this.$rotator.removeClass("move");this.$mask.removeClass("move");this.degrees=0;this.$element.trigger("orbit.next")}},stopClock:function(){if(!this.options.timer){return false}else{this.timerRunning=false;clearInterval(this.clock);this.$pause.addClass("active")}},setupTimer:function(){this.$timer=b(this.timerHTML);this.$wrapper.append(this.$timer);this.$rotator=this.$timer.find(".rotator");this.$mask=this.$timer.find(".mask");this.$pause=this.$timer.find(".pause");this.$timer.click(this.clickTimer);if(this.options.startClockOnMouseOut){this.$wrapper.mouseleave(this.startTimerAfterMouseLeave);this.$wrapper.mouseenter(this.clearClockMouseLeaveTimer)}if(this.options.pauseOnHover){this.$wrapper.mouseenter(this.stopClock)}},startTimerAfterMouseLeave:function(){var c=this;this.outTimer=setTimeout(function(){if(!c.timerRunning){c.startClock()}},this.options.startClockOnMouseOutAfter)},clearClockMouseLeaveTimer:function(){clearTimeout(this.outTimer)},clickTimer:function(){if(!this.timerRunning){this.startClock()}else{this.stopClock()}},setupCaptions:function(){this.$caption=b(this.captionHTML);this.$wrapper.append(this.$caption);this.setCaption()},setCaption:function(){var d=this.currentSlide().attr("data-caption"),c;if(!this.options.captions){return false}if(d){c=b(d).html();this.$caption.attr("id",d).html(c);switch(this.options.captionAnimation){case"none":this.$caption.show();break;case"fade":this.$caption.fadeIn(this.options.captionAnimationSpeed);break;case"slideOpen":this.$caption.slideDown(this.options.captionAnimationSpeed);break}}else{switch(this.options.captionAnimation){case"none":this.$caption.hide();break;case"fade":this.$caption.fadeOut(this.options.captionAnimationSpeed);break;case"slideOpen":this.$caption.slideUp(this.options.captionAnimationSpeed);break}}},setupDirectionalNav:function(){var c=this,d=b(this.directionalNavHTML);d.find(".right").html(this.options.directionalNavRightText);d.find(".left").html(this.options.directionalNavLeftText);this.$wrapper.append(d);this.$wrapper.find(".left").click(function(){c.stopClock();if(c.options.resetTimerOnClick){c.rotateTimer(true);c.startClock()}c.$element.trigger("orbit.prev")});this.$wrapper.find(".right").click(function(){c.stopClock();if(c.options.resetTimerOnClick){c.rotateTimer(true);c.startClock()}c.$element.trigger("orbit.next")})},setupBulletNav:function(){this.$bullets=b(this.bulletHTML);this.$wrapper.append(this.$bullets);this.$slides.each(this.addBullet);this.$element.addClass("with-bullets");if(this.options.centerBullets){this.$bullets.css("margin-left",-this.$bullets.width()/2)}},addBullet:function(g,e){var d=g+1,h=b("<li>"+(d)+"</li>"),c,f=this;if(this.options.bulletThumbs){c=b(e).attr("data-thumb");if(c){h.addClass("has-thumb").css({background:"url("+this.options.bulletThumbLocation+c+") no-repeat"})}}this.$bullets.append(h);h.data("index",g);h.click(function(){f.stopClock();if(f.options.resetTimerOnClick){f.rotateTimer(true);f.startClock()}f.$element.trigger("orbit.goto",[h.data("index")])})},setActiveBullet:function(){if(!this.options.bullets){return false}else{this.$bullets.find("li").removeClass("active").eq(this.activeSlide).addClass("active")}},resetAndUnlock:function(){this.$slides.eq(this.prevActiveSlide).css({"z-index":1});this.unlock();this.options.afterSlideChange.call(this,this.$slides.eq(this.prevActiveSlide),this.$slides.eq(this.activeSlide))},shift:function(d){var c=d;this.prevActiveSlide=this.activeSlide;if(this.prevActiveSlide==c){return false}if(this.$slides.length=="1"){return false}if(!this.locked){this.lock();if(d=="next"){this.activeSlide++;if(this.activeSlide==this.numberSlides){this.activeSlide=0}}else{if(d=="prev"){this.activeSlide--;if(this.activeSlide<0){this.activeSlide=this.numberSlides-1}}else{this.activeSlide=d;if(this.prevActiveSlide<this.activeSlide){c="next"}else{if(this.prevActiveSlide>this.activeSlide){c="prev"}}}}this.setActiveBullet();this.$slides.eq(this.prevActiveSlide).css({"z-index":2});if(this.options.animation=="fade"){this.$slides.eq(this.activeSlide).css({opacity:0,"z-index":3}).animate({opacity:1},this.options.animationSpeed,this.resetAndUnlock)}if(this.options.animation=="horizontal-slide"){if(c=="next"){this.$slides.eq(this.activeSlide).css({left:this.orbitWidth,"z-index":3}).animate({left:0},this.options.animationSpeed,this.resetAndUnlock)}if(c=="prev"){this.$slides.eq(this.activeSlide).css({left:-this.orbitWidth,"z-index":3}).animate({left:0},this.options.animationSpeed,this.resetAndUnlock)}}if(this.options.animation=="vertical-slide"){if(c=="prev"){this.$slides.eq(this.activeSlide).css({top:this.orbitHeight,"z-index":3}).animate({top:0},this.options.animationSpeed,this.resetAndUnlock)}if(c=="next"){this.$slides.eq(this.activeSlide).css({top:-this.orbitHeight,"z-index":3}).animate({top:0},this.options.animationSpeed,this.resetAndUnlock)}}if(this.options.animation=="horizontal-push"){if(c=="next"){this.$slides.eq(this.activeSlide).css({left:this.orbitWidth,"z-index":3}).animate({left:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).animate({left:-this.orbitWidth},this.options.animationSpeed)}if(c=="prev"){this.$slides.eq(this.activeSlide).css({left:-this.orbitWidth,"z-index":3}).animate({left:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).animate({left:this.orbitWidth},this.options.animationSpeed)}}if(this.options.animation=="vertical-push"){if(c=="next"){this.$slides.eq(this.activeSlide).css({top:-this.orbitHeight,"z-index":3}).animate({top:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).animate({top:this.orbitHeight},this.options.animationSpeed)}if(c=="prev"){this.$slides.eq(this.activeSlide).css({top:this.orbitHeight,"z-index":3}).animate({top:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).animate({top:-this.orbitHeight},this.options.animationSpeed)}}this.setCaption()}}};b.fn.orbit=function(c){return this.each(function(){var d=b.extend({},a);d.init(this,c)})}})(jQuery);
/*
 * jQuery imageready Plugin
 * http://www.zurb.com/playground/
 *
 * Copyright 2011, ZURB
 * Released under the MIT License
 */
(function(c){var b={};c.event.special.imageready={setup:function(f,e,d){b=f||b},add:function(d){var e=c(this),f;if(this.nodeType===1&&this.tagName.toLowerCase()==="img"&&this.src!==""){if(b.forceLoad){f=e.attr("src");e.attr("src","");a(this,d.handler);e.attr("src",f)}else{if(this.complete||this.readyState===4){d.handler.apply(this,arguments)}else{a(this,d.handler)}}}},teardown:function(d){c(this).unbind(".imageready")}};function a(d,f){var e=c(d);e.bind("load.imageready",function(){f.apply(d,arguments);e.unbind("load.imageready")})}}(jQuery));jQuery.foundation=jQuery.foundation||{};jQuery.foundation.customForms=jQuery.foundation.customForms||{};jQuery(document).ready(function(c){function b(d){c("form.custom input:"+d).each(function(){var f=c(this).hide(),e=f.next("span.custom."+d);if(e.length===0){e=c('<span class="custom '+d+'"></span>').insertAfter(f)}e.toggleClass("checked",f.is(":checked"));e.toggleClass("disabled",f.is(":disabled"))})}function a(f){var g=c(f),i=g.next("div.custom.dropdown"),d=g.find("option"),e=0,h;if(g.hasClass("no-custom")){return}if(i.length===0){$customSelectSize="";if(c(f).hasClass("small")){$customSelectSize="small"}else{if(c(f).hasClass("medium")){$customSelectSize="medium"}else{if(c(f).hasClass("large")){$customSelectSize="large"}else{if(c(f).hasClass("expand")){$customSelectSize="expand"}}}}i=c('<div class="custom dropdown '+$customSelectSize+'"><a href="#" class="selector"></a><ul></ul></div>"');d.each(function(){h=c("<li>"+c(this).html()+"</li>");i.find("ul").append(h)});i.prepend('<a href="#" class="current">'+d.first().html()+"</a>");g.after(i);g.hide()}else{i.find("ul").html("");d.each(function(){h=c("<li>"+c(this).html()+"</li>");i.find("ul").append(h)})}i.toggleClass("disabled",g.is(":disabled"));d.each(function(j){if(this.selected){i.find("li").eq(j).addClass("selected");i.find(".current").html(c(this).html())}});i.css("width","inherit");i.find("ul").css("width","inherit");i.find("li").each(function(){i.addClass("open");if(c(this).outerWidth()>e){e=c(this).outerWidth()}i.removeClass("open")});if(!i.is(".small, .medium, .large, .expand")){i.css("width",e+18+"px");i.find("ul").css("width",e+16+"px")}}c.foundation.customForms.appendCustomMarkup=function(){b("checkbox");b("radio");c("form.custom select").each(function(){a(this)})};c.foundation.customForms.appendCustomMarkup()});(function(c){function b(e){var f=0,g=e.next();$options=e.find("option");g.find("ul").html("");$options.each(function(){$li=c("<li>"+c(this).html()+"</li>");g.find("ul").append($li)});$options.each(function(h){if(this.selected){g.find("li").eq(h).addClass("selected");g.find(".current").html(c(this).html())}});g.removeAttr("style").find("ul").removeAttr("style");g.find("li").each(function(){g.addClass("open");if(c(this).outerWidth()>f){f=c(this).outerWidth()}g.removeClass("open")});g.css("width",f+18+"px");g.find("ul").css("width",f+16+"px")}function a(e){var g=e.prev(),f=g[0];if(false==g.is(":disabled")){f.checked=((f.checked)?false:true);e.toggleClass("checked");g.trigger("change")}}function d(e){var g=e.prev(),f=g[0];if(false==g.is(":disabled")){c('input:radio[name="'+g.attr("name")+'"]').each(function(){c(this).next().removeClass("checked")});f.checked=((f.checked)?false:true);e.toggleClass("checked");g.trigger("change")}}c("form.custom span.custom.checkbox").live("click",function(e){e.preventDefault();e.stopPropagation();a(c(this))});c("form.custom span.custom.radio").live("click",function(e){e.preventDefault();e.stopPropagation();d(c(this))});c("form.custom select").live("change",function(e){b(c(this))});c("form.custom label").live("click",function(f){var e=c("#"+c(this).attr("for")),h,g;if(e.length!==0){if(e.attr("type")==="checkbox"){f.preventDefault();h=c(this).find("span.custom.checkbox");a(h)}else{if(e.attr("type")==="radio"){f.preventDefault();g=c(this).find("span.custom.radio");d(g)}}}});c("form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector").live("click",function(f){var h=c(this),g=h.closest("div.custom.dropdown"),e=g.prev();f.preventDefault();if(false==e.is(":disabled")){g.toggleClass("open");if(g.hasClass("open")){c(document).bind("click.customdropdown",function(i){g.removeClass("open");c(document).unbind(".customdropdown")})}else{c(document).unbind(".customdropdown")}return false}});c("form.custom div.custom.dropdown li").live("click",function(h){var i=c(this),f=i.closest("div.custom.dropdown"),g=f.prev(),e=0;h.preventDefault();h.stopPropagation();i.closest("ul").find("li").removeClass("selected");i.addClass("selected");f.removeClass("open").find("a.current").html(i.html());i.closest("ul").find("li").each(function(j){if(i[0]==this){e=j}});g[0].selectedIndex=e;g.trigger("change")})})(jQuery);
/* http://mths.be/placeholder v1.8.7 by @mathias */
(function(o,m,r){var t="placeholder" in m.createElement("input"),q="placeholder" in m.createElement("textarea"),l=r.fn,k;if(t&&q){k=l.placeholder=function(){return this};k.input=k.textarea=true}else{k=l.placeholder=function(){return this.filter((t?"textarea":":input")+"[placeholder]").not(".placeholder").bind("focus.placeholder",s).bind("blur.placeholder",p).trigger("blur.placeholder").end()};k.input=t;k.textarea=q;r(function(){r(m).delegate("form","submit.placeholder",function(){var a=r(".placeholder",this).each(s);setTimeout(function(){a.each(p)},10)})});r(o).bind("unload.placeholder",function(){r(".placeholder").val("")})}function n(b){var c={},a=/^jQuery\d+$/;r.each(b.attributes,function(d,e){if(e.specified&&!a.test(e.name)){c[e.name]=e.value}});return c}function s(){var a=r(this);if(a.val()===a.attr("placeholder")&&a.hasClass("placeholder")){if(a.data("placeholder-password")){a.hide().next().show().focus().attr("id",a.removeAttr("id").data("placeholder-id"))}else{a.val("").removeClass("placeholder")}}}function p(){var d,e=r(this),c=e,a=this.id;if(e.val()===""){if(e.is(":password")){if(!e.data("placeholder-textinput")){try{d=e.clone().attr({type:"text"})}catch(b){d=r("<input>").attr(r.extend(n(this),{type:"text"}))}d.removeAttr("name").data("placeholder-password",true).data("placeholder-id",a).bind("focus.placeholder",s);e.data("placeholder-textinput",d).data("placeholder-id",a).before(d)}e=e.removeAttr("id").hide().prev().attr("id",a).show()}e.addClass("placeholder").val(e.attr("placeholder"))}else{e.removeClass("placeholder")}}}(this,document,jQuery));(function(c){var b={bodyHeight:0,pollInterval:1000};var a={init:function(d){return this.each(function(){var f=c(".has-tip"),e=c(".tooltip"),g=function(j,i){return'<span data-id="'+j+'" class="tooltip">'+i+'<span class="nub"></span></span>'},h=setInterval(a.isDomResized,b.pollInterval);if(e.length<1){f.each(function(k){var n=c(this),o="foundationTooltip"+k,l=n.attr("title"),j=n.attr("class");n.data("id",o);var m=c(g(o,l));m.addClass(j).removeClass("has-tip").appendTo("body");if(Modernizr.touch){m.append('<span class="tap-to-close">tap to close </span>')}a.reposition(n,m,j);m.fadeOut(150)})}c(window).resize(function(){var i=c(".tooltip");i.each(function(){var j=c(this).data();target=f=c(".has-tip"),tip=c(this),classes=tip.attr("class");f.each(function(){(c(this).data().id==j.id)?target=c(this):target=target});a.reposition(target,tip,classes)})});if(Modernizr.touch){c(".tooltip").live("click touchstart touchend",function(i){i.preventDefault();c(this).fadeOut(150)});f.live("click touchstart touchend",function(i){i.preventDefault();c(".tooltip").hide();c("span[data-id="+c(this).data("id")+"].tooltip").fadeIn(150);f.attr("title","")})}else{f.hover(function(){c("span[data-id="+c(this).data("id")+"].tooltip").fadeIn(150);f.attr("title","")},function(){c("span[data-id="+c(this).data("id")+"].tooltip").fadeOut(150)})}})},reposition:function(g,j,e){var d=g.data("width"),k=j.children(".nub"),h=k.outerHeight(),f=k.outerWidth();function i(n,q,o,m,p){n.css({top:q,bottom:m,left:p,right:o})}j.css({top:(g.offset().top+g.outerHeight()+10),left:g.offset().left,width:d});i(k,-h,"auto","auto",10);if(c(window).width()<767){var l=g.parents(".row");j.width(l.outerWidth()-20).css("left",l.offset().left).addClass("tip-override");i(k,-h,"auto","auto",g.offset().left)}else{if(e.indexOf("tip-top")>-1){j.css({top:g.offset().top-j.outerHeight()-h,left:g.offset().left,width:d}).removeClass("tip-override");i(k,"auto","auto",-h,"auto")}else{if(e.indexOf("tip-left")>-1){j.css({top:g.offset().top+(g.outerHeight()/2)-h,left:g.offset().left-j.outerWidth()-10,width:d}).removeClass("tip-override");i(k,(j.outerHeight()/2)-(h/2),-h,"auto","auto")}else{if(e.indexOf("tip-right")>-1){j.css({top:g.offset().top+(g.outerHeight()/2)-h,left:g.offset().left+g.outerWidth()+10,width:d}).removeClass("tip-override");i(k,(j.outerHeight()/2)-(h/2),"auto","auto",-h)}}}}},isDomResized:function(){$body=c("body");if(b.bodyHeight!=$body.height()){b.bodyHeight=$body.height();c(window).trigger("resize")}}};c.fn.tooltips=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{c.error("Method "+d+" does not exist on jQuery.tooltips")}}}})(jQuery);
/***
@title:
Fixed Center

@version:
1.3

@author:
David Tang

@date:
2010-12-06 - performance issues update
2010-06-27 - updated plugin to use fixed positioning instead of absolute
2010-06-17 - released version 1 of the plugin

@url
www.david-tang.net

@copyright:
2010 David Tang

@requires:
jquery

@does:
This plugin centers an element on the page using fixed positioning and keeps the element centered 
if you scroll horizontally or vertically.

@howto:
jQuery('#my-element').fixedCenter(); would center the element with ID 'my-element' using absolute positioning 

*/
(function(){
	jQuery.fn.fixedCenter = function(){
		return this.each(function(){
			var element = jQuery(this), win = jQuery(window);
			centerElement();
			
			jQuery(window).bind('resize',function(){
				centerElement();
			});

			function centerElement(){
				var elementWidth, elementHeight, windowWidth, windowHeight, X2, Y2;
				elementWidth = element.outerWidth();
				elementHeight = element.outerHeight();
				windowWidth = win.width();
				windowHeight = win.height();	
				X2 = (windowWidth/2 - elementWidth/2) + "px";
				Y2 = (windowHeight/2 - elementHeight/2) + "px";
				jQuery(element).css({
					'left':X2,
					'top':Y2,
					'position':'fixed'
				});						
			} //centerElement function
		});
	}
})();
var dialogHandle;
var MyLife = {
    ajaxUrl: 'ajaxService.do'

};
Array.prototype.find = function(searchStr) {
    var returnArray = false;
    for (i=0; i<this.length; i++) {
        if (typeof(searchStr) == 'function') {
            if (searchStr.test(this[i])) {
                if (!returnArray) { returnArray = [] }
                returnArray.push(i);
            }
        } else {
            if (this[i]===searchStr) {
                if (!returnArray) { returnArray = [] }
                returnArray.push(i);
            }
        }
    }
    return returnArray;
}
$.extend(
    MyLife,
    {
        ajax: function(data, callback, type) {
            /* data can never be null */

            type = type || 'json';

            $.get(this.ajaxUrl, data, callback, type)
        }
    }
);
function closeModal(dialog) {
    $.modal.close();
}

function reloadContactsModuleLeft() {
    $("#homeMyContactsFeed").load("/pages/ajax/ajaxLoader.htm");
    LoadData("/api/contactsAPI.do","","MyContacts","homeMyContactsFeed");
}
function reloadMySearchesModuleLeft() {
    $('#mySearchesList').html("");
    $("#mySearchesViewAll").html("");
    var getRecentsearches= new AjaxRequest("/api/mySearchesAPI.do","searchesLimit=5","POST","LoadRecentSearches");
    getRecentsearches.Execute();
}
function reloadActiveSearches() {
    $('#activeSearchModule').load("/activeSearchModule.do");
}
function breakLongStrings(selector,tag,stringCount) {
    $(selector).each(
        function(index) {
            var objectText =jQuery.trim($(this).html());
            var objectTextArr = objectText.split(" ");
            if((objectText.length > stringCount) && (objectTextArr.length < 2)) {
                var startText = objectText.slice(0,stringCount);
                var endText = objectText.slice(stringCount);
                var newText = startText + tag + endText;
                $(this).html(newText);
            }
            else {
                return;
            }
        }
    )
}
//check if value is alpha characters 
function isAlpha(val){
    var validChars = "abcdefghijklmnopqrstuvwxyz '-";
    var isAlpha = true;
    var testChar = '';

    for (i = 0; i < val.length && isAlpha; i++) {
        testChar = val.toLowerCase().charAt(i);
        if (validChars.indexOf(testChar) == -1) {
            isAlpha = false;
        }
    }
    return isAlpha;
}
function isValidName(val) {
    var valid = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
    var inValid = "1234567890`~!@#$%^&*()=+[{]}\\|;:,<.>?/\""
    var permissible = "'-"
    var ok = "no";
    var temp, beg, end;
    //check if have any valid characters
    for (var i=0; i<val.length; i++) {
        temp = "" + val.substring(i, i+1);
        if (valid.indexOf(temp) != "-1")  {
            ok = "yes";
        }
    }

    //check if have any invalid characters. Only space, apostrophe, and dash are allowed
    for (var i=0; i<val.length; i++) {
        temp = "" + val.substring(i, i+1);
        if (inValid.indexOf(temp) != "-1") {
            ok = "no";
        }
    }

    //not allow permissible characters at the beginning or end
    beg = "" + val.substring(0, 1);
    end = "" + val.substring(val.length-1, val.length);
    if (permissible.indexOf(beg) != "-1" || permissible.indexOf(end) != "-1") {
        ok = "no";
    }

    if (ok == "no") {
        return false;
    } else {
        return true;
    }
}
function ValidateMySearchesFormAndAjax(){

    var errArr=new Array();
    errArr.push(1);
    var flag=true;
    if($('#fn').val()=="" || $('#fn').val()=="First Name" )
    {
        $('#fn').val('').removeClass().addClass("redBorder");
        $('#fnError').html("First name is required").show();
        errArr.push(1);
    }
    else if(!isValidName($('#fn').val())){
        $('#fn').val('').removeClass().addClass("redBorder");
        $('#fnError').html("Please enter a valid First Name").show();
        errArr.push(1);
    }
    else
    {
        $('#fnError').html('').hide();
        $('#fn').removeClass().addClass("greyBorder");
        errArr.pop();
    }

    if($('#ln').val()=="" || $('#ln').val()=="Last Name" )
    {
        $('#ln').val('').removeClass().addClass("redBorder");
        $('#lnError').html("Last name is required").show();
        errArr.push(1);
    }
    else if(!isValidName($('#ln').val())){
        $('#ln').val('').removeClass().addClass("redBorder");
        $('#lnError').html("Please enter a valid Last Name").show();
        errArr.push(1);
    }
    else
    {
        $('#lnError').html('').hide();
        $('#ln').removeClass().addClass("greyBorder");
        errArr.pop();
    }

    if($('#age').val()=="" || $('#age').val()=="Approx. age" )
    {
        $('#age').val('').removeClass().addClass("small").addClass("redBorder");
        $('#ageError').html("Approx. age is required").show();
        errArr.push(1);
    }
    else if(isNaN($('#age').val())){
        $('#age').val('').removeClass().addClass("small").addClass("redBorder");
        $('#ageError').html("Please enter a valid age").show();
        errArr.push(1);
    }
    else if( parseInt($("#age").val()) > 99 ) {
        $('#age').val('').removeClass().addClass("small").addClass("redBorder");
        $('#ageError').html("Age must be<br/>younger than 100").show();
        errArr.push(1);
    }
    else if( parseInt($("#age").val()) < 13 ) {
        $('#age').val('').removeClass().addClass("small").addClass("redBorder");
        $('#ageError').html("The minimum search<br/>age is 13").show();
        errArr.push(1);
    }
    else
    {
        $('#ageError').html('').hide();
        $('#age').removeClass().addClass("small").addClass("greyBorder");
        errArr.push();
    }
    if(errArr.length>0)
        flag=false;

    return flag;
}
function toProperCase(s)
{
    if(s) {
        return s.toLowerCase().replace(/^(.)|\s(.)/g,
            function($1) { return $1.toUpperCase(); });
    }
}
function toTitleCase(s) {
    var c = s.toLowerCase();
    return c.charAt(0).toUpperCase() + c.slice(1);
}
function formatNumberWithComma(nStr) {
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
}
function LoadData(requestUrl, queryP,fnName,sectionId,userObject)
{
    $.ajax({
        type: "Get",
        url: requestUrl,
        data: queryP,
        success: function(data){

            switch (fnName)
            {
                case "WSFY":
                    WSFY(data,sectionId);
                    break;
                case "WVYP":
                    WVYP(data,sectionId);
                    break;
                case "MyContacts":
                    CONTACTS(data,sectionId,userObject);
                    break;
                case "REC":
                    REC(data,sectionId);
                    break;
                case "WGY":
                    WGY(data,sectionId);
                    break;

                default : //alert("Did not match");
            }//end of switch
        }
    });
}
function CONTACTS(data,sectionId,contactObject) {
    $("#"+sectionId).html("");
    myJSONObject = eval('(' + data + ')');
    var contactCount = 0;

    if(myJSONObject.resultList.length > 0) {
        $.each(myJSONObject.resultList, function(i,item){
            RenderJsonContactsData(sectionId,item.group,item.contacts,i,contactObject);
            contactCount = contactCount + item.contacts.length;
        });
        //POPULATE THE TOTAL COUNT
        $("#" + sectionId + "Count").html("(" + contactCount + ")");
        if( (sectionId.indexOf("wsfyFamily") > -1) || (sectionId.indexOf("wsfyContacts") > -1) ) {
            //Initialize the Carousel.
            var parentId = sectionId.split("ListContent")[0];
            var parentModule = parentId.split("wsfy")[1];
            var wsfySliderId = "wsfy" + parentModule + "Slider";
            var wgySliderId = "wgy" + parentModule + "Slider";
            var firstEntryId = $("#" + parentId + "ListContentHiddenData").html();
            if(contactObject != undefined) {
                firstEntryId = contactObject.newEntryId;
                $("#wsfy" + parentModule + "ListContent").scrollTo("li#" + contactObject.newEntryId ,800);
            }
            var firstEntryBookId = jQuery.trim($("#addressBookId").html());
            var queryParams = "entryID=" + firstEntryId + "&bookID=" + firstEntryBookId;
            if(contactObject != undefined) {
                $("#wsfy" + parentModule + "Scrollers").removeClass("defaultCase");
                loadWsfySiteCarousel("/api/wsfyWgyAPI.do?" + queryParams,wsfySliderId,wgySliderId,3,'');
            }
            //SHOW THE CONTENT
            $("#" + sectionId + "-Container").removeAttr("style")
            $("#" + sectionId + "-Container").removeClass("loadModule")
        }
    }
    else {
        //FOR THE WSFY TAB
        if( (sectionId.indexOf("wsfyFamily") > -1) || (sectionId.indexOf("wsfyContacts") > -1) ) {
            //SHOW THE NULL CASE
            $("#" + sectionId + "Loading").css("background","none");
            $("#" + sectionId + "-Container").css("height","133px");
            $("#" + sectionId + "Loading").css("height","133px");
            if( sectionId.indexOf("wsfyFamily") > -1) {
                $("#" + sectionId + "-Container").css("height","185px");
                $("#" + sectionId + "Loading").css("height","185px");
                $("#" + sectionId + "Loading").load("/pages/searchMonitor/modules/searchSpyGender-Null.vm");
            }
            else {
                $("#" + sectionId + "Loading").load("/pages/searchMonitor/modules/" + sectionId + "-Null.htm");
            }
        }
        else {
            //FOR THE LEFT NAV
            $("#myContactsHomeFilterDiv").hide();
            $("#"+sectionId).hide();
            $("#" + sectionId + "Null").show();
        }
    }
}
function WSFY(data,sectionId)
{
    $('#'+sectionId).html("");
    myJSONObject = ( typeof data != 'string' ) ? data : eval('(' + data + ')');
    myJSONObject = myJSONObject.wsfyResult;
    if(myJSONObject.items.length > 0)
    {
        $.each(myJSONObject.items, function(i,item){
            RenderJsonData(sectionId,item,i,'wsfy');
        });
        if(sectionId == "wsfyViewAllResults") {
            resizeThumbs(sectionId,45,45);
        }
        else {
            resizeThumbs(sectionId,80,80);
        }
        var count="#"+sectionId+"Count";
        if(sectionId == "wsfyFeed") {
            var peopleText = " people"
            if(myJSONObject.wsfyCount == 1) {
                peopleText = " person";
                $(count + "Text").html("is");
            }
            $(count).html(myJSONObject.wsfyCount + peopleText);
            if(myJSONObject.accessible == false) {
                if(myJSONObject.wsfyCount > 5) {
                    $("#" + sectionId + "ViewAll").show();
                }
            }
            else {
                if(myJSONObject.wsfyCount > 10) {
                    $("#" + sectionId + "ViewAll").show();
                }
            }
        }
        else {
            $(count).html("("+myJSONObject.wsfyCount+")");
            if(myJSONObject.wsfyCount > 10) {
                $("#" + sectionId + "ViewAll").show();
            }
        }

        //View all Module
        if(sectionId == "wsfyViewAllResults") {
            updatePagination(myJSONObject.items.length,myJSONObject.wsfyCount);
        }
    }
    else
    {
        showNullData(sectionId)
    }
}
function WGY(data,sectionId)
{
    $('#'+sectionId).html("");
    myJSONObject = eval('(' + data + ')');

    if(myJSONObject.wgy.length > 0)
    {
        $.each(myJSONObject.wgy, function(i,item){
            RenderJsonData(sectionId,item,i,'wsfy');
        });
        resizeThumbs(sectionId,80,80);
        var count="#"+sectionId+"Count";
        $(count).html("("+myJSONObject.wsfyCount+")");
        if(myJSONObject.wsfyCount > 10) {
            $("#" + sectionId + "ViewAll").show();
        }
        //View all Module
        if(sectionId == "wsfyViewAllResults") {
            updatePagination(myJSONObject.wgy.length,myJSONObject.wgyCount);
        }
    }
    else
    {
        showNullData(sectionId)
    }
}
function WVYP(data,sectionId)
{
    myJSONObject = eval('(' + data + ')');
    myJSONObject = myJSONObject.wsfyResult;
    var totalCount = myJSONObject.wvmpCount <= myJSONObject.wvypCountFiltered ? myJSONObject.wvmpCount : myJSONObject.wvypCountFiltered;
    $('#'+sectionId).html("");
    if(myJSONObject.items.length > 0)
    {
        $.each(myJSONObject.items, function(i,item){

            RenderJsonData('wsfyViewAllResults',item,i,'wvyp');
        });
        if(sectionId == "wsfyViewAllResults") {
            resizeThumbs(sectionId,45,45);
        }
        else {
            resizeThumbs(sectionId,80,80);
        }

        var count="#"+sectionId+"Count";
        if(sectionId == "wvypFeed") {
            var peopleText = " people"
            if(totalCount == 1) {
                peopleText = " person"
            }
            $(count).html(totalCount + peopleText);
            if(myJSONObject.accessible == false) {
                if(totalCount > 5) {
                    $("#" + sectionId + "ViewAll").show();
                }
            }
            else {
                if(totalCount > 10) {
                    $("#" + sectionId + "ViewAll").show();
                }
            }
        }
        else {
            $(count).html("("+totalCount+")");
        }
        if(totalCount > 10) {
            $("#" + sectionId + "ViewAll").show();
        }
        //View all Module
        if(sectionId == "wsfyViewAllResults") {
            updatePagination(myJSONObject.items.length,totalCount);
        }
    }
    else
    {
        showNullData(sectionId);
        if( $("#wvypHomeHeader").length > 0) {
            $("#wvypHomeHeader").html("View Your Web Profile");
        }
    }
}
function showNullData(sectionId) {
    var parentId = toProperCase(sectionId.split("Feed")[0]);
    $("#home"+parentId).addClass("nullCase");
}
function ShowActiveCount(eId,item,singularValue,pluralValue) {
    if(typeof($('#'+eId)) != "undefined")
    {
        if(item>1 || item == 0 )
            $('#'+eId).html(item+" " + pluralValue)
        else
            $('#'+eId).html(item+" " + singularValue)
    }
}

function REC(data,sectionId)
{
    myJSONObject = eval('(' + data + ')');
    $('#'+sectionId).html("");
    if(myJSONObject.pymk.length > 0)
    {
        $.each(myJSONObject.pymk, function(i,item){

            RenderJsonData(sectionId,item,i,'wsfy');
        });
        resizeThumbs(sectionId,80,80);
        var countId="#"+sectionId+"Count";
        var peopleText = " people"
        if(myJSONObject.pymkCount == 1) {
            peopleText = " person";
            $(countId + "Text").html("is");
        }
        $(countId).html(myJSONObject.pymkCount + peopleText);
        if(myJSONObject.pymkCount > 10) {
            $("#" + sectionId + "ViewAll").show();
        }
    }
    else
    {
        showNullData(sectionId)
    }
}
function RenderJsonContactsData(sectionName,category,contactList,i,contactObject) {
    var liE=CreateContactCategoryModule(sectionName,category,contactList,i,contactObject);
}

function RenderJsonData(sectionName,item,i,serviceType) {
    var liE=CreateUserModule(item,i,sectionName, serviceType);
    var temp="#"+sectionName;
    $(temp).append(liE);
}
function CreateUserModule(item,i,sectionId,serviceType) {
    var tempHref = '',
        isSubjectPremiumWsfy = $('#profile-subject-premium-wsfy').html();
    //APPEND THE PROPER PARAMETER FOR PO
    if(myJSONObject.accessible == false) {
        if(myJSONObject.items) {
            var smType = "wvmp";
            tempHref="/searchMonitor.do?type=" + smType + "&sub=true";
        }
        if(myJSONObject.items || myJSONObject.wgy) {
            //FIGURE OUT IF WE ARE ON THE WSFY FAMILY OR WSFY CONTACTS
            var wsfyModule = "";
            if(sectionId.indexOf("Family") > -1) {
                wsfyModule = "family"
            }
            if(sectionId.indexOf("Contact") > -1) {
                wsfyModule = "contacts"
            }
            //FIGURE OUT IF IT'S WSFY OR WGY
            var smType ="wsfy";
            if ( sectionId.indexOf("wgy") > -1 )
                smType = "wgy";
            else if ( sectionId.indexOf("wvyp") > -1 )
                smType = "wvyp";

            var tempHref="/searchMonitor.do?type=" + smType + "&sub=true";
            if(wsfyModule != "") {
                tempHref="/searchMonitor.do?section=" + wsfyModule + "&type=" + smType + "&sub=true";
            }
            if(item.userId == "-1") {
                tempHref =  "javascript:void(0)";
            }
        }
        if(myJSONObject.pymk) {
            var smType = "pymk";
            tempHref="/displayProfile.do?uid="+item.userId + "&service_type=" + serviceType;
        }

        if ( !isSubjectView && isSubjectPremiumWsfy == 'true' )
            tempHref = '/displayProfile.do?uid=' + item.userId;
        else if ( !isSubjectView && isSubjectPremiumWsfy == 'false' && serviceType == 'wsfy' )
            tempHref = '/subscription.do?dispatch=hometeaser&service_type=wsfy';
        else if ( !isSubjectView && isSubjectPremiumWsfy == 'false' && serviceType == 'wvyp' )
            tempHref = '/displayProfile.do?uid=' + item.userId + '&service_type=wvyp';
    }
    else {
        //IF WE HAVE A NON-ML MEMBER
        if ( typeof item.userId != 'undefined' && item.userId == '-1' )
            tempHref = "javascript:void(0)";
        else
            tempHref="/displayProfile.do?uid="+item.userId + "&service_type=" + serviceType;
    }

//***** create Name Section *****/	 
    //create thumb tag
    var thumb = document.createElement('img');
    var photoNullImage = staticServer + "/images/09/icons/silhouette80.gif";

    if(item.photoUrl == null) {
        $(thumb).attr('src',photoNullImage);
        $(thumb).addClass("defaultThumb");
    }
    else if(item.photoUrl == "") {
        $(thumb).attr('src',photoNullImage);
        $(thumb).addClass("defaultThumb");
    }
    else {
        $(thumb).attr('src',item.photoUrl);
        $(thumb).attr('width','80');
        $(thumb).attr('height','80');
        $(thumb).addClass("thumbResize")
    }

    //create imageLink tag
    var thumblink=document.createElement('a');
    $(thumblink).attr('href',tempHref);
    $(thumblink).attr('title','View full profile');
    if(myJSONObject.accessible == true) {
        if(item.userId == "-1") {
            $(thumblink).addClass("defaultCursor")
            $(thumblink).attr("title", "Non-MyLife Member")
        }
    }

    //append thumb to link
    thumblink.appendChild(thumb);

//***** create Name Section *****/

    //create nameLink
    var personDetails = document.createElement('p'),
        nameAgeCont = document.createElement('span'),
        fullName = "";
    if(item.firstName != null)
        fullName = toProperCase(item.firstName);
    if(item.lastName != "" ) {
        if(item.lastName != null) {
            fullName = fullName + " "+ toProperCase(item.lastName)
        }
    }

    if (fullName==undefined) {
        fullName="MyLife Member"
    }
    fullName = fullName + ", "+item.age;
    if(item.firstName == "" && item.lastName == "" && item.age == "0") {
        fullName = ""
    }

    // Wrap in span for overlay
    if ( sectionId == 'wsfyViewAllResults' || sectionId == 'wvypViewAllResults' ) {
        $(nameAgeCont)
            .text(fullName)
            .attr('title', fullName)
            .addClass('nameAge');
        $(personDetails).append(nameAgeCont);
    }
    else
        $(personDetails).text(fullName+' ');

    $(thumblink).append(personDetails);

    //***** create city Section *****/
    var locationCont=document.createElement('span');
    var city = "";
    var state="";
    if(item.city != null) {
        var city = item.city;
    }
    if((item.state != null) && (item.state!="")) {
        if((item.city != null) && (item.city!="")) {
            state= ", " + item.state;
        }
        else {
            state = item.state;
        }
    }

    //If there's a matchValue field...then it's PYMK
    item.matchValue ?
        $(locationCont).html(item.matchValue) :
        $(locationCont).html(city + state);

    //create city dv
    var cityDv=document.createElement('div');
    $(cityDv).addClass("feedCity");
    if(item.userId == "-1") {
        $(cityLink).attr("title","Non-MyLife Member");
        $(cityDv).addClass("nonMember")
    }

    //append citylink to city div
    $(personDetails).append(locationCont);

    // DATE div only for All Results Popup
    if ( sectionId == 'wsfyViewAllResults' || sectionId == 'wvypViewAllResults' ) {
        var dateDv=document.createElement('span');
        $(dateDv).html(item.searchDate);
        $(dateDv).addClass("feedDate");
        if(item.userId == "-1")
            $(dateDv).addClass("nonMember")
        personDetails.appendChild(dateDv);
    }

    // create Li
    var liElement=document.createElement('li');
    $(liElement).addClass('jcarousel-item-'+(i+1))

    //append everything to li
    liElement.appendChild(thumblink);

    return liElement;
}

function CreateContactCategoryModule(sectionId,category,contactList,i,contactObject)
{
    //CATEGORY
    var obj = $("#" + sectionId);
    var liElement=document.createElement('li');
    $(liElement).addClass("alphaHeader");
    if(i==0) {
        $(liElement).addClass("firstElement");
    }
    $(liElement).html(category);
    $(obj).append(liElement);

    var parentId = sectionId.split("ListContent")[0];

    //LIST
    $.each(contactList, function(j,item){
        var cLi = document.createElement("li");
        var contactName =  item.firstName + " " + item.lastName;
        if(i==0 && j==0) {
            $("#addressBookId").html(item.addressBookId)
        }
        $(cLi).attr("id",item.addressBookEntryId);
        $(cLi).attr("name",item.addressBookId);
        $(cLi).attr("unum",item.usernum);
        $(cLi).addClass("alphaName");
        //For the Family & Contacts module
        if((sectionId.indexOf("wsfyFamily") > -1) || (sectionId.indexOf("wsfyContacts") > -1)) {
            if(contactName.length > 23) {
                contactName = contactName.substring(0,22) + "..."
            }
            //IF WE'RE ADDING A NEW CONTACT...DEFAULT TO IT.
            if(contactObject != undefined ) {
                if(item.addressBookEntryId == contactObject.newEntryId) {
                    var parentModule = parentId.split("wsfy")[1];
                    $(cLi).addClass("on");
                    $("#" + parentId + "ListContentHiddenData").html(item.addressBookEntryId);
                    $("#wsfy" + parentModule + "EntryId").html(item.addressBookEntryId);
                    //UPDATE THE NAME
                    //POPULATE THE NAME FOR WSFY + WGY
                    $("#wsfy" + parentModule + "Scrollers .contactNameDynamic").html(contactName);
                    $("#wgy" + parentModule + "Scrollers .contactNameDynamic").html(contactName);

                }
            }
            else {
                if(i==0 && j==0) {
                    /*
                     var parentModule = parentId.split("wsfy")[1];
                     $(cLi).addClass("on");
                     $("#" + parentId + "ListContentHiddenData").html(item.addressBookEntryId);
                     $("#wsfy" + parentModule + "EntryId").html(item.addressBookEntryId);
                     //UPDATE THE NAME
                     //POPULATE THE NAME FOR WSFY + WGY
                     $("#wsfy" + parentModule + "Scrollers .contactNameDynamic").html(contactName);
                     $("#wgy" + parentModule + "Scrollers .contactNameDynamic").html(contactName);
                     */
                }
            }
        }

        $(cLi).html(contactName)
        $(obj).append(cLi);
    });
}
function updatePagination(objectLength,totalCount) {
    var currentPage = parseInt($("#currentPage").html());
    var paginationCount = 20;
    var start = (paginationCount*(currentPage -1)) + 1;
    var end = (start + objectLength) -1;
    $("#viewAllPaginationCount").html(start + " - " + end);
    $("#viewAllTotalCount").html(totalCount);

    //Hide/Display the next/prev buttons
    if(end == totalCount) {
        $(".wsfyNext").hide();
    }
    if(start == 1) {
        $(".wsfyPrev").hide()
    }
    $(".wsfyViewAllPaginationBtns").show();
    $("#wsfyViewAllResultsLoading").hide();
}
/**************************Carousel******************************/
    //SLIDERS
function WSFYSlider(data,sectionId,scrollVal) {
    $("#" + sectionId).empty();
    myJSONObject = eval('(' + data + ')');
    myJSONObject = myJSONObject.wsfyResult;
    var carouselId = sectionId,
        showCount  = isSubjectView ? 3 : 5,
        totalCount = myJSONObject.wsfyCount;

    //UPDATE THE COUNTS
    printWSFYCounts(carouselId,myJSONObject.wsfyCount);

    // Update Subject View's main box count
    if ( typeof isSubjectView != 'undefined' && isSubjectView )
        updateSubjectMainBox( '#profile-main-boxes-wsfy', totalCount );

    if ( totalCount > 0 ) {
        var max = totalCount > showCount ? showCount : totalCount,
            $targetBlock = $('#'+sectionId).parent();

        if ( isSubjectView && !myJSONObject.subscribed )
            $targetBlock.children('h4').after('<p class="identity_number"><span>' + totalCount + '</span> People Searched for You</p>');

        for ( var i=0; i<max; i++  )
            RenderJsonData( sectionId, myJSONObject.items[i], i, 'wsfy' );

        var isSubjectPremiumWsfy = $('#profile-subject-premium-wsfy').html(),
            url = !isSubjectView ?
                (
                    ( isSubjectPremiumWsfy == 'false' ) ?
                        '/subscription.do?dispatch=hometeaser&service_type=wsfy' :
                        '#'
                    ) :
                (
                    myJSONObject.subscribed ?
                        '/searchMonitor.do?type=wsfy' :
                        '/subscription.do?dispatch=hometeaser&service_type=wsfy'
                    ),
            viewAllResultsLinkClass = ( !isSubjectView && isSubjectPremiumWsfy == 'true' ) ? ' viewAllResultsLink' : '',
            viewAllResultsLinkID    = ( !isSubjectView && isSubjectPremiumWsfy == 'true' ) ? ' id="wsfySliderViewAll"' : '',
            viewMoreLink = '<a href="' + url + '"' + viewAllResultsLinkID + ' class="more' + viewAllResultsLinkClass + '">' + parseInt( totalCount - showCount ) + '<span> more</span></a>',
            notPaidWsfyCtaLink = '<a href="' + url + '" class="action who">FIND OUT WHO</a>',
            html = ( totalCount > showCount ) ?
                (
                    ( isSubjectView && !myJSONObject.subscribed ) ?
                        notPaidWsfyCtaLink :
                        viewMoreLink
                    ) :
                (
                    (
                        ( !isSubjectView && isSubjectPremiumWsfy == 'false' ) ||
                            ( isSubjectView && !myJSONObject.subscribed )
                        ) ?
                        notPaidWsfyCtaLink :
                        ''
                    );

        $targetBlock.append( html );

        //SHOW THE DIV (REMOVE THE LOADMODULE CLASS)
        $("#Content-Slider-" + carouselId).removeClass("loadModule");
    }
    //NULL CASE
    else {
        $("#Content-Slider-" + carouselId).removeClass("loadModule");
        if(carouselId != "wsfySlider") {
            $("#Content-Slider-" + carouselId).addClass("nullCase")
        }
        else {
            $("#wsfySliderNull").show();
        }
    }
}
function WGYSlider(data,sectionId,scrollVal) {
    $("#" + sectionId).empty();
    myJSONObject = eval('(' + data + ')');
    myJSONObject = myJSONObject.wsfyResult;
    var carouselId = sectionId,
        showCount  = isSubjectView ? 3 : 5,
        totalCount = myJSONObject.items.length;

    //UPDATE THE COUNTS
    printWSFYCounts(carouselId,myJSONObject.wgyCount);
    if ( totalCount > 0 ) {
        for ( i=0; i<showCount; i++  ) {
            RenderJsonData( sectionId, myJSONObject.wgy[i], i, 'wsfy' );
        }
        if ( totalCount > showCount )
            $('#'+sectionId).parent().append('<a href="/searchMonitor.do?type=wsfy" class="more">' + parseInt( totalCount - showCount ) + '<span> more</span></a>');

        //SHOW THE DIV (REMOVE THE LOADMODULE CLASS)
        $("#Content-Slider-" + carouselId).removeClass("loadModule");
    }
    //NULL CASE
    else {
        $("#Content-Slider-" + carouselId).removeClass("loadModule");
        if(carouselId != "wgySlider") {
            $("#Content-Slider-" + carouselId).addClass("nullCase")
        }
        else {
            $("#wgySliderNull").show();
        }
    }
}
function WVMPSlider(data,sectionId,scrollVal) {
    $("#" + sectionId).empty();
    //Subject View
    var isSubjectView = false;
    if($("#profile-subject-view").html()== "true")
        isSubjectView = true;

    myJSONObject = eval('(' + data + ')');
    var isPremium = myJSONObject.accessible;
    myJSONObject = myJSONObject.wsfyResult;
    var carouselId = sectionId,
        showCount  = isSubjectView ? 3 : 5,
        totalCount = myJSONObject.wvmpCount <= myJSONObject.wvypCountFiltered ? myJSONObject.wvmpCount : myJSONObject.wvypCountFiltered;

    // Update Subject View's main box count
    if ( typeof isSubjectView != 'undefined' && isSubjectView )
        updateSubjectMainBox( '#profile-main-boxes-wvyp', totalCount );

    if ( totalCount > 0 ) {
        var max = totalCount > showCount ? showCount : totalCount;
        for ( i=0; i<max; i++  )
            RenderJsonData( sectionId, myJSONObject.items[i], i, 'wvyp' );

        var url = !isSubjectView ?
                (typeof(pageIsPublicRecordRemover) != "undefined" ? '/searchMonitor.do?type=wvmp' : '#') :
                myJSONObject.subscribed ?
                    '/searchMonitor.do?type=wvmp' :
                    '/subscription.do?dispatch=hometeaser&service_type=wvmp',
            html = '',
            viewAllResultsLinkClass = !isSubjectView ?
                (typeof(pageIsPublicRecordRemover) != "undefined" ? '' : ' viewAllResultsLink') : '',
            viewAllResultsLinkID    = !isSubjectView ? ' id="wvypSliderViewAll"' : '';

        if ( totalCount > showCount )
            html = '<a href="' + url + '"' + viewAllResultsLinkID + ' class="more' + viewAllResultsLinkClass + '">' + parseInt( totalCount - showCount ) + '<span> more</span></a>';
        else if ( isSubjectView )
            html = '<a href="' + url + '" class="action who">FIND OUT WHO</a>';

        $('#'+sectionId).parent().append( html );

        var wvypCount = myJSONObject.wvmpCount;

        //Print the WVYP Count + Name
        var userCase = "this";
        if(isSubjectView)
            userCase = "your";
        var pvCountText = "<b>" + wvypCount + " " + wordTense(wvypCount,"person","people") + "</b> viewed " + userCase + " profile.";
        if(isSubjectView) {
            pvCountText += "<a href='/searchMonitor.do?type=wvmp' class='wsfy-view-all' id='wvypSliderViewAll'>View all results</a>";
        }
        else {
            pvCountText += "<a href='javascript:void(0)' class='wsfy-view-all viewAllResultsLink' id='wvypSliderViewAll'>View all results</a>";

        }
        $("#profile-wvyp-counts").html(pvCountText);
        $("#profile-activity-wvmp").html(wvypCount);

        //Show the Header
        $("#wvyp-heading-text").show();
        $("#wvypSliderNull").remove();

        //if(myJSONObject.accessible == true) {
        if(isPremium == true) {
            if(myJSONObject.wvmpCount > 20) {
                $("#" + carouselId + "ViewAllText").show();
            }
        }
        else {
            $("#" + carouselId + "ViewAllText").css("padding-top","0px");
            $("#" + carouselId + "ViewAllTextLink").addClass("red");
            $("#" + carouselId + "ViewAllTextLink").removeClass("viewAllResultsLink");
            $("#" + carouselId + "ViewAllTextLink").addClass("viewAllResultsLinkFree");
            $("#" + carouselId + "ViewAllTextLink").html("Upgrade now to see names, photos, and more!");
            $("#" + carouselId + "ViewAllText").show();
        }
    }
    //NULL CASE
    else {
        $("#tr-wvyp").remove();
        $("#wvyp-heading-text").show();
        $("#profile-wvyp-counts").remove();
        $("#slider-wvyp").addClass("wvyp-null-premium");
        $(".wvypSliderNull").show();

        $("#wvypSliderViewAllText").remove();
        $("#wvypSliderViewAllTitle").remove();
        $("#wvypSliderContainer").remove();
    }
    $(".profile-activity-counts").delay(1000).fadeIn();
}

/*
 * Function to update Subject View's main box count (Identity Monitor sections' counts)
 */

function updateSubjectMainBox( selector, count ) {
    if ( typeof count == 'undefined' || count == 'undefined' )
        count = 0;

    var $target = $(selector),
        section = selector.substr( selector.lastIndexOf( '-' ) + 1 ),
        targetClass = ( count != 0 ) ? 'results' : 'no-results',
        isWsfyPremium = $('#profile-subject-premium-wsfy').html(),
        isPrrPremium = $('#profile-subject-premium-prr').html(),
        isInvalidZip = $('#profile-subject-premium-prr-invalid-zip').html(),
        goToUrl = [];

    goToUrl['wsfy'] = ( isWsfyPremium == 'false' ) ?
        '/subscription.do?dispatch=mainSubject&service_type=wsfy' :
        '/searchMonitor.do?type=wsfy',
        goToUrl['wvyp'] = ( isWsfyPremium == 'false' ) ?
            '/subscription.do?dispatch=mainSubject&service_type=wvyp' :
            '/searchMonitor.do?type=wvmp',
        goToUrl['prr'] = ( isPrrPremium == 'false' ) ?
            (
                ( isInvalidZip == 'false' ) ?
                    '/ssSubscription.do' :
                    '/wsfy.view?type=prremover'
                ) :
            '/searchMonitor.do?type=prremover';

    $target.children('.ajaxLoader').remove();
    $target
        .append('<a href="' + goToUrl[ section ] + '" class="identity-bubble">' + count + '</a>')
        .addClass( targetClass );

    if ( $.browser.msie && parseInt( $.browser.version, 10 ) < 10 ) {
        var $targetBubbleKeyFrames = $(selector).children('.identity-bubble');

        // Emulate keyframes animation for IE < 10
        $targetBubbleKeyFrames.animate({
            marginTop: '61px', marginRight: '34px', marginBottom: '0', marginLeft: '34px', width: '24px', height: '24px', fontSize: '10px', lineHeight: '24px'
        }, 0, function() {
            $(this).animate({
                marginTop: '43px', marginRight: '16px', marginBottom: '0', marginLeft: '16px', width: '60px', height: '60px', fontSize: '20px', lineHeight: '60px'
            }, 1000, function() {});
        });

        // Emulate scale transition on hover for IE < 10
        $targetBubbleKeyFrames.hover(function(){
            $(this).stop().animate({ marginTop: '42px', marginRight: '15px', marginBottom: '0', marginLeft: '14px', width: '63px', height: '63px', fontSize: '21px', lineHeight: '63px' }, 100);
        }, function() {
            $(this).stop().animate({ marginTop: '43px', marginRight: '16px', marginBottom: '0', marginLeft: '16px', width: '60px', height: '60px', fontSize: '20px', lineHeight: '60px' }, 100);
        });
    }
}

function printWSFYCounts(divId,count) {
    var countSpan="#"+divId + "Count";
    var peopleSpan = "#"+divId+"People";
    var peopleCase = "people";

    if(typeof($(countSpan) != "undefined")) {
        $(countSpan).html(count);
    }

    if(count == 1) {
        peopleCase = "person"
    }
    if(typeof($(peopleSpan) != "undefined")) {
        $(peopleSpan).html(peopleCase);
    }
}
function mycarousel_itemFirstOutCallback(carousel, item, idx, state) {
    var s = carousel.size();
    var carouselId = carousel.options.id;
    if(carousel.options.isPremium == true) {
        if(state == "prev") {
            $("#" + carouselId + "ViewAll").hide()
        }
        if(carousel.options.totalCount > s) {
            if(state == "next") {
                if(idx == s) {
                    $("#" + carouselId + "ViewAll").show()
                }
            }
        }
    }
}
function initCarousel(carouselId,scrollVal,totalCount,carouselSize,isPremium) {
    var paginationResults = 20;
    var pageSize = parseInt(Math.round(totalCount/paginationResults));

    $('#'+ carouselId).jcarousel({
        id:carouselId,
        totalCount:totalCount,
        isPremium:isPremium,
        scroll:scrollVal,
        visible:scrollVal,
        start:1,
        size:carouselSize,
        itemLastInCallback:mycarousel_itemFirstOutCallback
    });
    //DISPLAY THE VIEW ALL LINK
    if(isPremium == true) {
        if(totalCount > paginationResults) {
            $("#" + carouselId + "ViewAllText").show();
        }
    }
    else {
        //FOR FREE USERS, ONLY SHOW THE CTA FOR THE WSFY MODULE.
        if(carouselId.indexOf("wsfy") > -1) {
            $("#" + carouselId + "ViewAllTextLink").addClass("red");
            $("#" + carouselId + "ViewAllTextLink").removeClass("viewAllResultsLink");
            $("#" + carouselId + "ViewAllTextLink").addClass("viewAllResultsLinkFree");
            $("#" + carouselId + "ViewAllTextLink").html("Upgrade now to see names, photos, and more!");
            $("#" + carouselId + "ViewAllText").show();
        }
        else {
            $("#" + carouselId + "ViewAllText").hide();
        }
    }
    //POPULATE THE PAGE SIZE
    $("#" + carouselId + "PageSize").html(pageSize)
}
function loadWsfySiteCarousel(apiUrl,wsfyId,wgyId,scrollVal,queryParam) {
    $.ajax({
        type: "Get",
        url: apiUrl,
        data: queryParam,
        success: function(data){
            var thisJSONObject = eval('(' + data + ')');
            thisJSONObject = thisJSONObject.wsfyResult;
            //WSFY Slider
            WSFYSlider(data,wsfyId,scrollVal);

            //WGY Slider
            /*WGYSlider(data,wgyId)
             if(wgyId == "wgySlider") {
             var totalCount = thisJSONObject.wsfyCount;
             var googleCount = thisJSONObject.wgyCount;
             $("#wsfySliderCount").html("(" + totalCount +")");

             //HANDLE NULL CASE FOR WSFY + WGY
             if(totalCount == 0 && googleCount == 0) {
             $("#wsfyWgyTopModule").html( $("#wsfyTopModuleNull").html() );
             $("#wsfyWgyTopModule-Content").removeClass("loadModule")
             }
             else {
             $("#wsfyWgyTopModule-Content").removeClass("loadModule")
             }
             }*/
        }
    });
}
function loadWvmpSiteCarousel(apiUrl,wvmpId,scrollVal,queryParam) {
    $.ajax({
        type: "Get",
        url: apiUrl,
        data: queryParam,
        success: function(data){
            var thisJSONObject = eval('(' + data + ')');
            //WVMP Slider
            WVMPSlider(data,wvmpId,scrollVal);
        }
    });
}
//END SLIDERS
//******************Reusable Ajax Function*************/
function AjaxRequest(url,queryParam,reqType,successFxn)
{
    this.url=url;
    this.queryData=queryParam;
    this.reqType=reqType;
    this.onSuccessExecute=successFxn;
    this.Execute=function(){

        $.ajax({
            type: this.reqType,
            url: this.url,
            data: this.queryData,
            success:function(data){
                eval(successFxn + '('+data+')')
            }
        });

    }
}
//***************************************** //
function AddPeople(form)
{
    var errArr=new Array();
    var errStr='';
    var nothingSelected=false;
    for (var k=1;k <= 3;k++)
    {
        var _fn= "#firstName"+k;
        var _ln= "#lastName"+k;
        var _a="#age"+k;

        var _fnv= $(_fn).val();
        var _lnv= $(_ln).val();
        var _av= $(_a).val();

        if(_fnv == "First Name")
            _fnv='';
        if(_lnv == "Last Name")
            _lnv='';
        if(_av == "Approx. Age")
            _av='';

        if(_fnv !="" || _lnv !="" || _av !="") 	{
            if(_fnv =="") 	{
                $(_fn).addClass("redBorder");
                errStr=errStr+"<li>Please enter a First Name</li>"
                errArr.push(1);
            }
            else if(!isValidName(_fnv)) {
                $(_fn).addClass("redBorder");
                errStr=errStr+"<li>Please enter a valid First Name</li>"
                errArr.push(1);
            }
            else {
                $(_fn).removeClass("redBorder");
            }

            if(_lnv == '') 	{
                $(_ln).addClass("redBorder");
                errStr=errStr+"<li>Please enter a Last Name</li>"
                errArr.push(1);
            }
            else if(!isValidName(_lnv)) {
                $(_ln).addClass("redBorder");
                errStr=errStr+"<li>Please enter a valid Last Name</li>"
                errArr.push(1);
            }
            else {
                $(_ln).removeClass("redBorder");
            }

            if( _av == '') 	{
                $(_a).addClass("redBorder");
                errStr=errStr+"<li>Please enter Approximate Age</li>"
                errArr.push(1);
            }
            else if(isNaN(_av)){
                $(_a).addClass("redBorder");
                errStr=errStr+"<li>Please enter a valid age</li>"
                errArr.push(1);
            }
            else if( parseInt(_av) > 99 ) {
                $(_a).addClass("redBorder");
                errStr=errStr+"<li>Please enter a valid age</li>"
                errArr.push(1);
            }
            else if(parseInt(_av) < 0){
                $(_a).addClass("redBorder");
                errStr=errStr+"<li>Please enter a valid age</li>"
                errArr.push(1);
            }
            else {
                $(_a).removeClass("redBorder");
            }
            //break
        }
        if(errArr.length > 0) {
            break;
        }
    }

    if(errArr.length>0) {
        flag=false;
        $('#formErrorMessage ul').html(errStr);
        $('#formErrorMessage').show();
    }
    else 	{
        var contactData = $(form).serialize();
        $('#formErrorMessage ul').html('').hide();
        var sliderId = $("form #sliderId").val();
        if(sliderId.indexOf("Family") > -1) {
            var module = "Family"
        }
        else {
            var module = "Contacts"
        }
        var addContacts = $.ajax({
            type: "GET",
            url: "/api/addContactAPI.do",
            data:contactData,
            success:function(data){
                RefreshContactModule(data,module)
            }
        });
    }

    return false;
}

function RefreshContactModule(data,module)
{
    var response = eval('(' + data + ')');

    if(response.success=="1")
    {
        var newEntryId = response.message;
        var oldEntryId = jQuery.trim($("#wsfy" + module + "EntryId").html());
        var contactObject = new Object();
        contactObject.newEntryId = jQuery.trim(newEntryId);
        contactObject.oldEntryId = oldEntryId;
        $("#wsfyFamilyListContent-Container").addClass("loadModule");
        $("#wsfyContactsListContent-Container").addClass("loadModule");
        //RELOAD THE CONTACTS MODULE (LEFT NAV)
        reloadContactsModuleLeft() ;
        //RELOAD THE FAMILY MODULE
        if(module == "Family") {
            loadWsfyContactModule('wsfyFamilyListContent', 'cat=4',contactObject);
            sendPageNameAndChannelToOmniture('Add Family (Successful Save)','WSFY - Family');
        }
        else
            loadWsfyContactModule('wsfyFamilyListContent', 'cat=4')

        //RELOAD THE CONTACT MODULE
        if(module == "Contacts") {
            loadWsfyContactModule('wsfyContactsListContent', 'cat=4&excl=true',contactObject);
            sendPageNameAndChannelToOmniture('Add Contacts (Successful Save)','WSFY - Contacts');
        }
        else
            loadWsfyContactModule('wsfyContactsListContent', 'cat=4&excl=true')
        //CLOSE THE MODAL WINDOW
        $.modal.close();
    }
    else
    if(response.message != "")
    {
        var responseMessage = "<li>" + response.message + "</li>";
        $('#formErrorMessage ul').html(responseMessage);
        $('#formErrorMessage').show();
        $("#formErrorMessage ul").show();
    }

}
function LoadRecentSearches(myJSONObject)
{
    $.each(myJSONObject.resultList, function(i,item){
        var nameAnchor=document.createElement('a');
        var state = "";
        if(item.state != null) {
            state = item.state;
        }
        if(myJSONObject.accessible == true) {
            if(item.newMatchCount > 0)
                var searchLink = '/newMemberMatch.do?searchType=name&pageName=people&wel_fname='+escape(item.firstName)+'&wel_lname='+escape(item.lastName)+'&wel_age='+item.age + '&state=' + state + '&sid=' + item.searchID;
            else
                var searchLink = 'javascript:doPeopleSearch(\'searchType=name&pageName=people&wel_fname='+escape(item.firstName)+'&wel_lname='+escape(item.lastName)+'&wel_age='+item.age + '&state=' + state + '&sid=' + item.searchID + '\')';
        }
        else {
            var searchLink = 'javascript:doPeopleSearch(\'searchType=name&pageName=people&wel_fname='+escape(item.firstName)+'&wel_lname='+escape(item.lastName)+'&wel_age='+item.age + '&state=' + state + '&sid=' + item.searchID + '\')';
        }

        $(nameAnchor).attr('href', searchLink);
        var comma = ""
        if(item.newMatchCount > 0) {
            comma = ", "
        }
        $(nameAnchor).html(item.fullNameProper+", "+item.age + comma);

        var liElement=document.createElement('li');
        $(liElement).attr('class','liWithNoDecoration');
        liElement.appendChild(nameAnchor);
        if(item.newMatchCount > 0) {
            var newAnchor = document.createElement('a');
            $(newAnchor).attr("href",searchLink);
            $(newAnchor).html(item.newMatchCount + " new");
            $(newAnchor).addClass("orange bold");
            liElement.appendChild(newAnchor)
        }
        $('#mySearchesList').append(liElement);
        $("#mySearchesNullLeft").hide();
    });

    //GET THE LIST OF HIGH SCHOOLS
    var userHs = new Array();
    $.each(myJSONObject.highSchools, function(j,hs){
        if(hs.userSchool == true && hs.schoolName != "") {
            var schoolLink = "/classlist.do";
            var schoolAnchor = document.createElement("a");
            $(schoolAnchor).attr('href', schoolLink);
            $(schoolAnchor).html(hs.schoolName);
            var hsLi = document.createElement("li");
            $(hsLi).attr('class','liWithNoDecoration');
            $(hsLi).css("padding-top","6px");
            hsLi.appendChild(schoolAnchor);
            $('#mySearchesList').append(hsLi);
            $("#mySearchesNullLeft").hide();
        }
    })

    if(myJSONObject.totalCount > 5) {
        var viewMoreAnchor = document.createElement("a");
        $(viewMoreAnchor).attr('href',"/findpeople.view");
        $(viewMoreAnchor).html("&raquo; View All");
        $("#mySearchesViewAll").append(viewMoreAnchor);
        $("#mySearchesViewAll").show();
    }
    //POPULATE THE WSFY + WVMP COUNT
    if(myJSONObject.wsfyCount == 0) {
        $("#wsfyActiveCountContainer").hide();
    }
    else {
        ShowActiveCount("wsfyActiveCount",myJSONObject.wsfyCount,"search","searches");
    }
    if(myJSONObject.wvmpCount == 0) {
        $("#wvypActiveCountContainer").hide();
    }
    else {
        ShowActiveCount("wvypActiveCount",myJSONObject.wvmpCount, "person", "people");
    }
    if(myJSONObject.wgyCount == 0) {
        $("#wgyActiveCountContainer").hide();
    }
    else {
        ShowActiveCount("wgyActiveCount",myJSONObject.wgyCount, "search", "searches");
    }
    $("#myProfileCounts").show();

    //POPULATE MY SEARCHES
    if(myJSONObject.resultList.length>0) {
        $("#homeMySearchesFeedCount").html("(" + myJSONObject.totalCount + ")")
    }
    else {
        if(myJSONObject.highSchoolCount == 0 && myJSONObject.resultList.length == 0) {
            $("#mySearchesNullLeft").show();
            $("#mySearchesNullLeft").html("You have no recent searches")
        }
    }
}

function resizeThumbs(divId,maxImgWidth,maxImgHeight,imageClassName) {
    var imgClass = "thumbResize";
    if(imageClassName) {
        imgClass = imageClassName;
    }
    $("#" + divId + " img."+imgClass).each(function(){
        $(this).load(function(){
            var maxWidth = maxImgWidth; // Max width for the image
            var maxHeight = maxImgHeight;// Max height for the image
            $(this).css("width", "auto").css("height", "auto"); // Remove existing CSS
            $(this).removeAttr("width").removeAttr("height"); // Remove HTML attributes
            var width = $(this).width();    // Current image width
            var height = $(this).height();  // Current image height
            var ratio = width/height;

            if(width > height) {
                // Check if the current width is larger than the max
                if(width > maxWidth){
                    var newWidth = maxImgHeight * ratio;
                    $(this).css("width",newWidth); ///$(this).css("width",maxWidth); // Resize the width
                    $(this).css("height",newWidth/ratio); // $(this).css("height",maxWidth/ratio); // Set the height to be the max height
                    height = height * ratio;        // Reset height to match scaled image
                }
            }
            else {
                // Check if current height is larger than max
                if(height > maxHeight){
                    $(this).css("height", maxWidth/ratio); // Reisze the height
                    $(this).css("width",maxWidth); //Set the width to the max width
                    width = width * ratio;  // Reset width to match scaled image
                }
            }
        });
    });
}
function submitSoftMatch(form) {
    if( $("#softMatchEmployer").val() == "Enter Employer Name") {
        $("#softMatchEmployer").val("");
    }
    var schoolId = $("#regWelcomeContent #school").val();
    var softMatchData = $(form).serialize();
    $.ajax({
        type: "GET",
        url: "/api/saveSoftMatchAPI.do",
        data:softMatchData,
        success:function(data){
            var response = eval('(' + data + ')');
            if(response.success=="1")
            {
                //OMNITURE HIT
                sendPageNameAndChannelToOmniture('Welcome Overlay - Complete','Registration');
                //We're on the Profile page
                if( $("#myLifeProfile").length) {
                    setTimeout('document.location = "/displayProfile.do"',4500);
                }
                //Other page
                else {
                    var currentPage = document.location.href;
                    if(schoolId != "") {
                        setTimeout('reloadMySearchesModuleLeft()',2000);
                    }
                    if(currentPage.indexOf("regflow.do") > -1) {
                        if(schoolId != "") {
                            setTimeout('reloadActiveSearches()',2000);
                        }
                    }
                    $("#findPeopleTabsSearch #tabFirstName").removeAttr("disabled");
                    $("#findPeopleTabsSearch #tabFirstName").focus();
                    $.modal.close();
                }
            }
        }
    });
}
function wordTense(count,singleValue,pluralValue) {
    if(parseInt(count) == 1) {
        return singleValue;
    }
    else {
        return pluralValue;
    }
}
function openLoadingOverlay(loadingText) {
    $("#global-loading-overlay").modal({
        overlayId:"loading-overlay",
        containerId:"loading-container",
        close:true,
        overlayClose:false,
        onShow:function() {
            $("#loading-container .loading-overlay-content").html(loadingText);
        }
    });
}
jQuery.fn.extend({
    /**
     * Returns get parameters.
     *
     * If the desired param does not exist, null will be returned
     *
     * To get the document params:
     * @example value = $(document).getUrlParam("paramName");
     *
     * To get the params of a html-attribut (uses src attribute)
     * @example value = $('#imgLink').getUrlParam("paramName");
     */
    getUrlParam: function(strParamName){
        strParamName = escape(unescape(strParamName));

        var returnVal = new Array();
        var qString = null;

        if ($(this).attr("nodeName")=="#document") {
            //document-handler

            if (window.location.search.search(strParamName) > -1 ){
                qString = window.location.search.substr(1,window.location.search.length).split("&");
            }

        } else if ($(this).attr("src")!="undefined") {

            var strHref = $(this).attr("src")
            if ( strHref.indexOf("?") > -1 ){
                var strQueryString = strHref.substr(strHref.indexOf("?")+1);
                qString = strQueryString.split("&");
            }
        } else if ($(this).attr("href")!="undefined") {

            var strHref = $(this).attr("href")
            if ( strHref.indexOf("?") > -1 ){
                var strQueryString = strHref.substr(strHref.indexOf("?")+1);
                qString = strQueryString.split("&");
            }
        } else {
            return null;
        }

        if (qString==null) return null;

        for (var i=0;i<qString.length; i++){
            if (escape(unescape(qString[i].split("=")[0])) == strParamName){
                returnVal.push(qString[i].split("=")[1]);
            }
        }

        if (returnVal.length==0) return null;
        else if (returnVal.length==1) return returnVal[0];
        else return returnVal;
    }
});
function checkInputText(obj,defaultValue) {
    if(obj.value == '') {
        obj.value = defaultValue;
        $(obj).removeClass("inputHasValue");
        $(obj).addClass("inputNoValue");
    }
}
function clearField(obj,defaultValue) {
    if(obj.value == defaultValue) {
        obj.value='';
        $(obj).removeClass("inputNoValue");
        $(obj).addClass("inputHasValue");
    }
}
function formatPhoneNumber(input, format) {
    // Strip non-numeric characters
    //var digits = input.replace(/\D/g, '');
    var digits = String(input);

    // Replace each "X" with the next digit
    var count = 0;
    return format.replace(/X/g, function() {
        return digits.charAt(count++);
    });
}
function openEmailOverlay(id,params) {
    var recipientId = id;
    var additionalParams = params;
    var url = "/composeMessageOverlay.do?toid=" + recipientId + "&" + additionalParams;
    $("#globalOverlayContainer").modal({
        close:true,
        overlayClose:true,
        overlayId:"global-email-overlay",
        containerId:"global-email-container",
        onShow:function() {
            $("#global-email-container .globalOverlayContent").load(url);
        }
    })
}
// Opens the edit work profile overlay
function openWorkProfileOverlay() {
    $("#globalOverlayContainer").modal({
        close:true,
        overlayId:"work-search-overlay",
        containerId:"work-search-container",
        overlayClose:true,
        onShow:function() {
            var url = "/work-edit.view";
            // get the existing work information
            $.ajax({
                type:"get",
                url:"/json/placesworked/latest",
                success:function(data) {
                    var json = data;
                    var obj = new Object();
                    obj = processRecentWorkData(json,obj);
                    $("#work-search-container .globalOverlayContent").load(url,function() {
                        if(obj.completed == false) {
                            // populate the company
                            if(obj.company != "") {
                                $("#work-search-container #work-edit-form #profile-job-company").val(obj.companyRaw);
                            }
                            // title
                            if(obj.jobTitle != "") {
                                $("#work-search-container #work-edit-form #profile-job-title").val(obj.jobTitleRaw);
                                $("#work-search-container #work-edit-form #profile-job-title").removeClass("inputNoValue");
                            }
                            // role
                            $("#work-search-container #work-edit-form #profile-job-role").val(obj.jobRole);
                            // industry
                            $("#work-search-container #work-edit-form #profile-job-industry").val(obj.industry);
                            // populate the id
                            $("#work-search-container #work-edit-form #profile-job-id").html(obj.id);
                        }
                        //omniture
                        sendPageNameAndChannelToOmniture('Add/Edit Work Overlay - Open', 'Work');
                    })
                }
            })
        }
    });
}
function processRecentWorkData(json,obj) {
    obj.id = json.id;
    obj.startYear = json.startYear;
    obj.endYear = json.endYear;
    if(json.industry == "UNKNOWN" || json.industry == null) {
        obj.industry = "";
    }
    else {
        obj.industry = json.industry;
    }
    if(json.jobRole == "UNKNOWN" || json.jobRole == null) {
        obj.jobRole = "";
    }
    else {
        obj.jobRole = json.jobRole;
    }
    if(json.jobTitle == null) {
        obj.jobTitle = "";
    }
    else {
        obj.jobTitle = json.jobTitle;
    }
    if(json.jobTitleRaw == null) {
        obj.jobTitleRaw = "";
    }
    else {
        obj.jobTitleRaw = json.jobTitleRaw;
    }
    if(json.company == null) {
        obj.company = "";
    }
    else {
        obj.company = json.company;
    }
    if(json.companyRaw == null) {
        obj.companyRaw = "";
    }
    else {
        obj.companyRaw = json.companyRaw;
    }
    obj.completed = json.completed;
    obj.currentWorkPlace = json.currentWorkPlace;
    obj.industryName = json.industryName;
    return obj;
}
//Opens the engagement import overlay
function openEngageWelcome() {
    $("#onboardingModal").modal({
        close:true,
        overlayId:"welcome-message-overlay",
        containerId:"welcome-message-container",
        overlayClose:false,
        onClose:function(dialog) {
            // Omniture hit
            //sendPageNameAndChannelToOmniture('Social Engagement - Accounts Overlay  Close', 'Social Engagement');
            //omniture
            sendPageNameAndChannelToOmniture('Welcome','Social Onboarding');
            closeModal();
        },
        onShow:function() {
            //document.body.style.webkitTransform= "scale(1.0)";
        }
    });
}

//Opens the engagement import overlay
function openEngageImportOverlay() {
    $("#engage-overlay").modal({
        close:true,
        overlayId:"import-networks-overlay",
        containerId:"import-networks-container",
        overlayClose:false,
        onClose:function(dialog) {
            // Omniture hit
            sendPageNameAndChannelToOmniture('Social Engagement - Accounts Overlay  Close', 'Social Engagement');
            closeModal();
        },
        onShow:function() {
            //document.body.style.webkitTransform= "scale(1.0)";
            var url = "/json/social/status";
            var protocol = getProtocol();
            $.get(url,
                "protocol=" + protocol,
                function(response) {
                    var json = response;
                    var networkStatus = "new";
                    var omnitureState = "Initial Open";
                    var socialObj = new Object();
                    socialObj = processNetworkStatus(json,socialObj);
                    if(socialObj.totalConnected > 0) {
                        networkStatus = "existing";
                        omnitureState = "Existing Accounts Open"
                    }
                    var url = "/import-networks.view?status=" + networkStatus + "&protocol=" + protocol;
                    $("#import-networks-container #engage-overlay").load(url, function() {
                        printNetworkStatus(socialObj);
                    });
                    sendPageNameAndChannelToOmniture('Social Engagement - Accounts Overlay  Open - ' + omnitureState, 'Social Engagement');
                }
            )
        }
    });
}

function cleanQuotes(s){
    var retval = "";
    if (s){
        retval = s.replace(/[']/g, "").replace(/["]/g, "").replace(/[#]/g, "&#35;");
        retval = retval.replace(/[(]/g, "&#40;").replace(/[)]/g, "&#41;");
        return retval;
    }
}
function getProtocol() {
    var protocol = "http";
    var protocolUrl = String(document.location);
    if(protocolUrl.indexOf("https") > -1) {
        protocol = "https";
    }
    return protocol;
}
function generateRandomImage(maxNumImages, imagePath, imageExtension) {
    var imageArray = new Array();
    for(var i=1; i < (parseInt(maxNumImages)+1);i++) {
        imageArray.push(i);
    }
    var imageIndex = Math.floor(Math.random() * imageArray.length);
    var randomImage = imagePath + imageArray[imageIndex] + "." + imageExtension;
    return randomImage;
}
function isValidFreeFormText(text) {
    text = text.replace(/[\u201C|\u201D|\u201E]/g, "\"");
    var validChars = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()_+-={}|[];\":',./?`~ ";
    var isValid = true;
    var testChar = '';

    if (text && text.length > 0) {
        for (i = 0; i < text.length && isValid; i++) {
            testChar = text.charAt(i);
            if(escape(testChar) == "%0A") {
                isValid = true;
            }
            else {
                if (validChars.indexOf(testChar) == -1) {
                    isValid = false;
                }
            }
        }
    }
    return isValid;
}

function deleteCookie(key)
{
    // Delete a cookie by setting the date of expiry to yesterday
    date = new Date();
    date.setDate(date.getDate() -1);
    document.cookie = escape(key) + '=;expires=' + date;
}

$(document).ready(
    function() {

        $('#globallogout').click(function(){
            deleteCookie('socialCookie');
            flushActivityCounts("$user.getUserNum()")
            if(FB._apiKey != null){
                FB.getLoginStatus(function(response) {
                    if(response.session){
                        FBgloballogout.logout();
                        setTimeout(function(){
                            window.location.href='/logout.proc'
                        }, 3000);
                    }else{
                        window.location.href = '/logout.proc';
                    }//if response.session
                });
            }else{
                window.location.href='/logout.proc';
            }
        });
        // close the modal window
        $(".close-modal-window").live('click',
            function() {
                $.modal.close();
            }
        );
        // open then work profile overlay
        $(".open-edit-work").live('click',function() {
            openWorkProfileOverlay();
        })
        // add networks link
        $(".add-social-account-link").live('click',function() {
            openEngageImportOverlay();

            //close overlay
            $("#life-event-overlay").addClass("display-none");
        })
    }
)

function checkAndDisplaySaversGuideOverlay() {
    var sgCookie = $.cookie('userSGinSession');
    if (sgCookie && sgCookie.length > 0){
        openSaversGuideWelcomeOverlay();
        // delete old cookie
        $.cookie('userSGinSession',null, { path : '/', domain : '.mylife.com' } );
        //document.cookie = 'userSGinSession=; expires=Thu, 01-Jan-70 00:00:01 GMT;';
        //alert('after delelete userSGinSession = ' + $.cookie('userSGinSession'));
    }
}

//Opens the SaversGuide welcome overlay
function openSaversGuideWelcomeOverlay() {
    $("#globalOverlayContainer").modal({
        close:true,
        overlayId:"savers-welcome-overlay",
        containerId:"savers-welcome-container",
        overlayClose:false,
        onClose:function(dialog) {
            //sendPageNameAndChannelToOmniture('Social Engagement - Accounts Overlay  Close', 'Social Engagement');
            closeModal();
        },
        onShow:function() {
            var url = "/savers-welcome.view";
            $("#savers-welcome-container .globalOverlayContent").load(url, function() {
                $("#savers-welcome-container .savers-info-btn").live('click',function() {
                    // "Access SaversGuide" button opens new browser tab via anchor, then closes this overlay
                    closeModal();
                });
            });
        },
        dataCss:{
            textAlign:'center'
        }
    });
}

function fixbrokenimg(e){
    $(e).attr("src","/images/09/profile/iconSmallDefault.gif")
}

 function loadNavClasslist(requestUrl,sectionId,nullSectionId)   {  
	 $.ajax({
		   type: "Get",
		   url: requestUrl,		   
		   success: function(data){
		 		generateNavSchools(data,sectionId,nullSectionId);
		   }
	 });	
 } 
function loadNavWsfy(requestUrl,sectionId,nullSectionId)   {  
	 $.ajax({
		   type: "Get",
		   url: requestUrl,		   
		   success: function(data){
		 		generateNavWsfy(data,sectionId,nullSectionId);
		   }
	 });	
 }  
 function loadNavDating(requestUrl,sectionId,nullSectionId)   {  
	 $.ajax({
		   type: "Get",
		   url: requestUrl,		   
		   success: function(data){
		 		generateNavDating(data,sectionId,nullSectionId);
		   }
	 })
}
function loadWvmpCount(obj) {
	//WVYP
	$.ajax({
		   type: "Get",
		   url: "/api/wvmpCountsAPI.do",		   
		   success: function(data){
		 		var json = eval('(' + data + ')');
		 		obj.totalCountWvyp = json.profileViewCount;
		 		obj.newCountWvyp = json.recentProfileViewCount;
		 		
		 		var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
				//wsfy
				if(obj.totalCountWsfy > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do'>" + obj.totalCountWsfy + wordTense(obj.totalCountWsfy, ' personal search',' personal searches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.newCountWsfy > 0) {
						h += "<a href='/searchMonitor.do' class='orange bold'>" + obj.newCountWsfy + " new</a>"
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
				}
				//Null Case
				else {
						h += "<tr><td colspan='2'  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do'>See searches for you</a></td></tr>";
				}
				
				// wsfy - work
				if(obj.wsfyCountWork > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do?type=wsfy&wsfymodule=professional'>" + obj.wsfyCountWork + wordTense(obj.wsfyCountWork, ' work search',' work searches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					h += "&nbsp;"
					h += "</td></tr>";
				}
				// wsfy - services
				if(obj.wsfyCountServices > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do?type=wsfy&wsfymodule=services'>" + obj.wsfyCountServices + wordTense(obj.wsfyCountServices, ' service search',' service searches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					h += "&nbsp;"
					h += "</td></tr>";
				}
				//wvyp
				if(obj.totalCountWvyp > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do?type=wvmp'>" + obj.totalCountWvyp + " profile " + wordTense(obj.totalCountWvyp, 'view','views') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.newCountWvyp > 0) {
						h += "<a href='/searchMonitor.do?type=wvmp' class='orange bold'>" +obj.newCountWvyp + " new</a>"
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
				}
				h += "</table>"
				$("#left-content-wsfy").html(h);
		 		
		 	}
	 })
}
function loadWsfyCount(url) {
	//WSFY
	var obj = new Object();
	$.ajax({
		   type: "Get",
		   url: url,		   
		   success: function(data){
		 		var json = eval('(' + data + ')');
		 		obj.totalCountWsfy = parseInt(json.wsfyCount);
		 		obj.newCountWvyp = parseInt(json.wsfyNewCount);
		 		obj.wsfyCountWork = parseInt(json.wsfyWorkCount);
		 		obj.wsfyCountServices = parseInt(json.wsfyServiceCount);
		 		loadWvmpCount(obj);
		 	}
	 })
}
function	loadMessagesCount(sectionId) {	
	var obj = new Object();
	//MESSAGES
	$.ajax({
		   type: "Get",
		   url: "/json/email/messagecounts",		   
		   success: function(data){
		 		var json = eval(data);
		 		obj.totalCountEmail = json.inboxEmailCount;
		 		obj.totalCountEmailUnread = json.unReadEmailCount;	 	
		 		
		 		var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
				//messages
				if(obj.totalCountEmail > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/mail.do'>" + obj.totalCountEmail  + " " +  wordTense(obj.totalCountEmail, 'message','messages') +"</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.totalCountEmailUnread > 0) {
						h += "<a href='/mail.do' class='orange bold'>" + obj.totalCountEmailUnread + " new</a>"
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
				}
				h += "</table>"
				$("#" + sectionId).html(h);
		 	}
	})
}
function loadEngageLink(sectionId) {
	var url = "/json/social/status";
	var userNum = jQuery.trim($("#profile-user-id").html());
	$.get(url,
		function(response) {
			var json = response;
			var socialObj = new Object();
			socialObj = processNetworkStatus(json,socialObj);
						
			if(socialObj.totalConnected  >= 7) {
				var h = "<a href='javascript:void(0)' class='add-social-account-link'>Edit social accounts</a>";
			} else {
				var h = "<a href='javascript:void(0)' class='add-social-account-link'>Add social accounts</a><div id='left-social-icons' class='add-social-account-link'></div>";
			}						
			$("#" + sectionId).html(h);
			
			if ($("#mySocialActivity").length > 0) {
				if(socialObj.totalConnected >= 1) {					
					$("#mySocialActivity").addClass("display-inline");
					$("#mySocialActivity").removeClass("display-none");					
				} else {					
					$("#mySocialActivity").addClass("display-none");
					$("#mySocialActivity").removeClass("display-inline");
				}

			}
			
		}
	)
		

}
function loadQmsCount(sectionId) {
	//QMS
	var userNum = jQuery.trim($("#profile-user-id").html());
	var obj = new Object();
	$.ajax({
		   type: "Get",
		   url: "/api/matchdatingResultAPI.do?usernum="+userNum + "&countsOnly=true",		   
		   success: function(data){
		 		var json = eval('(' + data + ')');
		 		obj.totalCountQms = json.totalCount;
		 		obj.newCountQms = json.newMemberCount;
		 		//Non-null case
		 		if(obj.totalCountQms > 0 ) {
		 			var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/dating.do'>" + obj.totalCountQms + wordTense(obj.totalCountQms, ' Singles match',' Singles matches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.newCountQms > 0) {
						h += "<a href='/dating.do' class='orange bold'>" + obj.newCountQms + " new</a>"
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
		 			$("#"+sectionId).html(h);
		 		}
		 		//Null Case
		 		else {
		 			var nullText = "<a href='/dating.do'>View your matches now</a>";
	 				$("#" + sectionId).html(nullText);
		 		}
		 	}
	});
}
function loadContactsCount(sectionId) {
	var obj = new Object();
	$.ajax({
		   type: "Get",
		   url: "/api/contactsCount.do",		   
		   success: function(data){
		 		var json = eval('(' + data + ')');
		 		obj.totalCountContacts = json.contactCount;
				//Non-null
				if(obj.totalCountContacts > 0) {
					var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/addressBook.do'>View " + wordTense(obj.totalCountContacts, '',' all ') + obj.totalCountContacts + wordTense(obj.totalCountContacts, ' contact',' contacts') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					h += "</td></tr>";
		 			$("#"+sectionId).html(h);
				}
				//Null
				else {
					var nullText = "<a href='/addressBook.do'>Add a contact</a>";
					$("#" + sectionId).html(nullText);
				}
		 	}
	})	
}
function generateUserCountsSkin(obj) {
	var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
	//wsfy
	if(obj.totalCountWsfy > 0) {
		h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/displayProfile.do'>" + obj.totalCountWsfy + wordTense(obj.totalCountWsfy, ' search',' searches') + " for you</a></td>";
		h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
		if(obj.newCountWsfy > 0) {
			h += "<a href='/displayProfile.do' class='orange bold'>" + obj.newCountWsfy + " new</a>"
		}
		else {
			h += "&nbsp;"
		}
		h += "</td></tr>";
	}
	
	//wvyp
	if(obj.totalCountWvyp > 0) {
		h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/displayProfile.do'>" + obj.totalCountWvyp + " profile " + wordTense(obj.totalCountWvyp, 'view','views') + "</a></td>";
		h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
		if(obj.newCountWvyp > 0) {
			h += "<a href='/displayProfile.do' class='orange bold'>" +obj.newCountWvyp + " new</a>"
		}
		else {
			h += "&nbsp;"
		}
		h += "</td></tr>";
	}
	//messages
	if(obj.totalCountEmail > 0) {
		h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/mail.do'>" + obj.totalCountEmail  + " " +  wordTense(obj.totalCountEmail, 'message','messages') +"</a></td>";
		h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
		if(obj.totalCountEmailUnread > 0) {
			h += "<a href='/mail.do' class='orange bold'>" + obj.totalCountEmailUnread + " new</a>"
		}
		else {
			h += "&nbsp;"
		}
		h += "</td></tr>";
	}
	h += "</table>"
	$("#left-module-user-counts").html(h);
}
 function loadNavSearches(requestUrl,sectionId,nullSectionId)   {  
	 $.ajax({
		   type: "Get",
		   url: requestUrl,		   
		   success: function(data){
		 		generateNavSearches(data,sectionId,nullSectionId);
		   }
	 })
}
 function generateNavWsfy(data,sectionId,nullSectionId) {
	 var json = eval('(' + data + ')');
	 var wObject = new Object();
	 
	 wObject = processJsonWsfy(wObject,json);
	 
	 if(wObject.wsfyCount > 0) {
	 	generateWsfySkin(wObject,sectionId);
	 }
	 else {
	 	$("#" + sectionId).html($("#"+nullSectionId).html());
	 }
	 
	  $("#navWsfyLeftCount").html(wObject.wsfyCount);
	 if($("#profile-activity-wsfy").html() != null ) {
	  	$("#profile-activity-wsfy").html(wObject.wsfyCount)
	 }
}
 function generateNavSchools(data,sectionId,nullSectionId) {
	 var json = eval('(' + data + ')');
	 var schoolsObject = new Object();
	 
	 schoolsObject = processJsonClasslist(schoolsObject,json);
	 if(schoolsObject.schools.length > 0) {
	 	generateClasslistSkin(schoolsObject,sectionId);
	 }
	 else {
	 	var nullText = "<a href='/schools.view'>Find High School classmates</a>";
	 	$("#" + sectionId).html(nullText);
	 }
}
 function generateNavDating(data,sectionId,nullSectionId) {
	 var json = eval('(' + data + ')');
	 var dObject = new Object();
	 
	 dObject = processJsonQms(dObject,json);
	 if(dObject.totalCount > 0) {
	 	generateQmsSkin(dObject,sectionId);
	 }
	 else {
	 	var nullText = "<a href='/dating.do'>View your matches now</a>";
	 	$("#" + sectionId).html(nullText);
	 }
}
 function generateNavSearches(data,sectionId,nullSectionId) {
	 var json = data;
	 var searchObject = new Object();
	 
	 searchObject = processJsonSearches(searchObject,json);
	 if(searchObject.totalCount > 0) {
	 	generateNavSearchesSkin(searchObject,sectionId);
	 }
	 else {
	 	var nullText = "<a href='/findpeople.view'>Search family, friends and more</a>";
	 	$("#" + sectionId).html(nullText);
	 }
}
//Process json for the nav classlist
function processJsonClasslist(obj, jsonObj) {
	obj.schools= new Array();
	
	$.each(jsonObj, function(i,item){
		var s = new Object();
		s.city = item.school;
		s.state = item.state;
		s.schoolId = item.schoolId;
		s.schoolName = toProperCase(item.schoolName);
		s.startYear = item.startYear;
		s.endYear = item.endYear;
		s.gradYear = item.gradYear;
		s.totalCount = parseInt(item.totalClassCount);
		//s.countThirtyDays = item.lastThirtyDaysClassCount;
		//s.countNinetyDays = item.lastNinetyDaysClassCount;
		//s.countLastYear = item.lastYearClassCount;
		s.newCount = parseInt(item.newClassmatesCount);
		s.userSchool = item.userSchool;
		obj.schools[i] = s
	 });
	 return obj;
}
//Process json for the nav WSFY
function processJsonWsfy(obj, jsonObj) {
	obj.subscribed = jsonObj.subscribed;
	obj.totalCout = parseInt(jsonObj.totalCount);
	obj.wsfyCount = parseInt(jsonObj.wsfyCount);
	obj.wsfyCountWork = parseInt(jsonObj.wsfyWorkCount);
	obj.wsfyCountServices = parseInt(jsonObj.wsfyServicesCount);
	obj.newCount = parseInt(jsonObj.wsfyNewCount);
	return obj;
}
//Process json for the nav QMS
function processJsonQms(obj, jsonObj) {
	obj.totalCount = parseInt(jsonObj.totalCount);
	obj.newCount = jsonObj.newMemberCount;
	obj.viewerZipCode = jsonObj.viewerZip;
	obj.viewerSubscribed = jsonObj.viewerSubscribed;
	 return obj;
}
//Process json for the nav searches
function processJsonSearches(obj, jsonObj) {
	obj.searches= new Array();
	obj.subscribed = jsonObj.subscribed;
	obj.totalCount = parseInt(jsonObj.totalCount);
	$.each(jsonObj.resultList, function(i,item){
		var s = new Object();
		s.firstName = toProperCase(item.firstName);
		s.lastName = toProperCase(item.lastName);
		s.age = item.age;
		s.searchDate = item.searchDate;
		s.searchId = item.searchID;
		s.newCount =parseInt(item.newMatchCount);
		s.searchReason = item.searchReason;
		if(item.state == null) {
			s.state = "All";
		}
		else {
			s.state = item.state;
		}
		obj.searches[i] = s
	 });
	 return obj;
}
function generateClasslistSkin(obj,sectionId) {
	var d = $("#" + sectionId);
	$(d).html("");
	var html = "<table width='100%' cellpadding='0' border='0'>";
	$.each(obj.schools,function(i,item) {
		if(i < 3) {
			html += "<tr><td valign='top' colspan='2' class='font11'><b>" + item.schoolName + "</b>";
			if(item.gradYear != "-1") {
				html += "<br/>Class of " + item.gradYear;
			}
			html += "</td></tr>";
			var schoolLink = "/classlist.do?school=" + item.schoolId + "&FLD_START_YEAR="+item.startYear + "&FLD_END_YEAR="+item.endYear;
			html += "<tr><td valign='top' align='left'><a href='" + schoolLink + "'>" + item.totalCount + "&nbsp;" + wordTense(item.totalCount, 'Classmate','Classmates') + "</a></td><td valign='top' align='right' class='leftNavNew'>";
			if(item.newCount > 0) {
				html += "<a href='" + schoolLink + "' class='orange bold'>" + item.newCount + " new</a>";
			}
			else {
				html += "&nbsp;";
			}
			html += "</td></tr>";
			html += "<tr><td colspan='2' class='leftNavSpacer'></td></tr>";
		}
	})
	if(obj.schools.length > 3) {
		html += "<tr><td valign='top' colspan='2'><a href='/schools.view' class='font12'>View all " + obj.schools.length + " schools &raquo;</a></td></tr>";
	}
	html += "</table>";
	$(d).html(html);
}
function generateWsfySkin(obj,sectionId) {
	var d = $("#" + sectionId);
	$(d).html("");
	var html = "<table width='100%' cellpadding='0' border='0'>";
	var wsfyLink ="";
	if (isSubscribedToWSFY =="false")
		wsfyLink="/subscription.do?dispatch=start&service_type=wsfy";
	else
		wsfyLink = "/searchMonitor.do";
	
	html += "<tr><td valign='top' align='left'><a href='" + wsfyLink + "'>" + obj.wsfyCount + "&nbsp;" + wordTense(obj.wsfyCount, 'search','searches') + " for you</a></td><td valign='top' align='right' class='leftNavNew'>";
	if(obj.newCount > 0) {
		html += "<a href='" + wsfyLink + "' class='orange bold'>" + obj.newCount + " new</a>";
	}
	html += "</td></tr>";

	html += "</table>";
	$(d).html(html);
}
function generateQmsSkin(obj,sectionId) {
	var d = $("#" + sectionId);
	$(d).html("");
	var html = "<table width='100%' cellpadding='0' border='0'>";
	var qmsLink = "/dating.do";
	html += "<tr><td valign='top' align='left'><a href='" + qmsLink + "'>" + obj.totalCount +  "&nbsp;" + wordTense(obj.totalCount, 'match','matches') + " for you</a></td><td valign='top' align='right' class='leftNavNew'>";
	if(obj.newCount > 0) {
		html += "<a href='" + qmsLink + "' class='orange bold'>" + obj.newCount + " new</a>";
	}
	html += "</td></tr>";

	html += "</table>";
	$(d).html(html);
}
function generateNavSearchesSkin(obj,sectionId) {
	var d = $("#" + sectionId);
	$(d).html("");
	var html = "<table width='100%' cellpadding='0' border='0'>";
	$.each(obj.searches,function(i,item) {
		if(i < 3) {
			var firstSearch = "";
			if(i ==0) {
				firstSearch = " id='first-my-searches'";
			}
			if(obj.subscribed == true) {
				if(item.newCount > 0)
					var searchLink = '/newMemberMatch.do?searchType=name&pageName=people&wel_fname='+escape(item.firstName)+'&wel_lname='+escape(item.lastName)+'&wel_age='+item.age + '&state=' + item.state + "&searchReason=" + item.searchReason + '&sid=' + item.searchId;
				else
					var searchLink = '/peopleSearch.do?searchType=name&pageName=people&wel_fname='+escape(item.firstName)+'&wel_lname='+escape(item.lastName)+'&wel_age='+item.age + '&state=' + item.state + "&searchReason=" + item.searchReason + '&sid=' + item.searchId;
			}
			else {
				var searchLink = "/activateScout.do?searchFirstName=" + escape(item.firstName) + "&searchLastName=" + escape(item.lastName) + "&searchAge=" + item.age + '&state=' + item.state + "&searchReason=" + item.searchReason + '&sid=' + item.searchId;
			}
			
			html += "<tr><td valign='top' align='left' class='leftNavTdPad'><a href='" + searchLink + "'" + firstSearch + ">" + item.firstName + "&nbsp;" + item.lastName + ", " + item.age + "</a></td><td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
			if(item.newCount > 0) {
				html += "<a href='" + searchLink + "' class='orange bold'>" + item.newCount + " new</a>";
			}
			else {
				html += "&nbsp;";
			}
			html += "</td></tr>";
		}
	})
	if(obj.totalCount > 3) {
		html += "<tr><td colspan='2' class='leftNavSpacer'></td></tr>";
		html += "<tr><td valign='top' colspan='2'><a href='/findpeople.view' class='font12'>View all " + obj.totalCount + " active searches &raquo;</a></td></tr>";
	}
	html += "</table>";
	$(d).html(html);
} function loadSchoolCounts(requestUrl,div)   {  
	 $.ajax({
		   type: "get",
		   url: requestUrl,		   
		   success: function(data){
		 		generateSchoolNav(data,div);
		   }
	 });	
 } 
function loadDatingCounts(requestUrl,div) {
	var obj = new Object();
	$.ajax({
		   type: "get",
		   url: requestUrl,		   
		   success: function(data){
		 		var json = eval( data );
		 		obj.totalCountQms = json.totalResults;
		 		obj.totalNewCount = json.newMemberCount;
		 		//Non-null case
		 		if(obj.totalCountQms > 0 ) {
		 			var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/dating.do'>" + obj.totalCountQms + wordTense(obj.totalCountQms, ' Singles match',' Singles matches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.totalNewCount > 0) {
						h += "<a href='/dating.do' class='orange bold'>" + obj.totalNewCount + " new</a>"
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
		 			if(parseInt(obj.totalNewCount) > 0) {
		 				if(obj.totalNewCount > 99) {
							$("#" + div + " .new-count-caption").addClass("new-count-caption-100");
						}
						$("#" + div + " .new-count-caption").html(obj.totalNewCount + " new").fadeIn();
						$("#" + div + " .caption-white-box").html(h);
					}	
		 		}
		 	}
	});
}
function loadWvmpCounts(obj,div) {
	//WVYP
	$.ajax({
		   type: "Get",
		   url: "/api/wvmpCountsAPI.do",		   
		   success: function(data){
		 		var json = eval('(' + data + ')');
		 		obj.totalCountWvyp = json.profileViewCount;
		 		obj.newCountWvyp = json.recentProfileViewCount;
		 		obj.totalNewCount = obj.newCountWsfy + obj.newCountWvyp;
		 		
		 		var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
				//wsfy
				if(obj.wsfyCountPersonal > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do'>" + obj.wsfyCountPersonal + wordTense(obj.wsfyCountPersonal, ' personal search',' personal searches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.newCountWsfy > 0) {
						h += "<a href='/searchMonitor.do' class='orange bold'>" + obj.newCountWsfy + " new</a>"
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
				}
				//Null Case
				else {
						h += "<tr><td colspan='2'  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do'>See searches for you</a></td></tr>";
				}
				
				// wsfy - work
				if(obj.wsfyCountWork > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do?type=wsfy&wsfymodule=professional'>" + obj.wsfyCountWork + wordTense(obj.wsfyCountWork, ' work search',' work searches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					h += "&nbsp;"
					h += "</td></tr>";
				}
				// wsfy - services
				if(obj.wsfyCountServices > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do?type=wsfy&wsfymodule=services'>" + obj.wsfyCountServices + wordTense(obj.wsfyCountServices, ' service search',' service searches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					h += "&nbsp;"
					h += "</td></tr>";
				}
				//wvyp
				if(obj.totalCountWvyp > 0) {
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/searchMonitor.do?type=wvmp'>" + obj.totalCountWvyp + " profile " + wordTense(obj.totalCountWvyp, 'view','views') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.newCountWvyp > 0) {
						h += "<a href='/searchMonitor.do?type=wvmp' class='orange bold'>" +obj.newCountWvyp + " new</a>"
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
				}
				h += "</table>";
				if(obj.totalNewCount > 0) {
					if(obj.totalNewCount > 99) {
						$("#" + div + " .new-count-caption").addClass("new-count-caption-100");
					}
					$("#" + div + " .new-count-caption").html(obj.totalNewCount + " new").fadeIn();
					$("#" + div + " .caption-white-box").html(h);
		 		}
		 	}
	 })
}
function loadWsfyCounts(url,div) {
	//WSFY
	var obj = new Object();
	$.ajax({
		   type: "Get",
		   url: url,		   
		   success: function(data){
		 		var json = eval('(' + data + ')');
		 		obj.totalNewCount = 0;
		 		obj.wsfyCountPersonal = parseInt(json.wsfyCount);		 		
		 		obj.wsfyCountWork = parseInt(json.wsfyWorkCount);
		 		obj.wsfyCountServices = parseInt(json.wsfyServiceCount);
		 		obj.newCountWvyp = parseInt(json.wsfyNewCount);
		 		obj.newCountWsfy = 0;
		 		obj.totalCountWsfy = obj.wsfyCountPersonal + obj.wsfyCountWork + obj.wsfyCountServices;
		 		loadWvmpCounts(obj,div);
		 	}
	 })
}
function loadQmsCount(sectionId) {
	//QMS

	var userNum = jQuery.trim($("#profile-user-id").html());
	var obj = new Object();
	$.ajax({
		   type: "Get",
		   url: "/json/qms/search?pagesize=40&pageNo=1&sort=DEFAULT&usernum="+userNum + "&countsOnly=true",
		   success: function(data){
		 		var json = eval(data);
		 		obj.totalCountQms = json.totalCount;
		 		obj.newCountQms = json.newMemberCount;
		 		//Non-null case
		 		if(obj.totalCountQms > 0 ) {
		 			var h = "<table width='100%' cellpadding='0' cellspacing='0'>";
					h += "<tr><td  valign='top' align='left' class='leftNavTdPad'><a href='/dating.do'>" + obj.totalCountQms + wordTense(obj.totalCountQms, ' Singles match',' Singles matches') + "</a></td>";
					h += "<td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
					if(obj.newCountQms > 0) {
						h += "<a href='/dating.do' class='orange bold'>" + obj.newCountQms + " new</a>";
					}
					else {
						h += "&nbsp;"
					}
					h += "</td></tr>";
		 			$("#"+sectionId).html(h);
		 		}
		 		//Null Case
		 		else {
		 			var nullText = "<a href='/dating.do'>View your matches now</a>";
	 				$("#" + sectionId).html(nullText);
		 		}
		 	}
	});
}
 function loadFindPeopleCounts(requestUrl,div)   {  
	 $.ajax({
		   type: "get",
		   url: requestUrl,		   
		   success: function(data){
		 		generateFindPeopleNav(data,div);
		   }
	 })
}
 function generateSchoolNav(data,div) {
	 var json = eval('(' + data + ')');
	 var schoolsObject = new Object();
	 schoolsObject = processJsonSchools(schoolsObject,json);
	 if(schoolsObject.schools.length > 0) {
	 	generateSchoolNavSkin(schoolsObject,div);
	 }
}
 function generateFindPeopleNav(data,div) {
	 var json = data;
	 var searchObject = new Object();
	 searchObject =  processJsonFindPeople(searchObject,json);
	 if(searchObject.totalCount > 0) {
	 	generateFindPeopleNavSkin(searchObject,div);
	 }
}
//Process json for the nav classlist
function processJsonSchools(obj, jsonObj) {
	obj.schools= new Array();
	obj.totalNewCount = 0;
	$.each(jsonObj, function(i,item){
		var s = new Object();
		s.city = item.school;
		s.state = item.state;
		s.schoolId = item.schoolId;
		s.schoolName = toProperCase(item.schoolName);
		s.startYear = item.startYear;
		s.endYear = item.endYear;
		s.gradYear = item.gradYear;
		s.totalCount = parseInt(item.totalClassCount);
		//s.countThirtyDays = item.lastThirtyDaysClassCount;
		//s.countNinetyDays = item.lastNinetyDaysClassCount;
		//s.countLastYear = item.lastYearClassCount;
		s.newCount = parseInt(item.newClassmatesCount);
		obj.totalNewCount = obj.totalNewCount + s.newCount;
		s.userSchool = item.userSchool;
		obj.schools[i] = s
	 });
	 return obj;
}
//Process json for the nav searches
function  processJsonFindPeople(obj, jsonObj) {
	obj.searches= new Array();
	obj.subscribed = jsonObj.subscribed;
	obj.totalCount = parseInt(jsonObj.totalCount);
	obj.totalNewCount = 0;
	$.each(jsonObj.resultList, function(i,item){
		var s = new Object();
		s.firstName = toProperCase(item.firstName);
		s.lastName = toProperCase(item.lastName);
		s.age = item.age;
		s.searchDate = item.searchDate;
		s.searchId = item.searchID;
		s.newCount =parseInt(item.newMatchCount);
		obj.totalNewCount = obj.totalNewCount + s.newCount;
		s.searchReason = item.searchReason;
		if(item.state == null) {
			s.state = "All";
		}
		else {
			s.state = item.state;
		}
		obj.searches[i] = s
	 });
	 return obj;
}
function generateSchoolNavSkin(obj,div) {
	var d = $("#" + div);
	var html = "<table width='100%' cellpadding='0' border='0'>";
	$.each(obj.schools,function(i,item) {
		if(i < 3) {
			html += "<tr><td valign='top' colspan='2' class='font11'><b>" + item.schoolName + "</b>";
			if(item.gradYear != "-1") {
				html += "<br/>Class of " + item.gradYear;
			}
			html += "</td></tr>";
			var schoolLink = "/classlist.do?school=" + item.schoolId + "&FLD_START_YEAR="+item.startYear + "&FLD_END_YEAR="+item.endYear;
			html += "<tr><td valign='top' align='left'><a href='" + schoolLink + "'>" + item.totalCount + "&nbsp;" + wordTense(item.totalCount, 'Classmate','Classmates') + "</a></td><td valign='top' align='right' class='leftNavNew'>";
			if(item.newCount > 0) {
				html += "<a href='" + schoolLink + "' class='orange bold'>" + item.newCount + " new</a>";
			}
			else {
				html += "&nbsp;";
			}
			html += "</td></tr>";
			html += "<tr><td colspan='2' class='leftNavSpacer'></td></tr>";
		}
	})
	if(obj.schools.length > 3) {
		html += "<tr><td valign='top' colspan='2'><a href='/schools.view' class='font12'>View all " + obj.schools.length + " schools &raquo;</a></td></tr>";
	}
	html += "</table>";
	
	if(parseInt(obj.totalNewCount) > 0) {
		if(obj.totalNewCount > 99) {
			$("#" + div + " .new-count-caption").addClass("new-count-caption-100");
		}
		$("#" + div + " .new-count-caption").html(obj.totalNewCount + " new").fadeIn();
		$("#" + div + " .caption-white-box").html(html);
	}	
}
function generateFindPeopleNavSkin(obj,div) {
	var d = $("#" + div);
	var html = "<table width='100%' cellpadding='0' border='0'>";
	$.each(obj.searches,function(i,item) {
		if(i < 3) {
			var firstSearch = "";
			if(i ==0) {
				firstSearch = " id='first-my-searches'";
			}
			if(obj.subscribed == true) {
				if(item.newCount > 0)
					var searchLink = '/newMemberMatch.do?searchType=name&pageName=people&wel_fname='+escape(item.firstName)+'&wel_lname='+escape(item.lastName)+'&wel_age='+item.age + '&state=' + item.state + "&searchReason=" + item.searchReason + '&sid=' + item.searchId;
				else
					var searchLink = '/peopleSearch.do?searchType=name&pageName=people&wel_fname='+escape(item.firstName)+'&wel_lname='+escape(item.lastName)+'&wel_age='+item.age + '&state=' + item.state + "&searchReason=" + item.searchReason + '&sid=' + item.searchId;
			}
			else {
				var searchLink = "/activateScout.do?searchFirstName=" + escape(item.firstName) + "&searchLastName=" + escape(item.lastName) + "&searchAge=" + item.age + '&state=' + item.state + "&searchReason=" + item.searchReason + '&sid=' + item.searchId;
			}
			
			html += "<tr><td valign='top' align='left' class='leftNavTdPad'><a href='" + searchLink + "'" + firstSearch + ">" + item.firstName + "&nbsp;" + item.lastName + ", " + item.age + "</a></td><td valign='top' align='right' class='leftNavNew  leftNavTdPad'>";
			if(item.newCount > 0) {
				html += "<a href='" + searchLink + "' class='orange bold'>" + item.newCount + " new</a>";
			}
			else {
				html += "&nbsp;";
			}
			html += "</td></tr>";
		}
	})
	if(obj.totalCount > 3) {
		html += "<tr><td colspan='2' class='leftNavSpacer'></td></tr>";
		html += "<tr><td valign='top' colspan='2'><a href='/findpeople.view' class='font12'>View all " + obj.totalCount + " active searches &raquo;</a></td></tr>";
	}
	html += "</table>";
	if(parseInt(obj.totalNewCount) > 0) {
		if(obj.totalNewCount > 99) {
			$("#" + div + " .new-count-caption").addClass("new-count-caption-100");
		}
		$("#" + div + " .new-count-caption").html(obj.totalNewCount + " new").fadeIn();
		$("#" + div + " .caption-white-box").html(html);
	}	
}$(document).ready(function() {

	var elNewCommentData = $('#newCommentData');

	elNewCommentData.bind("enterKey", function(e){
        var that = elNewCommentData;
        var message = that.val();
        var parentId = $('#dataContainer .id').html();
        var commentNetwork = $('#dataContainer .type').html();
        var commentAction;
        var commentData;
        var commentPostingText;
        var commentSuccessText;
        var commentErrorText;
        var commentDelay;  //how long to wait after posting comment to refresh comments

        var posterId;
        var userReply = $('#posterName').children('a').html().toLowerCase();
        var fromUserId;

        if(commentNetwork == 'facebook')
        {
            sendPageNameAndChannelToOmniture('Photo Overlay Comment Facebook', 'Social Engagement');
            commentAction = 'comment';
            commentPostingText = 'Sending comment...';
            commentSuccessText = 'Comment posted successfully!';
            commentErrorText = 'There was an error posting your comment, please try again later';
            commentDelay = 1;
            commentData = {
                userMessage: message
            }

        }
        else if (commentNetwork == 'twitter')
        {
            sendPageNameAndChannelToOmniture('Photo Overlay Comment Twitter', 'Social Engagement');
            commentAction = 'reply';
            commentPostingText = 'Sending reply...';
            commentSuccessText = 'Reply posted successfully!';
            commentErrorText = 'There was an error posting your reply, please try again later';
            commentDelay = 4000;
            commentData = {
                userMessage: userReply + ' ' + message
            }

        }
        
        var url = "/json/social/status";
    	$.get(url, "protocol=" + getProtocol(), function(response) {
			var json = response;
			$.each(json, function(nKey, nData){
				if (nData.name == commentNetwork && nData.isConnected == true) {
					fromUserId = nData.identity.providerUID;
				}
			});
		});
        
        that.val(commentPostingText);
        that.attr('readOnly',true);
        that.attr('disabled',true);

        $.post(
            '/json/social/'+commentAction+'/'+ commentNetwork +'/' + parentId, commentData,
            function(response) {
                that.removeAttr('readOnly');
                that.removeAttr('disabled');
                window.setTimeout(function() {
                    if(response.success == "1")
                    {
                        $.getJSON('/json/social/feeds/'+commentNetwork+'/' + parentId, function(postData) {
                            $(that).blur();

                            if(commentNetwork == 'twitter') {
                                posterId  = postData.id;
                                //twitter count
                                if (typeof(postData.comments) != "undefined") {
                                    refreshModalComments(postData.comments,fromUserId);
                                } else {
                                   $('#comments').html('');
                                }

                                //get replies
                                $.getJSON('/json/social/feeds/twitter/', function(twitterRelated) {
                                    refreshTwitterRelated(twitterRelated,posterId,fromUserId);
                                });

                            } else {
                                if (typeof(postData.comments) != "undefined") {
                                    refreshModalComments(postData.comments,fromUserId);
                                }
                            }

                            $('#newCommentData, #newComment .clear').remove();
                            $('#newComment').append('<textarea id="newCommentData">'+commentSuccessText+'</textarea><div class="clear"></div>');
                        });
                    }
                }, commentDelay);
            },
            'json'
       );
    });

	elNewCommentData.bind('keyup',function(e){
        if(e.keyCode == 13)
        {
          $(this).trigger("enterKey");
        }
    });

	elNewCommentData.bind('focus',function() {
       if($(this).val() == 'Write a comment...' || $(this).val() == 'Comment posted successfully!' || $(this).val() == 'Reply to the original tweet' || $(this).val() == 'Reply posted successfully!') $(this).val('');
    });

	elNewCommentData.bind('blur',function() {
        if($(this).val == '')
        {
            if($('#dataContainer .type').html() == 'facebook') $(this).val('Write a comment...');
            else if($('#dataContainer .type').html() == 'twitter') $(this).val('Reply to the original tweet');
        }
    });

    $('#photoPopup #postInteractions .retweet').bind('click',function() {
        var that = $(this);
        $.post('/json/social/retweet/twitter/' + $('#dataContainer .id').html(), function(data) {
            if(data.success != "1") alert("There was an error retweeting your post, it is possible you have already retweeted this message before.");
            that.fadeOut();
        });
    });

    $('#photoPopup #postInteractions .like').bind('click',function() {
        var that = $(this);
        var likeCount = 0;
        var likeText = '';
        $.post('/json/social/'+$(this).html().toLowerCase()+'/'+ $('#dataContainer .type').html() +'/' + $('#dataContainer .id').html(), function(data) {
            if(data.success = 1 && that.html() == 'Like') { 
            	that.html('Unlike');
            	likeText = that.siblings("span").children("a").html();
            	likeText = parseInt(likeText);
            	likeText = likeText + 1;
        		if (likeText == 0) {
            		likeText = "0 people";
            	} else {
            		if (likeText == 1) {
            			likeText = "1 person";
            		} else {
            			likeText = likeText + " people";
            		}
            	}
            	that.siblings("span").children("a").html(likeText);
            	
            } else if(data.success = 1 && that.html() == 'Unlike')  {
            	that.html('Like');
            	likeText = that.siblings("span").children("a").html();
            	likeText = parseInt(likeText);
            	likeText = likeText - 1;
            	if (likeText == 0) {
            		likeText = "0 people";
            	} else {	
            		if (likeText == 1) {
            			likeText = "1 person";
            		} else {
            			likeText = likeText + " people";
            		}
            	}
            	that.siblings("span").children("a").html(likeText);
            } else {
            	alert("There was an error liking this post, please try again later.");
            }
        },'json');
    });
    $('#commentContain #comments .comment .delete').bind('click',function() {
        var that = $(this);
       	var id = $(this).attr("id");
		id = id.split(",");
		
		var type = id[0];
		var action = id[1];
		var idData = id[2];
		var url = "json/social/"+action+"/"+type+"/"+idData;
    		
		$.ajax({
			type:"POST",
			url: url,
			success: function(data) {
				if(data.success = 1) { 
					that.parent().remove();  	            
	            } else {
	            	alert("There was an error deleting this post, please try again later.");
	            }
			}
		});
       
    });  
    
    $('#commentContain #comments .comment .like').bind('click',function() {
        var that = $(this);
        var linkInfo = $(this).attr('id').split('-');
        var linkId = linkInfo[0];
        var linkTime = linkInfo[1];
        
        
        $.post('/json/social/'+$(this).html().toLowerCase()+'/'+ $('#dataContainer .type').html() +'/' + linkId, function(data) {
            if(data.success = 1 && that.html() == 'Like') {
            	that.html('Unlike');
            	
            } else if(data.success = 1 && that.html() == 'Unlike') {
            	that.html('Like');
            	
            } else {
            	alert("There was an error liking this post, please try again later.");
            }
        },'json');
    });

    function refreshModalComments(commentData,fromUserId)
    {	
    	var dataCount = 0;
        var commentNetwork = $('#dataContainer .type').html();
        var fromUser = fromUserId;
        var deleteText = '';
        
        if(commentNetwork == 'facebook') {
            if (typeof(commentData.count) != "undefined") {
                dataCount = commentData.count;
            } else {
                dataCount = commentData.data;
                dataCount = dataCount.length;
            }
        }
        else if(commentNetwork == 'twitter')
        {
            dataCount = commentData.retweetCount;
        }

        $('#comments').html('');
        if(dataCount > 0)
        {
            var comments = new Array(); //this stores all the comments for processing and injection
            if(commentNetwork == 'facebook')
            {
                $.each(commentData.data, function(index, comment) {
                	
                	if (fromUser == comment.from.id) {                		
                		deleteText = '<a id="facebook,delete,'+comment.id+','+fromUser+','+comment.id+'" href="javascript: void(0)" class="delete"></a>';
                	} else {
                		deleteText = '';
                	}
                	
                    var currentComment = {
                        id: comment.id,
                        posterName: comment.from.name,
                        posterImage: '/json/social/picture/facebook/' + comment.from.id,
                        posterLink: 'http://www.facebook.com/'+comment.from.id,
                        message: comment.message,
                        createdOn: Date.parse(comment.created_time),
                        createdOnText: 'Posted ' + getTimeStamp(Date.parse(comment.created_time)),
                        interactions: '<a id="'+comment.id+'-'+Date.parse(comment.created_time)+'" href="javascript: void(0)" class="like">Like</a>',
                        deleteInteractions: deleteText
                    };

                    comments.push(currentComment);//add this comment to the comments array
                });

            } else if(commentNetwork == 'twitter') {

            }

            $.each(comments, function(index, comment) {
                $('#comments').append('\
                    <div class="comment">'+comment.deleteInteractions+'\
                        <img class="userHeadShot" src="'+comment.posterImage+'">\
                        <div class="commentContent">\
                            <a class="commenterName" href="'+comment.posterLink+'">'+comment.posterName+'</a>\
                            '+comment.message+'\
                            <div class="commentInteraction">\
                                <div class="commentPostDate">'+comment.createdOnText+'</div>\
                                '+comment.interactions+'\
                                <div class="clear"></div>\
                            </div>\
                        </div>\
                        <div class="clear"></div>\
                    </div>\
                ');
            });

            //scroll to bottom comment
            if($('#photoContainer #comments').height() > 250) $('#comments').css('overflow-y','scroll');
            else $('#comments').css('overflow-y','hidden');
            $('#comments').attr('scrollTop', $('#comments').attr('scrollHeight'));

        }
    }
    
    //twitter related replies
    function refreshTwitterRelated(twitterRelated,posterId,fromUserId)
    {	
    	var dataCount = 0;
    	var postId = posterId;
    	var fromUser = fromUserId;
    	var deleteText = '';
    	
        $('#comments').html('');        
        
        var comments = new Array(); //this stores all the comments for processing and injection
        
        $.each(twitterRelated, function(index, comment) {
            if (postId == comment.data.replyToStatusId) {
            	
            	//console.log(comment.data.replyToStatusId);
            	
            	if (fromUser == comment.data.fromUserId) {
            		deleteText = '<a id="twitter,delete,'+comment.data.idStr+','+comment.identity.photoURL+','+comment.providerId+'" href="javascript: void(0)" class="delete"></a>';
            	} else {
            		deleteText = '';
            	}
            	
            	var currentComment = {
                    id: comment.data.idStr,
                    posterName: comment.data.fromUser,
                    posterImage: comment.data.profileImageUrl,
                    posterLink: 'http://www.twitter.com/#!/'+comment.data.fromUser,
                    message: comment.data.text,
                    createdOn: getTimeStamp(comment.data.createdAt),
                    createdOnText: 'Posted ' + getTimeStamp(comment.data.createdAt),
                    interactions: '',
                    deleteInteractions: deleteText
                    //interactions: '<a id="'+comment.id+'-'+Date.parse(comment.created_time)+'" href="javascript: void(0)" class="like">Like</a>'
                };
                comments.unshift(currentComment);//add this comment to the comments array
            }
        });
	
        $.each(comments, function(index, comment) {
            $('#comments').append('\
                <div class="comment">'+comment.deleteInteractions+'\
                    <img class="userHeadShot" src="'+comment.posterImage+'">\
                    <div class="commentContent">\
                        <a class="commenterName" href="'+comment.posterLink+'">'+comment.posterName+'</a>\
                        '+comment.message+'\
                        <div class="commentInteraction">\
                            <div class="commentPostDate">'+comment.createdOnText+'</div>\
                            '+comment.interactions+'\
                            <div class="clear"></div>\
                        </div>\
                    </div>\
                    <div class="clear"></div>\
                </div>\
            ');
        });

        //scroll to bottom comment
        if($('#photoContainer #comments').height() > 250) $('#comments').css('overflow-y','scroll');
        else $('#comments').css('overflow-y','hidden');
        $('#comments').attr('scrollTop', $('#comments').attr('scrollHeight'));
    
    }

	// events for esc keypress
	$(document).keypress(function(e) {
		var c = e.which ? e.which : e.keyCode;
		if(c == 27){
			clearAllError();
			$("#life-event-overlay").addClass("display-none");

			$(".retweet-overlay:visible").each( function() {
				$(".retweet-overlay").addClass("display-none");
			});
	    }
	});

	//event for calendar focus
	$("#datepicker").live('focus',function() {
		clearAllError();
		$("#datepicker").datepicker({
		});
	});
	//event for calendar icon click
	$("#icon-calendar").live('click',function() {
		clearAllError();
		var dateBoolean = $("#ui-datepicker-div").css("display");
		if (dateBoolean == "block") {
			$("#ui-datepicker-div").css("display","none");
		} else {
			$("#datepicker").focus();
			$("#datepicker").focus();
		}
	});

	$(".shareMyLife").live('click', function() {
		shareMyLife(1);
		return false;
	});

	$(".shareMyLife2").bind('click', function() {
		shareMyLife(2);
		return false;
	});

	$(".shareMyLife3").bind('click', function() {
		shareMyLife(3);
		return false;
	});

	$(".likeMyLife").live('click', function() {
		if ($("#likeOverlay").hasClass("display-none")) {

			var url = "/json/social/status";
			var connected = 0;
			var position = $(this).position();
			var top = position.top - 231;

			$.get(url, function(response) {

				$.each(response, function(index,value) {
					if (value.isConnected) {
						data = value.name;
						$("input.postShare").each(function() {
							switch(data) {
								case "facebook":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
								break;
								case "twitter":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
								break;
								case "linkedin":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
								break;
								default:
							}
						});
					} else {
						data = value.name;
						$("input.postShare").each(function() {
							switch(data) {
								case "facebook":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
								break;
								case "twitter":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
								break;
								case "linkedin":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
								break;
								default:
							}
						});
					}

				});

				if (connected == 0) {
					openEngageImportOverlay();
					//Omniture Success Call
					sendPageNameAndChannelToOmniture('Social Engagement: Initiate Share/Like' ,'Social Engagement');
				} else {
					$("#likeOverlay").addClass("display-block");
					$("#likeOverlay").removeClass("display-none");
					$("#likeOverlay").css("top",top+"px");
					$("#likeOverlay").css("left",position.left+"px");
					$("#likeOverlay").css("z-index","100000");
					//Omniture Success Call
					sendPageNameAndChannelToOmniture('Social Engagement: Initiate Share/Like' ,'Social Engagement');
				}
			});
		}

		return false;

	});


	$(".noShare").bind('click', function() {
		if ($("#likeOverlay").hasClass("display-block")) {
			$("#likeOverlay").addClass("display-none");
			$(".postShare").removeAttr("checked");
			$("#likeOverlay").removeClass("display-block");
		}
		return false;
	});
	$(".noShare2").bind('click', function() {
		if ($("#likeOverlay2").hasClass("display-block")) {
			$("#likeOverlay2").addClass("display-none");
			$(".postShare").removeAttr("checked");
			$("#likeOverlay2").removeClass("display-block");
		}
		return false;
	});
	$(".noShare3").bind('click', function() {
		if ($("#likeOverlay3").hasClass("display-block")) {
			$("#likeOverlay3").addClass("display-none");
			$(".postShare").removeAttr("checked");
			$("#likeOverlay3").removeClass("display-block");
		}
		return false;
	});
	$("a.add-network-link").bind('click',function() {
		var url = $(this).attr("url");
		var newWindow = null;
		newWindow = window.open(url, 'addConnection','width=400,height=400');
		sendPageNameAndChannelToOmniture('Social Engagement - Add Network', 'Social Engagement');
		newWindow.focus();
	});

	$("#loginEmailNull").bind('click', function() {
		if($("#userid").val() == "" || $("#password").val() == "") {
			var emailDefautlText = "Enter your email address";
			var url = "/json/social/status";
			$.get(url, function(response) {
				var json = response;
				var socialObj = new Object();
				socialObj = processNetworkStatus(json,socialObj);

				var totalEmailConnection = socialObj.emailConnected;

				if (totalEmailConnection > 0) {
					emailDefautlText = "enter another email";
				}
			});

			$("#inbox-validation").html("Please enter your username and password.").removeClass("displayNone");

			$("#loginEmailNull").addClass("displayNone");
			$("#password").val("");
			$("#password").addClass("displayNone");
			$("#passwordText").removeClass("displayNone");
			$("#password").parent().addClass("displayNone");
			//$("#userid").addClass("default-font");
			//$("#userid").val(emailDefautlText);
			$("#userid").focus();
			timeValidateEmail();
		} else {
			connectEmailNull();
		}
		return false;
	});


	$("#email-connect-cancel").bind('click',function() {
		window.close();
		/*if (!$("#email-connect").hasClass("displayNone")) {
			$("#email-connect").addClass("displayNone");
			$("#userid").val("");
			$("#password").val("");
		*/
	});

	$("a.disconnect-network-link").live('click',function() {
		var url = $(this).attr("url");
		if (url != "undefined") {
			$.get(url,function(resp) {
				if(parseInt(resp.success) == 1) {
					getNetworkStatus();
					sendPageNameAndChannelToOmniture('Social Engagement - Delete Network', 'Social Engagement');
				}
				else {
					//Show the error message field = "message"
					$("#networks-error").html(resp.message).show();
				}
			});
		} else {
			var provider = $(this).parent("div").siblings('div.name').html();
			provider = provider.toLowerCase();
			url = "/json/social/disconnect/email/" + provider;
			$.get(url, function(response) {
				if (response.success == 1) {
					getNetworkStatus();
					$("#refreshBoolean").html("true");
				}
			});
		}
	});
	$(".socialActionClick").live("click", function() {
		clearAllError();
		var id = $(this).attr("id");
		id = id.split(",");
		var type = id[0];
		var action = id[1];
		var idData = id[2];
		var photo = id[3];
		var from = id[4];

		socialValidateAction(type,action,idData,photo,from);
		//socialValidateAction('"+d.type+"','reply','"+d.data.idStr+"','"+d.identity.photoURL+"','"+d.data.fromUser+"')
	});

	$(".comment-cancel-post-bttn").live("click", function() {
		clearAllError();
		var id = $(this).attr("id");
		id = id.split(",");
		var type = id[1];
		var action = id[2];
		var idData = id[3];
		socialValidateAction(type,action,idData);
	});
	$(".socialRetweetAction").live("click", function() {
		clearAllError();
		$(".retweet-overlay").addClass("display-none");
		var id = $(this).attr("id");
		id = id.split("-");
		var type = "twitter";
		var action = "retweet";
		var idData = id[2];
		retweetOverlay(type,action,idData);
	});
	$(".retweet-close").live("click", function() {
		clearAllError();
		var id = $(this).attr("id");
		id = id.split(",");
		var type = id[1];
		var action = id[2];
		var idData = id[3];
		retweetOverlayClose(type,action,idData);
	});
	$(".comment-cancel-retweet-bttn").live("click", function() {
		clearAllError();
		var id = $(this).attr("id");
		id = id.split("-");
		var type = id[0];
		var action = id[1];
		var idData = id[2];
		retweetOverlayClose(type,action,idData);
	});
	$(".retweet-post-bttn").live("click", function() {
		clearAllError();
		var id = $(this).attr("id");
		id = id.split("-");
		var type = id[1];
		var action = id[2];
		var idData = id[3];
		postSocialAction(type,action,idData);
	});


	var elImportHelpLink = $("a#import-help-link");
	if(elImportHelpLink.length) {
		var elNetworksCaption =  $("#networks-caption");
		var elImportHelpLinkEmail = $('a#import-help-link-email');
		var elNetworksCaptionEmail = $("#networks-caption-email");

		if($('body').hasClass('isMobile'))  {
			elImportHelpLink.bind("click", function() {
				elNetworksCaption.toggle(elNetworksCaption.is(':hidden'));
			});
			elImportHelpLinkEmail.bind("click", function() {
				if(elNetworksCaptionEmail.is(':hidden')) {
					elNetworksCaptionEmail.show();
				} else {
					elNetworksCaptionEmail.addClass("display-none").hide();
				}
			});
		} else {
			elImportHelpLink.bind("mouseover", function() {	elNetworksCaption.show(); });
			elImportHelpLink.bind("mouseout", function() { elNetworksCaption.hide(); });

			elImportHelpLinkEmail
				.bind("mouseover", function() {
					elNetworksCaptionEmail.show();
				})
				.bind("mouseout", function() {
					elNetworksCaptionEmail.hide();
				});
		}
	}


	$(".close-engage-link").bind('click',function() {
		var isEngagePage = false;
		var isPoPage = false;
		var page = document.location.toString();
		if(page.indexOf("home.do") > -1) {
			isEngagePage = true;
		}
		if(page.indexOf("regConfirmation.do") > -1) {
			isPoPage = true;
		}
		closeModal();

		// If they've connect to 1+ networks, give them the confirmation dialog
		var url = "/json/social/status";
		$.get(url,
			function(response) {
				var json = response;
				var socialObj = new Object();
				socialObj = processNetworkStatus(json,socialObj);
				if(socialObj.totalConnected > 0) {
					if(isEngagePage) {
						document.location = "/home.do";
					}
					else {
						// Now display to confirmation dialog
						if(isPoPage == false) {
							$("#globalOverlayConfirmContainer").modal({
								close:true,
					    		overlayId:"confirm-overlay",
					    		containerId:"confirm-container",
					    		overlayClose:true,
								onShow:function() {
									$("#confirm-container").addClass("engage-confirm-container");
									var confirmText = "<span class='font16'>You can access Social Networks and Email<br/>from your <a href='/home.do' class='white bold'>MyLife Home Tab</a>.</span><br/>";
									$("#confirm-container .globalOverlayContent").html("<div class='engage-confirm-content'>" + confirmText + "</div>");
									$("#confirm-container").delay(3000).fadeOut(500,
										function() {
											$.modal.close();
										}
									);
								}
							});
						}
						//end confirmation
					}
				}
				// 0 Networks
				else {
					/// Figure out if the user is on the home/engage page.
					if(isEngagePage) {
						document.location = "/home.do";
					}
				}
		});
	});

	//events for input click enter

	$(".comment-enter").live("keypress", function(e) {
		var eId = $(this).attr("id");
		eId = eId.split(".");
		var c = e.which ? e.which : e.keyCode;
		if(c == 13){
			clearAllError();
			postSocialAction(eId[1],eId[2],eId[3]);
			return false;
	    }

	});
	$("#viewAllLink").live('click',function() {
		$("#showIcon-facebook").removeClass("engage-social-facebook-disabled");
		$("#showIcon-twitter").removeClass("engage-social-twitter-disabled");
		$("#showIcon-linkedin").removeClass("engage-social-linkedin-disabled");
		$("#showIcon-facebook").parent("li").removeClass("noshow-active");
		$("#showIcon-twitter").parent("li").removeClass("noshow-active");
		$("#showIcon-linkedin").parent("li").removeClass("noshow-active");
		$("#showIcon-facebook").parent("li").addClass("active");
		$("#showIcon-twitter").parent("li").addClass("active");
		$("#showIcon-linkedin").parent("li").addClass("active");
		refreshSocialFeeds();
		return false;
	});


	$(".linkendInViewComment").live("click", function() {
		var id = $(this).attr("id");
		showLinkedInComments(id);
	});
	$(".getViewComments").live("click", function() {
		var id = $(this).attr("id").split(".");
		var s1 = id[0];
		var s2 = id[1];
		var show = $("#userComment-"+s2).children(".comment-feed-container").length;

		if(show == 0) {
			show = 20;
		} else {
			show = 1;
		}

		getViewComments(s1,s2,show);
	});

	/*("#btnRight").live("click", function() {
		animatePane2();
	});*/

	/*("#moreSocialActivity").live("click", function() {
		animatePane();
	});*/

	/*$("#moreEmails").live("click", function() {
		var currentSrc = document.getElementById('min-inbox').src;
		currentSrc = currentSrc.replace("sidebar=true&","");
		document.getElementById('min-inbox').src = currentSrc;
		animatePane2();
	});*/

	$(".paneBtnContainer h2").bind("click", animatePane);
	$("#engage-feeds-2 li").live("click", animatePane);
});

// temp; removed later
/*function receiveFromInbox(data) {
	animatePane2();
}*/

function animatePane2() {
	if ($("#social-wrapper").width() != 262) {

		if ($("#likeOverlay").hasClass("display-block")) {
			$("#likeOverlay").addClass("display-none");
			$(".postShare").removeAttr("checked");
			$("#likeOverlay").removeClass("display-block");
		}

		if ($("#likeOverlay2").hasClass("display-block")) {
			$("#likeOverlay2").addClass("display-none");
			$(".postShare").removeAttr("checked");
			$("#likeOverlay2").removeClass("display-block");
		}

		if ($("#likeOverlay3").hasClass("display-block")) {
			$("#likeOverlay3").addClass("display-none");
			$(".postShare").removeAttr("checked");
			$("#likeOverlay3").removeClass("display-block");
		}

		if ($("#feeds-content").hasClass("display-none")) {
			$("#feeds-content-min").addClass("display-none");
			$("#feeds-content").removeClass("display-none");
			$("#likeMyLife").removeClass("display-none");
		} else {
			$("#feeds-content").addClass("display-none");
			$("#feeds-content-min").removeClass("display-none");
			$("#social-wrapper").addClass("box-inner-shadow");

			$("#likeMyLife").addClass("display-none");

			//see more email link
			if (!$("#moreEmailsContainer").hasClass("display-none")) {
				$("#moreEmailsContainer").addClass("display-none");
			}
		}

		$("#inbox-wrapper").animate({
			width: '945px'
		});

		$("#social-wrapper").animate({
			width: '262px'
		});

		$("#frameWrapperr").css('oveflow','visible');

		$("#min-inbox").animate({
			width: '940px',
			height: '950px'
		});

		$("#inbox-container").delay(500).queue(function() {
			$("#inbox-container").css("position", "static");
			var pos = $("#inbox-content-min").offset();
			$("#inbox-container").css("top", pos.top+"px");
		});

		$("#feeds-content-min-2").delay(500).queue(function() {
			$("#feeds-content-min-2").css("position", "static");
			var pos = $("#feeds-content-min").offset();
			$("#feeds-content-min-2").css("top", pos.top+"px");
		});

		if ($("#social-null:visible").length == 0) {
			initTinyScrollbar();
			//trigger auto scroll for animation
			var pos = $("#feeds-content-min-2").offset();
			$(window).scrollTop(pos.top);
		}

		/*
		$("#inbox-container").css("position", "static");
		var pos = $("#inbox-content-min").offset();
		$("#inbox-container").css("top", pos.top+"px");
		*/
	}
}

//animation pane
function animatePane() {
	//remove url and add default url delay 2 milliseconds for IE animation
	setTimeout("changeIframeSrc()", 200);

	if ($("#likeOverlay").hasClass("display-block")) {
		$("#likeOverlay").addClass("display-none");
		$(".postShare").removeAttr("checked");
		$("#likeOverlay").removeClass("display-block");
	}

	if ($("#likeOverlay2").hasClass("display-block")) {
		$("#likeOverlay2").addClass("display-none");
		$(".postShare").removeAttr("checked");
		$("#likeOverlay2").removeClass("display-block");
	}

	if ($("#likeOverlay3").hasClass("display-block")) {
		$("#likeOverlay3").addClass("display-none");
		$(".postShare").removeAttr("checked");
		$("#likeOverlay3").removeClass("display-block");
	}

	/*var pos = $("#inbox-content-min").offset();
	var scrollY = $(window).scrollTop();
	$("#inbox-container").css("position", "static");
	$("#inbox-container").css("top", pos.top+"px");*/

	$("#inbox-container").delay(500).queue(function() {
		$("#inbox-container").css("position", "static");
		var pos = $("#inbox-content-min").offset();
		$("#inbox-container").css("top", pos.top+"px");
	});

	$("#feeds-content-min-2").delay(500).queue(function() {
		$("#feeds-content-min-2").css("position", "static");
		var pos = $("#feeds-content-min").offset();
		$("#feeds-content-min-2").css("top", pos.top+"px");
	});

	$("#inbox-wrapper").animate({
		width: '262px'
	});

	$("#social-wrapper").animate({
		width: '690px'
	});

	$("#frameWrapperr").css('oveflow','hidden');

	$("#min-inbox").animate({
		width: '262px',
		height: '640px'
	});

	if ($("#feeds-content").hasClass("display-none")) {
		$("#feeds-content-min").addClass("display-none");
		$("#feeds-content").removeClass("display-none");
		//$("#btnRight").removeClass("display-none");
		$("#likeMyLife").removeClass("display-none");
		$("#social-wrapper").removeClass("box-inner-shadow");
		//see more email link
		if ($("#moreEmailsContainer").hasClass("display-none")) {
			$("#moreEmailsContainer").removeClass("display-none");
		}

	} else {
		$("#feeds-content").addClass("display-none");
		$("#feeds-content-min").removeClass("display-none");
		//$("#btnRight").addClass("display-none");
		$("#likeMyLife").addClass("display-none");
	}
}
function changeIframeSrc() {
	var sideBar = "?sidebar=true&";
	var fromDomain = "fromDomain=" + window.location.hostname;
	var inboxDomain = $("#inboxUrl").val();
	var url = inboxDomain+sideBar+fromDomain;
	document.getElementById('min-inbox').src = url;
}
function clearAllError() {
	$("#postform-error").html("");
	$("#postform-error-response").html("");
}
function getViewComments(s,id,show) {
	var type = s;
	var mId = id;
	var numShow;
	if (show == 1) {
		numShow = 1;
	} else {
		numShow = 20;
	}
	var url;

	switch(type) {
		case "facebook":
			url = "/json/social/feeds/"+type+"/"+mId;
			break;
		case "linkedin":
			url = "/json/social/feeds/"+type;
			break;
		default:
	}
	$.get(url,
		function(response) {
			var json = response;
			var obj = new Object();
			createViewComments(type,mId,json,obj,numShow);
		});
}
function createViewComments(type,mId,json,obj,numShow) {
	obj = json;
	var arr = new Array(obj);

	//comment feeds
	var divComments;
	var divCommentsPhoto;
	var divCommentsPhotoImage;
	var divCommentsPhotoImageLink;
	var divCommentFrom;
	var divCommentLink;

	var divCommentLike;
	var divCommentLikeText;
	var divCommentLikeCounter;
	var divCommentLikeCounterText;

	var divCommentMessage;
	var divCommentCreated;
	var divCommentTextContainer;
	var divCommentCreatedContainer;
	var divCommentsFeedContainer;

	var commentMessage;
	var commentLikeCount;
	var commentId;
	var	commentCreated;
	var commentFromName;
	var	commentFromId;
	var commentFromImage;
	var commentDate;
	var commentTime;

	var commentViewContainer;
	var commentViewArrow;
	var commentView;
	var commentViewCounterContainer;
	var commentViewCountText;

	$("#userComment-"+mId).html("");

	switch (type) {
	case "linkedin":
		$.each(obj,function(i,d) {
			commentViewCountText = "";

			if (d.data.timestamp == mId) {

				$.each(d.data.updateComments.updateCommentList, function(iC,dC) {

					if (iC == 0 && d.data.updateComments.updateCommentList.length > 1) {
						commentViewContainer = document.createElement("div");
						commentViewArrow = document.createElement("div");

						if (numShow == 1) {
							$(commentViewArrow).attr("class","blue-arrow-right");
						} else {
							$(commentViewArrow).attr("class","blue-arrow-down");
						}

						$(commentViewArrow).attr("id","blue-arrow-right-"+d.id);
						commentViewContainer.appendChild(commentViewArrow);

						commentView = document.createElement("a");
						$(commentView).attr("href","javascript:void(0)");
						$(commentView).attr("class","getViewComments")
						$(commentView).attr("id",type+"."+d.data.timestamp);

						if (numShow == 1) {
							commentViewText = document.createTextNode("View more comments");
						} else {
							commentViewText = document.createTextNode("View fewer comments");
						}

						commentView.appendChild(commentViewText);
						commentViewContainer.appendChild(commentView);

						$("#userComment-"+mId).append(commentViewContainer);
					}

					if (numShow == 1) {
						if(iC == (d.data.updateComments.updateCommentList.length-1)) {
							commentMessage = dC.comment;
							commentId = dC.id;
							commentCreated = dC.timestamp;
							commentFromName = dC.person.firstName + " " + dC.person.lastName;
							commentFromId = dC.person.id;
							commentFromImage = dC.person.pictureUrl;

							divCommentsFeedContainer = document.createElement("div");

							$(divCommentsFeedContainer).attr("class","comment-feed-container-first");

							divCommentsPhoto = document.createElement("div");
							$(divCommentsPhoto).attr("class","comment-photo");

							divCommentsPhotoImage = document.createElement("img");
							$(divCommentsPhotoImage).attr("src",commentFromImage);
							divCommentsPhoto.appendChild(divCommentsPhotoImage);

							divCommentTextContainer = document.createElement("div");
							$(divCommentTextContainer).attr("class","userCommentTextContainer");

							divCommentFrom = document.createTextNode(commentFromName);
							divCommentMessage = document.createTextNode(commentMessage);

							divCommentCreatedContainer = document.createElement("div");
							$(divCommentCreatedContainer).attr("class","color-light-gray-2");

							if (commentCreated != "") {
								dateObj = new Date(commentCreated);
							}
							//dateObj = new Date();
							//dateObj.setISO8601(commentCreated);

							divCommentCreated = document.createTextNode("Posted on " + dateObj);

							divCommentCreatedContainer.appendChild(divCommentCreated);

							divCommentLink = document.createElement("a");
							if (typeof(d.data.updateContent.person) != "undefined" && typeof(d.data.updateContent.person.siteStandardProfileRequest) != 'undefined' && typeof(d.data.updateContent.person.siteStandardProfileRequest.url) != 'undefined') {
								$(divCommentLink).attr("href",d.data.updateContent.person.siteStandardProfileRequest.url);
							}
							$(divCommentLink).attr("class","bold padding-right-5");
							$(divCommentLink).attr("target","_blank");
							divCommentLink.appendChild(divCommentFrom);

							divCommentTextContainer.appendChild(divCommentLink);
							divCommentTextContainer.appendChild(divCommentMessage);
							divCommentTextContainer.appendChild(divCommentCreatedContainer);

							divCommentsFeedContainer.appendChild(divCommentTextContainer);
							divCommentsFeedContainer.appendChild(divCommentsPhoto);

							$("#userComment-"+mId).append(divCommentsFeedContainer);
						}

					} else {

						if (iC < numShow) {

							commentMessage = dC.comment;
							commentId = dC.id;
							commentCreated = dC.timestamp;
							commentFromName = dC.person.firstName + " " + dC.person.lastName;
							commentFromId = dC.person.id;
							commentFromImage = dC.person.pictureUrl;

							divCommentsFeedContainer = document.createElement("div");

							if (iC == 0) {
								$(divCommentsFeedContainer).attr("class","comment-feed-container-first");
							} else {
								$(divCommentsFeedContainer).attr("class","comment-feed-container");
							}
							divCommentsPhoto = document.createElement("div");
							$(divCommentsPhoto).attr("class","comment-photo");

							divCommentsPhotoImage = document.createElement("img");
							$(divCommentsPhotoImage).attr("src",commentFromImage);
							divCommentsPhoto.appendChild(divCommentsPhotoImage);

							divCommentTextContainer = document.createElement("div");
							$(divCommentTextContainer).attr("class","userCommentTextContainer");

							divCommentFrom = document.createTextNode(commentFromName);
							divCommentMessage = document.createTextNode(commentMessage);

							divCommentCreatedContainer = document.createElement("div");
							$(divCommentCreatedContainer).attr("class","color-light-gray-2");

							dateObj = new Date(commentCreated);
							divCommentCreated = document.createTextNode("4 " + dateObj);
							divCommentCreatedContainer.appendChild(divCommentCreated);

							divCommentLink = document.createElement("a");
							$(divCommentLink).attr("href",d.data.updateContent.person.siteStandardProfileRequest.url);
							$(divCommentLink).attr("class","bold padding-right-5");
							$(divCommentLink).attr("target","_blank");
							divCommentLink.appendChild(divCommentFrom);

							divCommentTextContainer.appendChild(divCommentLink);
							divCommentTextContainer.appendChild(divCommentMessage);
							divCommentTextContainer.appendChild(divCommentCreatedContainer);

							divCommentsFeedContainer.appendChild(divCommentTextContainer);
							divCommentsFeedContainer.appendChild(divCommentsPhoto);

							$("#userComment-"+mId).append(divCommentsFeedContainer);
						}
					}
				});

				if (numShow != 1) {
					if (d.data.updateComments.updateCommentList.length > 20) {
						divCommentsFeedContainer = document.createElement("div");
						$(divCommentsFeedContainer).attr("class","comment-feed-container");
						commentView = document.createElement("a");
						$(commentView).attr("href",d.data.updateContent.person.siteStandardProfileRequest.url);
						$(commentView).attr("target","_blank");
						commentViewText = document.createTextNode("View more comments");
						commentView.appendChild(commentViewText);
						divCommentsFeedContainer.appendChild(commentView);
						$("#userComment-"+mId).append(divCommentsFeedContainer);
					}
				}
			}

		});
		break;
	case "facebook":
		$.each(arr,function(i,d) {

			if (typeof(d.comments) != "undefined") {

				$.each(d.comments.data,function(iC,dC) {

					if (iC == 0 && d.comments.data.length > 1) {
						commentViewContainer = document.createElement("div");
						commentViewArrow = document.createElement("div");

						if (numShow == 1) {
							$(commentViewArrow).attr("class","blue-arrow-right");
						} else {
							$(commentViewArrow).attr("class","blue-arrow-down");
						}

						$(commentViewArrow).attr("id","blue-arrow-right-"+d.id);
						commentViewContainer.appendChild(commentViewArrow);

						commentView = document.createElement("a");
						$(commentView).attr("href","javascript:void(0)");
						$(commentView).attr("class","getViewComments")
						$(commentView).attr("id",type+"."+d.id);

						if (numShow == 1) {
							commentViewText = document.createTextNode("View more comments");
						} else {
							commentViewText = document.createTextNode("View fewer comments");
						}

						commentView.appendChild(commentViewText);
						commentViewContainer.appendChild(commentView);

						commentViewCounterContainer = document.createElement("span");
						$(commentViewCounterContainer).attr("class","color-blue");
						commentViewCountText = document.createTextNode(" ("+d.comments.data.length+")");
						commentViewCounterContainer.appendChild(commentViewCountText);
						commentViewContainer.appendChild(commentViewCounterContainer);

						$("#userComment-"+mId).append(commentViewContainer);
					}

					if (numShow == 1) {
						if(iC == (d.comments.data.length - 1)) {
							commentMessage = dC.message;
							if(typeof(dC.likes) != "undefined") {
								commentLikeCount = dC.likes;
							} else {
								commentLikeCount = 0;
							}
							commentId = dC.id;
							commentCreated = dC.created_time;
							commentFromName = dC.from.name;
							commentFromId = dC.from.id;
							commentFromImage = "/json/social/picture/facebook/"+commentFromId;

							divCommentsFeedContainer = document.createElement("div");

							$(divCommentsFeedContainer).attr("class","comment-feed-container-first");

							divCommentsPhoto = document.createElement("div");
							$(divCommentsPhoto).attr("class","comment-photo");

							divCommentsPhotoImageLink = document.createElement("a");
							$(divCommentsPhotoImageLink).attr("href","http://www.facebook.com/"+commentFromId);
							$(divCommentsPhotoImageLink).attr("target","_blank");

							divCommentsPhotoImage = document.createElement("img");
							$(divCommentsPhotoImage).attr("src",commentFromImage);

							divCommentsPhotoImageLink.appendChild(divCommentsPhotoImage);
							divCommentsPhoto.appendChild(divCommentsPhotoImageLink);

							divCommentTextContainer = document.createElement("div");
							$(divCommentTextContainer).attr("class","userCommentTextContainer");

							divCommentFrom = document.createTextNode(commentFromName);
							divCommentMessage = document.createTextNode(commentMessage);

							divCommentCreatedContainer = document.createElement("div");
							$(divCommentCreatedContainer).attr("class","color-light-gray-2");

							//dateObj = Date.parse(commentCreated);
							//dateObj = commentCreated;
							if (commentCreated != "") {
								dateObj = new Date();
								dateObj.setISO8601(commentCreated);
							}
							divCommentCreated = document.createTextNode("Posted on " + dateObj);
							divCommentCreatedContainer.appendChild(divCommentCreated);

							$('<A href="javascript:void(0)" class="commentLike">Like</A>')
								.click(function(e){
									e.preventDefault();
									clearAllError();
									socialAction(type, 'like', commentId, commentLikeCount, id);
								})
								.appendTo($(divCommentCreatedContainer));

							if (commentLikeCount == 0) {
								//divCommentLikeCounterText = document.createTextNode("Like");
							} else if (commentLikeCount == 1) {
								divCommentLikeCounterText = document.createTextNode(commentLikeCount + " Like");
							} else {
								divCommentLikeCounterText = document.createTextNode(commentLikeCount + " Likes");
							}
							if (commentLikeCount != 0) {
								divCommentLikeCounter = document.createElement("span");
								$(divCommentLikeCounter).attr("class","like-counter");
								$(divCommentLikeCounter).attr("id","counter-"+type+"-id-"+commentId+"-"+commentLikeCount);
								divCommentLikeCounter.appendChild(divCommentLikeCounterText);
								divCommentCreatedContainer.appendChild(divCommentLikeCounter);
							}

							divCommentLink = document.createElement("a");
							$(divCommentLink).attr("href","http://www.facebook.com/"+commentFromId);
							$(divCommentLink).attr("class","bold padding-right-5");
							$(divCommentLink).attr("target","_blank");
							divCommentLink.appendChild(divCommentFrom);

							divCommentTextContainer.appendChild(divCommentLink);
							divCommentTextContainer.appendChild(divCommentMessage);
							divCommentTextContainer.appendChild(divCommentCreatedContainer);

							divCommentsFeedContainer.appendChild(divCommentTextContainer);
							divCommentsFeedContainer.appendChild(divCommentsPhoto);

							$("#userComment-"+mId).append(divCommentsFeedContainer);
						}

					} else {

						if (iC < numShow) {

							commentMessage = dC.message;
							if(typeof(dC.likes) != "undefined") {
								commentLikeCount = dC.likes;
							} else {
								commentLikeCount = 0;
							}
							commentId = dC.id;
							commentCreated = dC.created_time;
							commentFromName = dC.from.name;
							commentFromId = dC.from.id;
							commentFromImage = "/json/social/picture/facebook/"+commentFromId;

							divCommentsFeedContainer = document.createElement("div");

							if (iC == 0) {
								$(divCommentsFeedContainer).attr("class","comment-feed-container-first");
							} else {
								$(divCommentsFeedContainer).attr("class","comment-feed-container");
							}
							divCommentsPhoto = document.createElement("div");
							$(divCommentsPhoto).attr("class","comment-photo");


							divCommentsPhotoImageLink = document.createElement("a");
							$(divCommentsPhotoImageLink).attr("href","http://www.facebook.com/"+commentFromId);
							$(divCommentsPhotoImageLink).attr("target","_blank");

							divCommentsPhotoImage = document.createElement("img");
							$(divCommentsPhotoImage).attr("src",commentFromImage);

							divCommentsPhotoImageLink.appendChild(divCommentsPhotoImage);
							divCommentsPhoto.appendChild(divCommentsPhotoImageLink);

							divCommentTextContainer = document.createElement("div");
							$(divCommentTextContainer).attr("class","userCommentTextContainer");

							divCommentFrom = document.createTextNode(commentFromName);
							divCommentMessage = document.createTextNode(commentMessage);

							divCommentCreatedContainer = document.createElement("div");
							$(divCommentCreatedContainer).attr("class","color-light-gray-2");
							//dateObj = Date.parse(commentCreated);
							//dateObj = commentCreated;
							if (commentCreated != "") {
								dateObj = new Date();
								dateObj.setISO8601(commentCreated);
							}

							divCommentCreated = document.createTextNode("Posted on " + dateObj);
							divCommentCreatedContainer.appendChild(divCommentCreated);

							$('<A href="javascript:void(0)" class="commentLike">Like</A>')
								.click(function(e){
									e.preventDefault();
									clearAllError();
									socialAction(type, 'like', commentId, commentLikeCount, id);
								})
								.appendTo($(divCommentCreatedContainer));

							if (commentLikeCount == 0) {
								//divCommentLikeCounterText = document.createTextNode("Like");
							} else if (commentLikeCount == 1) {
								divCommentLikeCounterText = document.createTextNode(commentLikeCount + " Like");
							} else {
								divCommentLikeCounterText = document.createTextNode(commentLikeCount + " Likes");
							}
							if (commentLikeCount != 0) {
								divCommentLikeCounter = document.createElement("span");
								$(divCommentLikeCounter).attr("class","like-counter");
								$(divCommentLikeCounter).attr("id","counter-"+type+"-id-"+commentId+"-"+commentLikeCount);
								divCommentLikeCounter.appendChild(divCommentLikeCounterText);
								divCommentCreatedContainer.appendChild(divCommentLikeCounter);
							}

							divCommentLink = document.createElement("a");
							$(divCommentLink).attr("href","http://www.facebook.com/"+commentFromId);
							$(divCommentLink).attr("class","bold padding-right-5");
							$(divCommentLink).attr("target","_blank");
							divCommentLink.appendChild(divCommentFrom);

							divCommentTextContainer.appendChild(divCommentLink);
							divCommentTextContainer.appendChild(divCommentMessage);
							divCommentTextContainer.appendChild(divCommentCreatedContainer);

							divCommentsFeedContainer.appendChild(divCommentTextContainer);
							divCommentsFeedContainer.appendChild(divCommentsPhoto);

							$("#userComment-"+mId).append(divCommentsFeedContainer);
						}
					}
				});

				if (numShow != 1) {
					if (d.comments.count > 20) {
						divCommentsFeedContainer = document.createElement("div");
						$(divCommentsFeedContainer).attr("class","comment-feed-container");
						commentView = document.createElement("a");
						$.each(d.actions,function(iA,dA) {
							$(commentView).attr("href",dA.link);
						});
						$(commentView).attr("target","_blank");
						commentViewText = document.createTextNode("View more comments");
						commentView.appendChild(commentViewText);
						divCommentsFeedContainer.appendChild(commentView);
						$("#userComment-"+mId).append(divCommentsFeedContainer);
					}
				}
			}

		});
		break;
	default:
	}

}
function showLinkedInComments(id) {
	var idElement = id;
	var htmlText = "View fewer comments";

	var htmlCurrent = $("#"+id).html();

	if(htmlCurrent == "View more comments") {
		$("#"+id).html(htmlText);
		$("#blue-arrow-right-"+id).addClass("blue-arrow-down");
		$("#blue-arrow-right-"+id).removeClass("blue-arrow-right");
		$("#userComment-"+idElement).children(".comment-feed-container").removeClass("display-none");
	} else {
		$("#"+id).html("View more comments");
		$("#blue-arrow-right-"+id).addClass("blue-arrow-right");
		$("#blue-arrow-right-"+id).removeClass("blue-arrow-down");
		$("#userComment-"+idElement).children(".comment-feed-container").addClass("display-none");
	}
}

function getNetworkStatus() {
	var url = "/json/social/status";

	$.get(url,
		"protocol=" + getProtocol(),
		function(response) {
			var json = response;
			var socialObj = new Object();
			socialObj = processNetworkStatus(json,socialObj);
			printNetworkStatus(socialObj);
		});
}

function loadEmailNull() {

	var url = "/json/social/status";
	var totalConnected = 0;
	$("#totalConnectionsCount").html(totalConnected);
	$.get(url, function(response) {
		var json = response;
		var socialObj = new Object();
		socialObj = processNetworkStatus(json,socialObj);
		totalConnected = socialObj.totalConnected;
		$("#totalConnectionsCount").html(totalConnected);
	});

	$('<iframe/>', {
		name: 'email-connect-null',
    	id: 'email-connect-null',
    	width: 690,
    	height: 200,
    	frameborder: 0,
    	marginwidth: 0,
		marginheight: 0,
		scrolling: 'no'
	}).prependTo('#iframeEmailWrapper');
	setSrc();
}
function setSrc() {
	var d = new Date();
	var url = 'https://'+window.location.hostname+'/email-connect-null.view?_'+d.getTime();
	$('#email-connect-null').attr("src", url);
}
/*
function loadEmailProxy(provider) {
	var p = provider;
	$('<iframe/>', {
		name: 'email-connect-null-proxy',
    	id: 'email-connect-null-proxy',
    	width: 0,
    	height: 0,
    	frameborder: 0,
    	marginwidth: 0,
		marginheight: 0,
		scrolling: 'no'
	}).prependTo('#iframeEmailProxy');
	setProxySrc(p);
}
function setProxySrc(p) {
	var url = 'http://'+window.location.hostname+'/email-connect-null-proxy.view#'+p;
	$('#email-connect-null-proxy').attr("src", url);
}
function loadEmailProgress(data) {
	$('<iframe/>', {
		name: 'email-connect-progress-proxy',
    	id: 'email-connect-progress-proxy',
    	width: 0,
    	height: 0,
    	frameborder: 0,
    	marginwidth: 0,
		marginheight: 0,
		scrolling: 'no'
	}).prependTo('#iframeEmailProgress');
	setProgressSrc();
}
function setProgressSrc() {
	var url = 'http://'+window.location.hostname+'/email-connect-progress-proxy.view';
	$('#email-connect-progress-proxy').attr("src", url);
}
*/
function getInboxIframe() {
	var emailCount = 0;
	var socialCount = 0;

	$.get('http://'+window.location.hostname+'/json/social/status', function(data) {
	   $.each(data, function(k,d) {

		   if (d.isConnected) {

			   switch(d.name) {
				   case "facebook":
					   socialCount++;
					   break;
				   case "linkedin":
					   socialCount++;
					   break;
				   case "twitter":
					   socialCount++;
					   break;
				   case "gmail":
					   emailCount++;
					   break;
				   case "yahoo":
					   emailCount++;
					   break;
				   case "aol":
					   emailCount++;
					   break;
				   case "hotmail":
					   emailCount++;
					   break;
				   default:

			   }
		   }
	   });

	   var d = new Date();
	   var url = "/json/social/status?_"+d.getTime();

	   if (emailCount > 0) {
		   var sideBar = "";
		   if (socialCount > 0){
			  sideBar = "/?_"+d.getTime()+"&sidebar=true&";
			  //console.log(sideBar);
		   } else {
			  sideBar = "/?_="+d.getTime()+"&sidebar=false&";
			  //console.log(sideBar);
		   }
		   //console.log(sideBar);
		   var fromDomain = "fromDomain=" + window.location.hostname;
		   var inboxDomain = $("#inboxUrl").val();

		   var url = inboxDomain+sideBar+fromDomain;

			$('<iframe />', {
				name: 'min-inbox',
		    	id: 'min-inbox',
		    	src: url,
		    	frameborder: 0,
		    	marginwidth: 0,
				marginheight: 0,
				scrolling: 'no'
			}).prependTo('#frameWrapper');
	   }
	});
}

function printNetworkStatus(obj) {
	var n = $("#import-content");
	var userNetworkStatus = jQuery.trim($("#userNetworkStatus").html());
	var tCounter = 0;
	var emailConnect = 0;
	var socialConnect = 0;
	var prevConnections = $("#totalConnections").html();
	$("#totalConnections").html("");

	$.each(obj.networks, function(i,network) {
		var menu = $("#import-content .menu#" + network.name);
		var status =  $("#import-content .menu#" + network.name + " .status");
		var discon =  $("#import-content .menu#" + network.name + " .disconnect");
		var icon =  $("#import-content .menu#" + network.name + " .icon");

		var statusNull =  $("#"+ network.name +"-button a");

		var networkNameText = network.name;

		if(network.isConnected == true) {
			$(menu).removeClass("not-connected").addClass("is-connected");
			$(status).html("<span class='network-added'>added</span>");

			if (network.name == "facebook") {
				$(statusNull).addClass(network.name+"-added");
				$(statusNull).removeClass("add-network-link");
				$(statusNull).removeAttr("url");
			}

			if (network.name != "facebook") {
				$(statusNull).addClass("social-added");
				$(statusNull).removeClass("add-network-link");
				$(statusNull).removeAttr("url");
				if (network.name == "linkedin") {
					networkNameText = "LinkedIn";
				}
				if (network.name == "twitter") {
					networkNameText = "Twitter";
				}
				$(statusNull).html(networkNameText + " added");
				$("#"+network.name+"-button").siblings("span").removeClass("displayNone");
			}

			if(userNetworkStatus == "existing") {
				$(discon).html("<a class='disconnect-network-link' href='javascript:void(0)' url='" + network.removeUrl + "'>Disconnect</a>");
			}
			tCounter = tCounter + 1;

			if ($("#totalConnections").html() == "") {
				$("#totalConnections").html(network.name);
			} else {
				$("#totalConnections").append(","+network.name);
			}

			if (network.name == "gmail" || network.name == "aol" || network.name == "yahoo" || network.name == "hotmail") {
				$("#"+network.name+"-button").siblings("span").removeClass("displayNone");
				if(network.isConnected == true) {
					emailConnect = emailConnect + 1;
				}
			} else {
				if(network.isConnected == true) {
					socialConnect = socialConnect + 1;
				}
			}

		} else {
			if (network.active == false) {
				$(icon).addClass("not-active");
				$(status).addClass("not-active");
				$(menu).addClass("not-active");

				if (network.name == "facebook") {
					$(statusNull).removeClass(network.name+"-added");
					$(statusNull).addClass("add-network-link");
					$(statusNull).attr("url",network.addUrl);
				}

				if (network.name != "facebook") {
					$(statusNull).removeClass("social-added");
					$(statusNull).addClass("add-network-link");
					$(statusNull).attr("url",network.addUrl);

					if (network.name == "linkedin") {
						networkNameText = "LinkedIn";
					}
					if (network.name == "twitter") {
						networkNameText = "Twitter";
					}
					$(statusNull).html("Add " + networkNameText);
					$("#"+network.name+"-button").siblings("span").addClass("displayNone");
				}

			} else {
				$(menu).removeClass("is-connected").addClass("not-connected");
				$(status).html("<a class='add-network-link' href='javascript:void(0)' url='" + network.addUrl + "'>Connect &raquo;</a>");

				if (network.name == "facebook") {
					$(statusNull).removeClass(network.name+"-added");
					$(statusNull).addClass("add-network-link");
					$(statusNull).attr("url",network.addUrl);
				}

				if (network.name != "facebook") {
					$(statusNull).removeClass("social-added");
					$(statusNull).addClass("add-network-link");
					$(statusNull).attr("url",network.addUrl);

					if (network.name == "linkedin") {
						networkNameText = "LinkedIn";
					}
					if (network.name == "twitter") {
						networkNameText = "Twitter";
					}
					$(statusNull).html("Add " + networkNameText);

					$("#"+network.name+"-button").siblings("span").addClass("displayNone");
				}
			}
		}
	});

	if (emailConnect == 0) {
		$("#email-null").removeClass("displayNone");
		if (!$("#email-not-null").hasClass("displayNone")) {
			$("#email-not-null").addClass("displayNone");
		}
	} else {
		$("#email-not-null").removeClass("displayNone");
		if (!$("#email-null").hasClass("displayNone")) {
			$("#email-null").addClass("displayNone");
		}
	}

	if (socialConnect == 0) {
		$("#social-null").removeClass("displayNone");
		if (!$("#social-not-null").hasClass("displayNone")) {
			$("#social-not-null").addClass("displayNone");
		}
	} else {
		$("#social-not-null").removeClass("displayNone");
		if (!$("#social-null").hasClass("displayNone")) {
			$("#social-null").addClass("displayNone");
		}
	}

	$("#import-networks-container #import-load").remove();
	$("#import-networks-container .import-networks-header").fadeIn();
	$("#import-networks-container #import-content").fadeIn();
	//If the user has never imported and has more than 1  network...enable the button
	if((userNetworkStatus == "new") && (obj.totalConnected > 0)) {
		$("#import-networks-container #btn-done").removeClass().addClass("close-import-overlay-link");
		$("#import-networks-container #btn-add-more").show();
	}

	var currConnections = $("#totalConnections").html();

	if (currConnections != null && prevConnections != null && currConnections.length != 0) {
		//convert to arrays and check if connections are the same; if not, refresh page
		var currArray = currConnections.split(',');
		var prevArray = prevConnections.split(',');
		currArray.sort();
		prevArray.sort();

		if ((currArray.toString() != prevArray.toString()) && (prevArray != "")) {

			$("#refreshBoolean").html("true");
		} else {
			if ((prevArray.length == 1) && (currArray.length == 1)) {

				$("#refreshBoolean").html("true");
			}

		}
	}
}
function processNetworkStatus(json,obj) {
	obj.networks = new Array();
	obj.totalConnected = 0;
	obj.emailConnected = 0;
	obj.socialConnected = 0;
	$.each(json,function(i,network) {
		var n = new Object();
		n.addUrl = "";
		n.removeUrl = "";
		n.name = network.name;
		n.active = true;
		n.isConnected = network.isConnected;
		if(n.isConnected == true) {
			n.removeUrl = network.removeUrl;
			if (network.name == "gmail" || network.name == "yahoo" || network.name == "aol" || network.name == "hotmail") {
				obj.emailConnected = obj.emailConnected +1;
			}
			if (network.name == "facebook" || network.name == "linkedin" || network.name == "twitter") {
				obj.socialConnected = obj.socialConnected +1;				
                //if(network.name == 'facebook') $('#userHeadShot').attr('src', network.identity.thumbnailURL);
                //if(network.name == 'twitter') $('#userHeadShot').attr('src', network.identity.thumbnailURL);
			}
			obj.totalConnected = obj.totalConnected +1;
		} else {
			if (typeof(network.addUrl) == "undefined") {
				var  networkName = ""
				switch(network.name) {
				case "gmail":
					networkName = "Gmail";
					n.active = network.enabled;
					n.addUrl = 'https://' + window.location.hostname + '/email-connect.view?provider=' + networkName;

					break;
				case "yahoo":
					networkName = "Yahoo";
					n.active = network.enabled;
					n.addUrl = 'https://' + window.location.hostname + '/email-connect.view?provider=' + networkName;

					break;
				case "aol":
					networkName = "Aol";
					n.active = network.enabled;
					n.addUrl = 'https://' + window.location.hostname + '/email-connect.view?provider=' + networkName;

					break;
				case "hotmail":
					networkName = "Hotmail";
					n.active = network.enabled;
					n.addUrl = 'https://' + window.location.hostname + '/email-connect.view?provider=' + networkName;

					break;
				default:

				}

			} else {
				n.addUrl = network.addUrl;
			}
		}

		obj.networks.push(n);
	});
	return obj;
}

function displaySocialNetworks(socialObj) {
	var n = socialObj;
	var elementId = "";
	var socialNetworks = new Array();
	var numConnected = 0;
	var totalConnected = 0;

	for (i=0;i<n.networks.length;i++) {
		if (!n.networks[i].isConnected) {
			//remove any icon for networks that are currently disconnected
			//display icons for post section

			elementId = "#postIcon-li-"+n.networks[i].name;
			$(elementId).addClass("display-none");
			$(elementId).removeClass("display-inline");

			//display icons for share section
			elementId = "#showIcon-li-"+n.networks[i].name;
			$(elementId).addClass("display-none");
			$(elementId).removeClass("display-inline");

		} else {
			if(n.networks[i].name != "gmail" && n.networks[i].name != "yahoo" && n.networks[i].name != "hotmail" && n.networks[i].name != "aol") {
				//get all social network name for each connection
				socialNetworks[numConnected] = n.networks[i].name;
				numConnected++;
			}
			totalConnected++;
		}
	}

	$("#post-share-wrapper ul.engage-social-icons").removeClass("display-none");

	if (!numConnected == 0) {
		var socialNetworkString = socialNetworks.toString();
		//set social feeds
		if ($("#providers").val()=="") {
			$("#providers").attr("value",socialNetworkString);
		}
		ajaxGetLifeEvent();
		ajaxGetFeeds(socialNetworkString);
	}

	if (numConnected == 0 && totalConnected > 0) {
		animatePane2();
	}

}
//create timestamp
function getTimeStamp(t) {

	var timeStamp = t;

	var tsText; 			// timestamp text
	var tsTime; 			// integer minutes, hours, days, etc
	var cDate; 				// current date
	var cTime; 				// milliseconds in milliseconds
	var tempTime; 			// temp var for time difference
	var s = "s"; 			// plural
	var oneMin = 60000; 	//static value one minute in milliseconds
	var fiveMin = 300000; 	//static value five minutes in milliseconds
	var oneHour = 3600000; 	//static value one hour in milliseconds
	var oneDay = 86400000; 	//static value one day in milliseconds

	//fyi not being used at the moment
	var oneWeek = 604800000; 			//static value one week in milliseconds
	var oneMonth = 2419200000; 			//static value one month/four weeks in milliseconds, fyi some month has more than 4 weeks...
	var oneYear = 31449600000; 			//static value one year/52 weeks in milliseconds

	var caseInt;
	//four cases
	// case 1: less than 5 minutes = "Just Now"
	// case 2: 5-59 minutes = "x minutes ago"
	// case 3: 1 hour to 24 hours = "x hours ago"
	// case 4: 1day + = "x days ago"

	cDate = new Date(); 		// get current date
	cTime = cDate.getTime(); 	// get milliseconds

	tempTime = cTime - timeStamp;

	//determine case and set tsTime = minutes, hours, days, etc
	if (tempTime < fiveMin) {
		tsTime = Math.round(tempTime / oneMin);
		caseInt = 1;
	} else if (tempTime >= fiveMin && tempTime < oneHour) {
		tsTime = Math.round(tempTime / oneMin);
		caseInt = 2;
	} else if (tempTime >= oneHour && tempTime < oneDay) {
		tsTime = Math.round(tempTime / oneHour);
		caseInt = 3;
	} else if (tempTime >= oneDay) {
		tsTime = Math.round(tempTime / oneDay);
		caseInt = 4;
	} else {
		tsTime = Math.round(tempTime / oneMin);
		//set case to 1
		caseInt = 1;
	}

	if (tsTime==1) {
		s = "";
	}

	switch(caseInt) {
		case 1:
			tsText = "Just now";
			break;
		case 2:
			tsText = tsTime + " minute" + s + " ago";
			break;
		case 3:
			tsText = tsTime + " hour"+ s +" ago";
			break;
		case 4:
			tsText = tsTime + " day" + s + " ago";
			break;
		default:
			tsText = "Just now";
	}
    if(tsText == '24 hours ago') tsText = '1 day ago';
	return tsText;
}
//fetch thumb image url
function fetchProfilePicture(type,id) {
	var url = "/json/social/picture/"+type+"/"+id;
	var imgUrl;
	$.get(url,
		function(response) {
			imgUrl = response;
		});
	return imgUrl;
}
//get photos
function getAlbumPhotos() {	
	
	//console.log($(".facecbookPhotoItem").length);
	if ($(".facecbookPhotoItem").length > 0) {
		$(".facecbookPhotoItem").each(function(k,i){
		    //console.log($(i).attr('rel') + " : " + $(i).attr('value'));
		    	
			var photoUrlId = getUrlVars($(i).attr('value'))["set"];
			var photoId = getUrlVars($(i).attr('value'))["fbid"];
			var sectionId = $(i).attr('rel');
			
			photoUrlId = photoUrlId.split('.');
			photoUrlId = "/json/social/pictures/facebook/" + photoUrlId[1];
		
			var photoLink3 = '';
			var photoCount = 0;
			var timePhoto = '';
			var timeOtherPhoto = '';
			var date1 = new Date();
			var date2 = new Date();
			
			var result = '';
			var result1 = '';
			var result2 = '';
			
			$.get(photoUrlId, function(response) {
				var obj = response;
				
				if (typeof(obj.data) != "undefined") {			            				
					if (obj.data.length != 0) {
						$.each(obj.data,function(key,item) {
							if (item.id == photoId) {
								timePhoto = item.created_time;
								date1 = Date.parse(timePhoto);
								result1 = date1;
							}
							
							if (photoCount <= 2 && timePhoto.length != 0) {
								timeOtherPhoto = item.created_time;
								
								date2 = Date.parse(timeOtherPhoto);
								result2 = date2;
								result = result1 - result2;
								
								if (result <= 600000) {
									photoLink3 = $('<A href="javascript:void(0)" />');
									photoLink3.append(
										$('<IMG class="feedPhoto facebookPhoto albumPhotos" />')
											.attr({
												src: "/json/social/picture/facebook/" + item.id,
												rel: item.id
											})
											.click(openPhotoModalAction)
									);

									if ($.browser.webkit || $.browser.msie) {
										$("#"+sectionId+ " .engage-feeds-li .engage-content a.firstPhoto").after(photoLink3);
									} else {
										$("#"+sectionId).children('div').children('div:eq(0)').children('div:eq(0)').delay(4000).before(photoLink3);	
									}
									
									photoCount = photoCount + 1;
								}
							}
						});
						
						$("#"+sectionId+ " .engage-feeds-li .engage-content").children("a.social-action").remove();
						$("#"+sectionId+ " .engage-feeds-li .engage-content").children("div.userCommentForm").remove();				
						$("#"+sectionId+ " .engage-feeds-li .engage-content").children("a.firstPhoto").remove();
						
					}	
				}
			});	
		});
	}
}

//construct social feeds
function printNetworkFeeds(json,obj){
	
	//empty facebook photo items
	$("#facebookPhotos").html('');
	
	obj = json;			// assign json to obj

	var ul;				// ul element
	var li; 			// li element
	var ul2;			// min ul element
	var li2; 			// min li element
	var div; 			// div element
	var div2; 			// div2 element
	var divPhoto; 		// photo container
	var divPhoto2; 		// min photo container
	var divContent;     // content container
	var divContent2;    // min content container
	var img; 			// img element
	var img2; 			// min img element
	var aUser;
	var aUser2;
	var imgUrl;			// img url text
	var photoImage;
	var imgLink;
	var imgLink2;
	var storyMessage;	// text data
	var nameMessage;    // text data
	var textMessage;	// text data
	var textMessageReplace; // text data modified
	var descMessage;	// text data
	var captionMessage; // text data
	var aHrefText; 		// href

	var userText; 		// user name text
	var userText2; 		// min user name text
	var photoShare;     // photo element
	var photoShare2;    // min photo element
	var photoShareUrl;  // photo url text
	var linkShare;      // link element
	var linkShare2;     // min link element
	var linkShareUrl;   // link url text
	var iconSocial; 	// social icon
	var iconSocial2; 	// min social icon
	var ts; 			// timestamp
	var tsText; 		// timestamp text
	var via; 			// via element
	var viaText; 		// via text
	var commentContainerUpdateKey; // element text
	var commentContainerHidden; // element object
	var showLike = true;
	var showComment = true;

	//action twitter
	var reply;			// element object
	var retweet;		// element object

	//facebook typeof
	var defLike;
	var likeBoolean;
	
	//facebook duplicate wall and news feed items
	var dup = false;
	var dupId = '';
	var dupName = '';
	
	//overlay
	var retweetOverlay; // element object
	var retweetComment; // element object
	var retweetHeader;
	var headerText;
	var retweetPhoto;
	var retweetImg;
	var retweetUser;
	var retweetUserText;
	var retweetUserMessage;
	var retweetContentContainer;
	var retweetPostBttn;
	var retweetCancelBttn;
	var retweetCancelBttnText;
	var retweetClose;
	var retweetPointer;
	var retweetDiv;
	retweetDiv = document.createElement("div");
	var retweetlLoading;

	//action for facebook and linkedin
	var socialComment;	// element object
	var tempText;		// temp text
	var commentContainer; // comment container

	var br; // break line
	var brDiv; // clear break

	var socialShow = getSocialShow();  //get social show networks

	//comment feeds
	var divComments;
	var divCommentsPhoto;
	var divCommentsPhotoImage;
	var divCommentsPhotoImageLink;
	var divCommentFrom;
	var divCommentLink;
	var divCommentLike;
	var divCommentLikeText;
	var divCommentLikeCounter;
	var divCommentLikeCounterText;
	var divCommentMessage;
	var divCommentCreated;
	var divCommentTextContainer;
	var divCommentCreatedContainer;
	var divCommentsFeedContainer;

	var commentMessage;
	var commentLikeCount = 0;
	var commentId;
	var	commentCreated;
	var commentFromName;
	var	commentFromId;
	var commentFromImage;
	var commentLike;
	var commentLikeBoolean;
	var commentViewContainer;
	var commentViewArrow;
	var commentView;
	var commentViewCountText;
	var commentViewCounterContainer;

	var likeContainer;
	var likeTextValue;

	//date format for comment feeds
	var dateObj;

	var showCounter = 0; 	//show counter
	var printBoolean = 0;   // display none or block for feed list
	var linkedInLike = 0; 	// like placeholder
	//var connectionsBoolean = 0;
	var appBoolean = 0; 	// check if exists
	var storyTagsBoolean = 0; //check if exists
	var storyBoolean = 0; 	// check if exists
	var textBoolean = 0; 	// check if exists
	var descBoolean = 0; 	// check if exists
	var pictureBoolean = 0; // check if exists
    var linkBoolean = 0; // check if exists
	var nameBoolean = 0; 	// check if exists
	var captionBoolean = 0; // check if exists
	var commentsBoolean = 0; // check if exists
	var commentCounter = 0; 	// comment counter

	var exception = false;
	var facebookException = false;
	var twitterException = false;
	var linkedinException = false;
	var linkedinUrl = "";
	var exceptionMessage = "";
	var exceptionArr = new Array();
	var exceptionText = "";
	var exceptionCom = "";
	var exceptionCounter = 0;
	var exceptionFacebookMessage = "";
	var exceptionTwitterMessage = "";
	var exceptionLinkedinMessage = "";
	var exceptionBlockMessage = "";

	//regex url pasre string for url
	var urlRegex = /(f|ht)tps?:\/\/.+?(\s|$)/g;

	//create ul element for li elements
	ul = document.createElement("ul");
	$(ul).attr("id","engage-feeds");

	ul2 = document.createElement("ul");
	$(ul2).attr("id","engage-feeds-2");

	$.each(obj,function(n,d) {

		if (typeof(d.data) != "undefined" && d.data.type != "exception" && d.data.type != "OAuthException" && d.data.status != "401" && d.data.status != "403") {

			commentCounter = 0;
			//facebook
			printBoolean = 0;
			likeBoolean = 0;
			appBoolean = 0;
			storyBoolean = 0;
			storyTagsBoolean = 0;
			textBoolean = 0;
			pictureBoolean = 0;
			nameBoolean = 0;
			descBoolean = 0;
			linkBoolean = 0;

			//linkedIn
			linkedInLike = 0;
			updateContentBoolean = 0;
			//connectionsBoolean = 0;
			showLike = true;
			showComment = true;
			aHrefText = "";

			linkedinUrl = "";

			//comments set to null
			commentMessage = "";
			commentLikeCount = 0;
			commentId = "";
			commentCreated = "";
			commentFromName = "";
			commentFromId = "";
			commentFromImage = "";
			commentViewCountText = "";
			commentLike = 0;
			commentLikeBoolean = 0;

			//social actions initialize
			socialComment = "";	// element object
			tempText = "";		// temp text
			commentContainer = ""; // comment container


			for (i=0;i<socialShow.length;i++) {
				if(socialShow[i] == d.type) {
					printBoolean = 1;
				}
			}

			if (printBoolean == 1) {
				switch(d.type) {
					case "facebook":
						//facebook check photo
						imgUrl = "/json/social/picture/"+d.type+"/"+d.data.from.id;
						//try {
							//.log("Feed: " + n + " - Update Type: " + d.data.type);
						//} catch(err) {
							//console.log("Feed: " + n + " - Update Type: undefined");
						//}
						switch(d.data.type) {
							case "status":
								aHrefText = "http://www.facebook.com/"+d.data.from.id;
								userText = document.createTextNode(d.data.from.name);
								userText2 = document.createTextNode(d.data.from.name);
								break;
							case "photo":
								aHrefText = "http://www.facebook.com/"+d.data.from.id;
								userText = document.createTextNode(d.data.from.name);
								userText2 = document.createTextNode(d.data.from.name);
								break;
							case "checkin":
								aHrefText = "http://www.facebook.com/"+d.data.from.id;
								userText = document.createTextNode(d.data.from.name);
								userText2 = document.createTextNode(d.data.from.name);
								break;
							case "link":
								aHrefText = "http://www.facebook.com/"+d.data.from.id;
								userText = document.createTextNode(d.data.from.name);
								userText2 = document.createTextNode(d.data.from.name);
								break;
							case "video":
								aHrefText = "http://www.facebook.com/"+d.data.from.id;
                                userText = document.createTextNode(d.data.from.name);
								userText2 = document.createTextNode(d.data.from.name);
								break;
							default:
								aHrefText = "http://www.facebook.com/"+d.data.from.id;
								userText = document.createTextNode(d.data.from.name);
								userText2 = document.createTextNode(d.data.from.name);
								break;
						}
                        if (typeof(d.data.object_id) != "undefined" && typeof(d.data.application) != 'undefined' && d.data.application.name == 'Facebook for iPhone') {
                            $.ajax({
                                url: '/json/social/feeds/facebook/' + d.data.object_id,
                                async: false,
                                type: 'GET',
                                dataType: 'json',
                                success: function(postData) {
                                    d.data.actions = [{name: 'Comment'},{name: 'Like'}];
                                    actionBoolean = true;
                                    if(typeof(postData.comments) != 'undefined'){
                                        d.data.comments = {
                                            data: postData.comments.data,
                                            count: postData.comments.data.length
                                        };
                                    }
                                    if(typeof(postData.id) != 'undefined') d.data.id = postData.id;
                                }
                            });
                        }
						storyBoolean = typeof(d.data.story);
						storyTagsBoolean = typeof(d.data.storyTags);
						nameBoolean = typeof(d.data.name);
						textBoolean = typeof(d.data.message);
						descBoolean = typeof(d.data.description);
						captionBoolean = typeof(d.data.caption);
						pictureBoolean = typeof(d.data.picture);
						actionBoolean = typeof(d.data.actions);
						linkBoolean = typeof(d.data.link);
                        linkType = d.data.type;
						showLike = false;
						showComment = false;
                        /*if((typeof(d.data.picture) != 'undefined' || d.data.type == 'photo') && typeof(d.data.application) != 'undefined' && d.data.application.name == 'Facebook for iPhone')
                        {
                            d.data.actions = [{name: 'Comment'},{name: 'Like'}];
                            actionBoolean = true;
                            $.getJSON('/json/social/feeds/facebook/' + d.data.object_id, function(postData) {
                                if(typeof(postData.comments) != 'undefined'){
                                    d.data.comments = {
                                        data: postData.comments.data,
                                        count: postData.comments.data.length
                                    };
                                }
                                if(typeof(postData.id) != 'undefined') d.data.id = postData.id;
                                console.log(d);
                            });
                        } */

						if (actionBoolean != "undefined") {
							$.each(d.data.actions,function(actionI,actionD) {
								$.each(actionD,function(subI,subD) {
									switch(subD) {
										case "Comment":
											showComment = true;
										break;
										case "Like":
											showLike = true;
										break;
										default:
									}
								});
							});
						}
						if (textBoolean != "undefined") {
							textMessage = d.data.message;
							textMessage = parseUrl(textMessage);
						}
						if (storyBoolean != "undefined") {
							storyMessage = parseUrl(d.data.story);
						}
						if (storyTagsBoolean != "undefined") {
							$.each(d.data.storyTags,function(iSt,dSt) {
								$.each(dSt,function(subI,subD) {
									storyMessage = parseUserName(storyMessage,subD.name,subD.id);
									storyMessage = parseUserStatus(storyMessage,subD.name,subD.id);
								});
							});
						}
						if (nameBoolean != "undefined") {
							nameMessage = parseUrl(d.data.name);
						}

						if (descBoolean != "undefined") {
							descMessage = parseUrl(d.data.description);
						}
						if (captionBoolean != "undefined") {
							captionMessage = parseUrl(d.data.caption);
						}

						var linkTypeClass = (linkType == 'photo') ? ' facebookPhoto' : '';

                        if (pictureBoolean != "undefined") {
                        	photoShareUrl = d.data.picture;
							photoShare = $('<IMG/>');
							photoShare.attr("src",photoShareUrl);
							photoShare.attr("class","feedPhoto" + linkTypeClass);
							if(linkTypeClass) photoShare.click(openPhotoModalAction);

							photoShare2 = document.createElement("img");
							$(photoShare2).attr("src",photoShareUrl);
							$(photoShare2).attr("class","feedPhoto");
														
							if (d.data.type == "photo" && typeof(d.data.application) != "undefined") {
								if (typeof(d.data.object_id) != "undefined" && typeof(d.data.application) != 'undefined' && d.data.application.name == 'Facebook for iPhone') {
									//getAlbumPhotos(d.data.link,d.data.object_id);
									
									//append data info on facebookPhotos
									$("#facebookPhotos").append("<input type='hidden' class='facecbookPhotoItem' value='"+d.data.link+"' rel='"+d.data.object_id+"' />");
									
								} else {
									//getAlbumPhotos(d.data.link,d.providerId);
									//append data info on facebookPhotos
									$("#facebookPhotos").append("<input type='hidden' class='facecbookPhotoItem' value='"+d.data.link+"' rel='"+d.providerId+"' />");
								}
	                        }
						} else {
							if (d.data.type == "photo") {
								photoImage = "/json/social/picture/facebook/" + getUrlVars(d.data.link)["fbid"];
								//photoImage = "/json/social/picture/facebook/"+d.data.objectId;

								photoShare = $('<IMG/>');
								photoShare.attr("src",photoImage);
								photoShare.attr("width",130);
								photoShare.css('height', 'auto');
								photoShare.attr("class","feedPhoto" + linkTypeClass);
								if(linkTypeClass) photoShare.click(openPhotoModalAction);
								
								photoShare2 = document.createElement("img");
								$(photoShare2).attr("src",photoImage);
								$(photoShare2).attr("width",130);							
								photoShare2.style.height = 'auto';
								$(photoShare2).attr("class","feedPhoto");
								
							}
						}
						
						if (linkBoolean != "undefined") {
								
                            linkShareUrl = d.data.link;
                            linkShare = document.createElement("a");
                            linkShare2 = document.createElement("a");
                            
                            $(linkShare).attr('class','firstPhoto');                            
                            $(linkShare2).attr('class','firstPhoto');
                            
                            if(linkType != 'photo') {
                                $(linkShare).attr("target","blank");
                                $(linkShare).attr("href",linkShareUrl);

                                $(linkShare2).attr("target","blank");
                                $(linkShare2).attr("href",linkShareUrl);
                            } else {
                                $(linkShare).attr('href','javascript:void(0);');                               
                                $(linkShare2).attr('href','javascript:void(0);');                                
                            }
                        }

						tsText = document.createTextNode(getTimeStamp(d.timestamp));

						appBoolean = typeof(d.data.application);
						if (appBoolean == "undefined") {
							viaText = "Facebook";
						} else {
							viaText = getTextNode(d.data.application.name);
						}
						break;

					case "twitter":
						pictureBoolean = typeof(d.data.profileImageUrl);
						if (pictureBoolean != "undefined") {
							imgUrl = d.data.profileImageUrl;
						} else {
							imgUrl = "";
						}

						aHrefText = "http://twitter.com/#!/"+d.data.fromUser;
						userText = document.createTextNode(d.data.fromUser);
						userText2 = document.createTextNode(d.data.fromUser);

						textMessage = d.data.text;
						textMessage = parseUrl(textMessage);
						textMessage = parsePound(textMessage);
						textMessage = parseUser(textMessage);

                        var tweetImage = getImageFromTweet(d.data.tweetEntities,'small');
                        if(tweetImage) {
                            var fallbackUrl;
                            if(typeof(d.data.tweetEntities) != 'undefined' && typeof(d.data.tweetEntities.media) != 'undefined') fallbackUrl = d.data.tweetEntities.media.media_url;
                            //console.log(d.data); //LOG DATA RETURNED BY TWITTER IMAGES
                            textMessage += '<br /><a class="firstPhoto" href="javascript:void(0);">';
                            textMessage += "<img class='feedPhoto twitterPhoto openPhotoModal albumPhotos' data-engagedUserId='"+d.identity.nickname+"' alt='"+fallbackUrl+"' src='"+tweetImage+"'/><a/>";
                        }

						tsText = document.createTextNode(getTimeStamp(d.timestamp));
						appBoolean = typeof(d.data.source);
						if (appBoolean == "undefined") {
							viaText = "Twitter";
						} else {
							if (d.data.source == "web") {
								viaText = "Twitter";
							} else {
								viaText = getTextNode(d.data.source);
							}
						}
						break;

					case "linkedin":
						if (typeof(d.data.updateType) != "undefined") {
							updateContentBoolean = typeof(d.data.updateContent);
	
							if (updateContentBoolean != "undefined") {
	
								if (d.data.updateContent.person != null && typeof(d.data.updateContent.person) != "undefined") {
	
									pictureBoolean = typeof(d.data.updateContent.person.pictureUrl);
									if (pictureBoolean != "undefined") {
										if (d.data.updateContent.person.pictureUrl) {
											imgUrl = d.data.updateContent.person.pictureUrl;
										} else {
											imgUrl = "";
										}
									} else {
										imgUrl = "";
									}
	
									if(d.data.updateContent.person.siteStandardProfileRequest != null) {
										aHrefText = d.data.updateContent.person.siteStandardProfileRequest.url;
									}
	
									if (d.data.updateContent.person.firstName == "private") {
										userText = document.createTextNode("Private");
										userText2 = document.createTextNode("Private");
									} else {
										userText = document.createTextNode(d.data.updateContent.person.firstName + " " + d.data.updateContent.person.lastName);
										userText2 = document.createTextNode(d.data.updateContent.person.firstName + " " + d.data.updateContent.person.lastName);
									}
	
									if (d.data.updateContent.person.currentStatus == null) {
	
										if (d.data.updateType == "NEW_CONNECTIONS") {
	
											if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
												textMessageReplace = '<a href="' +  d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> is now a connection';
											}
	
											showLike = false;
										} else if (d.data.updateType == "CONNECTION_ADDED_CONNECTIONS") {
	
											if (typeof(d.data.updateContent.person.connections) != "undefined") {
	
												$.each(d.data.updateContent.person.connections,function(plI,plD) {
													$.each(plD,function(splI,splD) {
	
													if (typeof(splD.siteStandardProfileRequest) != "undefined") {
															linkedinUrl = splD.siteStandardProfileRequest.url;
														} else {
															linkedinUrl = "http://www.linkedin.com";
														}
	
														if (splD.firstName != "private") {
															if (typeof(splD.siteStandardProfileRequest) != "undefined") {
																textMessageReplace = 'is now connected to <a href="' + linkedinUrl + '" target="_blank" class="text-capitalize">' + splD.firstName + ' ' + splD.lastName + '</a>, ' + splD.headline;
															} else {
																textMessageReplace = 'is now connected to <a href="' + linkedinUrl + '" target="_blank" class="text-capitalize">' + splD.firstName + ' ' + splD.lastName + '</a>';
															}
														} else {
															textMessageReplace = 'has a new connection';
														}
														/*if ((plD.length - 1) == 0) {
															textMessageReplace = '<a href="' + linkedinUrl + '" target="_blank" class="text-capitalize">' + splD.firstName + ' ' + splD.lastName + '</a>, ' + splD.headline;
														} else {
															if ((pID.length - 1) == splI) {
																textMessageReplace = textMessageReplace + ' and <a href="' + linkedinUrl + '" target="_blank" class="text-capitalize">' + splD.firstName + ' ' + splD.lastName + '</a>, ' + splD.headline;
															} else {
																textMessageReplace = textMessageReplace + '<a href="' + linkedinUrl + '" target="_blank" class="text-capitalize">' + splD.firstName + ' ' + splD.lastName + '</a>, ' + splD.headline;
															}
														}*/
	
													});
												});
	
												if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
													linkedinUrl = d.data.updateContent.person.siteStandardProfileRequest.url;
												} else {
													linkedinUrl = "http://www.linkedin.com";
												}
	
												textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> ' + textMessageReplace;
											} else {
												textMessageReplace = d.data.updateType.replace(/_/g," ");
											}
	
											showLike = false;
										} else if (d.data.updateType == "CONNECTION_UPDATED_PROFILE") {
	
											if (typeof(d.data.updateContent.person.positions) != "undefined") {
												if (typeof(d.data.updateContent.person.positions.positionList) != "undefined") {
													$.each(d.data.updateContent.person.positions.positionList,function(posKey,posData) {
														$.each(posData,function(pKey,pData) {
	
															textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> is now ' + posData.title + ' at ' + posData.company.name;
	
														});
													});
												} else {
													if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
														textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> is now ' + d.data.updateContent.person.headline;
													} else {
														textMessageReplace = '';
													}
												}
											} else {
												if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
													textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has an updated profile';
												} else {
													textMessageReplace = '';
												}
											}
	
											showLike = true;
										} else if (d.data.updateType == "STATUS_UPDATED") {
											if (typeof(d.data.updateContent.person) != "undefined") {
												if (typeof(d.data.updateContent.person.currentStatus) != "undefined") {
													textMessageReplace = d.data.updateContent.person.currentStatus;
												} else {
													textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has an updated status';
												}
											}
											showLike = true;
										} else if (d.data.updateType == "CONNECTION_UPDATED_PICTURE") {
											if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
												textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has new <a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank">' + 'photos</a>';
											} else {
												textMessageReplace = '';
											}
											showLike = true;
	
										} else if (d.data.updateType == "CONNECTION_JOINED_GROUP") {
											if (typeof(d.data.updateContent.person.memberGroups) != "undefined") {
												if (typeof(d.data.updateContent.person.memberGroups.memberGroupList) != "undefined") {
													$.each(d.data.updateContent.person.memberGroups.memberGroupList,function(joinKey,joinData) {
														$.each(joinData,function(jKey,jData) {
	
															textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> joined the group <a href="' + joinData.siteGroupRequest.url + '" target="_blank">' + joinData.name + '</a>';
	
														});
													});
												} else {
													textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has joined a  group';
												}
											} else {
	
												if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
													textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has joined a  group';
												} else {
													textMessageReplace = '';
												}
											}
	
											showLike = true;
										} else if (d.data.updateType == "APPLICATION_CONNECTION_UPDATE") {
											if (typeof(d.data.updateContent.person.personActivities) != "undefined") {
												if (typeof(d.data.updateContent.person.personActivities.activityList) != "undefined") {
													$.each(d.data.updateContent.person.personActivities.activityList,function(actKey,actData) {
														$.each(actData,function(aKey,aData) {
															textMessageReplace = parseUrl2(actData.body);
														});
													});
												}
											}
											showLike = true;
										} else if (d.data.updateType == "CONNECTION_RECOMMENDED") {
											if (typeof(d.data.updateContent.person.recommendationsReceived) != "undefined") {
												if (typeof(d.data.updateContent.person.recommendationsReceived.recommendationList) != "undefined") {
													$.each(d.data.updateContent.person.recommendationsReceived.recommendationList,function(recKey,recData) {
														$.each(recData,function(rKey,rData) {
															textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> was recommended by <a href="' + recData.recommender.siteStandardProfileRequest.url + '" target="_blank"  class="text-capitalize">' + recData.recommender.firstName + ' ' + recData.recommender.lastName + '</a>, "' + parseUrl(recData.recommendationSnippet) + '"';
														});
													});
												} else {
													textMessageReplace ='';
													//textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> was recommended on <a href="http://www.linkedin.com/" target="_blank" class="text-capitalize">LinkedIn</a>';
												}
											} else if (typeof(d.data.updateContent.person.recommendationsGiven) != "undefined") {
												if (typeof(d.data.updateContent.person.recommendationsGiven.recommendationList) != "undefined") {
													$.each(d.data.updateContent.person.recommendationsGiven.recommendationList,function(recKey,recData) {
														$.each(recData,function(rKey,rData) {
															textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> recommended <a href="' + recData.recommendee.siteStandardProfileRequest.url + '" target="_blank"  class="text-capitalize">' + recData.recommendee.firstName + ' ' + recData.recommendee.lastName + '</a>, "' + parseUrl(recData.recommendationSnippet) + '"';
														});
													});
												} else {
	
													if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
														textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> recommended someone on <a href="http://www.linkedin.com/" target="_blank" class="text-capitalize">LinkedIn</a>';
													} else {
														textMessageReplace = '';
													}
	
													//textMessageReplace ='';
													//textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> recommended someone on <a href="http://www.linkedin.com/" target="_blank" class="text-capitalize">LinkedIn</a>';
												}
											} else {
	
												if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
													textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> recommended someone on <a href="http://www.linkedin.com/" target="_blank" class="text-capitalize">LinkedIn</a>';
												} else {
													textMessageReplace = '';
												}
	
												//textMessageReplace ='';
												//textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> recommended someone on <a href="http://www.linkedin.com/" target="_blank" class="text-capitalize">LinkedIn</a>';
											}
	
											showLike = true;
										} else {
	
											if (typeof(d.data.updateContent.person) != "undefined") {
												if (typeof(d.data.updateContent.person.currentShare) != "undefined") {
													if (typeof(d.data.updateContent.person.currentShare.comment) != "undefined") {
														textMessageReplace = parseUrl(d.data.updateContent.person.currentShare.comment);
													} else {
														textMessageReplace = '';
													}
													if (typeof(d.data.updateContent.person.currentShare.content) != "undefined") {
	
														if (typeof(d.data.updateContent.person.currentShare.content.submittedImageUrl) != "undefined") {
															if (typeof(d.data.updateContent.person.currentShare.content.submittedUrl) != "undefined") {
																textMessageReplace = textMessageReplace + '<br><a href="' + d.data.updateContent.person.currentShare.content.submittedUrl + '" target="blank"><img src="' + d.data.updateContent.person.currentShare.content.submittedImageUrl + '" border="0" style="float: left; display: inline; margin-right: 5px; margin-top: 5px; width: 80px;" /></a>';
															} else {
																textMessageReplace = textMessageReplace + '<br><img src="' + d.data.updateContent.person.currentShare.content.submittedImageUrl + '" border="0" />';
															}
														}
	
														if (typeof(d.data.updateContent.person.currentShare.content.title) != "undefined") {
															if (typeof(d.data.updateContent.person.currentShare.content.submittedUrl) != "undefined") {
	
																textMessageReplace = textMessageReplace + '<br><a href="' + d.data.updateContent.person.currentShare.content.submittedUrl+ '" target="_blank">' + d.data.updateContent.person.currentShare.content.title + '</a>';
															} else {
																textMessageReplace = textMessageReplace + '<br><a href="http://www.linkedin.com" target="_blank">' + d.data.updateContent.person.currentShare.content.title + '</a>';
															}
														}
	
														if (typeof(d.data.updateContent.person.currentShare.content.description) != "undefined") {
															textMessageReplace = textMessageReplace + '<br>' + d.data.updateContent.person.currentShare.content.description;
														}
													}
													//} else {
														//textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has an updated status 2';
													//}
												} else {
													if (typeof(d.data.updateContent.person.siteStandardProfileRequest) != "undefined") {
														textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has an updated status';
													} else {
														textMessageReplace = '';
													}
												}
											} else {
												textMessageReplace = '';
												//textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has an updated status';
											}
	
	
											/*if (typeof(d.data.updateContent.person) != "undefined") {
												if (typeof(d.data.updateContent.person.currentStatus) != "undefined") {
													updateContentBoolean = true;
												}
											}*/
	
											/*if (typeof(d.data.updateType) != "undefined") {
												textMessageReplace = d.data.updateType.replace(/_/g," ");
												textMessageReplace = textMessageReplace.replace(/CONNECTION/,"");
												if (d.data.updateType == "CONNECTION_UPDATE_PROFILE" || d.data.updateType == "CONNECTION_UPDATED_PICTURE") {
													showLike = true;
												} else {
													showLike = false;
												}
											} else {
												textMessageReplace = "";
											}*/
										}
										textMessage = textMessageReplace;
	
									} else {
										//textMessage = d.data.updateContent.person.currentStatus;
										//textMessage = parseUrl(textMessage);
	
										if (d.data.updateType == "STATUS_UPDATED") {
											if (typeof(d.data.updateContent.person) != "undefined") {
												if (typeof(d.data.updateContent.person.currentStatus) != "undefined") {
													textMessageReplace = parseUrl(d.data.updateContent.person.currentStatus);
												} else {
													textMessageReplace = '<a href="' + d.data.updateContent.person.siteStandardProfileRequest.url + '" target="_blank" class="text-capitalize">' + d.data.updateContent.person.firstName + ' ' + d.data.updateContent.person.lastName + '</a> has an updated status';
												}
											}
										}
										textMessage = textMessageReplace;
										showLike = true;
									}
									tsText = document.createTextNode(getTimeStamp(d.timestamp));
									//if (appBoolean == "undefined") {
										viaText = "Linkedin";
									//} else {
										//viaText = getTextNode();
									//}
								} else {
									imgUrl = "";
									aHrefText = "http://www.linkedin.com";
									//userText = document.createTextNode("Private");
									//userText2 = document.createTextNode("Private");
									userText = document.createTextNode(typeof(d.data.updateContent));
									userText2 = document.createTextNode(typeof(d.data.updateContent));
	
									textMessage = "empty-data";
									viaText = "Linkedin";
								}
							} else {
	
								tsText = document.createTextNode(getTimeStamp(d.timestamp));
								//if (appBoolean == "undefined") {
									//viaText = "Linkedin";
								//} else {
									//viaText = getTextNode();
								//}
	
								imgUrl = "";
								aHrefText = "http://www.linkedin.com";
								userText = document.createTextNode("");
								userText2 = document.createTextNode("");
								textMessage = "empty-data";
								viaText = "Linkedin";
							}
						} else {
							
							imgUrl = "";
							aHrefText = "http://www.linkedin.com";
							userText = document.createTextNode("");
							userText2 = document.createTextNode("");
							textMessage = "empty-data";
							viaText = "Linkedin";
							
						}
						break;
					default:
				}

				//create li element for each feed
				li = document.createElement("li");
				li2 = document.createElement("li");

				//add class after the first ten item
				//if (showCounter >= 50) {
					//$(li).attr("class","display-none");
				//}

				//create div class for each feed
				div=document.createElement("div");
				$(div).attr("class","engage-feeds-li");

				div2=document.createElement("div");
				$(div2).attr("class","engage-feeds-li");

				//create div photo container
				divPhoto = document.createElement("div");
				$(divPhoto).attr("class","engage-photo");

				divPhoto2 = document.createElement("div");
				$(divPhoto2).attr("class","engage-photo");

				if(imgUrl != "") {

					imgLink = document.createElement("a");
					$(imgLink).attr("href", aHrefText);
					$(imgLink).attr("target", "_blank");

					img = document.createElement("img");
					$(img).attr("src",imgUrl);

					imgLink.appendChild(img);
					divPhoto.appendChild(imgLink);

					imgLink2 = document.createElement("a");
					$(imgLink2).attr("href", aHrefText);
					$(imgLink2).attr("target", "_blank");

					img2 = document.createElement("img");
					$(img2).attr("src",imgUrl);

					imgLink2.appendChild(img2);
					divPhoto2.appendChild(imgLink2);
				}

				//create div content container
				divContent = document.createElement("div");
				$(divContent).attr("class","engage-content");

				divContent2 = document.createElement("div");
				$(divContent2).attr("class","engage-content")

				//create user name link
				aUser = document.createElement("a");
				$(aUser).attr("href",aHrefText);
				$(aUser).attr("class","bold text-capitalize");
				//$(aUser).attr("class","");
				$(aUser).attr("target","_blank");
				aUser.appendChild(userText);

				aUser2 = document.createElement("a");
				$(aUser2).attr("href",aHrefText);
				$(aUser2).attr("class","bold");
				$(aUser2).attr("target","_blank");
				aUser2.appendChild(userText2);

				//create social icon
				iconSocial = document.createElement("div");
				$(iconSocial).attr("class","engage-social-"+d.type);

				//create min social icon
				iconSocial2 = document.createElement("div");
				$(iconSocial2).attr("class","engage-social-"+d.type+"2");

				//create time stamp
				ts = document.createElement("span");
				$(ts).attr("class","color-light-gray-2");

				if (typeof(tsText) != "undefined") {
					ts.appendChild(tsText);
				}

				//create via post social
				via = document.createElement("span");
				$(via).attr("class","color-light-gray-2");
				viaText = document.createTextNode(" via "+viaText);
				via.appendChild(viaText);

				//append to content
				divContent.appendChild(aUser);
				br = document.createElement("br");
				divContent.appendChild(br);

				divContent2.appendChild(aUser2);
				br = document.createElement("br");
				divContent2.appendChild(br);

				switch(d.type) {
					case "facebook":

						if (storyBoolean != "undefined") {
							//divContent.appendChild(storyMessage);
							$(divContent).append(storyMessage);
							br = document.createElement("br");
							divContent.appendChild(br);

							$(divContent2).append(storyMessage);
							br = document.createElement("br");
							divContent2.appendChild(br);
						}

						if (textBoolean != "undefined") {
							//divContent.appendChild(textMessage);
							$(divContent).append(textMessage);
							br = document.createElement("br");
							divContent.appendChild(br);

							$(divContent2).append(textMessage);
							br = document.createElement("br");
							divContent2.appendChild(br);
						}

						if (linkBoolean != "undefined") {
							if (pictureBoolean != "undefined") {
								linkShare.appendChild(photoShare);								
								linkShare2.appendChild(photoShare2);
							} else {
								if (d.data.type == "photo") {
									linkShare.appendChild(photoShare);
									linkShare2.appendChild(photoShare2);
								}
							}
							
							divContent.appendChild(linkShare);
							divContent2.appendChild(linkShare2);
						} else {
							if (pictureBoolean != "undefined") {
								divContent.appendChild(photoShare);
								divContent2.appendChild(photoShare2);
							} else {
								if (d.data.type == "photo") {
									linkShare.appendChild(photoShare);
									linkShare2.appendChild(photoShare2);
								}
							}
						}
						
						
						if (nameBoolean != "undefined") {
							//divContent.appendChild(nameMessage);
							$(divContent).append("<a href='"+d.data.link+"' target='_blank' class='color-blue bold text-no-underline'>"+nameMessage+"</a>");
							br = document.createElement("br");
							divContent.appendChild(br);

							$(divContent2).append("<a href='"+d.data.link+"' target='_blank' class='color-blue bold text-no-underline'>"+nameMessage+"</a>");
							br = document.createElement("br");
							divContent2.appendChild(br);
						}

						if (captionBoolean != "undefined") {
							
							if (d.data.type == "photo" && typeof(d.data.application) != "undefined") {
								//do nothing
							} else {	
								//divContent.appendChild(captionMessage);
								$(divContent).append(captionMessage);
								br = document.createElement("br");
								divContent.appendChild(br);
							}
							
							$(divContent2).append(captionMessage);
							br = document.createElement("br");
							divContent.appendChild(br);
						}

						if (descBoolean != "undefined") {
							br = document.createElement("br");
							divContent.appendChild(br);
							$(divContent).append(descMessage);

							br = document.createElement("br");
							divContent2.appendChild(br);
							$(divContent2).append(descMessage);
						}
						break;

					case "twitter":
						//divContent.appendChild(textMessage);
						$(divContent).append(textMessage);
						$(divContent2).append(textMessage);
						$(divContent).add(divContent2).find('.openPhotoModal').click(openPhotoModalAction);
						break;

					case "linkedin":
						//divContent.appendChild(textMessage);
						$(divContent).append(textMessage);
						$(divContent2).append(textMessage);
						break;
					default:

				}

				brDiv = document.createElement("div");
				$(brDiv).attr("class","clear-both");
				divContent.appendChild(brDiv);
				divContent.appendChild(iconSocial);
				divContent.appendChild(ts);
				divContent.appendChild(via);

				//append and create like, reply, delete retweet, etc

				switch(d.type) {
					case "facebook":
						if (showComment == true) {
							socialComment = document.createElement("a");
							$(socialComment).attr("href","javascript:void(0)");

							$(socialComment).attr("class","socialActionClick social-action");
							$(socialComment).attr("id",d.type+",comment,"+d.data.id+","+d.identity.providerUID+",''");

							tempText = document.createTextNode("Comment");
							socialComment.appendChild(tempText);

							//append
							divContent.appendChild(socialComment);

						}

						// begin delete container

						if (d.identity.providerUID == d.data.from.id) {

							appBoolean = typeof(d.data.application);
							if (appBoolean == "undefined") {
							} else {
								if (d.data.application.name == "MyLife.com") {
									$(divContent).append(
										$('<A href="#" class="socialDeleteAction social-action">Delete</A>')
											.click(function(e){
												e.preventDefault();
												deleteSocial(d.type, 'delete', d.data.id, d.providerId);
											})
									);
								}
							}
						}

						defLike = typeof(d.data.likes);

						if (showLike == true) {
							if (defLike == "undefined") {
								//like container
								likeContainer = document.createElement("span");
								$(likeContainer).attr("id","counter-"+d.type+"-"+d.timestamp+"-"+d.data.id+"-0");
								$(likeContainer).attr("class","like-counter");
							} else {
								//check if user already like
								$.each(d.data.likes.data,function(iL,dL) {
									if (d.identity.providerUID == dL.id) {
										likeBoolean = true;
									}
								});
							}

							$('<A href="javascript:void(0)" class="social-action"></A>')
								.text(likeBoolean ? 'Unlike' : 'Like')
								.click(function(e){
									e.preventDefault();
									clearAllError();
									socialAction(
										d.type,
										'like',
										d.data.id,
										defLike == "undefined" ? 0 : d.data.likes.count,
										d.timestamp
									);
								})
								.appendTo($(divContent));

						}

						if (defLike != "undefined") {
							// begin like container
							likeContainer = document.createElement("span");
							$(likeContainer).attr("id","counter-"+d.type+"-"+d.timestamp+"-"+d.data.id+"-"+d.data.likes.count);
							$(likeContainer).attr("class","like-counter");

							if (d.data.likes.count > 1) {
								likeTextValue = document.createTextNode(d.data.likes.count + " Likes");
								likeContainer.appendChild(likeTextValue);
							} else {
								if (d.data.likes.count == 1) {
									likeTextValue = document.createTextNode(d.data.likes.count + " Like");
									likeContainer.appendChild(likeTextValue);
								}
							}
							//append

							divContent.appendChild(likeContainer);
						}

						if (showComment == true) {
							//append container after like container
							commentContainer = document.createElement("div");
							$(commentContainer).attr("id",d.type+"-comment-"+d.data.id);
							divContent.appendChild(commentContainer);
						}

						// begin comments container
						commentsBoolean = typeof(d.data.comments);
						divComments = document.createElement("div");
						$(divComments).attr("id","userComment-"+d.data.id);
						$(divComments).attr("class","userCommentForm");

						if (commentsBoolean != "undefined") {
							if (d.data.comments.count > 0) {

								if (d.data.comments.count > 1) {
									commentViewContainer = document.createElement("div");

									commentViewArrow = document.createElement("div");
									$(commentViewArrow).attr("class","blue-arrow-right");
									$(commentViewArrow).attr("id","blue-arrow-right-"+d.data.id);
									commentViewContainer.appendChild(commentViewArrow);

									commentView = document.createElement("a");
									$(commentView).attr("href","javascript:void(0)");
									$(commentView).attr("class","getViewComments")
									$(commentView).attr("id",d.type+"."+d.data.id);
									commentViewText = document.createTextNode("View more comments");
									commentView.appendChild(commentViewText);
									commentViewContainer.appendChild(commentView);

									commentViewCounterContainer = document.createElement("span");
									$(commentViewCounterContainer).attr("class","color-blue");
									commentViewCountText = document.createTextNode(" ("+d.data.comments.count+")");
									commentViewCounterContainer.appendChild(commentViewCountText);
									commentViewContainer.appendChild(commentViewCounterContainer);

									//append
									divComments.appendChild(commentViewContainer);
								}

								if (d.data.comments.data.length > 0) {

									$.each(d.data.comments.data,function(iC,dC) {
										commentCounter = d.data.comments.data.length - 1;

										if (iC == commentCounter) {
											commentMessage = dC.message;
											if(typeof(dC.likes) != "undefined") {
												commentLikeCount = dC.likes;
											} else {
												commentLikeCount = 0;
											}
											commentId = dC.id;
											commentCreated = dC.created_time;
											commentFromName = dC.from.name;
											commentFromId = dC.from.id;
											commentFromImage = "/json/social/picture/facebook/"+commentFromId;

											commentLikeBoolean = typeof(dC.like);
											if (commentLikeBoolean != "undefined") {
												commentLike = dC.like;
											}
										}
									});

									divCommentsFeedContainer = document.createElement("div");
									$(divCommentsFeedContainer).attr("class","comment-feed-container-first");

									divCommentsPhoto = document.createElement("div");
									$(divCommentsPhoto).attr("class","comment-photo");

									divCommentsPhotoImageLink = document.createElement("a");
									$(divCommentsPhotoImageLink).attr("href","http://www.facebook.com/"+commentFromId);
									$(divCommentsPhotoImageLink).attr("target","_blank");

									divCommentsPhotoImage = document.createElement("img");
									$(divCommentsPhotoImage).attr("src",commentFromImage);

									divCommentsPhotoImageLink.appendChild(divCommentsPhotoImage);
									divCommentsPhoto.appendChild(divCommentsPhotoImageLink);

									divCommentTextContainer = document.createElement("div");
									$(divCommentTextContainer).attr("class","userCommentTextContainer");

									divCommentFrom = document.createTextNode(commentFromName);
									divCommentMessage = document.createTextNode(commentMessage);

									divCommentCreatedContainer = document.createElement("div");
									$(divCommentCreatedContainer).attr("class","color-light-gray-2");

									//dateObj = Date.parse(commentCreated);
									//dateObj = commentCreated;
									if (commentCreated != "") {
										dateObj = new Date();
										dateObj.setISO8601(commentCreated);
									}

									divCommentCreated = document.createTextNode("Posted on " + dateObj);
									divCommentCreatedContainer.appendChild(divCommentCreated);

									divCommentLike = document.createElement("a");
									$(divCommentLike).attr("href","javascript:void(0)");
									$(divCommentLike).attr("class","commentLike");
									$(divCommentLike).attr("id",d.type+"-id-"+commentId+"-"+commentLikeCount+"-like");
									divCommentLikeText = document.createTextNode("Like");
									divCommentLike.appendChild(divCommentLikeText);
									divCommentCreatedContainer.appendChild(divCommentLike);

									if (commentLikeCount == 0) {
										//divCommentLikeCounterText = document.createTextNode("Like");
									} else if (commentLikeCount == 1) {
										divCommentLikeCounterText = document.createTextNode(commentLikeCount + " Like");
									} else {
										divCommentLikeCounterText = document.createTextNode(commentLikeCount + " Likes");
									}

									if (commentLikeCount != 0) {
										divCommentLikeCounter = document.createElement("span");
										$(divCommentLikeCounter).attr("class","like-counter");
										$(divCommentLikeCounter).attr("id","counter-"+d.type+"-id-"+commentId+"-"+commentLikeCount);
										divCommentLikeCounter.appendChild(divCommentLikeCounterText);
										divCommentCreatedContainer.appendChild(divCommentLikeCounter);
									}

									divCommentLink = document.createElement("a");
									$(divCommentLink).attr("href","http://www.facebook.com/"+commentFromId);
									$(divCommentLink).attr("class","bold padding-right-5");
									$(divCommentLink).attr("target","_blank");
									divCommentLink.appendChild(divCommentFrom);

									divCommentTextContainer.appendChild(divCommentLink);
									divCommentTextContainer.appendChild(divCommentMessage);
									divCommentTextContainer.appendChild(divCommentCreatedContainer);

									divCommentsFeedContainer.appendChild(divCommentTextContainer);
									divCommentsFeedContainer.appendChild(divCommentsPhoto);

									divComments.appendChild(divCommentsFeedContainer);
								}

							}
						}

						//append
						divContent.appendChild(divComments);

							//end comments container

						break;
					case "twitter":

						reply = document.createElement("a");
						$(reply).attr("href","javascript:void(0)");
						$(reply).attr("class","socialActionClick social-action");
						$(reply).attr("id",d.type+",reply,"+d.data.idStr+","+d.identity.photoURL+","+d.data.fromUser);
						//$(reply).attr("onClick","socialValidateAction('"+d.type+"','reply','"+d.data.idStr+"','"+d.identity.photoURL+"','"+d.data.fromUser+"')");

						tempText = document.createTextNode("Reply");
						reply.appendChild(tempText);

						if (d.identity.providerUID != d.data.fromUserId) {
							retweet = document.createElement("a");
							$(retweet).attr("href","javascript:void(0)");
							$(retweet).attr("id","retweet-link-"+d.data.idStr);
							$(retweet).attr("class","social-action socialRetweetAction");
							//$(retweet).attr("id",d.type+",retweet,"+d.data.idStr);
							//$(retweet).attr("onClick","retweetOverlay('"+d.type+"','retweet','"+d.data.idStr+"')");
							tempText = document.createTextNode("Retweet");
							retweet.appendChild(tempText);

							//overlay retweet
							retweetOverlay = document.createElement("div");
							$(retweetOverlay).attr("id","overlay-"+d.type+"-retweet-"+d.data.idStr);
							$(retweetOverlay).attr("class","retweet-overlay display-none");

							retweetPointer = document.createElement("div");
							$(retweetPointer).attr("class","retweet-pointer");
							retweetOverlay.appendChild(retweetPointer);

							retweetComment = document.createElement("div");
							$(retweetComment).attr("class","retweet-content");

							retweetClose = document.createElement("a");
							$(retweetClose).attr("class","retweet-close");
							$(retweetClose).attr("href","javascript:void(0)");
							$(retweetClose).attr("id","close,"+d.type+",retweet,"+d.data.idStr);
							//$(retweetClose).attr("onClick","retweetOverlayClose('"+d.type+"','retweet','"+d.data.idStr+"')");
							retweetComment.appendChild(retweetClose);

							retweetHeader = document.createElement("span");
							$(retweetHeader).attr("class","retweet-heeader");
							headerText = document.createTextNode("Retweet this to your followers?");
							retweetHeader.appendChild(headerText);
							retweetComment.appendChild(retweetHeader);

							br = document.createElement("br");
							retweetComment.appendChild(br);

							retweetPhoto = document.createElement("div");
							$(retweetPhoto).attr("class","engage-photo");
							retweetImg = document.createElement("img");
							$(retweetImg).attr("src",d.data.profileImageUrl);
							retweetPhoto.appendChild(retweetImg);

							retweetContentContainer = document.createElement("div");
							$(retweetContentContainer).attr("class","retweet-content-container");

							//retweetUserContainer = document.createElement("span");
							//$(retweetUserContainer).attr("class","retweet-user-container");
							//retweetUserName = document.createTextNode(d.data.fromUser);
							//retweetUserContainer.appendChild(retweetUserName);
							//retweetContentContainer.appendChild(retweetUserContainer);

							retweetUser = document.createElement("a");
							$(retweetUser).attr("href", "http://twitter.com/#!/"+d.data.fromUser);
							$(retweetUser).attr("class","bold");
							$(retweetUser).attr("target","_blank");
							retweetUserText = document.createTextNode(d.data.fromUser);
							retweetUser.appendChild(retweetUserText);
							retweetContentContainer.appendChild(retweetUser);

							br = document.createElement("br");
							retweetContentContainer.appendChild(br);

							retweetUserMessage = document.createTextNode(d.data.text);
							retweetContentContainer.appendChild(retweetUserMessage);
							br = document.createElement("br");
							retweetContentContainer.appendChild(br);

							retweetlLoading = document.createElement("div");
							$(retweetlLoading).attr("class","comment-loading float-left");
							$(retweetlLoading).attr("id","loader-"+d.type+"-retweet-"+d.data.idStr);
							retweetContentContainer.appendChild(retweetlLoading);

							retweetPostBttn = document.createElement("a");
							$(retweetPostBttn).attr("class","retweet-post-bttn");
							$(retweetPostBttn).attr("href","javascript:void(0)");
							//$(retweetPostBttn).attr("onClick","postSocialAction('"+d.type+"','retweet','"+d.data.idStr+"')");
							$(retweetPostBttn).attr("id","postbttn-"+d.type+"-retweet-"+d.data.idStr);
							retweetContentContainer.appendChild(retweetPostBttn);

							//retweetCancelBttn
							retweetCancelBttn = document.createElement("a");
							$(retweetCancelBttn).attr("class","comment-cancel-retweet-bttn float-left");
							$(retweetCancelBttn).attr("href","javascript:void(0)");
							//$(retweetCancelBttn).attr("onClick","retweetOverlayClose('"+d.type+"','retweet','"+d.data.idStr+"')");
							$(retweetCancelBttn).attr("id",d.type+"-retweet-"+d.data.idStr+"-overlay-close");
							retweetCancelBttnText = document.createTextNode("Cancel");
							retweetCancelBttn.appendChild(retweetCancelBttnText);
							retweetContentContainer.appendChild(retweetCancelBttn);

							retweetComment.appendChild(retweetContentContainer);
							retweetComment.appendChild(retweetPhoto);

							retweetOverlay.appendChild(retweetComment);
							//end retweet overlay
						}
						commentContainer = document.createElement("div")
						$(commentContainer).attr("id",d.type+"-reply-"+d.data.idStr);

						//append

						divContent.appendChild(reply);

						if (d.identity.providerUID == d.data.fromUserId) {
							// begin delete container

							$(divContent).append(
								$('<A href="#" class="socialDeleteAction social-action">Delete</A>')
									.click(function(e){
										e.preventDefault();
										deleteSocial(d.type, 'delete', d.data.idStr, d.providerId);
									})
							);
						}

						if (d.identity.providerUID != d.data.fromUserId) {
							divContent.appendChild(retweet);
						}

						divContent.appendChild(commentContainer);
						//divContent.appendChild(retweetOverlay);
						if (d.identity.providerUID != d.data.fromUserId) {
							retweetDiv.appendChild(retweetOverlay);
						}
						break;
					case "linkedin":
						if (typeof(d.data.updateType) != "undefined") {
							
							commentContainerHidden = document.createElement("div");
							$(commentContainerHidden).attr("id","hidden-"+d.type+"-"+d.data.timestamp);
							$(commentContainerHidden).attr("class","display-none");
							commentContainerUpdateKey = document.createTextNode(d.data.updateKey);
							commentContainerHidden.appendChild(commentContainerUpdateKey);
							divContent.appendChild(commentContainerHidden);
	
							if (typeof(d.data.updateContent.person) != "undefined") {
								if (d.data.isCommentable && showLike == true) {
									socialComment = document.createElement("a");
									$(socialComment).attr("href","javascript:void(0)");
									$(socialComment).attr("class","socialActionClick social-action");
									$(socialComment).attr("id",d.type+",comment,"+d.data.timestamp+","+ d.data.updateContent.person.pictureUrl+",''");
									tempText = document.createTextNode("Comment");
									socialComment.appendChild(tempText);
		
									divContent.appendChild(socialComment);
		
									commentContainer = document.createElement("div");
									$(commentContainer).attr("id",d.type+"-comment-"+d.data.timestamp);
								}
							}
	
							//not supported
							//if (d.identity.providerUID == d.data.updateContent.person.id) {
							    // begin delete container
								//socialDelete = document.createElement("a");
								//$(socialDelete).attr("href","javascript:void(0)");
	
								//$(socialDelete).attr("class","socialDeleteAction social-action");
								//$(socialDelete).attr("id",d.type+",delete,"+d.data.timestamp+","+ d.data.updateContent.person.pictureUrl+","+d.providerId);
	
								//tempText = document.createTextNode("Delete");
								//socialDelete.appendChild(tempText);
	
								//append
								//divContent.appendChild(socialDelete);
							//}
	
							if (d.data.isLikable && showLike == true) {
	
								if (d.data.isLiked) {
									linkedInLike = d.data.likes.total;
									if (linkedInLike == null || linkedInLike == 0) {
										linkedInLike = 0;
									}
	
									//check if user already like
									$.each(d.data.likes.like,function(iL,dL) {
										if (d.identity.providerUID == dL.person.id) {
											likeBoolean = true;
										}
									});
								}
	
								if (likeBoolean) {
									$('<A href="javascript:void(0)" class="social-action">Unlike</A>')
										.click(function(e){
											e.preventDefault();
											clearAllError();
											socialAction(
												d.type,
												'like',
												d.data.timestamp,
												linkedInLike,
												d.data.timestamp
											);
										})
										.appendTo($(divContent));

									//like container
									likeContainer = document.createElement("span");
									$(likeContainer).attr("id","counter-"+d.type+"-"+d.data.timestamp+"-"+linkedInLike);
									$(likeContainer).attr("class","like-counter");
	
									if (linkedInLike > 1) {
										likeTextValue = document.createTextNode(linkedInLike + " Likes");
										likeContainer.appendChild(likeTextValue);
									} else {
										if (linkedInLike == 1) {
											likeTextValue = document.createTextNode(linkedInLike + " Like");
											likeContainer.appendChild(likeTextValue);
										}
									}
	
									//append
									divContent.appendChild(likeContainer);
								} else {
									$('<A href="javascript:void(0)" class="social-action">Like</A>')
										.click(function(e){
											e.preventDefault();
											clearAllError();
											socialAction(
												d.type,
												'like',
												d.data.timestamp,
												linkedInLike,
												d.data.timestamp
											);
										})
										.appendTo($(divContent));

									//like container
									likeContainer = document.createElement("span");
									$(likeContainer).attr("id","counter-"+d.type+"-"+d.data.timestamp+"-"+linkedInLike);
									$(likeContainer).attr("class","like-counter");
	
									if (linkedInLike > 1) {
										likeTextValue = document.createTextNode(linkedInLike + " Likes");
										likeContainer.appendChild(likeTextValue);
									} else {
										if (linkedInLike == 1) {
											likeTextValue = document.createTextNode(linkedInLike + " Like");
											likeContainer.appendChild(likeTextValue);
										}
									}
									//append
									divContent.appendChild(likeContainer);
								}
							}
	
							//append commentContainter
							if (typeof(d.data.updateContent.person) != "undefined") {
								if (d.data.isCommentable && showLike == true) {
									divContent.appendChild(commentContainer);
								}
							}
							// begin comments container
							commentsBoolean = typeof(d.data.updateComments);
							divComments = document.createElement("div");
							$(divComments).attr("id","userComment-"+d.data.timestamp);
							$(divComments).attr("class","userCommentForm");
	
							if (commentsBoolean != "undefined" && d.data.isCommentable) {
								if (d.data.updateComments.total > 0) {
	
									if (d.data.updateComments.total > 1) {
										commentViewContainer = document.createElement("div");
										commentViewArrow = document.createElement("div");
										$(commentViewArrow).attr("class","blue-arrow-right");
										$(commentViewArrow).attr("id","blue-arrow-right-"+d.data.timestamp);
										commentViewContainer.appendChild(commentViewArrow);
	
										commentView = document.createElement("a");
										$(commentView).attr("href","javascript:void(0)");
										$(commentView).attr("class","getViewComments")
										$(commentView).attr("id",d.type+"."+d.data.timestamp);
										commentViewText = document.createTextNode("View more comments");
										commentView.appendChild(commentViewText);
										commentViewContainer.appendChild(commentView);
	
										//append
										divComments.appendChild(commentViewContainer);
									}
	
									$.each(d.data.updateComments.updateCommentList,function(iC,dC) {
										commentCounter = d.data.updateComments.updateCommentList.length - 1;
										if (iC == commentCounter) {
											commentMessage = dC.comment;
											commentId = dC.id;
											commentCreated = dC.timestamp;
											commentFromName = dC.person.firstName + " " + dC.person.lastName;
											commentFromId = dC.person.id;
											commentFromImage = dC.person.pictureUrl;
										}
									});
	
									divCommentsFeedContainer = document.createElement("div");
									$(divCommentsFeedContainer).attr("class","comment-feed-container-first");
	
									divCommentsPhoto = document.createElement("div");
									$(divCommentsPhoto).attr("class","comment-photo");
	
									divCommentsPhotoImage = document.createElement("img");
									$(divCommentsPhotoImage).attr("src",commentFromImage);
									divCommentsPhoto.appendChild(divCommentsPhotoImage);
	
									divCommentTextContainer = document.createElement("div");
									$(divCommentTextContainer).attr("class","userCommentTextContainer");
	
									divCommentFrom = document.createTextNode(commentFromName);
									divCommentMessage = document.createTextNode(commentMessage);
	
									divCommentCreatedContainer = document.createElement("div");
									$(divCommentCreatedContainer).attr("class","color-light-gray-2");
	
									if (commentCreated != "") {
										dateObj = new Date(commentCreated);
									}
									//dateObj = new Date();
									//dateObj.setISO8601(commentCreated);
	
									divCommentCreated = document.createTextNode("Posted on " + dateObj);
									divCommentCreatedContainer.appendChild(divCommentCreated);
	
									divCommentLink = document.createElement("a");
									if (typeof(d.data.updateContent.person) != "undefined") {
										$(divCommentLink).attr("href",d.data.updateContent.person.siteStandardProfileRequest.url);
									}
									$(divCommentLink).attr("class","bold padding-right-5");
									$(divCommentLink).attr("target","_blank");
									divCommentLink.appendChild(divCommentFrom);
	
									divCommentTextContainer.appendChild(divCommentLink);
									divCommentTextContainer.appendChild(divCommentMessage);
									divCommentTextContainer.appendChild(divCommentCreatedContainer);
	
									divCommentsFeedContainer.appendChild(divCommentTextContainer);
									divCommentsFeedContainer.appendChild(divCommentsPhoto);
	
									divComments.appendChild(divCommentsFeedContainer);
	
								}
	
								//append
								divContent.appendChild(divComments);
							}
	
							//end comments container
						}
						
						break;
					default:
				}

				if (d.type == "linkedin") {
					if (typeof(d.data.updateType) == "undefined" && textMessage == "empty-data") {

						//do not include
						//if (typeof(d.data.updateContent.person) != "undefined") {
						//if (typeof(d.data.updateContent.person.currentStatus) != "undefined") {

					} else {
						if (textMessage != "empty-data") {
							if (d.data.updateContent.person != null && typeof(d.data.updateContent.person) != "undefined") {
								if (d.data.updateContent.person.firstName == "private") {
									//do not include

								} else {
									//append to main element
									div.appendChild(divContent);
									div.appendChild(divPhoto);
									li.appendChild(div);
								    $(li).attr("id",d.providerId);

									ul.appendChild(li);

									//min view
									//if (showCounter <= 4) {
										//min append icon
										divPhoto2.appendChild(iconSocial2);

										div2.appendChild(divContent2);
										div2.appendChild(divPhoto2);
										li2.appendChild(div2);
										ul2.appendChild(li2);
									//}

									//increment count
									showCounter++;

								}

							} else {

								//append to main element
								div.appendChild(divContent);
								div.appendChild(divPhoto);
								li.appendChild(div);
							    $(li).attr("id",d.providerId);

								ul.appendChild(li);

								//min view
								//if (showCounter <= 4) {
									//min append icon
									divPhoto2.appendChild(iconSocial2);

									div2.appendChild(divContent2);
									div2.appendChild(divPhoto2);
									li2.appendChild(div2);
									ul2.appendChild(li2);
								//}

								//increment count
								showCounter++;

							}

						}
					}
				
				} else if (d.type == "facebook") {
					
					dup = false;
					dupId = '';
					dupName = '';
					
					if (typeof(d.qualifier) != "undefined") {
						if (d.qualifier == "Facebook_NewsFeeds") {
							if (typeof(d.data.to) != "undefined") {
								if (typeof(d.data.to.data) != "undefined") {
									$.each(d.data.to.data, function(dKey,dData) {
										//console.log(dData.name + " " + dData.id);
										dupId = dData.id;
										dupName = dData.name;
										if (dupId == d.identity.providerUID) {
											dup = true;
										}										
									});
								}
							}
							if (typeof(d.data.from) != "undefined") {							
								//console.log(d.data.from.id);
								dupId = d.data.from.id;
								
								if (dupId == d.identity.providerUID) {
									dup = true;
								}															
							}
						}
					} 
												
					if (dup == false && d.data.id.search(/^0_/)==-1) {
						//append to main element
						div.appendChild(divContent);
										
						div.appendChild(divPhoto);
						li.appendChild(div);

                        //fix for if actions are empty
						if (typeof(d.data.object_id) != "undefined" && typeof(d.data.application) != 'undefined' && d.data.application.name == 'Facebook for iPhone') {
							$(li).attr("id",d.data.object_id);
						} else {
							$(li).attr("id",d.providerId);
						}
						ul.appendChild(li);
		
						//min view
						//if (showCounter <= 4) {
							//min append icon
							divPhoto2.appendChild(iconSocial2);
		
							div2.appendChild(divContent2);
							div2.appendChild(divPhoto2);
							li2.appendChild(div2);
							ul2.appendChild(li2);
						//}
		
						//increment count
						showCounter++;
					}			
				
				} else {

					//append to main element
					div.appendChild(divContent);
									
					div.appendChild(divPhoto);
					li.appendChild(div);
					
					if (typeof(d.data.object_id) != "undefined") {
						$(li).attr("id",d.data.object_id);
					} else {
						$(li).attr("id",d.providerId);
					}
					
					ul.appendChild(li);

					//min view
					//if (showCounter <= 4) {
						//min append icon
						divPhoto2.appendChild(iconSocial2);

						div2.appendChild(divContent2);
						div2.appendChild(divPhoto2);
						li2.appendChild(div2);
						ul2.appendChild(li2);
					//}

					//increment count
					showCounter++;
				}
			}

		} else {

			if (typeof(d.message) != "undefined") {

				exceptionBlockMessage = "We are temporarily unable to connect to this network";
				exception = true;

			} else if (typeof(d.data) == "undefined") {

				exceptionBlockMessage = "We are temporarily unable to connect to this network";
				exception = true;

			} else {
				//exception
				switch (d.type) {
					case "facebook":
						if (facebookException != true) {
							exceptionFacebookMessage = d.data.message;
							if (exceptionFacebookMessage != "Error validating access token: The session has been invalidated because the user has changed the password.") {
								exceptionArr[exceptionCounter] = "Facebook";
								exceptionCounter++;
							}
							facebookException = true;
						}
						exception = true;
						break;
					case "twitter":
						if (twitterException != true) {
							exceptionArr[exceptionCounter] = "Twitter";
							exceptionCounter++;
							twitterException = true;
							exceptionTwitterMessage = d.data.message;
						}
						exception = true;
						break;
					case "linkedin":
						if (linkedinException != true) {
							exceptionArr[exceptionCounter] = "LinkedIn";
							linkedinException = true;
							exceptionCounter++;
							exceptionLinkedinMessage = d.data.message;
						}
						exception = true;
						break;
					default:
				}
			}
		}
	});

	if (exception) {

		for(var iL = 0; iL < exceptionArr.length; iL++) {
			if ((exceptionArr.length - 1) == 0) {
				exceptionText = exceptionArr[iL];
				exceptionCom = exceptionArr[iL]+".com";
			} else {
				if (iL == (exceptionArr.length - 1)) {
					exceptionText = exceptionText + " and " + exceptionArr[iL];
					exceptionCom = exceptionCom + " and " + exceptionArr[iL]+".com";
				} else {
					if (exceptionText == "") {
						exceptionText = exceptionText + exceptionArr[iL];
						exceptionCom = exceptionCom + exceptionArr[iL]+".com";
					} else {
						exceptionText = exceptionText + ", " + exceptionArr[iL];
						exceptionCom = exceptionCom + ", " + exceptionArr[iL]+".com";
					}
				}
			}

		}

		if (exceptionFacebookMessage == "Error validating access token: The session has been invalidated because the user has changed the password."){
			exceptionMessage = "We can no longer connect to Facebook. Click 'Add Accounts' to reconnect. ";
			autoDisconnect("facebook");
			timeOpenEngageImportOverlay();
		} else if (exceptionLinkedinMessage.search("The token used in the OAuth request is not valid.") > 0) {
			exceptionMessage = "We can no longer connect to LinkedIn. Click 'Add Accounts' to reconnect. ";
			autoDisconnect("linkedin");
			timeOpenEngageImportOverlay();
		} else if (exceptionTwitterMessage == "The authorization has been revoked.") {
			exceptionMessage = "We can no longer connect to Twitter. Click 'Add Accounts' to reconnect. ";
			autoDisconnect("twitter");
			timeOpenEngageImportOverlay();
		} else if (exceptionBlockMessage == "We are temporarily unable to connect to this network") {
				exceptionMessage = "We are temporarily unable to connect to this network ";
		} else {
			exceptionMessage = exceptionMessage + "We couldn't access your feed from "+exceptionText+". Please go to "+exceptionCom+" and check your settings.";
		}

		$("#postform-error-response").html(exceptionMessage);
		timeErrorMsg();

		exceptionBlockMessage = '';
		exceptionFacebookMessage = '';
		exceptionTwitterMessage = '';
		exceptionLinkedinMessage = '';
	}

		//append
		$("#engage-feed-container").html(ul);
		
		//generate facebook photos after append ul
		getAlbumPhotos();
		
		$("#engage-feed-container2").html(ul2);
		$("#retweetOverlay").html(retweetDiv);

		//remove feed loading
		if ($("#feed-loading").length > 0) {
			$("#feed-loading").html("");
		}

		//init tinyscrollbar ui
		if ($("#feeds-content-min:visible").length != 0) {
			initTinyScrollbar();
		}

		//$("#scrollbar1").css("display","block");
		//$("#scrollbar1").tinyscrollbar({ sizethumb: 350 });

}
//get text node only and return text
function getTextNode(s) {
	var elementNode = s;
	elementNode = elementNode.replace(/<a.*href="(.*?)".*>(.*?)<\/a>/gi, "$2");
	return elementNode;
}
//end funcitons to create elements for social feed
function ajaxGetFeeds(s) {
	var errorBoolean = false;
	var url = "/json/social/feeds/"+s;
	$.get(url, function(response) {

		if (response.length == 0) {

			$("#feed-loading").html("<div id='feed-error'>We're having difficulty getting the latest updates. Sorry for the inconvenience. Please try again later.</div>");

		} else {

			var message = typeof(response.message);
			var success = typeof(response.success);
			var messageText = "";
			var providerArr = new Array();
			var providerText = "";
			var providerCom = "";
			var providerTextVal = "";

			if (message != "undefined" && response.success == 0) {
				messageText = response.message;
				if (messageText.search("500 Internal Server Error")	> 0) {
					$("#postform-error").html("We couldn't get your new feeds. Please try again.");
				}
				if (messageText.search("Read timed out") > 0) {
					$("#postform-error").html("We couldn't get your new feeds. Please try again.");
				}
				if (messageText.search("The host did not accept the connection") > 0) {
					$("#postform-error").html("We are temporarily unable to connect to this network");
				}
				if (messageText.search("Error validation access token")	> 0 || messageText.search("Unable to parse response") > 0) {
					providerTextVal = $("#providers").val();
					providerArr = providerTextVal.split(",");

					for(var iL = 0; iL < providerArr.length; iL++) {
						if ((providerArr.length - 1) == 0) {
							providerText = providerArr[iL];
							providerCom = providerArr[iL]+".com";
						} else {
							if (iL == (providerArr.length - 1)) {
								providerText = providerText + " and " + providerArr[iL];
								providerCom = providerCom + " and " + providerArr[iL]+".com";
							} else {
								if (providerText == "") {
									providerText = providerText + providerArr[iL];
									providerCom = providerCom + providerArr[iL]+".com";
								} else {
									providerText = providerText + ", " + providerArr[iL];
									providerCom = providerCom + ", " + providerArr[iL]+".com";
								}
							}
						}
					}
					$("#postform-error").html("We couldn't access your feed from "+providerText+". Please go to "+providerCom+" and check your settings.");
				}
				/*if (messageText.search("Unable to parse response")	> 0) {
					providerTextVal = $("#providers").val();
					providerArr = providerTextVal.split(",");

					for(var iL = 0; iL < providerArr.length; iL++) {
						if ((providerArr.length - 1) == 0) {
							providerText = providerArr[iL];
						} else {
							if (iL == (providerArr.length - 1)) {
								providerText = providerText + " and " + providerArr[iL];
							} else {
								if (providerText == "") {
									providerText = providerText + providerArr[iL];
								} else {
									providerText = providerText + ", " + providerArr[iL];
								}
							}
						}
					}
					$("#postform-error").html("We couldn't access your feed from "+providerText+". Please go to "+providerText+".com and check your settings.");

				}*/
				$("#feed-loading").html("");
			} else {
				if (response.length == 1) {
					if (response[0].data.type == "OAuthException") {
						$("#feed-loading").html("");

						switch (response[0].type) {
							case "facebook":
								providerText = "Facebook";
								providerCom = "Facebook.com";
								break;
							case "twitter":
								providerText = "Twitter";
								providerCom = "Twiitter.com";
								break;
							case "linkedin":
								providerText = "LinkedIn";
								providerCom = "LinkedIn.com";
								break;
							default:
						}

						if (response[0].data.message == "Error validating access token: The session has been invalidated because the user has changed the password." || response[0].data.message == "The authorization has been revoked."){
							$("#postform-error-response").html("We can no longer connect to "+providerText+". Click 'Add Accounts' to reconnect.");
							autoDisconnect(response[0].type);
							timeOpenEngageImportOverlay();
						} else {
							$("#postform-error-response").html("We couldn't access your feed from "+providerText+". Please go to "+providerCom+" and check your settings.");
						}
						//$("#postform-error-response").html(response[0].data.message);
						timeErrorMsg();
						errorBoolean = true;
					}
					var serverError = typeof(response[0].data.type);
					if (serverError != "undefined") {
						if (response[0].data.type.search("500 Internal Server Error") > 0) {
							$("#postform-error-response").html("We couldn't get your new feeds. Please try again.");
							timeErrorMsg();
						}
					}
				}
				if (errorBoolean == false) {
					var json = response;
					var socialObj = new Object();
					printNetworkFeeds(json,socialObj);
				}
			}
		}
	});
}
function autoDisconnect(provider) {
	var url = "/json/social/disconnect/"+provider;
		$.get(url, function(response) {
	});
}
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}
function parseUrl(data) {
	if(typeof(data) == 'undefined') return '';
	var link = data.replace(/([A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+)/gi, '<a href="$1" target="_blank">$1</a></span>');
	return link;
}
function parseUrl2(data) {
	var link = data.replace(/<a href=/gi, '<a target="_blank" href=');
	return link;
}
function parseUserName(data,user,id) {
	var link = data.replace(user, '<a href="http://www.facebook.com/'+id+'" target="_blank" class="text-no-underline">'+user+'</a></span>');
	return link;
}
function parseUserStatus(data,user,id) {
	var link = data.replace(/status/gi, '<a href="http://www.facebook.com/'+id+'" target="_blank" class="text-no-underline">status</a></span>');
	return link;
}
/*function parseWWW(data) {
	var link = data.replace(/([[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+)/gi, '<a href="$1" target="_blank">http://$1</a></span>');
	return link;
}*/
function parsePound(data) {
	var link = data.replace(/(^|\s)#(\w+)/gi, '<span class="color-blue">$1#<a href="http://search.twitter.com/search?q=%23$2" target="_blank">$2</a></span>');
	return link;
}
function parseUser(data) {
	var link = data.replace(/(^|\s)@(\w+)/gi, '<span class="color-blue">$1@<a href="http://www.twitter.com/$2" target="_blank">$2</a></span>');
	return link;
}
function getUrlVars(data){
    var vars = []; 
    var hash;
    var hashes = data.slice(data.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}
function reloadOpener2() {

	var protocolUrl = "http";
	try  {
		protocolUrl = String(window.opener.document.location);
		window.location = "https://"+window.location.hostname+"/closePopup.view";
	} catch(err) {
		protocolUrl = "http";
		window.location = "http://"+window.location.hostname+"/closePopup.view";
	}
}

function updateConnection(data) {
	var provider = data;

	if (provider == "#fail") {
		$(".import-progress").parent().addClass("displayNone");
	} else {
		$(provider+"-button").siblings("span").removeClass("displayNone");
		$(".import-progress").parent().addClass("displayNone");
	}
	var d = new Date();
	var url = "/json/social/status?_"+d.getTime();
	$.get(url, function(response) {
		var json = response;
		var socialObj = new Object();
		socialObj = processNetworkStatus(json,socialObj);
		var totalEmailConnection = socialObj.emailConnected;

		if (totalEmailConnection == 4) {
			$("#email-connect").html("");
			$("#email-connect").css("height","0px");
		}
	});

}
function updateProgress(data) {
	$(".import-progress").parent().removeClass("displayNone");
}
function connectEmailNull() {

	var filter = "";
	var validateEmail = true;

	var email = $("#userid").val();
	//remove any whitespaces before email validation
	email = email.replace(/\s/g, "");

	var provider = "gmail"; //default
	var providerText = "Gmail";

	filter = /^([a-zA-Z0-9_\.\-])+\@((yahoo|ymail|rocketmail)+\.)+([a-zA-Z0-9.]{2,4})+$/;
	if (filter.test(email)) {
		provider = "yahoo";
		providerText = "Yahoo";
	}

	filter = /^([a-zA-Z0-9_\.\-])+\@((aol|about)+\.)+([a-zA-Z0-9.]{2,4})+$/;
	if (filter.test(email)) {
		provider = "aol";
		providerText = "Aol";
	}

	filter = /^([a-zA-Z0-9_\.\-])+\@((hotmail|msn|live)+\.)+([a-zA-Z0-9.]{2,4})+$/;
	if (filter.test(email)) {
		provider = "hotmail";
		providerText = "Hotmail";
	}
	var d=new Date();
	var url = 'https://' + window.location.hostname + '/json/social/status?_'+d.getTime();
	$.get(url, function(response) {
		var json = response;
		var socialObj = new Object();
		socialObj = processNetworkStatus(json,socialObj);

		var isConnectBoolean = false;
		var totalEmailConnection = socialObj.emailConnected;

		var emailDefautlText = "Enter your email address";

		if (totalEmailConnection > 0) {
			emailDefautlText = "enter another email";
		}

		$.each(socialObj.networks,function(i,network) {
			if (network.name == provider && network.isConnected == true) {
				isConnectBoolean = true;
			}

		});

		if (isConnectBoolean == true) {
			$("#inbox-validation").html('You\'ve already entered a "' + providerText + '" address. Try another email address.').removeClass("displayNone");
			timeValidateEmail();

			//reset values
			//$("#userid").val("");
			$("#password").val("");

			$("#password").val("");
			$("#password").addClass("displayNone");
			$("#passwordText").removeClass("displayNone");
			$("#password").parent().addClass("displayNone");
			//$("#userid").addClass("default-font");

			//$("#userid").val(emailDefautlText);
			$("#loginEmailNull").addClass("displayNone");
			updateConnection("#fail");
			//loadEmailProxy("#fail");

			$("#userid").focus();

		} else {
			switch (provider) {
			case "gmail":
				filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					 validateEmail = false;
				}

				//second validation for google email connection
				filter = /^([a-zA-Z0-9_\.\-])+\@((yahoo|ymail|rocketmail|aol|about|hotmail|msn|live)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (filter.test(email)) {
					 validateEmail = false;
				}

				break;
			case "yahoo":
				filter = /^([a-zA-Z0-9_\.\-])+\@((yahoo|ymail|rocketmail)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					validateEmail = false;
				}
				break;
			case "aol":
				filter = /^([a-zA-Z0-9_\.\-])+\@((aol|about)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					validateEmail = false;
				}
				break;
			case "hotmail":
				filter = /^([a-zA-Z0-9_\.\-])+\@((hotmail|msn|live)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					validateEmail = false;
				}
				break;
			default:

			}

			if (validateEmail == true) {
				//loadEmailProgress();
				updateProgress();

				$("#loginEmailNull").addClass("displayNone");
				$("#password").addClass("displayNone");
				$("#passwordText").removeClass("displayNone");
				$("#password").parent().addClass("displayNone");
				//$("#email-post-loader").removeClass("displayNone");

				//trim white space
				var trimUserId = $("#userid").val();
				trimUserId = $.trim(trimUserId);
				$("#userid").val(trimUserId);

				var data = $("#email-connect-form-null").serialize();
				var url = 'https://' + window.location.hostname + '/json/social/connect/email/' + provider;

				$.ajax({
					type:"POST",
					url: url,
					data: data,
					success: function(data) {

						var jsObject = eval('(' + data + ')');

						if (jsObject.success == false) {

							//$("#email-post-loader").addClass("displayNone");
							$("#loginEmailNull").removeClass("displayNone");
							provider = provider.toUpperCase();
							$("#inbox-validation").html("Your email address and or password is incorrect. Please try again").removeClass("displayNone");
							timeValidateEmail();

							//reset values
							//$("#userid").val("");
							$("#password").val("");

							$("#password").val("");
							$("#password").addClass("displayNone");
							$("#passwordText").removeClass("displayNone");
							$("#password").parent().addClass("displayNone");
							//$("#userid").addClass("default-font");
							//$("#userid").val(emailDefautlText);
							$("#loginEmailNull").addClass("displayNone");
							//loadEmailProxy("#fail");
							updateConnection("#fail");
							$("#userid").focus();
						} else {
							$("#userid").blur();
							emailDefautlText = "enter another email";

							//$("#email-post-loader").addClass("displayNone");
							$("#loginEmailNull").addClass("displayNone");
							//reset values
							//$("#userid").val("");
							$("#password").val("");
							$("#password").addClass("displayNone");
							$("#passwordText").removeClass("displayNone");
							$("#password").parent().addClass("displayNone");
							$("#userid").addClass("default-font");
							$("#userid").val(emailDefautlText);

							//enage success metric mbox
							updateEngageMbox(true,true);

							//loadEmailProxy(provider);
							updateConnection("#"+provider);
						}
					}
				});

			} else {
				provider = provider.toUpperCase();
				$("#inbox-validation").html("Please enter a valid email address.").removeClass("displayNone");

				timeValidateEmail();

				//reset values
				//$("#userid").val("");
				$("#password").val("");

				$("#password").val("");
				$("#password").addClass("displayNone");
				$("#passwordText").removeClass("displayNone");
				$("#password").parent().addClass("displayNone");
				//$("#userid").addClass("default-font");
				//$("#userid").val(emailDefautlText);
				$("#loginEmailNull").addClass("displayNone");
				updateConnection("#fail");
				$("#userid").focus();

			}
		}

	});
}

//ajax call for posting data
function ajaxMultiPartForm(fn) {

	$("#hiddenForm").ajaxForm({
		target: "#responseOutput",
		beforeSubmit: function() {

			$("#photoPostFlag").val("true");

			/*$("#hiddenForm").append("<input type='hidden' name='providers' value='"+ $("#providers").val() +"' />");
			$("#hiddenForm").append("<input type='hidden' name='userMessage' value='"+ $("#userMessage").val() +"' />");

			$("#hiddenForm").append("<input type='hidden' name='shareMyLifeClicked' value='false' />");

			$("#hiddenForm").append("<input type='hidden' name='lifeEvent' value='"+ $("#engage-eventType").val() +"' />");
			$("#hiddenForm").append("<input type='hidden' name='month' value='"+ $("#engage-month").val() +"' />");
			$("#hiddenForm").append("<input type='hidden' name='day' value='"+ $("#engage-day").val() +"' />");
			$("#hiddenForm").append("<input type='hidden' name='year' value='"+ $("#engage-year").val() +"' />");
			$("#hiddenForm").append("<input type='hidden' name='eventTopicId' value='"+ $("#engage-eventTopicId").val() +"' />");
			$("#hiddenForm").append("<input type='hidden' name='photoPostFlag' value='"+ $("#photoPostFlag").val() +"' />");*/

        },
        success: function(json) {

        	var reGex = /Error report/gi;
        	var matchPos = json.search(reGex);
        	var respMessage = "";

        	if (matchPos != -1) {

        		respMessage = "We had a problem posting. Please try again.";
				//respMessage = "<br />That's a duplicate post - please edit it and post again"
				$("#postform-error-response").html(respMessage);
				timeErrorMsg();

        	} else {

		     		var data = jQuery.parseJSON(json);
		     		//var data = json;

					//add error message
					var message = typeof(data.message);
					var success = typeof(data.success);
					var providerArr = new Array();
					var providerText = "";
					var providerTextVal = "";
					var errorCounter = 0;
					var status = 0;

					if (message != "undefined" && data.success == 0) {

						//$("#postform-error-response").html(data.message);

						providerTextVal = $("#providers").val();
						providerArr = providerTextVal.split(",");

						for(var iL = 0; iL < providerArr.length; iL++) {
							if ((providerArr.length - 1) == 0) {
								providerText = providerArr[iL];
							} else {
								if (iL == (providerArr.length - 1)) {
									providerText = providerText + " and " + providerArr[iL];
								} else {
									if (providerText == "") {
										providerText = providerText + providerArr[iL];
									} else {
										providerText = providerText + ", " + providerArr[iL];
									}
								}
							}
						}

						if (providerText != "") {
							respMessage = "We had a problem posting that to " + providerText + ". Please try again.";

						}

						if (jQuery.trim(data.message) == "Photo File size is exceed 3MB") {
							respMessage = "You can upload JPG, JPEG, PNG and GIF (max size of 3MB)";
						}

						$("#postform-error-response").html(respMessage);
						timeErrorMsg();
					} else {

						if (data.success != 0) {
							$.each(data,function(i,d) {
								if(parseInt(d.errorCode) != 0) {
									providerArr[errorCounter] =  d.provider;

									errorCounter++;
								}
							});

							for(var iL = 0; iL < providerArr.length; iL++) {
								if ((providerArr.length - 1) == 0) {
									providerText = providerArr[iL];
								} else {
									if (iL == (providerArr.length - 1)) {
										providerText = providerText + " and " + providerArr[iL];
									} else {
										if (providerText == "") {
											providerText = providerText + providerArr[iL];
										} else {
											providerText = providerText + ", " + providerArr[iL];
										}
									}
								}
							}

							if (providerText != "") {

								respMessage = "We had a problem posting that to " + providerText + ". Please try again.";
								//respMessage = "<br />That's a duplicate post - please edit it and post again"
								$("#postform-error-response").html(respMessage);
								timeErrorMsg();
							}
						} else {

							respMessage = "We had a problem posting. Please try again.";

							//respMessage = "<br />That's a duplicate post - please edit it and post again"
							$("#postform-error-response").html(respMessage);
							timeErrorMsg();
						}
					}
        		}

        	$("#photoPostFlag").val("false");
        	$("#loading").html("");
			setDefautlValues(fn);
			$("#engage-social-status-text").click();

			$("#engage-post-bttn").css("display","block");

			// show life event engage post confirmation
			if ($("#engage-eventType").val() == "true") {
				$("#life-event-confirmation").removeClass("display-none");

				//set default life event value
				$("#engage-eventType").val("false");
				$("#life-event-value").html("Add event to profile");
				$("#engage-eventTopicId").val("0");

				//set dafult values for post
				$("#userStatusMessage").val("Share an update or life event (current or past)...");
				$("#userDescriptionMessage").val("Say something about this link...");
				$("#userLinkMessage").val("http://");

				$("#life-event-cross").addClass("display-none");
				$("#life-event-arrow").removeClass("display-none");

				setTodayDate();

				// hide after 3 seconds
				timeMsg();

				// refresh life event section
				//loadLifeEvents();
			}

			//set default for file upload - hiddenForm
			$('#resetUpload').click();

			refreshSocialFeeds();

			//ie 8 clearing form file
			//get providers before reset form (clear file field)
        	var tempProviders = $("#providers").val();
			$('#postform-status-data').resetForm();
			$("#providers").val(tempProviders);

			setTodayDate();
			sendPageNameAndChannelToOmniture('Social Engagement: Succesful Post','Social Engagement');
        }
	});

	$("#hiddenForm").submit();

}

function ajaxPost(fn) {
	setLifeEventDateValue();

	$("#postform-status-data").ajaxForm({

		success: function(json) {
			var data = jQuery.parseJSON(json);

			//add error message
			var message = typeof(data.message);
			var success = typeof(data.success);
			var providerArr = new Array();
			var providerText = "";
			var providerTextVal = "";
			var errorCounter = 0;
			var respMessage = "";
			var status = 0;

			if (message != "undefined" && data.success == 0) {
				//$("#postform-error-response").html(data.message);

				providerTextVal = $("#providers").val();
				providerArr = providerTextVal.split(",");

				for(var iL = 0; iL < providerArr.length; iL++) {
					if ((providerArr.length - 1) == 0) {
						providerText = providerArr[iL];
					} else {
						if (iL == (providerArr.length - 1)) {
							providerText = providerText + " and " + providerArr[iL];
						} else {
							if (providerText == "") {
								providerText = providerText + providerArr[iL];
							} else {
								providerText = providerText + ", " + providerArr[iL];
							}
						}
					}
				}

				if (providerText != "") {
					respMessage = "We had a problem posting that to " + providerText + ". Please try again.";
					$("#postform-error-response").html(respMessage);
				}

				timeErrorMsg();
				$("#feed-loading").html("");
			} else {
				if (data.success != 0) {
					$.each(data,function(i,d) {
						if(parseInt(d.errorCode) != 0) {
							providerArr[errorCounter] =  d.provider;

							errorCounter++;
						}
					});

					for(var iL = 0; iL < providerArr.length; iL++) {
						if ((providerArr.length - 1) == 0) {
							providerText = providerArr[iL];
						} else {
							if (iL == (providerArr.length - 1)) {
								providerText = providerText + " and " + providerArr[iL];
							} else {
								if (providerText == "") {
									providerText = providerText + providerArr[iL];
								} else {
									providerText = providerText + ", " + providerArr[iL];
								}
							}
						}
					}

					if (providerText != "") {

						respMessage = "We had a problem posting that to " + providerText + ". Please try again.";
						//respMessage = "<br />That's a duplicate post - please edit it and post again"
						$("#postform-error-response").html(respMessage);
						timeErrorMsg();
					}
				} else {
					respMessage = "We had a problem posting. Please try again.";
					//respMessage = "<br />That's a duplicate post - please edit it and post again"
					$("#postform-error-response").html(respMessage);
					timeErrorMsg();
				}

			}

			$("#loading").html("");
			setDefautlValues(fn);
			$("#engage-social-status-text").click();

			$("#engage-post-bttn").css("display","block");

			// show life event engage post confirmation
			if ($("#engage-eventType").val() == "true") {
				$("#life-event-confirmation").removeClass("display-none");

				//set default life event value
				$("#engage-eventType").val("false");
				$("#life-event-value").html("Add event to profile");
				$("#engage-eventTopicId").val("0");

				//set dafult values for post
				$("#userStatusMessage").val("Share an update or life event (current or past)...");
				$("#userDescriptionMessage").val("Say something about this link...");
				$("#userLinkMessage").val("http://");

				$("#life-event-cross").addClass("display-none");
				$("#life-event-arrow").removeClass("display-none");

				setTodayDate();

				// hide after 3 seconds
				timeMsg();

				// refresh life event section
				//loadLifeEvents();
			}

			// refresh feeds
			refreshSocialFeeds();
			//	Omniture Success Call
			sendPageNameAndChannelToOmniture('Social Engagement: Succesful Post','Social Engagement');
		}
	});
	$("#postform-status-data").submit();
}

//set message value for post form
function validatePost(fn) {

	//check if hidden image is populated
	if ($('#upload-photo-value .name').html() == 'Add photo') {

		$("#postform-error").html("");
		$("#postform-error-response").html("");

		if ($("#userStatusMessage").val() == "Share an update or life event (current or past)..." || $("#userStatusMessage").val() == "") {
			postformError(fn);
		} else {
			$("#userLinkMessage").val("");
			$("#userDescriptionMessage").val("");
			$("#userPhotoMessage").val("");
			setMessageValue(fn);
		}

	} else {

		data = $("#userStatusMessage").val();
		
		if (data == "Share an update or life event (current or past)...") {
			data = '';
			$("#userMessage").val(data);
		} else {
			$("#userMessage").val(data);
		}		

		setLifeEventDateValue();
		$("#photoPostFlag").val("true");

		//set attribute type
		$("#hiddenForm").attr("enctype","multipart/form-data");
		$("#hiddenForm").attr("method","POST");
		$("#hiddenForm").attr("action","/json/social/publish");
		$("#hiddenForm").attr("encoding","multipart/form-data");

		//get values from original form
		$("#hiddenForm").append("<input type='hidden' name='providers' value='"+ $("#providers").val() +"' />");
		$("#hiddenForm").append("<input type='hidden' name='userMessage' value='"+ $("#userMessage").val() +"' />");
		$("#hiddenForm").append("<input type='hidden' name='shareMyLifeClicked' value='false' />");
		$("#hiddenForm").append("<input type='hidden' name='lifeEvent' value='"+ $("#engage-eventType").val() +"' />");
		$("#hiddenForm").append("<input type='hidden' name='month' value='"+ $("#engage-month").val() +"' />");
		$("#hiddenForm").append("<input type='hidden' name='day' value='"+ $("#engage-day").val() +"' />");
		$("#hiddenForm").append("<input type='hidden' name='year' value='"+ $("#engage-year").val() +"' />");
		$("#hiddenForm").append("<input type='hidden' name='eventTopicId' value='"+ $("#engage-eventTopicId").val() +"' />");
		$("#hiddenForm").append("<input type='hidden' name='photoPostFlag' value='"+ $("#photoPostFlag").val() +"' />");

		ajaxMultiPartForm(fn);
	}

}

function postformError(fn) {
	var errorData;
	errorData = "Please share a status";
	$("#loading").html("");
	$("#engage-post-bttn").css("display","block");
	$("#postform-error").html(errorData);
	timeValidateErrorMsg();
}

function setMessageValue(fn) {
	var data;
	data = $("#userStatusMessage").val();
	$("#userMessage").val(data);
	ajaxPost(fn);
}

//set default values post form
function setDefautlValues(fn) {
	var data;
	$("#postform-error").html("");
	$("#userMessage").val("");
	$("#userStatusMessage").val("Share an update or life event (current or past)...");
}

//setDefault on focusin/focusout events
function setDefault(eId, et) {
	var data;
	var elementId = eId;
	var eventType = et;

	data = "Share an update or life event (current or past)...";

	switch(eventType) {
		case "focusin":
			if ($("#"+elementId).val() == data) {
				$("#"+elementId).val("");
			}
			$("#"+elementId).addClass("color-black");
			$("#"+elementId).addClass("font-normal");
			break;
		case "focusout":
			if ($("#"+elementId).val() == "" || $("#"+elementId).length == 0) {
				$("#"+elementId).val(data);
			}
			$("#"+elementId).removeClass("color-black");
			$("#"+elementId).removeClass("font-normal");
			break;
		default:
	}

}
//active and incative state for social providers icon
function upadteProvidersFieldInput(n, a) {
	var sName = n;
	var action = a;
	switch (action) {
		case "active":
				addProviders(sName);
			break;
		case "inactive":
				removeProviders(sName);
			break;
		default:
	};
}
//set active state for social providers
function addProviders(s) {
	var sName = s;
	var providers = $("#providers").val();
	providers = providers.split(",");
	providers.push(sName);
	providers = providers.toString();
	$("#providers").val(providers);
}
//set inactive states for social providers
function removeProviders(s) {
	var sName = s;
	var providers = $("#providers").val();
	providers = providers.split(",");
	var newProviders = new Array();
	var newI = 0;
	for(i=0;i<providers.length;i++){
		if (providers[i] != sName) {
			newProviders[newI] = providers[i];
			newI++;
		}
	}
	newProviders = newProviders.toString();
	$("#providers").val(newProviders);
}
//get social name
function getSocialName(n) {

	var sName = n;
	var rString = new Array("facebook","twitter","linkedin");
	var regex = "";
	var results = "";

	for (i=0;i<rString.length;i++) {
		regex = new RegExp(rString[i]);
		if(regex.exec(sName)) {
			results = regex.exec(sName);
		}
	}
	return results;
}

//refresh home page
function loadHomePage() {
	var url = "/json/social/status";

	$.get(url,
	function(response) {
		var json = response;
		var socialObj = new Object();
		socialObj = processNetworkStatus(json,socialObj);
		if(socialObj.totalConnected == 0) {
			// Load the null case.
			$("#feeds-content").load("/network-feeds-null.view");
		} else {
			// Load the feeds ui
			$("#feeds-content").load("/list-feeds.view", function() {
				//show feed loading
				$("#feed-loading").html("<div class='engageAjaxLoader'></div>");

				//set link overlay text
				if (socialObj.totalConnected >= 7) {
					$("#addSocialAccountLink").html("<span class='underline'>Edit social accounts</span>");
					$("#addSocialAccountLink2").html("<span class='underline'>Edit social or email accounts</span>");
				} else {
					$("#addSocialAccountLink").html("+&nbsp;<span class='underline'>Add social accounts</span>");
					$("#addSocialAccountLink2").html("+&nbsp;<span class='underline'>Add social or email accounts</span>");
				}

				//show active and inactive social icons
				displaySocialNetworks(socialObj);
				//set today date for calendar
				setTodayDate();

				//move to displaySocialNetworks
				//set life event category
				//ajaxGetLifeEvent();

				//reload work info
				//remove for engage 2.1
				//loadWorkEducationNetworks();
			});

		}
	});
}
//refresh social feeds
function refreshSocialFeeds() {
	var socialNetwork = getSocialShow();
	$("#feed-loading").html("<div class='engageAjaxLoader'></div>");
	$("#engage-feed-container").html("");
	$("#scrollbar1").css("display","none");
	$("#postform-error").html("");
	ajaxGetFeeds(socialNetwork);
}
//auto refresh social feeds
function autoRefreshSocialFeeds() {
	var socialNetwork = getSocialShow();

	if (socialNetwork != "") {

		var connections = /(hotmail|gmail|aol|yahoo)/gi;
		var result = connections.test(socialNetwork);
		if(!result){

			$("#feed-loading").html("<div class='engageAjaxLoader'></div>");

			$("#postform-error").html("");
			//if ($("#feed-loading:visible").length == 0) {
				if ($(".comment-enter:visible").length == 0 && $(".thumb:visible").length == 0) {
					ajaxGetFeeds(socialNetwork);
				}
			//}
			autoRefreshFeed();
		}
	}
}
//get social show feed only
function getSocialShow() {

	var rString = new Array("facebook","twitter","linkedin");
	var results = new Array();
	var rCounter = 0;

	for (i=0;i<rString.length;i++) {
		if($("#showIcon-li-"+rString[i]).hasClass("display-none")) {
			//do not add in results array

		} else {
			if($("#showIcon-"+rString[i]).hasClass("engage-social-"+rString[i]+"-disabled")) {
				//do not add in results array

			} else {
				//add in results array
				results[rCounter] = rString[i];
				rCounter++;

			}
		}
	}
	return results;
}


function setTodayDate() {
	var today = new Date();
	var dd = today.getDate();
	var mm = today.getMonth()+1;
	var yyyy = today.getFullYear();
	var ctoday;

	//set value
	$("#engage-month").val(mm);
	$("#engage-day").val(dd);
	$("#engage-year").val(yyyy);

	ctoday = mm+'/'+dd+'/'+yyyy;
	$("#datepicker").attr("value",ctoday);
}
function ajaxGetLifeEvent(json,obj) {
	var d = new Date();
	var ms = d.getTime();
	var url = "/api/getMyStoryCategoriesAPI.do?_="+ms;
	$.get(url,
		function(response) {
			var json = response;
			var socialObj = new Object();
			printLifeEvents(json,socialObj);
		}
	);
}
function printLifeEvents(json,obj) {

	obj = eval('(' + json + ')');

	var header;
	var ul;

	var li;
	var anchor;
	var defaultTitleText;
	var divId;
	var spanArrow;

	$.each(obj,function(n,d) {
		divId = "";
		ul = document.createElement("ul");
		$(ul).attr("class","life-event-li");

		$.each(d,function(n2,d2) {

			li = document.createElement("li");
			spanArrow = document.createElement("span");
			$(spanArrow).append("&raquo;")
			$(spanArrow).attr("class","life-event-raquo");
			li.appendChild(spanArrow);
			anchor = document.createElement("a");
			$(anchor).attr("href","javascript:void(0)");
			$(anchor).attr("id","categoryId-"+d2.categoryId+"-"+d2.id);
			defaultTitleText = document.createTextNode(d2.defaultTitle);
			anchor.appendChild(defaultTitleText);
			li.appendChild(anchor);
			divId = d2.categoryName;
			switch(d2.categoryName) {
				case "Family":
					header = document.createElement("strong");
					$(header).html("Family");
					ul.appendChild(li);
					break;
				case "Work":
					header = document.createElement("strong");
					$(header).html("Work");
					ul.appendChild(li);
					break;
				case "Misc":
					header = document.createElement("strong");
					$(header).html("Misc");
					ul.appendChild(li);
					break;
				case "Education":
					header = document.createElement("strong");
					$(header).html("Education");
					ul.appendChild(li);
					break;
				default:
			}
		});

		$("#life"+divId).html(header);
		$("#life"+divId).append(ul);
	});
}
function setLifeEventValue(catId,title) {
	var splitCatId = catId.split("-");
	var valueTitle = title;
	var valueCatId = splitCatId[2];
	$("#engage-eventTopicId").val(valueCatId);
	var sLength = valueTitle.length;
	if(sLength >= 27) {
		valueTitle = valueTitle.slice(0,24);
		valueTitle = valueTitle + "...";
	}
	$("#life-event-value").html(valueTitle);
	$("#engage-eventType").val("true");
}

function setLifeEventDateValue() {

	var datepicker = $("#datepicker").val();
	datepicker = datepicker.split("/")

	var mon  = datepicker[0];
	var dd = datepicker[1];
	var yy = datepicker[2];

	$("#engage-month").val(mon);
	$("#engage-day").val(dd);
	$("#engage-year").val(yy);

}

//get social show feed only
function getSocialPost() {

	var rString = new Array("facebook","twitter","linkedin");
	var results = new Array();
	var rCounter = 0;

	for (i=0;i<rString.length;i++) {
		if($("#postIcon-li-"+rString[i]).hasClass("display-none")) {
			//do not add in results array

		} else {
			if($("#postIcon-"+rString[i]).hasClass("engage-social-"+rString[i]+"-disabled")) {
					//do not add in results array
			} else {
				//add in results array
				results[rCounter] = rString[i];
				rCounter++;

			}
		}
	}

	return results;
}

var autoRefreshTimer;
function resetTimer() {
	window.clearTimeout(autoRefreshTimer);

	/*var url = "/json/social/status";
	$.get(url, function(response) {
		var json = response;
		var socialObj = new Object();
		socialObj = processNetworkStatus(json,socialObj);
		var totalEmailConnection = socialObj.emailConnected;

		if (totalEmailConnection > 0) {*/
			autoRefreshTimer=setTimeout("autoRefreshSocialFeeds()",60000);
		/*}
	});*/

}
function autoRefreshFeed() {
	/*var url = "/json/social/status";
	$.get(url, function(response) {
		var json = response;
		var socialObj = new Object();
		socialObj = processNetworkStatus(json,socialObj);
		var totalEmailConnection = socialObj.emailConnected;

		if (totalEmailConnection > 0) {*/
			autoRefreshTimer=setTimeout("autoRefreshSocialFeeds()",60000);
		/*}
	});*/
}
function timeMsg() {
	var t=setTimeout("lifeEventConfirmationHide()",3000);
}
function timeErrorMsg() {
	var t=setTimeout('$("#postform-error-response").html("")',10000);
}
/*function timeErrorFeedMsg() {
	var t=setTimeout('$("#feed-loading").html("")',10000);
}*/
function timeValidateErrorMsg() {
	var t=setTimeout('$("#postform-error").html("")',5000);
}
function timeOpenEngageImportOverlay() {
	var t=setTimeout('openEngageImportOverlay();',5000);
}
function timeValidateEmail() {
	var t=setTimeout('$("#inbox-validation").addClass("displayNone").html("");',5000);
}
function lifeEventConfirmationHide() {
	//hide after 3 seconds
	$("#life-event-confirmation").addClass("display-none");
}
//create comment or reply container
function commentSocial(type,action,id,urlThumb,atUser) {

	var typeText = type;
	var actionText = action;
	var actionTextCap;

	switch(actionText) {
		case "reply":
			var atUserText = atUser;

			actionTextCap = "Reply";
			break;
		case "comment":
			actionTextCap = "Comment";
			break;
		case "retweet":
			actionTextCap = "Retweet";
			break;
		case "like":
			actionTextCap = "Like";
			break;
		case "unlike":
			actionTextCap = "Unlike";
			break;
		default:
	}

	var idText = id;

	var userComment; //div container
	var strong;
	var strongText;
	var br;

	var commentPhoto; //div container for photo
	var imgPhoto;
	var imgPhotoUrl;
	var postWrapper;

	var inputComment;
	var linkWrapper;
	var loading;
	var commentCancel;
	var commentCancelText;
	var commentForm;
	var ulIcon;
	var liText;
	var liElementText;
	var liElementIcon;
	var divIcon;

	var focusFormId = "form-"+typeText+"-"+actionText+"-"+idText;

	userComment = document.createElement("div");
	$(userComment).attr("class", "userComment");

	strong = document.createElement("strong");
	strongText = document.createTextNode("Add a comment");

	br = document.createElement("br");

	commentPhoto = document.createElement("div");
	$(commentPhoto).attr("class","comment-photo");

	imgPhoto = document.createElement("img");
	if (type == "twitter" || type == "linkedin") {
		imgPhotoUrl = urlThumb;
	} else {
		imgPhotoUrl = "/json/social/picture/facebook/"+urlThumb;
	}
	$(imgPhoto).attr("src",imgPhotoUrl);
	commentPhoto.appendChild(imgPhoto);

	commentForm = document.createElement("form");
	$(commentForm).attr("id","form-"+typeText+"-"+actionText+"-"+idText);
	$(commentForm).attr("onSubmit","return false;");
	postWrapper = document.createElement("div");
	$(postWrapper).attr("class","comment-post-wrapper");

	inputComment = document.createElement("input");
	$(inputComment).attr("type","text");
	$(inputComment).attr("name","userMessage");
	$(inputComment).attr("class","comment-enter");
	$(inputComment).attr("id","userMessage."+typeText+"."+actionText+"."+idText);
	//$(inputComment).attr("size","90");
	if (typeText == "twitter") {
		$(inputComment).attr("value","@"+atUserText+" ");
		$(inputComment).attr("maxlength","140");
	}
	postWrapper.appendChild(inputComment);
	commentForm.appendChild(postWrapper);

	linkWrapper = document.createElement("div");
	$(linkWrapper).attr("class","comment-post-link-wrapper");

	loading = document.createElement("div");
	$(loading).attr("class","comment-loading float-right");
	$(loading).attr("id","loader-"+typeText+"-"+actionText+"-"+idText);
	linkWrapper.appendChild(loading);

	$('<A class="comment-post-bttn" href="#"></A>')
		.click(function(e){
			e.preventDefault();
			clearAllError();
			postSocialAction(typeText, actionText, idText);
		})
		.appendTo($(linkWrapper));

	commentCancel = document.createElement("a");
	$(commentCancel).attr("class","comment-cancel-post-bttn float-right");
	$(commentCancel).attr("href","javascript:void(0)");
	//$(commentCancel).attr("onClick","socialValidateAction('"+typeText+"','"+actionText+"','"+idText+"')");
	$(commentCancel).attr("id","close,"+typeText+","+actionText+","+idText);
	commentCancelText = document.createTextNode("Cancel");
	commentCancel.appendChild(commentCancelText);

	linkWrapper.appendChild(commentCancel);

	ulIcon = document.createElement("ul");
	$(ulIcon).attr("class","engage-social-icons");

	liElementText = document.createElement("li");
	$(liElementText).attr("class","color-light-gray-2 padding-right-5");
	liText = document.createTextNode(actionTextCap+" will post to:");
	liElementText.appendChild(liText);
	ulIcon.appendChild(liElementText);

	liElementIcon = document.createElement("li");
	divIcon = document.createElement("div");
	$(divIcon).attr("class","engage-social-"+typeText);
	liElementIcon.appendChild(divIcon);
	ulIcon.appendChild(liElementIcon);

	linkWrapper.appendChild(ulIcon);
	commentForm.appendChild(linkWrapper);

	//append children in order
	userComment.appendChild(strongText);
	userComment.appendChild(br);
	userComment.appendChild(commentPhoto);
	userComment.appendChild(commentForm);

	if (type == "linkedin") {
		$("#"+type+"-"+action+"-"+id).append(userComment);
	} else {
		$("#"+type+"-"+action+"-"+id).append(userComment);
	}

 	$("#"+focusFormId+" .comment-enter").focus();

	return false;
}
function getPhotoImage(){
	var source = $("#leftNavThumb").attr("src");
	return source;
}

function shareMyLife(formNumber) {
	var formNum = formNumber;
	var data = $("#postform-share-data"+formNum).serializeArray();
	var provider = "";
	var msgData = "";
	var postData = "";
	var url = "";
	var dataLength = data.length - 1;
	var socialType = "";
	
	$.each(data, function(key,value) {
		if (dataLength != key) {
			provider = value.value;
			switch(provider) {
				case "facebook":
					msgData = "I've been using the free social features of MyLife.com to bring together my personal and professional connections. For more details see http://search.mylife.com/facebook_like";
					socialType = "facebook";
					break;
				case "twitter":
					msgData = "Try the free social features of MyLife to bring together your personal and business connections. http://search.mylife.com/twitter_like";
					socialType = "twitter";
					break;
				case "linkedin":
					msgData = "I've been using the free social features of MyLife.com to bring together my personal and professional connections. For more details see http://search.mylife.com/linkedin_like";
					socialType = "linkedin";
					break;
				default:
					msgData = "";
			}

			url = "json/social/publish/";

			$("#postform-share-data"+formNum).ajaxForm({
				type:"POST",
				url: url,
				data: { formName: 'status', providers: provider, userMessage: msgData, userStatusMessage: msgData, lifeEvent: false, eventTopicId: 0 },
				success: function(json) {
					//add error message
					var data = jQuery.parseJSON(json);
					var message = typeof(data.message);
					var success = typeof(data.success);
					var respMessage;
					if (message != "undefined" && data.success == 0) {
						if ($("#postform-error-response").length > 0) {
							respMessage = "We had a problem posting that to " + provider + ". Please try again.";
							$("#postform-error-response").html(respMessage);
							//Omniture Success Call
							sendPageNameAndChannelToOmniture('Social Engagement: Error Share/Like' ,'Social Engagement');

							timeErrorMsg();
						}
					} else {
						$("#likeMyLife3").css("width","128px");
						$("#likeMyLife3").css("backgroundPosition","-214px 0px");
						$("#likeMyLife").css("width","128px");
						$("#likeMyLife").css("backgroundPosition","-214px 0px");
						$("#likeMyLife2").css("width","128px");
						$("#likeMyLife2").css("backgroundPosition","-214px 0px");
						//Omniture Success Call
						sendPageNameAndChannelToOmniture('Social Engagement: Successful Post Share/Like' ,'Social Engagement');
					}
			    }
			});
			$("#postform-share-data"+formNum).submit();
		}
	});

	if ($("#likeOverlay").hasClass("display-block")) {
		$("#likeOverlay").addClass("display-none");
		$(".postShare").removeAttr("checked");
		$("#likeOverlay").removeClass("display-block");
	}

	if ($("#likeOverlay2").hasClass("display-block")) {
		$("#likeOverlay2").addClass("display-none");
		$(".postShare").removeAttr("checked");
		$("#likeOverlay2").removeClass("display-block");
	}

	if ($("#likeOverlay3").hasClass("display-block")) {
		$("#likeOverlay3").addClass("display-none");
		$(".postShare").removeAttr("checked");
		$("#likeOverlay3").removeClass("display-block");
	}

	return false;
}

function socialValidateAction(type,action,id,urlThumb,atUser) {

	var typeText = type;
	var actionText = action;
	var idText = id;
	var divLength = $(".userComment").length;
	var childLength = $("#"+typeText+"-"+actionText+"-"+idText).children().length;
	var atUserFrom;
	if (divLength == 0) {

		if (type == "facebook" || type == "linkedin") {
			thumbNail = urlThumb;
			socialAction(typeText,actionText,idText,0,0,thumbNail);
		} else if (type == "twitter") {
			thumbNail = urlThumb;
			atUserFrom = atUser;
			socialAction(typeText,actionText,idText,0,0,thumbNail,atUserFrom);
		} else {
			socialAction(typeText,actionText,idText);
		}
	} else {
		if (childLength == 0) {
			if (type == "facebook" || type == "linkedin") {
				thumbNail = urlThumb;
				socialAction(typeText,actionText,idText,0,0,thumbNail);
			} else if (type == "twitter") {
				thumbNail = urlThumb;
				atUserFrom = atUser;
				socialAction(typeText,actionText,idText,0,0,thumbNail,atUserFrom);
			} else {
				socialAction(typeText,actionText,idText);
			}
		} else {
			$("#"+typeText+"-"+actionText+"-"+idText).html("");
		}
	}
}
function socialAction(type,action,id,count,timestamp,urlThumb,atUser) {
	var typeText = type;
	var actionText = action;
	var idText = id;
	var countText;
	var eId;
	var thumbNail;

	switch(actionText) {
		case "reply":
			thumbNail = urlThumb;
			atUserFrom = atUser;
			commentSocial(typeText,actionText,idText,thumbNail,atUserFrom);
			break;
		case "comment":
			if (type == "facebook" || type == "twitter" || type == "linkedin") {
				thumbNail = urlThumb;
				commentSocial(typeText,actionText,idText,thumbNail);
			} else {
				commentSocial(typeText,actionText,idText);
			}
			break;
		case "retweet":
			commentRetweet(typeText,actionText,idText);
			break;
		case "like":
			countText = count;
			eId = timestamp;
			likeSocial(typeText,actionText,idText,countText,eId);
			break;
		case "unlike":
			countText = count;
			eId = timestamp;
			likeSocial(typeText,actionText,idText,countText,eId);
			break;
		default:
	}
}
function deleteSocial(type,action,id,pid) {
	var typeText = type;
	var actionText = action;
	var idText = id;
	var providerId = pid;

	var url = "json/social/"+actionText+"/"+typeText+"/"+idText;
	var data = $("#form-"+typeText+"-"+actionText+"-"+idText).serialize();
	$.ajax({
		type:"POST",
		url: url,
		data: data,
		success: function(data) {
			if (data.success == 0 && typeof(data.success != "undefined")) {
				$("#postform-error-response").html(data.message);
				timeErrorMsg();
			} else {
				$("li#"+providerId).remove();
			}
		}
	});
}
function postSocialAction(type,action,id) {

	var typeText = type;
	var actionText = action;
	var idText = id;
	var typeProvider;

	$("#loader-"+typeText+"-"+actionText+"-"+idText).html("<div class='engageAjaxLoader'></div>");
	$("#postbttn-"+typeText+"-"+actionText+"-"+idText).css("display","none");

	var url = "json/social/"+actionText+"/"+typeText+"/"+idText;

	if (type == "linkedin") {
		var hId = $("#hidden-"+type+"-"+idText).html();
		url = "json/social/"+actionText+"/"+typeText+"/"+hId;
	}

	switch (type) {
		case "facebook":
			typeProvider = "Facebook";
			break;
		case "twitter":
			typeProvider = "Twitter";
			break;
		case "linkedin":
			typeProvider = "LinkedIn";
			break;
		default:
	}
	var data = $("#form-"+typeText+"-"+actionText+"-"+idText).serialize();
	$.ajax({
		type:"POST",
		url: url,
		data: data,
		success: function(data) {
			$("#loader-"+typeText+"-"+actionText+"-"+idText).html("");
			$("#postbttn-"+typeText+"-"+actionText+"-"+idText).css("display","block");
			$("#userMessage."+typeText+"."+actionText+"."+idText).val("");

			var message = typeof(data.message);

			if (message != "undefined" && data.success == 0) {
				var messageText = data.message;
				if (messageText.search("execution failed for URI")	> 0) {
					respMessage = "We had a problem posting that to "+typeProvider+". Please try again.";
					$("#postform-error-response").html(respMessage);
					timeErrorMsg();
				}

				if (messageText.search("Unable to send reply")	> 0) {
					respMessage = "That's a duplicate post - please edit it and post again";
					$("#postform-error-response").html(respMessage);
					timeErrorMsg();
				}
			}

			switch(typeText) {
				case "facebook":
					getViewComments(typeText,idText,1);
					break;
				case "linkedin":
					getViewComments(typeText,idText,1);
					break;
				case "twitter":
					refreshSocialFeeds();
					break;
				default:
			}

			switch(actionText) {
				case "retweet":
					retweetOverlayClose(typeText,actionText,idText);
					break;
				case "comment":
					postClose(typeText,actionText,idText);
					break;
				case "reply":
					postClose(typeText,actionText,idText);
					break;
				default:
			}

			//Omniture Success Call
			sendPageNameAndChannelToOmniture('Social Engagement: Succesful Post','Social Engagement');
		}
	});
	return false;
}
function commentRetweet(type,action,id) {

	var typeText = type;
	var actionText = action;
	var idText = id;

	var url = "json/social/"+actionText+"/"+typeText+"/"+idText;
	var data = $("#form-"+typeText+"-"+actionText+"-"+idText).serialize();
	$("#form-"+typeText+"-"+actionText+"-"+idText).ajax({
		type:"POST",
		url: url,
		data: data,
		success: function(data) {

		}
	});
}
function likeSocial(type,action,id,count,eId) {

	var typeText = type;
	var actionText = action;
	var idText = id;
	var countText = count;
	var likeBool = "";
	var url;
	var typeProvider;
	var errorBool = false;

	if ($("#"+typeText+"-"+eId+"-"+idText+"-"+count+"-like").html() == "Unlike") {
		likeBool = "unlike";
		likeBoolText = "Like";
	} else {
		likeBool = "like";
		likeBoolText = "Unlike";
	}

	if (type == "linkedin") {
		var hId = $("#hidden-"+type+"-"+eId).html();
		url = "json/social/"+likeBool+"/"+typeText+"/"+hId;
	} else {
		url = "json/social/"+likeBool+"/"+typeText+"/"+idText;
	}

	switch (type) {
		case "facebook":
			typeProvider = "Facebook";
			break;
		case "twitter":
			typeProvider = "Twitter";
			break;
		case "linkedin":
			typeProvider = "LinkedIn";
			break;
		default:
	}

	var data = $("#form-"+typeText+"-"+actionText+"-"+idText).serialize();
	$.ajax({
		type:"POST",
		url: url,
		data: data,
		success: function(data) {

			var message = typeof(data.message);

			if (message != "undefined" && data.success == 0) {
				var messageText = data.message;
				if (messageText.search("failed")	> 0) {
					respMessage = "We had a problem posting that to "+typeProvider+". Please try again.";
					$("#postform-error-response").html(respMessage);
					timeErrorMsg();
					errorBool = true;
				}
			}

			if (errorBool == false) {

				if (countText != null) {

					var countActual = "";

					if (typeText == "facebook") {
						countActual = $("#counter-"+typeText+"-"+eId+"-"+idText+"-"+count).html();
					} else {
						countActual = $("#counter-"+typeText+"-"+eId+"-"+count).html();
					}

					countActual = parseInt(countActual);

					if (isNaN(countActual)) {
						countActual = 0;
					}

					if (likeBool == "unlike") {
						countActual = parseInt(countActual) - 1;
					} else {
						if (parseInt(countText) == 0) {
							countActual = parseInt(countActual) + 1;
						} else {
							countActual = parseInt(countActual) + 1;
						}
					}
				}

				if (type == "linkedin") {
					$("#"+typeText+"-"+eId+"-"+idText+"-"+count+"-like").html(likeBoolText);

					switch (parseInt(countActual)) {
						case null:
							$("#counter-"+typeText+"-"+eId+"-"+count).html("");
							break;
						case -1:
							$("#counter-"+typeText+"-"+eId+"-"+count).html("");
							break;
						case 0:
							$("#counter-"+typeText+"-"+eId+"-"+count).html("");
							break;
						case 1:
							$("#counter-"+typeText+"-"+eId+"-"+count).html(countActual + " Like");
							break;
						default:
							$("#counter-"+typeText+"-"+eId+"-"+count).html(countActual + " Likes");
					}
				} else {

					$("#"+typeText+"-"+eId+"-"+idText+"-"+count+"-like").html(likeBoolText);

					switch (parseInt(countActual)) {
						case null:
							$("#counter-"+typeText+"-"+eId+"-"+idText+"-"+count).html("");
							break;
						case -1:
							$("#counter-"+typeText+"-"+eId+"-"+idText+"-"+count).html("");
							break;
						case 0:
							$("#counter-"+typeText+"-"+eId+"-"+idText+"-"+count).html("");
							break;
						case 1:
							$("#counter-"+typeText+"-"+eId+"-"+idText+"-"+count).html(countActual + " Like");
							break;
						default:
							$("#counter-"+typeText+"-"+eId+"-"+idText+"-"+count).html(countActual + " Likes");
					}
				}
			}
		}
	});

}
function postClose(type,action,id) {
	var typeText = type;
	var actionText = action;
	var idText = id;
	$("#"+typeText+"-"+actionText+"-"+idText).html("");
}
function retweetOverlay(type,action,id) {

	var typeText = type;
	var actionText = action;
	var idText = id;
	var aPos = $("#retweet-link-"+idText).offset();
	var oPos = $("#retweet-link-"+idText).position();

	var topPos = aPos.top - 384;
	var leftPos = oPos.left + 100;

	if(!$("#overlay-"+typeText+"-"+actionText+"-"+idText).hasClass("dispaly-none")) {
		$("#overlay-"+typeText+"-"+actionText+"-"+idText).css("top",topPos+"px");
		$("#overlay-"+typeText+"-"+actionText+"-"+idText).css("left",leftPos+"px");
		$("#overlay-"+typeText+"-"+actionText+"-"+idText).removeClass("display-none");
	} else {
		retweetOverlayClose(typeText,actionText,idText);
	}
}
function retweetOverlayClose(type,action,id) {
	var typeText = type;
	var actionText = action;
	var idText = id;
	$("#overlay-"+typeText+"-"+actionText+"-"+idText).addClass("display-none");
}
function getImageFromTweet(tweetEntities,size)
{
    //size types are: thumb, small, medium, full
    if(typeof(size) == 'undefined') size = 'full';

    if(typeof(tweetEntities.media) != 'undefined') {
        switch(size) {
                case 'thumb':
                    return tweetEntities.media.media_url + ':thumb';
                break;
                case 'small':
                    return tweetEntities.media.media_url + ':small';
                break;
                case 'medium':
                    return tweetEntities.media.media_url + ':medium';
                break;
                case 'full':
                    return tweetEntities.media.media_url + ':large';
                break;
            }
        return tweetEntities.media.media_url;
    }
    if(typeof(tweetEntities.urlEntity) != 'undefined')
    {
        if(typeof(tweetEntities.urlEntity.expandedUrl) == 'undefined') return false;

        //INSTAGRAM
        if(tweetEntities.urlEntity.expandedUrl.indexOf('http://instagr.am') != -1) {
            switch(size) {
                case 'thumb':
                    return tweetEntities.urlEntity.expandedUrl + 'media/?size=t';
                break;
                case 'small':
                    return tweetEntities.urlEntity.expandedUrl + 'media/?size=t';
                break;
                case 'medium':
                    return tweetEntities.urlEntity.expandedUrl + 'media/?size=m';
                break;
                case 'full':
                    return tweetEntities.urlEntity.expandedUrl + 'media/?size=l';
                break;
            }
        }

        //TWITPIC
        if(tweetEntities.urlEntity.expandedUrl.indexOf('http://twitpic.com') != -1) {
            switch(size) {
                case 'thumb':
                    return 'http://twitpic.com/show/large/' + tweetEntities.urlEntity.expandedUrl.replace('http://twitpic.com','');
                break;
                case 'small':
                    return 'http://twitpic.com/show/large/' + tweetEntities.urlEntity.expandedUrl.replace('http://twitpic.com','');
                break;
                case 'medium':
                    return 'http://twitpic.com/show/large/' + tweetEntities.urlEntity.expandedUrl.replace('http://twitpic.com','');
                break;
                case 'full':
                    return 'http://twitpic.com/show/large/' + tweetEntities.urlEntity.expandedUrl.replace('http://twitpic.com','');
                break;
            }
        }

        //MYLIFE
        else if(tweetEntities.urlEntity.expandedUrl.indexOf('mylife.com/photos') != -1) return tweetEntities.urlEntity.expandedUrl;

        //.JPG
        else if(endsWith(tweetEntities.urlEntity.expandedUrl.toLowerCase(), '.jpg')) return tweetEntities.urlEntity.expandedUrl;

        //.GIF
        else if(endsWith(tweetEntities.urlEntity.expandedUrl.toLowerCase(), '.gif')) return tweetEntities.urlEntity.expandedUrl;

        //.PNG
        else if(endsWith(tweetEntities.urlEntity.expandedUrl.toLowerCase(), '.png')) return tweetEntities.urlEntity.expandedUrl;

    }
    else return false;
}
function showChangePassword() {

}
function initTinyScrollbar() {
	$("#scrollbar1").css("display","block");
	$("#scrollbar1").tinyscrollbar({ sizethumb: 360 });
	$(".scrollbar").css("display","none");
	$("#scrollbar1 .track").css("display","none");
	$("#scrollbar1 .track .thumb").css("display","none");
}
// parse ISO8601 http://webcloud.se/log/JavaScript-and-ISO-8601/
Date.prototype.setISO8601 = function (string) {
    var regexp = "([0-9]{4})(-([0-9]{2})(-([0-9]{2})" +
        "(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?" +
        "(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";
    var d = string.match(new RegExp(regexp));

    var offset = 0;
    var date = new Date(d[1], 0, 1);

    if (d[3]) { date.setMonth(d[3] - 1); }
    if (d[5]) { date.setDate(d[5]); }
    if (d[7]) { date.setHours(d[7]); }
    if (d[8]) { date.setMinutes(d[8]); }
    if (d[10]) { date.setSeconds(d[10]); }
    if (d[12]) { date.setMilliseconds(Number("0." + d[12]) * 1000); }
    if (d[14]) {
        offset = (Number(d[16]) * 60) + Number(d[17]);
        offset *= ((d[15] == '-') ? 1 : -1);
    }

    offset -= date.getTimezoneOffset();
    time = (Number(date) + (offset * 60 * 1000));
    this.setTime(Number(time));
}

//inbox2 call function using iframe - window.parent.parent.queryAccounts()
function queryAccounts() {
	openEngageImportOverlay();
}
function updateEngageMbox(isConnected,isSecure) {
	var mboxName = "dynamicMBox";
	if(isSecure && isSecure == true) {
		mboxName = "dynamicMBoxSecure";
	}
	if(isConnected) {
		//enage success metric mbox
		mboxDefine(mboxName,'engage_user_mbox');
		mboxUpdate('engage_user_mbox')
	}
}

function generalInfoInit() {
	$("#life-event-cross").bind("click", function() {
		clearAllError();
		//set default life event value
		$("#engage-eventType").val("false");
		$("#life-event-value").html("Add event to profile");
		$("#engage-eventTopicId").val("0");

		//set dafult values for post
		$("#life-event-cross").addClass("display-none");
		$("#life-event-arrow").removeClass("display-none");
	});

	$(".life-event-li a").bind("click", function() {
		clearAllError();
		var catId = $(this).attr("id");
		var title = $("#"+catId).html();
		setLifeEventValue(catId,title);
		$("#life-event-arrow").addClass("display-none");
		$("#life-event-cross").removeClass("display-none");
		$("#life-event-overlay").addClass("display-none");
	});

	// events for social feeds
	$("#engage-post-bttn").bind("click", function() {
		clearAllError();
		$("#loading").html("<div class='engageAjaxLoader'></div>");
		$("#"+this.id).css("display","none");
		var fn = $("#formName").val();
		validatePost(fn);
		return false;
	});

	$("#userLinkMessage").bind("keypress", function(e) {
		var c = e.which ? e.which : e.keyCode;
		if(c == 13){
			clearAllError();
			$("#engage-post-bttn").focus();
		}
	});

	$("#userDescriptionMessage").bind("keypress", function(e) {
		var c = e.which ? e.which : e.keyCode;
		if(c == 13){
			clearAllError();
			$("#engage-post-bttn").focus();
		}
	});

	$("#userPhotoMessage").live("keypress", function(e) {
		var c = e.which ? e.which : e.keyCode;
		if(c == 13){
			clearAllError();
			$("#engage-post-bttn").focus();
		}
	});

	// event for category event drop down engage 2.1
	$("#life-event-arrow, #life-event-value, #icon-mylife").bind("click", function() {
		var position = $("#life-event-arrow").position();
		var offset = $("#life-event-arrow").offset();
		var top = position.top + 56;
		var left = position.left - 7;

		$("#life-event-overlay")
			.addClass("display-block")
			.removeClass("display-none")
			.css({
				top: top + "px",
				left: left + "px",
				zIndex: "150000"
			});
	});

	var elIconQuestion = $('#icon-question');
	if(elIconQuestion.length) {
		var elOverlayHelp = $("#overlayHelp");
		// if is a mobile device bind showing the tooltip to click, else mouseOver/mouseOut
		if($('body').hasClass('isMobile'))
		{
			elIconQuestion.click(function() {
				if($('#overlayHelp').hasClass('display-none')) {
					showIconQuestion();
				}
				else {
					hideIconQuestion();
				}
			});
		} else {
			elIconQuestion
				.bind("mouseover", showIconQuestion)
				.bind("mouseout", hideIconQuestion);
		}

		function showIconQuestion() {
			if (elOverlayHelp.hasClass("display-none")) {
				var position = elIconQuestion.position();
				var top = position.top + 49;
				var left = position.left + 217;

				elOverlayHelp
					.addClass("display-block")
					.removeClass("display-none")
					.css({
						top: top + "px",
						left: left + "px",
						zIndex: "150000"
					});
			}
		}

		function hideIconQuestion()	{
			elOverlayHelp.addClass("display-none").removeClass("display-block");
		}
	}

	$("#icon-calendar-show").live("click", function() {
		clearAllError();
		$("#life-event-overlay").addClass("display-none");
	});

	$("#userStatusMessage, #userLinkMessage, #userDescriptionMessage, #userPhotoMessage")
		.live("focus",function(e) {
			var eId = $(this).attr("id");
			var et = e.type;
			setDefault(eId, et);
		})
		.live("blur",function(e) {
			var eId = $(this).attr("id");
			var et = e.type;
			setDefault(eId, et);
	});

	$(".posticon-social").bind("click", function() {
		clearAllError();
		var activeShow = getSocialPost().length;
		var element = this.id;
		var socialName = getSocialName(element);

		if (activeShow > 1) {
			if ($("#"+element).hasClass("engage-social-"+socialName+"-disabled")) {
				upadteProvidersFieldInput(socialName, "active");
			} else {
				upadteProvidersFieldInput(socialName, "inactive");
			}
			$("#"+element).toggleClass("engage-social-"+socialName+"-disabled");
		} else {
			if ($("#"+element).hasClass("engage-social-"+socialName+"-disabled")) {
				if ($("#"+element).hasClass("engage-social-"+socialName+"-disabled")) {
					upadteProvidersFieldInput(socialName, "active");
				} else {
					upadteProvidersFieldInput(socialName, "inactive");
				}
				$("#"+element).toggleClass("engage-social-"+socialName+"-disabled");
			}
		}

		return false;
	});
}
// end generalInfoInit

var EmailConnect = function(container) {
	var uiElements = {
		password: container.find("#password"),
		loginEmail: container.find("#loginEmail"),
		userId: container.find("#userid"),
		errorMessage: container.find("#inbox-validation"),
		loader: container.find("#email-post-loader"),
		emailProvider: container.find("#emailProvider")
	};

	function connectEmail() {
		var provider = uiElements.emailProvider.val();
		provider = provider.toLowerCase();
		var email = uiElements.userId.val();
		// remove any whitespaces before email validation
		email = email.replace(/\s/g, "");
		var filter = "";
		var validateEmail = true;

		switch (provider) {
			case "gmail":
				filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					validateEmail = false;
				}

				//second validation for google email connection
				filter = /^([a-zA-Z0-9_\.\-])+\@((yahoo|ymail|rocketmail|aol|about|hotmail|msn|live)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (filter.test(email)) {
					validateEmail = false;
				}

				break;
			case "yahoo":
				filter = /^([a-zA-Z0-9_\.\-])+\@((yahoo|ymail|rocketmail)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					validateEmail = false;
				}
				break;
			case "aol":
				filter = /^([a-zA-Z0-9_\.\-])+\@((aol|about)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					validateEmail = false;
				}
				break;
			case "hotmail":
				filter = /^([a-zA-Z0-9_\.\-])+\@((hotmail|msn|live)+\.)+([a-zA-Z0-9.]{2,4})+$/;
				if (!filter.test(email)) {
					validateEmail = false;
				}
				break;
			default:

		}

		if (validateEmail == true) {
			uiElements.loginEmail.addClass("displayNone");
			uiElements.loader.removeClass("displayNone");

			var data = $("#email-connect-form").serialize();
			var url = 'https://' + window.location.hostname + '/json/social/connect/email/' + provider;

			$.ajax({
				type:"POST",
				url: url,
				data: data,
				success: function(data) {

					var jsObject = eval('(' + data + ')');

					if (jsObject.success == false) {

						uiElements.loader.addClass("displayNone");
						uiElements.loginEmail.removeClass("displayNone");
						provider = provider.toUpperCase();
						uiElements.errorMessage.html("Your username and or password is incorrect. Please try again").removeClass("displayNone");
						timeValidateEmail();

						//reset values
						uiElements.userId.val("");
						uiElements.password.val("");
					} else {
						uiElements.loader.addClass("displayNone");
						uiElements.loginEmail.removeClass("displayNone");
						//reset values
						uiElements.userId.val("");
						uiElements.password.val("");

						reloadOpener2();
					}
				}
			});

		} else {
			provider = provider.toUpperCase();
			uiElements.errorMessage.html("Please enter a valid " + provider + " email address.").removeClass("displayNone");
			timeValidateEmail();
			uiElements.userId.val("");
			uiElements.password.val("");
		}

	}


	uiElements.loginEmail.bind('click', function() {
		if(uiElements.userId.val() == "" || uiElements.password.val() == "") {
			uiElements.errorMessage.html("Please enter your username and password.").removeClass("displayNone");
			timeValidateEmail();
		} else {
			connectEmail();
		}
		return false;
	});

	uiElements.password.bind("keypress", function(e) {
		var c = e.which ? e.which : e.keyCode;
		if(c == 13){
			if (uiElements.loader.hasClass("displayNone")) {
				if(uiElements.userId.val() == "" || uiElements.password.val() == "") {
					uiElements.errorMessage.html("Please enter your username and password.").removeClass("displayNone");
					timeValidateEmail();
				} else {
					connectEmail();
				}
			}
			return false;
		}
	});
};

function networkFeedInit() {
	getSocialShow();
	autoRefreshFeed();
	$(window).scroll(resetTimer);

	var url = "/json/social/status";
	var socialConnect = 0;
	$.get(url, function(response) {
		var json = response;
		var socialObj = new Object();
		socialObj = processNetworkStatus(json,socialObj);
		socialConnect = socialObj.socialConnected;

		if (socialConnect <= 1) {
			$.get("/json/eventlog/read/OVERLAY_ENGAGE_MARKETING_SUBMIT",function(json) {
				if(parseInt(json) == 0) {
					$("#engage-marketing").removeClass("displayNone");
				}
			});
		}
	});

	$("#engage-marketing-close").bind("click", function() {
		$("#engage-marketing").addClass("displayNone");
		$.get("/json/eventlog/write/OVERLAY_ENGAGE_MARKETING_SUBMIT");
	});

	$("#engage-marketing-image").bind("click", function() {
		$(".add-social-account-link").click();
		sendPageNameAndChannelToOmniture('Social Engagement: Feed Panel 1account' ,'Social Engagement');
	});

	$(".showicon-social").bind("click", function() {
		clearAllError();
		var activeShow = getSocialShow().length;
		var element = this.id;
		var socialName = getSocialName(element);

		if (activeShow > 1) {
			$("#"+element).toggleClass("engage-social-"+socialName+"-disabled");
			$("#"+element).parent("li").toggleClass("noshow-active");
			refreshSocialFeeds();
		} else {
			if ($("#"+element).hasClass("engage-social-"+socialName+"-disabled")) {
				$("#"+element).toggleClass("engage-social-"+socialName+"-disabled");
				$("#"+element).parent("li").toggleClass("noshow-active");
				refreshSocialFeeds();
			}
		}

		return false;
	});
}

function engageWrapperFeedsInit() {
	$(".likeMyLife3").bind('click', function() {
		var overlay = $("#likeOverlay3");
		if (overlay.hasClass("display-none")) {

			var url = "/json/social/status";
			var connected = 0;
			var position = $(this).position();
			var top = position.top - 231;

			$.get(url,function(response) {

				$.each(response, function(index,value) {
					if (value.isConnected) {
						data = value.name;
						$("input.postShare").each(function() {
							switch(data) {
								case "facebook":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
									break;
								case "twitter":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
									break;
								case "linkedin":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
									break;
								default:
							}
						});
					} else {
						data = value.name;
						$("input.postShare").each(function() {
							switch(data) {
								case "facebook":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
									break;
								case "twitter":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
									break;
								case "linkedin":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
									break;
								default:
							}
						});
					}

				});

				if (connected == 0) {
					openEngageImportOverlay();
					//Omniture Success Call
					sendPageNameAndChannelToOmniture('Social Engagement: Initiate Share/Like' ,'Social Engagement');
				} else {
					overlay.addClass("display-block");
					overlay.removeClass("display-none");
					overlay.css("top",top+"px");
					overlay.css("left",position.left+"px");
					overlay.css("z-index","100000");
					//Omniture Success Call
					sendPageNameAndChannelToOmniture('Social Engagement: Initiate Share/Like' ,'Social Engagement');
				}
			});
		}

		return false;
	});
}

function ImportInit() {
	$(".close-import-overlay-link").bind('click',function() {
		var url = "/json/social/status";
		var totalConnected = 0;
		var isPoPage = false;
		var totalConnectedPrev = $("#totalConnectionsCount").html();
		var page = document.location.toString();
		if(page.indexOf("regConfirmation.do") > -1) {
			isPoPage = true;
		}
		/*$.get(url, function(response) {
		 var json = response;
		 var socialObj = new Object();
		 socialObj = processNetworkStatus(json,socialObj);
		 totalConnected = socialObj.totalConnected;*/
		//if (parseInt(totalConnectedPrev) != parseInt(totalConnected)) {
		if ($("#refreshBoolean").html() == "true") {
			if(isPoPage == false) {
				document.location = "/home.do";
			}
		}
		closeModal();
		/*});*/
	});

	$(".close-import-overlay-link-2").bind('click',function() {
		var url = "/json/social/status";
		var totalConnected = 0;
		var isPoPage = false;
		var totalConnectedPrev = $("#totalConnectionsCount").html();
		var page = document.location.toString();
		if(page.indexOf("regConfirmation.do") > -1) {
			isPoPage = true;
		}
		$.get(url, function(response) {
			var json = response;
			var socialObj = new Object();
			socialObj = processNetworkStatus(json,socialObj);
			totalConnected = socialObj.totalConnected;
			closeModal();
			if (parseInt(totalConnectedPrev) != parseInt(totalConnected)) {
				if(isPoPage == false) {
					document.location = "/home.do";
				}
			}
		});
	});
}

function networkFeedsWrapperInit() {
	$(".likeMyLife2").bind('click', function() {
		if ($("#likeOverlay2").hasClass("display-none")) {

			var url = "/json/social/status";
			var connected = 0;
			var position = $(this).position();
			var top = position.top - 231;

			$.get(url, function(response) {

				$.each(response, function(index,value) {
					if (value.isConnected) {
						data = value.name;
						$("input.postShare").each(function() {
							switch(data) {
								case "facebook":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
									break;
								case "twitter":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
									break;
								case "linkedin":
									if (data == $(this).val()) {
										$(this).removeAttr("disabled");
										connected = connected + 1;
									}
									break;
								default:
							}
						});
					} else {
						data = value.name;
						$("input.postShare").each(function() {
							switch(data) {
								case "facebook":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
									break;
								case "twitter":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
									break;
								case "linkedin":
									if (data == $(this).val()) {
										$(this).attr("disabled", true);
									}
									break;
								default:
							}
						});
					}

				});

				if (connected == 0) {
					openEngageImportOverlay();
					//Omniture Success Call
					sendPageNameAndChannelToOmniture('Social Engagement: Initiate Share/Like' ,'Social Engagement');
				} else {
					$("#likeOverlay2").addClass("display-block");
					$("#likeOverlay2").removeClass("display-none");
					$("#likeOverlay2").css("top",top+"px");
					$("#likeOverlay2").css("left",position.left+"px");
					$("#likeOverlay2").css("z-index","100000");
					//Omniture Success Call
					sendPageNameAndChannelToOmniture('Social Engagement: Initiate Share/Like' ,'Social Engagement');
				}
			});
		}

		return false;

	});
}

function openPhotoModalAction() {
	var that,
		network,
		postId,
		photoAlbum,
		postMessage,
		posterName,
		posterLink,
		posterImage,
		postedOnText,
		imageUrl,
		imageHeight,
		imageWidth,
		commentBoxText,
		fromUserId;

	that=$(this); //maintain a reference to the original object

	postId = $(this).parent().parent().parent().parent().attr('id');
	photoAlbum = false;

	if ($(this).attr("rel")) {
		postId = $(this).attr("rel");
		photoAlbum = true;
	}

	//getUrlVars(d.data.link)["fbid"]
	var posterId = '';

	if($(this).hasClass('facebookPhoto')) {
		network = 'facebook';
	} else if($(this).hasClass('twitterPhoto')) {
		network = 'twitter';
	}

	var url = "/json/social/status";
	$.get(url, "protocol=" + getProtocol(), function(response) {
		var json = response;
		$.each(json, function(nKey, nData){
			if (nData.name == network && nData.isConnected == true) {
				//console.log(nData.identity.thumbnailURL);
				$('#userHeadShot').attr('src', nData.identity.thumbnailURL);
				fromUserId = nData.identity.providerUID;
			}
		});
	});

	$('#photoPopup #postDate .social-icon').attr('class','social-icon engage-social-'+network);

	//console.log('/json/social/feeds/'+network+'/' + postId);
	$.getJSON('/json/social/feeds/'+network+'/' + postId, function(postData) {
		//console.log(postData);
		//store data for later
		$('#dataContainer .id').html(postId);
		$('#dataContainer .type').html(network);
		var d=new Date(Date.parse(postData.created_time));
		if(network == 'facebook')
		{
			$('#photoPopup #postInteractions .twitter').hide();
			$('#photoPopup #postInteractions .facebook').show();

			posterName = postData.from.name;//set name of poster
			posterLink = 'http://www.facebook.com/'+postData.from.id;
			postedOnText = 'Posted ' + getTimeStamp(d.getTime()) + ' via Facebook';
			posterImage = '/json/social/picture/facebook/' + postData.from.id;
			if(typeof(postData.message) == 'undefined') {
				if(typeof(postData.caption) == 'undefined')
				{
					if(typeof(postData.name) == 'undefined') postMessage = '';
					else postMessage = postData.name;
				}
				else postMessage = postData.caption;
			}
			else postMessage = postData.message;
			imageWidth = that.width();
			imageHeight = that.height();
			commentBoxText = 'Write a comment...';

			if(typeof(postData.likes) == 'undefined')
			{
				$('#dataContainer .numLikes').html(0);
				$('#dataContainer .selfLiked').html('no');
			}
			else {
				var countLike = 0;

				if (typeof(postData.likes.count) != "undefined") {
					countLike = postData.likes.count;
				} else {
					countLike = postData.likes.data.length;
				}

				$('#dataContainer .numLikes').html(countLike);
				//now determined if the user has liked the post themselves
				var selfLiked = 'no';
				$.each(postData.likes.data, function(index, value) {
					if(value.id == postData.from.id) selfLiked = 'yes';
				});
				$('#dataContainer .selfLiked').html(selfLiked);
			}

			if($('#dataContainer .selfLiked').html() == 'yes') $('#photoPopup #postInteractions .like').html('Unlike');
			else $('#photoPopup #postInteractions .like').html('Like');

			$('#postInteractions .numLikes a').attr('href',postData.link);
			if($('#dataContainer .numLikes').html() == '1') $('#postInteractions .numLikes a').html('1 person');
			else $('#postInteractions .numLikes a').html($('#dataContainer .numLikes').html() + ' people');

			if (typeof(postData.picture) != "undefined") {
				if (photoAlbum == true) {
					imageUrl = "/json/social/picture/facebook/" + postId;
				}
				else {
					imageUrl = postData.picture.replace('_s.','_n.');
				}

			} else {
				imageUrl = "/json/social/picture/facebook/" + getUrlVars(postData.link)["fbid"];
			}

		}
		else if(network == 'twitter')
		{
			//if the user's identity isn't the same as the poster's identity
			if(that.attr('data-engagedUserId') != postData.fromUser)
			{
				$('#photoPopup #postInteractions .twitter').show();
				$('#photoPopup #postInteractions .twitter .retweet').show();
			}
			else
			{
				$('#photoPopup #postInteractions .twitter').hide();
			}

			$('#photoPopup #postInteractions .facebook').hide();

			posterName = '@'+postData.fromUser.charAt(0).toUpperCase() + postData.fromUser.slice(1);//set name of poster and make first character uppercase
			posterLink = 'http://www.twitter.com/'+postData.fromUser;
			postedOnText = 'Posted ' + getTimeStamp(postData.createdAt) + ' via ' + postData.source;
			posterImage = postData.profileImageUrl;
			postMessage = typeof(postData.text) == 'undefined' ? '' : postData.text;
			imageUrl = getImageFromTweet(postData.tweetEntities);
			if(!imageUrl) imageUrl = that.attr('alt');
			imageWidth = that.width();
			imageHeight = that.height();
			commentBoxText = 'Reply to the original tweet';


		}
		$('#dataContainer .timestamp').html(d.getTime());

		if(postMessage.length >= 105) $('#postComment').css('overflow-y','scroll');
		else $('#postComment').css('overflow-y','auto');

		if (typeof(postMessage) != "undefined") {
			$('#postComment').html(parseUrl(postMessage)); //change message comment
		} else {
			$('#postComment').html(postMessage); //change message comment
		}


		$('#posterName a').html(posterName);
		$('#posterName a').attr('href',posterLink);
		$('#posterHeadShot').attr('src',posterImage);
		$('#postDate .text').html(postedOnText);
		$('#newCommentData').val(commentBoxText);
		$('#imageContain img').attr('title',postMessage); //set images title in modal
		$('#imageContain img').attr('src',imageUrl);
		$("#photoPopup").modal({
			containerId: 'photoContainer',
			minWidth: 960,
			minHeight: 526,
			maxHeight: 526,
			onOpen: function (dialog) {
				dialog.overlay.fadeIn('fast', function () {
					dialog.data.hide();
					dialog.container.show('scale','fast', function () {
						dialog.data.fadeIn('fast', function() {
							$('#photoContainer #imageContain').imagesLoaded(function () {
								$('#photoContainer #imageContain img').cjObjectScaler({
									method: "fit",
									fade: 550,
									thumbWidth: imageWidth, //set the correct width so IE8 can return the correct ratio
									thumbHeight:  imageHeight//set the correct height so IE8 can return the correct ratio
								});
							});

							//load the comments in
							if(network == 'twitter') {
								posterId  = postData.id;
								//twitter count
								if (typeof(postData.comments) != "undefined") {
									refreshModalComments(postData.comments,fromUserId);
								} else {
									$('#comments').html('');
								}

								//get replies
								$.getJSON('/json/social/feeds/twitter/', function(twitterRelated) {
									refreshTwitterRelated(twitterRelated,posterId,fromUserId);
								});

							} else {

								if (typeof(postData.comments) != "undefined") {
									refreshModalComments(postData.comments,fromUserId);
								} else {
									$('#comments').html('');
								}
							}


							$('#newCommentData').html(commentBoxText);
						});
					});
				});
			},
			onClose: function (dialog) {
				dialog.data.hide('fast', function () {
					dialog.container.hide('scale','fast', function () {
						dialog.overlay.fadeOut('fast', function () {
							jQuery.modal.close(); // must call this!
						});
					});
				});
			}
		});

	});
}var mboxCopyright = "Copyright 1996-2011. Adobe Systems Incorporated. All rights reserved.";mboxUrlBuilder = function(a, b) { this.a = a; this.b = b; this.c = new Array(); this.d = function(e) { return e; }; this.f = null;};mboxUrlBuilder.prototype.addParameter = function(g, h) { var i = new RegExp('(\'|")'); if (i.exec(g)) { throw "Parameter '" + g + "' contains invalid characters"; } for (var j = 0; j < this.c.length; j++) { var k = this.c[j]; if (k.name == g) { k.value = h; return this; } } var l = new Object(); l.name = g; l.value = h; this.c[this.c.length] = l; return this;};mboxUrlBuilder.prototype.addParameters = function(c) { if (!c) { return this; } for (var j = 0; j < c.length; j++) { var m = c[j].indexOf('='); if (m == -1 || m == 0) { continue; } this.addParameter(c[j].substring(0, m), c[j].substring(m + 1, c[j].length)); } return this;};mboxUrlBuilder.prototype.setServerType = function(n) { this.o = n;};mboxUrlBuilder.prototype.setBasePath = function(f) { this.f = f;};mboxUrlBuilder.prototype.setUrlProcessAction = function(p) { this.d = p;};mboxUrlBuilder.prototype.buildUrl = function() { var q = this.f ? this.f : '/m2/' + this.b + '/mbox/' + this.o; var r = document.location.protocol == 'file:' ? 'http:' : document.location.protocol; var e = r + "//" + this.a + q; var s = e.indexOf('?') != -1 ? '&' : '?'; for (var j = 0; j < this.c.length; j++) { var k = this.c[j]; e += s + encodeURIComponent(k.name) + '=' + encodeURIComponent(k.value); s = '&'; } return this.t(this.d(e));};mboxUrlBuilder.prototype.getParameters = function() { return this.c;};mboxUrlBuilder.prototype.setParameters = function(c) { this.c = c;};mboxUrlBuilder.prototype.clone = function() { var u = new mboxUrlBuilder(this.a, this.b); u.setServerType(this.o); u.setBasePath(this.f); u.setUrlProcessAction(this.d); for (var j = 0; j < this.c.length; j++) { u.addParameter(this.c[j].name, this.c[j].value); } return u;};mboxUrlBuilder.prototype.t = function(v) { return v.replace(/\"/g, '&quot;').replace(/>/g, '&gt;');};mboxStandardFetcher = function() { };mboxStandardFetcher.prototype.getType = function() { return 'standard';};mboxStandardFetcher.prototype.fetch = function(w) { w.setServerType(this.getType()); document.write('<' + 'scr' + 'ipt src="' + w.buildUrl() + '" language="JavaScript"><' + '\/scr' + 'ipt>');};mboxStandardFetcher.prototype.cancel = function() { };mboxAjaxFetcher = function() { };mboxAjaxFetcher.prototype.getType = function() { return 'ajax';};mboxAjaxFetcher.prototype.fetch = function(w) { w.setServerType(this.getType()); var e = w.buildUrl(); this.x = document.createElement('script'); this.x.src = e; document.body.appendChild(this.x);};mboxAjaxFetcher.prototype.cancel = function() { };mboxMap = function() { this.y = new Object(); this.z = new Array();};mboxMap.prototype.put = function(A, h) { if (!this.y[A]) { this.z[this.z.length] = A; } this.y[A] = h;};mboxMap.prototype.get = function(A) { return this.y[A];};mboxMap.prototype.remove = function(A) { this.y[A] = undefined;};mboxMap.prototype.each = function(p) { for (var j = 0; j < this.z.length; j++ ) { var A = this.z[j]; var h = this.y[A]; if (h) { var B = p(A, h); if (B === false) { break; } } }};mboxFactory = function(C, b, D) { this.E = false; this.C = C; this.D = D; this.F = new mboxList(); mboxFactories.put(D, this); this.G = typeof document.createElement('div').replaceChild != 'undefined' && (function() { return true; })() && typeof document.getElementById != 'undefined' && typeof (window.attachEvent || document.addEventListener || window.addEventListener) != 'undefined' && typeof encodeURIComponent != 'undefined'; this.H = this.G && mboxGetPageParameter('mboxDisable') == null; var I = D == 'default'; this.J = new mboxCookieManager( 'mbox' + (I ? '' : ('-' + D)), (function() { return mboxCookiePageDomain(); })()); this.H = this.H && this.J.isEnabled() && (this.J.getCookie('disable') == null); if (this.isAdmin()) { this.enable(); } this.K(); this.L = mboxGenerateId(); this.M = mboxScreenHeight(); this.N = mboxScreenWidth(); this.O = mboxBrowserWidth(); this.P = mboxBrowserHeight(); this.Q = mboxScreenColorDepth(); this.R = mboxBrowserTimeOffset(); this.S = new mboxSession(this.L, 'mboxSession', 'session', 31 * 60, this.J); this.T = new mboxPC('PC', 1209600, this.J); this.w = new mboxUrlBuilder(C, b); this.U(this.w, I); this.V = new Date().getTime(); this.W = this.V; var X = this; this.addOnLoad(function() { X.W = new Date().getTime(); }); if (this.G) { this.addOnLoad(function() { X.E = true; X.getMboxes().each(function(Y) { Y.setFetcher(new mboxAjaxFetcher()); Y.finalize(); }); }); this.limitTraffic(100, 10368000); if (this.H) { this.Z(); this._ = new mboxSignaler(function(ab, c) { return X.create(ab, c); }, this.J); } }};mboxFactory.prototype.isEnabled = function() { return this.H;};mboxFactory.prototype.getDisableReason = function() { return this.J.getCookie('disable');};mboxFactory.prototype.isSupported = function() { return this.G;};mboxFactory.prototype.disable = function(bb, cb) { if (typeof bb == 'undefined') { bb = 60 * 60; } if (typeof cb == 'undefined') { cb = 'unspecified'; } if (!this.isAdmin()) { this.H = false; this.J.setCookie('disable', cb, bb); }};mboxFactory.prototype.enable = function() { this.H = true; this.J.deleteCookie('disable');};mboxFactory.prototype.isAdmin = function() { return document.location.href.indexOf('mboxEnv') != -1;};mboxFactory.prototype.limitTraffic = function(db, bb) {};mboxFactory.prototype.addOnLoad = function(eb) { if (this.isDomLoaded()) { eb(); } else { var fb = false; var gb = function() { if (fb) { return; } fb = true; eb(); }; this.hb.push(gb); if (this.isDomLoaded() && !fb) { gb(); } }};mboxFactory.prototype.getEllapsedTime = function() { return this.W - this.V;};mboxFactory.prototype.getEllapsedTimeUntil = function(ib) { return ib - this.V;};mboxFactory.prototype.getMboxes = function() { return this.F;};mboxFactory.prototype.get = function(ab, jb) { return this.F.get(ab).getById(jb || 0);};mboxFactory.prototype.update = function(ab, c) { if (!this.isEnabled()) { return; } if (!this.isDomLoaded()) { var X = this; this.addOnLoad(function() { X.update(ab, c); }); return; } if (this.F.get(ab).length() == 0) { throw "Mbox " + ab + " is not defined"; } this.F.get(ab).each(function(Y) { Y.getUrlBuilder() .addParameter('mboxPage', mboxGenerateId()); Y.load(c); });};mboxFactory.prototype.create = function( ab, c, kb) { if (!this.isSupported()) { return null; } var e = this.w.clone(); e.addParameter('mboxCount', this.F.length() + 1); e.addParameters(c); var jb = this.F.get(ab).length(); var lb = this.D + '-' + ab + '-' + jb; var mb; if (kb) { mb = new mboxLocatorNode(kb); } else { if (this.E) { throw 'The page has already been loaded, can\'t write marker'; } mb = new mboxLocatorDefault(lb); } try { var X = this; var nb = 'mboxImported-' + lb; var Y = new mbox(ab, jb, e, mb, nb); if (this.H) { Y.setFetcher( this.E ? new mboxAjaxFetcher() : new mboxStandardFetcher()); } Y.setOnError(function(ob, n) { Y.setMessage(ob); Y.activate(); if (!Y.isActivated()) { X.disable(60 * 60, ob); window.location.reload(false); } }); this.F.add(Y); } catch (pb) { this.disable(); throw 'Failed creating mbox "' + ab + '", the error was: ' + pb; } var qb = new Date(); e.addParameter('mboxTime', qb.getTime() - (qb.getTimezoneOffset() * 60000)); return Y;};mboxFactory.prototype.getCookieManager = function() { return this.J;};mboxFactory.prototype.getPageId = function() { return this.L;};mboxFactory.prototype.getPCId = function() { return this.T;};mboxFactory.prototype.getSessionId = function() { return this.S;};mboxFactory.prototype.getSignaler = function() { return this._;};mboxFactory.prototype.getUrlBuilder = function() { return this.w;};mboxFactory.prototype.U = function(e, I) { e.addParameter('mboxHost', document.location.hostname) .addParameter('mboxSession', this.S.getId()); if (!I) { e.addParameter('mboxFactoryId', this.D); } if (this.T.getId() != null) { e.addParameter('mboxPC', this.T.getId()); } e.addParameter('mboxPage', this.L); e.addParameter('screenHeight', this.M); e.addParameter('screenWidth', this.N); e.addParameter('browserWidth', this.O); e.addParameter('browserHeight', this.P); e.addParameter('browserTimeOffset', this.R); e.addParameter('colorDepth', this.Q); e.setUrlProcessAction(function(e) { e += '&mboxURL=' + encodeURIComponent(document.location); var rb = encodeURIComponent(document.referrer); if (e.length + rb.length < 2000) { e += '&mboxReferrer=' + rb; } e += '&mboxVersion=' + mboxVersion; return e; });};mboxFactory.prototype.sb = function() { return "";};mboxFactory.prototype.Z = function() { document.write('<style>.' + 'mboxDefault' + ' { visibility:hidden; }</style>');};mboxFactory.prototype.isDomLoaded = function() { return this.E;};mboxFactory.prototype.K = function() { if (this.hb != null) { return; } this.hb = new Array(); var X = this; (function() { var tb = document.addEventListener ? "DOMContentLoaded" : "onreadystatechange"; var ub = false; var vb = function() { if (ub) { return; } ub = true; for (var i = 0; i < X.hb.length; ++i) { X.hb[i](); } }; if (document.addEventListener) { document.addEventListener(tb, function() { document.removeEventListener(tb, arguments.callee, false); vb(); }, false); window.addEventListener("load", function(){ document.removeEventListener("load", arguments.callee, false); vb(); }, false); } else if (document.attachEvent) { if (self !== self.top) { document.attachEvent(tb, function() { if (document.readyState === 'complete') { document.detachEvent(tb, arguments.callee); vb(); } }); } else { var wb = function() { try { document.documentElement.doScroll('left'); vb(); } catch (xb) { setTimeout(wb, 13); } }; wb(); } } if (document.readyState === "complete") { vb(); } })();};mboxSignaler = function(yb, J) { this.J = J; var zb = J.getCookieNames('signal-'); for (var j = 0; j < zb.length; j++) { var Ab = zb[j]; var Bb = J.getCookie(Ab).split('&'); var Y = yb(Bb[0], Bb); Y.load(); J.deleteCookie(Ab); }};mboxSignaler.prototype.signal = function(Cb, ab ) { this.J.setCookie('signal-' + Cb, mboxShiftArray(arguments).join('&'), 45 * 60);};mboxList = function() { this.F = new Array();};mboxList.prototype.add = function(Y) { if (Y != null) { this.F[this.F.length] = Y; }};mboxList.prototype.get = function(ab) { var B = new mboxList(); for (var j = 0; j < this.F.length; j++) { var Y = this.F[j]; if (Y.getName() == ab) { B.add(Y); } } return B;};mboxList.prototype.getById = function(Db) { return this.F[Db];};mboxList.prototype.length = function() { return this.F.length;};mboxList.prototype.each = function(p) { if (typeof p != 'function') { throw 'Action must be a function, was: ' + typeof(p); } for (var j = 0; j < this.F.length; j++) { p(this.F[j]); }};mboxLocatorDefault = function(g) { this.g = 'mboxMarker-' + g; document.write('<div id="' + this.g + '" style="visibility:hidden;display:none">&nbsp;</div>');};mboxLocatorDefault.prototype.locate = function() { var Eb = document.getElementById(this.g); while (Eb != null) { if (Eb.nodeType == 1) { if (Eb.className == 'mboxDefault') { return Eb; } } Eb = Eb.previousSibling; } return null;};mboxLocatorDefault.prototype.force = function() { var Fb = document.createElement('div'); Fb.className = 'mboxDefault'; var Gb = document.getElementById(this.g); Gb.parentNode.insertBefore(Fb, Gb); return Fb;};mboxLocatorNode = function(Hb) { this.Eb = Hb;};mboxLocatorNode.prototype.locate = function() { return typeof this.Eb == 'string' ? document.getElementById(this.Eb) : this.Eb;};mboxLocatorNode.prototype.force = function() { return null;};mboxCreate = function(ab ) { var Y = mboxFactoryDefault.create( ab, mboxShiftArray(arguments)); if (Y) { Y.load(); } return Y;};mboxDefine = function(kb, ab ) { var Y = mboxFactoryDefault.create(ab, mboxShiftArray(mboxShiftArray(arguments)), kb); return Y;};mboxUpdate = function(ab ) { mboxFactoryDefault.update(ab, mboxShiftArray(arguments));};mbox = function(g, Ib, w, Jb, nb) { this.Kb = null; this.Lb = 0; this.mb = Jb; this.nb = nb; this.Mb = null; this.Nb = new mboxOfferContent(); this.Fb = null; this.w = w; this.message = ''; this.Ob = new Object(); this.Pb = 0; this.Ib = Ib; this.g = g; this.Qb(); w.addParameter('mbox', g) .addParameter('mboxId', Ib); this.Rb = function() {}; this.Sb = function() {}; this.Tb = null;};mbox.prototype.getId = function() { return this.Ib;};mbox.prototype.Qb = function() { if (this.g.length > 250) { throw "Mbox Name " + this.g + " exceeds max length of " + "250 characters."; } else if (this.g.match(/^\s+|\s+$/g)) { throw "Mbox Name " + this.g + " has leading/trailing whitespace(s)."; }};mbox.prototype.getName = function() { return this.g;};mbox.prototype.getParameters = function() { var c = this.w.getParameters(); var B = new Array(); for (var j = 0; j < c.length; j++) { if (c[j].name.indexOf('mbox') != 0) { B[B.length] = c[j].name + '=' + c[j].value; } } return B;};mbox.prototype.setOnLoad = function(p) { this.Sb = p; return this;};mbox.prototype.setMessage = function(ob) { this.message = ob; return this;};mbox.prototype.setOnError = function(Rb) { this.Rb = Rb; return this;};mbox.prototype.setFetcher = function(Ub) { if (this.Mb) { this.Mb.cancel(); } this.Mb = Ub; return this;};mbox.prototype.getFetcher = function() { return this.Mb;};mbox.prototype.load = function(c) { if (this.Mb == null) { return this; } this.setEventTime("load.start"); this.cancelTimeout(); this.Lb = 0; var w = (c && c.length > 0) ? this.w.clone().addParameters(c) : this.w; this.Mb.fetch(w); var X = this; this.Vb = setTimeout(function() { X.Rb('browser timeout', X.Mb.getType()); }, 15000); this.setEventTime("load.end"); return this;};mbox.prototype.loaded = function() { this.cancelTimeout(); if (!this.activate()) { var X = this; setTimeout(function() { X.loaded(); }, 100); }};mbox.prototype.activate = function() { if (this.Lb) { return this.Lb; } this.setEventTime('activate' + ++this.Pb + '.start'); if (this.show()) { this.cancelTimeout(); this.Lb = 1; } this.setEventTime('activate' + this.Pb + '.end'); return this.Lb;};mbox.prototype.isActivated = function() { return this.Lb;};mbox.prototype.setOffer = function(Nb) { if (Nb && Nb.show && Nb.setOnLoad) { this.Nb = Nb; } else { throw 'Invalid offer'; } return this;};mbox.prototype.getOffer = function() { return this.Nb;};mbox.prototype.show = function() { this.setEventTime('show.start'); var B = this.Nb.show(this); this.setEventTime(B == 1 ? "show.end.ok" : "show.end"); return B;};mbox.prototype.showContent = function(Wb) { if (Wb == null) { return 0; } if (this.Fb == null || !this.Fb.parentNode) { this.Fb = this.getDefaultDiv(); if (this.Fb == null) { return 0; } } if (this.Fb != Wb) { this.Xb(this.Fb); this.Fb.parentNode.replaceChild(Wb, this.Fb); this.Fb = Wb; } this.Yb(Wb); this.Sb(); return 1;};mbox.prototype.hide = function() { this.setEventTime('hide.start'); var B = this.showContent(this.getDefaultDiv()); this.setEventTime(B == 1 ? 'hide.end.ok' : 'hide.end.fail'); return B;};mbox.prototype.finalize = function() { this.setEventTime('finalize.start'); this.cancelTimeout(); if (this.getDefaultDiv() == null) { if (this.mb.force() != null) { this.setMessage('No default content, an empty one has been added'); } else { this.setMessage('Unable to locate mbox'); } } if (!this.activate()) { this.hide(); this.setEventTime('finalize.end.hide'); } this.setEventTime('finalize.end.ok');};mbox.prototype.cancelTimeout = function() { if (this.Vb) { clearTimeout(this.Vb); } if (this.Mb != null) { this.Mb.cancel(); }};mbox.prototype.getDiv = function() { return this.Fb;};mbox.prototype.getDefaultDiv = function() { if (this.Tb == null) { this.Tb = this.mb.locate(); } return this.Tb;};mbox.prototype.setEventTime = function(Zb) { this.Ob[Zb] = (new Date()).getTime();};mbox.prototype.getEventTimes = function() { return this.Ob;};mbox.prototype.getImportName = function() { return this.nb;};mbox.prototype.getURL = function() { return this.w.buildUrl();};mbox.prototype.getUrlBuilder = function() { return this.w;};mbox.prototype._b = function(Fb) { return Fb.style.display != 'none';};mbox.prototype.Yb = function(Fb) { this.ac(Fb, true);};mbox.prototype.Xb = function(Fb) { this.ac(Fb, false);};mbox.prototype.ac = function(Fb, bc) { Fb.style.visibility = bc ? "visible" : "hidden"; Fb.style.display = bc ? "block" : "none";};mboxOfferContent = function() { this.Sb = function() {};};mboxOfferContent.prototype.show = function(Y) { var B = Y.showContent(document.getElementById(Y.getImportName())); if (B == 1) { this.Sb(); } return B;};mboxOfferContent.prototype.setOnLoad = function(Sb) { this.Sb = Sb;};mboxOfferAjax = function(Wb) { this.Wb = Wb; this.Sb = function() {};};mboxOfferAjax.prototype.setOnLoad = function(Sb) { this.Sb = Sb;};mboxOfferAjax.prototype.show = function(Y) { var cc = document.createElement('div'); cc.id = Y.getImportName(); cc.innerHTML = this.Wb; var B = Y.showContent(cc); if (B == 1) { this.Sb(); } return B;};mboxOfferDefault = function() { this.Sb = function() {};};mboxOfferDefault.prototype.setOnLoad = function(Sb) { this.Sb = Sb;};mboxOfferDefault.prototype.show = function(Y) { var B = Y.hide(); if (B == 1) { this.Sb(); } return B;};mboxCookieManager = function mboxCookieManager(g, dc) { this.g = g; this.dc = dc == '' || dc.indexOf('.') == -1 ? '' : '; domain=' + dc; this.ec = new mboxMap(); this.loadCookies();};mboxCookieManager.prototype.isEnabled = function() { this.setCookie('check', 'true', 60); this.loadCookies(); return this.getCookie('check') == 'true';};mboxCookieManager.prototype.setCookie = function(g, h, bb) { if (typeof g != 'undefined' && typeof h != 'undefined' && typeof bb != 'undefined') { var fc = new Object(); fc.name = g; fc.value = escape(h); fc.expireOn = Math.ceil(bb + new Date().getTime() / 1000); this.ec.put(g, fc); this.saveCookies(); }};mboxCookieManager.prototype.getCookie = function(g) { var fc = this.ec.get(g); return fc ? unescape(fc.value) : null;};mboxCookieManager.prototype.deleteCookie = function(g) { this.ec.remove(g); this.saveCookies();};mboxCookieManager.prototype.getCookieNames = function(gc) { var hc = new Array(); this.ec.each(function(g, fc) { if (g.indexOf(gc) == 0) { hc[hc.length] = g; } }); return hc;};mboxCookieManager.prototype.saveCookies = function() { var ic = new Array(); var jc = 0; this.ec.each(function(g, fc) { ic[ic.length] = g + '#' + fc.value + '#' + fc.expireOn; if (jc < fc.expireOn) { jc = fc.expireOn; } }); var kc = new Date(jc * 1000); document.cookie = this.g + '=' + ic.join('|') + '; expires=' + kc.toGMTString() + '; path=/' + this.dc;};mboxCookieManager.prototype.loadCookies = function() { this.ec = new mboxMap(); var lc = document.cookie.indexOf(this.g + '='); if (lc != -1) { var mc = document.cookie.indexOf(';', lc); if (mc == -1) { mc = document.cookie.indexOf(',', lc); if (mc == -1) { mc = document.cookie.length; } } var nc = document.cookie.substring( lc + this.g.length + 1, mc).split('|'); var oc = Math.ceil(new Date().getTime() / 1000); for (var j = 0; j < nc.length; j++) { var fc = nc[j].split('#'); if (oc <= fc[2]) { var pc = new Object(); pc.name = fc[0]; pc.value = fc[1]; pc.expireOn = fc[2]; this.ec.put(pc.name, pc); } } }};mboxSession = function(qc, rc, Ab, sc, J) { this.rc = rc; this.Ab = Ab; this.sc = sc; this.J = J; this.tc = false; this.Ib = typeof mboxForceSessionId != 'undefined' ? mboxForceSessionId : mboxGetPageParameter(this.rc); if (this.Ib == null || this.Ib.length == 0) { this.Ib = J.getCookie(Ab); if (this.Ib == null || this.Ib.length == 0) { this.Ib = qc; this.tc = true; } } J.setCookie(Ab, this.Ib, sc);};mboxSession.prototype.getId = function() { return this.Ib;};mboxSession.prototype.forceId = function(uc) { this.Ib = uc; this.J.setCookie(this.Ab, this.Ib, this.sc);};mboxPC = function(Ab, sc, J) { this.Ab = Ab; this.sc = sc; this.J = J; this.Ib = typeof mboxForcePCId != 'undefined' ? mboxForcePCId : J.getCookie(Ab); if (this.Ib != null) { J.setCookie(Ab, this.Ib, sc); }};mboxPC.prototype.getId = function() { return this.Ib;};mboxPC.prototype.forceId = function(uc) { if (this.Ib != uc) { this.Ib = uc; this.J.setCookie(this.Ab, this.Ib, this.sc); return true; } return false;};mboxGetPageParameter = function(g) { var B = null; var vc = new RegExp(g + "=([^\&]*)"); var wc = vc.exec(document.location); if (wc != null && wc.length >= 2) { B = wc[1]; } return B;};mboxSetCookie = function(g, h, bb) { return mboxFactoryDefault.getCookieManager().setCookie(g, h, bb);};mboxGetCookie = function(g) { return mboxFactoryDefault.getCookieManager().getCookie(g);};mboxCookiePageDomain = function() { var dc = (/([^:]*)(:[0-9]{0,5})?/).exec(document.location.host)[1]; var xc = /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/; if (!xc.exec(dc)) { var yc = (/([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/).exec(dc); if (yc) { dc = yc[0]; } } return dc ? dc: "";};mboxShiftArray = function(zc) { var B = new Array(); for (var j = 1; j < zc.length; j++) { B[B.length] = zc[j]; } return B;};mboxGenerateId = function() { return (new Date()).getTime() + "-" + Math.floor(Math.random() * 999999);};mboxScreenHeight = function() { return screen.height;};mboxScreenWidth = function() { return screen.width;};mboxBrowserWidth = function() { return (window.innerWidth) ? window.innerWidth : document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth;};mboxBrowserHeight = function() { return (window.innerHeight) ? window.innerHeight : document.documentElement ? document.documentElement.clientHeight : document.body.clientHeight;};mboxBrowserTimeOffset = function() { return -new Date().getTimezoneOffset();};mboxScreenColorDepth = function() { return screen.pixelDepth;};if (typeof mboxVersion == 'undefined') { var mboxVersion = 40; var mboxFactories = new mboxMap(); var mboxFactoryDefault = new mboxFactory('reunion.tt.omtrdc.net', 'reunion', 'default');};if (mboxGetPageParameter("mboxDebug") != null || mboxFactoryDefault.getCookieManager() .getCookie("debug") != null) { setTimeout(function() { if (typeof mboxDebugLoaded == 'undefined') { alert('Could not load the remote debug.\nPlease check your connection' + ' to Test&amp;Target servers'); } }, 60*60); document.write('<' + 'scr' + 'ipt language="Javascript1.2" src=' + '"http://admin9.testandtarget.omniture.com/admin/mbox/mbox_debug.jsp?mboxServerHost=reunion.tt.omtrdc.net' + '&clientCode=reunion"><' + '\/scr' + 'ipt>');};function processWvmpTeaser(json,obj) {
	obj.type = "wvmp";
	obj.summaries = json.message.summaries;
	obj.totalCount = json.message.totalCount;
	obj.firstName = json.message.user.firstName;
	obj.lastName= json.message.user.lastName;
    obj.maidenName = "";
	if(json.message.user.maidenName && json.message.user.maidenName == null) {
		obj.maidenName = "";
	}
	else {
        if(json.message.user.maidenName && json.message.user.maidenName != "") {
		    obj.maidenName = json.message.user.maidenName;
        }
	}
	obj.age = json.message.user.age;
	obj.state = json.message.user.state;
	obj.city = json.message.user.city;
	obj.userNum = json.message.user.usernum;
	obj.genderId = json.message.user.gender;
	obj.zipCode = json.message.user.zip;
	obj.gradYear = json.message.user.gradYear;
	obj.photoUrl = json.message.user.photo;
	obj.messageCount = json.message.messageCount;
	obj.schoolCount = json.message.schoolCount;
	obj.femaleCount = json.message.femaleCount;
	obj.maleCount = json.message.maleCount;
	obj.cityCount = json.message.cityCount;
	obj.statecount = json.message.stateCount;
	
	return obj;
}
function processWsfyTeaser(json,obj) {
	obj.type = "wsfy";
	obj.summaries = json.message.summaries;
	obj.totalCount = json.message.totalCount;
	obj.firstName = toProperCase(json.message.user.firstName);
	obj.lastName= toProperCase(json.message.user.lastName);
    obj.maidenName = "";
	if( json.message.user.maidenName && json.message.user.maidenName == null) {
		obj.maidenName = "";
	}
	else if(json.message.user.maidenName && json.message.user.maidenName != "") {
		obj.maidenName = toProperCase(json.message.user.maidenName);
	}
	obj.age = json.message.user.age;
	obj.state = json.message.user.state;
	obj.city = json.message.user.city;
	obj.userNum = json.message.user.usernum;
	obj.genderId = json.message.user.gender;
	obj.zipCode = json.message.user.zip;
	obj.gradYear = json.message.user.gradYear;
	obj.photoUrl = json.message.user.photo;
	obj.messageCount = json.message.messageCount;
	obj.schoolCount = json.message.schoolCount;
	obj.femaleCount = json.message.femaleCount;
	obj.maleCount = json.message.maleCount;
	obj.cityCount = json.message.cityCount;
	obj.statecount = json.message.stateCount;
	
	return obj;
}
function processWsfyWorkTeaser(json,obj) {
	obj.work = new Object();
	obj.work.summaries = new Array();
	obj.work.summaries = json.message.summaries;
	obj.work.totalCount = parseInt(json.message.totalcount);
	
	return obj;
}
function processWsfyServiceTeaser(json,obj) {
	obj.service = new Object();
	obj.service.summaries = new Array();
	obj.service.summaries = json.message.summaries;
	obj.service.totalCount = parseInt(json.message.totalcount);
	//"criteria":{"state":"","country":"","city":"","company":"","industry":"beauty","skills":"","title":"","basePoint":"90025","radius":25.0}
	var criteria = json.message.criteria;
	if(obj.service.totalCount > 0) {
		obj.service.state = criteria.state.toUpperCase();
		obj.service.country = criteria.country;
		obj.service.city = toProperCase(criteria.city);
		obj.service.industry = toProperCase(criteria.industry);
		obj.service.skills = toProperCase(criteria.skills);
		obj.service.zip = criteria.basePoint;
		obj.service.radius = criteria.radius;
	}
	return obj;
}// SEE: http://wiki.mylife.com/display/tech/Activity+Counts+Definitions

// USAGE: get counts (either from server or from cache...  when fetched from server they are cached for future use)
// var counts = getActivityCounts(82749023464, "SEARCHES_PERSONAL,WSFY_PERSONAL,SEARCHES_PROFESSIONAL");
// alert(counts["WSFY_PERSONAL"]);
//
// USAGE: increment cached count
// incrementActivityCount(82749023464, "SEARCHES_PERSONAL");
//
// USAGE: remove cached count
// removeActivityCount(82749023464, "SEARCHES_PERSONAL");
//
// USAGE: remove ALL cached counts
// flushActivityCounts(82749023464);

// public methods
function populateActivityCounts(usernum, cntTypes, aryCallBacks) {
    var url = "/json/activity/counts/" + usernum + "?clientType=SITE";
    var counts = getCachedActivityCounts(usernum);
    var countTypes = cntTypes.split(",");
    var neededCount = 0;
    for (var i=0; i<countTypes.length;i++) {
        var cachedVal = counts[countTypes[i]];
        if (cachedVal == undefined || cachedVal == "") {
            url += "&type=" + countTypes[i];
            neededCount++;
        }
    }

    //console.log("Internal GetActivityCounts: neededCount: " + neededCount + ", counts: " + counts + ", countTypes: " + countTypes);
    if (neededCount > 0) {
        $.ajax({
            type:"GET",
            async: true,
            url: url,
            cache: false,
            success: function(data) {
                var successCounts = getCachedActivityCounts(usernum);
                if (null != data){
                    $.each(data, function(nKey, nData) {
                        if (nKey != undefined && nKey.length > 0) {
                            successCounts[nKey] = nData;
                        }
                    });
                    //  Populate Navigation with new icon.
                    for (var i = 0; i < aryCallBacks.length; i++){
                        aryCallBacks[i](successCounts);
                    }
                }
                setCachedActivityCounts(usernum, successCounts);
            },
            fail: function(err){
                alert("Get Activity Call failed");
            }
        });
    }
    else {
        //  Populate Navigation with new icon.
        for(var i = 0; i < aryCallBacks.length; i++){
            aryCallBacks[i](counts);
        }
    }
    return counts;
}
// call to reset count to 0, e.g. user click notification count
function resetActivityCount(usernum, countType) {
	var counts = getCachedActivityCounts(usernum);
	counts[countType] = 0;
	setCachedActivityCounts(usernum, counts);	
}

//  Resolve module name into CountType in New Activity Count cookie.
function convertModuleToCacheName(module){
    var countType = "SEARCHES_PERSONAL_NEW_MATCHES";
    if(module == "work" || module == "jobs"){
        countType = "SEARCHES_PROFESSIONAL_NEW_MATCHES";
    }else if(module == "school"){
        countType = "HIGHSCHOOL_CLASSMATES_NEW";
    }else if(module == "service"){
        countType = "SEARCHES_SERVICE_NEW_MATCHES";
    }
    return countType;
}

// increment the count
function incrementActivityCount(usernum, countType) {
	var counts = getCachedActivityCounts(usernum);
	var currentValue = counts[countType];
	if (currentValue == undefined) {
		currentValue = 1;
	} else {
		currentValue = parseInt(currentValue) + 1;
	}
	counts[countType] = currentValue;
	setCachedActivityCounts(usernum, counts);
}
// decrement the count (countToDecrement is optional. If given, minus this number, else decrement 1)
function decrementActivityCount(usernum, countType, countToDecrement) {
	var counts = getCachedActivityCounts(usernum);
	var currentValue = counts[countType];
	if (currentValue == undefined || parseInt(currentValue) == 0) {
		currentValue = 0;
	} else {
        if(countToDecrement != undefined){
           currentValue = parseInt(currentValue) - parseInt(countToDecrement);
           if(currentValue < 0){ currentValue = 0 ;}
        }else{
		    currentValue = parseInt(currentValue) - 1;
        }
	}
	counts[countType] = currentValue;
	setCachedActivityCounts(usernum, counts);
}
// set count to a new value when you know the new value
function setActivityCount(usernum, countType, newValue) {
	var counts = getCachedActivityCounts(usernum);
	counts[countType] = newValue;
	setCachedActivityCounts(usernum, counts);	
}
// last resort, if you have no idea what the new value should be
function removeActivityCount(usernum, countType) {
	var counts = getCachedActivityCounts(usernum);
	counts[countType] = "0";
	setCachedActivityCounts(usernum, counts);
}

// call this on logout/login to get fresh counts
function flushActivityCounts(usernum) {
	$.cookie("act" + usernum, null);
}
// private methods below (DO NOT USE THEM)
function getCachedActivityCounts(usernum) {
	var activity = $.cookie("act" + usernum);
	//console.log("Activity Cookie Val: " + activity);
	var counts = {};
	if (activity != null) {
		var keyvals = activity.split("|");
		for (var i=0;i<keyvals.length;i++) {
			var keyval = keyvals[i].split(":");
			counts[keyval[0]] = keyval[1];
		}
	}
	return counts;
}

function setCachedActivityCounts(usernum, counts) {
	var cookieValue = "";
	var first = true;
	$.each(counts, function(nKey, nData) {
		if (nKey != undefined && nKey.length > 0 && nData != undefined && !isNaN(nData)) {
			if (first) {
				first = false;
			} else {
				cookieValue += "|";
			}
			cookieValue += nKey + ":" + nData;
		}
	});	
	$.cookie("act" + usernum, cookieValue, { path: '/'});
}
/*1312520169,169925223,JIT Construction: v416929,en_US*/

if(!window.FB)window.FB={_apiKey:null,_session:null,_userStatus:'unknown',_logging:true,_inCanvas:((window.location.search.indexOf('fb_sig_in_iframe=1')>-1)||(window.location.search.indexOf('session=')>-1)||(window.location.search.indexOf('signed_request=')>-1)||(window.name.indexOf('iframe_canvas')>-1)||(window.name.indexOf('app_runner')>-1)),_https:(window.name.indexOf('_fb_https')>-1),_domain:{api:'https://api.facebook.com/',api_read:'https://api-read.facebook.com/',cdn:'http://static.ak.fbcdn.net/',https_cdn:'https://s-static.ak.fbcdn.net/',graph:'https://graph.facebook.com/',staticfb:'http://static.ak.facebook.com/',https_staticfb:'https://s-static.ak.facebook.com/',www:'http://www.facebook.com/',https_www:'https://www.facebook.com/',m:'http://m.facebook.com/',https_m:'https://m.facebook.com/'},_locale:null,_localeIsRtl:false,getDomain:function(a){switch(a){case 'api':return FB._domain.api;case 'api_read':return FB._domain.api_read;case 'cdn':return (window.location.protocol=='https:'||FB._https)?FB._domain.https_cdn:FB._domain.cdn;case 'cdn_foreign':return FB._domain.cdn_foreign;case 'https_cdn':return FB._domain.https_cdn;case 'graph':return FB._domain.graph;case 'staticfb':return (document.referrer.indexOf('https:')==0||FB._https)?FB._domain.https_staticfb:FB._domain.staticfb;case 'https_staticfb':return FB._domain.https_staticfb;case 'www':return (window.location.protocol=='https:'||FB._https)?FB._domain.https_www:FB._domain.www;case 'https_www':return FB._domain.https_www;case 'm':return (window.location.protocol=='https:'||FB._https)?FB._domain.https_m:FB._domain.m;case 'https_m':return FB._domain.https_m;}},copy:function(d,c,b,e){for(var a in c)if(b||typeof d[a]==='undefined')d[a]=e?e(c[a]):c[a];return d;},create:function(c,h){var e=window.FB,d=c?c.split('.'):[],a=d.length;for(var b=0;b<a;b++){var g=d[b];var f=e[g];if(!f){f=(h&&b+1==a)?h:{};e[g]=f;}e=f;}return e;},provide:function(c,b,a){return FB.copy(typeof c=='string'?FB.create(c):c,b,a);},guid:function(){return 'f'+(Math.random()*(1<<30)).toString(16).replace('.','');},log:function(a){if(FB._logging)if(window.Debug&&window.Debug.writeln){window.Debug.writeln(a);}else if(window.console)window.console.log(a);if(FB.Event)FB.Event.fire('fb.log',a);},$:function(a){return document.getElementById(a);}};
FB.provide('Array',{indexOf:function(a,c){if(a.indexOf)return a.indexOf(c);var d=a.length;if(d)for(var b=0;b<d;b++)if(a[b]===c)return b;return -1;},merge:function(c,b){for(var a=0;a<b.length;a++)if(FB.Array.indexOf(c,b[a])<0)c.push(b[a]);return c;},filter:function(a,c){var b=[];for(var d=0;d<a.length;d++)if(c(a[d]))b.push(a[d]);return b;},keys:function(c,d){var a=[];for(var b in c)if(d||c.hasOwnProperty(b))a.push(b);return a;},map:function(a,d){var c=[];for(var b=0;b<a.length;b++)c.push(d(a[b]));return c;},forEach:function(c,a,f){if(!c)return;if(Object.prototype.toString.apply(c)==='[object Array]'||(!(c instanceof Function)&&typeof c.length=='number')){if(c.forEach){c.forEach(a);}else for(var b=0,e=c.length;b<e;b++)a(c[b],b,c);}else for(var d in c)if(f||c.hasOwnProperty(d))a(c[d],d,c);}});
FB.provide('QS',{encode:function(c,d,a){d=d===undefined?'&':d;a=a===false?function(e){return e;}:encodeURIComponent;var b=[];FB.Array.forEach(c,function(f,e){if(f!==null&&typeof f!='undefined')b.push(a(e)+'='+a(f));});b.sort();return b.join(d);},decode:function(f){var a=decodeURIComponent,d={},e=f.split('&'),b,c;for(b=0;b<e.length;b++){c=e[b].split('=',2);if(c&&c[0])d[a(c[0])]=a(c[1]||'');}return d;}});
FB.provide('Content',{_root:null,_hiddenRoot:null,_callbacks:{},append:function(a,c){if(!c)if(!FB.Content._root){FB.Content._root=c=FB.$('fb-root');if(!c){FB.log('The "fb-root" div has not been created.');return;}else c.className+=' fb_reset';}else c=FB.Content._root;if(typeof a=='string'){var b=document.createElement('div');c.appendChild(b).innerHTML=a;return b;}else return c.appendChild(a);},appendHidden:function(a){if(!FB.Content._hiddenRoot){var b=document.createElement('div'),c=b.style;c.position='absolute';c.top='-10000px';c.width=c.height=0;FB.Content._hiddenRoot=FB.Content.append(b);}return FB.Content.append(a,FB.Content._hiddenRoot);},insertIframe:function(e){e.id=e.id||FB.guid();e.name=e.name||FB.guid();var a=FB.guid(),f=false,d=false;FB.Content._callbacks[a]=function(){if(f&&!d){d=true;e.onload&&e.onload(e.root.firstChild);}};if(document.attachEvent){var b=('<iframe'+' id="'+e.id+'"'+' name="'+e.name+'"'+(e.title?' title="'+e.title+'"':'')+(e.className?' class="'+e.className+'"':'')+' style="border:none;'+(e.width?'width:'+e.width+'px;':'')+(e.height?'height:'+e.height+'px;':'')+'"'+' src="'+e.url+'"'+' frameborder="0"'+' scrolling="no"'+' allowtransparency="true"'+' onload="FB.Content._callbacks.'+a+'()"'+'></iframe>');e.root.innerHTML='<iframe src="javascript:false"'+' frameborder="0"'+' scrolling="no"'+' style="height:1px"></iframe>';f=true;window.setTimeout(function(){e.root.innerHTML=b;e.onInsert&&e.onInsert(e.root.firstChild);},0);}else{var c=document.createElement('iframe');c.id=e.id;c.name=e.name;c.onload=FB.Content._callbacks[a];c.scrolling='no';c.style.border='none';c.style.overflow='hidden';if(e.title)c.title=e.title;if(e.className)c.className=e.className;if(e.height)c.style.height=e.height+'px';if(e.width)c.style.width=e.width+'px';e.root.appendChild(c);f=true;c.src=e.url;e.onInsert&&e.onInsert(c);}},submitToTarget:function(c,b){var a=document.createElement('form');a.action=c.url;a.target=c.target;a.method=(b)?'GET':'POST';FB.Content.appendHidden(a);FB.Array.forEach(c.params,function(f,e){if(f!==null&&f!==undefined){var d=document.createElement('input');d.name=e;d.value=f;a.appendChild(d);}});a.submit();a.parentNode.removeChild(a);}});
FB.provide('Flash',{_minVersions:[[9,0,159,0],[10,0,22,87]],_swfPath:'swf/XdComm.swf',_callbacks:[],_names:{},_unloadRegistered:false,init:function(){if(FB.Flash._init)return;FB.Flash._init=true;window.FB_OnFlashXdCommReady=function(){FB.Flash._ready=true;for(var a=0,b=FB.Flash._callbacks.length;a<b;a++)FB.Flash._callbacks[a]();FB.Flash._callbacks=[];};FB.Flash.embedSWF('XdComm',FB.getDomain('cdn_foreign')+FB.Flash._swfPath);},embedSWF:function(d,e,b){var a=!!document.attachEvent,c=('<object '+'type="application/x-shockwave-flash" '+'id="'+d+'" '+(b?'flashvars="'+b+'" ':'')+(a?'name="'+d+'" ':'')+(a?'':'data="'+e+'" ')+(a?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'')+'allowscriptaccess="always">'+'<param name="movie" value="'+e+'"></param>'+'<param name="allowscriptaccess" value="always"></param>'+'</object>');FB.Content.appendHidden(c);if(FB.UA.ie()>=9){if(!FB.Flash._unloadRegistered){var f=function(){FB.Array.forEach(FB.Flash._names,function(i,h){var g=document.getElementById(h);if(g)g.removeNode(true);});};window.attachEvent('onunload',f);FB.Flash._unloadRegistered=true;}FB.Flash._names[d]=true;}},hasMinVersion:function(){if(typeof FB.Flash._hasMinVersion==='undefined'){var i,a,b,h=[];try{i=new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');}catch(j){if(navigator.mimeTypes.length>0){var mimeType='application/x-shockwave-flash';if(navigator.mimeTypes[mimeType].enabledPlugin){var name='Shockwave Flash';i=(navigator.plugins[name+' 2.0']||navigator.plugins[name]).description;}}}if(i){var f=i.replace(/\D+/g,',').match(/^,?(.+),?$/)[1].split(',');for(a=0,b=f.length;a<b;a++)h.push(parseInt(f[a],10));}FB.Flash._hasMinVersion=false;majorVersion:for(a=0,b=FB.Flash._minVersions.length;a<b;a++){var g=FB.Flash._minVersions[a];if(g[0]!=h[0])continue;for(var c=1,d=g.length,e=h.length;(c<d&&c<e);c++)if(h[c]<g[c]){FB.Flash._hasMinVersion=false;continue majorVersion;}else{FB.Flash._hasMinVersion=true;if(h[c]>g[c])break majorVersion;}};}return FB.Flash._hasMinVersion;},onReady:function(a){FB.Flash.init();if(FB.Flash._ready){window.setTimeout(a,0);}else FB.Flash._callbacks.push(a);}});
if(!this.JSON)this.JSON={};(function(){function f(n){return n<10?'0'+n:n;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function')value=value.toJSON(key);if(typeof rep==='function')value=rep.call(holder,key,value);switch(typeof value){case 'string':return quote(value);case 'number':return isFinite(value)?String(value):'null';case 'boolean':case 'null':return String(value);case 'object':if(!value)return 'null';gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1)partial[i]=str(i,value)||'null';v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}}}else for(k in value)if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1)indent+=' ';}else if(typeof space==='string')indent=space;rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number'))throw new Error('JSON.stringify');return str('',{'':value});};if(typeof JSON.parse!=='function')JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object')for(k in value)if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else delete value[k];}return reviver.call(holder,key,value);}cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return '\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};}());
FB.provide('JSON',{stringify:function(a){if(window.Prototype&&Object.toJSON){return Object.toJSON(a);}else return JSON.stringify(a);},parse:function(a){return JSON.parse(a);},flatten:function(c){var a={};for(var b in c)if(c.hasOwnProperty(b)){var d=c[b];if(null===d||undefined===d){continue;}else if(typeof d=='string'){a[b]=d;}else a[b]=FB.JSON.stringify(d);}return a;}});
FB.provide('',{api:function(){if(typeof arguments[0]==='string'){FB.ApiServer.graph.apply(FB.ApiServer,arguments);}else FB.ApiServer.rest.apply(FB.ApiServer,arguments);}});FB.provide('ApiServer',{METHODS:['get','post','delete','put'],_callbacks:{},_readOnlyCalls:{fql_query:true,fql_multiquery:true,friends_get:true,notifications_get:true,stream_get:true,users_getinfo:true},graph:function(){var a=Array.prototype.slice.call(arguments),f=a.shift(),d=a.shift(),c,e,b;while(d){var g=typeof d;if(g==='string'&&!c){c=d.toLowerCase();}else if(g==='function'&&!b){b=d;}else if(g==='object'&&!e){e=d;}else{FB.log('Invalid argument passed to FB.api(): '+d);return;}d=a.shift();}c=c||'get';e=e||{};if(f[0]==='/')f=f.substr(1);if(FB.Array.indexOf(FB.ApiServer.METHODS,c)<0){FB.log('Invalid method passed to FB.api(): '+c);return;}FB.ApiServer.oauthRequest('graph',f,c,e,b);},rest:function(e,a){var c=e.method.toLowerCase().replace('.','_');if(FB.Auth&&c==='auth_revokeauthorization'){var d=a;a=function(f){if(f===true)if(FB._oauth){FB.Auth.setAuthResponse(null,'not_authorized');}else FB.Auth.setSession(null,'notConnected');d&&d(f);};}e.format='json-strings';e.api_key=FB._apiKey;var b=FB.ApiServer._readOnlyCalls[c]?'api_read':'api';FB.ApiServer.oauthRequest(b,'restserver.php','get',e,a);},oauthRequest:function(b,f,c,e,a){if(FB.getAccessToken())e.access_token=FB.getAccessToken();e.sdk='joey';e.pretty=0;var d=a;a=function(h){if(FB.Auth&&h&&FB._session&&FB._session.access_token==e.access_token&&(h.error_code==='190'||(h.error&&(h.error==='invalid_token'||h.error.type==='OAuthException'))))FB.getLoginStatus(null,true);d&&d(h);};try{FB.ApiServer.jsonp(b,f,c,FB.JSON.flatten(e),a);}catch(g){if(FB.Flash.hasMinVersion()){FB.ApiServer.flash(b,f,c,FB.JSON.flatten(e),a);}else throw new Error('Flash is required for this API call.');}},jsonp:function(b,f,d,e,a){var c=FB.guid(),g=document.createElement('script');if(b==='graph'&&d!=='get')e.method=d;e.callback='FB.ApiServer._callbacks.'+c;var h=(FB.getDomain(b)+f+(f.indexOf('?')>-1?'&':'?')+FB.QS.encode(e));if(h.length>2000)throw new Error('JSONP only support a maximum of 2000 bytes of input.');FB.ApiServer._callbacks[c]=function(i){a&&a(i);delete FB.ApiServer._callbacks[c];g.parentNode.removeChild(g);};g.src=h;document.getElementsByTagName('head')[0].appendChild(g);},flash:function(b,e,c,d,a){if(!window.FB_OnXdHttpResult)window.FB_OnXdHttpResult=function(g,f){FB.ApiServer._callbacks[g](decodeURIComponent(f));};FB.Flash.onReady(function(){var h=FB.getDomain(b)+e,f=FB.QS.encode(d);if(c==='get'){if(h.length+f.length>2000){if(b==='graph')d.method='get';c='post';f=FB.QS.encode(d);}else{h+=(h.indexOf('?')>-1?'&':'?')+f;f='';}}else if(c!=='post'){if(b==='graph')d.method=c;c='post';f=FB.QS.encode(d);}var g=document.XdComm.sendXdHttpRequest(c.toUpperCase(),h,f,null);FB.ApiServer._callbacks[g]=function(i){a&&a(FB.JSON.parse(i));delete FB.ApiServer._callbacks[g];};});}});
FB.provide('EventProvider',{subscribers:function(){if(!this._subscribersMap)this._subscribersMap={};return this._subscribersMap;},subscribe:function(b,a){var c=this.subscribers();if(!c[b]){c[b]=[a];}else c[b].push(a);},unsubscribe:function(b,a){var c=this.subscribers()[b];FB.Array.forEach(c,function(e,d){if(e==a)c[d]=null;});},monitor:function(d,a){if(!a()){var b=this,c=function(){if(a.apply(a,arguments))b.unsubscribe(d,c);};this.subscribe(d,c);}},clear:function(a){delete this.subscribers()[a];},fire:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();FB.Array.forEach(this.subscribers()[b],function(c){if(c)c.apply(this,a);});},listen:function(a,event,b){if(a.addEventListener){a.addEventListener(event,b,false);}else if(a.attachEvent)a.attachEvent(event,b);},unlisten:function(a,event,b){if(a.removeEventListener){a.removeEventListener(event,b,false);}else if(a.detachEvent)a.detachEvent(event,b);}});FB.provide('Event',FB.EventProvider);
FB.provide('XD',{_origin:null,_transport:null,_callbacks:{},_forever:{},_xdProxyUrl:'connect/xd_proxy.php',_openerTransport:null,_openerOrigin:null,_nonOpenerOrigin:null,init:function(b){if(FB.XD._origin)return;var d=(window.location.protocol+'//'+window.location.host+'/'+FB.guid());if(window.addEventListener&&!window.attachEvent&&window.postMessage){FB.XD._origin=d;FB.XD.PostMessage.init();FB.XD._transport='postmessage';}else if(!b&&FB.Flash.hasMinVersion()){if(document.getElementById('fb-root')){var c=document.domain;if(c=='facebook.com')c=window.location.host;FB.XD._origin=(window.location.protocol+'//'+c+'/'+FB.guid());FB.XD.Flash.init();FB.XD._transport='flash';}else{if(FB.log)FB.log('missing fb-root, defaulting to fragment-based xdcomm');FB.XD._transport='fragment';FB.XD.Fragment._channelUrl=b||window.location.toString();}}else{FB.XD._transport='fragment';FB.XD.Fragment._channelUrl=b||window.location.toString();}var a=!!window.attachEvent;if(FB.XD._transport!='postmessage'&&a&&window.postMessage){FB.XD._openerTransport=FB.XD._transport;FB.XD._openerOrigin=FB.XD._origin;FB.XD._nonOpenerOrigin=d;}},resolveRelation:function(b){var g,d,f=b.split('.'),e=window;for(var a=0,c=f.length;a<c;a++){g=f[a];if(g==='opener'||g==='parent'||g==='top'){e=e[g];}else if(d=/^frames\[['"]?([a-zA-Z0-9-_]+)['"]?\]$/.exec(g)){e=e.frames[d[1]];}else throw new SyntaxError('Malformed id to resolve: '+b+', pt: '+g);}return e;},handler:function(a,f,c,d,b){if(window.location.toString().indexOf(FB.XD.Fragment._magic)>0)return 'javascript:false;//';var g=FB.getDomain((b?'https_':'')+'cdn')+FB.XD._xdProxyUrl+'#';d=d||FB.guid();f=f||'opener';if(FB.XD._openerTransport)if(f=='opener'){FB.XD._transport=FB.XD._openerTransport;FB.XD._origin=FB.XD._openerOrigin;}else{FB.XD.PostMessage.init();FB.XD._transport='postmessage';FB.XD._origin=FB.XD._nonOpenerOrigin;}if(FB.XD._transport=='fragment'){g=FB.XD.Fragment._channelUrl;var e=g.indexOf('#');if(e>0)g=g.substr(0,e);g+=((g.indexOf('?')<0?'?':'&')+FB.XD.Fragment._magic+'#?=&');}if(c)FB.XD._forever[d]=true;FB.XD._callbacks[d]=a;return g+FB.QS.encode({cb:d,origin:FB.XD._origin,relation:f,transport:FB.XD._transport});},recv:function(b){if(typeof b=='string')try{b=FB.JSON.parse(b);}catch(c){b=FB.QS.decode(b);}var a=FB.XD._callbacks[b.cb];if(!FB.XD._forever[b.cb])delete FB.XD._callbacks[b.cb];a&&a(b);},PostMessage:{_isInitialized:false,init:function(){if(!FB.XD.PostMessage._isInitialized){var a=FB.XD.PostMessage.onMessage;window.addEventListener?window.addEventListener('message',a,false):window.attachEvent('onmessage',a);FB.XD.PostMessage._isInitialized=true;}},onMessage:function(event){FB.XD.recv(event.data);}},WebView:{onMessage:function(a,c,b){FB.XD.recv(b);}},Flash:{init:function(){FB.Flash.onReady(function(){document.XdComm.postMessage_init('FB.XD.Flash.onMessage',FB.XD._openerOrigin?FB.XD._openerOrigin:FB.XD._origin);});},onMessage:function(a){FB.XD.recv(decodeURIComponent(a));}},Fragment:{_magic:'fb_xd_fragment',checkAndDispatch:function(){var b=window.location.toString(),a=b.substr(b.indexOf('#')+1),c=b.indexOf(FB.XD.Fragment._magic);if(c>0){FB.init=FB.getLoginStatus=FB.api=function(){};document.documentElement.style.display='none';FB.XD.resolveRelation(FB.QS.decode(a).relation).FB.XD.recv(a);}}}});FB.XD.Fragment.checkAndDispatch();
FB.provide('UA',{ie:function(){return FB.UA._populate()||this._ie;},firefox:function(){return FB.UA._populate()||this._firefox;},opera:function(){return FB.UA._populate()||this._opera;},safari:function(){return FB.UA._populate()||this._safari;},chrome:function(){return FB.UA._populate()||this._chrome;},windows:function(){return FB.UA._populate()||this._windows;},osx:function(){return FB.UA._populate()||this._osx;},linux:function(){return FB.UA._populate()||this._linux;},ios:function(){return FB.UA._populate()||this._ios;},mobile:function(){return false;},android:function(){return FB.UA._populate()||this._android;},nativeApp:function(){return false;},_populated:false,_populate:function(){if(FB.UA._populated)return;FB.UA._populated=true;var a=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(navigator.userAgent);var c=/(Mac OS X)|(Windows)|(Linux)/.exec(navigator.userAgent);var b=/\b(iPhone|iP[ao]d)/.exec(navigator.userAgent);FB.UA._android=navigator.userAgent.match(/Android/i);FB.UA._mobile=b||FB.UA._android||navigator.userAgent.match(/Mobile/i);if(a){FB.UA._ie=a[1]?parseFloat(a[1]):NaN;if(FB.UA._ie>=8&&!window.HTMLCollection)FB.UA._ie=7;FB.UA._firefox=a[2]?parseFloat(a[2]):NaN;FB.UA._opera=a[3]?parseFloat(a[3]):NaN;FB.UA._safari=a[4]?parseFloat(a[4]):NaN;if(FB.UA._safari){a=/(?:Chrome\/(\d+\.\d+))/.exec(navigator.userAgent);FB.UA._chrome=a&&a[1]?parseFloat(a[1]):NaN;}else FB.UA._chrome=NaN;}else FB.UA._ie=FB.UA._firefox=FB.UA._opera=FB.UA._chrome=FB.UA._safari=NaN;if(c){FB.UA._osx=!!c[1];FB.UA._windows=!!c[2];FB.UA._linux=!!c[3];}else FB.UA._osx=FB.UA._windows=FB.UA._linux=false;FB.UA._ios=b;}});
FB.provide('Arbiter',{_canvasProxyUrl:'connect/canvas_proxy.php',inform:function(c,e,f,b){if(FB.Canvas.isTabIframe()||(!FB._inCanvas&&FB.UA.mobile()&&window.postMessage)){var d=FB.JSON.stringify({method:c,params:e});if(window.postMessage){FB.XD.resolveRelation(f||'parent').postMessage(d,'*');return;}else try{window.opener.postMessage(d);return;}catch(a){}}var h=(FB.getDomain((b?'https_':'')+'staticfb')+FB.Arbiter._canvasProxyUrl+'#'+FB.QS.encode({method:c,params:FB.JSON.stringify(e||{}),relation:f}));var g=FB.Content.appendHidden('');FB.Content.insertIframe({url:h,root:g,width:1,height:1,onload:function(){setTimeout(function(){g.parentNode.removeChild(g);},10);}});}});
FB.provide('Canvas',{_timer:null,_lastSize:{},_pageInfo:{clientWidth:0,clientHeight:0,scrollLeft:0,scrollTop:0,offsetLeft:0,offsetTop:0},_pageInfoPollInterval:200,init:function(){var d=FB.Dom.getViewportInfo();FB.Canvas._pageInfo.clientWidth=d.width;FB.Canvas._pageInfo.clientHeight=d.height;if(window.name){var c='top.frames['+window.name+']';var a=FB.XD.handler(function(e){if(e.type=='pageInfo.update'){FB.Canvas._pageInfo.clientWidth=e.clientWidth;FB.Canvas._pageInfo.clientHeight=e.clientHeight;FB.Canvas._pageInfo.scrollLeft=e.scrollLeft;FB.Canvas._pageInfo.scrollTop=e.scrollTop;FB.Canvas._pageInfo.offsetLeft=e.offsetLeft;FB.Canvas._pageInfo.offsetTop=e.offsetTop;FB.Event.fire('canvas.pageInfoChange',FB.Canvas._pageInfo);}},c,true);var b={channelUrl:a,frame:window.name,updateInterval:FB.Canvas._pageInfoPollInterval};FB.Arbiter.inform('pollPageInfo',b,'top');}},setSize:function(b){if(typeof b!="object")b={};b=b||{};if(b.width==null||b.height==null)b=FB.copy(b,FB.Canvas._computeContentSize());b=FB.copy(b,{frame:window.name||'iframe_canvas'});if(FB.Canvas._lastSize[b.frame]){var a=FB.Canvas._lastSize[b.frame].height;if(FB.Canvas._lastSize[b.frame].width==b.width&&(b.height<=a&&(Math.abs(a-b.height)<=16)))return false;}FB.Canvas._lastSize[b.frame]=b;FB.Arbiter.inform('setSize',b);return true;},scrollTo:function(a,b){FB.Arbiter.inform('scrollTo',{frame:window.name||'iframe_canvas',x:a,y:b});},setAutoResize:function(b,a){if(a===undefined&&typeof b=="number"){a=b;b=true;}if(b===undefined||b){if(FB.Canvas._timer===null)FB.Canvas._timer=window.setInterval(FB.Canvas.setSize,a||100);FB.Canvas.setSize();}else if(FB.Canvas._timer!==null){window.clearInterval(FB.Canvas._timer);FB.Canvas._timer=null;}},isTabIframe:function(){return (window.name.indexOf('app_runner_')===0);},getPageInfo:function(){return FB.Canvas._pageInfo;},setDoneLoading:function(a){FB.Canvas._passAppTtiMessage(a,'RecordIframeAppTti');},stopTimer:function(a){FB.Canvas._passAppTtiMessage(a,'StopIframeAppTtiTimer');},startTimer:function(){FB.Canvas._passAppTtiMessage(null,'StartIframeAppTtiTimer');},_passAppTtiMessage:function(a,c){var b=null;if(a)b=FB.XD.handler(a,'top.frames['+window.name+']',false);FB.Arbiter.inform(c,{frame:window.name||'iframe_canvas',time:(new Date()).getTime(),appId:parseInt(FB._apiKey,10),channelUrl:b});},_computeContentSize:function(){var a=document.body,c=document.documentElement,d=0,b=Math.max(Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop,Math.max(c.offsetHeight,c.scrollHeight)+c.offsetTop);if(a.offsetWidth<a.scrollWidth){d=a.scrollWidth+a.offsetLeft;}else FB.Array.forEach(a.childNodes,function(e){var f=e.offsetWidth+e.offsetLeft;if(f>d)d=f;});if(c.clientLeft>0)d+=(c.clientLeft*2);if(c.clientTop>0)b+=(c.clientTop*2);return {height:b,width:d};}});
FB.provide('Intl',{_punctCharClass:('['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']'),_endsInPunct:function(a){if(typeof a!='string')return false;return a.match(new RegExp(FB.Intl._punctCharClass+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));},_tx:function(d,a){if(a!==undefined)if(typeof a!='object'){FB.log('The second arg to FB.Intl._tx() must be an Object for '+'tx('+d+', ...)');}else{var c;for(var b in a)if(a.hasOwnProperty(b)){if(FB.Intl._endsInPunct(a[b])){c=new RegExp('\{'+b+'\}'+FB.Intl._punctCharClass+'*','g');}else c=new RegExp('\{'+b+'\}','g');d=d.replace(c,a[b]);}}return d;},tx:function(b,a){function c(e,d){void(0);}if(!FB.Intl._stringTable)return null;return FBIntern.Intl._tx(FB.Intl._stringTable[b],a);}});
FB.provide('String',{trim:function(a){return a.replace(/^\s*|\s*$/g,'');},format:function(a){if(!FB.String.format._formatRE)FB.String.format._formatRE=/(\{[^\}^\{]+\})/g;var b=arguments;return a.replace(FB.String.format._formatRE,function(e,d){var c=parseInt(d.substr(1),10),f=b[c+1];if(f===null||f===undefined)return '';return f.toString();});},escapeHTML:function(b){var a=document.createElement('div');a.appendChild(document.createTextNode(b));return a.innerHTML.replace(/"/g,'&quot;').replace(/'/g,'&#39;');},quote:function(c){var a=/["\\\x00-\x1f\x7f-\x9f]/g,b={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};return a.test(c)?'"'+c.replace(a,function(d){var e=b[d];if(e)return e;e=d.charCodeAt();return '\\u00'+Math.floor(e/16).toString(16)+(e%16).toString(16);})+'"':'"'+c+'"';}});
FB.provide('Dom',{containsCss:function(c,a){var b=' '+c.className+' ';return b.indexOf(' '+a+' ')>=0;},addCss:function(b,a){if(!FB.Dom.containsCss(b,a))b.className=b.className+' '+a;},removeCss:function(b,a){if(FB.Dom.containsCss(b,a)){b.className=b.className.replace(a,'');FB.Dom.removeCss(b,a);}},getStyle:function(a,c){var d=false,b=a.style;if(a.currentStyle){FB.Array.forEach(c.match(/\-([a-z])/g),function(e){c=c.replace(e,e.substr(1,1).toUpperCase());});d=a.currentStyle[c];}else{FB.Array.forEach(c.match(/[A-Z]/g),function(e){c=c.replace(e,'-'+e.toLowerCase());});if(window.getComputedStyle){d=document.defaultView.getComputedStyle(a,null).getPropertyValue(c);if(c=='background-position-y'||c=='background-position-x')if(d=='top'||d=='left')d='0px';}}if(c=='opacity'){if(a.filters&&a.filters.alpha)return d;return d*100;}return d;},setStyle:function(a,c,d){var b=a.style;if(c=='opacity'){if(d>=100)d=99.999;if(d<0)d=0;b.opacity=d/100;b.MozOpacity=d/100;b.KhtmlOpacity=d/100;if(a.filters)if(a.filters.alpha==undefined){a.filter="alpha(opacity="+d+")";}else a.filters.alpha.opacity=d;}else b[c]=d;},addScript:function(b){var a=document.createElement('script');a.type="text/javascript";a.src=b;return document.getElementsByTagName('head')[0].appendChild(a);},addCssRules:function(e,c){if(!FB.Dom._cssRules)FB.Dom._cssRules={};var a=true;FB.Array.forEach(c,function(f){if(!(f in FB.Dom._cssRules)){a=false;FB.Dom._cssRules[f]=true;}});if(a)return;if(!FB.UA.ie()){var d=document.createElement('style');d.type='text/css';d.textContent=e;document.getElementsByTagName('head')[0].appendChild(d);}else try{document.createStyleSheet().cssText=e;}catch(b){if(document.styleSheets[0])document.styleSheets[0].cssText+=e;}},getViewportInfo:function(){var a=(document.documentElement&&document.compatMode=='CSS1Compat')?document.documentElement:document.body;return {scrollTop:a.scrollTop,scrollLeft:a.scrollLeft,width:self.innerWidth?self.innerWidth:a.clientWidth,height:self.innerHeight?self.innerHeight:a.clientHeight};},ready:function(a){if(FB.Dom._isReady){a&&a();}else FB.Event.subscribe('dom.ready',a);}});(function(){function domReady(){FB.Dom._isReady=true;FB.Event.fire('dom.ready');FB.Event.clear('dom.ready');}if(FB.Dom._isReady||document.readyState=='complete')return domReady();if(document.addEventListener){document.addEventListener('DOMContentLoaded',domReady,false);}else if(document.attachEvent)document.attachEvent('onreadystatechange',domReady);if(FB.UA.ie()&&window===top)(function(){try{document.documentElement.doScroll('left');}catch(error){setTimeout(arguments.callee,0);return;}domReady();})();var oldonload=window.onload;window.onload=function(){domReady();if(oldonload)if(typeof oldonload=='string'){eval(oldonload);}else oldonload();};})();
FB.provide('',{bind:function(){var a=Array.prototype.slice.call(arguments),c=a.shift(),b=a.shift();return function(){return c.apply(b,a.concat(Array.prototype.slice.call(arguments)));};},Class:function(b,a,d){if(FB.CLASSES[b])return FB.CLASSES[b];var c=a||function(){};c.prototype=d;c.prototype.bind=function(e){return FB.bind(e,this);};c.prototype.constructor=c;FB.create(b,c);FB.CLASSES[b]=c;return c;},subclass:function(d,b,c,e){if(FB.CLASSES[d])return FB.CLASSES[d];var a=FB.create(b);FB.copy(e,a.prototype);e._base=a;e._callBase=function(g){var f=Array.prototype.slice.call(arguments,1);return a.prototype[g].apply(this,f);};return FB.Class(d,c?c:function(){if(a.apply)a.apply(this,arguments);},e);},CLASSES:{}});FB.provide('Type',{isType:function(a,b){while(a)if(a.constructor===b||a===b){return true;}else a=a._base;return false;}});
FB.Class('Obj',null,FB.copy({setProperty:function(a,b){if(FB.JSON.stringify(b)!=FB.JSON.stringify(this[a])){this[a]=b;this.fire(a,b);}}},FB.EventProvider));
FB.subclass('Dialog','Obj',function(a){this.id=a;FB.Dialog._dialogs[a]=this;},{});FB.provide('Dialog',{_dialogs:{},_loaderEl:null,_stack:[],_active:null,get:function(a){return FB.Dialog._dialogs[a];},_findRoot:function(a){while(a){if(FB.Dom.containsCss(a,'fb_dialog'))return a;a=a.parentNode;}},_showLoader:function(a,c){if(!FB.Dialog._loaderEl){c=parseInt(c,10);c=c?c:460;FB.Dialog._loaderEl=FB.Dialog._findRoot(FB.Dialog.create({content:('<div class="dialog_title">'+'  <a id="fb_dialog_loader_close">'+'    <div class="fb_dialog_close_icon"></div>'+'  </a>'+'  <span>Facebook</span>'+'  <div style="clear:both;"></div>'+'</div>'+'<div class="dialog_content"></div>'+'<div class="dialog_footer"></div>'),width:c}));}if(!a)a=function(){};var b=FB.$('fb_dialog_loader_close');FB.Dom.removeCss(b,'fb_hidden');b.onclick=function(){FB.Dialog._hideLoader();a();};FB.Dialog._makeActive(FB.Dialog._loaderEl);},_hideLoader:function(){if(FB.Dialog._loaderEl&&FB.Dialog._loaderEl==FB.Dialog._active)FB.Dialog._loaderEl.style.top='-10000px';},_makeActive:function(a){FB.Dialog._lowerActive();FB.Dialog._active=a;FB.Dialog._centerActive(FB.Canvas.getPageInfo());},_lowerActive:function(){if(!FB.Dialog._active)return;FB.Dialog._active.style.top='-10000px';FB.Dialog._active=null;},_removeStacked:function(a){FB.Dialog._stack=FB.Array.filter(FB.Dialog._stack,function(b){return b!=a;});},_centerActive:function(f){var a=FB.Dialog._active;if(!a)return;var h=FB.Dom.getViewportInfo();var i=parseInt(a.offsetWidth,10);var b=parseInt(a.offsetHeight,10);var c=h.scrollLeft+(h.width-i)/2;var e=(h.height-b)/2.5;if(c<e)e=c;var d=h.height-b-e;var g=f.scrollTop-f.offsetTop+(f.clientHeight-b)/2;if(g<e){g=e;}else if(g>d)g=d;g+=h.scrollTop;a.style.left=(c>0?c:0)+'px';a.style.top=(g>0?g:0)+'px';},create:function(e){e=e||{};if(e.loader)FB.Dialog._showLoader(e.onClose,e.loaderWidth);var d=document.createElement('div'),c=document.createElement('div'),a='fb_dialog';if(e.closeIcon&&e.onClose){var b=document.createElement('a');b.className='fb_dialog_close_icon';b.onclick=e.onClose;d.appendChild(b);}if(FB.UA.ie()){a+=' fb_dialog_legacy';FB.Array.forEach(['vert_left','vert_right','horiz_top','horiz_bottom','top_left','top_right','bottom_left','bottom_right'],function(g){var h=document.createElement('span');h.className='fb_dialog_'+g;d.appendChild(h);});}else a+=(FB.UA.mobile())?' fb_dialog_mobile':' fb_dialog_advanced';if(e.content)FB.Content.append(e.content,c);d.className=a;var f=parseInt(e.width,10);if(!isNaN(f))d.style.width=f+'px';c.className='fb_dialog_content';d.appendChild(c);FB.Content.append(d);if(e.visible)FB.Dialog.show(d);return c;},show:function(a){var b=FB.Dialog._findRoot(a);if(b){FB.Dialog._removeStacked(b);FB.Dialog._hideLoader();FB.Dialog._makeActive(b);FB.Dialog._stack.push(b);if('fbCallID' in a)FB.Dialog.get(a.fbCallID).fire('iframe_show');}},hide:function(a){var b=FB.Dialog._findRoot(a);if(b==FB.Dialog._active){FB.Dialog._lowerActive();if('fbCallID' in a)FB.Dialog.get(a.fbCallID).fire('iframe_hide');}},remove:function(a){a=FB.Dialog._findRoot(a);if(a){var b=FB.Dialog._active==a;FB.Dialog._removeStacked(a);FB.Dialog._hideLoader();if(b)if(FB.Dialog._stack.length>0){FB.Dialog.show(FB.Dialog._stack.pop());}else FB.Dialog._lowerActive();window.setTimeout(function(){a.parentNode.removeChild(a);},3000);}}});
FB.provide('',{ui:function(f,b){if(!f.method){FB.log('"method" is a required parameter for FB.ui().');return null;}if((f.method=='permissions.request'||f.method=='permissions.oauth')&&(f.display=='iframe'||f.display=='dialog')){var h;var i;if(FB._oauth){h=f.scope;i=h.split(/\s|,/g);}else{h=f.perms;i=h.split(',');}for(var e=0;e<i.length;e++){var g=FB.String.trim(i[e]);if(g&&!FB.initSitevars.iframePermissions[g]){f.display='popup';break;}}}var a=FB.UIServer.prepareCall(f,b);if(!a)return null;var d=a.params.display;if(d==='dialog'){d='iframe';}else if(d==='none')d='hidden';var c=FB.UIServer[d];if(!c){FB.log('"display" must be one of "popup", '+'"dialog", "iframe", "touch", "async", "hidden", or "none"');return null;}c(a);return a.dialog;}});FB.provide('UIServer',{Methods:{},_active:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',_forceHTTPS:false,_resizeInitialized:false,genericTransform:function(a){if(a.params.display=='dialog'||a.params.display=='iframe'){a.params.display='iframe';a.params.channel=FB.UIServer._xdChannelHandler(a.id,'parent.parent');}return a;},prepareCall:function(h,b){var g=h.method.toLowerCase(),f=FB.copy({},FB.UIServer.Methods[g]),e=FB.guid(),c=(f.noHttps!==true)&&(FB._https||(g!=='auth.status'&&g!='login.status'));FB.UIServer._forceHTTPS=c;FB.copy(h,{api_key:FB._apiKey,app_id:FB._apiKey,locale:FB._locale,sdk:'joey',access_token:c&&FB.getAccessToken()||undefined});h.display=FB.UIServer.getDisplayMode(f,h);if(!f.url)f.url='dialog/'+g;var a={cb:b,id:e,size:f.size||FB.UIServer.getDefaultSize(),url:FB.getDomain(c?'https_www':'www')+f.url,forceHTTPS:c,params:h,name:g,dialog:new FB.Dialog(e)};var j=f.transform?f.transform:FB.UIServer.genericTransform;if(j){a=j(a);if(!a)return;}var d=f.getXdRelation||FB.UIServer.getXdRelation;var i=d(a.params.display);if(!(a.id in FB.UIServer._defaultCb)&&!('next' in a.params))a.params.next=FB.UIServer._xdResult(a.cb,a.id,i,true);if(i==='parent')a.params.channel_url=FB.UIServer._xdChannelHandler(e,'parent.parent');a=FB.UIServer.prepareParams(a);return a;},prepareParams:function(a){var c=a.params.method;if(!FB.Canvas.isTabIframe())delete a.params.method;if(FB.TemplateUI&&FB.TemplateUI.supportsTemplate(c,a)){if(FB.reportTemplates)console.log("Using template for "+c+".");FB.TemplateUI.useCachedUI(c,a);}else{a.params=FB.JSON.flatten(a.params);var b=FB.QS.encode(a.params);if(FB.UIServer.urlTooLongForIE(a.url+b)){a.post=true;}else if(b)a.url+='?'+b;}return a;},urlTooLongForIE:function(a){return a.length>2000;},getDisplayMode:function(a,b){if(b.display==='hidden'||b.display==='none')return b.display;if(FB.Canvas.isTabIframe()&&b.display!=='popup')return 'async';if(FB.UA.mobile()||b.display==='touch')return 'touch';if(!FB._session&&b.display=='dialog'&&!a.loggedOutIframe){FB.log('"dialog" mode can only be used when the user is connected.');return 'popup';}if(a.connectDisplay&&!FB._inCanvas)return a.connectDisplay;return b.display||(FB._session?'dialog':'popup');},getXdRelation:function(a){if(a==='popup'||a==='touch')return 'opener';if(a==='dialog'||a==='iframe'||a==='hidden'||a==='none')return 'parent';if(a==='async')return 'parent.frames['+window.name+']';},popup:function(b){var a=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,i=typeof window.screenY!='undefined'?window.screenY:window.screenTop,g=typeof window.outerWidth!='undefined'?window.outerWidth:document.documentElement.clientWidth,f=typeof window.outerHeight!='undefined'?window.outerHeight:(document.documentElement.clientHeight-22),k=b.size.width,d=b.size.height,h=(a<0)?window.screen.width+a:a,e=parseInt(h+((g-k)/2),10),j=parseInt(i+((f-d)/2.5),10),c=('width='+k+',height='+d+',left='+e+',top='+j+',scrollbars=1');if(b.name&&(b.name=='permissions.request'||b.name=='permissions.oauth'))c+=',location=1,toolbar=0';if(b.post){FB.UIServer.setActiveNode(b,window.open('about:blank',b.id,c));FB.Content.submitToTarget({url:b.url,target:b.id,params:b.params});}else FB.UIServer.setActiveNode(b,window.open(b.url,b.id,c));if(b.id in FB.UIServer._defaultCb)FB.UIServer._popupMonitor();},setActiveNode:function(a,b){FB.UIServer._active[a.id]=b;if(a.params&&a.params.display=='iframe')b.fbCallID=a.id;},hidden:function(a){a.className='FB_UI_Hidden';a.root=FB.Content.appendHidden('');FB.UIServer._insertIframe(a);},iframe:function(a){if(a.root)return;a.className='FB_UI_Dialog';a.root=FB.Dialog.create({onClose:function(){FB.UIServer._triggerDefault(a.id);},loader:!a.hideLoader,loaderWidth:a.size.width,closeIcon:true});FB.Dom.addCss(a.root,'fb_dialog_iframe');var b=FB.Dialog._findRoot(a.root);FB.Dom.addCss(b,'loading');FB.UIServer._insertIframe(a);},async:function(a){a.frame=window.name;delete a.url;delete a.size;FB.Arbiter.inform('showDialog',a);},getDefaultSize:function(){if(FB.UA.mobile()){var a=window.innerWidth/window.innerHeight>1.2;return {width:window.innerWidth,height:Math.max(window.innerHeight,(a?screen.width:screen.height))};}return {width:575,height:240};},_insertIframe:function(b){FB.UIServer._active[b.id]=false;var a=function(c){if(b.id in FB.UIServer._active)FB.UIServer.setActiveNode(b,c);};if(b.post){FB.Content.insertIframe({url:'about:blank',root:b.root,className:b.className,width:b.size.width,height:b.size.height,onInsert:a,onload:function(c){FB.Content.submitToTarget({url:b.url,target:c.name,params:b.params});}});}else FB.Content.insertIframe({url:b.url,root:b.root,className:b.className,width:b.size.width,height:b.size.height,name:b.frameName,onInsert:a});},_adaptToOrientation:function(a){if(!FB.UA.mobile()||!FB.UIServer._active[a])return;FB.UIServer._active[a].style.width=FB.UIServer.getDefaultSize().width+'px';},_handleFirstResizeMessage:function(b){if(!FB.UA.mobile())return;var a="onorientationchange" in window?'orientationchange':'resize';window.addEventListener(a,function(){FB.UIServer._adaptToOrientation(b);});},_handleResizeMessage:function(b,a){var c=FB.UIServer._active[b];if(a.height)c.style.height=a.height+'px';if(a.width)c.style.width=a.width+'px';if(!FB.UIServer._resizeInitialized){FB.UIServer._handleFirstResizeMessage(b);FB.UIServer._resizeInitialized=true;}FB.Arbiter.inform('resize.ack',a||{},'parent.frames['+c.name+']',true);FB.Dialog.show(c);},_triggerDefault:function(a){FB.UIServer._xdRecv({frame:a},FB.UIServer._defaultCb[a]||function(){});},_popupMonitor:function(){var a;for(var b in FB.UIServer._active)if(FB.UIServer._active.hasOwnProperty(b)&&b in FB.UIServer._defaultCb){var c=FB.UIServer._active[b];try{if(c.tagName)continue;}catch(d){}try{if(c.closed){FB.UIServer._triggerDefault(b);}else a=true;}catch(e){}}if(a&&!FB.UIServer._popupInterval){FB.UIServer._popupInterval=window.setInterval(FB.UIServer._popupMonitor,100);}else if(!a&&FB.UIServer._popupInterval){window.clearInterval(FB.UIServer._popupInterval);FB.UIServer._popupInterval=null;}},_xdChannelHandler:function(b,c){var a=(FB.UIServer._forceHTTPS&&FB.UA.ie()!==7);return FB.XD.handler(function(d){var e=FB.UIServer._active[b];if(!e)return;if(d.type=='resize'){FB.UIServer._handleResizeMessage(b,d);}else if(d.type=='hide'){FB.Dialog.hide(e);}else if(d.type=='rendered'){var f=FB.Dialog._findRoot(e);FB.Dialog.show(f);FB.Dom.removeCss(f,'loading');}else if(d.type=='fireevent')FB.Event.fire(d.event);},c,true,null,a);},_xdNextHandler:function(a,b,d,c){if(c)FB.UIServer._defaultCb[b]=a;return FB.XD.handler(function(e){FB.UIServer._xdRecv(e,a);},d)+'&frame='+b;},_xdRecv:function(b,a){var c=FB.UIServer._active[b.frame];try{if(FB.Dom.containsCss(c,'FB_UI_Hidden')){window.setTimeout(function(){c.parentNode.parentNode.removeChild(c.parentNode);},3000);}else if(FB.Dom.containsCss(c,'FB_UI_Dialog')){FB.Dialog.remove(c);if(FB.TemplateUI&&FB.UA.mobile())FB.TemplateUI.populateCache();}}catch(d){}try{if(c.close){c.close();FB.UIServer._popupCount--;}}catch(e){}delete FB.UIServer._active[b.frame];delete FB.UIServer._defaultCb[b.frame];a(b);},_xdResult:function(a,b,d,c){return (FB.UIServer._xdNextHandler(function(e){a&&a(e.result&&e.result!=FB.UIServer._resultToken&&FB.JSON.parse(e.result));},b,d,c)+'&result='+encodeURIComponent(FB.UIServer._resultToken));}});
FB.provide('',{getLoginStatus:function(a,b){if(!FB._apiKey){FB.log('FB.getLoginStatus() called before calling FB.init().');return;}if(a)if(!b&&FB.Auth._loadState=='loaded'){if(FB._oauth){a({status:FB._userStatus,authResponse:FB._authResponse});}else a({status:FB._userStatus,session:FB._session});return;}else FB.Event.subscribe('FB.loginStatus',a);if(!b&&FB.Auth._loadState=='loading')return;FB.Auth._loadState='loading';var c=function(d){FB.Auth._loadState='loaded';FB.Event.fire('FB.loginStatus',d);FB.Event.clear('FB.loginStatus');};if(FB.UA.mobile()&&window.postMessage&&window.localStorage){FB.Auth.staticAuthCheck(c);}else if(FB._oauth){FB.ui({method:'login.status',display:'none'},c);}else FB.ui({method:'auth.status',display:'hidden'},c);},getSession:function(){if(FB._oauth)throw new Error('FB.getSession incompatible with OAuth2.');return FB._session;},getAuthResponse:function(){if(!FB._oauth)throw new Error('getAuthResponse called when OAuth2 support is '+'disabled.  Please fix.');return FB._authResponse;},getAccessToken:function(){if(FB._oauth){return (FB._authResponse&&FB._authResponse.accessToken)||null;}else return (FB._session&&FB._session.access_token)||null;},getUserID:function(){if(FB._oauth){return FB._userID;}else return (FB._session&&FB._session.uid)||0;},login:function(a,b){if(FB._oauth){if(b&&b.perms)throw new Error('OAuth2 specification states that \'perms\' '+'should now be called \'scope\'.  Please update.');FB.ui(FB.copy({method:'permissions.oauth',display:'popup'},b||{}),a);}else FB.ui(FB.copy({method:'permissions.request',display:'popup'},b||{}),a);},logout:function(a){FB.ui({method:'auth.logout',display:'hidden'},a);}});FB.provide('Auth',{_callbacks:[],_xdStorePath:'xd_localstorage/',staticAuthCheck:function(b){var a=FB.getDomain('https_staticfb');FB.Content.insertIframe({root:FB.Content.appendHidden(''),className:'FB_UI_Hidden',url:a+FB.Auth._xdStorePath,onload:function(f){var g=frames[f.name];var d=FB.guid();var e=false;var c=function(h){if(!e){e=true;FB.Auth._staticAuthHandler(b,h);}};FB.XD.handler(c,'parent',true,d);setTimeout(c,500);g.postMessage(FB.JSON.stringify({method:'getItem',params:['LoginInfo_'+FB._apiKey,true],returnCb:d}),a);}});},_staticAuthHandler:function(b,d){if(d&&d.data&&d.data.status&&d.data.status=='connected'){var c;var f=d.data.status;if(FB._oauth){var a=d.data.authResponse||null;c=FB.Auth.setAuthResponse(a,f);}else{var e=d.data.session||null;c=FB.Auth.setSession(e,f);}b&&b(c);}else if(FB._oauth){FB.ui({method:'login.status',display:'none'},b);}else FB.ui({method:'auth.status',display:'hidden'},b);},setSession:function(e,g){if(FB._oauth)throw new Error('FB.Auth.setSession incompatible with OAuth2.');var b=!FB._session&&e,c=FB._session&&!e,a=FB._session&&e&&FB._session.uid!=e.uid,f=b||c||(FB._session&&e&&FB._session.access_token!=e.access_token),h=g!=FB._userStatus;var d={session:e,status:g};FB._session=e;FB._userStatus=g;if(f&&FB.Cookie&&FB.Cookie.getEnabled())FB.Cookie.set(e);if(h)FB.Event.fire('auth.statusChange',d);if(c||a)FB.Event.fire('auth.logout',d);if(b||a)FB.Event.fire('auth.login',d);if(f)FB.Event.fire('auth.sessionChange',d);if(FB.Auth._refreshTimer){window.clearTimeout(FB.Auth._refreshTimer);delete FB.Auth._refreshTimer;}if(FB.Auth._loadState&&e&&e.expires)FB.Auth._refreshTimer=window.setTimeout(function(){FB.getLoginStatus(null,true);},1200000);return d;},setAuthResponse:function(a,g){if(!FB._oauth)throw new Error('FB.Auth.setAuthResponse only compatible with OAuth2.');var d=!FB._authResponse&&a,e=FB._authResponse&&!a,c=FB._authResponse&&a&&FB._authResponse.userID!=a.userID,b=d||e||c,h=g!=FB._userStatus;var f={authResponse:a,status:g};FB._authResponse=a;FB._userID=a&&a.userID||0;FB._userStatus=g;if(e||c)FB.Event.fire('auth.logout',f);if(d||c)FB.Event.fire('auth.login',f);if(b)FB.Event.fire('auth.authResponseChange',f);if(h)FB.Event.fire('auth.statusChange',f);if(FB.Auth._refreshTimer){window.clearTimeout(FB.Auth._refreshTimer);delete FB.Auth._refreshTimer;}if(FB.Auth._loadState&&a)FB.Auth._refreshTimer=window.setTimeout(function(){FB.getLoginStatus(null,true);},1200000);return f;},xdHandler:function(a,b,f,c,e,d){return FB.UIServer._xdNextHandler(FB.Auth.xdResponseWrapper(a,e,d),b,f,c);},xdResponseWrapper:function(a,c,b){return function(e){try{b=FB.JSON.parse(e.session);}catch(i){}if(b)c='connected';if(e&&e.fb_https&&!FB._https)FB._https=true;var h=FB.Auth.setSession(b||null,c);h.perms=e&&e.perms||null;if(e&&e.required_perms&&FB.UA.nativeApp()){var g=JSON.parse(e.required_perms);var d=[];FB.Array.forEach(g,function(k,j){d=d.concat(k);});var f=d.join(',');FB.login(a,{perms:f});}else a&&a(h);};},_getSessionOrigin:function(){return 1;},xdNewHandler:function(b,c,d,a){if(!FB._oauth)throw new Error('xdNewHandler should not be invoked unless '+'OAuth2 is being used.');return FB.UIServer._xdNextHandler(FB.Auth.xdNewResponseWrapper(b,a),c,d,true);},xdNewResponseWrapper:function(b,a){if(!FB._oauth)throw new Error('xdNewResponseWrapper should not be invoked unless '+'OAuth2 is being used.');return function(d){if(d.access_token){var e=FB.Auth.parseSignedRequest(d.signed_request);a={accessToken:d.access_token,userID:e.user_id,expiresIn:parseInt(d.expires_in,10),signedRequest:d.signed_request};FB.Auth.setAuthResponse(a,'connected');if(FB.Cookie.getEnabled()){var c=(new Date()).getTime()+1000*a.expiresIn;FB.Cookie.setSignedRequestCookie(d.signed_request,c);}}else if(!FB._authResponse&&a){FB.Auth.setAuthResponse(a,'connected');}else{var f;if(d.error&&d.error==='not_authorized'){f='not_authorized';}else f='unknown';FB.Auth.setAuthResponse(null,f);if(FB.Cookie.getEnabled())FB.Cookie.clearSignedRequestCookie();}if(d&&d.fb_https&&!FB._https)FB._https=true;response={authResponse:FB._authResponse,status:FB._userStatus};b&&b(response);};},getOrigin:function(){if(FB.UA.nativeApp()){return 3;}else if(FB._inMobileCanvas){return 2;}else return 1;},parseSignedRequest:function(d){if(!d)return null;var a=d.split('.',2);var c=a[1];var b=FB.Auth.base64URLDecode(c);return FB.JSON.parse(b);},base64URLDecode:function(j){j=j.replace(/\-/g,'+').replace(/\_/g,'/');if(j.length%4!==0){var m=4-j.length%4;for(var d=0;d<m;d++)j=j+'=';}var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var l="";var a,b,c="";var e,f,g,h="";for(var i=0;i<j.length;i+=4){e=k.indexOf(j.charAt(i));f=k.indexOf(j.charAt(i+1));g=k.indexOf(j.charAt(i+2));h=k.indexOf(j.charAt(i+3));a=(e<<2)|(f>>4);b=((f&15)<<4)|(g>>2);c=((g&3)<<6)|h;l=l+String.fromCharCode(a);if(g!=64)l=l+String.fromCharCode(b);if(h!=64)l=l+String.fromCharCode(c);a=b=c="";e=f=g=h="";}return unescape(l);}});FB.provide('UIServer.Methods',{'permissions.request':{size:{width:627,height:326},transform:function(a){if(!FB._apiKey){FB.log('FB.login() called before calling FB.init().');return;}if(FB._session&&!a.params.perms&&!a.params.auth_type){FB.log('FB.login() called when user is already connected.');a.cb&&a.cb({status:FB._userStatus,session:FB._session});return;}a=FB.UIServer.genericTransform(a);a.cb=FB.Auth.xdResponseWrapper(a.cb,FB._userStatus,FB._session);a.params.method='permissions.request';FB.copy(a.params,{fbconnect:FB._inCanvas?0:1,return_session:1,session_version:3});return a;}},'permissions.oauth':{url:'dialog/oauth',size:{width:627,height:326},transform:function(a){if(!FB._apiKey){FB.log('FB.login() called before FB.init().');return;}if(FB._authResponse&&!a.params.scope){FB.log('FB.login() called when user is already connected.');a.cb&&a.cb({status:FB._userStatus,authResponse:FB._authResponse});return;}var b=a.cb,c=a.id;delete a.cb;FB.copy(a.params,{client_id:FB._apiKey,redirect_uri:FB.Auth.xdNewHandler(b,c,'opener'),origin:FB.Auth.getOrigin(),response_type:'token,signed_request'});return a;}},'auth.logout':{url:'logout.php',transform:function(a){if(!FB._apiKey){FB.log('FB.logout() called before calling FB.init().');}else if(FB._oauth&&!FB._authResponse){FB.log('FB.logout() called without an access token.');}else if(!FB._oauth&&!FB._session){FB.log('FB.logout() called without a session.');}else{if(FB._oauth){a.params.next=FB.Auth.xdNewHandler(a.cb,a.id,'parent');}else a.params.next=FB.Auth.xdHandler(a.cb,a.id,'parent',false,'unknown');return a;}}},'auth.status':{url:'extern/login_status.php',transform:function(a){var b=a.cb,c=a.id,d=FB.Auth.xdHandler;delete a.cb;FB.copy(a.params,{no_session:d(b,c,'parent',false,'notConnected'),no_user:d(b,c,'parent',false,'unknown'),ok_session:d(b,c,'parent',false,'connected'),session_version:3,extern:FB._inCanvas?0:2,session_origin:FB.Auth._getSessionOrigin()});return a;}},'login.status':{url:'dialog/oauth',transform:function(a){var b=a.cb,c=a.id;delete a.cb;FB.copy(a.params,{client_id:FB._apiKey,redirect_uri:FB.Auth.xdNewHandler(b,c,'parent'),origin:FB.Auth.getOrigin(),response_type:'token,signed_request,code'});return a;}}});
FB.provide('Cookie',{_domain:null,_enabled:false,setEnabled:function(a){FB.Cookie._enabled=a;},getEnabled:function(){return FB.Cookie._enabled;},load:function(){var a=document.cookie.match('\\bfbs_'+FB._apiKey+'="([^;]*)\\b'),b;if(a){b=FB.QS.decode(a[1]);b.expires=parseInt(b.expires,10);FB.Cookie._domain=b.base_domain;}return b;},loadSignedRequest:function(){var a=document.cookie.match('\\bfbsr_'+FB._apiKey+'=([^;]*)\\b');if(!a)return null;return a[1];},setSignedRequestCookie:function(b,a){if(!FB._oauth)throw new Error('FB.Cookie.setSignedRequestCookie should only be '+'used with OAuth2.');if(!b)throw new Error('Value passed to FB.Cookie.setSignedRequestCookie '+'was empty.');if(!FB.Cookie.getEnabled())return;FB.Cookie.setRaw('fbsr_',b,a);},clearSignedRequestCookie:function(){if(!FB._oauth)throw new Error('FB.Cookie.setSignedRequestCookie should only be '+'used with OAuth2.');if(!FB.Cookie.getEnabled())return;FB.Cookie.setRaw('fbsr_','',0);},setRaw:function(c,e,d,a){var b=new Date(d*1000).toGMTString();document.cookie=c+FB._apiKey+'='+e+(e&&d===0?'':'; expires='+b)+'; path=/'+(a?'; domain=.'+a:'');},set:function(a){if(!a){FB.Cookie.clear();return;}FB.Cookie.setRaw('fbs_','"'+FB.QS.encode(a)+'"',a.expires,a.base_domain);FB.Cookie._domain=a.base_domain;},clear:function(){FB.Cookie.setRaw('fbs_','',0,FB.Cookie._domain);}});
FB.provide('Frictionless',{_allowedRecipients:{},_useFrictionless:false,_updateRecipients:function(){FB.Frictionless._allowedRecipients={};FB.api('/me/apprequestformerrecipients',function(a){if(!a||a.error)return;FB.Array.forEach(a.data,function(b){FB.Frictionless._allowedRecipients[b.recipient_id]=true;},false);});},init:function(){FB.Frictionless._useFrictionless=true;FB.Event.subscribe('auth.login',function(a){if(a.session)FB.Frictionless._updateRecipients();});},_processRequestResponse:function(a){return function(d){var c=d&&typeof d.frictionless_value!=='undefined';var e=d&&d.updated_frictionless;if(FB.Frictionless._useFrictionless&&(e||c)){FB.Frictionless._updateRecipients();if(c){var b=[];FB.Array.forEach(d.request_ids,function(f){b.push(f);},false);d.request_ids=b;}}a&&a(d);};},isAllowed:function(c){if(!c)return false;if(typeof c==='number'||typeof c==='string')return FB.Frictionless._allowedRecipients[c];var a=true;var b=false;FB.Array.forEach(c,function(d){a=a&&FB.Frictionless._allowedRecipients[d];b=true;},false);return a&&b;}});
FB.provide('',{initSitevars:{},init:function(a){a=FB.copy(a||{},{logging:true,status:true});FB._userID=0;FB._apiKey=a.appId||a.apiKey;FB._oauth=a.oauth;if(!a.logging&&window.location.toString().indexOf('fb_debug=1')<0)FB._logging=false;FB.XD.init(a.channelUrl);if(FB.UA.mobile()&&FB.TemplateUI&&a.useCachedDialogs!==false){FB.TemplateUI.init();FB.Event.subscribe('auth.sessionChange',FB.TemplateData.update);}if(a.reportTemplates)FB.reportTemplates=true;if(a.frictionlessRequests)FB.Frictionless.init();if(FB._apiKey){FB.Cookie.setEnabled(a.cookie);if(FB._oauth){if(a.authResponse){FB.Auth.setAuthResponse(a.authResponse,'connected');}else{var c=FB.Cookie.loadSignedRequest();var b=FB.Auth.parseSignedRequest(c);FB._userID=(b&&b.user_id)||0;}}else{a.session=a.session||FB.Cookie.load();FB.Auth.setSession(a.session,a.session?'connected':'unknown');}if(a.status)FB.getLoginStatus();}if(FB._inCanvas)FB.Canvas.init();FB.Event.subscribe('xfbml.parse',function(){FB.XFBML.IframeWidget.batchWidgetPipeRequests();});if(a.xfbml)window.setTimeout(function(){if(FB.XFBML)if(FB.initSitevars.parseXFBMLBeforeDomReady){FB.XFBML.parse();var d=window.setInterval(function(){FB.XFBML.parse();},100);FB.Dom.ready(function(){window.clearInterval(d);FB.XFBML.parse();});}else FB.Dom.ready(FB.XFBML.parse);},0);if(FB.Canvas&&FB.Canvas.EarlyFlush)FB.Canvas.EarlyFlush._maybeSample();}});
FB.provide('Canvas.EarlyFlush',{_sampleRate:0,_appIdsBlacklist:[],_links:[],COLLECT_AUTOMATIC:0,COLLECT_MANUAL:1,_collectionMode:0,addResource:function(a){if(!FB._inCanvas||!FB._apiKey)return;FB.Canvas.EarlyFlush._links.push(a);},setCollectionMode:function(a){if(!FB._inCanvas||!FB._apiKey)return false;if(a!=FB.Canvas.EarlyFlush.COLLECT_AUTOMATIC&&a!=FB.Canvas.EarlyFlush.COLLECT_MANUAL)return false;FB.Canvas.EarlyFlush._collectionMode=a;},_maybeSample:function(){if(!FB._inCanvas||!FB._apiKey||!FB.Canvas.EarlyFlush._sampleRate)return;if(window.name.indexOf('_fb_https')>-1)return;var a=Math.random();if(a>1/FB.Canvas.EarlyFlush._sampleRate)return;if(FB.Canvas.EarlyFlush._appIdsBlacklist=='*')return;if(FB.Array.indexOf(FB.Canvas.EarlyFlush._appIdsBlacklist,parseInt(FB._apiKey,10))!=-1)return;window.setTimeout(FB.Canvas.EarlyFlush._sample,30000);},_sample:function(){var b={object:'data',link:'href',script:'src'};if(FB.Canvas.EarlyFlush._collectionMode==FB.Canvas.EarlyFlush.COLLECT_AUTOMATIC)FB.Array.forEach(b,function(c,d){FB.Array.forEach(window.document.getElementsByTagName(d),function(e){if(e[c])FB.Canvas.EarlyFlush._links.push(e[c]);});});var a=FB.JSON.stringify(FB.Canvas.EarlyFlush._links);FB.api(FB._apiKey+'/staticresources','post',{urls:a});FB.Canvas.EarlyFlush._links=[];}});
FB.provide('CanvasInsights',{setDoneLoading:function(a){FB.Canvas.setDoneLoading(a);}});
FB.provide('UIServer.MobileIframableMethod',{transform:function(a){if(a.params.display==='touch'&&a.params.access_token&&window.postMessage){a.params.channel=FB.UIServer._xdChannelHandler(a.id,'parent');a.params.in_iframe=1;return a;}else return FB.UIServer.genericTransform(a);},getXdRelation:function(a){if(a==='touch'&&window.postMessage)return 'parent';return FB.UIServer.getXdRelation(a);}});FB.provide('UIServer.Methods',{'stream.share':{size:{width:575,height:380},url:'sharer.php',transform:function(a){if(!a.params.u)a.params.u=window.location.toString();return a;}},'fbml.dialog':{size:{width:575,height:300},url:'render_fbml.php',loggedOutIframe:true,transform:function(a){return a;}},'auth.logintofacebook':{size:{width:530,height:287},url:'login.php',transform:function(a){a.params.skip_api_login=1;var c=FB.UIServer.getXdRelation(a.params.display);var b=FB.UIServer._xdResult(a.cb,a.id,c,true);a.params.next=FB.getDomain(FB._https?'https_www':'www')+"login.php?"+FB.QS.encode({api_key:FB._apiKey,next:b,skip_api_login:1});return a;}},apprequests:{transform:function(a){a=FB.UIServer.MobileIframableMethod.transform(a);if(FB.Frictionless&&FB.Frictionless._useFrictionless){a.cb=FB.Frictionless._processRequestResponse(a.cb);a.hideLoader=FB.Frictionless.isAllowed(a.params.to);}return a;},getXdRelation:function(a){return FB.UIServer.MobileIframableMethod.getXdRelation(a);}},feed:FB.UIServer.MobileIframableMethod});
FB.provide('',{share:function(a){FB.log('FB.share() has been deprecated. Please use FB.ui() instead.');FB.ui({display:'popup',method:'stream.share',u:a});},publish:function(b,a){FB.log('FB.publish() has been deprecated. Please use FB.ui() instead.');b=b||{};FB.ui(FB.copy({display:'popup',method:'stream.publish',preview:1},b||{}),a);},addFriend:function(b,a){FB.log('FB.addFriend() has been deprecated. Please use FB.ui() instead.');FB.ui({display:'popup',id:b,method:'friend.add'},a);}});FB.UIServer.Methods['auth.login']=FB.UIServer.Methods['permissions.request'];
FB.provide('XFBML',{_renderTimeout:30000,parse:function(d,b){d=d||document.body;var c=1,e=function(){c--;if(c===0){b&&b();FB.Event.fire('xfbml.render');}};var a={};if(FB.XFBML._widgetPipeIsEnabled())FB.Array.forEach(FB.XFBML._tagInfos,function(f){if(f.supportsWidgetPipe){var h=f.xmlns?f.xmlns:'fb';var g=FB.XFBML._getDomElements(d,h,f.localName);a[f.localName]=g;FB.XFBML._widgetPipeEnabledTagCount+=g.length;}});FB.Array.forEach(FB.XFBML._tagInfos,function(g){if(!g.xmlns)g.xmlns='fb';var h;if(a[g.localName]!==undefined){h=a[g.localName];}else h=FB.XFBML._getDomElements(d,g.xmlns,g.localName);for(var f=0;f<h.length;f++){c++;FB.XFBML._processElement(h[f],g,e);}});FB.Event.fire('xfbml.parse');window.setTimeout(function(){if(c>0)FB.log(c+' XFBML tags failed to render in '+FB.XFBML._renderTimeout+'ms.');},FB.XFBML._renderTimeout);e();},registerTag:function(a){FB.XFBML._tagInfos.push(a);},shouldUseWidgetPipe:function(){if(!FB.XFBML._widgetPipeIsEnabled())return false;var a=FB.XFBML._widgetPipeEnabledTagCount>1;return a;},_processElement:function(dom,tagInfo,cb){var element=dom._element;if(element){element.subscribe('render',cb);element.process();}else{var processor=function(){var fn=eval(tagInfo.className);var getBoolAttr=function(attr){var attr=dom.getAttribute(attr);return (attr&&FB.Array.indexOf(['true','1','yes','on'],attr.toLowerCase())>-1);};var isLogin=false;var showFaces=true;var renderInIframe=false;if(tagInfo.className==='FB.XFBML.LoginButton'){addToProfile=(tagInfo.localName=='add-to-profile');renderInIframe=getBoolAttr('render-in-iframe');showFaces=addToProfile||getBoolAttr('show-faces')||getBoolAttr('show_faces');isLogin=addToProfile||renderInIframe||showFaces||getBoolAttr('oneclick');if(isLogin)fn=FB.XFBML.Login;}element=dom._element=new fn(dom);if(isLogin){var extraParams={show_faces:showFaces,add_to_profile:addToProfile};if(addToProfile)extraParams.width=300;var perms=dom.getAttribute('perms');if(perms)extraParams.perms=perms;element.setExtraParams(extraParams);}element.subscribe('render',cb);element.process();};if(FB.CLASSES[tagInfo.className.substr(3)]){processor();}else FB.log('Tag '+tagInfo.className+' was not found.');}},_getDomElements:function(a,e,d){var c=e+':'+d;if(FB.UA.firefox()){return a.getElementsByTagNameNS(document.body.namespaceURI,c);}else if(FB.UA.ie()<9){try{var docNamespaces=document.namespaces;if(docNamespaces&&docNamespaces[e]){var nodes=a.getElementsByTagName(d);if(!document.addEventListener||nodes.length>0)return nodes;}}catch(b){}return a.getElementsByTagName(c);}else return a.getElementsByTagName(c);},_tagInfos:[{localName:'activity',className:'FB.XFBML.Activity'},{localName:'add-profile-tab',className:'FB.XFBML.AddProfileTab'},{localName:'add-to-profile',className:'FB.XFBML.LoginButton'},{localName:'bookmark',className:'FB.XFBML.Bookmark'},{localName:'comments',className:'FB.XFBML.Comments'},{localName:'comments-count',className:'FB.XFBML.CommentsCount'},{localName:'connect-bar',className:'FB.XFBML.ConnectBar'},{localName:'fan',className:'FB.XFBML.Fan'},{localName:'like',className:'FB.XFBML.Like',supportsWidgetPipe:true},{localName:'like-box',className:'FB.XFBML.LikeBox'},{localName:'live-stream',className:'FB.XFBML.LiveStream'},{localName:'login',className:'FB.XFBML.Login'},{localName:'login-button',className:'FB.XFBML.LoginButton'},{localName:'facepile',className:'FB.XFBML.Facepile'},{localName:'friendpile',className:'FB.XFBML.Friendpile'},{localName:'name',className:'FB.XFBML.Name'},{localName:'profile-pic',className:'FB.XFBML.ProfilePic'},{localName:'question',className:'FB.XFBML.Question'},{localName:'read',className:'FB.XFBML.Read'},{localName:'recommendations',className:'FB.XFBML.Recommendations'},{localName:'registration',className:'FB.XFBML.Registration'},{localName:'send',className:'FB.XFBML.Send'},{localName:'serverfbml',className:'FB.XFBML.ServerFbml'},{localName:'share-button',className:'FB.XFBML.ShareButton'},{localName:'social-bar',className:'FB.XFBML.SocialBar'}],_widgetPipeEnabledTagCount:0,_widgetPipeIsEnabled:function(){return FB.widgetPipeEnabledApps&&FB.widgetPipeEnabledApps[FB._apiKey]!==undefined;}});(function(){try{if(document.namespaces&&!document.namespaces.item.fb)document.namespaces.add('fb');}catch(a){}}());
FB.provide('XFBML',{set:function(b,c,a){FB.log('FB.XFBML.set() has been deprecated.');b.innerHTML=c;FB.XFBML.parse(b,a);}});
FB.subclass('Waitable','Obj',function(){},{set:function(a){this.setProperty('value',a);},error:function(a){this.fire("error",a);},wait:function(a,b){if(b)this.subscribe('error',b);this.monitor('value',this.bind(function(){if(this.value!==undefined){a(this.value);return true;}}));}});
FB.subclass('Data.Query','Waitable',function(){if(!FB.Data.Query._c)FB.Data.Query._c=1;this.name='v_'+FB.Data.Query._c++;},{parse:function(a){var b=FB.String.format.apply(null,a),d=(/^select (.*?) from (\w+)\s+where (.*)$/i).exec(b);this.fields=this._toFields(d[1]);this.table=d[2];this.where=this._parseWhere(d[3]);for(var c=1;c<a.length;c++)if(FB.Type.isType(a[c],FB.Data.Query))a[c].hasDependency=true;return this;},toFql:function(){var a='select '+this.fields.join(',')+' from '+this.table+' where ';switch(this.where.type){case 'unknown':a+=this.where.value;break;case 'index':a+=this.where.key+'='+this._encode(this.where.value);break;case 'in':if(this.where.value.length==1){a+=this.where.key+'='+this._encode(this.where.value[0]);}else a+=this.where.key+' in ('+FB.Array.map(this.where.value,this._encode).join(',')+')';break;}return a;},_encode:function(a){return typeof(a)=='string'?FB.String.quote(a):a;},toString:function(){return '#'+this.name;},_toFields:function(a){return FB.Array.map(a.split(','),FB.String.trim);},_parseWhere:function(s){var re=(/^\s*(\w+)\s*=\s*(.*)\s*$/i).exec(s),result,value,type='unknown';if(re){value=re[2];if(/^(["'])(?:\\?.)*?\1$/.test(value)){value=eval(value);type='index';}else if(/^\d+\.?\d*$/.test(value))type='index';}if(type=='index'){result={type:'index',key:re[1],value:value};}else result={type:'unknown',value:s};return result;}});
FB.provide('Data',{query:function(c,a){var b=new FB.Data.Query().parse(arguments);FB.Data.queue.push(b);FB.Data._waitToProcess();return b;},waitOn:function(dependencies,callback){var result=new FB.Waitable(),count=dependencies.length;if(typeof(callback)=='string'){var s=callback;callback=function(args){return eval(s);};}FB.Array.forEach(dependencies,function(item){item.monitor('value',function(){var done=false;if(FB.Data._getValue(item)!==undefined){count--;done=true;}if(count===0){var value=callback(FB.Array.map(dependencies,FB.Data._getValue));result.set(value!==undefined?value:true);}return done;});});return result;},_getValue:function(a){return FB.Type.isType(a,FB.Waitable)?a.value:a;},_selectByIndex:function(a,d,b,e){var c=new FB.Data.Query();c.fields=a;c.table=d;c.where={type:'index',key:b,value:e};FB.Data.queue.push(c);FB.Data._waitToProcess();return c;},_waitToProcess:function(){if(FB.Data.timer<0)FB.Data.timer=setTimeout(FB.Data._process,10);},_process:function(){FB.Data.timer=-1;var c={},e=FB.Data.queue;FB.Data.queue=[];for(var a=0;a<e.length;a++){var b=e[a];if(b.where.type=='index'&&!b.hasDependency){FB.Data._mergeIndexQuery(b,c);}else c[b.name]=b;}var d={method:'fql.multiquery',queries:{}};FB.copy(d.queries,c,true,function(f){return f.toFql();});d.queries=FB.JSON.stringify(d.queries);FB.api(d,function(f){if(f.error_msg){FB.Array.forEach(c,function(g){g.error(Error(f.error_msg));});}else FB.Array.forEach(f,function(g){c[g.name].set(g.fql_result_set);});});},_mergeIndexQuery:function(a,d){var b=a.where.key,f=a.where.value;var e='index_'+a.table+'_'+b;var c=d[e];if(!c){c=d[e]=new FB.Data.Query();c.fields=[b];c.table=a.table;c.where={type:'in',key:b,value:[]};}FB.Array.merge(c.fields,a.fields);FB.Array.merge(c.where.value,[f]);c.wait(function(g){a.set(FB.Array.filter(g,function(h){return h[b]==f;}));});},timer:-1,queue:[]});
window.setTimeout(function(){var a=/(connect.facebook.net|facebook.com\/assets.php).*?#(.*)/;FB.Array.forEach(document.getElementsByTagName('script'),function(d){if(d.src){var b=a.exec(d.src);if(b){var c=FB.QS.decode(b[2]);FB.Array.forEach(c,function(f,e){if(f=='0')c[e]=0;});FB.init(c);}}});if(window.fbAsyncInit&&!window.fbAsyncInit.hasRun){window.fbAsyncInit.hasRun=true;fbAsyncInit();}},0);
FB.provide('UIServer.Methods',{'pay.prompt':{transform:function(a){var b=FB.XD.handler(function(c){a.cb(FB.JSON.parse(c.response));},'parent.frames['+(window.name||'iframe_canvas')+']');a.params.channel=b;FB.Arbiter.inform('Pay.Prompt',a.params);return false;}}});FB.provide('UIServer.Methods',{pay:{size:{width:555,height:120},noHttps:true,connectDisplay:'popup',transform:function(a){if(!FB._inCanvas){a.params.order_info=FB.JSON.stringify(a.params.order_info);return a;}var b=FB.XD.handler(function(c){a.cb(FB.JSON.parse(c.response));},'parent.frames['+(window.name||'iframe_canvas')+']');a.params.channel=b;a.params.uiserver=true;FB.Arbiter.inform('Pay.Prompt',a.params);return false;}}});
FB.Class('XFBML.Element',function(a){this.dom=a;},FB.copy({getAttribute:function(b,a,c){var d=(this.dom.getAttribute(b)||this.dom.getAttribute(b.replace(/-/g,'_'))||this.dom.getAttribute(b.replace(/-/g,'')));return d?(c?c(d):d):a;},_getBoolAttribute:function(b,a){return this.getAttribute(b,a,function(c){c=c.toLowerCase();return c=='true'||c=='1'||c=='yes'||c=='on';});},_getPxAttribute:function(b,a){return this.getAttribute(b,a,function(c){var d=parseInt(c.replace('px',''),10);if(isNaN(d)){return a;}else return d;});},_getAttributeFromList:function(c,b,a){return this.getAttribute(c,b,function(d){d=d.toLowerCase();if(FB.Array.indexOf(a,d)>-1){return d;}else return b;});},isValid:function(){for(var a=this.dom;a;a=a.parentNode)if(a==document.body)return true;},clear:function(){this.dom.innerHTML='';}},FB.EventProvider));
FB.subclass('XFBML.IframeWidget','XFBML.Element',null,{_iframeName:null,_showLoader:true,_refreshOnAuthChange:false,_allowReProcess:false,_fetchPreCachedLoader:false,_visibleAfter:'load',_widgetPipeEnabled:false,getUrlBits:function(){throw new Error('Inheriting class needs to implement getUrlBits().');},setupAndValidate:function(){return true;},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){if(!this._iframeName&&this._widgetPipeEnabled&&FB.XFBML.shouldUseWidgetPipe()){this._iframeName=this.generateWidgetPipeIframeName();FB.XFBML.IframeWidget.allWidgetPipeIframes[this._iframeName]=this;if(FB.XFBML.IframeWidget.masterWidgetPipeIframe===null)FB.XFBML.IframeWidget.masterWidgetPipeIframe=this;}return this._iframeName;},getIframeTitle:function(){},getChannelUrl:function(){if(!this._channelUrl){var a=this;this._channelUrl=FB.XD.handler(function(b){a.fire('xd.'+b.type,b);},'parent.parent',true);}return this._channelUrl;},getIframeNode:function(){return this.dom.getElementsByTagName('iframe')[0];},arbiterInform:function(event,a){if(!this.getIframeNode()){this.subscribe('iframe.onload',FB.bind(this.arbiterInform,this,event,a));return;}var b='parent.frames["'+this.getIframeNode().name+'"]';FB.Arbiter.inform(event,a,b,window.location.protocol=='https:');},process:function(a){if(this._done){if(!this._allowReProcess&&!a)return;this.clear();}else this._oneTimeSetup();this._done=true;if(!this.setupAndValidate()){this.fire('render');return;}if(this._showLoader)this._addLoader();FB.Dom.addCss(this.dom,'fb_iframe_widget');if(this._visibleAfter!='immediate'){FB.Dom.addCss(this.dom,'fb_hide_iframes');}else this.subscribe('iframe.onload',FB.bind(this.fire,this,'render'));var b=this.getSize()||{};var c=this.getFullyQualifiedURL();FB.Content.insertIframe({url:c,root:this.dom.appendChild(document.createElement('span')),name:this.getIframeName(),title:this.getIframeTitle(),className:FB._localeIsRtl?'fb_rtl':'fb_ltr',height:b.height,width:b.width,onload:FB.bind(this.fire,this,'iframe.onload')});},generateWidgetPipeIframeName:function(){FB.XFBML.IframeWidget.widgetPipeIframeCount++;return 'fb_iframe_'+FB.XFBML.IframeWidget.widgetPipeIframeCount;},getFullyQualifiedURL:function(){if(FB.XFBML.shouldUseWidgetPipe()&&this._widgetPipeEnabled)return this._getWidgetPipeShell();var b=this._getURL();if(!this._fetchPreCachedLoader)b+='?'+FB.QS.encode(this._getQS());if(b.length>2000){b='about:blank';var a=FB.bind(function(){this._postRequest();this.unsubscribe('iframe.onload',a);},this);this.subscribe('iframe.onload',a);}return b;},_getWidgetPipeShell:function(){return FB.getDomain('www')+'common/widget_pipe_shell.php';},_oneTimeSetup:function(){this.subscribe('xd.resize',FB.bind(this._handleResizeMsg,this));if(FB.getLoginStatus){this.subscribe('xd.refreshLoginStatus',FB.bind(FB.getLoginStatus,FB,function(){},true));this.subscribe('xd.logout',FB.bind(FB.logout,FB,function(){}));}if(this._refreshOnAuthChange)this._setupAuthRefresh();if(this._visibleAfter=='load')this.subscribe('iframe.onload',FB.bind(this._makeVisible,this));this.oneTimeSetup();},_makeVisible:function(){this._removeLoader();FB.Dom.removeCss(this.dom,'fb_hide_iframes');this.fire('render');},_setupAuthRefresh:function(){FB.getLoginStatus(FB.bind(function(b){var a=b.status;FB.Event.subscribe('auth.statusChange',FB.bind(function(c){if(!this.isValid())return;if(a=='unknown'||c.status=='unknown')this.process(true);a=c.status;},this));},this));},_handleResizeMsg:function(b){if(!this.isValid())return;var a=this.getIframeNode();a.style.height=b.height+'px';if(b.width)a.style.width=b.width+'px';a.style.border='none';this._makeVisible();},_addLoader:function(){if(!this._loaderDiv){FB.Dom.addCss(this.dom,'fb_iframe_widget_loader');this._loaderDiv=document.createElement('div');this._loaderDiv.className='FB_Loader';this.dom.appendChild(this._loaderDiv);}},_removeLoader:function(){if(this._loaderDiv){FB.Dom.removeCss(this.dom,'fb_iframe_widget_loader');if(this._loaderDiv.parentNode)this._loaderDiv.parentNode.removeChild(this._loaderDiv);this._loaderDiv=null;}},_getQS:function(){return FB.copy({api_key:FB._apiKey,locale:FB._locale,sdk:'joey',session_key:FB._session&&FB._session.session_key,ref:this.getAttribute('ref')},this.getUrlBits().params);},_getURL:function(){var a='www',b='';if(this._fetchPreCachedLoader){a='cdn';b='static/';}return FB.getDomain(a)+'plugins/'+b+this.getUrlBits().name+'.php';},_postRequest:function(){FB.Content.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()});}});FB.provide('XFBML.IframeWidget',{widgetPipeIframeCount:0,masterWidgetPipeIframe:null,allWidgetPipeIframes:{},batchWidgetPipeRequests:function(){if(!FB.XFBML.IframeWidget.masterWidgetPipeIframe)return;var a=FB.XFBML.IframeWidget._groupWidgetPipeDescriptions();var c={widget_pipe:FB.JSON.stringify(a),href:window.location,site:location.hostname,channel:FB.XFBML.IframeWidget.masterWidgetPipeIframe.getChannelUrl(),api_key:FB._apiKey,locale:FB._locale,sdk:'joey',session_key:FB._session&&FB._session.session_key};var b=FB.guid();FB.Content.insertIframe({url:'about:blank',root:document.getElementById('fb-root')||document.body,name:b,className:'fb_hidden',onload:function(){FB.Content.submitToTarget({url:FB._domain.www+'widget_pipe.php',target:b,params:c},true);}});},_groupWidgetPipeDescriptions:function(){var e={};for(var b in FB.XFBML.IframeWidget.allWidgetPipeIframes){var a=FB.XFBML.IframeWidget.allWidgetPipeIframes[b];var c=a.getUrlBits();var d={widget:c.name};FB.copy(d,c.params);e[b]=d;}return e;}});
FB.subclass('XFBML.Activity','XFBML.IframeWidget',null,{_visibleAfter:'load',_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute('border-color'),colorscheme:this.getAttribute('color-scheme'),filter:this.getAttribute('filter'),action:this.getAttribute('action'),font:this.getAttribute('font'),header:this._getBoolAttribute('header'),height:this._getPxAttribute('height',300),recommendations:this._getBoolAttribute('recommendations'),site:this.getAttribute('site',location.hostname),width:this._getPxAttribute('width',300)};return true;},getSize:function(){return {width:this._attr.width,height:this._attr.height};},getUrlBits:function(){return {name:'activity',params:this._attr};}});
FB.subclass('XFBML.ButtonElement','XFBML.Element',null,{_allowedSizes:['icon','small','medium','large','xlarge'],onClick:function(){throw new Error('Inheriting class needs to implement onClick().');},setupAndValidate:function(){return true;},getButtonMarkup:function(){return this.getOriginalHTML();},getOriginalHTML:function(){return this._originalHTML;},process:function(){if(!('_originalHTML' in this))this._originalHTML=FB.String.trim(this.dom.innerHTML);if(!this.setupAndValidate()){this.fire('render');return;}var d=this._getAttributeFromList('size','medium',this._allowedSizes),a='',b='';if(d=='icon'){a='fb_button_simple';}else{var c=FB._localeIsRtl?'_rtl':'';b=this.getButtonMarkup();a='fb_button'+c+' fb_button_'+d+c;}this.dom.innerHTML=('<a class="'+a+'">'+'<span class="fb_button_text">'+b+'</span>'+'</a>');this.dom.firstChild.onclick=FB.bind(this.onClick,this);this.fire('render');}});
FB.provide('Helper',{isUser:function(a){return a<2.2e+09||(a>=1e+14&&a<=100099999989999);},getLoggedInUser:function(){return FB.getUserID();},upperCaseFirstChar:function(a){if(a.length>0){return a.substr(0,1).toUpperCase()+a.substr(1);}else return a;},getProfileLink:function(c,b,a){a=a||(c?FB.getDomain('www')+'profile.php?id='+c.uid:null);if(a)b='<a class="fb_link" href="'+a+'">'+b+'</a>';return b;},invokeHandler:function(handler,scope,args){if(handler)if(typeof handler==='string'){eval(handler);}else if(handler.apply)handler.apply(scope,args||[]);},fireEvent:function(a,b){var c=b._attr.href;b.fire(a,c);FB.Event.fire(a,c,b);},executeFunctionByName:function(d){var a=Array.prototype.slice.call(arguments,1);var f=d.split(".");var c=f.pop();var b=window;for(var e=0;e<f.length;e++)b=b[f[e]];return b[c].apply(this,a);}});
FB.subclass('XFBML.AddProfileTab','XFBML.ButtonElement',null,{getButtonMarkup:function(){return FB.Intl._tx("Add Profile Tab on Facebook");},onClick:function(){FB.ui({method:'profile.addtab'},this.bind(function(a){if(a.tab_added)FB.Helper.invokeHandler(this.getAttribute('on-add'),this);}));}});
FB.subclass('XFBML.Bookmark','XFBML.ButtonElement',null,{getButtonMarkup:function(){return FB.Intl._tx("Bookmark on Facebook");},onClick:function(){FB.ui({method:'bookmark.add'},this.bind(function(a){if(a.bookmarked)FB.Helper.invokeHandler(this.getAttribute('on-add'),this);}));}});
FB.subclass('XFBML.Comments','XFBML.IframeWidget',null,{_visibleAfter:'immediate',_refreshOnAuthChange:true,setupAndValidate:function(){var a={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute('colorscheme'),numposts:this.getAttribute('num-posts',10),width:this._getPxAttribute('width',550),href:this.getAttribute('href'),permalink:this.getAttribute('permalink'),publish_feed:this.getAttribute('publish_feed')};if(!a.href){a.migrated=this.getAttribute('migrated');a.xid=this.getAttribute('xid');a.title=this.getAttribute('title',document.title);a.url=this.getAttribute('url',document.URL);a.quiet=this.getAttribute('quiet');a.reverse=this.getAttribute('reverse');a.simple=this.getAttribute('simple');a.css=this.getAttribute('css');a.notify=this.getAttribute('notify');if(!a.xid){var c=document.URL.indexOf('#');if(c>0){a.xid=encodeURIComponent(document.URL.substring(0,c));}else a.xid=encodeURIComponent(document.URL);}if(a.migrated)a.href='http://www.facebook.com/plugins/comments_v1.php?'+'app_id='+FB._apiKey+'&xid='+encodeURIComponent(a.xid)+'&url='+encodeURIComponent(a.url);}else{var b=this.getAttribute('fb_comment_id');if(!b){b=FB.QS.decode(document.URL.substring(document.URL.indexOf('?')+1)).fb_comment_id;if(b&&b.indexOf('#')>0)b=b.substring(0,b.indexOf('#'));}if(b){a.fb_comment_id=b;this.subscribe('render',FB.bind(function(){window.location.hash=this.getIframeNode().id;},this));}}this._attr=a;return true;},oneTimeSetup:function(){this.subscribe('xd.addComment',FB.bind(this._handleCommentMsg,this));this.subscribe('xd.commentCreated',FB.bind(this._handleCommentCreatedMsg,this));this.subscribe('xd.commentRemoved',FB.bind(this._handleCommentRemovedMsg,this));},getSize:function(){return {width:this._attr.width,height:200};},getUrlBits:function(){return {name:'comments',params:this._attr};},_handleCommentMsg:function(a){if(!this.isValid())return;FB.Event.fire('comments.add',{post:a.post,user:a.user,widget:this});},_handleCommentCreatedMsg:function(b){if(!this.isValid())return;var a={href:b.href,commentID:b.commentID,parentCommentID:b.parentCommentID};FB.Event.fire('comment.create',a);},_handleCommentRemovedMsg:function(b){if(!this.isValid())return;var a={href:b.href,commentID:b.commentID};FB.Event.fire('comment.remove',a);}});
FB.subclass('XFBML.CommentsCount','XFBML.Element',null,{process:function(){this._href=this.getAttribute('href',window.location.href);this._count=FB.Data._selectByIndex(['commentsbox_count'],'link_stat','url',this._href);FB.Dom.addCss(this.dom,'fb_comments_count_zero');this._count.wait(FB.bind(function(){var a=this._count.value[0].commentsbox_count;this.dom.innerHTML=FB.String.format('<span class="fb_comments_count">{0}</span>',a);if(a>0)FB.Dom.removeCss(this.dom,'fb_comments_count_zero');this.fire('render');},this));}});
FB.provide('Anim',{ate:function(c,g,d,b){d=!isNaN(parseFloat(d))&&d>=0?d:750;var e=40,f={},j={},a=null,h=c.style,i=setInterval(FB.bind(function(){if(!a)a=new Date().getTime();var k=1;if(d!=0)k=Math.min((new Date().getTime()-a)/d,1);FB.Array.forEach(g,FB.bind(function(o,m){if(!f[m]){var n=FB.Dom.getStyle(c,m);if(n===false)return;f[m]=this._parseCSS(n+'');}if(!j[m])j[m]=this._parseCSS(o.toString());var l='';FB.Array.forEach(f[m],function(q,p){if(isNaN(j[m][p].numPart)&&j[m][p].textPart=='?'){l=q.numPart+q.textPart;}else if(isNaN(q.numPart)){l=q.textPart;}else l+=(q.numPart+Math.ceil((j[m][p].numPart-q.numPart)*Math.sin(Math.PI/2*k)))+j[m][p].textPart+' ';});FB.Dom.setStyle(c,m,l);},this));if(k==1){clearInterval(i);if(b)b(c);}},this),e);},_parseCSS:function(a){var b=[];FB.Array.forEach(a.split(' '),function(d){var c=parseInt(d,10);b.push({numPart:c,textPart:d.replace(c,'')});});return b;}});
FB.provide('Insights',{impression:function(e,a){var b=FB.guid(),g="//ah8.facebook.com/impression.php/"+b+"/",c=new Image(1,1),f=[];if(!e.api_key&&FB._apiKey)e.api_key=FB._apiKey;for(var d in e)f.push(encodeURIComponent(d)+'='+encodeURIComponent(e[d]));g+='?'+f.join('&');if(a)c.onload=a;c.src=g;}});
FB.subclass('XFBML.ConnectBar','XFBML.Element',null,{_initialHeight:null,_initTopMargin:0,_picFieldName:'pic_square',_page:null,_displayed:false,_notDisplayed:false,_container:null,_animationSpeed:0,process:function(){FB.getLoginStatus(this.bind(function(a){FB.Event.monitor('auth.statusChange',this.bind(function(){if(this.isValid()&&FB._userStatus=='connected'){this._uid=FB.Helper.getLoggedInUser();FB.api({method:'Connect.shouldShowConnectBar'},this.bind(function(b){if(b!=2){this._animationSpeed=(b==0)?750:0;this._showBar();}else this._noRender();}));}else this._noRender();return false;}));}));},_showBar:function(){var a=FB.Data._selectByIndex(['first_name','profile_url',this._picFieldName],'user','uid',this._uid);var b=FB.Data._selectByIndex(['display_name'],'application','api_key',FB._apiKey);FB.Data.waitOn([a,b],FB.bind(function(c){c[0][0].site_name=c[1][0].display_name;if(!this._displayed){this._displayed=true;this._notDisplayed=false;this._renderConnectBar(c[0][0]);this.fire('render');FB.Insights.impression({lid:104,name:'widget_load'});this.fire('connectbar.ondisplay');FB.Event.fire('connectbar.ondisplay',this);FB.Helper.invokeHandler(this.getAttribute('on-display'),this);}},this));},_noRender:function(){if(this._displayed){this._displayed=false;this._closeConnectBar();}if(!this._notDisplayed){this._notDisplayed=true;this.fire('render');this.fire('connectbar.onnotdisplay');FB.Event.fire('connectbar.onnotdisplay',this);FB.Helper.invokeHandler(this.getAttribute('on-not-display'),this);}},_renderConnectBar:function(d){var b=document.createElement('div'),c=document.createElement('div');b.className='fb_connect_bar';c.className='fb_reset fb_connect_bar_container';c.appendChild(b);document.body.appendChild(c);this._container=c;this._initialHeight=Math.round(parseFloat(FB.Dom.getStyle(c,'height'))+parseFloat(FB.Dom.getStyle(c,'borderBottomWidth')));b.innerHTML=FB.String.format('<div class="fb_buttons">'+'<a href="#" class="fb_bar_close">'+'<img src="{1}" alt="{2}" title="{2}"/>'+'</a>'+'</div>'+'<a href="{7}" class="fb_profile" target="_blank">'+'<img src="{3}" alt="{4}" title="{4}"/>'+'</a>'+'{5}'+' <span>'+'<a href="{8}" class="fb_learn_more" target="_blank">{6}</a> &ndash; '+'<a href="#" class="fb_no_thanks">{0}</a>'+'</span>',FB.Intl._tx("No Thanks"),FB.getDomain('cdn')+FB.XFBML.ConnectBar.imgs.buttonUrl,FB.Intl._tx("Close"),d[this._picFieldName]||FB.getDomain('cdn')+FB.XFBML.ConnectBar.imgs.missingProfileUrl,FB.String.escapeHTML(d.first_name),FB.Intl._tx("Hi {firstName}. \u003cstrong>{siteName}\u003c\/strong> is using Facebook to personalize your experience.",{firstName:FB.String.escapeHTML(d.first_name),siteName:FB.String.escapeHTML(d.site_name)}),FB.Intl._tx("Learn More"),d.profile_url,FB.getDomain('www')+'sitetour/connect.php');var a=this;FB.Array.forEach(b.getElementsByTagName('a'),function(g){g.onclick=FB.bind(a._clickHandler,a);});this._page=document.body;var f=0;if(this._page.parentNode){f=Math.round((parseFloat(FB.Dom.getStyle(this._page.parentNode,'height'))-parseFloat(FB.Dom.getStyle(this._page,'height')))/2);}else f=parseInt(FB.Dom.getStyle(this._page,'marginTop'),10);f=isNaN(f)?0:f;this._initTopMargin=f;if(!window.XMLHttpRequest){c.className+=" fb_connect_bar_container_ie6";}else{c.style.top=(-1*this._initialHeight)+'px';FB.Anim.ate(c,{top:'0px'},this._animationSpeed);}var e={marginTop:this._initTopMargin+this._initialHeight+'px'};if(FB.UA.ie()){e.backgroundPositionY=this._initialHeight+'px';}else e.backgroundPosition='? '+this._initialHeight+'px';FB.Anim.ate(this._page,e,this._animationSpeed);},_clickHandler:function(a){a=a||window.event;var b=a.target||a.srcElement;while(b.nodeName!='A')b=b.parentNode;switch(b.className){case 'fb_bar_close':FB.api({method:'Connect.connectBarMarkAcknowledged'});FB.Insights.impression({lid:104,name:'widget_user_closed'});this._closeConnectBar();break;case 'fb_learn_more':case 'fb_profile':window.open(b.href);break;case 'fb_no_thanks':this._closeConnectBar();FB.api({method:'Connect.connectBarMarkAcknowledged'});FB.Insights.impression({lid:104,name:'widget_user_no_thanks'});FB.api({method:'auth.revokeAuthorization',block:true},this.bind(function(){this.fire('connectbar.ondeauth');FB.Event.fire('connectbar.ondeauth',this);FB.Helper.invokeHandler(this.getAttribute('on-deauth'),this);if(this._getBoolAttribute('auto-refresh',true))window.location.reload();}));break;}return false;},_closeConnectBar:function(){this._notDisplayed=true;var a={marginTop:this._initTopMargin+'px'};if(FB.UA.ie()){a.backgroundPositionY='0px';}else a.backgroundPosition='? 0px';var b=(this._animationSpeed==0)?0:300;FB.Anim.ate(this._page,a,b);FB.Anim.ate(this._container,{top:(-1*this._initialHeight)+'px'},b,function(c){c.parentNode.removeChild(c);});this.fire('connectbar.onclose');FB.Event.fire('connectbar.onclose',this);FB.Helper.invokeHandler(this.getAttribute('on-close'),this);}});FB.provide('XFBML.ConnectBar',{imgs:{buttonUrl:'images/facebook-widgets/close_btn.png',missingProfileUrl:'pics/q_silhouette.gif'}});
FB.subclass('XFBML.Facepile','XFBML.IframeWidget',null,{_visibleAfter:'load',_extraParams:{},setupAndValidate:function(){this._attr={href:this.getAttribute('href'),channel:this.getChannelUrl(),colorscheme:this.getAttribute('colorscheme','light'),max_rows:this.getAttribute('max-rows'),action:this.getAttribute('action','like'),tense:this.getAttribute('tense','past'),width:this._getPxAttribute('width',200),ref:this.getAttribute('ref'),size:this.getAttribute('size','small'),login_text:this.dom.innerHTML};this.clear();for(var a in this._extraParams)this._attr[a]=this._extraParams[a];return true;},setExtraParams:function(a){this._extraParams=a;},oneTimeSetup:function(){var a=FB._userStatus;FB.Event.subscribe('auth.statusChange',FB.bind(function(b){if(a=='connected'||b.status=='connected')this.process(true);a=b.status;},this));},getSize:function(){if(this._attr.size=='large')return {width:this._attr.width,height:90};return {width:this._attr.width,height:70};},getUrlBits:function(){return {name:'facepile',params:this._attr};}});
FB.subclass('XFBML.Fan','XFBML.IframeWidget',null,{_visibleAfter:'load',setupAndValidate:function(){this._attr={api_key:FB._apiKey,connections:this.getAttribute('connections','10'),css:this.getAttribute('css'),height:this._getPxAttribute('height'),id:this.getAttribute('profile-id'),logobar:this._getBoolAttribute('logo-bar'),name:this.getAttribute('name'),stream:this._getBoolAttribute('stream',true),width:this._getPxAttribute('width',300)};if(!this._attr.id&&!this._attr.name){FB.log('<fb:fan> requires one of the "id" or "name" attributes.');return false;}var a=this._attr.height;if(!a)if((!this._attr.connections||this._attr.connections==='0')&&!this._attr.stream){a=65;}else if(!this._attr.connections||this._attr.connections==='0'){a=375;}else if(!this._attr.stream){a=250;}else a=550;if(this._attr.logobar)a+=25;this._attr.height=a;return true;},getSize:function(){return {width:this._attr.width,height:this._attr.height};},getUrlBits:function(){return {name:'fan',params:this._attr};}});
FB.subclass('XFBML.Friendpile','XFBML.Facepile',null,{});
FB.subclass('XFBML.EdgeCommentWidget','XFBML.IframeWidget',function(a){this._iframeWidth=a.width+1;this._iframeHeight=a.height;this._attr={master_frame_name:a.masterFrameName};this.dom=a.commentNode;this.dom.style.top=a.relativeHeightOffset;if(a.relativeWidthOffset)if(FB._localeIsRtl){this.dom.style.right=a.relativeWidthOffset;}else this.dom.style.left=a.relativeWidthOffset;this.dom.style.zIndex=FB.XFBML.EdgeCommentWidget.NextZIndex++;FB.Dom.addCss(this.dom,'fb_edge_comment_widget');},{_visibleAfter:'load',_showLoader:false,getSize:function(){return {width:this._iframeWidth,height:this._iframeHeight};},getUrlBits:function(){return {name:'comment_widget_shell',params:this._attr};}});FB.provide('XFBML.EdgeCommentWidget',{NextZIndex:10000});
FB.subclass('XFBML.EdgeWidget','XFBML.IframeWidget',null,{_visibleAfter:'immediate',_showLoader:false,setupAndValidate:function(){FB.Dom.addCss(this.dom,'fb_edge_widget_with_comment');this._attr={channel_url:this.getChannelUrl(),debug:this._getBoolAttribute('debug'),href:this.getAttribute('href',window.location.href),is_permalink:this._getBoolAttribute('is-permalink'),node_type:this.getAttribute('node-type','link'),width:this._getWidgetWidth(),font:this.getAttribute('font'),layout:this._getLayout(),colorscheme:this.getAttribute('color-scheme'),action:this.getAttribute('action'),ref:this.getAttribute('ref'),show_faces:this._shouldShowFaces(),no_resize:this._getBoolAttribute('no_resize'),send:this.getAttribute('send'),url_map:this.getAttribute('url_map')};return true;},oneTimeSetup:function(){this.subscribe('xd.authPrompted',FB.bind(this._onAuthPrompt,this));this.subscribe('xd.edgeCreated',FB.bind(this._onEdgeCreate,this));this.subscribe('xd.edgeRemoved',FB.bind(this._onEdgeRemove,this));this.subscribe('xd.presentEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogPresentation,this));this.subscribe('xd.dismissEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogDismissal,this));this.subscribe('xd.hideEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogHide,this));this.subscribe('xd.showEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogShow,this));},getSize:function(){return {width:this._getWidgetWidth(),height:this._getWidgetHeight()};},_getWidgetHeight:function(){var b=this._getLayout();var e=this._shouldShowFaces()?'show':'hide';var d=this.getAttribute('send');var a=65+(d&&d!=='false'?25:0);var c={standard:{show:80,hide:35},box_count:{show:a,hide:a},button_count:{show:21,hide:21},simple:{show:20,hide:20}};return c[b][e];},_getWidgetWidth:function(){var e=this._getLayout();var g=this.getAttribute('send');var h=this._shouldShowFaces()?'show':'hide';var c=(this.getAttribute('action')==='recommend'?130:90)+(g&&g!=='false'?60:0);var b=this.getAttribute('action')==='recommend'?100:55;var i=this.getAttribute('action')==='recommend'?90:50;var f={standard:{show:450,hide:450},box_count:{show:b,hide:b},button_count:{show:c,hide:c},simple:{show:i,hide:i}};var d=f[e][h];var j=this._getPxAttribute('width',d);var a={standard:{min:225,max:900},box_count:{min:b,max:900},button_count:{min:c,max:900},simple:{min:49,max:900}};if(j<a[e].min){j=a[e].min;}else if(j>a[e].max)j=a[e].max;return j;},_getLayout:function(){return this._getAttributeFromList('layout','standard',['standard','button_count','box_count','simple']);},_shouldShowFaces:function(){return this._getLayout()==='standard'&&this._getBoolAttribute('show-faces',true);},_handleEdgeCommentDialogPresentation:function(b){if(!this.isValid())return;var a=document.createElement('span');this._commentSlave=this._createEdgeCommentWidget(b,a);this.dom.appendChild(a);this._commentSlave.process();this._commentWidgetNode=a;},_createEdgeCommentWidget:function(b,a){var c={commentNode:a,externalUrl:b.externalURL,width:400,height:225,masterFrameName:b.masterFrameName,layout:this._getLayout(),relativeHeightOffset:this._getHeightOffset(b),relativeWidthOffset:this._getWidthOffset(b)};return new FB.XFBML.EdgeCommentWidget(c);},_getHeightOffset:function(c){if(c&&c.preComputedHeightOffset)return parseInt(c.preComputedHeightOffset,10)+'px';var a=this._getLayout();var b={standard:'22px',button_count:'19px',box_count:'-5px',simple:'18px'};return b[a];},_getCommonEdgeCommentWidgetOpts:function(c,a,d,b){return {colorscheme:this._attr.colorscheme,commentNode:a,controllerID:c.controllerID,nodeImageURL:c.nodeImageURL,nodeRef:this._attr.ref,nodeTitle:c.nodeTitle,nodeURL:c.nodeURL,nodeSummary:c.nodeSummary,width:400,height:300,relativeHeightOffset:(b?this._getHeightOffset(c):this._getHeightOffset()),relativeWidthOffset:(d?this._getWidthOffset(c):this._getWidthOffset()),error:c.error,siderender:c.siderender};},_getWidthOffset:function(c){if(c&&c.preComputedWidthOffset)return parseInt(c.preComputedWidthOffset,10)+'px';var a=this._getLayout();var b={standard:'0px',box_count:'0px',button_count:'0px',simple:'0px'};return b[a];},_handleEdgeCommentDialogDismissal:function(a){if(this._commentWidgetNode){this.dom.removeChild(this._commentWidgetNode);delete this._commentWidgetNode;}},_handleEdgeCommentDialogHide:function(){if(this._commentWidgetNode)this._commentWidgetNode.style.display="none";},_handleEdgeCommentDialogShow:function(){if(this._commentWidgetNode)this._commentWidgetNode.style.display="block";},_fireEventAndInvokeHandler:function(b,a){FB.Helper.fireEvent(b,this);FB.Helper.invokeHandler(this.getAttribute(a),this,[this._attr.href]);},_onEdgeCreate:function(){this._fireEventAndInvokeHandler('edge.create','on-create');},_onEdgeRemove:function(){this._fireEventAndInvokeHandler('edge.remove','on-remove');},_onAuthPrompt:function(){this._fireEventAndInvokeHandler('auth.prompt','on-prompt');}});
FB.subclass('XFBML.SendButtonFormWidget','XFBML.EdgeCommentWidget',function(a){this._base(a);FB.Dom.addCss(this.dom,'fb_send_button_form_widget');FB.Dom.addCss(this.dom,a.colorscheme);FB.Dom.addCss(this.dom,(typeof a.siderender!='undefined'&&a.siderender)?'siderender':'');this._attr.nodeImageURL=a.nodeImageURL;this._attr.nodeRef=a.nodeRef;this._attr.nodeTitle=a.nodeTitle;this._attr.nodeURL=a.nodeURL;this._attr.nodeSummary=a.nodeSummary;this._attr.channel=this.getChannelUrl();this._attr.controllerID=a.controllerID;this._attr.colorscheme=a.colorscheme;this._attr.error=a.error;this._attr.siderender=a.siderender;},{_showLoader:true,getUrlBits:function(){return {name:'send_button_form_shell',params:this._attr};},oneTimeSetup:function(){this.subscribe('xd.messageSent',FB.bind(this._onMessageSent,this));},_onMessageSent:function(){FB.Event.fire('message.send',this._attr.nodeURL,this);}});
FB.subclass('XFBML.Send','XFBML.EdgeWidget',null,{setupAndValidate:function(){FB.Dom.addCss(this.dom,'fb_edge_widget_with_comment');this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute('font'),colorscheme:this.getAttribute('colorscheme','light'),href:this.getAttribute('href',window.location.href),ref:this.getAttribute('ref')};return true;},getUrlBits:function(){return {name:'send',params:this._attr};},_createEdgeCommentWidget:function(b,a){var c=this._getCommonEdgeCommentWidgetOpts(b,a);return new FB.XFBML.SendButtonFormWidget(c);},_getHeightOffset:function(){return '21px';},_getWidthOffset:function(){return '0px';},getSize:function(){return {width:FB.XFBML.Send.Dimensions.width,height:FB.XFBML.Send.Dimensions.height};}});FB.provide('XFBML.Send',{Dimensions:{width:56,height:25}});
FB.subclass('XFBML.Like','XFBML.EdgeWidget',null,{_widgetPipeEnabled:true,getUrlBits:function(){return {name:'like',params:this._attr};},_createEdgeCommentWidget:function(b,a){if('send' in this._attr&&'widget_type' in b&&b.widget_type=='send'){var c=this._getCommonEdgeCommentWidgetOpts(b,a,true,true);return new FB.XFBML.SendButtonFormWidget(c);}else return this._callBase("_createEdgeCommentWidget",b,a);},getIframeTitle:function(){return 'Like this content on Facebook.';}});
FB.subclass('XFBML.LikeBox','XFBML.IframeWidget',null,{_visibleAfter:'load',setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,connections:this.getAttribute('connections'),css:this.getAttribute('css'),height:this.getAttribute('height'),id:this.getAttribute('profile-id'),header:this._getBoolAttribute('header',true),name:this.getAttribute('name'),show_faces:this._getBoolAttribute('show-faces',true),stream:this._getBoolAttribute('stream',true),width:this._getPxAttribute('width',300),href:this.getAttribute('href'),colorscheme:this.getAttribute('colorscheme','light'),border_color:this.getAttribute('border_color')};if(this._getBoolAttribute('force_wall',false))this._attr.force_wall=true;if(this._attr.connections==='0'){this._attr.show_faces=false;}else if(this._attr.connections)this._attr.show_faces=true;if(!this._attr.id&&!this._attr.name&&!this._attr.href){FB.log('<fb:like-box> requires one of the "id" or "name" attributes.');return false;}var a=this._attr.height;if(!a)if(!this._attr.show_faces&&!this._attr.stream){a=62;}else{a=95;if(this._attr.show_faces)a+=163;if(this._attr.stream)a+=300;if(this._attr.header&&this._attr.header!=='0')a+=32;}this._attr.height=a;this.subscribe('xd.likeboxLiked',FB.bind(this._onLiked,this));this.subscribe('xd.likeboxUnliked',FB.bind(this._onUnliked,this));return true;},getSize:function(){return {width:this._attr.width,height:this._attr.height};},getUrlBits:function(){return {name:'likebox',params:this._attr};},_onLiked:function(){FB.Helper.fireEvent('edge.create',this);},_onUnliked:function(){FB.Helper.fireEvent('edge.remove',this);}});
FB.subclass('XFBML.LiveStream','XFBML.IframeWidget',null,{_visibleAfter:'load',setupAndValidate:function(){this._attr={height:this._getPxAttribute('height',500),hideFriendsTab:this.getAttribute('hide-friends-tab'),redesigned:this._getBoolAttribute('redesigned-stream'),width:this._getPxAttribute('width',400),xid:this.getAttribute('xid','default'),always_post_to_friends:this._getBoolAttribute('always-post-to-friends',false),via_url:this.getAttribute('via_url')};return true;},getSize:function(){return {width:this._attr.width,height:this._attr.height};},getUrlBits:function(){var a=this._attr.redesigned?'live_stream_box':'livefeed';return {name:a,params:this._attr};}});
FB.subclass('XFBML.Login','XFBML.Facepile',null,{_visibleAfter:'load',getSize:function(){return {width:this._attr.width,height:94};},getUrlBits:function(){return {name:'login',params:this._attr};}});
FB.subclass('XFBML.LoginButton','XFBML.ButtonElement',null,{setupAndValidate:function(){if(this._alreadySetup)return true;this._alreadySetup=true;this._attr={autologoutlink:this._getBoolAttribute('auto-logout-link'),length:this._getAttributeFromList('length','short',['long','short']),onlogin:this.getAttribute('on-login'),perms:this.getAttribute('perms'),registration_url:this.getAttribute('registration-url'),status:'unknown'};if(this._attr.autologoutlink)FB.Event.subscribe('auth.statusChange',FB.bind(this.process,this));if(this._attr.registration_url){FB.Event.subscribe('auth.statusChange',this._saveStatus(this.process,false));FB.getLoginStatus(this._saveStatus(this.process,false));}return true;},getButtonMarkup:function(){var a=this.getOriginalHTML();if(a)return a;if(!this._attr.registration_url){if(FB.getAccessToken()&&this._attr.autologoutlink){return FB.Intl._tx("Facebook Logout");}else return this._getLoginText();}else switch(this._attr.status){case 'unknown':return this._getLoginText();case 'notConnected':return FB.Intl._tx("Register");case 'connected':if(FB.getAccessToken()&&this._attr.autologoutlink)return FB.Intl._tx("Facebook Logout");return this._getLoginText();default:FB.log('Unknown status: '+this.status);return FB.Intl._tx("Log In");}},_getLoginText:function(){return this._attr.length=='short'?FB.Intl._tx("Log In"):FB.Intl._tx("Log In with Facebook");},onClick:function(){if(!this._attr.registration_url){if(!FB.getAccessToken()||!this._attr.autologoutlink){FB.login(FB.bind(this._authCallback,this),{perms:this._attr.perms});}else FB.logout(FB.bind(this._authCallback,this));}else switch(this._attr.status){case 'unknown':FB.ui({method:'auth.logintoFacebook'},FB.bind(function(a){FB.bind(FB.getLoginStatus(this._saveStatus(this._authCallback,true),true),this);},this));break;case 'notConnected':window.top.location=this._attr.registration_url;break;case 'connected':if(!FB.getAccessToken()||!this._attr.autologoutlink){this._authCallback();}else FB.logout(FB.bind(this._authCallback,this));break;default:FB.log('Unknown status: '+this.status);}},_authCallback:function(a){FB.Helper.invokeHandler(this._attr.onlogin,this,[a]);},_saveStatus:function(a,b){return FB.bind(function(c){if(b&&this._attr.registration_url&&this._attr.status=='notConnected'&&c.status=='notConnected')window.top.location=this._attr.registration_url;this._attr.status=c.status;if(a){a=this.bind(a,this);return a(c);}},this);}});
FB.subclass('XFBML.Name','XFBML.Element',null,{process:function(){FB.copy(this,{_uid:this.getAttribute('uid'),_firstnameonly:this._getBoolAttribute('first-name-only'),_lastnameonly:this._getBoolAttribute('last-name-only'),_possessive:this._getBoolAttribute('possessive'),_reflexive:this._getBoolAttribute('reflexive'),_objective:this._getBoolAttribute('objective'),_linked:this._getBoolAttribute('linked',true),_subjectId:this.getAttribute('subject-id')});if(!this._uid){FB.log('"uid" is a required attribute for <fb:name>');this.fire('render');return;}var b=[];if(this._firstnameonly){b.push('first_name');}else if(this._lastnameonly){b.push('last_name');}else b.push('name');if(this._subjectId){b.push('sex');if(this._subjectId==FB.Helper.getLoggedInUser())this._reflexive=true;}var a;FB.Event.monitor('auth.statusChange',this.bind(function(){if(!this.isValid()){this.fire('render');return true;}if(!this._uid||this._uid=='loggedinuser')this._uid=FB.Helper.getLoggedInUser();if(!this._uid)return;if(FB.Helper.isUser(this._uid)){a=FB.Data._selectByIndex(b,'user','uid',this._uid);}else a=FB.Data._selectByIndex(['name','id'],'profile','id',this._uid);a.wait(this.bind(function(c){if(this._subjectId==this._uid){this._renderPronoun(c[0]);}else this._renderOther(c[0]);this.fire('render');}));}));},_renderPronoun:function(b){var c='',a=this._objective;if(this._subjectId){a=true;if(this._subjectId===this._uid)this._reflexive=true;}if(this._uid==FB.Connect.get_loggedInUser()&&this._getBoolAttribute('use-you',true)){if(this._possessive){if(this._reflexive){c='your own';}else c='your';}else if(this._reflexive){c='yourself';}else c='you';}else switch(b.sex){case 'male':if(this._possessive){c=this._reflexive?'his own':'his';}else if(this._reflexive){c='himself';}else if(a){c='him';}else c='he';break;case 'female':if(this._possessive){c=this._reflexive?'her own':'her';}else if(this._reflexive){c='herself';}else if(a){c='her';}else c='she';break;default:if(this._getBoolAttribute('use-they',true)){if(this._possessive){if(this._reflexive){c='their own';}else c='their';}else if(this._reflexive){c='themselves';}else if(a){c='them';}else c='they';}else if(this._possessive){if(this._reflexive){c='his/her own';}else c='his/her';}else if(this._reflexive){c='himself/herself';}else if(a){c='him/her';}else c='he/she';break;}if(this._getBoolAttribute('capitalize',false))c=FB.Helper.upperCaseFirstChar(c);this.dom.innerHTML=c;},_renderOther:function(c){var b='',a='';if(this._uid==FB.Helper.getLoggedInUser()&&this._getBoolAttribute('use-you',true)){if(this._reflexive){if(this._possessive){b='your own';}else b='yourself';}else if(this._possessive){b='your';}else b='you';}else if(c){if(null===c.first_name)c.first_name='';if(null===c.last_name)c.last_name='';if(this._firstnameonly&&c.first_name!==undefined){b=FB.String.escapeHTML(c.first_name);}else if(this._lastnameonly&&c.last_name!==undefined)b=FB.String.escapeHTML(c.last_name);if(!b)b=FB.String.escapeHTML(c.name);if(b!==''&&this._possessive)b+='\'s';}if(!b)b=FB.String.escapeHTML(this.getAttribute('if-cant-see','Facebook User'));if(b){if(this._getBoolAttribute('capitalize',false))b=FB.Helper.upperCaseFirstChar(b);if(c&&this._linked){a=FB.Helper.getProfileLink(c,b,this.getAttribute('href',null));}else a=b;}this.dom.innerHTML=a;}});
FB.subclass('XFBML.ProfilePic','XFBML.Element',null,{process:function(){var d=this.getAttribute('size','thumb'),b=FB.XFBML.ProfilePic._sizeToPicFieldMap[d],g=this._getPxAttribute('width'),a=this._getPxAttribute('height'),e=this.dom.style,f=this.getAttribute('uid');if(this._getBoolAttribute('facebook-logo'))b+='_with_logo';if(g){g=g+'px';e.width=g;}if(a){a=a+'px';e.height=a;}var c=this.bind(function(j){var l=j?j[0]:null,i=l?l[b]:null;if(!i)i=FB.getDomain('cdn')+FB.XFBML.ProfilePic._defPicMap[b];var k=((g?'width:'+g+';':'')+(a?'height:'+g+';':'')),h=FB.String.format('<img src="{0}" alt="{1}" title="{1}" style="{2}" class="{3}" />',i,l?FB.String.escapeHTML(l.name):'',k,this.dom.className);if(this._getBoolAttribute('linked',true))h=FB.Helper.getProfileLink(l,h,this.getAttribute('href',null));this.dom.innerHTML=h;FB.Dom.addCss(this.dom,'fb_profile_pic_rendered');this.fire('render');});FB.Event.monitor('auth.statusChange',this.bind(function(){if(!this.isValid()){this.fire('render');return true;}if(this.getAttribute('uid',null)=='loggedinuser')f=FB.Helper.getLoggedInUser();if(FB._userStatus&&f){FB.Data._selectByIndex(['name',b],FB.Helper.isUser(f)?'user':'profile',FB.Helper.isUser(f)?'uid':'id',f).wait(c);}else c();}));}});FB.provide('XFBML.ProfilePic',{_defPicMap:{pic:'pics/s_silhouette.jpg',pic_big:'pics/d_silhouette.gif',pic_big_with_logo:'pics/d_silhouette_logo.gif',pic_small:'pics/t_silhouette.jpg',pic_small_with_logo:'pics/t_silhouette_logo.gif',pic_square:'pics/q_silhouette.gif',pic_square_with_logo:'pics/q_silhouette_logo.gif',pic_with_logo:'pics/s_silhouette_logo.gif'},_sizeToPicFieldMap:{n:'pic_big',normal:'pic_big',q:'pic_square',s:'pic',small:'pic',square:'pic_square',t:'pic_small',thumb:'pic_small'}});
FB.subclass('XFBML.Question','XFBML.IframeWidget',null,{_visibleAfter:'load',setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,permalink:this.getAttribute('permalink'),width:this.getAttribute('width',400),height:0};return true;},getSize:function(){return {width:this._attr.width,height:this._attr.height};},getUrlBits:function(){return {name:'question',params:this._attr};}});
FB.subclass('XFBML.Read','XFBML.IframeWidget',null,{getUrlBits:function(){return {name:'read',params:this._attr};},setupAndValidate:function(){function b(h,g){var i=0;var j=null;function k(){g();j=null;i=(new Date()).getTime();}return function(){if(!j){var l=(new Date()).getTime();if(l-i<h){j=window.setTimeout(k,h-(l-i));}else k();}return true;};}function e(h){if(h!='manual'&&h!='onvisible'){var g=h.match(/^\d+(?:\.\d+)?%$/)?parseInt(h,10):80;g=Math.min(Math.max(g,0),100);h=g/100;}return h;}this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute('font'),colorscheme:this.getAttribute('colorscheme','light'),href:this.getAttribute('href',window.location.href),ref:this.getAttribute('ref'),trigger:e(this.getAttribute('trigger','')),mintime:parseInt(this.getAttribute('mintime'),10)||30};this._showLoader=false;this.subscribe('iframe.onload',FB.bind(function(){var g=this.dom.firstElementChild;g.style.position="fixed";g.style.bottom="0";g.style.right="10px";},this));var a=FB.bind(function(){FB.Event.unlisten(window,'scroll',a);FB.Event.unlisten(document.documentElement,'click',a);FB.Event.unlisten(document.documentElement,'mousemove',a);window.setTimeout(FB.bind(this.arbiterInform,this,'platform/plugins/read/action'),this._attr.mintime*1000);return true;},this);FB.Event.listen(window,'scroll',a);FB.Event.listen(document.documentElement,'click',a);FB.Event.listen(document.documentElement,'mousemove',a);if(this._attr.trigger=="manual"){var c=FB.bind(function(g){if(g==this._attr.href){FB.Event.unsubscribe('xfbml.read.read',c);this.arbiterInform('platform/plugins/read/trigger');}return true;},this);FB.Event.subscribe('xfbml.read.read',c);}else{var d=b(500,FB.bind(function(){if(this.calculateVisibility()){FB.Event.unlisten(window,'scroll',d);FB.Event.unlisten(window,'resize',d);this.arbiterInform('platform/plugins/read/trigger');}return true;},this));FB.Event.listen(window,'scroll',d);FB.Event.listen(window,'resize',d);d();}this.visible=false;var f=b(500,FB.bind(function(){if(!this.visible&&this.calculateVisibility()){this.visible=true;this.arbiterInform('platform/plugins/read/visible');}else if(this.visible&&!this.calculateVisibility()){this.visible=false;this.arbiterInform('platform/plugins/read/invisible');}return true;},this));FB.Event.listen(window,'scroll',f);FB.Event.listen(window,'resize',f);f();return true;},getSize:function(){return {height:24,width:300};},calculateVisibility:function(){var b=document.documentElement.clientHeight;switch(this._attr.trigger){case "manual":return false;case "onvisible":var a=this.dom.getBoundingClientRect().top;return a<=b;default:var d=window.scrollY+b;var c=document.documentElement.scrollHeight;return d/c>=this._attr.trigger;}}});FB.XFBML.Read.markRead=function(a){FB.Event.fire('xfbml.read.read',a||window.location.href);};
FB.subclass('XFBML.Recommendations','XFBML.IframeWidget',null,{_visibleAfter:'load',_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute('border-color'),colorscheme:this.getAttribute('color-scheme'),filter:this.getAttribute('filter'),font:this.getAttribute('font'),action:this.getAttribute('action'),header:this._getBoolAttribute('header'),height:this._getPxAttribute('height',300),site:this.getAttribute('site',location.hostname),width:this._getPxAttribute('width',300)};return true;},getSize:function(){return {width:this._attr.width,height:this._attr.height};},getUrlBits:function(){return {name:'recommendations',params:this._attr};}});
FB.subclass('XFBML.Registration','XFBML.IframeWidget',null,{_visibleAfter:'immediate',_baseHeight:167,_fieldHeight:28,_skinnyWidth:520,_skinnyBaseHeight:173,_skinnyFieldHeight:52,setupAndValidate:function(){this._attr={action:this.getAttribute('action'),border_color:this.getAttribute('border-color'),channel_url:this.getChannelUrl(),client_id:FB._apiKey,fb_only:this._getBoolAttribute('fb-only',false),fb_register:this._getBoolAttribute('fb-register',false),fields:this.getAttribute('fields'),height:this._getPxAttribute('height'),redirect_uri:this.getAttribute('redirect-uri',window.location.href),no_footer:this._getBoolAttribute('no-footer'),no_header:this._getBoolAttribute('no-header'),onvalidate:this.getAttribute('onvalidate'),width:this._getPxAttribute('width',600)};if(this._attr.onvalidate)this.subscribe('xd.validate',this.bind(function(b){var d=FB.JSON.parse(b.value);var a=this.bind(function(e){FB.Arbiter.inform('Registration.Validation',{errors:e,id:b.id},'parent.frames["'+this.getIframeNode().name+'"]',window.location.protocol=='https:');});var c=FB.Helper.executeFunctionByName(this._attr.onvalidate,d,a);if(c)a(c);}));this.subscribe('xd.authLogin',FB.bind(this._onAuthLogin,this));this.subscribe('xd.authLogout',FB.bind(this._onAuthLogout,this));return true;},getSize:function(){return {width:this._attr.width,height:this._getHeight()};},_getHeight:function(){if(this._attr.height)return this._attr.height;var b;if(!this._attr.fields){b=['name'];}else try{b=FB.JSON.parse(this._attr.fields);}catch(a){b=this._attr.fields.split(/,/);}if(this._attr.width<this._skinnyWidth){return this._skinnyBaseHeight+b.length*this._skinnyFieldHeight;}else return this._baseHeight+b.length*this._fieldHeight;},getUrlBits:function(){return {name:'registration',params:this._attr};},_onAuthLogin:function(){if(!FB.getSession())FB.getLoginStatus();FB.Helper.fireEvent('auth.login',this);},_onAuthLogout:function(){if(!FB.getSession())FB.getLoginStatus();FB.Helper.fireEvent('auth.logout',this);}});
FB.subclass('XFBML.ServerFbml','XFBML.IframeWidget',null,{_visibleAfter:'resize',setupAndValidate:function(){this._attr={channel_url:this.getChannelUrl(),fbml:this.getAttribute('fbml'),width:this._getPxAttribute('width')};if(!this._attr.fbml){var a=this.dom.getElementsByTagName('script')[0];if(a&&a.type==='text/fbml')this._attr.fbml=a.innerHTML;}if(!this._attr.fbml){FB.log('<fb:serverfbml> requires the "fbml" attribute.');return false;}return true;},getSize:function(){return {width:this._attr.width,height:this._attr.height};},getUrlBits:function(){return {name:'serverfbml',params:this._attr};}});
FB.subclass('XFBML.ShareButton','XFBML.Element',null,{process:function(){this._href=this.getAttribute('href',window.location.href);this._type=this.getAttribute('type','icon_link');FB.Dom.addCss(this.dom,'fb_share_count_hidden');this._renderButton(true);},_renderButton:function(h){if(!this.isValid()){this.fire('render');return;}var d='',e='',f='',c='',g=FB.Intl._tx("Share"),i='';switch(this._type){case 'icon':case 'icon_link':c='fb_button_simple';d=('<span class="fb_button_text">'+(this._type=='icon_link'?g:'&nbsp;')+'</span>');h=false;break;case 'link':d=FB.Intl._tx("Share on Facebook");h=false;break;case 'button':d='<span class="fb_button_text">'+g+'</span>';c='fb_button fb_button_small';h=false;break;case 'button_count':d='<span class="fb_button_text">'+g+'</span>';e=('<span class="fb_share_count_nub_right">&nbsp;</span>'+'<span class="fb_share_count fb_share_count_right">'+this._getCounterMarkup()+'</span>');c='fb_button fb_button_small';break;default:d='<span class="fb_button_text">'+g+'</span>';f=('<span class="fb_share_count_nub_top">&nbsp;</span>'+'<span class="fb_share_count fb_share_count_top">'+this._getCounterMarkup()+'</span>');c='fb_button fb_button_small';i='fb_share_count_wrapper';}var b=FB.guid();this.dom.innerHTML=FB.String.format('<span class="{0}">{4}<a id="{1}" class="{2}" '+'target="_blank">{3}</a>{5}</span>',i,b,c,d,f,e);var a=document.getElementById(b);a.href=this._href;a.onclick=function(){FB.ui({method:'stream.share',u:this.href});return false;};if(!h)this.fire('render');},_getCounterMarkup:function(){if(!this._count)this._count=FB.Data._selectByIndex(['total_count'],'link_stat','url',this._href);var b='0';if(this._count.value!==undefined){if(this._count.value.length>0){var a=this._count.value[0].total_count;if(a>3){FB.Dom.removeCss(this.dom,'fb_share_count_hidden');b=a>=1e+07?Math.round(a/1e+06)+'M':(a>=10000?Math.round(a/1000)+'K':a);}}}else this._count.wait(FB.bind(this._renderButton,this,false));return '<span class="fb_share_count_inner">'+b+'</span>';}});
FB.subclass('XFBML.SocialBar','XFBML.EdgeWidget',function(a){if(FB.XFBML.SocialBar.oInstance)return FB.XFBML.SocialBar.oInstance;this.dom=a;FB.XFBML.SocialBar.oInstance=this;return this;},{_fetchPreCachedLoader:false,_showLoader:false,_initialWidth:860,_initialHeight:34,_barIframe:null,_currentZ:0,_refreshOnAuthChange:true,_visibleAfter:'load',_getPageWidth:function(){var a=this._barIframe;var b=parseInt(FB.Dom.getStyle(a.parentNode,'width'),10);if(isNaN(b))b=parseInt(a.parentNode.offsetWidth,10);return b;},_minimizeToolbar:function(c){var a=this._barIframe;c.resetWidth=false;var d=300;if(c.width=='100%'){c.resetWidth=true;c.width=this._getPageWidth();}if(a.offsetWidth!=c.width){FB.Anim.ate(a,{width:c.width+'px'},d,function(e){if(c.resetWidth)FB.Dom.setStyle(e,'width','100%');});var b=this.dom.getElementsByTagName('iframe');FB.Array.forEach(b,function(e){if(e.parentNode.id=='fb_social_bar_container')return;if(!e._isHidden){e._origHeight=parseInt(FB.Dom.getStyle(e,'height'),10);e._origWidth=parseInt(FB.Dom.getStyle(e,'width'),10);e._origRight=parseInt(FB.Dom.getStyle(e,'right'),10);e._origLeft=parseInt(FB.Dom.getStyle(e,'left'),10);e._isHidden=true;FB.Anim.ate(e,{height:'0px',width:'0px',right:c.width+'px',left:(a.offsetWidth-c.width)+'px',opacity:0},d);}else{FB.Anim.ate(e,{height:e._isClosed?'0px':e._origHeight+'px',width:e._origWidth+'px',right:e._origRight+'px',left:e._origLeft+'px',opacity:100},d);e._isHidden=false;}});}},_spawnChild:function(f){var d=this._barIframe,i,g,h=document.createElement('i');if(!f.position||f.position!='left'){g=parseInt(FB.Dom.getStyle(d.parentNode,'paddingRight'),10)+(f.position?0:parseInt(f.minimizeWidth,10));i='right';}else{g=parseInt(FB.Dom.getStyle(d.parentNode,'paddingLeft'),10)+parseInt(f.offsetLeft?f.offsetLeft:0,10);i='left';}if(f.name in window.frames){var e=this.dom.getElementsByTagName?this.dom.getElementsByTagName('iframe'):document.getElementsByTagName('iframe');for(var c=0;c<e.length;c++){var b=e[c];if(b.name==f.name){b.style.width=f.width;b._isClosed=false;FB.Anim.ate(b,{height:f.height,opacity:100});}}}else{d.parentNode.appendChild(h);var a=this;FB.Content.insertIframe({root:h,name:f.name,url:f.src,className:'fb_social_bar_iframe',width:parseInt(f.width,10),height:0,onload:function(j){j.style.position='absolute';j.style[a._attr.position]=a._initialHeight+'px';j.style.height='0px';j.style[i]=g+'px';j.style.zIndex=++a._currentZ;FB.Dom.setStyle(j,'opacity',0);FB.Anim.ate(j,{height:f.height,opacity:100});j._isClosed=false;}});}FB.Array.forEach(document.getElementsByTagName('object'),function(j){FB.Dom.setStyle(j,'visibility','hidden');});},_closeChild:function(c){var b=this.dom.getElementsByTagName?this.dom.getElementsByTagName('iframe'):document.getElementsByTagName('iframe');var d=function(e){if(c.remove)e.parentNode.parentNode.removeChild(e.parentNode);};for(var a=0;a<b.length;a++)if(b[a].name==c.name){b[a]._isClosed=true;FB.Anim.ate(b[a],{height:'0px',opacity:0},300,d);}FB.Array.forEach(document.getElementsByTagName('object'),function(e){FB.Dom.setStyle(e,'visibility','');});},_expand:function(){FB.Dom.setStyle(this._barIframe,'height','100%');FB.Dom.setStyle(this._barIframe.parentNode,'height','100%');},_shrink:function(){FB.Dom.setStyle(this._barIframe,'height','34px');FB.Dom.setStyle(this._barIframe.parentNode,'height','34px');},_iframeOnload:function(c){this._barIframe=c;var b=c.parentNode;var d=true;b.id='fb_social_bar_container';if(d){FB.Dom.setStyle(c,'width','100%');}else FB.Dom.setStyle(c,'width','35px');this._currentZ+=parseInt(FB.Dom.getStyle(c,'zIndex'),10);if(isNaN(this._currentZ))this._currentZ=99999;FB.Dom.setStyle(c,'opacity',100);c.className='fb_social_bar_iframe';if(!window.XMLHttpRequest){FB.Dom.setStyle(b,'position','absolute');b.className='fb_social_bar_iframe_'+this._attr.position+'_ie6';b.parentNode.removeChild(b);document.body.appendChild(b);}else FB.Dom.setStyle(b,this._attr.position,'0px');FB.Dom.setStyle(this.dom,'display','inline');function a(){this.widgets={};}FB.copy(a.prototype,{addWidget:function(e,g,f){this.widgets[e]=FB.copy({widget:g},f);return this;},send:function(e){var f=FB.guid();var g=FB.copy({widget_pipe:FB.JSON.stringify(this.widgets)},e);FB.Content.insertIframe({url:'about:blank',root:document.getElementById('fb-root')||document.body,name:f,className:'fb_hidden',onload:function(){FB.Content.submitToTarget({url:FB._domain.www+'widget_pipe.php',target:f,params:g},true);}});},addSocialBarWidgets:function(e,g){for(var f=0;f<g.length;f++)this.addWidget(e+':'+g[f],g[f]);return this;}});new a().addSocialBarWidgets(c.name,['social_bar_controls','social_bar_profile','social_bar_like','social_bar_activity','social_bar_jewels']).send({href:window.location,site:this.getAttribute('site',location.hostname),channel:this.getChannelUrl(),api_key:FB._apiKey,locale:FB._locale,sdk:'joey',session_key:FB._session&&FB._session.session_key});},oneTimeSetup:function(){FB.Dom.setStyle(this.dom,'display','none');this.subscribe('xd.minimizeToolbar',FB.bind(this._minimizeToolbar,this));this.subscribe('xd.spawnChild',FB.bind(this._spawnChild,this));this.subscribe('xd.closeChild',FB.bind(this._closeChild,this));this.subscribe('xd.logoutSocialBar',FB.logout);this.subscribe('xd.loginSocialBar',FB.login);this.subscribe('iframe.onload',FB.bind(this._iframeOnload,this));this.subscribe('xd.presentEdgeCommentDialog',FB.bind(this._onEdgeCreate,this));this.subscribe('xd.presentEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogPresentation,this));this.subscribe('xd.dismissEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogDismissal,this));this.subscribe('xd.hideEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogHide,this));this.subscribe('xd.showEdgeCommentDialog',FB.bind(this._handleEdgeCommentDialogShow,this));this.subscribe('xd.expandBar',FB.bind(this._expand,this));this.subscribe('xd.shrinkBar',FB.bind(this._shrink,this));},_handleEdgeCommentDialogPresentation:function(c){if(!this.isValid())return;var a=document.createElement('i');var d={commentNode:a,externalUrl:c.externalURL,width:330,height:200,masterFrameName:c.masterFrameName,relativeHeightOffset:'0px'};this._commentSlave=new FB.XFBML.EdgeCommentWidget(d);var b=parseInt(FB.Dom.getStyle(this._barIframe.parentNode,'paddingLeft'),10)+parseInt(c.left,10);FB.Dom.setStyle(a,'position','absolute');FB.Dom.removeCss(a,'fb_iframe_widget');FB.Dom.setStyle(a,'top','');FB.Dom.setStyle(a,this._attr.position,this._initialHeight-1+'px');FB.Dom.setStyle(a,'left',b+'px');FB.Dom.setStyle(a,'zIndex',++this._currentZ);FB.Dom.setStyle(a,'opacity',0);this.dom.parentNode.appendChild(a);this._commentSlave.process();this._commentWidgetNode=a;},_handleEdgeCommentDialogHide:function(){if(this._commentWidgetNode){FB.Dom.removeCss(this._commentWidgetNode,'hidden_elem');FB.Anim.ate(this._commentWidgetNode,{opacity:0},300,FB.bind(function(){this._commentWidgetNode.style.display="none";},this));}},_handleEdgeCommentDialogShow:function(){if(this._commentWidgetNode){this._commentWidgetNode.style.display="block";FB.Anim.ate(this._commentWidgetNode,{opacity:100},500);}},_handleEdgeCommentDialogDismissal:function(a){if(this._commentWidgetNode){this._commentWidgetNode.parentNode.removeChild(this._commentWidgetNode);delete this._commentWidgetNode;}},getUrlBits:function(){return {name:'social_bar',params:this._attr};},getSize:function(){return {width:this._initialWidth,height:this._initialHeight};},getIframeName:function(){return 'fb_social_bar_iframe';},setupAndValidate:function(){this._attr={like:this._getBoolAttribute('like'),precache:this._getBoolAttribute('precache'),send:this._getBoolAttribute('send'),activity:this._getBoolAttribute('activity'),chat:this._getBoolAttribute('chat'),position:this._getAttributeFromList('position','bottom',['top','bottom']),href:window.location,site:this.getAttribute('site',location.hostname),channel:this.getChannelUrl()};return true;}});
void(0);


FB.provide("", {"_domain":{"api":"https:\/\/api.facebook.com\/","api_read":"https:\/\/api-read.facebook.com\/","cdn":"http:\/\/static.ak.fbcdn.net\/","cdn_foreign":"http:\/\/connect.facebook.net\/","graph":"https:\/\/graph.facebook.com\/","https_cdn":"https:\/\/s-static.ak.fbcdn.net\/","https_staticfb":"https:\/\/s-static.ak.facebook.com\/","https_www":"https:\/\/www.facebook.com\/","staticfb":"http:\/\/static.ak.facebook.com\/","www":"http:\/\/www.facebook.com\/","m":"http:\/\/m.facebook.com\/","https_m":"https:\/\/m.facebook.com\/"},"_locale":"en_US","_localeIsRtl":false}, true);
FB.provide("Flash", {"_minVersions":[[10,0,22,87]],"_swfPath":"rsrc.php\/v1\/yK\/r\/RIxWozDt5Qq.swf"}, true);
FB.provide("XD", {"_xdProxyUrl":"connect\/xd_proxy.php?version=3"}, true);
FB.provide("Arbiter", {"_canvasProxyUrl":"connect\/canvas_proxy.php?version=3"}, true);
FB.provide('Auth', {"_xdStorePath":"xd_localstorage\/"}, true);
FB.initSitevars = {"parseXFBMLBeforeDomReady":false,"iframePermissions":{"read_stream":false,"manage_mailbox":false,"manage_friendlists":false,"read_mailbox":false,"publish_checkins":true,"status_update":true,"photo_upload":true,"video_upload":true,"sms":false,"create_event":true,"rsvp_event":true,"offline_access":true,"email":true,"xmpp_login":false,"create_note":true,"share_item":true,"export_stream":false,"publish_stream":true,"publish_likes":true,"ads_management":false,"contact_email":true,"access_private_data":false,"read_insights":false,"read_requests":false,"read_friendlists":true,"manage_pages":false,"physical_login":false,"manage_groups":false,"read_deals":false}}; FB.widgetPipeEnabledApps = {"111476658864976":1,"cca6477272fc5cb805f85a84f20fca1d":1,"179150165472010":1}; FB.widgetPipeTagCountThreshold = 4;
FB.provide("Canvas.EarlyFlush", {"_appIdsBlacklist":[],"_sampleRate":500}, true);
FB.provide("XFBML.ConnectBar", {"imgs":{"buttonUrl":"rsrc.php\/v1\/yY\/r\/h_Y6u1wrZPW.png","missingProfileUrl":"rsrc.php\/v1\/yo\/r\/UlIqmHJn-SK.gif"}}, true);
FB.provide("XFBML.ProfilePic", {"_defPicMap":{"pic":"rsrc.php\/v1\/yh\/r\/C5yt7Cqf3zU.jpg","pic_big":"rsrc.php\/v1\/yL\/r\/HsTZSDw4avx.gif","pic_big_with_logo":"rsrc.php\/v1\/y5\/r\/SRDCaeCL7hM.gif","pic_small":"rsrc.php\/v1\/yi\/r\/odA9sNLrE86.jpg","pic_small_with_logo":"rsrc.php\/v1\/yD\/r\/k1xiRXKnlGd.gif","pic_square":"rsrc.php\/v1\/yo\/r\/UlIqmHJn-SK.gif","pic_square_with_logo":"rsrc.php\/v1\/yX\/r\/9dYJBPDHXwZ.gif","pic_with_logo":"rsrc.php\/v1\/yu\/r\/fPPR9f2FJ3t.gif"}}, true);
if (FB.Dom && FB.Dom.addCssRules) { FB.Dom.addCssRules(".fb_hidden{position:absolute;top:-10000px;z-index:10001}\n.fb_reset{background:none;border-spacing:0;border:0;color:#000;cursor:auto;direction:ltr;font-family:\"lucida grande\", tahoma, verdana, arial, sans-serif;font-size: 11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}\n.fb_link img{border:none}\n.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}\n.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px}\n.fb_dialog_content{background:#fff;color:#333}\n.fb_dialog_close_icon{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yq\/r\/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yL\/r\/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px;top:8px\\9;right:7px\\9}\n.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}\n.fb_dialog_close_icon:hover{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yq\/r\/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yL\/r\/s816eWC-2sl.gif)}\n.fb_dialog_close_icon:active{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yq\/r\/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yL\/r\/s816eWC-2sl.gif)}\n.fb_dialog_loader{background-color:#f2f2f2;border:1px solid #606060;font-size: 24px;padding:20px}\n.fb_dialog_top_left,\n.fb_dialog_top_right,\n.fb_dialog_bottom_left,\n.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}\n.fb_dialog_top_left{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}\n.fb_dialog_top_right{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}\n.fb_dialog_bottom_left{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}\n.fb_dialog_bottom_right{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}\n.fb_dialog_vert_left,\n.fb_dialog_vert_right,\n.fb_dialog_horiz_top,\n.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}\n.fb_dialog_vert_left,\n.fb_dialog_vert_right{width:10px;height:100\u0025}\n.fb_dialog_vert_left{margin-left:-10px}\n.fb_dialog_vert_right{right:0;margin-right:-10px}\n.fb_dialog_horiz_top,\n.fb_dialog_horiz_bottom{width:100\u0025;height:10px}\n.fb_dialog_horiz_top{margin-top:-10px}\n.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}\n.fb_dialog_iframe{line-height:0}\n.fb_dialog.loading.fb_dialog_mobile .fb_dialog_iframe{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yQ\/r\/pQebR9nCkAT.gif) no-repeat 50\u0025 50\u0025}\n.fb_dialog.loading.fb_dialog_mobile iframe{visibility:hidden}\n.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3b5998;color:#fff;font-size: 14px;font-weight:bold;margin:0}\n.fb_dialog_content .dialog_title > span{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yd\/r\/Cou7n-nqK52.gif) no-repeat 5px 50\u0025;float:left;padding:5px 0 7px 26px}\n.fb_dialog_content .dialog_content{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/y9\/r\/jKEcVPZFk-2.gif) no-repeat 50\u0025 50\u0025;border:1px solid #555;border-bottom:0;border-top:0;height:150px}\n.fb_dialog_content .dialog_footer{background:#f2f2f2;border:1px solid #555;border-top-color:#ccc;height:40px}\n#fb_dialog_loader_close{float:right}\n.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}\n.fb_dialog.loading.fb_dialog_mobile .fb_dialog_close_icon{visibility:visible}\n.fb_iframe_widget{position:relative;display:-moz-inline-block;display:inline-block}\n.fb_iframe_widget iframe{position:relative;vertical-align:text-bottom}\n.fb_iframe_widget span{position:relative}\n.fb_hide_iframes iframe{position:relative;left:-10000px}\n.fb_iframe_widget_loader{position:relative;display:inline-block}\n.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}\n.fb_iframe_widget_loader .FB_Loader{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/y9\/r\/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50\u0025;z-index:4}\n.fb_button_simple,\n.fb_button_simple_rtl{background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yH\/r\/eIpbnVKI9lR.png);background-repeat:no-repeat;cursor:pointer;outline:none;text-decoration:none}\n.fb_button_simple_rtl{background-position:right 0}\n.fb_button_simple .fb_button_text{margin:0 0 0 20px;padding-bottom:1px}\n.fb_button_simple_rtl .fb_button_text{margin:0 10px 0 0}\na.fb_button_simple:hover .fb_button_text,\na.fb_button_simple_rtl:hover .fb_button_text,\n.fb_button_simple:hover .fb_button_text,\n.fb_button_simple_rtl:hover .fb_button_text{text-decoration:underline}\n.fb_button,\n.fb_button_rtl{background:#29447e url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yL\/r\/FGFbc80dUKj.png);background-repeat:no-repeat;cursor:pointer;display:inline-block;padding:0 0 0 1px;text-decoration:none;outline:none}\n.fb_button .fb_button_text,\n.fb_button_rtl .fb_button_text{background:#5f78ab url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yL\/r\/FGFbc80dUKj.png);border-top:solid 1px #879ac0;border-bottom:solid 1px #1a356e;color:#fff;display:block;font-family:\"lucida grande\",tahoma,verdana,arial,sans-serif;font-weight:bold;padding:2px 6px 3px 6px;margin:1px 1px 0 21px;text-shadow:none}\na.fb_button,\na.fb_button_rtl,\n.fb_button,\n.fb_button_rtl{text-decoration:none}\na.fb_button:active .fb_button_text,\na.fb_button_rtl:active .fb_button_text,\n.fb_button:active .fb_button_text,\n.fb_button_rtl:active .fb_button_text{border-bottom:solid 1px #29447e;border-top:solid 1px #45619d;background:#4f6aa3;text-shadow:none}\n.fb_button_xlarge,\n.fb_button_xlarge_rtl{background-position:left -60px;font-size: 24px;line-height:30px}\n.fb_button_xlarge .fb_button_text{padding:3px 8px 3px 12px;margin-left:38px}\na.fb_button_xlarge:active{background-position:left -99px}\n.fb_button_xlarge_rtl{background-position:right -268px}\n.fb_button_xlarge_rtl .fb_button_text{padding:3px 8px 3px 12px;margin-right:39px}\na.fb_button_xlarge_rtl:active{background-position:right -307px}\n.fb_button_large,\n.fb_button_large_rtl{background-position:left -138px;font-size: 13px;line-height:16px}\n.fb_button_large .fb_button_text{margin-left:24px;padding:2px 6px 4px 6px}\na.fb_button_large:active{background-position:left -163px}\n.fb_button_large_rtl{background-position:right -346px}\n.fb_button_large_rtl .fb_button_text{margin-right:25px}\na.fb_button_large_rtl:active{background-position:right -371px}\n.fb_button_medium,\n.fb_button_medium_rtl{background-position:left -188px;font-size: 11px;line-height:14px}\na.fb_button_medium:active{background-position:left -210px}\n.fb_button_medium_rtl{background-position:right -396px}\n.fb_button_text_rtl,\n.fb_button_medium_rtl .fb_button_text{padding:2px 6px 3px 6px;margin-right:22px}\na.fb_button_medium_rtl:active{background-position:right -418px}\n.fb_button_small,\n.fb_button_small_rtl{background-position:left -232px;font-size: 10px;line-height:10px}\n.fb_button_small .fb_button_text{padding:2px 6px 3px;margin-left:17px}\na.fb_button_small:active,\n.fb_button_small:active{background-position:left -250px}\n.fb_button_small_rtl{background-position:right -440px}\n.fb_button_small_rtl .fb_button_text{padding:2px 6px;margin-right:18px}\na.fb_button_small_rtl:active{background-position:right -458px}\n.fb_share_count_wrapper{position:relative;float:left}\n.fb_share_count{background:#b0b9ec none repeat scroll 0 0;color:#333;font-family:\"lucida grande\", tahoma, verdana, arial, sans-serif;text-align:center}\n.fb_share_count_inner{background:#e8ebf2;display:block}\n.fb_share_count_right{margin-left:-1px;display:inline-block}\n.fb_share_count_right .fb_share_count_inner{border-top:solid 1px #e8ebf2;border-bottom:solid 1px #b0b9ec;margin:1px 1px 0 1px;font-size: 10px;line-height:10px;padding:2px 6px 3px;font-weight:bold}\n.fb_share_count_top{display:block;letter-spacing:-1px;line-height:34px;margin-bottom:7px;font-size: 22px;border:solid 1px #b0b9ec}\n.fb_share_count_nub_top{border:none;display:block;position:absolute;left:7px;top:35px;margin:0;padding:0;width:6px;height:7px;background-repeat:no-repeat;background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yU\/r\/bSOHtKbCGYI.png)}\n.fb_share_count_nub_right{border:none;display:inline-block;padding:0;width:5px;height:10px;background-repeat:no-repeat;background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yX\/r\/i_oIVTKMYsL.png);vertical-align:top;background-position:right 5px;z-index:10;left:2px;margin:0 2px 0 0;position:relative}\n.fb_share_no_count{display:none}\n.fb_share_size_Small .fb_share_count_right .fb_share_count_inner{font-size: 10px}\n.fb_share_size_Medium .fb_share_count_right .fb_share_count_inner{font-size: 11px;padding:2px 6px 3px;letter-spacing:-1px;line-height:14px}\n.fb_share_size_Large .fb_share_count_right .fb_share_count_inner{font-size: 13px;line-height:16px;padding:2px 6px 4px;font-weight:normal;letter-spacing:-1px}\n.fb_share_count_hidden .fb_share_count_nub_top,\n.fb_share_count_hidden .fb_share_count_top,\n.fb_share_count_hidden .fb_share_count_nub_right,\n.fb_share_count_hidden .fb_share_count_right{visibility:hidden}\n.fb_connect_bar_container div,\n.fb_connect_bar_container span,\n.fb_connect_bar_container a,\n.fb_connect_bar_container img,\n.fb_connect_bar_container strong{background:none;border-spacing:0;border:0;direction:ltr;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal;vertical-align:baseline}\n.fb_connect_bar_container{position:fixed;left:0 !important;right:0 !important;height:42px !important;padding:0 25px !important;margin:0 !important;vertical-align:middle !important;border-bottom:1px solid #333 !important;background:#3b5998 !important;z-index:99999999 !important;overflow:hidden !important}\n.fb_connect_bar_container_ie6{position:absolute;top:expression(document.compatMode==\"CSS1Compat\"? document.documentElement.scrollTop+\"px\":body.scrollTop+\"px\")}\n.fb_connect_bar{position:relative;margin:auto;height:100\u0025;width:100\u0025;padding:6px 0 0 0 !important;background:none;color:#fff !important;font-family:\"lucida grande\", tahoma, verdana, arial, sans-serif !important;font-size: 13px !important;font-style:normal !important;font-variant:normal !important;font-weight:normal !important;letter-spacing:normal !important;line-height:1 !important;text-decoration:none !important;text-indent:0 !important;text-shadow:none !important;text-transform:none !important;white-space:normal !important;word-spacing:normal !important}\n.fb_connect_bar a:hover{color:#fff}\n.fb_connect_bar .fb_profile img{height:30px;width:30px;vertical-align:middle;margin:0 6px 5px 0}\n.fb_connect_bar div a,\n.fb_connect_bar span,\n.fb_connect_bar span a{color:#bac6da;font-size: 11px;text-decoration:none}\n.fb_connect_bar .fb_buttons{float:right;margin-top:7px}\n.fb_edge_widget_with_comment{position:relative;*z-index:1000}\n.fb_edge_widget_with_comment span.fb_edge_comment_widget{position:absolute}\n.fb_edge_widget_with_comment span.fb_edge_comment_widget iframe.fb_ltr{left:-4px}\n.fb_edge_widget_with_comment span.fb_edge_comment_widget iframe.fb_rtl{left:2px}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget{left:0;z-index:1}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget .FB_Loader{left:0;top:1px;margin-top:6px;margin-left:0;background-position:50\u0025 50\u0025;background-color:#fff;height:150px;width:394px;border:1px #666 solid;border-bottom:2px solid #283e6c;z-index:1}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget.dark .FB_Loader{background-color:#000;border-bottom:2px solid #ccc}\n.fb_edge_widget_with_comment span.fb_send_button_form_widget.siderender\n.FB_Loader{margin-top:0}\n#fb_social_bar_container{position:fixed;left:0;right:0;height:34px;padding:0 25px;z-index:999999999}\n.fb_social_bar_iframe{position:relative;float:right;opacity:0;-moz-opacity:0;filter:alpha(opacity=0)}\n.fb_social_bar_iframe_bottom_ie6{bottom:auto;top:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)))}\n.fb_social_bar_iframe_top_ie6{bottom:auto;top:expression(eval(document.documentElement.scrollTop-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)))}\n", ["fb.css.base","fb.css.dialog","fb.css.iframewidget","fb.css.button","fb.css.sharebutton","fb.css.connectbarwidget","fb.css.edgecommentwidget","fb.css.sendbuttonformwidget","fb.css.socialbarwidget"]); }