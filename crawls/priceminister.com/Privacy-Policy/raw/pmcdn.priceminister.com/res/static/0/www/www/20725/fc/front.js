PM.Util.cleanInt=function(c){var b=new RegExp("[^0-9]","g");var a=c.value.replace(b,"");if(a!=c.value){c.value=a}};PM.Util.copyToClipBoard=function(b){var d=$(b);if(d.createTextRange&&ie){var a=d.createTextRange();if(a){a.execCommand("Copy")}}try{d.focus();d.select()}catch(c){}};PM.Util.preventPaste=function(a){$j(document).ready(function(){a.bind("paste",function(b){PM.Util.preventDefault(b)})})};PM.Util.calculateElementPosition=function(b){var a=b.offsetLeft;var c=b.offsetTop;offsetparent_x=0;offsetparent_y=0;parentoff=b.offsetParent;parentn=b.parentNode;while(parentn.tagName!="BODY"){offsetparent_x+=parentoff.offsetLeft;offsetparent_y+=parentoff.offsetTop;while(parentn!=parentoff){parentn=parentn.parentNode}parentoff=parentn.offsetParent}return[a+offsetparent_x,c+offsetparent_y]};PM.Util.md5=function(u){function O(b,a){return(b<<a)|(b>>>(32-a))}function N(x,b){var G,a,d,F,c;d=(x&2147483648);F=(b&2147483648);G=(x&1073741824);a=(b&1073741824);c=(x&1073741823)+(b&1073741823);if(G&a){return(c^2147483648^d^F)}if(G|a){if(c&1073741824){return(c^3221225472^d^F)}else{return(c^1073741824^d^F)}}else{return(c^d^F)}}function t(a,c,b){return(a&c)|((~a)&b)}function s(a,c,b){return(a&b)|(c&(~b))}function r(a,c,b){return(a^c^b)}function p(a,c,b){return(c^(a|(~b)))}function w(H,G,af,ae,F,I,ad){H=N(H,N(N(t(G,af,ae),F),ad));return N(O(H,I),G)}function f(H,G,af,ae,F,I,ad){H=N(H,N(N(s(G,af,ae),F),ad));return N(O(H,I),G)}function K(H,G,af,ae,F,I,ad){H=N(H,N(N(r(G,af,ae),F),ad));return N(O(H,I),G)}function v(H,G,af,ae,F,I,ad){H=N(H,N(N(p(G,af,ae),F),ad));return N(O(H,I),G)}function e(x){var H;var d=x.length;var c=d+8;var b=(c-(c%64))/64;var G=(b+1)*16;var I=Array(G-1);var a=0;var F=0;while(F<d){H=(F-(F%4))/4;a=(F%4)*8;I[H]=(I[H]|(x.charCodeAt(F)<<a));F++}H=(F-(F%4))/4;a=(F%4)*8;I[H]=I[H]|(128<<a);I[G-2]=d<<3;I[G-1]=d>>>29;return I}function E(c){var b="",d="",x,a;for(a=0;a<=3;a++){x=(c>>>(a*8))&255;d="0"+x.toString(16);b=b+d.substr(d.length-2,2)}return b}function M(b){b=b.replace(/\r\n/g,"\n");var a="";for(var x=0;x<b.length;x++){var d=b.charCodeAt(x);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a}var J=Array();var S,h,L,y,g,ab,aa,Z,Y;var V=7,T=12,Q=17,P=22;var D=5,C=9,B=14,A=20;var q=4,o=11,n=16,m=23;var X=6,W=10,U=15,R=21;u=M(u);J=e(u);ab=1732584193;aa=4023233417;Z=2562383102;Y=271733878;for(S=0;S<J.length;S+=16){h=ab;L=aa;y=Z;g=Y;ab=w(ab,aa,Z,Y,J[S+0],V,3614090360);Y=w(Y,ab,aa,Z,J[S+1],T,3905402710);Z=w(Z,Y,ab,aa,J[S+2],Q,606105819);aa=w(aa,Z,Y,ab,J[S+3],P,3250441966);ab=w(ab,aa,Z,Y,J[S+4],V,4118548399);Y=w(Y,ab,aa,Z,J[S+5],T,1200080426);Z=w(Z,Y,ab,aa,J[S+6],Q,2821735955);aa=w(aa,Z,Y,ab,J[S+7],P,4249261313);ab=w(ab,aa,Z,Y,J[S+8],V,1770035416);Y=w(Y,ab,aa,Z,J[S+9],T,2336552879);Z=w(Z,Y,ab,aa,J[S+10],Q,4294925233);aa=w(aa,Z,Y,ab,J[S+11],P,2304563134);ab=w(ab,aa,Z,Y,J[S+12],V,1804603682);Y=w(Y,ab,aa,Z,J[S+13],T,4254626195);Z=w(Z,Y,ab,aa,J[S+14],Q,2792965006);aa=w(aa,Z,Y,ab,J[S+15],P,1236535329);ab=f(ab,aa,Z,Y,J[S+1],D,4129170786);Y=f(Y,ab,aa,Z,J[S+6],C,3225465664);Z=f(Z,Y,ab,aa,J[S+11],B,643717713);aa=f(aa,Z,Y,ab,J[S+0],A,3921069994);ab=f(ab,aa,Z,Y,J[S+5],D,3593408605);Y=f(Y,ab,aa,Z,J[S+10],C,38016083);Z=f(Z,Y,ab,aa,J[S+15],B,3634488961);aa=f(aa,Z,Y,ab,J[S+4],A,3889429448);ab=f(ab,aa,Z,Y,J[S+9],D,568446438);Y=f(Y,ab,aa,Z,J[S+14],C,3275163606);Z=f(Z,Y,ab,aa,J[S+3],B,4107603335);aa=f(aa,Z,Y,ab,J[S+8],A,1163531501);ab=f(ab,aa,Z,Y,J[S+13],D,2850285829);Y=f(Y,ab,aa,Z,J[S+2],C,4243563512);Z=f(Z,Y,ab,aa,J[S+7],B,1735328473);aa=f(aa,Z,Y,ab,J[S+12],A,2368359562);ab=K(ab,aa,Z,Y,J[S+5],q,4294588738);Y=K(Y,ab,aa,Z,J[S+8],o,2272392833);Z=K(Z,Y,ab,aa,J[S+11],n,1839030562);aa=K(aa,Z,Y,ab,J[S+14],m,4259657740);ab=K(ab,aa,Z,Y,J[S+1],q,2763975236);Y=K(Y,ab,aa,Z,J[S+4],o,1272893353);Z=K(Z,Y,ab,aa,J[S+7],n,4139469664);aa=K(aa,Z,Y,ab,J[S+10],m,3200236656);ab=K(ab,aa,Z,Y,J[S+13],q,681279174);Y=K(Y,ab,aa,Z,J[S+0],o,3936430074);Z=K(Z,Y,ab,aa,J[S+3],n,3572445317);aa=K(aa,Z,Y,ab,J[S+6],m,76029189);ab=K(ab,aa,Z,Y,J[S+9],q,3654602809);Y=K(Y,ab,aa,Z,J[S+12],o,3873151461);Z=K(Z,Y,ab,aa,J[S+15],n,530742520);aa=K(aa,Z,Y,ab,J[S+2],m,3299628645);ab=v(ab,aa,Z,Y,J[S+0],X,4096336452);Y=v(Y,ab,aa,Z,J[S+7],W,1126891415);Z=v(Z,Y,ab,aa,J[S+14],U,2878612391);aa=v(aa,Z,Y,ab,J[S+5],R,4237533241);ab=v(ab,aa,Z,Y,J[S+12],X,1700485571);Y=v(Y,ab,aa,Z,J[S+3],W,2399980690);Z=v(Z,Y,ab,aa,J[S+10],U,4293915773);aa=v(aa,Z,Y,ab,J[S+1],R,2240044497);ab=v(ab,aa,Z,Y,J[S+8],X,1873313359);Y=v(Y,ab,aa,Z,J[S+15],W,4264355552);Z=v(Z,Y,ab,aa,J[S+6],U,2734768916);aa=v(aa,Z,Y,ab,J[S+13],R,1309151649);ab=v(ab,aa,Z,Y,J[S+4],X,4149444226);Y=v(Y,ab,aa,Z,J[S+11],W,3174756917);Z=v(Z,Y,ab,aa,J[S+2],U,718787259);aa=v(aa,Z,Y,ab,J[S+9],R,3951481745);ab=N(ab,h);aa=N(aa,L);Z=N(Z,y);Y=N(Y,g)}var l=E(ab)+E(aa)+E(Z)+E(Y);return l.toLowerCase()};PM.Util.Price={};PM.Util.Price.isCorrectlyFormatted=function(a){if(a==null){return false}var b=new RegExp("^("+PM.Constants.Price.nationalPattern+")$","g");if(a.match(b)){return true}b=new RegExp("^("+PM.Constants.Price.pmPattern+")$","g");return a.match(b)};PM.Util.Price.rewriteAmount=function(a){if(a==null){return a}var b=new RegExp("^("+PM.Constants.Price.nationalPattern+")$","g");if(a.match(b)){b=new RegExp("["+PM.Constants.Price.thousandsSeparator+"]","g");a=a.replace(b,"");if(PM.Constants.Price.digitsSeparator!="."){b=new RegExp("["+PM.Constants.Price.digitsSeparator+"]","g");a=a.replace(b,".")}}b=new RegExp("^("+PM.Constants.Price.pmPattern+")$","g");if(a.match(b)){if(PM.Constants.Price.digitsSeparator!="."){b=new RegExp("["+PM.Constants.Price.digitsSeparator+"]","g");a=a.replace(b,".")}}return a};PM.Util.Price.check=function(e){var c=new RegExp("[^0-9"+PM.Constants.Price.digitsSeparator+PM.Constants.Price.thousandsSeparator+".]","g");var a=e.replace(c,"");var d=[","," ","."];for(var b=0;b<d.length;b++){c=new RegExp("["+d[b]+d[b]+"]+","g");a=a.replace(c,d[b])}return a};PM.Util.Price.clean=function(e){var c=new RegExp("[^0-9"+PM.Constants.Price.digitsSeparator+PM.Constants.Price.thousandsSeparator+".]","g");var a=e.value.replace(c,"");var d=[","," ","."];for(var b=0;b<d.length;b++){c=new RegExp("["+d[b]+d[b]+"]+","g");a=a.replace(c,d[b])}a=a.replace(/^[0]+/g,"0");a=a.replace(/(^[0])([1-9])/g,"$2");if(a.charAt(0)==PM.Constants.Price.digitsSeparator||a.charAt(0)==PM.Constants.Price.thousandsSeparator||a.charAt(0)=="."){a="0"+a}if(a!=e.value){e.value=a}};PM.Util.Price.format=function(a){if(a==null||PM.Util.trim(a)==""){return""}var b=Math.round(Number(a.replace(/,/,"."))*100)/100;if(isNaN(b)){return""}else{return b}};PM.Util.Price.convert=function(c,a){PM.Statistics.deprecatedFunctions("PM.Util.Price.convert");if(c==null||PM.Util.trim(c)==""){return""}var b;if(a==250){b=100/6.55957}else{if(a==978){b=100*6.55957}else{b=100}}var d=Math.round(Number(c.replace(/,/,"."))*b)/100;if(isNaN(d)){return""}else{if(c.match(/,/)==null){return d}else{return Number(d).toString().replace(/\./,",")}}};PM.Util.Price.computeSaleCampaignPrice=function(c,a){if(c==null||a==null){return""}var b=c.replace(",",".");b=b*((100-a)/100);b=parseInt(b*1000)/1000;b=Math.ceil(b*100)/100;return b};PM.Util.Price.computeDiscountPercent=function(b,c){if(b==""||c==""||b==null||c==null){return""}var a=100-Math.ceil(100*c/b);return a>0?a:0};PM.Util.Price.cleanSaleCampaignPrice=function(b){if(b==null||b.value==null){return}var a=b.value.replace(",",".");a=a.replace(new RegExp("[^0-9.]","g"),"");if(a.indexOf(".")!=-1){var c=a.split(".");a=a.indexOf(".")==0?"0":c[0];a+=".";if(c.length>1){a+=c[1].substring(0,2)}}b.value=a};function checkPrice(a){PM.Statistics.deprecatedFunctions("checkPrice");return PM.Util.Price.check(a)}function computePrice(a,b){PM.Statistics.deprecatedFunctions("computePrice");return PM.Util.Price.convert(a,b)}PM.Util.Dimension={};PM.Util.Dimension.check=function(e){var c=new RegExp("[^0-9"+PM.Constants.Price.digitsSeparator+PM.Constants.Price.thousandsSeparator+".]","g");var a=e.replace(c,"");var d=[",","."];for(var b=0;b<d.length;b++){c=new RegExp("["+d[b]+d[b]+"]+","g");a=a.replace(c,d[b])}return a.replace(/ /g,"")};function checkDimension(a){PM.Statistics.deprecatedFunctions("checkDimension");return PM.Util.Dimension.check(a)}PM.Util.IntValue={};PM.Util.IntValue.check=function(c){var b=new RegExp("[^0-9]","g");var a=c.replace(b,"");if(a==0){return""}return a};function checkIntValue(a){return PM.Util.IntValue.check(a)}PM.Text={};PM.Text.truncate=function(d,b,c){if(d.length>b){d=d.substring(0,b+1);var a=d.lastIndexOf(" ");if(a>0){d=d.substring(0,a)}else{d=d.substring(0,b)}d=d.replace(/[\s,"':(.-]+$/,"");d+=PM.Util.getOption(c,"addPoints",true)?"...":""}return d};PM.Paginate=function(g,e,d,c,h,a){this.currentFirstElement=0;this.globalContainer=$(g);this.containerToRefresh=".listing";this.pageUrl=e;this.total=d;this.step=c;this.labels=h;if(!a){a={}}this.callBackFct=!a.callBackFct?null:a.callBackFct;this.beforePageLoadFct=!a.beforePageLoadFct?null:a.beforePageLoadFct;this.currentPage=1;this.totalPages=1;this.pageNumberElt=PM.Dom.createElement("li",{className:"nbpage"});this.linkPrev=PM.Dom.createElement("li",{className:"prev prev_off"});this.linkNext=PM.Dom.createElement("li",{className:"next next_off"});var f=PM.Dom.createElement("ul",{className:"pagi"});f.appendChild(this.linkPrev);f.appendChild(this.pageNumberElt);f.appendChild(this.linkNext);var b=$j("div.b_foot",this.globalContainer)[0];b.appendChild(f);this.updateLinks()};PM.Paginate.prototype.updateLinks=function(){if(this.total>0){this.currentPage=1+Math.ceil(this.currentFirstElement/this.step);this.totalPages=Math.ceil(this.total/this.step)}if(this.currentPage>this.totalPages){this.currentPage=this.totalPages}this.pageNumberElt.innerHTML=this.labels.pageNumberPrefix+" "+this.currentPage+"/"+this.totalPages;this.linkPrev.className=(this.currentPage>1)?"prev prev_on":"prev prev_off";var a=PM.Dom.createElement("span",{content:this.labels.previous});if(this.currentPage>1){a=PM.Dom.createLink("#"+this.globalContainer.id,a);PM.Event.add(a,"click",this.prevPage.bindObj(this))}if(this.linkPrev.firstChild!=null){this.linkPrev.replaceChild(a,this.linkPrev.firstChild)}else{this.linkPrev.appendChild(a)}this.linkNext.className=(this.currentPage<this.totalPages)?"next next_on":"next next_off";var b=PM.Dom.createElement("span",{content:this.labels.next});if(this.currentPage<this.totalPages){b=PM.Dom.createLink("#"+this.globalContainer.id,b);PM.Event.add(b,"click",this.nextPage.bindObj(this))}if(this.linkNext.firstChild!=null){this.linkNext.replaceChild(b,this.linkNext.firstChild)}else{this.linkNext.appendChild(b)}};PM.Paginate.prototype.prevPage=function(a){PM.Util.preventDefault(a);this.load(-this.step)};PM.Paginate.prototype.nextPage=function(a){PM.Util.preventDefault(a);this.load(this.step)};PM.Paginate.prototype.load=function(c,a){if(!a&&this.beforePageLoadFct!=null){this.beforePageLoadFct.apply(null,[this,c])}else{if(typeof(c)!="number"){c=0}this.currentFirstElement+=c;var b="start="+this.currentFirstElement+"&max="+this.step;PM.Ajax.request(this.pageUrl,this.displayResult.bindObj(this),{method:PM.Ajax.POST,urlParams:b})}};PM.Paginate.prototype.displayResult=function(a){PM.UI.scrollTo(this.globalContainer);var b=a.responseText;$j(this.containerToRefresh,this.globalContainer)[0].innerHTML=b;PM.Util.evalScript(b);this.updateLinks();if(this.callBackFct!=null){this.callBackFct.apply(null)}};PM.Forms={submitted:new Array()};PM.Forms.checkSubmitted=function(a,b){if(!b){b=5000}if(PM.Forms.submitted[a]!="undefined"&&PM.Forms.submitted[a]==true){window.setTimeout("PM.Forms.submitted['"+a+"'] = false",b);return false}PM.Forms.submitted[a]=true;return true};PM.Forms.oneSubmission=function(a){PM.Event.add($j(a),"click",function(c){$j(a).attr("disabled","disabled");var b=$j(a).parents("form:first");b.submit()},false)};PM.Forms.getElementChecked=function(a){for(i=0;i<=a.length-1;i++){if(a[i].checked){return a[i]}}};PM.Forms.updateOptionSelectedIndexFromValue=function(a,b){$(a).selectedIndex=PM.Util.getOptionIndexFromValue($(a),b)};PM.Forms.checkInput=function(a){$(a).checked="checked";PM.History.registerEvent("PM.Forms.checkInput",a)};PM.Forms.checkRadio=function(a,b){for(i=0;i<=a.length-1;i++){if(a[i].value==b){PM.Forms.checkInput(a[i]);break}}};PM.Forms.checkSelected=function(a){if(a.options[a.selectedIndex].value=="-1"){a.selectedIndex=0}};PM.Forms.checkAllCheckbox=function(a,c){var b=c?"checked":"";for(i=0;i<a.length;i++){a[i].checked=b}};PM.Forms.selectValue=function(b,a){if(b.value==a){b.select()}};PM.Forms.clearValue=function(b,a){if(b.value==a){b.value=""}};PM.Forms.MaxLength=function(c,b,a,d){this.input=$(c);this.maxLength=b;this.indicator=$(a);this.iMessage=d;this.check();PM.Event.add(this.input,"keyup",this.check.bindObj(this))};PM.Forms.MaxLength.prototype.check=function(){var a=this.input.value.length;var c=this.maxLength;if(a>this.maxLength){this.input.value=this.input.value.substring(0,this.maxLength);c=0}else{c=this.maxLength-a}var b=PM.Util.variableReplace(this.iMessage,"nb",c);this.indicator.innerHTML=b};PM.Forms.addOption=function(b,a,c){if(b.length==0){newOption=new Option(a,c,false,true)}else{newOption=new Option(a,c,false,false)}b.options[b.length]=newOption};PM.Forms.clearOptions=function(b,d){if(!d){d=0}var a=d;var c=b.length;while(a!=(c)){b.options[d]=null;a++}};PM.Forms.ajaxPostEncode=function(b){var a=b.replace(new RegExp(String.fromCharCode(8364),"g"),"&euro;");a=encodeURIComponent(a);return a};PM.Forms.Title={input:null,triggers:new Array()};PM.Forms.Title.init=function(){if(arguments.length>1){var a=$(arguments[0]).getElementsByTagName("input");PM.Forms.Title.input=a[0];var c=null;for(var b=1;b<arguments.length;b++){c=$(arguments[b]).getElementsByTagName("input");if(c.length>0){PM.Forms.Title.triggers.push(c[0]);PM.Event.add(c[0],"blur",PM.Forms.Title.update);PM.Event.add(c[0],"keyup",PM.Forms.Title.update)}else{c=$(arguments[b]).getElementsByTagName("select");if(c.length>0){PM.Forms.Title.triggers.push(c[0]);PM.Event.add(c[0],"change",PM.Forms.Title.update)}}}}};PM.Forms.Title.update=function(){var c="";var b=PM.Forms.Title.triggers;for(var a=0;a<b.length;a++){if(b[a].type=="text"){if(b[a].value!=""){c+=b[a].value+" "}}else{if(b[a].selectedIndex!=0){c+=b[a].options[b[a].selectedIndex].text+" "}}}PM.Forms.Title.input.value=c};PM.Forms.Steps={divs:new Array(),optionalSteps:new Array(),currentStep:0};PM.Forms.Steps.init=function(a){var e=$(a).getElementsByTagName("div");for(var c=0;c<e.length;c++){if(e[c].className.match("frm_fldset")&&!e[c].className.match("fld_optional")){PM.Forms.Steps.divs.push(e[c])}else{if(e[c].className.match("frm_fldset")&&e[c].className.match("fld_optional")){var d=e[c].getElementsByTagName("p");for(var b=0;b<d.length;b++){if(d[b].className.match("frm_lgnd")){PM.Forms.Steps.optionalSteps.push(e[c]);PM.Event.add(d[b],"click",PM.Forms.Steps.toggleOptional.bindObj(d[b]))}}}}}PM.Event.add($("form_step_next"),"click",PM.Forms.Steps.next)};PM.Forms.Steps.next=function(){PM.Forms.Steps.change(1,true)};PM.Forms.Steps.previous=function(){PM.Forms.Steps.change(-1,true)};PM.Forms.Steps.change=function(d,a){d=parseInt(d);var c=PM.Forms.Steps.currentStep+d;if(c>=0&&c<PM.Forms.Steps.divs.length){if(c<PM.Forms.Steps.currentStep){if(c==PM.Forms.Steps.divs.length-2){$("form_step_next").style.display="inline";$("browseButton").style.display="none";for(var b=0;b<PM.Forms.Steps.optionalSteps.length;b++){PM.Forms.Steps.optionalSteps[b].style.display="none"}}if(a){PM.UI.Effect.slideUp(PM.Forms.Steps.divs[PM.Forms.Steps.currentStep],{duration:500})}else{PM.Forms.Steps.divs[PM.Forms.Steps.currentStep].style.display="none"}}else{if(c==PM.Forms.Steps.divs.length-1){$("form_step_next").style.display="none";$("browseButton").style.display="block";for(var b=0;b<PM.Forms.Steps.optionalSteps.length;b++){PM.Forms.Steps.optionalSteps[b].style.display="block"}}if(a){PM.UI.Effect.slideDown(PM.Forms.Steps.divs[c],{duration:500})}else{PM.Forms.Steps.divs[c].style.display="block"}}PM.Forms.Steps.currentStep=c}PM.History.registerEvent("PM.Forms.Steps.change",d,false)};PM.Forms.Steps.fold=function(){while(PM.Forms.Steps.currentStep>0){PM.Forms.Steps.change(-1,false)}};PM.Forms.Steps.toggleOptional=function(e){var c="";var d=(typeof(e)=="string")?$(e):this;if(d.className.match("expanded")){d.className=d.className.replace(new RegExp("expanded","g"),"");c="none";PM.History.removeEvent("PM.Forms.Steps.toggleOptional",d.id)}else{d.className+=" expanded";c="block";PM.History.registerEvent("PM.Forms.Steps.toggleOptional",d.id)}var b=PM.Dom.parent(d).getElementsByTagName("div");for(var a=0;a<b.length;a++){if(b[a].className.match("fld_full")){b[a].style.display=c}}};PM.Forms.showAndHideOtherField=function(c){var a=c+"Other_ctner";var b=c+"Other";if($(a)){if($(c).value=="other_value_select_value"){PM.UI.show(a);$(b).disabled=false;PM.History.registerEvent("PM.Forms.showAndHideOtherField",c)}else{$(b).disabled=true;PM.UI.hide(a);PM.History.removeEvent("PM.Forms.showAndHideOtherField",c)}PM.Forms.placeFormInputElements()}};PM.Forms.placeFormInputElements=function(){if(ie){var a=$("mev_all_form").getElementsByTagName("input");for(i=0;i<a.length;i++){current_state=a[i].style.visibility;a[i].style.visibility=(current_state=="hidden")?"visible":"hidden";a[i].style.visibility=current_state}}};PM.Forms.Focus={};PM.Forms.Focus.init=function(c){var b=$(c);var a=PM.Util.collectionToArray(b.getElementsByTagName("input"));a=a.concat(PM.Util.collectionToArray(b.getElementsByTagName("select")));a=a.concat(PM.Util.collectionToArray(b.getElementsByTagName("textarea")));for(i=0;i<a.length;i++){PM.Event.add(a[i],"focus",PM.Forms.Focus.on);PM.Event.add(a[i],"blur",PM.Forms.Focus.off)}};PM.Forms.Focus.on=function(a){var b=PM.Util.getElementFromEvent(a);var c=PM.Dom.parent(b);while(c.tagName!="P"&&c.tagName!="DIV"){c=PM.Dom.parent(c)}if(!c.className.match("pm_focus")){c.className+=" pm_focus"}};PM.Forms.Focus.off=function(a){var b=PM.Util.getElementFromEvent(a);var c=PM.Dom.parent(b);while(c.tagName!="P"&&c.tagName!="DIV"){c=PM.Dom.parent(c)}if(c.className.match("pm_focus")){c.className=c.className.replace(new RegExp("pm_focus","g"),"")}};PM.Forms.textInput=function(b,a){this.textElt=$(b);this.defaultText=this.textElt.value;this.clearValue=function(){if(this.defaultText==this.textElt.value){this.textElt.value="";this.textElt.style.color="#000000"}return true};if(a&&a==true){PM.Event.add(this.textElt,"focus",this.clearValue.bindObj(this))}PM.Forms.registerAction(this.textElt.form,this.clearValue.bindObj(this))};PM.Forms.registerAction=function(b,a){b=$(b);if(!b.actionsBeforeSubmit){b.actionsBeforeSubmit=new Array()}b.actionsBeforeSubmit[b.actionsBeforeSubmit.length]=a};PM.Forms.preSubmitCheck=function(b){b=$(b);if(!b.actionsBeforeSubmit){return true}var a=true;for(i=0;i<b.actionsBeforeSubmit.length&&a;i++){a=b.actionsBeforeSubmit[i].call()&&a}return a};PM.Forms.Ordering={state:null,config:null,history:null};PM.Forms.Ordering.init=function(b,a){PM.Forms.Ordering.init(b,null,a)};PM.Forms.Ordering.init=function(c,b,a){PM.Forms.Ordering.state=a;PM.Forms.Ordering.config=c;PM.Forms.Ordering.history=b};PM.Forms.Ordering.change=function(state){if(state!=PM.Forms.Ordering.state){PM.Forms.Steps.fold();var history=eval("PM.Forms.Ordering.history."+PM.Forms.Ordering.state);if(history){for(var i=0;i<history.length;i++){PM.History.removeEvent("PM.Forms.Ordering.change",history[i])}}if(PM.History.historyList!=null){PM.History.removeEvent("PM.Forms.Steps.change",1,false);PM.History.removeEvent("PM.Forms.Steps.change",1,false);PM.History.removeEvent("PM.Forms.Steps.change",-1,false);PM.History.removeEvent("PM.Forms.Steps.change",-1,false)}PM.Forms.Ordering.state=state;var conf=eval("PM.Forms.Ordering.config."+state);if(conf){for(var i=0;i<conf.length;i++){var elt=$(conf[i][0]);if(conf[i][1]!=null){var beforeElt=$(conf[i][1]);PM.Dom.parent(elt).removeChild(elt);PM.Dom.parent(beforeElt).insertBefore(elt,beforeElt)}if(conf[i][2]!=null){if(conf[i][2]==true){elt.style.display="block"}else{elt.style.display="none"}}if(conf[i][3]){var eltLabels=elt.getElementsByTagName("label");var eltSpans=eltLabels[0].getElementsByTagName("span");eltSpans[0].innerHTML=conf[i][3]}}}var history=eval("PM.Forms.Ordering.history."+state);if(history){for(var i=0;i<history.length;i++){PM.History.registerEvent("PM.Forms.Ordering.change",history[i])}}else{PM.History.registerEvent("PM.Forms.Ordering.change",state)}}};PM.Forms.DIA={};PM.Forms.DIA.submit=function(a){var b=PM.Util.getElementFromEvent(a);var c=PM.Util.collectionToArray(b.form.getElementsByTagName("select"));var d="";for(i=0;i<c.length;i++){d+="&"+c[i].name+"="+c[i].value}PM.Ajax.request(this.url+d,PM.Forms.DIA.update,{method:PM.Ajax.GET,dependencyUrl:this.url})};PM.Forms.DIA.update=function(options){eval("var res = "+options.XmlHttpObject.responseText);if(res){for(var i=0;i<res.length;i++){var elt=$(res[i].name);var eltCtner=$(res[i].name+"_ctner");if(elt){PM.Forms.clearOptions(elt,1);elt.selectedIndex=0;PM.Forms.showAndHideOtherField(res[i].name);var selectOptions=res[i].options;if(selectOptions&&selectOptions.length>0){for(j=0;j<selectOptions.length;j++){PM.Forms.addOption(elt,selectOptions[j].value,selectOptions[j].key);if(res[i].selected&&(res[i].selected==selectOptions[j].key)){elt.selectedIndex=j+1}}elt.disabled=false;if(elt.behavior=="30"&&selectOptions.length==1){eltCtner.style.display="none"}else{eltCtner.style.display="block"}}else{elt.disabled=true;if(elt.behavior!="20"){eltCtner.style.display="none"}}}}PM.Forms.placeFormInputElements()}};PM.Forms.Radio={};PM.Forms.Radio.unselect=function(b){var a=document.getElementsByName(b);for(var c=0;c<a.length;++c){a[c].checked=false}};PM.Forms.Radio.getValue=function(b){var d=null;var a=document.getElementsByName(b);for(var c=0;c<a.length;++c){if(a[c].checked){d=a[c].value;break}}return d};PM.Forms.Radio.setValue=function(b,d){var a=document.getElementsByName(b);for(var c=0;c<a.length;++c){if(a[c].value==d){a[c].checked=true;break}}};PM.Forms.Select={};PM.Forms.Select.getValue=function(a){var a=$(a);if(!a){return null}return a.value};PM.Forms.Select.setValue=function(a,c){var a=$(a);if(!a){return null}for(var b=0;b<a.length;b++){if(a[b].value==c){a.selectedIndex=b}}};PM.Forms.StateSelector={titleDefault:null,selectedState:{},selectedSpan:{},selectorName:"state",displayedSpan:null,values:new Array(),timer:-1,delay:100,disabledState:-2};PM.Forms.StateSelector.init=function(n,p){var b=p;var o=b;if(!b){b="";o=1230}PM.Forms.StateSelector.selectedState[o]=-1;var e=$(n);var A=new Array();var f=new Array();var t=e.getElementsByTagName("div");var r=PM.Dom.parent(e);var w=document.createElement("ul");PM.Forms.StateSelector.titleDefault=document.getElementById("fld_states_edito");var C=0;var m="";var h=0;var q=null;for(var y=0;y<t.length;y++){if(t[y].className.match("fld_full")){var s=t[y].getElementsByTagName("p");for(var v=0;v<s.length;v++){if(s[v].className.match("fld_rdio")){var g=s[v].getElementsByTagName("span");var a=(g[0])?g[0].innerHTML:"";inputs=s[v].getElementsByTagName("input");PM.Forms.StateSelector.selectorName=inputs[0].name;if(h==0){if(!inputs[0].id.match("_0")){h++;C=1}}if(inputs[0].disabled){m=" fld_no_new";PM.Forms.StateSelector.disabledState=h}PM.Forms.StateSelector.values[h]=inputs[0].value;is_displayed=true;if(inputs[0].checked){PM.Forms.StateSelector.selectedState[o]=h}else{is_displayed=false}}}var x=t[y].getElementsByTagName("div");var d=false;for(var v=0;v<x.length;v++){if(x[v].className.match("assistance_ctner")){f.push(x[v]);d=true}}var u=document.createElement("li");var c="";u.className+=" "+PM.Forms.StateSelector.selectorName+h;q=u;var B=document.createElement("span");B.id=n+"_state_"+h;if(!is_displayed){B.style.display="none"}B.innerHTML=a;u.appendChild(B);if(PM.Forms.StateSelector.selectedState[o]==h){PM.Forms.StateSelector.selectedSpan[o]=B}PM.Event.add(u,"mouseover",PM.Forms.StateSelector.rollOver.bindObj([B,h,e],o));PM.Event.add(u,"mouseout",PM.Forms.StateSelector.rollOutWithTimer.bindObj(e,b,o));if(d){PM.Event.add(u,"mouseover",PM.Assistance.showOnOver.bindObj(f[f.length-1]));PM.Event.add(u,"mouseout",PM.Assistance.hideWithTimer.bindObj(f[f.length-1]));if(PM.Forms.StateSelector.disabledState!=h){PM.Event.add(u,"click",PM.Assistance.showOnFocus.bindObj(f[f.length-1]))}}PM.Event.add(u,"click",PM.Forms.StateSelector.select.bindObj([B,h],b,o));w.appendChild(u);A.push(t[y]);h++}}if(PM.Forms.StateSelector.titleDefault&&PM.Forms.StateSelector.selectedSpan[o]){PM.Forms.StateSelector.titleDefault.style.display="none"}w.className="fld_states"+m;e.appendChild(w);e.className=(PM.Forms.StateSelector.selectedState[o]>-1)?"fld_states_ctner fld_state_"+PM.Forms.StateSelector.selectedState[o]:"fld_states_ctner";if(q!=null){q.className+=" last_element"}var l=document.createElement("input");l.type="hidden";l.name=PM.Forms.StateSelector.selectorName+b;l.id=PM.Forms.StateSelector.selectorName+b;if(PM.Forms.StateSelector.selectedState[o]==-1){l.value=""}else{l.value=PM.Forms.StateSelector.values[PM.Forms.StateSelector.selectedState[o]]}e.appendChild(l);for(var y=0;y<A.length;y++){e.removeChild(A[y])}for(var y=0;y<f.length;y++){r.appendChild(f[y])}r.className=r.className+" fld_state_ctrl fld_"+C+"_"+(h-1)+"_states"};PM.Forms.StateSelector.initState=function(d,c){var b=$(d);b.className="fld_states_ctner fld_state_"+c;var a=$("fld_radio_ctner_state_"+c);a.style.display="block";suffix="";arrayOffset=1230;PM.Forms.StateSelector.select.call([a,c],suffix,arrayOffset)};PM.Forms.StateSelector.rollOver=function(a){var b=this;if(PM.Forms.StateSelector.displayedSpan){PM.Forms.StateSelector.displayedSpan.style.display="none";PM.Forms.StateSelector.displayedSpan=null;clearTimeout(PM.Forms.StateSelector.timer);PM.Forms.StateSelector.timer=-1}if(PM.Forms.StateSelector.selectedSpan[a]){PM.Forms.StateSelector.selectedSpan[a].style.display="none"}b[2].className="fld_states_ctner fld_state_"+b[1];if(b[0]!=null){b[0].style.display="block"}if(PM.Forms.StateSelector.titleDefault){PM.Forms.StateSelector.titleDefault.style.display="none"}PM.Forms.StateSelector.displayedSpan=b[0]};PM.Forms.StateSelector.rollOut=function(a){if(PM.Forms.StateSelector.displayedSpan){PM.Forms.StateSelector.displayedSpan.style.display="none";PM.Forms.StateSelector.displayedSpan=null}if(PM.Forms.StateSelector.selectedSpan[a]){PM.Forms.StateSelector.selectedSpan[a].style.display="block"}else{if(PM.Forms.StateSelector.titleDefault){PM.Forms.StateSelector.titleDefault.style.display="block"}}this.className=(PM.Forms.StateSelector.selectedState[a]>-1)?"fld_states_ctner fld_state_"+PM.Forms.StateSelector.selectedState[a]:"fld_states_ctner"};PM.Forms.StateSelector.rollOutWithTimer=function(b,a){PM.Forms.StateSelector.timer=setTimeout(PM.Forms.StateSelector.rollOut.bindObj(this,a),PM.Forms.StateSelector.delay)};PM.Forms.StateSelector.select=function(c,a){var b=this;var e=c||"";if(!a){a=c}if(PM.Forms.StateSelector.disabledState!=b[1]){PM.Forms.StateSelector.selectedSpan[a]=b[0];PM.Forms.StateSelector.selectedState[a]=b[1];if(PM.Forms.StateSelector.titleDefault){PM.Forms.StateSelector.titleDefault.style.display="none"}var d=$(PM.Forms.StateSelector.selectorName+e);if(PM.Forms.StateSelector.selectedState[a]==-1){d.value=""}else{d.value=PM.Forms.StateSelector.values[PM.Forms.StateSelector.selectedState[a]]}}};PM.Forms.firstElement4Focus=function(b){b=$(b);var a=b.getElementsByTagName("div");for(i=0;i<a.length;i++){if(a[i].style.display!="none"){var c=$(a[i]).descendants();for(j=0;j<c.length;j++){if(c[j].match("select")||c[j].match("textarea")||((c[j].match("input"))&&(c[j].type!="hidden"))){if((c[j].style.display!="none")&&(!c[j].disabled)){return c[j]}}}}}return null};PM.Forms.Check={Type:{EMPTY:0,DIFFERS:1,MAXLENGTH:2,MINLENGTH:3,NO_SELECTION:4,REGEXP:5,FILE_EXTENSION:6},RegExp:{URL:new RegExp("^(https?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\\.[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$","i"),EMAIL:new RegExp("^[a-z0-9|_|+|-]+([.]{1}[a-z0-9|_|+|-]+)*@[a-z0-9|_|+|-]+([.]{1}[a-z0-9|_|+|-]+)+$","i")}};PM.Forms.Check.XitiParam=function(b,a){this.xitiName=b;this.xitiValue=a;this.numberOfCall=1};PM.Forms.Check.XitiParam.prototype.addCall=function(){this.numberOfCall++};PM.Forms.Check.setConstraints=function(c,d){var e=d;if(!e){e=""}for(key in c.fields){var a=c.fields[key];key+=e;for(i=0;i<a.length;++i){switch(a[i].type){case PM.Forms.Check.Type.MAXLENGTH:var b=$(key);switch(b.tagName.toLowerCase()){case"input":b.setAttribute("maxLength",a[i].value);break;case"textarea":PM.Event.add(b,"keyup",PM.Util.checkMaxInput.bindObj(null,b,a[i].value));PM.Event.add(b,"keydown",PM.Util.checkMaxInput.bindObj(null,b,a[i].value));break;default:}break;default:}}}};PM.Forms.Check.perform=function(){var a=this.checks.fields;var c=this.idSuffix;if(!c){c=""}var w=new Array();var l=false;var s={};for(key in a){var g=false;var y=a[key];var u=this.suffixes;if(typeof(this.suffixes)=="undefined"||typeof(y[0].suffixable)=="undefined"||y[0].suffixable==false){u=[c]}for(var t=0;t<u.length;t++){var e=false;keyTmp=key+u[t];for(i=0;i<y.length&&!e;i++){var q=y[i].error;if(this.replaceStr){for(kw in this.replaceStr){q=PM.Util.variableReplace(q,kw,this.replaceStr[kw])}}switch(y[i].type){case PM.Forms.Check.Type.DIFFERS:if($(keyTmp).value.match(new RegExp(y[i].value,"g"))){var d=PM.Forms.Check.showError(keyTmp,q);if(e==false){if(!g){w[w.length]=d;g=true}e=true}}break;case PM.Forms.Check.Type.MAXLENGTH:if($(keyTmp).value.length>y[i].value){var d=PM.Forms.Check.showError(keyTmp,PM.Util.variableReplace(PM.Util.variableReplace(q,"toomany",$(keyTmp).value.length-y[i].value),"max",y[i].value));if(e==false){if(!g){w[w.length]=d;g=true}e=true}}break;case PM.Forms.Check.Type.MINLENGTH:if($(keyTmp).value.length<y[i].value){var d=PM.Forms.Check.showError(keyTmp,PM.Util.variableReplace(PM.Util.variableReplace(q,"missing",y[i].value-$(keyTmp).value.length),"min",y[i].value));if(e==false){if(!g){w[w.length]=d;g=true}e=true}}break;case PM.Forms.Check.Type.NO_SELECTION:var b=document.getElementsByName(keyTmp);var m=(b.length==0);for(var v=0;v<b.length;++v){m=m||b[v].checked}if(!m){var d=PM.Forms.Check.showError(keyTmp,q);if(e==false){if(!g){w[w.length]=d;g=true}e=true}}break;case PM.Forms.Check.Type.REGEXP:var h=y[i].value;if($(keyTmp).value!=""&&!h.test($(keyTmp).value)){var d=PM.Forms.Check.showError(keyTmp,q);if(e==false){if(!g){w[w.length]=d;g=true}e=true}}break;case PM.Forms.Check.Type.FILE_EXTENSION:var f=$(keyTmp).value;if(f.indexOf(".")==-1){f=""}else{f=f.substr(f.lastIndexOf(".")+1,f.length)}if(y[i].value.contains(f.toLowerCase())===false){var d=PM.Forms.Check.showError(keyTmp,q);if(e==false){if(!g){w[w.length]=d;g=true}e=true}}break;case PM.Forms.Check.Type.EMPTY:default:if($(keyTmp).value==""||$(keyTmp).value==y[i].value){var d=PM.Forms.Check.showError(keyTmp,q);if(e==false){if(!g){w[w.length]=d;g=true}e=true}}break}if(this.xiti&&e){var p=y[i].xitiName+"_"+y[i].xitiValue;var r=PM.Util.getOption(s,p,null);if(r==null){r=new PM.Forms.Check.XitiParam(y[i].xitiName,y[i].xitiValue)}else{r.addCall()}PM.Util.setOption(s,p,r,true)}}if(!e){PM.Forms.Check.hideError(keyTmp)}else{l=true}}}if(l){var x=PM.Forms.Check.computeGlobalMessage(this.checks.globalErrorMessage,w);PM.Notice.show(this.noticeCtner,PM.Notice.Type.ERROR,x);for(keyXiti in s){var o=s[keyXiti];this.xiti.append(o.xitiName,PM.Util.variableReplace(o.xitiValue,"nbError",o.numberOfCall))}return false}else{PM.Notice.hide(this.noticeCtner)}return true};PM.Forms.Check.hideError=function(b){var a=$(b+"_error");if(a){a.style.display="none";var c=PM.Dom.parent(a);if(c.className.match("pm_error")){c.className=c.className.replace(/ ?pm_error/,"")}}};PM.Forms.Check.showError=function(c,e){var b=null;if(e){b=e;var a=$(c+"_error");if(a){var d=PM.Dom.parent(a);if(!d.className.match("pm_error")){d.className+=" pm_error"}a.innerHTML=e;a.style.display=""}}return b};PM.Forms.Check.computeGlobalMessage=function(c,a){var f=typeof(c)!="undefined";var e=f?c:"";var d=false;if(a.length>0){for(var b=0;b<a.length;b++){if(a[b]!=null){d=true}}if(d){if(f||a.length>1){e+="<ul>"}for(var b=0;b<a.length;b++){if(a[b]!=null){if(!f&&a.length==1){e+=a[b]}else{e+="<li>"+a[b]+"</li>"}}}if(f||a.length>1){e+="</ul>"}}}return e};PM.Forms.Ref={};PM.Forms.Ref.callBackVente=function(options){eval("var res = "+options.responseText);var majOldDiv=$("major_error");var simOldDiv=$("simple_error");var parent=$("error_ctner");if(res.message){if(simOldDiv!=null){parent.removeChild(simOldDiv)}if(majOldDiv!=null){parent.removeChild(majOldDiv)}var error=PM.Dom.createElement("div",{className:"error notification",id:"major_error"});parent.appendChild(error);$("major_error").innerHTML=res.message}else{if(majOldDiv!=null){parent.removeChild(majOldDiv)}}};PM.Forms.Ref.callAjaxService=function(e,a,d){var b=$(e).value;var c=$(a).options[$(a).selectedIndex].value;var f="action=searchbymanid&man_id="+b+"&man_key="+c+"&prd_type_code="+d;if(b!=""&&c!=""){PM.Ajax.request("submit?",PM.Forms.Ref.callBackVente,{method:PM.Ajax.POST,urlParams:f})}};PM.Forms.Ref.registerReferenceControl=function(b,a){refControls.push({controlName:b,manufacturerControlName:a})};PM.Forms.LinesMaker=function(e,c,d,b){this.template=$(e).innerHTML;this.ctner=$(c);this.nbLines=0;this.maxLines=PM.Util.getOption(b,"maxLines",false);this.autoAddOnLastLineFocus=PM.Util.getOption(b,"autoAddOnLastLineFocus",false);this.afterFinish=PM.Util.getOption(b,"afterFinish",null);var f=this.ctner.childNodes;for(i=0;i<f.length;i++){if(f[i].nodeType==1){f[i].lineNb=this.nbLines;this.nbLines++}}if(this.canAddLine()){var a="add_line_btn";this.button=PM.Dom.createElement("div",{id:"add_line"});if(!d.html.match(a)){a="add_line"}this.button.innerHTML=d.html;PM.Dom.parent($(d.refElt)).insertBefore(this.button,d.after?PM.Dom.nextObject($(d.refElt)):$(d.refElt));PM.Event.add($(a),"click",this.addLine.bindObj(this),true)}this.manageAutoLineEvents()};PM.Forms.LinesMaker.prototype.canAddLine=function(){return(!this.maxLines||this.nbLines<this.maxLines)};PM.Forms.LinesMaker.prototype.addLine=function(){if(this.canAddLine()){var b=this.template;var a=PM.Dom.createElement("div");a.innerHTML=PM.Util.variableReplace(b,"id",this.nbLines);b=a.firstChild;while(b.nodeType!=1&&typeof(b)!="undefined"){b=PM.Dom.nextObject(b)}this.ctner.appendChild(b);this.nbLines++;if(!this.canAddLine()&&typeof(this.button)!="undefined"){this.button.style.display="none"}this.manageAutoLineEvents();if(this.afterFinish){this.afterFinish.apply(null,[b])}}};PM.Forms.LinesMaker.prototype.autoAddIfLastLine=function(a){if(a.lineNb==this.nbLines-1){this.addLine()}};PM.Forms.LinesMaker.prototype.manageAutoLineEvents=function(){if(this.autoAddOnLastLineFocus){var b=this.ctner.childNodes[this.ctner.childNodes.length-1];while(b.nodeType!=1&&typeof(b)!="undefined"){b=PM.Dom.previousObject(b)}b.lineNb=this.nbLines-1;var a=$j("input",b);for(j=0;j<a.length;j++){PM.Event.add(a[j],"focus",this.autoAddIfLastLine.bindObj(this,b))}}};PM.Forms.AutoFill=function(a,b){this.elt=$(a);PM.Forms.AutoFill.allInputs[PM.Forms.AutoFill.allInputs.length]=this;var c=PM.Dom.parent(a).getElementsByTagName("label");if(c.length>0){this.defaultValue=c[0].childNodes[0].innerHTML}else{return}if(this.elt.value==""||this.elt.value==this.defaultValue){PM.Dom.Class.remove(this.elt,"pm_value");this.elt.value=this.defaultValue}else{PM.Dom.Class.add(this.elt,"pm_value")}PM.Event.add(this.elt,"focus",this.clearValue.bindObj(this,b));PM.Event.add(this.elt,"blur",this.refillValue.bindObj(this))};PM.Forms.AutoFill.allInputs=new Array();PM.Forms.AutoFill.prototype.clearValue=function(b){if(this.elt.value==this.defaultValue){this.elt.value="";PM.Dom.Class.add(this.elt,"pm_value");if(ie&&typeof(b)!="undefined"&&b){var a=this.elt.createTextRange();a.select()}}};PM.Forms.AutoFill.clearAll=function(){for(var a=0;a<PM.Forms.AutoFill.allInputs.length;a++){PM.Forms.AutoFill.allInputs[a].clearValue()}};PM.Forms.AutoFill.prototype.refillValue=function(){if(this.elt.value==""||this.elt.value==this.defaultValue){PM.Dom.Class.remove(this.elt,"pm_value");this.elt.value=this.defaultValue}};PM.Forms.AutoFill.refillAll=function(){for(var a=0;a<PM.Forms.AutoFill.allInputs.length;a++){PM.Forms.AutoFill.allInputs[a].refillValue()}};PM.Forms.AutoFill.init=function(b,d,e){var a=$j("input."+d,$(b));if(e==null){e=true}for(var c=0;c<a.length;c++){new PM.Forms.AutoFill(a[c],e)}};PM.Forms.AutoFill.clearAllDefaultValue=function(b,d){var a=$j("input."+d,$(b));for(var c=0;c<a.length;c++){eltToClear=$(a[c]);var e=PM.Dom.parent(elt).getElementsByTagName("label");if(e.length>0){this.defaultValue=e[0].innerHTML;if(eltToClear.value==this.defaultValue){eltToClear.value="";PM.Dom.Class.add(this.elt,"pm_value")}}}};PM.Forms.autoFillWithFocus=function(c){var h=this;this.autofillSearch=null;var l=$j("#"+c);var e=true;var a=l.val();PM.Event.add(l,"focus",function(){if(!ie&&e){$(c).setSelectionRange(0,0)}});PM.Event.add(window,"load",function(){l.focus()});l.css({color:"#999999"});var f=function(){l.css("color","");l.unbind("keyup",b);l.unbind("blur",d);l.unbind("click",g);h.autofillSearch=new PM.Forms.AutoFill(c);e=false};var b=function(){lastCharPos=l.val().length-a.length;this.value=l.val().substring(0,lastCharPos);f.call(null)};l.bind("keyup",b);var d=function(){f.call(null)};l.bind("blur",d);var g=function(){f.call(null);h.autofillSearch.clearValue()};l.bind("click",g)};function clearOptions(a){PM.Statistics.deprecatedFunctions("clearOptions");return PM.Forms.clearOptions(a)}PM.Tree={sections:Array(),highlightColors:["#f4f4ff","#f4f4ff"]};PM.Tree.swapSection=function(a){if(!PM.Tree.sections[a]){PM.Tree.sections[a]=true;if($(a+"_content").style.display=="none"){PM.UI.Effect.slideDown(a+"_content",{duration:300,callback:function(){PM.Tree.sections[a]=false}});$(a+"_link").className="minus"}else{PM.UI.Effect.slideUp(a+"_content",{duration:300,callback:function(){PM.Tree.sections[a]=false}});$(a+"_link").className="plus"}}return false};PM.Tree.highlightPath=function(b,d,c){c?b.style.backgroundColor=PM.Tree.highlightColors[1]:b.style.background="none";var a=b.parentNode;while(a.tagName=="DL"||a.tagName=="DD"||a.tagName=="DT"){if(a.tagName=="DT"){c?a.style.backgroundColor=PM.Tree.highlightColors[0]:a.style.background="none"}if(a.tagName=="DD"){a=a.previousSibling}else{a=a.parentNode}}};PM.Tree.parse=function(a,b){if(a){if(a.tagName=="DT"){PM.Event.add(a,"mouseover",function(){PM.Tree.highlightPath(a,b,true)});PM.Event.add(a,"mouseout",function(){PM.Tree.highlightPath(a,b,false)})}PM.Tree.parse(a.nextSibling,b);PM.Tree.parse(a.firstChild,b+0.5)}};PM.Tree.init=function(a){var b=$("helptree");PM.Tree.parse(b.firstChild,0)};PM.ExpandTree={};PM.ExpandTree.Element=function(a,d,f,c){this.options=c;if(!this.options){this.options={}}this.targetElt=f;this.isSwapping=false;this.elt=$j(d,a)[0];if(typeof(this.options.handleClick)=="undefined"||this.options.handleClick){PM.Event.add(this.elt,"click",this.swap.bindObjWithEvent(this,this.elt))}this.preventDefaultSelectors=!this.options.preventDefaultSelectors?null:this.options.preventDefaultSelectors;this.insensibleSelectors=!this.options.insensibleSelectors?null:this.options.insensibleSelectors;this.innerHTMLSelector=!this.options.innerHTMLSelector?null:this.options.innerHTMLSelector;this.newInnerHTML=!this.options.newInnerHTML?null:this.options.newInnerHTML;this.rollOverIE6Selectors=!this.options.rollOverIE6Selectors?null:this.options.rollOverIE6Selectors;this.callBackFct=!this.options.callBackFct?null:this.options.callBackFct;if(this.preventDefaultSelectors!=null){for(var e=0;e<this.preventDefaultSelectors.length;e++){preventDefaultElement=$j(this.preventDefaultSelectors[e],a)[0];PM.Event.add(preventDefaultElement,"click",function(g){PM.Util.preventDefault(g)})}}this.insensibleElements=new Array();this.indiceInsensibleElements=0;if(this.insensibleSelectors!=null){for(var e=0;e<this.insensibleSelectors.length;e++){this.insensibleElementsTab=$j(this.insensibleSelectors[e],a);for(var b=0;b<this.insensibleElementsTab.length;b++){this.insensibleElements[this.indiceInsensibleElements]=this.insensibleElementsTab[b];this.indiceInsensibleElements++}}}if(this.innerHTMLSelector!=null){this.innerHTMLToChange=$j(this.innerHTMLSelector,this.elt)[0];this.initContent=this.innerHTMLToChange.innerHTML}if(ie6&&this.rollOverIE6Selectors!=null){for(var e=0;e<this.rollOverIE6Selectors.length;e++){targetToModify=$j(this.rollOverIE6Selectors[e],a)[0];PM.Event.add(targetToModify,"mouseover",this.rollOver.bindObj(this,targetToModify));PM.Event.add(targetToModify,"mouseout",this.rollOut.bindObj(this,targetToModify))}}};PM.ExpandTree.Element.prototype.swap=function(a,c){activeSwap=true;for(var d=0;d<this.insensibleElements.length&&activeSwap;d++){if(PM.Dom.withinElement(PM.Util.getElementFromEvent(a),this.insensibleElements[d])){activeSwap=false}}if(activeSwap&&!this.isSwapping){this.isSwapping=true;targetToExpand=$j(this.targetElt,PM.Dom.parent(c))[0];var e=function(){PM.Dom.Class.replace(PM.Dom.parent(c),"expanded","collapsed");if(this.initContent!=null&&this.innerHTMLSelector!=null){this.innerHTMLToChange.innerHTML=this.initContent}this.isSwapping=false;PM.Event.eventReached(PM.Event.Type.REDRAW);if(this.callBackFct!=null){this.callBackFct(false)}};var b=function(){this.isSwapping=false;PM.Event.eventReached(PM.Event.Type.REDRAW);if(this.callBackFct!=null){this.callBackFct(true)}};if(targetToExpand.style.display=="none"){if(this.newInnerHTML!=null&&this.innerHTMLSelector!=null){this.innerHTMLToChange.innerHTML=this.newInnerHTML}PM.Dom.Class.replace(PM.Dom.parent(c),"collapsed","expanded");PM.UI.Effect.slideDown(targetToExpand,{duration:500,callback:b.bindObj(this),afterEachStep:PM.Event.eventReached.bindObj(null,PM.Event.Type.REDRAW)})}else{PM.UI.Effect.slideUp(targetToExpand,{duration:500,callback:e.bindObj(this),afterEachStep:PM.Event.eventReached.bindObj(null,PM.Event.Type.REDRAW)})}}};PM.ExpandTree.Element.prototype.rollOver=function(a){PM.Dom.Class.add(a,"pm_hover")};PM.ExpandTree.Element.prototype.rollOut=function(a){PM.Dom.Class.remove(a,"pm_hover")};PM.ExpandTree.init=function(g,a,d,h,c){var b=$j(a,$(g));var f=new Array();for(var e=0;e<b.length;e++){f[f.length]=new PM.ExpandTree.Element(b[e],d,h,c)}return f};PM.FilterMenu={nbMenus:10,activeMenu:-1,linkClass:"collapse"};PM.FilterMenu.open=function(e){var b=$("filterlink"+e);if(b){b.className="referer_link";b.href="javascript:PM.FilterMenu.close("+e+")"}if(PM.FilterMenu.activeMenu!=-1){PM.FilterMenu.close(PM.FilterMenu.activeMenu)}var c=$("filtermenu"+e);c.style.display="block";if(ie6&&$("filtermenu_iframe")){var d=PM.Util.absolutePosition(c);var a=$("filtermenu_iframe");a.style.width=(c.offsetWidth+4)+"px";a.style.height=c.offsetHeight+"px";a.style.left=(d[0]-4)+"px";a.style.top=d[1]+"px";a.style.display="block"}PM.FilterMenu.activeMenu=e};PM.FilterMenu.close=function(c){var a=$("filterlink"+c);if(a){a.className=PM.FilterMenu.linkClass;a.href="javascript:PM.FilterMenu.open("+c+")"}var b=$("filtermenu"+c);if(b){b.style.display="none";if(ie6&&$("filtermenu_iframe")){$("filtermenu_iframe").style.display="none"}}PM.FilterMenu.activeMenu=-1};PM.FilterMenu.testClicked=function(b){if(PM.FilterMenu.activeMenu!=-1){if(document.all){var a=window.event.srcElement;while(a.parentElement!=null){if(a.id=="filtermenu"+PM.FilterMenu.activeMenu||a.id=="filterlink"+PM.FilterMenu.activeMenu||a.className=="filter_title"){return}else{if(a.className=="filter_shadowtitle"){a="stop"}else{a=a.parentElement}}}PM.FilterMenu.close(PM.FilterMenu.activeMenu);return}else{if(b){a=b.target;while(a.parentNode!=null){if(a.id=="filtermenu"+PM.FilterMenu.activeMenu||a.id=="filterlink"+PM.FilterMenu.activeMenu||a.className=="filter_title"){return}else{if(a.className=="filter_shadowtitle"){a="stop"}else{a=a.parentNode}}}PM.FilterMenu.close(PM.FilterMenu.activeMenu);return}}}};function openFilterMenu(a){PM.Statistics.deprecatedFunctions("openFilterMenu");PM.FilterMenu.open(a)}function closeFilterMenu(a){PM.Statistics.deprecatedFunctions("closeFilterMenu");PM.FilterMenu.close(a)}function isClicked(a){PM.Statistics.deprecatedFunctions("isClicked");PM.FilterMenu.testClicked(a)}PM.DropDown={timer:-1,element:null,closing_delay:100};PM.DropDown.show=function(a,b){if(b===undefined){b="120"}clearTimeout(PM.DropDown.timer);PM.DropDown.timer=-1;if(PM.DropDown.element&&PM.DropDown.element!=a){PM.DropDown.hide()}PM.Dom.parent(a).style.zIndex=b;a.style.display="block";PM.DropDown.element=a;PM.DropDown.elementId=a.id};PM.DropDown.hide=function(){PM.DropDown.element.style.display="none";PM.Dom.parent(PM.DropDown.element).style.zIndex=""};PM.DropDown.hideWithTimer=function(a){PM.DropDown.timer=setTimeout("PM.DropDown.hide()",PM.DropDown.closing_delay)};PM.SwitchTab={nbTabs:3,tabClassName:"tab"};PM.SwitchTab.open=function(c){var b=$("tablelink"+c);if(b){b.parentNode.className=PM.SwitchTab.tabClassName+"_"+c+"_on"}for(i=0;i<PM.SwitchTab.nbTabs;++i){var a=$("table"+i);if(a){if(i==c){a.style.display="block"}else{PM.SwitchTab.close(i)}}}};PM.SwitchTab.close=function(c){var b=$("tablelink"+c);if(b){b.parentNode.className=PM.SwitchTab.tabClassName+"_"+c+"_off";b.href="javascript:PM.SwitchTab.open("+c+")"}var a=$("table"+c);if(a){a.style.display="none"}};PM.Media={PHOTO:0,VIDEO:1,PHOTO_NAME:"photo",VIDEO_NAME:"video",closing_delay:200,linkTimer:new Array(),isOn:new Array(),isFading:new Array(),effect1:new Array()};PM.Media.switchTab=function(c,d){var a=div_to_hide=div_bottom_id="media_"+c+"_";div_bottom_id+="bottom";var b="media_";switch(d){case PM.Media.PHOTO:a+=PM.Media.PHOTO_NAME;div_to_hide+=PM.Media.VIDEO_NAME;b+=PM.Media.PHOTO_NAME+"_bottom";break;case PM.Media.VIDEO:a+=PM.Media.VIDEO_NAME;div_to_hide+=PM.Media.PHOTO_NAME;b+=PM.Media.VIDEO_NAME+"_bottom";break}$(a).style.display="block";$(div_to_hide).style.display="none";$(div_bottom_id).className=b};PM.Media.showLinks=function(a){eltId=a.id+"_links";if($(eltId)!=null){clearTimeout(PM.Media.linkTimer[eltId]);PM.Media.linkTimer[eltId]=-1;if(PM.Media.isOn[eltId]==false||PM.Media.isOn[eltId]==null){if(PM.Media.isFading[eltId]!=null&&PM.Media.isFading[eltId]==true){PM.UI.Effect.stop(eltId)}PM.Media.isOn[eltId]=true;PM.UI.Effect.fadeIn(eltId,{duration:300,opacity:0.85});PM.UI.Effect.move(eltId,{duration:300,left:"0px"})}}};PM.Media.hideLinks=function(a){if($(a)!=null){PM.Media.isOn[a]=false;PM.Media.isFading[a]=true;PM.UI.Effect.move(a,{duration:500,left:"80px"});PM.UI.Effect.fadeOut(a,{duration:500,callback:function(){PM.Media.isFading[a]=false}})}};PM.Media.hideLinksWithTimer=function(a){eltId=a.id+"_links";PM.Media.linkTimer[eltId]=setTimeout("PM.Media.hideLinks('"+a.id+"_links')",PM.Media.closing_delay)};PM.Panel={panels:new Array(),activePanel:-1};PM.Panel.init=function(c,h,e,m){var b=$(c);if(b!=null){var d=h.split(".");var f=b.getElementsByTagName(d[0]);for(i=0;i<f.length;i++){if(f[i].className==d[1]){var l=PM.Panel.panels.length;PM.Panel.panels[l]=new Array();f[i].id="panel_elt_"+l;PM.Panel.panels[l][0]=f[i];PM.Panel.panels[l][1]=m.callback;var g=e.split(".");var a=f[i].getElementsByTagName(g[0]);for(j=0;j<a.length;j++){if(a[j].className==g[1]){a[j].id="panel_activate_"+l;PM.Event.add(a[j],"click",PM.Panel.toggle)}}}}PM.Event.add(document,"click",PM.Panel.testClick)}};PM.Panel.toggle=function(b){var d="";var c="";if(typeof(b)=="string"){d=b;c=d.replace(new RegExp("panel_elt_","g"),"")}else{d=b.target?b.target:b.srcElement;d=d.id;c=d.replace(new RegExp("panel_activate_","g"),"")}var a=PM.Panel.panels[c];if(a[0].className.match("expanded")){PM.Dom.Class.replace(a[0],"expanded","collapsed");a[1].apply(null,[a[0],false]);PM.Panel.activePanel=-1}else{if(PM.Panel.activePanel!=-1){PM.Panel.toggle(PM.Panel.activePanel)}PM.Dom.Class.replace(a[0],"collapsed","expanded");a[1].apply(null,[a[0],true]);PM.Panel.activePanel=a[0].id}};PM.Panel.testClick=function(b){if(PM.Panel.activePanel!=-1){if(document.all){var a=window.event.srcElement;while(a.parentElement!=null){if(a.id==PM.Panel.activePanel){return}else{a=a.parentElement}}PM.Panel.toggle(PM.Panel.activePanel);return}else{if(b){a=b.target;while(a.parentNode!=null){if(a.id==PM.Panel.activePanel){return}else{a=a.parentNode}}PM.Panel.toggle(PM.Panel.activePanel);return}}}};PM.Steps={activeStep:-1,nbSteps:0,callback:null};PM.Steps.init=function(e,a,m){var c=$(e);if(c!=null){var f=a.split(".");var g=c.getElementsByTagName(f[0]);var n=new Array();var l=0;if(m.callback){PM.Steps.callback=m.callback}for(i=0;i<g.length;i++){if(g[i].className==f[1]){var d=g[i].getElementsByTagName("a");for(j=0;j<d.length;j++){PM.Steps.nbSteps++;var b=d[j].href.split("#");d[j].href="javascript: return false;";if(i==0){PM.Steps.activeStep=b[1]}d[j].id="anchor_"+b[1];PM.Event.add(d[j],"click",PM.Steps.changeStep);var h=d[j].getElementsByTagName("span");for(k=0;k<h.length;k++){if(h[k].className=="stepnumber"){if(i==0){h[k].className="stepnumber selected"}else{h[k].className="stepnumber inactive"}h[k].id="stepnumber_"+b[1]}else{if(h[k].className=="stepname"){h[k].id="stepname_"+b[1];n[n.length]=h[k];if(h[k].offsetWidth>l){l=h[k].offsetWidth}}}}}}}l=l+3;$("ws_wave").style.left=l+"px";for(z=0;z<n.length;z++){n[z].style.width=l+"px"}}};PM.Steps.changeStep=function(e){var c="";var b="";if(typeof(e)=="string"){c=$("anchor_"+e);b=c.id.split("anchor_")}else{PM.Util.preventDefault(e);if(document.all){c=window.event.srcElement}else{c=e.target}b=c.id.split("stepnumber_")}b=b[1];if($("stepnumber_"+b).className.split(" inactive").length<=1){if(b!=PM.Steps.activeStep){$(PM.Steps.activeStep).style.display="none";$("stepnumber_"+PM.Steps.activeStep).className="stepnumber";$("stepname_"+PM.Steps.activeStep).style.visibility="hidden";$(b).style.display="block";$("stepnumber_"+b).className="stepnumber selected";$("stepname_"+b).style.visibility="visible"}PM.Steps.activeStep=b;var d=null;var a=parseInt(PM.Steps.activeStep.replace(new RegExp("^[^0-9]*"),""));if(a!=1){d=window.xtpage+"::Etape"+a}PM.Statistics.Tracking.writeTag(d);if(PM.Steps.callback){PM.Steps.callback.apply(null,[b])}}};PM.Steps.activateAndGoToStep=function(a){$("stepnumber_"+a).className="stepnumber";PM.Steps.changeStep(a)};PM.Steps.disableNextSteps=function(c){var b="content";for(var a=(c+1);a<=PM.Steps.nbSteps;a++){$("stepnumber_"+b+a).className="stepnumber inactive"}};PM.Assistance={active:null,elt:null,open_time:0,timer:-1,closing_delay:500,focus_closing_delay:250};PM.Assistance.init=function(f){this.activeAssistance=null;var c=$(f);var a=c.getElementsByTagName("div");for(i=0;i<a.length;i++){if(a[i].className.match("assistance_ctner")!=null){var e=PM.Dom.previousObject(a[i]);var b=e.className;var d=PM.Util.collectionToArray(e.getElementsByTagName("select"));d=d.concat(PM.Util.collectionToArray(e.getElementsByTagName("textarea")));d=d.concat(PM.Util.collectionToArray(e.getElementsByTagName("input")));for(j=0;j<d.length;j++){PM.Event.add(d[j],"focus",PM.Assistance.showOnFocus.bindObj(a[i]));if(d[j].type=="radio"||d[j].type=="checkbox"){PM.Event.add(d[j],"mouseover",PM.Assistance.showOnOver.bindObj(a[i]));PM.Event.add(d[j],"mouseout",PM.Assistance.hideWithTimer.bindObj(a[i]))}}if(b.match("fld_rdio")||b.match("fld_chckbox")){PM.Event.add(e,"mouseover",PM.Assistance.showOnOver.bindObj(a[i]));PM.Event.add(e,"mouseout",PM.Assistance.hideWithTimer.bindObj(a[i]));PM.Event.add(a[i],"mouseover",PM.Assistance.showOnOver.bindObj(a[i]));PM.Event.add(a[i],"mouseout",PM.Assistance.hideWithTimer.bindObj(a[i]))}}}PM.Event.add(document,"click",PM.Assistance.testClick)};PM.Assistance.showOnFocus=function(a){clearTimeout(PM.Assistance.timer);PM.Assistance.timer=-1;if(PM.Assistance.elt!=null){PM.Assistance.elt.style.display="none";PM.Assistance.elt=null}if(this!=PM.Assistance.active){if(PM.Assistance.active!=null){PM.Assistance.active.style.display="none"}PM.Assistance.active=this;this.style.display="block"}};PM.Assistance.showOnOver=function(a,b){clearTimeout(PM.Assistance.timer);PM.Assistance.timer=-1;if(PM.Assistance.elt!=null){PM.Assistance.elt.style.display="none";PM.Assistance.elt=null}if(PM.Assistance.active!=null){PM.Assistance.active.style.display="none"}this.style.display="block"};PM.Assistance.hide=function(){if(PM.Assistance.elt!=null){PM.Assistance.elt.style.display="none";PM.Assistance.elt=null}if(PM.Assistance.active!=null){PM.Assistance.active.style.display="block"}};PM.Assistance.hideWithTimer=function(a){PM.Assistance.elt=this;PM.Assistance.timer=setTimeout("PM.Assistance.hide()",PM.Assistance.closing_delay)};PM.Assistance.hideOnBlur=function(a){if(PM.Assistance.active!=null){PM.Assistance.active.style.display="none";PM.Assistance.active=null}};PM.Assistance.hideOnBlurWithTimer=function(a){PM.Assistance.timer=setTimeout("PM.Assistance.hideOnBlur()",PM.Assistance.focus_closing_delay)};PM.Assistance.testClick=function(a){var b=PM.Util.getElementFromEvent(a);while(PM.Dom.parent(b)!=null){if(PM.Assistance.active!=null&&b==PM.Dom.parent(PM.Assistance.active)){return}else{b=PM.Dom.parent(b)}}if(PM.Assistance.active!=null){PM.Assistance.active.style.display="none";PM.Assistance.active=null}return};PM.History={historyList:null};PM.History.init=function(a,b){PM.Forms.registerAction($(a),function(){var c=$(b);if(c){c.value=PM.History.historyList}return true})};PM.History.registerEvent=function(d,a){var c="";if(PM.History.historyList!=null&&PM.History.historyList!=""){c=PM.History.historyList+";"}for(var b=0;b<arguments.length;b++){if(b>0){c+=","}c+=arguments[b]}PM.History.historyList=c};PM.History.removeEvent=function(d,b){var a="";for(var c=0;c<arguments.length;c++){if(c>0){a+=","}a+=arguments[c]}var e=PM.History.historyList.indexOf(a);if(e>=0){PM.History.historyList=PM.History.historyList.substring(0,e-1)+PM.History.historyList.substring(e+a.length);if(PM.History.historyList.indexOf(";")==0){PM.History.historyList=PM.History.historyList.substring(1,PM.History.historyList.length)}}};PM.History.replayEvents=function(hiddenFieldId){var jsEvents=$(hiddenFieldId).value.split(";");for(var i=0;i<jsEvents.length;i++){var oneEvent=jsEvents[i].split(",");var execFunc="var res = "+oneEvent[0]+"(";for(var j=1;j<oneEvent.length;j++){if(j>1){execFunc+=","}var quotes="'";if(oneEvent[j]=="true"||oneEvent[j]=="false"){quotes=""}execFunc+=quotes+oneEvent[j]+quotes}execFunc+=")";eval(execFunc)}};PM.Tabs={curContent:null,defaultContent:null};PM.Tabs.init=function(h,b,m){if(!m){m={}}var c="mouseover";if(m.event){c=m.event}var f="a";if(m.prefix){f=m.prefix}var l=$j("."+b);PM.Tabs.defaultContent=(m.defaultContent)?m.defaultContent:l.children()[0].id;for(var e=0;e<l.children().size();e++){var g=l.children()[e];var a=g.id;if(!a){continue}if(PM.Tabs.defaultContent==a){PM.Tabs.curContent=a;PM.UI.show(a)}else{PM.UI.hide(a)}var d=(m.tabIsFirstChild)?$(f+$j(g).children()[0].id):$(f+a);if(d){PM.Event.add(d,c,function(){PM.Tabs.show(this.contentId,h)}.bindObj({contentId:a}));PM.Event.add(d,"click",function(n){PM.Util.preventDefault(n)})}}if(c=="mouseover"){PM.Event.add($(h),"mouseleave",function(n){var o=$(this.ctnrId);o.className="ctnr_"+PM.Tabs.defaultContent;PM.Tabs.show(PM.Tabs.defaultContent,o)}.bindObj({ctnrId:h}))}};PM.Tabs.show=function(b,a){if(PM.Tabs.curContent){PM.UI.hide(PM.Tabs.curContent)}PM.UI.show(b);PM.Tabs.curContent=b;if(null!=$(a)){$(a).className="ctnr_"+b}};PM.Toggle=function(a,b){this.triggerElt=$(a);this.targetElt=PM.Util.getOption(b,"targetElt",this.triggerElt);this.classOn=PM.Util.getOption(b,"classOn","highlight");this.classOff=PM.Util.getOption(b,"classOff","");this.preventDefault=PM.Util.getOption(b,"preventDefault",false);this.closingElts=PM.Util.getOption(b,"closingElts",[]);this.closingOnClickOutside=PM.Util.getOption(b,"closingOnClickOutside",true);if(this.closingOnClickOutside==true){this.currentClickFction=this.clickOutside.bindObj(this)}PM.Event.add(this.triggerElt,"click",this.clickOnTrigger.bindObj(this),this.preventDefault);for(var c=0;c<this.closingElts.length;c++){PM.Event.add(this.closingElts[c],"click",this.clickOnClosing.bindObj(this),this.preventDefault)}if(ie6){this.targetFrameDiv=PM.Dom.createElement("div");this.targetFrameId=this.targetElt.id+"_iframe";this.targetFrameDiv.innerHTML='<iframe id="'+this.targetFrameId+'" src="javascript:false;" style="width:0; position: absolute; top:0px; left:0px; filter:alpha(opacity=0); z-index: -1; height: 0;"></iframe>';this.targetElt.appendChild(this.targetFrameDiv)}};PM.Toggle.prototype.clickOnTrigger=function(){if(PM.Dom.Class.has(this.targetElt,this.classOn)){this.close()}else{this.open()}};PM.Toggle.prototype.clickOnClosing=function(){if(PM.Dom.Class.has(this.targetElt,this.classOn)){this.close()}};PM.Toggle.prototype.open=function(){PM.Debug.log("[Toggle] ouverture de l'lment "+this.targetElt.id,PM.Debug.Type.INFO);PM.Dom.Class.replace(this.targetElt,this.classOff,this.classOn);if(ie6){this.updateiFramePosition();this.targetFrame.style.display="block"}if(typeof(this.currentClickFction)!="undefined"){PM.Event.add(document,"click",this.currentClickFction)}};PM.Toggle.prototype.close=function(){PM.Debug.log("[Toggle] fermeture de l'lment "+this.targetElt.id,PM.Debug.Type.INFO);PM.Dom.Class.replace(this.targetElt,this.classOn,this.classOff);if(ie6){this.targetFrame.style.display="none"}if(typeof(this.currentClickFction)!="undefined"){PM.Event.remove(document,"click",this.currentClickFction)}};PM.Toggle.prototype.clickOutside=function(b){var a=PM.Util.getElementFromEvent(b);if(!PM.Dom.withinElement(a,this.targetElt)){PM.Debug.log("[Toggle] Clic en dehors de la cible",PM.Debug.Type.INFO);this.close()}};PM.Toggle.prototype.updateiFramePosition=function(){this.targetFrame=$(this.targetFrameId);this.targetFrame.style.top=0+"px";this.targetFrame.style.left=0+"px";this.targetFrame.style.width=this.targetElt.offsetWidth+"px";this.targetFrame.style.height=this.targetElt.offsetHeight+"px"};Array.prototype.contains=function(b){var a=this.length;while(a--){if(this[a]===b){return true}}return false};PM.ABTesting=function(a,b){this.testName=a;this.config=b;this.tests=b.configuration;this.cookieName=PM.ABTesting.COOKIE_PREFIX+a};PM.ABTesting.COOKIE_PREFIX="ab_";PM.ABTesting.CODE_VERSION="cv";PM.ABTesting.XITI_TAG="xt";PM.ABTesting.prototype.getCodeVersion=function(){var b=PM.Cookie.get(this.cookieName);if(b==null){PM.Cookie.set(this.cookieName,"",PM.Util.getOption(this.config,"maxAge",30))}var e=PM.Util.getInterrogationUrlParam("abversion");if(typeof(e)!="undefined"){var c=new RegExp("^"+this.testName+".(.*)");var a=c.exec(e);if(a!=null){PM.Debug.log("Version force : ",a[1]);PM.Cookie.setParam(this.cookieName,PM.ABTesting.CODE_VERSION,a[1]);PM.Cookie.setParam(this.cookieName,PM.ABTesting.XITI_TAG,this.getXitiTag(a[1]))}}if(!this.isCookieValid()){var d=this.doChoice();PM.Cookie.setParam(this.cookieName,PM.ABTesting.CODE_VERSION,d);PM.Cookie.setParam(this.cookieName,PM.ABTesting.XITI_TAG,this.getXitiTag(d))}return PM.Cookie.getParam(this.cookieName,PM.ABTesting.CODE_VERSION)};PM.ABTesting.prototype.doChoice=function(){var a=0;for(var c=0;c<this.tests.length;c++){a+=parseInt(PM.Util.getOption(this.tests[c],"weight",1))}var d=Math.floor(Math.random()*a);var b=0;for(var c=0;c<this.tests.length;c++){b+=parseInt(PM.Util.getOption(this.tests[c],"weight",1));if(b>d){return this.tests[c].version}}};PM.ABTesting.prototype.isCookieValid=function(){var b=false;var c=PM.Cookie.getParam(this.cookieName,PM.ABTesting.XITI_TAG);if(c!=null){for(var a=0;a<this.tests.length;a++){if(this.tests[a].xitiTag==c){b=(this.tests[a].version==PM.Cookie.getParam(this.cookieName,PM.ABTesting.CODE_VERSION));break}}}return b};PM.ABTesting.prototype.getXitiTag=function(a){var c=null;for(var b=0;b<this.tests.length;b++){if(this.tests[b].version==a){c=this.tests[b].xitiTag}}return c};PM.Util.LineAdder=function(d,a,m,e,g,b,f,c,l,n){this.lineAdderLinkId=d;this.urlRequest=a;this.jsonLinesName=m;this.lineAdderElement=e;this.lineAdderNoResult=g;this.lineAdderNoMoreResult=b;this.lineAdderMethod=f;this.lastLineId=c;this.getLineIdMethod=l;this.lineAdderWaitId=PM.Util.getOption(n,"line_adder_wait_id",null);this.lineAdderCallbackMethod=PM.Util.getOption(n,"line_adder_callback_method",null);this.lineAdderInitCall=PM.Util.getOption(n,"line_adder_init_call",false);this.isLineAdding=false;this.nbLineAdderCall=0;this.hasMoreResults=true;this.nbResults=0;if(!this.lineAdderMethod){PM.Debug.log("La mthode d'ajout de ligne n'est pas dfinie",PM.Debug.Type.DEBUG);return}if(!this.getLineIdMethod){PM.Debug.log("La mthode indiquant l'id de la ligne ajoute n'est pas dfinie",PM.Debug.Type.DEBUG);return}var h=new PM.AjaxPaginationHistory(this.requestLines.bindObj(this),"my_sales_page_number");PM.Event.add(this.lineAdderLinkId,"click",h.append.bindObj(h,null),true);if(this.lineAdderInitCall){PM.Event.add(this.lineAdderLinkId,PM.Event.Type.INIT,this.requestLines.bindObj(this,h.initAjaxResults.bindObj(h)),true)}else{PM.Event.add(document,PM.Event.Type.INIT,h.initAjaxResults.bindObj(h))}};PM.Util.LineAdder.ReturnCode={OK:0,NOK:1};PM.Util.LineAdder.prototype.requestLines=function(a){if(!this.isLineAdding){this.isLineAdding=true;if(this.urlRequest!=null&&this.lineAdderElement!=null){PM.Ajax.request(this.urlRequest,this.computeAjaxResponse.bindObj(this,a),{urlParams:"last_line_id="+(this.lastLineId==null?"":this.lastLineId),isAsynchronous:true,evalScripts:true,method:PM.Ajax.GET,errorCallback:this.computeAjaxError.bindObj(this),waitId:this.lineAdderWaitId})}else{PM.Debug.log("Les lignes ne peuvent tre ajoutes",PM.Debug.Type.DEBUG)}}else{PM.Debug.log("Une requte est en cours...",PM.Debug.Type.DEBUG)}};PM.Util.LineAdder.prototype.computeAjaxResponse=function(callbackMethod,options){this.isLineAdding=false;eval("var jsonLines = "+options.XmlHttpObject.responseText);var nbLines=jsonLines.values.nb_lines;this.nbResults+=nbLines;if(jsonLines.code==PM.Util.LineAdder.ReturnCode.OK){this.addLines(jsonLines);if(this.lineAdderCallbackMethod){this.lineAdderCallbackMethod.call(null,{nb_line_adder_call:this.nbLineAdderCall,has_more_results:this.hasMoreResults,nb_results:this.nbResults})}if(nbLines>0){this.lastLineId=this.getLineIdMethod.call(null,jsonLines.values.lines[nbLines-1])}if(callbackMethod){callbackMethod.call(null)}}else{PM.Debug.log("Les donnes n'ont pas pu tre rcupres ("+jsonLines.message+")",PM.Debug.Type.DEBUG);if(jsonLines.values.loginURL){PM.Ajax.authenticate({loginURL:jsonLines.values.loginURL})}}};PM.Util.LineAdder.prototype.computeAjaxError=function(a){this.isLineAdding=false;PM.Debug.log("Problme avec la requte Ajax",PM.Debug.Type.DEBUG)};PM.Util.LineAdder.prototype.addLines=function(e){this.nbLineAdderCall++;if(!e.values.has_more){this.hasMoreResults=false;var b=$(this.lineAdderLinkId);if(b){b.parentNode.removeChild(b)}if(this.nbResults==0){PM.UI.show($(this.lineAdderNoResult))}else{PM.UI.show($(this.lineAdderNoMoreResult))}if(ie6){PM.UI.hide($(this.lineAdderWaitId))}}var d=$(this.lineAdderElement);if(d){var a=e.values.nb_lines;for(var c=0;c<a;c++){this.lineAdderMethod.call(null,e.values.lines[c],d,c)}}else{PM.Debug.log("L'lment auxquel il faut raccrocher les lignes n'existe pas: "+this.lineAdderElement,PM.Debug.Type.DEBUG)}};PM.SwapAccountBlock=function(e,g,a,b,c,d,h,f,l){this.start=b;this.end=c;this.button=$(e);this.target=$(g);this.neighboor=$(a);this.cookieName=h;this.valueNameCookie=f;this.callback=l;this.isAlreadySwapping=false;if(d!=null){this.hidden=d}else{this.hidden=false}PM.Event.add(this.button,"click",this.mutexOnSlide.bindObj(this))};PM.SwapAccountBlock.prototype.mutexOnSlide=function(a){if(!this.isAlreadySwapping){this.isAlreadySwapping=true;PM.Util.preventDefault(a);this.slideElement();this.callback.call(null,{is_hidden:this.hidden})}};PM.SwapAccountBlock.prototype.slideElement=function(){if(this.hidden){PM.UI.Effect.slide(this.neighboor,{marginLeft:this.start},{callback:function(){this.isAlreadySwapping=false}.bindObj(this)});PM.UI.Effect.slide(this.target,{marginLeft:this.end});this.hidden=false;PM.Cookie.setParam(this.cookieName,this.valueNameCookie,this.hidden);PM.Dom.Class.remove($("main"),"navIsHidden");this.button.style.marginRight="0px"}else{PM.UI.Effect.slide(this.target,{marginLeft:"-"+this.start},{callback:function(){PM.Dom.Class.add($("main"),"navIsHidden");PM.UI.Effect.slide(this.button,{marginRight:"-15px"},{duration:200});this.isAlreadySwapping=false}.bindObj(this)});PM.UI.Effect.slide(this.neighboor,{marginLeft:this.end});this.hidden=true;PM.Cookie.setParam(this.cookieName,this.valueNameCookie,this.hidden)}};PM.BarcodeReader={};PM.BarcodeReader.addPopupEvent=function(b,a){PM.Event.add(b,"click",PM.PopUp.open.bindObj(null,a,PM.PopUp.Type.PICTURE,640,730,"Lecteur de code-barres"),true)};PM.ProductListing={};PM.ProductListing.search=function(d,a,e,h,c,f,b){$j("#"+f).show();var g="kw="+a+"&p="+e;if(h){g+="&nav="+h}PM.Ajax.request(d,function(l){if($("block_more_page_"+(e-1))){PM.UI.hide("block_more_page_"+(e-1))}PM.UI.hide(f);PM.UI.show(c);var m=l.responseText;$(c).innerHTML+=m;PM.Util.evalScript(m);if($j("#alternative_results")){$j("#alternative_results").appendTo("#product_listing")}if($("block_more_page_"+e)){PM.Event.add($("block_more_page_"+e),"click",PM.ProductListing.search.bindObj(null,d,a,e+1,h,c,"more_result_loader_"+e,b),true)}if(b){b.apply(null)}},{urlParams:g,waitId:f})};PM.ZoomImage={};PM.ZoomImage.init=function(f,a,h,l,c,d,e){var b=$j("#"+f);var g={};b.iviewer({src:a,ui_disabled:true,initCallback:function(){g=this;$j("#"+h).click(function(){g.zoom_by(1)});$j("#"+l).click(function(){g.zoom_by(-1)});$j("#"+d).click(function(){g.set_zoom(100)});$j("#"+c).click(function(){g.fit();g.center()})},onFinishLoad:function(){if(g.img_object.orig_width<b.width()&&g.img_object.orig_height<b.height()){g.set_zoom(100)}},onZoom:function(o){if(g.img_object.orig_width<500&&g.img_object.orig_height<500){if(o<100){g.set_zoom(100);return false}}else{var m=g.img_object.orig_width>g.img_object.orig_height?g.img_object.orig_width:g.img_object.orig_height;var n=500/m*100;if(o<n){g.set_zoom(n);return false}}}});g.img_object.object.mousewheel(function(m,n){if(e!=null){e.apply(null)}});b.mousewheel(function(n,o){var m=o>0?1:-1;g.zoom_by(m);if(e!=null){e.apply(null)}return false})};PM.SubmitAutocompleter={};PM.SubmitAutocompleter.init=function(f,a,d,c,e,g){var b={parse:$j.Autocompleter.parseFunctions.submitCompletionParse,formatItem:$j.Autocompleter.formatItemFunctions.submitCompletionFormatItem,doAutoFill:$j.Autocompleter.doAutoFillFunctions.submitDoAutoFill,formatLi:$j.Autocompleter.formatLiFunctions.submitFormatLi,matchSubset:false,cleanSearch:true,autoFill:true,includeInputInLoop:false,delay:c,minChars:e,max:15,scroll:true,width:202,verticalGap:-1,scrollHeight:220,heightToAddForIE:20,addMaxHeightToList:false,separatorLabel:g,resultsClass:"auto_complete_content",hasPressedKey:true,highlight:function(l,h){return l},onChange:function(h){$(a).value=h},afterSelect:function(h){$(a).value=h.data.key}};$j(f).autocomplete(d,b)};