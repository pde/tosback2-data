
(function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};$.extend($.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),scrollParent:function(){var scrollParent;if(($.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.css(this,"position"))&&(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}
return(/fixed/).test(this.css("position"))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img);}
return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.support.selectstart="onselectstart"in document.createElement("div");$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault();});},enableSelection:function(){return this.unbind(".ui-disableSelection");}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;}});})(jQuery);(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove");}catch(e){}}
_cleanData(elems);};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{})._init();}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(value===undefined){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(value===undefined){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});})(jQuery);(function($,undefined){var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});$.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});})(jQuery);(function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}
position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=round(position.left);position.top=round(position.top);}
collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}
else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if((position.top+myOffset+atOffset+offset)>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))){position.top+=myOffset+atOffset+offset;}}
else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if((position.top+myOffset+atOffset+offset)>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();}(jQuery));(function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}
if(this.options.addClasses){this.element.addClass("ui-draggable");}
if(this.options.disabled){this.element.addClass("ui-draggable-disabled");}
this._mouseInit();},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}
this.handle=this._getHandle(event);if(!this.handle){return false;}
$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css($(this).offset()).appendTo("body");});return true;},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}
this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));if(o.containment){this._setContainment();}
if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}
return true;},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}
if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}
if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
return false;},_mouseStop:function(event){var element,that=this,elementInDom=false,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}
if(this.dropped){dropped=this.dropped;this.dropped=false;}
element=this.element[0];while(element&&(element=element.parentNode)){if(element===document){elementInDom=true;}}
if(!elementInDom&&this.options.helper==="original"){return false;}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);});if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}
return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}
return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if((this.offsetParent[0]===document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var over,c,ce,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
if(o.containment==="document"||o.containment==="window"){this.containment=[o.containment==="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o.containment==="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(o.containment==="document"?0:$(window).scrollLeft())+$(o.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?0:$(window).scrollTop())+($(o.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}
if(!(/^(document|window|parent)$/).test(o.containment)&&o.containment.constructor!==Array){c=$(o.containment);ce=c[0];if(!ce){return;}
over=($(ce).css("overflow")!=="hidden");this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderRightWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderBottomWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c;}else if(o.containment.constructor===Array){this.containment=o.containment;}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName),pageX=event.pageX,pageY=event.pageY;if(this.originalPosition){if(this.containment){if(this.relative_container){co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}
else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}
if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}
this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type==="drag"){this.positionAbs=this._convertPositionTo("absolute");}
return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui){var inst=$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=this.shouldRevert;}
this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"});}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=false,thisSortable=this;this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){innermostIntersecting=true;$.each(inst.sortables,function(){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.contains(thisSortable.instance.element[0],this.instance.element[0])){innermostIntersecting=false;}
return innermostIntersecting;});}
if(innermostIntersecting){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0];};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst;}
if(this.instance.currentItem){this.instance._mouseDrag(event);}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove();}
inst._trigger("fromSortable",event);inst.dropped=false;}}});}});$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;if(t.css("cursor")){o._cursor=t.css("cursor");}
t.css("cursor",o.cursor);},stop:function(){var o=$(this).data("ui-draggable").options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("opacity")){o._opacity=t.css("opacity");}
t.css("opacity",o.opacity);},stop:function(event,ui){var o=$(this).data("ui-draggable").options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){i.overflowOffset=i.scrollParent.offset();}},drag:function(event){var i=$(this).data("ui-draggable"),o=i.options,scrolled=false;if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+i.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;}}
if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+i.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}
if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top;b=t+inst.snapElements[i].height;if(!((l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d)||(l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d)||(l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d)||(l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d))){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left;}}
first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left;}}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(){var min,o=this.data("ui-draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}
t.css("zIndex",o.zIndex);},stop:function(event,ui){var o=$(this).data("ui-draggable").options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});})(jQuery);(function($,undefined){function num(v){return parseInt(v,10)||0;}
function isNumber(value){return!isNaN(parseInt(value,10));}
$.widget("ui.resizable",$.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize();}
this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}
n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});if("se"===handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");}
this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=$(this.handles[i],this.element).show();}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
if(!$(this.handles[i]).length){continue;}}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}
that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return;}
$(this).removeClass("ui-resizable-autohide");that._handles.show();}).mouseleave(function(){if(o.disabled){return;}
if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide();}});}
this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}
this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}
return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;if((/absolute/).test(el.css("position"))){el.css({position:"absolute",top:el.css("top"),left:el.css("left")});}else if(el.is(".ui-draggable")){el.css({position:"absolute",top:iniPos.top,left:iniPos.left});}
this._renderProxy();curleft=num(this.helper.css("left"));curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,prevWidth=this.size.width,prevHeight=this.size.height,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];if(!trigger){return false;}
data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}
data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);if(this.position.top!==prevTop){props.top=this.position.top+"px";}
if(this.position.left!==prevLeft){props.left=this.position.left+"px";}
if(this.size.width!==prevWidth){props.width=this.size.width+"px";}
if(this.size.height!==prevHeight){props.height=this.size.height+"px";}
el.css(props);if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}
if(!$.isEmptyObject(props)){this._trigger("resize",event,this.ui());}
return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left))||null;top=(parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}
that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}
$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}
return false;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}
if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}
if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}
if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}
this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(isNumber(data.left)){this.position.left=data.left;}
if(isNumber(data.top)){this.position.top=data.top;}
if(isNumber(data.height)){this.size.height=data.height;}
if(isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(isNumber(data.width)){data.height=(data.width/this.aspectRatio);}
if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}
if(isminh){data.height=o.minHeight;}
if(ismaxw){data.width=o.maxWidth;}
if(ismaxh){data.height=o.maxHeight;}
if(isminw&&cw){data.left=dw-o.minWidth;}
if(ismaxw&&cw){data.left=dw-o.maxWidth;}
if(isminh&&ch){data.top=dh-o.minHeight;}
if(ismaxh&&ch){data.top=dh-o.maxHeight;}
if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}
return data;},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}
var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.borderDif){this.borderDif=[];borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")];paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];for(j=0;j<borders.length;j++){this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0);}}
prel.css({height:(element.height()-this.borderDif[0]-this.borderDif[2])||0,width:(element.width()-this.borderDif[1]-this.borderDif[3])||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}
that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).data("ui-resizable"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}
that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}
else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=($.ui.hasScroll(ce,"left")?ce.scrollWidth:cw);height=($.ui.hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}
if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;}
that.position.left=o.helper?co.left:0;}
if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;}
that.position.top=that._helper?co.top:0;}
that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;woset=Math.abs((that._helper?that.offset.left-cop.left:(that.offset.left-cop.left))+that.sizeDiff.width);hoset=Math.abs((that._helper?that.offset.top-cop.top:(that.offset.top-co.top))+that.sizeDiff.height);isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){woset-=that.parentData.left;}
if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;}}
if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;}}},stop:function(){var that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}
if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)});});};if(typeof(o.alsoResize)==="object"&&!o.alsoResize.parentNode){if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize);}
else{$.each(o.alsoResize,function(exp){_store(exp);});}}else{_store(o.alsoResize);}},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});};if(typeof(o.alsoResize)==="object"&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c);});}else{_alsoResize(o.alsoResize);}},stop:function(){$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).data("ui-resizable");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).data("ui-resizable");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth=newWidth+gridX;}
if(isMinHeight){newHeight=newHeight+gridY;}
if(isMaxWidth){newWidth=newWidth-gridX;}
if(isMaxHeight){newHeight=newHeight-gridY;}
if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;that.position.left=op.left-ox;}}});})(jQuery);(function($,undefined){var uid=0,hideProps={},showProps={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide";showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show";$.widget("ui.accordion",{version:"1.10.2",options:{active:0,animate:{},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var options=this.options;this.prevShow=this.prevHide=$();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null)){options.active=0;}
this._processPanels();if(options.active<0){options.active+=this.headers.length;}
this._refresh();},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?$():this.active.next(),content:!this.active.length?$():this.active.next()};},_createIcons:function(){var icons=this.options.icons;if(icons){$("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader);this.headers.addClass("ui-accordion-icons");}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){if(/^ui-accordion/.test(this.id)){this.removeAttribute("id");}});this._destroyIcons();contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){if(/^ui-accordion/.test(this.id)){this.removeAttribute("id");}});if(this.options.heightStyle!=="content"){contents.css("height","");}},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
if(key==="event"){if(this.options.event){this._off(this.headers,this.options.event);}
this._setupEvents(value);}
this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0);}
if(key==="icons"){this._destroyIcons();if(value){this._createIcons();}}
if(key==="disabled"){this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value);}},_keydown:function(event){if(event.altKey||event.ctrlKey){return;}
var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1];break;}
if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);toFocus.focus();event.preventDefault();}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey){$(event.currentTarget).prev().focus();}},refresh:function(){var options=this.options;this._processPanels();if((options.active===false&&options.collapsible===true)||!this.headers.length){options.active=false;this.active=$();}if(options.active===false){this._activate(0);}else if(this.active.length&&!$.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$();}else{this._activate(Math.max(0,options.active-1));}}else{options.active=this.headers.index(this.active);}
this._destroyIcons();this._refresh();},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent(),accordionId=this.accordionId="ui-accordion-"+
(this.element.attr("id")||++uid);this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=header.next(),panelId=panel.attr("id");if(!headerId){headerId=accordionId+"-header-"+i;header.attr("id",headerId);}
if(!panelId){panelId=accordionId+"-panel-"+i;panel.attr("id",panelId);}
header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId);}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"});}
this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height());}).height(maxHeight);}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0]){return;}
active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop});},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$();},_setupEvents:function(event){var events={keydown:"_keydown"};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers);},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if((clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);active.removeClass("ui-accordion-header-active ui-state-active");if(options.icons){active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header);}
if(!clickedIsActive){clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(options.icons){clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader);}
clicked.next().addClass("ui-accordion-content-active");}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate){this._animate(toShow,toHide,data);}else{toHide.hide();toShow.show();this._toggleComplete(data);}
toHide.attr({"aria-expanded":"false","aria-hidden":"true"});toHide.prev().attr("aria-selected","false");if(toShow.length&&toHide.length){toHide.prev().attr("tabIndex",-1);}else if(toShow.length){this.headers.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}
toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0});},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||(toShow.index()<toHide.index())),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data);};if(typeof options==="number"){duration=options;}
if(typeof options==="string"){easing=options;}
easing=easing||options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length){return toShow.animate(showProps,duration,easing,complete);}
if(!toShow.length){return toHide.animate(hideProps,duration,easing,complete);}
total=toShow.show().outerHeight();toHide.animate(hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now);}});toShow.hide().animate(showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){adjust+=fx.now;}else if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0;}}});},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(toHide.length){toHide.parent()[0].className=toHide.parent()[0].className;}
this._trigger("activate",null,data);}});})(jQuery);(function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}
suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}
break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(event);event.preventDefault();}
break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;event.preventDefault();return;}
if(suppressKeyPressRepeat){return;}
var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}
this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:$(),role:null}).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)){that.close();}});});}},menufocus:function(event,ui){if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}
var item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}else{this.liveRegion.text(item.value);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}
if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}
this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}
if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var that=this,index=++requestIndex;return function(content){if(index===requestIndex){that.__response(content);}
that.pending--;if(!that.pending){that.element.removeClass("ui-autocomplete-loading");}};},__response:function(content){if(content){content=this._normalize(content);}
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({label:item.label||item.value,value:item.value||item.label},item);});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){this._value(this.term);this.menu.blur();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}
if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}
this.liveRegion.text(message);}});}(jQuery));(function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form){radios=$(form).find("[name='"+name+"']");}else{radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled");}else{this.element.prop("disabled",this.options.disabled);}
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"",focusClass="ui-state-focus";if(options.label===null){options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());}
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled){return;}
if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled){return;}
$(this).removeClass(activeClass);}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass);}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass);});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){if(clickDragged){return;}
that.refresh();});this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){if(options.disabled){return;}
clickDragged=false;startXPos=event.pageX;startYPos=event.pageY;}).bind("mouseup"+this.eventNamespace,function(event){if(options.disabled){return;}
if(startXPos!==event.pageX||startYPos!==event.pageY){clickDragged=true;}});}
if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged){return false;}});}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged){return false;}
$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null;});}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled){return false;}
if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox";}else if(this.element.is("[type=radio]")){this.type="radio";}else if(this.element.is("input")){this.type="input";}else{this.type="button";}
if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}
this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.prop("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){if(value){this.element.prop("disabled",true);}else{this.element.prop("disabled",false);}
return;}
this._resetButton();},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}
if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",$.trim(buttonText));}}}else{buttonClasses.push("ui-button-text-only");}
buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
this._super(key,value);},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}});}(jQuery));(function($,undefined){var sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};$.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css("top",pos.top-topOffset);}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable){this._makeDraggable();}
if(this.options.resizable&&$.fn.resizable){this._makeResizable();}
this._isOpen=false;},_init:function(){if(this.options.autoOpen){this.open();}},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType)){return $(element);}
return this.document.find(element||"body").eq(0);},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.originalTitle){this.element.attr("title",this.originalTitle);}
next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0]){next.before(this.element);}else{originalPosition.parent.append(this.element);}},widget:function(){return this.uiDialog;},disable:$.noop,enable:$.noop,close:function(event){var that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false){return;}
this._isOpen=false;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length){$(this.document[0].activeElement).blur();}
this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event);});},isOpen:function(){return this._isOpen;},moveToTop:function(){this._moveToTop();},_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;if(moved&&!silent){this._trigger("focus",event);}
return moved;},open:function(){var that=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable();}
return;}
this._isOpen=true;this.opener=$(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);this._show(this.uiDialog,this.options.show,function(){that._focusTabbable();that._trigger("focus");});this._trigger("open");},_focusTabbable:function(){var hasFocus=this.element.find("[autofocus]");if(!hasFocus.length){hasFocus=this.element.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialog;}
hasFocus.eq(0).focus();},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive){this._focusTabbable();}}
event.preventDefault();checkFocus.call(this);this._delay(checkFocus);},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){event.preventDefault();this.close(event);return;}
if(event.keyCode!==$.ui.keyCode.TAB){return;}
var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){first.focus(1);event.preventDefault();}else if((event.target===first[0]||event.target===this.uiDialog[0])&&event.shiftKey){last.focus(1);event.preventDefault();}},mousedown:function(event){if(this._moveToTop(event)){this._focusTabbable();}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});}},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus();}}});this.uiDialogTitlebarClose=$("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event);}});uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(uiDialogTitle);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")});},_title:function(title){if(!this.options.title){title.html("&#160;");}
title.text(this.options.title);},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons();},_createButtons:function(){var that=this,buttons=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)||($.isArray(buttons)&&!buttons.length)){this.uiDialog.removeClass("ui-dialog-buttons");return;}
$.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;props.click=function(){click.apply(that.element[0],arguments);};buttonOptions={icons:props.icons,text:props.showText};delete props.icons;delete props.showText;$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet);});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog);},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}
this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");that._blockFrames();that._trigger("dragStart",event,filteredUi(ui));},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui));},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()];$(this).removeClass("ui-dialog-dragging");that._unblockFrames();that._trigger("dragStop",event,filteredUi(ui));}});},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._blockFrames();that._trigger("resizeStart",event,filteredUi(ui));},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui));},stop:function(event,ui){options.height=$(this).height();options.width=$(this).width();$(this).removeClass("ui-dialog-resizing");that._unblockFrames();that._trigger("resizeStop",event,filteredUi(ui));}}).css("position",position);},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height);},_position:function(){var isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}
this.uiDialog.position(this.options.position);if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in sizeRelatedOptions){resize=true;}
if(key in resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();this._position();}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="dialogClass"){uiDialog.removeClass(this.options.dialogClass).addClass(value);}
if(key==="disabled"){return;}
this._super(key,value);if(key==="appendTo"){this.uiDialog.appendTo(this._appendTo());}
if(key==="buttons"){this._createButtons();}
if(key==="closeText"){this.uiDialogTitlebarClose.button({label:""+value});}
if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}
if(!isDraggable&&value){this._makeDraggable();}}
if(key==="position"){this._position();}
if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&!value){uiDialog.resizable("destroy");}
if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value);}
if(!isResizable&&value!==false){this._makeResizable();}}
if(key==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));}},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width){options.width=options.minWidth;}
nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto"){this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});}else{this.element.height(Math.max(0,options.height-nonContentHeight));}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight());}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_allowInteraction:function(event){if($(event.target).closest(".ui-dialog").length){return true;}
return!!$(event.target).closest(".ui-datepicker").length;},_createOverlay:function(){if(!this.options.modal){return;}
var that=this,widgetFullName=this.widgetFullName;if(!$.ui.dialog.overlayInstances){this._delay(function(){if($.ui.dialog.overlayInstances){this.document.bind("focusin.dialog",function(event){if(!that._allowInteraction(event)){event.preventDefault();$(".ui-dialog:visible:last .ui-dialog-content").data(widgetFullName)._focusTabbable();}});}});}
this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});$.ui.dialog.overlayInstances++;},_destroyOverlay:function(){if(!this.options.modal){return;}
if(this.overlay){$.ui.dialog.overlayInstances--;if(!$.ui.dialog.overlayInstances){this.document.unbind("focusin.dialog");}
this.overlay.remove();this.overlay=null;}}});$.ui.dialog.overlayInstances=0;if($.uiBackCompat!==false){$.widget("ui.dialog",$.ui.dialog,{_position:function(){var position=this.options.position,myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==="string"||(typeof position==="object"&&"0"in position)){myAt=position.split?position.split(" "):[position[0],position[1]];if(myAt.length===1){myAt[1]=myAt[0];}
$.each(["left","top"],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition;}});position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+
myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")};}
position=$.extend({},$.ui.dialog.prototype.options.position,position);}else{position=$.ui.dialog.prototype.options.position;}
isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}
this.uiDialog.position(position);if(!isVisible){this.uiDialog.hide();}}});}}(jQuery));(function($,undefined){$.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){if(this.options.disabled){event.preventDefault();}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}
this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault();},"click .ui-state-disabled > a":function(event){event.preventDefault();},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.mouseHandled=true;this.select(event);if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(!$(event.target).closest(".ui-menu").length){this.collapseAll(event);}
this.mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,regex,preventDefault=true;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");}
switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});}
if(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});menus=submenus.add(this.element);menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);if(!/[^\-\u2014\u2013\s]/.test(item.text())){item.addClass("ui-widget-content ui-menu-divider");}});menus.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);}
this._super(key,value);},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.height();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active");},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}
if(!next||!next.length||!this.active){next=this.activeMenu.children(".ui-menu-item")[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item")
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item").first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);}});}(jQuery));(function($,undefined){var dataSpace="ui-effects-";$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}
value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}
if(type.mod){return(value+type.mod)%type.mod;}
return 0>value?0:type.max<value?type.max:value;}
function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}
return inst;}
return colors[string];}
color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}
if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}
var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}
if(type==="string"){return this.parse(stringParse(red)||colors._default);}
if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}
if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}
inst[cache]=space.to(inst._rgba);}
inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}
return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}
return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}
if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else if(startValue-endValue>type.mod/2){startValue-=type.mod;}}
result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}
var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}
return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}
if(i&&i<3){v=Math.round(v*100)+"%";}
return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}
return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}
return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}
if(h*2<1){return q;}
if(h*3<2){return p+(q-p)*((2/3)-h)*6;}
return p;}
spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}
var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/diff)+360;}else if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}
if(diff===0){s=0;}else if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}
return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}
var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}
if(value===undefined){return this[cache].slice();}
var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}
local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}
color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}
if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}
if(value==null&&prop.empty){return this;}
if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}
local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}
value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}
value=value.toRgbaString();}
try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}
jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}
return diff;}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){$.extend($.effects,{version:"1.10.2",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i;for(i=0;i<set.length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined){val="";}
element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}
return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}
switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}
return{x:x,y:y};},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}
element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}
element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}}
return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}
effect={effect:effect};if(options==null){options={};}
if($.isFunction(options)){callback=options;speed=null;options={};}
if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
if(options){$.extend(effect,options);}
speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}
function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}
if(typeof option==="string"&&!$.effects.effect[option]){return true;}
if($.isFunction(option)){return true;}
if(typeof option==="object"&&!option.effect){return true;}
return false;}
$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,args.complete);}else{return this.each(function(){if(args.complete){args.complete.call(this);}});}}
function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete)){complete.call(elem[0]);}
if($.isFunction(next)){next();}}
if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}
return queue===false?this.each(run):this.queue(queue||"fx",run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;}});})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}
return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();})(jQuery);(function($,undefined){$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};if(mode==="hide"){animation.opacity=0;}
$.effects.save(elem,props);elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){elem.hide();}
$.effects.restore(elem,props);done();}});};})(jQuery);(function($,undefined){$.effects.effect.slide=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show=mode==="show",direction=o.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),distance,animation={};$.effects.save(el,props);el.show();distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true);$.effects.createWrapper(el).css({overflow:"hidden"});if(show){el.css(ref,positiveMotion?(isNaN(distance)?"-"+distance:-distance):distance);}
animation[ref]=(show?(positiveMotion?"+=":"-="):(positiveMotion?"-=":"+="))+
distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};})(jQuery);

var JSON;if(!JSON){JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());

(function($){$.fn.hint=function(blurClass){if(!blurClass)blurClass='blur';return this.each(function(){var $input=$(this),title=$input.attr('title'),$form=$(this.form),$win=$(window);function remove(){if(this.value===title&&$input.hasClass(blurClass)){$input.val('').removeClass(blurClass);}}
if(title){$input.blur(function(){if(this.value===''){$input.val(title).addClass(blurClass);}}).focus(remove).blur();$form.submit(remove);$win.unload(remove);}});};})(jQuery);
;(function($){$.fn.extend({minutesago:function(){return this.each(function(){new $.MinAgoSubscriber(this,minAgoTimer);});}});$.MinAgoTimer=function(){var subscribers=[];function subscribe(callback){return(subscribers.push(callback)-1);}
function unsubscribe(subId){subscribers[subId]=null;}
function timeoutElapsed(){var count=subscribers.length;for(var index=0;index!=count;index++){if(subscribers[index])
subscribers[index]();}
setTimeout(timeoutElapsed,60000);}
setTimeout(timeoutElapsed,60000);return{subscribe:subscribe,unsubscribe:unsubscribe};};var minAgoTimer=$.MinAgoTimer();$.MinAgoSubscriber=function(minAgoElt,minAgoTimer){var $minAgoElt=$(minAgoElt);if(!$minAgoElt.children()){return;}
var $minAgoLabel=$($minAgoElt.children()[0]);var pieces=new Array();pieces=$minAgoLabel.text().split(' ');if($minAgoLabel.text().indexOf(":")>0){$minAgoLabel.data("format","time");}
else{$minAgoLabel.data("format","minutes");if(pieces[0]=='<'){$minAgoLabel.data("minutesAgo",parseInt("0"));}
else{$minAgoLabel.data("minutesAgo",parseInt(pieces[0]));}
$minAgoLabel.data("subId",minAgoTimer.subscribe(subscriberCallback));}
function subscriberCallback(){if($minAgoLabel.data("format")=="minutes"){if($minAgoLabel.data("minutesAgo")+1==60){if($minAgoLabel.next()){var time=$minAgoLabel.next().text().split(' ')[0];if($minAgoElt.hasClass('short')){$minAgoLabel.text(time);}
else{$minAgoLabel.text(time+" Today");}
$minAgoLabel.data("format","time");}}
else{$minAgoLabel.text($minAgoLabel.data("minutesAgo")+1+" min ago");$minAgoLabel.data("minutesAgo",$minAgoLabel.data("minutesAgo")+1);}}
else{if($minAgoLabel.next()){var clientDate=new Date();var dateExpression=/([0-9]{1}|[0-9]{2})\/([0-9]{1}|[0-9]{2})\/([0-9]{2})$/;var dateMatch=dateExpression.exec($minAgoLabel.next().text());if(!dateMatch||dateMatch.length==0){return;}
if(clientDate.getDate()!=dateMatch[2]){if($minAgoElt.hasClass('short')){$minAgoLabel.text(dateMatch[0]);}
else{$minAgoLabel.text($minAgoLabel.next().text());}
minAgoTimer.unsubscribe($minAgoLabel.data("subId"));}}}}};})(jQuery);

(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'.',debug:false,updateBeforeSort:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}
this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}
function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}
var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}
if(!p){p=detectParserForColumn(table,cells[i]);}
if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}
list.push(p);}}
if(table.config.debug){log(parsersDebug);}
return list;};function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];}}
return parsers[0];}
function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}
return false;}
function buildCache(table){if(table.config.debug){var cacheTime=new Date();}
var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}
cols.push(i);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}
return cache;};function updateCacheForVisibleElements(table,cache){var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers;for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];var cacheIndex=-1;for(var k=0;k<cache.row.length;k++){if(cache.row[k][0]==c){cacheIndex=k;break;}}
if(cacheIndex>=0){for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}
for(var normalizedIndex=0;normalizedIndex<cache.normalized.length;normalizedIndex++){var it=cache.normalized[normalizedIndex][totalCells];if(it==cacheIndex){cols.push(it);cache.normalized[normalizedIndex]=cols;break;}}}};return cache;};function getElementText(config,node){if(!node)return"";var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;}else{t=node.innerHTML;}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);}else{t=$(node).text();}}
return t;}
function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}
var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}}
if(table.config.appender){table.config.appender(table,rows);}
rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}
applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}
var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0;};$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);}
table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}
return $tableHeaders;};function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}
return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}
function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}
function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}
function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;}else{i=(v==(0||1))?v:0;}
return i;}
function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}
return false;}
function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}
function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}
function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}
function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}
var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}
var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}
dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}
return cache;};function sortText(a,b){return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");if(config.updateBeforeSort){cache=updateCacheForVisibleElements($this[0],cache);}
var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}
config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}
if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}
applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}
if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){var DECIMAL='\\'+config.decimal;var exp=/(^[+]?0(\.0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)\.(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*\.0+$)/;return exp.test($.trim(s));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}
empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}
return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}
return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}
$("tr:visible",table.tBodies[0]).filter(':even').removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(':odd').removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);

(function($){$.extend({tablesorterPager:new function(){function updatePageDisplay(c){var s=$(c.cssPageDisplay,c.container).val((c.page+1)+c.seperator+c.totalPages);$(c.cssPageNumber,c.container).removeClass("selected");$(c.cssPageNumber+":contains('"+(c.page+1)+"')",c.container).addClass("selected");$(c.cssPageList,c.container).val(c.page);if(c.page==0)
$(c.cssPrev,c.container).addClass("disabled");else
$(c.cssPrev,c.container).removeClass("disabled");if(c.page==c.totalPages-1)
$(c.cssNext,c.container).addClass("disabled");else
$(c.cssNext,c.container).removeClass("disabled");}
function setPageSize(table,size){var c=table.config;c.size=size;c.totalPages=Math.ceil(c.totalRows/c.size);c.pagerPositionSet=false;moveToPage(table);fixPosition(table);}
function fixPosition(table){var c=table.config;if(!c.pagerPositionSet&&c.positionFixed){var c=table.config,o=$(table);if(o.offset){c.container.css({top:o.offset().top+o.height()+'px',position:'absolute'});}
c.pagerPositionSet=true;}}
function moveToFirstPage(table){var c=table.config;c.page=0;moveToPage(table);}
function moveToLastPage(table){var c=table.config;c.page=(c.totalPages-1);moveToPage(table);}
function moveToNextPage(table){var c=table.config;c.page++;if(c.page>=(c.totalPages-1)){c.page=(c.totalPages-1);}
moveToPage(table);}
function moveToPrevPage(table){var c=table.config;c.page--;if(c.page<=0){c.page=0;}
moveToPage(table);}
function moveToPage(table,page){var c=table.config;if(page!=null&&!isNaN(page))
c.page=page;if(c.page<0||c.page>(c.totalPages-1)){c.page=0;}
$(table).trigger("pagingStart");renderTable(table,c.rowsCopy);$(table).trigger("pagingEnd");}
function renderTable(table,rows){var c=table.config;var l=rows.length;var s=(c.page*c.size);var e=(s+c.size);if(e>rows.length){e=rows.length;}
var tableBody=$(table.tBodies[0]);$.tablesorter.clearTableBody(table);for(var i=s;i<e;i++){var o=rows[i];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}
fixPosition(table,tableBody);$(table).trigger("applyWidgets");if(c.page>=c.totalPages){moveToLastPage(table);}
updatePageDisplay(c);}
this.appender=function(table,rows){var c=table.config;c.rowsCopy=rows;c.totalRows=rows.length;c.totalPages=Math.ceil(c.totalRows/c.size);renderTable(table,rows);};this.defaults={size:10,offset:0,page:0,totalRows:0,totalPages:0,container:null,cssNext:'.next',cssPrev:'.prev',cssFirst:'.first',cssLast:'.last',cssPageNumber:'.pageNumber',cssPageList:'.pageNumberList',cssPageDisplay:'.pagedisplay',cssPageSize:'.pagesize',seperator:"/",positionFixed:true,appender:this.appender};this.construct=function(settings){return this.each(function(){config=$.extend(this.config,$.tablesorterPager.defaults,settings);var table=this,pager=config.container;$(this).trigger("appendCache");var pagesize=$(".pagesize",pager)
if(pagesize&&pagesize.val()&&!isNaN(pagesize.val()))
config.size=parseInt(pagesize.val());$(config.cssFirst,pager).click(function(e){moveToFirstPage(table);e.preventDefault();});$(config.cssNext,pager).click(function(e){moveToNextPage(table);e.preventDefault();});$(config.cssPrev,pager).click(function(e){moveToPrevPage(table);e.preventDefault();});$(config.cssLast,pager).click(function(e){moveToLastPage(table);e.preventDefault();});$(config.cssPageSize,pager).change(function(e){setPageSize(table,parseInt($(this).val()));e.preventDefault();});$(config.cssPageNumber,pager).click(function(e){e.preventDefault();var number=parseInt($(this).text());if(!isNaN(number))
moveToPage(table,number-1);});$(config.cssPageList,pager).change(function(e){e.preventDefault();var number=parseInt($(this).val());if(!isNaN(number))
moveToPage(table,number);});});};}});$.fn.extend({tablesorterPager:$.tablesorterPager.construct});})(jQuery);

(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}
var validator=$.data(this[0],'validator');if(validator){return validator;}
validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}
this.submit(function(event){if(validator.settings.debug)
event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)
settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)
return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!=Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)
this.element(element);else if(element.parentNode.name in this.submitted)
this.element(element.parentNode);},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0]);}
$(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate);if(this.settings.invalidHandler)
$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())
$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)
$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)
count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))
return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}
var rules=$(element).rules();var dependencyMismatch=false;for(var method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method",e);throw e;}}
if(dependencyMismatch)
return;if(this.objectLength(rules))
this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)
return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)
return arguments[i];}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)
toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length)
this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}
if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))
return this.findByName(element.name).filter(':checked').length;}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)
this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(var method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
if(rules.messages){delete rules.messages;}
return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))
return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))
return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))
return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])
this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(this.pending[element.name]){return"pending";}
if(previous.old===value){return previous.valid;}
previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))
return"dependency-mismatch";if(/[^0-9-]+/.test(value))
return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)
nDigit-=9;}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return(pendingRequests[port]=ajax.apply(this,arguments));}
return ajax.apply(this,arguments);};}})(jQuery);;(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});};$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);
;(function($){var o=$.scrollTo=function(a,b,c){o.window().scrollTo(a,b,c)};o.defaults={axis:'y',duration:1};o.window=function(){return $($.browser.safari?'body':'html')};$.fn.scrollTo=function(l,m,n){if(typeof m=='object'){n=m;m=0}n=$.extend({},o.defaults,n);m=m||n.speed||n.duration;n.queue=n.queue&&n.axis.length>1;if(n.queue)m/=2;n.offset=j(n.offset);n.over=j(n.over);return this.each(function(){var a=this,b=$(a),t=l,c,d={},w=b.is('html,body');switch(typeof t){case'number':case'string':if(/^([+-]=)?\d+(px)?$/.test(t)){t=j(t);break}t=$(t,this);case'object':if(t.is||t.style)c=(t=$(t)).offset()}$.each(n.axis.split(''),function(i,f){var P=f=='x'?'Left':'Top',p=P.toLowerCase(),k='scroll'+P,e=a[k],D=f=='x'?'Width':'Height';if(c){d[k]=c[p]+(w?0:e-b.offset()[p]);if(n.margin){d[k]-=parseInt(t.css('margin'+P))||0;d[k]-=parseInt(t.css('border'+P+'Width'))||0}d[k]+=n.offset[p]||0;if(n.over[p])d[k]+=t[D.toLowerCase()]()*n.over[p]}else d[k]=t[p];if(/^\d+$/.test(d[k]))d[k]=d[k]<=0?0:Math.min(d[k],h(D));if(!i&&n.queue){if(e!=d[k])g(n.onAfterFirst);delete d[k]}});g(n.onAfter);function g(a){b.animate(d,m,n.easing,a&&function(){a.call(this,l)})};function h(D){var b=w?$.browser.opera?document.body:document.documentElement:a;return b['scroll'+D]-b['client'+D]}})};function j(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);

jQuery.fn.extend({everyTime:function(interval,label,fn,times,belay){return this.each(function(){jQuery.timer.add(this,interval,label,fn,times,belay);});},oneTime:function(interval,label,fn){return this.each(function(){jQuery.timer.add(this,interval,label,fn,1);});},stopTime:function(label,fn){return this.each(function(){jQuery.timer.remove(this,label,fn);});}});jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{'ms':1,'cs':10,'ds':100,'s':1000,'das':10000,'hs':100000,'ks':1000000},timeParse:function(value){if(value==undefined||value==null)
return null;var result=this.regex.exec(jQuery.trim(value.toString()));if(result[2]){var num=parseInt(result[1],10);var mult=this.powers[result[2]]||1;return num*mult;}else{return value;}},add:function(element,interval,label,fn,times,belay){var counter=0;if(jQuery.isFunction(label)){if(!times)
times=fn;fn=label;label=interval;}
interval=jQuery.timer.timeParse(interval);if(typeof interval!='number'||isNaN(interval)||interval<=0)
return;if(times&&times.constructor!=Number){belay=!!times;times=0;}
times=times||0;belay=belay||false;if(!element.$timers)
element.$timers={};if(!element.$timers[label])
element.$timers[label]={};fn.$timerID=fn.$timerID||this.guid++;var handler=function(){if(belay&&this.inProgress)
return;this.inProgress=true;if((++counter>times&&times!==0)||fn.call(element,counter)===false)
jQuery.timer.remove(element,label,fn);this.inProgress=false;};handler.$timerID=fn.$timerID;if(!element.$timers[label][fn.$timerID])
element.$timers[label][fn.$timerID]=window.setInterval(handler,interval);if(!this.global[label])
this.global[label]=[];this.global[label].push(element);},remove:function(element,label,fn){var timers=element.$timers,ret;if(timers){if(!label){for(label in timers)
this.remove(element,label,fn);}else if(timers[label]){if(fn){if(fn.$timerID){window.clearInterval(timers[label][fn.$timerID]);delete timers[label][fn.$timerID];}}else{for(var fn in timers[label]){window.clearInterval(timers[label][fn]);delete timers[label][fn];}}
for(ret in timers[label])break;if(!ret){ret=null;delete timers[label];}}
for(ret in timers)break;if(!ret)
element.$timers=null;}}}});if(jQuery.browser.msie)
jQuery(window).one("unload",function(){var global=jQuery.timer.global;for(var label in global){var els=global[label],i=els.length;while(--i)
jQuery.timer.remove(els[i],label);}});

(function($){$.fn.jCarouselLiteSlide=function(o){o=$.extend({btnPrev:null,btnNext:null,btnPause:null,btnGo:null,nextTitleList:null,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,pause:false,beforeStart:null,afterEnd:null},o||{});return this.each(function(){var running=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";var div=$(this),ul=$("ul:first",div),tLi=$("ul:first>li",div),tl=tLi.size(),v=o.visible;var intervalId=0;var pauseClicked=false;if(o.circular){ul.prepend(tLi.slice(tl-v).clone()).append(tLi.slice(0,v).clone());o.start+=v;}
var li=$("ul:first>li",div),itemLength=li.size(),curr=o.start;div.css("visibility","visible");li.css({overflow:"hidden",float:o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative","list-style-type":"none"});div.css({overflow:"hidden",position:"relative",left:"0px"});var liSize=o.vertical?height(li):width(li);var ulSize=liSize*itemLength;var divSize=liSize*v;var maxHeight=0;li.each(function(){if($(this).height()>maxHeight)
maxHeight=$(this).height();});divSize=div.closest("div[class$='wide']").width();li.css({width:li.width(),height:maxHeight});ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));if(o.btnPrev)
$(o.btnPrev).click(function(){pauseClicked=false;setPauseBtnState();return go(curr-o.scroll);});if(o.btnNext)
$(o.btnNext).click(function(){pauseClicked=false;setPauseBtnState();return go(curr+o.scroll);});if(o.btnGo)
$.each(o.btnGo,function(i,val){$(val).click(function(){pauseClicked=false;setPauseBtnState();return go(o.circular?o.visible+i:i);});});if(o.btnPause)
$(o.btnPause).click(function(){pauseClicked=!pauseClicked;setPauseBtnState();return togglePause();});if(o.nextTitleList){div.find("div.nextpanel").html($(li[curr+o.visible]).find("span.title").html());}
if(o.auto)
intervalId=setInterval(function(){go(curr+o.scroll);},o.auto);if(o.pause)
div.hover(function(){if(!pauseClicked&&intervalId!=0)
return togglePause();},function(){if(!pauseClicked&&intervalId==0)
return togglePause();});function vis(){return li.slice(curr).slice(0,v);};function setPauseBtnState(){if(o.btnPause){if(pauseClicked)
$(o.btnPause).addClass("on");else
$(o.btnPause).removeClass("on");}}
function togglePause(){if(!running){if(intervalId!=0){div.data("timeEnd",now());clearInterval(intervalId);intervalId=0;}
else if(o.auto){var remainder=div.data("remainder");if(remainder==undefined){remainder=(o.auto)-(div.data("timeEnd")-div.data("timeStart"));}
else{remainder-=(div.data("timeEnd")-div.data("timeStart"));}
div.removeData("timeEnd");div.data("timeStart",now());div.data("remainder",remainder);intervalId=setInterval(function(){go(curr+o.scroll);},remainder);}}
return false;}
function go(to){if(!running){if(o.beforeStart)
o.beforeStart.call(this,vis());runningTotal=0;clearInterval(intervalId);if(o.circular){if(to<=o.start-v-1){curr=curr+(itemLength-(v*2));ul.css(animCss,-(curr*liSize)+"px");curr=curr-o.scroll;}else if(to>=itemLength-v+1){curr=curr-(itemLength-(v*2));ul.css(animCss,-(curr*liSize)+"px");curr=curr+o.scroll;}else curr=to;}
else{if((to<0)&&(curr==0))
return;if((to>itemLength-v)&&(curr==(itemLength-v)))
return;if(to<0)
curr=0;else if(to>itemLength-v)
curr=itemLength-v;else
curr=to;}
running=true;ul.animate(animCss=="left"?{left:-(curr*liSize)}:{top:-(curr*liSize)},o.speed,o.easing,function(){if(o.afterEnd)
o.afterEnd.call(this,vis());if(o.auto){div.data("timeStart",now());div.removeData("timeEnd");div.removeData("remainder");intervalId=setInterval(function(){go(curr+o.scroll);},o.auto);}
if(o.nextTitleList){var index=(curr+o.visible)%itemLength;if(index==0){index=(o.visible*2);}
div.find("div.nextpanel").html($(li[index]).find("span.title").html());}
running=false;});if(!o.circular){$(o.btnPrev+","+o.btnNext).removeClass("disabled");$((curr-o.scroll<0&&o.btnPrev)||(curr+o.scroll>itemLength-v&&o.btnNext)||[]).addClass("disabled");}}
return false;};});};function css(el,prop){return parseInt($.css(el[0],prop))||0;};function width(el){return el[0].offsetWidth+css(el,'marginLeft')+css(el,'marginRight');};function height(el){return el[0].offsetHeight+css(el,'marginTop')+css(el,'marginBottom');};function now(){return(new Date()).getTime();};})(jQuery);

(function($){$.fn.marquee=function(klass){var newMarquee=[],last=this.length;function getReset(newDir,marqueeRedux,marqueeState){var behavior=marqueeState.behavior,width=marqueeState.width,dir=marqueeState.dir;var r=0;if(behavior=='alternate'){r=newDir==1?marqueeRedux[marqueeState.widthAxis]-(width*2):width;}else if(behavior=='slide'){if(newDir==-1){r=dir==-1?marqueeRedux[marqueeState.widthAxis]:width;}else{r=dir==-1?marqueeRedux[marqueeState.widthAxis]-(width*2):0;}}else{r=newDir==-1?marqueeRedux[marqueeState.widthAxis]:0;}
return r;}
function animateMarquee(){var i=newMarquee.length,marqueeRedux=null,$marqueeRedux=null,marqueeState={},newMarqueeList=[],hitedge=false;while(i--){marqueeRedux=newMarquee[i];$marqueeRedux=$(marqueeRedux);marqueeState=$marqueeRedux.data('marqueeState');if($marqueeRedux.data('paused')!==true){marqueeRedux[marqueeState.axis]+=(marqueeState.scrollamount*marqueeState.dir);hitedge=marqueeState.dir==-1?marqueeRedux[marqueeState.axis]<=getReset(marqueeState.dir*-1,marqueeRedux,marqueeState):marqueeRedux[marqueeState.axis]>=getReset(marqueeState.dir*-1,marqueeRedux,marqueeState);if((marqueeState.behavior=='scroll'&&marqueeState.last==marqueeRedux[marqueeState.axis])||(marqueeState.behavior=='alternate'&&hitedge&&marqueeState.last!=-1)||(marqueeState.behavior=='slide'&&hitedge&&marqueeState.last!=-1)){if(marqueeState.behavior=='alternate'){marqueeState.dir*=-1;}
marqueeState.last=-1;$marqueeRedux.trigger('stop');marqueeState.loops--;if(marqueeState.loops===0){if(marqueeState.behavior!='slide'){marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir,marqueeRedux,marqueeState);}else{marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir*-1,marqueeRedux,marqueeState);}
$marqueeRedux.trigger('end');}else{newMarqueeList.push(marqueeRedux);$marqueeRedux.trigger('start');marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir,marqueeRedux,marqueeState);}}else{newMarqueeList.push(marqueeRedux);}
marqueeState.last=marqueeRedux[marqueeState.axis];$marqueeRedux.data('marqueeState',marqueeState);}else{newMarqueeList.push(marqueeRedux);}}
newMarquee=newMarqueeList;if(newMarquee.length){setTimeout(animateMarquee,50);}}
this.each(function(i){var $marquee=$(this),width=$marquee.attr('width')||$marquee.width(),height=$marquee.attr('height')||$marquee.height(),$marqueeRedux=$marquee.after('<div '+(klass?'class="'+klass+'" ':'')+'style="display: block-inline; width: '+width+'px; height: '+height+'px; overflow: hidden;"><div style="float: left; white-space: nowrap;">'+$marquee.html()+'</div></div>').next(),marqueeRedux=$marqueeRedux.get(0),hitedge=0,direction=($marquee.attr('direction')||'left').toLowerCase(),marqueeState={dir:/down|right/.test(direction)?-1:1,axis:/left|right/.test(direction)?'scrollLeft':'scrollTop',widthAxis:/left|right/.test(direction)?'scrollWidth':'scrollHeight',last:-1,loops:$marquee.attr('loop')||-1,scrollamount:$marquee.attr('scrollamount')||this.scrollAmount||2,behavior:($marquee.attr('behavior')||'scroll').toLowerCase(),width:/left|right/.test(direction)?width:height};if($marquee.attr('loop')==-1&&marqueeState.behavior=='slide'){marqueeState.loops=1;}
$marquee.remove();if(/left|right/.test(direction)){$marqueeRedux.find('> div').css('padding','0 '+width+'px');}else{$marqueeRedux.find('> div').css('padding',height+'px 0');}
$marqueeRedux.bind('stop',function(){$marqueeRedux.data('paused',true);}).bind('pause',function(){$marqueeRedux.data('paused',true);}).bind('start',function(){$marqueeRedux.data('paused',false);}).bind('unpause',function(){$marqueeRedux.data('paused',false);}).data('marqueeState',marqueeState);newMarquee.push(marqueeRedux);marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir,marqueeRedux,marqueeState);$marqueeRedux.trigger('start');if(i+1==last){animateMarquee();}});return $(newMarquee);};}(jQuery));

(function($){$.fn.customFadeTo=function(speed,opacity,callback){$(this).fadeTo(speed,opacity,function(){if(jQuery.browser.msie)
$(this).get(0).style.removeAttribute('filter');if(callback!=undefined)
callback();});if(jQuery.browser.msie)
$(this).get(0).style.removeAttribute('filter');};})(jQuery);

$.extend(MarketWatch.UI,function(){$(function(){$('#clear-recent-quotes-tab').click(_clearRecentQuotesTab);$("#endcap div.footbar input.text").keypress(function(e){if(e.which==13){e.preventDefault();var term=$('#footer_input').val();_autocompletesearch([term]);}}).focus(function(){if($(this).hasClass("unused"))
$(this).removeClass("unused").val("");}).blur(function(){if($(this).val()===""){$(this).addClass("unused").val("Enter Symbols or Keywords");}});$("#endcap div.footbar input.button").click(function(e){e.preventDefault();var term=$('#footer_input').val();if(term=="Enter Symbols or Keywords")
term="";_autocompletesearch([term]);});});var setHint=function(input){if(input!=null){$(input).val("Enter Symbols or Keywords").css({"color":"#999"});$(input).focus(function(){$(this).val("").css({"color":"#000"});});}};$("#hat_button").bind("click",function(){var term=$("#hat_input").val();if(term=="Enter Symbols or Keywords"){term="";}
_autocompletesearch([term],$("ul.ui-autocomplete li"));});$(function(){setHint($("#hat_input"));$("#hat_input").autocomplete({source:function(request,response){$.ajax({url:"http://services.dowjones.com/autocomplete/data?q="+request.term+"&need=marketwatch-topic,marketwatch-search-link,symbol",dataType:"jsonp",data:{featureClass:"P",style:"full",maxRows:12,name_startsWith:request.term},success:function(data){var autoArray=[];autoArray=_buildAutoArray(data,request,true,true);response(autoArray);}});},focus:function(){$(".ac-active").removeClass("ac-active");if($("#ui-autocomplete li a").attr("class","ui-state-focus")){$(".ui-state-focus").parent("li").addClass("ac-active");}
return false;},select:function(){var link=$(".ac-active a").attr("href");window.location=link;return false;}}).keydown(function(e){if(e.keyCode==13&&$.data(this,"state")!="searched"){e.preventDefault();var term;if($(".ui-autocomplete li.ac-active").length>0){term=$(".ac-active a").attr("href");window.location=term;}else{term=$("#hat_input").val();if(term=="Enter Symbols or Keywords"){term="";}
_autocompletesearch([term],$("ul.ui-autocomplete li"));}}}).data("ui-autocomplete")._renderItem=function(ul,item){if(item.labelType){return $("<li></li>").data("ui-autocomplete-item",item).append(_getLabel(item)).appendTo(ul);}else{var term=this.term.split(' ').join('|');var re=new RegExp("("+term+")","gi");var label=item.label.split("|");for(var l=0;l<label.length;l++){label[l]=label[l].replace(re,"<b>$1</b>");}
var markup=item.markup;if(item.markup.indexOf("%TICKER%")!=-1){markup=markup.replace("%TICKER%",label[0]);markup=markup.replace("%COMPANY%",label[1]);}else if(item.markup.indexOf("%NAMEONLY%")!=-1){markup=markup.replace("%NAMEONLY%",label[0]);}else if(item.markup.indexOf("%NAME%")!=-1){markup=markup.replace("%NAME%",label[0]);markup=markup.replace("%TYPE%",label[1]);}else if(item.markup.indexOf("%KEYWORD%")!=-1){markup=markup.replace("%KEYWORD%",label[0]);}
return $("<li></li>").data("ui-autocomplete-item",item).append("<a href=\""+_getLink(item)+" \">"+markup+"</a>").appendTo(ul);}};});var breakIframe=false;var _quoteroot="/investing/";var _searchroot="/search";var _autocompletesearch=function(data,acresults){if(!data[1]){var term=data[0].replace(/^\s+|\s+$/g,"").replace(/,+/gi,",").toLowerCase().replace(/,$|\.,$|:$/,"");var search=false;if(term.length==0||!acresults)
search=true;else{var splitTerms=term.split(",");for(var i=0;i<splitTerms.length;i++){var isInSymbols=false;var regex=/^ABC$|^BAY$|^EGAN$|^AIR$|^ACME$|^GOLD$|^COST$|^KEY$|^GAS$|^CHINA$|^BEER$|^DRUG$|^OIL$|^DOG$|^CPI$|^GDP$|^DNA$|^ETF$|^JAZZ$|^ETFS$|^AUTO$|^FED$|^TAXES$|^OBAMA$|^G20$/i;$("div.ticker",acresults).each(function(){isInSymbols=isInSymbols||($(this).html().toLowerCase().replace(/<\/?strong>/gi,"")===splitTerms[i]);});if(splitTerms[i].length>5&&!isInSymbols){search=true;break;}
var match=splitTerms[i].match(regex);if(match!=null&&match.length>0&&match[0].length>0){search=true;break;}
var match=splitTerms[i].match(/\&|\%/);if(match!=null&&match.length>0&&match[0].length>0){search=true;break;}}}
if(search){var link="";if($("#hat_input").data("state")=="searched"){link="&Link=MW_SearchAC";}
var whereToGo=(_searchroot?"http://"+document.domain+MarketWatch.getBaseUrl()+_searchroot:"http://"+document.domain+"/search")+"?q="+encodeURIComponent(term)+link;if(!breakIframe)
window.location=whereToGo;else
window.parent.location=whereToGo;}
else{_doQuoteRedirect(term);}}
else{var path=data[2];if(path.indexOf('http://')!=0){if(path[0]!='/')
path='/'+path;path="http://"+location.host+path;}
if(!breakIframe)
window.location=path;else
window.parent.location=path;}};var _buildAutoArray=function(data,request,enableSearchSuggestion,enableLinks){var acArray=[];acArray.push({labelType:"choose"});if(data.symbols!=null&&data.symbols.length>0){acArray=acArray.concat($.map(data.symbols,function(item){return{label:item.ticker+"|"+item.company,markup:"<div class=\"ticker\">%TICKER%</div><div class=\"country"+_getFlag(item)+"\"></div><div class=\"company\">%COMPANY%</div>",obj:item,symbolType:item.type};}));}
if(enableLinks){acArray.push({labelType:"suggest"});acArray.push({labelType:"search",term:request.term});}
if(enableSearchSuggestion){if(data.mwSearchLinks!=null&&data.mwSearchLinks.length>0){acArray=acArray.concat($.map(data.mwSearchLinks,function(item){return{label:item.title+"|"+item.type,markup:"<div class=\"topic\">%NAME%</div><div class=\"topictype\">%TYPE%</div>",obj:item,columnType:item.type};}));}
if(data.mwTopics!=null&&data.mwTopics.length>0){acArray=acArray.concat($.map(data.mwTopics,function(item){return{label:item.name+"|"+item.type,markup:"<div class=\"topic\">%NAME%</div><div class=\"topictype\">%TYPE%</div>",obj:item,topicType:item.type};}));}
if(data.keywords!=null&&data.keywords.length>0){acArray=acArray.concat($.map(data.keywords,function(item){return{label:item.keyword,markup:"<div class=\"topic\">%KEYWORD%</div><div class=\"topictype\">Keyword</div>",obj:item};}));}}
return acArray;};var _getFlag=function(item){if(item.country){return" country_flag_"+item.country;}};var _getLink=function(item){if(item.symbolType){var tickerNoCountry=_tickerParse(item);var path="/investing/"+item.symbolType+"/";if(item.obj.country!=null&&item.obj.country!=="US"){if(item.obj.country=="IN"||item.obj.country=="XE"||item.obj.country=="DE"&&item.obj.exchangeIsoCode!=null){return path+tickerNoCountry+"?countrycode="+item.obj.country+"&iso="+item.obj.exchangeIsoCode;}
return path+tickerNoCountry+"?countrycode="+item.obj.country;}else{return path+tickerNoCountry;}}
if(item.columnType){return item.obj.url;}
if(item.topicType){var path="/"+item.topicType+"/";return path+item.obj.link;}
return baseUrl;};var _tickerParse=function(item){var tickerSplit=item.obj.ticker.split(":");if(tickerSplit[1]){tickerSplit=tickerSplit[1];}else{tickerSplit=tickerSplit[0];}
tickerSplit=encodeURIComponent(tickerSplit);return tickerSplit;};var _getLabel=function(item){switch(item.labelType){case"choose":var listContent="<div class=\"ac-label\">Choose a quote match or search to get a quote:</div>";return listContent;case"suggest":var listContent="<div class=\"ac-label\">Search Suggestions</div>";return listContent;case"search":var listContent="<a href=\""+"/search?q="+item.term+"\"><div class=\"topic\">"+item.term+"</div><div class=\"topictype\">Search News</div></a>";return listContent;}};var _symbolOnlySearch=function(term,parentContainer,action,link){term=term.replace(/^\s+|\s+$/g,"").replace(/,+/gi,",").toLowerCase().replace(/,$|\.,$/,"");if(term.length==0)
if(parentContainer&&parentContainer.length>0){MarketWatch.UI.showMessage(parentContainer.removeClass("successmessage failmessage").addClass("failmessage"),"Please enter a symbol","up");}
else{alert("Please enter a symbol");}
else{_doQuoteRedirect(term,action,link);}};var _doQuoteRedirect=function(term,action,link){term=term.replace(/\*/,"");if(action&&action!=""){action="/"+action;}else{action="";}
if(term.match(",")||/aux$|nul$|prn$|bin$|con$/gi.test(term)){var whereToGo="http://"+document.domain+_quoteroot+"multi?tickers="+term.replace(/ +/gi,",").replace(/,+/gi,",");if(!breakIframe){window.location=whereToGo;}else{window.parent.location=whereToGo;}}
else{var cc="";if(term.indexOf(":")>0){var split=term.split(":");cc="?countryCode="+split[0];term=split[1];}
var whereToGo="http://"+document.domain+_quoteroot+"stock/"+encodeURIComponent(term).replace(/ +/gi,",").replace(/,+/gi,",")+action+cc;if(link)whereToGo=link;if(!breakIframe){window.location=whereToGo;}else{window.parent.location=whereToGo;}}};var _deferredQuoteSubscribe=function(parentContainer){parentContainer.find(".bgQuoteDeferred").each(function(){var $this=$(this);var bgChannel=$this.find(".bgChannel").text();var bgRealtimeChannel=$this.find(".bgRealtimeChannel").text();if(bgChannel||bgRealtimeChannel){$(".bgCurrencyFormatting").data("bgFormat",{last:"#,###.0000",change:"#,###.0000",percentChange:"#,###.0000%"});BlueGrass.Quote.bindElement(this,bgChannel,bgRealtimeChannel,{sequence:null,number:1},{sequence:null,number:1});}});};var _clearTimer=function(element){var tid=element.data("tid");if(tid){clearTimeout(tid);element.data("tid",null);}};var _menuClose=function(element){var $element=$(element);$element.removeClass("active");};var _menuDelayClose=function(element){var $element=$(element);_clearTimer($element);tid=setTimeout(function(){_menuClose(element);},500);$element.data("tid",tid);};var _menuShow=function(element){var $element=$(element);_clearTimer($element);$element.addClass("active");};var _updateMarketOverview=function(rangeText,chart){var props={time:"1dy",freq:"5mi"};switch(jQuery.trim(rangeText)){case"1 Day":props={time:"1dy",freq:"5mi"};break;case"5 Days":props={time:"5dy",freq:"15mi"};break;case"1 Month":props={time:"1mo",freq:"1dy"};break;case"3 Months":props={time:"3mo",freq:"1dy"};break;case"6 Months":props={time:"6mo",freq:"1dy"};break;case"1 Year":props={time:"1yr",freq:"1dy"};break;case"2 Years":props={time:"2yr",freq:"3dy"};break;}
chart.UpdateAllCharts(props.time,props.freq);};var _updateChanges=function(dataField){$("#marketoverview .data").each(function(index,element){_customChange(element,dataField);});};var _customChange=function(element,dataField,bg){element=$(element);var data=element.parent(".tickerrow").data(dataField);var decimals=element.parent(".tickerrow").data("decimal");var last=element.find(".bgLast");var current=parseFloat(last.text().replace(/,/g,""));if(undefined!=current&&undefined!=data&&undefined!=decimals&&data!=0){var newChange=current-data;var newPercent=(newChange/data)*100;var prefix="";if(newChange>0){prefix="+";element.removeClass("down").removeClass("neutral").addClass("up");}
else if(newChange<0){element.removeClass("up").removeClass("neutral").addClass("down");}
else{element.removeClass("down").removeClass("up").addClass("neutral");}
element.find(".change").text(prefix+newChange.toFixed(decimals));element.find(".changepercent").text(Math.abs(newPercent).toFixed(2)+"%");}};var _wireupRangeMenu=function(rangeMenu,chart){rangeMenu.hover(function(){_menuShow(this);},function(){_menuDelayClose(this);});$(".range_menu li",rangeMenu).hover(function(){$(this).addClass("hover");},function(){$(this).removeClass("hover");}).click(function(){_updateMarketOverview($(this).text(),chart);rangeMenu.trigger("rangeChange",{range:$(this).text()});_menuClose(rangeMenu);});rangeMenu.bind("rangeChange",function(event,data){var changeElements=$("#marketoverview .bgChange");if(changeElements.length>0){changeElements.removeClass("bgChange");$("#marketoverview .bgPercentChange").removeClass("bgPercentChange");$("#marketoverview .data").bind("bgTick",function(bg){_customChange(this,rangeMenu.data("field"),bg);});}
var dataField="1day";switch(data.range){case"5 Days":dataField="1week";break;case"1 Month":dataField="4week";break;case"3 Months":dataField="13week";break;case"6 Months":dataField="26week";break;case"1 Year":dataField="52week";break;case"2 Years":dataField="104week";break;}
rangeMenu.data("field",dataField);_updateChanges(dataField);});};var _bindDropLists=function(parentContainer){if(!parentContainer)
parentContainer=document;$("div.droplist",parentContainer).hover(function(){_menuShow(this);},function(){_menuDelayClose(this);});$("div.droplist li",parentContainer).hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}).click(function(){$(this).parent().prev().text($(this).text());_menuClose($(this).parent().parent());$(this).siblings().show();$(this).hide();});};var _bindTabContainers=function(parentContainer,target){if(!parentContainer)
parentContainer=document;if(!target)
target="div.block div.tabs";$(target,parentContainer).mouseover(_bindTabEvents);$("div.block.marketblock div.tabpane",parentContainer).mouseover(_bindTickerRowEvents);};var _bindTabEvents=function(e){e.preventDefault();var container=$(this);container.unbind("mouseover");container.find(".tab").click(function(e){e.preventDefault();$(this).addClass("selected").siblings().removeClass("selected");$("#"+this.id+"page").addClass("selected").siblings().removeClass("selected");var page=$("#"+$(this).attr("id")+"page");_deferredQuoteSubscribe(page);var rows=$("#"+this.id+"page").find(".tickerrow");if(rows.length>0){$(rows[0]).addClass("selected").siblings().removeClass("selected");}});};var _bindTabContainerEvents=function(container){container.find(".tab").click(function(e){e.preventDefault();$(this).addClass("selected").siblings().removeClass("selected");$("#"+this.id+"page").addClass("selected").siblings().removeClass("selected");var page=$("#"+$(this).attr("id")+"page");_deferredQuoteSubscribe(page);});};var _bindTickerRowEvents=function(e){e.preventDefault();var container=$(this);container.unbind("mouseover");container.find(".tabpage .tickerrow").mouseover(function(e){$(this).addClass("selected").siblings().removeClass("selected");});};var _bindFancySelect=function(element){var $element=$(element);$element.click(function(e){$element.find(".options").width($element.find(".selected").width());if($element.hasClass("open")){if($(e.target).hasClass("selected")){$element.removeClass("open");$(document.body).unbind("click",_fancySelectBodyClick);}
e.stopPropagation();}
else{$element.addClass("open");$(document.body).one("click",{$select:$element},_fancySelectBodyClick);return false;}});};var _fancySelectBodyClick=function(e){e.data.$select.removeClass("open");};var _clearRecentQuotesTab=function(e){var cookieName="recentquotes";document.cookie=cookieName+"=";$('#recent-quotes-results-cont').hide();$('#recent-quotes-noresults-text').show();e.preventDefault();};return{createSymbolOnlyAutoComplete:function(element,enableHint,enableSearchSuggestion,enableLinks){if(enableHint){setHint(element);}
return element.autocomplete({source:function(request,response){$.ajax({url:"http://services-staging.dowjones.com/autocomplete/data?q="+request.term+"&need=marketwatch-search-link,symbol",dataType:"jsonp",data:{featureClass:"P",style:"full",maxRows:12,name_startsWith:request.term},success:function(data){var autoArray=[];autoArray=_buildAutoArray(data,request,enableSearchSuggestion,enableLinks);response(autoArray);}});},focus:function(){$(".ac-active").removeClass("ac-active");if($("#ui-autocomplete li a").attr("class","ui-state-focus")){$(".ui-state-focus").parent("li").addClass("ac-active");}
return false;},select:function(){if(!enableLinks){var ticker=$(".ac-active a").data("ticker");$(element).val(ticker);}else{var link=$(".ac-active a").attr("href");window.location=link;}
return false;}}).keydown(function(e){if(e.keyCode==13&&$.data(this,"state")!="searched"){if($(".ui-autocomplete li.ac-active").length==0||$(".ui-autocomplete li.ac-active")==null){var term=$(".autocomplete_input").val();if(term=="Enter Symbols or Keywords"){term="";}
_autocompletesearch([term],$("ul.ui-autocomplete li"));}}}).data("ui-autocomplete")._renderItem=function(ul,item){if(item.labelType){return $("<li></li>").data("ui-autocomplete-item",item).append(MarketWatch.UI.getLabel(item)).appendTo(ul);}else{var term=this.term.split(' ').join('|');var re=new RegExp("("+term+")","gi");var label=item.label.split("|");for(var l=0;l<label.length;l++){label[l]=label[l].replace(re,"<b>$1</b>");}
var markup=item.markup;if(item.markup.indexOf("%TICKER%")!=-1){markup=markup.replace("%TICKER%",label[0]);markup=markup.replace("%COMPANY%",label[1]);}else if(item.markup.indexOf("%NAMEONLY%")!=-1){markup=markup.replace("%NAMEONLY%",label[0]);}else if(item.markup.indexOf("%NAME%")!=-1){markup=markup.replace("%NAME%",label[0]);markup=markup.replace("%TYPE%",label[1]);}else if(item.markup.indexOf("%KEYWORD%")!=-1){markup=markup.replace("%KEYWORD%",label[0]);}
if(!enableLinks){return $("<li></li>").data("ui-autocomplete-item",item).append("<a href=\"javascript:\" data-ticker=\""+item.obj.ticker+"\" >"+markup+"</a>").appendTo(ul);}else{return $("<li></li>").data("ui-autocomplete-item",item).append("<a href=\""+MarketWatch.UI.getLink(item)+" \">"+markup+"</a>").appendTo(ul);}}};},performSymbolSearch:function(term,inputParent,action,link){_symbolOnlySearch(term,inputParent,action,link);},bindRangeMenu:function(rangeMenuBase,chart){_wireupRangeMenu(rangeMenuBase,chart);},bindTabs:function(parentContainer,target){_bindTabContainers(parentContainer,target);},forceTabsBinding:function(parentContainer){_bindTabContainerEvents(parentContainer);},bindFancySelect:function(element){_bindFancySelect(element);},setBreakIframe:function(shouldBreak){breakIframe=shouldBreak;},bindDropLists:function(parentContainer){_bindDropLists(parentContainer);},showMessage:function(parentElement,text,direction){var $display=$(parentElement).append("<div style='display:none' class='message'>"+text+"</div>").find(".message");$display.css("top","-"+$display.height()+"px");$display.show("slide",{direction:direction},500,function(){setTimeout(function(){$display.hide("slide",{direction:direction},500,function(){$display.remove();})},2000);});},flashMessage:function(parentElement,text,classes){if($(parentElement).find("span.flashmessage").length>0){clearTimeout(parseInt($(parentElement).attr("data-message-timeout")));$(parentElement).find("span.flashmessage").remove();}
var $message=$(parentElement).append('<span class="flashmessage'+(typeof(classes)!="undefined"?' '+classes:'')+'">'+text+'</span>').find(".flashmessage");var timeout=setTimeout(function(){$message.fadeOut(function(){$message.remove();});},3000);$(parentElement).attr("data-message-timeout",timeout);},addToPortfolio:function(ticker,link){if(!MarketWatch.Member.isMktwMember()){MarketWatch.Member.startMktwJitLogin(window.location);return;}
var data=JSON.stringify([{ticker:ticker.toUpperCase(),type:"long",basis:0,shares:0,tags:["added-symbols"]}]);var $link=$(link);var proxyPath="/proxy/http/www.marketwatch.com";proxyPath="";$.ajax({type:"POST",url:"http://"+document.domain+MarketWatch.getBaseUrl()+proxyPath+"/portfoliostore/default.aspx",data:("action=ADDHOLDING&json="+data).replace(/ /,""),dataType:"json",success:function(data){$link.removeClass("successmessage failmessage");if(data.success==true){$link.addClass("successmessage");MarketWatch.UI.showMessage($link,"Added to your portfolio","down");}else{$link.addClass("failmessage");MarketWatch.UI.showMessage($link,"You must first create a portfolio","down");}},error:function(){$link.removeClass("successmessage");$link.addClass("failmessage");MarketWatch.UI.showMessage($link,"Error adding to your portfolio","down");}});},getLabel:function(item){return _getLabel(item);},getLink:function(item){return _getLink(item);}};}());

$.extend(MarketWatch.Navigation,function(){var _$navigation;var _showTimeoutId;var _showDelay=500;var _$showing=null;var _hideTimeoutId;var _hideDelay=500;var _settings={dropdownsEnabled:true,fixedTopNav:true,fixedSubNav:true,initShowDelay:500,initHideDelay:500};var _positionNavigation=function(){if($('#sitenavplaceholder').length&&($(window).scrollTop()>=$("#sitenavplaceholder").offset().top)){_$navigation.addClass("fixed");$('#navigationshim').addClass('fixed');if(!_settings.fixedSubNav&&$('#subnav').length){$('#sitenavplaceholder').removeClass('withsub');}}
else{_$navigation.removeClass("fixed");$('#navigationshim').removeClass('fixed');if(!_settings.fixedSubNav&&$('#subnav').length){$('#sitenavplaceholder').addClass('withsub');}}};var _positionExpandedNavigation=function($superItem){$superItem.css("visibility","hidden").show();var $nonchrome=$("#nonchrome");var offset=($superItem.offset().left+$superItem.width()+8)-($nonchrome.offset().left+$nonchrome.width());if(offset>0)
$superItem.css({left:-(offset)});if(!$superItem.parent().hasClass("expanded"))
$superItem.hide();$superItem.css("visibility","visible");};var _switchTab=function($selectedTab,$selectedPage){$selectedTab.addClass("selected").siblings().removeClass("selected");$selectedPage.addClass("selected").siblings().removeClass("selected");};var _bindTabs=function($menuItem,$superItem){$superItem.find("div.tabs .tab").click(function(e){e.preventDefault();var $tab=$(this);var $page=$("#"+this.id+"page");if($page.length===0){$.ajax({url:MarketWatch.getBaseUrl()+"/sitestructure/navigation/expandednavchunk",data:{path:($menuItem.attr("data-canonical")?$menuItem.attr("data-canonical"):$menuItem.children("a").attr("href")).replace(MarketWatch.getBaseUrl(),""),tab:this.id},success:function(data){$page=$superItem.find(".tabpane").append(data).children("div.tabpage").last();_switchTab($tab,$page);}});}
else{_switchTab($tab,$page);}});};var _getExpandedMenu=function($menuItem){$menuItem.attr("data-status","requested");var url=MarketWatch.getBaseUrl()+"/sitestructure/navigation/expandednav";if($menuItem.attr("data-canonical")&&$menuItem.attr("data-canonical").indexOf(MarketWatch.getBaseUrl()+"/game")===0){url=MarketWatch.getBaseUrl()+"/game/navigation/expandednav";}
$.ajax({url:url,data:{path:($menuItem.attr("data-canonical")?$menuItem.attr("data-canonical"):$menuItem.children("a").attr("href")).replace(MarketWatch.getBaseUrl(),"")},success:function(data){$menuItem.append(data);$menuItem.attr("data-status","loaded");$superItem=$menuItem.children("div.supernav");_positionExpandedNavigation($superItem);_bindTabs($menuItem,$superItem);_setupLogin($superItem);_setupTracking($menuItem);}});_showTimeoutId=setTimeout(function(){_showExpandedMenu($menuItem);},_showDelay/2);};var _showExpandedMenu=function($menuItem){if($menuItem){_hideExpandedMenu(_$showing);$menuItem.addClass("expanded").find("div.supernav").show();_$showing=$menuItem;}};var _hideExpandedMenu=function($menuItem){if($menuItem){$menuItem.removeClass("expanded").find("div.supernav").hide();}};var _setupLogin=function($superItem){$superItem.find("div.join a.login").click(function(e){e.preventDefault();_hideExpandedMenu($superItem.parent());LIFP.login("The action you requested is only available to MarketWatch members. Please log in or register.");});};var _setupTracking=function($menuItem){if($menuItem.attr("data-tracking")){$menuItem.find(".supernav a").each(function(i,item){if(item.href.indexOf("http://")<0||item.href.indexOf("http://"+window.location.host)===0){item.href+=(item.href.indexOf("?")<0?"?":"&")+$menuItem.attr("data-tracking");}});}};var _hackAnAd=function($menuItem){var ad=$menuItem.find("div.supernav div.advertisement iframe");if(ad.length>0){var ordIndex=ad.attr("src").indexOf("ord=");var src=ad.attr("src").substr(0,ordIndex)+"ord="+ScrillaZilla.Escort.newOrd()+"?";ad.attr("src",src);}};$(function(){_$navigation=_settings.fixedSubNav?$("#sitenav"):$("#toplevelhack");if(_settings.dropdownsEnabled){$("#featuresnav > div:not(.nodrop), #accountnav > div:not(.nodrop)").each(function(i,item){$(item).mouseenter(function(){var $item=$(item);if($item.hasClass("expanded")){clearTimeout(_hideTimeoutId);}
clearTimeout(_showTimeoutId);$item.addClass("fakehover");if(!$item.hasClass("expanded")){if(!$item.attr("data-status")){_showTimeoutId=setTimeout(function(){_getExpandedMenu($item);},_showDelay/2);}
else{_showTimeoutId=setTimeout(function(){_hackAnAd($item);_showExpandedMenu($item);},_showDelay);}}}).mouseleave(function(){clearTimeout(_showTimeoutId);var $item=$(item);$item.removeClass("fakehover");if($item.hasClass("expanded")){_hideTimeoutId=setTimeout(function(){_hideExpandedMenu($item);},_hideDelay);}}).children("a").click(function(){clearTimeout(_showTimeoutId);});});}
if(_settings.fixedTopNav){$(window).scroll(_positionNavigation);}});return{settings:function(options){if(options){$.extend(_settings,options);}
return _settings;},Portfolio:{}};}());$.extend(MarketWatch.Navigation.Portfolio,function(){return{measure:function(){var $table=$("#portfolionav table");var height=parseInt($("#portfolionav").attr("data-maxheight")||0);if(height>$table.height()){$table.css("margin-bottom",height-$table.height());}
else{$("#portfolionav").attr("data-maxheight",$table.height());$table.css("margin-bottom",0);}}};}());

$.extend(MarketWatch.NotificationBanner,function(){var _$banner;var _majorWidth="585px";var _minorWidth="396px";var _oneThird="327px";var _lilThird="280px";var _midThird="305px";var _bigThird="396px";var _speed=800;var _connectionCallback=function(connection,type){if(type=="connect"){var bully=$("#bulletinbanner .meat");BlueGrass.Bulletin.bindElement(bully,"/bulletin");bully.bind("bulletinActive",_bulletinShowCallback);bully.bind("bulletinExpire",_bulletinHideCallback);connection.subscribe("/investoralert",_investorAlertCallback);}};var _runAway=function($element,className){$element.animate({width:0},_speed,function(){$element.height(0);});_decrementShowing();_$banner.removeClass(className);};var _showBar=function($element,className){_incrementShowing();$element.css({width:"981px",height:"100%"});_$banner.animate({height:"40px"},_speed,function(){_$banner.addClass(className);});};var _scrollio=function($element,className){_$banner.animate({height:0},_speed,function(){_$banner.removeClass(className);$element.css({width:0,height:0});_decrementShowing();});};var _splitEven=function($lil,$mid,$big,className){_incrementShowing();$lil.animate({width:_lilThird},_speed,function(){_$banner.addClass(className);});$mid.animate({width:_midThird},_speed,function(){});$big.animate({width:_bigThird},_speed,function(){});};var _splitUneven=function($larger,$smaller,className,isLargerNew){_incrementShowing();if(isLargerNew){$smaller.animate({width:_minorWidth},_speed);$larger.height("100%").animate({width:_majorWidth},_speed,function(){_$banner.addClass(className);});}
else{$larger.animate({width:_majorWidth},_speed);$smaller.height("100%").animate({width:_minorWidth},_speed,function(){_$banner.addClass(className);});}};var _reverseSplitUneven=function($larger,$smaller){$smaller.animate({width:_minorWidth},_speed);$larger.animate({width:_majorWidth},_speed);};var _goBig=function($element){$element.animate({width:"981px"},_speed);};var _countShowing=function(){var showing=0;if(_$banner.hasClass("bull")){showing++;}
if(_$banner.hasClass("ina")){showing++;}
if(_$banner.hasClass("day")){showing++;}
return showing;};var _incrementShowing=function(){var showing=_countShowing();_$banner.switchClass("showing"+showing,"showing"+(showing+1),_speed);};var _decrementShowing=function(){var showing=_countShowing();_$banner.switchClass("showing"+showing,"showing"+(showing-1),_speed);};var _bulletinShowCallback=function(e,data){if(_$banner.hasClass("bull")){return;}
else if(_$banner.hasClass("ina")){if(_$banner.hasClass("day")){$("#bulletinwrap").height("100%");_splitEven($("#investoralertwrap"),$("#bulletinwrap"),$("#daypartwrap"),"bull");}
else{_splitUneven($("#bulletinwrap"),$("#investoralertwrap"),"bull",true);}}
else if(_$banner.hasClass("day")){_splitUneven($("#bulletinwrap"),$("#daypartwrap"),"bull",true);}
else{_showBar($("#bulletinwrap"),"bull");}};var _bulletinHideCallback=function(e,data){if(!_$banner.hasClass("bull")){return;}
else if(_$banner.hasClass("ina")){if(_$banner.hasClass("day")){_runAway($("#bulletinwrap"),"bull");_reverseSplitUneven($("#investoralertwrap"),$("#daypartwrap"));}
else{_runAway($("#bulletinwrap"),"bull");_goBig($("#investoralertwrap"));}}
else if(_$banner.hasClass("day")){_runAway($("#bulletinwrap"),"bull");_goBig($("#daypartwrap"));}
else{_scrollio($("#bulletinwrap"),"bull");}};var _investorAlertCallback=function(message){if(message.b.a===""){_investorAlertHideCallback(message);}
else{$("#investoralertbanner .meat").text(message.b.a);_investorAlertShowCallback(message);}};var _investorAlertShowCallback=function(message){if(_$banner.hasClass("ina")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("day")){$("#investoralertwrap").height("100%");_splitEven($("#investoralertwrap"),$("#bulletinwrap"),$("#daypartwrap"),"ina");}
else{_splitUneven($("#bulletinwrap"),$("#investoralertwrap"),"ina",false);}}
else if(_$banner.hasClass("day")){_splitUneven($("#investoralertwrap"),$("#daypartwrap"),"ina",true);}
else{_showBar($("#investoralertwrap"),"ina");}
var ad=$("#investoralertwrap div.sponsor");if(ad.length>0){_showAd(ad.attr("id"));}};var _investorAlertHideCallback=function(message){if(!_$banner.hasClass("ina")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("day")){_runAway($("#investoralertwrap"),"ina");_reverseSplitUneven($("#bulletinwrap"),$("#daypartwrap"));}
else{_runAway($("#investoralertwrap"),"ina");_goBig($("#bulletinwrap"));}}
else if(_$banner.hasClass("day")){_runAway($("#investoralertwrap"),"ina");_goBig($("#daypartwrap"));}
else{_scrollio($("#investoralertwrap"),"ina");}
var ad=$("#investoralertwrap div.sponsor");if(ad.length>0){_stopAd(ad.attr("id"));}};var _daypartShowCallback=function(){if(_$banner.hasClass("day")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("ina")){$("#daypartwrap").height("100%");_splitEven($("#investoralertwrap"),$("#bulletinwrap"),$("#daypartwrap"),"day");}
else{_splitUneven($("#bulletinwrap"),$("#daypartwrap"),"day",false);}}
else if(_$banner.hasClass("ina")){_splitUneven($("#investoralertwrap"),$("#daypartwrap"),"day",false);}
else{_showBar($("#daypartwrap"),"day");}};var _daypartHideCallback=function(){if(!_$banner.hasClass("day")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("ina")){_runAway($("#daypartwrap"),"day");_reverseSplitUneven($("#bulletinwrap"),$("#investoralertwrap"));}
else{_runAway($("#daypartwrap"),"day");_goBig($("#bulletinwrap"));}}
else if(_$banner.hasClass("ina")){_runAway($("#daypartwrap"),"day");_goBig($("#investoralertwrap"));}
else{_scrollio($("#daypartwrap"),"day");}};function _showAd(adId){if(ScrillaZilla){var adclient=ScrillaZilla.Escort.getClient(adId);if(adclient!=null){adclient.spload();if(adclient.Data.independentRefresh)
ScrillaZilla.Escort.refreshClient(adId);}}}
function _stopAd(adId){if(ScrillaZilla){ScrillaZilla.Escort.stopRefresh(adId);}}
$(function(){_$banner=$("#notificationbanner");if(BlueGrass&&BlueGrass.Runtime){BlueGrass.Runtime.openConnection({},_connectionCallback);}
if($("#daypartbanner").length>0){$("#daypartbanner").bind("countdownbegin",_daypartShowCallback);$("#daypartbanner").bind("countdownend",_daypartHideCallback);}
if($("#bulletinwrap:visible").length>0){$("#bulletinwrap").width($("#bulletinwrap").width()).height("100%");}
if($("#investoralertwrap:visible").length>0){$("#investoralertwrap").width($("#investoralertwrap").width()).height("100%");var investorAd=$("#investoralertwrap .sponsor");if($("#investoralertwrap").width()>0&&investorAd.length>0){_showAd(investorAd.attr("id"));}}
if($("#daypartwrap:visible").length>0){$("#daypartwrap").width($("#daypartwrap").width()).height("100%");}});return{testBulletin:function(shouldShow){if(shouldShow){$("#bulletinbanner .meat").text(shouldShow);_bulletinShowCallback();}
else{_bulletinHideCallback();}},testInvestorAlert:function(shouldShow){_investorAlertCallback({b:{a:shouldShow?shouldShow:""}});},testDaypart:function(shouldShow){if(shouldShow){_daypartShowCallback();}
else{_daypartHideCallback();}}};}());

$.extend(MarketWatch.Kiosk,function(){var _element,_index,_panels,_ad,_options,_paused=true,_disabled=false,_refresh=false,_adLoaded=false;var _previous=function(){if(!_disabled){clearTimeout(_options.timeoutId);$(_panels[_index]).fadeOut(600,function(){_index<=0?_index=_panels.length-1:--_index;_setTitleAndLoadImg();$(_panels[_index]).fadeIn(600);_resume();});_disableControls();}};var _next=function(){if(!_disabled){clearTimeout(_options.timeoutId);$(_panels[_index]).fadeOut(600,function(){_index>=_panels.length-1?_index=0:++_index;_setTitleAndLoadImg();$(_panels[_index]).fadeIn(600);_resume();});_disableControls();}};var _updatePaused=function(){if(_paused)
$("#kiosk .pause").addClass("paused");else
$("#kiosk .pause").removeClass("paused");};var _pause=function(timespan){if($("#kiosk .pause").is(".paused")&&!timespan){_next();return;}
if(!_disabled){clearTimeout(_options.timeoutId);_paused=true;if(timespan)
setTimeout(_next,timespan);else
_updatePaused();}};var _resume=function(){clearTimeout(_options.timeoutId);_options.timeoutId=setTimeout(_next,_options.timespan);_paused=false;_updatePaused();_disabled=false;};var _disableControls=function(){_disabled=true;}
var _setTitleAndLoadImg=function(){var title=$(_panels[_index]).find("p.kiosktitle").html();var kioskTitle=$("#kiosk h3").html(title||"Kiosk");$(_panels[_index]).find("img.lazy-img").each(function(){var img=$(this);if(img.data("lazy-src")&&img.data("lazy-src").length>0){img.attr("src",img.data("lazy-src"));}});};var _showAd=function(){if(_ad.length<=0||typeof(ScrillaZilla)=="undefined"||!ScrillaZilla)
return;_pause();if(_refresh||!_adLoaded){_adLoaded=true;var client=ScrillaZilla.Escort.getClient(_ad.children().attr("id"));if(client){client.Data.ord=ScrillaZilla.Escort.newOrd();client.load();}}
$(_panels).hide();$("#kiosk h3").add("#kiosk div.blockcontrols").hide();_ad.removeClass("invisible");setTimeout(function(){_hideAd();_options.adTimeoutId=setTimeout(_showAd,_options.adTimespan);},_options.adShowTimespan);};var _hideAd=function(){_ad.addClass("invisible");$("#kiosk h3").add("#kiosk div.blockcontrols").show();if(_panels.length>0)
$(_panels[_index]).show();if(_paused)
_resume();};$(function(){if(typeof(_element)=="undefined"||!_element)
return;_element.mouseover(function(){if(!_paused)
_pause(300000);}).find("div.blockcontrols .pause").click(function(e){e.preventDefault();_pause();}).siblings(".previous").click(function(e){e.preventDefault();_previous();}).siblings(".next").click(function(e){e.preventDefault();_next();});});return{setup:function(element,options){_element=$(element);_options=options||{};_index=_options.startIndex||0;_options.timespan=_options.timespan||15000;_options.adTimespan=_options.adTimespan||120000;_options.adShowTimespan=_options.adShowTimespan||9000;_panels=_element.find("ul li:not(.ad)");_ad=_element.find("ul li.ad");_refresh=options.refresh;_setTitleAndLoadImg();if(_options.autostart){if(typeof(ScrillaZilla)!=="undefined"&&typeof(ScrillaZilla.Escort)!=="undefined")
ScrillaZilla.Escort.addCallback("load",MarketWatch.Kiosk.start);else{_paused=false;_updatePaused();_options.adTimeoutId=setTimeout(_showAd,_options.adTimespan);_options.timeoutId=setTimeout(_next,_options.timespan);}}
else if(_ad.length>0&&!_options.adInRotation){ScrillaZilla.Escort.addCallback("load",function(){setTimeout(_hideAd,_options.adShowTimespan);});}},start:function(){MarketWatch.Kiosk.resume();MarketWatch.Kiosk.startAdRotation();},pause:function(){if(typeof(_element)=="undefined"||!_element)
return;_pause();},resume:function(){if(typeof(_element)=="undefined"||!_element)
return;_resume();},startAdRotation:function(){if(typeof(_options)=="undefined"||!_options)
return;_options.adTimeoutId=setTimeout(_showAd,_options.adTimespan);},showAd:function(){_showAd();}};}());

$.extend(MarketWatch.MarketsNews,function(){var _timerId=null;var _timerDuration=240000;var _newsAjaxUrl=null;var _olderNewsUrl=null;var _requestPending=false;var _getDocId=function(ctrl){var vals=(ctrl!=undefined?ctrl.val().split("::"):'');return((vals!=undefined&&vals.length==2)?vals[1]:'');}
var _getTimeStamp=function(ctrl){var vals=(ctrl!=undefined?ctrl.val().split("::"):'');return((vals!=undefined&&vals.length==2)?vals[0]:'');}
var _getLatestHeadlines=function(){var ctrl=$(".marketoverviewheadlines li:first input");var id=_getDocId(ctrl);$.ajax({type:"GET",url:_newsAjaxUrl,data:{newestId:id},success:function(data){$(".marketoverviewheadlines ol").find("li:eq(0)").before(data);if(typeof(data.minutesago)!="undefined"){data.find(".timeAgo").minutesago();}
clearTimeout(_timerId);_timerId=setTimeout(_getLatestHeadlines,_timerDuration);},error:function(request,status,error){}});}
var _getOlderHeadlines=function(){var ctrl=$(".marketoverviewheadlines li:last input");var docId=_getDocId(ctrl);var ts=_getTimeStamp(ctrl);var requestParams={docId:docId,dateTime:ts,channelName:'News & Commentary|Markets',count:20}
_requestPending=true;$.ajax({url:_olderNewsUrl,cache:false,data:requestParams,success:function(data){var item=$(".marketoverviewheadlines").find("li:last").after(data);_requestPending=false;},failure:function(request,status,error){_requestPending=false;}});};var _startNewsTimer=function(){if(_timerId==null){_timerId=setTimeout(_getLatestHeadlines,_timerDuration);}};var _isLastInView=function(control){if(control==undefined){return;}
var portHeight=control.height();var portTop=control.offset().top;var element=control.find("ol li:last p");var top=Math.round(element.offset().top);var height=element.height()-5;var bottom=portHeight+Math.round(portTop)-height;return(top<=bottom);};$(document).ready(function(){var box=$("#marketoverviewheadlines .headlinewrapper");$(box).scroll(function(event){if(_isLastInView($(box))&&!_requestPending){_getOlderHeadlines();}});_requestPending=false;});return{startNewsTimer:function(){_startNewsTimer();},setNewsAjaxUrl:function(url){_newsAjaxUrl=url;},setOlderNewsUrl:function(url){_olderNewsUrl=url;}}}());

$.extend(MarketWatch.MarketState,function(){var _quoteDisplayManager=new(function(){var _elementMap=new Object();var _countDownToCloseCallBack=function(){$(".quotedisplay").removeClass("open pre after closed").addClass("countdown")
$(".quotedisplay .marketstate").text("Countdown to close");};var _marketOpened=function(element){element.removeClass("pre after closed countdown").addClass("open");element.find(".marketstate").text("The market is open");}
var _marketClosed=function(element){if(!element.hasClass('after')){element.removeClass('countdown open pre').addClass("closed");element.find(".marketstate").text("The market is closed");}}
var _getStateText=function(state){state=state.toLowerCase();if(state.length>=4&&state.substring(0,4)=="open"){return"Open";}
else if(state.toLowerCase()=="pre-market"){return"Pre";}
else if(state.toLowerCase()=="after-market"){return"After";}
return"Closed";};var _marketStateChangeCallBack=function(message){var elements=_elementMap[message.h.t]
if(message&&message.b&&message.b.s&&message.b.x&&message.b.c){var newState=_getStateText(message.b.c);var nextState=_getStateText(message.b.x);if((newState=="After")||(newState=="Closed")){$.each(elements,function(){_marketClosed(this);});}
if(newState=="Open"){$.each(elements,function(){_marketOpened(this);});}}};return{setup:function(){$("div.quotedisplay").each(function(){var channel=$(this).find("span.bgChannel").text();if(channel&&channel.length>0)
_quoteDisplayManager.bindElement(this,channel);});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("QuoteDisplay marketstate setup called more than once");};},bindElement:function(element,channelName){var _connection=BlueGrass.Runtime.getConnection();if(!_connection||_connection==null||typeof(_connection)==='undefined'||!_connection.isOpen())
return;if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]=[];}
element=$(element);_elementMap[channelName].push(element);if(_elementMap[channelName].length==1){_connection.subscribe(channelName,_marketStateChangeCallBack);}}};})();var _countdownManager=new(function(){var _countdownMap=new Object();var _config={countdownBegin:3600000};var _callCountdowns=function(momentName,type,until){var callbacks=_countdownMap[momentName].callbacks;$.each(callbacks,function(){this(momentName,type,until);});};var _countdownIt=function(momentName){var now=new Date().getTime();var countdown=_countdownMap[momentName];if(!countdown||countdown.callbacks.length==0)
return;var timeUntilMoment=countdown.moment-now;var oneIntervalBeforeMoment=countdown.moment-_config.countdownBegin;var timeUntilBegin=oneIntervalBeforeMoment-now;var delay=Math.min(timeUntilBegin,15000);if(_config.countdownBegin===0||timeUntilBegin<=0){if(countdown.count==0){_callCountdowns(momentName,"countdownbegin",timeUntilMoment);}
else{_callCountdowns(momentName,"countdown",timeUntilMoment);}
if(timeUntilMoment<0){if(countdown.count>0)
_callCountdowns(momentName,"countdownend",0);delete _countdownMap[momentName];return;}
countdown.count++;delay=850;}
countdown.timer=setTimeout(function(){_countdownIt(momentName);},delay);};return{addCountdown:function(momentName,theMoment,callback,options){if(!momentName||!theMoment||typeof(callback)!="function")
return;if(options)$.extend(_config,options);if(!_countdownMap[momentName]||typeof(_countdownMap[momentName])=="undefined"){_countdownMap[momentName]={timer:null,callbacks:[],moment:theMoment,count:0};_countdownMap[momentName].callbacks.push(callback);_countdownMap[momentName].timer=setTimeout(function(){_countdownIt(momentName);},250);}
else{_countdownMap[momentName].callbacks.push(callback);}}}})();$(document).ready(function(){BlueGrass.Runtime.openConnection({},function(connection,type){if(type=="connect"){_quoteDisplayManager.setup();}});});return{addCountdownCallback:function(momentName,theMomentTime,callback,options){_countdownManager.addCountdown(momentName,theMomentTime,callback,options);}}}());

$.extend(MarketWatch.Panels,function(){function _updateVideo(){$("#latestvideo .morevids .videocarousel ul li div img").add("#latestvideo .morevids .videocarousel ul li div span").click(function(e){e.preventDefault();var guid=$(this).prevAll('.invisible').html();var headline;$("#latestvideo .morevids .videocarousel ul li div img.selected").removeClass("selected");if(this.tagName=='SPAN'){headline=$(this).html();$(this).prev().addClass('selected');}
else{headline=$(this).next().html();$(this).addClass('selected');}
$("#latestvideo .nowplaying").html('<div id="video_'+guid+'"></div>').next().html(headline);embedPlayerByVideoId(guid,'video_'+guid,'151','268');}).mouseover(function(){$(this).parent().addClass('hover');}).mouseout(function(){$(this).parent().removeClass('hover');});}
function _updateCarousel(o){o=$.extend({carouselDivId:null,carouselSize:3},o||{});$("#"+o.carouselDivId).jCarouselLiteSlide({circular:typeof(o.circular)!="undefined"?o.circular:true,btnPrev:"#"+o.carouselDivId+" .blockcontrols .previous",btnNext:"#"+o.carouselDivId+" .blockcontrols .next",nextTitleList:"#"+o.carouselDivId+" .nextpanel p",speed:1000,visible:o.carouselSize||3,scroll:1,pause:true,beforeStart:function(a){$(".lastpanel",a[a.length-1]).removeClass("lastpanel");$("#"+o.carouselDivId+" img.very-lazy-img").each(function(){var img=$(this);if(img.data("lazy-src")&&img.data("lazy-src").length>0){img.attr("src",img.data("lazy-src"));img.removeClass("very-lazy-img");}});},afterEnd:function(a){$(".panel",a[a.length-1]).addClass("lastpanel");}});}
var _blocksToRefresh=new Object();var _blocksToRefreshCallbacks=new Object();var _refreshContentTimeout=300000;var _RefreshContent=function(){$.each(_blocksToRefresh,function(){_getPartialView(_blocksToRefresh[this.id].url,$("#"+this.id).parent(),this.callback);});setTimeout(_RefreshContent,_refreshContentTimeout);}
var _getPartialView=function(url,contentPlaceholder,callback){$.get(url,{},function(partialView){contentPlaceholder.html(partialView);callback();});};$(document).ready(function(){setTimeout(_RefreshContent,_refreshContentTimeout);});return{AddBlockToRefreshCycle:function(divId,url,callback){_blocksToRefresh[divId]={url:url,callback:callback,id:divId};},UpdateCarousel:function(o){_updateCarousel(o);},UpdateVideo:function(){_updateVideo();}};}());

$.extend(MarketWatch.DockingBar.Portfolio,function(){var _subTimer=null;var _unsubTable=function(){var rows=$("#portfoliodata tr.bgQuote").each(function(){var $this=$(this);BlueGrass.Quote.unbindElement($this,$this.find(".bgRealtimeChannel").text()||$this.find(".bgChannel").text());});};var _subTable=function(){_subTimer=null;var rows=$("#portfoliodata tr.bgQuote").each(function(){var $this=$(this);$(".bgCurrencyFormatting").data("bgFormat",{last:"#,###.0000",change:"#,###.0000",percentChange:"#,###.0000%"});BlueGrass.Quote.bindElement($this,$this.find(".bgRealtimeChannel").text()||$this.find(".bgChannel").text());});}
var _updateTable=function(tag){_unsubTable();$.ajax({type:"GET",url:MarketWatch.getBaseUrl()+"/DockingBar/Dock/PortfolioRefresh",dataType:"html",data:{tag:tag},success:function(stuff){if(stuff.indexOf("portfolioPager")>0){$("#portfoliodata").html(stuff);if(_subTimer!=null)
clearTimeout(_subTimer);_subTimer=setTimeout(_subTable,2000);}
else
$("#portfoliodata").html("There was an error retrieving your portfolio.");},error:function(request,status,error){$("#portfoliodata").text("There was an error retrieving your portfolio.");}});};var _bindTagList=function(){$("#portfolionavtag").change(function(e){e.preventDefault();_updateTable($(this).val());});};var _textExtraction=function(node){if(node.className=="port-ratechange"){var text=$(node).find("p.bgPercentChange").text();return text.replace(/%/,"");}
else if(node.className=="port-symb")
return $(node).find("a").text();return $(node).text();};return{bindTagList:_bindTagList,sortExtraction:_textExtraction,unsubscribe:function(){_unsubTable();},subscribe:function(){if(_subTimer!=null)
clearTimeout(_subTimer);_subTimer=setTimeout(_subTable,2000);}};}());

$.extend(MarketWatch.News,function(){var _newsBoxUrl="";var _newsCount=10;function _newsBox(container,doctype,ticker,countryCode,topic){var _scrollTimerActive=false;var _animDelay=800;var _newsBox=$(container);var _viewPort=_newsBox.find("ol");var _newsArrived=false;var _topOnArrival=false;var _queue=new Array();var _dequeueInterval=3000;var _intervalId=0;var _doctype=doctype;var _ticker=ticker||"";var _countryCode=countryCode||"";var _topic=topic||"";var _requestPending=false;var _buttonPressed=false;var _noMoreNews=false;var _deleteQueue=new Array();var thunk=this;var _getOlderNews=function(){if(_noMoreNews||_requestPending)
return;var date=_getOldestDate();var uniqueId=_getOldestUniqueId();var docId=uniqueId.docId?uniqueId.docId:null;var sequence=uniqueId.sequence?uniqueId.sequence:null;var messageNumber=uniqueId.messageNumber?uniqueId.messageNumber:null;var channel=_getChannel();var requestParams={ticker:_ticker,countryCode:_countryCode,dateTime:date,docId:docId,docType:_doctype,sequence:sequence,messageNumber:messageNumber,count:_newsCount,channelName:channel,topic:_topic};_requestPending=true;$.ajax({url:_newsBoxUrl,dataType:"json",cache:false,data:requestParams,success:_olderNewsResponse,failure:_olderNewsFailure});};var _olderNewsResponse=function(response){if(!response||response.length==0){_noMoreNews=true
_newsBox.find("li.loading").remove();}
var existingHeight=_getItemsHeight();thunk.addOlderNews(response);var newHeight=_getItemsHeight();var delta=newHeight-existingHeight;_requestPending=false;_newsBox.find(".next").removeClass("disabled");if(_buttonPressed){_scrollNews(null,delta);}};var _olderNewsFailure=function(response){_noMoreNews=true;thunk.addOlderNews(response);_requestPending=false;};var _isFirstInView=function(){var portTop=_viewPort.offset().top;var element=_viewPort.find("li:first");var top=element.offset().top;return(top==portTop);};var _isLastInView=function(){var portHeight=_viewPort.height();var portTop=_viewPort.offset().top;var element=_viewPort.find("li:last");var top=Math.round(element.offset().top);var height=element.height();return(top<portHeight+portTop-height);};var _isReadyForMoreNewsHelper=function(viewPort,pullHeightMultiplier){var portHeight=viewPort.height();var portTop=viewPort.offset().top;var element=viewPort.find("li:last");var top=element.offset().top;var height=element.height();return(top<(portHeight+portTop-height)+(portHeight*pullHeightMultiplier));};var _isReadyForMoreNews=function(){return _isReadyForMoreNewsHelper(_viewPort,2);};var _isScrollbarReadyForMoreNews=function(){return _isReadyForMoreNewsHelper(_viewPort.parent(),.5);};var _newsSpark=null;var _doNews=function(message){if(_newsSpark){if(!message.HeadlineText){message.HeadlineText=message.b.h;message.Author=message.b.p;message.Abstract=message.b.a;message.DocGuid={Value:message.b.g};message.UniqueId=message.h.s+":"+message.h.n;message.Url=message.b.u;message.EasternTimeOffset={Value:message.b.o};message.TimestampUtc={Value:message.b.z};message.ContentType=message.b.c;message.Instruments=[{Type:message.b.tt,CountryCode:message.b.tc,Ticker:message.b.ts}];message.SeoHeadlineFragment=message.b.seo;message.Breaking=message.b.b;message.ThirdPartyUrl=message.b.tpu;message.Correction=message.b.cn;}
else{message.DocGuid={Value:message.DocGuid};message.TimestampUtc={Value:message.TimestampUtc};message.EasternTimeOffset={Value:message.EasternTimeOffset};}
if(typeof(message.ContentType)=="number"){if(message.ContentType==1)
message.ContentType="story";else if(message.ContentType==2)
message.ContentType="audio";else if(message.ContentType==3)
message.ContentType="video";else if(message.ContentType==4)
message.ContentType="nofollow";else if(message.ContentType==5)
message.ContentType="headline";}
var linkValue=_newsBox.data("linkValue");if(typeof(linkValue)=="undefined"){linkValue=_newsBox.attr("data-linkValue");}
if(location.host.indexOf("blogs.")===0&&message.Url&&message.Url.length>0&&message.Url[0]=="/"){message.Url="http://www.marketwatch.com"+message.Url;}
if(linkValue==undefined||linkValue.length==0){return _newsSpark({headline:message});}else{return _newsSpark({headline:message,link:linkValue});}}
if(message.b)
return message.b.h;if(message.HeadlineText)
return message.HeadlineText;};var _getOldestDate=function(){var dateExp=/1?[0-9]:[0-5][0-9] [a|p]\.m\. (Jan\.|Feb\.|March|April|May|June|July|Aug\.|Sept\.|Oct\.|Nov\.|Dec\.) [0-3]?[0-9], [1-2][0-9][0-9][0-9]/;var timestamp=_viewPort.find(".timestamp:last span");var text=timestamp.text();var dateMatch=dateExp.exec(text);return dateMatch?dateMatch[0]:null;};var _getOldestUniqueId=function(){var uniqueId=_viewPort.find("li.fnewsitem:last").data("uniqueid");if(typeof(uniqueId)==='number'){return{docId:uniqueId};}
else if(typeof(uniqueId)==='string'&&uniqueId.indexOf(":")>0){var args=uniqueId.split(":");return{sequence:args[0],messageNumber:args[1]};}
else{return{};}};var _getChannel=function(){return _newsBox.find(".bgChannel").text();};var _setViewPortTimer=function(){if(_scrollTimerActive){_scrollTimerActive=false;_viewPort.stopTime();}
if(!_isFirstInView()){_viewPort.oneTime("20s",function(){_viewPortTimerExpired();});_scrollTimerActive=true;_newsArrived=false;}};var _viewPortTimerExpired=function(){if(_newsArrived){_scrollToTop();_scrollTimerActive=false;}
else
{_topOnArrival=true;_scrollTimerActive=false;}};var _rowId=_viewPort.find("li").size()+1;var _maxRows=100;var _mySubscribeCallback=function(message){var actType=message.b.at;if(actType=='delete'){if(!message.b.seo||message.b.seo.length==0||message.b.c=="headline")
return;var found=_viewPort.find("a[href*='"+message.b.seo+"']").parents("li");if(found.length==1){var tempIndex=_viewPort.find("li").index(found);found.remove();message.previousIndex=tempIndex;}
else{found=_queueIndexOf(message.b.g);if(found>-1){_queue.splice(found,1);}}
_deleteQueue.push(message);if(_deleteQueue.length>5)
_deleteQueue.shift();}else if(actType=='update'){if(!message.b.seo||message.b.seo.length==0)
return;var found=_viewPort.find("a[href*='"+message.b.seo+"']").parents("li");if(found.length==1){found.replaceWith(_doNews(message));}
else{found=_queueIndexOf(message.b.g);if(found>-1){_queue.splice(found,1,message);}
else{if(message.b.c=='headline')
return;found=_queueIndexOf(message.b.g,_deleteQueue);if(found>-1){var date=BlueGrass.Utility.convertToExchangeTime(message.b.z,message.b.o);var deletedDate=BlueGrass.Utility.convertToExchangeTime(_deleteQueue[found].b.z,_deleteQueue[found].b.o);if(date.getTime()-deletedDate.getTime()>0){if(_intervalId!=0){_queue.push(message);}
else if(_scrollTimerActive){_newsArrived=true;_queue.push(message);}
else{_addNews(message);if(_topOnArrival){_scrollToTop();_topOnArrival=false;}}
_deleteQueue.splice(found,0);}else if(message.previousIndex&&message.previousIndex>0){$(_doNews(message)).insertBefore(_viewPort.find("li:eq("+message.previousIndex+")"));}}}}}else if(actType=='insert'){if(_intervalId!=0){_queue.push(message);}
else if(_scrollTimerActive){_newsArrived=true;_queue.push(message);}
else{_addNews(message);if(_topOnArrival){_scrollToTop();_topOnArrival=false;}}}else{if(console!=null){console.log("not inserting: "+actType);}}};var _addNews=function(message){var newContent=_doNews(message);var $newContent=$(newContent);_viewPort.find("li:eq(0)").before($newContent);if(typeof($newContent.minutesago)!="undefined"){$newContent.find(".timeAgo").minutesago();}
if(_rowId>_maxRows){_viewPort.find("#li"+(_rowId-_maxRows)).remove();}
_rowId+=1;};var _scrollToTop=function(){_viewPort.stop().scrollTo('li:eq(0)',_animDelay);_newsBox.find(".previous").addClass("disabled");_newsBox.find(".next").removeClass("disabled");_checkQueue();};var _checkQueue=function(){if(_isFirstInView()&&_queue.length>0&&_intervalId==0){_intervalId=setInterval(function(){var message=_queue.shift();_addNews(message);if(_queue.length==0){clearInterval(_intervalId);_intervalId=0;}},_dequeueInterval);}};var _scrollNews=function(obj,offset){var dir="+=";if($(obj)!=null){if($(obj).hasClass('previous')){dir="-=";}}
_viewPort.stop().scrollTo(dir+offset,(offset*8.6),{onAfter:_after,easing:'linear'});};var _enableDisableButtons=function(){if(!_isFirstInView()){_newsBox.find(".previous").removeClass("disabled");}else{_newsBox.find(".previous").addClass("disabled");}
if(_isLastInView()){_newsBox.find(".next").addClass("disabled");}else{_newsBox.find(".next").removeClass("disabled");}};var _after=function(){if(_isReadyForMoreNews()){_getOlderNews();}};_newsBox.find('.blockcontrols .previous').mousedown(function(event){_buttonPressed=true;if($(this).hasClass("disabled"))
return;_scrollNews(this,_getItemsHeight());_checkQueue();}).mouseup(function(event){_buttonPressed=false;_viewPort.stop();_finishScroll($(this),'previous');_enableDisableButtons();}).click(function(event){_buttonPressed=false;event.preventDefault();_setViewPortTimer();});_newsBox.find('.blockcontrols .next').mousedown(function(event){_buttonPressed=true;if($(this).hasClass("disabled"))
return;if(!_isLastInView()){_scrollNews(this,Math.round(_viewPort.find("li:last").offset().top));if(_intervalId!=0){clearInterval(_intervalId);_intervalId=0;}}}).mouseup(function(event){_buttonPressed=false;_viewPort.stop();_finishScroll($(this),'next');if(_isLastInView()&&!_requestPending){_getOlderNews();}
_enableDisableButtons();}).click(function(event){_buttonPressed=false;event.preventDefault();_setViewPortTimer();});var _finishScroll=function(obj,dir){var portHeight=_viewPort.height();var portTop=_viewPort.offset().top;var elements=_viewPort.find("li");var targetIndex=-1;for(i=0;i<elements.length;i++){var elementTop=$(elements[i]).offset().top;if(elementTop>portTop){targetIndex=i-1;break;}else if(elementTop==portTop){break;}}
if(targetIndex>=0){var el=$(elements[targetIndex]);var elPadTop=parseInt(el.css("padding-top"));var elPadBot=parseInt(el.css("padding-bottom"));var elHght=el.height()+elPadTop+elPadBot;var elTop=Math.round(el.offset().top);var offset=0;if(dir=='next'){offset=(elTop+elHght-portTop);}else{offset=(portTop-elTop);}
if(offset>0){_scrollNews(obj,offset);}}}
var _getItemsHeight=function(){var elements=_viewPort.find("li");var totalHeight=0;for(i=0;i<elements.length;i++){totalHeight+=$(elements[i]).height();}
return totalHeight;}
var _scroll=function(){if(_isScrollbarReadyForMoreNews()){_getOlderNews();}};_newsBox.find(".headlinewrapper").scroll(_scroll);var _queueIndexOf=function(guid,queue){var i;var message;if(!queue)
queue=_queue;for(i=0;i<queue.length;i++){message=queue[i];if(message.b.g==guid){return i;}}
return-1;};this.bluegrassCallback=_mySubscribeCallback;this.addOlderNews=function(headlines){var content="";$.each(headlines,function(){content+=_doNews(this);});_viewPort.find("li:last").before(content);};this.setOlderNewsCallback=function(callback){_getOlderNews=callback;};this.setNewsFormatterCallback=function(callback){_newsFormatterCallback=callback;};this.setNewsSpark=function(fctn){_newsSpark=fctn;};this.setNewsBoxUrl=function(url){_newsBoxUrl=url;};};$(document).ready(function(){$("span.timeAgo").minutesago();var latestnewsBox=new MarketWatch.News.NewsBox("#latestnews");if(typeof(Spark)!="undefined"&&Spark.Shared){latestnewsBox.setNewsSpark(Spark.Shared._News_HeadlineItem.RenderView);}
var _myConnectionCallback=function(connection,type){if(type=="connect"){_channel=connection.subscribe("/news/latest",latestnewsBox.bluegrassCallback);}};try{BlueGrass.Runtime.openConnection({},_myConnectionCallback);}
catch(exception){}});return{setNewsBoxUrl:function(url){_newsBoxUrl=url;},NewsBox:_newsBox}}());

$.extend(MarketWatch.Section,function(){var _formatBluegrass=function(){$("#overviewuspage div.data, #overvieweuropepage div.data, #overviewasiapage div.data").each(function(){var $this=$(this);if(($this.attr('data-decimal')==undefined)||($this.attr('data-decimal')=='0')){$this.data("bgFormat",{last:"#,###",change:"#,###",percentChange:"#,###.##%"});}
else{var format="#,###.";for(var loop=0;loop<parseInt($this.attr("data-decimal"));loop=loop+1)
format+="#";$this.data("bgFormat",{last:format,change:format,percentChange:"#,###.##%",largeLastMinimum:100000});}});}
var _expandMarketOverview=function(duration){var marketOverview=$("#marketoverview");var expander=$("#marketoverviewexpander");var height=(marketOverview.height()+15)+"px";var width=$("#maincontent").outerWidth()+"px";_fadeArrow(expander,'fast','out');$("#maincontent").animate({marginTop:height},{duration:duration,complete:function(){marketOverview.animate({marginLeft:"-"+width,width:"959px"},{duration:duration,complete:function(){marketOverview.addClass("expanded");_fadeArrow(expander,'fast','in');expander.addClass("expanded");}});}});var s=s_gi('djglobal,djmarketwatch');s.prop45='mw_home_marketoverview';void(s.tl(true,'o','mw_home_marketoverview'));};var _collapseMarketOverview=function(duration){var marketOverview=$("#marketoverview");var expander=$("#marketoverviewexpander");_fadeArrow(expander,'fast','out');marketOverview.animate({marginLeft:"0px",width:"377px"},{duration:duration,complete:function(){$("#maincontent").animate({marginTop:"0"},{duration:duration,complete:function(){if(marketOverview.hasClass("tempopen")){marketOverview.removeClass("tempopen");}
marketOverview.removeClass("expanded");_fadeArrow(expander,'fast','in');expander.removeClass("expanded");}});}});};var _fadeArrow=function(expander,rate,direction){var hide=($.browser.msie&&(parseInt(jQuery.browser.version.substr(0,1))==6));if(direction=='in'){hide?expander.css('visibility','visible'):expander.fadeIn(rate);}else if(direction=='out'){hide?expander.css('visibility','hidden'):expander.fadeOut(rate);}};var _updateCookieValue=function(cookieName,keyName,value){var cookie=$.cookie(cookieName);var expiresVal='';var result='';if(cookie!=null){var pairs=cookie.split('&');for(var i=0;i<pairs.length;i++){var split=pairs[i].split('=');if(split[0]==keyName){split[1]=value;}
if(split[0]=='exp'){expiresVal=new Date(split[1]);}
if(result.length>0){result+='&';}
result+=split[0]+'='+split[1];}}else{var date=new Date();date.setYear(date.getFullYear()+2);expiresVal=date;result=keyName+'='+value+'&exp='+(expiresVal.getMonth()+1)+'/'+expiresVal.getDate()+'/'+expiresVal.getFullYear();}
$.cookie(cookieName,result,{path:'/',domain:'.marketwatch.com',expires:expiresVal});};$(function(){var mo=$("#marketoverview");if(mo&&mo.length>0){if(typeof(marketoverviewchartChart!="undefined"))
MarketWatch.UI.bindRangeMenu($("div.range_menu_base",mo),marketoverviewchartChart);_formatBluegrass();$("#marketoverviewexpander").click(function(){mo.stopTime();var duration=1000;if(mo.hasClass("expanded"))
_collapseMarketOverview(duration);else
_expandMarketOverview(duration);});$("#marketoverview div.range_menu_base").bind("rangeChange",function(e,data){$(this).find(".title .range").text(data.range);var range=$("#marketoverview .fakethead .range");range.text(data.range.replace("s","")+" Chg");if(data.range==="1 Day"){range.hide();$("#marketoverview .fakethead").find(".change, .changepercent").show();}
else{$("#marketoverview .fakethead").find(".change, .changepercent").hide();range.show();}});$("div.range_menu_base",mo).trigger("rangeChange",{range:"1 Day"});}
MarketWatch.UI.bindTabs();$("#fundfinderbutton").click(function(){var fundType=$("#FundType").get(0).options[$("#FundType").get(0).selectedIndex].value;var returnTimePeriod=$("#ReturnFundPeriod").get(0).options[$("#ReturnFundPeriod").get(0).selectedIndex].value;var netAsset=$("#FundValue").get(0).options[$("#FundValue").get(0).selectedIndex].value;var redirect=window.location+"tools/mutual-fund/screener?isClicked=1&siteID=mktw&FundType="+fundType+"&ReturnFundPeriod="+returnTimePeriod+"&FundValue="+netAsset;window.location=redirect;});$("div.mo_keep_open").click(function(){var mo=$("#marketoverview")
if(mo!=null){mo.stopTime();}
var $this=$(this);if($this.hasClass('chk')){$this.removeClass('chk');_updateCookieValue('mw5_prefs','mox','False');}else{$this.addClass('chk');_updateCookieValue('mw5_prefs','mox','True');}});});return{CollapseMarketOverview:function(){_collapseMarketOverview(1000);},ExpandMarketOverview:function(){_expandMarketOverview(1000);}};}());

if(typeof(DayParts)=="undefined"){var DayParts={};}
$.extend(MarketWatch.DayParting,function(){var _settings={isNewsHole:false,speed:800};var _initialTick=true;var _previousEvent=null;var _currentEvent=null;var _queuedEvent=null;var _getNextEvent=function(){if(_settings.eventEndpoint){var wait=Math.floor(Math.random()*3600000);setTimeout(function(){$.get(_settings.eventEndpoint,function(response){if(response){_queuedEvent={market:response.market,display:response.display,state:eval("DayParts."+response.state),stateDisplay:response.stateDisplay,start:new Date(response.start),end:new Date(response.end),links:response.links};}});},wait);}};var _setupEvent=function(event){if(!event||!event.start||!event.end){return;}
var now=new Date().getTime();var bump=(!_settings.time)?0:now-_settings.time.getTime();MarketWatch.MarketState.addCountdownCallback(event.state,event.end.getTime()+bump,_transition,{countdownBegin:event.end.getTime()-event.start.getTime()});};var _transition=function(event,thing,time){if(thing==="countdown"){if(_requiresCounter(_currentEvent)){$("#daypartcountdown").text(_formatCountdown(time));}}
else{if(_settings.isNewsHole){_newsHoleTransition(thing);}
else{_mastheadTransition(thing);}
if(thing==="countdownend"){_previousEvent=_currentEvent;_currentEvent=_queuedEvent;_setupEvent(_currentEvent);_queuedEvent=null;_getNextEvent();}
else if(thing==="countdownbegin"){if(_currentEvent===null){_previousEvent=_currentEvent;_currentEvent=_queuedEvent;_queuedEvent=null;}
if(_initialTick){_initialTick=false;}}}};var _newsHoleTransition=function(thing){var ad;if(thing==="countdownend"){if(_currentEvent&&(!_queuedEvent||_currentEvent.end.getTime()!==_queuedEvent.start.getTime())){$("#daypartwrapmain").animate({height:0});$("#newshole,#daypartmain").switchClass(_currentEvent.market.toLowerCase(),"").removeClass(_currentEvent.state.toLowerCase());_distifyLinks(null);}
else{$("#newshole").switchClass(_currentEvent.state.toLowerCase(),_queuedEvent.state.toLowerCase(),_settings.speed);switch(_queuedEvent.state){case DayParts.BeforeTheBell:$("#daypartmain").animate({color:"#a13801",backgroundColor:"#e2ae05"},_settings.speed);break;case DayParts.CountdownToClose:$("#daypartmain").animate({color:"#bbd3b6",backgroundColor:"#408036"},_settings.speed);break;case DayParts.AfterHours:$("#daypartmain").animate({color:"#8eabd8",backgroundColor:"#0a5390"},_settings.speed);break;default:break;}
if(_currentEvent.market!==_queuedEvent.market){$("#newshole").switchClass(_currentEvent.market.toLowerCase(),_queuedEvent.market.toLowerCase());}
$("#daypartmain .marketstate, #daypartmain .links").fadeOut(function(){if($(this).hasClass("links")){$(this).html(_currentEvent.links);}
else{$(this).find(".state").text(_currentEvent.stateDisplay);}
$(this).fadeIn();});_distifyLinks(_queuedEvent.market,_queuedEvent.state);}
ad=$("#ad_DaypartHome"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);if(ad.length>0){_stopAd(ad.attr("id"));ad.html("");}}
else if(thing==="countdownbegin"){if(_currentEvent){_distifyLinks(_currentEvent.market,_currentEvent.state);}
else{_distifyLinks(_queuedEvent.market,_queuedEvent.state);}
if($("#daypartwrapmain").height()===0&&$("#daypartwrapmain").is(":visible")){if($("#daypartwrapmain").hasClass("withtickers")&&$("#daypartwrapmain").hasClass("withad")){$("#daypartwrapmain").animate({height:"67px"});}
else{$("#daypartwrapmain").animate({height:"48px"});}
$("#newshole").addClass(_queuedEvent.market.toLowerCase()).addClass(_queuedEvent.state.toLowerCase());ad=$("#ad_DaypartHome"+_queuedEvent.display.replace(/ /g,"")+_queuedEvent.state);if(ad.length>0){_showAd(ad.attr("id"));}}
else{ad=$("#ad_DaypartHome"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);if(ad.length>0){_showAd(ad.attr("id"));}}
$("#daypartmain .tickers .bgQuote").data("bgFormat",{percentChange:'#,##0.0%'});}};var _mastheadTransition=function(thing){if(thing==="countdownend"&&_currentEvent&&_queuedEvent&&_currentEvent.end.getTime()===_queuedEvent.start.getTime()){$("#daypartbanner").fadeOut(function(){$(this).find(".marketstate .state").text(_currentEvent.stateDisplay);$("#daypartbanner .links").html(_currentEvent.links);$("#daypartbanner").switchClass(_previousEvent.state.toLowerCase(),_currentEvent.state.toLowerCase());$(this).fadeIn();});}
else{$("#daypartbanner").trigger(thing);}
var ad;if(thing==="countdownend"){ad=$("#ad_DaypartBanner"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);if(ad.length>0){_stopAd(ad.attr("id"));ad.html("");}}
else if(thing==="countdownbegin"){if(_currentEvent){ad=$("#ad_DaypartBanner"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);}
else{ad=$("#ad_DaypartBanner"+_queuedEvent.display.replace(/ /g,"")+_queuedEvent.state);}
if(ad.length>0){_showAd(ad.attr("id"));}}};var _requiresCounter=function(event){if(event!=null){return(event.state===DayParts.BeforeTheBell||event.state===DayParts.CountdownToClose);}
return false;};var _formatCountdown=function(ms){if(ms<=0)
return"";var secs=Math.floor(ms/1000);var mins=Math.floor(secs/60);var hrs=Math.floor(mins/60);secs=secs%60;mins=mins%60;hrs=hrs%60;return hrs+":"+(mins<10?"0"+mins:mins)+":"+(secs<10?"0"+secs:secs);};function _showAd(adId){if(ScrillaZilla){var adclient=ScrillaZilla.Escort.getClient(adId);if(adclient!=null){adclient.spload();if(adclient.Data.independentRefresh)
ScrillaZilla.Escort.refreshClient(adId);}}}
function _stopAd(adId){if(ScrillaZilla){ScrillaZilla.Escort.stopRefresh(adId);}}
var _distifyLinks=function(market,state){var distValue="";if(market&&state){switch(state){case DayParts.BeforeTheBell:distValue="beforebell";break;case DayParts.CountdownToClose:distValue="countdown";break;case DayParts.AfterHours:distValue="afterbell";break;default:break;}
switch(market){case"JP":distValue="t"+distValue;break;case"UK":distValue="l"+distValue;break;default:break;}}
$("#newshole a[href ^= '/']").each(function(){var my=$(this);var url=my.attr("href");var distIndex=url.indexOf("dist=");if(distIndex>0){var endDist=url.indexOf("&",distIndex);var fullDist=endDist<0?url.substring(distIndex-1):url.substring(distIndex-1,endDist);if(distValue!=null&&distValue!=="")
my.attr("href",url.replace(fullDist,fullDist.substring(0,1)+"dist="+distValue));else
my.attr("href",(endDist<0||fullDist.substring(0,1)!=="?")?url.replace(fullDist,""):url.replace(fullDist+"&","?"));}
else if(distValue!=null&&distValue!==""){my.attr("href",url+(url.indexOf("?")>=0?"&dist=":"?dist=")+distValue);}});};$(function(){if(_currentEvent){_setupEvent(_currentEvent);_distifyLinks(_currentEvent.market,_currentEvent.state);}
else if(_queuedEvent){_setupEvent(_queuedEvent);}});return{setup:function(config){if(config){$.extend(_settings,config);if(config.currentEvent){_currentEvent=config.currentEvent;}
if(config.nextEvent){_queuedEvent=config.nextEvent;}}},testNext:function(){_getNextEvent();}};}());

$.extend(MarketWatch.Community.TopPickers,function(){$(function(){});var _isInitialized=false;var _topPickersPartialUrl="";var _initialize=function(topPickersPartialUrl){if(_isInitialized===false){_topPickersPartialUrl=topPickersPartialUrl;_registerTopPickersPeriodDropDown();_isInitialized=true;}}
var _registerTopPickersPeriodDropDown=function(){var container=$('#pickers #tab-tppage');container.find('.filter-container').hover(function(){container.find('.filter-container').addClass('show');},function(){container.find('.filter-container').removeClass('show');});container.find('.filter-values li').hover(function(){$(this).addClass('hover');},function(){$(this).removeClass('hover');});container.find('.filter li').click(function(e){e.preventDefault();});container.find('.filterOption').click(function(){_getTopPickersList($(this).attr('periodFilter'));});};var _getTopPickersList=function(periodValue){var pageParams={period:periodValue};_getPartialView(_topPickersPartialUrl,pageParams,$('#pickers #tab-tppage #toppickers-container'),_getTopPickersListCallBack);};var _getTopPickersListCallBack=function(contentPlaceholder,partialView){contentPlaceholder.fadeOut(200,function(){contentPlaceholder.html(partialView).fadeIn(200);_registerTopPickersPeriodDropDown();});};var _getPartialView=function(url,pageParams,contentPlaceholder,callback){$.get(url,pageParams,function(partialView){callback(contentPlaceholder,partialView);});};return{Initialize:_initialize}}());

$.extend(MarketWatch.Community.ActiveDiscussions,function(){$(function(){});var _isInitialized=false;var _activeDiscussionsPartialUrl="";var _initialize=function(activeDiscussionsPartialUrl){if(_isInitialized===false){_activeDiscussionsPartialUrl=activeDiscussionsPartialUrl+"/ActiveDicussionsPartial";;_registerActiveDiscussionsDropDown();_isInitialized=true;}}
var _registerActiveDiscussionsDropDown=function(){var container=$('#activediscussion-categories');container.find('li').click(function(){_getActiveDiscussionsList($(this).attr('category'));});};var _getActiveDiscussionsList=function(category){var pageParams={category:category};_getPartialView(_activeDiscussionsPartialUrl,pageParams,$('#active-disc-container'),_getActiveDiscussionsListCallBack);};var _getActiveDiscussionsListCallBack=function(contentPlaceholder,partialView){contentPlaceholder.fadeOut(200,function(){contentPlaceholder.html(partialView).fadeIn(200);});};var _getPartialView=function(url,pageParams,contentPlaceholder,callback){$.get(url,pageParams,function(partialView){callback(contentPlaceholder,partialView);});};return{Initialize:_initialize}}());

$.extend(MarketWatch.Community.PickerAccordian,function(){$(function(){});var _stockrow_show_speed='medium';var _stockrow_hide_speed='fast';var _initializePickerAccordian=function(container){var rows=$(container).find('.acc-data tr.acc-stock-row');if(rows&&rows.length>0){_initializeActiveRow($(rows[0]));rows.click(function(){_expandStockRow($(this));});rows.hover(function(){$(this).addClass('highlight-hover');},function(){$(this).removeClass('highlight-hover');});}};var _initializeActiveRow=function(headerRow){var tickerValue=headerRow.attr('ticker');var contentRow=headerRow.siblings('[ticker='+tickerValue+']');MarketWatch.Community.InstrumentPicker.InitializePickerControl(contentRow,true);};var _expandStockRow=function(headerRow){var tickerValue=headerRow.attr('ticker');var escapedTicker=tickerValue.replace('.','\\.');var contentRow=headerRow.siblings('[ticker='+escapedTicker+']');var nonSelectedHeaderRows=headerRow.siblings('.acc-stock-row[ticker!='+escapedTicker+']');var nonSelectedContentRows=headerRow.siblings('.acc-stock-meta[ticker!='+escapedTicker+']');var nonSelectedContentRowsContent=nonSelectedContentRows.find('.meta-cont');var chartContainer=contentRow.find('[id*=_graph_cont_]');headerRow.addClass('highlight');nonSelectedHeaderRows.removeClass('highlight');contentRow.addClass('highlight');nonSelectedContentRowsContent.stop().hide();headerRow.find('.ticker-link-off').hide();headerRow.find('.ticker-link-on').show();nonSelectedHeaderRows.find('.ticker-link-off').show();nonSelectedHeaderRows.find('.ticker-link-on').hide();contentRow.find('.meta-cont').slideDown(_stockrow_show_speed,function(){_displayAccordianRow($(this),nonSelectedContentRowsContent,chartContainer,tickerValue);});};var _displayAccordianRow=function(contentRow,nonSelectedContentRowsContent,chartContainer,tickerValue){contentRow.addClass('highlight');nonSelectedContentRowsContent.removeClass('highlight');MarketWatch.Community.InstrumentPicker.InitializePickerControl(contentRow);_showChart(chartContainer,tickerValue);};var _showChart=function(chartContainer,tickerValue){if(chartContainer.length==1){var chart=jQuery.data($('#'+chartContainer.attr('id')).get(0),'embeddedchart');if(chart){chart.ShowChart(tickerValue);}
delete chart;}};var _updateAccordianPerceptionPercentage=function(ticker,bullishPercent,bearishPercent,status){var tickerHeaderRows=$('div.pick-acc-cont .acc-data .acc-stock-row[ticker='+ticker.replace('.','\\.')+'], div.pick-acc-cont .acc-data .acc-stock-row[data-ticker='+ticker.replace('.','\\.')+']');var statusText="";var cssClass="";var percentValue=0;if(status=="Even"){statusText="(Even)";cssClass="even";percentValue=bullishPercent;}
else if(status=="Bearish"){statusText="(Bearish)";cssClass="bear";percentValue=bearishPercent;}
else{statusText="(Bullish)";cssClass="bull";percentValue=bullishPercent;}
if(tickerHeaderRows.length>0&&status!="NoVotes"){tickerHeaderRows.find('.perception-percent').removeClass('even');tickerHeaderRows.find('.perception-percent').removeClass('bull');tickerHeaderRows.find('.perception-percent').removeClass('bear');tickerHeaderRows.find('.perception-percent').addClass(cssClass);tickerHeaderRows.find('.percent-value').text(percentValue);tickerHeaderRows.find('.percent-desc').text(statusText);}}
return{Initialize:_initializePickerAccordian,UpdateAccordianPerceptionPercentage:_updateAccordianPerceptionPercentage}}());

$.extend(MarketWatch.Community.InstrumentPicker,function(){$(function(){});var _isInitialized=false;var _userLoggedInCommunity=false;var _makePredictionUrl="";var _getUserHistoryUrl="";var _initializePage=function(makePredictionUrl,getUserHistoryUrl,userLoggedInCommunity){if(_isInitialized===false){_makePredictionUrl=makePredictionUrl;_getUserHistoryUrl=getUserHistoryUrl;_userLoggedInCommunity=userLoggedInCommunity;_isInitialized=true;}};var _initializePickerControl=function(container,skipDataReload){if(_isInitialized===true){MarketWatch.Member.forceAssetsBinding(container);if(_userLoggedInCommunity===true){if(skipDataReload===true){_registerVotingButtonClickEvents($(container));}
else{_loadPickerControlsWithUserData($(container));}}}};var _loadPickerControlsWithUserData=function(container){var allPickerControlsWithinContainer=container.find('[class^=instrument-picker-cont-]');allPickerControlsWithinContainer.each(function(index){$this=$(this);_reloadControlWithUserPredictionsHistory($this);});};var _registerVotingButtonClickEvents=function(container){var timeFrame;var isUpVote;var ticker=container.attr('ticker');container.find('.arrow.up, .arrow.down').unbind('click');var allPickerControlsWithinContainer=_getPickerControlsFromContainer(container);allPickerControlsWithinContainer.each(function(index){var thisControl=$(this);thisControl.find('.arrow.up, .arrow.down').click(function(){var thisButton=$(this);timeFrame=thisButton.attr('timeframe')
if(thisButton.hasClass('down'))
isUpVote=false;else
isUpVote=true;_makePrediction(thisControl,ticker,isUpVote,timeFrame);});});};var _getPickerControlsFromContainer=function(container){var allPickerControlsWithinContainer;if(container.attr('class').indexOf('instrument-picker-cont-')>=0){allPickerControlsWithinContainer=container;}
else{allPickerControlsWithinContainer=container.find('[class^=instrument-picker-cont-]');}
return allPickerControlsWithinContainer;};var _makePrediction=function(container,ticker,isUpVote,timeFrame){_deactivate(container);var params={ticker:ticker,period:timeFrame,predictUp:isUpVote};$.post(_makePredictionUrl,params,function(partial){_reloadControlCallback(partial,container)});var s=s_gi('djglobal,djmarketwatch');s.prop45='ugc_compick';void(s.tl(true,'o','ugc_compick'));};var _reloadControlWithUserPredictionsHistory=function(container){_deactivate($this);container.find('.arrow.up, .arrow.down').unbind('click');var ticker=container.attr('ticker');var params={ticker:ticker};$.post(_getUserHistoryUrl,params,function(partial){_reloadControlCallback(partial,container)});};var _reloadControlCallback=function(partial,container){container.html($(partial).html());_activate(container);_registerVotingButtonClickEvents(container);};var _deactivate=function(target){target.removeClass('active');};var _activate=function(target){target.addClass('active');};return{InitializePage:_initializePage,InitializePickerControl:_initializePickerControl}}());

$.extend(MarketWatch.Community.Live,function(){$(document).ready(function(){});var _isInitialized=false;var _tabPartialAjaxUrl="";var _container=$('#tab-liveallpage');var _category='liveall';var _isRetrieving=false;var FADE_SPEED=1000;var RETRIEVE_NEW_ITEMS_INTEVAL='15s';var MAX_DOM_ITEMS=9;var _initialize=function(ajaxRoot,category){if(_isInitialized===false){_tabPartialAjaxUrl=ajaxRoot+"/CommunityLivePartial";_registerTabs();_isInitialized=true;}
_category=category;_show(_category);if(jQuery.timers){_container.everyTime(RETRIEVE_NEW_ITEMS_INTEVAL,'dbcomm_live',_getNewLiveEntries,0,true);};};var _getNewLiveEntries=function(){if(_isRetrieving)
return;if(_container.hasClass('selected')==false){_isRetrieving=false;return;}
var lastEntry=_container.find('div.live-row:first');if(lastEntry!=null){_isRetrieving=true;var lastEntryId=_container.find('div.live-row:first').attr('entryid');var params={entryIdBoundary:lastEntryId,tab:_category,newer:true};$.get(_tabPartialAjaxUrl,params,function(partial){_showNewItems(partial);});}
_isRetrieving=false;};var _showNewItems=function(newHtml){_container.find('div.live-row:first').before(newHtml);_container.find('div.live-row:hidden').fadeIn(FADE_SPEED);_container.find('div.live-row:gt('+MAX_DOM_ITEMS+')').remove();};var _show=function(tabType){if(_isInitialized===false)
return;_getLiveTab(tabType);};var _registerTabs=function(){$('#live div.tabs a.tab').click(function(e){e.preventDefault();_getLiveTab($(this).attr('tab'));});}
var _swapTabs=function(tabId,tabPageId){$('#live #'+tabId).addClass('selected').siblings().removeClass('selected');$('#live #'+tabPageId).addClass('selected').siblings().removeClass('selected');_container=$('#'+tabPageId);_category=$('#live #'+tabId).attr('tab');};var _showLoadingScreen=function(){$('#live #cmnty-dock .tabpane').hide();$('#live div.loading').show();};var _showContentScreen=function(){$('#live div.loading').hide();$('#live #cmnty-dock .tabpane').show();};var _getLiveTab=function(tabType){var tabId="tab-"+tabType;var tabPageId="tab-"+tabType+"page";var params={tab:tabType};var tabPage=$('#live #'+tabPageId);_swapTabs(tabId,tabPageId);_showLoadingScreen();_getPartialView(_tabPartialAjaxUrl,params,tabPage,_getDocTabCallback);};var _getDocTabCallback=function(contentPlaceholder,partialView){contentPlaceholder.html(partialView);MarketWatch.Member.forceAssetsBinding(contentPlaceholder);_showContentScreen();};var _getPartialView=function(url,pageParams,contentPlaceholder,callback){$.get(url,pageParams,function(partialView){callback(contentPlaceholder,partialView);});};return{Initialize:_initialize,Show:_show};}());

$.extend(MarketWatch.Community.FriendActivity,function(){$(document).ready(function(){});var _isInitialized=false;var _container=$('#friendactivity-container');var _isRetrieving=false;var FADE_SPEED=1000;var MAX_DOM_ITEMS=7;var _initialize=function(ajaxRoot){if(_isInitialized===false){_partialAjaxUrl=ajaxRoot+"/FriendActivityPartial";_isInitialized=true;}};var _getOlderFriendActivity=function(){if(_isRetrieving)
return;var lastEntry=_container.find('div.live-row:last');if(lastEntry!=null){_isRetrieving=true;var lastEntryId=_container.find('div.live-row:last').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:false};$.get(_partialAjaxUrl,params,function(partial){_showNewItems(partial);});}
_isRetrieving=false;};var _getNewerFriendActivity=function(){if(_isRetrieving)
return;var lastEntry=_container.find('div.live-row:first');if(lastEntry!=null){_isRetrieving=true;var lastEntryId=_container.find('div.live-row:first').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:true};$.get(_partialAjaxUrl,params,function(partial){_showNewItems(partial);});}
_isRetrieving=false;};var _showNewItems=function(newHtml){_container.find('div.live-row:first').before(newHtml);_container.find('div.live-row:hidden').fadeIn(FADE_SPEED);_container.find('div.live-row:gt('+MAX_DOM_ITEMS+')').remove();};return{Initialize:_initialize,GetOlderFriendActivity:_getOlderFriendActivity,GetNewerFriendActivity:_getNewerFriendActivity};}());

$.extend(MarketWatch.Community.MemberHeader,function(){$(document).ready(function(){});var _isInitialized=false;var _ajaxUrl="";var _initialize=function(ajaxRoot){if(_isInitialized===false){_ajaxUrl=ajaxRoot;_isInitialized=true;}};var bioHidden=true;var pointsHidden=true;var _expandBio=function(){var bioexpander=$("#bioexpander");var biocloser=$("#biocloser");if(bioHidden){var els=$('.biohidden');els.removeClass("biohidden");els.addClass("bioshown");bioexpander.removeClass("bioshown");bioexpander.addClass("biohidden");biocloser.addClass("bioshown");biocloser.removeClass("biohidden");bioHidden=false;}
else{var els=$('.bioshown');els.removeClass("bioshown");els.addClass("biohidden");bioexpander.removeClass("biohidden");bioexpander.addClass("bioshown");biocloser.addClass("biohidden");biocloser.removeClass("bioshown");bioHidden=true;}};var _expandPoints=function(){var pointsexpander=$("#pointsexpander").parent();if(pointsHidden){var els=$('.pointshidden');els.removeClass("pointshidden");els.addClass("pointsshown");pointsHidden=false;pointsexpander.toggleClass("pointstoggle");}
else{var els=$('.pointsshown');els.removeClass("pointsshown");els.addClass("pointshidden");pointsHidden=true;pointsexpander.toggleClass("pointstoggle");}};var _editProfile=function(name){$.get(_ajaxUrl+"Edit",{member:name},function(partial){$('#memberheader').replaceWith(partial);});};var _cancelProfile=function(name){$.get(_ajaxUrl+"CancelEdit",{member:name},function(partial){$('#memberheader').replaceWith(partial);});};var _saveProfile=function(name){var foo=$('#realname').val();$.post(_ajaxUrl+"Save",{member:name,experience:$('#experience-dl p').text(),style:$('#style-dl p').text(),timeHorizon:$('#timehorizon-dl p').text(),realName:$('#realname').val(),gender:$('#gender-dl p').text(),location:$('#location').val(),education:$('#education').val(),employment:$('#employment').val(),bio:$('#bio').val()},function(partial){$('#memberheader').replaceWith(partial);});};_imageElement=null;var _showAvatarDialog=function(name,el){_imageElement=$(el).parents(".avatar-large").children("a").children("img");var imageHtml=_imageElement.parent().html();$('<div class="change-avatar" id="changeAvatarDialog" ><h2>Change Photo</h2><div class="avatar-large" style="float:left; margin-right:10px"><a href="#" onclick="return false;">'+imageHtml+'</a></div> <div style="float:left"> <input id="updateAvatarFile" name="avatar" type="file"></input><br/><br/><a class="button-style2" href="#" onclick="MarketWatch.Community.MemberHeader.UpdateAvatar(\''+name+'\',$(this).parents(\'#changeAvatarDialog\'));">Submit</a><a class="button-style2" href="#" onclick="$(this).parents(\'#changeAvatarDialog\').dialog(\'destroy\');return false;">Cancel</a></div><div class="clear"></div></div>').dialog({width:330});return false;}
var _updateAvatar=function(name,dialogElement){$.ajaxFileUpload({url:_ajaxUrl+"UpdateAvatar",secureuri:false,fileElementId:"updateAvatarFile",dataType:'text/html',success:function(data,status){if(_imageElement!=null&&data!=null&&data.length>0){_imageElement.attr('src',data);}},error:function(data,status,e){}});dialogElement.dialog('destroy');dialogElement.empty().remove();return false;};var _blockUser=function(){return window.confirm("Are you sure you want to block this user? Clicking OK will prevent this user from contacting you in the MarketWatch Community. To allow contact from this user again, click the 'un-block' button on the user's profile.")};var _unblockUser=function(){return window.confirm("Are you sure you want to un-block this user? Clicking OK will allow you to receive messages, friend requests and group requests from this user.")};return{ExpandBio:_expandBio,ExpandPoints:_expandPoints,EditProfile:_editProfile,Initialize:_initialize,CancelProfile:_cancelProfile,SaveProfile:_saveProfile,UpdateAvatar:_updateAvatar,ShowAvatarDialog:_showAvatarDialog,BlockUser:_blockUser,UnblockUser:_unblockUser};}());

$.extend(MarketWatch.Community.OlderNewer,function(){$(document).ready(function(){});var _olderNewerInstances=[];var _initialize=function(partialAjaxUrl,containerDiv,replace){if(_olderNewerInstances[containerDiv]==null){_olderNewerInstances[containerDiv]={container:$("#"+containerDiv),partialAjaxUrl:partialAjaxUrl,isRetrieving:false,FADE_SPEED:1000,MAX_DOM_ITEMS:7,replace:replace};}};var _getOlder=function(containerDiv){var instance=_olderNewerInstances[containerDiv];if(instance==null)
return;if(instance.isRetrieving)
return;var lastEntry=instance.container.find('div.live-row:last');if(lastEntry!=null){instance.isRetrieving=true;var lastEntryId=instance.container.find('div.live-row:last').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:false};$.get(instance.partialAjaxUrl,params,function(partial){_showNewItems(partial,instance);});}
instance.isRetrieving=false;};var _getNewer=function(containerDiv){var instance=_olderNewerInstances[containerDiv];if(instance==null)
return;if(instance.isRetrieving)
return;var lastEntry=instance.container.find('div.live-row:first');if(lastEntry!=null){instance.isRetrieving=true;var lastEntryId=instance.container.find('div.live-row:first').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:true};$.get(instance.partialAjaxUrl,params,function(partial){_showNewItems(partial,instance);});}
instance.isRetrieving=false;};var _showNewItems=function(newHtml,instance){if(instance.replace){instance.container.html(newHtml);}
else{instance.container.find('div.live-row:first').before(newHtml);instance.container.find('div.live-row:hidden').fadeIn(instance.FADE_SPEED);instance.container.find('div.live-row:gt('+instance.MAX_DOM_ITEMS+')').remove();}};return{Initialize:_initialize,GetOlder:_getOlder,GetNewer:_getNewer};}());

$.extend(MarketWatch.Community.BestOf,function(){var _initializeSection=function(elt,partialUrls){$(".tabs .tab",elt).click(function(){var tabId=$(this).attr("id");if($("#"+tabId+"-page:parent",elt).length!=0){$(".tabpane > div",elt).removeClass("selected");$("#"+tabId+"-page",elt).addClass("selected");}
else{$(".tabpane > div",elt).removeClass("selected");$("#"+tabId+"-page",elt).addClass("selected");$.ajax({type:"GET",url:partialUrls[tabId],success:function(html){$("#"+tabId+"-page",elt).html(html)}});}});};var _initializeTab=function(elt,partialUrl){var ajaxElt=$("#results",elt);var droplist=$(".droplist",elt);$("li",droplist).click(function(){$.ajax({type:"GET",url:partialUrl,data:"timeframe="+$(this).attr("id"),success:function(html){_dropListCallBack(html,ajaxElt)}});});};var _dropListCallBack=function(html,ajaxElt){ajaxElt.customFadeTo(200,0,function(){ajaxElt.html(html).customFadeTo(200,1);});};return{InitializeSection:_initializeSection,InitializeTab:_initializeTab}}());

$.extend(MarketWatch.Community,function(){$(function(){MarketWatch.UI.bindDropLists('div');});var _peopleSearch=function(inputElt,buttonElt,searchUrl){var _inputElt=$(inputElt);var _buttonElt=$(buttonElt);var _searchUrl=searchUrl;_inputElt.focus(function(){if(this.className.indexOf("unused")>=0){this.value="";$(this).removeClass("unused");}});_inputElt.blur(function(){if(this.value==""){$(this).addClass("unused");this.value="Enter a name or keywords";}});_inputElt.keydown(function(event){if(event.keyCode==$.ui.keyCode.ENTER){_buttonClick(this);}});var _buttonClick=function(){if(_inputElt.hasClass("unused")){window.alert("Enter a name or keyword to search");}
else{window.location=_searchUrl+"?query="+_inputElt.val();}};_buttonElt.click(_buttonClick);};var _gruopSearch=function(inputElt,buttonElt,searchUrl){var _inputElt=$(inputElt);var _buttonElt=$(buttonElt);var _searchUrl=searchUrl;_inputElt.focus(function(){if(this.className.indexOf("unused")>=0){this.value="";$(this).removeClass("unused");}});_inputElt.blur(function(){if(this.value==""){$(this).addClass("unused");this.value="Search groups";}});_inputElt.keydown(function(event){if(event.keyCode==$.ui.keyCode.ENTER){_buttonClick(this);}});var _buttonClick=function(){if(_inputElt.hasClass("unused")){window.alert("Enter a keyword to search");}
else{window.location=_searchUrl+"?searchinput="+_inputElt.val()+"#finder";}};_buttonElt.click(_buttonClick);};return{PeopleSearch:_peopleSearch,GroupSearch:_gruopSearch}}());

$.extend(MarketWatch.BlueKai,function(){var _data;var _getTrackingData=function(){if(s){return{serverDomain:s.server,primaryProduct:s.channel,pageName:s.pageName,section:s.prop2,articleType:s.prop3,subSection:s.prop26,contentType:s.prop19,encryptedUUID:s.prop25,contentChannel:s.prop1,isSub:s.prop27,edition:s.prop24,referrer:document.referrer!=""?document.referrer.split("/")[2]:""};}
return{serverDomain:"",primaryProduct:"",pageName:"",section:"",articleType:"",subSection:"",contentType:"",encryptedUUID:"",contentChannel:"",isSub:"",edition:"",referrer:document.referrer!=""?document.referrer.split("/")[2]:""};};var _getAdData=function(){var ads=ScrillaZilla.Escort.getAllClients();if(ads.length>0){var data={};var slashSplit;var zone="";var hitBrokers=false;var sections={count:0,items:[]};var zones={count:0,items:[]};var sizes={count:0,items:[]};for(var i=0;i<ads.length;i++){if(sizes.count>=10){break;}
if(!ads[i].Data.autoLoad){continue;}
slashSplit=[];zone="";var slashSplit=ads[i].Data.src.split("/");if(slashSplit.length>=4&&!sections.items[slashSplit[4]]){sections.items[slashSplit[4]]=true;data["adSection"+(++sections.count)]=slashSplit[4];hitBrokers=(slashSplit[4].indexOf("brokerbuttons")>=0);}
if(slashSplit.length>=5){zone=slashSplit[5].substring(0,slashSplit[5].indexOf(";"));if(!zones.items[zone]){zones.items[zone]=true;data["adZone"+(++zones.count)]=zone;}}
var creative=ads[i].Element.children("iframe, object, a, img");if(creative.length>0){if(creative.is("a")){creative=creative.children("img");}
if(!hitBrokers||!sizes.items[creative.width()+"x"+creative.height()]){sizes.items[creative.width()+"x"+creative.height()]=true;data["adSize"+(++sizes.count)]=creative.width()+"x"+creative.height();}}}
return data;}
return{};};var _getData=function(){if(!_data){_data=$.extend(_getTrackingData(),_getAdData());}
return _data;};$(function(){if(typeof(blueKai)!="undefined"){setTimeout(function(){blueKai.blueKai.bk_track(true,_getData());},500);}});return{getData:function(){_getData();}};}());

(function($){$.fn.tipTip=function(options){var defaults={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){}};var opts=$.extend(defaults,options);if($("#tiptip_holder").length<=0){var tiptip_holder=$('<div id="tiptip_holder" style="max-width:'+opts.maxWidth+';"></div>');var tiptip_content=$('<div id="tiptip_content"></div>');var tiptip_arrow=$('<div id="tiptip_arrow"></div>');$("body").append(tiptip_holder.html(tiptip_content).prepend(tiptip_arrow.html('<div id="tiptip_arrow_inner"></div>')));}else{var tiptip_holder=$("#tiptip_holder");var tiptip_content=$("#tiptip_content");var tiptip_arrow=$("#tiptip_arrow");}
return this.each(function(){var org_elem=$(this);if(opts.content){var org_title=opts.content;}else{var org_title=org_elem.attr(opts.attribute);}
if(org_title!==""){if(!opts.content){org_elem.removeAttr(opts.attribute);}
var timeout=false;if(opts.activation=="hover"){org_elem.hover(function(){active_tiptip();},function(){if(!opts.keepAlive){deactive_tiptip();}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip();});}}else if(opts.activation=="focus"){org_elem.focus(function(){active_tiptip();}).blur(function(){deactive_tiptip();});}else if(opts.activation=="click"){org_elem.click(function(){active_tiptip();return false;}).hover(function(){},function(){if(!opts.keepAlive){deactive_tiptip();}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip();});}}
function active_tiptip(){opts.enter.call(this);tiptip_content.html(org_title);tiptip_holder.hide().removeAttr("class").css("margin","0");tiptip_arrow.removeAttr("style");var top=parseInt(org_elem.offset().top),left=parseInt(org_elem.offset().left),org_width=parseInt(org_elem.outerWidth()),org_height=parseInt(org_elem.outerHeight()),tip_w=tiptip_holder.outerWidth(),tip_h=tiptip_holder.outerHeight(),w_compare=Math.round((org_width-tip_w)/2),h_compare=Math.round((org_height-tip_h)/2),marg_left=Math.round(left+w_compare),marg_top=Math.round(top+org_height+opts.edgeOffset),t_class="",arrow_top="",arrow_left=Math.round(tip_w-12)/2;if(opts.defaultPosition=="bottom"){t_class="_bottom";}else if(opts.defaultPosition=="top"){t_class="_top";}else if(opts.defaultPosition=="left"){t_class="_left";}else if(opts.defaultPosition=="right"){t_class="_right";}
var right_compare=(w_compare+left)<parseInt($(window).scrollLeft());var left_compare=(tip_w+left)>parseInt($(window).width());if((right_compare&&w_compare<0)||(t_class=="_right"&&!left_compare)||(t_class=="_left"&&left<(tip_w+opts.edgeOffset+5))){t_class="_right";arrow_top=Math.round(tip_h-13)/2;arrow_left=-12;marg_left=Math.round(left+org_width+opts.edgeOffset);marg_top=Math.round(top+h_compare);}else if((left_compare&&w_compare<0)||(t_class=="_left"&&!right_compare)){t_class="_left";arrow_top=Math.round(tip_h-13)/2;arrow_left=Math.round(tip_w);marg_left=Math.round(left-(tip_w+opts.edgeOffset+5));marg_top=Math.round(top+h_compare);}
var top_compare=(top+org_height+opts.edgeOffset+tip_h+8)>parseInt($(window).height()+$(window).scrollTop());var bottom_compare=((top+org_height)-(opts.edgeOffset+tip_h+8))<0;if(top_compare||(t_class=="_bottom"&&top_compare)||(t_class=="_top"&&!bottom_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_top";}else{t_class=t_class+"_top";}
arrow_top=tip_h;marg_top=Math.round(top-(tip_h+5+opts.edgeOffset));}else if(bottom_compare|(t_class=="_top"&&bottom_compare)||(t_class=="_bottom"&&!top_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_bottom";}else{t_class=t_class+"_bottom";}
arrow_top=-12;marg_top=Math.round(top+org_height+opts.edgeOffset);}
if(t_class=="_right_top"||t_class=="_left_top"){marg_top=marg_top+5;}else if(t_class=="_right_bottom"||t_class=="_left_bottom"){marg_top=marg_top-5;}
if(t_class=="_left_top"||t_class=="_left_bottom"){marg_left=marg_left+5;}
tiptip_arrow.css({"margin-left":arrow_left+"px","margin-top":arrow_top+"px"});tiptip_holder.css({"margin-left":marg_left+"px","margin-top":marg_top+"px"}).attr("class","tip"+t_class);if(timeout){clearTimeout(timeout);}
timeout=setTimeout(function(){tiptip_holder.stop(true,true).fadeIn(opts.fadeIn);},opts.delay);}
function deactive_tiptip(){opts.exit.call(this);if(timeout){clearTimeout(timeout);}
tiptip_holder.fadeOut(opts.fadeOut);}}});};})(jQuery);$(".sstooltip").tipTip();

var BlueGrass=(function(){var Connection=function(runtime,endpoint,callback){var _runtime=runtime;var _endpoint=endpoint;var _callbacks=[];var _subscribeOptions;_callbacks.push(callback);var _channels=new Object();var _impl=null;var _reconnectTimer=null;var thunk=this;var _callback=function(connection,type){$.each(_callbacks,function(){try{this(connection,type);}
catch(err){if(typeof(console)!="undefined"&&console.warn)
console.warn("Error in connection callback: "+err.message);}});};var _channelTrigger=function(message,channel){if(message.h.a=="unsubscribe"){if(_channels[channel.getChannelName()]!=null)
delete _channels[channel.getChannelName()];}
_impl.send(message);};var _systemCallback=function(message){if(message.h.a==="process"&&message.b){if(message.b.reconnect&&_reconnectTimer==null){_impl.setPickupInterval(5000);_reconnectTimer=setTimeout(function(){_reconnect();},2000);}
else if(message.b.pickupInterval&&_impl!=null){_impl.setPickupInterval(message.b.pickupInterval);}
else if(message.b.channelState){_setChannelState(message.b.channelState);}}
else if(message.h.a==="inform"){if(message.h.t==="/system/channelinfo"){_setChannelInfo(message.b);}}};var _reconnect=function(){var channels=[];$.each(_channels,function(){this.clearTimers();channels.push({c:this.getChannelName(),b:this.getCallbacks(),n:this.getLastMessageNumber()});});_channels=new Object();var type="reconnect";if(!_impl||!_impl.isOpen()){type="connect";}
var callback=function(){_callback(thunk,type);$.each(channels,function(){if(_subscribeOptions){_subscribeOptions.sequence=null;_subscribeOptions.number=this.n;}
var channel=thunk.subscribe(this.c,this.b[0],_subscribeOptions);if(this.b.length>1){for(var i=1;i<this.b.length;i++){channel.addCallback(this.b[i]);}}});};_implInitialize(callback);_reconnectTimer=null;};var _setChannelInfo=function(channelInfo){if(channelInfo&&channelInfo.channelName){$.each(_channels,function(){if(this.getChannelName()==channelInfo.channelName){if(channelInfo.deliveryType){this.setDeliveryType(channelInfo.deliveryType);}}});}};var _setChannelState=function(channelState){var channel=_channels[channelState.channelName];if(channel!=null){if(!channelState.enabled){channel.resetState();}}};var _implInitialize=function(callback){_implTerminate();var connectCallback=function(){_callback(thunk,"connect");}
if(callback)
connectCallback=callback;_impl=new ConnectionImpl(connectCallback,function(message){_systemCallback(message);});_impl.initialize(_endpoint,function(impl,messages){_implCallback(impl,messages);});};var _implTerminate=function(){if(_impl!=null){_impl.terminate();_impl=null;}};var _implCallback=function(impl,messages){if(impl!=_impl){impl.terminate();return;}
if(!messages){return;}
for(var i=0;i<messages.length;i++){var channel=_channels[messages[i].h.t];if(channel)
channel.deliver(messages[i]);}};this.subscribe=function(channelName,callback,options){_subscribeOptions=options;var channel;if(_channels[channelName]==null||typeof(_channels[channelName])==='undefined'){channel=new Channel(channelName,callback,options,_channelTrigger);_channels[channelName]=channel;}
else{channel=_channels[channelName];channel.addCallback(callback);}
return channel;};this.getChannel=function(channelName){return _channels[channelName];};this.close=function(){_callbacks=[];_channels=new Object();_implTerminate();};this.reconnect=function(){if(_reconnectTimer==null){_reconnectTimer=setTimeout(function(){_reconnect();},100);}};this.isOpen=function(){if(_impl!=null){return _impl.isOpen();}
else{return false;}}
this.isDisabled=function(){if(_impl!=null){return _impl.isDisabled();}
else{return false;}};this.addCallback=function(callback){_callbacks.push(callback);};this.setTransmitHook=function(hook){_impl.setTransmitHook(hook);};this.setReceiveHook=function(hook){_impl.setReceiveHook(hook);};this.scrambleClientId=function(){_impl.scrambleClientId();};this.getChannelCount=function(){var size=0;for(var key in _channels){if(_channels.hasOwnProperty(key))size++;}
return size;};this.lowLevelSend=function(message){if(_impl!=null){_impl.send(message);}};_implInitialize();};var ConnectionImpl=(function(){return function(connectCallback,systemCallback){var _callback,_endpoint;var _clientInfo,_protocolInfo;var _transmitHookCallback,_receiveHookCallback;var _outgoing=[];var _connectFailCount=0;var _failCount=0;var _inProgress=0;var _timer,_connectTimer;var _isOpen=false,_isDisabled=false;var _sendTimer=null;var _connectCallback=connectCallback;var _systemCallback=systemCallback;var thunk=this;var _pumpMessages=function(){if(!_isOpen)return;_sendTimer=null;var shouldSend=false;if(_inProgress<1){shouldSend=true;}
else if(_inProgress<2&&_outgoing.length>0){shouldSend=true;}
if(shouldSend){var immediate=_outgoing.length>0;var payload={c:JSON.stringify(_clientInfo),m:JSON.stringify(_outgoing.splice(0,100))};if(typeof(_protocolInfo.pickupInterval)==='number'&&_protocolInfo.pickupInterval>0&&_failCount==0&&!immediate){_timer=setTimeout(function(){_messageRequest(payload);},_protocolInfo.pickupInterval);}
else if(_failCount>0){_timer=setTimeout(function(){_messageRequest(payload);},1000*Math.min(900,Math.pow(2,_failCount)));}
else{clearTimeout(_timer);_messageRequest(payload);if(_outgoing.length>0){_sendTimer=setTimeout(_pumpMessages,100);}}}};var _connectFail=function(xhr,status,error,message){_connectFailCount++;_connectTimer=setTimeout(function(){_connectRequest();},1000*Math.min(900,Math.pow(2,_connectFailCount)));};var _connectResponse=function(request,response){_clientInfo=response.clientInfo;_protocolInfo=response.protocolInfo;_inProgress=0;if(response.status.disabled){_isOpen=false;_isDisabled=true;}
else{_isOpen=true;_pumpMessages();if($.isFunction(_connectCallback)){_connectCallback();};}};var _serializeData=function(a){var s=[],add=function(key,value){value=$.isFunction(value)?value():value;s[s.length]=key+"="+value;};$.each(a,function(key,value){add(key,value);});return s.join("&").replace(/%20/g,"+");};var _connectRequest=function(request){var url=_endpoint.to;if(_endpoint.via)
url=_endpoint.via+"?to="+url;if(!request)
request={};$.ajax({type:"GET",url:url,headers:{"X-BGD":_serializeData(request)},dataType:_endpoint.jsonp?"jsonp":"json",cache:false,global:"false",success:function(data){_connectResponse(request,data);},error:function(xhr,status,error){_connectFail(xhr,status,error,this);}});};var _messageRequest=function(request){var url=_protocolInfo.pickupUrl;if(_endpoint.altPickupUrl){url=_endpoint.altPickupUrl;}
if(_endpoint.via){url=_endpoint.via+"?to="+url;}
_inProgress++;if(_transmitHookCallback!=null){$.each(eval(request.m),function(){_transmitHookCallback(this,_clientInfo);});}
$.ajax({type:"GET",url:url,headers:{"X-BGD":_serializeData(request)},dataType:_endpoint.jsonp?"jsonp":"json",global:"false",cache:false,success:function(data){_messageResponse(data);},error:function(xhr,status,error){_messageFail(xhr,status,error,this);}});};var _messageResponse=function(response){_inProgress--;_failCount=0;if(response!=null&&response.length>0){if(_receiveHookCallback!=null){$.each(response,function(){_receiveHookCallback(this);});}
$.each(response,function(){if(this.h&&this.h.t&&this.h.t.indexOf("\/system\/")===0)
_systemCallback(this);});}
_callback(thunk,response);_pumpMessages();};var _messageFail=function(xhr,status,error,message){_inProgress--;_failCount++;var originalMessage=unescape(message.data);var messageData=JSON.parse(originalMessage);if(messageData&&messageData.m&&messageData.m.length>0){for(var i=0;i<messageData.m.length;i++){_outgoing.push(messageData.m[i]);}}
_pumpMessages();};this.initialize=function(endpoint,callback){_endpoint=endpoint;_callback=callback;_connectRequest();};this.terminate=function(){_isOpen=false;if(_timer)
clearInterval(_timer);if(_connectTimer)
clearInterval(_connectTimer);};this.setPickupInterval=function(interval){_protocolInfo.pickupInterval=interval;};this.scrambleClientId=function(){_clientInfo.c="Boom!";};this.setTransmitHook=function(hook){_transmitHookCallback=hook;};this.setReceiveHook=function(hook){_receiveHookCallback=hook;};this.send=function(messages){if(!_isOpen)return;_outgoing.splice(_outgoing.length,0,messages);if(_sendTimer==null){_sendTimer=setTimeout(_pumpMessages,100);}};this.isOpen=function(){return _isOpen;}
this.isDisabled=function(){return _isDisabled;}}})();var Channel=function(channelName,callback,options,trigger){var _channelName=channelName;var _callbacks=[];var _currentSequence="";var _firstMessageNumber="0";var _trigger=trigger;_callbacks.push(callback);var _callback=function(message){for(var i=0;i<_callbacks.length;i++){try{_callbacks[i](message);}
catch(err){if(typeof(console)!="undefined"&&console.warn)
console.warn("Error delivering message on \""+_channelName+"\": "+err.message);}}};var _deliveryType="";if(options&&options.sequence)
_currentSequence=options.sequence;if(options&&options.number)
_firstMessageNumber=options.number;var _lastMessageNumber=_firstMessageNumber;var _ackTimer=null;var _acksSent=0;var _bypassQueue=[];var _bypassTimer=null;var _securityToken=null;if(options&&options.securityToken)
_securityToken=options.securityToken;if($.isFunction(_trigger)){var message={h:{t:_channelName,a:"subscribe"},b:{sequence:_currentSequence,number:_firstMessageNumber}};if(_securityToken){message.securityToken=_securityToken;}
_trigger(message,this);}
var thunk=this;var _scanBypassQueue=function(){if(_bypassQueue&&_bypassQueue.length>0){_bypassQueue.sort(function(a,b){return a.h.n-b.h.n;});var index=0;for(var i=0;i<_bypassQueue.length;i++){if(_bypassQueue[i].h.n==_lastMessageNumber+1){_callback(_bypassQueue[i]);_lastMessageNumber=_bypassQueue[i].h.n;index=i+1;}
else{break;}}
if(_bypassQueue.length>index)
_bypassQueue=_bypassQueue.slice(index);else{_bypassQueue=[];}
if(_bypassQueue.length>0){_bypassTimer=setTimeout(function(){_scanBypassQueue();},1000);}
else{clearTimeout(_ackTimer);_bypassTimer=null;_acksSent=0;_bypassQueue=[];}}};var _sendAck=function(){if(_acksSent>=10){_ackTimer=setTimeout(function(){thunk.unsubscribe();},1000);return;}
var numbers=1+"-"+_lastMessageNumber;var numbersInQueue="";var last=0;var next="";_bypassQueue.sort(function(a,b){return a.h.n-b.h.n;});if(typeof(_bypassQueue!='undefined')){for(var i=0;i<_bypassQueue.length;i++){var m=_bypassQueue[i];if(last==0){numbersInQueue=m.h.n;}
else if(m.h.n==last+1){var next="-"+m.h.n;}
else{if(next.length>0){numbersInQueue+=next+","+m.h.n;next="";}
else{numbersInQueue+=","+m.h.n;}}
last=m.h.n;}
numbersInQueue+=next;}
if(numbersInQueue.length>0||numbersInQueue>0)
numbers+=","+numbersInQueue;if($.isFunction(_trigger)){var message={h:{t:_channelName,a:"acknowledge"},b:{sequence:_currentSequence,numbers:numbers}};_trigger(message,thunk);}
_acksSent++;_ackTimer=setTimeout(function(){_sendAck();},1000*Math.min(32,Math.pow(2,_acksSent)));};this.getChannelName=function(){return _channelName;};this.getDeliveryType=function(){return _deliveryType;};this.setDeliveryType=function(deliveryType){_deliveryType=deliveryType;};this.getCallbacks=function(){return _callbacks;};this.clearTimers=function(){if(_ackTimer)
clearTimeout(_ackTimer);if(_bypassTimer)
clearTimeout(_bypassTimer);};this.unsubscribe=function(){if($.isFunction(_trigger)){var message={h:{t:_channelName,a:"unsubscribe"}};_trigger(message,this);}};this.deliver=function(message){if(_callback&&message&&message.h&&(message.h.t==_channelName)){if(message.h.a=="retransmit"){var inQueue=false;for(var i=0;i<_bypassQueue.length;i++){if(_bypassQueue[i].h.n==message.h.n){inQueue=true;break;}}
if(!inQueue){_bypassQueue.push(message);}
if(_bypassTimer==null){_bypassTimer=setTimeout(function(){_scanBypassQueue();},1000);}}
else if(message.h.a=="broadcast"){if(message.h.s!=_currentSequence){_currentSequence=message.h.s;_firstMessageNumber=message.h.n;_lastMessageNumber=message.h.n;_bypassQueue=[];clearTimeout(_ackTimer);_acksSent=0;}
var messageOk=false;if((_deliveryType=="Lossy"&&message.h.n>_lastMessageNumber)||_deliveryType=="BestEffort"){messageOk=true;}
else if(_deliveryType=="Guaranteed"){if(message.h.n<=_lastMessageNumber&&message.h.n!=_firstMessageNumber){return;}
if(_lastMessageNumber+1==message.h.n||message.h.n==_firstMessageNumber){messageOk=true;}
else{var count=_bypassQueue.push(message);if(count==1){_ackTimer=setTimeout(function(){_sendAck();},1000);}
else if(count>=50){this.resetState();this.deliver(message);}}}
if(messageOk){_lastMessageNumber=message.h.n;_callback(message,_channelName);}}}};this.resetState=function(){_currentSequence="";_bypassQueue=[];clearTimeout(_ackTimer);_acksSent=0;};this.addCallback=function(callback){if($.inArray(callback,_callbacks)==-1)
_callbacks.push(callback);};this.removeCallback=function(callback){var index=-1;if(_callbacks.length==1&&_callbacks[0]==callback){this.unsubscribe();return;}
for(var i=0;i<_callbacks.length;i++){if(_callbacks[i]==callback)
index=i;}
if(index>=0)
_callbacks=BlueGrass.Utility.arrayRemove(_callbacks,index);};this.getLastMessageNumber=function(){return _lastMessageNumber;};};var _connection=null;var _userOffset=new Date().getTimezoneOffset()/60;var _reconTimer=null;var _isConnecting=false;return{Runtime:{openConnection:function(endpoint,callback){if(!endpoint)
endpoint={to:"/bg/api/Connect.ashx"};else if(!endpoint.to)
endpoint.to="/bg/api/Connect.ashx";if((document.domain=="localhost"||document.domain=="localhost.marketwatch.com")&&typeof(_bgProxyUrl)!="undefined"){endpoint.via=_bgProxyUrl;if(endpoint.to.substr(0,5)!="http:")
endpoint.to="http://mw5qa.marketwatch.com"+endpoint.to;}
if(_connection==null){if(_isConnecting){setTimeout(function(){BlueGrass.Runtime.openConnection(endpoint,callback);},100);}
else{_isConnecting=true;_connection=new Connection(this,endpoint,callback);var checkConn=function(){if(_connection.isOpen())
_isConnecting=false;else
setTimeout(checkConn,1000);};checkConn();}}
else{_connection.addCallback(callback);if(_connection.isOpen()){callback(_connection,"connect");}
else if(!_isConnecting){if(_reconTimer==null){_reconTimer=setTimeout(function(){if(!_connection.isOpen()&&!_connection.isDisabled())
_connection.reconnect();_reconTimer=null;},1000);}}}},getConnection:function(){return _connection;}},Utility:{arrayRemove:function(array,from,to){var rest=array.slice((to||from)+1||array.length);array.length=from<0?array.length+from:from;return array.push.apply(array,rest);},convertToExchangeTime:function(utcDateString,offset){if(typeof(offset)!='undefined')
offset=offset+_userOffset;else
offset=0;var converted=parseInt(utcDateString);if(isNaN(converted)){if(utcDateString.indexOf("-")>=0||utcDateString.indexOf("+")>=0)
utcDateString=utcDateString.substring(6,utcDateString.length-7);else
utcDateString=utcDateString.substring(6,utcDateString.length-2);converted=parseInt(utcDateString);}
converted+=3600000*offset;var dateTime=new Date(converted);return dateTime;},prettyDate:function(date,offset){if(typeof(date)!="object")
date=this.convertToExchangeTime(date,offset);var time_formats=[[60,'Just Now'],[90,'1 Minute'],[3600,'Minutes',60],[5400,'1 Hour'],[86400,'Hours',3600],[129600,'1 Day'],[604800,'Days',86400],[907200,'1 Week'],[2628000,'Weeks',604800],[3942000,'1 Month'],[31536000,'Months',2628000],[47304000,'1 Year'],[3153600000,'Years',31536000],[4730400000,'1 Century'],];var dt=new Date,seconds=(dt-date)/1000,token=' Ago',i=0,format;if(seconds<0){seconds=Math.abs(seconds);token='';}
while(format=time_formats[i++]){if(seconds<format[0]){if(format.length==2){return format[1]+(i>1?token:'');}else{return Math.round(seconds/format[2])+' '+format[1]+(i>1?token:'');}}}
if(seconds>4730400000)
return Math.round(seconds/4730400000)+' Centuries'+token;return date_str;}}};})();

$.extend(BlueGrass,{Quote:function(){var _elementMap=new Object();var _format={last:"#,###.00",largeLast:"###,###",largeLastMinimum:100000,volume:"#,###",largeVolumeText:true,largeVolumeMinimum:1000000,change:"#,###.00",percentChange:"#,###.00%",date:"m/d/y g:i:s a",dots:false};var _volumeFormat=function(number,format){number=parseInt(number);if(format.largeVolumeText&&number>=format.largeVolumeMinimum){var smallified=number/format.largeVolumeMinimum;var indicator="";if(number>=1000000000)indicator="b"
else if(number>=1000000)indicator="m"
else if(number>=1000)indicator="k"
return smallified.numberFormat(format.volume+".00"+indicator);}
return number.numberFormat(format.volume);}
var _quoteCallback=function(message){var elements=_elementMap[message.h.t].elements;if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){var filter=this.data("bgfilter");if(filter&&typeof(filter)=="function"){try{if(filter(message))
return;}catch(err){}}
this.trigger("bgTick",message);});}};var _tickHandler=function(e,message){var element=$(this);var elementData=element.data("bgquote");if(elementData.needToBind){elementData.needToBind=false;elementData.lastElement=element.find(".bgLast");elementData.changeElement=element.find(".bgChange");elementData.percentChangeElement=element.find(".bgPercentChange");elementData.timeElement=element.find(".bgTimestamp");elementData.volumeElement=element.find(".bgVolume");elementData.bidElement=element.find(".bgBid");elementData.askElement=element.find(".bgAsk");}
var onlyUpdateVolume=false;if(elementData&&elementData.volumeChannel&&elementData.volumeChannel==message.h.t)
onlyUpdateVolume=true;if(message&&message.b){if(elementData.filterMoment>0&&elementData.filterType.length>0){if(new Date().getTime()>elementData.filterMoment){elementData.filterMoment=0;elementData.filterType="";}
else{if(message.b.y==elementData.filterType)
return;}}
var format=$.extend({},_format);var custom=element.data("bgFormat");if(custom)
$.extend(format,custom);if(!onlyUpdateVolume&&elementData.lastElement.length>0&&message.b.l){var lastFormat=message.b.l>=format.largeLastMinimum?format.largeLast:format.last;elementData.lastElement.text(message.b.l.numberFormat(lastFormat));}
if(!onlyUpdateVolume&&elementData.bidElement.length>0&&message.b.b){var lastFormat=message.b.b>=format.largeLastMinimum?format.largeLast:format.last;elementData.bidElement.text(message.b.b.numberFormat(lastFormat));}
if(!onlyUpdateVolume&&elementData.askElement.length>0&&message.b.a){var lastFormat=message.b.b>=format.largeLastMinimum?format.largeLast:format.last;elementData.askElement.text(message.b.a.numberFormat(lastFormat));}
var changePrefix=message.b.c>0?"+":"";if(!onlyUpdateVolume&&elementData.changeElement.length>0&&message.b.c){elementData.changeElement.text(changePrefix+message.b.c.numberFormat(format.change));}
if(!onlyUpdateVolume&&elementData.percentChangeElement.length>0&&message.b.c&&message.b.l){var percentChange=(message.b.l-(message.b.l-message.b.c))/(message.b.l-message.b.c);elementData.percentChangeElement.text(changePrefix+percentChange.numberFormat(format.percentChange));}
if(!onlyUpdateVolume&&elementData.timeElement.length>0&&message.b.z){var date=BlueGrass.Utility.convertToExchangeTime(message.b.z,message.b.e)
var formattedDate=date.dateFormat(format.date,false);elementData.timeElement.text(format.dots?formattedDate.replace(/(a|A|p|P)(M|m)/,"$1.$2."):formattedDate);}
if((onlyUpdateVolume||!elementData.volumeChannel)&&elementData.volumeElement.length>0&&message.b.v)
elementData.volumeElement.text(_volumeFormat(message.b.v,format));if(!onlyUpdateVolume&&message.b.l){var theClass="";if(elementData.lastPrice>message.b.l)
theClass="tickDown";else if(elementData.lastPrice<message.b.l)
theClass="tickUp";elementData.lastPrice=message.b.l;if(theClass.length>0){element.addClass(theClass);setTimeout(function(){element.removeClass(theClass);},500);}}
if(!onlyUpdateVolume&&message.b.c){var direction="neutral";if(message.b.c<0)
direction="down";else if(message.b.c>0)
direction="up";if(direction!=elementData.lastDirection){element.removeClass("up").removeClass("down").removeClass("neutral");element.addClass(direction);elementData.lastDirection=direction;}}
if(message.b.y=="aftermarket"&&elementData.filterType==""&&elementData.filterMoment==0&&elementData.lastType=="normal"){elementData.filterMoment=new Date().getTime()+1800000;elementData.filterType="normal";}
else if(message.b.y=="normal"&&elementData.filterType==""&&elementData.filterMoment==0&&elementData.lastType=="premarket"){elementData.filterMoment=new Date().getTime()+1800000;elementData.filterType="premarket";}
if(message.b.y){elementData.lastType=message.b.y;}}};return{setup:function(){$("div.bgQuote, span.bgQuote, tr.bgQuote, td.bgQuote").each(function(){var $this=$(this);var bgChannel=$this.find("span.bgChannel").text();var bgRealtimeChannel=$this.find("span.bgRealtimeChannel").text();if(bgChannel||bgRealtimeChannel)
BlueGrass.Quote.bindElement(this,bgChannel,bgRealtimeChannel,{sequence:null,number:1},{sequence:null,number:1});});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("bluegrass quote setup called more than once");};},unbindElement:function(element,channelName){if(!_elementMap[channelName])
return;var elements=_elementMap[channelName].elements;var channel=_elementMap[channelName].channel;if(elements!=null&&elements.length==1&&elements[0][0]==element[0]){channel.removeCallback(_quoteCallback);_elementMap[channelName]=null;delete _elementMap[channelName];}
else if(elements!=null&&elements.length>1){var index=-1;for(var i=0;i<elements.length;i++){if(elements[i][0]==element[0]){index=i;break;}}
if(index>=0)
elements=BlueGrass.Utility.arrayRemove(elements,index);}},bindElement:function(element,channelName,realtimeChannel,options,realtimeOptions){var _connection=BlueGrass.Runtime.getConnection();var volumeOnlyChannel=null;if(realtimeChannel&&realtimeChannel.length>0){if(channelName&&channelName.length>0)
volumeOnlyChannel=channelName;channelName=realtimeChannel;}
if(!_connection||_connection==null||typeof(_connection)==='undefined'||!channelName||channelName.length==0)
return;if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]={channel:null,elements:[]};}
if((volumeOnlyChannel&&volumeOnlyChannel.length>0)&&(!_elementMap[volumeOnlyChannel]||_elementMap[volumeOnlyChannel]==null||typeof(_elementMap[volumeOnlyChannel])==='undefined')){_elementMap[volumeOnlyChannel]={channel:null,elements:[]};}
element=$(element);var elementData={lastPrice:0,lastDirection:"neutral",channel:channelName,volumeChannel:volumeOnlyChannel,filterType:"",filterMoment:0,lastType:"",needToBind:true};element.data("bgquote",elementData);_elementMap[channelName].elements.push(element);if(volumeOnlyChannel){_elementMap[volumeOnlyChannel].elements.push(element);}
element.bind("bgTick",_tickHandler);if(_elementMap[channelName].channel==null){_elementMap[channelName].channel=_connection.subscribe(channelName,_quoteCallback,options);}
if(volumeOnlyChannel&&volumeOnlyChannel.length>0&&_elementMap[volumeOnlyChannel].channel==null){_elementMap[volumeOnlyChannel].channel=_connection.subscribe(volumeOnlyChannel,_quoteCallback,realtimeOptions);}},setFormat:function(formatName,format){_format[formatName]=format;},getFormat:function(formatName){return _format[formatName];}};}()});

$.extend(BlueGrass,{MarketState:function(){var _elementMap=new Object();var _timerMap=new Object();var _stateCallback=function(message){var elements=_elementMap[message.h.t];if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){this.element.trigger("bgUpdateState",{message:message,elementData:this});});}};var _timerCallback=function(channelName,theNewState){var elements=_elementMap[channelName];if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){_updateElement(this,theNewState);});}};var _updateElement=function(elementData,state){var currentText=_getStateText(state);var currentStyle=currentText.toLowerCase();elementData.currentState=state;elementData.currentElement.text(currentText);elementData.element.attr("title",state).removeClass("after").removeClass("pre").removeClass("open").removeClass("closed").addClass(currentStyle);};var _getStateText=function(state){state=state.toLowerCase();if(state.length>=4&&state.substring(0,4)=="open"){return"Open";}
else if(state.toLowerCase()=="pre-market"){return"Pre";}
else if(state.toLowerCase()=="after-market"){return"After";}
return"Closed";};return{setup:function(){$("div.bgMarketState").each(function(){var channel=$(this).find("span.bgChannel").text();if(channel&&channel.length>0)
BlueGrass.MarketState.bindElement(this,channel);});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("bluegrass marketstate setup called more than once");};},unbindElement:function(element,channelName){var elements=_elementMap[channelName];if(elements!=null&&elements.length==1&&elements[0].element[0]==element[0]){elements[0].channel.removeCallback(_stateCallback);_elementMap[channelName]=null;}
else if(elements!=null&&elements.length>1){var index=-1;for(var i=0;i<elements.length;i++){if(elements[i].element[0]==element[0]){index=i;break;}}
if(index>=0)
elements=BlueGrass.Utility.arrayRemove(elements,index);}},bindElement:function(element,channelName){var _connection=BlueGrass.Runtime.getConnection();if(!_connection||_connection==null||typeof(_connection)==='undefined')
return;if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]=[];}
element=$(element);var elementData={element:element,currentElement:element.find(".bgCurrentMarketState"),currentState:element.find(".bgCurrentMarketState").text(),nextOccurance:null,channel:null};_elementMap[channelName].push(elementData);if(_elementMap[channelName].length>1)
elementData.channel=_elementMap[channelName][0].channel;element.bind("bgUpdateState",function(e,data){var message=data.message;var elementData=data.elementData;if(typeof(_timerMap[channelName])!='undefined'&&_timerMap[channelName])
clearTimeout(_timerMap[channelName]);if(message&&message.b){if(message.b.x&&message.b.s&&typeof(message.b.s)=='number'){var temp=function(){if(new Date().getTime()>=elementData.nextOccurance){_timerCallback(channelName,message.b.x);}
else{var timeUntil=elementData.nextOccurance-new Date().getTime();var delay=timeUntil<15000?timeUntil:15000;_timerMap[channelName]=setTimeout(temp,delay);}};elementData.nextOccurance=new Date().getTime()+(message.b.s*1000);var delay=(message.b.s<15?message.b.s:15)*1000
_timerMap[channelName]=setTimeout(temp,delay);}
if(message.b.c){_updateElement(elementData,message.b.c);}}});if(elementData.channel==null){elementData.channel=_connection.subscribe(channelName,_stateCallback);}}};}()});

$.extend(BlueGrass,{Conga:function(){var _elementMap=new Object();var _congaCallback=function(message){var elements=_elementMap[message.h.t];if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){this.element.trigger("bgUpdateConga",{message:message,elementData:this});});}};return{setup:function(){var congas=$("div.bgConga");congas.each(function(){var $this=$(this)
var channel=$this.find("span.bgChannel").text()
if(channel)
BlueGrass.Conga.bindElement(this,channel,$this.find("span.bgRevision").text());});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("bluegrass conga setup called more than once");};},unbindElement:function(element,channelName){var elements=_elementMap[channelName];if(elements!=null&&elements.length==1&&elements[0].element[0]==element[0]){elements[0].channel.removeCallback(_congaCallback);_elementMap[channelName]=null;}
else if(elements!=null&&elements.length>1){var index=-1;for(var i=0;i<elements.length;i++){if(elements[i].element[0]==element[0]){index=i;break;}}
if(index>=0)
elements=BlueGrass.Utility.arrayRemove(elements,index);}},bindElement:function(element,channelName,currentRevisionId){if(!currentRevisionId||typeof(currentRevisionId)!="number")
{currentRevisionId=0;}
var _connection=BlueGrass.Runtime.getConnection();if(!_connection||_connection==null||typeof(_connection)==='undefined'||!channelName||channelName.length==0){return;}
if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]=[];}
element=$(element);var elementData={element:element,channel:null};_elementMap[channelName].push(elementData);if(_elementMap[channelName].length>1){elementData.channel=_elementMap[channelName][0].channel;}
element.bind("bgUpdateConga",function(e,data){var message=data.message;var elementData=data.elementData;if(message&&message.b){elementData.element.fadeOut(500,function(){elementData.element.html($(message.b.h));elementData.element.fadeIn(500);});}});if(elementData.channel==null){elementData.channel=_connection.subscribe(channelName,_congaCallback);}}};}()});

$.extend(BlueGrass,{Bulletin:function(){var _channel=null;var _bulletinElement=null;var _timeout=null;var _bulletinExpire=function(){_bulletinElement.text("");_bulletinElement.removeClass("active");_bulletinElement.trigger("bulletinExpire");_timeout=null;};var _bulletinCallback=function(message){var expire=BlueGrass.Utility.convertToExchangeTime(message.b.e);if(expire&&message.b.h){var now=new Date();var tte=expire.getTime()-now.getTime();if(tte>0){if(message.b.u)
_bulletinElement.html('<a href="'+message.b.u+'">'+message.b.h+'</a>');else
_bulletinElement.text(message.b.h);_bulletinElement.addClass("active");_bulletinElement.trigger("bulletinActive",message);if(!_timeout)
clearTimeout(_timeout);_timeout=setTimeout(_bulletinExpire,tte);}}};return{bindElement:function(element,optionalChannel,options){var _connection=BlueGrass.Runtime.getConnection();if(!element||!_connection||_connection==null||typeof(_connection)==='undefined')
return;if(!optionalChannel)
optionalChannel="/bulletin";_bulletinElement=element;_channel=_connection.subscribe(optionalChannel,_bulletinCallback,options);},unbindElement:function(element){if(_channel&&_bulletinElement.element[0]==element[0]){_channel.removeCallback(_bulletinCallback);if(!_timeout)
clearTimeout(_timeout);}}};}()});

Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(format,ignore_offset){if(Date.formatFunctions[format]==null){Date.createNewFormat(format);}
var func=Date.formatFunctions[format];if(ignore_offset||!this.offset){return this[func]();}else{return(new Date(this.valueOf()-this.offset))[func]();}};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function(){return ";var special=false;var ch='';for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true;}
else if(special){special=false;code+="'"+String.escape(ch)+"' + ";}
else{code+=Date.getFormatCode(ch);}}
eval(code.substring(0,code.length-3)+";}");};Date.getFormatCode=function(character){switch(character){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"q":return"(this.getHours() < 12 ? 'a.m.' : 'p.m.') + ";case"Q":return"(this.getHours() < 12 ? 'A.M.' : 'P.M.') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(character)+"' + ";}};Date.parseDate=function(input,format){if(Date.parseFunctions[format]==null){Date.createParser(format);}
var func=Date.parseFunctions[format];return Date[func](input);};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input){\n"
+"var y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = 0;\n"
+"var d = new Date();\n"
+"y = d.getFullYear();\n"
+"m = d.getMonth();\n"
+"d = d.getDate();\n"
+"var results = input.match(Date.parseRegexes["+regexNum+"]);\n"
+"if (results && results.length > 0) {";var regex="";var special=false;var ch='';for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true;}
else if(special){special=false;regex+=String.escape(ch);}
else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c;}}}
code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n"
+"{return new Date(y, m, d, h, i, s).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n"
+"{return new Date(y, m, d, h, i).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0 && d > 0 && h >= 0)\n"
+"{return new Date(y, m, d, h).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0 && d > 0)\n"
+"{return new Date(y, m, d).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0)\n"
+"{return new Date(y, m).applyOffset(z);}\n"
+"else if (y > 0)\n"
+"{return new Date(y).applyOffset(z);}\n"
+"}return null;}";Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$");eval(code);};Date.formatCodeToRegex=function(character,currentGroup){switch(character){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+currentGroup+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+currentGroup+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+currentGroup+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+currentGroup+"], 10);\n"
+"y = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+currentGroup+"] == 'am') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+currentGroup+"] == 'AM') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"q":return{g:1,c:"if (results["+currentGroup+"] == 'a.m.') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(a.m.|p.m.)"};case"Q":return{g:1,c:"if (results["+currentGroup+"] == 'A.M.') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(A.M.|P.M.)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"O":case"P":return{g:1,c:"z = Date.parseOffset(results["+currentGroup+"], 10);\n",s:"(Z|[+-]\\d{2}:?\\d{2})"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:1,c:"s = parseInt(results["+currentGroup+"], 10);\n",s:"([+-]\\d{1,5})"};default:return{g:0,c:null,s:String.escape(character)};}};Date.parseOffset=function(str){if(str=="Z"){return 0;}
var seconds;seconds=parseInt(str[0]+str[1]+str[2])*3600;if(str[3]==":"){seconds+=parseInt(str[4]+str[5])*60;}else{seconds+=parseInt(str[3]+str[4])*60;}
return seconds;};Date.prototype.applyOffset=function(offset_seconds){this.offset=offset_seconds*1000;this.setTime(this.valueOf()+this.offset);return this;};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3").replace(/^.*?[0-9]{4} \(([A-Z]{3})\)/,"$1");};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")
+String.leftPad(Math.floor(this.getTimezoneOffset()/60),2,"0")
+String.leftPad(this.getTimezoneOffset()%60,2,"0");};Date.prototype.getDayOfYear=function(){var num=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var i=0;i<this.getMonth();++i){num+=Date.daysInMonth[i];}
return num+this.getDate()-1;};Date.prototype.getWeekOfYear=function(){var now=this.getDayOfYear()+(4-this.getDay());var jan1=new Date(this.getFullYear(),0,1);var then=(7-jan1.getDay()+4);document.write(then);return String.leftPad(((now-then)/7)+1,2,"0");};Date.prototype.isLeapYear=function(){var year=this.getFullYear();return((year&3)==0&&(year%100||(year%400==0&&year)));};Date.prototype.getFirstDayOfMonth=function(){var day=(this.getDay()-(this.getDate()-1))%7;return(day<0)?(day+7):day;};Date.prototype.getLastDayOfMonth=function(){var day=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return(day<0)?(day+7):day;};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()];};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};String.escape=function(string){return string.replace(/('|\\)/g,"\\$1");};String.leftPad=function(val,size,ch){var result=new String(val);if(ch==null){ch=" ";}
while(result.length<size){result=ch+result;}
return result;};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y\\-m\\-d\\TH\\:i\\:sO",ISO8601ShortPattern:"Y\\-m\\-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};

Number.formatFunctions={count:0};Number.prototype.NaN='NaN';Number.prototype.posInfinity='Infinity';Number.prototype.negInfinity='-Infinity';Number.prototype.numberFormat=function(format,context){if(isNaN(this)){return Number.prototype.NaNstring;}
else if(this==+Infinity){return Number.prototype.posInfinity;}
else if(this==-Infinity){return Number.prototype.negInfinity;}
else if(Number.formatFunctions[format]==null){Number.createNewFormat(format);}
return this[Number.formatFunctions[format]](context);}
Number.createNewFormat=function(format){var funcName="format"+Number.formatFunctions.count++;Number.formatFunctions[format]=funcName;var code="Number.prototype."+funcName+" = function(context){\n";var formats=format.split(";");switch(formats.length){case 1:code+=Number.createTerminalFormat(format);break;case 2:code+="return (this < 0) ? this.numberFormat(\""
+String.escape(formats[1])
+"\", 1) : this.numberFormat(\""
+String.escape(formats[0])
+"\", 2);";break;case 3:code+="return (this < 0) ? this.numberFormat(\""
+String.escape(formats[1])
+"\", 1) : ((this == 0) ? this.numberFormat(\""
+String.escape(formats[2])
+"\", 2) : this.numberFormat(\""
+String.escape(formats[0])
+"\", 3));";break;default:code+="throw 'Too many semicolons in format string';";break;}
eval(code+"}");}
Number.createTerminalFormat=function(format){if(format.length>0&&format.search(/[0#?]/)==-1){return"return '"+String.escape(format)+"';\n";}
var code="var val = (context == null) ? new Number(this) : Math.abs(this);\n";var thousands=false;var lodp=format;var rodp="";var ldigits=0;var rdigits=0;var scidigits=0;var scishowsign=false;var sciletter="";m=format.match(/\..*(e)([+-]?)(0+)/i);if(m){sciletter=m[1];scishowsign=(m[2]=="+");scidigits=m[3].length;format=format.replace(/(e)([+-]?)(0+)/i,"");}
var m=format.match(/^([^.]*)\.(.*)$/);if(m){lodp=m[1].replace(/\./g,"");rodp=m[2].replace(/\./g,"");}
if(format.indexOf('%')>=0){code+="val *= 100;\n";}
m=lodp.match(/(,+)(?:$|[^0#?,])/);if(m){code+="val /= "+Math.pow(1000,m[1].length)+"\n;";}
if(lodp.search(/[0#?],[0#?]/)>=0){thousands=true;}
if((m)||thousands){lodp=lodp.replace(/,/g,"");}
m=lodp.match(/0[0#?]*/);if(m){ldigits=m[0].length;}
m=rodp.match(/[0#?]*/);if(m){rdigits=m[0].length;}
if(scidigits>0){code+="var sci = Number.toScientific(val,"
+ldigits+", "+rdigits+", "+scidigits+", "+scishowsign+");\n"
+"var arr = [sci.l, sci.r];\n";}
else{code+="var arr = val.round("+rdigits+").toFixed("+rdigits+").split('.');\n";code+="arr[0] = (val < 0 ? '-' : '') + String.leftPad((val < 0 ? arr[0].substring(1) : arr[0]), "
+ldigits+", '0');\n";}
if(thousands){code+="arr[0] = Number.addSeparators(arr[0]);\n";}
code+="arr[0] = Number.injectIntoFormat(arr[0].reverse(), '"
+String.escape(lodp.reverse())+"', true).reverse();\n";if(rdigits>0){code+="arr[1] = Number.injectIntoFormat(arr[1], '"+String.escape(rodp)+"', false);\n";}
if(scidigits>0){code+="arr[1] = arr[1].replace(/(\\d{"+rdigits+"})/, '$1"+sciletter+"' + sci.s);\n";}
return code+"return arr.join('.');\n";}
Number.toScientific=function(val,ldigits,rdigits,scidigits,showsign){var result={l:"",r:"",s:""};var ex="";var before=Math.abs(val).toFixed(ldigits+rdigits+1).trim('0');var after=Math.round(new Number(before.replace(".","").replace(new RegExp("(\\d{"+(ldigits+rdigits)+"})(.*)"),"$1.$2"))).toFixed(0);if(after.length>=ldigits){after=after.substring(0,ldigits)+"."+after.substring(ldigits);}
else{after+='.';}
result.s=(before.indexOf(".")-before.search(/[1-9]/))-after.indexOf(".");if(result.s<0){result.s++;}
result.l=(val<0?'-':'')+String.leftPad(after.substring(0,after.indexOf(".")),ldigits,"0");result.r=after.substring(after.indexOf(".")+1);if(result.s<0){ex="-";}
else if(showsign){ex="+";}
result.s=ex+String.leftPad(Math.abs(result.s).toFixed(0),scidigits,"0");return result;}
Number.prototype.round=function(decimals){if(decimals>0){var m=this.toFixed(decimals+1).match(new RegExp("(-?\\d*)\.(\\d{"+decimals+"})(\\d)\\d*$"));if(m&&m.length){var postDeci=Math.round(m[2]+"."+m[3]);if(postDeci>=Math.pow(10,decimals)){postDeci=0;m[1]=new Number(m[1])+1;};return new Number(m[1]+"."+String.leftPad(postDeci,decimals,"0"));}}
return this;}
Number.injectIntoFormat=function(val,format,stuffExtras){var i=0;var j=0;var result="";var revneg=val.charAt(val.length-1)=='-';if(revneg){val=val.substring(0,val.length-1);}
while(i<format.length&&j<val.length&&format.substring(i).search(/[0#?]/)>=0){if(format.charAt(i).match(/[0#?]/)){if(val.charAt(j)!='-'){result+=val.charAt(j);}
else{result+="0";}
j++;}
else{result+=format.charAt(i);}
++i;}
if(revneg&&j==val.length){result+='-';}
if(j<val.length){if(stuffExtras){result+=val.substring(j);}
if(revneg){result+='-';}}
if(i<format.length){result+=format.substring(i);}
return result.replace(/#/g,"").replace(/\?/g," ");}
Number.addSeparators=function(val){return val.reverse().replace(/(\d{3})/g,"$1,").reverse().replace(/^(-)?,/,"$1");}
String.prototype.reverse=function(){var res="";for(var i=this.length;i>0;--i){res+=this.charAt(i-1);}
return res;}
String.prototype.trim=function(ch){if(!ch)ch=' ';return this.replace(new RegExp("^"+ch+"+|"+ch+"+$","g"),"");}
String.leftPad=function(val,size,ch){var result=new String(val);if(ch==null){ch=" ";}
while(result.length<size){result=ch+result;}
return result;}
String.escape=function(string){return string.replace(/('|\\)/g,"\\$1");}
