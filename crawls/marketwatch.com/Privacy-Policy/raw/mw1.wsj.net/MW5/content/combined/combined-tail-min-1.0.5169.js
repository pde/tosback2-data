;jQuery.ui||(function($){var _remove=$.fn.remove,isFF2=$.browser.mozilla&&(parseFloat($.browser.version)<1.9);$.ui={version:"1.7.1",plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode){return;}
for(var i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b);},hasScroll:function(el,a){if($(el).css('overflow')=='hidden'){return false;}
var scroll=(a&&a=='left')?'scrollLeft':'scrollTop',has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},isOverAxis:function(x,reference,size){return(x>reference)&&(x<(reference+size));},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width);},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(isFF2){var attr=$.attr,removeAttr=$.fn.removeAttr,ariaNS="http://www.w3.org/2005/07/aaa",ariaState=/^aria-/,ariaRole=/^wairole:/;$.attr=function(elem,name,value){var set=value!==undefined;return(name=='role'?(set?attr.call(this,elem,name,"wairole:"+value):(attr.apply(this,arguments)||"").replace(ariaRole,"")):(ariaState.test(name)?(set?elem.setAttributeNS(ariaNS,name.replace(ariaState,"aaa:"),value):attr.call(this,elem,name.replace(ariaState,"aaa:"))):attr.apply(this,arguments)));};$.fn.removeAttr=function(name){return(ariaState.test(name)?this.each(function(){this.removeAttributeNS(ariaNS,name.replace(ariaState,""));}):removeAttr.call(this,name));};}
$.fn.extend({remove:function(){$("*",this).add(this).each(function(){$(this).triggerHandler("remove");});return _remove.apply(this,arguments);},enableSelection:function(){return this.attr('unselectable','off').css('MozUserSelect','').unbind('selectstart.ui');},disableSelection:function(){return this.attr('unselectable','on').css('MozUserSelect','none').bind('selectstart.ui',function(){return false;});},scrollParent:function(){var scrollParent;if(($.browser.msie&&(/(static|relative)/).test(this.css('position')))||(/absolute/).test(this.css('position'))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.curCSS(this,'position',1))&&(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}
return(/fixed/).test(this.css('position'))||!scrollParent.length?$(document):scrollParent;}});$.extend($.expr[':'],{data:function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){var nodeName=element.nodeName.toLowerCase(),tabIndex=$.attr(element,'tabindex');return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:'a'==nodeName||'area'==nodeName?element.href||!isNaN(tabIndex):!isNaN(tabIndex))&&!$(element)['area'==nodeName?'parents':'closest'](':hidden').length;},tabbable:function(element){var tabIndex=$.attr(element,'tabindex');return(isNaN(tabIndex)||tabIndex>=0)&&$(element).is(':focusable');}});function getter(namespace,plugin,method,args){function getMethods(type){var methods=$[namespace][plugin][type]||[];return(typeof methods=='string'?methods.split(/,?\s+/):methods);}
var methods=getMethods('getter');if(args.length==1&&typeof args[0]=='string'){methods=methods.concat(getMethods('getterSetter'));}
return($.inArray(method,methods)!=-1);}
$.widget=function(name,prototype){var namespace=name.split(".")[0];name=name.split(".")[1];$.fn[name]=function(options){var isMethodCall=(typeof options=='string'),args=Array.prototype.slice.call(arguments,1);if(isMethodCall&&options.substring(0,1)=='_'){return this;}
if(isMethodCall&&getter(namespace,name,options,args)){var instance=$.data(this[0],name);return(instance?instance[options].apply(instance,args):undefined);}
return this.each(function(){var instance=$.data(this,name);(!instance&&!isMethodCall&&$.data(this,name,new $[namespace][name](this,options))._init());(instance&&isMethodCall&&$.isFunction(instance[options])&&instance[options].apply(instance,args));});};$[namespace]=$[namespace]||{};$[namespace][name]=function(element,options){var self=this;this.namespace=namespace;this.widgetName=name;this.widgetEventPrefix=$[namespace][name].eventPrefix||name;this.widgetBaseClass=namespace+'-'+name;this.options=$.extend({},$.widget.defaults,$[namespace][name].defaults,$.metadata&&$.metadata.get(element)[name],options);this.element=$(element).bind('setData.'+name,function(event,key,value){if(event.target==element){return self._setData(key,value);}}).bind('getData.'+name,function(event,key){if(event.target==element){return self._getData(key);}}).bind('remove',function(){return self.destroy();});};$[namespace][name].prototype=$.extend({},$.widget.prototype,prototype);$[namespace][name].getterSetter='option';};$.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+'-disabled'+' '+this.namespace+'-state-disabled').removeAttr('aria-disabled');},option:function(key,value){var options=key,self=this;if(typeof key=="string"){if(value===undefined){return this._getData(key);}
options={};options[key]=value;}
$.each(options,function(key,value){self._setData(key,value);});},_getData:function(key){return this.options[key];},_setData:function(key,value){this.options[key]=value;if(key=='disabled'){this.element
[value?'addClass':'removeClass'](this.widgetBaseClass+'-disabled'+' '+
this.namespace+'-state-disabled').attr("aria-disabled",value);}},enable:function(){this._setData('disabled',false);},disable:function(){this._setData('disabled',true);},_trigger:function(type,event,data){var callback=this.options[type],eventName=(type==this.widgetEventPrefix?type:this.widgetEventPrefix+type);event=$.Event(event);event.type=eventName;if(event.originalEvent){for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop];}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.call(this.element[0],event,data)===false||event.isDefaultPrevented());}};$.widget.defaults={disabled:false};$.ui.mouse={_mouseInit:function(){var self=this;this.element.bind('mousedown.'+this.widgetName,function(event){return self._mouseDown(event);}).bind('click.'+this.widgetName,function(event){if(self._preventClickEvent){self._preventClickEvent=false;event.stopImmediatePropagation();return false;}});if($.browser.msie){this._mouseUnselectable=this.element.attr('unselectable');this.element.attr('unselectable','on');}
this.started=false;},_mouseDestroy:function(){this.element.unbind('.'+this.widgetName);($.browser.msie&&this.element.attr('unselectable',this._mouseUnselectable));},_mouseDown:function(event){event.originalEvent=event.originalEvent||{};if(event.originalEvent.mouseHandled){return;}
(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var self=this,btnIsLeft=(event.which==1),elIsCancel=(typeof this.options.cancel=="string"?$(event.target).parents().add(event.target).filter(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){self.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
this._mouseMoveDelegate=function(event){return self._mouseMove(event);};this._mouseUpDelegate=function(event){return self._mouseUp(event);};$(document).bind('mousemove.'+this.widgetName,this._mouseMoveDelegate).bind('mouseup.'+this.widgetName,this._mouseUpDelegate);($.browser.safari||event.preventDefault());event.originalEvent.mouseHandled=true;return true;},_mouseMove:function(event){if($.browser.msie&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind('mousemove.'+this.widgetName,this._mouseMoveDelegate).unbind('mouseup.'+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(event.target==this._mouseDownEvent.target);this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(event){return this.mouseDelayMet;},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true;}};$.ui.mouse.defaults={cancel:null,distance:1,delay:0};})(jQuery);;jQuery.effects||(function($){$.effects={version:"1.7.1",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.data("ec.storage."+set[i],element[0].style[set[i]]);}},restore:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.css(set[i],element.data("ec.storage."+set[i]));}},setMode:function(el,mode){if(mode=='toggle')mode=el.is(':hidden')?'show':'hide';return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case'top':y=0;break;case'middle':y=0.5;break;case'bottom':y=1;break;default:y=origin[0]/original.height;};switch(origin[1]){case'left':x=0;break;case'center':x=0.5;break;case'right':x=1;break;default:x=origin[1]/original.width;};return{x:x,y:y};},createWrapper:function(element){if(element.parent().is('.ui-effects-wrapper'))
return element.parent();var props={width:element.outerWidth(true),height:element.outerHeight(true),'float':element.css('float')};element.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var wrapper=element.parent();if(element.css('position')=='static'){wrapper.css({position:'relative'});element.css({position:'relative'});}else{var top=element.css('top');if(isNaN(parseInt(top,10)))top='auto';var left=element.css('left');if(isNaN(parseInt(left,10)))left='auto';wrapper.css({position:element.css('position'),top:top,left:left,zIndex:element.css('z-index')}).show();element.css({position:'relative',top:0,left:0});}
wrapper.css(props);return wrapper;},removeWrapper:function(element){if(element.parent().is('.ui-effects-wrapper'))
return element.parent().replaceWith(element);return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){unit=element.cssUnit(x);if(unit[0]>0)value[x]=unit[0]*factor+unit[1];});return value;},animateClass:function(value,duration,easing,callback){var cb=(typeof easing=="function"?easing:(callback?callback:null));var ea=(typeof easing=="string"?easing:null);return this.each(function(){var offset={};var that=$(this);var oldStyleAttr=that.attr("style")||'';if(typeof oldStyleAttr=='object')oldStyleAttr=oldStyleAttr["cssText"];if(value.toggle){that.hasClass(value.toggle)?value.remove=value.toggle:value.add=value.toggle;}
var oldStyle=$.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(value.add)that.addClass(value.add);if(value.remove)that.removeClass(value.remove);var newStyle=$.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(value.add)that.removeClass(value.add);if(value.remove)that.addClass(value.remove);for(var n in newStyle){if(typeof newStyle[n]!="function"&&newStyle[n]&&n.indexOf("Moz")==-1&&n.indexOf("length")==-1&&newStyle[n]!=oldStyle[n]&&(n.match(/color/i)||(!n.match(/color/i)&&!isNaN(parseInt(newStyle[n],10))))&&(oldStyle.position!="static"||(oldStyle.position=="static"&&!n.match(/left|top|bottom|right/))))offset[n]=newStyle[n];}
that.animate(offset,duration,ea,function(){if(typeof $(this).attr("style")=='object'){$(this).attr("style")["cssText"]="";$(this).attr("style")["cssText"]=oldStyleAttr;}else $(this).attr("style",oldStyleAttr);if(value.add)$(this).addClass(value.add);if(value.remove)$(this).removeClass(value.remove);if(cb)cb.apply(this,arguments);});});}};function _normalizeArguments(a,m){var o=a[1]&&a[1].constructor==Object?a[1]:{};if(m)o.mode=m;var speed=a[1]&&a[1].constructor!=Object?a[1]:(o.duration?o.duration:a[2]);speed=$.fx.off?0:typeof speed==="number"?speed:$.fx.speeds[speed]||$.fx.speeds._default;var callback=o.callback||($.isFunction(a[1])&&a[1])||($.isFunction(a[2])&&a[2])||($.isFunction(a[3])&&a[3]);return[a[0],o,speed,callback];}
$.fn.extend({_show:$.fn.show,_hide:$.fn.hide,__toggle:$.fn.toggle,_addClass:$.fn.addClass,_removeClass:$.fn.removeClass,_toggleClass:$.fn.toggleClass,effect:function(fx,options,speed,callback){return $.effects[fx]?$.effects[fx].call(this,{method:fx,options:options||{},duration:speed,callback:callback}):null;},show:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0])))
return this._show.apply(this,arguments);else{return this.effect.apply(this,_normalizeArguments(arguments,'show'));}},hide:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0])))
return this._hide.apply(this,arguments);else{return this.effect.apply(this,_normalizeArguments(arguments,'hide'));}},toggle:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))||(arguments[0].constructor==Function))
return this.__toggle.apply(this,arguments);else{return this.effect.apply(this,_normalizeArguments(arguments,'toggle'));}},addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames);},removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames);},toggleClass:function(classNames,speed,easing,callback){return((typeof speed!=="boolean")&&speed)?$.effects.animateClass.apply(this,[{toggle:classNames},speed,easing,callback]):this._toggleClass(classNames,speed);},morph:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback]);},switchClass:function(){return this.morph.apply(this,arguments);},cssUnit:function(key){var style=this.css(key),val=[];$.each(['em','px','%','pt'],function(i,unit){if(style.indexOf(unit)>0)
val=[parseFloat(style),unit];});return val;}});$.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','color','outlineColor'],function(i,attr){$.fx.step[attr]=function(fx){if(fx.state==0){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);}
fx.elem.style[attr]="rgb("+[Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0],10),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1],10),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2],10),255),0)].join(",")+")";};});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)
return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))
return[parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10)];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))
return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))
return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))
return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];if(result=/rgba\(0, 0, 0, 0\)/.exec(color))
return colors['transparent'];return colors[$.trim(color).toLowerCase()];}
function getColor(elem,attr){var color;do{color=$.curCSS(elem,attr);if(color!=''&&color!='transparent'||$.nodeName(elem,"body"))
break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};$.easing.jswing=$.easing.swing;$.extend($.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return $.easing[$.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-$.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return $.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return $.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});})(jQuery);(function($){$.effects.highlight=function(o){return this.queue(function(){var el=$(this),props=['backgroundImage','backgroundColor','opacity'];var mode=$.effects.setMode(el,o.options.mode||'show');var color=o.options.color||"#ffff99";var oldColor=el.css("backgroundColor");$.effects.save(el,props);el.show();el.css({backgroundImage:'none',backgroundColor:color});var animation={backgroundColor:oldColor};if(mode=="hide")animation['opacity']=0;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=="hide")el.hide();$.effects.restore(el,props);if(mode=="show"&&$.browser.msie)this.style.removeAttribute('filter');if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($){$.effects.slide=function(o){return this.queue(function(){var el=$(this),props=['position','top','left'];var mode=$.effects.setMode(el,o.options.mode||'show');var direction=o.options.direction||'left';$.effects.save(el,props);el.show();$.effects.createWrapper(el).css({overflow:'hidden'});var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var distance=o.options.distance||(ref=='top'?el.outerHeight({margin:true}):el.outerWidth({margin:true}));if(mode=='show')el.css(ref,motion=='pos'?-distance:distance);var animation={};animation[ref]=(mode=='show'?(motion=='pos'?'+=':'-='):(motion=='pos'?'-=':'+='))+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($){$.widget("ui.accordion",{_init:function(){var o=this.options,self=this;this.running=0;if(o.collapsible==$.ui.accordion.defaults.collapsible&&o.alwaysOpen!=$.ui.accordion.defaults.alwaysOpen){o.collapsible=!o.alwaysOpen;}
if(o.navigation){var current=this.element.find("a").filter(o.navigationFilter);if(current.length){if(current.filter(o.header).length){this.active=current;}else{this.active=current.parent().parent().prev();current.addClass("ui-accordion-content-active");}}}
this.element.addClass("ui-accordion ui-widget ui-helper-reset");if(this.element[0].nodeName=="UL"){this.element.children("li").addClass("ui-accordion-li-fix");}
this.headers=this.element.find(o.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){$(this).addClass('ui-state-hover');}).bind("mouseleave.accordion",function(){$(this).removeClass('ui-state-hover');}).bind("focus.accordion",function(){$(this).addClass('ui-state-focus');}).bind("blur.accordion",function(){$(this).removeClass('ui-state-focus');});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");this.active=this._findActive(this.active||o.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass('ui-accordion-content-active');$("<span/>").addClass("ui-icon "+o.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(o.icons.header).toggleClass(o.icons.headerSelected);if($.browser.msie){this.element.find('a').css('zoom','1');}
this.resize();this.element.attr('role','tablist');this.headers.attr('role','tab').bind('keydown',function(event){return self._keydown(event);}).next().attr('role','tabpanel');this.headers.not(this.active||"").attr('aria-expanded','false').attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr('tabIndex','0');}else{this.active.attr('aria-expanded','true').attr('tabIndex','0');}
if(!$.browser.safari)
this.headers.find('a').attr('tabIndex','-1');if(o.event){this.headers.bind((o.event)+".accordion",function(event){return self._clickHandler.call(self,event,this);});}},destroy:function(){var o=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind('.accordion').removeData('accordion');this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this.headers.children(".ui-icon").remove();var contents=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(o.autoHeight||o.fillHeight){contents.css("height","");}},_setData:function(key,value){if(key=='alwaysOpen'){key='collapsible';value=!value;}
$.widget.prototype._setData.apply(this,arguments);},_keydown:function(event){var o=this.options,keyCode=$.ui.keyCode;if(o.disabled||event.altKey||event.ctrlKey)
return;var length=this.headers.length;var currentIndex=this.headers.index(event.target);var toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:return this._clickHandler({target:event.target},event.target);}
if(toFocus){$(event.target).attr('tabIndex','-1');$(toFocus).attr('tabIndex','0');toFocus.focus();return false;}
return true;},resize:function(){var o=this.options,maxHeight;if(o.fillSpace){if($.browser.msie){var defOverflow=this.element.parent().css('overflow');this.element.parent().css('overflow','hidden');}
maxHeight=this.element.parent().height();if($.browser.msie){this.element.parent().css('overflow',defOverflow);}
this.headers.each(function(){maxHeight-=$(this).outerHeight();});var maxPadding=0;this.headers.next().each(function(){maxPadding=Math.max(maxPadding,$(this).innerHeight()-$(this).height());}).height(Math.max(0,maxHeight-maxPadding)).css('overflow','auto');}else if(o.autoHeight){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight());}).height(maxHeight);}},activate:function(index){var active=this._findActive(index)[0];this._clickHandler({target:active},active);},_findActive:function(selector){return selector?typeof selector=="number"?this.headers.filter(":eq("+selector+")"):this.headers.not(this.headers.not(selector)):selector===false?$([]):this.headers.filter(":eq(0)");},_clickHandler:function(event,target){var o=this.options;if(o.disabled)return false;if(!event.target&&o.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(o.icons.headerSelected).addClass(o.icons.header);this.active.next().addClass('ui-accordion-content-active');var toHide=this.active.next(),data={options:o,newHeader:$([]),oldHeader:o.active,newContent:$([]),oldContent:toHide},toShow=(this.active=$([]));this._toggle(toShow,toHide,data);return false;}
var clicked=$(event.currentTarget||target);var clickedIsActive=clicked[0]==this.active[0];if(this.running||(!o.collapsible&&clickedIsActive)){return false;}
this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(o.icons.headerSelected).addClass(o.icons.header);this.active.next().addClass('ui-accordion-content-active');if(!clickedIsActive){clicked.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(o.icons.header).addClass(o.icons.headerSelected);clicked.next().addClass('ui-accordion-content-active');}
var toShow=clicked.next(),toHide=this.active.next(),data={options:o,newHeader:clickedIsActive&&o.collapsible?$([]):clicked,oldHeader:this.active,newContent:clickedIsActive&&o.collapsible?$([]):toShow.find('> *'),oldContent:toHide.find('> *')},down=this.headers.index(this.active[0])>this.headers.index(clicked[0]);this.active=clickedIsActive?$([]):clicked;this._toggle(toShow,toHide,data,clickedIsActive,down);return false;},_toggle:function(toShow,toHide,data,clickedIsActive,down){var o=this.options,self=this;this.toShow=toShow;this.toHide=toHide;this.data=data;var complete=function(){if(!self)return;return self._completed.apply(self,arguments);};this._trigger("changestart",null,this.data);this.running=toHide.size()===0?toShow.size():toHide.size();if(o.animated){var animOptions={};if(o.collapsible&&clickedIsActive){animOptions={toShow:$([]),toHide:toHide,complete:complete,down:down,autoHeight:o.autoHeight||o.fillSpace};}else{animOptions={toShow:toShow,toHide:toHide,complete:complete,down:down,autoHeight:o.autoHeight||o.fillSpace};}
if(!o.proxied){o.proxied=o.animated;}
if(!o.proxiedDuration){o.proxiedDuration=o.duration;}
o.animated=$.isFunction(o.proxied)?o.proxied(animOptions):o.proxied;o.duration=$.isFunction(o.proxiedDuration)?o.proxiedDuration(animOptions):o.proxiedDuration;var animations=$.ui.accordion.animations,duration=o.duration,easing=o.animated;if(!animations[easing]){animations[easing]=function(options){this.slide(options,{easing:easing,duration:duration||700});};}
animations[easing](animOptions);}else{if(o.collapsible&&clickedIsActive){toShow.toggle();}else{toHide.hide();toShow.show();}
complete(true);}
toHide.prev().attr('aria-expanded','false').attr("tabIndex","-1").blur();toShow.prev().attr('aria-expanded','true').attr("tabIndex","0").focus();},_completed:function(cancel){var o=this.options;this.running=cancel?0:--this.running;if(this.running)return;if(o.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""});}
this._trigger('change',null,this.data);}});$.extend($.ui.accordion,{version:"1.7.1",defaults:{active:null,alwaysOpen:true,animated:'slide',autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase();}},animations:{slide:function(options,additions){options=$.extend({easing:"swing",duration:300},options,additions);if(!options.toHide.size()){options.toShow.animate({height:"show"},options);return;}
if(!options.toShow.size()){options.toHide.animate({height:"hide"},options);return;}
var overflow=options.toShow.css('overflow'),percentDone,showProps={},hideProps={},fxAttrs=["height","paddingTop","paddingBottom"],originalWidth;var s=options.toShow;originalWidth=s[0].style.width;s.width(parseInt(s.parent().width(),10)-parseInt(s.css("paddingLeft"),10)-parseInt(s.css("paddingRight"),10)-(parseInt(s.css("borderLeftWidth"),10)||0)-(parseInt(s.css("borderRightWidth"),10)||0));$.each(fxAttrs,function(i,prop){hideProps[prop]='hide';var parts=(''+$.css(options.toShow[0],prop)).match(/^([\d+-.]+)(.*)$/);showProps[prop]={value:parts[1],unit:parts[2]||'px'};});options.toShow.css({height:0,overflow:'hidden'}).show();options.toHide.filter(":hidden").each(options.complete).end().filter(":visible").animate(hideProps,{step:function(now,settings){if(settings.prop=='height'){percentDone=(settings.now-settings.start)/(settings.end-settings.start);}
options.toShow[0].style[settings.prop]=(percentDone*showProps[settings.prop].value)+showProps[settings.prop].unit;},duration:options.duration,easing:options.easing,complete:function(){if(!options.autoHeight){options.toShow.css("height","");}
options.toShow.css("width",originalWidth);options.toShow.css({overflow:overflow});options.complete();}});},bounceslide:function(options){this.slide(options,{easing:options.down?"easeOutBounce":"swing",duration:options.down?1000:200});},easeslide:function(options){this.slide(options,{easing:"easeinout",duration:700});}}});})(jQuery);(function($){var setDataSwitch={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},uiDialogClasses='ui-dialog '+'ui-widget '+'ui-widget-content '+'ui-corner-all ';$.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr('title');var self=this,options=this.options,title=options.title||this.originalTitle||'&nbsp;',titleId=$.ui.dialog.getTitleId(this.element),uiDialog=(this.uiDialog=$('<div/>')).appendTo(document.body).hide().addClass(uiDialogClasses+options.dialogClass).css({position:'absolute',overflow:'hidden',zIndex:options.zIndex}).attr('tabIndex',-1).css('outline',0).keydown(function(event){(options.closeOnEscape&&event.keyCode&&event.keyCode==$.ui.keyCode.ESCAPE&&self.close(event));}).attr({role:'dialog','aria-labelledby':titleId}).mousedown(function(event){self.moveToTop(false,event);}),uiDialogContent=this.element.show().removeAttr('title').addClass('ui-dialog-content '+'ui-widget-content').appendTo(uiDialog),uiDialogTitlebar=(this.uiDialogTitlebar=$('<div></div>')).addClass('ui-dialog-titlebar '+'ui-widget-header '+'ui-corner-all '+'ui-helper-clearfix').prependTo(uiDialog),uiDialogTitlebarClose=$('<a href="#"/>').addClass('ui-dialog-titlebar-close '+'ui-corner-all').attr('role','button').hover(function(){uiDialogTitlebarClose.addClass('ui-state-hover');},function(){uiDialogTitlebarClose.removeClass('ui-state-hover');}).focus(function(){uiDialogTitlebarClose.addClass('ui-state-focus');}).blur(function(){uiDialogTitlebarClose.removeClass('ui-state-focus');}).mousedown(function(ev){ev.stopPropagation();}).click(function(event){self.close(event);return false;}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(this.uiDialogTitlebarCloseText=$('<span/>')).addClass('ui-icon '+'ui-icon-closethick').text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$('<span/>').addClass('ui-dialog-title').attr('id',titleId).html(title).prependTo(uiDialogTitlebar);uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection();(options.draggable&&$.fn.draggable&&this._makeDraggable());(options.resizable&&$.fn.resizable&&this._makeResizable());this._createButtons(options.buttons);this._isOpen=false;(options.bgiframe&&$.fn.bgiframe&&uiDialog.bgiframe());(options.autoOpen&&this.open());},destroy:function(){(this.overlay&&this.overlay.destroy());this.uiDialog.hide();this.element.unbind('.dialog').removeData('dialog').removeClass('ui-dialog-content ui-widget-content').hide().appendTo('body');this.uiDialog.remove();(this.originalTitle&&this.element.attr('title',this.originalTitle));},close:function(event){var self=this;if(false===self._trigger('beforeclose',event)){return;}
(self.overlay&&self.overlay.destroy());self.uiDialog.unbind('keypress.ui-dialog');(self.options.hide?self.uiDialog.hide(self.options.hide,function(){self._trigger('close',event);}):self.uiDialog.hide()&&self._trigger('close',event));$.ui.dialog.overlay.resize();self._isOpen=false;},isOpen:function(){return this._isOpen;},moveToTop:function(force,event){if((this.options.modal&&!force)||(!this.options.stack&&!this.options.modal)){return this._trigger('focus',event);}
if(this.options.zIndex>$.ui.dialog.maxZ){$.ui.dialog.maxZ=this.options.zIndex;}
(this.overlay&&this.overlay.$el.css('z-index',$.ui.dialog.overlay.maxZ=++$.ui.dialog.maxZ));var saveScroll={scrollTop:this.element.attr('scrollTop'),scrollLeft:this.element.attr('scrollLeft')};this.uiDialog.css('z-index',++$.ui.dialog.maxZ);this.element.attr(saveScroll);this._trigger('focus',event);},open:function(){if(this._isOpen){return;}
var options=this.options,uiDialog=this.uiDialog;this.overlay=options.modal?new $.ui.dialog.overlay(this):null;(uiDialog.next().length&&uiDialog.appendTo('body'));this._size();this._position(options.position);uiDialog.show(options.show);this.moveToTop(true);(options.modal&&uiDialog.bind('keypress.ui-dialog',function(event){if(event.keyCode!=$.ui.keyCode.TAB){return;}
var tabbables=$(':tabbable',this),first=tabbables.filter(':first')[0],last=tabbables.filter(':last')[0];if(event.target==last&&!event.shiftKey){setTimeout(function(){first.focus();},1);}else if(event.target==first&&event.shiftKey){setTimeout(function(){last.focus();},1);}}));$([]).add(uiDialog.find('.ui-dialog-content :tabbable:first')).add(uiDialog.find('.ui-dialog-buttonpane :tabbable:first')).add(uiDialog).filter(':first').focus();this._trigger('open');this._isOpen=true;},_createButtons:function(buttons){var self=this,hasButtons=false,uiDialogButtonPane=$('<div></div>').addClass('ui-dialog-buttonpane '+'ui-widget-content '+'ui-helper-clearfix');this.uiDialog.find('.ui-dialog-buttonpane').remove();(typeof buttons=='object'&&buttons!==null&&$.each(buttons,function(){return!(hasButtons=true);}));if(hasButtons){$.each(buttons,function(name,fn){$('<button type="button"></button>').addClass('ui-state-default '+'ui-corner-all').text(name).click(function(){fn.apply(self.element[0],arguments);}).hover(function(){$(this).addClass('ui-state-hover');},function(){$(this).removeClass('ui-state-hover');}).focus(function(){$(this).addClass('ui-state-focus');}).blur(function(){$(this).removeClass('ui-state-focus');}).appendTo(uiDialogButtonPane);});uiDialogButtonPane.appendTo(this.uiDialog);}},_makeDraggable:function(){var self=this,options=this.options,heightBeforeDrag;this.uiDialog.draggable({cancel:'.ui-dialog-content',handle:'.ui-dialog-titlebar',containment:'document',start:function(){heightBeforeDrag=options.height;$(this).height($(this).height()).addClass("ui-dialog-dragging");(options.dragStart&&options.dragStart.apply(self.element[0],arguments));},drag:function(){(options.drag&&options.drag.apply(self.element[0],arguments));},stop:function(){$(this).removeClass("ui-dialog-dragging").height(heightBeforeDrag);(options.dragStop&&options.dragStop.apply(self.element[0],arguments));$.ui.dialog.overlay.resize();}});},_makeResizable:function(handles){handles=(handles===undefined?this.options.resizable:handles);var self=this,options=this.options,resizeHandles=typeof handles=='string'?handles:'n,e,s,w,se,sw,ne,nw';this.uiDialog.resizable({cancel:'.ui-dialog-content',alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:options.minHeight,start:function(){$(this).addClass("ui-dialog-resizing");(options.resizeStart&&options.resizeStart.apply(self.element[0],arguments));},resize:function(){(options.resize&&options.resize.apply(self.element[0],arguments));},handles:resizeHandles,stop:function(){$(this).removeClass("ui-dialog-resizing");options.height=$(this).height();options.width=$(this).width();(options.resizeStop&&options.resizeStop.apply(self.element[0],arguments));$.ui.dialog.overlay.resize();}}).find('.ui-resizable-se').addClass('ui-icon ui-icon-grip-diagonal-se');},_position:function(pos){var wnd=$(window),doc=$(document),pTop=doc.scrollTop(),pLeft=doc.scrollLeft(),minTop=pTop;if($.inArray(pos,['center','top','right','bottom','left'])>=0){pos=[pos=='right'||pos=='left'?pos:'center',pos=='top'||pos=='bottom'?pos:'middle'];}
if(pos.constructor!=Array){pos=['center','middle'];}
if(pos[0].constructor==Number){pLeft+=pos[0];}else{switch(pos[0]){case'left':pLeft+=0;break;case'right':pLeft+=wnd.width()-this.uiDialog.outerWidth();break;default:case'center':pLeft+=(wnd.width()-this.uiDialog.outerWidth())/2;}}
if(pos[1].constructor==Number){pTop+=pos[1];}else{switch(pos[1]){case'top':pTop+=0;break;case'bottom':pTop+=wnd.height()-this.uiDialog.outerHeight();break;default:case'middle':pTop+=(wnd.height()-this.uiDialog.outerHeight())/2;}}
pTop=Math.max(pTop,minTop);this.uiDialog.css({top:pTop,left:pLeft});},_setData:function(key,value){(setDataSwitch[key]&&this.uiDialog.data(setDataSwitch[key],value));switch(key){case"buttons":this._createButtons(value);break;case"closeText":this.uiDialogTitlebarCloseText.text(value);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(uiDialogClasses+value);break;case"draggable":(value?this._makeDraggable():this.uiDialog.draggable('destroy'));break;case"height":this.uiDialog.height(value);break;case"position":this._position(value);break;case"resizable":var uiDialog=this.uiDialog,isResizable=this.uiDialog.is(':data(resizable)');(isResizable&&!value&&uiDialog.resizable('destroy'));(isResizable&&typeof value=='string'&&uiDialog.resizable('option','handles',value));(isResizable||this._makeResizable(value));break;case"title":$(".ui-dialog-title",this.uiDialogTitlebar).html(value||'&nbsp;');break;case"width":this.uiDialog.width(value);break;}
$.widget.prototype._setData.apply(this,arguments);},_size:function(){var options=this.options;this.element.css({height:0,minHeight:0,width:'auto'});var nonContentHeight=this.uiDialog.css({height:'auto',width:options.width}).height();this.element.css({minHeight:Math.max(options.minHeight-nonContentHeight,0),height:options.height=='auto'?'auto':Math.max(options.height-nonContentHeight,0)});}});$.extend($.ui.dialog,{version:"1.7.1",defaults:{autoOpen:true,bgiframe:false,buttons:{},closeOnEscape:true,closeText:'close',dialogClass:'',draggable:true,hide:null,height:'auto',maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:'center',resizable:true,show:null,stack:true,title:'',width:300,zIndex:1000},getter:'isOpen',uuid:0,maxZ:0,getTitleId:function($el){return'ui-dialog-title-'+($el.attr('id')||++this.uuid);},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog);}});$.extend($.ui.dialog.overlay,{instances:[],maxZ:0,events:$.map('focus,mousedown,mouseup,keydown,keypress,click'.split(','),function(event){return event+'.dialog-overlay';}).join(' '),create:function(dialog){if(this.instances.length===0){setTimeout(function(){$(document).bind($.ui.dialog.overlay.events,function(event){var dialogZ=$(event.target).parents('.ui-dialog').css('zIndex')||0;return(dialogZ>$.ui.dialog.overlay.maxZ);});},1);$(document).bind('keydown.dialog-overlay',function(event){(dialog.options.closeOnEscape&&event.keyCode&&event.keyCode==$.ui.keyCode.ESCAPE&&dialog.close(event));});$(window).bind('resize.dialog-overlay',$.ui.dialog.overlay.resize);}
var $el=$('<div></div>').appendTo(document.body).addClass('ui-widget-overlay').css({width:this.width(),height:this.height()});(dialog.options.bgiframe&&$.fn.bgiframe&&$el.bgiframe());this.instances.push($el);return $el;},destroy:function($el){this.instances.splice($.inArray(this.instances,$el),1);if(this.instances.length===0){$([document,window]).unbind('.dialog-overlay');}
$el.remove();},height:function(){if($.browser.msie&&$.browser.version<7){var scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(scrollHeight<offsetHeight){return $(window).height()+'px';}else{return scrollHeight+'px';}}else{return $(document).height()+'px';}},width:function(){if($.browser.msie&&$.browser.version<7){var scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);var offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(scrollWidth<offsetWidth){return $(window).width()+'px';}else{return scrollWidth+'px';}}else{return $(document).width()+'px';}},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this);});$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()});}});$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el);}});})(jQuery);

(function($){function toIntegersAtLease(n)
{return n<10?'0'+n:n;}
Date.prototype.toJSON=function(date)
{return this.getUTCFullYear()+'-'+
toIntegersAtLease(this.getUTCMonth())+'-'+
toIntegersAtLease(this.getUTCDate());};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};$.quoteString=function(string)
{if(escapeable.test(string))
{return'"'+string.replace(escapeable,function(a)
{var c=meta[a];if(typeof c==='string'){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+string+'"';};$.toJSON=function(o,compact)
{var type=typeof(o);if(type=="undefined")
return"undefined";else if(type=="number"||type=="boolean")
return o+"";else if(o===null)
return"null";if(type=="string")
{return $.quoteString(o);}
if(type=="object"&&typeof o.toJSON=="function")
return o.toJSON(compact);if(type!="function"&&typeof(o.length)=="number")
{var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i],compact));}
if(compact)
return"["+ret.join(",")+"]";else
return"["+ret.join(", ")+"]";}
if(type=="function"){throw new TypeError("Unable to convert object of type 'function' to json.");}
var ret=[];for(var k in o){var name;type=typeof(k);if(type=="number")
name='"'+k+'"';else if(type=="string")
name=$.quoteString(k);else
continue;var val=$.toJSON(o[k],compact);if(typeof(val)!="string"){continue;}
if(compact)
ret.push(name+":"+val);else
ret.push(name+": "+val);}
return"{"+ret.join(", ")+"}";};$.compactJSON=function(o)
{return $.toJSON(o,true);};$.evalJSON=function(src)
{return eval("("+src+")");};$.secureEvalJSON=function(src)
{var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,'@');filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']');filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered))
return eval("("+src+")");else
throw new SyntaxError("Error parsing JSON, source is not valid.");};})(jQuery);

var JSON;if(!JSON){JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());
;(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}
break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}
break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}
break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}
break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}
break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}
if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}
$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data"in arguments[1])
cache.populate();}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected)
return false;var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}
v+=options.multipleSeparator;}
$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}
function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}
var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)
return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)
currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}};function trimWords(value){if(!value){return[""];}
var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value))
result[i]=$.trim(value);});return result;}
function lastWord(value){if(!options.multiple)
return value;var words=trimWords(value);return words[words.length-1];}
function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length);}};function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);};function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}
else
$input.val("");}});}
if(wasVisible)
$.Autocompleter.Selection(input,input.value.length,input.value.length);};function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}};function request(term,success,failure){if(!options.matchCase)
term=term.toLowerCase();var data=cache.load(term);if(data&&data.length){success(term,data);}else if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{select.emptyList();failure(term);}};function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}
return parsed;};function stopLoading(){$input.removeClass(options.loadingClass);};};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)
s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains;};function add(q,value){if(length>options.cacheLength){flush();}
if(!data[q]){length++;}
data[q]=value;}
function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false)
continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])
stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}
setTimeout(populate,25);function flush(){data={};length=0;}
return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)
return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}
return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}
return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit)
return;element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo((options&&options.resultsParent)?options.resultsParent:document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)
element.css("width",options.width);needsInit=false;}
function target(event){var element=event.target;while(element&&element.tagName!="LI")
element=element.parentNode;if(!element)
return[];return element;}
function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}};function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else if(active>=listItems.size()){active=0;}}
function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}
function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])
continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)
continue;if(typeof formatted=="string")
{var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}
else
{formatted.appendTo(list);}}
listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}
if($.fn.bgiframe)
list.bgiframe();}
return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();if(options.resultsParent){element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width()}).show();}
else{element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show();}
if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);try{selRange.select();}
catch(err){}}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}
try{field.focus();}
catch(err){}};})(jQuery);

(function($){$.fn.hint=function(blurClass){if(!blurClass)blurClass='blur';return this.each(function(){var $input=$(this),title=$input.attr('title'),$form=$(this.form),$win=$(window);function remove(){if(this.value===title&&$input.hasClass(blurClass)){$input.val('').removeClass(blurClass);}}
if(title){$input.blur(function(){if(this.value===''){$input.val(title).addClass(blurClass);}}).focus(remove).blur();$form.submit(remove);$win.unload(remove);}});};})(jQuery);
;(function($){$.fn.extend({minutesago:function(){return this.each(function(){new $.MinAgoSubscriber(this,minAgoTimer);});}});$.MinAgoTimer=function(){var subscribers=[];function subscribe(callback){return(subscribers.push(callback)-1);}
function unsubscribe(subId){subscribers[subId]=null;}
function timeoutElapsed(){var count=subscribers.length;for(var index=0;index!=count;index++){if(subscribers[index])
subscribers[index]();}
setTimeout(timeoutElapsed,60000);}
setTimeout(timeoutElapsed,60000);return{subscribe:subscribe,unsubscribe:unsubscribe};};var minAgoTimer=$.MinAgoTimer();$.MinAgoSubscriber=function(minAgoElt,minAgoTimer){var $minAgoElt=$(minAgoElt);if(!$minAgoElt.children()){return;}
var $minAgoLabel=$($minAgoElt.children()[0]);var pieces=new Array();pieces=$minAgoLabel.text().split(' ');if($minAgoLabel.text().indexOf(":")>0){$minAgoLabel.data("format","time");}
else{$minAgoLabel.data("format","minutes");if(pieces[0]=='<'){$minAgoLabel.data("minutesAgo",parseInt("0"));}
else{$minAgoLabel.data("minutesAgo",parseInt(pieces[0]));}
$minAgoLabel.data("subId",minAgoTimer.subscribe(subscriberCallback));}
function subscriberCallback(){if($minAgoLabel.data("format")=="minutes"){if($minAgoLabel.data("minutesAgo")+1==60){if($minAgoLabel.next()){var time=$minAgoLabel.next().text().split(' ')[0];if($minAgoElt.hasClass('short')){$minAgoLabel.text(time);}
else{$minAgoLabel.text(time+" Today");}
$minAgoLabel.data("format","time");}}
else{$minAgoLabel.text($minAgoLabel.data("minutesAgo")+1+" min ago");$minAgoLabel.data("minutesAgo",$minAgoLabel.data("minutesAgo")+1);}}
else{if($minAgoLabel.next()){var clientDate=new Date();var dateExpression=/([0-9]{1}|[0-9]{2})\/([0-9]{1}|[0-9]{2})\/([0-9]{2})$/;var dateMatch=dateExpression.exec($minAgoLabel.next().text());if(!dateMatch||dateMatch.length==0){return;}
if(clientDate.getDate()!=dateMatch[2]){if($minAgoElt.hasClass('short')){$minAgoLabel.text(dateMatch[0]);}
else{$minAgoLabel.text($minAgoLabel.next().text());}
minAgoTimer.unsubscribe($minAgoLabel.data("subId"));}}}}};})(jQuery);

(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'.',debug:false,updateBeforeSort:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}
this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}
function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}
var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}
if(!p){p=detectParserForColumn(table,cells[i]);}
if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}
list.push(p);}}
if(table.config.debug){log(parsersDebug);}
return list;};function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];}}
return parsers[0];}
function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}
return false;}
function buildCache(table){if(table.config.debug){var cacheTime=new Date();}
var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}
cols.push(i);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}
return cache;};function updateCacheForVisibleElements(table,cache){var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers;for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];var cacheIndex=-1;for(var k=0;k<cache.row.length;k++){if(cache.row[k][0]==c){cacheIndex=k;break;}}
if(cacheIndex>=0){for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}
for(var normalizedIndex=0;normalizedIndex<cache.normalized.length;normalizedIndex++){var it=cache.normalized[normalizedIndex][totalCells];if(it==cacheIndex){cols.push(it);cache.normalized[normalizedIndex]=cols;break;}}}};return cache;};function getElementText(config,node){if(!node)return"";var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;}else{t=node.innerHTML;}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);}else{t=$(node).text();}}
return t;}
function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}
var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}}
if(table.config.appender){table.config.appender(table,rows);}
rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}
applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}
var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0;};$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);}
table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}
return $tableHeaders;};function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}
return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}
function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}
function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}
function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;}else{i=(v==(0||1))?v:0;}
return i;}
function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}
return false;}
function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}
function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}
function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}
function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}
var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}
var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}
dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}
return cache;};function sortText(a,b){return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");if(config.updateBeforeSort){cache=updateCacheForVisibleElements($this[0],cache);}
var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}
config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}
if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}
applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}
if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){var DECIMAL='\\'+config.decimal;var exp=/(^[+]?0(\.0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)\.(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*\.0+$)/;return exp.test($.trim(s));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}
empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}
return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}
return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}
$("tr:visible",table.tBodies[0]).filter(':even').removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(':odd').removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);

(function($){$.extend({tablesorterPager:new function(){function updatePageDisplay(c){var s=$(c.cssPageDisplay,c.container).val((c.page+1)+c.seperator+c.totalPages);$(c.cssPageNumber,c.container).removeClass("selected");$(c.cssPageNumber+":contains('"+(c.page+1)+"')",c.container).addClass("selected");$(c.cssPageList,c.container).val(c.page);if(c.page==0)
$(c.cssPrev,c.container).addClass("disabled");else
$(c.cssPrev,c.container).removeClass("disabled");if(c.page==c.totalPages-1)
$(c.cssNext,c.container).addClass("disabled");else
$(c.cssNext,c.container).removeClass("disabled");}
function setPageSize(table,size){var c=table.config;c.size=size;c.totalPages=Math.ceil(c.totalRows/c.size);c.pagerPositionSet=false;moveToPage(table);fixPosition(table);}
function fixPosition(table){var c=table.config;if(!c.pagerPositionSet&&c.positionFixed){var c=table.config,o=$(table);if(o.offset){c.container.css({top:o.offset().top+o.height()+'px',position:'absolute'});}
c.pagerPositionSet=true;}}
function moveToFirstPage(table){var c=table.config;c.page=0;moveToPage(table);}
function moveToLastPage(table){var c=table.config;c.page=(c.totalPages-1);moveToPage(table);}
function moveToNextPage(table){var c=table.config;c.page++;if(c.page>=(c.totalPages-1)){c.page=(c.totalPages-1);}
moveToPage(table);}
function moveToPrevPage(table){var c=table.config;c.page--;if(c.page<=0){c.page=0;}
moveToPage(table);}
function moveToPage(table,page){var c=table.config;if(page!=null&&!isNaN(page))
c.page=page;if(c.page<0||c.page>(c.totalPages-1)){c.page=0;}
$(table).trigger("pagingStart");renderTable(table,c.rowsCopy);$(table).trigger("pagingEnd");}
function renderTable(table,rows){var c=table.config;var l=rows.length;var s=(c.page*c.size);var e=(s+c.size);if(e>rows.length){e=rows.length;}
var tableBody=$(table.tBodies[0]);$.tablesorter.clearTableBody(table);for(var i=s;i<e;i++){var o=rows[i];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}
fixPosition(table,tableBody);$(table).trigger("applyWidgets");if(c.page>=c.totalPages){moveToLastPage(table);}
updatePageDisplay(c);}
this.appender=function(table,rows){var c=table.config;c.rowsCopy=rows;c.totalRows=rows.length;c.totalPages=Math.ceil(c.totalRows/c.size);renderTable(table,rows);};this.defaults={size:10,offset:0,page:0,totalRows:0,totalPages:0,container:null,cssNext:'.next',cssPrev:'.prev',cssFirst:'.first',cssLast:'.last',cssPageNumber:'.pageNumber',cssPageList:'.pageNumberList',cssPageDisplay:'.pagedisplay',cssPageSize:'.pagesize',seperator:"/",positionFixed:true,appender:this.appender};this.construct=function(settings){return this.each(function(){config=$.extend(this.config,$.tablesorterPager.defaults,settings);var table=this,pager=config.container;$(this).trigger("appendCache");var pagesize=$(".pagesize",pager)
if(pagesize&&pagesize.val()&&!isNaN(pagesize.val()))
config.size=parseInt(pagesize.val());$(config.cssFirst,pager).click(function(e){moveToFirstPage(table);e.preventDefault();});$(config.cssNext,pager).click(function(e){moveToNextPage(table);e.preventDefault();});$(config.cssPrev,pager).click(function(e){moveToPrevPage(table);e.preventDefault();});$(config.cssLast,pager).click(function(e){moveToLastPage(table);e.preventDefault();});$(config.cssPageSize,pager).change(function(e){setPageSize(table,parseInt($(this).val()));e.preventDefault();});$(config.cssPageNumber,pager).click(function(e){e.preventDefault();var number=parseInt($(this).text());if(!isNaN(number))
moveToPage(table,number-1);});$(config.cssPageList,pager).change(function(e){e.preventDefault();var number=parseInt($(this).val());if(!isNaN(number))
moveToPage(table,number);});});};}});$.fn.extend({tablesorterPager:$.tablesorterPager.construct});})(jQuery);

(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}
var validator=$.data(this[0],'validator');if(validator){return validator;}
validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}
this.submit(function(event){if(validator.settings.debug)
event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)
settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)
return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!=Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)
this.element(element);else if(element.parentNode.name in this.submitted)
this.element(element.parentNode);},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0]);}
$(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate);if(this.settings.invalidHandler)
$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())
$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)
$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)
count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))
return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}
var rules=$(element).rules();var dependencyMismatch=false;for(var method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method",e);throw e;}}
if(dependencyMismatch)
return;if(this.objectLength(rules))
this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)
return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)
return arguments[i];}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)
toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length)
this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}
if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))
return this.findByName(element.name).filter(':checked').length;}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)
this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(var method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
if(rules.messages){delete rules.messages;}
return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))
return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))
return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))
return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])
this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(this.pending[element.name]){return"pending";}
if(previous.old===value){return previous.valid;}
previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))
return"dependency-mismatch";if(/[^0-9-]+/.test(value))
return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)
nDigit-=9;}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return(pendingRequests[port]=ajax.apply(this,arguments));}
return ajax.apply(this,arguments);};}})(jQuery);;(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});};$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);
;(function($){var o=$.scrollTo=function(a,b,c){o.window().scrollTo(a,b,c)};o.defaults={axis:'y',duration:1};o.window=function(){return $($.browser.safari?'body':'html')};$.fn.scrollTo=function(l,m,n){if(typeof m=='object'){n=m;m=0}n=$.extend({},o.defaults,n);m=m||n.speed||n.duration;n.queue=n.queue&&n.axis.length>1;if(n.queue)m/=2;n.offset=j(n.offset);n.over=j(n.over);return this.each(function(){var a=this,b=$(a),t=l,c,d={},w=b.is('html,body');switch(typeof t){case'number':case'string':if(/^([+-]=)?\d+(px)?$/.test(t)){t=j(t);break}t=$(t,this);case'object':if(t.is||t.style)c=(t=$(t)).offset()}$.each(n.axis.split(''),function(i,f){var P=f=='x'?'Left':'Top',p=P.toLowerCase(),k='scroll'+P,e=a[k],D=f=='x'?'Width':'Height';if(c){d[k]=c[p]+(w?0:e-b.offset()[p]);if(n.margin){d[k]-=parseInt(t.css('margin'+P))||0;d[k]-=parseInt(t.css('border'+P+'Width'))||0}d[k]+=n.offset[p]||0;if(n.over[p])d[k]+=t[D.toLowerCase()]()*n.over[p]}else d[k]=t[p];if(/^\d+$/.test(d[k]))d[k]=d[k]<=0?0:Math.min(d[k],h(D));if(!i&&n.queue){if(e!=d[k])g(n.onAfterFirst);delete d[k]}});g(n.onAfter);function g(a){b.animate(d,m,n.easing,a&&function(){a.call(this,l)})};function h(D){var b=w?$.browser.opera?document.body:document.documentElement:a;return b['scroll'+D]-b['client'+D]}})};function j(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);

jQuery.fn.extend({everyTime:function(interval,label,fn,times,belay){return this.each(function(){jQuery.timer.add(this,interval,label,fn,times,belay);});},oneTime:function(interval,label,fn){return this.each(function(){jQuery.timer.add(this,interval,label,fn,1);});},stopTime:function(label,fn){return this.each(function(){jQuery.timer.remove(this,label,fn);});}});jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{'ms':1,'cs':10,'ds':100,'s':1000,'das':10000,'hs':100000,'ks':1000000},timeParse:function(value){if(value==undefined||value==null)
return null;var result=this.regex.exec(jQuery.trim(value.toString()));if(result[2]){var num=parseInt(result[1],10);var mult=this.powers[result[2]]||1;return num*mult;}else{return value;}},add:function(element,interval,label,fn,times,belay){var counter=0;if(jQuery.isFunction(label)){if(!times)
times=fn;fn=label;label=interval;}
interval=jQuery.timer.timeParse(interval);if(typeof interval!='number'||isNaN(interval)||interval<=0)
return;if(times&&times.constructor!=Number){belay=!!times;times=0;}
times=times||0;belay=belay||false;if(!element.$timers)
element.$timers={};if(!element.$timers[label])
element.$timers[label]={};fn.$timerID=fn.$timerID||this.guid++;var handler=function(){if(belay&&this.inProgress)
return;this.inProgress=true;if((++counter>times&&times!==0)||fn.call(element,counter)===false)
jQuery.timer.remove(element,label,fn);this.inProgress=false;};handler.$timerID=fn.$timerID;if(!element.$timers[label][fn.$timerID])
element.$timers[label][fn.$timerID]=window.setInterval(handler,interval);if(!this.global[label])
this.global[label]=[];this.global[label].push(element);},remove:function(element,label,fn){var timers=element.$timers,ret;if(timers){if(!label){for(label in timers)
this.remove(element,label,fn);}else if(timers[label]){if(fn){if(fn.$timerID){window.clearInterval(timers[label][fn.$timerID]);delete timers[label][fn.$timerID];}}else{for(var fn in timers[label]){window.clearInterval(timers[label][fn]);delete timers[label][fn];}}
for(ret in timers[label])break;if(!ret){ret=null;delete timers[label];}}
for(ret in timers)break;if(!ret)
element.$timers=null;}}}});if(jQuery.browser.msie)
jQuery(window).one("unload",function(){var global=jQuery.timer.global;for(var label in global){var els=global[label],i=els.length;while(--i)
jQuery.timer.remove(els[i],label);}});

(function($){$.fn.jCarouselLiteSlide=function(o){o=$.extend({btnPrev:null,btnNext:null,btnPause:null,btnGo:null,nextTitleList:null,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,pause:false,beforeStart:null,afterEnd:null},o||{});return this.each(function(){var running=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";var div=$(this),ul=$("ul:first",div),tLi=$("ul:first>li",div),tl=tLi.size(),v=o.visible;var intervalId=0;var pauseClicked=false;if(o.circular){ul.prepend(tLi.slice(tl-v).clone()).append(tLi.slice(0,v).clone());o.start+=v;}
var li=$("ul:first>li",div),itemLength=li.size(),curr=o.start;div.css("visibility","visible");li.css({overflow:"hidden",float:o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative","list-style-type":"none"});div.css({overflow:"hidden",position:"relative",left:"0px"});var liSize=o.vertical?height(li):width(li);var ulSize=liSize*itemLength;var divSize=liSize*v;var maxHeight=0;li.each(function(){if($(this).height()>maxHeight)
maxHeight=$(this).height();});divSize=div.closest("div[class$='wide']").width();li.css({width:li.width(),height:maxHeight});ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));if(o.btnPrev)
$(o.btnPrev).click(function(){pauseClicked=false;setPauseBtnState();return go(curr-o.scroll);});if(o.btnNext)
$(o.btnNext).click(function(){pauseClicked=false;setPauseBtnState();return go(curr+o.scroll);});if(o.btnGo)
$.each(o.btnGo,function(i,val){$(val).click(function(){pauseClicked=false;setPauseBtnState();return go(o.circular?o.visible+i:i);});});if(o.btnPause)
$(o.btnPause).click(function(){pauseClicked=!pauseClicked;setPauseBtnState();return togglePause();});if(o.nextTitleList){div.find("div.nextpanel").html($(li[curr+o.visible]).find("span.title").html());}
if(o.auto)
intervalId=setInterval(function(){go(curr+o.scroll);},o.auto);if(o.pause)
div.hover(function(){if(!pauseClicked&&intervalId!=0)
return togglePause();},function(){if(!pauseClicked&&intervalId==0)
return togglePause();});function vis(){return li.slice(curr).slice(0,v);};function setPauseBtnState(){if(o.btnPause){if(pauseClicked)
$(o.btnPause).addClass("on");else
$(o.btnPause).removeClass("on");}}
function togglePause(){if(!running){if(intervalId!=0){div.data("timeEnd",now());clearInterval(intervalId);intervalId=0;}
else if(o.auto){var remainder=div.data("remainder");if(remainder==undefined){remainder=(o.auto)-(div.data("timeEnd")-div.data("timeStart"));}
else{remainder-=(div.data("timeEnd")-div.data("timeStart"));}
div.removeData("timeEnd");div.data("timeStart",now());div.data("remainder",remainder);intervalId=setInterval(function(){go(curr+o.scroll);},remainder);}}
return false;}
function go(to){if(!running){if(o.beforeStart)
o.beforeStart.call(this,vis());runningTotal=0;clearInterval(intervalId);if(o.circular){if(to<=o.start-v-1){curr=curr+(itemLength-(v*2));ul.css(animCss,-(curr*liSize)+"px");curr=curr-o.scroll;}else if(to>=itemLength-v+1){curr=curr-(itemLength-(v*2));ul.css(animCss,-(curr*liSize)+"px");curr=curr+o.scroll;}else curr=to;}
else{if((to<0)&&(curr==0))
return;if((to>itemLength-v)&&(curr==(itemLength-v)))
return;if(to<0)
curr=0;else if(to>itemLength-v)
curr=itemLength-v;else
curr=to;}
running=true;ul.animate(animCss=="left"?{left:-(curr*liSize)}:{top:-(curr*liSize)},o.speed,o.easing,function(){if(o.afterEnd)
o.afterEnd.call(this,vis());if(o.auto){div.data("timeStart",now());div.removeData("timeEnd");div.removeData("remainder");intervalId=setInterval(function(){go(curr+o.scroll);},o.auto);}
if(o.nextTitleList){var index=(curr+o.visible)%itemLength;if(index==0){index=(o.visible*2);}
div.find("div.nextpanel").html($(li[index]).find("span.title").html());}
running=false;});if(!o.circular){$(o.btnPrev+","+o.btnNext).removeClass("disabled");$((curr-o.scroll<0&&o.btnPrev)||(curr+o.scroll>itemLength-v&&o.btnNext)||[]).addClass("disabled");}}
return false;};});};function css(el,prop){return parseInt($.css(el[0],prop))||0;};function width(el){return el[0].offsetWidth+css(el,'marginLeft')+css(el,'marginRight');};function height(el){return el[0].offsetHeight+css(el,'marginTop')+css(el,'marginBottom');};function now(){return(new Date()).getTime();};})(jQuery);

(function($){$.fn.marquee=function(klass){var newMarquee=[],last=this.length;function getReset(newDir,marqueeRedux,marqueeState){var behavior=marqueeState.behavior,width=marqueeState.width,dir=marqueeState.dir;var r=0;if(behavior=='alternate'){r=newDir==1?marqueeRedux[marqueeState.widthAxis]-(width*2):width;}else if(behavior=='slide'){if(newDir==-1){r=dir==-1?marqueeRedux[marqueeState.widthAxis]:width;}else{r=dir==-1?marqueeRedux[marqueeState.widthAxis]-(width*2):0;}}else{r=newDir==-1?marqueeRedux[marqueeState.widthAxis]:0;}
return r;}
function animateMarquee(){var i=newMarquee.length,marqueeRedux=null,$marqueeRedux=null,marqueeState={},newMarqueeList=[],hitedge=false;while(i--){marqueeRedux=newMarquee[i];$marqueeRedux=$(marqueeRedux);marqueeState=$marqueeRedux.data('marqueeState');if($marqueeRedux.data('paused')!==true){marqueeRedux[marqueeState.axis]+=(marqueeState.scrollamount*marqueeState.dir);hitedge=marqueeState.dir==-1?marqueeRedux[marqueeState.axis]<=getReset(marqueeState.dir*-1,marqueeRedux,marqueeState):marqueeRedux[marqueeState.axis]>=getReset(marqueeState.dir*-1,marqueeRedux,marqueeState);if((marqueeState.behavior=='scroll'&&marqueeState.last==marqueeRedux[marqueeState.axis])||(marqueeState.behavior=='alternate'&&hitedge&&marqueeState.last!=-1)||(marqueeState.behavior=='slide'&&hitedge&&marqueeState.last!=-1)){if(marqueeState.behavior=='alternate'){marqueeState.dir*=-1;}
marqueeState.last=-1;$marqueeRedux.trigger('stop');marqueeState.loops--;if(marqueeState.loops===0){if(marqueeState.behavior!='slide'){marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir,marqueeRedux,marqueeState);}else{marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir*-1,marqueeRedux,marqueeState);}
$marqueeRedux.trigger('end');}else{newMarqueeList.push(marqueeRedux);$marqueeRedux.trigger('start');marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir,marqueeRedux,marqueeState);}}else{newMarqueeList.push(marqueeRedux);}
marqueeState.last=marqueeRedux[marqueeState.axis];$marqueeRedux.data('marqueeState',marqueeState);}else{newMarqueeList.push(marqueeRedux);}}
newMarquee=newMarqueeList;if(newMarquee.length){setTimeout(animateMarquee,50);}}
this.each(function(i){var $marquee=$(this),width=$marquee.attr('width')||$marquee.width(),height=$marquee.attr('height')||$marquee.height(),$marqueeRedux=$marquee.after('<div '+(klass?'class="'+klass+'" ':'')+'style="display: block-inline; width: '+width+'px; height: '+height+'px; overflow: hidden;"><div style="float: left; white-space: nowrap;">'+$marquee.html()+'</div></div>').next(),marqueeRedux=$marqueeRedux.get(0),hitedge=0,direction=($marquee.attr('direction')||'left').toLowerCase(),marqueeState={dir:/down|right/.test(direction)?-1:1,axis:/left|right/.test(direction)?'scrollLeft':'scrollTop',widthAxis:/left|right/.test(direction)?'scrollWidth':'scrollHeight',last:-1,loops:$marquee.attr('loop')||-1,scrollamount:$marquee.attr('scrollamount')||this.scrollAmount||2,behavior:($marquee.attr('behavior')||'scroll').toLowerCase(),width:/left|right/.test(direction)?width:height};if($marquee.attr('loop')==-1&&marqueeState.behavior=='slide'){marqueeState.loops=1;}
$marquee.remove();if(/left|right/.test(direction)){$marqueeRedux.find('> div').css('padding','0 '+width+'px');}else{$marqueeRedux.find('> div').css('padding',height+'px 0');}
$marqueeRedux.bind('stop',function(){$marqueeRedux.data('paused',true);}).bind('pause',function(){$marqueeRedux.data('paused',true);}).bind('start',function(){$marqueeRedux.data('paused',false);}).bind('unpause',function(){$marqueeRedux.data('paused',false);}).data('marqueeState',marqueeState);newMarquee.push(marqueeRedux);marqueeRedux[marqueeState.axis]=getReset(marqueeState.dir,marqueeRedux,marqueeState);$marqueeRedux.trigger('start');if(i+1==last){animateMarquee();}});return $(newMarquee);};}(jQuery));

(function($){$.fn.customFadeTo=function(speed,opacity,callback){$(this).fadeTo(speed,opacity,function(){if(jQuery.browser.msie)
$(this).get(0).style.removeAttribute('filter');if(callback!=undefined)
callback();});if(jQuery.browser.msie)
$(this).get(0).style.removeAttribute('filter');};})(jQuery);

$.extend(MarketWatch.UI,function(){$(function(){$('#clear-recent-quotes-tab').click(_clearRecentQuotesTab);});var breakIframe=false;var _quoteroot="/investing/";var _searchroot="/search";var _autocompletesearch=function(data,acresults){if(!data[1]){var term=data[0].replace(/^\s+|\s+$/g,"").replace(/,+/gi,",").toLowerCase().replace(/,$|\.,$|:$/,"");var search=false;if(term.length==0||!acresults)
search=true;else{var splitTerms=term.split(",");for(var i=0;i<splitTerms.length;i++){var isInSymbols=false;var regex=/^ABC$|^BAY$|^EGAN$|^AIR$|^ACME$|^GOLD$|^COST$|^KEY$|^GAS$|^CHINA$|^BEER$|^DRUG$|^OIL$|^DOG$|^CPI$|^GDP$|^DNA$|^ETF$|^JAZZ$|^ETFS$|^AUTO$|^FED$|^TAXES$|^OBAMA$|^G20$/i;$("div.ticker",acresults).each(function(){isInSymbols=isInSymbols||($(this).html().toLowerCase().replace(/<\/?strong>/gi,"")===splitTerms[i]);});if(splitTerms[i].length>5&&!isInSymbols){search=true;break;}
var match=splitTerms[i].match(regex);if(match!=null&&match.length>0&&match[0].length>0){search=true;break;}
var match=splitTerms[i].match(/\&|\%/);if(match!=null&&match.length>0&&match[0].length>0){search=true;break;}}}
if(search){var link="";if($("#hat_input").data("state")=="searched"){link="&Link=MW_SearchAC";}
var whereToGo=(_searchroot?MarketWatch.getBaseUrl()+_searchroot:"http://"+document.domain+"/search")+"?q="+encodeURIComponent(term)+link;if(!breakIframe)
window.location=whereToGo;else
window.parent.location=whereToGo;}
else{_doQuoteRedirect(term);}}
else{var path=data[2];if(path.indexOf('http://')!=0){if(path[0]!='/')
path='/'+path;path="http://"+location.host+path;}
if(!breakIframe)
window.location=path;else
window.parent.location=path;}};var _symbolOnlySearch=function(term,parentContainer,action,link){term=term.replace(/^\s+|\s+$/g,"").replace(/,+/gi,",").toLowerCase().replace(/,$|\.,$/,"");if(term.length==0)
if(parentContainer&&parentContainer.length>0){MarketWatch.UI.showMessage(parentContainer.removeClass("successmessage failmessage").addClass("failmessage"),"Please enter a symbol","up");}
else{alert("Please enter a symbol");}
else{_doQuoteRedirect(term,action,link);}};var _doQuoteRedirect=function(term,action,link){term=term.replace(/\*/,"");if(action&&action!=""){action="/"+action;}else{action="";}
if(term.match(",")||/aux$|nul$|prn$|bin$|con$/gi.test(term)){var whereToGo=MarketWatch.getBaseUrl()+_quoteroot+"multi?tickers="+term.replace(/ +/gi,",").replace(/,+/gi,",");if(!breakIframe)
window.location=whereToGo;else
window.parent.location=whereToGo;}
else{var cc="";if(term.indexOf(":")>0){var split=term.split(":");cc="?countryCode="+split[0];term=split[1];}
var whereToGo=MarketWatch.getBaseUrl()+_quoteroot+"stock/"+encodeURIComponent(term).replace(/ +/gi,",").replace(/,+/gi,",")+action+cc;if(link)whereToGo=link;if(!breakIframe)
window.location=whereToGo;else
window.parent.location=whereToGo;}};var _deferredQuoteSubscribe=function(parentContainer){parentContainer.find(".bgQuoteDeferred").each(function(){var $this=$(this);var bgChannel=$this.find(".bgChannel").text();var bgRealtimeChannel=$this.find(".bgRealtimeChannel").text();if(bgChannel||bgRealtimeChannel){$(".bgCurrencyFormatting").data("bgFormat",{last:"#,###.0000",change:"#,###.0000",percentChange:"#,###.0000%"});BlueGrass.Quote.bindElement(this,bgChannel,bgRealtimeChannel,{sequence:null,number:1},{sequence:null,number:1});}});};var _acHighlight=function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/i,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","i"),"<strong>$1</strong>");};var _acFormat=function(data,i,n,value){if(data[0]&&data[1]){if(data[1]=="s"){var flagclass="";if(data[3].toLowerCase()!=""&&data[3].toLowerCase()!="us")
flagclass="country_flag_"+data[3];return'<div class="ticker">'+data[0]+'</div><div class="country"><div class="'+flagclass+'"></div></div><div class="company">'+data[4]+'</div><div class="clear"></div>';}
else if(data[1]=="q"){return'<div class="topic">'+data[0]+'</div><div class="topictype">Search news</div>';}
else if(data[1]=="l"){return data[0];}
else if(data[1]=="t"){return'<div class="topic">'+data[0]+'</div><div class="topictype">'+data[3]+'</div>';}}
else{return $("<div/>").text(data[1]);}};var _acSymbolOnlyHighlight=function(value,term){return value.replace(new
RegExp("(?![^&;]+;)(?!<[^<>]*)("+
term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/i,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","i"),"<strong>$1</strong>");};var _acSymbolOnlyFormat=function(data,i,n,value){if(data[0]&&data[1]&&data[2]){return'<span class="ticker">'+
data[0]+'</span><span class="country">'+
data[1]+'</span><span class="company">'+
data[2]+'</span>';}else if(data[0]){return data[0];}else{return $("<div/>").text(data[1]);}};var _clearTimer=function(element){var tid=element.data("tid");if(tid){clearTimeout(tid);element.data("tid",null);}};var _menuClose=function(element){var $element=$(element);$element.removeClass("active");};var _menuDelayClose=function(element){var $element=$(element);_clearTimer($element);tid=setTimeout(function(){_menuClose(element);},500);$element.data("tid",tid);};var _menuShow=function(element){var $element=$(element);_clearTimer($element);$element.addClass("active");};var _updateMarketOverview=function(rangeText,chart){var props={time:"1dy",freq:"5mi"};switch(jQuery.trim(rangeText)){case"1 Day":props={time:"1dy",freq:"5mi"};break;case"5 Days":props={time:"5dy",freq:"15mi"};break;case"1 Month":props={time:"1mo",freq:"1dy"};break;case"3 Months":props={time:"3mo",freq:"1dy"};break;case"6 Months":props={time:"6mo",freq:"1dy"};break;case"1 Year":props={time:"1yr",freq:"1dy"};break;case"2 Years":props={time:"2yr",freq:"3dy"};break;}
chart.UpdateAllCharts(props.time,props.freq);};var _updateChanges=function(dataField){$("#marketoverview .data").each(function(index,element){_customChange(element,dataField);});};var _customChange=function(element,dataField,bg){element=$(element);var data=element.parent(".tickerrow").data(dataField);var decimals=element.parent(".tickerrow").data("decimal");var last=element.find(".bgLast");var current=parseFloat(last.text().replace(/,/g,""));if(undefined!=current&&undefined!=data&&undefined!=decimals&&data!=0){var newChange=current-data;var newPercent=(newChange/data)*100;var prefix="";if(newChange>0){prefix="+";element.removeClass("down").removeClass("neutral").addClass("up");}
else if(newChange<0){element.removeClass("up").removeClass("neutral").addClass("down");}
else{element.removeClass("down").removeClass("up").addClass("neutral");}
element.find(".change").text(prefix+newChange.toFixed(decimals));element.find(".changepercent").text(Math.abs(newPercent).toFixed(2)+"%");}};var _wireupRangeMenu=function(rangeMenu,chart){rangeMenu.hover(function(){_menuShow(this);},function(){_menuDelayClose(this);});$(".range_menu li",rangeMenu).hover(function(){$(this).addClass("hover");},function(){$(this).removeClass("hover");}).click(function(){_updateMarketOverview($(this).text(),chart);rangeMenu.trigger("rangeChange",{range:$(this).text()});_menuClose(rangeMenu);});rangeMenu.bind("rangeChange",function(event,data){var changeElements=$("#marketoverview .bgChange");if(changeElements.length>0){changeElements.removeClass("bgChange");$("#marketoverview .bgPercentChange").removeClass("bgPercentChange");$("#marketoverview .data").bind("bgTick",function(bg){_customChange(this,rangeMenu.data("field"),bg);});}
var dataField="1day";switch(data.range){case"5 Days":dataField="1week";break;case"1 Month":dataField="4week";break;case"3 Months":dataField="13week";break;case"6 Months":dataField="26week";break;case"1 Year":dataField="52week";break;case"2 Years":dataField="104week";break;}
rangeMenu.data("field",dataField);_updateChanges(dataField);});};var _bindDropLists=function(parentContainer){if(!parentContainer)
parentContainer=document;$("div.droplist",parentContainer).hover(function(){_menuShow(this);},function(){_menuDelayClose(this);});$("div.droplist li",parentContainer).hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}).click(function(){$(this).parent().prev().text($(this).text());_menuClose($(this).parent().parent());$(this).siblings().show();$(this).hide();});};var _bindTabContainers=function(parentContainer,target){if(!parentContainer)
parentContainer=document;if(!target)
target="div.block div.tabs";$(target,parentContainer).mouseover(_bindTabEvents);$("div.block.marketblock div.tabpane",parentContainer).mouseover(_bindTickerRowEvents);};var _bindTabEvents=function(e){e.preventDefault();var container=$(this);container.unbind("mouseover");container.find(".tab").click(function(e){e.preventDefault();$(this).addClass("selected").siblings().removeClass("selected");$("#"+this.id+"page").addClass("selected").siblings().removeClass("selected");var page=$("#"+$(this).attr("id")+"page");_deferredQuoteSubscribe(page);var rows=$("#"+this.id+"page").find(".tickerrow");if(rows.length>0){$(rows[0]).addClass("selected").siblings().removeClass("selected");}});};var _bindTabContainerEvents=function(container){container.find(".tab").click(function(e){e.preventDefault();$(this).addClass("selected").siblings().removeClass("selected");$("#"+this.id+"page").addClass("selected").siblings().removeClass("selected");var page=$("#"+$(this).attr("id")+"page");_deferredQuoteSubscribe(page);});};var _bindTickerRowEvents=function(e){e.preventDefault();var container=$(this);container.unbind("mouseover");container.find(".tabpage .tickerrow").mouseover(function(e){$(this).addClass("selected").siblings().removeClass("selected");});};var _clearRecentQuotesTab=function(e){var cookieName="recentquotes";document.cookie=cookieName+"=";$('#recent-quotes-results-cont').hide();$('#recent-quotes-noresults-text').show();e.preventDefault();};$(function(){$("#hat_input").hint("hat_unused").autocomplete(MarketWatch.getBaseUrl()+"/common/autocomplete",{width:300,max:0,scroll:false,selectFirst:false,delay:300,cacheLength:0,resultsClass:"ac_results ac_hat_results",extraParams:{calltype:0},highlight:_acHighlight,formatItem:_acFormat}).result(function(e,data,formatted){e.preventDefault();$.data(this,"state","searched");_autocompletesearch(data,$("div.ac_hat_results"));}).focus(function(){if($(this).hasClass("hat_unused"))
$(this).removeClass("hat_unused").val("");}).keydown(function(e){if(e.keyCode==13&&$.data(this,"state")!="searched"){e.preventDefault();var term=$(this).val();_autocompletesearch([term],$("div.ac_hat_results"));}});$("#hat_button").attr("onclick","").click(function(e){e.preventDefault();var term=$('#hat_input').val();if(term=="Enter Symbols or Keywords")
term="";_autocompletesearch([term],$("div.ac_hat_results"));});$("#endcap div.footbar input.text").keypress(function(e){if(e.which==13){e.preventDefault();var term=$('#footer_input').val();_autocompletesearch([term]);}}).focus(function(){if($(this).hasClass("unused"))
$(this).removeClass("unused").val("");}).blur(function(){if($(this).val()===""){$(this).addClass("unused").val("Enter Symbols or Keywords");}});$("#endcap div.footbar input.button").click(function(e){e.preventDefault();var term=$('#footer_input').val();if(term=="Enter Symbols or Keywords")
term="";_autocompletesearch([term]);});if($("#distantheadercontent").length>0){$("#hat_fb_button,#hat_twt_button").click(function(){$("#topchrome").addClass("movetotop");if(!MarketWatch.UI.hatSocialHook){if(window.addEventListener){window.addEventListener("click",function(){$("#topchrome").removeClass("movetotop").val("");},false);}
else{document.attachEvent("onclick",function(){$("#topchrome").removeClass("movetotop").val("");});}
MarketWatch.UI.hatSocialHook=1;}});}});return{search:function(term){_autocompletesearch([term]);},createSymbolOnlyAutoComplete:function(element,resultsClass,resultsParent,onlyShowSymbols){return element.autocomplete(MarketWatch.getBaseUrl()+"/common/autocomplete",{width:300,max:0,scroll:false,selectFirst:false,delay:150,cacheLength:0,resultsClass:"ac_results "+(resultsClass?resultsClass:""),extraParams:{calltype:1,symbolsOnly:onlyShowSymbols?"true":""},highlight:_acHighlight,formatItem:_acFormat,resultsParent:resultsParent})},performSymbolSearch:function(term,inputParent,action,link){_symbolOnlySearch(term,inputParent,action,link);},bindRangeMenu:function(rangeMenuBase,chart){_wireupRangeMenu(rangeMenuBase,chart);},bindTabs:function(parentContainer,target){_bindTabContainers(parentContainer,target);},forceTabsBinding:function(parentContainer){_bindTabContainerEvents(parentContainer);},setBreakIframe:function(shouldBreak){breakIframe=shouldBreak;},bindDropLists:function(parentContainer){_bindDropLists(parentContainer);},showMessage:function(parentElement,text,direction){var $display=$(parentElement).append("<div style='display:none' class='message'>"+text+"</div>").find(".message");$display.css("top","-"+$display.height()+"px");$display.show("slide",{direction:direction},500,function(){setTimeout(function(){$display.hide("slide",{direction:direction},500,function(){$display.remove();})},2000);});},flashMessage:function(parentElement,text,classes){if($(parentElement).find("span.flashmessage").length>0){clearTimeout(parseInt($(parentElement).attr("data-message-timeout")));$(parentElement).find("span.flashmessage").remove();}
var $message=$(parentElement).append('<span class="flashmessage'+(typeof(classes)!="undefined"?' '+classes:'')+'">'+text+'</span>').find(".flashmessage");var timeout=setTimeout(function(){$message.fadeOut(function(){$message.remove();});},3000);$(parentElement).attr("data-message-timeout",timeout);},addToPortfolio:function(ticker,link){if(!MarketWatch.Member.isMktwMember()){MarketWatch.Member.startMktwJitLogin(window.location);return;}
var data=$.toJSON([{ticker:ticker.toUpperCase(),type:"long",basis:0,shares:0,tags:["added-symbols"]}]);var $link=$(link);var proxyPath="/proxy/http/www.marketwatch.com";proxyPath="";$.ajax({type:"POST",url:MarketWatch.getBaseUrl()+proxyPath+"/portfoliostore/default.aspx",data:("action=ADDHOLDING&json="+data).replace(/ /,""),dataType:"json",success:function(data){$link.removeClass("successmessage failmessage");if(data.success==true){$link.addClass("successmessage");MarketWatch.UI.showMessage($link,"Added to your portfolio","down");}else{$link.addClass("failmessage");MarketWatch.UI.showMessage($link,"You must first create a portfolio","down");}},error:function(){$link.removeClass("successmessage");$link.addClass("failmessage");MarketWatch.UI.showMessage($link,"Error adding to your portfolio","down");}});}};}());

$.extend(MarketWatch.Navigation,function(){var _$navigation;var _showTimeoutId;var _showDelay=500;var _$showing=null;var _hideTimeoutId;var _hideDelay=500;var _settings={dropdownsEnabled:true,fixedTopNav:true,fixedSubNav:true,initShowDelay:500,initHideDelay:500};var _positionNavigation=function(){if($('#sitenavplaceholder').length&&($(window).scrollTop()>=$("#sitenavplaceholder").offset().top)){_$navigation.addClass("fixed");}
else{_$navigation.removeClass("fixed");}};var _positionExpandedNavigation=function($superItem){$superItem.css("visibility","hidden").show();var $nonchrome=$("#nonchrome");var offset=($superItem.offset().left+$superItem.width()+8)-($nonchrome.offset().left+$nonchrome.width());if(offset>0)
$superItem.css({left:-(offset)});if(!$superItem.parent().hasClass("expanded"))
$superItem.hide();$superItem.css("visibility","visible");};var _switchTab=function($selectedTab,$selectedPage){$selectedTab.addClass("selected").siblings().removeClass("selected");$selectedPage.addClass("selected").siblings().removeClass("selected");};var _bindTabs=function($menuItem,$superItem){$superItem.find("div.tabs .tab").click(function(e){e.preventDefault();var $tab=$(this);var $page=$("#"+this.id+"page");if($page.length===0){$.ajax({url:MarketWatch.getBaseUrl()+"/sitestructure/navigation/expandednavchunk",data:{path:($menuItem.attr("data-canonical")?$menuItem.attr("data-canonical"):$menuItem.children("a").attr("href")).replace(MarketWatch.getBaseUrl(),""),tab:this.id},success:function(data){$page=$superItem.find(".tabpane").append(data).children("div.tabpage").last();_switchTab($tab,$page);}});}
else{_switchTab($tab,$page);}});};var _getExpandedMenu=function($menuItem){$menuItem.attr("data-status","requested");var url=MarketWatch.getBaseUrl()+"/sitestructure/navigation/expandednav";if($menuItem.attr("data-canonical")&&$menuItem.attr("data-canonical").indexOf(MarketWatch.getBaseUrl()+"/game")===0){url=MarketWatch.getBaseUrl()+"/game/navigation/expandednav";}
$.ajax({url:url,data:{path:($menuItem.attr("data-canonical")?$menuItem.attr("data-canonical"):$menuItem.children("a").attr("href")).replace(MarketWatch.getBaseUrl(),"")},success:function(data){$menuItem.append(data);$menuItem.attr("data-status","loaded");$superItem=$menuItem.children("div.supernav");_positionExpandedNavigation($superItem);_bindTabs($menuItem,$superItem);_setupLogin($superItem);_setupTracking($menuItem);}});_showTimeoutId=setTimeout(function(){_showExpandedMenu($menuItem);},_showDelay/2);};var _showExpandedMenu=function($menuItem){if($menuItem){_hideExpandedMenu(_$showing);$menuItem.addClass("expanded").find("div.supernav").show();_$showing=$menuItem;}};var _hideExpandedMenu=function($menuItem){if($menuItem){$menuItem.removeClass("expanded").find("div.supernav").hide();}};var _setupLogin=function($superItem){$superItem.find("div.join a.login").click(function(e){e.preventDefault();_hideExpandedMenu($superItem.parent());MarketWatch.Member.startMktwJitLogin(window.location);});};var _setupTracking=function($menuItem){if($menuItem.attr("data-tracking")){$menuItem.find(".supernav a").each(function(i,item){if(item.href.indexOf("http://")<0||item.href.indexOf("http://"+window.location.host)===0){item.href+=(item.href.indexOf("?")<0?"?":"&")+$menuItem.attr("data-tracking");}});}};var _hackAnAd=function($menuItem){var ad=$menuItem.find("div.supernav div.advertisement iframe");if(ad.length>0){var ordIndex=ad.attr("src").indexOf("ord=");var src=ad.attr("src").substr(0,ordIndex)+"ord="+ScrillaZilla.Escort.newOrd()+"?";ad.attr("src",src);}};$(function(){_$navigation=_settings.fixedSubNav?$("#sitenav"):$("#toplevelnav");if(_settings.dropdownsEnabled){$("#featuresnav > div:not(.nodrop), #accountnav > div:not(.nodrop)").each(function(i,item){$(item).mouseenter(function(){var $item=$(item);if($item.hasClass("expanded")){clearTimeout(_hideTimeoutId);}
clearTimeout(_showTimeoutId);$item.addClass("fakehover");if(!$item.hasClass("expanded")){if(!$item.attr("data-status")){_showTimeoutId=setTimeout(function(){_getExpandedMenu($item);},_showDelay/2);}
else{_showTimeoutId=setTimeout(function(){_hackAnAd($item);_showExpandedMenu($item);},_showDelay);}}}).mouseleave(function(){clearTimeout(_showTimeoutId);var $item=$(item);$item.removeClass("fakehover");if($item.hasClass("expanded")){_hideTimeoutId=setTimeout(function(){_hideExpandedMenu($item);},_hideDelay);}}).children("a").click(function(){clearTimeout(_showTimeoutId);});});}
if(_settings.fixedTopNav){$(window).scroll(_positionNavigation);}});return{settings:function(options){if(options){$.extend(_settings,options);}
return _settings;},Portfolio:{}};}());$.extend(MarketWatch.Navigation.Portfolio,function(){return{measure:function(){var $table=$("#portfolionav table");var height=parseInt($("#portfolionav").attr("data-maxheight")||0);if(height>$table.height()){$table.css("margin-bottom",height-$table.height());}
else{$("#portfolionav").attr("data-maxheight",$table.height());$table.css("margin-bottom",0);}}};}());

$.extend(MarketWatch.NotificationBanner,function(){var _$banner;var _majorWidth="585px";var _minorWidth="396px";var _oneThird="327px";var _lilThird="280px";var _midThird="305px";var _bigThird="396px";var _speed=800;var _connectionCallback=function(connection,type){if(type=="connect"){var bully=$("#bulletinbanner .meat");BlueGrass.Bulletin.bindElement(bully,"/bulletin");bully.bind("bulletinActive",_bulletinShowCallback);bully.bind("bulletinExpire",_bulletinHideCallback);connection.subscribe("/investoralert",_investorAlertCallback);}};var _runAway=function($element,className){$element.animate({width:0},_speed,function(){$element.height(0);});_decrementShowing();_$banner.removeClass(className);};var _showBar=function($element,className){_incrementShowing();$element.css({width:"981px",height:"100%"});_$banner.animate({height:"40px"},_speed,function(){_$banner.addClass(className);});};var _scrollio=function($element,className){_$banner.animate({height:0},_speed,function(){_$banner.removeClass(className);$element.css({width:0,height:0});_decrementShowing();});};var _splitEven=function($lil,$mid,$big,className){_incrementShowing();$lil.animate({width:_lilThird},_speed,function(){_$banner.addClass(className);});$mid.animate({width:_midThird},_speed,function(){});$big.animate({width:_bigThird},_speed,function(){});};var _splitUneven=function($larger,$smaller,className,isLargerNew){_incrementShowing();if(isLargerNew){$smaller.animate({width:_minorWidth},_speed);$larger.height("100%").animate({width:_majorWidth},_speed,function(){_$banner.addClass(className);});}
else{$larger.animate({width:_majorWidth},_speed);$smaller.height("100%").animate({width:_minorWidth},_speed,function(){_$banner.addClass(className);});}};var _reverseSplitUneven=function($larger,$smaller){$smaller.animate({width:_minorWidth},_speed);$larger.animate({width:_majorWidth},_speed);};var _goBig=function($element){$element.animate({width:"981px"},_speed);};var _countShowing=function(){var showing=0;if(_$banner.hasClass("bull")){showing++;}
if(_$banner.hasClass("ina")){showing++;}
if(_$banner.hasClass("day")){showing++;}
return showing;};var _incrementShowing=function(){var showing=_countShowing();_$banner.switchClass("showing"+showing,"showing"+(showing+1),_speed);};var _decrementShowing=function(){var showing=_countShowing();_$banner.switchClass("showing"+showing,"showing"+(showing-1),_speed);};var _bulletinShowCallback=function(e,data){if(_$banner.hasClass("bull")){return;}
else if(_$banner.hasClass("ina")){if(_$banner.hasClass("day")){$("#bulletinwrap").height("100%");_splitEven($("#investoralertwrap"),$("#bulletinwrap"),$("#daypartwrap"),"bull");}
else{_splitUneven($("#bulletinwrap"),$("#investoralertwrap"),"bull",true);}}
else if(_$banner.hasClass("day")){_splitUneven($("#bulletinwrap"),$("#daypartwrap"),"bull",true);}
else{_showBar($("#bulletinwrap"),"bull");}};var _bulletinHideCallback=function(e,data){if(!_$banner.hasClass("bull")){return;}
else if(_$banner.hasClass("ina")){if(_$banner.hasClass("day")){_runAway($("#bulletinwrap"),"bull");_reverseSplitUneven($("#investoralertwrap"),$("#daypartwrap"));}
else{_runAway($("#bulletinwrap"),"bull");_goBig($("#investoralertwrap"));}}
else if(_$banner.hasClass("day")){_runAway($("#bulletinwrap"),"bull");_goBig($("#daypartwrap"));}
else{_scrollio($("#bulletinwrap"),"bull");}};var _investorAlertCallback=function(message){if(message.b.a===""){_investorAlertHideCallback(message);}
else{$("#investoralertbanner .meat").text(message.b.a);_investorAlertShowCallback(message);}};var _investorAlertShowCallback=function(message){if(_$banner.hasClass("ina")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("day")){$("#investoralertwrap").height("100%");_splitEven($("#investoralertwrap"),$("#bulletinwrap"),$("#daypartwrap"),"ina");}
else{_splitUneven($("#bulletinwrap"),$("#investoralertwrap"),"ina",false);}}
else if(_$banner.hasClass("day")){_splitUneven($("#investoralertwrap"),$("#daypartwrap"),"ina",true);}
else{_showBar($("#investoralertwrap"),"ina");}
var ad=$("#investoralertwrap div.sponsor");if(ad.length>0){_showAd(ad.attr("id"));}};var _investorAlertHideCallback=function(message){if(!_$banner.hasClass("ina")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("day")){_runAway($("#investoralertwrap"),"ina");_reverseSplitUneven($("#bulletinwrap"),$("#daypartwrap"));}
else{_runAway($("#investoralertwrap"),"ina");_goBig($("#bulletinwrap"));}}
else if(_$banner.hasClass("day")){_runAway($("#investoralertwrap"),"ina");_goBig($("#daypartwrap"));}
else{_scrollio($("#investoralertwrap"),"ina");}
var ad=$("#investoralertwrap div.sponsor");if(ad.length>0){_stopAd(ad.attr("id"));}};var _daypartShowCallback=function(){if(_$banner.hasClass("day")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("ina")){$("#daypartwrap").height("100%");_splitEven($("#investoralertwrap"),$("#bulletinwrap"),$("#daypartwrap"),"day");}
else{_splitUneven($("#bulletinwrap"),$("#daypartwrap"),"day",false);}}
else if(_$banner.hasClass("ina")){_splitUneven($("#investoralertwrap"),$("#daypartwrap"),"day",false);}
else{_showBar($("#daypartwrap"),"day");}};var _daypartHideCallback=function(){if(!_$banner.hasClass("day")){return;}
else if(_$banner.hasClass("bull")){if(_$banner.hasClass("ina")){_runAway($("#daypartwrap"),"day");_reverseSplitUneven($("#bulletinwrap"),$("#investoralertwrap"));}
else{_runAway($("#daypartwrap"),"day");_goBig($("#bulletinwrap"));}}
else if(_$banner.hasClass("ina")){_runAway($("#daypartwrap"),"day");_goBig($("#investoralertwrap"));}
else{_scrollio($("#daypartwrap"),"day");}};function _showAd(adId){if(ScrillaZilla){var adclient=ScrillaZilla.Escort.getClient(adId);if(adclient!=null){adclient.spload();if(adclient.Data.independentRefresh)
ScrillaZilla.Escort.refreshClient(adId);}}}
function _stopAd(adId){if(ScrillaZilla){ScrillaZilla.Escort.stopRefresh(adId);}}
$(function(){_$banner=$("#notificationbanner");if(BlueGrass&&BlueGrass.Runtime){BlueGrass.Runtime.openConnection({},_connectionCallback);}
if($("#daypartbanner").length>0){$("#daypartbanner").bind("countdownbegin",_daypartShowCallback);$("#daypartbanner").bind("countdownend",_daypartHideCallback);}
if($("#bulletinwrap:visible").length>0){$("#bulletinwrap").width($("#bulletinwrap").width()).height("100%");}
if($("#investoralertwrap:visible").length>0){$("#investoralertwrap").width($("#investoralertwrap").width()).height("100%");var investorAd=$("#investoralertwrap .sponsor");if($("#investoralertwrap").width()>0&&investorAd.length>0){_showAd(investorAd.attr("id"));}}
if($("#daypartwrap:visible").length>0){$("#daypartwrap").width($("#daypartwrap").width()).height("100%");}});return{testBulletin:function(shouldShow){if(shouldShow){$("#bulletinbanner .meat").text(shouldShow);_bulletinShowCallback();}
else{_bulletinHideCallback();}},testInvestorAlert:function(shouldShow){_investorAlertCallback({b:{a:shouldShow?shouldShow:""}});},testDaypart:function(shouldShow){if(shouldShow){_daypartShowCallback();}
else{_daypartHideCallback();}}};}());

$.extend(MarketWatch.Kiosk,function(){var _element,_index,_panels,_ad,_options,_paused=true,_disabled=false,_refresh=false,_adLoaded=false;var _previous=function(){if(!_disabled){clearTimeout(_options.timeoutId);$(_panels[_index]).fadeOut(600,function(){_index<=0?_index=_panels.length-1:--_index;_setTitleAndLoadImg();$(_panels[_index]).fadeIn(600);_resume();});_disableControls();}};var _next=function(){if(!_disabled){clearTimeout(_options.timeoutId);$(_panels[_index]).fadeOut(600,function(){_index>=_panels.length-1?_index=0:++_index;_setTitleAndLoadImg();$(_panels[_index]).fadeIn(600);_resume();});_disableControls();}};var _updatePaused=function(){if(_paused)
$("#kiosk .pause").addClass("paused");else
$("#kiosk .pause").removeClass("paused");};var _pause=function(timespan){if($("#kiosk .pause").is(".paused")&&!timespan){_next();return;}
if(!_disabled){clearTimeout(_options.timeoutId);_paused=true;if(timespan)
setTimeout(_next,timespan);else
_updatePaused();}};var _resume=function(){clearTimeout(_options.timeoutId);_options.timeoutId=setTimeout(_next,_options.timespan);_paused=false;_updatePaused();_disabled=false;};var _disableControls=function(){_disabled=true;}
var _setTitleAndLoadImg=function(){var title=$(_panels[_index]).find("p.kiosktitle").html();var kioskTitle=$("#kiosk h3").html(title||"Kiosk");$(_panels[_index]).find("img.lazy-img").each(function(){var img=$(this);if(img.data("lazy-src")&&img.data("lazy-src").length>0){img.attr("src",img.data("lazy-src"));}});};var _showAd=function(){if(_ad.length<=0||typeof(ScrillaZilla)=="undefined"||!ScrillaZilla)
return;_pause();if(_refresh||!_adLoaded){_adLoaded=true;var client=ScrillaZilla.Escort.getClient(_ad.children().attr("id"));if(client){client.Data.ord=ScrillaZilla.Escort.newOrd();client.load();}}
$(_panels).hide();$("#kiosk h3").add("#kiosk div.blockcontrols").hide();_ad.removeClass("invisible");setTimeout(function(){_hideAd();_options.adTimeoutId=setTimeout(_showAd,_options.adTimespan);},_options.adShowTimespan);};var _hideAd=function(){_ad.addClass("invisible");$("#kiosk h3").add("#kiosk div.blockcontrols").show();if(_panels.length>0)
$(_panels[_index]).show();if(_paused)
_resume();};$(function(){if(typeof(_element)=="undefined"||!_element)
return;_element.mouseover(function(){if(!_paused)
_pause(300000);}).find("div.blockcontrols .pause").click(function(e){e.preventDefault();_pause();}).siblings(".previous").click(function(e){e.preventDefault();_previous();}).siblings(".next").click(function(e){e.preventDefault();_next();});});return{setup:function(element,options){_element=$(element);_options=options||{};_index=_options.startIndex||0;_options.timespan=_options.timespan||15000;_options.adTimespan=_options.adTimespan||120000;_options.adShowTimespan=_options.adShowTimespan||9000;_panels=_element.find("ul li:not(.ad)");_ad=_element.find("ul li.ad");_refresh=options.refresh;_setTitleAndLoadImg();if(_options.autostart){if(typeof(ScrillaZilla)!=="undefined"&&typeof(ScrillaZilla.Escort)!=="undefined")
ScrillaZilla.Escort.addCallback("load",MarketWatch.Kiosk.start);else{_paused=false;_updatePaused();_options.adTimeoutId=setTimeout(_showAd,_options.adTimespan);_options.timeoutId=setTimeout(_next,_options.timespan);}}
else if(_ad.length>0&&!_options.adInRotation){ScrillaZilla.Escort.addCallback("load",function(){setTimeout(_hideAd,_options.adShowTimespan);});}},start:function(){MarketWatch.Kiosk.resume();MarketWatch.Kiosk.startAdRotation();},pause:function(){if(typeof(_element)=="undefined"||!_element)
return;_pause();},resume:function(){if(typeof(_element)=="undefined"||!_element)
return;_resume();},startAdRotation:function(){if(typeof(_options)=="undefined"||!_options)
return;_options.adTimeoutId=setTimeout(_showAd,_options.adTimespan);},showAd:function(){_showAd();}};}());

$.extend(MarketWatch.MarketsNews,function(){var _timerId=null;var _timerDuration=240000;var _newsAjaxUrl=null;var _olderNewsUrl=null;var _requestPending=false;var _getDocId=function(ctrl){var vals=(ctrl!=undefined?ctrl.val().split("::"):'');return((vals!=undefined&&vals.length==2)?vals[1]:'');}
var _getTimeStamp=function(ctrl){var vals=(ctrl!=undefined?ctrl.val().split("::"):'');return((vals!=undefined&&vals.length==2)?vals[0]:'');}
var _getLatestHeadlines=function(){var ctrl=$(".marketoverviewheadlines li:first input");var id=_getDocId(ctrl);$.ajax({type:"GET",url:_newsAjaxUrl,data:{newestId:id},success:function(data){$(".marketoverviewheadlines ol").find("li:eq(0)").before(data);if(typeof(data.minutesago)!="undefined"){data.find(".timeAgo").minutesago();}
clearTimeout(_timerId);_timerId=setTimeout(_getLatestHeadlines,_timerDuration);},error:function(request,status,error){}});}
var _getOlderHeadlines=function(){var ctrl=$(".marketoverviewheadlines li:last input");var docId=_getDocId(ctrl);var ts=_getTimeStamp(ctrl);var requestParams={docId:docId,dateTime:ts,channelName:'News & Commentary|Markets',count:20}
_requestPending=true;$.ajax({url:_olderNewsUrl,cache:false,data:requestParams,success:function(data){var item=$(".marketoverviewheadlines").find("li:last").after(data);_requestPending=false;},failure:function(request,status,error){_requestPending=false;}});};var _startNewsTimer=function(){if(_timerId==null){_timerId=setTimeout(_getLatestHeadlines,_timerDuration);}};var _isLastInView=function(control){if(control==undefined){return;}
var portHeight=control.height();var portTop=control.offset().top;var element=control.find("ol li:last p");var top=Math.round(element.offset().top);var height=element.height()-5;var bottom=portHeight+Math.round(portTop)-height;return(top<=bottom);};$(document).ready(function(){var box=$("#marketoverviewheadlines .headlinewrapper");$(box).scroll(function(event){if(_isLastInView($(box))&&!_requestPending){_getOlderHeadlines();}});_requestPending=false;});return{startNewsTimer:function(){_startNewsTimer();},setNewsAjaxUrl:function(url){_newsAjaxUrl=url;},setOlderNewsUrl:function(url){_olderNewsUrl=url;}}}());

$.extend(MarketWatch.MarketState,function(){var _quoteDisplayManager=new(function(){var _elementMap=new Object();var _countDownToCloseCallBack=function(){$(".quotedisplay").removeClass("open pre after closed").addClass("countdown")
$(".quotedisplay .marketstate").text("Countdown to close");};var _marketOpened=function(element){element.removeClass("pre after closed countdown").addClass("open");element.find(".marketstate").text("The market is open");}
var _marketClosed=function(element){if(!element.hasClass('after')){element.removeClass('countdown open pre').addClass("closed");element.find(".marketstate").text("The market is closed");}}
var _getStateText=function(state){state=state.toLowerCase();if(state.length>=4&&state.substring(0,4)=="open"){return"Open";}
else if(state.toLowerCase()=="pre-market"){return"Pre";}
else if(state.toLowerCase()=="after-market"){return"After";}
return"Closed";};var _marketStateChangeCallBack=function(message){var elements=_elementMap[message.h.t]
if(message&&message.b&&message.b.s&&message.b.x&&message.b.c){var newState=_getStateText(message.b.c);var nextState=_getStateText(message.b.x);if((newState=="After")||(newState=="Closed")){$.each(elements,function(){_marketClosed(this);});}
if(newState=="Open"){$.each(elements,function(){_marketOpened(this);});}}};return{setup:function(){$("div.quotedisplay").each(function(){var channel=$(this).find("span.bgChannel").text();if(channel&&channel.length>0)
_quoteDisplayManager.bindElement(this,channel);});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("QuoteDisplay marketstate setup called more than once");};},bindElement:function(element,channelName){var _connection=BlueGrass.Runtime.getConnection();if(!_connection||_connection==null||typeof(_connection)==='undefined'||!_connection.isOpen())
return;if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]=[];}
element=$(element);_elementMap[channelName].push(element);if(_elementMap[channelName].length==1){_connection.subscribe(channelName,_marketStateChangeCallBack);}}};})();var _countdownManager=new(function(){var _countdownMap=new Object();var _config={countdownBegin:3600000};var _callCountdowns=function(momentName,type,until){var callbacks=_countdownMap[momentName].callbacks;$.each(callbacks,function(){this(momentName,type,until);});};var _countdownIt=function(momentName){var now=new Date().getTime();var countdown=_countdownMap[momentName];if(!countdown||countdown.callbacks.length==0)
return;var timeUntilMoment=countdown.moment-now;var oneIntervalBeforeMoment=countdown.moment-_config.countdownBegin;var timeUntilBegin=oneIntervalBeforeMoment-now;var delay=Math.min(timeUntilBegin,15000);if(_config.countdownBegin===0||timeUntilBegin<=0){if(countdown.count==0){_callCountdowns(momentName,"countdownbegin",timeUntilMoment);}
else{_callCountdowns(momentName,"countdown",timeUntilMoment);}
if(timeUntilMoment<0){if(countdown.count>0)
_callCountdowns(momentName,"countdownend",0);delete _countdownMap[momentName];return;}
countdown.count++;delay=850;}
countdown.timer=setTimeout(function(){_countdownIt(momentName);},delay);};return{addCountdown:function(momentName,theMoment,callback,options){if(!momentName||!theMoment||typeof(callback)!="function")
return;if(options)$.extend(_config,options);if(!_countdownMap[momentName]||typeof(_countdownMap[momentName])=="undefined"){_countdownMap[momentName]={timer:null,callbacks:[],moment:theMoment,count:0};_countdownMap[momentName].callbacks.push(callback);_countdownMap[momentName].timer=setTimeout(function(){_countdownIt(momentName);},250);}
else{_countdownMap[momentName].callbacks.push(callback);}}}})();$(document).ready(function(){BlueGrass.Runtime.openConnection({},function(connection,type){if(type=="connect"){_quoteDisplayManager.setup();}});});return{addCountdownCallback:function(momentName,theMomentTime,callback,options){_countdownManager.addCountdown(momentName,theMomentTime,callback,options);}}}());

$.extend(MarketWatch.Panels,function(){function _updateVideo(){$("#latestvideo .morevids .videocarousel ul li div img").add("#latestvideo .morevids .videocarousel ul li div span").click(function(e){e.preventDefault();var guid=$(this).prevAll('.invisible').html();var headline;$("#latestvideo .morevids .videocarousel ul li div img.selected").removeClass("selected");if(this.tagName=='SPAN'){headline=$(this).html();$(this).prev().addClass('selected');}
else{headline=$(this).next().html();$(this).addClass('selected');}
$("#latestvideo .nowplaying").html('<div id="video_'+guid+'"></div>').next().html(headline);embedPlayerByVideoId(guid,'video_'+guid,'151','268');}).mouseover(function(){$(this).parent().addClass('hover');}).mouseout(function(){$(this).parent().removeClass('hover');});}
function _updateCarousel(o){o=$.extend({carouselDivId:null,carouselSize:3},o||{});$("#"+o.carouselDivId).jCarouselLiteSlide({circular:typeof(o.circular)!="undefined"?o.circular:true,btnPrev:"#"+o.carouselDivId+" .blockcontrols .previous",btnNext:"#"+o.carouselDivId+" .blockcontrols .next",nextTitleList:"#"+o.carouselDivId+" .nextpanel p",speed:1000,visible:o.carouselSize||3,scroll:1,pause:true,beforeStart:function(a){$(".lastpanel",a[a.length-1]).removeClass("lastpanel");$("#"+o.carouselDivId+" img.very-lazy-img").each(function(){var img=$(this);if(img.data("lazy-src")&&img.data("lazy-src").length>0){img.attr("src",img.data("lazy-src"));img.removeClass("very-lazy-img");}});},afterEnd:function(a){$(".panel",a[a.length-1]).addClass("lastpanel");}});}
var _blocksToRefresh=new Object();var _blocksToRefreshCallbacks=new Object();var _refreshContentTimeout=300000;var _RefreshContent=function(){$.each(_blocksToRefresh,function(){_getPartialView(_blocksToRefresh[this.id].url,$("#"+this.id).parent(),this.callback);});setTimeout(_RefreshContent,_refreshContentTimeout);}
var _getPartialView=function(url,contentPlaceholder,callback){$.get(url,{},function(partialView){contentPlaceholder.html(partialView);callback();});};$(document).ready(function(){setTimeout(_RefreshContent,_refreshContentTimeout);});return{AddBlockToRefreshCycle:function(divId,url,callback){_blocksToRefresh[divId]={url:url,callback:callback,id:divId};},UpdateCarousel:function(o){_updateCarousel(o);},UpdateVideo:function(){_updateVideo();}};}());

$.extend(MarketWatch.DockingBar.Portfolio,function(){var _subTimer=null;var _unsubTable=function(){var rows=$("#portfoliodata tr.bgQuote").each(function(){var $this=$(this);BlueGrass.Quote.unbindElement($this,$this.find(".bgRealtimeChannel").text()||$this.find(".bgChannel").text());});};var _subTable=function(){_subTimer=null;var rows=$("#portfoliodata tr.bgQuote").each(function(){var $this=$(this);$(".bgCurrencyFormatting").data("bgFormat",{last:"#,###.0000",change:"#,###.0000",percentChange:"#,###.0000%"});BlueGrass.Quote.bindElement($this,$this.find(".bgRealtimeChannel").text()||$this.find(".bgChannel").text());});}
var _updateTable=function(tag){_unsubTable();$.ajax({type:"GET",url:MarketWatch.getBaseUrl()+"/DockingBar/Dock/PortfolioRefresh",dataType:"html",data:{tag:tag},success:function(stuff){if(stuff.indexOf("portfolioPager")>0){$("#portfoliodata").html(stuff);if(_subTimer!=null)
clearTimeout(_subTimer);_subTimer=setTimeout(_subTable,2000);}
else
$("#portfoliodata").html("There was an error retrieving your portfolio.");},error:function(request,status,error){$("#portfoliodata").text("There was an error retrieving your portfolio.");}});};var _bindTagList=function(){$("#portfolionavtag").change(function(e){e.preventDefault();_updateTable($(this).val());});};var _textExtraction=function(node){if(node.className=="port-ratechange"){var text=$(node).find("p.bgPercentChange").text();return text.replace(/%/,"");}
else if(node.className=="port-symb")
return $(node).find("a").text();return $(node).text();};return{bindTagList:_bindTagList,sortExtraction:_textExtraction,unsubscribe:function(){_unsubTable();},subscribe:function(){if(_subTimer!=null)
clearTimeout(_subTimer);_subTimer=setTimeout(_subTable,2000);}};}());

$.extend(MarketWatch.News,function(){var _newsBoxUrl="";var _newsCount=10;function _newsBox(container,doctype,ticker,countryCode,topic){var _scrollTimerActive=false;var _animDelay=800;var _newsBox=$(container);var _viewPort=_newsBox.find("ol");var _newsArrived=false;var _topOnArrival=false;var _queue=new Array();var _dequeueInterval=3000;var _intervalId=0;var _doctype=doctype;var _ticker=ticker||"";var _countryCode=countryCode||"";var _topic=topic||"";var _requestPending=false;var _buttonPressed=false;var _noMoreNews=false;var _deleteQueue=new Array();var thunk=this;var _getOlderNews=function(){if(_noMoreNews||_requestPending)
return;var date=_getOldestDate();var uniqueId=_getOldestUniqueId();var docId=uniqueId.docId?uniqueId.docId:null;var sequence=uniqueId.sequence?uniqueId.sequence:null;var messageNumber=uniqueId.messageNumber?uniqueId.messageNumber:null;var channel=_getChannel();var requestParams={ticker:_ticker,countryCode:_countryCode,dateTime:date,docId:docId,docType:_doctype,sequence:sequence,messageNumber:messageNumber,count:_newsCount,channelName:channel,topic:_topic};_requestPending=true;$.ajax({url:_newsBoxUrl,dataType:"json",cache:false,data:requestParams,success:_olderNewsResponse,failure:_olderNewsFailure});};var _olderNewsResponse=function(response){if(!response||response.length==0){_noMoreNews=true
_newsBox.find("li.loading").remove();}
var existingHeight=_getItemsHeight();thunk.addOlderNews(response);var newHeight=_getItemsHeight();var delta=newHeight-existingHeight;_requestPending=false;_newsBox.find(".next").removeClass("disabled");if(_buttonPressed){_scrollNews(null,delta);}};var _olderNewsFailure=function(response){_noMoreNews=true;thunk.addOlderNews(response);_requestPending=false;};var _isFirstInView=function(){var portTop=_viewPort.offset().top;var element=_viewPort.find("li:first");var top=element.offset().top;return(top==portTop);};var _isLastInView=function(){var portHeight=_viewPort.height();var portTop=_viewPort.offset().top;var element=_viewPort.find("li:last");var top=Math.round(element.offset().top);var height=element.height();return(top<portHeight+portTop-height);};var _isReadyForMoreNewsHelper=function(viewPort,pullHeightMultiplier){var portHeight=viewPort.height();var portTop=viewPort.offset().top;var element=viewPort.find("li:last");var top=element.offset().top;var height=element.height();return(top<(portHeight+portTop-height)+(portHeight*pullHeightMultiplier));};var _isReadyForMoreNews=function(){return _isReadyForMoreNewsHelper(_viewPort,2);};var _isScrollbarReadyForMoreNews=function(){return _isReadyForMoreNewsHelper(_viewPort.parent(),.5);};var _newsSpark=null;var _doNews=function(message){if(_newsSpark){if(!message.HeadlineText){message.HeadlineText=message.b.h;message.Author=message.b.p;message.Abstract=message.b.a;message.DocGuid={Value:message.b.g};message.UniqueId=message.h.s+":"+message.h.n;message.Url=message.b.u;message.EasternTimeOffset={Value:message.b.o};message.TimestampUtc={Value:message.b.z};message.ContentType=message.b.c;message.Instruments=[{Type:message.b.tt,CountryCode:message.b.tc,Ticker:message.b.ts}];message.SeoHeadlineFragment=message.b.seo;message.Breaking=message.b.b;message.ThirdPartyUrl=message.b.tpu;message.Correction=message.b.cn;}
else{message.DocGuid={Value:message.DocGuid};message.TimestampUtc={Value:message.TimestampUtc};message.EasternTimeOffset={Value:message.EasternTimeOffset};}
if(typeof(message.ContentType)=="number"){if(message.ContentType==1)
message.ContentType="story";else if(message.ContentType==2)
message.ContentType="audio";else if(message.ContentType==3)
message.ContentType="video";else if(message.ContentType==4)
message.ContentType="nofollow";else if(message.ContentType==5)
message.ContentType="headline";}
var linkValue=_newsBox.data("linkValue");if(typeof(linkValue)=="undefined"){linkValue=_newsBox.attr("data-linkValue");}
if(location.host.indexOf("blogs.")===0&&message.Url&&message.Url.length>0&&message.Url[0]=="/"){message.Url="http://www.marketwatch.com"+message.Url;}
if(linkValue==undefined||linkValue.length==0){return _newsSpark({headline:message});}else{return _newsSpark({headline:message,link:linkValue});}}
if(message.b)
return message.b.h;if(message.HeadlineText)
return message.HeadlineText;};var _getOldestDate=function(){var dateExp=/1?[0-9]:[0-5][0-9] [a|p]\.m\. (Jan\.|Feb\.|March|April|May|June|July|Aug\.|Sept\.|Oct\.|Nov\.|Dec\.) [0-3]?[0-9], [1-2][0-9][0-9][0-9]/;var timestamp=_viewPort.find(".timestamp:last span");var text=timestamp.text();var dateMatch=dateExp.exec(text);return dateMatch?dateMatch[0]:null;};var _getOldestUniqueId=function(){var uniqueId=_viewPort.find("li.fnewsitem:last").data("uniqueid");if(typeof(uniqueId)==='number'){return{docId:uniqueId};}
else if(typeof(uniqueId)==='string'&&uniqueId.indexOf(":")>0){var args=uniqueId.split(":");return{sequence:args[0],messageNumber:args[1]};}
else{return{};}};var _getChannel=function(){return _newsBox.find(".bgChannel").text();};var _setViewPortTimer=function(){if(_scrollTimerActive){_scrollTimerActive=false;_viewPort.stopTime();}
if(!_isFirstInView()){_viewPort.oneTime("20s",function(){_viewPortTimerExpired();});_scrollTimerActive=true;_newsArrived=false;}};var _viewPortTimerExpired=function(){if(_newsArrived){_scrollToTop();_scrollTimerActive=false;}
else
{_topOnArrival=true;_scrollTimerActive=false;}};var _rowId=_viewPort.find("li").size()+1;var _maxRows=100;var _mySubscribeCallback=function(message){var actType=message.b.at;if(actType=='delete'){if(!message.b.seo||message.b.seo.length==0||message.b.c=="headline")
return;var found=_viewPort.find("a[href*='"+message.b.seo+"']").parents("li");if(found.length==1){var tempIndex=_viewPort.find("li").index(found);found.remove();message.previousIndex=tempIndex;}
else{found=_queueIndexOf(message.b.g);if(found>-1){_queue.splice(found,1);}}
_deleteQueue.push(message);if(_deleteQueue.length>5)
_deleteQueue.shift();}else if(actType=='update'){if(!message.b.seo||message.b.seo.length==0)
return;var found=_viewPort.find("a[href*='"+message.b.seo+"']").parents("li");if(found.length==1){found.replaceWith(_doNews(message));}
else{found=_queueIndexOf(message.b.g);if(found>-1){_queue.splice(found,1,message);}
else{if(message.b.c=='headline')
return;found=_queueIndexOf(message.b.g,_deleteQueue);if(found>-1){var date=BlueGrass.Utility.convertToExchangeTime(message.b.z,message.b.o);var deletedDate=BlueGrass.Utility.convertToExchangeTime(_deleteQueue[found].b.z,_deleteQueue[found].b.o);if(date.getTime()-deletedDate.getTime()>0){if(_intervalId!=0){_queue.push(message);}
else if(_scrollTimerActive){_newsArrived=true;_queue.push(message);}
else{_addNews(message);if(_topOnArrival){_scrollToTop();_topOnArrival=false;}}
_deleteQueue.splice(found,0);}else if(message.previousIndex&&message.previousIndex>0){$(_doNews(message)).insertBefore(_viewPort.find("li:eq("+message.previousIndex+")"));}}}}}else if(actType=='insert'){if(_intervalId!=0){_queue.push(message);}
else if(_scrollTimerActive){_newsArrived=true;_queue.push(message);}
else{_addNews(message);if(_topOnArrival){_scrollToTop();_topOnArrival=false;}}}else{if(console!=null){console.log("not inserting: "+actType);}}};var _addNews=function(message){var newContent=_doNews(message);var $newContent=$(newContent);_viewPort.find("li:eq(0)").before($newContent);if(typeof($newContent.minutesago)!="undefined"){$newContent.find(".timeAgo").minutesago();}
if(_rowId>_maxRows){_viewPort.find("#li"+(_rowId-_maxRows)).remove();}
_rowId+=1;};var _scrollToTop=function(){_viewPort.stop().scrollTo('li:eq(0)',_animDelay);_newsBox.find(".previous").addClass("disabled");_newsBox.find(".next").removeClass("disabled");_checkQueue();};var _checkQueue=function(){if(_isFirstInView()&&_queue.length>0&&_intervalId==0){_intervalId=setInterval(function(){var message=_queue.shift();_addNews(message);if(_queue.length==0){clearInterval(_intervalId);_intervalId=0;}},_dequeueInterval);}};var _scrollNews=function(obj,offset){var dir="+=";if($(obj)!=null){if($(obj).hasClass('previous')){dir="-=";}}
_viewPort.stop().scrollTo(dir+offset,(offset*8.6),{onAfter:_after,easing:'linear'});};var _enableDisableButtons=function(){if(!_isFirstInView()){_newsBox.find(".previous").removeClass("disabled");}else{_newsBox.find(".previous").addClass("disabled");}
if(_isLastInView()){_newsBox.find(".next").addClass("disabled");}else{_newsBox.find(".next").removeClass("disabled");}};var _after=function(){if(_isReadyForMoreNews()){_getOlderNews();}};_newsBox.find('.blockcontrols .previous').mousedown(function(event){_buttonPressed=true;if($(this).hasClass("disabled"))
return;_scrollNews(this,_getItemsHeight());_checkQueue();}).mouseup(function(event){_buttonPressed=false;_viewPort.stop();_finishScroll($(this),'previous');_enableDisableButtons();}).click(function(event){_buttonPressed=false;event.preventDefault();_setViewPortTimer();});_newsBox.find('.blockcontrols .next').mousedown(function(event){_buttonPressed=true;if($(this).hasClass("disabled"))
return;if(!_isLastInView()){_scrollNews(this,Math.round(_viewPort.find("li:last").offset().top));if(_intervalId!=0){clearInterval(_intervalId);_intervalId=0;}}}).mouseup(function(event){_buttonPressed=false;_viewPort.stop();_finishScroll($(this),'next');if(_isLastInView()&&!_requestPending){_getOlderNews();}
_enableDisableButtons();}).click(function(event){_buttonPressed=false;event.preventDefault();_setViewPortTimer();});var _finishScroll=function(obj,dir){var portHeight=_viewPort.height();var portTop=_viewPort.offset().top;var elements=_viewPort.find("li");var targetIndex=-1;for(i=0;i<elements.length;i++){var elementTop=$(elements[i]).offset().top;if(elementTop>portTop){targetIndex=i-1;break;}else if(elementTop==portTop){break;}}
if(targetIndex>=0){var el=$(elements[targetIndex]);var elPadTop=parseInt(el.css("padding-top"));var elPadBot=parseInt(el.css("padding-bottom"));var elHght=el.height()+elPadTop+elPadBot;var elTop=Math.round(el.offset().top);var offset=0;if(dir=='next'){offset=(elTop+elHght-portTop);}else{offset=(portTop-elTop);}
if(offset>0){_scrollNews(obj,offset);}}}
var _getItemsHeight=function(){var elements=_viewPort.find("li");var totalHeight=0;for(i=0;i<elements.length;i++){totalHeight+=$(elements[i]).height();}
return totalHeight;}
var _scroll=function(){if(_isScrollbarReadyForMoreNews()){_getOlderNews();}};_newsBox.find(".headlinewrapper").scroll(_scroll);var _queueIndexOf=function(guid,queue){var i;var message;if(!queue)
queue=_queue;for(i=0;i<queue.length;i++){message=queue[i];if(message.b.g==guid){return i;}}
return-1;};this.bluegrassCallback=_mySubscribeCallback;this.addOlderNews=function(headlines){var content="";$.each(headlines,function(){content+=_doNews(this);});_viewPort.find("li:last").before(content);};this.setOlderNewsCallback=function(callback){_getOlderNews=callback;};this.setNewsFormatterCallback=function(callback){_newsFormatterCallback=callback;};this.setNewsSpark=function(fctn){_newsSpark=fctn;};this.setNewsBoxUrl=function(url){_newsBoxUrl=url;};};$(document).ready(function(){$("span.timeAgo").minutesago();var latestnewsBox=new MarketWatch.News.NewsBox("#latestnews");if(typeof(Spark)!="undefined"&&Spark.Shared){latestnewsBox.setNewsSpark(Spark.Shared._News_HeadlineItem.RenderView);}
var _myConnectionCallback=function(connection,type){if(type=="connect"){_channel=connection.subscribe("/news/latest",latestnewsBox.bluegrassCallback);}};try{BlueGrass.Runtime.openConnection({},_myConnectionCallback);}
catch(exception){}});return{setNewsBoxUrl:function(url){_newsBoxUrl=url;},NewsBox:_newsBox}}());

$.extend(MarketWatch.Section,function(){var _formatBluegrass=function(){$("#overviewuspage div.data, #overvieweuropepage div.data, #overviewasiapage div.data").each(function(){var $this=$(this);if(($this.attr('data-decimal')==undefined)||($this.attr('data-decimal')=='0')){$this.data("bgFormat",{last:"#,###",change:"#,###",percentChange:"#,###.##%"});}
else{var format="#,###.";for(var loop=0;loop<parseInt($this.attr("data-decimal"));loop=loop+1)
format+="#";$this.data("bgFormat",{last:format,change:format,percentChange:"#,###.##%",largeLastMinimum:100000});}});}
var _expandMarketOverview=function(duration){var marketOverview=$("#marketoverview");var expander=$("#marketoverviewexpander");var height=(marketOverview.height()+15)+"px";var width=$("#maincontent").outerWidth()+"px";_fadeArrow(expander,'fast','out');$("#maincontent").animate({marginTop:height},{duration:duration,complete:function(){marketOverview.animate({marginLeft:"-"+width,width:"959px"},{duration:duration,complete:function(){marketOverview.addClass("expanded");_fadeArrow(expander,'fast','in');expander.addClass("expanded");}});}});var s=s_gi('djglobal,djmarketwatch');s.prop45='mw_home_marketoverview';void(s.tl(true,'o','mw_home_marketoverview'));};var _collapseMarketOverview=function(duration){var marketOverview=$("#marketoverview");var expander=$("#marketoverviewexpander");_fadeArrow(expander,'fast','out');marketOverview.animate({marginLeft:"0px",width:"377px"},{duration:duration,complete:function(){$("#maincontent").animate({marginTop:"0"},{duration:duration,complete:function(){if(marketOverview.hasClass("tempopen")){marketOverview.removeClass("tempopen");}
marketOverview.removeClass("expanded");_fadeArrow(expander,'fast','in');expander.removeClass("expanded");}});}});};var _fadeArrow=function(expander,rate,direction){var hide=($.browser.msie&&(parseInt(jQuery.browser.version.substr(0,1))==6));if(direction=='in'){hide?expander.css('visibility','visible'):expander.fadeIn(rate);}else if(direction=='out'){hide?expander.css('visibility','hidden'):expander.fadeOut(rate);}};var _updateCookieValue=function(cookieName,keyName,value){var cookie=$.cookie(cookieName);var expiresVal='';var result='';if(cookie!=null){var pairs=cookie.split('&');for(var i=0;i<pairs.length;i++){var split=pairs[i].split('=');if(split[0]==keyName){split[1]=value;}
if(split[0]=='exp'){expiresVal=new Date(split[1]);}
if(result.length>0){result+='&';}
result+=split[0]+'='+split[1];}}else{var date=new Date();date.setYear(date.getFullYear()+2);expiresVal=date;result=keyName+'='+value+'&exp='+(expiresVal.getMonth()+1)+'/'+expiresVal.getDate()+'/'+expiresVal.getFullYear();}
$.cookie(cookieName,result,{path:'/',domain:'.marketwatch.com',expires:expiresVal});};$(function(){var mo=$("#marketoverview");if(mo&&mo.length>0){if(typeof(marketoverviewchartChart!="undefined"))
MarketWatch.UI.bindRangeMenu($("div.range_menu_base",mo),marketoverviewchartChart);_formatBluegrass();$("#marketoverviewexpander").click(function(){mo.stopTime();var duration=1000;if(mo.hasClass("expanded"))
_collapseMarketOverview(duration);else
_expandMarketOverview(duration);});$("#marketoverview div.range_menu_base").bind("rangeChange",function(e,data){$(this).find(".title .range").text(data.range);var range=$("#marketoverview .fakethead .range");range.text(data.range.replace("s","")+" Chg");if(data.range==="1 Day"){range.hide();$("#marketoverview .fakethead").find(".change, .changepercent").show();}
else{$("#marketoverview .fakethead").find(".change, .changepercent").hide();range.show();}
var omNom="1day";switch(data.range){case"5 Days":omNom="1week";break;case"1 Month":omNom="4week";break;case"3 Months":omNom="13week";break;case"6 Months":omNom="26week";break;case"1 Year":omNom="52week";break;case"2 Years":omNom="104week";break;}
var s=s_gi("djglobal,djmarketwatch");s.prop45="mw_priorclose_"+omNom;void(s.tl(true,"o","mw_priorclose_"+omNom));});$("div.range_menu_base",mo).trigger("rangeChange",{range:"1 Day"});}
MarketWatch.UI.bindTabs();$("#fundfinderbutton").click(function(){var fundType=$("#FundType").get(0).options[$("#FundType").get(0).selectedIndex].value;var returnTimePeriod=$("#ReturnFundPeriod").get(0).options[$("#ReturnFundPeriod").get(0).selectedIndex].value;var netAsset=$("#FundValue").get(0).options[$("#FundValue").get(0).selectedIndex].value;var redirect=window.location+"tools/mutual-fund/screener?isClicked=1&siteID=mktw&FundType="+fundType+"&ReturnFundPeriod="+returnTimePeriod+"&FundValue="+netAsset;window.location=redirect;});$("div.mo_keep_open").click(function(){var mo=$("#marketoverview")
if(mo!=null){mo.stopTime();}
var $this=$(this);if($this.hasClass('chk')){$this.removeClass('chk');_updateCookieValue('mw5_prefs','mox','False');}else{$this.addClass('chk');_updateCookieValue('mw5_prefs','mox','True');}});});return{CollapseMarketOverview:function(){_collapseMarketOverview(1000);},ExpandMarketOverview:function(){_expandMarketOverview(1000);}};}());

if(typeof(DayParts)=="undefined"){var DayParts={};}
$.extend(MarketWatch.DayParting,function(){var _settings={isNewsHole:false,speed:800};var _initialTick=true;var _previousEvent=null;var _currentEvent=null;var _queuedEvent=null;var _getNextEvent=function(){if(_settings.eventEndpoint){var wait=Math.floor(Math.random()*3600000);setTimeout(function(){$.get(_settings.eventEndpoint,function(response){if(response){_queuedEvent={market:response.market,display:response.display,state:eval("DayParts."+response.state),stateDisplay:response.stateDisplay,start:new Date(response.start),end:new Date(response.end),links:response.links};}});},wait);}};var _setupEvent=function(event){if(!event||!event.start||!event.end){return;}
var now=new Date().getTime();var bump=(!_settings.time)?0:now-_settings.time.getTime();MarketWatch.MarketState.addCountdownCallback(event.state,event.end.getTime()+bump,_transition,{countdownBegin:event.end.getTime()-event.start.getTime()});};var _transition=function(event,thing,time){if(thing==="countdown"){if(_requiresCounter(_currentEvent)){$("#daypartcountdown").text(_formatCountdown(time));}}
else{if(_settings.isNewsHole){_newsHoleTransition(thing);}
else{_mastheadTransition(thing);}
if(thing==="countdownend"){_previousEvent=_currentEvent;_currentEvent=_queuedEvent;_setupEvent(_currentEvent);_queuedEvent=null;_getNextEvent();}
else if(thing==="countdownbegin"){if(_currentEvent===null){_previousEvent=_currentEvent;_currentEvent=_queuedEvent;_queuedEvent=null;}
if(_initialTick){_initialTick=false;}}}};var _newsHoleTransition=function(thing){var ad;if(thing==="countdownend"){if(_currentEvent&&(!_queuedEvent||_currentEvent.end.getTime()!==_queuedEvent.start.getTime())){$("#daypartwrapmain").animate({height:0});$("#newshole,#daypartmain").switchClass(_currentEvent.market.toLowerCase(),"").removeClass(_currentEvent.state.toLowerCase());_distifyLinks(null);}
else{$("#newshole").switchClass(_currentEvent.state.toLowerCase(),_queuedEvent.state.toLowerCase(),_settings.speed);switch(_queuedEvent.state){case DayParts.BeforeTheBell:$("#daypartmain").animate({color:"#a13801",backgroundColor:"#e2ae05"},_settings.speed);break;case DayParts.CountdownToClose:$("#daypartmain").animate({color:"#bbd3b6",backgroundColor:"#408036"},_settings.speed);break;case DayParts.AfterHours:$("#daypartmain").animate({color:"#8eabd8",backgroundColor:"#0a5390"},_settings.speed);break;default:break;}
if(_currentEvent.market!==_queuedEvent.market){$("#newshole").switchClass(_currentEvent.market.toLowerCase(),_queuedEvent.market.toLowerCase());}
$("#daypartmain .marketstate, #daypartmain .links").fadeOut(function(){if($(this).hasClass("links")){$(this).html(_currentEvent.links);}
else{$(this).find(".state").text(_currentEvent.stateDisplay);}
$(this).fadeIn();});_distifyLinks(_queuedEvent.market,_queuedEvent.state);}
ad=$("#ad_DaypartHome"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);if(ad.length>0){_stopAd(ad.attr("id"));ad.html("");}}
else if(thing==="countdownbegin"){if(_currentEvent){_distifyLinks(_currentEvent.market,_currentEvent.state);}
else{_distifyLinks(_queuedEvent.market,_queuedEvent.state);}
if($("#daypartwrapmain").height()===0&&$("#daypartwrapmain").is(":visible")){if($("#daypartwrapmain").hasClass("withtickers")&&$("#daypartwrapmain").hasClass("withad")){$("#daypartwrapmain").animate({height:"67px"});}
else{$("#daypartwrapmain").animate({height:"48px"});}
$("#newshole").addClass(_queuedEvent.market.toLowerCase()).addClass(_queuedEvent.state.toLowerCase());ad=$("#ad_DaypartHome"+_queuedEvent.display.replace(/ /g,"")+_queuedEvent.state);if(ad.length>0){_showAd(ad.attr("id"));}}
else{ad=$("#ad_DaypartHome"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);if(ad.length>0){_showAd(ad.attr("id"));}}
$("#daypartmain .tickers .bgQuote").data("bgFormat",{percentChange:'#,##0.0%'});}};var _mastheadTransition=function(thing){if(thing==="countdownend"&&_currentEvent&&_queuedEvent&&_currentEvent.end.getTime()===_queuedEvent.start.getTime()){$("#daypartbanner").fadeOut(function(){$(this).find(".marketstate .state").text(_currentEvent.stateDisplay);$("#daypartbanner .links").html(_currentEvent.links);$("#daypartbanner").switchClass(_previousEvent.state.toLowerCase(),_currentEvent.state.toLowerCase());$(this).fadeIn();});}
else{$("#daypartbanner").trigger(thing);}
var ad;if(thing==="countdownend"){ad=$("#ad_DaypartBanner"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);if(ad.length>0){_stopAd(ad.attr("id"));ad.html("");}}
else if(thing==="countdownbegin"){if(_currentEvent){ad=$("#ad_DaypartBanner"+_currentEvent.display.replace(/ /g,"")+_currentEvent.state);}
else{ad=$("#ad_DaypartBanner"+_queuedEvent.display.replace(/ /g,"")+_queuedEvent.state);}
if(ad.length>0){_showAd(ad.attr("id"));}}};var _requiresCounter=function(event){if(event!=null){return(event.state===DayParts.BeforeTheBell||event.state===DayParts.CountdownToClose);}
return false;};var _formatCountdown=function(ms){if(ms<=0)
return"";var secs=Math.floor(ms/1000);var mins=Math.floor(secs/60);var hrs=Math.floor(mins/60);secs=secs%60;mins=mins%60;hrs=hrs%60;return hrs+":"+(mins<10?"0"+mins:mins)+":"+(secs<10?"0"+secs:secs);};function _showAd(adId){if(ScrillaZilla){var adclient=ScrillaZilla.Escort.getClient(adId);if(adclient!=null){adclient.spload();if(adclient.Data.independentRefresh)
ScrillaZilla.Escort.refreshClient(adId);}}}
function _stopAd(adId){if(ScrillaZilla){ScrillaZilla.Escort.stopRefresh(adId);}}
var _distifyLinks=function(market,state){var distValue="";if(market&&state){switch(state){case DayParts.BeforeTheBell:distValue="beforebell";break;case DayParts.CountdownToClose:distValue="countdown";break;case DayParts.AfterHours:distValue="afterbell";break;default:break;}
switch(market){case"JP":distValue="t"+distValue;break;case"UK":distValue="l"+distValue;break;default:break;}}
$("#newshole a[href ^= '/']").each(function(){var my=$(this);var url=my.attr("href");var distIndex=url.indexOf("dist=");if(distIndex>0){var endDist=url.indexOf("&",distIndex);var fullDist=endDist<0?url.substring(distIndex-1):url.substring(distIndex-1,endDist);if(distValue!=null&&distValue!=="")
my.attr("href",url.replace(fullDist,fullDist.substring(0,1)+"dist="+distValue));else
my.attr("href",(endDist<0||fullDist.substring(0,1)!=="?")?url.replace(fullDist,""):url.replace(fullDist+"&","?"));}
else if(distValue!=null&&distValue!==""){my.attr("href",url+(url.indexOf("?")>=0?"&dist=":"?dist=")+distValue);}});};$(function(){if(_currentEvent){_setupEvent(_currentEvent);_distifyLinks(_currentEvent.market,_currentEvent.state);}
else if(_queuedEvent){_setupEvent(_queuedEvent);}});return{setup:function(config){if(config){$.extend(_settings,config);if(config.currentEvent){_currentEvent=config.currentEvent;}
if(config.nextEvent){_queuedEvent=config.nextEvent;}}},testNext:function(){_getNextEvent();}};}());

$.extend(MarketWatch.Community.TopPickers,function(){$(function(){});var _isInitialized=false;var _topPickersPartialUrl="";var _initialize=function(topPickersPartialUrl){if(_isInitialized===false){_topPickersPartialUrl=topPickersPartialUrl;_registerTopPickersPeriodDropDown();_isInitialized=true;}}
var _registerTopPickersPeriodDropDown=function(){var container=$('#pickers #tab-tppage');container.find('.filter-container').hover(function(){container.find('.filter-container').addClass('show');},function(){container.find('.filter-container').removeClass('show');});container.find('.filter-values li').hover(function(){$(this).addClass('hover');},function(){$(this).removeClass('hover');});container.find('.filter li').click(function(e){e.preventDefault();});container.find('.filterOption').click(function(){_getTopPickersList($(this).attr('periodFilter'));});};var _getTopPickersList=function(periodValue){var pageParams={period:periodValue};_getPartialView(_topPickersPartialUrl,pageParams,$('#pickers #tab-tppage #toppickers-container'),_getTopPickersListCallBack);};var _getTopPickersListCallBack=function(contentPlaceholder,partialView){contentPlaceholder.fadeOut(200,function(){contentPlaceholder.html(partialView).fadeIn(200);_registerTopPickersPeriodDropDown();});};var _getPartialView=function(url,pageParams,contentPlaceholder,callback){$.get(url,pageParams,function(partialView){callback(contentPlaceholder,partialView);});};return{Initialize:_initialize}}());

$.extend(MarketWatch.Community.ActiveDiscussions,function(){$(function(){});var _isInitialized=false;var _activeDiscussionsPartialUrl="";var _initialize=function(activeDiscussionsPartialUrl){if(_isInitialized===false){_activeDiscussionsPartialUrl=activeDiscussionsPartialUrl+"/ActiveDicussionsPartial";;_registerActiveDiscussionsDropDown();_isInitialized=true;}}
var _registerActiveDiscussionsDropDown=function(){var container=$('#activediscussion-categories');container.find('li').click(function(){_getActiveDiscussionsList($(this).attr('category'));});};var _getActiveDiscussionsList=function(category){var pageParams={category:category};_getPartialView(_activeDiscussionsPartialUrl,pageParams,$('#active-disc-container'),_getActiveDiscussionsListCallBack);};var _getActiveDiscussionsListCallBack=function(contentPlaceholder,partialView){contentPlaceholder.fadeOut(200,function(){contentPlaceholder.html(partialView).fadeIn(200);});};var _getPartialView=function(url,pageParams,contentPlaceholder,callback){$.get(url,pageParams,function(partialView){callback(contentPlaceholder,partialView);});};return{Initialize:_initialize}}());

$.extend(MarketWatch.Community.PickerAccordian,function(){$(function(){});var _stockrow_show_speed='medium';var _stockrow_hide_speed='fast';var _initializePickerAccordian=function(container){var rows=$(container).find('.acc-data tr.acc-stock-row');if(rows&&rows.length>0){_initializeActiveRow($(rows[0]));rows.click(function(){_expandStockRow($(this));});rows.hover(function(){$(this).addClass('highlight-hover');},function(){$(this).removeClass('highlight-hover');});}};var _initializeActiveRow=function(headerRow){var tickerValue=headerRow.attr('ticker');var contentRow=headerRow.siblings('[ticker='+tickerValue+']');MarketWatch.Community.InstrumentPicker.InitializePickerControl(contentRow,true);};var _expandStockRow=function(headerRow){var tickerValue=headerRow.attr('ticker');var escapedTicker=tickerValue.replace('.','\\.');var contentRow=headerRow.siblings('[ticker='+escapedTicker+']');var nonSelectedHeaderRows=headerRow.siblings('.acc-stock-row[ticker!='+escapedTicker+']');var nonSelectedContentRows=headerRow.siblings('.acc-stock-meta[ticker!='+escapedTicker+']');var nonSelectedContentRowsContent=nonSelectedContentRows.find('.meta-cont');var chartContainer=contentRow.find('[id*=_graph_cont_]');headerRow.addClass('highlight');nonSelectedHeaderRows.removeClass('highlight');contentRow.addClass('highlight');nonSelectedContentRowsContent.stop().hide();headerRow.find('.ticker-link-off').hide();headerRow.find('.ticker-link-on').show();nonSelectedHeaderRows.find('.ticker-link-off').show();nonSelectedHeaderRows.find('.ticker-link-on').hide();contentRow.find('.meta-cont').slideDown(_stockrow_show_speed,function(){_displayAccordianRow($(this),nonSelectedContentRowsContent,chartContainer,tickerValue);});};var _displayAccordianRow=function(contentRow,nonSelectedContentRowsContent,chartContainer,tickerValue){contentRow.addClass('highlight');nonSelectedContentRowsContent.removeClass('highlight');MarketWatch.Community.InstrumentPicker.InitializePickerControl(contentRow);_showChart(chartContainer,tickerValue);};var _showChart=function(chartContainer,tickerValue){if(chartContainer.length==1){var chart=jQuery.data($('#'+chartContainer.attr('id')).get(0),'embeddedchart');if(chart){chart.ShowChart(tickerValue);}
delete chart;}};var _updateAccordianPerceptionPercentage=function(ticker,bullishPercent,bearishPercent,status){var tickerHeaderRows=$('div.pick-acc-cont .acc-data .acc-stock-row[ticker='+ticker.replace('.','\\.')+'], div.pick-acc-cont .acc-data .acc-stock-row[data-ticker='+ticker.replace('.','\\.')+']');var statusText="";var cssClass="";var percentValue=0;if(status=="Even"){statusText="(Even)";cssClass="even";percentValue=bullishPercent;}
else if(status=="Bearish"){statusText="(Bearish)";cssClass="bear";percentValue=bearishPercent;}
else{statusText="(Bullish)";cssClass="bull";percentValue=bullishPercent;}
if(tickerHeaderRows.length>0&&status!="NoVotes"){tickerHeaderRows.find('.perception-percent').removeClass('even');tickerHeaderRows.find('.perception-percent').removeClass('bull');tickerHeaderRows.find('.perception-percent').removeClass('bear');tickerHeaderRows.find('.perception-percent').addClass(cssClass);tickerHeaderRows.find('.percent-value').text(percentValue);tickerHeaderRows.find('.percent-desc').text(statusText);}}
return{Initialize:_initializePickerAccordian,UpdateAccordianPerceptionPercentage:_updateAccordianPerceptionPercentage}}());

$.extend(MarketWatch.Community.InstrumentPicker,function(){$(function(){});var _isInitialized=false;var _userLoggedInCommunity=false;var _makePredictionUrl="";var _getUserHistoryUrl="";var _initializePage=function(makePredictionUrl,getUserHistoryUrl,userLoggedInCommunity){if(_isInitialized===false){_makePredictionUrl=makePredictionUrl;_getUserHistoryUrl=getUserHistoryUrl;_userLoggedInCommunity=userLoggedInCommunity;_isInitialized=true;}};var _initializePickerControl=function(container,skipDataReload){if(_isInitialized===true){MarketWatch.Member.forceAssetsBinding(container);if(_userLoggedInCommunity===true){if(skipDataReload===true){_registerVotingButtonClickEvents($(container));}
else{_loadPickerControlsWithUserData($(container));}}}};var _loadPickerControlsWithUserData=function(container){var allPickerControlsWithinContainer=container.find('[class^=instrument-picker-cont-]');allPickerControlsWithinContainer.each(function(index){$this=$(this);_reloadControlWithUserPredictionsHistory($this);});};var _registerVotingButtonClickEvents=function(container){var timeFrame;var isUpVote;var ticker=container.attr('ticker');container.find('.arrow.up, .arrow.down').unbind('click');var allPickerControlsWithinContainer=_getPickerControlsFromContainer(container);allPickerControlsWithinContainer.each(function(index){var thisControl=$(this);thisControl.find('.arrow.up, .arrow.down').click(function(){var thisButton=$(this);timeFrame=thisButton.attr('timeframe')
if(thisButton.hasClass('down'))
isUpVote=false;else
isUpVote=true;_makePrediction(thisControl,ticker,isUpVote,timeFrame);});});};var _getPickerControlsFromContainer=function(container){var allPickerControlsWithinContainer;if(container.attr('class').indexOf('instrument-picker-cont-')>=0){allPickerControlsWithinContainer=container;}
else{allPickerControlsWithinContainer=container.find('[class^=instrument-picker-cont-]');}
return allPickerControlsWithinContainer;};var _makePrediction=function(container,ticker,isUpVote,timeFrame){_deactivate(container);var params={ticker:ticker,period:timeFrame,predictUp:isUpVote};$.post(_makePredictionUrl,params,function(partial){_reloadControlCallback(partial,container)});var s=s_gi('djglobal,djmarketwatch');s.prop45='ugc_compick';void(s.tl(true,'o','ugc_compick'));};var _reloadControlWithUserPredictionsHistory=function(container){_deactivate($this);container.find('.arrow.up, .arrow.down').unbind('click');var ticker=container.attr('ticker');var params={ticker:ticker};$.post(_getUserHistoryUrl,params,function(partial){_reloadControlCallback(partial,container)});};var _reloadControlCallback=function(partial,container){container.html($(partial).html());_activate(container);_registerVotingButtonClickEvents(container);};var _deactivate=function(target){target.removeClass('active');};var _activate=function(target){target.addClass('active');};return{InitializePage:_initializePage,InitializePickerControl:_initializePickerControl}}());

$.extend(MarketWatch.Community.Live,function(){$(document).ready(function(){});var _isInitialized=false;var _tabPartialAjaxUrl="";var _container=$('#tab-liveallpage');var _category='liveall';var _isRetrieving=false;var FADE_SPEED=1000;var RETRIEVE_NEW_ITEMS_INTEVAL='15s';var MAX_DOM_ITEMS=9;var _initialize=function(ajaxRoot,category){if(_isInitialized===false){_tabPartialAjaxUrl=ajaxRoot+"/CommunityLivePartial";_registerTabs();_isInitialized=true;}
_category=category;_show(_category);if(jQuery.timers){_container.everyTime(RETRIEVE_NEW_ITEMS_INTEVAL,'dbcomm_live',_getNewLiveEntries,0,true);};};var _getNewLiveEntries=function(){if(_isRetrieving)
return;if(_container.hasClass('selected')==false){_isRetrieving=false;return;}
var lastEntry=_container.find('div.live-row:first');if(lastEntry!=null){_isRetrieving=true;var lastEntryId=_container.find('div.live-row:first').attr('entryid');var params={entryIdBoundary:lastEntryId,tab:_category,newer:true};$.get(_tabPartialAjaxUrl,params,function(partial){_showNewItems(partial);});}
_isRetrieving=false;};var _showNewItems=function(newHtml){_container.find('div.live-row:first').before(newHtml);_container.find('div.live-row:hidden').fadeIn(FADE_SPEED);_container.find('div.live-row:gt('+MAX_DOM_ITEMS+')').remove();};var _show=function(tabType){if(_isInitialized===false)
return;_getLiveTab(tabType);};var _registerTabs=function(){$('#live div.tabs a.tab').click(function(e){e.preventDefault();_getLiveTab($(this).attr('tab'));});}
var _swapTabs=function(tabId,tabPageId){$('#live #'+tabId).addClass('selected').siblings().removeClass('selected');$('#live #'+tabPageId).addClass('selected').siblings().removeClass('selected');_container=$('#'+tabPageId);_category=$('#live #'+tabId).attr('tab');};var _showLoadingScreen=function(){$('#live #cmnty-dock .tabpane').hide();$('#live div.loading').show();};var _showContentScreen=function(){$('#live div.loading').hide();$('#live #cmnty-dock .tabpane').show();};var _getLiveTab=function(tabType){var tabId="tab-"+tabType;var tabPageId="tab-"+tabType+"page";var params={tab:tabType};var tabPage=$('#live #'+tabPageId);_swapTabs(tabId,tabPageId);_showLoadingScreen();_getPartialView(_tabPartialAjaxUrl,params,tabPage,_getDocTabCallback);};var _getDocTabCallback=function(contentPlaceholder,partialView){contentPlaceholder.html(partialView);MarketWatch.Member.forceAssetsBinding(contentPlaceholder);_showContentScreen();};var _getPartialView=function(url,pageParams,contentPlaceholder,callback){$.get(url,pageParams,function(partialView){callback(contentPlaceholder,partialView);});};return{Initialize:_initialize,Show:_show};}());

$.extend(MarketWatch.Community.FriendActivity,function(){$(document).ready(function(){});var _isInitialized=false;var _container=$('#friendactivity-container');var _isRetrieving=false;var FADE_SPEED=1000;var MAX_DOM_ITEMS=7;var _initialize=function(ajaxRoot){if(_isInitialized===false){_partialAjaxUrl=ajaxRoot+"/FriendActivityPartial";_isInitialized=true;}};var _getOlderFriendActivity=function(){if(_isRetrieving)
return;var lastEntry=_container.find('div.live-row:last');if(lastEntry!=null){_isRetrieving=true;var lastEntryId=_container.find('div.live-row:last').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:false};$.get(_partialAjaxUrl,params,function(partial){_showNewItems(partial);});}
_isRetrieving=false;};var _getNewerFriendActivity=function(){if(_isRetrieving)
return;var lastEntry=_container.find('div.live-row:first');if(lastEntry!=null){_isRetrieving=true;var lastEntryId=_container.find('div.live-row:first').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:true};$.get(_partialAjaxUrl,params,function(partial){_showNewItems(partial);});}
_isRetrieving=false;};var _showNewItems=function(newHtml){_container.find('div.live-row:first').before(newHtml);_container.find('div.live-row:hidden').fadeIn(FADE_SPEED);_container.find('div.live-row:gt('+MAX_DOM_ITEMS+')').remove();};return{Initialize:_initialize,GetOlderFriendActivity:_getOlderFriendActivity,GetNewerFriendActivity:_getNewerFriendActivity};}());

$.extend(MarketWatch.Community.MemberHeader,function(){$(document).ready(function(){});var _isInitialized=false;var _ajaxUrl="";var _initialize=function(ajaxRoot){if(_isInitialized===false){_ajaxUrl=ajaxRoot;_isInitialized=true;}};var bioHidden=true;var pointsHidden=true;var _expandBio=function(){var bioexpander=$("#bioexpander");var biocloser=$("#biocloser");if(bioHidden){var els=$('.biohidden');els.removeClass("biohidden");els.addClass("bioshown");bioexpander.removeClass("bioshown");bioexpander.addClass("biohidden");biocloser.addClass("bioshown");biocloser.removeClass("biohidden");bioHidden=false;}
else{var els=$('.bioshown');els.removeClass("bioshown");els.addClass("biohidden");bioexpander.removeClass("biohidden");bioexpander.addClass("bioshown");biocloser.addClass("biohidden");biocloser.removeClass("bioshown");bioHidden=true;}};var _expandPoints=function(){var pointsexpander=$("#pointsexpander").parent();if(pointsHidden){var els=$('.pointshidden');els.removeClass("pointshidden");els.addClass("pointsshown");pointsHidden=false;pointsexpander.toggleClass("pointstoggle");}
else{var els=$('.pointsshown');els.removeClass("pointsshown");els.addClass("pointshidden");pointsHidden=true;pointsexpander.toggleClass("pointstoggle");}};var _editProfile=function(name){$.get(_ajaxUrl+"Edit",{member:name},function(partial){$('#memberheader').replaceWith(partial);});};var _cancelProfile=function(name){$.get(_ajaxUrl+"CancelEdit",{member:name},function(partial){$('#memberheader').replaceWith(partial);});};var _saveProfile=function(name){var foo=$('#realname').val();$.post(_ajaxUrl+"Save",{member:name,experience:$('#experience-dl p').text(),style:$('#style-dl p').text(),timeHorizon:$('#timehorizon-dl p').text(),realName:$('#realname').val(),gender:$('#gender-dl p').text(),location:$('#location').val(),education:$('#education').val(),employment:$('#employment').val(),bio:$('#bio').val()},function(partial){$('#memberheader').replaceWith(partial);});};_imageElement=null;var _showAvatarDialog=function(name,el){_imageElement=$(el).parents(".avatar-large").children("a").children("img");var imageHtml=_imageElement.parent().html();$('<div class="change-avatar" id="changeAvatarDialog" ><h2>Change Photo</h2><div class="avatar-large" style="float:left; margin-right:10px"><a href="#" onclick="return false;">'+imageHtml+'</a></div> <div style="float:left"> <input id="updateAvatarFile" name="avatar" type="file"></input><br/><br/><a class="button-style2" href="#" onclick="MarketWatch.Community.MemberHeader.UpdateAvatar(\''+name+'\',$(this).parents(\'#changeAvatarDialog\'));">Submit</a><a class="button-style2" href="#" onclick="$(this).parents(\'#changeAvatarDialog\').dialog(\'destroy\');return false;">Cancel</a></div><div class="clear"></div></div>').dialog({width:330});return false;}
var _updateAvatar=function(name,dialogElement){$.ajaxFileUpload({url:_ajaxUrl+"UpdateAvatar",secureuri:false,fileElementId:"updateAvatarFile",dataType:'text/html',success:function(data,status){if(_imageElement!=null&&data!=null&&data.length>0){_imageElement.attr('src',data);}},error:function(data,status,e){}});dialogElement.dialog('destroy');dialogElement.empty().remove();return false;};var _blockUser=function(){return window.confirm("Are you sure you want to block this user? Clicking OK will prevent this user from contacting you in the MarketWatch Community. To allow contact from this user again, click the 'un-block' button on the user's profile.")};var _unblockUser=function(){return window.confirm("Are you sure you want to un-block this user? Clicking OK will allow you to receive messages, friend requests and group requests from this user.")};return{ExpandBio:_expandBio,ExpandPoints:_expandPoints,EditProfile:_editProfile,Initialize:_initialize,CancelProfile:_cancelProfile,SaveProfile:_saveProfile,UpdateAvatar:_updateAvatar,ShowAvatarDialog:_showAvatarDialog,BlockUser:_blockUser,UnblockUser:_unblockUser};}());

$.extend(MarketWatch.Community.OlderNewer,function(){$(document).ready(function(){});var _olderNewerInstances=[];var _initialize=function(partialAjaxUrl,containerDiv,replace){if(_olderNewerInstances[containerDiv]==null){_olderNewerInstances[containerDiv]={container:$("#"+containerDiv),partialAjaxUrl:partialAjaxUrl,isRetrieving:false,FADE_SPEED:1000,MAX_DOM_ITEMS:7,replace:replace};}};var _getOlder=function(containerDiv){var instance=_olderNewerInstances[containerDiv];if(instance==null)
return;if(instance.isRetrieving)
return;var lastEntry=instance.container.find('div.live-row:last');if(lastEntry!=null){instance.isRetrieving=true;var lastEntryId=instance.container.find('div.live-row:last').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:false};$.get(instance.partialAjaxUrl,params,function(partial){_showNewItems(partial,instance);});}
instance.isRetrieving=false;};var _getNewer=function(containerDiv){var instance=_olderNewerInstances[containerDiv];if(instance==null)
return;if(instance.isRetrieving)
return;var lastEntry=instance.container.find('div.live-row:first');if(lastEntry!=null){instance.isRetrieving=true;var lastEntryId=instance.container.find('div.live-row:first').attr('entryid');var params={entryIdBoundary:lastEntryId,newer:true};$.get(instance.partialAjaxUrl,params,function(partial){_showNewItems(partial,instance);});}
instance.isRetrieving=false;};var _showNewItems=function(newHtml,instance){if(instance.replace){instance.container.html(newHtml);}
else{instance.container.find('div.live-row:first').before(newHtml);instance.container.find('div.live-row:hidden').fadeIn(instance.FADE_SPEED);instance.container.find('div.live-row:gt('+instance.MAX_DOM_ITEMS+')').remove();}};return{Initialize:_initialize,GetOlder:_getOlder,GetNewer:_getNewer};}());

$.extend(MarketWatch.Community.BestOf,function(){var _initializeSection=function(elt,partialUrls){$(".tabs .tab",elt).click(function(){var tabId=$(this).attr("id");if($("#"+tabId+"-page:parent",elt).length!=0){$(".tabpane > div",elt).removeClass("selected");$("#"+tabId+"-page",elt).addClass("selected");}
else{$(".tabpane > div",elt).removeClass("selected");$("#"+tabId+"-page",elt).addClass("selected");$.ajax({type:"GET",url:partialUrls[tabId],success:function(html){$("#"+tabId+"-page",elt).html(html)}});}});};var _initializeTab=function(elt,partialUrl){var ajaxElt=$("#results",elt);var droplist=$(".droplist",elt);$("li",droplist).click(function(){$.ajax({type:"GET",url:partialUrl,data:"timeframe="+$(this).attr("id"),success:function(html){_dropListCallBack(html,ajaxElt)}});});};var _dropListCallBack=function(html,ajaxElt){ajaxElt.customFadeTo(200,0,function(){ajaxElt.html(html).customFadeTo(200,1);});};return{InitializeSection:_initializeSection,InitializeTab:_initializeTab}}());

$.extend(MarketWatch.Community,function(){$(function(){MarketWatch.UI.bindDropLists('div');});var _peopleSearch=function(inputElt,buttonElt,searchUrl){var _inputElt=$(inputElt);var _buttonElt=$(buttonElt);var _searchUrl=searchUrl;_inputElt.focus(function(){if(this.className.indexOf("unused")>=0){this.value="";$(this).removeClass("unused");}});_inputElt.blur(function(){if(this.value==""){$(this).addClass("unused");this.value="Enter a name or keywords";}});_inputElt.keydown(function(event){if(event.keyCode==$.ui.keyCode.ENTER){_buttonClick(this);}});var _buttonClick=function(){if(_inputElt.hasClass("unused")){window.alert("Enter a name or keyword to search");}
else{window.location=_searchUrl+"?query="+_inputElt.val();}};_buttonElt.click(_buttonClick);};var _gruopSearch=function(inputElt,buttonElt,searchUrl){var _inputElt=$(inputElt);var _buttonElt=$(buttonElt);var _searchUrl=searchUrl;_inputElt.focus(function(){if(this.className.indexOf("unused")>=0){this.value="";$(this).removeClass("unused");}});_inputElt.blur(function(){if(this.value==""){$(this).addClass("unused");this.value="Search groups";}});_inputElt.keydown(function(event){if(event.keyCode==$.ui.keyCode.ENTER){_buttonClick(this);}});var _buttonClick=function(){if(_inputElt.hasClass("unused")){window.alert("Enter a keyword to search");}
else{window.location=_searchUrl+"?searchinput="+_inputElt.val()+"#finder";}};_buttonElt.click(_buttonClick);};return{PeopleSearch:_peopleSearch,GroupSearch:_gruopSearch}}());

$.extend(MarketWatch.BlueKai,function(){var _data;var _getTrackingData=function(){if(s){return{serverDomain:s.server,primaryProduct:s.channel,pageName:s.pageName,section:s.prop2,articleType:s.prop3,subSection:s.prop26,contentType:s.prop19,encryptedUUID:s.prop25,contentChannel:s.prop1,isSub:s.prop27,edition:s.prop24,referrer:document.referrer!=""?document.referrer.split("/")[2]:""};}
return{serverDomain:"",primaryProduct:"",pageName:"",section:"",articleType:"",subSection:"",contentType:"",encryptedUUID:"",contentChannel:"",isSub:"",edition:"",referrer:document.referrer!=""?document.referrer.split("/")[2]:""};};var _getAdData=function(){var ads=ScrillaZilla.Escort.getAllClients();if(ads.length>0){var data={};var slashSplit;var zone="";var hitBrokers=false;var sections={count:0,items:[]};var zones={count:0,items:[]};var sizes={count:0,items:[]};for(var i=0;i<ads.length;i++){if(sizes.count>=10){break;}
if(!ads[i].Data.autoLoad){continue;}
slashSplit=[];zone="";var slashSplit=ads[i].Data.src.split("/");if(slashSplit.length>=4&&!sections.items[slashSplit[4]]){sections.items[slashSplit[4]]=true;data["adSection"+(++sections.count)]=slashSplit[4];hitBrokers=(slashSplit[4].indexOf("brokerbuttons")>=0);}
if(slashSplit.length>=5){zone=slashSplit[5].substring(0,slashSplit[5].indexOf(";"));if(!zones.items[zone]){zones.items[zone]=true;data["adZone"+(++zones.count)]=zone;}}
var creative=ads[i].Element.children("iframe, object, a, img");if(creative.length>0){if(creative.is("a")){creative=creative.children("img");}
if(!hitBrokers||!sizes.items[creative.width()+"x"+creative.height()]){sizes.items[creative.width()+"x"+creative.height()]=true;data["adSize"+(++sizes.count)]=creative.width()+"x"+creative.height();}}}
return data;}
return{};};var _getData=function(){if(!_data){_data=$.extend(_getTrackingData(),_getAdData());}
return _data;};$(function(){if(typeof(blueKai)!="undefined"){setTimeout(function(){blueKai.blueKai.bk_track(true,_getData());},500);}});return{getData:function(){_getData();}};}());

var BlueGrass=(function(){var Connection=function(runtime,endpoint,callback){var _runtime=runtime;var _endpoint=endpoint;var _callbacks=[];var _subscribeOptions;_callbacks.push(callback);var _channels=new Object();var _impl=null;var _reconnectTimer=null;var thunk=this;var _callback=function(connection,type){$.each(_callbacks,function(){try{this(connection,type);}
catch(err){if(typeof(console)!="undefined"&&console.warn)
console.warn("Error in connection callback: "+err.message);}});};var _channelTrigger=function(message,channel){if(message.h.a=="unsubscribe"){if(_channels[channel.getChannelName()]!=null)
delete _channels[channel.getChannelName()];}
_impl.send(message);};var _systemCallback=function(message){if(message.h.a==="process"&&message.b){if(message.b.reconnect&&_reconnectTimer==null){_impl.setPickupInterval(5000);_reconnectTimer=setTimeout(function(){_reconnect();},2000);}
else if(message.b.pickupInterval&&_impl!=null){_impl.setPickupInterval(message.b.pickupInterval);}
else if(message.b.channelState){_setChannelState(message.b.channelState);}}
else if(message.h.a==="inform"){if(message.h.t==="/system/channelinfo"){_setChannelInfo(message.b);}}};var _reconnect=function(){var channels=[];$.each(_channels,function(){this.clearTimers();channels.push({c:this.getChannelName(),b:this.getCallbacks(),n:this.getLastMessageNumber()});});_channels=new Object();var type="reconnect";if(!_impl||!_impl.isOpen()){type="connect";}
var callback=function(){_callback(thunk,type);$.each(channels,function(){if(_subscribeOptions){_subscribeOptions.sequence=null;_subscribeOptions.number=this.n;}
var channel=thunk.subscribe(this.c,this.b[0],_subscribeOptions);if(this.b.length>1){for(var i=1;i<this.b.length;i++){channel.addCallback(this.b[i]);}}});};_implInitialize(callback);_reconnectTimer=null;};var _setChannelInfo=function(channelInfo){if(channelInfo&&channelInfo.channelName){$.each(_channels,function(){if(this.getChannelName()==channelInfo.channelName){if(channelInfo.deliveryType){this.setDeliveryType(channelInfo.deliveryType);}}});}};var _setChannelState=function(channelState){var channel=_channels[channelState.channelName];if(channel!=null){if(!channelState.enabled){channel.resetState();}}};var _implInitialize=function(callback){_implTerminate();var connectCallback=function(){_callback(thunk,"connect");}
if(callback)
connectCallback=callback;_impl=new ConnectionImpl(connectCallback,function(message){_systemCallback(message);});_impl.initialize(_endpoint,function(impl,messages){_implCallback(impl,messages);});};var _implTerminate=function(){if(_impl!=null){_impl.terminate();_impl=null;}};var _implCallback=function(impl,messages){if(impl!=_impl){impl.terminate();return;}
if(!messages){return;}
for(var i=0;i<messages.length;i++){var channel=_channels[messages[i].h.t];if(channel)
channel.deliver(messages[i]);}};this.subscribe=function(channelName,callback,options){_subscribeOptions=options;var channel;if(_channels[channelName]==null||typeof(_channels[channelName])==='undefined'){channel=new Channel(channelName,callback,options,_channelTrigger);_channels[channelName]=channel;}
else{channel=_channels[channelName];channel.addCallback(callback);}
return channel;};this.getChannel=function(channelName){return _channels[channelName];};this.close=function(){_callbacks=[];_channels=new Object();_implTerminate();};this.reconnect=function(){if(_reconnectTimer==null){_reconnectTimer=setTimeout(function(){_reconnect();},100);}};this.isOpen=function(){if(_impl!=null){return _impl.isOpen();}
else{return false;}}
this.isDisabled=function(){if(_impl!=null){return _impl.isDisabled();}
else{return false;}};this.addCallback=function(callback){_callbacks.push(callback);};this.setTransmitHook=function(hook){_impl.setTransmitHook(hook);};this.setReceiveHook=function(hook){_impl.setReceiveHook(hook);};this.scrambleClientId=function(){_impl.scrambleClientId();};this.getChannelCount=function(){var size=0;for(var key in _channels){if(_channels.hasOwnProperty(key))size++;}
return size;};this.lowLevelSend=function(message){if(_impl!=null){_impl.send(message);}};_implInitialize();};var ConnectionImpl=(function(){return function(connectCallback,systemCallback){var _callback,_endpoint;var _clientInfo,_protocolInfo;var _transmitHookCallback,_receiveHookCallback;var _outgoing=[];var _connectFailCount=0;var _failCount=0;var _inProgress=0;var _timer,_connectTimer;var _isOpen=false,_isDisabled=false;var _sendTimer=null;var _connectCallback=connectCallback;var _systemCallback=systemCallback;var thunk=this;var _pumpMessages=function(){if(!_isOpen)return;_sendTimer=null;var shouldSend=false;if(_inProgress<1){shouldSend=true;}
else if(_inProgress<2&&_outgoing.length>0){shouldSend=true;}
if(shouldSend){var immediate=_outgoing.length>0;var payload={c:JSON.stringify(_clientInfo),m:JSON.stringify(_outgoing.splice(0,100))};if(typeof(_protocolInfo.pickupInterval)==='number'&&_protocolInfo.pickupInterval>0&&_failCount==0&&!immediate){_timer=setTimeout(function(){_messageRequest(payload);},_protocolInfo.pickupInterval);}
else if(_failCount>0){_timer=setTimeout(function(){_messageRequest(payload);},1000*Math.min(900,Math.pow(2,_failCount)));}
else{clearTimeout(_timer);_messageRequest(payload);if(_outgoing.length>0){_sendTimer=setTimeout(_pumpMessages,100);}}}};var _connectFail=function(xhr,status,error,message){_connectFailCount++;_connectTimer=setTimeout(function(){_connectRequest();},1000*Math.min(900,Math.pow(2,_connectFailCount)));};var _connectResponse=function(request,response){_clientInfo=response.clientInfo;_protocolInfo=response.protocolInfo;_inProgress=0;if(response.status.disabled){_isOpen=false;_isDisabled=true;}
else{_isOpen=true;_pumpMessages();if($.isFunction(_connectCallback)){_connectCallback();};}};var _serializeData=function(a){var s=[],add=function(key,value){value=$.isFunction(value)?value():value;s[s.length]=key+"="+value;};$.each(a,function(key,value){add(key,value);});return s.join("&").replace(/%20/g,"+");};var _connectRequest=function(request){var url=_endpoint.to;if(_endpoint.via)
url=_endpoint.via+"?to="+url;if(!request)
request={};$.ajax({type:"GET",url:url,headers:{"X-BGD":_serializeData(request)},dataType:_endpoint.jsonp?"jsonp":"json",cache:false,global:"false",success:function(data){_connectResponse(request,data);},error:function(xhr,status,error){_connectFail(xhr,status,error,this);}});};var _messageRequest=function(request){var url=_protocolInfo.pickupUrl;if(_endpoint.altPickupUrl){url=_endpoint.altPickupUrl;}
if(_endpoint.via){url=_endpoint.via+"?to="+url;}
_inProgress++;if(_transmitHookCallback!=null){$.each(eval(request.m),function(){_transmitHookCallback(this,_clientInfo);});}
$.ajax({type:"GET",url:url,headers:{"X-BGD":_serializeData(request)},dataType:_endpoint.jsonp?"jsonp":"json",global:"false",cache:false,success:function(data){_messageResponse(data);},error:function(xhr,status,error){_messageFail(xhr,status,error,this);}});};var _messageResponse=function(response){_inProgress--;_failCount=0;if(response!=null&&response.length>0){if(_receiveHookCallback!=null){$.each(response,function(){_receiveHookCallback(this);});}
$.each(response,function(){if(this.h&&this.h.t&&this.h.t.indexOf("\/system\/")===0)
_systemCallback(this);});}
_callback(thunk,response);_pumpMessages();};var _messageFail=function(xhr,status,error,message){_inProgress--;_failCount++;var originalMessage=unescape(message.data);var messageData=JSON.parse(originalMessage);if(messageData&&messageData.m&&messageData.m.length>0){for(var i=0;i<messageData.m.length;i++){_outgoing.push(messageData.m[i]);}}
_pumpMessages();};this.initialize=function(endpoint,callback){_endpoint=endpoint;_callback=callback;_connectRequest();};this.terminate=function(){_isOpen=false;if(_timer)
clearInterval(_timer);if(_connectTimer)
clearInterval(_connectTimer);};this.setPickupInterval=function(interval){_protocolInfo.pickupInterval=interval;};this.scrambleClientId=function(){_clientInfo.c="Boom!";};this.setTransmitHook=function(hook){_transmitHookCallback=hook;};this.setReceiveHook=function(hook){_receiveHookCallback=hook;};this.send=function(messages){if(!_isOpen)return;_outgoing.splice(_outgoing.length,0,messages);if(_sendTimer==null){_sendTimer=setTimeout(_pumpMessages,100);}};this.isOpen=function(){return _isOpen;}
this.isDisabled=function(){return _isDisabled;}}})();var Channel=function(channelName,callback,options,trigger){var _channelName=channelName;var _callbacks=[];var _currentSequence="";var _firstMessageNumber="0";var _trigger=trigger;_callbacks.push(callback);var _callback=function(message){for(var i=0;i<_callbacks.length;i++){try{_callbacks[i](message);}
catch(err){if(typeof(console)!="undefined"&&console.warn)
console.warn("Error delivering message on \""+_channelName+"\": "+err.message);}}};var _deliveryType="";if(options&&options.sequence)
_currentSequence=options.sequence;if(options&&options.number)
_firstMessageNumber=options.number;var _lastMessageNumber=_firstMessageNumber;var _ackTimer=null;var _acksSent=0;var _bypassQueue=[];var _bypassTimer=null;var _securityToken=null;if(options&&options.securityToken)
_securityToken=options.securityToken;if($.isFunction(_trigger)){var message={h:{t:_channelName,a:"subscribe"},b:{sequence:_currentSequence,number:_firstMessageNumber}};if(_securityToken){message.securityToken=_securityToken;}
_trigger(message,this);}
var thunk=this;var _scanBypassQueue=function(){if(_bypassQueue&&_bypassQueue.length>0){_bypassQueue.sort(function(a,b){return a.h.n-b.h.n;});var index=0;for(var i=0;i<_bypassQueue.length;i++){if(_bypassQueue[i].h.n==_lastMessageNumber+1){_callback(_bypassQueue[i]);_lastMessageNumber=_bypassQueue[i].h.n;index=i+1;}
else{break;}}
if(_bypassQueue.length>index)
_bypassQueue=_bypassQueue.slice(index);else{_bypassQueue=[];}
if(_bypassQueue.length>0){_bypassTimer=setTimeout(function(){_scanBypassQueue();},1000);}
else{clearTimeout(_ackTimer);_bypassTimer=null;_acksSent=0;_bypassQueue=[];}}};var _sendAck=function(){if(_acksSent>=10){_ackTimer=setTimeout(function(){thunk.unsubscribe();},1000);return;}
var numbers=1+"-"+_lastMessageNumber;var numbersInQueue="";var last=0;var next="";_bypassQueue.sort(function(a,b){return a.h.n-b.h.n;});if(typeof(_bypassQueue!='undefined')){for(var i=0;i<_bypassQueue.length;i++){var m=_bypassQueue[i];if(last==0){numbersInQueue=m.h.n;}
else if(m.h.n==last+1){var next="-"+m.h.n;}
else{if(next.length>0){numbersInQueue+=next+","+m.h.n;next="";}
else{numbersInQueue+=","+m.h.n;}}
last=m.h.n;}
numbersInQueue+=next;}
if(numbersInQueue.length>0||numbersInQueue>0)
numbers+=","+numbersInQueue;if($.isFunction(_trigger)){var message={h:{t:_channelName,a:"acknowledge"},b:{sequence:_currentSequence,numbers:numbers}};_trigger(message,thunk);}
_acksSent++;_ackTimer=setTimeout(function(){_sendAck();},1000*Math.min(32,Math.pow(2,_acksSent)));};this.getChannelName=function(){return _channelName;};this.getDeliveryType=function(){return _deliveryType;};this.setDeliveryType=function(deliveryType){_deliveryType=deliveryType;};this.getCallbacks=function(){return _callbacks;};this.clearTimers=function(){if(_ackTimer)
clearTimeout(_ackTimer);if(_bypassTimer)
clearTimeout(_bypassTimer);};this.unsubscribe=function(){if($.isFunction(_trigger)){var message={h:{t:_channelName,a:"unsubscribe"}};_trigger(message,this);}};this.deliver=function(message){if(_callback&&message&&message.h&&(message.h.t==_channelName)){if(message.h.a=="retransmit"){var inQueue=false;for(var i=0;i<_bypassQueue.length;i++){if(_bypassQueue[i].h.n==message.h.n){inQueue=true;break;}}
if(!inQueue){_bypassQueue.push(message);}
if(_bypassTimer==null){_bypassTimer=setTimeout(function(){_scanBypassQueue();},1000);}}
else if(message.h.a=="broadcast"){if(message.h.s!=_currentSequence){_currentSequence=message.h.s;_firstMessageNumber=message.h.n;_lastMessageNumber=message.h.n;_bypassQueue=[];clearTimeout(_ackTimer);_acksSent=0;}
var messageOk=false;if((_deliveryType=="Lossy"&&message.h.n>_lastMessageNumber)||_deliveryType=="BestEffort"){messageOk=true;}
else if(_deliveryType=="Guaranteed"){if(message.h.n<=_lastMessageNumber&&message.h.n!=_firstMessageNumber){return;}
if(_lastMessageNumber+1==message.h.n||message.h.n==_firstMessageNumber){messageOk=true;}
else{var count=_bypassQueue.push(message);if(count==1){_ackTimer=setTimeout(function(){_sendAck();},1000);}
else if(count>=50){this.resetState();this.deliver(message);}}}
if(messageOk){_lastMessageNumber=message.h.n;_callback(message,_channelName);}}}};this.resetState=function(){_currentSequence="";_bypassQueue=[];clearTimeout(_ackTimer);_acksSent=0;};this.addCallback=function(callback){if($.inArray(callback,_callbacks)==-1)
_callbacks.push(callback);};this.removeCallback=function(callback){var index=-1;if(_callbacks.length==1&&_callbacks[0]==callback){this.unsubscribe();return;}
for(var i=0;i<_callbacks.length;i++){if(_callbacks[i]==callback)
index=i;}
if(index>=0)
_callbacks=BlueGrass.Utility.arrayRemove(_callbacks,index);};this.getLastMessageNumber=function(){return _lastMessageNumber;};};var _connection=null;var _userOffset=new Date().getTimezoneOffset()/60;var _reconTimer=null;var _isConnecting=false;return{Runtime:{openConnection:function(endpoint,callback){if(!endpoint)
endpoint={to:"/bg/api/Connect.ashx"};else if(!endpoint.to)
endpoint.to="/bg/api/Connect.ashx";if((document.domain=="localhost"||document.domain=="localhost.marketwatch.com")&&typeof(_bgProxyUrl)!="undefined"){endpoint.via=_bgProxyUrl;if(endpoint.to.substr(0,5)!="http:")
endpoint.to="http://mw5qa.marketwatch.com"+endpoint.to;}
if(_connection==null){if(_isConnecting){setTimeout(function(){BlueGrass.Runtime.openConnection(endpoint,callback);},100);}
else{_isConnecting=true;_connection=new Connection(this,endpoint,callback);var checkConn=function(){if(_connection.isOpen())
_isConnecting=false;else
setTimeout(checkConn,1000);};checkConn();}}
else{_connection.addCallback(callback);if(_connection.isOpen()){callback(_connection,"connect");}
else if(!_isConnecting){if(_reconTimer==null){_reconTimer=setTimeout(function(){if(!_connection.isOpen()&&!_connection.isDisabled())
_connection.reconnect();_reconTimer=null;},1000);}}}},getConnection:function(){return _connection;}},Utility:{arrayRemove:function(array,from,to){var rest=array.slice((to||from)+1||array.length);array.length=from<0?array.length+from:from;return array.push.apply(array,rest);},convertToExchangeTime:function(utcDateString,offset){if(typeof(offset)!='undefined')
offset=offset+_userOffset;else
offset=0;var converted=parseInt(utcDateString);if(isNaN(converted)){if(utcDateString.indexOf("-")>=0||utcDateString.indexOf("+")>=0)
utcDateString=utcDateString.substring(6,utcDateString.length-7);else
utcDateString=utcDateString.substring(6,utcDateString.length-2);converted=parseInt(utcDateString);}
converted+=3600000*offset;var dateTime=new Date(converted);return dateTime;},prettyDate:function(date,offset){if(typeof(date)!="object")
date=this.convertToExchangeTime(date,offset);var time_formats=[[60,'Just Now'],[90,'1 Minute'],[3600,'Minutes',60],[5400,'1 Hour'],[86400,'Hours',3600],[129600,'1 Day'],[604800,'Days',86400],[907200,'1 Week'],[2628000,'Weeks',604800],[3942000,'1 Month'],[31536000,'Months',2628000],[47304000,'1 Year'],[3153600000,'Years',31536000],[4730400000,'1 Century'],];var dt=new Date,seconds=(dt-date)/1000,token=' Ago',i=0,format;if(seconds<0){seconds=Math.abs(seconds);token='';}
while(format=time_formats[i++]){if(seconds<format[0]){if(format.length==2){return format[1]+(i>1?token:'');}else{return Math.round(seconds/format[2])+' '+format[1]+(i>1?token:'');}}}
if(seconds>4730400000)
return Math.round(seconds/4730400000)+' Centuries'+token;return date_str;}}};})();

$.extend(BlueGrass,{Quote:function(){var _elementMap=new Object();var _format={last:"#,###.00",largeLast:"###,###",largeLastMinimum:100000,volume:"#,###",largeVolumeText:true,largeVolumeMinimum:1000000,change:"#,###.00",percentChange:"#,###.00%",date:"m/d/y g:i:s a",dots:false};var _volumeFormat=function(number,format){number=parseInt(number);if(format.largeVolumeText&&number>=format.largeVolumeMinimum){var smallified=number/format.largeVolumeMinimum;var indicator="";if(number>=1000000000)indicator="b"
else if(number>=1000000)indicator="m"
else if(number>=1000)indicator="k"
return smallified.numberFormat(format.volume+".00"+indicator);}
return number.numberFormat(format.volume);}
var _quoteCallback=function(message){var elements=_elementMap[message.h.t].elements;if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){var filter=this.data("bgfilter");if(filter&&typeof(filter)=="function"){try{if(filter(message))
return;}catch(err){}}
this.trigger("bgTick",message);});}};var _tickHandler=function(e,message){var element=$(this);var elementData=element.data("bgquote");if(elementData.needToBind){elementData.needToBind=false;elementData.lastElement=element.find(".bgLast");elementData.changeElement=element.find(".bgChange");elementData.percentChangeElement=element.find(".bgPercentChange");elementData.timeElement=element.find(".bgTimestamp");elementData.volumeElement=element.find(".bgVolume");elementData.bidElement=element.find(".bgBid");elementData.askElement=element.find(".bgAsk");}
var onlyUpdateVolume=false;if(elementData&&elementData.volumeChannel&&elementData.volumeChannel==message.h.t)
onlyUpdateVolume=true;if(message&&message.b){if(elementData.filterMoment>0&&elementData.filterType.length>0){if(new Date().getTime()>elementData.filterMoment){elementData.filterMoment=0;elementData.filterType="";}
else{if(message.b.y==elementData.filterType)
return;}}
var format=$.extend({},_format);var custom=element.data("bgFormat");if(custom)
$.extend(format,custom);if(!onlyUpdateVolume&&elementData.lastElement.length>0&&message.b.l){var lastFormat=message.b.l>=format.largeLastMinimum?format.largeLast:format.last;elementData.lastElement.text(message.b.l.numberFormat(lastFormat));}
if(!onlyUpdateVolume&&elementData.bidElement.length>0&&message.b.b){var lastFormat=message.b.b>=format.largeLastMinimum?format.largeLast:format.last;elementData.bidElement.text(message.b.b.numberFormat(lastFormat));}
if(!onlyUpdateVolume&&elementData.askElement.length>0&&message.b.a){var lastFormat=message.b.b>=format.largeLastMinimum?format.largeLast:format.last;elementData.askElement.text(message.b.a.numberFormat(lastFormat));}
var changePrefix=message.b.c>0?"+":"";if(!onlyUpdateVolume&&elementData.changeElement.length>0&&message.b.c){elementData.changeElement.text(changePrefix+message.b.c.numberFormat(format.change));}
if(!onlyUpdateVolume&&elementData.percentChangeElement.length>0&&message.b.c&&message.b.l){var percentChange=(message.b.l-(message.b.l-message.b.c))/(message.b.l-message.b.c);elementData.percentChangeElement.text(changePrefix+percentChange.numberFormat(format.percentChange));}
if(!onlyUpdateVolume&&elementData.timeElement.length>0&&message.b.z){var date=BlueGrass.Utility.convertToExchangeTime(message.b.z,message.b.e)
var formattedDate=date.dateFormat(format.date,false);elementData.timeElement.text(format.dots?formattedDate.replace(/(a|A|p|P)(M|m)/,"$1.$2."):formattedDate);}
if((onlyUpdateVolume||!elementData.volumeChannel)&&elementData.volumeElement.length>0&&message.b.v)
elementData.volumeElement.text(_volumeFormat(message.b.v,format));if(!onlyUpdateVolume&&message.b.l){var theClass="";if(elementData.lastPrice>message.b.l)
theClass="tickDown";else if(elementData.lastPrice<message.b.l)
theClass="tickUp";elementData.lastPrice=message.b.l;if(theClass.length>0){element.addClass(theClass);setTimeout(function(){element.removeClass(theClass);},500);}}
if(!onlyUpdateVolume&&message.b.c){var direction="neutral";if(message.b.c<0)
direction="down";else if(message.b.c>0)
direction="up";if(direction!=elementData.lastDirection){element.removeClass("up").removeClass("down").removeClass("neutral");element.addClass(direction);elementData.lastDirection=direction;}}
if(message.b.y=="aftermarket"&&elementData.filterType==""&&elementData.filterMoment==0&&elementData.lastType=="normal"){elementData.filterMoment=new Date().getTime()+1800000;elementData.filterType="normal";}
else if(message.b.y=="normal"&&elementData.filterType==""&&elementData.filterMoment==0&&elementData.lastType=="premarket"){elementData.filterMoment=new Date().getTime()+1800000;elementData.filterType="premarket";}
if(message.b.y){elementData.lastType=message.b.y;}}};return{setup:function(){$("div.bgQuote, span.bgQuote, tr.bgQuote, td.bgQuote").each(function(){var $this=$(this);var bgChannel=$this.find("span.bgChannel").text();var bgRealtimeChannel=$this.find("span.bgRealtimeChannel").text();if(bgChannel||bgRealtimeChannel)
BlueGrass.Quote.bindElement(this,bgChannel,bgRealtimeChannel,{sequence:null,number:1},{sequence:null,number:1});});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("bluegrass quote setup called more than once");};},unbindElement:function(element,channelName){if(!_elementMap[channelName])
return;var elements=_elementMap[channelName].elements;var channel=_elementMap[channelName].channel;if(elements!=null&&elements.length==1&&elements[0][0]==element[0]){channel.removeCallback(_quoteCallback);_elementMap[channelName]=null;delete _elementMap[channelName];}
else if(elements!=null&&elements.length>1){var index=-1;for(var i=0;i<elements.length;i++){if(elements[i][0]==element[0]){index=i;break;}}
if(index>=0)
elements=BlueGrass.Utility.arrayRemove(elements,index);}},bindElement:function(element,channelName,realtimeChannel,options,realtimeOptions){var _connection=BlueGrass.Runtime.getConnection();var volumeOnlyChannel=null;if(realtimeChannel&&realtimeChannel.length>0){if(channelName&&channelName.length>0)
volumeOnlyChannel=channelName;channelName=realtimeChannel;}
if(!_connection||_connection==null||typeof(_connection)==='undefined'||!channelName||channelName.length==0)
return;if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]={channel:null,elements:[]};}
if((volumeOnlyChannel&&volumeOnlyChannel.length>0)&&(!_elementMap[volumeOnlyChannel]||_elementMap[volumeOnlyChannel]==null||typeof(_elementMap[volumeOnlyChannel])==='undefined')){_elementMap[volumeOnlyChannel]={channel:null,elements:[]};}
element=$(element);var elementData={lastPrice:0,lastDirection:"neutral",channel:channelName,volumeChannel:volumeOnlyChannel,filterType:"",filterMoment:0,lastType:"",needToBind:true};element.data("bgquote",elementData);_elementMap[channelName].elements.push(element);if(volumeOnlyChannel){_elementMap[volumeOnlyChannel].elements.push(element);}
element.bind("bgTick",_tickHandler);if(_elementMap[channelName].channel==null){_elementMap[channelName].channel=_connection.subscribe(channelName,_quoteCallback,options);}
if(volumeOnlyChannel&&volumeOnlyChannel.length>0&&_elementMap[volumeOnlyChannel].channel==null){_elementMap[volumeOnlyChannel].channel=_connection.subscribe(volumeOnlyChannel,_quoteCallback,realtimeOptions);}},setFormat:function(formatName,format){_format[formatName]=format;},getFormat:function(formatName){return _format[formatName];}};}()});

$.extend(BlueGrass,{MarketState:function(){var _elementMap=new Object();var _timerMap=new Object();var _stateCallback=function(message){var elements=_elementMap[message.h.t];if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){this.element.trigger("bgUpdateState",{message:message,elementData:this});});}};var _timerCallback=function(channelName,theNewState){var elements=_elementMap[channelName];if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){_updateElement(this,theNewState);});}};var _updateElement=function(elementData,state){var currentText=_getStateText(state);var currentStyle=currentText.toLowerCase();elementData.currentState=state;elementData.currentElement.text(currentText);elementData.element.attr("title",state).removeClass("after").removeClass("pre").removeClass("open").removeClass("closed").addClass(currentStyle);};var _getStateText=function(state){state=state.toLowerCase();if(state.length>=4&&state.substring(0,4)=="open"){return"Open";}
else if(state.toLowerCase()=="pre-market"){return"Pre";}
else if(state.toLowerCase()=="after-market"){return"After";}
return"Closed";};return{setup:function(){$("div.bgMarketState").each(function(){var channel=$(this).find("span.bgChannel").text();if(channel&&channel.length>0)
BlueGrass.MarketState.bindElement(this,channel);});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("bluegrass marketstate setup called more than once");};},unbindElement:function(element,channelName){var elements=_elementMap[channelName];if(elements!=null&&elements.length==1&&elements[0].element[0]==element[0]){elements[0].channel.removeCallback(_stateCallback);_elementMap[channelName]=null;}
else if(elements!=null&&elements.length>1){var index=-1;for(var i=0;i<elements.length;i++){if(elements[i].element[0]==element[0]){index=i;break;}}
if(index>=0)
elements=BlueGrass.Utility.arrayRemove(elements,index);}},bindElement:function(element,channelName){var _connection=BlueGrass.Runtime.getConnection();if(!_connection||_connection==null||typeof(_connection)==='undefined')
return;if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]=[];}
element=$(element);var elementData={element:element,currentElement:element.find(".bgCurrentMarketState"),currentState:element.find(".bgCurrentMarketState").text(),nextOccurance:null,channel:null};_elementMap[channelName].push(elementData);if(_elementMap[channelName].length>1)
elementData.channel=_elementMap[channelName][0].channel;element.bind("bgUpdateState",function(e,data){var message=data.message;var elementData=data.elementData;if(typeof(_timerMap[channelName])!='undefined'&&_timerMap[channelName])
clearTimeout(_timerMap[channelName]);if(message&&message.b){if(message.b.x&&message.b.s&&typeof(message.b.s)=='number'){var temp=function(){if(new Date().getTime()>=elementData.nextOccurance){_timerCallback(channelName,message.b.x);}
else{var timeUntil=elementData.nextOccurance-new Date().getTime();var delay=timeUntil<15000?timeUntil:15000;_timerMap[channelName]=setTimeout(temp,delay);}};elementData.nextOccurance=new Date().getTime()+(message.b.s*1000);var delay=(message.b.s<15?message.b.s:15)*1000
_timerMap[channelName]=setTimeout(temp,delay);}
if(message.b.c){_updateElement(elementData,message.b.c);}}});if(elementData.channel==null){elementData.channel=_connection.subscribe(channelName,_stateCallback);}}};}()});

$.extend(BlueGrass,{Conga:function(){var _elementMap=new Object();var _congaCallback=function(message){var elements=_elementMap[message.h.t];if(elements!=null&&typeof(elements)!='undefined'){$.each(elements,function(){this.element.trigger("bgUpdateConga",{message:message,elementData:this});});}};return{setup:function(){var congas=$("div.bgConga");congas.each(function(){var $this=$(this)
var channel=$this.find("span.bgChannel").text()
if(channel)
BlueGrass.Conga.bindElement(this,channel,$this.find("span.bgRevision").text());});this.setup=function(){if(typeof(console)!="undefined"&&console.warn)console.warn("bluegrass conga setup called more than once");};},unbindElement:function(element,channelName){var elements=_elementMap[channelName];if(elements!=null&&elements.length==1&&elements[0].element[0]==element[0]){elements[0].channel.removeCallback(_congaCallback);_elementMap[channelName]=null;}
else if(elements!=null&&elements.length>1){var index=-1;for(var i=0;i<elements.length;i++){if(elements[i].element[0]==element[0]){index=i;break;}}
if(index>=0)
elements=BlueGrass.Utility.arrayRemove(elements,index);}},bindElement:function(element,channelName,currentRevisionId){if(!currentRevisionId||typeof(currentRevisionId)!="number")
{currentRevisionId=0;}
var _connection=BlueGrass.Runtime.getConnection();if(!_connection||_connection==null||typeof(_connection)==='undefined'||!channelName||channelName.length==0){return;}
if(!_elementMap[channelName]||_elementMap[channelName]==null||typeof(_elementMap[channelName])==='undefined'){_elementMap[channelName]=[];}
element=$(element);var elementData={element:element,channel:null};_elementMap[channelName].push(elementData);if(_elementMap[channelName].length>1){elementData.channel=_elementMap[channelName][0].channel;}
element.bind("bgUpdateConga",function(e,data){var message=data.message;var elementData=data.elementData;if(message&&message.b){elementData.element.fadeOut(500,function(){elementData.element.html($(message.b.h));elementData.element.fadeIn(500);});}});if(elementData.channel==null){elementData.channel=_connection.subscribe(channelName,_congaCallback);}}};}()});

$.extend(BlueGrass,{Bulletin:function(){var _channel=null;var _bulletinElement=null;var _timeout=null;var _bulletinExpire=function(){_bulletinElement.text("");_bulletinElement.removeClass("active");_bulletinElement.trigger("bulletinExpire");_timeout=null;};var _bulletinCallback=function(message){var expire=BlueGrass.Utility.convertToExchangeTime(message.b.e);if(expire&&message.b.h){var now=new Date();var tte=expire.getTime()-now.getTime();if(tte>0){if(message.b.u)
_bulletinElement.html('<a href="'+message.b.u+'">'+message.b.h+'</a>');else
_bulletinElement.text(message.b.h);_bulletinElement.addClass("active");_bulletinElement.trigger("bulletinActive",message);if(!_timeout)
clearTimeout(_timeout);_timeout=setTimeout(_bulletinExpire,tte);}}};return{bindElement:function(element,optionalChannel,options){var _connection=BlueGrass.Runtime.getConnection();if(!element||!_connection||_connection==null||typeof(_connection)==='undefined')
return;if(!optionalChannel)
optionalChannel="/bulletin";_bulletinElement=element;_channel=_connection.subscribe(optionalChannel,_bulletinCallback,options);},unbindElement:function(element){if(_channel&&_bulletinElement.element[0]==element[0]){_channel.removeCallback(_bulletinCallback);if(!_timeout)
clearTimeout(_timeout);}}};}()});

Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(format,ignore_offset){if(Date.formatFunctions[format]==null){Date.createNewFormat(format);}
var func=Date.formatFunctions[format];if(ignore_offset||!this.offset){return this[func]();}else{return(new Date(this.valueOf()-this.offset))[func]();}};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function(){return ";var special=false;var ch='';for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true;}
else if(special){special=false;code+="'"+String.escape(ch)+"' + ";}
else{code+=Date.getFormatCode(ch);}}
eval(code.substring(0,code.length-3)+";}");};Date.getFormatCode=function(character){switch(character){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"q":return"(this.getHours() < 12 ? 'a.m.' : 'p.m.') + ";case"Q":return"(this.getHours() < 12 ? 'A.M.' : 'P.M.') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(character)+"' + ";}};Date.parseDate=function(input,format){if(Date.parseFunctions[format]==null){Date.createParser(format);}
var func=Date.parseFunctions[format];return Date[func](input);};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input){\n"
+"var y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = 0;\n"
+"var d = new Date();\n"
+"y = d.getFullYear();\n"
+"m = d.getMonth();\n"
+"d = d.getDate();\n"
+"var results = input.match(Date.parseRegexes["+regexNum+"]);\n"
+"if (results && results.length > 0) {";var regex="";var special=false;var ch='';for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true;}
else if(special){special=false;regex+=String.escape(ch);}
else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c;}}}
code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n"
+"{return new Date(y, m, d, h, i, s).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n"
+"{return new Date(y, m, d, h, i).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0 && d > 0 && h >= 0)\n"
+"{return new Date(y, m, d, h).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0 && d > 0)\n"
+"{return new Date(y, m, d).applyOffset(z);}\n"
+"else if (y > 0 && m >= 0)\n"
+"{return new Date(y, m).applyOffset(z);}\n"
+"else if (y > 0)\n"
+"{return new Date(y).applyOffset(z);}\n"
+"}return null;}";Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$");eval(code);};Date.formatCodeToRegex=function(character,currentGroup){switch(character){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+currentGroup+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+currentGroup+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+currentGroup+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+currentGroup+"], 10);\n"
+"y = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+currentGroup+"] == 'am') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+currentGroup+"] == 'AM') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"q":return{g:1,c:"if (results["+currentGroup+"] == 'a.m.') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(a.m.|p.m.)"};case"Q":return{g:1,c:"if (results["+currentGroup+"] == 'A.M.') {\n"
+"if (h == 12) { h = 0; }\n"
+"} else { if (h < 12) { h += 12; }}",s:"(A.M.|P.M.)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"O":case"P":return{g:1,c:"z = Date.parseOffset(results["+currentGroup+"], 10);\n",s:"(Z|[+-]\\d{2}:?\\d{2})"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:1,c:"s = parseInt(results["+currentGroup+"], 10);\n",s:"([+-]\\d{1,5})"};default:return{g:0,c:null,s:String.escape(character)};}};Date.parseOffset=function(str){if(str=="Z"){return 0;}
var seconds;seconds=parseInt(str[0]+str[1]+str[2])*3600;if(str[3]==":"){seconds+=parseInt(str[4]+str[5])*60;}else{seconds+=parseInt(str[3]+str[4])*60;}
return seconds;};Date.prototype.applyOffset=function(offset_seconds){this.offset=offset_seconds*1000;this.setTime(this.valueOf()+this.offset);return this;};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3").replace(/^.*?[0-9]{4} \(([A-Z]{3})\)/,"$1");};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")
+String.leftPad(Math.floor(this.getTimezoneOffset()/60),2,"0")
+String.leftPad(this.getTimezoneOffset()%60,2,"0");};Date.prototype.getDayOfYear=function(){var num=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var i=0;i<this.getMonth();++i){num+=Date.daysInMonth[i];}
return num+this.getDate()-1;};Date.prototype.getWeekOfYear=function(){var now=this.getDayOfYear()+(4-this.getDay());var jan1=new Date(this.getFullYear(),0,1);var then=(7-jan1.getDay()+4);document.write(then);return String.leftPad(((now-then)/7)+1,2,"0");};Date.prototype.isLeapYear=function(){var year=this.getFullYear();return((year&3)==0&&(year%100||(year%400==0&&year)));};Date.prototype.getFirstDayOfMonth=function(){var day=(this.getDay()-(this.getDate()-1))%7;return(day<0)?(day+7):day;};Date.prototype.getLastDayOfMonth=function(){var day=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return(day<0)?(day+7):day;};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()];};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};String.escape=function(string){return string.replace(/('|\\)/g,"\\$1");};String.leftPad=function(val,size,ch){var result=new String(val);if(ch==null){ch=" ";}
while(result.length<size){result=ch+result;}
return result;};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y\\-m\\-d\\TH\\:i\\:sO",ISO8601ShortPattern:"Y\\-m\\-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};

Number.formatFunctions={count:0};Number.prototype.NaN='NaN';Number.prototype.posInfinity='Infinity';Number.prototype.negInfinity='-Infinity';Number.prototype.numberFormat=function(format,context){if(isNaN(this)){return Number.prototype.NaNstring;}
else if(this==+Infinity){return Number.prototype.posInfinity;}
else if(this==-Infinity){return Number.prototype.negInfinity;}
else if(Number.formatFunctions[format]==null){Number.createNewFormat(format);}
return this[Number.formatFunctions[format]](context);}
Number.createNewFormat=function(format){var funcName="format"+Number.formatFunctions.count++;Number.formatFunctions[format]=funcName;var code="Number.prototype."+funcName+" = function(context){\n";var formats=format.split(";");switch(formats.length){case 1:code+=Number.createTerminalFormat(format);break;case 2:code+="return (this < 0) ? this.numberFormat(\""
+String.escape(formats[1])
+"\", 1) : this.numberFormat(\""
+String.escape(formats[0])
+"\", 2);";break;case 3:code+="return (this < 0) ? this.numberFormat(\""
+String.escape(formats[1])
+"\", 1) : ((this == 0) ? this.numberFormat(\""
+String.escape(formats[2])
+"\", 2) : this.numberFormat(\""
+String.escape(formats[0])
+"\", 3));";break;default:code+="throw 'Too many semicolons in format string';";break;}
eval(code+"}");}
Number.createTerminalFormat=function(format){if(format.length>0&&format.search(/[0#?]/)==-1){return"return '"+String.escape(format)+"';\n";}
var code="var val = (context == null) ? new Number(this) : Math.abs(this);\n";var thousands=false;var lodp=format;var rodp="";var ldigits=0;var rdigits=0;var scidigits=0;var scishowsign=false;var sciletter="";m=format.match(/\..*(e)([+-]?)(0+)/i);if(m){sciletter=m[1];scishowsign=(m[2]=="+");scidigits=m[3].length;format=format.replace(/(e)([+-]?)(0+)/i,"");}
var m=format.match(/^([^.]*)\.(.*)$/);if(m){lodp=m[1].replace(/\./g,"");rodp=m[2].replace(/\./g,"");}
if(format.indexOf('%')>=0){code+="val *= 100;\n";}
m=lodp.match(/(,+)(?:$|[^0#?,])/);if(m){code+="val /= "+Math.pow(1000,m[1].length)+"\n;";}
if(lodp.search(/[0#?],[0#?]/)>=0){thousands=true;}
if((m)||thousands){lodp=lodp.replace(/,/g,"");}
m=lodp.match(/0[0#?]*/);if(m){ldigits=m[0].length;}
m=rodp.match(/[0#?]*/);if(m){rdigits=m[0].length;}
if(scidigits>0){code+="var sci = Number.toScientific(val,"
+ldigits+", "+rdigits+", "+scidigits+", "+scishowsign+");\n"
+"var arr = [sci.l, sci.r];\n";}
else{code+="var arr = val.round("+rdigits+").toFixed("+rdigits+").split('.');\n";code+="arr[0] = (val < 0 ? '-' : '') + String.leftPad((val < 0 ? arr[0].substring(1) : arr[0]), "
+ldigits+", '0');\n";}
if(thousands){code+="arr[0] = Number.addSeparators(arr[0]);\n";}
code+="arr[0] = Number.injectIntoFormat(arr[0].reverse(), '"
+String.escape(lodp.reverse())+"', true).reverse();\n";if(rdigits>0){code+="arr[1] = Number.injectIntoFormat(arr[1], '"+String.escape(rodp)+"', false);\n";}
if(scidigits>0){code+="arr[1] = arr[1].replace(/(\\d{"+rdigits+"})/, '$1"+sciletter+"' + sci.s);\n";}
return code+"return arr.join('.');\n";}
Number.toScientific=function(val,ldigits,rdigits,scidigits,showsign){var result={l:"",r:"",s:""};var ex="";var before=Math.abs(val).toFixed(ldigits+rdigits+1).trim('0');var after=Math.round(new Number(before.replace(".","").replace(new RegExp("(\\d{"+(ldigits+rdigits)+"})(.*)"),"$1.$2"))).toFixed(0);if(after.length>=ldigits){after=after.substring(0,ldigits)+"."+after.substring(ldigits);}
else{after+='.';}
result.s=(before.indexOf(".")-before.search(/[1-9]/))-after.indexOf(".");if(result.s<0){result.s++;}
result.l=(val<0?'-':'')+String.leftPad(after.substring(0,after.indexOf(".")),ldigits,"0");result.r=after.substring(after.indexOf(".")+1);if(result.s<0){ex="-";}
else if(showsign){ex="+";}
result.s=ex+String.leftPad(Math.abs(result.s).toFixed(0),scidigits,"0");return result;}
Number.prototype.round=function(decimals){if(decimals>0){var m=this.toFixed(decimals+1).match(new RegExp("(-?\\d*)\.(\\d{"+decimals+"})(\\d)\\d*$"));if(m&&m.length){var postDeci=Math.round(m[2]+"."+m[3]);if(postDeci>=Math.pow(10,decimals)){postDeci=0;m[1]=new Number(m[1])+1;};return new Number(m[1]+"."+String.leftPad(postDeci,decimals,"0"));}}
return this;}
Number.injectIntoFormat=function(val,format,stuffExtras){var i=0;var j=0;var result="";var revneg=val.charAt(val.length-1)=='-';if(revneg){val=val.substring(0,val.length-1);}
while(i<format.length&&j<val.length&&format.substring(i).search(/[0#?]/)>=0){if(format.charAt(i).match(/[0#?]/)){if(val.charAt(j)!='-'){result+=val.charAt(j);}
else{result+="0";}
j++;}
else{result+=format.charAt(i);}
++i;}
if(revneg&&j==val.length){result+='-';}
if(j<val.length){if(stuffExtras){result+=val.substring(j);}
if(revneg){result+='-';}}
if(i<format.length){result+=format.substring(i);}
return result.replace(/#/g,"").replace(/\?/g," ");}
Number.addSeparators=function(val){return val.reverse().replace(/(\d{3})/g,"$1,").reverse().replace(/^(-)?,/,"$1");}
String.prototype.reverse=function(){var res="";for(var i=this.length;i>0;--i){res+=this.charAt(i-1);}
return res;}
String.prototype.trim=function(ch){if(!ch)ch=' ';return this.replace(new RegExp("^"+ch+"+|"+ch+"+$","g"),"");}
String.leftPad=function(val,size,ch){var result=new String(val);if(ch==null){ch=" ";}
while(result.length<size){result=ch+result;}
return result;}
String.escape=function(string){return string.replace(/('|\\)/g,"\\$1");}
