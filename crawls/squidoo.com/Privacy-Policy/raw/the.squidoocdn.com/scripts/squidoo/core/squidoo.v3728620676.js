!function($){if(!window.console){window.console={log:function(){},info:function(){},debug:function(){},error:function(){}}}$.fn.attention=function(opts){opts=$.extend({start:"#ff9",end:"white",delay:0,prop:"backgroundColor"},opts);var $this=$(this);setTimeout(function(){var start={};start[opts.prop]=opts.start;var end={};end[opts.prop]=opts.end;$this.css(start).animate(end,1500)},opts.delay)};$.fn.front=function(reveal){if(reveal===undefined){reveal="show"}var top=Math.max.apply(null,$.map($("body > *"),function(el,n){var pos=$(el).css("position");if(pos=="absolute"||pos=="fixed"){return parseInt($(el).css("z-index"))||1}else{return 0}}));this.each(function(i,e){$(e).css("z-index",++top);if(reveal){$(e)[reveal](reveal=="fadeIn"?"slow":null)}});return this};$.fn.fixAt=function(pos){this.addClass("absolute").css("top",($(window).scrollTop()+pos)+"px");return this};$.fn.destroy=function(){this.trigger("destroy");this.remove();return this};$.fn.captcha=function(image_only,tabindex){var element=this.first();tabindex=(tabindex==undefined?"":tabindex);$(element).load("/auth"+(image_only?"/ajax_captcha_image?tabindex="+tabindex:"/ajax_captcha?tabindex="+tabindex))};$.fn.wait=function(opts){var $this=$(this);var hide=false;if(opts===false){hide=true}else{if(opts==undefined){opts={lines:12,length:7,width:4,radius:10,color:"#000",speed:1,trail:60,shadow:false}}}if(hide&&$this.data("spinner")){$this.spin()}else{if(!hide&&!$this.data("spinner")){$this.spin(opts)}}return this};var depSrcsLoaded=[];var module_count=1;var nextModalId=0;var lazyLoad=[];var DEPS={};var Facebook={};var host="";var secure="";var isMobile=false;var isIPad=false;var statichost="";if("Squidoo" in window){host=window.Squidoo.host;secure=window.Squidoo.secure;isMobile=window.Squidoo.isMobile;isIPad=window.Squidoo.isIPad;statichost=window.Squidoo.statichost;if("lazyload" in Squidoo){lazyLoad=window.Squidoo.lazyLoad}if("DEPS" in Squidoo){DEPS=$.extend(DEPS,Squidoo.DEPS)}if("Facebook" in Squidoo){Facebook=$.extend(Facebook,Squidoo.Facebook)}}window._gaq=window._gaq?window._gaq:[];window.Squidoo=window.Squidoo||{};var self=window.$Sq=window.Squidoo={DEPS:DEPS,Facebook:Facebook,host:host,secure:secure,isMobile:isMobile,statichost:statichost,isIPad:isIPad,lazyLoad:lazyLoad,oAuth:{},unlock:function(btn,lensId){var $btn=$(btn);$btn.text("Unlocking...");$.post("/admin/unlock_lens_ajax/"+lensId+"/unlock",function(result){if(result.indexOf("error")===-1){$btn.text("Unlocked!");setTimeout(function(){$btn.remove()},3000)}});return false},evt:function(category,action,opt_label,opt_value){if(arguments[0] instanceof Array){var cmds=[];for(var i=0;i<arguments.length;i++){var cmd=arguments[i];cmd.unshift("sqev._trackEvent");cmds.push(cmd)}_gaq.push.apply(_gaq,cmds)}else{_gaq.push(["sqev._trackEvent",category,action,opt_label,opt_value])}},onPageletLoad:function(pagelet){self.withDeps(pagelet.js?pagelet.js:[],function(){if(!$.trim(pagelet.html)){$("#"+pagelet.id).remove()}else{$("#"+pagelet.id).html(pagelet.html);$("#"+pagelet.id).children("*:first").unwrap()}},true)},lazyLoadModule:function(lmi,workshop){module_count++;setTimeout(function(){(function($){var mod=$("#module"+lmi+"_lazyload");var action=(workshop?"/utility/lazyload_draft/":"/utility/lazyload/")+lmi;if(window.isMAP){action+="?map=1"}$.get(action,function(data){mod.html(data);module_count--;if(workshop){}else{var clickout_interval=setInterval(function(){if(window.setClickOutTracking){clearInterval(clickout_interval);setClickOutTracking(mod.attr("id"))}},100)}})})(jQuery)},200*(module_count-1))},lazyLoadAll:function(draft){var pods=[];if(!this.lazyLoad.length){return}else{if(this.lazyLoad.length==1){pods=[this.lazyLoad]}else{var max=5;var maxEbay=1;var eBayType="52";pods=this.lazyLoad.chunk(max);for(var i=0;i<pods.length;i++){var p=pods[i];p=p.sort(function(a,b){return b.type==eBayType?1:-1});var contents=p.chunk(max);p=pods[i]=contents.shift();if(contents.length){pods[i+1]=Array.prototype.concat.apply(pods[i+1]||[],contents)}var types=$.map(p,function(mod){return mod.type});if(types.lastIndexOf(eBayType)>=maxEbay-1){var contents={ebay:p.slice(0,types.lastIndexOf(eBayType)+1),notEbay:p.slice(types.lastIndexOf(eBayType)+1)};var ebay=contents.ebay.chunk(maxEbay);p=pods[i]=contents.notEbay.concat(ebay.shift());if(ebay.length){pods[i+1]=Array.prototype.concat.apply(pods[i+1]||[],ebay)}}}}}for(var i=0;i<pods.length;i++){var p=pods[i];var action=(draft?"/utility/lazyload_draft/":"/utility/lazyload/")+$.map(p,function(mod){return mod.lmi});if(window.isMAP){action+="?map=1"}$.get(action,function(p){return function(content){var mods=[];if(p.length>1){var raw=content.split("M\x1A");$.each(raw,function(i,R){R=$.trim(R);if(R.length){var data=R.split("\x1B");mods.push({lmi:data.shift(),html:data.join("\x1B")})}})}else{mods.push({lmi:p[0].lmi,html:content})}$.each(mods,function(i,mod){var con=$("#module"+mod.lmi+"_lazyload");con.html(mod.html);if(!window.isWorkshop){var clickout_interval=setInterval(function(){if(window.setClickOutTracking){clearInterval(clickout_interval);setClickOutTracking(con.attr("id"))}},100)}})}}(p))}},wait:function(toggle,callback){if(toggle===undefined){toggle=true}else{if($.isFunction(toggle)){callback=toggle;toggle=true}}self.waitForSelection("body",function(){if(!toggle){$('[data-onion="wait"]').spin(false).remove()}else{var wait=$('[data-onion="wait"]');if(!wait.size()){wait=$('<div data-onion="wait"></div>').css({position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"transparent",backgroundColor:"rgba(0, 0, 0, 0.5)"});$("body").append(wait)}wait.front().spin({color:"white"})}if($.isFunction(callback)){callback()}})},waitForSelection:function(selector,callback){var interval=setInterval(function(){if($(selector).size()){clearInterval(interval);callback()}},100)},getScriptSrc:function(ref){if(!ref||ref.match(/\.js$/i)){if(!ref.match(/^\/\//)){return(document.location.protocol.toLowerCase()!="https:"?Squidoo.statichost:"")+ref}else{return ref}}else{var url=("DEPS" in Squidoo&&"__HOST__" in Squidoo.DEPS?Squidoo.DEPS.__HOST__:"/")+"scripts/";if("DEPS" in Squidoo&&"__VERSIONS__" in Squidoo.DEPS&&Squidoo.DEPS.__VERSIONS__[ref]){url+=ref+".v"+Squidoo.DEPS.__VERSIONS__[ref]+".js"}else{url+=ref+".js"}return url}},withTemplates:function(callback){Squidoo.withDeps([Squidoo.DEPS.TEMPLATES],function(){callback()})},withTracker:function(token,member,callback){Squidoo.withDeps([Squidoo.DEPS.TRACKER],function(){Squidoo.Tracker.init(token,member,callback)})},withDeps:function(deps,callback,doCallbackWithoutDeps){if(deps==undefined||deps.length<1){return callback()}if(doCallbackWithoutDeps){callback();callback=null}var d=0;var loadNext=function(){var dep=deps[d++];if(!$.isPlainObject(dep)){dep={src:dep,isLoaded:function(callback){callback($.inArray(this.src,depSrcsLoaded)>-1)}}}dep.isLoaded(function(loaded){if(loaded){if(d<deps.length){loadNext()}else{callback?callback():null}}else{self.withDeps(dep.deps,function(){$.ajax({url:self.getScriptSrc(dep.src),dataType:"script",success:function(){depSrcsLoaded[dep.src]=true;var onAfterLoad=function(){if(d<deps.length){loadNext()}else{callback?callback():null}};"onLoad" in dep?dep.onLoad(onAfterLoad):onAfterLoad()},error:function(xhr){console.error("Failed to load dependency: "+dep.src,dep,xhr);if(dep.alt){$.ajax({url:self.getScriptSrc(dep.alt),dataType:"script",success:function(){var onAfterLoad=function(){if(d<deps.length){loadNext()}else{callback?callback():null}};"onLoad" in dep?dep.onLoad(onAfterLoad):onAfterLoad()},error:function(xhr){console.error("Failed to load dependency alternate: "+dep.alt,xhr)}})}}})})}})};loadNext()},handleAjaxError:function(xhr,textStatus,errorThrown){var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-185209-2"]);_gaq.push(["_setDomainName","www.squidoo.com"]);_gaq.push(["_trackEvent","Errors",'Exception, "'+xhr.responseText+'"']);(function(){var ga=document.createElement("script");ga.type="text/javascript";ga.async=true;ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)})();alert("Oops! Squidoo's tentacles are in a twist. We're working to sort it out speedily.\n\nConsistently receiving this message? You can reach us at squidsupport@squidoo.com");Squidoo.wait(false)},waitFor:(function(){var waitFor=function(bool,callback,delay){if(delay==undefined){delay=100}var i=setInterval(function(){if(bool()){clearInterval(i)}else{return false}callback(jQuery)},delay)};waitFor.bootstrap=function(){return"jQuery" in window&&"button" in jQuery.fn};return waitFor})(),showDialog:function(selector){$this=$(selector).first();Squidoo.dialog({title:$this.data("info-title"),content:$this.data("info-content")})},dialog:function(opts){if(opts==undefined){opts={}}opts=$.extend({title:"",content:"",buttons:{"OK":false}},opts);$dialog=$('<div><div class="dialog-title"></div><div class="dialog-content"></div></div>');$close=$('<div><div class="close_bar"><a href="#" onclick="Squidoo.close(this); return false;" class="btn_social float_right">Close</a></div>');if(opts.title){$dialog.find(".dialog-title").replaceWith("<h3>"+opts.title+"</h3>")}if(opts.content){$dialog.find(".dialog-content").html(opts.content)}Squidoo.modal({html:'<div class="overlay">'+$dialog.html()+"</div>"+$close.html()},null,{type:"dialog",onSubmit:function(dialog){console.log(dialog.serialize());return true}})},_processModalPath:function(path,data,doWithModal){try{if($.isPlainObject(path)||opts.iframe){return doWithModal(path)}else{if($(path).size()){$path=$(path);if($path.attr("type")=="text/x-jquery-tmpl"){return Squidoo.Templates.render(path,data,function(html){data.html=html;doWithModal(data)})}else{return doWithModal({html:$path.clone()})}}}}catch(e){}self.withDeps([Squidoo.DEPS.JQUERY_UI],function(){$.ajax({type:"POST",url:path,data:data,success:doWithModal,error:Squidoo.handleAjaxError})})},layer:function(path,data,callback){if($.isFunction(data)){callback=data;data=null}self.waitForSelection("body",function(){var id="squidoo_modal"+(++nextModalId);var onion=$('<div class="layer_onion"></div>');$("body").append(onion);onion.front();var layerCon=$('<div class="layer"></div>');$("body").append(layerCon);layerCon.front();self.withDeps([Squidoo.DEPS.LAYERS],function(){self._processModalPath(path,data,function(layer){if(!$.isPlainObject(layer)){layer={html:layer}}self.withDeps("js" in layer?layer.js:[],function(){var data=($.isPlainObject(data)?data:{});data.callback=callback;var layerObj=$(layer.html);layerCon.append(layerObj);setTimeout(function(){$("#content_wrap").hide()},1000);layerObj.on("destroy",function(){$("#content_wrap").show();onion.remove();layerCon.remove()});var type=layerObj.data("layer");if(type){layerObj[type](data)}})})})})},modal:function(path,data,opts){if($.isFunction(data)){opts=data;data=null}if($.isFunction(opts)){opts={onLoad:opts,onSubmit:false}}opts=$.extend({type:"normal",iframe:false,wide:false},opts);if($.isFunction(opts.onSubmit)){opts.type="dialog"}var doWithModal=function(modal){if(!$.isPlainObject(modal)){modal={html:modal}}self.withDeps("js" in modal?modal.js:[],function(){self.waitForSelection("body",function(){var id="squidoo_modal_"+(++nextModalId);var onion=$("body").append('<div id="'+id+'_onion" class="default_onion"></div>').find("#"+id+"_onion").front();var con=$("body").append('<div id="'+id+'" class="squidoo_modal novib"></div>').find("#"+id);var dialog=false;var overlay=null;if(opts.type=="dialog"||opts.iframe){con.append(overlay=$('<div class="overlay_wrap '+(opts.wide?"overlay_tabs_wrap":"")+' squidoo_modal novib"></div>'));if(opts.type=="dialog"){dialog=overlay.append('<form action="#" method="post"></form>').find("form");dialog.html(modal.html)}}else{con.append(modal.html)}if(opts.iframe){var iframe_height,iframe;var src=modal.html;var hash=src.match(/(#.*)$/);if(src.indexOf("?")===-1){if(hash){src=src.replace(/#.*$/,"")}src+="?"}src+="&_host="+encodeURIComponent(document.location);if(hash){src+=hash[1]}overlay.append(iframe=$('<iframe name="'+id+'_iframe" src="'+src+'" style="width:100%; height:427px; display:block;"></iframe>'));$(function(){$.receiveMessage(function(e){var h=Number(e.data.replace(/.*iframe_height=(\d+)(?:&|$)/,"$1"));if(!isNaN(h)&&h>0&&h!==iframe_height){iframe.height(iframe_height=h)}})})}con.bind("destroy",function(){con.remove();onion.remove()});if(opts.type!="dialog"){onion.click(function(){con.destroy()})}var $toCenter=con.find("*:first");$toCenter.fixAt((($(window).height()-$toCenter.height())/2)).front("fadeIn");if(jQuery.ui&&$.fn.tabs){con.find(".tabs").tabs()}if(dialog){if(!$.isFunction(opts.onSubmit)){opts.onSubmit=function(){return true}}dialog.submit(function(){var result=opts.onSubmit(dialog);if(result!==false){con.trigger("destroy")}return false});dialog[0].callback=function(value){var result=opts.onSubmit(value);if(result!==false){con.trigger("destroy")}}}if(opts.type!="iframe"&&$.isFunction(opts.onLoad)){opts.onLoad(con)}self.wait(false)})})};try{if($.isPlainObject(path)||opts.iframe){return doWithModal(path)}else{if($(path).size()){var $path=$(path);if($path.attr("type")=="text/x-jquery-tmpl"){return Squidoo.Templates.render(path,data,function(html){data.html=html;doWithModal(data)})}else{return doWithModal({html:$path.clone()})}}}}catch(e){}self.wait(function(){self.withDeps([Squidoo.DEPS.JQUERY_UI],function(){$.ajax({type:"POST",url:path,data:data,success:doWithModal,error:Squidoo.handleAjaxError})})})},notify:{info:function(message,options){$Sq.notify._notify(message,$.extend({barColor:"#ff9900",forgetful:true,onClose:function(){$("#hellobar-wrapper").remove()}},options))},error:function(message,options){$Sq.notify._notify(message,$.extend({barColor:"#990000",forgetful:true,onClose:function(){$("#hellobar-wrapper").remove()}},options))},_notify:function(message,options){if(message==undefined){message="Hello, Squidoo!"}new HelloBar(message,$.extend({helloBarLogo:false},options),1);$("#hellobar-wrapper").front()},hide:function(){$("#hellobar-wrapper").remove()}},shorten:function(string,maxLength){if(!string){return""}if(maxLength==undefined){maxLength=137}if(string.length<=maxLength){return string}var shorter=string.substr(0,maxLength);if(!shorter.match(/\s$/)){shorter=shorter.substr(0,shorter.lastIndexOf(" "))}return $J.trim(shorter)+"..."},close:function(el){var con;if("location" in el){con=$('iframe[name="'+el.name+'"]')}else{con=$(el).closest(".squidoo_modal")}con.closest(".squidoo_modal").fadeOut("fast",function(){$(this).destroy()})},hide:function(el){return $(el).closest(".squidoo_modal").hide()},profile:function(tab){self.modal("/profile/modal"+(tab?"#profile-"+tab:""),{},{iframe:true,wide:true})},bug:function(options){if(!$.isPlainObject(options)){options={lensName:options}}if(options.lensName==undefined&&"theLensName" in window){options.lensName=window.theLensName}if(options.lensName==undefined&&"theLens" in window){options.lensName=window.theLens.lensName}self.modal("/bug/modal"+(options.lensName?"/"+options.lensName:"")+"?"+$.param(options),{},{iframe:true})},og:function(lens_name,settings){if(lens_name==undefined){lens_name=window.theLensName}if(lens_name==undefined){lens_name=window.theLens.lensName}Squidoo.modal("/workshop/ajax_opengraph_modal/"+(lens_name?lens_name:"__INPROGRESS__"),{og_settings:settings})},login:function(target,bindEvent,callback){Squidoo._openAuthModal(target,bindEvent,callback,"login");return false},register:function(target,bindEvent,callback){Squidoo._openAuthModal(target,bindEvent,callback,"registration");return false},_openAuthModal:function(target,bindEvent,callback,screen){var openModal=function($button){var left=($(window).width()-850)/2;var top=($(window).height()-500)/2;var windowName=Math.floor(Math.random()*10000000)+"sso";var popup=window.open($Sq.secure+"/member/"+screen+"?modal",windowName,"width=850,height=650,status=1,toolbar=0,left="+left+",top="+top);var check=setInterval(function(){if(popup.closed){clearInterval(check);Squidoo.getLoginStatus(function(response){window.isLoggedIn=response.status=="connected";window.theMember=response.member;window.__squid_like?(window.__squid_like.logged_in=true):false;Squidoo.wait(false);if($.isFunction(callback)){callback(response.status=="connected",response,$button)}else{if(response.status=="connected"){document.location.reload()}}})}},100)};if($.isFunction(target)){callback=target;openModal();return false}if($.isFunction(bindEvent)){if(!screen&&callback){screen=callback}callback=bindEvent;bindEvent="click"}var $button=$J(target);$button.unbind(bindEvent);$button.bind(bindEvent,function(){var $this=$(this);if(window.isLoggedIn){if($.isFunction(callback)){return callback(true,{status:"connected",member:window.theMember},$this)}else{return true}}Squidoo.wait();openModal($this);return false})},getLoginStatus:function(callback){$.get("/auth/json_status",function(response,textStatus,jqXHR){if(response.status!="connected"){window.isLoggedIn=false;window.theMember=false}else{window.CSRF=jqXHR.getResponseHeader("X-CSRF")}callback(response)})},api:function(path,method,data,onSuccess,onError,onTransportError){if($.isFunction(method)){onSuccess=method;data={};method="get"}else{if($.isFunction(data)){if($.isPlainObject(method)){onSuccess=data;data=method;method="get"}else{onSuccess=data;data={}}}else{if($.isPlainObject(method)&&$.isPlainObject(data)){onSuccess=data;data=method;method="get"}}}if($.isPlainObject(onSuccess)){onError=onSuccess.error;onTransportError=onSuccess.transportError;onSuccess=onSuccess.success}if(method.toLowerCase()!="get"&&method.toLowerCase()!="post"){console.error("Invalid HTTP method: "+method.toUpperCase());return}var defaultApiErrorHandler=function(response){console.error(response)};var defaultTransportErrorHandler=function(jqXHR,textStatus,errorThrown){console.error(path,jqXHR,textStatus,errorThrown)};if(!$.isFunction(onError)){onError=defaultApiErrorHandler}if(!$.isFunction(onTransportError)){onTransportError=defaultTransportErrorHandler}if(path.substring(0,1)=="/"){path=path.substring(1)}var host=Squidoo.host||"http://www.squidoo.com";$.ajax({type:method.toUpperCase(),url:Squidoo.host+"/api/"+path,data:data,dataType:document.location.host.match(/(www|octo)\.squidoo\.com$/i)?"json":"jsonp",beforeSend:function(xhr){if(method.toLowerCase()!=="get"){xhr.setRequestHeader("X-CSRF",CSRF)}},success:function(response){if(response.errors){onError((function(packet){var error={type:function(){return packet[0].type},message:function(){return packet[0].message},hasType:function(type){for(var i=0;i<packet.length;i++){if(packet[i].type==type){return true}}return false},hasCode:function(code){for(var i=0;i<packet.length;i++){if(packet[i].code==code){return true}}return false},all:function(type){if(type==undefined){return packet}else{var errors=[];for(var i=0;i<packet.length;i++){if(packet[i].type==type){errors.push(packet[i])}}return errors}}};if(error.hasCode("csrf")){$Sq.notify.error("Oops! Please reload this page to continue.")}return error})(response.errors))}else{if($.isFunction(onSuccess)){onSuccess(response.result)}}},error:function(jqXHR,textStatus,errorThrown){onTransportError(jqXHR,textStatus,errorThrown)}})}};var isProfileRequest=document.location.hash.match(/profile(\-(\d+))?/);if(isProfileRequest&&document.location.pathname!="/profile/modal"&&document.location.pathname!="/profile/modal/"){Squidoo.profile(isProfileRequest[2])}if(document.location.hash.match(/bugbox/)){Squidoo.bug()}Squidoo.Validation=("Validation" in Squidoo)?Squidoo.Validation:{};if(!$.fn.validatable){$.fn.validatable=function(enable_client_side,onSuccess,onErrors,onReset){var forms=this;Squidoo.withDeps([Squidoo.DEPS.VALIDATION],function(){Squidoo.Validation.apply(forms,enable_client_side,onSuccess,onErrors,onReset)})}}Squidoo.Upload=Squidoo.Upload||{};Squidoo.Upload.apply=function(selector,options){Squidoo.withDeps([Squidoo.DEPS.UPLOAD],function(){$(selector).upload(options)})};Squidoo.Autocomplete=Squidoo.Autocomplete||{};Squidoo.Autocomplete.apply=function(selector,options){Squidoo.withDeps([Squidoo.DEPS.AUTOCOMPLETE],function(){Squidoo.Autocomplete.apply(selector,options)})};Squidoo.Autocomplete.lens=function(selector,lens_name_field){Squidoo.withDeps([Squidoo.DEPS.AUTOCOMPLETE],function(){Squidoo.Autocomplete.lens(selector,lens_name_field)})};Squidoo.Templates={};Squidoo.Templates.apply=function(selector,template,data){Squidoo.withDeps([Squidoo.DEPS.TEMPLATES],function(){Squidoo.Templates.apply(selector,template,data)})};Squidoo.Templates.render=function(template,data,callback){Squidoo.withDeps([Squidoo.DEPS.TEMPLATES],function(){callback(Squidoo.Templates.render(template,data))})};Squidoo.Facebook.login=function(target,opts,callback){var args=arguments;if(opts==undefined){opts={}}else{if($.isFunction(opts)){callback=opts;opts={}}}Squidoo.withDeps([Squidoo.DEPS.FACEBOOK],function(){Squidoo.Facebook.withFB(function(){$(target).unbind("click");$(target).click(function(){var $button=$(this);FB.login(function(response){if(response.authResponse){Squidoo.getLoginStatus(function(response){if(callback){if(!$J.isFunction(callback)){document.location=callback}else{callback(response)}}else{if($button.attr("href")&&$button.attr("href")!="#"){document.location=$button.attr("href")}else{document.location.reload()}}})}},opts);return false})})})};Squidoo.oAuth.login=function(target,opts,callback){if(!$.isPlainObject(opts)){opts={service:opts}}var $this=$(target);var openModal=function(){var left=($(window).width()-850)/2;var top=($(window).height()-500)/2;var windowTitle=Math.floor(Math.random()*10000000)+"sso";var popup=window.open($Sq.secure+"/oauth/auth_token_url/"+opts.service+"/redirect",windowTitle,"width=850,height=650,status=1,toolbar=0,left="+left+",top="+top);var check=setInterval(function(){if(popup.closed){clearInterval(check);Squidoo.getLoginStatus(function(response){window.isLoggedIn=response.status=="connected";window.theMember=response.member;window.__squid_like?(window.__squid_like.logged_in=true):false;Squidoo.wait(false);if($.isFunction(callback)){callback(response,$this)}else{if(response.status=="connected"){document.location.reload()}}})}},100)};$this.click(function(){openModal();return false})};Squidoo.Facebook.logout=function(){Squidoo.withDeps([Squidoo.DEPS.FACEBOOK],function(){Squidoo.Facebook.logout()})};Squidoo.Facebook.isAuthorized=function(perms,callback){Squidoo.withDeps([Squidoo.DEPS.FACEBOOK],function(){Squidoo.Facebook.isAuthorized(perms,callback)})};var facebook_init;Squidoo.Facebook.init=function(){if(facebook_init){return}facebook_init=true;var args=arguments;Squidoo.withDeps([Squidoo.DEPS.FACEBOOK],function(){})};Squidoo.Media={};if(!$.fn.uploadable){$.fn.uploadable=function(){var div=this;Squidoo.withDeps([Squidoo.DEPS.MEDIA],function(){Squidoo.Media.Uploadable.apply(div)})}}Squidoo.popover=function(selector,options,action){if(!$.isPlainObject(options)){action=options;options=false}Squidoo.withDeps([Squidoo.DEPS.TOOLTIP],function(){var $this=$(selector);if(options){options=$.extend({"animation":true,"placement":"right","selector":false,"trigger":"manual","title":"","content":"","delay":0||{show:500,hide:100},"closeable":false},options);$popover=$this.data("popover");if($popover){$popover.tip().remove();$this.data("popover",false)}$this.popover(options);$this.popover().tip().front()}if(action=="remove"){if($this.data("popover")){$this.data("popover").tip().remove();$this.data("popover",false)}}else{if(action){if($this.data("popover")){$this.popover(action)}}}})},Squidoo.tooltip=function(selector,options,action,callback){if(!$J.isPlainObject(options)){action=options;options={}}if(!action){action="show"}Squidoo.withDeps([Squidoo.DEPS.TOOLTIP],function(){options=$.extend({"animation":true,"placement":"right","selector":false,"trigger":"hover","title":"","delay":0||{show:500,hide:100}},options);$J(selector).tooltip(options).tooltip(action);if($J.isFunction(callback)){callback()}})},Squidoo.getQuery=function(s){var query={};s.replace(/\b([^&=]*)=([^&=]*)\b/g,function(m,a,d){if(typeof query[a]!="undefined"){query[a]+=","+d}else{query[a]=d}});return query};Squidoo.meebo=function(infolinks){window.Meebo||function(b){function p(){return["<",i,' onload="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='//",b.stage?"stage-":"","cim.meebo.com/cim?iv=",a.v,"&",q,"=",b[q],b[l]?"&"+l+"="+b[l]:"",b[e]?"&"+e+"="+b[e]:"","'\"></",i,">"].join("")}var f=window,a=f.Meebo=f.Meebo||function(){(a._=a._||[]).push(arguments)},d=document,i="body",m=d[i],r;if(!m){r=arguments.callee;return setTimeout(function(){r(b)},100)}a.$={0:+new Date};a.T=function(u){a.$[u]=new Date-a.$[0]};a.v=4;var j="appendChild",h="createElement",k="src",l="lang",q="network",e="domain",n=d[h]("div"),v=n[j](d[h]("m")),c=d[h]("iframe"),g="document",o,s=function(){a.T("load");a("load")};f.addEventListener?f.addEventListener("load",s,false):f.attachEvent("onload",s);n.style.display="none";m.insertBefore(n,m.firstChild).id="meebo";c.frameBorder="0";c.id="meebo-iframe";c.allowTransparency="true";v[j](c);try{c.contentWindow[g].open()}catch(w){b[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";c[k]=o+"void(0);"}try{var t=c.contentWindow[g];t.write(p());t.close()}catch(x){c[k]=o+'d.write("'+p().replace(/"/g,'\\"')+'");d.close();'}a.T(1)}({network:"squidoo"});Meebo("addButton",{id:"meebobutton1",type:"menu",icon:"http://the.squidoocdn.com/imgs/modules/meebo/smiley.png",label:"Fun stuff to DO!",items:[{value:"http://blogs.squidoo.com/lensoftheday/",text:"Lens of the Day"},{value:"http://www.squidoo.com/browse/top_lenses",text:"See the Top 100"},{value:"http://www.squidoo.com/build/start",text:"Make a lens"},{value:"http://squidu.com/forum",text:"Say hi in the forum"},{value:"http://www.squidoo.com/squidquiz/hq",text:"P.S. Take a quiz!"},{value:"http://www.squidoo.com/squidwho/hq",text:"P.P.S. Get famous"},],onSelect:function(url){window.open(url,"resizable=1,scrolling=1,scrollbars=1,status=1,toolbar=1")}});Meebo("domReady")};if(document.location.hostname.match(/(www|octo)\.squidoo\.com$/)){var img=new Image();img.src=(location.protocol=="https:"?"/imgs/loading_big.gif":"http://the.squidoocdn.com/imgs/loading_big.gif")}$(function($){$("form.login_reg_form input").bind("focus.labelPlaceholder",function(){$(this).prev().hide()}).bind("blur.labelPlaceholder",function(){$(this).prev()[!this.value?"show":"hide"]()}).trigger("blur.labelPlaceholder");if($("form.login_reg_form input").size()){setInterval(function(){$("form.login_reg_form input").each(function(i,input){if($(input).val()){$(input).prev().hide()}})},100)}});$(function(){if(screen.width<=800){$("#squidnav_wrap").css("position","static");$("body").css("padding-top","0")}});$("#squidnav div").live("mouseenter",function(){$(this).parents("li").addClass("active_li")}).live("mouseleave",function(){$(this).parents("li").removeClass("active_li")});$Sq.bless=function(namespace,prototype){if($.isPlainObject(prototype)){var P=function(element,options){this._init($(element),options||{})};P.prototype=$.extend({_init:function($element,opts){this.$el=$element;if("init" in this){this.init(opts,this)}}},prototype);prototype=P}$.fn[namespace]=function(action,options){return this.each(function(){var $this=$(this);var data=$this.data(namespace);if(!data){$this.data(namespace,(data=new prototype(this,typeof action!="string"?action:null)))}if(typeof action=="string"){data[action](options)}})};$.fn[namespace].Constructor=prototype};window.CACHE_MIN=60;window.CACHE_5MIN=300;window.CACHE_10MIN=600;window.CACHE_HOUR=3600;window.CACHE_8HOURS=28800;window.CACHE_DAY=86400;window.CACHE_WEEK=604800;window.CACHE_MONTH=18144000;$Sq.Cache={store:function(group){return{get:function(key,defaultValue){var packet=$.jStorage.get(group+"_"+key);if(packet&&(packet.t==-1||(new Date().getTime()/1000)<packet.t)){return packet.d}else{return defaultValue}},set:function(key,data,timeout){var packet={d:data,t:(timeout==undefined||timeout==0)?-1:((new Date().getTime()/1000)+timeout)};$.jStorage.set(group+"_"+key,packet);return this},del:function(key){$.jStorage.deleteKey(group+"_"+key);return this},flush:function(){$.each($.jStorage.index(),function(i,key){if(key.indexOf(group+"_")===0){$.jStorage.deleteKey(key)}});return this}}}};!function(){$.fn["adaptImages"]=$.fn["adapt"]=function(){return this.find(".adaptive_resize").each(function(){$(this).find("img").parent().each(function(){var $parent=$(this);$parent.css("max-height",$parent.width())})})};var timeout;$(function(){$("body").adapt()});$(window).resize(function(){clearTimeout(timeout);timeout=setTimeout(function(){$("body").adapt()},1000)})}()}(jQuery);!function($){$.fn.relative=function(){this.each(function(i,el){var $el=$(el),D=$el.data("dobj");if(!D){$el.data("dobj",D=Date.create($el.data("date")?$el.data("date"):$el.text()))}$el.text(D.relative());$el.attr("title",D["long"]())})}}(jQuery);Array.prototype.unique=function(){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if($J.inArray(val,res)==-1){res.push(val)}}}return res};if(!Array.prototype.chunk){Array.prototype.chunk=function(s){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;for(var x,i=0,c=-1,l=len,n=[];i<l;i++){(x=i%s)?n[c][x]=t[i]:n[++c]=[t[i]]}return n}}if(!Array.prototype.filter){Array.prototype.filter=function(fun){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError()}var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisp,val,i,t)){res.push(val)}}}return res}}if(!Array.prototype.map){Array.prototype.map=function(fun){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError()}var res=new Array(len);var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){res[i]=fun.call(thisp,t[i],i,t)}}return res}}if(!Array.prototype.filter){Array.prototype.filter=function(fun){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError()}var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisp,val,i,t)){res.push(val)}}}return res}}if(!Array.prototype.combine){Array.prototype.combine=function(arr){if(arr){for(var i=0;i<arr.length;i++){this.push(arr[i])}}}}if(!Array.prototype.sum){Array.prototype.sum=function(){var sum=0;for(var i=0,sum=0;i<this.length;sum+=parseFloat(this[i++])){}return sum}}(function(window,document,undefined){var prefixes=["webkit","Moz","ms","O"];var animations={};var useCssAnimations;function createEl(tag,prop){var el=document.createElement(tag||"div");var n;for(n in prop){el[n]=prop[n]}return el}function ins(parent){for(var i=1,n=arguments.length;i<n;i++){parent.appendChild(arguments[i])}return parent}var sheet=function(){var el=createEl("style");ins(document.getElementsByTagName("head")[0],el);return el.sheet||el.styleSheet}();function addAnimation(alpha,trail,i,lines){var name=["opacity",trail,~~(alpha*100),i,lines].join("-");var start=0.01+i/lines*100;var z=Math.max(1-(1-alpha)/trail*(100-start),alpha);var prefix=useCssAnimations.substring(0,useCssAnimations.indexOf("Animation")).toLowerCase();var pre=prefix&&"-"+prefix+"-"||"";if(!animations[name]){sheet.insertRule("@"+pre+"keyframes "+name+"{"+"0%{opacity:"+z+"}"+start+"%{opacity:"+alpha+"}"+(start+0.01)+"%{opacity:1}"+(start+trail)%100+"%{opacity:"+alpha+"}"+"100%{opacity:"+z+"}"+"}",0);animations[name]=1}return name}function vendor(el,prop){var s=el.style;var pp;var i;if(s[prop]!==undefined){return prop}prop=prop.charAt(0).toUpperCase()+prop.slice(1);for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop;if(s[pp]!==undefined){return pp}}}function css(el,prop){for(var n in prop){el.style[vendor(el,n)||n]=prop[n]}return el}function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i];for(var n in def){if(obj[n]===undefined){obj[n]=def[n]}}}return obj}function pos(el){var o={x:el.offsetLeft,y:el.offsetTop};while((el=el.offsetParent)){o.x+=el.offsetLeft;o.y+=el.offsetTop}return o}var defaults={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto"};var Spinner=function Spinner(o){if(!this.spin){return new Spinner(o)}this.opts=merge(o||{},Spinner.defaults,defaults)};Spinner.defaults={};merge(Spinner.prototype,{spin:function(target){this.stop();var self=this;var o=self.opts;var el=self.el=css(createEl(0,{className:o.className}),{position:"relative",zIndex:o.zIndex});var mid=o.radius+o.length+o.width;var ep;var tp;if(target){target.insertBefore(el,target.firstChild||null);tp=pos(target);ep=pos(el);css(el,{left:(o.left=="auto"?tp.x-ep.x+(target.offsetWidth>>1):o.left+mid)+"px",top:(o.top=="auto"?tp.y-ep.y+(target.offsetHeight>>1):o.top+mid)+"px"})}el.setAttribute("aria-role","progressbar");self.lines(el,self.opts);if(!useCssAnimations){var i=0;var fps=o.fps;var f=fps/o.speed;var ostep=(1-o.opacity)/(f*o.trail/100);var astep=f/o.lines;!function anim(){i++;for(var s=o.lines;s;s--){var alpha=Math.max(1-(i+s*astep)%f*ostep,o.opacity);self.opacity(el,o.lines-s,alpha,o)}self.timeout=self.el&&setTimeout(anim,~~(1000/fps))}()}return self},stop:function(){var el=this.el;if(el){clearTimeout(this.timeout);if(el.parentNode){el.parentNode.removeChild(el)}this.el=undefined}return this},lines:function(el,o){var i=0;var seg;function fill(color,shadow){return css(createEl(),{position:"absolute",width:(o.length+o.width)+"px",height:o.width+"px",background:color,boxShadow:shadow,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*i+o.rotate)+"deg) translate("+o.radius+"px"+",0)",borderRadius:(o.width>>1)+"px"})}for(;i<o.lines;i++){seg=css(createEl(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,i,o.lines)+" "+1/o.speed+"s linear infinite"});if(o.shadow){ins(seg,css(fill("#000","0 0 4px "+"#000"),{top:2+"px"}))}ins(el,ins(seg,fill(o.color,"0 0 1px rgba(0,0,0,.1)")))}return el},opacity:function(el,i,val){if(i<el.childNodes.length){el.childNodes[i].style.opacity=val}}});!function(){function vml(tag,attr){return createEl("<"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}var s=css(createEl("group"),{behavior:"url(#default#VML)"});if(!vendor(s,"transform")&&s.adj){sheet.addRule(".spin-vml","behavior:url(#default#VML)");Spinner.prototype.lines=function(el,o){var r=o.length+o.width;var s=2*r;function grp(){return css(vml("group",{coordsize:s+" "+s,coordorigin:-r+" "+-r}),{width:s,height:s})}var margin=-(o.width+o.length)*2+"px";var g=css(grp(),{position:"absolute",top:margin,left:margin});var i;function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+"deg",left:~~dx}),ins(css(vml("roundrect",{arcsize:1}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml("fill",{color:o.color,opacity:o.opacity}),vml("stroke",{opacity:0}))))}if(o.shadow){for(i=1;i<=o.lines;i++){seg(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(i=1;i<=o.lines;i++){seg(i)}return ins(el,g)};Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild;o=o.shadow&&o.lines||0;if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild;if(c){c.opacity=val}}}}else{useCssAnimations=vendor(s,"animation")}}();window.Spinner=Spinner})(window,document);var SPINNER_HOME={lines:8,trail:51,length:7,width:9,radius:16,color:"#555",opacity:1/4,speed:1};var SPINNER_FIT;var SPINNER_SMALL;(function($){$.fn.spin=function(opts){if(opts==undefined){}this.each(function(){var $this=$(this),data=$this.data();if(data.spinner){data.spinner.stop();delete data.spinner}if(opts!==false){data.spinner=new Spinner($.extend({color:$this.css("color")},opts)).spin(this)}});return this}})(jQuery);var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}return output.join("")}var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0])}return str_format.format.call(null,str_format.cache[arguments[0]],arguments)};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type="",arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==="string"){output.push(parse_tree[i])}else{if(node_type==="array"){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw (sprintf('[sprintf] property "%s" does not exist',match[2][k]))}arg=arg[match[2][k]]}}else{if(match[1]){arg=argv[match[1]]}else{arg=argv[cursor++]}}if(/[^s]/.test(match[8])&&(get_type(arg)!="number")){throw (sprintf("[sprintf] expecting number but found %s",get_type(arg)))}switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase();break}arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg);pad_character=match[4]?match[4]=="0"?"0":match[4].charAt(1):" ";pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):"";output.push(match[5]?arg+pad:pad+arg)}}}return output.join("")};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0])}else{if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push("%")}else{if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==""){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1])}else{if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1])}else{throw ("[sprintf] huh?")}}}}else{throw ("[sprintf] huh?")}match[2]=field_list}else{arg_names|=2}if(arg_names===3){throw ("[sprintf] mixing positional and named placeholders is not (yet) supported")}parse_tree.push(match)}else{throw ("[sprintf] huh?")}}}_fmt=_fmt.substring(match[0].length)}return parse_tree};return str_format})();var vsprintf=function(fmt,argv){argv.unshift(fmt);return sprintf.apply(null,argv)};(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var type=typeof o;if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return""+o}if(type==="string"){return $.quoteString(o)}if(type==="object"){if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var name,val,pairs=[];for(var k in o){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type==="function"||type==="undefined"){continue}val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'}})(jQuery);(function(e){function k(){if(d.jStorage){try{c=l(String(d.jStorage))}catch(a){d.jStorage="{}"}}else{d.jStorage="{}"}g=d.jStorage?String(d.jStorage).length:0}function h(){try{d.jStorage=m(c),b&&(b.setAttribute("jStorage",d.jStorage),b.save("jStorage")),g=d.jStorage?String(d.jStorage).length:0}catch(a){}}function i(a){if(!a||typeof a!="string"&&typeof a!="number"){throw new TypeError("Key name must be string or numeric")}return true}if(!e||!e.toJSON&&!Object.toJSON&&!window.JSON){throw Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!")}var c={},d={jStorage:"{}"},b=null,g=0,m=e.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),l=e.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(a){return String(a).evalJSON()},f=false,j={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false},encode:function(a){if(!this.isXML(a)){return false}try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(c){}}return false},decode:function(a){var b="DOMParser" in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};if(!b){return false}a=b.call("DOMParser" in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:false}};e.jStorage={version:"0.1.5.4",set:function(a,b){i(a);j.isXML(b)&&(b={_is_xml:true,xml:j.encode(b)});c[a]=b;h();return b},get:function(a,b){i(a);return a in c?c[a]&&typeof c[a]=="object"&&c[a]._is_xml&&c[a]._is_xml?j.decode(c[a].xml):c[a]:typeof b=="undefined"?null:b},deleteKey:function(a){i(a);return a in c?(delete c[a],h(),true):false},flush:function(){c={};h();return true},storageObj:function(){function a(){}a.prototype=c;return new a},index:function(){var a=[],b;for(b in c){c.hasOwnProperty(b)&&a.push(b)}return a},storageSize:function(){return g},currentBackend:function(){return f},storageAvailable:function(){return !!f},reInit:function(){var a;if(b&&b.addBehavior){a=document.createElement("link");b.parentNode.replaceChild(a,b);b=a;b.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(b);b.load("jStorage");a="{}";try{a=b.getAttribute("jStorage")}catch(c){}d.jStorage=a;f="userDataBehavior"}k()}};(function(){var a=false;if("localStorage" in window){try{window.localStorage.setItem("_tmptest","tmpval"),a=true,window.localStorage.removeItem("_tmptest")}catch(c){}}if(a){try{if(window.localStorage){d=window.localStorage,f="localStorage"}}catch(e){}}else{if("globalStorage" in window){try{window.globalStorage&&(d=window.globalStorage[window.location.hostname],f="globalStorage")}catch(g){}}else{if(b=document.createElement("link"),b.addBehavior){b.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(b);b.load("jStorage");a="{}";try{a=b.getAttribute("jStorage")}catch(h){}d.jStorage=a;f="userDataBehavior"}else{b=null;return}}}k()})()})(window.jQuery||window.$);(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]]}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha)},spaces={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:true},green:{idx:1,type:"byte",empty:true},blue:{idx:2,type:"byte",empty:true},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:true},saturation:{idx:1,type:"percent",empty:true},lightness:{idx:2,type:"percent",empty:true}}}},propTypes={"byte":{floor:true,min:0,max:255},"percent":{min:0,max:1},"degrees":{mod:360,floor:true}},rgbaspace=spaces.rgba.props,support=color.support={},colors,each=jQuery.each;spaces.hsla.props.alpha=rgbaspace.alpha;function clamp(value,prop,alwaysAllowEmpty){var type=propTypes[prop.type]||{},allowEmpty=prop.empty||alwaysAllowEmpty;if(allowEmpty&&value==null){return null}if(prop.def&&value==null){return prop.def}if(type.floor){value=~~value}else{value=parseFloat(value)}if(value==null||isNaN(value)){return prop.def}if(type.mod){value=value%type.mod;return value<0?type.mod+value:value}return type.min>value?type.min:type.max<value?type.max:value}color.fn=color.prototype={constructor:color,parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this}if(red instanceof jQuery||red.nodeType){red=red instanceof jQuery?red.css(green):jQuery(red).css(green);green=undefined}var inst=this,type=jQuery.type(red),rgba=this._rgba=[],source;if(green!==undefined){red=[red,green,blue,alpha];type="array"}if(type==="string"){red=red.toLowerCase();each(stringParsers,function(i,parser){var match=parser.re.exec(red),values=match&&parser.parse(match),parsed,spaceName=parser.space||"rgba",cache=spaces[spaceName].cache;if(values){parsed=inst[spaceName](values);inst[cache]=parsed[cache];rgba=inst._rgba=parsed._rgba;return false}});if(rgba.length!==0){if(Math.max.apply(Math,rgba)===0){jQuery.extend(rgba,colors.transparent)}return this}red=colors[red]||colors._default;return this.parse(red)}if(type==="array"){each(rgbaspace,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop)});return this}if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice()}})}else{each(spaces,function(spaceName,space){each(space.props,function(key,prop){var cache=space.cache;if(!inst[cache]&&space.to){if(red[key]==null||key==="alpha"){return}inst[cache]=space.to(inst._rgba)}inst[cache][prop.idx]=clamp(red[key],prop,true)})})}return this}},is:function(compare){var is=color(compare),same=true,myself=this;each(spaces,function(_,space){var isCache=is[space.cache],localCache;if(isCache){localCache=myself[space.cache]||space.to&&space.to(myself._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]==localCache[prop.idx]);return same}})}return same});return same},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName)}});return used.pop()},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],start=this[space.cache]||space.to(this._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return}if(startValue===null){result[index]=endValue}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod}else{if(startValue-endValue>type.mod/2){startValue-=type.mod}}}result[prop.idx]=clamp((endValue-startValue)*distance+startValue,prop)}});return this[spaceName](result)},blend:function(opaque){if(this._rgba[3]===1){return this}var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v}))},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v});if(rgba[3]===1){rgba.pop();prefix="rgb("}return prefix+rgba.join(",")+")"},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0}if(i&&i<3){v=Math.round(v*100)+"%"}return v});if(hsla[3]==1){hsla.pop();prefix="hsl("}return prefix+hsla.join(",")+")"},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255))}return"#"+jQuery.map(rgba,function(v,i){v=(v||0).toString(16);return v.length==1?"0"+v:v}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}};color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*6*h}if(h*2<1){return q}if(h*3<2){return p+(q-p)*((2/3)-h)*6}return p}spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]]}var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0}else{if(r===max){h=(60*(g-b)/diff)+360}else{if(g===max){h=(60*(b-r)/diff)+120}else{h=(60*(r-g)/diff)+240}}}if(l===0||l===1){s=l}else{if(l<=0.5){s=diff/add}else{s=diff/(2-add)}}return[Math.round(h)%360,s,l,a==null?1:a]};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]]}var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q,r,g,b;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a]};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba)}if(value===undefined){return this[cache].slice()}var type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice(),ret;each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx]}local[prop.idx]=clamp(val,prop)});if(from){ret=color(from(local));ret[cache]=local;return ret}else{return color(local)}};each(props,function(key,prop){if(color.fn[key]){return}color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur}if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value)}if(value==null&&prop.empty){return this}if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1)}}local[prop.idx]=value;return this[fn](local)}})});each(stepHooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){value=color(value);if(!support.rgba&&value._rgba[3]!==1){var backgroundColor,curElem=hook==="backgroundColor"?elem.parentNode:elem;do{backgroundColor=jQuery.curCSS(curElem,"backgroundColor")}while((backgroundColor===""||backgroundColor==="transparent")&&(curElem=curElem.parentNode)&&curElem.style);value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default")}value=value.toRgbaString();elem.style[hook]=value}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true}jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos))}});jQuery(function(){var div=document.createElement("div"),div_style=div.style;div_style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=div_style.backgroundColor.indexOf("rgba")>-1});colors=jQuery.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);
/*!
 * jQuery postMessage - v0.5 - 9/11/2009
 * http://benalman.com/projects/jquery-postmessage-plugin/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($){var interval_id,last_hash,cache_bust=1,rm_callback,window=this,FALSE=!1,postMessage="postMessage",addEventListener="addEventListener",p_receiveMessage,has_postMessage=window[postMessage]&&!$.browser.opera;$[postMessage]=function(message,target_url,target){if(!target_url){return}message=typeof message==="string"?message:$.param(message);target=target||parent;if(has_postMessage){target[postMessage](message,target_url.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(target_url){target.location=target_url.replace(/#.*$/,"")+"#"+(+new Date)+(cache_bust++)+"&"+message}}};$.receiveMessage=p_receiveMessage=function(callback,source_origin,delay){if(has_postMessage){if(callback){rm_callback&&p_receiveMessage();rm_callback=function(e){if((typeof source_origin==="string"&&e.origin!==source_origin)||($.isFunction(source_origin)&&source_origin(e.origin)===FALSE)){return FALSE}callback(e)}}if(window[addEventListener]){window[callback?addEventListener:"removeEventListener"]("message",rm_callback,FALSE)}else{window[callback?"attachEvent":"detachEvent"]("onmessage",rm_callback)}}else{interval_id&&clearInterval(interval_id);interval_id=null;if(callback){delay=typeof source_origin==="number"?source_origin:typeof delay==="number"?delay:100;interval_id=setInterval(function(){var hash=document.location.hash,re=/^#?\d+&/;if(hash!==last_hash&&re.test(hash)){last_hash=hash;callback({data:hash.replace(re,"")})}},delay)}}}})(jQuery);!function($){$.fn.expando=function(value){return this.each(function(){var $this=$(this);var data=$this.data("expando");if(!("expando" in $.valHooks)){$.valHooks["expando"]={get:function(el){return $(el).find("textarea").val()},set:function(el,value){$el=$(el);var area=$el.find("textarea")[0];var span=$el.find("span")[0];area.value=value;if(area.addEventListener){span.textContent=area.value}else{if(area.attachEvent){span.innerText=area.value}}}}}if(!data){$this.removeClass("expando").addClass("expandable");$this.wrap('<div class="expando"></div>');$this=$this.parent();$this.prepend("<pre><span></span><br></pre>");var span=$this.find("span");var area=$this.find("textarea");$this.attr("style",area.attr("style"));area.attr("style","");$this[0].type="expando";area=area[0];span=span[0];if(area.addEventListener){area.addEventListener("input",function(){console.log(area.value);span.textContent=area.value},false);span.textContent=area.value}else{if(area.attachEvent){area.attachEvent("onpropertychange",function(){span.innerText=area.value});span.innerText=area.value}}$this.addClass("active");$this.data("expando",true)}if(value!=undefined){$this.val(value)}})}}(jQuery);var HelloBar=function(message,atts,version_id){var self=this,_url="http://www.hellobar.com",_tagline="The HelloBar - a little bar that gets noticed!",_ns="hellobar",_sessionBegin,_opts={},_defaultBarHeight=30,_defaultBarBorderSize=3,_shadowSize=5,_defaults={afterOpen:null,afterClose:null,onOpen:null,onClose:null,onReady:null,height:_defaultBarHeight,borderSize:_defaultBarBorderSize,showWait:0,hideAfter:-1,wiggleWait:15000,barColor:"#eb593c",shadow:true,textColor:"#ffffff",linkColor:"#80ccff",linkStyle:"button",forgetful:false,positioning:"sticky",transition:"bouncy",speed:500,closable:true,helloBarLogo:true,tabSide:"right",showTabInstantly:false,texture:""};var _show=true,_alreadyShown=false,_isOpen=self.isOpen=true,_els=["wrapper","container","content","shadow","logo","close","open","pusher"],_ids={},_atts={wrapper:{type:"DIV",style:"display:none;"},container:{type:"DIV"},content:{type:"DIV"},shadow:{type:"DIV"},logo:{type:"A",href:_url,title:_tagline,text:_tagline,target:"_blank"},close:{type:"A",href:"#close",text:"Close",onclick:function(){self.close();return false},onmouseover:function(){openCloseOver()},onmouseout:function(){openCloseOut()}},open:{type:"A",href:"#close",text:"Open",onclick:function(){self.open();return false},onmouseover:function(){openCloseOver()},onmouseout:function(){openCloseOut()}},pusher:{type:"DIV"}};var UA=navigator.userAgent.toLowerCase(),Browser={chrome:UA.match(/chrome/)?true:false,firefox:UA.match(/firefox/)?true:false,firefox2:UA.match(/firefox\/2/)?true:false,firefox30:UA.match(/firefox\/3\.[0-9]/)?true:false,firefox40:UA.match(/firefox\/4\.[0-9]/)?true:false,msie:UA.match(/msie/)?true:false,msie6:(UA.match(/msie 6/)&&!UA.match(/msie 7|8/))?true:false,msie7:UA.match(/msie 7/)?true:false,msie8:UA.match(/msie 8/)?true:false,chromeFrame:(UA.match(/msie/)&&UA.match(/chrome/))?true:false,opera:UA.match(/opera/)?true:false,safari:(UA.match(/safari/)&&!UA.match(/chrome/))?true:false};function build(){var elements={};for(var i=0;i<_els.length;i++){var el=_els[i],valid=true;if(_opts.closable===false){if(el=="close"||el=="open"){valid=false}}if(typeof(_opts.helloBarLogo)!="undefined"){if(_opts.helloBarLogo){if(el=="logo"){valid=true}}}if(valid===true){var element;for(var a in _atts[el]){var val=_atts[el][a];switch(a){case"type":element=document.createElement(val);break;case"text":element.appendChild(document.createTextNode(val));break;case"onclick":element.onclick=val;break;case"onmouseover":element.onmouseover=val;break;case"onmouseout":element.onmouseout=val;break;default:element.setAttribute(a,val);break}}element.id=_ids[el];elements[el]=element}}if(_show===false){elements.container.style.top=(0-(_opts.height+_opts.borderSize))+"px"}if(_opts.positioning=="fixed"||_opts.positioning=="sticky"){if(Browser.msie6){_opts.positioning="overlap";elements.pusher.style.display="none"}}switch(_opts.positioning){case"push":break;case"overlap":elements.wrapper.style.position="absolute";elements.wrapper.style.width="100%";elements.wrapper.style.top="0";elements.wrapper.style.left="0";elements.wrapper.style.zIndex="5000";break;case"fixed":elements.wrapper.style.position="fixed";elements.wrapper.style.width="100%";elements.wrapper.style.top="0";elements.wrapper.style.left="0";elements.wrapper.style.zIndex="5000";break;case"sticky":elements.wrapper.style.position="fixed";elements.wrapper.style.width="100%";elements.wrapper.style.top="0";elements.wrapper.style.left="0";elements.wrapper.style.zIndex="5000";break}elements.container.style.height=_opts.height+"px";elements.wrapper.style.height=_opts.height+"px";elements.pusher.style.height=0+"px";if(_opts.height<60){if(typeof(_opts.helloBarLogo)!="undefined"){if(_opts.helloBarLogo){elements.logo.style.marginTop="-11px";elements.logo.style.top="50%"}}if(elements.close){elements.close.style.marginTop="-10px";elements.close.style.top="50%"}}if(typeof(_opts.texture)!="undefined"){if(_opts.texture!==""){var containerClasses=elements.container.className.split(" ");containerClasses.push("texture");containerClasses.push(_opts.texture);elements.container.className=containerClasses.join(" ")}}if(typeof(_opts.tabRadius)!="undefined"){if(_opts.tabRadius!==""){var browsers=["borderRadius","mozBorderRadius","webkitBorderRadius","oBorderRadius","khtmlBorderRadius"];for(var k in browsers){if(typeof(document.body.style[browsers[k]])!=="undefined"){elements.open.style[browsers[k]]=_opts.tabRadius}}}}if(typeof(_opts.borderSize)!="undefined"){if(_opts.borderSize!==""){elements.container.style.borderBottomWidth=_opts.borderSize+"px";elements.shadow.style.bottom=(0-(_opts.borderSize+_shadowSize))+"px";if(elements.open){elements.open.style.borderWidth=_opts.borderSize+"px"}}}if(typeof(_opts.borderColor)!="undefined"){if(_opts.borderColor!==""){elements.container.style.borderBottomColor=_opts.borderColor;elements.open.style.borderColor=_opts.borderColor}}if(typeof(_opts.shadow)!="undefined"){if(!_opts.shadow){elements.shadow.style.display="none"}}if(typeof(_opts.barColor)!="undefined"){if(_opts.barColor!==""){brightnessCheck(_opts.barColor);elements.container.style.backgroundColor=_opts.barColor;if(elements.open){elements.open.style.backgroundColor=_opts.barColor}}}if(typeof(_opts.textColor)!="undefined"){if(_opts.textColor!==""){elements.container.style.color=_opts.textColor}}if(typeof(_opts.fontWeight)!="undefined"){if(_opts.fontWeight!==""){elements.container.style.fontWeight=_opts.fontWeight}}if(typeof(_opts.fontStyle)!="undefined"){if(_opts.fontStyle!==""){elements.container.style.fontStyle=_opts.fontStyle}}if(typeof(_opts.lineHeight)!="undefined"){if(_opts.lineHeight!==""){elements.container.style.lineHeight=_opts.lineHeight}}else{elements.container.style.lineHeight=_opts.height+"px"}if(typeof(_opts.fontSize)!="undefined"){if(_opts.fontSize!==""){elements.container.style.fontSize=_opts.fontSize}}if(typeof(_opts.fonts)!="undefined"){if(_opts.fonts!==""){elements.container.style.fontFamily=_opts.fonts}}if(typeof(_opts.googleFont)!="undefined"){if(_opts.googleFont!==""){if(typeof(WebFontConfig)=="undefined"){WebFontConfig={google:{families:[_opts.googleFont]}};(function(){var hb_wf=document.createElement("script");hb_wf.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";hb_wf.type="text/javascript";hb_wf.async="true";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hb_wf,s)})()}elements.container.style.fontFamily=_opts.googleFont.split(":")[0].replace(/\+/g," ")}}var wrapperClasses=elements.wrapper.className.split(" ");wrapperClasses.push(_ns+"-"+_opts.tabSide);wrapperClasses.push(_ns+"-"+_opts.imageStyle);if(_opts.linkStyle!="link"){wrapperClasses.push(_ns+"-"+_opts.linkStyle)}elements.wrapper.className=wrapperClasses.join(" ");elements.content.innerHTML=unescape(self.message.replace(/\+/g," "));elements.container.appendChild(elements.content);if(typeof(_opts.helloBarLogo)!="undefined"){if(_opts.helloBarLogo){elements.container.appendChild(elements.logo)}}if(typeof(elements.logo)!="undefined"){elements.logo.href=elements.logo.href+="?utm_source="+document.location.hostname+"&utm_medium=hellobar&utm_campaign=HBSolo"}if(_opts.closable===true){elements.container.appendChild(elements.close)}elements.container.appendChild(elements.shadow);elements.wrapper.appendChild(elements.container);if(_opts.closable===true){elements.wrapper.appendChild(elements.open)}document.body.children[0].parentNode.insertBefore(elements.wrapper,document.body.children[0]);if(_opts.positioning=="sticky"){document.body.children[0].parentNode.insertBefore(elements.pusher,document.body.children[0])}var links=document.getElementById("hellobar-container").getElementsByTagName("A");for(var l in links){var link=links[l],oldOnClick=null;if(typeof(oldOnClick)=="function"){oldOnClick()}if(link.id===""){if(typeof(_opts.linkColor)!="undefined"){if(_opts.linkColor!==""){link.style.color=_opts.linkColor}}link.onclick=function(){if(typeof(oldOnClick)=="function"){oldOnClick()}}}else{if(link.id==_ns+"-logo"){link.onclick=function(){if(typeof(oldOnClick)=="function"){oldOnClick()}return false}}}}}function getCookie(){var cookies=document.cookie.split("; ");for(var i=0;i<cookies.length;i++){var key=cookies[i].split("=")[0],val=cookies[i].split("=")[1];if(key==_ns+"_"+version_id+"_hide"){_show=val==1?false:true}if(key==_ns+"_"+version_id+"_shown"){_alreadyShown=val==1?true:false}}}function setCookie(cookiename,val,clearCookie){if(_opts.forgetful===true){return false}var expireOnSessionClose=false,date=new Date(),days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Nov","Dec"],D=new Date(date.getTime()+(365*86400000));if(typeof(clearCookie)!="undefined"){if(clearCookie===true){D=new Date(date.getTime()-(1*86400000))}if(clearCookie=="this_session"){expireOnSessionClose=true}}var dateStr=days[D.getUTCDay()]+", "+D.getUTCDate()+" "+months[D.getUTCMonth()]+" "+D.getUTCFullYear()+" "+D.getUTCHours()+":"+D.getUTCMinutes()+":"+D.getUTCSeconds()+" UTC";if(expireOnSessionClose){document.cookie=cookiename+"="+val+"; path=/"}else{document.cookie=cookiename+"="+val+"; expires="+dateStr+"; path=/"}}function close(callback){if(_isOpen){setCookie(_ns+"_"+version_id+"_hide",1);setCookie(_ns+"_"+version_id+"_shown",0,"this_session");if(typeof(_opts.onClose)=="function"){_opts.onClose(self,_opts,"onClose")}showTab(hideBar(function(){if(typeof(_opts.afterClose)=="function"){_opts.afterClose(self,_opts,"afterClose")}if(typeof(callback)=="function"){callback(self,_opts,"afterClose")}}));_isOpen=self.isOpen=false}}function open(callback){if(!_isOpen){if(_opts.hideAfter<_opts.showWait){clearInterval(window._hellobar_wiggleWaitTimer);clearTimeout(window._hellobar_hideAfterTimer)}setCookie(_ns+"_"+version_id+"_hide",0,true);setCookie(_ns+"_"+version_id+"_shown",1,"this_session");if(typeof(_opts.onOpen)=="function"){_opts.onOpen(self,_opts,"onOpen")}hideTab(showBar(function(){if(typeof(_opts.afterOpen)=="function"){_opts.afterOpen(self,_opts,"afterOpen")}if(typeof(callback)=="function"){callback(self,_opts,"afterOpen")}}));_isOpen=self.isOpen=true}}function openCloseOver(){self.elements.open.style.backgroundColor=brightenAndReturnRGB(_opts.barColor)}function openCloseOut(){self.elements.open.style.backgroundColor=_opts.barColor}function wiggleMe(){var wiggles=3;return function(pos){return((-Math.cos(pos*Math.PI*((1+(2*wiggles))*pos))/2)+0.5)}}function wiggle(){var animator=new Animator({transition:wiggleMe(),duration:500}).addSubject(new NumericalStyleSubject(self.elements.open,"right",10,13));animator.play()}function startWiggling(){if(_opts.wiggleWait>0){window._hellobar_wiggleWaitTimer="";window._hellobar_wiggleWaitTimer=setInterval(function(){wiggle()},_opts.wiggleWait)}}function showTab(callback){var animator=new Animator({transition:Animator.tx[_opts.transition],duration:_opts.speed,onComplete:function(){if(typeof(callback)=="function"){callback()}}}).addSubject(new NumericalStyleSubject(self.elements.open,"top",-96,-50));animator.play()}function showTabInstantly(){self.elements.open.style.top="-50px"}function hideTab(callback){var animator=new Animator({transition:Animator.tx[_opts.transition],duration:_opts.speed,onComplete:function(){if(typeof(callback)=="function"){callback()}}}).addSubject(new NumericalStyleSubject(self.elements.open,"top",-50,-96));animator.play()}function showBar(callback){var animator=new Animator({transition:Animator.tx[_opts.transition],duration:_opts.speed,onComplete:function(){callback(self,_opts,"afterOpen")}}).addSubject(new NumericalStyleSubject(self.elements.wrapper,"height",0,(_opts.height+_opts.borderSize))).addSubject(new NumericalStyleSubject(self.elements.container,"top",(0-(_opts.height+_opts.borderSize+_shadowSize)),0));if(_opts.positioning=="sticky"){animator.addSubject(new NumericalStyleSubject(self.elements.pusher,"height",0,(0)))}animator.play()}function hideBar(callback){var animator=new Animator({transition:Animator.tx.easeOut,duration:_opts.speed,onComplete:function(){callback(self,_opts,"afterClose")}}).addSubject(new NumericalStyleSubject(self.elements.wrapper,"height",(_opts.height+_opts.borderSize),0)).addSubject(new NumericalStyleSubject(self.elements.container,"top",0,(0-(_opts.height+_opts.borderSize+_shadowSize))));if(_opts.positioning=="sticky"){animator.addSubject(new NumericalStyleSubject(self.elements.pusher,"height",(0),0))}animator.play()}function cleanHexColor(hex){if(!hex.match("^#")){hex="#"+hex}if(hex.length==4){return"#"+hex.substr(1,3)+hex.substr(1,3)}return hex}function hex2rgb(hex){return new RGBColor(hex)}function isRGB(color){if(color.match("^rgb")){return true}else{return false}}function cleanRGB(rgba){var parts=rgba.match(/((\d+)?\.?\d+)/g);return{r:parts[0],g:parts[1],b:parts[2]}}function darkImages(color){if(isRGB(color)){rgb=cleanRGB(color)}else{hex=cleanHexColor(color);rgb=hex2rgb(hex)}if(rgb){var result=((rgb.r*299)+(rgb.g*587)+(rgb.b*114))/1000;if(result>125){return true}else{return false}}}function brightnessCheck(color){if(darkImages(color)){_opts.imageStyle="dark-images"}else{_opts.imageStyle="light-images"}}function brightenAndReturnRGB(color){if(isRGB(color)){rgb=cleanRGB(color)}else{hex=cleanHexColor(color);rgb=hex2rgb(hex)}if(darkImages(color)){var boost=38;return"rgb("+Math.min(rgb.r+boost,255)+","+Math.min(rgb.g+boost,255)+","+Math.min(rgb.b+boost,255)+")"}else{var boost=(0-38);return"rgb("+Math.max(rgb.r+boost,0)+","+Math.max(rgb.g+boost,0)+","+Math.max(rgb.b+boost,0)+")"}var boost=38;return"rgb("+Math.min(rgb.r+boost,255)+","+Math.min(rgb.g+boost,255)+","+Math.min(rgb.b+boost,255)+")"}function generateTimestamp(){var timestamp=Math.floor(new Date().getTime()/1000);return timestamp}this.close=function(callback){close(callback);return false};this.open=function(callback){open(callback);clearTimeout(window._hellobar_wiggleWaitTimer);return false};function initialize(message,atts,version_id){self.message=message;if(document.getElementById("hellobar-wrapper")){document.getElementById("hellobar-wrapper").parentNode.removeChild(document.getElementById("hellobar-wrapper"))}if(document.getElementById("hellobar-pusher")){document.getElementById("hellobar-pusher").parentNode.removeChild(document.getElementById("hellobar-pusher"))}clearTimeout(window._hellobar_showWaitTimer);clearTimeout(window._hellobar_hideAfterTimer);clearTimeout(window._hellobar_wiggleWaitTimer);var currentCookieMatch=document.cookie.match(/hellobar_current\=([0-9]+)/);if(currentCookieMatch){var currentCookieId=currentCookieMatch[1];if(parseInt(currentCookieId,10)!=parseInt(version_id,10)){var oldCookies=document.cookie.match(/hellobar_([0-9]+)_(variation|hide|shown)/g);for(var cookie in oldCookies){var oldCookie=oldCookies[cookie];setCookie(oldCookie,0,true)}setCookie("hellobar_current",0,true)}}setCookie("hellobar_current",version_id);_sessionBegin=generateTimestamp();for(var i in _els){keyname=_els[i];_ids[keyname]=[_ns,keyname].join("-")}for(var k in _defaults){_opts[k]=_defaults[k]}if(typeof(atts)!="undefined"){for(var k in atts){_opts[k]=atts[k]}}if(typeof(_opts.hideDestination)!="undefined"){if(_opts.hideDestination==1&&document.location.href==_opts.destinationUrl){return false}}if(_opts.forgetful===false){getCookie()}else{startWiggling()}_opts.height=Math.max(_opts.height,_defaultBarHeight);if(_opts.height>_defaultBarHeight){_opts.texture=""}if(!document.getElementById(_ids.wrapper)){build();self.elements={};for(var i=0;i<_els.length;i++){var _slug=_els[i];self.elements[_slug]=document.getElementById(_ids[_slug])}document.getElementById(_ids.wrapper).hellobar=self;if(typeof(_opts.onReady)=="function"){_opts.onReady(self,_opts,"onReady")}}if(_show===true&&_alreadyShown===true){self.elements.wrapper.style.display="block";self.elements.container.style.top="0px";self.elements.wrapper.style.height=(_opts.height+_opts.borderSize)+"px";if(_opts.positioning=="sticky"){self.elements.pusher.style.height=(0-(0))+"px"}}self.elements.wrapper.style.display="block";if(_show===true){if(self.elements.open){self.elements.open.style.top="-96px"}if(_alreadyShown!==true){if(_opts.showWait>0){if((_opts.showWait<_opts.hideAfter)||(_opts.hideAfter<0)){self.elements.container.style.top=(0-(_opts.height+_opts.borderSize+_shadowSize))+"px";self.elements.wrapper.style.height="0px";if(_opts.positioning=="sticky"){self.elements.pusher.style.height="0px"}if(_opts.showTabInstantly){showTabInstantly()}else{showTab()}_isOpen=self.isOpen=false}window._hellobar_showWaitTimer="";window._hellobar_showWaitTimer=setTimeout(function(){open()},_opts.showWait)}else{open()}}if(_opts.hideAfter>0){_opts.hideAfter=_opts.hideAfter+_opts.showWait;window._hellobar_hideAfterTimer="";window._hellobar_hideAfterTimer=setTimeout(function(){close()},_opts.hideAfter)}}else{self.elements.container.style.top=(0-(_opts.height+_opts.borderSize+_shadowSize))+"px";self.elements.wrapper.style.height="0px";if(_opts.positioning=="sticky"){self.elements.pusher.style.height="0px"}showTab();_isOpen=self.isOpen=false;startWiggling()}}initialize(message,atts,version_id)};function Animator(a){this.setOptions(a);var b=this;this.timerDelegate=function(){b.onTimerEvent()};this.subjects=[];this.state=this.target=0;this.lastTime=null}Animator.prototype={setOptions:function(a){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},a)},seekTo:function(a){this.seekFromTo(this.state,a)},seekFromTo:function(a,b){this.target=Math.max(0,Math.min(1,b));this.state=Math.max(0,Math.min(1,a));this.lastTime=(new Date).getTime();if(!this.intervalId){this.intervalId=window.setInterval(this.timerDelegate,this.options.interval)}},jumpTo:function(a){this.target=this.state=Math.max(0,Math.min(1,a));this.propagate()},toggle:function(){this.seekTo(1-this.target)},addSubject:function(a){this.subjects[this.subjects.length]=a;return this},clearSubjects:function(){this.subjects=[]},propagate:function(){for(var a=this.options.transition(this.state),b=0;b<this.subjects.length;b++){if(this.subjects[b].setState){this.subjects[b].setState(a)}else{this.subjects[b](a)}}},onTimerEvent:function(){var a=(new Date).getTime(),b=a-this.lastTime;this.lastTime=a;a=b/this.options.duration*(this.state<this.target?1:-1);Math.abs(a)>=Math.abs(this.state-this.target)?this.state=this.target:this.state+=a;try{this.propagate()}finally{this.options.onStep.call(this),this.target==this.state&&this.stop()}},stop:function(){if(this.intervalId){window.clearInterval(this.intervalId),this.intervalId=null,this.options.onComplete.call(this)}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){for(var a="#<Animator:\n",b=0;b<this.subjects.length;b++){a+=this.subjects[b].inspect()}a+=">";return a}};Animator.applyDefaults=function(a,b){var b=b||{},c,d={};for(c in a){d[c]=b[c]!==void 0?b[c]:a[c]}return d};Animator.makeArrayOfElements=function(a){if(a==null){return[]}if("string"==typeof a){return[document.getElementById(a)]}if(!a.length){return[a]}for(var b=[],c=0;c<a.length;c++){b[c]="string"==typeof a[c]?document.getElementById(a[c]):a[c]}return b};Animator.camelize=function(a){var b=a.split("-");if(b.length==1){return b[0]}for(var a=a.indexOf("-")==0?b[0].charAt(0).toUpperCase()+b[0].substring(1):b[0],c=1,d=b.length;c<d;c++){var e=b[c];a+=e.charAt(0).toUpperCase()+e.substring(1)}return a};Animator.apply=function(a,b,c){if(b instanceof Array){return(new Animator(c)).addSubject(new CSSStyleSubject(a,b[0],b[1]))}return(new Animator(c)).addSubject(new CSSStyleSubject(a,b))};Animator.makeEaseIn=function(a){return function(b){return Math.pow(b,a*2)}};Animator.makeEaseOut=function(a){return function(b){return 1-Math.pow(1-b,a*2)}};Animator.makeElastic=function(a){return function(b){b=Animator.tx.easeInOut(b);return(1-Math.cos(b*Math.PI*a))*(1-b)+b}};Animator.makeADSR=function(a,b,c,d){d==null&&(d=0.5);return function(e){if(e<a){return e/a}if(e<b){return 1-(e-a)/(b-a)*(1-d)}if(e<c){return d}return d*(1-(e-c)/(1-c))}};Animator.makeBounce=function(a){var b=Animator.makeElastic(a);return function(a){a=b(a);return a<=1?a:2-a}};Animator.tx={easeInOut:function(a){return -Math.cos(a*Math.PI)/2+0.5},linear:function(a){return a},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)};function NumericalStyleSubject(a,b,c,d,e){this.els=Animator.makeArrayOfElements(a);this.property=b=="opacity"&&window.ActiveXObject?"filter":Animator.camelize(b);this.from=parseFloat(c);this.to=parseFloat(d);this.units=e!=null?e:"px"}NumericalStyleSubject.prototype={setState:function(a){for(var a=this.getStyle(a),b=0,c=0;c<this.els.length;c++){try{this.els[c].style[this.property]=a}catch(d){if(this.property!="fontWeight"){throw d}}if(b++>20){break}}},getStyle:function(a){a=this.from+(this.to-this.from)*a;if(this.property=="filter"){return"alpha(opacity="+Math.round(a*100)+")"}if(this.property=="opacity"){return a}return Math.round(a)+this.units},inspect:function(){return"\t"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n"}};function ColorStyleSubject(a,b,c,d){this.els=Animator.makeArrayOfElements(a);this.property=Animator.camelize(b);this.to=this.expandColor(d);this.from=this.expandColor(c);this.origFrom=c;this.origTo=d}ColorStyleSubject.prototype={expandColor:function(a){var b,c;if(b=ColorStyleSubject.parseColor(a)){return a=parseInt(b.slice(1,3),16),c=parseInt(b.slice(3,5),16),b=parseInt(b.slice(5,7),16),[a,c,b]}window.ANIMATOR_DEBUG&&alert("Invalid colour: '"+a+"'")},getValueForState:function(a,b){return Math.round(this.from[a]+(this.to[a]-this.from[a])*b)},setState:function(a){for(var a="#"+ColorStyleSubject.toColorPart(this.getValueForState(0,a))+ColorStyleSubject.toColorPart(this.getValueForState(1,a))+ColorStyleSubject.toColorPart(this.getValueForState(2,a)),b=0;b<this.els.length;b++){this.els[b].style[this.property]=a}},inspect:function(){return"\t"+this.property+"("+this.origFrom+" to "+this.origTo+")\n"}};ColorStyleSubject.parseColor=function(a){var b="#",c;if(c=ColorStyleSubject.parseColor.rgbRe.exec(a)){for(var d=1;d<=3;d++){a=Math.max(0,Math.min(255,parseInt(c[d]))),b+=ColorStyleSubject.toColorPart(a)}return b}if(c=ColorStyleSubject.parseColor.hexRe.exec(a)){if(c[1].length==3){for(d=0;d<3;d++){b+=c[1].charAt(d)+c[1].charAt(d)}return b}return"#"+c[1]}return !1};ColorStyleSubject.toColorPart=function(a){a>255&&(a=255);var b=a.toString(16);if(a<16){return"0"+b}return b};ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i;ColorStyleSubject.parseColor.hexRe=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;function DiscreteStyleSubject(a,b,c,d,e){this.els=Animator.makeArrayOfElements(a);this.property=Animator.camelize(b);this.from=c;this.to=d;this.threshold=e||0.5}DiscreteStyleSubject.prototype={setState:function(a){for(var b=0;b<this.els.length;b++){this.els[b].style[this.property]=a<=this.threshold?this.from:this.to}},inspect:function(){return"\t"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n"}};function CSSStyleSubject(a,b,c){a=Animator.makeArrayOfElements(a);this.subjects=[];if(a.length!=0){var d;if(c){b=this.parseStyle(b,a[0]),c=this.parseStyle(c,a[0])}else{for(d in c=this.parseStyle(b,a[0]),b={},c){b[d]=CSSStyleSubject.getStyle(a[0],d)}}for(d in b){b[d]==c[d]&&(delete b[d],delete c[d])}var e,f,h,j;for(d in b){var i=String(b[d]),g=String(c[d]);if(c[d]==null){window.ANIMATOR_DEBUG&&alert("No to style provided for '"+d+'"')}else{if(h=ColorStyleSubject.parseColor(i)){j=ColorStyleSubject.parseColor(g),f=ColorStyleSubject}else{if(i.match(CSSStyleSubject.numericalRe)&&g.match(CSSStyleSubject.numericalRe)){h=parseFloat(i),j=parseFloat(g),f=NumericalStyleSubject,e=CSSStyleSubject.numericalRe.exec(i),g=CSSStyleSubject.numericalRe.exec(g),e=e[1]!=null?e[1]:g[1]!=null?g[1]:g}else{if(i.match(CSSStyleSubject.discreteRe)&&g.match(CSSStyleSubject.discreteRe)){h=i,j=g,f=DiscreteStyleSubject,e=0}else{window.ANIMATOR_DEBUG&&alert("Unrecognised format for value of "+d+": '"+b[d]+"'");continue}}}this.subjects[this.subjects.length]=new f(a,d,h,j,e)}}}}CSSStyleSubject.prototype={parseStyle:function(a,b){var c={};if(a.indexOf(":")!=-1){for(var d=a.split(";"),e=0;e<d.length;e++){var f=CSSStyleSubject.ruleRe.exec(d[e]);f&&(c[f[1]]=f[2])}}else{var h;h=b.className;b.className=a;for(e=0;e<CSSStyleSubject.cssProperties.length;e++){d=CSSStyleSubject.cssProperties[e],f=CSSStyleSubject.getStyle(b,d),f!=null&&(c[d]=f)}b.className=h}return c},setState:function(a){for(var b=0;b<this.subjects.length;b++){this.subjects[b].setState(a)}},inspect:function(){for(var a="",b=0;b<this.subjects.length;b++){a+=this.subjects[b].inspect()}return a}};CSSStyleSubject.getStyle=function(a,b){var c;if(document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b))){return c}b=Animator.camelize(b);a.currentStyle&&(c=a.currentStyle[b]);return c||a.style[b]};CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/;CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/;CSSStyleSubject.discreteRe=/^\w+$/;CSSStyleSubject.cssProperties=["azimuth","background","background-attachment","background-color","background-image","background-position","background-repeat","border-collapse","border-color","border-spacing","border-style","border-top","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width","border-width","bottom","clear","clip","color","content","cursor","direction","display","elevation","empty-cells","css-float","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-top","margin-right","margin-bottom","margin-left","max-height","max-width","min-height","min-width","orphans","outline","outline-color","outline-style","outline-width","overflow","padding","padding-top","padding-right","padding-bottom","padding-left","pause","position","right","size","table-layout","text-align","text-decoration","text-indent","text-shadow","text-transform","top","vertical-align","visibility","white-space","width","word-spacing","z-index","opacity","outline-offset","overflow-x","overflow-y"];function AnimatorChain(a,b){this.animators=a;this.setOptions(b);for(var c=0;c<this.animators.length;c++){this.listenTo(this.animators[c])}this.forwards=!1;this.current=0}AnimatorChain.prototype={setOptions:function(a){this.options=Animator.applyDefaults({resetOnPlay:!0},a)},play:function(){this.forwards=!0;this.current=-1;if(this.options.resetOnPlay){for(var a=0;a<this.animators.length;a++){this.animators[a].jumpTo(0)}}this.advance()},reverse:function(){this.forwards=!1;this.current=this.animators.length;if(this.options.resetOnPlay){for(var a=0;a<this.animators.length;a++){this.animators[a].jumpTo(1)}}this.advance()},toggle:function(){this.forwards?this.seekTo(0):this.seekTo(1)},listenTo:function(a){var b=a.options.onComplete,c=this;a.options.onComplete=function(){b&&b.call(a);c.advance()}},advance:function(){this.forwards?this.animators[this.current+1]!=null&&(this.current++,this.animators[this.current].play()):this.animators[this.current-1]!=null&&(this.current--,this.animators[this.current].reverse())},seekTo:function(a){a<=0?(this.forwards=!1,this.animators[this.current].seekTo(0)):(this.forwards=!0,this.animators[this.current].seekTo(1))}};function RGBColor(color_string){this.ok=false;if(color_string.charAt(0)=="#"){color_string=color_string.substr(1,6)}color_string=color_string.replace(/ /g,"");color_string=color_string.toLowerCase();var simple_colors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var key in simple_colors){if(color_string==key){color_string=simple_colors[key]}}var color_defs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(bits){return[parseInt(bits[1]),parseInt(bits[2]),parseInt(bits[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(bits){return[parseInt(bits[1],16),parseInt(bits[2],16),parseInt(bits[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(bits){return[parseInt(bits[1]+bits[1],16),parseInt(bits[2]+bits[2],16),parseInt(bits[3]+bits[3],16)]}}];for(var i=0;i<color_defs.length;i++){var re=color_defs[i].re,processor=color_defs[i].process,bits=re.exec(color_string);if(bits){channels=processor(bits);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var r=this.r.toString(16),g=this.g.toString(16),b=this.b.toString(16);if(r.length==1){r="0"+r}if(g.length==1){g="0"+g}if(b.length==1){b="0"+b}return"#"+r+g+b};this.getHelpXML=function(){var examples=new Array();for(var i=0;i<color_defs.length;i++){var example=color_defs[i].example;for(var j=0;j<example.length;j++){examples[examples.length]=example[j]}}for(var sc in simple_colors){examples[examples.length]=sc}var xml=document.createElement("ul");xml.setAttribute("id","rgbcolor-examples");for(var i=0;i<examples.length;i++){try{var list_item=document.createElement("li"),list_color=new RGBColor(examples[i]),example_div=document.createElement("div");example_div.style.cssText="margin: 3px; border: 1px solid black; background:"+list_color.toHex()+"; color:"+list_color.toHex();example_div.appendChild(document.createTextNode("test"));var list_item_value=document.createTextNode(" "+examples[i]+" -> "+list_color.toRGB()+" -> "+list_color.toHex());list_item.appendChild(example_div);list_item.appendChild(list_item_value);xml.appendChild(list_item)}catch(e){}}return xml}}(function($){$.cookie=function(key,value,options){if(arguments.length>1&&String(value)!=="[object Object]"){options=jQuery.extend({},options);if(value===null||value===undefined){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}value=String(value);return(document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}options=value||{};var result,decode=options.raw?function(s){return s}:decodeURIComponent;return(result=new RegExp("(?:^|; )"+encodeURIComponent(key)+"=([^;]*)").exec(document.cookie))?decode(result[1]):null}})(jQuery);(function($){$.fn.fitVids=function(options){var settings={customSelector:null};var div=document.createElement("div"),ref=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];div.className="fit-vids-style";div.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>";ref.parentNode.insertBefore(div,ref);if(options){$.extend(settings,options)}return this.each(function(){var selectors=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.kickstarter.com']","object","embed"];if(settings.customSelector){selectors.push(settings.customSelector)}var $allVideos=$(this).find(selectors.join(","));$allVideos.each(function(){var $this=$(this);if(this.tagName.toLowerCase()=="embed"&&$this.parent("object").length||$this.parent(".fluid-width-video-wrapper").length){return}var height=this.tagName.toLowerCase()=="object"?$this.attr("height"):$this.height(),aspectRatio=height/$this.width();if(!$this.attr("id")){var videoID="fitvid"+Math.floor(Math.random()*999999);$this.attr("id",videoID)}$this.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",(aspectRatio*100)+"%");$this.removeAttr("height").removeAttr("width")})})}})(jQuery);(function(){var object=Object,array=Array,regexp=RegExp,date=Date,string=String,number=Number,math=Math,Undefined;var globalContext=typeof global!=="undefined"?global:this;var definePropertySupport=object.defineProperty&&object.defineProperties;var ClassNames="Array,Boolean,Date,Function,Number,String,RegExp".split(",");var isArray=buildClassCheck(ClassNames[0]);var isBoolean=buildClassCheck(ClassNames[1]);var isDate=buildClassCheck(ClassNames[2]);var isFunction=buildClassCheck(ClassNames[3]);var isNumber=buildClassCheck(ClassNames[4]);var isString=buildClassCheck(ClassNames[5]);var isRegExp=buildClassCheck(ClassNames[6]);function buildClassCheck(type){return function(obj){return isClass(obj,type)}}function isClass(obj,str){return object.prototype.toString.call(obj)==="[object "+str+"]"}function initializeClasses(){initializeClass(object);iterateOverObject(ClassNames,function(i,name){initializeClass(globalContext[name])})}function initializeClass(klass){if(klass["SugarMethods"]){return}defineProperty(klass,"SugarMethods",{});extend(klass,false,false,{"restore":function(){var all=arguments.length===0,methods=multiArgs(arguments);iterateOverObject(klass["SugarMethods"],function(name,m){if(all||methods.indexOf(name)>-1){defineProperty(m.instance?klass.prototype:klass,name,m.method)}})},"extend":function(methods,override,instance){extend(klass,instance!==false,override,methods)}})}function extend(klass,instance,override,methods){var extendee=instance?klass.prototype:klass,original;initializeClass(klass);iterateOverObject(methods,function(name,method){original=extendee[name];if(typeof override==="function"){method=wrapNative(extendee[name],method,override)}if(override!==false||!extendee[name]){defineProperty(extendee,name,method)}klass["SugarMethods"][name]={instance:instance,method:method,original:original}})}function extendSimilar(klass,instance,override,set,fn){var methods={};set=isString(set)?set.split(","):set;set.forEach(function(name,i){fn(methods,name,i)});extend(klass,instance,override,methods)}function wrapNative(nativeFn,extendedFn,condition){return function(){if(nativeFn&&(condition===true||!condition.apply(this,arguments))){return nativeFn.apply(this,arguments)}else{return extendedFn.apply(this,arguments)}}}function defineProperty(target,name,method){if(definePropertySupport){object.defineProperty(target,name,{"value":method,"configurable":true,"enumerable":false,"writable":true})}else{target[name]=method}}function multiArgs(args,fn){var result=[],i=0;for(i=0;i<args.length;i++){result.push(args[i]);if(fn){fn.call(args,args[i],i)}}return result}function isDefined(o){return o!==Undefined}function isUndefined(o){return o===Undefined}function isObjectPrimitive(obj){return obj&&typeof obj==="object"}function isObject(obj){return !!obj&&isClass(obj,"Object")&&string(obj.constructor)===string(object)}function hasOwnProperty(obj,key){return object["hasOwnProperty"].call(obj,key)}function iterateOverObject(obj,fn){var key;for(key in obj){if(!hasOwnProperty(obj,key)){continue}if(fn.call(obj,key,obj[key])===false){break}}}function simpleMerge(target,source){iterateOverObject(source,function(key){target[key]=source[key]});return target}function Hash(obj){simpleMerge(this,obj)}Hash.prototype.constructor=object;function getRange(start,stop,fn,step){var arr=[],i=parseInt(start),down=step<0;while((!down&&i<=stop)||(down&&i>=stop)){arr.push(i);if(fn){fn.call(this,i)}i+=step||1}return arr}function round(val,precision,method){var fn=math[method||"round"];var multiplier=math.pow(10,math.abs(precision||0));if(precision<0){multiplier=1/multiplier}return fn(val*multiplier)/multiplier}function ceil(val,precision){return round(val,precision,"ceil")}function floor(val,precision){return round(val,precision,"floor")}function padNumber(num,place,sign,base){var str=math.abs(num).toString(base||10);str=repeatString(place-str.replace(/\.\d+/,"").length,"0")+str;if(sign||num<0){str=(num<0?"-":"+")+str}return str}function getOrdinalizedSuffix(num){if(num>=11&&num<=13){return"th"}else{switch(num%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}}function getTrimmableCharacters(){return"\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF"}function repeatString(times,str){return array(math.max(0,isDefined(times)?times:1)+1).join(str||"")}function getRegExpFlags(reg,add){var flags=reg.toString().match(/[^/]*$/)[0];if(add){flags=(flags+add).split("").sort().join("").replace(/([gimy])\1+/g,"$1")}return flags}function escapeRegExp(str){if(!isString(str)){str=string(str)}return str.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1")}function stringify(thing,stack){var value,klass,isObject,isArray,arr,i,key,type=typeof thing;if(type==="string"){return thing}klass=object.prototype.toString.call(thing);isObject=klass==="[object Object]";isArray=klass==="[object Array]";if(thing!=null&&isObject||isArray){if(!stack){stack=[]}if(stack.length>1){i=stack.length;while(i--){if(stack[i]===thing){return"CYC"}}}stack.push(thing);value=string(thing.constructor);arr=isArray?thing:object.keys(thing).sort();for(i=0;i<arr.length;i++){key=isArray?i:arr[i];value+=key+stringify(thing[key],stack)}stack.pop()}else{if(1/thing===-Infinity){value="-0"}else{value=string(thing&&thing.valueOf())}}return type+klass+value}function entryAtIndex(arr,args,str){var result=[],length=arr.length,loop=args[args.length-1]!==false,r;multiArgs(args,function(index){if(isBoolean(index)){return false}if(loop){index=index%length;if(index<0){index=length+index}}r=str?arr.charAt(index)||"":arr[index];result.push(r)});return result.length<2?result[0]:result}function buildObjectInstanceMethods(set,target){extendSimilar(target,true,false,set,function(methods,name){methods[name+(name==="equal"?"s":"")]=function(){return object[name].apply(null,[this].concat(multiArgs(arguments)))}})}initializeClasses();extend(object,false,false,{"keys":function(obj){var keys=[];if(!isObjectPrimitive(obj)&&!isRegExp(obj)&&!isFunction(obj)){throw new TypeError("Object required")}iterateOverObject(obj,function(key,value){keys.push(key)});return keys}});function arrayIndexOf(arr,search,fromIndex,increment){var length=arr.length,fromRight=increment==-1,start=fromRight?length-1:0,index=toIntegerWithDefault(fromIndex,start);if(index<0){index=length+index}if((!fromRight&&index<0)||(fromRight&&index>=length)){index=start}while((fromRight&&index>=0)||(!fromRight&&index<length)){if(arr[index]===search){return index}index+=increment}return -1}function arrayReduce(arr,fn,initialValue,fromRight){var length=arr.length,count=0,defined=isDefined(initialValue),result,index;checkCallback(fn);if(length==0&&!defined){throw new TypeError("Reduce called on empty array with no initial value")}else{if(defined){result=initialValue}else{result=arr[fromRight?length-1:count];count++}}while(count<length){index=fromRight?length-count-1:count;if(index in arr){result=fn(result,arr[index],index,arr)}count++}return result}function toIntegerWithDefault(i,d){if(isNaN(i)){return d}else{return parseInt(i>>0)}}function checkCallback(fn){if(!fn||!fn.call){throw new TypeError("Callback is not callable")}}function checkFirstArgumentExists(args){if(args.length===0){throw new TypeError("First argument must be defined")}}extend(array,false,false,{"isArray":function(obj){return isClass(obj,"Array")}});extend(array,true,false,{"every":function(fn,scope){var length=this.length,index=0;checkFirstArgumentExists(arguments);while(index<length){if(index in this&&!fn.call(scope,this[index],index,this)){return false}index++}return true},"some":function(fn,scope){var length=this.length,index=0;checkFirstArgumentExists(arguments);while(index<length){if(index in this&&fn.call(scope,this[index],index,this)){return true}index++}return false},"map":function(fn,scope){var length=this.length,index=0,result=new Array(length);checkFirstArgumentExists(arguments);while(index<length){if(index in this){result[index]=fn.call(scope,this[index],index,this)}index++}return result},"filter":function(fn,scope){var length=this.length,index=0,result=[];checkFirstArgumentExists(arguments);while(index<length){if(index in this&&fn.call(scope,this[index],index,this)){result.push(this[index])}index++}return result},"indexOf":function(search,fromIndex){if(isString(this)){return this.indexOf(search,fromIndex)}return arrayIndexOf(this,search,fromIndex,1)},"lastIndexOf":function(search,fromIndex){if(isString(this)){return this.lastIndexOf(search,fromIndex)}return arrayIndexOf(this,search,fromIndex,-1)},"forEach":function(fn,scope){var length=this.length,index=0;checkCallback(fn);while(index<length){if(index in this){fn.call(scope,this[index],index,this)}index++}},"reduce":function(fn,init){return arrayReduce(this,fn,init)},"reduceRight":function(fn,init){return arrayReduce(this,fn,init,true)}});function buildTrim(){var support=getTrimmableCharacters().match(/^\s+$/);try{string.prototype.trim.call([1])}catch(e){support=false}extend(string,true,!support,{"trim":function(){return this.toString().trimLeft().trimRight()},"trimLeft":function(){return this.replace(regexp("^["+getTrimmableCharacters()+"]+"),"")},"trimRight":function(){return this.replace(regexp("["+getTrimmableCharacters()+"]+$"),"")}})}function buildBind(){var support=false;if(Function.prototype.bind){function F(){}var B=F.bind();support=(new B instanceof B)&&!(new F instanceof B)}extend(Function,true,!support,{"bind":function(scope){var fn=this,args=multiArgs(arguments).slice(1),nop,bound;if(!isFunction(this)){throw new TypeError("Function.prototype.bind called on a non-function")}bound=function(){return fn.apply(fn.prototype&&this instanceof fn?this:scope,args.concat(multiArgs(arguments)))};nop=function(){};nop.prototype=this.prototype;bound.prototype=new nop();return bound}})}extend(date,false,false,{"now":function(){return new date().getTime()}});function buildISOString(){var d=new date(date.UTC(1999,11,31)),target="1999-12-31T00:00:00.000Z";var support=d.toISOString&&d.toISOString()===target;extendSimilar(date,true,!support,"toISOString,toJSON",function(methods,name){methods[name]=function(){return padNumber(this.getUTCFullYear(),4)+"-"+padNumber(this.getUTCMonth()+1,2)+"-"+padNumber(this.getUTCDate(),2)+"T"+padNumber(this.getUTCHours(),2)+":"+padNumber(this.getUTCMinutes(),2)+":"+padNumber(this.getUTCSeconds(),2)+"."+padNumber(this.getUTCMilliseconds(),3)+"Z"}})}buildTrim();buildBind();buildISOString();function multiMatch(el,match,scope,params){var result=true;if(el===match){return true}else{if(isRegExp(match)&&isString(el)){return regexp(match).test(el)}else{if(isFunction(match)){return match.apply(scope,params)}else{if(isObject(match)&&isObjectPrimitive(el)){iterateOverObject(match,function(key,value){if(!multiMatch(el[key],match[key],scope,[el[key],el])){result=false}});return object.keys(match).length>0&&result}else{return stringify(el)===stringify(match)}}}}}function transformArgument(el,map,context,mapArgs){if(isUndefined(map)){return el}else{if(isFunction(map)){return map.apply(context,mapArgs||[])}else{if(isFunction(el[map])){return el[map].call(el)}else{return el[map]}}}}function arrayEach(arr,fn,startIndex,loop){var length,index,i;if(startIndex<0){startIndex=arr.length+startIndex}i=isNaN(startIndex)?0:startIndex;length=loop===true?arr.length+i:arr.length;while(i<length){index=i%arr.length;if(!(index in arr)){return iterateOverSparseArray(arr,fn,i,loop)}else{if(fn.call(arr,arr[index],index,arr)===false){break}}i++}}function iterateOverSparseArray(arr,fn,fromIndex,loop){var indexes=[],i;for(i in arr){if(isArrayIndex(arr,i)&&i>=fromIndex){indexes.push(parseInt(i))}}indexes.sort().each(function(index){return fn.call(arr,arr[index],index,arr)});return arr}function isArrayIndex(arr,i){return i in arr&&toUInt32(i)==i&&i!=4294967295}function toUInt32(i){return i>>>0}function arrayFind(arr,f,startIndex,loop,returnIndex){var result,index;arrayEach(arr,function(el,i,arr){if(multiMatch(el,f,arr,[el,i,arr])){result=el;index=i;return false}},startIndex,loop);return returnIndex?index:result}function arrayUnique(arr,map){var result=[],o={},stringified,transformed;arrayEach(arr,function(el,i){transformed=map?transformArgument(el,map,arr,[el,i,arr]):el;stringified=stringify(transformed);if(!arrayObjectExists(o,stringified,el)){o[stringified]=transformed;result.push(el)}});return result}function arrayIntersect(arr1,arr2,subtract){var result=[],o={};arr2.each(function(el){o[stringify(el)]=el});arr1.each(function(el){var stringified=stringify(el),exists=arrayObjectExists(o,stringified,el);if(exists!=subtract){delete o[stringified];result.push(el)}});return result}function arrayFlatten(arr,level,current){level=level||Infinity;current=current||0;var result=[];arrayEach(arr,function(el){if(isArray(el)&&current<level){result=result.concat(arrayFlatten(el,level,current+1))}else{result.push(el)}});return result}function flatArguments(args){var result=[];multiArgs(args,function(arg){result=result.concat(arg)});return result}function arrayObjectExists(hash,stringified,obj){return stringified in hash&&(typeof obj!=="function"||obj===hash[stringified])}function getMinOrMax(obj,map,which,all){var edge,result=[],max=which==="max",min=which==="min",isArray=Array.isArray(obj);iterateOverObject(obj,function(key){var el=obj[key];var test=transformArgument(el,map,obj,isArray?[el,parseInt(key),obj]:[]);if(test===edge){result.push(el)}else{if(isUndefined(edge)||(max&&test>edge)||(min&&test<edge)){result=[el];edge=test}}});if(!isArray){result=arrayFlatten(result,1)}return all?result:result[0]}function collateStrings(a,b){var aValue,bValue,aChar,bChar,aEquiv,bEquiv,index=0,tiebreaker=0;a=getCollationReadyString(a);b=getCollationReadyString(b);do{aChar=getCollationCharacter(a,index);bChar=getCollationCharacter(b,index);aValue=getCollationValue(aChar);bValue=getCollationValue(bChar);if(aValue===-1||bValue===-1){aValue=a.charCodeAt(index)||null;bValue=b.charCodeAt(index)||null}aEquiv=aChar!==a.charAt(index);bEquiv=bChar!==b.charAt(index);if(aEquiv!==bEquiv&&tiebreaker===0){tiebreaker=aEquiv-bEquiv}index+=1}while(aValue!=null&&bValue!=null&&aValue===bValue);if(aValue===bValue){return tiebreaker}return aValue<bValue?-1:1}function getCollationReadyString(str){if(array[AlphanumericSortIgnoreCase]){str=str.toLowerCase()}return str.replace(array[AlphanumericSortIgnore],"")}function getCollationCharacter(str,index){var chr=str.charAt(index),eq=array[AlphanumericSortEquivalents]||{};return eq[chr]||chr}function getCollationValue(chr){var order=array[AlphanumericSortOrder];if(!chr){return null}else{return order.indexOf(chr)}}var AlphanumericSortOrder="AlphanumericSortOrder";var AlphanumericSortIgnore="AlphanumericSortIgnore";var AlphanumericSortIgnoreCase="AlphanumericSortIgnoreCase";var AlphanumericSortEquivalents="AlphanumericSortEquivalents";function buildEnhancements(){var callbackCheck=function(){var a=arguments;return a.length>0&&!isFunction(a[0])};extendSimilar(array,true,callbackCheck,"map,every,all,some,any,none,filter",function(methods,name){methods[name]=function(f){return this[name](function(el,index){if(name==="map"){return transformArgument(el,f,this,[el,index,this])}else{return multiMatch(el,f,this,[el,index,this])}})}})}function buildAlphanumericSort(){var order="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var equiv="A,C,E,I,O,S,U";array[AlphanumericSortOrder]=order.split("").map(function(str){return str+str.toLowerCase()}).join("");var equivalents={};arrayEach(equiv.split(","),function(set){var equivalent=set.charAt(0);arrayEach(set.slice(1).split(""),function(chr){equivalents[chr]=equivalent;equivalents[chr.toLowerCase()]=equivalent.toLowerCase()})});array[AlphanumericSortIgnoreCase]=true;array[AlphanumericSortEquivalents]=equivalents}extend(array,false,false,{"create":function(){var result=[];multiArgs(arguments,function(a){if(a&&a.callee){a=multiArgs(a)}result=result.concat(a)});return result}});extend(array,true,false,{"find":function(f,index,loop){return arrayFind(this,f,index,loop)},"findAll":function(f,index,loop){var result=[];arrayEach(this,function(el,i,arr){if(multiMatch(el,f,arr,[el,i,arr])){result.push(el)}},index,loop);return result},"findIndex":function(f,startIndex,loop){var index=arrayFind(this,f,startIndex,loop,true);return isUndefined(index)?-1:index},"count":function(f){if(isUndefined(f)){return this.length}return this.findAll(f).length},"removeAt":function(start,end){if(isUndefined(start)){return this}if(isUndefined(end)){end=start}for(var i=0;i<=(end-start);i++){this.splice(start,1)}return this},"include":function(el,index){return this.clone().add(el,index)},"exclude":function(){return array.prototype.remove.apply(this.clone(),arguments)},"clone":function(){return simpleMerge([],this)},"unique":function(map){return arrayUnique(this,map)},"flatten":function(limit){return arrayFlatten(this,limit)},"union":function(){return arrayUnique(this.concat(flatArguments(arguments)))},"intersect":function(){return arrayIntersect(this,flatArguments(arguments),false)},"subtract":function(a){return arrayIntersect(this,flatArguments(arguments),true)},"at":function(){return entryAtIndex(this,arguments)},"first":function(num){if(isUndefined(num)){return this[0]}if(num<0){num=0}return this.slice(0,num)},"last":function(num){if(isUndefined(num)){return this[this.length-1]}var start=this.length-num<0?0:this.length-num;return this.slice(start)},"from":function(num){return this.slice(num)},"to":function(num){if(isUndefined(num)){num=this.length}return this.slice(0,num)},"min":function(map,all){return getMinOrMax(this,map,"min",all)},"max":function(map,all){return getMinOrMax(this,map,"max",all)},"least":function(map,all){return getMinOrMax(this.groupBy.apply(this,[map]),"length","min",all)},"most":function(map,all){return getMinOrMax(this.groupBy.apply(this,[map]),"length","max",all)},"sum":function(map){var arr=map?this.map(map):this;return arr.length>0?arr.reduce(function(a,b){return a+b}):0},"average":function(map){var arr=map?this.map(map):this;return arr.length>0?arr.sum()/arr.length:0},"inGroups":function(num,padding){var pad=arguments.length>1;var arr=this;var result=[];var divisor=ceil(this.length/num);getRange(0,num-1,function(i){var index=i*divisor;var group=arr.slice(index,index+divisor);if(pad&&group.length<divisor){getRange(1,divisor-group.length,function(){group=group.add(padding)})}result.push(group)});return result},"inGroupsOf":function(num,padding){var result=[],len=this.length,arr=this,group;if(len===0||num===0){return arr}if(isUndefined(num)){num=1}if(isUndefined(padding)){padding=null}getRange(0,ceil(len/num)-1,function(i){group=arr.slice(num*i,num*i+num);while(group.length<num){group.push(padding)}result.push(group)});return result},"isEmpty":function(){return this.compact().length==0},"sortBy":function(map,desc){var arr=this.clone();arr.sort(function(a,b){var aProperty,bProperty,comp;aProperty=transformArgument(a,map,arr,[a]);bProperty=transformArgument(b,map,arr,[b]);if(isString(aProperty)&&isString(bProperty)){comp=collateStrings(aProperty,bProperty)}else{if(aProperty<bProperty){comp=-1}else{if(aProperty>bProperty){comp=1}else{comp=0}}}return comp*(desc?-1:1)});return arr},"randomize":function(){var a=this.concat();for(var j,x,i=a.length;i;j=parseInt(math.random()*i),x=a[--i],a[i]=a[j],a[j]=x){}return a},"zip":function(){var args=multiArgs(arguments);return this.map(function(el,i){return[el].concat(args.map(function(k){return(i in k)?k[i]:null}))})},"sample":function(num){var result=[],arr=this.clone(),index;if(isUndefined(num)){num=1}while(result.length<num){index=floor(math.random()*(arr.length-1));result.push(arr[index]);arr.removeAt(index);if(arr.length==0){break}}return arguments.length>0?result:result[0]},"each":function(fn,index,loop){arrayEach(this,fn,index,loop);return this},"add":function(el,index){if(!isNumber(number(index))||isNaN(index)){index=this.length}array.prototype.splice.apply(this,[index,0].concat(el));return this},"remove":function(){var i,arr=this;multiArgs(arguments,function(f){i=0;while(i<arr.length){if(multiMatch(arr[i],f,arr,[arr[i],i,arr])){arr.splice(i,1)}else{i++}}});return arr},"compact":function(all){var result=[];arrayEach(this,function(el,i){if(isArray(el)){result.push(el.compact())}else{if(all&&el){result.push(el)}else{if(!all&&el!=null&&el.valueOf()===el.valueOf()){result.push(el)}}}});return result},"groupBy":function(map,fn){var arr=this,result={},key;arrayEach(arr,function(el,index){key=transformArgument(el,map,arr,[el,index,arr]);if(!result[key]){result[key]=[]}result[key].push(el)});if(fn){iterateOverObject(result,fn)}return result},"none":function(){return !this.any.apply(this,arguments)}});extend(array,true,false,{"all":array.prototype.every,"any":array.prototype.some,"insert":array.prototype.add});function keysWithCoercion(obj){if(obj&&obj.valueOf){obj=obj.valueOf()}return object.keys(obj)}function buildEnumerableMethods(names,mapping){extendSimilar(object,false,false,names,function(methods,name){methods[name]=function(obj,arg1,arg2){var result;result=array.prototype[name].call(keysWithCoercion(obj),function(key){if(mapping){return transformArgument(obj[key],arg1,obj,[key,obj[key],obj])}else{return multiMatch(obj[key],arg1,obj,[key,obj[key],obj])}},arg2);if(isArray(result)){result=result.reduce(function(o,key,i){o[key]=obj[key];return o},{})}return result}});buildObjectInstanceMethods(names,Hash)}extend(object,false,false,{"map":function(obj,map){return keysWithCoercion(obj).reduce(function(result,key){result[key]=transformArgument(obj[key],map,obj,[key,obj[key],obj]);return result},{})},"reduce":function(obj){var values=keysWithCoercion(obj).map(function(key){return obj[key]});return values.reduce.apply(values,multiArgs(arguments).slice(1))},"size":function(obj){return keysWithCoercion(obj).length}});buildEnhancements();buildAlphanumericSort();buildEnumerableMethods("each,any,all,none,count,find,findAll,isEmpty");buildEnumerableMethods("sum,average,min,max,least,most",true);buildObjectInstanceMethods("map,reduce,size",Hash);var English;var CurrentLocalization;var TimeFormat=["ampm","hour","minute","second","ampm","utc","offset_sign","offset_hours","offset_minutes","ampm"];var FloatReg="\\d{1,2}(?:[,.]\\d+)?";var RequiredTime="({t})?\\s*("+FloatReg+")(?:{h}("+FloatReg+")?{m}(?::?("+FloatReg+"){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))";var KanjiDigits="";var FullWidthDigits="";var AsianDigitMap={};var AsianDigitReg;var DateArgumentUnits;var DateUnitsReversed;var CoreDateFormats=[];var DateOutputFormats=[{token:"f{1,4}|ms|milliseconds",format:function(d){return d.getMilliseconds()}},{token:"ss?|seconds",format:function(d,len){return d.getSeconds()}},{token:"mm?|minutes",format:function(d,len){return d.getMinutes()}},{token:"hh?|hours|12hr",format:function(d){return getShortHour(d)}},{token:"HH?|24hr",format:function(d){return d.getHours()}},{token:"dd?|date|day",format:function(d){return d.getDate()}},{token:"dow|weekday",word:true,format:function(d,loc,n,t){return loc["weekdays"][d.getDay()+(n-1)*7]}},{token:"MM?",format:function(d){return d.getMonth()+1}},{token:"mon|month",word:true,format:function(d,loc,n,len){return loc["months"][d.getMonth()+(n-1)*12]}},{token:"y{2,4}|year",format:function(d){return d.getFullYear()}},{token:"[Tt]{1,2}",format:function(d,loc,n,format){var str=loc["ampm"][floor(d.getHours()/12)];if(format.length===1){str=str.slice(0,1)}if(format.slice(0,1)==="T"){str=str.toUpperCase()}return str}},{token:"z{1,4}|tz|timezone",text:true,format:function(d,loc,n,format){var tz=d.getUTCOffset();if(format=="z"||format=="zz"){tz=tz.replace(/(\d{2})(\d{2})/,function(f,h,m){return padNumber(h,format.length)})}return tz}},{token:"iso(tz|timezone)",format:function(d){return d.getUTCOffset(true)}},{token:"ord",format:function(d){var d=d.getDate();return d+getOrdinalizedSuffix(d)}}];var DateUnits=[{unit:"year",method:"FullYear",multiplier:function(d){var adjust=d?(d.isLeapYear()?1:0):0.25;return(365+adjust)*24*60*60*1000}},{unit:"month",method:"Month",ambiguous:true,multiplier:function(d,ms){var days=30.4375,inMonth;if(d){inMonth=d.daysInMonth();if(ms<=inMonth.days()){days=inMonth}}return days*24*60*60*1000}},{unit:"week",method:"Week",multiplier:function(){return 7*24*60*60*1000}},{unit:"day",method:"Date",ambiguous:true,multiplier:function(){return 24*60*60*1000}},{unit:"hour",method:"Hours",multiplier:function(){return 60*60*1000}},{unit:"minute",method:"Minutes",multiplier:function(){return 60*1000}},{unit:"second",method:"Seconds",multiplier:function(){return 1000}},{unit:"millisecond",method:"Milliseconds",multiplier:function(){return 1}}];var Localizations={};function Localization(l){simpleMerge(this,l);this.compiledFormats=CoreDateFormats.concat()}Localization.prototype={getMonth:function(n){if(isNumber(n)){return n-1}else{return this["months"].indexOf(n)%12}},getWeekday:function(n){return this["weekdays"].indexOf(n)%7},getNumber:function(n){var i;if(isNumber(n)){return n}else{if(n&&(i=this["numbers"].indexOf(n))!==-1){return(i+1)%10}else{return 1}}},getNumericDate:function(n){var self=this;return n.replace(regexp(this["num"],"g"),function(d){var num=self.getNumber(d);return num||""})},getEnglishUnit:function(n){return English["units"][this["units"].indexOf(n)%8]},relative:function(adu){return this.convertAdjustedToFormat(adu,adu[2]>0?"future":"past")},getDuration:function(ms){return this.convertAdjustedToFormat(getAdjustedUnit(ms),"duration")},hasVariant:function(code){code=code||this.code;return code==="en"||code==="en-US"?true:this["variant"]},matchPM:function(str){return str===this["ampm"][1]},convertAdjustedToFormat:function(adu,format){var num=adu[0],u=adu[1],ms=adu[2],sign,unit,last,mult;if(this["code"]=="ru"){last=num.toString().slice(-1);switch(true){case last==1:mult=1;break;case last>=2&&last<=4:mult=2;break;default:mult=3}}else{mult=this["plural"]&&num>1?1:0}unit=this["units"][mult*8+u]||this["units"][u];if(this["capitalizeUnit"]){unit=simpleCapitalize(unit)}sign=this["modifiers"].filter(function(m){return m.name=="sign"&&m.value==(ms>0?1:-1)})[0];return this[format].replace(/\{(.*?)\}/g,function(full,match){switch(match){case"num":return num;case"unit":return unit;case"sign":return sign.src}})},getFormats:function(){return this.cachedFormat?[this.cachedFormat].concat(this.compiledFormats):this.compiledFormats},addFormat:function(src,allowsTime,match,variant,iso){var to=match||[],loc=this,time,timeMarkers,lastIsNumeral;src=src.replace(/\s+/g,"[-,. ]*");src=src.replace(/\{([^,]+?)\}/g,function(all,k){var opt=k.match(/\?$/),slice=k.match(/(\d)(?:-(\d))?/),nc=k.match(/^\d+$/),key=k.replace(/[^a-z]+$/,""),value,arr;if(nc){value=loc["optionals"][nc[0]]}else{if(loc[key]){value=loc[key]}else{if(loc[key+"s"]){value=loc[key+"s"];if(slice){arr=[];value.forEach(function(m,i){var mod=i%(loc["units"]?8:value.length);if(mod>=slice[1]&&mod<=(slice[2]||slice[1])){arr.push(m)}});value=arr}value=arrayToAlternates(value)}}}if(nc){return"(?:"+value+")?"}else{if(!match){to.push(key)}return"("+value+")"+(opt?"?":"")}});if(allowsTime){time=prepareTime(RequiredTime,loc,iso);timeMarkers=["t","[\\s\\u3000]"].concat(loc["timeMarker"]);lastIsNumeral=src.match(/\\d\{\d,\d\}\)+\??$/);addDateInputFormat(loc,"(?:"+time+")[,\\s\\u3000]+?"+src,TimeFormat.concat(to),variant);addDateInputFormat(loc,src+"(?:[,\\s]*(?:"+timeMarkers.join("|")+(lastIsNumeral?"+":"*")+")"+time+")?",to.concat(TimeFormat),variant)}else{addDateInputFormat(loc,src,to,variant)}}};function getLocalization(localeCode,fallback){var loc;if(!isString(localeCode)){localeCode=""}loc=Localizations[localeCode]||Localizations[localeCode.slice(0,2)];if(fallback===false&&!loc){throw new Error("Invalid locale.")}return loc||CurrentLocalization}function setLocalization(localeCode,set){var loc;function initializeField(name){var val=loc[name];if(isString(val)){loc[name]=val.split(",")}else{if(!val){loc[name]=[]}}}function eachAlternate(str,fn){str=str.split("+").map(function(split){return split.replace(/(.+):(.+)$/,function(full,base,suffixes){return suffixes.split("|").map(function(suffix){return base+suffix}).join("|")})}).join("|");return str.split("|").forEach(fn)}function setArray(name,abbreviate,multiple){var arr=[];if(!loc[name]){return}loc[name].forEach(function(el,i){eachAlternate(el,function(str,j){arr[j*multiple+i]=str.toLowerCase()})});if(abbreviate){arr=arr.concat(loc[name].map(function(str){return str.slice(0,3).toLowerCase()}))}return loc[name]=arr}function getDigit(start,stop,allowNumbers){var str="\\d{"+start+","+stop+"}";if(allowNumbers){str+="|(?:"+arrayToAlternates(loc["numbers"])+")+"}return str}function getNum(){var arr=["\\d+"].concat(loc["articles"]);if(loc["numbers"]){arr=arr.concat(loc["numbers"])}return arrayToAlternates(arr)}function setModifiers(){var arr=[];loc.modifiersByName={};loc["modifiers"].forEach(function(modifier){var name=modifier.name;eachAlternate(modifier.src,function(t){var locEntry=loc[name];loc.modifiersByName[t]=modifier;arr.push({name:name,src:t,value:modifier.value});loc[name]=locEntry?locEntry+"|"+t:t})});loc["day"]+="|"+arrayToAlternates(loc["weekdays"]);loc["modifiers"]=arr}loc=new Localization(set);initializeField("modifiers");"months,weekdays,units,numbers,articles,optionals,timeMarker,ampm,timeSuffixes,dateParse,timeParse".split(",").forEach(initializeField);setArray("months",true,12);setArray("weekdays",true,7);setArray("units",false,8);setArray("numbers",false,10);loc["code"]=localeCode;loc["date"]=getDigit(1,2,loc["digitDate"]);loc["year"]=getDigit(4,4);loc["num"]=getNum();setModifiers();if(loc["monthSuffix"]){loc["month"]=getDigit(1,2);loc["months"]=getRange(1,12).map(function(n){return n+loc["monthSuffix"]})}loc["full_month"]=getDigit(1,2)+"|"+arrayToAlternates(loc["months"]);if(loc["timeSuffixes"].length>0){loc.addFormat(prepareTime(RequiredTime,loc),false,TimeFormat)}loc.addFormat("{day}",true);loc.addFormat("{month}"+(loc["monthSuffix"]||""));loc.addFormat("{year}"+(loc["yearSuffix"]||""));loc["timeParse"].forEach(function(src){loc.addFormat(src,true)});loc["dateParse"].forEach(function(src){loc.addFormat(src)});return Localizations[localeCode]=loc}function addDateInputFormat(locale,format,match,variant){locale.compiledFormats.unshift({variant:variant,locale:locale,reg:regexp("^"+format+"$","i"),to:match})}function simpleCapitalize(str){return str.slice(0,1).toUpperCase()+str.slice(1)}function arrayToAlternates(arr){return arr.filter(function(el){return !!el}).join("|")}function collectDateArguments(args,allowDuration){var obj,arr;if(isObject(args[0])){return args}else{if(isNumber(args[0])&&!isNumber(args[1])){return[args[0]]}else{if(isString(args[0])&&allowDuration){return[getDateParamsFromString(args[0]),args[1]]}}}obj={};DateArgumentUnits.forEach(function(u,i){obj[u.unit]=args[i]});return[obj]}function getDateParamsFromString(str,num){var params={};match=str.match(/^(\d+)?\s?(\w+?)s?$/i);if(isUndefined(num)){num=parseInt(match[1])||1}params[match[2].toLowerCase()]=num;return params}function getFormatMatch(match,arr){var obj={},value,num;arr.forEach(function(key,i){value=match[i+1];if(isUndefined(value)||value===""){return}if(key==="year"){obj.yearAsString=value}num=parseFloat(value.replace(/,/,"."));obj[key]=!isNaN(num)?num:value.toLowerCase()});return obj}function cleanDateInput(str){str=str.trim().replace(/^(just )?now|\.+$/i,"");return convertAsianDigits(str)}function convertAsianDigits(str){return str.replace(AsianDigitReg,function(full,disallowed,match){var sum=0,place=1,lastWasHolder,lastHolder;if(disallowed){return full}match.split("").reverse().forEach(function(letter){var value=AsianDigitMap[letter],holder=value>9;if(holder){if(lastWasHolder){sum+=place}place*=value/(lastHolder||1);lastHolder=value}else{if(lastWasHolder===false){place*=10}sum+=place*value}lastWasHolder=holder});if(lastWasHolder){sum+=place}return sum})}function getExtendedDate(f,localeCode,prefer){var d=new date(),relative=false,baseLocalization,loc,format,set,unit,weekday,num,tmp,after;if(isDate(f)){d=f.clone()}else{if(isNumber(f)){d=new date(f)}else{if(isObject(f)){d=new date().set(f,true);set=f}else{if(isString(f)){baseLocalization=getLocalization(localeCode);f=cleanDateInput(f);if(baseLocalization){iterateOverObject(baseLocalization.getFormats(),function(i,dif){var match=f.match(dif.reg);if(match){format=dif;loc=format.locale;set=getFormatMatch(match,format.to,loc);loc.cachedFormat=format;if(set.timestamp){set=set.timestamp;return false}if(format.variant&&!isString(set["month"])&&(isString(set["date"])||baseLocalization.hasVariant(localeCode))){tmp=set["month"];set["month"]=set["date"];set["date"]=tmp}if(set["year"]&&set.yearAsString.length===2){set["year"]=getYearFromAbbreviation(set["year"])}if(set["month"]){set["month"]=loc.getMonth(set["month"]);if(set["shift"]&&!set["unit"]){set["unit"]=loc["units"][7]}}if(set["weekday"]&&set["date"]){delete set["weekday"]}else{if(set["weekday"]){set["weekday"]=loc.getWeekday(set["weekday"]);if(set["shift"]&&!set["unit"]){set["unit"]=loc["units"][5]}}}if(set["day"]&&(tmp=loc.modifiersByName[set["day"]])){set["day"]=tmp.value;d.reset();relative=true}else{if(set["day"]&&(weekday=loc.getWeekday(set["day"]))>-1){delete set["day"];if(set["num"]&&set["month"]){after=function(){updateDate(d,{"weekday":weekday+(7*(set["num"]-1))},false,false,false,1)};set["day"]=1}else{set["weekday"]=weekday}}}if(set["date"]&&!isNumber(set["date"])){set["date"]=loc.getNumericDate(set["date"])}if(loc.matchPM(set["ampm"])&&set["hour"]<12){set["hour"]+=12}if("offset_hours" in set||"offset_minutes" in set){set["utc"]=true;set["offset_minutes"]=set["offset_minutes"]||0;set["offset_minutes"]+=set["offset_hours"]*60;if(set["offset_sign"]==="-"){set["offset_minutes"]*=-1}set["minute"]-=set["offset_minutes"]}if(set["unit"]){relative=true;num=loc.getNumber(set["num"]);unit=loc.getEnglishUnit(set["unit"]);if(set["shift"]||set["edge"]){num*=(tmp=loc.modifiersByName[set["shift"]])?tmp.value:0;if(unit==="month"&&isDefined(set["date"])){d.set({"day":set["date"]},true);delete set["date"]}if(unit==="year"&&isDefined(set["month"])){d.set({"month":set["month"],"day":set["date"]},true);delete set["month"];delete set["date"]}}if(set["sign"]&&(tmp=loc.modifiersByName[set["sign"]])){num*=tmp.value}if(isDefined(set["weekday"])){d.set({"weekday":set["weekday"]},true);delete set["weekday"]}set[unit]=(set[unit]||0)+num}if(set["year_sign"]==="-"){set["year"]*=-1}DateUnitsReversed.slice(1,4).forEach(function(u,i){var value=set[u.unit],fraction=value%1;if(fraction){set[DateUnitsReversed[i].unit]=round(fraction*(u.unit==="second"?1000:60));set[u.unit]=floor(value)}});return false}})}if(!format){d=f?new date(f):new date()}else{if(relative){d.advance(set)}else{if(set["utc"]){d.reset()}updateDate(d,set,true,set["utc"],false,prefer)}}if(set&&set["edge"]){tmp=loc.modifiersByName[set["edge"]];iterateOverObject(DateUnitsReversed.slice(4),function(i,u){if(isDefined(set[u.unit])){unit=u.unit;return false}});if(unit==="year"){set.specificity="month"}else{if(unit==="month"||unit==="week"){set.specificity="day"}}d[(tmp.value<0?"endOf":"beginningOf")+simpleCapitalize(unit)]();if(tmp.value===-2){d.reset()}}if(after){after()}}}}}return{date:d,set:set}}function getYearFromAbbreviation(year){return round(new date().getFullYear()/100)*100-round(year/100)*100+year}function getShortHour(d,utc){var hours=callDateMethod(d,"get",utc,"Hours");return hours===0?12:hours-(floor(hours/13)*12)}function getWeekNumber(date){var dow=date.getDay()||7;date.addDays(4-dow).reset();return 1+floor(date.daysSince(date.clone().beginningOfYear())/7)}function getAdjustedUnit(ms){var next,ams=math.abs(ms),value=ams,unit=0;DateUnitsReversed.slice(1).forEach(function(u,i){next=floor(round(ams/u.multiplier()*10)/10);if(next>=1){value=next;unit=i+1}});return[value,unit,ms]}function formatDate(date,format,relative,localeCode){var adu,loc=getLocalization(localeCode),caps=regexp(/^[A-Z]/),value,shortcut;if(!date.isValid()){return"Invalid Date"}else{if(Date[format]){format=Date[format]}else{if(isFunction(format)){adu=getAdjustedUnit(date.millisecondsFromNow());format=format.apply(date,adu.concat(loc))}}}if(!format&&relative){adu=adu||getAdjustedUnit(date.millisecondsFromNow());if(adu[1]===0){adu[1]=1;adu[0]=1}return loc.relative(adu)}format=format||"long";format=loc[format]||format;DateOutputFormats.forEach(function(dof){format=format.replace(regexp("\\{("+dof.token+")(\\d)?\\}",dof.word?"i":""),function(m,t,d){var val=dof.format(date,loc,d||1,t),l=t.length,one=t.match(/^(.)\1+$/);if(dof.word){if(l===3){val=val.slice(0,3)}if(one||t.match(caps)){val=simpleCapitalize(val)}}else{if(one&&!dof.text){val=(isNumber(val)?padNumber(val,l):val.toString()).slice(-l)}}return val})});return format}function compareDate(d,find,buffer){var p=getExtendedDate(find),accuracy=0,loBuffer=0,hiBuffer=0,override,capitalized;if(buffer>0){loBuffer=hiBuffer=buffer;override=true}if(!p.date.isValid()){return false}if(p.set&&p.set.specificity){DateUnits.forEach(function(u,i){if(u.unit===p.set.specificity){accuracy=u.multiplier(p.date,d-p.date)-1}});capitalized=simpleCapitalize(p.set.specificity);if(p.set["edge"]||p.set["shift"]){p.date["beginningOf"+capitalized]()}if(p.set.specificity==="month"){max=p.date.clone()["endOf"+capitalized]().getTime()}if(!override&&p.set["sign"]&&p.set.specificity!="millisecond"){loBuffer=50;hiBuffer=-50}}var t=d.getTime();var min=p.date.getTime();var max=max||(min+accuracy);return t>=(min-loBuffer)&&t<=(max+hiBuffer)}function updateDate(d,params,reset,utc,advance,prefer){var weekday;function getParam(key){return isDefined(params[key])?params[key]:params[key+"s"]}function paramExists(key){return isDefined(getParam(key))}function canDisambiguate(u,higherUnit){return prefer&&u.ambiguous&&!paramExists(higherUnit.unit)}if(isNumber(params)&&advance){params={"milliseconds":params}}else{if(isNumber(params)){d.setTime(params);return d}}if(params["date"]){params["day"]=params["date"]}iterateOverObject(DateUnitsReversed,function(i,u){var isDay=u.unit==="day";if(paramExists(u.unit)||(isDay&&paramExists("weekday"))){params.specificity=u.unit;return false}else{if(reset&&u.unit!=="week"&&(!isDay||!paramExists("week"))){callDateMethod(d,"set",utc,u.method,(isDay?1:0))}}});DateUnits.forEach(function(u,i){var unit=u.unit,method=u.method,higherUnit=DateUnits[i-1],value;value=getParam(unit);if(isUndefined(value)){return}if(canDisambiguate(u,higherUnit)){var current=callDateMethod(new date,"get",utc,u.method);if(current>=value===(prefer===1)){d[higherUnit.addMethod](prefer)}}if(advance){if(unit==="week"){value=(params["day"]||0)+(value*7);method="Date"}value=(value*advance)+callDateMethod(d,"get",false,method)}else{if(unit==="month"&&paramExists("day")){d.setDate(15)}}callDateMethod(d,"set",utc,method,value);if(advance&&unit==="month"){checkMonthTraversal(d,value)}});if(!advance&&!paramExists("day")&&paramExists("weekday")){var weekday=getParam("weekday"),isAhead,futurePreferred;if(isDefined(prefer)){isAhead=callDateMethod(d,"get",utc,"Day")-(weekday%7)>=0;futurePreferred=prefer===1;if(isAhead===futurePreferred){weekday+=prefer*7}}callDateMethod(d,"set",utc,"Weekday",weekday)}return d}function callDateMethod(d,prefix,utc,method,value){return d[prefix+(utc?"UTC":"")+method](value)}function prepareTime(format,loc,iso){var timeSuffixMapping={"h":0,"m":1,"s":2},add;loc=loc||English;return format.replace(/{([a-z])}/g,function(full,token){var separators=[],isHours=token==="h",tokenIsRequired=isHours&&!iso;if(token==="t"){return loc["ampm"].join("|")}else{if(isHours){separators.push(":")}if(add=loc["timeSuffixes"][timeSuffixMapping[token]]){separators.push(add+"\\s*")}return separators.length===0?"":"(?:"+separators.join("|")+")"+(tokenIsRequired?"":"?")}})}function checkMonthTraversal(date,targetMonth){if(targetMonth<0){targetMonth+=12}if(targetMonth%12!=date.getMonth()){date.setDate(0)}}function createDate(args,prefer){var f;if(isNumber(args[1])){f=collectDateArguments(args)[0]}else{f=args[0]}return getExtendedDate(f,args[1],prefer).date}function buildDateUnits(){DateUnitsReversed=DateUnits.concat().reverse();DateArgumentUnits=DateUnits.concat();DateArgumentUnits.splice(2,1)}function buildDateMethods(){extendSimilar(date,true,false,DateUnits,function(methods,u,i){var unit=u.unit,caps=simpleCapitalize(unit),multiplier=u.multiplier(),since,until;u.addMethod="add"+caps+"s";since=function(f,localeCode){return round((this.getTime()-date.create(f,localeCode).getTime())/multiplier)};until=function(f,localeCode){return round((date.create(f,localeCode).getTime()-this.getTime())/multiplier)};methods[unit+"sAgo"]=until;methods[unit+"sUntil"]=until;methods[unit+"sSince"]=since;methods[unit+"sFromNow"]=since;methods[u.addMethod]=function(num,reset){var set={};set[unit]=num;return this.advance(set,reset)};buildNumberToDateAlias(u,multiplier);if(i<3){["Last","This","Next"].forEach(function(shift){methods["is"+shift+caps]=function(){return this.is(shift+" "+unit)}})}if(i<4){methods["beginningOf"+caps]=function(){var set={};switch(unit){case"year":set["year"]=this.getFullYear();break;case"month":set["month"]=this.getMonth();break;case"day":set["day"]=this.getDate();break;case"week":set["weekday"]=0;break}return this.set(set,true)};methods["endOf"+caps]=function(){var set={"hours":23,"minutes":59,"seconds":59,"milliseconds":999};switch(unit){case"year":set["month"]=11;set["day"]=31;break;case"month":set["day"]=this.daysInMonth();break;case"week":set["weekday"]=6;break}return this.set(set,true)}}})}function buildCoreInputFormats(){English.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",true,["year_sign","year","month","date"],false,true);English.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",true,["date","month","year"],true);English.addFormat("{full_month}[-.](\\d{4,4})",false,["month","year"]);English.addFormat("\\/Date\\((\\d+(?:\\+\\d{4,4})?)\\)\\/",false,["timestamp"]);English.addFormat(prepareTime(RequiredTime,English),false,TimeFormat);CoreDateFormats=English.compiledFormats.slice(0,7).reverse();English.compiledFormats=English.compiledFormats.slice(7).concat(CoreDateFormats)}function buildDateOutputShortcuts(){extendSimilar(date,true,false,"short,long,full",function(methods,name){methods[name]=function(localeCode){return formatDate(this,name,false,localeCode)}})}function buildAsianDigits(){KanjiDigits.split("").forEach(function(digit,value){var holder;if(value>9){value=math.pow(10,value-9)}AsianDigitMap[digit]=value});FullWidthDigits.split("").forEach(function(digit,value){AsianDigitMap[digit]=value});AsianDigitReg=regexp("([])?(["+KanjiDigits+FullWidthDigits+"]+)(?!)","g")}function buildRelativeAliases(){var special="today,yesterday,tomorrow,weekday,weekend,future,past".split(",");var weekdays=English["weekdays"].slice(0,7);var months=English["months"].slice(0,12);extendSimilar(date,true,false,special.concat(weekdays).concat(months),function(methods,name){methods["is"+simpleCapitalize(name)]=function(){return this.is(name)}})}function setDateProperties(){date.extend({"RFC1123":"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}","RFC1036":"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}","ISO8601_DATE":"{yyyy}-{MM}-{dd}","ISO8601_DATETIME":"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"},false,false)}function buildDate(){buildDateUnits();buildDateMethods();buildCoreInputFormats();buildDateOutputShortcuts();buildAsianDigits();buildRelativeAliases();setDateProperties()}date.extend({"create":function(){return createDate(arguments)},"past":function(){return createDate(arguments,-1)},"future":function(){return createDate(arguments,1)},"addLocale":function(localeCode,set){return setLocalization(localeCode,set)},"setLocale":function(localeCode,set){var loc=getLocalization(localeCode,false);CurrentLocalization=loc;if(localeCode&&localeCode!=loc["code"]){loc["code"]=localeCode}return loc},"getLocale":function(localeCode){return !localeCode?CurrentLocalization:getLocalization(localeCode,false)},"addFormat":function(format,match,localeCode){addDateInputFormat(getLocalization(localeCode),format,match)}},false,false);date.extend({"set":function(){var args=collectDateArguments(arguments);return updateDate(this,args[0],args[1])},"setUTC":function(){var args=collectDateArguments(arguments);return updateDate(this,args[0],args[1],true)},"setWeekday":function(dow){if(isUndefined(dow)){return}this.setDate(this.getDate()+dow-this.getDay())},"setUTCWeekday":function(dow){if(isUndefined(dow)){return}this.setDate(this.getUTCDate()+dow-this.getDay())},"setWeek":function(week){if(isUndefined(week)){return}var date=this.getDate();this.setMonth(0);this.setDate((week*7)+1)},"setUTCWeek":function(week){if(isUndefined(week)){return}var date=this.getUTCDate();this.setMonth(0);this.setUTCDate((week*7)+1)},"getWeek":function(){return getWeekNumber(this)},"getUTCWeek":function(){return getWeekNumber(this.toUTC())},"getUTCOffset":function(iso){var offset=this.utc?0:this.getTimezoneOffset();var colon=iso===true?":":"";if(!offset&&iso){return"Z"}return padNumber(round(-offset/60),2,true)+colon+padNumber(offset%60,2)},"toUTC":function(){if(this.utc){return this}var d=this.clone().addMinutes(this.getTimezoneOffset());d.utc=true;return d},"isUTC":function(){return this.utc||this.getTimezoneOffset()===0},"advance":function(){var args=collectDateArguments(arguments,true);return updateDate(this,args[0],args[1],false,1)},"rewind":function(){var args=collectDateArguments(arguments,true);return updateDate(this,args[0],args[1],false,-1)},"isValid":function(){return !isNaN(this.getTime())},"isAfter":function(d,margin){return this.getTime()>date.create(d).getTime()-(margin||0)},"isBefore":function(d,margin){return this.getTime()<date.create(d).getTime()+(margin||0)},"isBetween":function(d1,d2,margin){var t=this.getTime();var t1=date.create(d1).getTime();var t2=date.create(d2).getTime();var lo=math.min(t1,t2);var hi=math.max(t1,t2);margin=margin||0;return(lo-margin<t)&&(hi+margin>t)},"isLeapYear":function(){var year=this.getFullYear();return(year%4===0&&year%100!==0)||(year%400===0)},"daysInMonth":function(){return 32-new date(this.getFullYear(),this.getMonth(),32).getDate()},"format":function(f,localeCode){return formatDate(this,f,false,localeCode)},"relative":function(f,localeCode){if(isString(f)){localeCode=f;f=null}return formatDate(this,f,true,localeCode)},"is":function(d,margin){var tmp;if(!this.isValid()){return}if(isString(d)){d=d.trim().toLowerCase();switch(true){case d==="future":return this.getTime()>new date().getTime();case d==="past":return this.getTime()<new date().getTime();case d==="weekday":return this.getDay()>0&&this.getDay()<6;case d==="weekend":return this.getDay()===0||this.getDay()===6;case (tmp=English["weekdays"].indexOf(d)%7)>-1:return this.getDay()===tmp;case (tmp=English["months"].indexOf(d)%12)>-1:return this.getMonth()===tmp}}return compareDate(this,d,margin)},"reset":function(unit){var params={},recognized;unit=unit||"hours";if(unit==="date"){unit="days"}recognized=DateUnits.some(function(u){return unit===u.unit||unit===u.unit+"s"});params[unit]=unit.match(/^days?/)?1:0;return recognized?this.set(params,true):this},"clone":function(){return new date(this.getTime())}});date.extend({"iso":function(){return this.toISOString()},"getWeekday":date.prototype.getDay,"getUTCWeekday":date.prototype.getUTCDay});function buildNumberToDateAlias(u,multiplier){var unit=u.unit,methods={};function base(){return round(this*multiplier)}function after(){return createDate(arguments)[u.addMethod](this)}function before(){return createDate(arguments)[u.addMethod](-this)}methods[unit]=base;methods[unit+"s"]=base;methods[unit+"Before"]=before;methods[unit+"sBefore"]=before;methods[unit+"Ago"]=before;methods[unit+"sAgo"]=before;methods[unit+"After"]=after;methods[unit+"sAfter"]=after;methods[unit+"FromNow"]=after;methods[unit+"sFromNow"]=after;number.extend(methods)}number.extend({"duration":function(localeCode){return getLocalization(localeCode).getDuration(this)}});English=CurrentLocalization=date.addLocale("en",{"plural":true,"timeMarker":"at","ampm":"am,pm","months":"January,February,March,April,May,June,July,August,September,October,November,December","weekdays":"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday","units":"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s","numbers":"one,two,three,four,five,six,seven,eight,nine,ten","articles":"a,an,the","optionals":"the,st|nd|rd|th,of","short":"{Month} {d}, {yyyy}","long":"{Month} {d}, {yyyy} {h}:{mm}{tt}","full":"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}","past":"{num} {unit} {sign}","future":"{num} {unit} {sign}","duration":"{num} {unit}","modifiers":[{"name":"day","src":"yesterday","value":-1},{"name":"day","src":"today","value":0},{"name":"day","src":"tomorrow","value":1},{"name":"sign","src":"ago|before","value":-1},{"name":"sign","src":"from now|after|from|in","value":1},{"name":"edge","src":"last day","value":-2},{"name":"edge","src":"end","value":-1},{"name":"edge","src":"first day|beginning","value":1},{"name":"shift","src":"last","value":-1},{"name":"shift","src":"the|this","value":0},{"name":"shift","src":"next","value":1}],"dateParse":["{num} {unit} {sign}","{sign} {num} {unit}","{num} {unit=4-5} {sign} {day}","{month} {year}","{shift} {unit=5-7}","{0} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],"timeParse":["{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1} {year?}","{date} {month} {year}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2} {shift} week","{0} {date}{1} of {month}","{0}{month?} {date?}{1} of {shift} {unit=6-7}"]});buildDate();var DateRange=function(start,end){this.start=date.create(start);this.end=date.create(end)};DateRange.prototype.toString=function(){return this.isValid()?this.start.full()+".."+this.end.full():"Invalid DateRange"};extend(DateRange,true,false,{"isValid":function(){return this.start<this.end},"duration":function(){return this.isValid()?this.end.getTime()-this.start.getTime():NaN},"contains":function(obj){var self=this,arr=obj.start&&obj.end?[obj.start,obj.end]:[obj];return arr.every(function(d){return d>=self.start&&d<=self.end})},"every":function(increment,fn){var current=this.start.clone(),result=[],index=0,params;if(isString(increment)){current.advance(getDateParamsFromString(increment,0),true);params=getDateParamsFromString(increment)}else{params={"milliseconds":increment}}while(current<=this.end){result.push(current);if(fn){fn(current,index)}current=current.clone().advance(params,true);index++}return result},"union":function(range){return new DateRange(this.start<range.start?this.start:range.start,this.end>range.end?this.end:range.end)},"intersect":function(range){return new DateRange(this.start>range.start?this.start:range.start,this.end<range.end?this.end:range.end)}});extendSimilar(DateRange,true,false,"Millisecond,Second,Minute,Hour,Day,Week,Month,Year",function(methods,name){methods["each"+name]=function(fn){return this.every(name,fn)}});extend(date,false,false,{"range":function(start,end){return new DateRange(start,end)}});function setDelay(fn,ms,after,scope,args){if(!fn.timers){fn.timers=[]}if(!isNumber(ms)){ms=0}fn.timers.push(setTimeout(function(){fn.timers.splice(index,1);after.apply(scope,args||[])},ms));var index=fn.timers.length}extend(Function,true,false,{"lazy":function(ms,limit){var fn=this,queue=[],lock=false,execute,rounded,perExecution;ms=ms||1;limit=limit||Infinity;rounded=ceil(ms);perExecution=round(rounded/ms);execute=function(){if(lock||queue.length==0){return}var max=math.max(queue.length-perExecution,0);while(queue.length>max){Function.prototype.apply.apply(fn,queue.shift())}setDelay(lazy,rounded,function(){lock=false;execute()});lock=true};function lazy(){if(lock&&queue.length>limit-2){return}queue.push([this,arguments]);execute()}return lazy},"delay":function(ms){var fn=this;var args=multiArgs(arguments).slice(1);setDelay(fn,ms,fn,fn,args);return fn},"throttle":function(ms){return this.lazy(ms,1)},"debounce":function(ms){var fn=this;return function(){fn.cancel();setDelay(fn,ms,fn,this,arguments)}},"cancel":function(){if(isArray(this.timers)){while(this.timers.length>0){clearTimeout(this.timers.shift())}}return this},"after":function(num){var fn=this,counter=0,storedArguments=[];if(!isNumber(num)){num=1}else{if(num===0){fn.call();return fn}}return function(){var ret;storedArguments.push(multiArgs(arguments));counter++;if(counter==num){ret=fn.call(this,storedArguments);counter=0;storedArguments=[];return ret}}},"once":function(){var fn=this;return function(){return hasOwnProperty(fn,"memo")?fn["memo"]:fn["memo"]=fn.apply(this,arguments)}},"fill":function(){var fn=this,curried=multiArgs(arguments);return function(){var args=multiArgs(arguments);curried.forEach(function(arg,index){if(arg!=null||index>=args.length){args.splice(index,0,arg)}});return fn.apply(this,args)}}});function abbreviateNumber(num,roundTo,str,mid,limit,bytes){var fixed=num.toFixed(20),decimalPlace=fixed.search(/\./),numeralPlace=fixed.search(/[1-9]/),significant=decimalPlace-numeralPlace,unit,i,divisor;if(significant>0){significant-=1}i=math.max(math.min((significant/3).floor(),limit===false?str.length:limit),-mid);unit=str.charAt(i+mid-1);if(significant<-9){i=-3;roundTo=significant.abs()-9;unit=str.slice(0,1)}divisor=bytes?(2).pow(10*i):(10).pow(i*3);return(num/divisor).round(roundTo||0).format()+unit.trim()}extend(number,false,false,{"random":function(n1,n2){var min,max;if(arguments.length==1){n2=n1,n1=0}min=math.min(n1||0,isUndefined(n2)?1:n2);max=math.max(n1||0,isUndefined(n2)?1:n2);return round((math.random()*(max-min))+min)}});extend(number,true,false,{"log":function(base){return math.log(this)/(base?math.log(base):1)},"abbr":function(precision){return abbreviateNumber(this,precision,"kmbt",0,4)},"metric":function(precision,limit){return abbreviateNumber(this,precision,"nm kMGTPE",4,isUndefined(limit)?1:limit)},"bytes":function(precision,limit){return abbreviateNumber(this,precision,"kMGTPE",0,isUndefined(limit)?4:limit,true)+"B"},"isInteger":function(){return this%1==0},"isOdd":function(){return !this.isMultipleOf(2)},"isEven":function(){return this.isMultipleOf(2)},"isMultipleOf":function(num){return this%num===0},"format":function(place,thousands,decimal){var str,split,method,after,r=/(\d+)(\d{3})/;if(string(thousands).match(/\d/)){throw new TypeError("Thousands separator cannot contain numbers.")}str=isNumber(place)?round(this,place||0).toFixed(math.max(place,0)):this.toString();thousands=thousands||",";decimal=decimal||".";split=str.split(".");str=split[0];after=split[1]||"";while(str.match(r)){str=str.replace(r,"$1"+thousands+"$2")}if(after.length>0){str+=decimal+repeatString((place||0)-after.length,"0")+after}return str},"hex":function(pad){return this.pad(pad||1,false,16)},"upto":function(num,fn,step){return getRange(this,num,fn,step||1)},"downto":function(num,fn,step){return getRange(this,num,fn,-(step||1))},"times":function(fn){if(fn){for(var i=0;i<this;i++){fn.call(this,i)}}return this.toNumber()},"chr":function(){return string.fromCharCode(this)},"pad":function(place,sign,base){return padNumber(this,place,sign,base)},"ordinalize":function(){var suffix,num=this.abs(),last=parseInt(num.toString().slice(-2));return this+getOrdinalizedSuffix(last)},"toNumber":function(){return parseFloat(this,10)}});function buildNumber(){extendSimilar(number,true,false,"round,floor,ceil",function(methods,name){methods[name]=function(precision){return round(this,precision,name)}});extendSimilar(number,true,false,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(methods,name){methods[name]=function(a,b){return math[name](this,a,b)}})}buildNumber();var ObjectTypeMethods="isObject,isNaN".split(",");var ObjectHashMethods="keys,values,each,merge,clone,equal,watch,tap,has".split(",");function setParamsObject(obj,param,value,deep){var reg=/^(.+?)(\[.*\])$/,paramIsArray,match,allKeys,key;if(deep!==false&&(match=param.match(reg))){key=match[1];allKeys=match[2].replace(/^\[|\]$/g,"").split("][");allKeys.forEach(function(k){paramIsArray=!k||k.match(/^\d+$/);if(!key&&isArray(obj)){key=obj.length}if(!obj[key]){obj[key]=paramIsArray?[]:{}}obj=obj[key];key=k});if(!key&&paramIsArray){key=obj.length.toString()}setParamsObject(obj,key,value)}else{if(value.match(/^[\d.]+$/)){obj[param]=parseFloat(value)}else{if(value==="true"){obj[param]=true}else{if(value==="false"){obj[param]=false}else{obj[param]=value}}}}}function buildTypeMethods(){extendSimilar(object,false,false,ClassNames,function(methods,name){var method="is"+name;ObjectTypeMethods.push(method);methods[method]=function(obj){return isClass(obj,name)}})}function buildObjectExtend(){extend(object,false,function(){return arguments.length===0},{"extend":function(){buildObjectInstanceMethods(ObjectTypeMethods.concat(ObjectHashMethods),object)}})}extend(object,false,true,{"watch":function(obj,prop,fn){if(!definePropertySupport){return}var value=obj[prop];object.defineProperty(obj,prop,{"enumerable":true,"configurable":true,"get":function(){return value},"set":function(to){value=fn.call(obj,prop,value,to)}})}});extend(object,false,function(arg1,arg2){return isFunction(arg2)},{"keys":function(obj,fn){var keys=object.keys(obj);keys.forEach(function(key){fn.call(obj,key,obj[key])});return keys}});extend(object,false,false,{"isObject":function(obj){return isObject(obj)},"isNaN":function(obj){return isNumber(obj)&&obj.valueOf()!==obj.valueOf()},"equal":function(a,b){return stringify(a)===stringify(b)},"extended":function(obj){return new Hash(obj)},"merge":function(target,source,deep,resolve){var key,val;if(target&&typeof source!="string"){for(key in source){if(!hasOwnProperty(source,key)||!target){continue}val=source[key];if(isDefined(target[key])){if(resolve===false){continue}if(isFunction(resolve)){val=resolve.call(source,key,target[key],source[key])}}if(deep===true&&val&&isObjectPrimitive(val)){if(isDate(val)){val=new date(val.getTime())}else{if(isRegExp(val)){val=new regexp(val.source,getRegExpFlags(val))}else{if(!target[key]){target[key]=array.isArray(val)?[]:{}}object.merge(target[key],source[key],deep,resolve);continue}}}target[key]=val}}return target},"values":function(obj,fn){var values=[];iterateOverObject(obj,function(k,v){values.push(v);if(fn){fn.call(obj,v)}});return values},"clone":function(obj,deep){if(!isObjectPrimitive(obj)){return obj}if(array.isArray(obj)){return obj.concat()}var target=obj instanceof Hash?new Hash():{};return object.merge(target,obj,deep)},"fromQueryString":function(str,deep){var result=object.extended(),split;str=str&&str.toString?str.toString():"";decodeURIComponent(str.replace(/^.*?\?/,"")).split("&").forEach(function(p){var split=p.split("=");if(split.length!==2){return}setParamsObject(result,split[0],split[1],deep)});return result},"tap":function(obj,arg){var fn=arg;if(!isFunction(arg)){fn=function(){if(arg){obj[arg]()}}}fn.call(obj,obj);return obj},"has":function(obj,key){return hasOwnProperty(obj,key)}});buildTypeMethods();buildObjectExtend();buildObjectInstanceMethods(ObjectHashMethods,Hash);function uniqueRegExpFlags(flags){return flags.split("").sort().join("").replace(/([gimy])\1+/g,"$1")}extend(regexp,false,false,{"escape":function(str){return escapeRegExp(str)}});extend(regexp,true,false,{"getFlags":function(){return getRegExpFlags(this)},"setFlags":function(flags){return regexp(this.source,flags)},"addFlag":function(flag){return this.setFlags(getRegExpFlags(this,flag))},"removeFlag":function(flag){return this.setFlags(getRegExpFlags(this).replace(flag,""))}});function getAcronym(word){var inflector=string.Inflector;var word=inflector&&inflector.acronyms[word];if(isString(word)){return word}}function padString(str,p,left,right){var padding=string(p);if(padding!=p){padding=""}if(!isNumber(left)){left=1}if(!isNumber(right)){right=1}return padding.repeat(left)+str+padding.repeat(right)}function chr(num){return string.fromCharCode(num)}var btoa,atob;function buildBase64(key){if(this.btoa){btoa=this.btoa;atob=this.atob;return}var base64reg=/[^A-Za-z0-9\+\/\=]/g;btoa=function(str){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;do{chr1=str.charCodeAt(i++);chr2=str.charCodeAt(i++);chr3=str.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else{if(isNaN(chr3)){enc4=64}}output=output+key.charAt(enc1)+key.charAt(enc2)+key.charAt(enc3)+key.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<str.length);return output};atob=function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;if(input.match(base64reg)){throw new Error("String contains invalid base64 characters")}input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=key.indexOf(input.charAt(i++));enc2=key.indexOf(input.charAt(i++));enc3=key.indexOf(input.charAt(i++));enc4=key.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+chr(chr1);if(enc3!=64){output=output+chr(chr2)}if(enc4!=64){output=output+chr(chr3)}chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<input.length);return output}}extend(string,true,false,{"escapeRegExp":function(){return escapeRegExp(this)},"escapeURL":function(param){return param?encodeURIComponent(this):encodeURI(this)},"unescapeURL":function(param){return param?decodeURI(this):decodeURIComponent(this)},"escapeHTML":function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},"unescapeHTML":function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},"encodeBase64":function(){return btoa(this)},"decodeBase64":function(){return atob(this)},"each":function(search,fn){var match,i;if(isFunction(search)){fn=search;search=/[\s\S]/g}else{if(!search){search=/[\s\S]/g}else{if(isString(search)){search=regexp(escapeRegExp(search),"gi")}else{if(isRegExp(search)){search=regexp(search.source,getRegExpFlags(search,"g"))}}}}match=this.match(search)||[];if(fn){for(i=0;i<match.length;i++){match[i]=fn.call(this,match[i],i,match)||match[i]}}return match},"shift":function(n){var result="";n=n||0;this.codes(function(c){result+=chr(c+n)});return result},"codes":function(fn){var codes=[];for(var i=0;i<this.length;i++){var code=this.charCodeAt(i);codes.push(code);if(fn){fn.call(this,code,i)}}return codes},"chars":function(fn){return this.each(fn)},"words":function(fn){return this.trim().each(/\S+/g,fn)},"lines":function(fn){return this.trim().each(/^.*$/gm,fn)},"paragraphs":function(fn){var paragraphs=this.trim().split(/[\r\n]{2,}/);paragraphs=paragraphs.map(function(p){if(fn){var s=fn.call(p)}return s?s:p});return paragraphs},"startsWith":function(reg,c){if(isUndefined(c)){c=true}var source=isRegExp(reg)?reg.source.replace("^",""):escapeRegExp(reg);return regexp("^"+source,c?"":"i").test(this)},"endsWith":function(reg,c){if(isUndefined(c)){c=true}var source=isRegExp(reg)?reg.source.replace("$",""):escapeRegExp(reg);return regexp(source+"$",c?"":"i").test(this)},"isBlank":function(){return this.trim().length===0},"has":function(find){return this.search(isRegExp(find)?find:escapeRegExp(find))!==-1},"add":function(str,index){index=isUndefined(index)?this.length:index;return this.slice(0,index)+str+this.slice(index)},"remove":function(f){return this.replace(f,"")},"reverse":function(){return this.split("").reverse().join("")},"compact":function(){return this.trim().replace(/([\r\n\s])+/g,function(match,whitespace){return whitespace===""?whitespace:" "})},"at":function(){return entryAtIndex(this,arguments,true)},"from":function(num){return this.slice(num)},"to":function(num){if(isUndefined(num)){num=this.length}return this.slice(0,num)},"dasherize":function(){return this.underscore().replace(/_/g,"-")},"underscore":function(){return this.replace(/[-\s]+/g,"_").replace(string.Inflector&&string.Inflector.acronymRegExp,function(acronym,index){return(index>0?"_":"")+acronym.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},"camelize":function(first){return this.underscore().replace(/(^|_)([^_]+)/g,function(match,pre,word,index){var acronym=getAcronym(word),capitalize=first!==false||index>0;if(acronym){return capitalize?acronym:acronym.toLowerCase()}return capitalize?word.capitalize():word})},"spacify":function(){return this.underscore().replace(/_/g," ")},"stripTags":function(){var str=this,args=arguments.length>0?arguments:[""];multiArgs(args,function(tag){str=str.replace(regexp("</?"+escapeRegExp(tag)+"[^<>]*>","gi"),"")});return str},"removeTags":function(){var str=this,args=arguments.length>0?arguments:["\\S+"];multiArgs(args,function(t){var reg=regexp("<("+t+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi");str=str.replace(reg,"")});return str},"truncate":function(length,split,from,ellipsis){var pos,prepend="",append="",str=this.toString(),chars="["+getTrimmableCharacters()+"]+",space="[^"+getTrimmableCharacters()+"]*",reg=regexp(chars+space+"$");ellipsis=isUndefined(ellipsis)?"...":string(ellipsis);if(str.length<=length){return str}switch(from){case"left":pos=str.length-length;prepend=ellipsis;str=str.slice(pos);reg=regexp("^"+space+chars);break;case"middle":pos=floor(length/2);append=ellipsis+str.slice(str.length-pos).trimLeft();str=str.slice(0,pos);break;default:pos=length;append=ellipsis;str=str.slice(0,pos)}if(split===false&&this.slice(pos,pos+1).match(/\S/)){str=str.remove(reg)}return prepend+str+append},"pad":function(padding,num){return repeatString(num,padding)+this+repeatString(num,padding)},"padLeft":function(padding,num){return repeatString(num,padding)+this},"padRight":function(padding,num){return this+repeatString(num,padding)},"first":function(num){if(isUndefined(num)){num=1}return this.substr(0,num)},"last":function(num){if(isUndefined(num)){num=1}var start=this.length-num<0?0:this.length-num;return this.substr(start)},"repeat":function(num){var str="",i=0;if(isNumber(num)&&num>0){while(i<num){str+=this;i++}}return str},"toNumber":function(base){var str=this.replace(/,/g,"");return str.match(/\./)?parseFloat(str):parseInt(str,base||10)},"capitalize":function(all){var lastResponded;return this.toLowerCase().replace(all?/[\s\S]/g:/^\S/,function(lower){var upper=lower.toUpperCase(),result;result=lastResponded?lower:upper;lastResponded=upper!==lower;return result})},"assign":function(){var assign={};multiArgs(arguments,function(a,i){if(isObject(a)){simpleMerge(assign,a)}else{assign[i+1]=a}});return this.replace(/\{([^{]+?)\}/g,function(m,key){return hasOwnProperty(assign,key)?assign[key]:m})},"namespace":function(context){context=context||globalContext;iterateOverObject(this.split("."),function(i,s){return !!(context=context[s])});return context}});extend(string,true,false,{"insert":string.prototype.add});buildBase64("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");var plurals=[],singulars=[],uncountables=[],humans=[],acronyms={},Downcased,Inflector;function removeFromArray(arr,find){var index=arr.indexOf(find);if(index>-1){arr.splice(index,1)}}function removeFromUncountablesAndAddTo(arr,rule,replacement){if(isString(rule)){removeFromArray(uncountables,rule)}removeFromArray(uncountables,replacement);arr.unshift({rule:rule,replacement:replacement})}function paramMatchesType(param,type){return param==type||param=="all"||!param}function isUncountable(word){return uncountables.some(function(uncountable){return new regexp("\\b"+uncountable+"$","i").test(word)})}function inflect(word,pluralize){word=isString(word)?word.toString():"";if(word.isBlank()||isUncountable(word)){return word}else{return runReplacements(word,pluralize?plurals:singulars)}}function runReplacements(word,table){iterateOverObject(table,function(i,inflection){if(word.match(inflection.rule)){word=word.replace(inflection.rule,inflection.replacement);return false}});return word}function capitalize(word){return word.replace(/^\W*[a-z]/,function(w){return w.toUpperCase()})}Inflector={"acronym":function(word){acronyms[word.toLowerCase()]=word;var all=object.keys(acronyms).map(function(key){return acronyms[key]});Inflector.acronymRegExp=regexp(all.join("|"),"g")},"plural":function(rule,replacement){removeFromUncountablesAndAddTo(plurals,rule,replacement)},"singular":function(rule,replacement){removeFromUncountablesAndAddTo(singulars,rule,replacement)},"irregular":function(singular,plural){var singularFirst=singular.first(),singularRest=singular.from(1),pluralFirst=plural.first(),pluralRest=plural.from(1),pluralFirstUpper=pluralFirst.toUpperCase(),pluralFirstLower=pluralFirst.toLowerCase(),singularFirstUpper=singularFirst.toUpperCase(),singularFirstLower=singularFirst.toLowerCase();removeFromArray(uncountables,singular);removeFromArray(uncountables,plural);if(singularFirstUpper==pluralFirstUpper){Inflector.plural(new regexp("({1}){2}$".assign(singularFirst,singularRest),"i"),"$1"+pluralRest);Inflector.plural(new regexp("({1}){2}$".assign(pluralFirst,pluralRest),"i"),"$1"+pluralRest);Inflector.singular(new regexp("({1}){2}$".assign(pluralFirst,pluralRest),"i"),"$1"+singularRest)}else{Inflector.plural(new regexp("{1}{2}$".assign(singularFirstUpper,singularRest)),pluralFirstUpper+pluralRest);Inflector.plural(new regexp("{1}{2}$".assign(singularFirstLower,singularRest)),pluralFirstLower+pluralRest);Inflector.plural(new regexp("{1}{2}$".assign(pluralFirstUpper,pluralRest)),pluralFirstUpper+pluralRest);Inflector.plural(new regexp("{1}{2}$".assign(pluralFirstLower,pluralRest)),pluralFirstLower+pluralRest);Inflector.singular(new regexp("{1}{2}$".assign(pluralFirstUpper,pluralRest)),singularFirstUpper+singularRest);Inflector.singular(new regexp("{1}{2}$".assign(pluralFirstLower,pluralRest)),singularFirstLower+singularRest)}},"uncountable":function(first){var add=array.isArray(first)?first:multiArgs(arguments);uncountables=uncountables.concat(add)},"human":function(rule,replacement){humans.unshift({rule:rule,replacement:replacement})},"clear":function(type){if(paramMatchesType(type,"singulars")){singulars=[]}if(paramMatchesType(type,"plurals")){plurals=[]}if(paramMatchesType(type,"uncountables")){uncountables=[]}if(paramMatchesType(type,"humans")){humans=[]}if(paramMatchesType(type,"acronyms")){acronyms={}}}};Downcased=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"];Inflector.plural(/$/,"s");Inflector.plural(/s$/gi,"s");Inflector.plural(/(ax|test)is$/gi,"$1es");Inflector.plural(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1i");Inflector.plural(/(census|alias|status)$/gi,"$1es");Inflector.plural(/(bu)s$/gi,"$1ses");Inflector.plural(/(buffal|tomat)o$/gi,"$1oes");Inflector.plural(/([ti])um$/gi,"$1a");Inflector.plural(/([ti])a$/gi,"$1a");Inflector.plural(/sis$/gi,"ses");Inflector.plural(/f+e?$/gi,"ves");Inflector.plural(/(cuff|roof)$/gi,"$1s");Inflector.plural(/([ht]ive)$/gi,"$1s");Inflector.plural(/([^aeiouy]o)$/gi,"$1es");Inflector.plural(/([^aeiouy]|qu)y$/gi,"$1ies");Inflector.plural(/(x|ch|ss|sh)$/gi,"$1es");Inflector.plural(/(matr|vert|ind)(?:ix|ex)$/gi,"$1ices");Inflector.plural(/([ml])ouse$/gi,"$1ice");Inflector.plural(/([ml])ice$/gi,"$1ice");Inflector.plural(/^(ox)$/gi,"$1en");Inflector.plural(/^(oxen)$/gi,"$1");Inflector.plural(/(quiz)$/gi,"$1zes");Inflector.plural(/(phot|cant|hom|zer|pian|portic|pr|quart|kimon)o$/gi,"$1os");Inflector.plural(/(craft)$/gi,"$1");Inflector.plural(/([ft])[eo]{2}(th?)$/gi,"$1ee$2");Inflector.singular(/s$/gi,"");Inflector.singular(/([pst][aiu]s)$/gi,"$1");Inflector.singular(/([aeiouy])ss$/gi,"$1ss");Inflector.singular(/(n)ews$/gi,"$1ews");Inflector.singular(/([ti])a$/gi,"$1um");Inflector.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$1$2sis");Inflector.singular(/(^analy)ses$/gi,"$1sis");Inflector.singular(/(i)(f|ves)$/i,"$1fe");Inflector.singular(/([aeolr]f?)(f|ves)$/i,"$1f");Inflector.singular(/([ht]ive)s$/gi,"$1");Inflector.singular(/([^aeiouy]|qu)ies$/gi,"$1y");Inflector.singular(/(s)eries$/gi,"$1eries");Inflector.singular(/(m)ovies$/gi,"$1ovie");Inflector.singular(/(x|ch|ss|sh)es$/gi,"$1");Inflector.singular(/([ml])(ous|ic)e$/gi,"$1ouse");Inflector.singular(/(bus)(es)?$/gi,"$1");Inflector.singular(/(o)es$/gi,"$1");Inflector.singular(/(shoe)s?$/gi,"$1");Inflector.singular(/(cris|ax|test)[ie]s$/gi,"$1is");Inflector.singular(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1us");Inflector.singular(/(census|alias|status)(es)?$/gi,"$1");Inflector.singular(/^(ox)(en)?/gi,"$1");Inflector.singular(/(vert|ind)(ex|ices)$/gi,"$1ex");Inflector.singular(/(matr)(ix|ices)$/gi,"$1ix");Inflector.singular(/(quiz)(zes)?$/gi,"$1");Inflector.singular(/(database)s?$/gi,"$1");Inflector.singular(/ee(th?)$/gi,"oo$1");Inflector.irregular("person","people");Inflector.irregular("man","men");Inflector.irregular("child","children");Inflector.irregular("sex","sexes");Inflector.irregular("move","moves");Inflector.irregular("save","saves");Inflector.irregular("save","saves");Inflector.irregular("cow","kine");Inflector.irregular("goose","geese");Inflector.irregular("zombie","zombies");Inflector.uncountable("equipment,information,rice,money,species,series,fish,sheep,jeans".split(","));extend(string,true,false,{"pluralize":function(){return inflect(this,true)},"singularize":function(){return inflect(this,false)},"humanize":function(){var str=runReplacements(this,humans);str=str.replace(/_id$/g,"");str=str.replace(/(_)?([a-z\d]*)/gi,function(match,_,word){return(_?" ":"")+(acronyms[word]||word.toLowerCase())});return capitalize(str)},"titleize":function(){var fullStopPunctuation=/[.:;!]$/,hasPunctuation,lastHadPunctuation,isFirstOrLast;return this.spacify().humanize().words(function(word,index,words){hasPunctuation=fullStopPunctuation.test(word);isFirstOrLast=index==0||index==words.length-1||hasPunctuation||lastHadPunctuation;lastHadPunctuation=hasPunctuation;if(isFirstOrLast||Downcased.indexOf(word)===-1){return capitalize(word)}else{return word}}).join(" ")},"parameterize":function(separator){var str=this;if(separator===undefined){separator="-"}if(str.normalize){str=str.normalize()}str=str.replace(/[^a-z0-9\-_]+/gi,separator);if(separator){str=str.replace(new regexp("^{sep}+|{sep}+$|({sep}){sep}+".assign({"sep":escapeRegExp(separator)}),"g"),"$1")}return encodeURI(str.toLowerCase())}});string.Inflector=Inflector;string.Inflector.acronyms=acronyms;var NormalizeMap,NormalizeReg="",NormalizeSource;var unicodeScripts=[{names:["Arabic"],source:"\u0600-\u06FF"},{names:["Cyrillic"],source:"\u0400-\u04FF"},{names:["Devanagari"],source:"\u0900-\u097F"},{names:["Greek"],source:"\u0370-\u03FF"},{names:["Hangul"],source:"\uAC00-\uD7AF\u1100-\u11FF"},{names:["Han","Kanji"],source:"\u4E00-\u9FFF\uF900-\uFAFF"},{names:["Hebrew"],source:"\u0590-\u05FF"},{names:["Hiragana"],source:"\u3040-\u309F\u30FB-\u30FC"},{names:["Kana"],source:"\u3040-\u30FF\uFF61-\uFF9F"},{names:["Katakana"],source:"\u30A0-\u30FF\uFF61-\uFF9F"},{names:["Latin"],source:"\u0001-\u007F\u0080-\u00FF\u0100-\u017F\u0180-\u024F"},{names:["Thai"],source:"\u0E00-\u0E7F"}];function buildUnicodeScripts(){unicodeScripts.forEach(function(s){var is=regexp("^["+s.source+"\\s]+$");var has=regexp("["+s.source+"]");s.names.forEach(function(name){defineProperty(string.prototype,"is"+name,function(){return is.test(this.trim())});defineProperty(string.prototype,"has"+name,function(){return has.test(this)})})})}var widthConversionRanges=[{type:"a",shift:65248,start:65,end:90},{type:"a",shift:65248,start:97,end:122},{type:"n",shift:65248,start:48,end:57},{type:"p",shift:65248,start:33,end:47},{type:"p",shift:65248,start:58,end:64},{type:"p",shift:65248,start:91,end:96},{type:"p",shift:65248,start:123,end:126}];var WidthConversionTable;var allHankaku=/[\u0020-\u00A5]|[\uFF61-\uFF9F][]?/g;var allZenkaku=/[\u3000-\u301C]|[\u301A-\u30FC]|[\uFF01-\uFF60]|[\uFFE0-\uFFE6]/g;var hankakuPunctuation="";var zenkakuPunctuation="";var voicedKatakana=/[]/;var semiVoicedKatakana=/[]/;var hankakuKatakana="";var zenkakuKatakana="";function convertCharacterWidth(str,args,reg,type){if(!WidthConversionTable){buildWidthConversionTables()}var mode=multiArgs(args).join(""),table=WidthConversionTable[type];mode=mode.replace(/all/,"").replace(/(\w)lphabet|umbers?|atakana|paces?|unctuation/g,"$1");return str.replace(reg,function(c){if(table[c]&&(!mode||mode.has(table[c].type))){return table[c].to}else{return c}})}function buildWidthConversionTables(){var hankaku;WidthConversionTable={"zenkaku":{},"hankaku":{}};widthConversionRanges.forEach(function(r){getRange(r.start,r.end,function(n){setWidthConversion(r.type,chr(n),chr(n+r.shift))})});zenkakuKatakana.each(function(c,i){hankaku=hankakuKatakana.charAt(i);setWidthConversion("k",hankaku,c);if(c.match(voicedKatakana)){setWidthConversion("k",hankaku+"",c.shift(1))}if(c.match(semiVoicedKatakana)){setWidthConversion("k",hankaku+"",c.shift(2))}});zenkakuPunctuation.each(function(c,i){setWidthConversion("p",hankakuPunctuation.charAt(i),c)});setWidthConversion("k","","");setWidthConversion("k","","");setWidthConversion("s"," ","")}function setWidthConversion(type,half,full){WidthConversionTable["zenkaku"][half]={type:type,to:full};WidthConversionTable["hankaku"][full]={type:type,to:half}}function buildNormalizeMap(){NormalizeMap={};iterateOverObject(NormalizeSource,function(normalized,str){str.split("").forEach(function(character){NormalizeMap[character]=normalized});NormalizeReg+=str});NormalizeReg=regexp("["+NormalizeReg+"]","g")}NormalizeSource={"A":"A","B":"B","C":"C","D":"D","E":"E","F":"F","G":"G","H":"H","I":"I","J":"J","K":"K","L":"L","M":"M","N":"N","O":"O","P":"P","Q":"Q","R":"R","S":"S","T":"T","U":"U","V":"V","W":"W","X":"X","Y":"Y","Z":"Z","a":"a","b":"b","c":"c","d":"d","e":"e","f":"f","g":"g","h":"h","i":"i","j":"j","k":"k","l":"l","m":"m","n":"n","o":"o","p":"p","q":"q","r":"r","s":"s","t":"t","u":"u","v":"v","w":"w","x":"x","y":"y","z":"z","AA":"","AE":"","AO":"","AU":"","AV":"","AY":"","DZ":"","Dz":"","LJ":"","Lj":"","NJ":"","Nj":"","OI":"","OO":"","OU":"","TZ":"","VY":"","aa":"","ae":"","ao":"","au":"","av":"","ay":"","dz":"","hv":"","lj":"","nj":"","oi":"","ou":"","oo":"","ss":"","tz":"","vy":""};extend(string,true,false,{"normalize":function(){if(!NormalizeMap){buildNormalizeMap()}return this.replace(NormalizeReg,function(character){return NormalizeMap[character]})},"hankaku":function(){return convertCharacterWidth(this,arguments,allZenkaku,"hankaku")},"zenkaku":function(){return convertCharacterWidth(this,arguments,allHankaku,"zenkaku")},"hiragana":function(all){var str=this;if(all!==false){str=str.zenkaku("k")}return str.replace(/[\u30A1-\u30F6]/g,function(c){return c.shift(-96)})},"katakana":function(){return this.replace(/[\u3041-\u3096]/g,function(c){return c.shift(96)})}});buildUnicodeScripts();Date.addLocale("de",{"plural":true,"capitalizeUnit":true,"months":"Januar,Februar,Mrz|Marz,April,Mai,Juni,Juli,August,September,Oktober,November,Dezember","weekdays":"Sonntag,Montag,Dienstag,Mittwoch,Donnerstag,Freitag,Samstag","units":"Millisekunde:|n,Sekunde:|n,Minute:|n,Stunde:|n,Tag:|en,Woche:|n,Monat:|en,Jahr:|en","numbers":"ein:|e|er|en|em,zwei,drei,vier,fuenf,sechs,sieben,acht,neun,zehn","optionals":"der","short":"{d}. {Month} {yyyy}","long":"{d}. {Month} {yyyy} {H}:{mm}","full":"{Weekday} {d}. {Month} {yyyy} {H}:{mm}:{ss}","past":"{sign} {num} {unit}","future":"{sign} {num} {unit}","duration":"{num} {unit}","timeMarker":"um","ampm":"am,pm","modifiers":[{"name":"day","src":"vorgestern","value":-2},{"name":"day","src":"gestern","value":-1},{"name":"day","src":"heute","value":0},{"name":"day","src":"morgen","value":1},{"name":"day","src":"bermorgen|ubermorgen|uebermorgen","value":2},{"name":"sign","src":"vor:|her","value":-1},{"name":"sign","src":"in","value":1},{"name":"shift","src":"letzte:|r|n|s","value":-1},{"name":"shift","src":"nchste:|r|n|s+nachste:|r|n|s+naechste:|r|n|s+kommende:n|r","value":1}],"dateParse":["{sign} {num} {unit}","{num} {unit} {sign}","{shift} {unit=5-7}"],"timeParse":["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]});Date.addLocale("es",{"plural":true,"months":"enero,febrero,marzo,abril,mayo,junio,julio,agosto,septiembre,octubre,noviembre,diciembre","weekdays":"domingo,lunes,martes,mircoles|miercoles,jueves,viernes,sbado|sabado","units":"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,da|das|dia|dias,semana:|s,mes:|es,ao|aos|ano|anos","numbers":"uno,dos,tres,cuatro,cinco,seis,siete,ocho,nueve,diez","optionals":"el,de","short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}","full":"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}","past":"{sign} {num} {unit}","future":"{num} {unit} {sign}","duration":"{num} {unit}","timeMarker":"a las","ampm":"am,pm","modifiers":[{"name":"day","src":"anteayer","value":-2},{"name":"day","src":"ayer","value":-1},{"name":"day","src":"hoy","value":0},{"name":"day","src":"maana|manana","value":1},{"name":"sign","src":"hace","value":-1},{"name":"sign","src":"de ahora","value":1},{"name":"shift","src":"pasad:o|a","value":-1},{"name":"shift","src":"prximo|prxima|proximo|proxima","value":1}],"dateParse":["{sign} {num} {unit}","{num} {unit} {sign}","{0} {unit=5-7} {shift}","{0} {shift} {unit=5-7}"],"timeParse":["{shift} {weekday}","{weekday} {shift}","{date?} {1} {month} {1} {year?}"]});Date.addLocale("fr",{"plural":true,"months":"janvier,fvrier|fevrier,mars,avril,mai,juin,juillet,aot,septembre,octobre,novembre,dcembre|decembre","weekdays":"dimanche,lundi,mardi,mercredi,jeudi,vendredi,samedi","units":"milliseconde:|s,seconde:|s,minute:|s,heure:|s,jour:|s,semaine:|s,mois,an:|s|ne|nee","numbers":"un:|e,deux,trois,quatre,cinq,six,sept,huit,neuf,dix","optionals":["l'|la|le"],"short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}","full":"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}","past":"{sign} {num} {unit}","future":"{sign} {num} {unit}","duration":"{num} {unit}","timeMarker":"","ampm":"am,pm","modifiers":[{"name":"day","src":"hier","value":-1},{"name":"day","src":"aujourd'hui","value":0},{"name":"day","src":"demain","value":1},{"name":"sign","src":"il y a","value":-1},{"name":"sign","src":"dans|d'ici","value":1},{"name":"shift","src":"derni:r|er|re|ere","value":-1},{"name":"shift","src":"prochain:|e","value":1}],"dateParse":["{sign} {num} {unit}","{sign} {num} {unit}","{0} {unit=5-7} {shift}"],"timeParse":["{0} {date?} {month} {year?}","{0} {weekday} {shift}"]});Date.addLocale("it",{"plural":true,"months":"Gennaio,Febbraio,Marzo,Aprile,Maggio,Giugno,Luglio,Agosto,Settembre,Ottobre,Novembre,Dicembre","weekdays":"Domenica,Luned:|i,Marted:|i,Mercoled:|i,Gioved:|i,Venerd:|i,Sabato","units":"millisecond:o|i,second:o|i,minut:o|i,or:a|e,giorn:o|i,settiman:a|e,mes:e|i,ann:o|i","numbers":"un:|a|o|',due,tre,quattro,cinque,sei,sette,otto,nove,dieci","optionals":"l'|la|il","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}","full":"{Weekday} {d} {Month} {yyyy} {H}:{mm}:{ss}","past":"{num} {unit} {sign}","future":"{num} {unit} {sign}","duration":"{num} {unit}","timeMarker":"alle","ampm":"am,pm","modifiers":[{"name":"day","src":"ieri","value":-1},{"name":"day","src":"oggi","value":0},{"name":"day","src":"domani","value":1},{"name":"day","src":"dopodomani","value":2},{"name":"sign","src":"fa","value":-1},{"name":"sign","src":"da adesso","value":1},{"name":"shift","src":"scors:o|a","value":-1},{"name":"shift","src":"prossim:o|a","value":1}],"dateParse":["{num} {unit} {sign}","{0} {unit=5-7} {shift}","{0} {shift} {unit=5-7}"],"timeParse":["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]});Date.addLocale("ja",{"monthSuffix":"","weekdays":",,,,,,","units":",,,,,|,||,","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {H}{mm}","full":"{yyyy}{M}{d} {Weekday} {H}{mm}{ss}","past":"{num}{unit}{sign}","future":"{num}{unit}{sign}","duration":"{num}{unit}","timeSuffixes":",,","ampm":",","modifiers":[{"name":"day","src":"","value":-2},{"name":"day","src":"","value":-1},{"name":"day","src":"","value":0},{"name":"day","src":"","value":1},{"name":"day","src":"","value":2},{"name":"sign","src":"","value":-1},{"name":"sign","src":"","value":1},{"name":"shift","src":"|","value":-1},{"name":"shift","src":"","value":1}],"dateParse":["{num}{unit}{sign}"],"timeParse":["{shift}{unit=5-7}{weekday?}","{year}{month?}?{date?}?","{month}{date?}?","{date}"]});Date.addLocale("ko",{"digitDate":true,"monthSuffix":"","weekdays":",,,,,,","units":",,,,,,|,","numbers":"|,,,,,,,,,","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {H}{mm}","full":"{yyyy}{M}{d} {Weekday} {H}{mm}{ss}","past":"{num}{unit} {sign}","future":"{num}{unit} {sign}","duration":"{num}{unit}","timeSuffixes":",,","ampm":",","modifiers":[{"name":"day","src":"","value":-2},{"name":"day","src":"","value":-1},{"name":"day","src":"","value":0},{"name":"day","src":"","value":1},{"name":"day","src":"","value":2},{"name":"sign","src":"","value":-1},{"name":"sign","src":"","value":1},{"name":"shift","src":"|","value":-1},{"name":"shift","src":"","value":0},{"name":"shift","src":"|","value":1}],"dateParse":["{num}{unit} {sign}","{shift?} {unit=5-7}"],"timeParse":["{shift} {unit=5?} {weekday}","{year}{month?}?{date?}?","{month}{date?}?","{date}"]});Date.addLocale("pl",{"plural":true,"months":"Stycze|Stycznia,Luty|Lutego,Marzec|Marca,Kwiecie|Kwietnia,Maj|Maja,Czerwiec|Czerwca,Lipiec|Lipca,Sierpie|Sierpnia,Wrzesie|Wrzenia,Padziernik|Padziernika,Listopad|Listopada,Grudzie|Grudnia","weekdays":"Niedziela|Niedziel,Poniedziaek,Wtorek,rod:a|,Czwartek,Pitek,Sobota|Sobot","units":"milisekund:a|y|,sekund:a|y|,minut:a|y|,godzin:a|y|,dzie|dni,tydzie|tygodnie|tygodni,miesice|miesice|miesicy,rok|lata|lat","numbers":"jeden|jedn,dwa|dwie,trzy,cztery,pi,sze,siedem,osiem,dziewi,dziesi","optionals":"w|we,roku","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}","full":"{Weekday}, {d} {Month} {yyyy} {H}:{mm}:{ss}","past":"{num} {unit} {sign}","future":"{sign} {num} {unit}","duration":"{num} {unit}","timeMarker":"o","ampm":"am,pm","modifiers":[{"name":"day","src":"przedwczoraj","value":-2},{"name":"day","src":"wczoraj","value":-1},{"name":"day","src":"dzisiaj|dzi","value":0},{"name":"day","src":"jutro","value":1},{"name":"day","src":"pojutrze","value":2},{"name":"sign","src":"temu|przed","value":-1},{"name":"sign","src":"za","value":1},{"name":"shift","src":"zeszy|zesza|ostatni|ostatnia","value":-1},{"name":"shift","src":"nastpny|nastpna|nastpnego|przyszy|przysza|przyszego","value":1}],"dateParse":["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{shift} {unit=5-7}","{0} {shift?} {weekday}"],"timeParse":["{date} {month} {year?} {1}","{0} {shift?} {weekday}"]});Date.addLocale("pt",{"plural":true,"months":"janeiro,fevereiro,maro,abril,maio,junho,julho,agosto,setembro,outubro,novembro,dezembro","weekdays":"domingo,segunda-feira,tera-feira,quarta-feira,quinta-feira,sexta-feira,sbado|sabado","units":"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,dia:|s,semana:|s,ms|mses|mes|meses,ano:|s","numbers":"um,dois,trs|tres,quatro,cinco,seis,sete,oito,nove,dez,uma,duas","optionals":"a,de","short":"{d} de {month} de {yyyy}","long":"{d} de {month} de {yyyy} {H}:{mm}","full":"{Weekday}, {d} de {month} de {yyyy} {H}:{mm}:{ss}","past":"{num} {unit} {sign}","future":"{sign} {num} {unit}","duration":"{num} {unit}","timeMarker":"s","ampm":"am,pm","modifiers":[{"name":"day","src":"anteontem","value":-2},{"name":"day","src":"ontem","value":-1},{"name":"day","src":"hoje","value":0},{"name":"day","src":"amanh:|a","value":1},{"name":"sign","src":"atrs|atras|h|ha","value":-1},{"name":"sign","src":"daqui a","value":1},{"name":"shift","src":"passad:o|a","value":-1},{"name":"shift","src":"prximo|prxima|proximo|proxima","value":1}],"dateParse":["{num} {unit} {sign}","{sign} {num} {unit}","{0} {unit=5-7} {shift}","{0} {shift} {unit=5-7}"],"timeParse":["{date?} {1} {month} {1} {year?}","{0} {shift} {weekday}"]});Date.addLocale("ru",{"months":":|,:|,:|,:|,:|,:|,:|,:|,:|,:|,:|,:|","weekdays":",,,,,,","units":":|||,:|||,:|||,:|||,|||,:||||,:||||,||||","numbers":":|,:|,,,,,,,,","optionals":"|,","short":"{d} {month} {yyyy} ","long":"{d} {month} {yyyy}  {H}:{mm}","full":"{Weekday} {d} {month} {yyyy}  {H}:{mm}:{ss}","past":"{num} {unit} {sign}","future":"{sign} {num} {unit}","duration":"{num} {unit}","timeMarker":"","ampm":" , ","modifiers":[{"name":"day","src":"","value":-2},{"name":"day","src":"","value":-1},{"name":"day","src":"","value":0},{"name":"day","src":"","value":1},{"name":"day","src":"","value":2},{"name":"sign","src":"","value":-1},{"name":"sign","src":"","value":1},{"name":"shift","src":":||","value":-1},{"name":"shift","src":":||","value":1}],"dateParse":["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{0} {shift} {unit=5-7}"],"timeParse":["{date} {month} {year?} {1}","{0} {shift} {weekday}"]});Date.addLocale("sv",{"plural":true,"months":"januari,februari,mars,april,maj,juni,juli,augusti,september,oktober,november,december","weekdays":"sndag|sondag,mndag:|en+mandag:|en,tisdag,onsdag,torsdag,fredag,lrdag|lordag","units":"millisekund:|er,sekund:|er,minut:|er,timm:e|ar,dag:|ar,veck:a|or|an,mnad:|er|en+manad:|er|en,r:||et+ar:||et","numbers":"en|ett,tv|tva,tre,fyra,fem,sex,sju,tta|atta,nio,tio","optionals":"den,fr|for","articles":"den","short":"den {d} {month} {yyyy}","long":"den {d} {month} {yyyy} {H}:{mm}","full":"{Weekday} den {d} {month} {yyyy} {H}:{mm}:{ss}","past":"{num} {unit} {sign}","future":"{sign} {num} {unit}","duration":"{num} {unit}","ampm":"am,pm","modifiers":[{"name":"day","src":"frrgr|i frrgr|ifrrgr|forrgar|i forrgar|iforrgar","value":-2},{"name":"day","src":"gr|i gr|igr|gar|i gar|igar","value":-1},{"name":"day","src":"dag|i dag|idag","value":0},{"name":"day","src":"morgon|i morgon|imorgon","value":1},{"name":"day","src":"ver morgon|vermorgon|i ver morgon|i vermorgon|ivermorgon|over morgon|overmorgon|i over morgon|i overmorgon|iovermorgon","value":2},{"name":"sign","src":"sedan|sen","value":-1},{"name":"sign","src":"om","value":1},{"name":"shift","src":"i frra|frra|i forra|forra","value":-1},{"name":"shift","src":"denna","value":0},{"name":"shift","src":"nsta|nasta","value":1}],"dateParse":["{num} {unit} {sign}","{sign} {num} {unit}","{1} {num} {unit} {sign}","{shift} {unit5-7}"],"timeParse":["{0} {weekday?} {date?} {month} {year}","{date} {month}","{shift} {weekday}"]});Date.addLocale("zh-CN",{"variant":true,"monthSuffix":"","weekdays":"|,|,|,|,|,|,|","units":",,,,,|,,","optionals":"|","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {tt}{h}:{mm}","full":"{yyyy}{M}{d} {weekday} {tt}{h}:{mm}:{ss}","past":"{num}{unit}{sign}","future":"{num}{unit}{sign}","duration":"{num}{unit}","timeSuffixes":"|,?,","ampm":",","modifiers":[{"name":"day","src":"","value":-2},{"name":"day","src":"","value":-1},{"name":"day","src":"","value":0},{"name":"day","src":"","value":1},{"name":"day","src":"","value":2},{"name":"sign","src":"","value":-1},{"name":"sign","src":"","value":1},{"name":"shift","src":"|","value":-1},{"name":"shift","src":"","value":0},{"name":"shift","src":"|","value":1}],"dateParse":["{num}{unit}{sign}","{shift}{unit=5-7}"],"timeParse":["{shift}{weekday}","{year}{month?}?{date?}{0}","{month}{date?}{0}","{date}{0}"]});Date.addLocale("zh-TW",{"monthSuffix":"","weekdays":"|,|,|,|,|,|,|","units":",,,,,|,,","optionals":"|","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {tt}{h}:{mm}","full":"{yyyy}{M}{d} {Weekday} {tt}{h}:{mm}:{ss}","past":"{num}{unit}{sign}","future":"{num}{unit}{sign}","duration":"{num}{unit}","timeSuffixes":"|,?,","ampm":",","modifiers":[{"name":"day","src":"","value":-2},{"name":"day","src":"","value":-1},{"name":"day","src":"","value":0},{"name":"day","src":"","value":1},{"name":"day","src":"","value":2},{"name":"sign","src":"","value":-1},{"name":"sign","src":"","value":1},{"name":"shift","src":"|","value":-1},{"name":"shift","src":"","value":0},{"name":"shift","src":"|","value":1}],"dateParse":["{num}{unit}{sign}","{shift}{unit=5-7}"],"timeParse":["{shift}{weekday}","{year}{month?}?{date?}{0}","{month}{date?}{0}","{date}{0}"]})})();