function initOlark(){c={loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]};var t=window,e=document,i="https:"==t.location.protocol?"https:":"http:",n=c.name,o="load",r=function(){function s(){a.P(o),t[n](o)}t[n]=function(){(a.s=a.s||[]).push(arguments)};for(var a=t[n]._={},l=c.methods.length;l--;)(function(e){t[n][e]=function(){t[n]("call",e,arguments)}})(c.methods[l]);a.l=c.loader,a.i=r,a.p={0:+new Date},a.P=function(t){a.p[t]=new Date-a.p[0]},t.addEventListener?t.addEventListener(o,s,!1):t.attachEvent("on"+o,s);var h=function(){function t(t){return t="head",["<",t,"></",t,"><",o,' onload="var d=',g,";d.getElementsByTagName('head')[0].",l,"(d.",d,"('script')).",u,"='",i,"//",a.l,"'",'"',"></",o,">"].join("")}var o="body",r=e[o];if(!r)return setTimeout(h,100);a.P(1);var s,l="appendChild",d="createElement",u="src",p=e[d]("div"),f=p[l](e[d](n)),m=e[d]("iframe"),g="document",v="domain";p.style.display="none",r.insertBefore(p,r.firstChild).id=n,m.frameBorder="0",m.id=n+"-loader",/MSIE[ ]+6/.test(navigator.userAgent)&&(m.src="javascript:false"),m.allowTransparency="true",f[l](m);try{m.contentWindow[g].open()}catch(y){c[v]=e[v],s="javascript:var d="+g+".open();d.domain='"+e.domain+"';",m[u]=s+"void(0);"}try{var _=m.contentWindow[g];_.write(t()),_.close()}catch(b){m[u]=s+'d.write("'+t().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};h()};r(),olark.identify("8436-939-10-2162")}(function(){var t,e,i,n,o,r,s,a,l,c,h,d,u,p,f,m,g,v,y,_,b,w,E,k,x,C,S,T,$,I,A,D,O,L,z,j,P,F,B,N,q,M,R,H,U,Q,V,W={}.hasOwnProperty,G=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};w=!1,d=null,D=document.location.href,C=null,I={},c=null,N=(null!=(V=document.cookie.match(/request_method=(\w+)/))?V[1].toUpperCase():void 0)||"",Q=null,U=function(t){return r&&o?(s(),O(t),v(t)):document.location.href=t},v=function(t){var e;return H("page:fetch"),e=F(t),null!=Q&&Q.abort(),Q=new XMLHttpRequest,Q.open("GET",e,!0),Q.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),Q.setRequestHeader("X-XHR-Referer",D),Q.onload=function(){var t;return H("page:receive"),x(Q)||i(t=c(Q.responseText))?document.location.reload():(a.apply(null,f(t)),L(Q),document.location.hash?document.location.href=document.location.href:M(),H("page:load"))},Q.onloadend=function(){return Q=null},Q.onabort=function(){return j()},Q.onerror=function(){return document.location.href=t},Q.send()},g=function(t){var e;return s(),(e=I[t.position])?(null!=Q&&Q.abort(),a(e.title,e.body),A(e),H("page:restore")):v(document.location.href)},s=function(){return P(),I[d.position]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset},l(10)},l=function(t){var e,i;for(e in I)W.call(I,e)&&(i=I[e],d.position-t>=e&&(I[e]=null))},a=function(e,i,n,o){return document.title=e,document.documentElement.replaceChild(i,document.body),null!=n&&t.update(n),B(),o&&u(),d=window.history.state,H("page:change")},u=function(){var t,e,i,n,o,r,s,a,l,c,h,d;for(r=Array.prototype.slice.call(document.body.getElementsByTagName("script")),s=0,l=r.length;l>s;s++)if(o=r[s],""===(h=o.type)||"text/javascript"===h){for(e=document.createElement("script"),d=o.attributes,a=0,c=d.length;c>a;a++)t=d[a],e.setAttribute(t.name,t.value);e.appendChild(document.createTextNode(o.innerHTML)),n=o.parentNode,i=o.nextSibling,n.removeChild(o),n.insertBefore(e,i)}},B=function(){var t,e,i,n;for(e=Array.prototype.slice.call(document.body.getElementsByTagName("noscript")),i=0,n=e.length;n>i;i++)t=e[i],t.parentNode.removeChild(t)},O=function(t){return t!==document.location.href?(D=document.location.href,window.history.pushState({turbolinks:!0,position:d.position+1},"",t)):void 0},L=function(t){var e;return(e=t.getResponseHeader("X-XHR-Current-Location"))&&e!==document.location.pathname+document.location.search?window.history.replaceState(d,"",e+document.location.hash):void 0},j=function(){return window.history.replaceState({turbolinks:!0,position:Date.now()},"",document.location.href)},z=function(){return d=window.history.state},P=function(){return w?void 0:(j(),z(),c=n(),w=!0)},A=function(t){return window.scrollTo(t.positionX,t.positionY)},M=function(){return window.scrollTo(0,0)},F=function(t){var e;return e=t,null==t.href&&(e=document.createElement("A"),e.href=t),e.href.replace(e.hash,"")},H=function(t){var e;return e=document.createEvent("Events"),e.initEvent(t,!0,!0),document.dispatchEvent(e)},x=function(t){return!t.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},m=function(t){var e,i,n,o,r;for(o=t.head.childNodes,r=[],i=0,n=o.length;n>i;i++)e=o[i],null!=("function"==typeof e.getAttribute?e.getAttribute("data-turbolinks-track"):void 0)&&r.push(e.src||e.href);return r},i=function(t){var e;return C||(C=m(document)),e=m(t),e.length!==C.length||k(e,C).length!==C.length},k=function(t,e){var i,n,o,r,s;for(t.length>e.length&&(r=[e,t],t=r[0],e=r[1]),s=[],n=0,o=t.length;o>n;n++)i=t[n],G.call(e,i)>=0&&s.push(i);return s},f=function(e){var i;return i=e.querySelector("title"),[null!=i?i.textContent:void 0,e.body,t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e?"function"==typeof e.getAttribute?e.getAttribute("content"):void 0:void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},n=function(){var t,e,i,n,o,r;e=function(t){return(new DOMParser).parseFromString(t,"text/html")},t=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.documentElement.innerHTML=t,e},i=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.open("replace"),e.write(t),e.close(),e};try{if(window.DOMParser)return o=e("<html><body><p>test"),e}catch(s){return n=s,o=t("<html><body><p>test"),t}finally{if(1!==(null!=o?null!=(r=o.body)?r.childNodes.length:void 0:void 0))return i}},E=function(t){return t.defaultPrevented?void 0:(document.removeEventListener("click",y,!1),document.addEventListener("click",y,!1))},y=function(t){var e;return t.defaultPrevented||(e=p(t),"A"!==e.nodeName||_(t,e))?void 0:(U(e.href),t.preventDefault())},p=function(t){var e;for(e=t.target;e.parentNode&&"A"!==e.nodeName;)e=e.parentNode;return e},h=function(t){return location.protocol!==t.protocol||location.host!==t.host},e=function(t){return(t.hash&&F(t))===F(location)||t.href===location.href+"#"},T=function(t){var e;return e=F(t),e.match(/\.[a-z]+(\?.*)?$/g)&&!e.match(/\.html?(\?.*)?$/g)},S=function(t){for(var e;!e&&t!==document;)e=null!=t.getAttribute("data-no-turbolink"),t=t.parentNode;return e},R=function(t){return 0!==t.target.length},$=function(t){return t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},_=function(t,i){return h(i)||e(i)||T(i)||S(i)||R(i)||$(t)},b=function(){return document.addEventListener("click",E,!0),window.addEventListener("popstate",function(t){var e;return(null!=(e=t.state)?e.turbolinks:void 0)?g(t.state):void 0},!1)},r=window.history&&window.history.pushState&&window.history.replaceState&&void 0!==window.history.state,o=!navigator.userAgent.match(/CriOS\//),q="GET"===N||""===N,r&&o&&q&&b(),this.Turbolinks={visit:U}}).call(this),function(t,e){window.mixpanel=e;var i,n,o,r;i=t.createElement("script"),i.type="text/javascript",i.async=!0,i.src=("https:"===t.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js",n=t.getElementsByTagName("script")[0],n.parentNode.insertBefore(i,n),e._i=[],e.init=function(t,i,n){function s(t,e){var i=e.split(".");2==i.length&&(t=t[i[0]],e=i[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}var a=e;for("undefined"!=typeof n?a=e[n]=[]:n="mixpanel",a.people=a.people||[],o=["disable","track","track_pageview","track_links","track_forms","register","register_once","unregister","identify","alias","name_tag","set_config","people.set","people.increment","people.track_charge","people.append"],r=0;o.length>r;r++)s(a,o[r]);e._i.push([t,i,n])},e.__SV=1.2}(document,window.mixpanel||[]),mixpanel.init("24f5da2893d951d7a91cc2d728f71a4f"),jQuery.mixpanel=function(t,e){mixpanel[t].apply(mixpanel,e)},jQuery.track=function(t,e,i){jQuery.mixpanel("track",[t,e,i])};for(var mxpMethods=["alias","identify","register"],i=0;mxpMethods.length>i;i++)(function(t){jQuery[t]=function(e){jQuery.mixpanel(t,[e])}})(mxpMethods[i]);window.adroll_adv_id="YONWALBURNF6JB7WZPRONO",window.adroll_pix_id="EFXFY5RMAJHKRLFEJXTEK7",function(){var t=window.onload;window.onload=function(){__adroll_loaded=!0;var e=document.createElement("script"),i="https:"==document.location.protocol?"https://s.adroll.com":"http://a.adroll.com";e.setAttribute("async","true"),e.type="text/javascript",e.src=i+"/j/roundtrip.js",((document.getElementsByTagName("head")||[null])[0]||document.getElementsByTagName("script")[0].parentNode).appendChild(e),t&&t()}}(),jQuery.adroll={cart:function(){this.track("add_to_bag")},checkout:function(){this.track("checkout_button")},purchase:function(){this.track("place_order")},signup:function(){this.track("join_now_login")},signin:function(){this.track("registered_user_login")},track:function(t){window.adroll_segments=t,window.__adroll_loaded&&window.__adroll&&window.__adroll.render_pixel_code(window.adroll_adv_id,window.adroll_pix_id)}};var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-20350581-1"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),window.olark||initOlark();var expanded=!1;olark("api.box.onExpand",function(){expanded=!0}),$(document).on("page:fetch",function(){var t=$("body .olrk-noquirks");expanded||olark("api.box.hide"),t.appendTo("head")}).on("page:change",function(){$("head .olrk-noquirks").appendTo("body")});var fb_root=null,fb_events_bound=!1;$(function(){loadFacebookSDK(),fb_events_bound||bindFacebookEvents()});var bindFacebookEvents=function(){$(document).on("page:fetch",saveFacebookRoot).on("page:change",restoreFacebookRoot).on("page:load",function(){FB&&FB.XFBML.parse()}),fb_events_bound=!0},saveFacebookRoot=function(){fb_root=$("#fb-root").detach()},restoreFacebookRoot=function(){$("#fb-root").length>0?$("#fb-root").replaceWith(fb_root):$("body").append(fb_root)},loadFacebookSDK=function(){window.fbAsyncInit=initializeFacebookSDK,$.getScript("//connect.facebook.net/en_US/all.js")},initializeFacebookSDK=function(){FB.init({appId:"126605720735590",channelUrl:"//"+window.location.host+"/channel.html",status:!0,cookie:!0,oauth:!0,xfbml:!0})};jQuery.fb={purchase:function(){(function(){var t=document.createElement("script");t.async=!0,t.src="//connect.facebook.net/en_US/fp.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)})()}},window.twttr=function(t,e,i){var n,o,r=t.getElementsByTagName(e)[0];if(!t.getElementById(i))return o=t.createElement(e),o.id=i,o.src="//platform.twitter.com/widgets.js",r.parentNode.insertBefore(o,r),window.twttr||(n={_e:[],ready:function(t){n._e.push(t)}})}(document,"script","twitter-wjs"),function(t,e){var i=function(){var e=t._data(document,"events");return e&&e.click&&t.grep(e.click,function(t){return"rails"===t.namespace}).length};i()&&t.error("jquery-ujs has already been loaded!");var n;t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var o=t.Event(i);return e.trigger(o,n),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var o,r,s,a,l,c,h,d;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,c=i.data("with-credentials")||null,h=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),r=i.attr("action"),s=i.serializeArray();var u=i.data("ujs:submit-button");u&&(s.push(u),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),s=i.data("params")||null);d={type:o||"GET",data:s,dataType:h,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[t,o])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),r&&(d.url=r);var p=n.ajax(d);return i.trigger("ajax:send",p),p}return!1},handleMethod:function(i){var o=n.href(i),r=i.data("method"),s=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+o+'"></form>'),h='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&a!==e&&(h+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(h).appendTo("body"),c.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),o=!1;return i?(n.fire(t,"confirm")&&(o=n.confirm(i),e=n.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,i,n){var o,r,s=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!n){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var o=i.data("events"),r=!0;return o!==e&&o.submit!==e&&t.each(o.submit,function(t,e){return"function"==typeof e.handler?r=e.handler(n):void 0}),r},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},n.fire(t(document),"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),t(document).delegate(n.linkClickSelector,"click.rails",function(i){var o=t(this),r=o.data("method"),s=o.data("params");if(!n.allowAction(o))return n.stopEverything(i);if(o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==e){if(!(!i.metaKey&&!i.ctrlKey||r&&"GET"!==r||s))return!0;var a=n.handleRemote(o);return a===!1?n.enableElement(o):a.error(function(){n.enableElement(o)}),!1}return o.data("method")?(n.handleMethod(o),!1):void 0}),t(document).delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),t(document).delegate(n.formSubmitSelector,"submit.rails",function(i){var o=t(this),r=o.data("remote")!==e,s=n.blankInputs(o,n.requiredInputSelector),a=n.nonBlankInputs(o,n.fileInputSelector);if(!n.allowAction(o))return n.stopEverything(i);if(s&&o.attr("novalidate")==e&&n.fire(o,"ajax:aborted:required",[s]))return n.stopEverything(i);if(r){if(a){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return!t.support.submitBubbles&&"1.7">t().jquery&&n.callFormSubmitBindings(o,i)===!1?n.stopEverything(i):(n.handleRemote(o),!1)}setTimeout(function(){n.disableFormElements(o)},13)}),t(document).delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),t(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),t(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)}))}(jQuery),function(){window.E=window.E||{lib:{},model:{},view:{},collection:{},page:{},pages:{product:{},collection:{},map:{}},subs:{},Event:{Cart:{INIT:"cart init",BLINK:"cart blink",UPDATE:"cart update",COMEBACK:"cart:comeback"},TopBar:{STICK:"topbar stick",UNSTICK:"topbar unstick"}},sub:function(t){for(var e=1;arguments.length>e;e++)this.subs[t]=this.subs[t]||[],this.subs[t].push(arguments[e])},pub:function(t){if(this.subs[t]){var e=Array.prototype.slice.call(arguments,1);e.unshift(t);for(var i=0;this.subs[t].length>i;i++)this.subs[t][i].apply(this,e)}},object:{keys:function(t){if(Object.hasOwnProperty("keys"))return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}},inherit:function(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t},base:function(t,e){var i=arguments.callee.caller;if(i.superClass_)return i.superClass_.constructor.apply(t,Array.prototype.slice.call(arguments,1));for(var n=Array.prototype.slice.call(arguments,2),o=!1,r=t.constructor;r;r=r.superClass_&&r.superClass_.constructor)if(r.prototype[e]===i)o=!0;else if(o)return r.prototype[e].apply(t,n);if(t[e]===i)return t.constructor.prototype[e].apply(t,n);throw Error("E.base called from a method of one name to a method of a different name")},inRange:function(t,e,i){return!isNaN(t)&&t>=e&&i>=t},range:function(t,e,i){var n=[];if("number"==typeof t)for(n[0]=t,i=i||1;e>=t+i;)n[n.length]=t+=i;else{var o="abcdefghijklmnopqrstuvwxyz";t===t.toUpperCase()&&(e=e.toUpperCase(),o=o.toUpperCase()),o=o.substring(o.indexOf(t),o.indexOf(e)+1),n=o.split("")}return n}}}(),window.PageConfig=window.PageConfig||{},function(){for(var t=["section","article","nav","header","footer","hgroup","aside"],e=0,i=t.length;i>e;e++)document.createElement(t[e])}(),window.console=window.console||{info:jQuery.noop,debug:jQuery.noop,log:jQuery.noop,trace:jQuery.noop,error:jQuery.noop},jQuery.any=function(t,e){return $.map(t,function(t){var i=e(t);return i?i:void 0}).length>0},jQuery.fn.fadeAndReplace=function(t,e){return this.fadeOut("slow"),this.queue(function(){$(this).text(t),$(this).dequeue()}),this.fadeIn("fast",function(){e&&e()}),this},jQuery.prototype.slideAndFadeIn=function(t,e){var i=this;this.css("opacity",0).slideDown(t,function(){i.animate({opacity:1},t,e)})},jQuery.prototype.slideAndFadeOut=function(t,e){var i=this;this.animate({opacity:0},t,function(){i.slideUp(t,e)})},makeDropDowns=function(){var t=$("#header"),e=$("#fixed-navigation"),i=$(".shop-drop-down[data-name=men]"),n=$(".shop-drop-down[data-name=women]");new E.lib.AccountDropDown($("#account-trigger"),$(".account-dropdown")),new E.lib.ShopDropDown(t.find(".shop-li[data-name=men]"),i),new E.lib.ShopDropDown(t.find(".shop-li[data-name=women]"),n),new E.lib.ShopDropDown(t.find(".bag-menu-trigger"),$(".shop-drop-down[data-name=bags]")),new E.lib.StickyShopDropDown(e.find(".shop-li[data-name=women]"),n),new E.lib.StickyShopDropDown(e.find(".shop-li[data-name=men]"),i),new E.lib.StickyShopDropDown(e.find(".bag-menu-trigger"),$(".shop-drop-down[data-name=bags]"))},$(document).on("ready page:change",function(){$("input, textarea").placeholder(),E.lib.Helpers.isMobile()||$(".tooltip").tipTip(),makeDropDowns(),E.page.LandingSlider=new LandingSlider($(".slides"),444,444),new E.lib.HoverCart($("#cart-trigger"),$("#cart_dropdown")),new E.lib.StickyHoverCart($("#second-trigger"),$("#cart_dropdown"))}),$(document).on("ready",function(){$(document).on("click","#share",function(){this.select()}),$(document).on("click",".facebook_connect",function(t){var e=E.collection.LineItems.packageAll(!0),i={initial_cart_state:JSON.stringify(e)};FB.getLoginStatus(function(t){"connected"==t.status?$.post("/users",$.extend(t.authResponse,i)):FB.login(function(t){t.authResponse?$.post("/users",$.extend(t.authResponse,i)):(E.page.LandingSlider.toggleBottomBar(!0),E.page.LandingSlider.slide(2,"marginTop"))},{scope:"email,user_birthday,user_location"})}),t.preventDefault()}),!function(){var t=null;E.sub("push_url",function(e,i){t=i}),$(document).on("click",".share-pinterest",function(e){var i=$(this),n=screen.width/2-332.5,o=screen.height/2-165,r=$.cookie("invite_url")||window.location.host,s=r+(t||i.data("pinPath")),a="http://pinterest.com/pin/create/button/?url="+escape(s)+"&amp;media="+escape($(".product-photo img").attr("src"))+"&amp;description="+i.data("pinText");window.open(a,"pin","height=330,width=700,resizable=1,left="+n+",top="+o),e.preventDefault()})}(),$(document).on("click",".toggle-modal-login",function(){$("#signup_prompt").reveal()}),$("form").on("submit",function(){var t=E.collection.LineItems.packageAll(!0);$("input[name=initial_cart_state]").val(JSON.stringify(t))}),E.showLoginPrompt=function(t){var e={dismissable:!0,slide:2};t=$.extend(e,t||{});var i=!$.cookie("_everlane_user");E.page.LandingSlider.jump(i?2:0),$.track("prompted for sign up"),$("html, body").animate({scrollTop:0},300,"easeOutQuart",function(){$("#modal-container").reveal({closeOnBackgroundClick:t.dismissable})})},$(document).on("click",".login-prompt",function(t){t.preventDefault(),E.showLoginPrompt()}),E.restoreLineItems=function(){var t=new Persist.Store("Everlane"),e=E.isLoggedIn?E.page.lineItemsJSON:JSON.parse(t.get("cart"));E.collection.LineItems.reset(e)},$(document).on("click",".scroll-to",function(t){t.preventDefault();var e=$(t.currentTarget);$("html, body").animate({scrollTop:$(e.attr("href")).offset().top},400,"easeInOutQuad")}),$("#header").waypoint(function(t,e){var i="down"===e?0:-50;"up"===e&&($("#cart_dropdown").fadeOut(200),$(".shop-drop-down.sticky").fadeOut(200),$(".minimal-cart-trigger").removeClass("drop-down-trigger-active")),$("#fixed-navigation").animate({top:i},300,"easeOutQuad",function(){E.pub("down"===e?E.Event.TopBar.STICK:E.Event.TopBar.UNSTICK)})},{offset:-180}),setTimeout(function(){E.lib.AlertCenter.init($(".alerts"))},500)}),$(document).on("page:fetch",function(){E.cart.remove(),E.lib.Helpers.isMobile()||$("#page-transition-preloader").show().data("component-object").begin()}),function(){if(!window.google||!google.gears){var t=null;if("undefined"!=typeof GearsFactory)t=new GearsFactory;else try{t=new ActiveXObject("Gears.Factory"),-1!=t.getBuildInfo().indexOf("ie_mobile")&&t.privateSetGlobalObject(this)}catch(e){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(t=document.createElement("object"),t.style.display="none",t.width=0,t.height=0,t.type="application/x-googlegears",document.documentElement.appendChild(t))}t&&(window.google||(google={}),google.gears||(google.gears={factory:t}))}}(),Persist=function(){var t,e,i,n,o,r,s="0.3.1";r=function(){var t,e="Thu, 01-Jan-1970 00:00:01 GMT",i=864e5,n=["expires","path","domain"],o=escape,r=unescape,s=document,a=function(){var t=new Date;return t.setTime(t.getTime()),t},l=function(t,e){var i,r,s=[],a=arguments.length>2?arguments[2]:{};s.push(o(t)+"="+o(e));for(var l=0;n.length>l;l++)i=n[l],r=a[i],r&&s.push(i+"="+r);return a.secure&&s.push("secure"),s.join("; ")},c=function(){var t="__EC_TEST__",e=new Date;return e=e.toGMTString(),this.set(t,e),this.enabled=this.remove(t)==e,this.enabled};return t={set:function(t,e){var n=arguments.length>2?arguments[2]:{},o=a(),r={};if(n.expires)if(-1==n.expires)r.expires=-1;else{var c=n.expires*i;r.expires=new Date(o.getTime()+c),r.expires=r.expires.toGMTString()}for(var h=["path","domain","secure"],d=0;h.length>d;d++)n[h[d]]&&(r[h[d]]=n[h[d]]);var u=l(t,e,r);return s.cookie=u,e},has:function(t){t=o(t);var e=s.cookie,i=e.indexOf(t+"="),n=(i+t.length+1,e.substring(0,t.length));return!i&&t!=n||0>i?!1:!0},get:function(t){t=o(t);var e,i=s.cookie,n=i.indexOf(t+"="),a=n+t.length+1,l=i.substring(0,t.length);return!n&&t!=l||0>n?null:(e=i.indexOf(";",a),0>e&&(e=i.length),r(i.substring(a,e)))},remove:function(i){var n=t.get(i),o={expires:e};return s.cookie=l(i,"",o),n},keys:function(){for(var t,e=s.cookie,i=e.split("; "),n=[],o=0;i.length>o;o++)t=i[o].split("="),n.push(r(t[0]));return n},all:function(){for(var t,e=s.cookie,i=e.split("; "),n=[],o=0;i.length>o;o++)t=i[o].split("="),n.push([r(t[0]),r(t[1])]);return n},version:"0.2.1",enabled:!1},t.enabled=c.call(t),t}();var a=function(){return Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]==e)return i;return-1}}();o=function(){},i=function(t){return"PS"+t.replace(/_/g,"__").replace(/ /g,"_s")};var l={search_order:["localstorage","globalstorage","gears","cookie","ie","flash"],name_re:/^[a-z][a-z0-9_ \-]+$/i,methods:["init","get","set","remove","load","save","iterate"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?",keys:"SELECT * FROM persist_data"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},params:{autostart:!0}}};return e={gears:{size:-1,test:function(){return window.google&&window.google.gears?!0:!1},methods:{init:function(){var t;t=this.db=google.gears.factory.create("beta.database"),t.open(i(this.name)),t.execute(l.sql.create).close()},get:function(t){var e,i,n=l.sql.get,o=this.db;return o.execute("BEGIN").close(),e=o.execute(n,[t]),i=e.isValidRow()?e.field(0):null,e.close(),o.execute("COMMIT").close(),i},set:function(t,e){var i=l.sql.remove,n=l.sql.set,o=this.db;return o.execute("BEGIN").close(),o.execute(i,[t]).close(),o.execute(n,[t,e]).close(),o.execute("COMMIT").close(),e},remove:function(t){var e=(l.sql.get,l.sql.remove),i=this.db;return i.execute("BEGIN").close(),i.execute(e,[t]).close(),i.execute("COMMIT").close(),!0},iterate:function(t,e){var i,n=l.sql.keys,o=this.db;for(i=o.execute(n);i.isValidRow();)t.call(e||this,i.field(0),i.field(1)),i.next();i.close()}}},globalstorage:{size:5242880,test:function(){if(!window.globalStorage)return!1;var t="127.0.0.1";this.o&&this.o.domain&&(t=this.o.domain);try{return globalStorage[t],!0}catch(e){return window.console&&window.console.warn&&console.warn("globalStorage exists, but couldn't use it because your browser is running on domain:",t),!1}},methods:{key:function(t){return i(this.name)+i(t)},init:function(){this.store=globalStorage[this.o.domain]},get:function(t){return t=this.key(t),this.store.getItem(t)},set:function(t,e){return t=this.key(t),this.store.setItem(t,e),e},remove:function(t){var e;return t=this.key(t),e=this.store.getItem[t],this.store.removeItem(t),e}}},localstorage:{size:-1,test:function(){try{if(!window.localStorage||void 0!=window.localStorage.setItem("test",null))return!1;if(!/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))return!0;var t=RegExp.$1;return t>=9?!0:"file:"==window.location.protocol?!1:window.localStorage?!0:!1}catch(e){return!1}},methods:{key:function(t){return this.name+">"+t},init:function(){this.store=localStorage},get:function(t){return t=this.key(t),this.store.getItem(t)},set:function(t,e){return t=this.key(t),this.store.setItem(t,e),e},remove:function(t){var e;return t=this.key(t),e=this.store.getItem(t),this.store.removeItem(t),e},iterate:function(t,e){for(var i,n,o=this.store,r=0;o.length>r;r++)i=o.key(r),n=i.split(">"),2==n.length&&n[0]==this.name&&t.call(e||this,n[1],o.getItem(i))}}},ie:{prefix:"_persist_data-",size:65536,test:function(){return window.ActiveXObject?!0:!1},make_userdata:function(t){var e=document.createElement("div");return e.id=t,e.style.display="none",e.addBehavior("#default#userdata"),document.body.appendChild(e),e},methods:{init:function(){var t=e.ie.prefix+i(this.name);this.el=e.ie.make_userdata(t),this.o.defer&&this.load()},get:function(t){var e;return t=i(t),this.o.defer||this.load(),e=this.el.getAttribute(t)},set:function(t,e){return t=i(t),this.el.setAttribute(t,e),this.o.defer||this.save(),e},remove:function(t){var e;return t=i(t),this.o.defer||this.load(),e=this.el.getAttribute(t),this.el.removeAttribute(t),this.o.defer||this.save(),e},load:function(){this.el.load(i(this.name))},save:function(){this.el.save(i(this.name))}}},cookie:{delim:":",size:4e3,test:function(){return t.Cookie.enabled?!0:!1},methods:{key:function(t){return this.name+e.cookie.delim+t},get:function(t){var e;return t=this.key(t),e=r.get(t)},set:function(t,e){return t=this.key(t),r.set(t,e,this.o),e},remove:function(t,e){var e;return t=this.key(t),e=r.remove(t)}}},flash:{test:function(){try{if(!swfobject)return!1}catch(t){return!1}var e=swfobject.getFlashPlayerVersion().major;return e>=8?!0:!1},methods:{init:function(){if(!e.flash.el){var t,i,n=l.flash;t=document.createElement("div"),t.id=n.div_id,i=document.createElement("div"),i.id=n.id,t.appendChild(i),document.body.appendChild(t),e.flash.el=swfobject.createSWF({id:n.id,data:this.o.swf_path||n.path,width:n.size.w,height:n.size.h},n.params,n.id)}this.el=e.flash.el},get:function(t){var e;return t=i(t),e=this.el.get(this.name,t)},set:function(t,e){var n;return t=i(t),n=this.el.set(this.name,t,e)},remove:function(t){var e;return t=i(t),e=this.el.remove(this.name,t)}}}},n=function(){for(var i,n,r=l.methods,s=l.search_order,a=0,c=r.length;c>a;a++)t.Store.prototype[r[a]]=o;t.type=null,t.size=-1;for(var h=0,d=s.length;!t.type&&d>h;h++)if(i=e[s[h]],i.test()){t.type=s[h],t.size=i.size;for(n in i.methods)t.Store.prototype[n]=i.methods[n]}t._init=!0},t={VERSION:s,type:null,size:0,add:function(t){e[t.id]=t,l.search_order=[t.id].concat(l.search_order),n()},remove:function(t){var i=a(l.search_order,t);0>i||(l.search_order.splice(i,1),delete e[t],n())},Cookie:r,Store:function(e,i){if(!l.name_re.exec(e))throw new Error("Invalid name");if(!t.type)throw new Error("No suitable storage found");i=i||{},this.name=e,i.domain=i.domain||location.hostname||"localhost",i.domain=i.domain.replace(/:\d+$/,""),i.domain="localhost"==i.domain?"":i.domain,this.o=i,i.expires=i.expires||730,i.path=i.path||"/",this.o.search_order&&(l.search_order=this.o.search_order,n()),this.init()}},n(),t}(),E.model.LineItem=Backbone.Model.extend({defaults:{sku:null,size:null,price:0,title:null,active:!0,imageURL:null,quantity:0,variantId:null,productId:null,collectionId:null,orderableState:null,restockDate:null,canUpdateQuantity:!1},initialize:function(){},activate:function(){this.set({active:!0,quantity:this.previous("quantity")||1})},deactivate:function(){this.set({active:!1,quantity:0})},packet:function(){return{sku:this.get("sku"),quantity:this.get("quantity"),variant_id:this.get("variantId"),product_id:this.get("productId"),collection_id:this.get("collectionId")}}}),function(){var t=Backbone.Collection.extend({model:E.model.LineItem,store:new Persist.Store("Everlane"),initialize:function(){this.bind("add change",function(t){this.send([t.packet()])},this),this.bind("add change destroy reset",this.save,this)},packageAll:function(t){return _.map(this.realLineItems(t),function(t){return t.packet()},this)},count:function(){return this.realLineItems().length
},deepCount:function(){var t=0;return _.each(this.realLineItems(),function(e){t+=e.get("quantity")}),t},realLineItems:function(t){return this.filter(function(e){return"sold_out"!=e.get("orderableState")&&(t||e.get("active"))},this)},save:function(){this.store.set("cart",JSON.stringify(this.where({active:!0}))),this.store.save()},send:function(t){$.track("checkout: added item to cart"),$.adroll.cart(),E.isLoggedIn&&$.ajax({type:"POST",url:"/orders/populate/",data:{line_items:t}})}});E.collection.LineItems=new t}(),E.view.Cart=Backbone.View.extend({tagName:"div",className:"hovercart",template:null,initialize:function(){$(".hovercart").on("click",".show-all",$.proxy(this.showAll,this)),this.listenTo(this.collection,"add",this.addLineItem),this.listenTo(this.collection,"reset",this.addLineItems),this.listenTo(this.collection,"change:quantity",this.updateCount),this.listenTo(this.collection,"all",this.updateCount)},addLineItem:function(t){var e=new E.view.LineItem({model:t});"sold_out"!==t.get("orderableState")&&$(".hovercart-list").prepend(e.render().$el)},addLineItems:function(){$(".hovercart-list").empty(),this.collection.each(this.addLineItem,this)},showAll:function(){$(".hovercart").find(".show-all").remove(),$(".hovercart-list").addClass("all-showing")},updateCount:function(){var t=this.collection.count();$(".show-all").toggle(t>2),$(".empty-bag-message").toggle(0===t),$(".checkout-button").toggle(0!==t),E.pub(E.Event.Cart.UPDATE,{authoritative:this.collection.deepCount()})}}),E.view.Checkout=Backbone.View.extend({tagName:"div",className:"hovercart",template:null,initialize:function(){this.listenTo(E.collection.LineItems,"reset",this.addLineItems),this.listenTo(E.collection.LineItems,"change:quantity change:active",this.showSummaryLoadingAnimation)},addLineItem:function(t){var e=new E.view.LineItemCheckout({model:t});"sold_out"!==t.get("orderableState")&&$(".reviewcart-list").prepend(e.render().$el)},addLineItems:function(){$(".reviewcart-list").empty(),E.collection.LineItems.each(this.addLineItem,this)},showSummaryLoadingAnimation:function(){var t=$("#order-details").find(".js-preloader");$("#order_summary_container").fadeTo(200,.2,"easeOutQuad",function(){new E.lib.LoadingAnimation(t.removeClass("hidden")).begin()})},updateCount:function(){E.pub(E.Event.Cart.UPDATE,{authoritative:E.collection.LineItems.deepCount()})}}),E.view.LineItem=Backbone.View.extend({tagName:"li",templateSelector:"#line-item-template",className:"hovercart-item clearfix",template:null,events:{"click .remove":"remove","click .restore":"restore"},initialize:function(){this.listenTo(this.model,"change:quantity",this.render)},render:function(){return this.model.get("quantity")?this.$el.html(_.template($(this.templateSelector).html(),this.model.toJSON())):this.remove(),this},update:function(){this.$el.html(_.template($(this.templateSelector).html(),this.model.toJSON()))},restore:function(){this.model.activate(),this.$el.find(".removed-line-item").hide(),this.$el.find(".active-line-item").css("opacity",1).slideDown(300,"easeOutBack")},remove:function(){this.model.deactivate(),this.$el.find(".active-line-item").css("opacity",0).slideUp(500,"easeOutBack"),this.$el.find(".removed-line-item").fadeIn()}}),E.view.LineItemCheckout=E.view.LineItem.extend({events:{"click .remove":"remove","click .restore":"restore","click .update-quantity-button":"updateQuantity","keypress .update-quantity-field":"showUpdateQuantityButton"},showUpdateQuantityButton:function(t){var e=[48,49,50,51,52,53,54,55,56,57];-1!==$.inArray(t.which,e)&&this.$el.find(".update-quantity-button").addClass("visible")},updateQuantity:function(){var t=parseInt(this.$el.find(".update-quantity-field").val());t?this.model.set("quantity",t):this.deactivate()}}),function(t){t.fn.EverlaneCollectionImage=function(e){if(!E.lib.Helpers.isMobile()){e=e||{};var i=e.speed||300;return this.each(function(){var e=t(this).find(".main-product-link");e.attr("href");var n=t(this).find(".size-tray"),o=t(this).find("img"),r=o.clone().attr("src",o.data("hover-src")).css({display:"none",position:"absolute",bottom:0,left:0}).appendTo(e);t(this).on("mouseenter",function(){r.stop(!1,!0).fadeIn(i),n.stop(!1,!0).animate({opacity:.7},i)}),t(this).on("mouseleave",function(){r.stop(!1,!0).fadeOut(i),n.stop(!1,!0).animate({opacity:0},i)})})}}}(jQuery),E.lib.Slides=function(t){t=t||{},this.creepDuration=4e3,this.creepDistance=10,this.moveDuration=t.moveDuration||1500,this.pauseDuration=0,this.initDuration=1500,this.afterInit=t.afterInit||$.noop,this.beforeInit=t.beforeInit||$.noop,this.container=$(t.container),this.nextButton=$(t.nextButton),this.prevButton=$(t.prevButton),this.proxy=$({});var e=this.container,i=this,n=this.viewport=e.find(".viewport");return n.find(".slide").css({position:"absolute",width:"100%",height:"100%",display:"none",top:0,left:0,zIndex:10}),$(window).resize(function(){i.resize()}),this.resize(),this.beforeInit(),this.slides=this.viewport.find(".slide"),this.currentSlide().css({opacity:0}).show(),this.vCenter(this.currentSlide()),this.currentSlide().animate({opacity:1},this.initDuration,function(){i.afterInit(i,i.currentSlide()),i.play()}),this.nextButton.on("click",function(){i.next()}),this.prevButton.on("click",function(){i.prev()}),this},$.extend(E.lib.Slides.prototype,{resize:function(){var t=this.container.width(),e=this.container.height();this.viewport.css({width:t,height:e}),this.proxy.trigger("resize",[t,e])},rollIn:function(t,e,i){t.find(".slide-content").children().each(function(t){$(this).delay(t*e).animate({opacity:1},i)})},rollOut:function(t,e,i){t.find(".slide-content").children().each(function(t){$(this).delay(t*e).animate({opacity:0},i)})},vCenter:function(t){var e=t.find(".slide-content");e.hasClass("v-center")&&e.css({marginTop:-e.height()/2})},next:function(t,e){if(this.lock)return!1;this.lock=!0;var i=this;e=e||$.noop,i.proxy.trigger("next",[i.nextSlide().index()]),this.transition(this.currentSlide(),this.nextSlide(),"right",t,function(){e(i,i.currentSlide())})},prev:function(t,e){if(this.lock)return!1;this.lock=!0;var i=this;e=e||$.noop,i.proxy.trigger("prev",[i.prevSlide().index()]),this.transition(this.currentSlide(),this.prevSlide(),"left",t,function(){e(i,i.currentSlide())})},transition:function(t,e,i,n,o){o=o||$.noop,n="number"==typeof n?n:this.moveDuration;var r=this,s="right"==i?1:-1;return e.css({left:s*this.container.width(),display:"block"}),this.vCenter(e),e.animate({left:0},n,"easeInOutQuad"),t.animate({left:-s*this.container.width()},n,"easeInOutQuad",function(){$(this).hide(),r._cS=e,r.lock=!1,o(),r.proxy.trigger("transition",[r.currentSlide().index()])}),!0},play:function(){},slideAt:function(t){return $(this.slides[t])},currentSlide:function(){return this._cS=this._cS||this.slides.first(),this._cS},nextSlide:function(){var t=this.currentSlide().next();return t.length>0?t:this.slides.first()},prevSlide:function(){var t=this.currentSlide().prev();return t.length>0?t:this.slides.last()}}),!function(t){t.fn.EverlaneSlides=function(e){return new E.lib.Slides(t.extend({container:this},e))}}(jQuery),E.lib.Helpers={isMobile:function(){return-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod")||-1!=navigator.platform.indexOf("iPad")||-1!=navigator.platform.indexOf("android")},isEmail:function(t){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},inherit:function(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t},base:function(t,e){var i=arguments.callee.caller;if(i.superClass_)return i.superClass_.constructor.apply(t,Array.prototype.slice.call(arguments,1));for(var n=Array.prototype.slice.call(arguments,2),o=!1,r=t.constructor;r;r=r.superClass_&&r.superClass_.constructor)if(r.prototype[e]===i)o=!0;else if(o)return r.prototype[e].apply(t,n);if(t[e]===i)return t.constructor.prototype[e].apply(t,n);throw Error("base called from a method of one name to a method of a different name")}},LandingSlider=function(t,e,i){this.container=t,this.width=e,this.height=i,this.slideMaximum=this.width*this.container.find(".slides").length,$(document).on("click","*[data-slide-to]",$.proxy(this.onTrigger,this)),this.container.find(".interest-button").on("click",$.proxy(this.onInterested,this))},LandingSlider.prototype.onInterested=function(){this.slide(2,"marginLeft",!1)},LandingSlider.prototype.onTrigger=function(t){var e=$(t.currentTarget);e.hasClass("login-transition")?(this.slide(e.attr("data-slide-to"),"marginTop",!1),this.toggleBottomBar(!1)):(this.slide(e.attr("data-slide-to"),"marginLeft",!e.attr("data-prevent-switch")),t.preventDefault())},LandingSlider.prototype.onSubmit=function(t){var e=$(t.currentTarget);this.transitionSlide(e.attr("data-slide-to"))},LandingSlider.prototype.slide=function(t,e,i){i="boolean"==typeof i?i:!0;var n=this.container,o=-this.width*t;"marginTop"===e?(n=$(".transition"),0==t?($("#login-transition").show(),$("#signup-transition").hide()):1==t?($("#signup-transition").show(),$("#login-transition").hide(),t=0):2==t&&(t=1),o=-this.height*t):e="marginLeft";var r={};r[e]=o,E.lib.Helpers.isMobile()?n.css(r):n.animate(r,450),i&&this.switchLink(t)},LandingSlider.prototype.transitionSlide=function(t){var e=-this.height*t;E.lib.Helpers.isMobile()?this.container.css("marginTop",e):this.container.animate({marginTop:e},400)},LandingSlider.prototype.jump=function(t,e){var e="boolean"==typeof e?e:!0,i=-this.width*t;this.container.css("marginLeft",i),e&&this.switchLink(t)},LandingSlider.prototype.toggleBottomBar=function(t){$(".landerNext.bottom").animate({opacity:+t},250)},LandingSlider.prototype.switchLink=function(t){0==t?($(".apply").hide(),$(".login").show()):2==t&&($(".apply").show(),$(".login").hide())},E.lib.Component=function(t){this.container=t,this.subs={}},E.lib.Component.prototype.pub=function(t){if(this.subs[t]){var e=Array.prototype.slice.call(arguments,1);e.unshift(t);for(var i=0;this.subs[t].length>i;i++)this.subs[t][i].apply(this,e)}},E.lib.Component.prototype.sub=function(t){for(var e=1;arguments.length>e;e++)this.subs[t]=this.subs[t]||[],this.subs[t].push(arguments[e])},E.lib.Component.prototype.get=function(t){return this.ATTRS[t]},E.lib.Component.prototype.set=function(t,e){var i=t+"_change";this.ATTRS[t]=e,this.pub(this.Event[i.toUpperCase()])},E.lib.Component.prototype.show=function(){{!this.isVisible()}this.container.show()},E.lib.Component.prototype.hide=function(){{this.isVisible()}this.container.hide()},E.lib.Component.prototype.setChildComponent=function(t,e){this[t]=e},E.lib.Component.prototype.isVisible=function(){return this.container.is(":visible")},E.lib.Component.prototype.cssName=function(){return this.toString().replace(/\./g,"-").toLowerCase()},E.lib.Component.attach=function(t){return $.map($('[data-component="'+t.prototype.cssName()+'"]'),function(){return new t($(container))})},E.lib.DropDown=function(t,e){E.lib.Component.call(this,e),this.trigger=t,this.container=e;var i=this;this.container.hover($.proxy(this.show,this),$.proxy(this.hide,this)),this.container.on("mouseover",function(){i.isOverDropDown=!0}),this.container.on("mouseout",function(){i.isOverDropDown=!1}),this.trigger.hover($.proxy(this.show,this),$.proxy(this.hide,this)),this.trigger.addClass(this.TRIGGER_CLASS)},E.lib.Helpers.inherit(E.lib.DropDown,E.lib.Component),E.lib.DropDown.prototype.TRIGGER_CLASS="drop-down-trigger",E.lib.DropDown.prototype.TRIGGER_ACTIVE_CLASS="drop-down-trigger-active",E.lib.DropDown.prototype.show=function(){clearTimeout(this.closeTimer),$(".dropdown-menu").not(this.container).hide(),$("."+this.TRIGGER_ACTIVE_CLASS).not(this.trigger).removeClass(this.TRIGGER_ACTIVE_CLASS);var t=this.getDropdownOffset(this.trigger);this.trigger.addClass(this.TRIGGER_ACTIVE_CLASS),this.container.css(t).stop().css("opacity",1).show()},E.lib.DropDown.prototype.hide=function(){var t=this;this.closeTimer=setTimeout(function(){t.isOverDropDown||(t.container.fadeOut(100),t.trigger.removeClass(t.TRIGGER_ACTIVE_CLASS),t.isOverDropDown=!1)},100)},E.lib.DropDown.prototype.getDropdownOffset=function(){throw new Error("getDropdownOffset(): You need to override this method")},E.lib.DropDown.prototype.toString=function(){return"E.lib.DropDown"},E.lib.AccountDropDown=function(t,e){E.lib.DropDown.call(this,t,e),this.container.css("width",this.trigger.innerWidth())},E.lib.Helpers.inherit(E.lib.AccountDropDown,E.lib.DropDown),E.lib.AccountDropDown.prototype.getDropdownOffset=function(t){var e=t.offset();return{left:e.left,top:e.top+38}},E.lib.Alert=function(t){E.lib.Component.call(this,t);var e=this.container.find(".close-link");this.disableURL=e.attr("href"),this.container.on("click",$.proxy(this.onCloseClick,this))},E.lib.Helpers.inherit(E.lib.Alert,E.lib.Component),E.lib.Alert.prototype.Event={HIDE:"hide"},E.lib.Alert.prototype.onCloseClick=function(t){t.preventDefault(),this.hide()},E.lib.Alert.prototype.show=function(){this.container.removeClass("unseen")},E.lib.Alert.prototype.hide=function(){this.container.addClass("seen"),$.post(this.disableURL)},E.lib.Alert.prototype.toString=function(){return"E.lib.Alert"},E.lib.AlertCenter={init:function(t){for(var e=t.find(".alert"),i=0;e.length>i;i++)(function(t){setTimeout(function(){new E.lib.Alert($(e.eq(t))).show()},300*t)})(i)}},E.lib.ButtonSet=function(t){E.lib.Component.call(this,t),this.currentButton=null,this.currentIndex_=null,this.container.delegate("li","click",$.proxy(this.onClick,this)),this.syncUI_()},E.lib.Helpers.inherit(E.lib.ButtonSet,E.lib.Component),E.lib.ButtonSet.prototype.ACTIVE_CLASS="active",E.lib.ButtonSet.prototype.Event={UPDATE:"update"},E.lib.ButtonSet.prototype.ATTRS={index:null},E.lib.ButtonSet.prototype.syncUI_=function(){this.setCurrentElement_(this.container.find("."+this.ACTIVE_CLASS))},E.lib.ButtonSet.prototype.onClick=function(t){t.preventDefault(),this.setCurrentElement_($(t.currentTarget))},E.lib.ButtonSet.prototype.setCurrentElement_=function(t){var e=this;this.ATTRS.index=this.currentIndex_=this.container.find("li").index(t),t.is(this.currentButton)||(this.currentButton=t,this.container.find("li").each(function(i,n){$(n).is(t)?$(n).addClass(e.ACTIVE_CLASS):$(n).removeClass(e.ACTIVE_CLASS)}),this.pub(this.Event.UPDATE,this.ATTRS.index))},E.lib.ButtonSet.prototype.clear=function(){this.currentButton&&(this.container.find("li").removeClass(this.ACTIVE_CLASS),this.currentButton=null)},E.lib.ButtonSet.prototype.getIndex=function(){return 0==this.container.children().length?0:this.currentIndex_},E.lib.ButtonSet.prototype.toString=function(){return"E.lib.ButtonSet"},E.lib.CartManager=function(){return E.lib.CartManager.instance_?E.lib.CartManager.instance_:(E.lib.Component.call(this),E.lib.CartManager.instance_=this,void 0)},E.lib.Helpers.inherit(E.lib.CartManager,E.lib.Component),E.lib.CartManager.prototype.Event={INIT:"init",BLINK:"blink",UPDATE:"update"},E.lib.FB={defaultShareOptions:{method:"feed",name:"Become an Everlane member",picture:"http://static.everlane.com/static/feed-icon.jpg",display:"iframe"},share:function(t,e){var i=e||$.noop();FB.ui($.extend({},this.defaultShareOptions,t),i)}},E.lib.FlashMessage=function(t){var e=this.getContainer().html(t),i=this.getTopOffset(e),n=this.getLeftOffset(e);e.css({top:i,left:n}).fadeIn(600).animate({top:i-200,opacity:0},600,"easeOutExpo",function(){e.css({opacity:1,display:"none"})})},E.flash=function(t){new E.lib.FlashMessage(t)},E.lib.FlashMessage.prototype.getLeftOffset=function(t){return($(window).width()-t.outerWidth())/2+$(window).scrollLeft()},E.lib.FlashMessage.prototype.getTopOffset=function(t){return($(window).height()-t.outerHeight())/2+$(window).scrollTop()},E.lib.FlashMessage.prototype.makeContainer=function(){var t='<div id="flash-message"></div>';return $(document.body).append(t),$("#flash-message")},E.lib.FlashMessage.prototype.getContainer=function(){var t=$("#flash-message");return 0==t.length?this.makeContainer():t},E.lib.FlipBook=function(t,e){E.lib.Component.call(this,t),this.options=e,this.canStart=!1,this.askedToStart=!1,this.intervalIDs=[],this.numberOfImages=this.options.end-this.options.start+1,this.images=new Array(this.numberOfImages),this.currentIndex=0,this.direction=1,this.sub(this.Event.PRELOAD_COMPLETE,$.proxy(this.onPreloadComplete,this)),this.preloadImages()},E.lib.Helpers.inherit(E.lib.FlipBook,E.lib.Component),E.lib.FlipBook.prototype.Event={TICK:"tick",LOOP:"loop",ANIMATION_START:"animation-start",ANIMATION_END:"animation-end",RESET_COMPLETE:"reset-complete",PRELOAD_COMPLETE:"preload-complete"},E.lib.FlipBook.prototype.start=function(){this.askedToStart=!0,this.canStart&&(this.intervalIDs.push(setInterval($.proxy(this.replaceImage,this),this.fpsToMilliseconds(this.options.fps))),this.isAnimating=!0,this.pub(this.Event.ANIMATION_START))},E.lib.FlipBook.prototype.pause=function(){for(var t=0;this.intervalIDs.length>t;t++)clearInterval(this.intervalIDs[t])},E.lib.FlipBook.prototype.replaceImage=function(){var t=this.images[this.currentIndex];this.options.loop||this.currentIndex!=this.numberOfImages?(this.container.find("img").remove(),this.container.append($(t).show()),this.pub(this.Event.TICK,100*(this.currentIndex/(this.numberOfImages-1))),this.currentIndex+=this.direction,this.options.loop&&(this.currentIndex>=this.numberOfImages-1||0>=this.currentIndex)&&(this.direction*=-1,this.pub(this.Event.LOOP))):($.each(this.intervalIDs,function(t,e){clearInterval(e)}),this.intervalIDs=[],this.pub(this.Event.ANIMATION_END),this.currentIndex=0)},E.lib.FlipBook.prototype.jumpTo=function(t){t=t>100?100:t,t=0>t?0:t,this.currentIndex=Math.floor((this.numberOfImages-1)*t/100),this.direction=1,this.replaceImage()},E.lib.FlipBook.prototype.getImageURL=function(t){return this.options.filename.replace("###",t)},E.lib.FlipBook.prototype.preloadImages=function(){for(var t=this,e=0,i=0,n=this.options.start;this.options.end>=n;n++){var o=new Image;o.onload=function(){e++,e==t.numberOfImages&&t.pub(t.Event.PRELOAD_COMPLETE)},o.src=this.getImageURL(n),this.images[i]=o,i++}},E.lib.FlipBook.prototype.fpsToMilliseconds=function(t){return 1e3/t},E.lib.FlipBook.prototype.onPreloadComplete=function(){this.canStart=!0,this.askedToStart&&this.start()},E.lib.FlipBook.prototype.reset=function(){var t=this;this.container.find("img").fadeOut("slow",function(){t.currentIndex=0,t.pub(t.Event.RESET_COMPLETE)})},E.lib.FlipBook.prototype.getAnimationDuration=function(){return this.numberOfImages*this.fpsToMilliseconds(this.options.fps)},E.lib.FlipBook.prototype.toString=function(){return"E.lib.FlipBook"},E.lib.FlipbookPlayer=function(t,e){E.lib.Component.call(this,t);var i=this;this.options=$.extend({autoplay:!1,fps:10},e),this.loadingAnimation=this.container.find(".js-preloader"),this.loadingAnimation.data("component-object")||new E.lib.LoadingAnimation(this.loadingAnimation),this.flipBook=new E.lib.FlipBook(this.container.find(".flipbook"),e),this.timeline=new E.lib.Timeline(this.container.find(".draggable-track"),this.flipBook.numberOfImages),this.currentAngle=0,this.numberOfLoops=0,this.left=!0,this.loadingAnimation.data("component-object").begin(),this.controls=this.container.find(".controls"),this.playbackSpinner=this.controls.find(".spinner-indicator"),this.controls.find(".spinner-play").click($.proxy(this.onPlay,this)),this.controls.find(".spinner-pause").click($.proxy(this.onPause,this)),this.flipBook.sub(this.flipBook.Event.TICK,$.proxy(this.timeline.move,this.timeline)),this.flipBook.sub(this.flipBook.Event.PRELOAD_COMPLETE,$.proxy(this.onFlipBookPreloaded,this)),this.flipBook.sub(this.flipBook.Event.RESET_COMPLETE,$.proxy(this.timeline.setHandlePosition,this.timeline)),this.timeline.sub(this.timeline.Event.DRAG,$.proxy(this.onPause,this),$.proxy(this.onDrag,this)),this.container.find(".play").bind("click",$.proxy(this.play,this)),this.options.loop?this.flipBook.sub(this.flipBook.Event.LOOP,function(){i.numberOfLoops+=1,i.left=!i.left}):(this.flipBook.sub(this.flipBook.Event.ANIMATION_END,$.proxy(this.onAnimationEnd,this)),this.flipBook.sub(this.flipBook.Event.RESET_COMPLETE,this.flipBook.start),this.container.find(".replay").bind("click",$.proxy(this.reset,this)))},E.lib.Helpers.inherit(E.lib.FlipbookPlayer,E.lib.Component),E.lib.FlipbookPlayer.prototype.play=function(){this.container.find(".play").fadeOut(),this.container.find(".title").fadeOut(),this.timeline.show(),this.controls.show(),this.startRotation(),this.flipBook.start()},E.lib.FlipbookPlayer.prototype.reset=function(){this.container.find(".replay").fadeOut(),this.flipBook.reset()},E.lib.FlipbookPlayer.prototype.onDrag=function(t,e){var i=this.container.find(".play");i.is(":visible")&&(i.fadeOut(),this.container.find(".title").fadeOut()),this.flipBook.jumpTo(e)},E.lib.FlipbookPlayer.prototype.onAnimationEnd=function(){this.container.find(".replay").css("display","block").fadeIn()},E.lib.FlipbookPlayer.prototype.onFlipBookPreloaded=function(){var t=this;this.loadingAnimation.fadeOut(function(){t.loadingAnimation.data("component-object").destroy()}),this.options.autoplay&&!$.cookie(this.getCookieName())?(this.play(),$.cookie(this.getCookieName(),1,{expires:365})):this.container.find(".play").show()},E.lib.FlipbookPlayer.prototype.getCookieName=function(){return this.cssName().split("-")[3]+"-ap"},E.lib.FlipbookPlayer.prototype.onPause=function(){this.flipBook.pause(),this.playbackSpinner.stopRotate(),clearInterval(this.rotationInterval),this.controls.find(".spinner-play").hasClass("hidden")&&this.controls.find(".spinner-pause, .spinner-play").toggleClass("hidden")},E.lib.FlipbookPlayer.prototype.onPlay=function(){this.controls.find(".spinner-pause, .spinner-play").toggleClass("hidden"),this.play()},E.lib.FlipbookPlayer.prototype.startRotation=function(){var t=this;this.rotationInterval=setInterval(function(){0==t.numberOfLoops%2?t.currentAngle+=3:t.currentAngle-=3,t.playbackSpinner.rotate(t.currentAngle)},66)},E.lib.FlipbookPlayer.prototype.shouldAnimateLeft=function(){return 0==this.numberOfLoops%2?"left":"right"},E.lib.FlipbookPlayer.prototype.toString=function(){return"E.lib.FlipbookPlayer"},$(document).on("ready page:load",function(){$('[data-component="FlipbookPlayer"]').each(function(t,e){e=$(e);for(var i=["start","end","filename","fps","autoplay"],n={},o=0;i.length>o;o++){var r=i[o];e.data(r)&&(n[r]=e.data(r))}new E.lib.FlipbookPlayer(e,n)})}),E.lib.HoverCart=function(t,e){E.lib.DropDown.call(this,t,e),this.count=0,this.bagBadge=this.trigger.find("#bag-badge"),this.bagRibbon=this.trigger.find("#bag-ribbon"),this.bindUI_(),this.trigger.on("click",this.logAdRollCheckout),this.container.on("click","#checkout-button",this.logAdRollCheckout)},E.lib.Helpers.inherit(E.lib.HoverCart,E.lib.DropDown),E.lib.HoverCart.prototype.logAdRollCheckout=function(){E.page.fixedNavigation||$.adroll.checkout()},E.lib.HoverCart.prototype.bindUI_=function(){var t=this;E.sub(E.Event.Cart.UPDATE,$.proxy(this.update,this)),E.sub(E.Event.Cart.BLINK,$.proxy(this.fadeInFadeOut,this)),E.sub(E.Event.Cart.INIT,$.proxy(this.init,this)),$("body").bind("click",function(e){var i=$.map($(e.target).parents(),function(t){return $(t).attr("id")});e.target.id&&i.push(e.target.id),-1===$.inArray("cart_dropdown",i)&&-1===$.inArray("add-to-cart",i)&&t.hide()})},E.lib.HoverCart.prototype.init=function(t,e){this.count=e.quantity,this.count>0&&(this.bagRibbon.css("top","-90px"),this.bagBadge.css({top:"27px","background-position":"0 "+-16*(this.count-1)+"px"}))},E.lib.HoverCart.prototype.show=function(){E.hideHoverCart||E.lib.Helpers.base(this,"show")},E.lib.HoverCart.prototype.getDropdownOffset=function(t){var e=t.offset();return this.container.css("position","absolute"),{top:e.top+40,left:e.left-(this.container.width()-120)}},E.lib.HoverCart.prototype.fadeInFadeOut=function(){var t=this;this.show(),this.closeTimer=setTimeout(function(){t.isOverDropDown||(t.container.fadeOut(1e3,function(){t.showLink&&t.showLink()}),t.trigger.removeClass(t.TRIGGER_ACTIVE_CLASS))},3e3)},E.lib.HoverCart.prototype.setCount=function(t){var e=this.count,i=this;this.count=t,this.count!==e&&(0==this.count?this.dropOutEverything():this.count>0&&0==e?(this.displayCount(),this.dropInEverything()):this.count>0&&e>0&&this.dropOutBadge(function(){i.displayCount(),i.dropInBadge()}))},E.lib.HoverCart.prototype.displayCount=function(){this.bagBadge.css("background-position","0px "+(-16*(this.count-1)+"px"))},E.lib.HoverCart.prototype.dropInEverything=function(){this.bagRibbon.animate({top:"+=70px"},500,"easeOutBack",$.proxy(this.dropInBadge,this))},E.lib.HoverCart.prototype.dropOutEverything=function(){this.dropOutBadge(),this.bagRibbon.animate({top:"-=70px"},500,"easeInBack")},E.lib.HoverCart.prototype.dropOutBadge=function(t){var e=this;this.bagBadge.fadeOut(300,function(){e.bagBadge.css("top","-16px"),t&&t()})},E.lib.HoverCart.prototype.dropInBadge=function(){var t=this;this.droplock?(this.bagRibbon.css("top","-90px"),this.bagBadge.show()):(this.droplock=!0,this.bagBadge.show().animate({top:"+=43px"},650,"easeOutBounce",function(){t.droplock=!1}))},E.lib.HoverCart.prototype.update=function(t,e){var i;i=e.hasOwnProperty("authoritative")?e.authoritative:this.count+e.increment,this.setCount(i)},E.lib.HoverCart.prototype.toString=function(){return"E.lib.HoverCart"},E.lib.ImageLoader={loadImages:function(t){for(var e=0,i=t.length;i>e;e++)this.loadImage(t[e])},loadImage:function(t){t&&((new Image).src=t)}},function(){var t;t=jQuery,t.fn.extend({hoverZoom:function(e){var i,n,o,r,s,a,l;return l={boxParent:this.parent(),zoomParent:"body",boxCSS:{opacity:.4,backgroundColor:"white",border:"1px solid #ccc",cursor:"move"},sensitivity:30,delay:75,idealScale:2.66,scaleThreshold:{width:3,height:3},minSize:{width:800,height:800},"in":function(){},out:function(){}},l=t.extend(l,e),n=this,r=[0,0],o=[0,0],a=[1,1],s=!1,i=function(t,e){var i;return i=PageConfig.gallery_hash.products[t].images[e],i.original_size||""},this.each(function(){return n.on("mousemove",function(t){return r=[t.pageX,t.pageY]}),n.on("mouseover",function(){return t("<img/>").attr("src",i(n.data("product-index"),n.data("index"))).load(function(){return o=[this.width,this.height]})}),n.hoverIntent({sensitivity:l.sensitivity,interval:l.delay,over:function(e){var c,h,d,u,p,f;return a=[o[0]/n.width(),o[1]/n.height()],s=a[0]>l.scaleThreshold.width||a[1]>l.scaleThreshold.height?!0:!1,c=[0,0],o[0]<l.minSize.width||o[1]<l.minSize.height?void 0:(u=t("#mousebox").length>0?t("#mousebox"):t('<div id="mousebox"></div>'),h=t("#hover-image").length>0?t("#hover-image"):t('<div id="hover-image"></div>'),u.css({border:l.boxCSS.border,cursor:l.boxCSS.cursor,backgroundColor:l.boxCSS.backgroundColor,opacity:l.boxCSS.opacity}),s?u.css({width:Math.round(n.width()/l.idealScale),height:Math.round(n.height()/l.idealScale)}):u.css({width:n.width()/a[0],height:n.height()/a[1]}),p=r[0]-n.offset().left-u.width()/2,f=r[1]-n.offset().top-u.height()/2,0>=p&&(p=0),p>=n.width()-u.width()&&(p=n.width()-u.width()),0>=f&&(f=0),f>=n.height()-u.height()&&(f=n.height()-u.height()),s?(c[0]=p*l.idealScale,c[1]=f*l.idealScale,d=Math.floor(100*l.idealScale),h.css("background-size",""+d+"% "+d+"%")):(c[0]=p*a[0],c[1]=f*a[1]),u.css({top:Math.round(f),left:Math.round(p)}),h.css({"background-image":"url("+i(n.data("product-index"),n.data("index"))+")","background-position":"-"+c[0]+"px -"+c[1]+"px",width:n.width(),height:n.height()}),u.hide().appendTo(l.boxParent).fadeIn(300),h.hide().prependTo(l.zoomParent).fadeIn(300),l["in"](e))},out:function(){}}),l.boxParent.on("mouseleave",n,function(e){return t("#mousebox").fadeOut(300,function(){return t(this).remove()}),t("#hover-image").fadeOut(300,function(){return t(this).remove()}),l.out(e)}),l.boxParent.on("mousemove",n,function(e){var i,r,c,h,d,u;return c=t("#hover-image").length>0?t("#hover-image"):t('<div id="hover-image"></div>'),h=t("#mousebox").length>0?t("#mousebox"):t('<div id="mousebox"></div>'),d=[h.offset().left-n.offset().left,h.offset().top-n.offset().top],r=[e.pageX-h.offset().left-h.width()/2,e.pageY-h.offset().top-h.height()/2],u=[d[0]+r[0],d[1]+r[1]],i=[0,0],0>=u[0]&&(u[0]=0),u[0]>=n.width()-h.width()&&(u[0]=n.width()-h.width()-2),0>=u[1]&&(u[1]=0),u[1]>=n.height()-h.height()&&(u[1]=n.height()-h.height()-2),s?(i[0]=(e.pageX-n.offset().left-h.width()/2)*l.idealScale,i[1]=(e.pageY-n.offset().top-h.height()/2)*l.idealScale,i[0]>n.width()*l.idealScale-n.width()&&(i[0]=n.width()*l.idealScale-n.width()),i[1]>n.height()*l.idealScale-n.height()&&(i[1]=n.height()*l.idealScale-n.height())):(i[0]=(e.pageX-n.offset().left-h.width()/2)*a[0],i[1]=(e.pageY-n.offset().top-h.height()/2)*a[1]),0>i[0]&&(i[0]=0),i[0]>o[0]-n.width()&&(i[0]=o[0]-n.width()),0>i[1]&&(i[1]=0),i[1]>o[1]-n.height()&&(i[1]=o[1]-n.height()),h.css({top:Math.round(u[1]),left:Math.round(u[0])}),c.css("background-position","-"+i[0]+"px -"+i[1]+"px")})})}})}.call(this),E.lib.LoadingAnimation=function(t){this.container=t,this.container.data("component-object",this),this.elements=this.container.find("li"),this.i=0},E.lib.LoadingAnimation.prototype.begin=function(){this.running||(this.running=!0,this.startAnimation())},E.lib.LoadingAnimation.prototype.end=function(){this.running=!1},E.lib.LoadingAnimation.prototype.startAnimation=function(){var t=this,e=this.elements.length,i=this.elements.eq(this.i),n=250,o=.5;this.i=(this.i+1)%e,i.fadeTo(n,1,function(){i.fadeTo(n,o,function(){setTimeout(function(){t.running&&t.startAnimation()},100)})})},E.lib.LoadingAnimation.prototype.destroy=function(){this.end(),this.container.remove()},$(document).on("ready page:change",function(){$("[data-component=LoadingAnimation]").each(function(t,e){new E.lib.LoadingAnimation($(e))})}),E.lib.PopupAppointmentDropDown=function(t,e){E.lib.DropDown.call(this,t,e),this.container.bind("click",$.proxy(this.onChildClick,this))},E.lib.Helpers.inherit(E.lib.PopupAppointmentDropDown,E.lib.DropDown),E.lib.PopupAppointmentDropDown.prototype.onChildClick=function(){this.container.hide(),this.trigger.removeClass(this.TRIGGER_ACTIVE_CLASS)},E.lib.PopupAppointmentDropDown.prototype.getDropdownOffset=function(t){var e=t.offset();return{left:e.left,top:e.top+t.outerHeight()}},E.lib.ShopDropDown=function(t,e){E.lib.DropDown.call(this,t,e),this.bindUI_(),this.syncUI_()},E.inherit(E.lib.ShopDropDown,E.lib.DropDown),E.lib.ShopDropDown.prototype.bindUI_=function(){E.lib.Helpers.isMobile()||this.container.delegate(".product-links a","mouseover",$.proxy(this.onLinkOver,this))},E.lib.ShopDropDown.prototype.syncUI_=function(){var t=window.location.href.toLowerCase();"/"!=t.charAt(t.length-1)&&(t+="/"),this.container.find("a").each(function(e,i){var n=i.href.toLowerCase();"/"!=n.charAt(n.length-1)&&(n+="/"),n==t&&$(i).addClass("active")})},E.lib.ShopDropDown.prototype.onLinkOver=function(t){var e=$(t.currentTarget).attr("data-link-for");this.container.find(".product-spotlights").find("li").each(function(t,i){$(i).attr("data-spotlight-for")!==e?$(i).addClass("hidden"):$(i).removeClass("hidden")})},E.lib.ShopDropDown.prototype.getDropdownOffset=function(t){var e=t.offset();return this.container.css("position","absolute"),{top:e.top+45,left:e.left-177}},E.lib.ShopDropDown.prototype.toString=function(){return"E.lib.ShopDropDown"},E.lib.Slider=function(t,e){this.container=t;var i={play:6e3,effect:"slide",fadeEasing:"easeInOutQuad",slideEasing:"easeInOutQuad",fadeSpeed:500,slideSpeed:500,hoverPause:!1,generatePagination:!1,generateNextPrev:!1},n=$.extend({},i,e||{});this.container.slides(n),this.container.find(".slides-arrow.prev").delay(750).animate({left:0},750),this.container.find(".slides-arrow.next").delay(1e3).animate({right:0},750),$(document.body).bind("keyup",$.proxy(this.onKeyup,this))},E.lib.Slider.prototype.onKeyup=function(t){$(".slides_control").length>1||(37===t.which?$(".slides-arrow.prev").trigger("click"):39===t.which&&$(".slides-arrow.next").trigger("click"))},E.lib.StatusMessage=function(){return this.container=$(".status-message"),this.hasError=!1,this},E.lib.StatusMessage.prototype.show=function(){statusMessage.data("has-error")?statusMessage.effect("highlight",750):statusMessage.fadeIn().effect("highlight",{},1500).data("has-error",!0)},E.lib.StatusMessage.prototype.show_=function(){this.container.fadeIn().effect("highlight",{},1500),this.hasError=!0},E.lib.StatusMessage.prototype.flash=function(){statusMessage.effect("highlight",750)},E.lib.StatusMessage.prototype.update=function(){statusMessage.effect("highlight",750)},E.lib.StickyHoverCart=function(t,e){E.lib.HoverCart.call(this,t,e),this.fixedNavigation=!1,this.countDisplay=this.trigger,this.stickyBar=$("#fixed-navigation");var i=this;E.sub(E.Event.TopBar.STICK,function(){i.fixedNavigation=!0}),E.sub(E.Event.TopBar.UNSTICK,function(){i.fixedNavigation=!1
}),this.container.css("position","fixed")},E.lib.Helpers.inherit(E.lib.StickyHoverCart,E.lib.HoverCart),E.lib.StickyHoverCart.prototype.show=function(){this.fixedNavigation&&(this.stickyBar.addClass("active"),E.lib.Helpers.base(this,"show"),this.container.css("position","fixed"))},E.lib.StickyHoverCart.prototype.hide=function(){this.fixedNavigation&&(this.stickyBar.removeClass("active"),E.lib.Helpers.base(this,"hide"))},E.lib.StickyHoverCart.prototype.logAdRollCheckout=function(){this.fixedNavigation&&$.adroll.checkout()},E.lib.StickyHoverCart.prototype.init=function(t,e){this.count=e.quantity,this.countDisplay.html("Shopping Bag ("+this.count+")")},E.lib.StickyHoverCart.prototype.setCount=function(t){this.count=t,this.countDisplay.html("Shopping Bag ("+t+")")},E.lib.StickyHoverCart.prototype.getDropdownOffset=function(t){var e=t.offset();return{top:43,left:e.left-(this.container.width()-95)}},E.lib.StickyHoverCart.prototype.toString=function(){return"E.lib.StickyHoverCart"},E.lib.StickyShopDropDown=function(t,e){E.lib.ShopDropDown.call(this,t,e,"#fixed-navigation"),this.fixedNavigation=!1,this.countDisplay=this.trigger,this.stickyBar=$("#fixed-navigation");var i=this;E.sub(E.Event.TopBar.STICK,function(){i.fixedNavigation=!0}),E.sub(E.Event.TopBar.UNSTICK,function(){i.fixedNavigation=!1}),this.container.css("position","fixed")},E.inherit(E.lib.StickyShopDropDown,E.lib.ShopDropDown),E.lib.StickyShopDropDown.prototype.show=function(){this.fixedNavigation&&(this.stickyBar.addClass("active"),E.base(this,"show"),this.container.css("position","fixed"))},E.lib.StickyShopDropDown.prototype.hide=function(){this.fixedNavigation&&(this.stickyBar.removeClass("active"),E.base(this,"hide"))},E.lib.StickyShopDropDown.prototype.getDropdownOffset=function(t){var e=t.offset();return{top:40,left:e.left-177}},E.lib.StickyShopDropDown.prototype.toString=function(){return"E.lib.StickyShopDropDown"},E.lib.Timeline=function(t,e){E.lib.Component.call(this,t),this.numFrames=e,this.dragging=!1;var i=this;$(document).mousemove(function(t){1==t.which&&i.dragging&&i.moveToMouseEvent(t)}),this.container.mousedown(function(t){$(document).disableSelection(),i.dragging=!0,i.moveToMouseEvent(t)}),$(document).mouseup(function(){$(document).enableSelection(),i.dragging=!1})},E.lib.Helpers.inherit(E.lib.Timeline,E.lib.Component),E.lib.Timeline.prototype.Event={DRAG:"drag"},E.lib.Timeline.prototype.moveToMouseEvent=function(t){var e=this.container.width(),i=this.container.offset(),n=t.pageX-i.left,o=Math.floor(100*(n/e)),o=this.capPercentage(o);this.pub(this.Event.DRAG,o),this.setHandlePosition(o)},E.lib.Timeline.prototype.move=function(t,e){e=this.capPercentage(e),this.setHandlePosition(e)},E.lib.Timeline.prototype.setHandlePosition=function(t){this.container.find("span").css("left",t+"%")},E.lib.Timeline.prototype.capPercentage=function(t){return 0>t?0:t>100?100:t},E.lib.Timeline.prototype.toString=function(){return"E.lib.Timeline"},E.lib.TweetWall=function(t,e){var i={count:6,fromExistingDom:!1,callback:this.show};this.container=t,this.config=$.extend({},i,e),this.config.callback=$.proxy(this.config.callback,this),this.container.addClass("tweet-wall")},E.lib.TweetWall.prototype.fetch=function(){this.container.EverlaneTwitter(this.config)},E.lib.TweetWall.prototype.show=function(){var t=this;this.tweets=this.container.find("li");for(var e=0;this.tweets.length>e;e++)(function(e){setTimeout(function(){t.showTweet(t.tweets.eq(e))},125*e)})(e)},E.lib.TweetWall.prototype.showTweet=function(t){t.removeClass("hide")},E.lib.VimeoVideo=function(t,e){t.data("component-object",this),E.lib.Component.call(this,t),this.options=e||{},this.overlay=t.find(".video-overlay"),this.close_link=t.find(".close-link"),this.video_ready=!1,this.wants_to_play=!1,this.track("initialized");var i=t.find(".content");i.css({top:t.outerHeight()/2-i.outerHeight()/2,left:t.outerWidth()/2-i.outerWidth()/2}),E.lib.VimeoVideo.apiLoaded?this.onAPILoaded():$.getScript("https://secure-a.vimeocdn.com/js/froogaloop2.min.js",$.proxy(this.onAPILoaded,this)),this.overlay.click($.proxy(this.play,this)),this.close_link.click($.proxy(this.close,this))},E.inherit(E.lib.VimeoVideo,E.lib.Component),E.lib.VimeoVideo.apiLoaded=!1,$.extend(E.lib.VimeoVideo.prototype,{Event:{FINISH:"finish"},bufferVideo:function(){if(!E.lib.Helpers.isMobile()){var t=this;this.player.api("volume",0),this.player.api("play"),this.player.addEvent("playProgress",function(e){!t.videoBuffered&&e.seconds>0&&(t.player.api("pause"),t.player.api("volume",1),t.videoBuffered=!0)})}},play:function(){var t=this;this.video_ready?(this.container.find(".video-poster").fadeOut(function(){t.container.addClass("expanded")}),t.overlay.fadeOut(300,"easeOutQuad",function(){E.lib.Helpers.isMobile()?(t.makePlayer(),t.player.api("play")):(t.player.api("play"),t.videoBuffered=!0),t.close_link.show()}),t.track("play")):this.wants_to_play=!0},pause:function(){this.player.api("pause"),this.track("pause")},close:function(){var t=this;this.close_link.hide(),this.pause(),this.container.removeClass("expanded"),setTimeout(function(){t.container.find(".video-poster").fadeIn()},500),this.overlay.fadeIn(300,"easeInQuad")},onAPILoaded:function(){E.lib.VimeoVideo.apiLoaded=!0,this.makePlayer(),this.player.addEvent("ready",$.proxy(this.onVideoReady,this))},makePlayer:function(){var t=this.container.find("iframe")[0];this.player=$f(t)},onVideoReady:function(){this.video_ready=!0,this.wants_to_play?(this.play(),this.wants_to_play=!1):this.bufferVideo(),this.player.addEvent("finish",$.proxy(this.onFinish,this))},onFinish:function(){this.pub(this.Event.FINISH),this.track("finished"),this.container.find(".close-link").css("opacity",0),this.container.removeClass("expanded"),this.overlay.fadeIn(300,"easeInQuad")},track:function(t){this.options.title&&$.track(this.options.title+": "+t)},toString:function(){return"E.lib.VimeoVideo"}}),$(document).on("ready page:change",function(){$('[data-component="VimeoVideo"]').each(function(t,e){new E.lib.VimeoVideo($(e))})}),E.pages.collection.Controller={init:function(t){for(param in t)t[param]&&t.hasOwnProperty(param)&&this[param]();$(".product-image-container").EverlaneCollectionImage()},initSlider:function(){new E.lib.Slider($("#slides-widget"))},initTeeVideoClickThrough:function(){$(".subhero-full-width").on("click",function(){window.location="/tee-factory"})}},function(){$(document).on("ready page:change",function(){var t,e,i,n;if(0!==$("#credit_card_form").length)return $(".ignorefield").removeProp("name"),$(".cc_number").on("change keyup",function(){var t;return(t=$.payment.cardType($(this).val()))?$("#cc_icons").css("opacity",1).removeClass().addClass(t):$("#cc_icons").css("opacity",0)}),$(".country").on("change",function(){return $(".zip-code-container").toggle("USA"===$(this).val()),$(".zip_code").prop("readonly","USA"!==$(this).val())}).change(),$("#credit_card_form").submit(function(){var t,e,i,n,o,r,s,a,l,c,h,d;if(s={},$(".error_explanation").hide().empty(),$(this).find(".field.error").removeClass("error"),t=function(t,e){var i;return i=$("label[for='"+t.attr("id")+"']"),s[t.attr("id")]={field:t.parent(),message:i.contents()[0].textContent.trim()+" "+e}},n=$(".cc_number"),e=$(".cc_cvv"),i=$(".cc_expiry"),d=$(".zip_code"),l=$(".full_name"),a=i.payment("cardExpiryVal"),h=NameParse.parse(l.val()),h.firstName||(h.firstName=h.initials),h.firstName||t(l,"is incomplete"),$.payment.validateCardNumber(n.val())||t(n,"is invalid"),$.payment.validateCardCVC(e.val(),$.payment.cardType(n.val()))||t(e,"is invalid"),$.payment.validateCardExpiry(a)||t(i,"is invalid"),$(this).find(".required").each(function(){return 0===$(this).val().length?t($(this),"is required"):void 0}),"USA"===$(this).find(".country").val()&&5!==d.val().length&&t(d,"is required for US credit cards"),!$.isEmptyObject(s)){r=$("<ul/>");for(c in s)o=s[c],r.append($("<li>"+o.message+"</li>")),o.field.addClass("error");return $(".error_explanation").append(r).show(),!1}return $(".first_name").val(h.firstName),$(".last_name").val(h.lastName),$(".cc_number_hidden").val(n.val().replace(/\s/g,"")),$(".cc_expiry_hidden").val(""+a.month+"/"+a.year),!0}),$(".cc_number").payment("formatCardNumber").change(),$(".cc_cvv").payment("formatCardCVC").change(),$(".cc_expiry").payment("formatCardExpiry").change(),$(".zip_code").payment("restrictNumeric"),t="",e=[],n="~CARD~",i=!1,$(window.parent||document).keypress(function(e){var o;return o=String.fromCharCode(e.which),i?t+=o:(t+=o,t=t.substr(-n.length),t===n?(i=!0,t=""):void 0)}),$(window.parent||document).keydown(function(n){return!i||9!==n.which&&13!==n.which?void 0:(e.push(t),t="",13===n.which&&(i=!1,$(".cc_number").val(e[0]).change(),$(".cc_expiry").val(e[2]+"/"+e[3]).change(),e=[]),n.preventDefault(),!1)})})}.call(this),E.pages.map.Controller={viewedFactories:[],currentFactory:null,historyChanged:!1,validPaths:["el-paso-usa","dongguan-china","elgin-scottland","los-angeles-usa","san-francisco-usa","hangzhou-china"],init:function(){var t=this,e=$.grep(window.location.pathname.split("/"),function(t){return!!t}),i=e.pop();if(-1!==this.validPaths.indexOf(i)){var n=$('section[data-factory="'+i+'"]');this.currentFactory=n,this.showFactory()}$(".tooltip").tipTip({delay:0}),$(".map-marker").each(function(t,e){setTimeout(function(){$(e).addClass("marker-animation")},Math.ceil(1e3*Math.random()))}),$(window).keydown(function(e){27==e.keyCode&&t.closeFactorySection()}),$("section").on("click",".close",$.proxy(this.closeFactorySection,this)),$(window).on("popstate",function(){return t.historyChanged&&t.closeFactorySection(),!1}),$(".map-display").on("click",".map-marker",$.proxy(this.onMakerClick,this))},onMakerClick:function(t){t.preventDefault();var e=$(t.currentTarget),i=e.data("factory");$("#map-mock").hide(),this.currentFactory=$('section[data-factory="'+i+'"]'),e.tipTip("hide"),$("#footer").css("margin-top",$("#footer").outerHeight()),this.showFactory(),this.changeHistory(e.attr("href"))},changeHistory:function(t){t?(history.pushState(null,"",t),this.historyChanged=!0):history.pushState(null,"Map","/map")},showFactory:function(){this.currentFactory.css("display","block").addClass("visible"),-1===$.inArray(this.currentFactory.data("factory"),this.viewedFactories)?this.buildFactory():this.currentFactory.css("opacity",1)},buildFactory:function(){var t=this,e=this.currentFactory,i=e.find(".content-container"),n=e.find(".factory-header").find(".title"),o=n.html().replace(/^\s+|\s+$/g,"").split("");o=jQuery.map(o,function(t){return t?'<em style="font-style: normal; opacity: 0;">'+t+"</em>":void 0}),e.find(".factory-header").find(".title").css("opacity",1).html(o.join("")).find("em").each(function(t,e){$(e).delay(50*t).animate({opacity:1},900,"easeOutQuart")}),e.find(".hero").delay(50*o.length).animate({opacity:1},1200,"easeOutQuart",function(){var n=i.find("p").first().offset().top+30,o=$(window).height();n>o&&i.delay(300).animate({top:-(n-o)},1200,"easeOutQuart"),i.find(".holder").delay(300).animate({opacity:1},1200,"easeOutQuart",function(){t.viewedFactories.push(e.data("factory"))})})},closeFactorySection:function(){this.currentFactory.animate({opacity:0},600,"easeOutQuad").css("display","none"),$("#map-mock").show(),this.changeHistory(),this.currentFactory=null}},E.pages.product.BuckleShim=function(){this.elements={buckleOptions:$(".buckle-option"),cart:$("#cart_form")},$(".product-options").delegate(".buckle-option","click",$.proxy(this.onBuckleClick,this)),this.photoOrder=["none","silver","antique brass","black"],this.elements.cart.append($("<input />",{type:"hidden",id:"buckle-data",name:"buckle_data",value:null}))},E.pages.product.BuckleShim.prototype.onBuckleClick=function(t){var e=$("#prices-container"),i=e.find(".prices-window"),n=$(t.currentTarget),o=e.hasClass("has-equation")?-115:-44,r=n.data("variant-id");if(n.hasClass("sold-out"))return!1;i.animate({top:null==r?o:-8},300,function(){null==r&&i.effect("highlight",{},1e3)}),n.addClass("active"),this.elements.buckleOptions.not(n).removeClass("active"),this.appendBucklePostData(n.data());var s=$(".product-thumbs").find("img");s.eq(null==r?0:this.elements.buckleOptions.index(n)+1).trigger("click")},E.pages.product.BuckleShim.prototype.appendBucklePostData=function(t){$("#buckle-data").attr("value",t.variantId).data(t)},E.pages.product.Controller={init:function(t){this.productSelector=new E.pages.product.ProductSelector($(".color-selector")),this.sizeSelector=new E.pages.product.SizeSelector($(".size-selector")),this.imageSelector=new E.pages.product.ImageSelector($(".product-thumbs")),this.form=new E.pages.product.Form($("#cart_form")),this.image=new E.pages.product.Image($(".product-photo")),this.image.setChildComponent("productSelector",this.productSelector),this.form.setChildComponent("sizeSelector",this.sizeSelector),this.form.setChildComponent("productSelector",this.productSelector),this.productSelector.sub(this.productSelector.Event.UPDATE,$.proxy(this.imageSelector.updateProduct,this.imageSelector),$.proxy(this.sizeSelector.update,this.sizeSelector),$.proxy(this.form.updateSubmitButton,this.form)),this.sizeSelector.sub(this.sizeSelector.Event.UPDATE,$.proxy(this.form.updateSubmitButton,this.form)),this.imageSelector.sub(this.imageSelector.Event.UPDATE,$.proxy(this.image.update,this.image)),$.each(PageConfig.gallery_hash.products,function(t,e){$.each(e.variants,function(t,e){"sold_out"==e.orderable_state&&-1!=$.inArray(e.id,PageConfig.waitlisted_variants)&&(e.orderable_state="waitlisted")})});for(param in t)t[param]&&t.hasOwnProperty(param)&&this[param]();this.form.updateSubmitButton(),$(window).load(this.preloadImages);var e=$.getURLParameter("size");e&&$('.tooltip[data-size-name="'+e+'"]').click()},initBuckleSelector:function(){new E.pages.product.BuckleShim},initTweets:function(){$(".product-tweets").EverlaneTwitter({handle:PageConfig.twitter_handle,callback:function(){E.page.fader=function(t){var e=$(".product-tweet"),i=e.length,n=e.eq(t),o=700;t==i-1&&(t=-1),E.page.hasNewTweetTransition?(n.removeClass("hide"),setTimeout(function(){n.addClass("hide"),E.page.fader(t+1)},8e3)):n.fadeIn(o,function(){n.delay(5e3).fadeOut(o,function(){E.page.fader(t+1)})})},E.page.fader(0)}})},initVideo:function(){if(document.createElement("video").canPlayType){var t=PageConfig.gallery_hash.products[0].images,e=t.length;$.each(PageConfig.gallery_hash.products,function(t){PageConfig.gallery_hash.products[t].images[e]={isVideo:!0}})}},preloadImages:function(){var t=[];$.each(PageConfig.gallery_hash.products,function(e,i){$.each(i.images,function(e,i){t.push(i.url,i.thumb,i.original_size)})}),E.lib.ImageLoader.loadImages(t)}},E.pages.product.Form=function(t){E.lib.Component.call(this,t),this.button=this.container.find(".add-to-cart"),this.quantityField=this.container.find("#quantity"),this.errorField=this.container.find("#cart_error"),this.preorderInfo=this.container.find("#preorder-info"),this.container.on("submit",function(t){t.preventDefault()}),this.container.on("click",".add-to-cart",$.proxy(this.onSubmit,this))},E.lib.Helpers.inherit(E.pages.product.Form,E.lib.ButtonSet),E.pages.product.Form.prototype.Types={sold_out:{value:"Sold Out",disabled:!0},waitlistable:{value:"Notify Me",disabled:!1},shippable:{value:"Add to Bag",disabled:!1},preorderable:{value:"Pre-order",disabled:!1},waitlisted:{value:"Waitlisted",disabled:!0}},E.pages.product.Form.prototype.onSubmit=function(t){return t.preventDefault(),this.rollbackErrors(),this.validate()&&this.populate(),!1},E.pages.product.Form.prototype.populate=function(){var t=PageConfig.gallery_hash.products[this.productSelector.getIndex()],e=t.variants[this.sizeSelector.getIndex()],i="sold_out"==e.orderable_state;this.container.find("#product-id").val(t.id),this.container.find("#variant-id").val(e.id),this.container.find("#sold_out").val(i),this.fakeLineItemAdd(t,e)},E.pages.product.Form.prototype.validate=function(){var t=$("#buckle-data");if(0>this.sizeSelector.getIndex())this.showError("Please select a size",this.sizeSelector.container);else if(0>=this.quantityField.val())this.showError("Please select a quantity.",$(".quantity-selector"));else{if(!(t.length>0&&""==t.val()))return!0;this.showError("Please select a buckle option.",$("#buckle-selector"))}return!1},E.pages.product.Form.prototype.showError=function(t,e){this.errorField.text(t),e&&e.effect("shake",{distance:5,times:3},200).find("label").addClass("error")},E.pages.product.Form.prototype.rollbackErrors=function(){this.errorField.text(""),this.container.find("label").removeClass("error")},E.pages.product.Form.prototype.showPreorderDate=function(t){$("#cart_error").hide(),this.preorderInfo.text("Ships on "+t).show().animate({top:10},300,"easeOutBack")},E.pages.product.Form.prototype.hidePreorderDate=function(){this.preorderInfo.animate({top:-25},300,"easeInBack")},E.pages.product.Form.prototype.updateSubmitButton=function(){var t,e=PageConfig.gallery_hash.products[this.productSelector.getIndex()],i=e.variants[this.sizeSelector.getIndex()];t=0>this.sizeSelector.getIndex()?e.orderable_state:e.waitlistable&&"sold_out"===i.orderable_state?E.isLoggedIn?"waitlistable":"sold_out":i.orderable_state,this.sizeSelector.getIndex()>=0&&"preorderable"===t?this.showPreorderDate(i.restock_date):this.hidePreorderDate(),this.button.val(this.Types[t].value).attr(this.Types[t]).removeClass(E.object.keys(this.Types).join(" ")).addClass(t)},E.pages.product.Form.prototype.fakeLineItemAdd=function(t,e){var i=[],n=t.display_name,o=t.base_price,r=parseInt(this.quantityField.val()),s=$(".product-thumbs").find("img").first(),a=e.orderable_state,l=E.collection.LineItems.findWhere({sku:e.sku});if(l)l.set("quantity",l.get("quantity")+r);else{var c=new E.model.LineItem({id:e.sku,sku:e.sku,size:e.size,title:n,price:o,quantity:r,imageURL:s.attr("src"),restockDate:e.restock_date,orderableState:a,variantId:e.id,productId:parseInt(this.container.find("#product-id").val()),collectionId:parseInt(this.container.find("#collection-id").val())});i.push(c)}var h=this.container.find("#buckle-data");if(h.length>0&&0!==parseInt(h.val())){var d=E.collection.LineItems.findWhere({sku:h.data().sku});d?d.set("quantity",d.get("quantity")+r):i.push(new E.model.LineItem(h.data()))}E.collection.LineItems.add(i),"sold_out"!==a&&setTimeout(function(){E.pub(E.Event.Cart.BLINK)},500)},E.pages.product.Image=function(t){t.find("img").data("index",0).data("product-index",PageConfig.product_index),E.lib.Component.call(this,t)},E.lib.Helpers.inherit(E.pages.product.Image,E.lib.Component),E.pages.product.Image.prototype.update=function(t,e){var i=this.productSelector.getIndex(),n=PageConfig.gallery_hash.products[i].images[e],o=null;if(0!==$("#main-video").length&&(o=$("#main-video")[0]),n.isVideo)$("#main-video").show(),o.play();else{o&&(o.pause(),$("#main-video").hide(),o.currentTime&&(o.currentTime=0));var r=PageConfig.gallery_hash.products[i].images[e].url;this.container.find("img").data("index",e).data("product-index",i).attr("src",r)}},E.pages.product.ImageSelector=function(t){E.lib.ButtonSet.call(this,t)},E.lib.Helpers.inherit(E.pages.product.ImageSelector,E.lib.ButtonSet),E.pages.product.ImageSelector.prototype.updateProduct=function(t,e){var i=PageConfig.gallery_hash.products[e].images;$("#primary-image").attr("src",i[0].url).data("product-index",e).data("index",0),this.container.find("li img").each(function(t,e){$(e).attr("src",i[t].thumb)}),this.clear()},E.pages.product.ProductSelector=function(t){E.lib.ButtonSet.call(this,t),this.sub(this.Event.UPDATE,$.proxy(this.update,this))},E.lib.Helpers.inherit(E.pages.product.ProductSelector,E.lib.ButtonSet),E.pages.product.ProductSelector.prototype.update=function(t,e){var i=PageConfig.gallery_hash.products[e];if(this.container.find("label").find("span").text(i.color),$.isFunction(window.history.replaceState)){var n=window.location.pathname;n=n.replace(/\/[^\/]*$/,"/"+i.permalink);var o=i.display_name+" - Everlane";document.title=o,window.history.replaceState({},o,n)}},E.pages.product.SizeSelector=function(t){E.lib.ButtonSet.call(this,t)},E.lib.Helpers.inherit(E.pages.product.SizeSelector,E.lib.ButtonSet),E.pages.product.SizeSelector.prototype.update=function(t,e){var i=this,n=PageConfig.gallery_hash.products[e],o=0;$.each(n.variants,function(t,e){var n="sold_out"===e.orderable_state||"waitlisted"===e.orderable_state;i.container.find("li").eq(o).toggleClass("sold-out",n),o++})},$(document).on("ready page:change",function(){function t(){var t=0==e.val().length||0==i.val().length;t?o.attr("disabled","disabled"):o.removeAttr("disabled"),o.toggleClass("disabled",t)}if(0!=$(".return_authorizations.new").length){var e=$("#return_authorization_reason_category"),i=$("#return_authorization_reason"),n=$('form.return_authorization input[type="checkbox"]'),o=$("#submit");n.change(function(){var t=$(this),e=t.is(":checked")?1:0,i=t.parent(".return_row").find("select"),n=t.parent(".return_row").find(".chzn-container");i.val(e),i.trigger("liszt:updated"),e?n.show():n.hide()}),e.change(t),i.change(t),i.keyup(t),t()}}),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function o(){var t=i(this);t.val()===t.attr("placeholder")&&t.hasClass("placeholder")&&(t.data("placeholder-password")?t.hide().next().show().focus().attr("id",t.removeAttr("id").data("placeholder-id")):t.val("").removeClass("placeholder"))}function r(){var t,e=i(this),r=this.id;if(""===e.val()){if(e.is(":password")){if(!e.data("placeholder-textinput")){try{t=e.clone().attr({type:"text"})}catch(s){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data("placeholder-password",!0).data("placeholder-id",r).bind("focus.placeholder",o),e.data("placeholder-textinput",t).data("placeholder-id",r).before(t)}e=e.removeAttr("id").hide().prev().attr("id",r).show()}e.addClass("placeholder").val(e.attr("placeholder"))}else e.removeClass("placeholder")}var s="placeholder"in e.createElement("input"),a="placeholder"in e.createElement("textarea");s&&a?(i.fn.placeholder=function(){return this},i.fn.placeholder.input=i.fn.placeholder.textarea=!0):(i.fn.placeholder=function(){return this.filter((s?"textarea":":input")+"[placeholder]").bind("focus.placeholder",o).bind("blur.placeholder",r).trigger("blur.placeholder").end()},i.fn.placeholder.input=s,i.fn.placeholder.textarea=a,i(function(){i("form").bind("submit.placeholder",function(){var t=i(".placeholder",this).each(o);setTimeout(function(){t.each(r)},10)})}),i(t).bind("unload.placeholder",function(){i(".placeholder").val("")}))}(this,document,jQuery),function(){$(document).on("click",".minus",function(){var t,e,i;return e=$("#"+$(this).attr("data-reference")),i=parseInt(e.val())-1,t=$(this).attr("data-min"),null==t&&(t=1),t=parseInt(t),e.val(Math.max(t,i)),t>=i?$(this).addClass("disabled"):$(".plus").removeClass("disabled")}),$(document).on("click",".plus",function(){var t,e,i;return e=$("#"+$(this).attr("data-reference")),i=parseInt(e.val())+1||1,t=$(this).attr("data-max"),null==t&&(t=5),t=parseInt(t),e.val(Math.min(t,i)),i>=t?$(this).addClass("disabled"):$(".minus").removeClass("disabled")}),$(document).on("ready page:change",function(){return $("#primary-image").hoverZoom({zoomParent:$("#product-sidebar"),"in":function(){var t,e,i,n;return $(".product-tweets").animate({opacity:0},200),t=$(".button-container"),i=$("#hover-image"),n=i.offset().top+i.height()+10,e=n-t.offset().top+10,e>0?t.animate({marginTop:e},500,"easeOutBack"):$("#buckle-selector").animate({opacity:0},200)},out:function(){return $("#buckle-selector").animate({opacity:1},200),$(".button-container").animate({marginTop:0},600,"easeInOutBack",function(){return $(".product-tweets").animate({opacity:1})})}})})}.call(this),E.page.ShippingAddressDialogManager=function(t,e){this.chooseAddressDialog=t,this.newAddressDialog=e,this.newAddressDialog.delegate(".cancel","click",$.proxy(this.onHideNewAddress,this)),this.chooseAddressDialog.delegate(".use-address","click",$.proxy(this.onChangeAddress,this)),this.chooseAddressDialog.delegate(".add-new-address","click",$.proxy(this.onClickAddAddress,this)),this.newAddressDialog.bind("reveal:close",$.proxy(this.ensureClose,this)),this.chooseAddressDialog.bind("reveal:close",$.proxy(this.ensureClose,this))},E.page.ShippingAddressDialogManager.prototype.onHideNewAddress=function(t){t.preventDefault(),this.newAddressDialog.css("visibility","hidden"),this.chooseAddressDialog.css("visibility","visible")},E.page.ShippingAddressDialogManager.prototype.onChangeAddress=function(t){var e=$(t.currentTarget);e.parents("label").find("input[type=radio]").attr("checked",!0),this.chooseAddressDialog.find("form").submit()},E.page.ShippingAddressDialogManager.prototype.onClickAddAddress=function(t){t.preventDefault(),this.newAddressDialog.css("visibility","visible"),this.chooseAddressDialog.css("visibility","hidden")},E.page.ShippingAddressDialogManager.prototype.ensureClose=function(t){t.preventDefault(),$(".reveal-modal-bg").hide(),this.newAddressDialog.css("visibility","hidden"),this.chooseAddressDialog.css("visibility","hidden")},"undefined"==typeof nextThing&&(nextThing=!1),function(t){t.fn.slides=function(i){return i=t.extend({},t.fn.slides.option,i),this.each(function(){function n(o,r,l){if(a&&s)return nextThing=[o,r,l],!1;if(!a&&s){switch(a=!0,i.animationStart(S+1),o){case"next":x=S,k=S+1,k=v===k?0:k,h=2*y,o=2*-y,S=k;break;case"prev":x=S,k=S-1,k=-1===k?v-1:k,h=0,o=0,S=k;break;case"pagination":k=parseInt(l,10),x=t("."+i.paginationClass+" li."+i.currentClass+" a",m).attr("href").match("[^#/]+$"),k>x?(h=2*y,o=2*-y):x>k&&(h=0,o=0),S=k}"fade"===r?i.crossfade?g.children(":eq("+k+")",m).css({zIndex:10}).fadeIn(i.fadeSpeed,i.fadeEasing,function(){i.autoHeight?g.animate({height:g.children(":eq("+k+")",m).outerHeight()},i.autoHeightSpeed,function(){g.children(":eq("+x+")",m).css({display:"none",zIndex:0}),g.children(":eq("+k+")",m).css({zIndex:0}),i.animationComplete(k+1),a=!1}):(g.children(":eq("+x+")",m).css({display:"none",zIndex:0}),g.children(":eq("+k+")",m).css({zIndex:0}),i.animationComplete(k+1),a=!1,nextThing&&(d=nextThing[0],e=nextThing[1],c=nextThing[2],nextThing=!1,n(d,e,c)))}):g.children(":eq("+x+")",m).fadeOut(i.fadeSpeed,i.fadeEasing,function(){i.autoHeight&&g.animate({height:g.children(":eq("+k+")",m).outerHeight()},i.autoHeightSpeed,function(){g.children(":eq("+k+")",m).fadeIn(i.fadeSpeed,i.fadeEasing)}),i.animationComplete(k+1),a=!1}):(g.children(":eq("+k+")").css({left:h,display:"block"}),i.autoHeight?g.animate({left:o,height:g.children(":eq("+k+")").outerHeight()},i.slideSpeed,i.slideEasing,function(){g.css({left:-y}),g.children(":eq("+k+")").css({left:y,zIndex:5}),g.children(":eq("+x+")").css({left:y,display:"none",zIndex:0}),i.animationComplete(k+1),a=!1}):g.animate({left:o},i.slideSpeed,i.slideEasing,function(){g.css({left:-y}),g.children(":eq("+k+")").css({left:y,zIndex:5}),g.children(":eq("+x+")").css({left:y,display:"none",zIndex:0}),i.animationComplete(k+1),a=!1,nextThing&&(d=nextThing[0],e=nextThing[1],c=nextThing[2],nextThing=!1,n(d,e,c))})),i.pagination&&(t("."+i.paginationClass+" li."+i.currentClass,m).removeClass(i.currentClass),t("."+i.paginationClass+" li:eq("+k+")",m).addClass(i.currentClass))}}function o(){clearInterval(m.data("interval"))}function r(){i.pause?(clearTimeout(m.data("pause")),clearInterval(m.data("interval")),p=setTimeout(function(){clearTimeout(m.data("pause")),f=setInterval(function(){n("next",w)},i.play),m.data("interval",f)},i.pause),m.data("pause",p)):o()}t("."+i.container,t(this)).children().wrapAll('<div class="slides_control"/>');var s,a,l,h,u,p,f,m=t(this),g=t(".slides_control",m),v=g.children().size(),y=g.children().outerWidth(),_=g.children().outerHeight(),b=i.start-1,w=0>i.effect.indexOf(",")?i.effect:i.effect.replace(" ","").split(",")[0],E=0>i.effect.indexOf(",")?w:i.effect.replace(" ","").split(",")[1],k=0,x=0,C=0,S=0;if(2>v)return t("."+i.container,t(this)).fadeIn(i.fadeSpeed,i.fadeEasing,function(){s=!0,i.slidesLoaded()}),t("."+i.next+", ."+i.prev).fadeOut(0),!1;if(!(2>v)){if(0>b&&(b=0),b>v&&(b=v-1),i.start&&(S=b),i.randomize&&g.randomize(),t("."+i.container,m).css({overflow:"hidden",position:"relative"}),g.children().css({position:"absolute",top:0,left:"fade"==i.effect?"":g.children().outerWidth(),zIndex:0,display:"none"}),g.css({height:_,position:"relative"}),"fade"!=i.effect&&g.css({width:3*y,left:-y}),t("."+i.container,m).css({display:"block"}),i.autoHeight&&(g.children().css({height:"auto"}),g.animate({height:g.children(":eq("+b+")").outerHeight()},i.autoHeightSpeed)),i.preload&&g.find("img:eq("+b+")").length){t("."+i.container,m).css({background:"url("+i.preloadImage+") no-repeat 50% 50%"});var T=g.find("img:eq("+b+")").attr("src")+"?"+(new Date).getTime();u="slides_control"!=t("img",m).parent().attr("class")?g.children(":eq(0)")[0].tagName.toLowerCase():g.find("img:eq("+b+")"),g.find("img:eq("+b+")").attr("src",T).load(function(){g.find(u+":eq("+b+")").fadeIn(i.fadeSpeed,i.fadeEasing,function(){t(this).css({zIndex:5}),t("."+i.container,m).css({background:""}),s=!0,i.slidesLoaded()})})}else g.children(":eq("+b+")").fadeIn(i.fadeSpeed,i.fadeEasing,function(){s=!0,i.slidesLoaded(),i.animationComplete(k+1)});i.bigTarget&&(g.children().css({cursor:"pointer"}),g.children().click(function(){return n("next",w),!1})),i.hoverPause&&i.play&&(g.bind("mouseover",function(){o()}),g.bind("mouseleave",function(){r()})),i.generateNextPrev&&(t("."+i.container,m).after('<a href="javascript:;" class="'+i.prev+'">Prev</a>'),t("."+i.prev,m).after('<a href="javascript:;" class="'+i.next+'">Next</a>')),t("."+i.next,m).click(function(t){t.preventDefault(),i.play&&r(),n("next",w)}),t("."+i.prev,m).click(function(t){t.preventDefault(),i.play&&r(),n("prev",w)}),i.generatePagination?(i.prependPagination?m.prepend("<ul class="+i.paginationClass+"></ul>"):m.append("<ul class="+i.paginationClass+"></ul>"),g.children().each(function(){t("."+i.paginationClass,m).append('<li><a href="#'+C+'">'+(C+1)+"</a></li>"),C++})):t("."+i.paginationClass+" li a",m).not(".pagination-ignore").each(function(){C++}),t("."+i.paginationClass+" li:eq("+b+")",m).addClass(i.currentClass);var $=function(){return i.play&&r(),l=t(this).attr("href").match("[^#/]+$"),S!=l&&n("pagination",E,l),!1};t("."+i.paginationClass+" li a",m).not(".pagination-ignore").click($),i.hoverPagination&&t("."+i.paginationClass+" li a",m).not(".pagination-ignore").mousemove($),t("a.link",m).click(function(){return i.play&&r(),l=t(this).attr("href").match("[^#/]+$")-1,S!=l&&n("pagination",E,l),!1}),i.play&&(f=setInterval(function(){n("next",w)},i.play),m.data("interval",f))}})},t.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",hoverPagination:!1,currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},t.fn.randomize=function(e){function n(){return Math.round(Math.random())-.5}return t(this).each(function(){var o=t(this),r=o.children(),s=r.length;if(s>1){r.hide();var a=[];for(i=0;s>i;i++)a[a.length]=i;a=a.sort(n),t.each(a,function(t,i){var n=r.eq(i),s=n.clone(!0);s.show().appendTo(o),void 0!==e&&e(n,s),n.remove()})}})}}(jQuery),function(){function t(e,i,n){var o=t.resolve(e);if(null==o){n=n||e,i=i||"root";var r=new Error('Failed to require "'+n+'" from "'+i+'"');throw r.path=n,r.parent=i,r.require=!0,r}var s=t.modules[o];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,t.relative(o),s)),s.exports}var e=Object.prototype.hasOwnProperty;t.modules={},t.aliases={},t.resolve=function(i){"/"===i.charAt(0)&&(i=i.slice(1));for(var n=i+"/index.js",o=[i,i+".js",i+".json",i+"/index.js",i+"/index.json"],r=0;o.length>r;r++){var i=o[r];if(e.call(t.modules,i))return i}return e.call(t.aliases,n)?t.aliases[n]:void 0},t.normalize=function(t,e){var i=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var n=0;e.length>n;++n)".."==e[n]?t.pop():"."!=e[n]&&""!=e[n]&&i.push(e[n]);return t.concat(i).join("/")},t.register=function(e,i){t.modules[e]=i},t.alias=function(i,n){if(!e.call(t.modules,i))throw new Error('Failed to alias "'+i+'", it does not exist');t.aliases[n]=i},t.relative=function(i){function n(t,e){for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function o(e){var n=o.resolve(e);return t(n,i,e)}var r=t.normalize(i,"..");return o.resolve=function(e){var o=e.charAt(0);if("/"==o)return e.slice(1);if("."==o)return t.normalize(r,e);
var s=i.split("/"),a=n(s,"deps")+1;return a||(a=0),e=s.slice(0,a+1).join("/")+"/deps/"+e},o.exists=function(i){return e.call(t.modules,o.resolve(i))},o},t.register("component-emitter/index.js",function(t,e,i){function n(t){return t?o(t):void 0}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}i.exports=n,n.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},e._off=i,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=function(t,e){this._callbacks=this._callbacks||{};var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;var n=i.indexOf(e._off||e);return~n&&i.splice(n,1),this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,o=i.length;o>n;++n)i[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("dropzone/index.js",function(t,e,i){i.exports=e("./lib/dropzone.js")}),t.register("dropzone/lib/dropzone.js",function(t,e,i){/*
#
# More info at [www.dropzonejs.com](http://www.dropzonejs.com)
#
# Copyright (c) 2012, Matias Meno
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.
#
*/
(function(){var t,n,o,r,s,a,l={}.hasOwnProperty,c=function(t,e){function i(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h=[].slice,d=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};n="undefined"!=typeof Emitter&&null!==Emitter?Emitter:e("emitter"),s=function(){},t=function(t){function e(t,i){var n,o,r,s;if(this.element=t,this.version=e.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(e.instances.push(this),t.dropzone=this,n=null!=(s=e.optionsForElement(this.element))?s:{},o=function(){var t,e,i,n,o,r,s;for(n=arguments[0],i=arguments.length>=2?h.call(arguments,1):[],r=0,s=i.length;s>r;r++){e=i[r];for(t in e)o=e[t],n[t]=o}return n},this.options=o({},this.defaultOptions,n,null!=i?i:{}),null==this.options.url&&(this.options.url=this.element.action),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptParameter&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptParameter' and 'acceptedMimeTypes'. 'acceptParameter' is deprecated.");if(this.options.method=this.options.method.toUpperCase(),this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);if((r=this.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),this.options.previewsContainer){if("string"==typeof this.options.previewsContainer?this.previewsContainer=document.querySelector(this.options.previewsContainer):null!=this.options.previewsContainer.nodeType&&(this.previewsContainer=this.options.previewsContainer),null==this.previewsContainer)throw new Error("Invalid `previewsContainer` option provided. Please provide a CSS selector or a plain HTML element.")}else this.previewsContainer=this.element;if(this.options.clickable&&(this.options.clickable===!0?this.clickableElement=this.element:"string"==typeof this.options.clickable?this.clickableElement=document.querySelector(this.options.clickable):null!=this.options.clickable.nodeType&&(this.clickableElement=this.options.clickable),!this.clickableElement))throw new Error("Invalid `clickable` element provided. Please set it to `true`, a plain HTML element or a valid CSS selector.");this.init()}return c(e,t),e.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","removedfile","thumbnail","error","processingfile","uploadprogress","sending","success","complete","reset"],e.prototype.defaultOptions={url:null,method:"post",parallelUploads:2,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,params:{},clickable:!0,acceptedMimeTypes:null,acceptParameter:null,enqueueForUpload:!0,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",accept:function(t,e){return e()},init:function(){return s},forceFallback:!1,fallback:function(){var t,i,n,o,r,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),o=0,r=s.length;r>o;o++)t=s[o],/(^| )message($| )/.test(t.className)&&(i=t,t.className="dz-message");return i||(i=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(i)),n=i.getElementsByTagName("span")[0],n&&(n.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},selectedfiles:function(){return this.element===this.previewsContainer?this.element.classList.add("dz-started"):void 0},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){return t.previewElement=e.createElement(this.options.previewTemplate),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),t.previewElement.querySelector("[data-dz-name]").textContent=t.name,t.previewElement.querySelector("[data-dz-size]").innerHTML=this.filesize(t.size)},removedfile:function(t){return t.previewElement.parentNode.removeChild(t.previewElement)},thumbnail:function(t,e){var i;return t.previewElement.classList.remove("dz-file-preview"),t.previewElement.classList.add("dz-image-preview"),i=t.previewElement.querySelector("[data-dz-thumbnail]"),i.alt=t.name,i.src=e},error:function(t,e){return t.previewElement.classList.add("dz-error"),t.previewElement.querySelector("[data-dz-errormessage]").textContent=e},processingfile:function(t){return t.previewElement.classList.add("dz-processing")},uploadprogress:function(t,e){return t.previewElement.querySelector("[data-dz-uploadprogress]").style.width=""+e+"%"},sending:s,success:function(t){return t.previewElement.classList.add("dz-success")},complete:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span></span></div>\n  <div class="dz-error-mark"><span></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},e.prototype.init=function(){var t,i,n,o,r,s,a,l=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector("[data-dz-message]")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message" data-dz-message><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElement&&(n=function(){return l.hiddenFileInput&&document.body.removeChild(l.hiddenFileInput),l.hiddenFileInput=document.createElement("input"),l.hiddenFileInput.setAttribute("type","file"),l.hiddenFileInput.setAttribute("multiple","multiple"),null!=l.options.acceptedMimeTypes&&l.hiddenFileInput.setAttribute("accept",l.options.acceptedMimeTypes),null!=l.options.acceptParameter&&l.hiddenFileInput.setAttribute("accept",l.options.acceptParameter),l.hiddenFileInput.style.visibility="hidden",l.hiddenFileInput.style.position="absolute",l.hiddenFileInput.style.top="0",l.hiddenFileInput.style.left="0",l.hiddenFileInput.style.height="0",l.hiddenFileInput.style.width="0",document.body.appendChild(l.hiddenFileInput),l.hiddenFileInput.addEventListener("change",function(){var t;return t=l.hiddenFileInput.files,t.length&&(l.emit("selectedfiles",t),l.handleFiles(t)),n()})},n()),this.files=[],this.filesQueue=[],this.filesProcessing=[],this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,o=0,r=a.length;r>o;o++)t=a[o],this.on(t,this.options[t]);return i=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return l.emit("dragstart",t)},dragenter:function(t){return i(t),l.emit("dragenter",t)},dragover:function(t){return i(t),l.emit("dragover",t)},dragleave:function(t){return l.emit("dragleave",t)},drop:function(t){return i(t),l.drop(t),l.emit("drop",t)},dragend:function(t){return l.emit("dragend",t)}}}],this.clickableElement&&this.listeners.push({element:this.clickableElement,events:{click:function(t){return l.clickableElement!==l.element||t.target===l.element||e.elementInside(t.target,l.element.querySelector(".dz-message"))?l.hiddenFileInput.click():void 0}}}),this.enable(),this.options.init.call(this)},e.prototype.getFallbackForm=function(){var t,i,n,o;return(t=this.getExistingFallback())?t:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this.options.paramName+'" multiple="multiple" /><button type="submit">Upload!</button></div>',i=e.createElement(n),"FORM"!==this.element.tagName?(o=e.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),o.appendChild(i)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=o?o:i)},e.prototype.getExistingFallback=function(){var t,e,i,n,o,r;for(e=function(t){var e,i,n;for(i=0,n=t.length;n>i;i++)if(e=t[i],/(^| )fallback($| )/.test(e.className))return e},r=["div","form"],n=0,o=r.length;o>n;n++)if(i=r[n],t=e(this.element.getElementsByTagName(i)))return t},e.prototype.setupEventListeners=function(){var t,e,i,n,o,r,s;for(r=this.listeners,s=[],n=0,o=r.length;o>n;n++)t=r[n],s.push(function(){var n,o;n=t.events,o=[];for(e in n)i=n[e],o.push(t.element.addEventListener(e,i,!1));return o}());return s},e.prototype.removeEventListeners=function(){var t,e,i,n,o,r,s;for(r=this.listeners,s=[],n=0,o=r.length;o>n;n++)t=r[n],s.push(function(){var n,o;n=t.events,o=[];for(e in n)i=n[e],o.push(t.element.removeEventListener(e,i,!1));return o}());return s},e.prototype.disable=function(){return this.clickableElement===this.element&&this.element.classList.remove("dz-clickable"),this.removeEventListeners(),this.filesProcessing=[],this.filesQueue=[]},e.prototype.enable=function(){return this.clickableElement===this.element&&this.element.classList.add("dz-clickable"),this.setupEventListeners()},e.prototype.filesize=function(t){var e;return t>=1e11?(t/=1e11,e="TB"):t>=1e8?(t/=1e8,e="GB"):t>=1e5?(t/=1e5,e="MB"):t>=100?(t/=100,e="KB"):(t=10*t,e="b"),"<strong>"+Math.round(t)/10+"</strong> "+e},e.prototype.drop=function(t){var e;if(t.dataTransfer)return e=t.dataTransfer.files,this.emit("selectedfiles",e),e.length?this.handleFiles(e):void 0},e.prototype.handleFiles=function(t){var e,i,n,o;for(o=[],i=0,n=t.length;n>i;i++)e=t[i],o.push(this.addFile(e));return o},e.prototype.accept=function(t,i){return t.size>1024*1024*this.options.maxFilesize?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):e.isValidMimeType(t.type,this.options.acceptedMimeTypes)?this.options.accept.call(this,t,i):i(this.options.dictInvalidFileType)},e.prototype.addFile=function(t){var e=this;return this.files.push(t),this.emit("addedfile",t),this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*1024*this.options.maxThumbnailFilesize&&this.createThumbnail(t),this.accept(t,function(i){return i?e.errorProcessing(t,i):e.options.enqueueForUpload?(e.filesQueue.push(t),e.processQueue()):void 0})},e.prototype.removeFile=function(t){if(t.processing)throw new Error("Can't remove file currently processing");return this.files=a(this.files,t),this.filesQueue=a(this.filesQueue,t),this.emit("removedfile",t),0===this.files.length?this.emit("reset"):void 0},e.prototype.removeAllFiles=function(){var t,e,i,n;for(n=this.files.slice(),e=0,i=n.length;i>e;e++)t=n[e],0>d.call(this.filesProcessing,t)&&this.removeFile(t);return null},e.prototype.createThumbnail=function(t){var e,i=this;return e=new FileReader,e.onload=function(){var n;return n=new Image,n.onload=function(){var e,o,r,s,a,l,c,h,d,u,p,f,m;return e=document.createElement("canvas"),o=e.getContext("2d"),l=0,c=0,a=n.width,r=n.height,e.width=n.width,e.height=n.height,f=0,m=0,p=e.width,d=e.height,s=n.width/n.height,u=e.width/e.height,n.height<e.height||n.width<e.width?(d=r,p=a):s>u?(r=n.height,a=r*u):(a=n.width,r=a/u),l=(n.width-a)/2,c=(n.height-r)/2,m=(e.height-d)/2,f=(e.width-p)/2,o.drawImage(n,l,c,a,r,f,m,p,d),h=e.toDataURL("image/png"),i.emit("thumbnail",t,h)},n.src=e.result},e.readAsDataURL(t)},e.prototype.processQueue=function(){var t,e,i;for(e=this.options.parallelUploads,i=this.filesProcessing.length,t=i;e>t;){if(!this.filesQueue.length)return;this.processFile(this.filesQueue.shift()),t++}},e.prototype.processFile=function(t){return this.filesProcessing.push(t),t.processing=!0,this.emit("processingfile",t),this.uploadFile(t)},e.prototype.uploadFile=function(t){var e,i,n,o,r,s,a,l,c,h,d,u,p,f,m,g=this;if(h=new XMLHttpRequest,h.open(this.options.method,this.options.url,!0),l=null,i=function(){return g.errorProcessing(t,l||g.options.dictResponseError.replace("{{statusCode}}",h.status),h)},h.onload=function(e){var n;if(l=h.responseText,h.getResponseHeader("content-type")&&~h.getResponseHeader("content-type").indexOf("application/json"))try{l=JSON.parse(l)}catch(o){e=o,l="Invalid JSON response from server."}return(n=h.status)>=200&&300>n?(g.emit("uploadprogress",t,100,t.size),g.finished(t,l,e)):i()},h.onerror=function(){return i()},a=null!=(p=h.upload)?p:h,a.onprogress=function(e){return g.emit("uploadprogress",t,Math.max(0,Math.min(100,100*e.loaded/e.total)),e.loaded)},h.setRequestHeader("Accept","application/json"),h.setRequestHeader("Cache-Control","no-cache"),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.setRequestHeader("X-File-Name",t.name),e=new FormData,this.options.params){f=this.options.params;for(s in f)c=f[s],e.append(s,c)}if("FORM"===this.element.tagName)for(m=this.element.querySelectorAll("input, textarea, select, button"),d=0,u=m.length;u>d;d++)n=m[d],o=n.getAttribute("name"),r=n.getAttribute("type"),(!r||"checkbox"!==r.toLowerCase()||n.checked)&&e.append(o,n.value);return this.emit("sending",t,h,e),e.append(this.options.paramName,t),h.send(e)},e.prototype.finished=function(t,e,i){return this.filesProcessing=a(this.filesProcessing,t),t.processing=!1,this.processQueue(),this.emit("success",t,e,i),this.emit("finished",t,e,i),this.emit("complete",t)},e.prototype.errorProcessing=function(t,e,i){return this.filesProcessing=a(this.filesProcessing,t),t.processing=!1,this.processQueue(),this.emit("error",t,e,i),this.emit("complete",t)},e}(n),t.version="3.0.1",t.options={},t.optionsForElement=function(e){return e.id?t.options[o(e.id)]:void 0},t.instances=[],t.forElement=function(t){var e;return"string"==typeof t&&(t=document.querySelector(t)),null!=(e=t.dropzone)?e:null},t.autoDiscover=!0,t.discover=function(){var e,i,n,o,r,s;if(t.autoDiscover){for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],e=function(t){var e,i,o,r;for(r=[],i=0,o=t.length;o>i;i++)e=t[i],/(^| )dropzone($| )/.test(e.className)?r.push(n.push(e)):r.push(void 0);return r},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),s=[],o=0,r=n.length;r>o;o++)i=n[o],t.optionsForElement(i)!==!1?s.push(new t(i)):s.push(void 0);return s}},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,i,n,o,r;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(r=t.blacklistedBrowsers,n=0,o=r.length;o>n;n++)i=r[n],i.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},a=function(t,e){var i,n,o,r;for(r=[],n=0,o=t.length;o>n;n++)i=t[n],i!==e&&r.push(i);return r},o=function(t){return t.replace(/[\-_](\w)/g,function(t){return t[1].toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.isValidMimeType=function(t,e){var i,n,o,r;if(!e)return!0;for(e=e.split(","),i=t.replace(/\/.*$/,""),o=0,r=e.length;r>o;o++)if(n=e[o],n=n.trim(),/\/\*$/.test(n)){if(i===n.replace(/\/.*$/,""))return!0}else if(t===n)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof i&&null!==i?i.exports=t:window.Dropzone=t,r=function(t,e){var i,n,o,r,s,a,l,c,h;if(o=!1,h=!0,n=t.document,c=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",l=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",r=function(i){return"readystatechange"!==i.type||"complete"===n.readyState?(("load"===i.type?t:n)[l](a+i.type,r,!1),!o&&(o=!0)?e.call(t,i.type||i):void 0):void 0},s=function(){var t;try{c.doScroll("left")}catch(e){return t=e,setTimeout(s,50),void 0}return r("poll")},"complete"!==n.readyState){if(n.createEventObject&&c.doScroll){try{h=!t.frameElement}catch(d){}h&&s()}return n[i](a+"DOMContentLoaded",r,!1),n[i](a+"readystatechange",r,!1),t[i](a+"load",r,!1)}},r(window,t.discover)}).call(this)}),t.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),"object"==typeof exports?module.exports=t("dropzone"):"function"==typeof define&&define.amd?define(function(){return t("dropzone")}):window.Dropzone=t("dropzone")}(),function(t,e){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(n){function o(){var e=t(u),i=t(p);l&&(p.length?l.reject(h,e,i):l.resolve(h)),t.isFunction(n)&&n.call(a,h,e,i)}function r(t){s(t.target,"error"===t.type)}function s(e,n){e.src===i||-1!==t.inArray(e,d)||(d.push(e),n?p.push(e):u.push(e),t.data(e,"imagesLoaded",{isBroken:n,src:e.src}),c&&l.notifyWith(t(e),[n,h,t(u),t(p)]),h.length===d.length&&(setTimeout(o),h.unbind(".imagesLoaded",r)))}var a=this,l=t.isFunction(t.Deferred)?t.Deferred():0,c=t.isFunction(l.notify),h=a.find("img").add(a.filter("img")),d=[],u=[],p=[];return t.isPlainObject(n)&&t.each(n,function(t,e){"callback"===t?n=e:l&&l[t](e)}),h.length?h.bind("load.imagesLoaded error.imagesLoaded",r).each(function(n,o){var r=o.src,a=t.data(o,"imagesLoaded");a&&a.src===r?s(o,a.isBroken):o.complete&&o.naturalWidth!==e?s(o,0===o.naturalWidth||0===o.naturalHeight):(o.readyState||o.complete)&&(o.src=i,o.src=r)}):o(),l?l.promise(a):a}}(jQuery),// Copyright (c) 2011 Harvest http://getharvest.com
function(){var t;t=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,o,r,s;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:t.label,children:0,disabled:t.disabled}),r=t.childNodes,s=[],n=0,o=r.length;o>n;n++)i=r[n],s.push(this.add_option(i,e,t.disabled));return s},t.prototype.add_option=function(t,e,i){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t}(),t.select_to_array=function(e){var i,n,o,r,s;for(n=new t,s=e.childNodes,o=0,r=s.length;r>o;o++)i=s[o],n.add_node(i);return n.parsed},this.SelectParser=t}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var t,e;e=this,t=function(){function t(t,e){this.form_field=t,this.options=null!=e?e:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.hide_search=this.options.hide_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.result_add_option=function(t){var e,i;return t.disabled?"":(t.dom_id=this.container_id+"_o_"+t.array_index,e=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=""!==t.style.cssText?' style="'+t.style+'"':"",'<li id="'+t.dom_id+'" class="'+e.join(" ")+'"'+i+">"+t.html+"</li>")},t.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&1>this.backstroke_length&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.generate_field_id=function(){var t;return t=this.generate_random_id(),this.form_field.id=t,t},t.prototype.generate_random_char=function(){var t,e,i;return t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=Math.floor(Math.random()*t.length),e=t.substring(i,i+1)},t}(),e.AbstractChosen=t}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var t,e,i,n,o={}.hasOwnProperty,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=this,t=jQuery,t.fn.extend({chosen:function(i){return this.each(function(){var n;return n=t(this),n.hasClass("chzn-done")?void 0:n.data("chosen",new e(this,i))})}}),e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},o.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},o.prototype.set_up_html=function(){var e,n,o,r,s,a;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",e=["chzn-container"],e.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),o={id:this.container_id,"class":e.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title},n=t("<div />",o),this.is_multiple?n.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):n.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(n),this.container=t("#"+this.container_id),this.dropdown=this.container.find("div.chzn-drop").first(),r=this.container.height(),s=this.f_width-i(this.dropdown),this.dropdown.css({width:s+"px",top:r+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),a=s-i(this.search_container)-i(this.search_field),this.search_field.css({width:a+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},o.prototype.register_observers=function(){var t=this;return this.container.mousedown(function(e){return t.container_mousedown(e)}),this.container.mouseup(function(e){return t.container_mouseup(e)}),this.container.mouseenter(function(e){return t.mouse_enter(e)}),this.container.mouseleave(function(e){return t.mouse_leave(e)}),this.search_results.mouseup(function(e){return t.search_results_mouseup(e)}),this.search_results.mouseover(function(e){return t.search_results_mouseover(e)}),this.search_results.mouseout(function(e){return t.search_results_mouseout(e)}),this.form_field_jq.bind("liszt:updated",function(e){return t.results_update_field(e)}),this.form_field_jq.bind("liszt:activate",function(e){return t.activate_field(e)}),this.form_field_jq.bind("liszt:open",function(e){return t.container_mousedown(e)}),this.search_field.blur(function(e){return t.input_blur(e)}),this.search_field.keyup(function(e){return t.keyup_checker(e)}),this.search_field.keydown(function(e){return t.keydown_checker(e)}),this.search_field.focus(function(e){return t.input_focus(e)}),this.is_multiple?this.search_choices.click(function(e){return t.choices_click(e)}):this.container.click(function(t){return t.preventDefault()})},o.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},o.prototype.container_mousedown=function(e){var i;return this.is_disabled?void 0:(i=null!=e?t(e.target).hasClass("search-choice-close"):!1,e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),this.pending_destroy_click||i?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chzn-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).click(this.click_test_action),this.results_show()),this.activate_field()))},o.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},o.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},o.prototype.close_field=function(){return t(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},o.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},o.prototype.test_active_click=function(e){return t(e.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},o.prototype.results_build=function(){var t,e,i,o,r;for(this.parsing=!0,this.results_data=n.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.hide_search?this.container.addClass("chzn-container-single-hidesearch"):this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),t="",r=this.results_data,i=0,o=r.length;o>i;i++)e=r[i],e.group?t+=this.result_add_group(e):e.empty||(t+=this.result_add_option(e),e.selected&&this.is_multiple?this.choice_build(e):e.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(e.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(t),this.parsing=!1},o.prototype.result_add_group=function(e){return e.disabled?"":(e.dom_id=this.container_id+"_g_"+e.array_index,'<li id="'+e.dom_id+'" class="group-result">'+t("<div />").text(e.label).html()+"</li>")},o.prototype.result_do_highlight=function(t){var e,i,n,o,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),o=n+r,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=o)return this.search_results.scrollTop(e-n>0?e-n:0);if(r>i)return this.search_results.scrollTop(i)}},o.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},o.prototype.results_show=function(){var t;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return t=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:t+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},o.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},o.prototype.set_tab_index=function(){var t;return this.form_field_jq.attr("tabindex")?(t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",t)):void 0},o.prototype.show_search_field_default=function(){return this.is_multiple&&1>this.choices&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},o.prototype.search_results_mouseup=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(e),this.search_field.focus()):void 0},o.prototype.search_results_mouseover=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},o.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},o.prototype.choices_click=function(e){return e.preventDefault(),!this.active_field||t(e.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},o.prototype.choice_build=function(e){var i,n,o,r=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(i=this.container_id+"_c_"+e.array_index,this.choices+=1,n=e.disabled?'<li class="search-choice search-choice-disabled" id="'+i+'"><span>'+e.html+"</span></li>":'<li class="search-choice" id="'+i+'"><span>'+e.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+e.array_index+'"></a></li>',this.search_container.before(n),o=t("#"+i).find("a").first(),o.click(function(t){return r.choice_destroy_link_click(t)}))},o.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),this.is_disabled?e.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(t(e.target)))},o.prototype.choice_destroy=function(t){return this.result_deselect(t.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&1>this.search_field.val().length&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},o.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},o.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},o.prototype.result_select=function(t){var e,i,n,o;return this.result_highlight?(e=this.result_highlight,i=e.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(e):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=e,this.selected_item.removeClass("chzn-default")),e.addClass("result-selected"),o=i.substr(i.lastIndexOf("_")+1),n=this.results_data[o],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.is_multiple?this.choice_build(n):(this.selected_item.find("span").first().text(n.text),this.allow_single_deselect&&this.single_deselect_control_build()),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()):void 0},o.prototype.result_activate=function(t){return t.addClass("active-result")},o.prototype.result_deactivate=function(t){return t.removeClass("active-result")},o.prototype.result_deselect=function(e){var i,n;return n=this.results_data[e],this.form_field.options[n.options_index].disabled?!1:(n.selected=!1,this.form_field.options[n.options_index].selected=!1,i=t("#"+this.container_id+"_o_"+e),i.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[n.options_index].value}),this.search_field_scale(),!0)},o.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&1>this.selected_item.find("abbr").length?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},o.prototype.winnow_results=function(){var e,i,n,o,r,s,a,l,c,h,d,u,p,f,m,g,v,y;for(this.no_results_clear(),c=0,h=this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html(),s=this.search_contains?"":"^",r=new RegExp(s+h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=new RegExp(h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),y=this.results_data,f=0,g=y.length;g>f;f++)if(i=y[f],!i.disabled&&!i.empty)if(i.group)t("#"+i.dom_id).css("display","none");else if(!this.is_multiple||!i.selected){if(e=!1,l=i.dom_id,a=t("#"+l),r.test(i.html))e=!0,c+=1;else if(this.enable_split_word_search&&(i.html.indexOf(" ")>=0||0===i.html.indexOf("["))&&(o=i.html.replace(/\[|\]/g,"").split(" "),o.length))for(m=0,v=o.length;v>m;m++)n=o[m],r.test(n)&&(e=!0,c+=1);e?(h.length?(d=i.html.search(p),u=i.html.substr(0,d+h.length)+"</em>"+i.html.substr(d+h.length),u=u.substr(0,d)+"<em>"+u.substr(d)):u=i.html,a.html(u),this.result_activate(a),null!=i.group_array_index&&t("#"+this.results_data[i.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}return 1>c&&h.length?this.no_results(h):this.winnow_results_set_highlight()},o.prototype.winnow_results_clear=function(){var e,i,n,o,r;for(this.search_field.val(""),i=this.search_results.find("li"),r=[],n=0,o=i.length;o>n;n++)e=i[n],e=t(e),e.hasClass("group-result")?r.push(e.css("display","auto")):this.is_multiple&&e.hasClass("result-selected")?r.push(void 0):r.push(this.result_activate(e));return r},o.prototype.winnow_results_set_highlight=function(){var t,e;return this.result_highlight||(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null==t)?void 0:this.result_do_highlight(t)},o.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i)},o.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},o.prototype.keydown_arrow=function(){var e,i;return this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first(),i&&this.result_do_highlight(i)):(e=this.search_results.find("li.active-result").first(),e&&this.result_do_highlight(t(e))),this.results_showing?void 0:this.results_show()},o.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},o.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},o.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},o.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},o.prototype.search_field_scale=function(){var e,i,n,o,r,s,a,l,c;if(this.is_multiple){for(n=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=s.length;c>l;l++)o=s[l],r+=o+":"+this.search_field.css(o)+";";return i=t("<div />",{style:r}),i.text(this.search_field.val()),t("body").append(i),a=i.width()+25,i.remove(),a>this.f_width-10&&(a=this.f_width-10),this.search_field.css({width:a+"px"}),e=this.container.height(),this.dropdown.css({top:e+"px"})}},o.prototype.generate_random_id=function(){var e;for(e="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();t("#"+e).length>0;)e+=this.generate_random_char();return e},o}(AbstractChosen),n.Chosen=e,i=function(t){var e;return e=t.outerWidth()-t.width()},n.get_side_border_padding=i}.call(this),/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
function(t){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],t):t(jQuery)}(function(t){function e(t){return t}function i(t){return decodeURIComponent(t.replace(o," "))}function n(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return r.json?JSON.parse(t):t}catch(e){}}var o=/\+/g,r=t.cookie=function(o,s,a){if(void 0!==s){if(a=t.extend({},r.defaults,a),"number"==typeof a.expires){var l=a.expires,c=a.expires=new Date;c.setDate(c.getDate()+l)}return s=r.json?JSON.stringify(s):String(s),document.cookie=[encodeURIComponent(o),"=",r.raw?s:encodeURIComponent(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var h=r.raw?e:i,d=document.cookie.split("; "),u=o?void 0:{},p=0,f=d.length;f>p;p++){var m=d[p].split("="),g=h(m.shift()),v=h(m.join("="));if(o&&o===g){u=n(v);break}o||(u[g]=n(v))}return u};r.defaults={},t.removeCookie=function(e,i){return void 0!==t.cookie(e)?(t.cookie(e,"",t.extend(i,{expires:-1})),!0):!1}}),!function(t){t.fn.EverlaneTwitter=function(e){e=e||{};var i=e.template||"#product-tweet-template",n=e.attrib||".attribution",o=e.content||".tweet-text",r=e.handle||"nanateverlane",s=e.callback||function(t){console.info("twitter returned data:"+t)},a=e.count||8,l=e.userImg||"img.user-icon";t.extend(this,{getRetweets:function(e){t.ajax("https://api.twitter.com/1/statuses/retweeted_by_user.json",{dataType:"jsonp",data:{screen_name:r,count:a,include_entities:!0},statusCode:{400:function(){console.warn("We are being rate limited by the Twitter REST   API")},420:function(){console.warn("We are being rate limited by the Twitter Search API")}},success:function(t,i){console.info("Called twitter with return status:",i),e(t),s(t)}})},formatTweet:function(e){var r=e.retweeted_status,s=r.text,a=r.user.screen_name,c=r.user.profile_image_url_https,h=r.id_str,d=t(i).clone().removeAttr("id");return d.find(n).text("@"+a).attr("href","https://twitter.com/#!/"+a+"/status/"+h),d.find(o).html(this.processSyntax(s)),d.find(l).attr("src",c),d},processSyntax:function(t){return t&&(t=t.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(t){var e=t;return e.match("^https?://")||(e="http://"+e),'<a href="'+e+'" target="_blank">'+t+"</a>"}).replace(/\B@([_a-z0-9]+)/gi,function(t){return"<strong>"+t+"</strong>"}).replace(/\B#([_a-z0-9]+)/gi,function(t){return"<strong>"+t+"</strong>"})),t}});var c=this;return c.getRetweets(function(e){for(var n=0,o=e.length;o>n;n++){var r=c.formatTweet(e[n]);c.append(r)}t(i).remove()}),c}}(jQuery),function(t){t.fn.hoverIntent=function(e,i){var n={sensitivity:7,interval:100,timeout:0};n=t.extend(n,i?{over:e,out:i}:e);var o,r,s,a,l=function(t){o=t.pageX,r=t.pageY},c=function(e,i){return i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(s-o)+Math.abs(a-r)<n.sensitivity?(t(i).unbind("mousemove",l),i.hoverIntent_s=1,n.over.apply(i,[e])):(s=o,a=r,i.hoverIntent_t=setTimeout(function(){c(e,i)},n.interval),void 0)},h=function(t,e){return e.hoverIntent_t=clearTimeout(e.hoverIntent_t),e.hoverIntent_s=0,n.out.apply(e,[t])},d=function(e){var i=jQuery.extend({},e),o=this;o.hoverIntent_t&&(o.hoverIntent_t=clearTimeout(o.hoverIntent_t)),"mouseenter"==e.type?(s=i.pageX,a=i.pageY,t(o).bind("mousemove",l),1!=o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){c(i,o)},n.interval))):(t(o).unbind("mousemove",l),1==o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){h(i,o)},n.timeout)))};return this.bind("mouseenter",d).bind("mouseleave",d)}}(jQuery),function(){var t,e,i,n,o,r,s,a,l,c,h,d,u,p,f,m,g,v,y,_=[].slice,b=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=jQuery,t.payment={},t.payment.fn={},t.fn.payment=function(){var e,i;return i=arguments[0],e=arguments.length>=2?_.call(arguments,1):[],t.payment.fn[i].apply(this,e)},o=/(\d{1,4})/g,n=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:o,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:o,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:o,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:o,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"visa",pattern:/^4/,format:o,length:[13,14,15,16],cvcLength:[3],luhn:!0}],e=function(t){var e,i,o;for(t=(t+"").replace(/\D/g,""),i=0,o=n.length;o>i;i++)if(e=n[i],e.pattern.test(t))return e},i=function(t){var e,i,o;for(i=0,o=n.length;o>i;i++)if(e=n[i],e.type===t)return e},u=function(t){var e,i,n,o,r,s;for(n=!0,o=0,i=(t+"").split("").reverse(),r=0,s=i.length;s>r;r++)e=i[r],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),o+=e;return 0===o%10},d=function(t){var e;return null!=t.prop("selectionStart")&&t.prop("selectionStart")!==t.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document?null!=(e=document.selection)?"function"==typeof e.createRange?e.createRange().text:void 0:void 0:void 0)?!0:!1},p=function(e){return setTimeout(function(){var i,n;return i=t(e.currentTarget),n=i.val(),n=t.payment.formatCardNumber(n),i.val(n)})},a=function(i){var n,o,r,s,a,l,c;return r=String.fromCharCode(i.which),!/^\d+$/.test(r)||(n=t(i.currentTarget),c=n.val(),o=e(c+r),s=(c.replace(/\D/g,"")+r).length,l=16,o&&(l=o.length[o.length.length-1]),s>=l||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==c.length)?void 0:(a=o&&"amex"===o.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,a.test(c)?(i.preventDefault(),n.val(c+" "+r)):a.test(c+r)?(i.preventDefault(),n.val(c+r+" ")):void 0)},r=function(e){var i,n;return i=t(e.currentTarget),n=i.val(),e.meta||null!=i.prop("selectionStart")&&i.prop("selectionStart")!==n.length?void 0:8===e.which&&/\s\d?$/.test(n)?(e.preventDefault(),i.val(n.replace(/\s\d?$/,""))):void 0},l=function(e){var i,n,o;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(i=t(e.currentTarget),o=i.val()+n,/^\d$/.test(o)&&"0"!==o&&"1"!==o?(e.preventDefault(),i.val("0"+o+" / ")):/^\d\d$/.test(o)?(e.preventDefault(),i.val(""+o+" / ")):void 0):void 0},c=function(e){var i,n,o;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(i=t(e.currentTarget),o=i.val(),/^\d\d$/.test(o)?i.val(""+o+" / "):void 0):void 0},h=function(e){var i,n,o;return n=String.fromCharCode(e.which),"/"===n?(i=t(e.currentTarget),o=i.val(),/^\d$/.test(o)&&"0"!==o?i.val("0"+o+" / "):void 0):void 0},s=function(e){var i,n;if(!e.meta&&(i=t(e.currentTarget),n=i.val(),8===e.which&&(null==i.prop("selectionStart")||i.prop("selectionStart")===n.length)))return/\s\/\s?\d?$/.test(n)?(e.preventDefault(),i.val(n.replace(/\s\/\s?\d?$/,""))):void 0},v=function(t){var e;return t.metaKey||t.ctrlKey?!0:32===t.which?!1:0===t.which?!0:33>t.which?!0:(e=String.fromCharCode(t.which),!!/[\d\s]/.test(e))},m=function(i){var n,o,r,s;return n=t(i.currentTarget),r=String.fromCharCode(i.which),/^\d+$/.test(r)&&!d(n)?(s=(n.val()+r).replace(/\D/g,""),o=e(s),o?s.length<=o.length[o.length.length-1]:16>=s.length):void 0},g=function(e){var i,n,o;return i=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!d(i)?(o=i.val()+n,o=o.replace(/\D/g,""),o.length>6?!1:void 0):void 0},f=function(e){var i,n,o;return i=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)?(o=i.val()+n,4>=o.length):void 0},y=function(e){var i,o,r,s,a;return i=t(e.currentTarget),a=i.val(),s=t.payment.cardType(a)||"unknown",i.hasClass(s)?void 0:(o=function(){var t,e,i;for(i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(r.type);return i}(),i.removeClass("unknown"),i.removeClass(o.join(" ")),i.addClass(s),i.toggleClass("identified","unknown"!==s),i.trigger("payment.cardType",s))},t.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",f),this},t.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",g),this.on("keypress",l),this.on("keypress",h),this.on("keypress",c),this.on("keydown",s),this},t.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",m),this.on("keypress",a),this.on("keydown",r),this.on("keyup",y),this.on("paste",p),this},t.payment.fn.restrictNumeric=function(){return this.on("keypress",v),this},t.payment.fn.cardExpiryVal=function(){return t.payment.cardExpiryVal(t(this).val())},t.payment.cardExpiryVal=function(t){var e,i,n,o;return t=t.replace(/\s/g,""),o=t.split("/",2),e=o[0],n=o[1],2===(null!=n?n.length:void 0)&&/^\d+$/.test(n)&&(i=(new Date).getFullYear(),i=i.toString().slice(0,2),n=i+n),e=parseInt(e,10),n=parseInt(n,10),{month:e,year:n}},t.payment.validateCardNumber=function(t){var i,n;return t=(t+"").replace(/\s+|-/g,""),/^\d+$/.test(t)?(i=e(t),i?(n=t.length,b.call(i.length,n)>=0&&(i.luhn===!1||u(t))):!1):!1},t.payment.validateCardExpiry=function(e,i){var n,o,r,s;return"object"==typeof e&&"month"in e&&(s=e,e=s.month,i=s.year),e&&i?(e=t.trim(e),i=t.trim(i),/^\d+$/.test(e)?/^\d+$/.test(i)?12>=parseInt(e,10)?(2===i.length&&(r=(new Date).getFullYear(),r=r.toString().slice(0,2),i=r+i),o=new Date(i,e),n=new Date,o.setMonth(o.getMonth()-1),o.setMonth(o.getMonth()+1,1),o>n):!1:!1:!1):!1},t.payment.validateCardCVC=function(e,n){var o,r;return e=t.trim(e),/^\d+$/.test(e)?n?(o=e.length,b.call(null!=(r=i(n))?r.cvcLength:void 0,o)>=0):e.length>=3&&4>=e.length:!1},t.payment.cardType=function(t){var i;return t?(null!=(i=e(t))?i.type:void 0)||null:null},t.payment.formatCardNumber=function(t){var i,n,o,r;return(i=e(t))?(o=i.length[i.length.length-1],t=t.replace(/\D/g,""),t=t.slice(0,+o+1||9e9),i.format.global?null!=(r=t.match(i.format))?r.join(" "):void 0:(n=i.format.exec(t),null!=n&&n.shift(),null!=n?n.join(" "):void 0)):t}}.call(this),/*
 * jQuery Reveal Plugin 1.0
 * www.ZURB.com
 * Copyright 2010, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
function(t){t(document).on("click","[data-reveal-id]",function(e){e.preventDefault();var i=t(this).attr("data-reveal-id");t("#"+i).reveal(t(this).data())}),t.fn.reveal=function(e){var i={animation:"fade",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"reveal-modal-close",openComplete:function(){},closeComplete:function(){},revealBgColor:"#000"},e=t.extend({},i,e);return this.each(function(){function i(){t("."+e.dismissModalClass).unbind("click.modalEvent"),t("#content").width()/2-s.innerWidth()/2,a||(r(),"fadeAndPop"==e.animation&&(s.css({opacity:0,visibility:"visible"}),l.fadeIn(e.animationSpeed/2),s.delay(e.animationSpeed/2).animate({opacity:1},e.animationSpeed,function(){e.openComplete(),o()})),"fade"==e.animation&&(s.css({opacity:0,visibility:"visible"}),l.fadeIn(e.animationSpeed/2),s.delay(e.animationSpeed/2).animate({opacity:1},e.animationSpeed,function(){e.openComplete(),o()})),"none"==e.animation&&(s.css({visibility:"visible"}),l.css({display:"block"}),o())),s.unbind("reveal:open",i)}function n(){l.unbind("click.modalEvent"),r(),"fadeAndPop"==e.animation&&(l.delay(e.animationSpeed).fadeOut(e.animationSpeed),s.animate({opacity:0},e.animationSpeed/2,function(){s.css({opacity:1,visibility:"hidden"}),e.closeComplete(),o()})),"fade"==e.animation&&(l.delay(e.animationSpeed).fadeOut(e.animationSpeed),s.animate({opacity:0},e.animationSpeed,function(){s.css({opacity:1,visibility:"hidden"}),e.closeComplete(),o()})),"none"==e.animation&&(s.css({visibility:"hidden"}),l.css({display:"none"})),s.unbind("reveal:close",n)}function o(){a=!1}function r(){a=!0}var s=t(this),a=!1,l=t(".reveal-modal-bg"),c="absolute"==s.css("position")?"absolute":"fixed",h=e.openComplete,d=t(window).height(),u=s.outerHeight(),p=(d-u)/2;e.openComplete="fixed"==c?h:function(){t("html, body").animate({scrollTop:s.offset().top-(0>p?15:p)},300,"easeOutQuad"),h()},s.css({position:c,top:"50%",left:"50%","margin-left":-s.outerWidth()/2+"px","margin-top":-s.outerHeight()/2+"px","z-index":2e5}),0==l.length&&(l=t('<div class="reveal-modal-bg" style="background-color:'+e.revealBgColor+'" />').insertAfter(s),l.fadeTo("fast",.6)),s.bind("reveal:open",i),s.bind("reveal:close",n),s.trigger("reveal:open"),t("."+e.dismissModalClass).bind("click.modalEvent",function(){s.trigger("reveal:close")}),e.closeOnBackgroundClick&&(l.css({cursor:"pointer"}),l.bind("click.modalEvent",function(){s.trigger("reveal:close")})),t("body").keyup(function(t){e.closeOnBackgroundClick&&27===t.which&&s.trigger("reveal:close")})})}}(jQuery),function(t){for(var e,i=document.getElementsByTagName("head")[0].style,n=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],o=0;n.length>o;o++)void 0!==i[n[o]]&&(e=n[o]);var r=false;jQuery.fn.extend({rotate:function(e){if(0!==this.length&&"undefined"!=typeof e){"number"==typeof e&&(e={angle:e});for(var i=[],n=0,o=this.length;o>n;n++){var r=this.get(n);if(r.Wilq32&&r.Wilq32.PhotoEffect)r.Wilq32.PhotoEffect._handleRotation(e);else{var s=t.extend(!0,{},e),r=new Wilq32.PhotoEffect(r,s)._rootObj;i.push(t(r))}}return i}},getRotateAngle:function(){for(var t=[],e=0,i=this.length;i>e;e++){var n=this.get(e);n.Wilq32&&n.Wilq32.PhotoEffect&&(t[e]=n.Wilq32.PhotoEffect._angle)}return t},stopRotate:function(){for(var t=0,e=this.length;e>t;t++){var i=this.get(t);i.Wilq32&&i.Wilq32.PhotoEffect&&clearTimeout(i.Wilq32.PhotoEffect._timer)}}}),Wilq32=window.Wilq32||{},Wilq32.PhotoEffect=function(){return e?function(t,e){t.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=t,this._handleRotation(e)}:function(t,e){if(this._img=t,this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},t.parentNode.insertBefore(this._rootObj,t),t.complete)this._Loader(e);else{var i=this;jQuery(this._img).bind("load",function(){i._Loader(e)})}}}(),Wilq32.PhotoEffect.prototype={_setupParameters:function(t){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof t.angle&&(this._angle=t.angle),this._parameters.animateTo="number"==typeof t.animateTo?t.animateTo:this._angle,this._parameters.step=t.step||this._parameters.step||null,this._parameters.easing=t.easing||this._parameters.easing||function(t,e,i,n,o){return-n*((e=e/o-1)*e*e*e-1)+i},this._parameters.duration=t.duration||this._parameters.duration||1e3,this._parameters.callback=t.callback||this._parameters.callback||function(){},t.bind&&t.bind!=this._parameters.bind&&this._BindEvents(t.bind)},_handleRotation:function(t){this._setupParameters(t),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(t){if(t&&this._eventObj){if(this._parameters.bind){var e,i=this._parameters.bind;for(e in i)i.hasOwnProperty(e)&&jQuery(this._eventObj).unbind(e,i[e])}this._parameters.bind=t;for(e in t)t.hasOwnProperty(e)&&jQuery(this._eventObj).bind(e,t[e])}},_Loader:function(){return r?function(t){var e=this._img.width,i=this._img.height;this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=i+"px",this._vimage.style.width=e+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._container=this.createVMLNode("group"),this._container.style.width=e,this._container.style.height=i,this._container.style.position="absolute",this._container.setAttribute("coordsize",e-1+","+(i-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=e+"px",this._rootObj.style.height=i+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj,this._handleRotation(t)}:function(t){this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._width=this._img.width,this._height=this._img.height,this._widthHalf=this._width/2,this._heightHalf=this._height/2;var e=Math.sqrt(this._height*this._height+this._width*this._width);this._widthAdd=e-this._width,this._heightAdd=e-this._height,this._widthAddHalf=this._widthAdd/2,this._heightAddHalf=this._heightAdd/2,this._img.parentNode.removeChild(this._img),this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width,this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height,this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._widthAddHalf+"px",this._canvas.style.top=-this._heightAddHalf+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._width+"px",this._rootObj.style.height=this._height+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d"),this._handleRotation(t)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var t=+new Date,e=t-this._animateStartTime>this._parameters.duration;if(e&&!this._parameters.animatedGif)clearTimeout(this._timer);else{(this._canvas||this._vimage||this._img)&&this._rotate(~~(10*this._parameters.easing(0,t-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration))/10),this._parameters.step&&this._parameters.step(this._angle);var i=this;this._timer=setTimeout(function(){i._animate.call(i)},10)}this._parameters.callback&&e&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var t=Math.PI/180;return r?function(t){this._angle=t,this._container.style.rotation=t%360+"deg"}:e?function(t){this._angle=t,this._img.style[e]="rotate("+t%360+"deg)"}:function(e){this._angle=e,e=e%360*t,this._canvas.width=this._width+this._widthAdd,this._canvas.height=this._height+this._heightAdd,this._cnv.translate(this._widthAddHalf,this._heightAddHalf),this._cnv.translate(this._widthHalf,this._heightHalf),this._cnv.rotate(e),this._cnv.translate(-this._widthHalf,-this._heightHalf),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)}}()},r&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())}(jQuery),/*
* TipTip
* Copyright 2010 Drew Wilson
* www.drewwilson.com
* code.drewwilson.com/entry/tiptip-jquery-plugin
*
* Version 1.3   -   Updated: Mar. 23, 2010
*
* This Plug-In will create a custom tooltip to replace the default
* browser tooltip. It is extremely lightweight and very smart in
* that it detects the edges of the browser window and will make sure
* the tooltip stays within the current window size. As a result the
* tooltip will adjust itself to be displayed above, below, to the left
* or to the right depending on what is necessary to stay within the
* browser window. It is completely customizable as well via CSS.
*
* This TipTip jQuery plug-in is dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*/
function(t){function e(t){return o.test(t)}t.fn.tipTip=function(i){var n={activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:0,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},afterEnter:function(){},exit:function(){},afterExit:function(){},cssClass:"",detectTextDir:!0};if(0>=t("#tiptip_holder").length){var o=t("<div>",{id:"tiptip_arrow_inner"}),r=t("<div>",{id:"tiptip_arrow"}).append(o),s=t("<div>",{id:"tiptip_content"}),a=t("<div>",{id:"tiptip_holder"}).append(r).append(s);t("body").append(a)}else var a=t("#tiptip_holder"),s=t("#tiptip_content"),r=t("#tiptip_arrow");return this.each(function(){function o(){if(u.enter.call(h,p)!==!1){var e;u.content?e=t.isFunction(u.content)?u.content.call(h,p):u.content:(e=u.content=h.attr(u.attribute),h.removeAttr(u.attribute)),e&&(s.html(e),a.hide().removeAttr("class").css({"max-width":u.maxWidth}),u.cssClass&&a.addClass(u.cssClass),c(),f&&clearTimeout(f),f=setTimeout(function(){a.stop(!0,!0).fadeIn(u.fadeIn)},u.delay),t(window).bind("resize.tipTip scroll.tipTip",c),h.addClass("tiptip_visible"),u.afterEnter.call(h,p))}}function l(){u.exit.call(h,p)!==!1&&(f&&clearTimeout(f),a.fadeOut(u.fadeOut),t(window).unbind("resize.tipTip scroll.tipTip"),h.removeClass("tiptip_visible"),u.afterExit.call(h,p))}function c(){function i(){p=k.top,c=v-E-u.edgeOffset-C/2,d=y+(_-w)/2}function n(){p=k.bottom,c=v+b+u.edgeOffset+C/2,d=y+(_-w)/2}function o(){p=k.left,c=v+(b-E)/2,d=y-w-u.edgeOffset-x/2}function l(){p=k.right,c=v+(b-E)/2,d=y+_+u.edgeOffset+x/2}var c,d,p,f,m,g=h.offset(),v=g.top,y=g.left,_=h.outerWidth(),b=h.outerHeight(),w=a.outerWidth(),E=a.outerHeight(),k={top:"tip_top",bottom:"tip_bottom",left:"tip_left",right:"tip_right"},x=12,C=12,S=t(window),T=S.scrollTop(),$=S.scrollLeft(),I=S.width(),A=S.height(),D=u.detectTextDir&&e(s.text());"bottom"==u.defaultPosition?n():"top"==u.defaultPosition?i():"left"!=u.defaultPosition||D?"left"==u.defaultPosition&&D?l():"right"!=u.defaultPosition||D?"right"==u.defaultPosition&&D?o():n():l():o(),p==k.left&&!D&&$>d?l():p==k.left&&D&&$>d-w?l():p==k.right&&!D&&d>$+I?o():p==k.right&&D&&d+w>$+I?o():p==k.top&&T>c?n():p==k.bottom&&c>T+A&&i(),(p==k.left||p==k.right)&&(c+E>A+T?c=v+b>A+T?v+b-E:A+T-E:T>c&&(c=T>v?v:T)),(p==k.top||p==k.bottom)&&(d+w>I+$?d=y+_>I+$?y+_-w:I+$-w:$>d&&(d=$>y?y:$)),a.css({left:Math.round(d),top:Math.round(c)}).removeClass(k.top).removeClass(k.bottom).removeClass(k.left).removeClass(k.right).addClass(p),p==k.top?(f=E,m=y-d+(_-x)/2):p==k.bottom?(f=-C,m=y-d+(_-x)/2):p==k.left?(f=v-c+(b-C)/2,m=w):p==k.right&&(f=v-c+(b-C)/2,m=-x),r.css({left:Math.round(m),top:Math.round(f)})}var h=t(this),d=h.data("tipTip"),u=d&&d.options||t.extend({},n,i),p={holder:a,content:s,arrow:r,options:u};if(d)switch(i){case"show":o();break;case"hide":l();break;case"destroy":h.unbind(".tipTip").removeData("tipTip");break;case"position":c()}else{var f=!1;h.data("tipTip",{options:u}),"hover"==u.activation?h.bind("mouseenter.tipTip",function(){o()}).bind("mouseleave.tipTip",function(){u.keepAlive?a.one("mouseleave.tipTip",function(){l()}):l()}):"focus"==u.activation?h.bind("focus.tipTip",function(){o()}).bind("blur.tipTip",function(){l()}):"click"==u.activation?h.bind("click.tipTip",function(t){return t.preventDefault(),o(),!1}).bind("mouseleave.tipTip",function(){u.keepAlive?a.one("mouseleave.tipTip",function(){l()}):l()}):"manual"==u.activation}})};var i="A-Za-z--------",n="---",o=new RegExp("^[^"+i+"]*["+n+"]")}(jQuery),function(t){t.getURLParameter=function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"="+"([^&;]+?)(&|#|;|$)","i").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}}(jQuery),/*
jQuery Waypoints - v1.1.7
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
function(t,e,i,n){var o=t(n),r="waypoint.reached",s=function(t,i){t.element.trigger(r,i),t.options.triggerOnce&&t.element[e]("destroy")},a=function(t,e){if(!e)return-1;for(var i=e.waypoints.length-1;i>=0&&e.waypoints[i].element[0]!==t[0];)i-=1;return i},l=[],c=function(e){t.extend(this,{element:t(e),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:t.proxy(function(){var e=this.element.scrollTop(),n=e>this.oldScroll,o=this,r=t.grep(this.waypoints,function(t){return n?t.offset>o.oldScroll&&e>=t.offset:t.offset<=o.oldScroll&&t.offset>e}),a=r.length;this.oldScroll&&e||t[i]("refresh"),this.oldScroll=e,a&&(n||r.reverse(),t.each(r,function(t,e){(e.options.continuous||t===a-1)&&s(e,[n?"down":"up"])}))},this)}),t(e).bind("scroll.waypoints",t.proxy(function(){this.didScroll||(this.didScroll=!0,n.setTimeout(t.proxy(function(){this.doScroll(),this.didScroll=!1},this),t[i].settings.scrollThrottle))},this)).bind("resize.waypoints",t.proxy(function(){this.didResize||(this.didResize=!0,n.setTimeout(t.proxy(function(){t[i]("refresh"),this.didResize=!1},this),t[i].settings.resizeThrottle))},this)),o.load(t.proxy(function(){this.doScroll()},this))},h=function(e){var i=null;return t.each(l,function(t,n){return n.element[0]===e?(i=n,!1):void 0}),i},d={init:function(n,o){return this.each(function(){var s,d=t.fn[e].defaults.context,u=t(this);o&&o.context&&(d=o.context),t.isWindow(d)||(d=u.closest(d)[0]),s=h(d),s||(s=new c(d),l.push(s));var p=a(u,s),f=0>p?t.fn[e].defaults:s.waypoints[p].options,m=t.extend({},f,o);m.offset="bottom-in-view"===m.offset?function(){var e=t.isWindow(d)?t[i]("viewportHeight"):t(d).height();return e-t(this).outerHeight()}:m.offset,0>p?s.waypoints.push({element:u,offset:null,options:m}):s.waypoints[p].options=m,n&&u.bind(r,n),o&&o.handler&&u.bind(r,o.handler)}),t[i]("refresh"),this},remove:function(){return this.each(function(e,i){var n=t(i);t.each(l,function(t,e){var i=a(n,e);i>=0&&(e.waypoints.splice(i,1),e.waypoints.length||(e.element.unbind("scroll.waypoints resize.waypoints"),l.splice(t,1)))})})},destroy:function(){return this.unbind(r)[e]("remove")}},u={refresh:function(){t.each(l,function(e,n){var o=t.isWindow(n.element[0]),r=o?0:n.element.offset().top,a=o?t[i]("viewportHeight"):n.element.height(),l=o?0:n.element.scrollTop();t.each(n.waypoints,function(t,e){if(e){var i=e.options.offset,o=e.offset;if("function"==typeof e.options.offset)i=e.options.offset.apply(e.element);else if("string"==typeof e.options.offset){var c=parseFloat(e.options.offset);i=e.options.offset.indexOf("%")?Math.ceil(a*(c/100)):c}e.offset=e.element.offset().top-r+l-i,e.options.onlyOnScroll||(null!==o&&n.oldScroll>o&&n.oldScroll<=e.offset?s(e,["up"]):null!==o&&o>n.oldScroll&&n.oldScroll>=e.offset?s(e,["down"]):!o&&n.element.scrollTop()>e.offset&&s(e,["down"]))}}),n.waypoints.sort(function(t,e){return t.offset-e.offset})})},viewportHeight:function(){return n.innerHeight?n.innerHeight:o.height()},aggregate:function(){var e=t();return t.each(l,function(i,n){t.each(n.waypoints,function(t,i){e=e.add(i.element)})}),e}};t.fn[e]=function(i){return d[i]?d[i].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof i&&i?"object"==typeof i?d.init.apply(this,[null,i]):(t.error("Method "+i+" does not exist on jQuery "+e),void 0):d.init.apply(this,arguments)},t.fn[e].defaults={continuous:!0,offset:0,triggerOnce:!1,context:n},t[i]=function(t){return u[t]?u[t].apply(this):u.aggregate()},t[i].settings={resizeThrottle:200,scrollThrottle:100},o.load(function(){t[i]("refresh")})}(jQuery,"waypoint","waypoints",window),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,o,r,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;r>i;i+=1)s[i]=str(i,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;r>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&s.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&s.push(quote(n)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,o=t[e];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),NameParse={parse:function(t){t=this.trim(t);var e=t.split(" "),i={},n=[],o="",r="",s="",a=0,l=0;for(l=0;e.length>l;l++)-1==e[l].indexOf("(")&&(n[a++]=e[l]);var c=n.length,h=this.is_salutation(n[0]),d=this.is_suffix(n[n.length-1]),u=h?1:0,p=d?c-1:c;for(l=u;p-1>l&&(word=n[l],!this.is_compound_lastName(word)||l==u);l++)this.is_initial(word)?l==u?this.is_initial(n[l+1])?r+=" "+word.toUpperCase():s+=" "+word.toUpperCase():s+=" "+word.toUpperCase():r+=" "+this.fix_case(word);if(p-u>1)for(a=l;p>a;a++)o+=" "+this.fix_case(n[a]);else r=this.fix_case(n[l]);return i.salutation=0!=h?h:"",i.firstName=""!=r?this.trim(r):"",i.initials=""!=s?this.trim(s):"",i.lastName=""!=o?this.trim(o):"",i.suffix=0!=d?d:"",i},is_salutation:function(t){return t=t.replace(".","").toLowerCase(),"mr"==t||"master"==t||"mister"==t?"Mr.":"mrs"==t?"Mrs.":"miss"==t||"ms"==t?"Ms.":"dr"==t?"Dr.":"rev"==t?"Rev.":"fr"==t?"Fr.":!1},is_suffix:function(t){t=t.replace(/\./g,"").toLowerCase();for(var e=["I","II","III","IV","V","Jr","Sr","PhD","APR","RPh","PE","MD","DMD","CME"],i=0;e.length>i;i++)if(e[i].toLowerCase()==t)return e[i];return!1},is_compound_lastName:function(t){t=t.toLowerCase();var e=["vere","von","van","de","del","della","di","da","pietro","vanden","du","st.","st","la","lo","ter"];return this.in_array(e,t)},is_initial:function(t){return t=t.replace(".",""),1==t.length},is_camel_case:function(t){var e=/|[A-Z]+|s/,i=/|[a-z]+|s/;return null!=t.match(e)&&null!=t.match(i)},fix_case:function(t){return t=this.safe_ucfirst("-",t),t=this.safe_ucfirst(".",t)},safe_ucfirst:function(t,e){var i=[];parts=e.split(t);for(var n=0;parts.length>n;n++){var o=parts[n];i[n]=this.is_camel_case(o)?o:this.ucfirst(o).toLowerCase()}return this.implode(i,t)},in_array:function(t,e){for(var i=0;t.length>i;i++)if(t[i]==e)return!0;return!1},implode:function(t,e){for(var i="",n="",o=0;t.length>o;o++)i+=n+t[o],n=e;return i},trim:function(t){return t.replace(/^\s+|\s+$|\,$/g,"")},ucfirst:function(t){return t.substr(0,1).toUpperCase()+t.substr(1,t.length-1).toLowerCase()}};