(function(F){var A=function(){this.site=new G(this);this.utils=new J(this);this.widgets=new I(this);};var L={reserved:"Add|OnPageReady|OnDocReady",pageReadyFunction:"bottomInit"};A.prototype={Add:function(N,M){return D(this,N,M);}};function D(S,O,N){O=B(O);var T=function(X){var W=(L.reserved.indexOf(X)>-1)?true:false;if(W){E("[AddConstructor] Error: Reserved word '"+X+"'");}return W;};if(O.indexOf(".")>-1){O=(O.charAt(0)===".")?O.slice(1,O.length):O;var R,U=O.split("."),Q=U.length,M=true;for(R=0;R<Q;R++){var V=U[R];if(P===0&&T(V)){return false;}if(!S[V]){if(R!==Q-1){S[V]={};}else{if(typeof N!=="function"){S[V]={};}else{S[V]=N;}}}S=S[V];}}else{if(O.length>0&&!S[O]){if(T(O)){return false;}if(typeof N!=="function"){S[O]={};S=S[O];}else{S[O]=N;S=S[O];}}else{if(T(O)){return false;}S=S[O];}}if(typeof N==="object"&&!H(N)){var P;for(P in N){if(S[P]){E("[AddConstructor] Warning: Overwriting '"+P+"' "+typeof S[P]+". (constructor:"+O+" )");}S[P]=N[P];}}return S;}function G(M){var N=this;this.Add=function(P,O){return D(N,P,O);};this.OnPageReady=(function(){var O=new C(N,M);return O.callback;}());this.OnDocReady=(function(){var O=new K(N,M);return O.callback;}());}function I(){var M=this;this.Add=function(O,N){return D(M,O,N);};}function J(){var M=this;this.Add=function(O,N){return D(M,O,N);};}J.prototype={queryStr:{get:function(S){var N,R=false,O=window.location.search.substr(1),Q=O.split("&"),M=Q.length;for(N=0;N<M;N++){var P=Q[N].split("=");if(P[0]===S){R=""+decodeURIComponent(P[1]);break;}}return R;}},debug:function(N){if(FOX.utils.queryStr.get("stc")==="y"){try{FOX.utils.console(N);}catch(M){FOX.utils.console("[DEBUG] "+M);}}},console:function(M){if(typeof window.console==="object"&&M){console.log(M);}},resizeIFrame:function(N){if(!N){return false;}var M=F(N.target),O=N.src;F("iframe").each(function(){var P=F(this);if(typeof P.attr("src")!=="undefined"){if(P.attr("src").indexOf(O)>-1&&!P.data("resized")){P.css({height:M.outerHeight(true),width:P.parent().innerWidth()});P.data("resized",true);}}});}};J.prototype.pageRefresh={enable:function(){if(typeof ew_enableRefresh==="function"){ew_enableRefresh();}},disable:function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}};J.prototype.environment={get:function(){return(this.isProd(document.location.hostname))?"prod":"dev";},getHostByDesc:function(N){if(typeof window.FOX_pagedescriptor==="undefined"){return false;}var M=window.FOX_pagedescriptor;switch(M){case"fn2":M="foxnews.com";break;case"fb":M="smallbusiness.foxbusiness.com";break;case"fb2":M="foxbusiness.com";break;case"fn-latino":M="latino.foxnews.com";break;default:return false;}if(loc.hostname.indexOf(M)===-1){return false;}if(N){return M;}return loc.protocol+"//"+(loc.hostname.substr(0,M.indexOf))+M;},getDomainHost:function(P,N){var S=window.location,O=S.hostname,R=S.protocol,M=O.split("."),Q=[];if(P){Q.push(R+"//");if(!N){return R+"//"+O;}}if(O.indexOf("latino")>-1){Q.push("latino.");}else{if(O.indexOf("smallbusiness.")>-1){Q.push("smallbusiness.");}else{if(N){Q.push("www.");}}}return Q.join("")+M[(M.length-2)]+"."+M[(M.length-1)];},check:function(S,R){S=S.toLowerCase();var N,P=false,O=false,Q=["smallbusiness.","latino.foxnews.","origin-latino.foxnews.","v8-pvw.","v8-staging.","v8-origin.","v8-origin-www.","www.","origin.","origin-prod.","origin-drupal.","origin-www.","origin-www2.","origin-vignette.","preprod.","preprod2.","pvw.","pvw2.","staging.","staging2."],M=Q.length;for(N=0;N<M;N++){if(S.indexOf(Q[N])===0){O=true;break;}}if(R==="prod"){P=O;}else{if(!O){P=true;}}return P;},isProd:function(M){M=M||document.location.hostname;return this.check(M,"prod");},isDev:function(M){M=M||document.location.hostname;return this.check(M,"dev");}};J.prototype.datetime={format:function(O,N){N=N||null;var T={month:O.getUTCMonth(),day:O.getDay(),year:O.getFullYear(),date:O.getDate(),hour:O.getHours(),minutes:O.getMinutes(),seconds:O.getSeconds(),ampm:((O.getHours()<12)?"am":"pm"),fullStr:O.toString()};var Q={"${mm}":(T.month+1),"${month}":this.getUTCMonthString(T.month),"${month:short}":this.getUTCMonthString(T.month,"short"),"${day}":this.getDayString(T.day),"${day:short}":this.getDayString(T.day,"short"),"${yr}":T.year,"${dd}":((T.date<10)?"0"+T.date:T.date),"${ddTH}":this.oldEnglish(T.date),"${hr}":((T.hour>12)?T.hour-12:T.hour),"${hr:mil}":T.hour,"${min}":((T.minutes<10)?"0"+T.minutes:T.minutes),"${sec}":((T.seconds<10)?"0"+T.seconds:T.seconds),"${ampm}":T.ampm,"${AMPM}":(T.ampm).toUpperCase(),"${AmPm}":((T.ampm).charAt(0)).toUpperCase()+(T.ampm).charAt(1)};if(N===null){var S=this.getUTCMonthString(T.month),R=O.toDateString();return S+" "+R.substr(8).replace(" ",", ");}else{var P;for(P in Q){var M=N.indexOf(P);while(M!==-1){N=N.replace(P,Q[P]);M=N.indexOf(P);}}return N;}},oldEnglish:function(M){M+="";var N=parseInt(M.charAt(M.length-1),10);switch(N){case 1:M+="st";break;case 2:M+="nd";break;case 3:M+="rd";break;default:M+="th";break;}return M;},formatUTCDate:function(N,M){return FOX.utils.datetime.format(N,M);},getUTCMonthString:function(O,M){M=M||"full";var N;switch(M){case"short":N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];break;default:N=["January","February","March","April","May","June","July","August","September","October","November","December"];break;}return N[O];},getDayString:function(O,N){N=N||"full";var M;switch(N){case"short":M=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];break;default:M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];break;}return M[O];}};J.prototype.extLink={set:function(R,P,O,N){R=R||F("a[rel*='external']");var M=this,Q="ext-linked";R.each(function(){var T=F(this),S=F.trim(T.attr("rel")||""),U=(P&&typeof P==="string")?P:(F.trim(T.attr("href")||"")),W=(O)?(!M.confirmLink(U)):true;if((S.toLowerCase()).indexOf(Q)<0&&U.length>0&&U!=="#"&&W){S=(S.indexOf("external")>-1)?S:[S,"external"].join(" ");S=F.trim([S,Q].join(" "));T.attr("rel",S);T.click(function(){window.open(U,"_blank");return false;});if(!T.attr("target")){T.attr("target","_blank");}if(N){var V=(window.FOX_DomainPath||"")+"/static/v/all/img/external-link.png";T.after('<img src="'+V+'" />');}}});},confirmLink:function(P){var M,N=false,O=[".foxnews.com",".foxbusiness.com"];for(M=0;M<O.length;M+=1){if(P.indexOf(O[M])>-1){N=true;break;}}return N;}};function C(M){this.callback=function(){var P=arguments,R=(P.length===1)?"":P[0],Q=(P.length===1)?P[0]:P[1];var O=(R.length>0)?M.Add(R,Q):Q,N=M[L.pageReadyFunction]||function(){};if(typeof O==="function"){M[L.pageReadyFunction]=function(){N();O();};}else{if(typeof O==="object"&&O.init){M[L.pageReadyFunction]=function(){N();O.init();};}}};}function K(M){this.callback=function(){var O=arguments,Q=(O.length===1)?"":O[0],P=(O.length===1)?O[0]:O[1];var N=(Q.length>0)?M.Add(Q,P):P;if(typeof N==="function"){F(document).ready(function(){N();});}else{if(typeof N==="object"&&N.init){F(document).ready(function(){N.init();});}}};}function H(M){M=M||false;return Object.prototype.toString.call(M)==="[object Array]";}function B(M){return(!M)?"":M.toString().replace(/^\s+/,"").replace(/\s+$/,"");}function E(M){if(typeof window.console==="object"&&M){console.log(M);}}window.FOX=window.fox=new A();}(jQuery));(function($){window.FOX_DomainPath=(function(){var ret="",loc=window.location,host=loc.hostname,domainHost=FOX.utils.environment.getDomainHost();var idx=function(val){return(host.indexOf(val)>-1)?true:false;};if(FOX.utils.environment.isProd()){var sub=(idx("staging."))?"staging":"www";if(sub==="staging"){ret="http://staging.fbnstatic.com";}else{ret="http://global.fncstatic.com";}}else{if(idx("-qa.")){ret="http://qa.global.fncstatic.com";}}return ret;}());FOX.Add("site",{topInit:function(){FOX.site.ads.init();FOX.site.metaDescriptor.init();FOX.site.linkDescriptor.init();FOX.Add("site.mediaIconOverlay",FOX_MediaIconOverlay);},bottomInit:function(){FOX.site.tracking.init();FOX.utils.extLink.set($("a[rel*='external']",null,true));}});FOX.Add("site.tracking",{init:function(){}});FOX.Add("site.ads",{init:function(){$(document).ready(function(){$.ad.init();});},writeInline:function(id,type){if("dc"===type){$.ad.dc.inline(id);}else{fox.utils.debug("[global.js] inline ads are not enabled");}}});FOX.Add("site.metaDescriptor",{init:function(){var obj={};$("meta").each(function(){var item=$(this),nameAttr=item.attr("name"),propAttr=item.attr("property"),val=item.attr("content");if(nameAttr){if(!obj.name){obj.name={};}obj.name[nameAttr]=(val)?val:false;}else{if(propAttr){if(!obj.property){obj.property={};}obj.property[propAttr]=(val)?val:false;}}});window.FOX_metadescriptor=obj;}});FOX.Add("site.linkDescriptor",{init:function(){var obj={};$("link").each(function(){var item=$(this),relAttr=item.attr("rel"),val=item.attr("href");if(relAttr){if(!obj.rel){obj.rel={};}obj.rel[relAttr]=(val)?val:false;}});window.FOX_linkdescriptor=obj;}});FOX.Add("site.mediaOverlay",{set:function(elm){var MO=this;function set(type){elm.find(".m > a").each(function(){MO.render.common(elm,$(this),type);});}if(elm.hasClass("slideshow-ct")){set("slideshow");}else{if(elm.hasClass("interactive-ct")||elm.hasClass("freeform-ct")){set("interactive");}}},render:{common:function(parent,elm,type){var MO=this,imgElm=elm.find("img");function trigger(img){var dim=[img.width,img.height],overlay=MO.useOverlay(dim[0],type);if(!overlay){return false;}if(dim[0]<156){return false;}parent.find("h3 span.type-"+type).hide();elm.css({position:"relative",display:"block"});var html=$('<span class="m-img-overlay"><img src="'+overlay+'" /></span>');html.css({position:"absolute",top:"0px",left:"0px",width:dim[0],height:dim[1]});html.find("img").css({width:dim[0],height:dim[1]});elm.append(html);parent.find(".m > .credit").hide();var openWin=function(){window.open(elm.attr("href"),"_self");};parent.children(":not(.related):not(.m)").find("a").click(function(){openWin();return false;});parent.find("> .m").click(function(){openWin();return false;});}var img=new Image();var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var setUp=function(){img.onload=function(){trigger(img);};img.src=imgElm.attr("src");};if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){setUp();clearInterval(interval);}},650);}else{setUp();}},useOverlay:function(width,type){var src=(window.FOX_DomainPath||"")+"/static/v/all/img/"+type+"_${width}x${height}.png";var types={slideshow:[132,156,190,228,259,267,328,397,604],interactive:[132,156,190,228,259,267,328,397,604],video:[132,156,190,228,259,267,328],_hVar:[74,88,107,128,146,151,185,224,341]};if(!types[type]){return false;}var X,arr=types[type],idx=0,sel=arr[0];for(x=0;x<arr.length;x++){if(width<=arr[x]){idx=x;sel=arr[x];break;}}var srcW=sel,srcH=types._hVar[idx];switch(type){case"slideshow":if(width===180){srcW=180;srcH=101;}break;}return src.replace("${width}",srcW).replace("${height}",srcH);}}});FOX.Add("site.videoIconOverlay",{set:function(){var x,i,FS=this,args=arguments,obj={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(args.length===1&&typeof args[0]==="object"){for(i in args[0]){obj[i]=args[0][i];}}else{for(x=0;x<args.length;x++){switch(x){case 0:obj.elm=args[0];break;case 1:obj.ratio=args[1];break;case 2:obj.dim=args[2];break;case 3:obj.position=args[3];break;case 4:obj.size=args[4];break;case 5:obj.useAltImg=args[5];break;case 6:obj.altHover=args[6];break;case 7:obj.noClick=args[7];break;}}}var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];FS.setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){FS.setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});},useAbsImg:function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;},setOverlay:function(obj){var FS=this,elm=obj.elm,ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false;var overlaySrc=(window.FOX_DomainPath||"")+"/static/v/all/img/vp-overlay${dim}${hover}.png";function mFloor(val){return Math.floor(val);}function px(val){return val+"px";}function hover(over){over=(altHover)?((over)?false:true):over;var dim;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?("-"+dim):"";return overlaySrc.replace("${dim}",dim).replace("${hover}",(over)?"-hover":"");}function set(){var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=0.03,edgeH=0.05;edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&FS.useAbsImg(imgW)){imgW=FS.useAbsImg(imgW);imgH=imgW;absDim=imgW;}css.width=px(imgW);css.minHeight=px(imgH);var overlay=$('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+hover()+'"/></span>'),titleLink=elm.parent().find("> h3:first");overlay.find("img").css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false,prevOverlay=parent.find("> .vid-overlay:visible");if(prevOverlay.size()>0){prevOverlay.css("display","none");}parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".vid-overlay"),overlayImg=overlayElm.find("img");function hoverOver(over){if(over&&!isHover){isHover=true;overlayImg.attr("src",hover(true));}else{if(isHover){isHover=false;overlayImg.attr("src",hover());}}}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});}var hoverImg=new Image();hoverImg.src=hover(true);set();}});var formatNumber=window.formatNumber=function(num,dec,thou,pnt,curr1,curr2,n1,n2){var i,x=Math.round(num*Math.pow(10,dec));if(x>=0){n1=n2="";}var y=(""+Math.abs(x)).split(""),z=y.length-dec;if(z<0){z--;}for(i=z;i<0;i++){y.unshift("0");}if(z<0){z=1;}y.splice(z,0,pnt);if(y[0]==pnt){y.unshift("0");}while(z>3){z-=3;y.splice(z,0,thou);}var r=curr1+n1+y.join("")+n2+curr2;return r;};window.AjaxGetEvent=function(event_data,callback){var GE=this;GE.mydata=event_data;GE.mycallback=callback;GE.get=function(url,params,type){$.get(url,params,$.context(this).callback("eventcallback"),type);};GE.eventcallback=function(ajaxdata){GE.mycallback(ajaxdata,GE.mydata);};};}(jQuery));(function(A){A(document).ready(function(){loadAttempt(5,500,function(){return(typeof A.ad!="undefined"&&typeof A.ad._meta.raw.genre!="undefined")?true:false;},function(){if(typeof ew_disableRefresh==="function"&&A.ad._meta.raw.genre!="homePage"){ew_disableRefresh();}else{if(typeof ew_enableRefresh==="function"&&A.ad._meta.raw.genre=="homePage"){ew_enableRefresh();}}});});}(jQuery));function ew_enableRefresh(){var A=600;try{ew_disableRefresh();}catch(B){}window.refreshInterval=setInterval(function(){location.reload(false);},A*1000);}function ew_disableRefresh(){clearInterval(window.refreshInterval);}(function($){var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};function WeatherService(namespace){this.namespace=namespace;var initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:false,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_HEALTH_CHECK:"http://www.foxnews.com/feeds/web/status/wsi/json/",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};var i;for(i in initVars){this[i]=initVars[i];}this.extService=new ExternalServices(this);}WeatherService.prototype={init:function(fn){var ws=this;ws.getCurrentLocation(function(data){ws.createWeatherLocationCookie(data);ws.renderWidget();if(typeof fn==="function"){fn();}});},getCurrentLocation:function(){var args=arguments,fn=false,compiled=false;if(args.length===0){return false;}else{if(args.length===1){fn=args[0];}else{compiled=(typeof args[0]==="boolean")?args[0]:false;fn=args[1];}}if(typeof fn!=="function"){return false;}var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}';var trigger=function(val){val=(compiled)?ws.createObjFromJSON(val):val;fn(val);};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);if(!weatherlocObj||!weatherlocObj.location||!weatherlocObj.location[0].loc_id){trigger(initData);}else{trigger(cookie);}}else{if(window.CONST_Akamai_GEO&&CONST_Akamai_GEO.countryCode==="US"){ws.getGeoLocation(function(data){trigger(data||initData);});}else{trigger(initData);}}},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo";var ret=function(info){if(typeof fn==="function"){fn(info);}};var zip=(function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return(!isNaN(zip))?zip:false;}());if(zip){ws.location_searchresults_callback_geo=function(data){ret(data);};$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}else{ret(false);}},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)};this.extService.reloadWidgets();},weatherCookie:function(name,value,options){if(typeof value!=="undefined"){options=options||{};if(value===null){value="";options.expires=-1;}var expires="";if(options.expires&&(typeof options.expires==="number"||options.expires.toUTCString)){var date;if(typeof options.expires==="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires="; expires="+date.toUTCString();}var path=options.path?"; path="+(options.path):"",domain=options.domain?"; domain="+(options.domain):"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("");}else{var cookieValue=null;if(document.cookie&&document.cookie!==""){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&city!==""&&country!==""){var expDate=new Date();if(tempHi===""||tempLo===""){expDate.setTime(expDate.getTime()+(60*1000));}else{expDate.setTime(expDate.getTime()+(3*60*60*1000));}this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});this.renderFavorites();}},createWeatherLocationCookie:function(jsonString){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(favLocCookieString!==""){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}else{this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId);},createObjFromJSON:function(jsonString){if(jsonString!==""){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}else{return null;}},createLocJSObj:function(data){if(!data.loc_id){return null;}var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];if(i==="city"){val=val.replace("`","'");}obj[i]=val;}var fullArr=[];fullArr.push(obj.city||"");fullArr.push((obj.loc_id.substr(0,2).toUpperCase()!=="US"&&(obj.country||obj.state))?obj.country:obj.state);obj.fullCityString=fullArr.join(", ");return obj;},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered){return false;}else{this.serviceTriggered=true;}config=(typeof config==="object")?config:{};if(typeof serviceDomain!=="undefined"){this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS;this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER;this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP;this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP;if(document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)==-1){this.WEATHER_COOKIE_DOMAIN=document.location.hostname;}}if(config){for(i in config){var val=config[i];switch(i){case"icons":if(val===24){self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24");}break;}}}this.init();},renderWidget:function(){$("body").data("weather-rendered",true);var ws=this;ws.serviceTriggered=true;setTimeout(function(){ws.renderHeaderWeather();ws.renderHeaderLocationChange();},500);},renderHeaderWeather:function(){var ws=this;var trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current");});};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc"));var locObject=this.createLocJSObj(weatherlocObj.location[0]);if(this.getWeatherDataCookie(locObject.loc_id)){this.headerDisplayAction(locObject.loc_id);ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id));ws.renderWeatherWidget(locObject.loc_id);}else{this.fetchAndSaveWeatherJSONCookie(locObject.loc_id);}trigger();}else{this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id);trigger();});}},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml);},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML;},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(widgetElm.size()===0){return false;}var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=(widgetElm.hasClass("use-lg-icons"))?true:false,useImgSrc=(useLgIcons)?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE;var imgDim=(function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];val=val.replace("icons_","").split("x");return val;}());if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie);var wdObj=headerDataObj.weatherData;var form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+((wdObj.stateShort.length>0)?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i];var imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT;var hiTemp=dataSource.hi;var lowTemp=dataSource.lo;if(i===0){item.find(".current").html(wdObj.currentTemp+"&#176;");}if(item.find(".media img").size()===0){item.find(".media").html("<img />");}item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}});var hiLow="Hi "+((hiTemp.length>0)?hiTemp+"&#176;":"-")+" | Lo "+((lowTemp.length>0)?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow);item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});}});}widgetElm.addClass("active");if(widgetElm.data("setListeners")){return false;}widgetElm.data("setListeners",true);widgetElm.find("form:first").each(function(){var timeout,form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=true;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val);elm.val("");}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val((val==="")?elm.data("currVal"):val);});form.hover(function(){overSearch=true;},function(){overSearch=false;});$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");if(val!==curr&&val!==txt){form.submit();}}});form.submit(function(){ws.weathetStatusCheck(function(){search.data("currVal",search.val());ws.locationSearchAction(this,"#weather_widgetInput",ws.UPDATE_HEADER_ACTION);},function(){search.data("currVal",search.val());widgetElm.addClass("na");if(form.find("> fieldset > legend").size()>0){widgetElm.addClass("w-mod-1");}if(widgetElm.find("p.notice").size()===0){$('<p class="notice">Sorry, cannot update location at this time.</p>').insertBefore(form);}clearTimeout(timeout);timeout=setTimeout(function(){widgetElm.removeClass("na");widgetElm.removeClass("active");search.val(txt);ws.renderWidget();},10000);});return false;});});},weathetStatusCheck:function(successFN,failFN){var self=this,callbackFN="FOX_WeatherServ";if(!window[callbackFN]){window[callbackFN]=function(data){if(!data){failFN();}else{if(data.online&&data.online==="true"){successFN();}else{failFN();}}};}$.ajax({type:"GET",url:self.SERVICE_HEALTH_CHECK,data:{cb:cacheBuster(10)},dataType:"script",async:true,cache:true});},searchFieldOnFocus:function(inputField){if(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD){inputField.value="";}},searchFieldOnBlur:function(inputField,message){if(inputField.value===""){inputField.value=message;}},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();if(!reqAC.match(regexp)){showToConsole(ws.MSG_AIRPORT_CODE_ERROR);return false;}$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(parsed.location.length>0){var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(airportLocId).attr("value",airportLocObj.loc_id);}else{showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}}},error:function(){showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}});},getSetLocationAction:function(location,callback){if(!location){return false;}var ws=this;var locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");var upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(location)&&typeof callback==="function"){ws.fetchAndSaveWeatherJSONCookie(location,false,function(data){callback(ws.createObjFromJSON(data));});}},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId)){$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",ws.currentLocId);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget();});}}else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length===1){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget();});}else{$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",exactMatchObj.loc_id);}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}},gotoYourWeatherPage:function(locId,city,state,country){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL;},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);if(!locationId||locationId===""){locationId=ws.WEATHER_DEFAULT_LOCATION;}$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& ");feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>');weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>');weather_dayly.addClass("c");weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>');weather_hourly.addClass("c");average_records.replaceWith('<h2 class="title">'+text+"</h2>");});},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length>1){searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>';for(resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;if(resultsIndex%2===0){searchResultsHtml+='<tr class="even">';}else{searchResultsHtml+="<tr>";}searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>";}searchResultsHtml+="</table>";}else{if(locationJson.location.length===1){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country);}else{searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";}}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}$(divClass).html(searchResultsHtml);};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>");}});},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){airportDelayHtml+='<div class="delay">';for(delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>";}airportDelayHtml+="</div>";}else{airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";}$(divClass).html(airportDelayHtml);}});},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>';$(divClass).html(marineHtml);$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine");});try{FOX.site.channel.listDropdown.init("marineState");}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var marineLocJson=ws.createObjFromJSON(data);if(marineLocJson){if(marineLocJson.marineLocations.length>0){ws.generateTideLocationsList(marineLocJson.marineLocations);}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>";}$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").removeClass("disabled");}else{tideLocDropdown+='<li lang=""></li>';$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").html("- select -");$("#tide-cities-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("marineCities");}catch(err){}},generateStatesList:function(statesList){var i,ws=this,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++){listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";}return listHtml;},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>';$(divClass).html(skiHtml);$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003");});try{FOX.site.channel.listDropdown.init("skiState");}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var skiResortJson=ws.createObjFromJSON(data);if(skiResortJson){if(skiResortJson.skiResorts!==null&&skiResortJson.skiResorts.length>0){var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts;for(var x=0;x<skiArray.length;x+=1){if(x===0){newSkiReportHolder.push(skiArray[0]);}else{if(newSkiReportHolder[newSkiReportHolder.length-1]["resort_name"]!==skiArray[x]["resort_name"]){newSkiReportHolder.push(skiArray[x]);}}}ws.generateSkiResortsList(newSkiReportHolder);}else{return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>";}$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").removeClass("disabled");}else{skiResortsDropdown+='<li lang=""></li>';$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").html("- select -");$("#ski-resorts-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("skiResorts");}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml);});},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";if(skiObj.base_min&&skiObj.base_max){baseDepth=skiObj.base_min+" of "+skiObj.base_max;}var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml;},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=true;for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){alert("You have already saved this location to My Favorites.");saveFavorite=false;}}if(saveFavorite){favLocationArray.push(locId);this.createWeatherFavoritesCookie(favLocationArray);this.renderFavorites();}}else{alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.");}}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray);this.renderFavorites();}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break;}}this.createWeatherFavoritesCookie(favLocationArray);}var li=$("#li_"+locId),ul=li.closest("ul.favorites");li.remove();if(ul.children().size()===0){ul.closest(".weather.favorites > ul").children(":not(:last-child)").remove();}},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;if(dataObj.locationId.substr(0,2)!=="US"){stateToDisplay=dataObj.country;}var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml;},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(ws.weatherCookie("weatherfavlocs")).split("|");favoritesHtml+='<li><ul class="favorites">';for(favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie){favDataObj=ws.createObjFromJSON(favDataCookie);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){if(data){ws.createWeatherDataCookie(favLocationId,data);favDataObj=ws.createObjFromJSON(data);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});}}favoritesHtml+="</ul></li><li>&nbsp;</li>";}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml);$("ul.favorites li:last-child",favoritesObj).addClass("last");$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this);});},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml);},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie=(typeof setAsCookie==="boolean")?setAsCookie:true;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){if(setAsCookie){ws.createWeatherDataCookie(locId,data);ws.renderWidget();}else{if(typeof callback==="function"){callback(data);}}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data);if(typeof fn==="function"){fn();}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data,textStatus){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode);}},error:function(XMLHttpRequest,textStatus,errorThrown){showToConsole(ws.MSG_DEFAULT_ERROR);}});return regionCode;},weatherCityAutoComplete:function(element){var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(inputValue.length<1){return ;}var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" ");if(tempIndex>0){appendix=appendix.substr(0,tempIndex);}var initial=inputValue.charAt(0).toLowerCase();if(initial.match(/[a-z]/)===null){return ;}if(typeof ws.weatherCityData[initial]==="undefined"){if(typeof ClientStorageManager==="undefined"){triggerAjaxCall(false);}else{var restrict=["cookie","msiestorage"];if(restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())===-1){ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities;triggerAutoComplete(cities);}else{triggerAjaxCall(true);}});}else{triggerAjaxCall(false);}}}else{triggerAutoComplete(ws.weatherCityData[initial]);}function triggerAjaxCall(useCSM){if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}if(!ws.ACListener[ACElementId].ajaxReady){return ;}ws.ACListener[ACElementId].ajaxReady=false;$(preloaderObj).show();$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:({cityNameInitial:initial,cb:cacheBuster()}),dataType:"text",cache:true,success:function(data,textStatus){if(data){var cities=data.replace(/var cities\=/,"");if(useCSM){ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value;},error:function(err){}});if(typeof ws.weatherCityData[initial]==="undefined"){ws.weatherCityData[initial]=cities;}triggerAutoComplete(ws.weatherCityData[initial]);}else{ws.weatherCityData[initial]=cities;triggerAutoComplete(ws.weatherCityData[initial]);}$(preloaderObj).fadeOut("slow");ws.ACListener[ACElementId].ajaxReady=true;}else{$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}},error:function(XMLHttpRequest,textStatus,errorThrown){$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}});}function triggerAutoComplete(cities){cities=eval(cities);if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}else{if(ws.ACListener[ACElementId].fchar!==initial){ws.ACListener[ACElementId].init=false;}}if(!ws.ACListener[ACElementId].init){$(element).autocomplete(cities,{max:20,width:193,selectFirst:false,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t;}}).result(function(event,item){ws.currentLocId=item.id;ws.currentCityString=item.t;});ws.ACListener[ACElementId].init=true;ws.ACListener[ACElementId].fchar=initial;}}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=false;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>');htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />');htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this);clearTimeout(formTimeout);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?ws.TXT_HEADER_SEARCH_FIELD:val);formTimeout=setTimeout(function(){ws.changeHeaderLocation();},3000);});elm.submit(function(){clearTimeout(formTimeout);ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION);return false;});});$(".weather-search, #weather_corner").append(htmlElm);},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");if(info.is(":hidden")){search.css("display","none");info.css({opacity:"0",display:"inline"});animateFn.show(info,{speed:300,type:"swing"});}else{info.css("display","none");search.css({opacity:"0",display:"inline"});animateFn.show(search,{speed:300,type:"swing"});}},headerDisplayAction:function(locationId){var ws=this;var headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px; height:24px;"/></span> ');htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(wdObj.days[0].image.length===0){elm.css("display","none");}else{if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}}});htmlElm.find("a").each(function(){var aTag=$(this);var text=aTag.text().toLowerCase();aTag.click(function(){if(text.indexOf("forecast")>-1){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);}if(text.indexOf("edit")>-1){ws.changeHeaderLocation();}return false;});});$(".weather-search, #weather_corner").html(htmlElm);}}};function ExternalServices(root){this.root=root;this._DataObj=false;this._ExtWidgets=[];}ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;x<len;x++){var fn=widgets[x];if(typeof fn==="function"){fn();}}},setWidget:function(fn,execute){var EX=this;if(typeof fn==="function"){EX._ExtWidgets.push(fn);if(execute){fn();}}},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm){return false;}var EX=this,root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val===txt)?"":val);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?txt:val);});form.submit(function(){root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION);return false;});});}};function showToConsole(str){if(typeof (console)==="object"){console.log(str);}}function cacheBuster(freq){freq=freq||false;var date=new Date(),str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();str+=hr.toString()+((freq&&!isNaN(freq))?(Math.floor(min/parseFloat(freq))).toString():"");return str;}var weather_service=window.weather_service=new WeatherService("weather_service");var animateFn={isIE:function(){return $.browser.msie;},animate:function(elm,cfg){if(!this.isIE()){if(!cfg.speed){cfg.speed=300;}if(!cfg.type){cfg.type="swing";}elm.animate(cfg.css,cfg.speed,cfg.type,function(){if(cfg.callback){cfg.callback();}});}else{elm.css(cfg.css);elm.css("opacity","");if(cfg.callback){cfg.callback();}}},hide:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"0"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);},show:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"1"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);}};}(jQuery));(function($){var _cbStr=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1002";var CONST={thirdParty:{recaptcha:{url:"/ajax/authentication/recaptcha.jsp",elmId:"recaptcha_div",id:"6LcspgwAAAAAAPIfJ3yUt1aUl_Thr8TQfQmR1oRP",settings:{theme:"clean"}},disqus:{widget:"DQIntegrationService",cookie:{name:"p_DQS",expires:14},hash:{empty:"e30=",expires:60}},idms:{cookie:{name:"p_IDMS",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_IDMS_auth_logged_in",logout:"FOX_IDMS_auth_logged_in"}},fm:{cookie:{name:"SABRE_ID",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_FM_auth_logged_in",logout:"FOX_FM_auth_logged_in"}}}};var AuthService=window.AuthService=function(initVars){this.validationUrl="/authentication/registration/validate/";this.getRegistrationDataUrl="/authentication/registration/get";this.loginSubmitUrl="/authentication/login/submit";this.logoutSubmitUrl="/authentication/logout/submit";this.requestLogoutUrl="/authentication/logout/submit";this.refreshAuthUrl="/authentication/login/refresh?"+_cbStr+"=t";this.forgottenPasswordSubmitUrl="/authentication/forgotten_password/submit";this.registrationSubmitUrl="/authentication/registration/submit";this.ajaxRetrieveHtmlUrl="/ajax/authentication/includes.jsp";this.newsAlertSubscriptionUrl="/portal/newsalertsubscribe";this.defaultDomain="foxnews.com";var i;for(i in initVars){this[i]=initVars[i];}};AuthService.prototype={init:function(config){var i,as=this;for(i in config){this[i]=config[i];}if(window.FOX_isMnt&&FOX_isMnt()){$("#account, #authentication").hide();}this.thirdPartyAPI=new ThirdPartyAPI(this);},extend:function(obj){var i,self=this;for(i in obj){this[i]=obj[i];}},createObjFromJSON:function(jsonString){if(typeof jsonString==="string"){if(($.trim(jsonString)).length>0){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}}return false;},isLoggedIn:function(){return($.cookie("p_UN")&&$.cookie("p_UN")!=="")?true:false;},isThirdParty:function(){return($.cookie("p_Thirdparty"))?true:false;},getDisplayName:function(){var as=this;function pipeCheck(str){var separator="|id:",idx=str.lastIndexOf(separator);if(idx<1){return str;}return str.substr(0,idx);}if(as.isLoggedIn()){var displayName=false;if(typeof $.cookie("p_DN")==="string"){var dn=$.cookie("p_DN");if(dn.length>0){dn=pipeCheck(dn);displayName=dn.replace(/\+/g," ").replace(/\"/g,"");}}return(displayName)?displayName:as.getUsername();}return"";},getUsername:function(){if(this.isLoggedIn()){return $.cookie("p_UN");}},getUserEmail:function(){return(this.isLoggedIn())?$.cookie("p_EM"):"";},getUserLocation:function(){return(this.isLoggedIn())?$.cookie("p_UL"):"";},getOverlayHtml:function(overlayView,origDomain,callbackFn){callbackFn=callbackFn||false;var as=this;if(!origDomain){origDomain=as.defaultDomain;}$.ajax({type:"GET",async:false,url:as.ajaxRetrieveHtmlUrl,data:({view:overlayView,authDomain:origDomain,cb:_cbStr}),success:function(data,textStatus){$("body").append(data);if(typeof callbackFn==="function"){callbackFn();}}});},closeOverlay:function(elementId){var as=this,elm=$("#"+elementId);elm.find("input[type*=text], input[type*=password]").val("");elm.find("input:checkbox:checked").attr("checked","");elm.find("input[type*=text]").removeClass("error");as.overlay.hide(elm);},providerOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#login-provider").size()===0){as.getOverlayHtml("login-provider",authDomain,callbackFn);}as.initProviderOverlay();as.overlay.show("#login-provider");$("#user-login-form-overlay").find("input[name*=username]").focus();return false;}return true;},initProviderOverlay:function(){var as=this;var login_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("User name and password are required.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.login(elm);return false;}};$("#user-login-form-overlay").validate(login_validation_options);$(".thirdparty a img").hover(function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html($(this).attr("alt"));thirdPartyTooltip.addClass($(this).attr("name")).css("visibility","visible");},function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html("");thirdPartyTooltip.removeClass($(this).attr("name")).css("visibility","hidden");});var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("The email address you entered is invalid.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);$("#forgot-password-overlay").unbind("click").click(function(){$("#reset-password.reset").toggle();});},registrationOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#registration-overlay").length===0){as.getOverlayHtml("registration-overlay",authDomain,callbackFn);}increaseRefresh();$("#reg_user_name").removeAttr("readonly");$("#reg_user_name").next(".validate").next(".validate").children(".sprites").show();as.initRegistrationOverlay();as.overlay.show("#registration-overlay");return false;}return true;},initRegistrationOverlay:function(){var as=this;var registration_validation_options={submitHandler:function(form){as.register($(form));return false;},errorElement:"p",errorPlacement:function(err,elm){var errMsg=err.text(),id=elm.attr("id");if(elm.data("_errMsg")===errMsg){return false;}elm.data("_errMsg",errMsg);var parent=elm.parent(),marker=parent.find("> .validate:first .sprites"),msgAlert=parent.find("> .error-tip p.err-msg"),errMsg=err.text(),reqTxt=parent.find("> .req-text");var css={valid:"check",invalid:"red-exclamation"};reqTxt.hide();var noMsg="reg_birth_year";var noMarker="reg_zip_code|reg_location";if(msgAlert.size()===0&&noMsg.indexOf(id)===-1){var validate=parent.find("> .validate:first");if(id==="agreement"){validate=elm;}msgAlert=$('<div class="error-tip"><span class="form-note"><p class="err-msg"></p></span></div>').insertAfter(validate);msgAlert=parent.find("> .error-tip p.err-msg");if(id==="agreement"){parent.find("> .error-tip").css({position:"absolute",width:"220px",right:"0",top:"0"});}}msgAlert.css("padding-top","0px");if(errMsg.length===0){if(noMarker.indexOf(id)===-1){marker.removeClass(css.invalid).addClass(css.valid);}msgAlert.html("&nbsp;");}else{if(noMarker.indexOf(id)===-1){marker.removeClass(css.valid).addClass(css.invalid);}msgAlert.html(errMsg);}if(marker.is(":hidden")&&noMarker.indexOf(id)===-1){marker.css("display","block");}},success:function(){},rules:{propID_username:{required:true,minlength:5,maxlength:15,validChars:true,remote:{url:as.validationUrl,type:"post"}},propID_email:{required:true,email:true,maxlength:250,strictEmail:true,remote:{url:as.validationUrl,type:"post"}},propID_pass1:{required:true,noSpaces:true,minlength:5,maxlength:12},propID_pass2:{required:true,noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true,remote:{url:as.validationUrl,type:"post"}},propID_birthyear:{required:true,min:1900,isMaxYear:true},propID_terms:{required:true}},messages:{propID_username:{required:"Please enter a username",minlength:"Your username must consist of at least 5 characters",maxlength:"Your username is too long",validChars:"please supply valid characters only.",remote:"This username is already in use."},propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_terms:{required:"In order to join Fox News community you must agree to our terms and conditions. Please review and check the box to join."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code.",remote:"Please enter a valid United States zip code."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#registration").validate(registration_validation_options);as.showRecaptcha();},initOpxLogin:function(){var as=this;var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){var message="The email address you entered is invalid.";elm.find(".error-box-login").html(message).show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);},initEditProfile:function(){var as=this;var edit_profile_validation_options={debug:false,submitHandler:function(form){if($("#reg_email").val()===""&&$("#reg_email2").val()===""){$("#reg_email").val($("#reg_curemail").val());$("#reg_email2").val($("#reg_curemail").val());}form.submit();return false;},errorElement:"p",errorPlacement:function(error,element){var elm=$(element),elem_pos=elm.position(),error_message=$(error[0]).html(),error_name=elm.attr("id").replace("reg","err");error_html=[];error_html.push('<div class="regoverlay_container error-tip" id="'+error_name+'">');error_html.push('<div class="overlaytip_top"></div><div class="form-note"><img src="/static/v/all/img/alert-yellow.gif" alt="" />');error_html.push('<p class="err-msg">'+error_message+'</p></div><div class="overlaytip_btm"></div></div>');error_html.join("");$("div.regoverlay_container.error-tip").hide();var errorElm=$("div#"+error_name);if(errorElm.size()>0){if(error_message!==""){errorElm.find("p.err-msg").html(error_message).show();}}else{elm.after(error_html);errorElm.hide();}errorElm.css({top:(elem_pos.top-80)+"px",left:(elem_pos.left+50)+"px"});errorElm.next(".validate > .sprites").removeClass("check").addClass("red-exclamation").show();},success:function(label){var errDiv=$("div#"+$(label).attr("htmlfor").replace("reg","err"));errDiv.hide();errDiv.next(".validate > .sprites").removeClass("red-exclamation").addClass("check");},rules:{propID_email:{required:false,email:true,maxlength:250,strictEmail:true},propID_email2:{equalTo:"#reg_email"},propID_pass1:{noSpaces:true,minlength:5,maxlength:12},propID_pass2:{noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true},propID_gender:{required:true},propID_birthyear:{required:true,min:1900,isMaxYear:true}},messages:{propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_email2:{required:"Please confirm your email address.",equalTo:"Please double check your email. They do not match."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code."},propID_gender:{required:"Please submit your gender."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#reg_profile").validate(edit_profile_validation_options);},forgotPasswordOverlay:function(obj){var as=this;if(!as.isLoggedIn()){if($("#forgot-password-overlay").size()===0){as.getOverlayHtml("forgot-password-overlay");}var offset=$(obj).offset();var leftPos=offset.left-$("#forgot-password-overlay").width();as.overlay.show("#forgot-password-overlay");return false;}return true;},login:function(formObj){formObj=$(formObj);var as=this,user=formObj.find("input[name*=username]").val(),pass=formObj.find("input[name*=password]").val(),rememberMe=(formObj.find("input[name*=rememberMe]:checked").size()>0)?true:false,numOfDays=(rememberMe)?365:0;$.ajax({type:"POST",url:as.loginSubmitUrl,data:({username:user,password:pass,authDomain:as.domain,rememberMe:rememberMe}),dataType:"text",success:function(data,textStatus){var loginResponse=as.createObjFromJSON(data);var messageArr=loginResponse.authentication.message.split(" ");if(!loginResponse){showToConsole("[authSrv.login] No data returned from request.",true);return false;}if(loginResponse.authentication.status==="ok"){if(typeof $.ad!="undefined"){$.ad.track({login:{userid:"fox login - id: "+as.getDisplayName()+" email:"+as.getUserEmail()}});}as.onSuccessLogin();as.thirdPartyAPI.disqus.login(loginResponse);as.thirdPartyAPI.idms.login(loginResponse);as.thirdPartyAPI.fileMobile.login(loginResponse);as.closeOverlay("login-provider");if(as.domain==="foxnews.com"&&window.location.pathname.indexOf("/community/user/")>-1){window.location.reload();}}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again.").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again later.").show();}});},logout:function(origDomain){var as=this;origDomain=origDomain||as.defaultDomain;$.ajax({type:"POST",url:as.logoutSubmitUrl,data:({authDomain:origDomain}),success:function(data,textStatus){if(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.logout] No data returned from request.",true);return false;}if(authObj.authentication.status==="ok"){as.thirdPartyAPI.disqus.logout(authObj,function(){as.thirdPartyAPI.idms.logout(authObj,function(){as.thirdPartyAPI.fileMobile.logout(authObj,function(){if(window.location.pathname.indexOf("/community/user/profile")>-1){window.location.href="http://www.foxnews.com/index.html";}else{window.location.reload();}});});});}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});},requestLogOut:function(config){config=config||{};var as=this;$.ajax({type:"GET",url:as.requestLogoutUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},requestLoginInfo:function(config){config=config||{};var as=this;$.ajax({type:"POST",url:as.refreshAuthUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},forgotPassword:function(formObj){formObj=$(formObj);var as=this,email=formObj.find("input[name*=emailResetField]").val();$.ajax({type:"POST",url:as.forgottenPasswordSubmitUrl,data:({email:email}),dataType:"text",success:function(data,textStatus){var forgotPasswordResponse=as.createObjFromJSON(data);if(!forgotPasswordResponse){showToConsole("[authSrv.forgotPassword] No data returned from request.",true);return false;}if(forgotPasswordResponse.authentication.status==="ok"){formObj.find(".error-box-login").hide();formObj.find(".reset-input-container").hide();formObj.find(".confirm-box-login").html("A reset link has been sent to the email provided.").show();}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("The email address you entered is invalid").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("We're sorry your password cannot be reset at this time. Please try again later.").show();}});},register:function(formObj){var as=this,privacy=(formObj.find("#reg_location_confirm:checked").size()>0)?"hide":"",challenge=as.thirdPartyAPI.recaptcha.getChallenge(),response=as.thirdPartyAPI.recaptcha.getResponse();var slids=[];if(formObj.find("#fnbreaking:checked").size()>0){slids.push("C2F278094FACCEA62391025B7A52D8EB");}if(formObj.find("#fbbreaking:checked").size()>0){slids.push("5C84B893BD6D939E84FAE1A8E6E9525A");}if(slids.length>0){$.ajax({type:"GET",url:as.newsAlertSubscriptionUrl,data:({slids:slids.join(","),email:$("#reg_email").val()}),dataType:"text"});}$.ajax({type:"POST",url:as.registrationSubmitUrl,data:{authDomain:as.domain,realm:"realm1",username:formObj.find("#reg_user_name").val(),password:formObj.find("#reg_password").val(),email:formObj.find("#reg_email").val(),zip:formObj.find("#reg_zip_code").val(),country:formObj.find("#reg_country").val(),location_privacy:privacy,birth_year:formObj.find("#reg_birth_year").val(),recaptcha_challenge_field:challenge,recaptcha_response_field:response},dataType:"text",success:function(data,textStatus){var registrationResponse=as.createObjFromJSON(data);var message=registrationResponse.authentication.message;if(message.indexOf("successful registration")>-1&&typeof $.ad!=="undefined"){$.ad.track({registration:{userid:"fox registration - id:"+as.getDisplayName()+" - email:"+as.getUserEmail()}});}if(!registrationResponse){showToConsole("[authSrv.register] No data returned from request.",true);return false;}if(registrationResponse.authentication.status==="ok"){$("#registration-error").hide();$("#registration-overlay").hide();as.getOverlayHtml("registration-thankyou-overlay");decreaseRefresh();authentication_service.onSuccessLogin();as.thirdPartyAPI.disqus.login(registrationResponse);as.thirdPartyAPI.idms.login(registrationResponse);as.thirdPartyAPI.fileMobile.login(registrationResponse);as.overlay.show("#registration-thankyou-overlay");$.scrollTo("#registration-thankyou-overlay");$("#clickToClose").focus();}else{var errorMsg=registrationResponse.authentication.message;as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please fix the error and try again. <br/> *"+errorMsg).show();$.scrollTo("#registration-error");}},error:function(XMLHttpRequest,message,errorThrown){as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please try again. <br> *"+message).show();$.scrollTo("#registration-error");}});},overlay:{init:function(action,target){target=$((target||"#registration-overlay"));var as=this;$(action).each(function(){$(action).unbind("click").click(function(){as.show(target);});});},show:function(target){target=$(target);var as=this;if(typeof increaseRefresh!=="undefined"){increaseRefresh();}target.find(".validate a.sprites").unbind("click");if($(".overlay-layer").size()===0){$("body").prepend('<div class="overlay-layer"></div>');}$(".overlay-layer").show();target.each(function(){var elm=$(this);elm.show().fixedBox();if($(window).height()<elm.height()){var scrollTop=$(document).scrollTop();var overlayTop=(target.css("top")).replace(/[a-z]/g,"");var abs=Math.abs(overlayTop)+scrollTop;elm.css({top:abs+"px",position:"absolute"});}elm.find(".field input").removeClass("error").attr("value","");elm.find(".validate a.sprites,.error-tip").hide();var usr=elm.find("#reg_user_name"),usrParent=usr.parent(),pwd=elm.find("#reg_password"),pwdParent=pwd.parent();if(usrParent.find("span.req-text").size()===0){usr.after('<span class="req-text req-user">5-15 characters, cannot be changed</span>');usrParent.focus(function(){elm.find(".req-user").remove();});}if(pwdParent.find("span.req-text").size()===0){pwd.after('<span class="req-text req-password">5-12 characters, no space, case-insensitive</span>');pwdParent.focus(function(){elm.find(".req-password").remove();});}});var close=target.find(".close").parent(),signUpReg=$(".sign_up_registration");close.unbind("click").removeAttr("onclick").click(function(){as.hide(target);return false;});target.find(".buttons input[type='reset']").click(function(){as.hide(target);return false;});signUpReg.click(function(){$(".overlay-layer").show();});},hide:function(target){if(typeof decreaseRefresh!=="undefined"){decreaseRefresh();}$(".overlay-layer").hide();$(target).hide();}},instantiateValidators:function(){var as=this;$.validator.addMethod("validChars",function(value){var i,result=true,iChars="!@#$%^&*()+=-[]\\';,./{}|\":<>?";for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}}return result;},"Please supply valid characters only.");$.validator.addMethod("strictEmail",function(value){return(value.match(/^([a-zA-Z0-9_.\-\+])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/)!==null)||(value==="");},"Please supply valid email characters only.");$.validator.addMethod("noSpaces",function(value){var result=true,strArr=[];if(typeof value==="string"&&value.split(" ").length>1){return false;}return result;},"Please remove the blank spaces.");$.validator.addMethod("validCharsName",function(value){var i,resultName=true,iChars='!@#$%^&*()\\+=[];,./{}|":<>?',iCharshp="-",iCharsap="'",counterhp=0,counterap=0;for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}if(iCharshp.indexOf(value.charAt(i))!==-1){counterhp=counterhp+1;}if(iCharsap.indexOf(value.charAt(i))!==-1){counterap=counterap+1;}}if(counterhp>1){return false;}if(counterap>1){return false;}return resultName;},"Please supply valid characters only.");$.validator.addMethod("isMaxYear",function(value){var result=true,d=new Date(),curr_year=d.getFullYear();if($("#reg_birth_year").val()>(curr_year-13)){return false;}return result;},"You must be at least 13 years old to register for this site.");$.validator.addMethod("zipRequired",function(value){var result=true;country=$("#reg_country").val();if(country==="United States"&&value===""){return false;}return result;},"Zip Code is required.");$.validator.addMethod("zipCheck",function(value){var result=true,regLocation=$("#reg_location");if($("#reg_country").val()==="United States"){regLocation.show();$.ajax({type:"GET",url:as.getRegistrationDataUrl,async:false,data:({zip:$("#reg_zip_code").val()}),dataType:"text",success:function(data,textStatus){if(data){var stateObj=as.createObjFromJSON(data);if(!stateObj){showToConsole("[authSrv.validator] No data returned from request.",true);return false;}var state=stateObj.state_for_zip;regLocation.val((state!=="")?state:"");result=false;}else{regLocation.val("");result=false;}},error:function(XMLHttpRequest,textStatus,errorThrown){regLocation.val("");}});result=(regLocation.val()!=="")?true:false;}else{regLocation.hide();}return result;},"Please enter a valid United States zip code.");},showRecaptcha:function(){var as=this;as.thirdPartyAPI.recaptcha.create();}};var ThirdPartyAPI=(function(){API=function(root){this.root=root;this.recaptcha=new RecaptchaAPI(this);this.disqus=new Disqus(this);this.idms=new IDMS(this);this.fileMobile=new FileMobile(this);};var RecaptchaAPI=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.recaptcha;};RecaptchaAPI.prototype={set:function(fn){var self=this,root=this.root,cfg=this._config;if(typeof Recaptcha!=="undefined"){if(typeof fn==="function"){fn();}}else{window.Recaptcha_Create_Instance=function(){$.loadAttempt(30,500,function(){return(typeof Recaptcha!=="undefined")?true:false;},function(){if(typeof fn==="function"){fn();}});};(function(){var e=document.createElement("script");e.src=cfg.url;e.type="text/javascript";e.async=true;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);}());}},create:function(){var self=this,cfg=this._config,recaptcha_id=cfg.id,divId=cfg.elmId,settings=cfg.settings;self.set(function(){Recaptcha.create(recaptcha_id,divId,settings);});},getChallenge:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_challenge();}return false;},getResponse:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_response();}return false;}};var Disqus=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.disqus;this.set();};Disqus.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;if(cookieVal){unescape(cookieVal);}var trigger=function(){var data={dqs:cookieVal};root.requestLoginInfo({data:data,callback:function(obj){if(!obj){log("[api.disqus] Refresh service returned no hash value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);if(typeof fn==="function"){fn(hash);log("[api.disqus] Hash Refresh Initiated");}}catch(err){log("[api.disqus] Refresh service: "+err);}}});};var loggedOutCookie=function(){root.requestLogOut({callback:function(obj){if(!obj){log("[api.disqus] logout hash service returned no value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);fn(hash);}catch(err){log("[api.disqus] Refresh service: "+err);return false;}}});};var hasExpired=function(hasExpiredFn){var cDate=new Date();var curr={time:cDate,epoch:Math.round(cDate.getTime()/1000),expire:new Date(cDate.getTime()+(cfg.hash.expires*60*1000))};curr.expireEpoch=Math.round(curr.expire/1000);var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0],timestamp=arr[2];if(typeof timestamp==="undefined"){return getLoggedOut();}if(isNaN(timestamp)){return getLoggedOut();}if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}timestamp=parseInt(timestamp,10);var tDate=new Date(timestamp*1000);var ts={time:new Date(tDate),epoch:timestamp,expire:new Date(tDate.getTime()+(cfg.hash.expires*60*1000))};ts.expireEpoch=Math.round(ts.expire/1000);if(curr.epoch>=ts.expireEpoch){if(arr[0]!==cfg.hash.empty){return"yes";}}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;case"yes":log("[api.disqus] Hash Expired");trigger();break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var message=data.authentication.message;if(message.indexOf("|")>-1&&typeof $.ad!=="undefined"){regExpId=/([\w]+)[=]([\w,\s]+)$/;var idArr=message.match(regExpId);$.ad.track({login:{userid:"third party login - id:"+idArr[2].replace(/\s/,"")+", service:"+idArr[1]+".com"}});}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging In");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},logout:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging Out");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},integrate:function(config){config=config||{};var cfg=this._config;var trigger=function(){$.loadAttempt(50,500,function(){return((window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function")||(typeof window["FOX_"+cfg.widget]==="function"))?true:false;},function(){if(window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function"){log("[api.disqus] Integrating ");fox.widgets[cfg.widget](config);}else{if(typeof window["FOX_"+cfg.widget]==="function"){log("[api.disqus] Integrating ");window["FOX_"+cfg.widget](config);}}});};$(document).ready(function(){trigger();});},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host="*."+root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",host:host,expires:exp,domain:root.domain};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":$.cookie(cName,null);break;case"get":cName=(data)?data:cName;return($.cookie(cName))?$.cookie(cName):false;}}};var IDMS=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.idms;this.set();};IDMS.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.idms){log("[api.idms] Logging In");self.cookie("set",data.authentication.idms);self.integrate({token:data.authentication.idms,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};var FileMobile=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.fm;this.set();};FileMobile.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.fm){log("[api.idms] Logging In");self.cookie("set",data.authentication.fm);self.integrate({token:data.authentication.fm,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};return API;}());var disablezip=window.disablezip=function(value){var zip=$("#reg_zip_code"),loc=$("#reg_location");if(value==="United States"){zip.removeAttr("readonly").css("background","#fff");zip.next(".validate").children(".sprites").hide();loc.val("");}else{zip.attr("readonly",true).css("background","#ddd").val("");loc.val(value);}};var formatField=window.formatField=function(id,value){var elm=$("#"+id);switch(id){case"reg_first_name":elm.val(value.join(""));break;case"reg_last_name":elm.val(value.join(""));break;default:elm.val(value.toLowerCase().replace(/\s+/gi,""));}};var formatTrim=window.formatTrim=function(id,value){$("#"+id).val(value.replace(/\s+/gi,""));};var isNumberKey=window.isNumberKey=function(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return(charCode>31&&(charCode<48||charCode>57))?false:true;};var increaseRefresh=window.increaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),refresh=item.attr("content"),orig=(typeof item.attr("content")!=="undefined")?refresh:false;item.data("RefreshOrig",orig);item.attr("content","7200");});}};var decreaseRefresh=window.decreaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_enableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),orig=item.data("RefreshOrig");if(orig){item.attr("content",orig);}});}};var showToConsole=function(str,force){force=force||false;var search=(window.location.search).substr(1);if(search.length>0){var x,pairs=search.split("&"),valuePair={};for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");valuePair[split[0]]=split[1];}if(valuePair.stc==="y"||force){if(typeof window.console==="object"){console.log(str);}}}};var log=showToConsole;(function(){function d(c){return typeof c==="function"?!0:!1;}var f=function(){var c,b=arguments;if(b.length===0){return !1;}var a={attempt:0,timeout:500};if(b.length===1&&typeof b[0]==="object"){for(c in b[0]){a[c]=b[0][c];}if(a.callback){c=a.callback;}else{return !1;}if(!c.check||!c.success){return !1;}else{a._check=c.check,a._success=c.success;}if(c.timedOut){a._timeout=c.timedOut;}}else{if(!isNaN(b[0])&&!isNaN(b[1])&&d(b[2])&&d(b[3])){a.attempt=b[0];a.timeout=b[1];a._check=b[2];a._success=b[3];if(b[4]){a._timeout=b[4];}if(b[5]){a._abort=b[5];}}else{if(d(b[0])&&d(b[1])){a._check=b[0];a._success=b[1];if(b[2]){a._timeout=b[2];}if(b[3]){a._abort=b[3];}}else{return !1;}}}if(!d(a._check)||!d(a._success)){return !1;}if(!d(a._timeout)){a._timeout=function(){};}if(isNaN(a.timeout)){return !1;}else{a.timeout=parseInt(a.timeout,10);}if(isNaN(a.attempt)){return !1;}else{a.attempt=parseInt(a.attempt,10);}var e=!1,g=!1;if(a.attempt&&a.timeout){var f=function(){g?clearTimeout(e):a._check()?(a._success(),clearTimeout(e)):a.attempt>0?e=setTimeout(function(){f();},a.timeout):a._timeout();a.attempt--;};f();}else{e=setInterval(function(){g?clearInterval(e):a._check()&&(a._success(),clearInterval(e));},a.timeout);}return{abort:function(){g=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:f});}else{if(!window.loadAttempt){window.loadAttempt=f;}}})();}(jQuery));var FOX_Janrain_Auth_TPL=(function(){var A='<div style="display:none;" id="resendVerification">    <h1>Resend Email Verification</h1>    <div class="hr"></div>    <p>To sign in you must verify your email address. Fill out the form below and we\'ll send you an email to verify.</p>    {* #resendVerificationForm *}        {* resendVerification_emailAddress *}        <div class="capture_fox_buttoncol">            {* newPasswordFormButton *}        </div>     {* /resendVerificationForm *}</div><div style="display:none;" id="resendVerificationSuccess">    <h1>Your Verification Email Has Been Sent</h1>    <div class="hr"></div>    <p>Check your email for a link to reset your password.</p>    <a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></div><div style="display:none;" id="resetPasswordUserSuccess">            <h1>Your password has been changed</h1>            <div class="hr"></div>           <p>Password has been successfully updated.</p>            <div class="capture_textRight">                <p><a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></p>            </div>        </div><div style="display:none;" id="resetPassword">    <h1>Please enter your email address and we\'ll send you a new password.</h1>    <div class="hr"></div>    {* #forgotPasswordForm *}        {* forgotPassword_emailAddress *}        {* errorMessages *}        {* forgotPassword_sendButton *}    {* /forgotPasswordForm *}</div><div style="display:none;" id="resetPasswordSuccess">    <h1>Reset your password</h1>     <div class="hr"></div>    <p>Please reset your password.</p>    {* #resetPasswordForm *}        {* newpassword *}        {* newpasswordConfirm *}          <div class="capture_textRight">             {* newPasswordFormButton *}           </div>    {* /resetPasswordForm *}</div><div style="display: none" id="registrationVerify">            <h2>Sorry we could not verify that email address.</h2>            <p>Please resend verification.</p>        </div><div style="display: none" id="registrationVerified">    <h2>Thanks for verifying your email address</h2>    <p>You will be redirected to your new user profile in <span id="redirectTime">10 seconds</span></p></div><div style="display:none;" id="editProfile">           <div id="accounts-header">              <ul>                 <li id="account-tab" class="active tabs"><a href="#">Account</a></li>                 <li id="ureport-pro-tab" class="tabs"><a href="#">uReport</a></li>                 <li id="ureport-act-tab" class="tabs"><a href="#">Activity</a></li>              </ul>           </div>           <div id="account-wrap" class="wrap">                {* savedProfileMessage *}                {* #photoManager {"custom": true} *}                    {| mainDiv |}                         {| profileImage |}                        <div class="capture_fox_photoLinks">                          <h1>{* public_displayName *}</h1>                          <div id="capture_profile_saved" style="display:none;"><span class="capture_fox_profile_saved"></span>Your profile was last saved <span class="capture_fox_alert_callout" id="capture_alert_callout">just now</span></div>                        {| photoLinks |}                        <span class="janrain_traditional_account_only">                          <a href="#" data-capturescreen="changepassword" class="capture_fox_change_password">Change Password</a>                        </span>                        <div class="cancel-button"><span></span>Back</div>                      </div>                    {| closeDiv |}                    <!-- hidden crop form -->                    <div style="display: none;">                    {| editFormOpen |}                    <div class="capture_footer">                    {| editSubmitButton |}                      <p>or</p>                    {| chooseDifferentPhotoLink |}                    </div>                    {| editFormClose |}                    </div>                    <!-- hidden upload form -->                    <div style="display: none;">                    {| uploadFormOpen |}                    {| uploadFileField |}                    {| uploadSubmitButton |}                    {| photoChooserErrors |}                    {| uploadFormClose |}                    </div>                    <!-- hidden upload screen -->                    <div style="display: none;">                        <div id="{| uploadPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div id="{| prefixFieldName |}_profile_pic_upload" class="{| profilePicClass |}capture_profile_pic_upload capture_default">                                {| uploadImage |}                            </div>                            <div id="{| prefixFieldName |}_profile_pic_uploadform_container" class="capture_uploadPhoto_container">                            </div>                        </div>                    </div>                    <!-- hidden edit photo screen -->                    <div style="display: none;">                        <div id="{| editPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div class="capture_fox_clearfix">                                <div id="{| prefixFieldName |}_profile_pic_editPhoto_container" class="capture_editPhoto_container">                                    <h2><span class="capture_fox_crop_icon"></span>Crop your avatar</h2>                                    <div class="janrainCrop_container_dashed">{| cropImage |}</div>                                </div>                                 <div class="{| profilePicClass |}profile_pic_edit_container">                                    <h2><span class="capture_fox_preview_icon"></span>Avatar Preview</h2>                                    <div id="{| prefixFieldName |}_profile_pic_edit" class="{| profilePicClass |}capture_profile_pic_edit capture_default">                                        {| editImage |}                                    </div>                                </div>                              </div>                       </div>                    </div>                {* /photoManager *}                {* publicProfileLink *}                <h2>Profile</h2>                <div class="hr"></div>                    <div class="capture_fox_editProfile">                    {* editProfileForm *}                        {* edit_firstName *}                        {* edit_lastName *}                        {* edit_email *}                        {* edit_country *}                        {* edit_address1 *}                        {* edit_address2 *}                        {* edit_city *}                        {* edit_state *}                        {* edit_zip *}                        {* edit_birthdate *}                        {* edit_gender *}                        {* politicalViews *}                      <div class="newsletter-container">                         <h2>Newsletter Subscriptions</h2>                         <div class="hr"></div>                         <div class="news-sub-form">                            <label for="auto-report"><input type="checkbox" name="" id="foxnewsletterIDList_172" value="" />Auto Report</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="greta-wire"><input type="checkbox" name="" id="foxpromosIDList_139" value="" />GetaWire Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking News Alerts</a></label>                            <label for="bo-opinion"><input type="checkbox" name="" id="foxnewsletterIDList_96" value="" />Best of Opinion</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxbusinessIDList_32" value="" />Fox Business Breaking News Alerts</a></label>                            <label for="food-drink"><input type="checkbox" name="" id="foxnewsletterIDList_166" value="" />Food & Drink</a></label>                            <label for="pow-pol"><input type="checkbox" name="" id="foxnewsletterIDList_173"  value="" />Power & Politics</a></label>                            <label for="ceo-news"><input type="checkbox" name="" id="foxnewsletterIDList_90" value="" />CEO Newsbrief</a></label>                            <label for="fox-411"><input type="checkbox" name="" id="foxnewsletterIDList_106" value="" />Fox 411</a></label>                            <label for="scitech-geek"><input type="checkbox" name="" id="foxnewsletterIDList_153" value="" />SciTech Geek Sheet</a></label>                            <label for="fb-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_151" value="" />Fox Business Morning Headlines</a></label>                            <label for="health-weekly"><input type="checkbox" name="" id="foxnewsletterIDList_160" value="" />Health Weekly Dose</a></label>                            <label for="week-pass"><input type="checkbox" name="" id="foxnewsletterIDList_171" value="" />Weekly Travel Pass</a></label>                            <label for="most-pop"><input type="checkbox" name="" id="foxnewsletterIDList_69" value="" />Fox Business Most Popular</a></label>                            <label for="latino-rep"><input type="checkbox" name="" id="foxnewsletterIDList_178" value="" />Latino Report</a></label>                            <label for="urep-mon"><input type="checkbox" name="" id="foxnewsletterIDList_133" value="" />uReport Monthly</a></label>                            <label for="sbc-week"><input type="checkbox" name="" id="foxnewsletterIDList_108" value="" />Small Business Center Weekly Report</a></label>                            <label for="mon-pol-up"><input type="checkbox" name="" id="foxnewsletterIDList_76" value="" />Monthly Politics Update</a></label>                            <label for="fn-mag"><input type="checkbox" name="" id="foxpromosIDList_174" value="" />Fox News Magazine</a></label>                            <label for="pers-finance"><input type="checkbox" name="" id="foxnewsletterIDList_122" value="" />Personal Finance</a></label>                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="fan-scoop"><input type="checkbox" name="" id="foxpromosIDList_43" value="" />Fox Fan Scoop</a></label>                            <label for="fn-fired"><input type="checkbox" name="" id="foxnewsletterIDList_99" value="" />Fox Nation Fired Up</a></label>                         </div>                      </div>                      <h2>Commenting Notifications</h2>                      <div class="hr"></div>                      {* table *}                      <div class="capture_fox_clearfix">                        <div class="capture_right capture_checkbox">                          {* autofollow_conversations *}                        </div>                      </div>                      <div class="hr"></div>                                            <h2>Linked Accounts</h2>                      <div class="hr"></div>                          {* linkedAccounts *}                          {* linkAccountContainer *}                              <h1>Linked Accounts</h1>                              <div class="hr"></div>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Facebook" height="24" width="24" /></span>&nbsp;&nbsp;Facebook</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Google" height="24" width="24" /></span>&nbsp;&nbsp;Google</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Twitter" height="24" width="24" /></span>&nbsp;&nbsp;Twitter</a>                               <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Yahoo" height="24" width="24" /></span>&nbsp;&nbsp;Yahoo</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="LinkedIn" height="24" width="24" /></span>&nbsp;&nbsp;Linkedin</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="AOL" height="24" width="24" /></span>&nbsp;&nbsp;AOL</a>                          {* /linkAccountContainer *}                      <div class="hr"></div>                        <div class="capture_form_item">                          {* submitButton *}                        </div>                    {* /editProfileForm *}                      </div>                  </div>                      <div class="profile-footer">                         <div class="fox-logo">                         </div>                         <p>&copy;2012 FOX News Network, LLC. All rights reserved.</p>                         <p>This material may not be published, broadcast, rewritten, or redistributed.</p>                         <p>All market data delayed 20 minutes.</p>                         <p><a href="http://www.foxnews.com/about/privacy-policy" target="_blank">Privacy</a> - <a href="http://www.foxnews.com/about/terms-of-use" target="_blank">Terms</a> - <a href="http://help.foxnews.com/index.html" target="_blank">FAQ</a></p>                      </div>              </div>        <div style="display:none;" id="newPasswordSuccess" class="capture_med_footer">              <h1>You did it!</h1>              <div class="hr"></div>              <p>Your password has been successfully changed.</p>            <div class="capture_footer">                <a href="#" class="capture_btn capture_secondary">Close</a>            </div>        </div>        <div style="display:none;" id="changepassword">            <h1>Change Your Password</h1>            <div class="hr"></div>            {* newPasswordForm *}                  {* oldpassword *}                  {* newpassword *}                  {* newpasswordConfirm *}                  <div class="capture_textRight">                     <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                     {* newPasswordFormButton *}                   </div>            {* /newPasswordForm *}        </div><div style="display: none;" id="publicProfile">        <h1>Member Profile</h1><div class="make-acc">Don\'t have an account? <a onclick="window.janrain.capture.ui.renderScreen(\'signIn\')">Create One Now</a></div>        <div class="capture_profile_section">            <div class="capture_profile_pic capture_default inline">                <div id="profile_pic" class="capture_default">                    {* profilePhotoCustom *}                </div>            </div>        </div>        <div class="capture_profile_section">             <h1 class="capture_display_name">{* public_displayName *}</h1>            {* created *}            {* public_city *}            {* public_state *}            {* public_country *}            {* public_birthdate *}            {* public_gender *}        </div>        <div class="capture_data_item">          {* slider_public *}        </div>        <h2>User Stats</h2>        <div class="hr"></div>		  <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public#{* public_displayName *}">Comments</a></h3>            <h2 class="capture_right" id="fox_lf_comments" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public?tab=ureport#{* public_displayName *}">uReports</a></h3>            <h2 class="capture_right" id="fox_ur_reports"><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Likes</h3>            <h2 class="capture_right" id="fox_lf_likes" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Shares</h3>            <h2 class="capture_right" id="fox_jr_shares" >{* public_shares *} </h2>        </div></div><div style="display:none;" id="signIn">            <h1>Sign In</h1>            <div class="capture_signin">                <h2>With your existing account</h2>                <div class="hr"></div>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24 janrain-provider-icon-facebook-custom"></span>&nbsp;&nbsp;Facebook</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24 janrain-provider-icon-google-custom"></span>&nbsp;&nbsp;Google</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24 janrain-provider-icon-twitter-custom"></span>&nbsp;&nbsp;Twitter</a>                         <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24 janrain-provider-icon-yahoo-custom"></span>&nbsp;&nbsp;Yahoo</a>                       <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24 janrain-provider-icon-linkedin-custom"></span>&nbsp;&nbsp;Linkedin</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24 janrain-provider-icon-aol-custom"></span>&nbsp;&nbsp;AOL</a>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">With a Fox News account</h2>                     <a href="#" data-capturescreen="traditionalRegistration" class="capture_right capture_fox_marginTop">Sign Up &rarr;</a>                </div>                <div class="hr"></div>                    {* #userInformationForm *}                        {* traditionalSignIn_emailAddress *}                        {* traditionalSignIn_password *}                        <div class="capture_fox_buttoncol">                             <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                            {* traditionalSignIn_signInButton *}                        </div>                    {* /userInformationForm *}                    <p>Find answers to your questions about the Fox News Community in our <a href="http://help.foxnews.com/index.html" target="_blank">FAQs</a>.</p>            </div>        </div>        <div style="display:none;" id="returnSocial">                <h1>Sign In</h1>                <div class="hr"></div>                <h2>Welcome back, {* welcomeName *} (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">Sign In with your account</h2>                     <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>                <div class="hr"></div>                    <a href="#" onclick="janrain.engage.signin.triggerFlow(\'{* returnProvider *}\')" class="capture_secondary capture_fox_social_btn capture_{* returnProvider *}"><span class="janrain-provider-icon-24 janrain-provider-icon-{* returnProvider *}-custom"></span>&nbsp;&nbsp;{* returnProvider *}</a>                <div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>            </div>                <div style="display:none;" id="returnTraditional">            <h1>Sign In</h1>            <div class="hr"></div>            <h2>Welcome back, <span id="displayNameData"></span>  (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>            <div class="capture_fox_clearfix">                <h2 class="capture_left">Sign in with your account</h2>                <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>            <div class="hr"></div>                        {* #userInformationForm *}                            {* traditionalSignIn_emailAddress *}                            {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                                {* traditionalSignIn_signInButton *}                            </div>                        {* /userInformationForm *}<div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>                    </div>        <div style="display:none;" id="socialRegistration">                <h1>You\'re Almost Done!</h1>                <p>Complete the following form to submit your registration.</p>                <div class="hr"></div>                {* #socialRegistrationForm *}                    {* socialRegistration_firstName *}                    {* socialRegistration_lastName *}                    {* socialRegistration_displayName *}                    {* socialRegistration_emailAddress *}                    {* registration_birthday *}                    <h2>Terms of Service</h2>                    <div class="hr"></div>                    {* agreeToTerms *}                    <div class="capture_textRight">                        {* socialRegistration_button *}                </div>                {* /socialRegistrationForm *}        </div>        <div style="display:none;" id="traditionalRegistration">                <h1>Create a Fox News Account</h1>                <p>Already have an account? <a href="#" data-capturescreen="signIn">Sign In &rarr;</a></p>                <div class="hr"></div>                {* #registrationForm *}                    {* traditionalRegistration_firstName *}                    {* traditionalRegistration_lastName *}                    {* traditionalRegistration_displayName *}                    {* traditionalRegistration_emailAddress *}                    {* traditionalRegistration_password *}                    {* traditionalRegistration_passwordConfirm *}                    {* registration_birthday *}                    <div class="capture_fox_clearfix">                        <h2 class="capture_left">Subscribe to Fox News Email Newsletters</h2>                         <div class="capture_right capture_fox_marginTop">Optional</div>                    </div>                    <div class="hr"></div>                          <div class="news-sub-form-reg">                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxpromosIDList_32" value="" />Fox Business Breaking Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking Alerts</a></label>                          </div>                    <h2>Security Check</h2>                    <div class="hr"></div>                    {* captcha *}                    {* agreeToTerms *}                    <div class="capture_textRight">                    {* createAccountButton *}                    </div>                {* /registrationForm *}        </div>                <div style="display:none;" id="registrationSuccess">                <h1>Thank you for registering!</h1>                <div class="hr"></div>                <p>Once you confirm your email address you will be able to access commenting and exclusive content on all the Fox News Digital websites!</p>                <h2>Verify your email</h2>                <div class="hr"></div>                <p>We just sent an email to your account to verify your email address. Check your inbox and click on the link to confirm your account.</p>                <!--                 <p>You are also signed up for the following newsletters:</p>                <ul>                    <li>FPO</li>                    <li>FPO</li>                </ul>                -->                <div class="capture_textRight">                    <a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_primary">Close</a>                </div>        </div>        <div style="display:none;" id="forgotPassword">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <h2>Enter your current email address, and we\'ll send you instructions to create a new password.</h2>            {* #forgotPasswordForm *}                {* forgotPassword_emailAddress *}                <div class="capture_textRight">                    {* forgotPassword_sendButton *}                </div>            {* /forgotPasswordForm *}        </div>        <div style="display:none;" id="forgotPasswordSuccess">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <div class="capture_fox_clearfix">              <h2 class="capture_left">Success! You should receive an email shortly with instructions to change your password.</h2>              <a href="#" class="capture_btn capture_primary capture_right" onclick="janrain.capture.ui.modal.close()">Close</a>            </div>            </div><div style="display:none;" id="mergeAccounts">{* mergeAccounts {"custom": true} *} <h1>Create a Fox News Account</h1><div class="hr"></div><h2>It looks like you\'ve been here before.<br /><br>We already have an account for: <br /><span class="capture_fox_alert">{| current_emailAddress |}</span></h2><h2>Connect this session with your existing account</h2><div class="hr"></div><button id="capture_mergeAccounts_mergeAccounts_connectButton" name="mergeAccounts_connectButton" data-capturefield="mergeAccounts_connectButton" type="button" class="capture_secondary capture_fox_social_btn"><span class="janrain-provider-icon-24 janrain-provider-icon-{| existing_provider_lowerCase |}-custom"></span><span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp; Connect</button><a href="#" data-capturescreen="forgotPassword">Forgot Password?</a><br><h2>Not You? Continue creating a new account</h2><div class="hr"></div><button name="mergeAccounts_createButton" data-capturefield="mergeAccounts_createButton" type="submit" class="capture_secondary capture_fox_social_btn capture_{| current_provider_lowerCase |}" id="capture_mergeAccounts_mergeAccounts_createButton" style="display:none"><span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp;{| current_provider |}</button></div>        </div>        <div style="display:none;" id="traditionalAuthenticateMerge">            <h1>Sign in to complete account merge</h1>            <div class="hr"></div>            {* #tradAuthenticateMergeForm *}                {* traditionalSignIn_emailAddress *}                {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                    {* traditionalSignIn_signInButton *}					  <a href="#" data-capturescreen="forgotPassword">Forgot Password?</a><br>        		  </div>             {* /tradAuthenticateMergeForm *}        </div>';return A;}());window.FOX_AuthJanrain_CONFIG=(function(D){function B(F){return !!(D.location.hostname.indexOf(F)>-1);}var C=true,A={},E=D.location.hash;D.FOX_Auth_live_settings=(typeof D.FOX_Auth_live_settings==="undefined")?false:D.FOX_Auth_live_settings;if(!C&&(E.indexOf("live")>-1||D.FOX_Auth_Live_Settings)){C=true;}else{if(E.indexOf("dev")>-1){C=false;}else{if(B("pvw-dev")){C=false;}}}A.live=C;if(C){A={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",siteURL:"http://www.foxnews.com/",profile:"http://quill.foxnews-1.fyre.co/profile/",activityAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}",activityActiveAPI:"http://www.foxnews.com/feeds/app/user/comments/active?callback={cb}&uuid={uuid}",activityPublicRequestAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}&userInfoFormat=true",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://login.foxnews.com",apiURL:"https://signin.foxnews.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews-prod/load.js",appId:"macbnjrmzryj7utchqmtukf3se",clientId:"t6emets785a92rr2zc5wkbnrsy59kyny",captureServer:"https://signin.foxnews.com",federateServer:"https://sso.foxnews.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news",publicRequestAPI:"http://www.foxnews.com/feeds/app/user/photos?username="},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"www",subscribe:"http://www.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://www.foxnews.com/feeds/app/newsletters/"}};A.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.css"];A.editProfile="http://www.foxnews.com/community/user/profile/edit";}else{A={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",profile:"http://quill.foxnews-1.fyre.co/profile/",siteURL:"http://www.foxnews.com/",activityAPI:"http://v8-qa.foxnews.com/feed/apps/user/comments/{uuid}.json?callback={cb}",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://fox-news-dev.rpxnow.com",apiURL:"https://fox-news.dev.janraincapture.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews/load.js",appId:"n49qmf6h6ssvuvnevbxgj88h97",clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q",captureServer:"https://fox-news.dev.janraincapture.com",federateServer:"https://fox-news-dev.janrainsso.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news-dev"},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"v8-qa",subscribe:"http://v8-qa.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://v8-qaportala.lan.vig.tpa.foxnews.com:8080/foxnewsletter/unsubscribe.json"}};A.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.css"];A.editProfile="http://global.fncstatic.com/static/v/all/html/edit-profile.html";}if(D.location.host.indexOf("ureport")>-1){A.xdcomm=D.location.protocol+"//"+location.host+"/xdcomm.html";A.logout=D.location.protocol+"//"+location.host+"/logout.html";}else{A.xdcomm=D.location.protocol+"//"+location.host+"/static/v/all/html/xdcomm.html";A.logout=D.location.protocol+"//"+location.host+"/static/v/all/html/logout.html";}A.templateUrl="/static/v/all/html/auth-tpl.html";return A;})(window);window.AuthenticationService_Janrain=(function(G,N){function e(i){return !!(N.location.hostname.indexOf(i)>-1);}if(!N.console){N.console={log:function(){},error:function(){}};}var L=function(){var j=false;if(j&&N.console){try{return console.log.apply(console,arguments);}catch(i){console.log(arguments);}}};var X=(function(){var i=function(k){var j,m,n={},o=this;for(j=0,m=k.length;j<m;j+=1){k[j][2].prototype=k[j][1];n[k[j][0]]=new k[j][2];}for(var p in n){i.prototype[p]=n[p];}};return i;})();var c=function(){},M=function(){},Q=function(){},a=function(){},F=function(){},Z=function(){},g=function(){},K=function(){},D=function(){},E=function(){},U=function(){},C=function(){},P=function(){},J={},b={},f={},Y={},I={},W={},H={},O={},S={},T={},B={},R={},d={};var h=N.FOX_AuthJanrain_CONFIG;F=function(){};W={loadExtJs:function(m,o,n,k){var l=document.createElement("script"),i;l.type="text/javascript";l.id=o||"";l.async=true;l.setAttribute("type","text/javascript");if(k==="share"){l.src="http://widget-cdn.rpxnow.com/js/lib/fox-news/widget.js";}else{l.src=document.location.protocol+"//"+((k==="www")?"www.":"")+m;}if(typeof n==="function"){l.onload=l.onerror=l.onreadystatechange=function(p){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){n();}};}var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(l,j);},assert:function(i,j){return(typeof i===j)?true:false;},domTest:function(i){return(i.length!=0)?true:false;},getDomain:function(){var l=N.location,j=l.hostname,k=l.protocol,i=j.split(".");return"www."+i[(i.length-2)]+"."+i[(i.length-1)];}};C=function(){};R={setDomReady:function(j){var l=G("#authentication"),m=G("#account"),n=m.find(".user-options"),i=G("body"),k=G("#section-content");var o={acc:m,body:i,user:m.find(".username"),login:l.find(">li:last-child"),authen:l,name:n.find("span"),register:l.find(".first"),noAccount:l,userOptions:n,accountNav:m.find(".encapsulate"),profile:n.find("ul > li.first"),logout:n.find("ul > li:last-child"),hasAccount:m.find(".username"),publicProfile:function(){return{likes:G("#fox_lf_likes"),shares:G("#fox_jr_shares"),ureport:G("#fox_ur_reports"),comments:G("#fox_lf_comments")};},whatCounts:function(){return G(".news-sub-form");},uReport:function(){var p=G("#account");return{acc:p,redBtn:G("#main").find(".red-butt ")};},sectionContent:k};AUTH_Manager.onReady("capture",function(){});j(o);}};K=function(){};Y={token:null,template:null,getToken:function(){var i=this;try{if(N.localStorage){i.token=localStorage.getItem("janrainCaptureToken");}else{}}catch(j){L(j);}},classLogin:"capture_modal_open",janrainFlow:false,state:{janrain:false,ureport:false,livefyre:false,template:false,backplane:false,badgeville:false},dataConfig:{janrain:{clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q"},livefyre:{},ureport:{},whatcounts:{}},loadTemplate:function(){var u=this,j,n,p,r=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified","editProfile"],i=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess"],m=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","signIn","registrationVerify","registrationVerified","returnTraditional","returnSocial","forgotPasswordSuccess"];n=document.createElement("div");n.id="templateHolder";p=(N.FOX_Janrain_Auth_TPL)?true:false;if(p){var s=G(FOX_Janrain_Auth_TPL);if(u.janrainFlow==="profileFlow"||u.janrainFlow==="publicFlow"){R.setDomReady.sectionContent.append(n);for(var q=0,l=s.length;q<l;q+=1){for(var o=0,k=i.length;o<k;o+=1){if(r[o]===s[q].id){s[q].innerHTML="";s[q].id="";}}}G(n).html(s);b.init();}else{if(u.janrainFlow==="authFlow"){R.setDomReady.body.append(n);for(q=0,l=s.length;q<l;q+=1){for(o=0,k=r.length;o<k;o+=1){if(r[o]===s[q].id){s[q].innerHTML="";s[q].id="";}}}G(n).html(s);b.init();}else{R.setDomReady.sectionContent.append(n);var t=[];for(q=0,l=s.length;q<l;q+=1){var v=false;for(o=0,k=m.length;o<k;o+=1){if(m[o]===s[q].id){v=true;}}if(!v){s[q].innerHTML="";s[q].id="";}}G(n).html(s);b.init();}}Y.state.template=true;}else{G.ajax({type:"GET",url:h.templateUrl,dataType:"html",beforeSend:function(){},success:function(z){if(u.janrainFlow==="profileFlow"){R.setDomReady.sectionContent.append(w);w=G(w).html(z);}else{var y=z.replace(/\'/gi,"'");R.setDomReady.body.append(w);var w=R.setDomReady.body.find("#templateHolder");w.html(y);w.find("#editProfile").remove();}Y.state.template=true;b.init();}});}}};c=function(){};J={};M=function(){if(typeof N.janrain!=="object"){N.janrain={};}N.janrain.settings={};N.janrain.settings.capture={};N.janrain.settings.share={};janrain.settings.appUrl=h.janrain.appUrl;janrain.settings.custom=true;janrain.settings.capture.flowVersion="HEAD";janrain.settings.capture.responseType="token";janrain.settings.capture.flowName="foxNewsFlow";janrain.settings.capture.stylesheets=h.styleUrl;janrain.settings.tokenUrl=N.location.protocol+"//"+N.location.host+"/";janrain.settings.capture.appId=h.janrain.appId;janrain.settings.capture.redirectUri=N.location.protocol+"//"+N.location.host;janrain.settings.capture.clientId=h.janrain.clientId;janrain.settings.capture.captureServer=h.janrain.captureServer;janrain.settings.capture.recaptchaPublicKey="6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP";janrain.settings.capture.editPhotoAfterUpload=true;janrain.settings.type="embed";janrain.settings.tokenAction="event";janrain.settings.format="two column";janrain.settings.capture.modalBorderOpacity=0;janrain.settings.capture.modalBorderWidth=0;janrain.settings.capture.modalBorderRadius=2;janrain.settings.capture.modalCloseHtml='<span class="janrain-icon-16 janrain-icon-ex"></span>';janrain.settings.capture.modalBorderColor="transparent";janrain.settings.language="en";janrain.settings.capture.setProfileCookie=true;janrain.settings.capture.keepProfileCookieAfterLogout=true;janrain.settings.capture.hideSavedProfileMessageDelay=15000;switch(Y.janrainFlow){case"authFlow":janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;case"profileFlow":janrain.settings.autoSave=true;janrain.settings.screenToRender="editProfile";break;case"emailFlow":janrain.settings.screenToRender="registrationVerify";janrain.settings.capture.registerFlow="socialRegistration";break;case"passwordFlow":janrain.settings.screenToRender="resetPassword";janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;}janrain.settings.capture.backplane=true;janrain.settings.capture.backplaneBusName=h.janrain.backplaneBusName;janrain.settings.capture.federate=true;janrain.settings.capture.federateServer=h.janrain.federateServer;janrain.settings.capture.federateXdReceiver=h.xdcomm;janrain.settings.capture.federateLogoutUri=h.logout;janrain.settings.share.providers=["facebook","twitter","linkedin","email"];janrain.settings.share.providersEmail=["google","yahoo"];janrain.settings.share.modes=["broadcast","contact"];janrain.settings.share.attributionDisplay=false;janrain.settings.share.previewMode=0;janrain.settings.share.modalBackgroundColor="#000000";janrain.settings.share.modalBorderRadius="2";janrain.settings.share.modalOpacity="0";janrain.settings.share.modalWidth="0";janrain.settings.share.bodyBackgroundColor="#F3F3F3";janrain.settings.share.bodyBackgroundColorOverride=true;janrain.settings.share.bodyColor="#333";janrain.settings.share.bodyContentBackgroundColor="#ffffff";janrain.settings.share.bodyFontFamily="Helvetica";janrain.settings.share.bodyTabBackgroundColor="#F3F3F3";janrain.settings.share.bodyTabColor="#424242";janrain.settings.share.elementBackgroundColor="#f3f3f3";janrain.settings.share.elementBorderColor="#ccc";janrain.settings.share.elementBorderRadius="3";janrain.settings.share.elementButtonBorderRadius="3";janrain.settings.share.elementButtonBoxShadow="0";janrain.settings.share.elementColor="#333333";janrain.settings.share.elementHoverBackgroundColor="#333333";janrain.settings.share.elementLinkColor="#173951";if(Y.janrainFlow==="profileFlow"){janrain.settings.packages=["login","capture"];}else{if(Y.janrainFlow==="publicFlow"){janrain.settings.packages=["login","capture"];janrain.settings.capture.stylesheets=[];}else{janrain.settings.packages=["login","capture","share"];}}janrain.ready=true;};b={config:{capture:{url:h.janrain.jsURL,id:"janrainAuthWidget"},share:{url:"default",id:"janrainWidgets",type:"share"}},session:null,sessionType:"",reset:false,init:function(){var i=this;i.widgetOnload();i.captureWidgetOnLoad();W.loadExtJs(i.config.capture.url,i.config.capture.id,i.loadedJS.loadJan);return this;},API:{requestSent:false,url:h.janrain.apiURL,token:"",updateAPI:function(i,k){var j=this;if(i==="livefyre"){return{type_name:"user",access_token:j.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+S.userLivefyre.id+'"}}}'};}else{if(i==="livefyre_temp"){return{type_name:"user",access_token:j.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+S.uuid+'@foxnewsprod.fyre.co"}}}'};}else{if(i==="badgeville_id"){return{type_name:"user",access_token:j.token,attributes:'{"externalServices":{"badgeville_id":"'+S.uuid+'@user.foxnews.com"}}'};}else{if(i==="share"){if(S.userJanrain.shares==null){S.userJanrain.shares=0;}S.userJanrain.shares+=1;return{type_name:"user",access_token:j.token,attributes:'{"shares" : '+S.userJanrain.shares+"}"};}else{if(i==="test"){return{type_name:"user",access_token:j.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+k+'"}}}'};}}}}}},execute:function(j,i){var l=this,k="FOX_Janrain_EXEC";i.jsonp=k;if(typeof N[k]!=="function"){N[k]=function(m){if(m.code==414){H.janrain.tokenRefreshed();H.janrain.signOut();H.domEvents.logoutSuccess();return false;}else{if(m.code==310){H.domEvents.logoutSuccess();H.janrain.signOut();return false;}else{if(!m.code&&!m.stat){H.domEvents.logoutSuccess();H.janrain.signOut();return false;}else{if(m.stat==="ok"){l.requestSent=true;S.uuid=m.result.uuid;S.email=m.result.email;S.userJanrain=m.result;S.displayName=m.result.displayName;H.displayName();if(G("#authentication").css("display")==="block"){H.domEvents.loginSuccess();}if(R.setDomReady.acc.hasClass("alt-style")){H.displayShowsProfile();}O.uLogin(b.API.token,S.email,S.uuid);d.idmsLogin(b.API.token,S.email,S.uuid);if(m.result.externalServices.livefyre.livefyre_id==null||m.result.externalServices.livefyre.livefyre_id==="null"||m.result.externalServices.livefyre.livefyre_id===""){l.update("entity.update",l.updateAPI("livefyre_temp"));}if(m.result.externalServices.badgeville_id==null||m.result.externalServices.badgeville_id==="null"||m.result.externalServices.badgeville_id===""){l.update("entity.update",l.updateAPI("badgeville_id"));}I.setUp();}}}}};}G.ajax({data:i,url:l.url+j,dataType:"script",async:true,cache:true});},update:function(j,i){var l=this,k="FOX_Janrain_UPD";i.jsonp=k;if(typeof N[k]!=="function"){N[k]=function(m){};}G.ajax({data:i,url:l.url+j,dataType:"script",async:true,cache:true});}},loadedJS:{loadJan:function(){if(typeof janrain==="object"){Y.state.janrain=true;}},loadShare:function(){}},widgetOnload:function(){N.janrainWidgetOnload=function(){AUTH_Manager.fireReady("janrain");};return this;},captureWidgetOnLoad:function(){N.janrainCaptureWidgetOnLoad=function(){var i=janrain.events;AUTH_Manager.fireReady("capture");i.onCaptureLoginSuccess.addHandler(H.janrain.successfulLogin);i.onCaptureRegistrationSuccess.addHandler(H.janrain.successfulRegistration);i.onCaptureRegistrationStart.addHandler(H.janrain.registrationStart);i.onCaptureAccessDenied.addHandler(H.janrain.accessDenied);i.onAuthWidgetLoad.addHandler(H.janrain.onAuthWidgetLoad);i.onModalClose.addHandler(H.janrain.onModalClose);i.onCaptureValidationSuccess.addHandler(H.janrain.validation.onValidationSuccess);var j=W.domTest(G("#livefyre_comment_stream")),l=G("#disqus_thread");if(!j){var k=document.createElement("div");k.id="livefyre_comment_stream";if(l.length>0){l.attr("id","livefyre_comment_stream");l.empty();j=true;}Y.livefyreSet=true;}else{l.remove();Y.livefyreSet=false;}if(j&&Y.janrainFlow==="authFlow"){i.onCaptureBackplaneReady.addHandler(H.janrain.backplaneReady);}i.onCaptureRenderComplete.addHandler(H.janrain.screen.onRenderComplete);i.onCaptureProfileSaveSuccess.addHandler(H.janrain.screen.editProfile.onProfileUpdate);i.onCaptureAutoSaveUpdate.addHandler(H.janrain.screen.editProfile.onProfileAutoSave);i.onCaptureProfileSaveFailed.addHandler(H.janrain.screen.editProfile.onProfileFailedSave);i.onCaptureScreenShow.addHandler(H.janrain.screen.onScreenShow);i.onCaptureModalReady.addHandler(H.janrain.screen.uiReady);i.onCaptureSessionFound.addHandler(H.janrain.sessionFound);i.onCaptureSessionNotFound.addHandler(H.janrain.sessionNotFound);i.onCaptureSessionEnded.addHandler(H.janrain.sessionEnded);i.onCaptureLoginSuccess.addHandler(b.isLoggedIn.masterTrigger);i.onCaptureRegistrationSuccess.addHandler(b.isLoggedIn.masterTrigger);i.onCaptureSessionFound.addHandler(b.isLoggedIn.masterTrigger);i.onCaptureSessionNotFound.addHandler(b.isLoggedIn.masterTrigger);i.onCaptureSessionEnded.addHandler(b.isLoggedIn.masterTrigger);i.onCaptureExpiredToken.addHandler(H.janrain.tokenExpired);i.onCaptureFederateRefreshedToken.addHandler(H.janrain.onRefreshToken);if(Y.janrainFlow==="authFlow"){}i.onCaptureError.addHandler(H.janrain.errorEvent);i.onCaptureEmailSent.addHandler(H.janrain.emailSent);N.janrain.capture.ui.start();};return this;},extend:function(i,j){janrain.events[i].addHandler(j);},isLoggedIn:{buffer:[],hasActiveSession:function(i){i(janrain.capture.ui.hasActiveSession());},eventDriven:function(i,j){var k=this;k.buffer.push([i,j]);},masterTrigger:function(k){var n=b.isLoggedIn;if(n.buffer.length==0){return false;}var o=janrain.capture.ui.hasActiveSession(),m=false;for(var i=0,j=n.buffer.length;i<j;i+=1){switch(n.buffer[i][0]){case"found":if(o&&b.sessionType==="found"){n.buffer[i][1](o);m=true;}break;case"notfound":if(!o&&b.sessionType==="notfound"){n.buffer[i][1](o);m=true;}break;case"logout":if(!o&&b.sessionType==="logout"){n.buffer[i][1](o);m=true;}break;case"signin":if(o&&(b.sessionType==="signin")){n.buffer[i][1](o);m=true;}break;case"register":if(o&&(b.sessionType==="register")){n.buffer[i][1](o);m=true;}break;default:n.buffer[i][1](o);break;}if(m){break;}}}},publicProfileLinkUUID:function(){}};a=function(){var i=I;N.BadgevilleAsynchInit=function(){var j=false;N.Badgeville.BackplaneSubscription=N.Backplane.subscribe(function(l){var k;try{if(!l.message.payload.identities.entry){L("Something is wrong with backplane");return false;}else{L("Something is right with backplane");return false;k=l.message.payload.identities.entry;}}catch(r){L(r,"Backplane message has a problem");k=l.payload.identities.entry;}var q=k,n=/uuid=(\S+)/gi,m;if(l.type=="identity/login"&&N.Badgeville.Settings.player==null){var p;j=true;try{p=S.userJanrain.photos[0].value;}catch(r){p=I.config.avatar;}try{m=q.id.match(n)[0];m=m.replace("uuid=","");}catch(o){}S.userBadgeville={email:m+I.config.username,display_name:q.displayName,picture_url:p};N.Badgeville.setPlayer(S.userBadgeville);}});if(!j&&typeof S.userJanrain.uuid!=="undefined"){L("SOO Login GO GO <<");i.events.playerSignIn();}else{}N.Badgeville.Settings.backplaneLink=false;N.Badgeville.crouton=function(){};N.Badgeville.Settings.showToast=0;N.Badgeville.Settings.showWaffle=false;N.Badgeville.Settings.signIn=function(){};N.Badgeville.Settings.signOut=function(){};N.Badgeville.afterSetPlayer=function(k,l){if(I.buffer.length>0){I.events.useBuffer();}if(!i.afterPlayerSet){i.afterPlayerSet=true;i.socialNetworkingIntegration();}};N.Badgeville.ready(function(){var k=N.bpReady;});};};I={config:{id:"badgeville",domain:"foxnews.com",username:"@user.foxnews.com",key:"5302cf0355a5410f0beacdf2de891c52",url:"api.badgeville.com/v4/badgeville-current.js?key=5302cf0355a5410f0beacdf2de891c52&domain=foxnews.com&debugInit=false",avatar:"http://livefyre-avatar.s3.amazonaws.com/a/anon/50.jpg"},afterPlayerSet:false,buffer:[],setUp:function(){var i=this;if(typeof N.Badgeville==="undefined"){i.loadBadgeville();}else{}},loadBadgeville:function(){var i=this;W.loadExtJs(i.config.url,i.config.id,i.badgeLoaded);},badgeLoaded:function(){if(typeof Badgeville==="function"){Y.state.badgeville=true;}},credit:function(i){if(typeof i!=="object"){N.Badgeville.credit(i,function(j){});}else{N.Badgeville.credit(i);}},creditOther:function(i){N.Badgeville.creditOther(i[0],i[1],i[2]);},trigger:function(j,l,i){try{L("Checking",j,(typeof N.Badgeville),b.session,(typeof N.Badgeville.ready));}catch(k){}if(typeof N.Badgeville==="undefined"&&!b.session){L("Nada");try{if(typeof N.Badgeville.ready!=="function"){return false;}}catch(k){}}else{try{if(j in I.events.tracking){if(b.session){L("Frei",j,I.events.tracking[j]);I.events.tracking[j](l,i);}}else{L("Wrong Parameter is passed to Badgeville Credit Trigger!");}}catch(k){L("e",k);}}},socialNetworkingIntegration:function(){var j=this,i=j.social;for(var k in i){i[k]();}},events:{unsubscribe:function(){if(typeof Backplane!=="undefined"){N.Badgeville.setPlayer();}},playerSignIn:function(){var j,i=this;try{j=S.userJanrain.photos[0].value;}catch(k){j=I.config.avatar;}S.userBadgeville={email:S.userJanrain.uuid+I.config.username,display_name:S.userJanrain.displayName,picture_url:j};N.Badgeville.setPlayer(S.userBadgeville);},useBuffer:function(){try{if(typeof N.Badgeville.ready==="function"){for(var j=0,k=I.buffer.length;j<k;j+=1){if(I.buffer[j]==="newsletterSub"){for(var i in B.config.subscribeList){if(B.config.subscribeList[i].length>0){for(var o=0,k=B.config.subscribeList[i].length;o<k;o+=1){var m=B.config.subscribeList[i][o];I.trigger(I.buffer[j],i+m);}}}}else{I.trigger(I.buffer[j]);}}I.buffer=[];}}catch(n){setTimeout(I.events.useBuffer,500);}},playerSignOut:function(i){},playerUpdate:function(i,j){},tracking:{chat:function(){I.credit({verb:"chat",siteID:N.location.href});return this;},viewVideo:function(i){I.credit({verb:"view videos on the site",videoID:i});return this;},completeProfile:function(i){I.credit({verb:"completed profile",uuid:i});return this;},friendTag:function(){I.credit({verb:"friend tag"});return this;},spank:function(i){I.creditOther(i);return this;},commentLike:function(i){I.creditOther(i);return this;},contentShare:function(i){I.credit({verb:"share",articleid_type:i});return this;},newsletterSub:function(q,n){if(typeof q==="object"){try{if(n&&n!==S.userJanrain.email){return false;}}catch(o){}for(var j in q){var k=q[j].length;if(k>0){for(var p=0;p<k;p+=1){var m=setTimeout;m(i(j,q[j][p],m),100);}}}function i(l,s,r){I.credit({verb:"newsletter subscription",newsletterID:l+s});clearTimeout(r);}}else{if(typeof n==="undefined"){I.credit({verb:"newsletter subscription",newsletterID:q});return this;}else{try{if(n===S.userJanrain.email){I.credit({verb:"newsletter subscription",newsletterID:q});return this;}}catch(o){}}}return this;},ureportApproved:function(i){I.credit({verb:"ureport approved",uReportMediaID:i});return this;},returnEightPerMonth:function(){I.credit("visits");return this;}},chatCheck:function(){if((N.location.host.indexOf("live")>-1)||(N.location.href.indexOf("/live-event")>-1)||(N.location.href.indexOf("/sunday-housecall")>-1)){I.buffer.push("chat");}}},social:{facebook:function(){try{FB.Event.subscribe("edge.create",function(j){I.trigger("contentShare",N.location.href+"#facebook");b.API.update("entity.update",b.API.updateAPI("share"));});}catch(i){}},twitter:function(){try{twttr.events.bind("tweet",function(j){I.trigger("contentShare",N.location.href+"#twitter");b.API.update("entity.update",b.API.updateAPI("share"));});}catch(i){}},google:function(){},linkedIn:function(){}}};Q=function(){};f={conv:null,url:h.livefyre.jsURL,config:[],network:h.livefyre.network,eventsDelegate:null,commentsNumber:0,customStrings:{sortLabel:"SORT BY"},init:function(i){var j=this;if(typeof fyre!=="object"){W.loadExtJs(f.url,"",f.lfLoaded);}},lfLoaded:function(){f.eventsDelegate=new fyre.conv.BackplaneAuthDelegate(N.Backplane);f.events.eventsDelegate();f.grabMetaData();},grabMetaData:function(k){var l=this,j={},i=[],o=G('meta[name="livefyreconfig"]'),n=false,m;if(o.attr("siteId")){m=o.attr("siteId");}else{m=h.livefyre.siteid;}if(o.length>0){j={el:h.livefyre.el,siteId:m,checksum:o.attr("checksum"),articleId:o.attr("articleId"),collectionMeta:o.attr("collectionmeta")};}else{j={collectionMeta:"eyJ0eXAiOiJqd3QiLCJhbGciOiJIUzI1NiJ9.eyJ0aXRsZSI6Iih0ZXN0aW5nIDMgMiAxKSBUaGlzIGlzIGFuIG90aGVyIHRlc3QgdGl0bGUuIiwidXJsIjoiaHR0cDpcL1wvZXhhbXBsZS5jYnMuY29tXC9leGFtcGxlMi5odG1sIiwidGFncyI6IiIsImFydGljbGVJZCI6InRlc3RpbmcxMjM0IiwiY2hlY2tzdW0iOiJlNzI0YjFkMGRjOTZmZjQ4NjcxN2EwNzkyOGU2YjU4MCJ9.3ywwCkxPrLxt0fzCTg6yqNlr79jep6IOaSJYS_jNEUk",checksum:"e724b1d0dc96ff486717a07928e6b580",siteId:"303683",articleId:"testing1234",el:"livefyre_comment_stream"};n=true;}if(!n){f.config.push(j);l.setUpLiveFyre();}},setUpLiveFyre:function(){var j=this;var i=j.customStrings;j.conv=fyre.conv.load({strings:i,network:j.network,authDelegate:f.eventsDelegate},j.config,f.events.doLivefyreAuth);},events:{eventsDelegate:function(j){var i=f.eventsDelegate;i.login=function(l){var k=function(){l.success();janrain.events.onCaptureLoginSuccess.removeHandler(k);janrain.events.onModalClose.removeHandler(m);};var m=function(){l.failure();janrain.events.onModalClose.removeHandler(m);janrain.events.onCaptureLoginSuccess.removeHandler(k);};H.janrain.signin();N.Backplane.expectMessages("identity/login");janrain.events.onCaptureLoginSuccess.addHandler(k);janrain.events.onModalClose.addHandler(m);};i.logout=function(k){H.janrain.signOut();fyre.conv.BackplaneAuthDelegate.prototype.logout.call(i,k);N.livefyreLogout=function(){fyre.conv.BackplaneAuthDelegate.prototype.logout.call(i,k);};janrain.events.onCaptureSessionEnded.addHandler(livefyreLogout);};i.viewProfile=function(k,l,m){if(l.id.indexOf("twitter")>-1||l.id.indexOf("facebook")>-1){return false;}var n=l.id.split("@")[0];H.janrain.displayPublicProfile(n);};i.editProfile=function(k){H.editProfile();};i.share=function(k){k.success();};},doLivefyreAuth:function(i){i.on("commentShared",function(j){I.trigger("contentShare",j.targetId);b.API.update("entity.update",b.API.updateAPI("share"));});i.on("commentPosted",function(j){T.commentPost();if(j.bodyHtml.indexOf("fyre-mention-twitter")>-1||j.bodyHtml.indexOf("fyre-mention-facebook")>-1){G.loadAttempt(60,200,function(){return G(".fyre-modal").size()>0?true:false;},function(){var k=G(".fyre-modal");k.find(".goog-buttonset-default").click(function(){I.trigger("friendTag");});});}});i.on("commentLiked",function(m){var p=m.targetAuthorId.split("@")[0],j=p+"@user.foxnews.com",k=m.targetId,o=p+k,n={verb:"comment like",comment_id:o},l=function(q){L("DO WE HAVE CONNECTION?",q);};I.trigger("commentLike",[j,n,l]);});i.on("commentFlagged",function(l){var n=G("#fyre-message-"+l.targetId).find(".fyre-comment-user").attr("data-author-id").split("@")[0],j=n+"@user.foxnews.com",m={verb:"spank"},k=function(o){L("DO WE HAVE CONNECTION?",o);};I.trigger("spank",[j,m,k]);});i.on("commentCountUpdated",function(k){f.commentsNumber=k;var j=G(".user-interaction > li.comments");j=(j.size()>0)?j:G(".post-footer .comments");if(j.size()>0){if(j.css("display")==="none"){if(j.find("span").size()==0){j.find("a").html("<span></span> "+k+" Comments");}else{j.find("a").html(k+" Comments");}j.css({display:"block"});}else{if(j.find("a > span").size()>0){j.find("a").html("<span></span> "+k+" Comments");}else{j.find("a").html(k+" Comments");}}}else{try{if(N.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){j=G(".post-footer > .comments");if(j.size()>0){j.find("a").html(f.commentsNumber+" Comments");}}}catch(l){}}});i.on("initialRenderComplete",function(k){if(N.FOX_LivefyreIntegrationService){FOX_LivefyreIntegrationService.isReady();}H.livefyre.displayLogo();H.livefyre.hashComment();f.events.omniture();var j=G(".user-interaction > li.comments");if(j.size()>0){if(j.css("display")==="none"){if(j.find("a > span").size()>0){j.find("a").html("<span></span> "+f.commentsNumber+" Comments");}else{j.find("a").html(f.commentsNumber+" Comments");}j.css({display:"block"});}else{if(j.find("span").size()==0){j.find("a").html("<span></span> "+f.commentsNumber+" Comments");}else{j.find("a").html(f.commentsNumber+" Comments");}j.css({display:"block"});}}else{try{if(N.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){j=G(".post-footer > .comments");if(j.size()>0){j.find("a").html(f.commentsNumber+" Comments");}}}catch(l){}}});},omniture:function(){var i={showMore:G(".fyre-stream-more-container"),displayComments:G(".comments")};i.showMore.bind("click",function(){T.commentLoad();});i.displayComments.bind("click",function(){T.commentLoad();});}},API:{configUrl:function(k,i){var j=h.livefyre.activityAPI;return j.replace("{uuid}",k).replace("{cb}",i);},displayDataToPublicProfile:function(i){var k=this,j="FOX_Livefyre_PublicRequest";N[j]=N[j]||function(l){S.commentCount=l.data.user_comment_count;S.likeCount=l.data.user_liked_count;S.rating=l.data.user_rating;H.livefyre.populatePublicProfile();};G.ajax({url:k.configUrl(i,j)+"&userInfoFormat=true",dataType:"script",data:{cb:V(5)},async:true,cache:true});},onProfileUpdate:function(){var j=h.livefyre.apiProfile,i="FOX_livefyreProfileUpdate";N[i]=function(k){};G.ajax({url:j+b.API.token+"&callback="+i,dataType:"script",async:true,cache:true});},onLoginSuccessFromJanrain:function(){var k=G("#livefyre_comment_stream");var j=k.find(".fyre-widget .fyre-auth .fyre-login-bar .fyre-user-loggedout"),i="Signing In...";G.loadAttempt(250,150,function(){return(j&&j.text()!==i)?true:false;},function(){j.text(i);});}},activityTab:{configUrl:function(k,i){var j=(Y.janrainFlow==="profileFlow")?h.livefyre.activityAPI:h.livefyre.activityActiveAPI;return j.replace("{uuid}",k).replace("{cb}",i);},uuid:null,location:null,activityWraper:null,domStorage:null,ajaxRequestsTries:3,currentNumberAttempts:0,maxCommentsGrab:10,curTime:function(){return N.AKAMAI_TIME_HELPER.getCurrent();},backup:null,user:{name:null,image:null},initCallFromJanrain:function(){var i=this;i.cloneMarkUp();},cloneMarkUp:function(){var k=this;var j=G("#livefyre-wrap"),i=j.clone();k.activityWraper=i;j.remove();G("#account-wrap").before(i);k.tabActivity();k.gatherData();},tabActivity:function(){H.domEvents.tabControlsForActivityPages();},assessDom:function(){var k=this;if(k.dom==null){var i=G("#livefyre-Activity").find(".livefyre-pro-activity"),j=i.find("ul");k.dom={image:G("#livefyre-pro-image").find("> img"),ul:j,name:i.find("h1"),body_plain:"comment",url:"link",created_at:"time",conv_title:"whereTitle",structure:i};}return k.dom;},dom:null,manageDomCopy:function(){var j=this,l=j.activityWraper,k=l.find(".livefyre-pro-activity"),i=k.find(".prof-activity ul");return{image:l.find("#livefyre-pro-image").find("> img"),ul:i,name:k.find("h1")};},gatherData:function(j,i){var l=this,k="FOX_liveFYRE_Activity",j=j||S.uuid,m=i||"private";l.uuid=j;l.location=m;if(typeof j==="undefined"){return false;}l.location=i||"private";if(l.location==="private"){l.gatherNameAndImage();}if(!N[k]){N[k]=function(n){l.populateMarkup(n);};}G.ajax({url:l.configUrl(j,k),dataType:"script",data:{cb:V(5)},async:true,cache:true});},hashTagGatherer:function(){var i=this,j=N.location.hash;if(j===""){return i;}i.user.name=j.replace("#","");return i;},hachChanged:function(){},getPhotosAndId:function(){var i=this;if(i.user.name===""||i.user.name==null){i.populateResponce({response:{status:"fail"}});return false;}G.ajax({url:h.janrain.publicRequestAPI+i.user.name,dataType:"json",data:{cb:V(5)},async:true,cache:true,success:function(j){i.populateResponce(j);}});},populateResponce:function(i){var j=f.activityTab;if(i.status!=="ok"){var k=j.assessDom();k.image.parent().hide();k.structure.html("User not found! Please make sure that the user is correct");return false;}if(i.result.photos.length>0){j.user.image=i.result.photos[2].value;}else{j.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}j.uuid=i.result.uuid;j.gatherData(j.uuid,"public");},gatherNameAndImage:function(){var i=this;switch(i.location){case"private":i.user.name=S.userJanrain.displayName;if(S.userJanrain.photos.length>0){i.user.image=S.userJanrain.photos[2]["value"];}else{i.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}break;case"public":i.obtainDataFromExternalJanrain();break;default:break;}},obtainDataFromExternalJanrain:function(){},populateMarkup:function(l){var r=f.activityTab,i=[],k=r.curTime();if(l.code===404){var m=r.assessDom();m.image.parent().hide();m.structure.html("User not found! Please make sure that the user is correct");return false;}else{if(l.code!==200){r.gatherData(r.uuid,r.location);}}if(l.data.length==0){var m=r.assessDom();m.image.parent().hide();m.structure.html("User has no comments");return false;}if(l.code===200&&Y.janrainFlow){var n=l.data,p=10,o=n.length;o=(o>p)?p:o;var s=function(w){var t=[],v=new Date(r.correctingCommentTime(w.created_at)),u=r.createdSinceTime(v,k);t.push("<li><div>");t.push("<p>"+y(w.body_html)+"</p>");t.push("<span>"+u.str+' <a href="'+w.url+'" >'+w.conv_title+"</a></span>");t.push('</div><a href="'+w.url+'" >View</a></li>');function y(AA){var z=G("<div/>").html(AA);if(z.find("span").length>0){z.find("span").each(function(){var AC=G(this),AB=AC.text();AC.text("@"+AB);AC.wrap("a");if(AC.attr("provider")!=="livefyre"){var AD=AC.attr("profile_url");AC.parent().attr("target","_blank");AC.parent().attr("href",AD);}else{AC.parent("a").removeAttr("href");}});return z.html();}else{return AA;}}return(t.join(""));};for(var q=0;q<o;q+=1){i.push(s(n[q]));}i=i.join("");if(r.location==="private"){var j=r.manageDomCopy();j.ul.html(i);r.insertNewMarkupIntoTab();}else{var m=r.assessDom();m.ul.html(i);r.insertNewMarkupIntoTab();}}},parseThroughSpan:function(){G(".prof-activity > ul").find("li").each(function(){var i=G(this);i.find("span").each(function(){var k=G(this);if(k.attr("provider")==="livefyre"){var j=k.attr("jid").split("@")[0];k.parent("a").removeAttr("href");S.uuid=j;k.bind("click",function(){janrain.capture.ui.getPublicProfile("publicProfile",j);});}});});},insertNewMarkupIntoTab:function(){var i=this;if(i.location==="public"){var k=i.assessDom();k.name.html(i.user.name);k.image.attr("src",i.user.image);}else{var j=i.manageDomCopy();j.name.html(i.user.name);j.image.attr("src",i.user.image);}i.parseThroughSpan();},correctingCommentTime:function(k){var l=N.AKAMAI_TIME_HELPER.isDST(),n="GMT"+((l.val)?"+100":"-000");var m=k.split("T"),i=m[0],o=m[1];i=i.split("-");i=[i[1],i[2],i[0]].join("/");var j=new Date([i,o,n].join(" "));return j;},createdSinceTime:function(j,i){var s=this,k=j,n=false;if(!k){return{str:"",val:false};}var q=s.dayDifferences(i,k),t=[];var p=function(w,v){var u=" "+w+((v>1)?"s":"");return u;};var o=function(u){return u<0?u*-1:u;};if(q.s<0){n="Just Now on";}else{if(q.m==0&&q.d==0&&q.h==0){t.push(q.s+p("second",q.s));}else{if(q.m<60&&q.h==0&&q.d==0){t.push(q.m+p("minute",q.m));if(q.s>0){t.push(q.s+p("second",q.s));}}else{if(q.h>=1&&q.d==0){t.push(q.h+p("hour",q.h));if(q.m>0){t.push(q.m+p("minute",q.m));}}else{if(q.d>=1&&q.d<=30){t.push(q.d+p("day",q.d));if(q.h>0){t.push(q.h+p("hour",q.h));}}else{if(q.d>30&&q.d<=365){var m=Math.floor(q.d/30),r=q.d%30;t.push(m+p("month",m));if(r>0){t.push(r+p("day",r));}}else{if(q.d>365){n="1 year ago on";}else{if(q.d>730){n="Many years ago on";}}}}}}}}n=(n)?n:(t.join(", ")+" ago on");var l={str:n,val:j};return l;},dayDifferences:function(i,j){var k=Date.parse(i)-Date.parse(j);return isNaN(k)?NaN:{diff:k,ms:Math.floor(k%1000),s:Math.floor(k/1000%60),m:Math.floor(k/60000%60),h:Math.floor(k/3600000%24),d:Math.floor(k/86400000)};},displayDiffenceTime:function(i){return""+i.ms+" Months"+i.d+" Days "+i.m+" Minutes";},loadDataWhenFailed:function(){var i=this;i.copyToCopy();},copyToCopy:function(){var i=this;G("#account-wrap").before(G(i.activityWraper));i.activityTab();}}};g=function(){var i=O;i.cookieSet=function(){return(G.cookie("SABRE_ID"))?true:false;};i.ureportHost=(function(){return(N.location.host.indexOf("ureport")>-1)?true:false;})();};O={config:{url:h.ureport.url,token:"&token=",email:"&email=",user:"&username="},uReportIdLookupAndDisplay:function(l,j){var i=this,k=(h&&h.ureport&&h.ureport.idLookup)?true:false;if(!k){return false;}N.userNameLookup=function(m){if(j){var n=(m.approvedFiles)?m.approvedFiles:"0";G("#fox_ur_reports").html(n);}else{i.uReportTab(m.id);}};url=h.ureport.idLookup.replace("[UREPORT_USER_ID]",l);G.ajax({url:url,dataType:"script"});},uReportTab:function(q){var r=this,o=false;var k={acctWrap:G("#account-wrap"),ureportWrap:G("#ureport-pro-wrap"),activityWrap:G("#livefyre-wrap"),tabs:G(".tabs"),wraps:G(".wrap"),lastestUrep:G(".latest-urep"),noSub:G(".no-subs")};if(q){var m=q;}else{k.lastestUrep.hide();k.noSub.show();if(typeof auth_fox.user.userJanrain.externalServices==="undefined"){var j=0;var p=setInterval(function(){var t=G("#livefyre-pro-image img").attr("src");if(t.indexOf("static/v/all")===-1){G("#ureport-avatar").prepend('<img src="'+t+'" width="139" height="139"/>');var s=G(".livefyre-pro-activity h1").text();G("#ureport-pro-wrap h1").text(s);G(".sub-ur-banner a").attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");clearInterval(p);}else{if(j===5){clearInterval(p);}j++;}},1000);return ;}else{var m=auth_fox.user.userJanrain.externalServices.uReport_id;}}if(typeof q!=="undefined"){var o=true;}if(!o){var n=k.ureportWrap.clone();k.ureportWrap.remove();k.acctWrap.after(n);}(function(){var s=G("#ureport-pro-wrap"),t=G(".wrap");k.tabs.click(function(){var u=G(this),v=u.attr("id");t.css("display","none");k.tabs.removeClass("active");u.addClass("active");if(v=="account-tab"){k.acctWrap.css("display","block");}if(v=="ureport-pro-tab"){s.css("display","block");}if(v=="ureport-act-tab"){k.activityWrap.css("display","block");}});})();var l={approvedUploadsELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(0) span"),asSeenOnFoxChannelELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(1) span"),featureduReportsELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(2) span"),assignmentsELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(3) span"),latestReport:G("#ureport-pro-wrap .prof-urep-latest"),noSubs:G("#ureport-pro-wrap .no-subs"),latestReportLink:G("#ureport-pro-wrap .latest-urep a"),photoELM:G("#ureport-pro-wrap .latest-urep a img"),title:G("#ureport-pro-wrap .latest-urep div h2 a"),message:G("#ureport-pro-wrap .latest-urep div p"),userName:G("#ureport-pro-name h1"),publicURL:G("#ureport-pro-wrap .sub-ur-banner a"),userName:G("#ureport-pro-name h1"),avatar:G("#ureport-avatar"),accountWrap:G("#account-wrap"),lastestUrep:G(".latest-urep"),noSub:G(".no-subs")};if(o){l.userName.text(location.href.split("#")[1]);var i=auth_fox.livefyre.activityTab.user.image;l.avatar.html('<img src="'+i+'" style="height:139px;width:139px" />');}else{l.userName.text(auth_fox.user.userJanrain.displayName);var i=(typeof auth_fox.user.userJanrain.photos[2]!=="undefined")?auth_fox.user.userJanrain.photos[2]["value"]:false;if(i){l.avatar.html('<img src="'+i+'" style="height:139px;width:139px" />');}}l.publicURL.attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");N.ureportActivity=ureportActivity=function(t){var t=t.result,s=t.seenOnFNC.match(/,/g),u=t.featuredUreports.match(/,/g);s=s?s.length:0;u=u?u.length:0;if(t.approvedUploads!=="0"&&!o){G(".sub-ur-banner").css("visibility","hidden");}l.approvedUploadsELM.text(t.approvedUploads);l.asSeenOnFoxChannelELM.text(s);l.featureduReportsELM.text(u);l.assignmentsELM.text(t.assignments);if(typeof t.publicUrl!=="undefined"&&t.publicUrl!==""){l.photoELM.attr("src",t.publicUrl);l.lastestUrep.show();l.noSub.hide();}else{l.latestReportLink.hide();l.noSubs.show();}l.latestReportLink.attr("href",t.viewUreport);l.title.text(t.title);l.message.text(t.description);if(typeof N.ureportInitialized==="undefined"){N.ureportWrapClone=G("#ureport-pro-wrap").clone();N.ureportInitialized=true;N.refreshUR=refreshUR=function(){G("#account-wrap").after(N.ureportWrapClone);};}};(function(){G.ajax({url:h.ureport.ureportURL.replace("[UREPORT_USER_ID]",m),dataType:"script"});})();},uLogin:function(l,k,o){if(!e("ureport")){return false;}var m=this,i="FOX_ureport_SABRE",j=m.config;var n=k;N[i]=function(p){if(m.ureportHost){G.cookie("SABRE_ID",p.fm,{path:"/"});var q=R.setDomReady.uReport().acc;if(!q.hasClass("action")&&typeof N.Backplane==="function"&&p.fm!==""){if(N.location.pathname==="/assignment"){setTimeout(function(){N.location.pathname="/submitreport";},500);}else{setTimeout(function(){N.location.reload(true);},500);}}}};G.ajax({url:j.url+i+j.token+l+j.email+n+j.user+o,async:true,cache:true,dataType:"script"});},uLogout:function(){var j=this,i=R.setDomReady.uReport().acc;if(j.cookieSet()&&j.ureportHost&&i.hasClass("action")){G.cookie("SABRE_ID",null,{path:"/"});G.cookie("SABRE_ID",null,{path:"/"});setTimeout(function(){N.location.reload(true);},3000);}},clearCookies:function(){var j=0,i=0;G.cookie("SABRE_ID",null,{path:"/"});},docReady:(function(){if(!e("ureport")){return false;}var j=$tartup.site.OnDocReady;function i(k){G.cookie(k,null,{path:"/"});G.cookie("SABRE_ID",null,{path:"/"});G.cookie("p_UN",null,{path:"/"});setTimeout(function(){N.location.reload(true);},3000);}j("slideShowCarousel",{init:function(){var k=this;k.setSlideshow();},setSlideshow:function(){function k(o,n){var m=[];for(var l=1;l<=n.batch.max;l++){m.push('<li><a href="#"></a></li>');}o.html(m.join(""));}G(".c-slide").each(function(n){var r=G(this),o=r.find("div.controls"),q=r.find("ul.sectioning"),p=false;var m=function(s){s.each(function(t){G(this).click(function(){p.stopAutoScroll();p.scrollToBatch(t+1);return false;});});};var l={auto:{set:true,speed:5000,resume:true},slide:"horizontal",scroll:1,show:1,speed:"slow",rotate:true,eventCallback:function(t){var u=t.start,s=t.end;if(t.event==="init"){k(q,t);m(q.find("> li a"));}q.find("> li").each(function(v){G(this).toggleClass("active",(v+1===t.batch.current));});},controlsCallback:function(s){o.find(".prev").click(function(){s.stopAutoScroll();s.slide("prev");return false;});o.find(".next").click(function(){s.stopAutoScroll();s.slide("next");return false;});p=s;}};r.jACarousel(l);});}});j("emailSubmit",{init:function(){var k=this;G("#signupSubmit").click(function(){var l=G("#signupEmail").val();k.validate(l);return false;});G("#signupEmail").attr("value","Enter Your Email").blur(function(){var m=G(this),l=m.attr("value");m.attr("value",(l==="")?"Enter Your Email":l);}).focus(function(){var m=G(this),l=m.attr("value");m.attr("value",(l==="Enter Your Email")?"":l);});},validate:function(k){var m=this,l=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(l.test(k)==false){G(".newsletter-module form .error").text("Please enter a valid email address.").css("display","block");}else{m.postEmail(k);G(".newsletter-module form .error").text("Thank you for subscribing to uReport.").css("display","block");G("#signupEmail").val("");}},postEmail:function(k){G.ajax({url:"http://www.foxnews.com/portal/newsalertsubscribe",data:"slids=3DC725E303A24F8D41CEA8699C0FE71E&email="+k});L(k);}});j("SSOModule",{init:function(){var k=this;},attachEvents:function(){var m=this,l;G("#authentication li:nth-child(1)").click(function(q){m.loadIframe("register");q.preventDefault();});G("#authentication li:nth-child(2)").click(function(q){m.loadIframe("login");q.preventDefault();});var p=G("#log-in");if(p.length>0&&!G.cookie("p_Thirdparty")){p.click(function(r){var q=p.attr("href");m.submitreport=(q.split("?")[1]).split("=")[1];m.loadIframe("login");r.preventDefault();});}G(N).resize(function(){var r=G("#foxFrame"),q=G(N);if(r.length){r.width(q.width());r.height(q.height());}});N.location.hash="";var o=G("#account"),k=G.cookie("p_UN"),n=G.cookie("p_Thirdparty");if(o.hasClass("inactive")){k=G.trim(G.cookie("p_UN").replace("."," "));o.prop("onmouseout",null);o.click(function(r){var q=r.currentTarget;G(q).toggleClass("active");});G(".user-options").prepend("<p>You're logged in as <span>"+truncate(k,13)+"</span></p>");if(n==="true"){o.find("li.first").hide();}}else{if(n){k=G.trim(G.cookie("p_UN").replace("."," "));o.addClass("inactive").html('<div class="username"><div class="encapsulate"><img width="13" height="13" alt=" " src="http://www.foxnews.com/static/all/img/head/profile.png"/><span>Account</span></div><div class="user-options"><p>You\'re logged in as <span>'+truncate(k,13)+'</span></p><ul><li class="first"><li><a onclick="killCookie(\'SABRE_ID\');" href="#">Logout</a></li></ul></div></div>');o.hover(function(r){var q=r.currentTarget;G(q).toggleClass("active");},function(r){var q=r.currentTarget;G(q).toggleClass("active");});}}o.find("li:first a").attr("href","https://secure.foxnews.com/community/user/profile").attr("target","_blank");},loadIframe:function(m){var n=this,o,l,k=G("#login");l=encodeURIComponent(N.location.href);o=G("<iframe />",{id:"foxFrame",src:"http://www.foxnews.com/static/v/all/html/ureport-login-ifr-2.html#"+m+"&url="+l,width:G(N).width(),height:G(N).height(),allowTransparency:true,scrolling:"no"});k.show().css("visibility","hidden");o.load(function(){k.css("visibility","visible");}).appendTo(k);},setHashListener:function(){var l=this;G(N).bind("hashchange",G.proxy(l.hashChange,l));if(G.browser.msie&&(G.browser.version==="7.0")){var k=N.location.hash;N.setInterval(function(){if(N.location.hash!==k){G.proxy(l.hashChange(),l);}},100);}},hashChange:function(){var n=this,p=N.location.hash,k,o,l;G('<link href="http://www.foxnews.com/i/redes/foxnews.ico" rel="shortcut icon" type="image/x-icon" />').appendTo("head");if(p.replace("#","")===""){return ;}try{p=p.replace("#","").split("&");k=p[0].split("=")[1];o=p[1].split("=")[1];l=p[2].split("=")[1];}catch(m){}if(k==="true"){G.cookie("SABRE_ID",o);G(N).unbind("hashchange");N.location.hash="";if(n.submitreport!==null){N.location.pathname="/submitreport";}setTimeout(function(){N.location.reload(true);},1000);}if(l==="true"){N.location.hash="";G("#login").html("").hide();}}});}())};U=function(){this.url="";};B={config:{url:h.whatcounts.subscribe,iframeUrl:"http://$.foxnews.com/feeds/app/newsletters/",sub:"?c=sub",unsub:"?c=unsub",find:"?c=find",email:"&email=",r:"&r=",listId:"&list_id=",cbust:"&cb=",unsubURL:h.whatcounts.unsubscribe,token:"?token=",subRList:"&",callback:"&callback=FOX_whatcounts_UNSUB",cb:"FOX_whatcounts_UNSUB",realms:["foxnews","foxpromos","foxbusiness","foxnewsletter"],janrainHost:"&host=fox-news",Realms:{foxnews:"foxnewsIDList",foxpromos:"foxpromosIDList",foxbusiness:"foxbusinessIDList",foxnewsletter:"foxnewsletterIDList"},idRealms:{foxnewsIDList:"foxnews",foxpromosIDList:"foxpromos",foxbusinessIDList:"foxbusiness",foxnewsletterIDList:"foxnewsletter"},List:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]},subscribeList:{foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]}},dom:{email:null,newsList:null,load:function(){var i=this;i.email=G("#capture_editProfile_edit_email");i.newsList=G(".news-sub-form").find("label");i.signInform=G("#capture_traditionalRegistration_registrationForm");i.signInEmail=i.signInform.find("#capture_traditionalRegistration_form_item_traditionalRegistration_emailAddress input");i.signInLabels=i.signInform.find(".news-sub-form-reg label");i.signInIframeTarget=G("body");}},gatherData:function(){},janrainNewsAlerts:function(o,n){var m,i;var q={"3DC725E303A24F8D197DA3C8590F80E2":["foxnewsletter","172"],"3DC725E303A24F8D1C12D1E24CDEA25E":["foxnewsletter","166"],"3DC725E303A24F8D9C92271F5026F381":["foxnewsletter","106"],"3DC725E303A24F8D555BC7C7F3FD748B":["foxnewsletter","178"],"3DC725E303A24F8D836CEAE9B885C87D":["foxnewsletter","76"],"3DC725E303A24F8DCF015F07C61BABFD":["foxnewsletter","144"],"3DC725E303A24F8DA5DBC7FFD49BC2B8":["foxnewsletter","160"],C2F278094FACCEA62391025B7A52D8EB:["foxnews","35"],"3DC725E303A24F8DE5C63D14EAB8EF63":["foxnewsletter","162"],"3DC725E303A24F8D95ACD1C9C0564C20":["foxnewsletter","96"],"3DC725E303A24F8DA102192D9D5143D9":["foxnewsletter","173"],"3DC725E303A24F8DAB69E1C048904762":["foxnewsletter","153"],"3DC725E303A24F8DB05092D232355E43":["foxnewsletter","71"],"3DC725E303A24F8DE5173CCC4F027046":["foxnewsletter","171"],"3DC725E303A24F8D41CEA8699C0FE71E":["foxnewsletter","133"],D98A625593049BD2AC0F412BA1AF913A:["foxpromos","174"],D98A625593049BD2CBFB283F5508AF71:["foxpromos","43"],"3DC725E303A24F8D64B4C05965F09E1A":["foxnewsletter","99"],"5C84B893BD6D939E84FAE1A8E6E9525A":["foxbusiness","32"],"3DC725E303A24F8D870B96401050B31F":["foxnewsletter","90"],"3DC725E303A24F8D518A0FB222399489":["foxnewsletter","151"],"3DC725E303A24F8D39740C7B45D15F45":["foxnewsletter","69"],"3DC725E303A24F8D3540B4B6FB335FC8":["foxnewsletter","108"],"3DC725E303A24F8D5E4CD875B68955A6":["foxnewsletter","141"],"3DC725E303A24F8D7E5F3A553E2E6154":["foxnewsletter","122"],"3DC725E303A24F8D883169054890DC1B":["foxnewsletter","183"],"3DC725E303A24F8D02B1F9D9AAF16982":["foxnewsletter","97"],D98A625593049BD23B5BE4FDF9C2351F:["foxpromos","139"]},j={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},k=[];if(typeof o!="undefined"){if(o instanceof Array){for(var p=0;p<o.length;p++){m=q[o[p]][0];i=q[o[p]][1];k.push(i);j[m].push(i);}}else{m=q[o][0];i=q[o][1];k.push(i);j[m].push(i);}}else{m="foxbusiness";i="32";k="32";}var l={listIds:k.join(","),email:n,cb:V(),callback:"badgevilleSubscribeSuccess"};N.badgevilleSubscribeSuccess=function(){};L("badgeville request:",l);G.ajax({url:"http://"+h.whatcounts.subdomain+".foxnews.com/feeds/app/badgeville/newsletters/subscribe.json",data:l,dataType:"script"});},lookUpUser:function(){var l=this,i=l.config;l.dom.load();if(l.dom.email.length>0){var m=0;var j=function(){var n=[i.url,i.find,i.r+i.realms[m],i.email+l.dom.email.attr("value"),i.cbust+V(2,"milliseconds")].join("");G.ajax({url:n,dataType:"text",type:"GET",success:function(s){if(s){if(G.browser.msie){s=s.replace(/\s+/g,"");var r=new ActiveXObject("Microsoft.XMLDOM");r.loadXML(s);var q=G(r).find("lists").text();}else{var q=G(s).find("lists").text();}if(q){q=q.split(",");var p=function(u){if(q[u]!==""){i.List[i.Realms[i.realms[m]]].push(q[u]);}};for(var t=0,o=q.length;t<o;t+=1){p(t);}}}if(m<3){m++;j();}else{k();}},error:function(o){L("Error",o);}});};j();function k(){G(document).ready(function(){l.checkNewsLetters();});}}else{L("dom not ready!");}},checkNewsLetters:function(){N.scrollTo(0,1070);this.dom.load();var p=this,o=p.dom.newsList,k=p.config;for(var m in k.List){if(k.List[m]!=0){for(var l=0;l<k.List[m].length;l++){var n=G("#"+m+"_"+k.List[m][l]);G(n).checked=true;G(n[0]).attr("checked","checked");}}}p.setEventListener();H.janrain.screen.stateLookUp=false;},onFail:function(){N.scrollTo(0,1070);this.dom.load();var k=this,j=k.dom.newsList,i=k.config;j.each(function(){var m=G(this).find("input"),l;l=m.attr("id").split("_");if(N._NewsletterBindings.subscribe[i.idRealms[l[0]]].indexOf(l[1])>-1){m[0].checked=true;}if(N._NewsletterBindings.original[i.idRealms[l[0]]].indexOf(l[1])>-1&&N._NewsletterBindings.unsubscribe[i.idRealms[l[0]]].indexOf(l[1])===-1){m[0].checked=true;}});k.setEventListener();},updateSub:function(){var r=this,i=r.dom.newsList,m=r.config,p={},q={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},n={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]};i.each(function(){var t=G(this).find("input"),s;s=t.attr("id").split("_");if(t.is(":checked")){q[m.idRealms[s[0]]].push(s[1]);}else{if(!H.janrain.screen.postAjaxInit){if(m.List[s[0]].indexOf(s[1])>-1){n[m.idRealms[s[0]]].push(s[1]);}}else{if(m.subscribeList[m.idRealms[s[0]]].indexOf(s[1])>-1){n[m.idRealms[s[0]]].push(s[1]);}}}});m.subscribeList=q;for(var l in N._NewsletterBindings.subscribe){if(N._NewsletterBindings.subscribe[l].length!=0){var k=N._NewsletterBindings.subscribe[l].join(","),j=[m.url,m.sub,m.email+r.dom.email.attr("value"),m.listId+k,m.r+l,m.cbust+V(2,"milliseconds")].join("");for(var o=0;o<N._NewsletterBindings.subscribe[l].length;o++){I.credit({verb:"newsletter subscription",newsletterID:l+N._NewsletterBindings.subscribe[l][o]});}G.ajax({url:j,dataType:"html",type:"POST",success:function(s){},error:function(s){L("Error",data,s);}});}}for(var l in N._NewsletterBindings.unsubscribe){if(N._NewsletterBindings.unsubscribe[l].length!=0){var k=N._NewsletterBindings.unsubscribe[l].join(","),j=[m.unsubURL,m.unsub,m.email+r.dom.email.attr("value"),m.listId+k,m.r+l,m.cbust+V(2,"milliseconds")].join("");N[m.cb]=function(s){};G.ajax({url:j,dataType:"script",async:true,cache:true});}}H.janrain.screen.postAjaxInit=true;},subscribeOnSignIn:function(){var r=this;r.dom.load();var s=r.dom.signInLabels,q=r.dom.signInEmail.val(),k=r.dom.signInIframeTarget,p=r.config;for(var m in p.subscribeList){p.subscribeList[m]=[];}G(".subIframe").remove();s.each(function(){var t=G(this).find("input"),j;j=t.attr("id").split("_");if(t[0].checked==true){p.subscribeList[p.idRealms[j[0]]].push(j[1]);}});var l=(function(){var j=location.host.split(".");j.pop();j.pop();return j.join(".");})();for(var o in p.subscribeList){if(p.subscribeList[o].length!=0){var n=p.subscribeList[o].join(","),i=[p.iframeUrl.replace("$",l),p.sub,p.email+q,p.listId+n,p.r+o,p.cbust+V()].join("");k.append('<iframe height=0 width=0 class="subIframe" src="'+i+'"></iframe>');}}I.buffer.push("newsletterSub");},updateSubscribeState:function(){var k=this;scrollTo(0,1070);this.dom.load();var k=this,j=k.dom.newsList,i=k.config;j.each(function(){var p=G(this).find("input"),o;o=p.attr("id").split("_");var n=i.idRealms[o[0]];if(i.subscribeList[n].length!=0){for(var m=0,l=i.subscribeList[n].length;m<l;m+=1){if(o[1]==i.subscribeList[n][m]){p[0].checked=true;}}}});k.setEventListener(true);},setEventListener:function(n){var o=this,k=o.dom.newsList,i=o.config,m;if(n||!N._NewsletterBindings){m=N._NewsletterBindings={original:{},subscribe:{},unsubscribe:{}};}else{m=N._NewsletterBindings;}var l=function(s,q){var r=[];for(var p=0;p<q.length;p++){if(q[p]!==s){r.push(q[p]);}}return r;};var j=function(w,t,r){var u=w.split("_"),q=u[0],v=u[1],p=(i.idRealms[q])?i.idRealms[q]:false;if(p){if(!m.subscribe[p]){m.original[p]=[];m.subscribe[p]=[];m.unsubscribe[p]=[];}if(!r&&t){if(t&&m.subscribe[p].indexOf(v)===-1){m.original[p].push(v);}}else{if(r){var s=(m.original[p].indexOf(v)>-1)?true:false;if(t){if(!s){m.subscribe[p].push(v);}else{if(m.unsubscribe[p].indexOf(v)>-1){m.unsubscribe[p]=l(v,m.unsubscribe[p]);}}}else{if(s){if(m.subscribe[p].indexOf(v)>-1){m.subscribe[p]=l(v,m.subscribe[p]);}if(m.unsubscribe[p].indexOf(v)===-1){m.unsubscribe[p].push(v);}}else{if(m.subscribe[p].indexOf(v)>-1){m.subscribe[p]=l(v,m.subscribe[p]);}}}}}}};k.each(function(){var q=G(this),p=q.find("input"),r=p.attr("id");if(!q.data("_bindings")||n){q.data("_bindings",true);j(r,(p.is(":checked"))?true:false);p.unbind("change").bind("change",function(){j(r,(p.is(":checked"))?true:false,true);});}});}};P=function(){var i=this;i.defaultDom();};d={config:{url:h.ureport.url,token:"&token=",email:"&email=",user:"&username=",logout:"http://quote.foxbusiness.com/loggedout",watchList:"http://www.foxbusiness.com/investing/tools/stock-watchlist",portFolio:"http://www.foxbusiness.com/investing/tools/stock-portfolio"},domSet:function(){var k=G("#mod-portfolio-watchlist"),j=G(".section-mod").find(".authentication"),i=j.find(".auth-new"),l=k.find("li:eq(0) > .photo "),p=k.find("li:eq(1) > .photo "),r=G("#investment-tracker"),n=r.find(".auth-new"),o=G(".dv-feature-9.m-14"),m=o.find("li:eq(0)"),q=o.find("li:eq(1)");return{wAndP:k,auth:j,theW:l,theP:p,authM:r,aW:m,aP:q,lCNA:i,mCNA:n};},domBehaviorLogin:function(){var i=this;var j=i.domSet();j.auth.hide();j.authM.hide();G("#mod-portfolio-watchlist .content > ul > li .photo a").unbind("click");if(j.theW.size()>0){j.theW.unbind("click").bind("click",function(k){N.location.href=i.config.watchList;k.preventDefault();});j.theP.unbind("click").bind("click",function(k){N.location.href=i.config.portFolio;k.preventDefault();});}if(j.aW.size()>0){j.aW.unbind("click").bind("click",function(k){N.location.href=i.config.watchList;k.preventDefault();});j.aP.unbind("click").bind("click",function(k){N.location.href=i.config.portFolio;k.preventDefault();});}},domBehaviorLogout:function(){var i=this;var j=i.domSet();j.auth.show();j.authM.show();if(j.theW.size()>0){j.theW.unbind("click").bind("click",function(k){janrain.capture.ui.renderScreen("signIn");k.preventDefault();});j.theP.unbind("click").bind("click",function(k){janrain.capture.ui.renderScreen("signIn");k.preventDefault();});}if(j.aW.size()>0){j.aW.unbind("click").bind("click",function(k){janrain.capture.ui.renderScreen("signIn");k.preventDefault();});j.aP.unbind("click").bind("click",function(k){janrain.capture.ui.renderScreen("signIn");k.preventDefault();});}},defaultDom:function(){var i=this;var j=i.domSet();j.lCNA.unbind("click").bind("click",function(k){janrain.capture.ui.renderScreen("signIn");k.preventDefault();});j.mCNA.unbind("click").bind("click",function(k){janrain.capture.ui.renderScreen("signIn");k.preventDefault();});},idmsLogin:function(l,k,n){if(!e("foxbusiness")){return false;}var m=this,i="FOX_ureport_SABRE",j=m.config;if(G.cookie("p_IDMS")!=null){m.domBehaviorLogin();return false;}N[i]=function(o){G.cookie("p_IDMS",o.idms,{path:"/",domain:"foxbusiness.com"});m.domBehaviorLogin();};G.ajax({url:j.url+i+j.token+l+j.email+k+j.user+n,async:true,cache:true,dataType:"script"});},idmsLogout:function(){var i=this;if(G.cookie("p_IDMS")!=null){i.clearIdmsCookie();i.domBehaviorLogout();if(N.location.pathname.indexOf("stock-watchlist")>1||N.location.pathname.indexOf("stock-portfolio")>1){setTimeout(function(){N.location.reload();},3000);}}},clearIdmsCookie:function(){G.cookie("p_IDMS",null);G.cookie("p_IDMS",null,{path:"/"});G.cookie("p_IDMS",null,{path:"/",domain:"foxbusiness.com"});}};E=function(){};T={networkShareSuccess:function(){G.ad.track({"network-share-success":{}});},emailShareSuccess:function(){G.ad.track({"email-share-success":{}});},networkShareStart:function(){G.ad.track({"network-share-start":{}});},emailShareStart:function(){G.ad.track({"email-share-start":{}});},registrationStart:function(){G.ad.track({"registration-start":{}});},registrationComplete:function(){G.ad.track({"registration-complete":{}});},logins:function(){G.ad.track({logins:{}});},profileUpdates:function(){G.ad.track({"profile-updates":{}});},fbShare:function(){G.ad.track({"fb-share":{}});},twttrFollow:function(){G.ad.track({"twttr-follow":{}});},commentPost:function(){G.ad.track({"comment-post":{}});},commentLoad:function(){G.ad.track({"comment-load":{}});},commentRead:function(){G.ad.track({"comment-read":{}});}};Z=function(){};H={data:{body:{listener:null}},domEvents:{loginSuccess:function(){var i=R.setDomReady;AUTH_Manager.onReady("livefyre",function(){setTimeout(function(){f.API.onLoginSuccessFromJanrain();},500);});if(N.AUTH_LoginState){AUTH_LoginState.trigger("onLogin");}i.acc.css({visibility:"visible",display:"block"});i.acc.removeClass("none");i.hasAccount.css({display:"block"});i.noAccount.css({display:"none"});},logoutSuccess:function(){var i=R.setDomReady;if(N.AUTH_LoginState){AUTH_LoginState.trigger("onLogout");}i.acc.css({visibility:"visible",display:"block"});i.acc.removeClass("none");i.acc.removeClass("inactive");i.acc.removeClass("active");i.hasAccount.hide();i.noAccount.show();},editProfile:function(){var i=R.setDomReady;i.profile.bind("click",function(j){H.editProfile(j);});},tabControlsForActivityPages:function(){if(typeof N.refreshUR=="function"){N.refreshUR();}if(location.href.indexOf("tab=ureport")>-1){G(".tabs").removeClass("active");G("#ureport-pro-tab").addClass("active");G("#ureport-pro-wrap").css("display","block");G("#livefyre-wrap").css("display","none");}G("#accounts-header").find(".tabs").unbind("click");G("#accounts-header").find(".tabs").click(function(){var j=G(this),k=j.attr("id"),i=G(".wrap");i.css("display","none");G(".tabs").removeClass("active");j.addClass("active");if(k=="account-tab"){G("#account-wrap").css("display","block");}if(k=="ureport-pro-tab"){G("#ureport-pro-wrap").css("display","block");}if(k=="ureport-act-tab"){G("#livefyre-wrap").css("display","block");}});}},onLoginState:function(i){if(N.AUTH_LoginState){AUTH_LoginState.bind("onLogin",i);}},onLogoutState:function(i){if(N.AUTH_LoginState){AUTH_LoginState.bind("onLogout",i);}},accountDisplayBehaviour:function(k){var l=R.setDomReady,i;if(!l.acc.hasClass("alt-style")){l.acc.hover(function(){l.accountNav.addClass("hover");i="over;";},function(){l.accountNav.removeClass("hover");i="out";});l.accountNav.click(function(m){if(l.acc.hasClass("active")){l.acc.removeClass("active").addClass("inactive");}else{l.acc.addClass("active").removeClass("inactive");}});l.body.mousedown(function(m){if(i==="out"){if(l.acc.hasClass("active")){l.acc.removeClass("active").addClass("inactive");}}});}else{var j=l.acc.find(".user-options >ul>li:eq(0) > a");if(j.size()>0){j.click(function(){H.editProfile();});}}l.uReport().redBtn.bind("click",function(m){if(b.API.token===""){H.janrain.signin();return false;}});H.domEvents.editProfile();},janrain:{signin:function(){N.janrain.capture.ui.renderScreen("signIn");return false;},traditionalSigin:function(){janrain.capture.ui.modal.open("traditionalRegistration");return false;},traditionalDisplayName:function(i){var j=i.displayName,k=document.getElementById("displayNameData");if(j&&k){k.innerHTML=j;}},getJanrainUserAPI:function(j,i){b.API.execute(j,i);},signOut:function(){janrain.capture.ui.endCaptureSession();N.Backplane.expectMessages("identity/logout");},registrationStart:function(){T.registrationStart();},successfulRegistration:function(j){B.subscribeOnSignIn();b.API.token=j.accessToken;if(j&&j.action==="socialRegister"){var i="JANRAIN_socialAvatarUpdate",k="https://signin.foxnews.com/entity.update?type_name=user&access_token="+j.accessToken+"&attribute_name=photo_approval_status&value=%22approved%22&jsonp="+i;if(typeof N[i]!=="function"){N[i]=function(l){if(l.stat==="ok"){f.API.onProfileUpdate();}else{}};}G.ajax({url:k,dataType:"script",async:true,cache:true});}janrain.capture.ui.createCaptureSession(j.accessToken);N.Backplane.expectMessages("identity/login");b.session=true;b.sessionType="register";H.domEvents.loginSuccess();H.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:j.accessToken});I.events.chatCheck();T.registrationComplete();if(!j.renders){janrain.capture.ui.modal.close();}},successfulLogin:function(i){janrain.capture.ui.modal.close();janrain.capture.ui.createCaptureSession(i.accessToken);N.Backplane.expectMessages("identity/login");b.session=true;b.sessionType="signin";H.janrain.screen.editProfile.reloadProfile();H.domEvents.loginSuccess();b.API.token=i.accessToken;H.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:i.accessToken});if(N.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){N.location="http://www.foxnews.com/community/user/profile/edit";},10000);}T.logins();I.buffer.push("returnEightPerMonth");I.events.chatCheck();},sessionFound:function(i){if(!b.API.requestSent){janrain.capture.ui.createCaptureSession(i.accessToken);H.domEvents.loginSuccess();b.API.token=i.accessToken;N.Backplane.expectMessages("identity/login");H.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:i.accessToken});b.session=true;b.sessionType="found";I.events.chatCheck();}},sessionNotFound:function(i){H.domEvents.logoutSuccess();b.session=false;b.sessionType="notfound";if(e("ureport")){O.uLogout();}if(e("foxbusiness")){d.idmsLogout();}},sessionEnded:function(){if(e("ureport")){O.uLogout();}b.session=false;b.sessionType="logout";try{if(fyre!=="undefined"&&fyre!=null){fyre.conv.BackplaneAuthDelegate.prototype.logout();}}catch(i){}I.events.unsubscribe();H.domEvents.logoutSuccess();d.idmsLogout();},sessionCreated:function(i){},tokenRefreshed:function(){},tokenExpired:function(i){H.janrain.signOut();},accessDenied:function(){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);},onAuthWidgetLoad:function(i){},onRefreshToken:function(i){janrain.capture.ui.createCaptureSession(i.accessToken);b.API.token=i.accessToken;},backplaneReady:function(i){AUTH_Manager.fireReady("backplane");if(G.browser.msie&&parseInt(G.browser.version,10)<=7){var j=G(".comments");if(j.size()>0){j.remove();}G("#livefyre_comment_stream").html("<p>To participate in commenting, please use Internet Explorer 8 or above.</p>");}else{f.init();}G(N).trigger("janrainShareInit");},displayPublicProfile:function(i){S.userLivefyre.lookUpUUID=i;janrain.capture.ui.getPublicProfile("publicProfile",i);},screen:{currentScreen:null,stateLookUp:true,postAjaxInit:false,failedToUpdate:null,stateOfEditProfile:false,editProfile:{reloadProfile:function(){if(Y.janrainFlow==="profileFlow"){G("#captureAccessDeniedBuiltIn").remove();janrain.capture.ui.renderScreen("editProfile");}},onProfileUpdate:function(i){N.scrollTo(0,0);f.API.onProfileUpdate();B.updateSub();H.janrain.screen.failedToUpdate=false;T.profileUpdates();H.janrain.screen.editProfile.completedProfileCheck();},onProfileAutoSave:function(i){if("durationSinceLastUpdate" in i){document.getElementById("capture_profile_saved").style.display="block";document.getElementById("capture_alert_callout").innerHTML=i.durationSinceLastUpdate;}},completedProfileCheck:function(){var k=false,i=G("#capture_editProfile_edit_zip").attr("value"),l=G("#capture_editProfile_edit_city").attr("value"),m=G("#capture_editProfile_edit_firstName").attr("value"),o=G("#capture_editProfile_edit_email").attr("value"),p=G("#capture_editProfile_edit_gender").attr("value"),j=G("#capture_editProfile_edit_country").find("option:selected").attr("value"),q=G("#capture_editProfile_edit_address1").attr("value"),n=G("#capture_editProfile_edit_lastName").attr("value");if(m!==""&&n!==""&&o!==""&&j!==""&&q!==""&&l!==""&&i!==""&&p!=="default"&&m!==" "&&n!==" "&&o!==" "&&q!==" "&&l!==" "&&i!==" "){I.trigger("completeProfile",S.uuid);}else{}},onProfileFailedSave:function(){H.janrain.screen.failedToUpdate=true;}},registration:{clearInput:function(){}},uiReady:function(){if(Y.janrainFlow==="profileFlow"){janrain.capture.ui.renderScreen("editProfile");}else{if(Y.janrainFlow==="emailFlow"){janrain.capture.ui.renderScreen("registrationVerify");}else{if(Y.janrainFlow==="passwordFlow"){janrain.capture.ui.renderScreen("resetPassword");}}}},onScreenShow:function(k){var r=H.janrain.screen;switch(k.screen){case"editProfile":r.currentScreen="editProfile";G("#captureRetrievingUserDataBuiltIn").hide();var l=false;setTimeout(function(){G(".cancel-button").click(function(){if(N.location.href.indexOf("#")>1){N.history.go(-2);}else{N.history.go(-1);}});function AC(AD,AE,AF){if(AD==null){return false;}if(typeof N.attachEvent==="object"){AD.attachEvent("on"+AE,AF);}else{AD.addEventListener(AE,AF,false);}}var u=document.getElementById("capture_editProfile_edit_country"),v=G("#capture_editProfile_edit_state"),AB=G("#capture_editProfile_display_indicator_public_edit_state"),t=G("#capture_editProfile_display_indicator_private_edit_state"),y=G("#capture_editProfile_display_option_public_edit_state"),AA=G("#capture_editProfile_display_option_private_edit_state"),w=G("#capture_editProfile_form_item_edit_state").find("input");function z(){if(!u||!v){return false;}var AD=v.find("option:selected").attr("value");if(u.options[u.selectedIndex].value==="United States"){if(v){if(v.attr("disabled")&&AD!=="state"){AB.removeClass("capture_toggled");t.addClass("capture_toggled");y.removeClass("capture_checked");AA.addClass("capture_checked");w.attr("value","private");v.attr("disabled",false);v.css({color:"black"});}else{if(v.attr("disabled")&&AD==="state"){v.attr("disabled",false);v.css({color:"black"});}}}}else{if(v){w.attr("value","private");v.attr("disabled",true);v.css({color:"lightgrey"});AB.removeClass("capture_toggled");t.addClass("capture_toggled");y.removeClass("capture_checked");AA.addClass("capture_checked");}}}if(u&&!l){l=true;AC(u,"change",z);}z();},100);try{var q,i=G(".janrain_traditional_account_only");if(typeof N.localStorage!=="undefined"){q=localStorage.getItem("janrainLastAuthMethod");p();}else{q=G.cookie("janrainLastAuthMethod");p();}function p(){if(q==="socialSignin"&&i.size()>0){i.remove();}}}catch(n){}break;case"publicProfile":var s=G(".make-acc");if(!b.session){s.show();}else{s.hide();}break;case"forgotPasswordSuccess":if(N.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){N.location="http://www.foxnews.com";},5000);}break;case"returnTraditional":setTimeout(function(){var t=janrain.capture.ui.getProfileCookieData("displayName"),u=document.getElementById("displayNameData");if(t&&u){u.innerHTML=t;}},500);break;case"registrationVerified":var j=G("#redirectTime"),m=9;o();function o(){setTimeout(function(){if(m===0){N.location="http://www.foxnews.com/community/user/profile/edit";}j.html(" "+m+((m<=1)?" second":" seconds"));m-=1;o();},1000);}break;default:break;}},onRenderComplete:function(i){var k=H.janrain.screen;switch(i.screen){case"editProfile":if(k.stateLookUp){B.lookUpUser();}else{if(k.failedToUpdate){B.onFail();}else{B.updateSubscribeState();}}try{if(i.builtInScreenRendered==="retrievingUserData"&&i.renderingBuiltInScreen){H.janrain.screen.stateOfEditProfile=true;}else{if(H.janrain.screen.stateOfEditProfile&&k.failedToUpdate==null){O.uReportTab();f.activityTab.initCallFromJanrain();}else{if(H.janrain.screen.stateOfEditProfile&&!k.failedToUpdate){O.uReportTab();f.activityTab.loadDataWhenFailed();}else{if(H.janrain.screen.stateOfEditProfile&&k.failedToUpdate){f.activityTab.loadDataWhenFailed();}}}}}catch(l){if(H.janrain.screen.stateOfEditProfile){O.uReportTab();f.activityTab.initCallFromJanrain();}}break;case"publicProfile":if(!i.renderingBuiltInScreen){b.publicProfileLinkUUID();if("lookUpUUID" in S.userLivefyre){f.API.displayDataToPublicProfile(S.userLivefyre.lookUpUUID);}else{f.API.displayDataToPublicProfile(S.uuid);}auth_fox.ureport.uReportIdLookupAndDisplay(G(".capture_display_name").text(),true);}break;}var j=document.getElementById("capture_editProfile_resendLink");if(j){j.hasBeenClicked=false;G(j).click(function(){j.hasBeenClicked=true;});}var m=document.getElementById("forgotPassword");if(m&&m.style.display==="block"){if(b.reset){document.getElementById("capture_forgotPassword_forgotPassword_emailAddress").value="";document.getElementById("capture_forgotPassword_forgotPasswordForm_errorMessages").style.display="none";}}}},share:{shareSendComplete:function(i){T.emailShareSuccess();}},errorEvent:function(i){try{switch(i.stat){case"error":break;default:break;}}catch(j){}},onModalClose:function(){b.reset=true;},validation:{onValidationSuccess:function(){var i=document.getElementById("forgotPassword");if(i&&i.style.display==="block"){b.reset=false;}}},emailSent:function(i){var j=document.getElementById("capture_editProfile_resendLink"),k=G(j).parent();if(j.hasBeenClicked===true){k[0].removeChild(j);k.append('<a style="cursor: default; ">Email Sent</a>');}}},livefyre:{displayLogo:function(){G("#livefyre_comment_stream").append('<div id="powered_by_livefyre_new"><a href="http://livefyre.com" target="_blank">Powered by Livefyre</a></div> ');},hashComment:function(){var k;try{if(N.FOX_metadescriptor&&N.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){G("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{if(N.location.host.indexOf("nation")>-1||G('meta[name="dc.type"]').attr("content")==="Text.Article"){var l=G(".dv-util > .dv-util-1 > a:eq(1)"),j=l.attr("href");j=j.replace("#disqus_thread","#commentsthread");l.attr("href",j);G("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{G("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}}}catch(i){}},logOut:function(){G.loadAttempt(60,250,function(){return(G("#livefyre_comment_stream").find(".fyre-user-loggedin").size()>0)?true:false;},function(){fyre.conv.BackplaneAuthDelegate.prototype.logout();N.Backplane.expectMessages("identity/logout");});},populatePublicProfile:function(){var i=R.setDomReady.publicProfile();i.comments.text(S.commentCount);i.likes.text(S.likeCount);S.commentCount=0;S.likeCount=0;}},badgeVille:{backplane:function(){}},displayName:function(){var i=this,j=R.setDomReady;if(j.acc.hasClass("alt-style")){j.user.find(".encapsulate p").html("Welcome, <strong>"+S.displayName+"</strong>");}else{if(j.name.size()>0){j.name.text(S.displayName);}else{if(auth_fox.dom.setDomReady.userOptions.find("p").size()>0){auth_fox.dom.setDomReady.userOptions.find("p").html("You're logged in as<span>"+S.displayName+"</span>");}}}H.domEvents.loginSuccess();},accountFuncBehaviour:function(){var j=R.setDomReady,i=this;j.login.addClass(Y.classLogin);j.login.bind("click",H.janrain.signin);j.register.bind("click",H.janrain.traditionalSigin);j.logout.bind("click",H.janrain.signOut);},editProfile:function(i){N.location=h.editProfile;},displayShowsProfile:function(){var i=R.setDomReady.acc.find("strong");i.css("cursor","pointer");i.click(function(){H.editProfile();return false;});}};D=function(){};S={uuid:null,email:"",likeCount:0,commentCount:0,displayName:"",userJanrain:{},userLivefyre:{},userBadgeville:{}};var A=(function(){var i=function(){this.setDependencies();this.set();};i.prototype.set=function(){Y.janrainFlow=(function(){var o="authFlow",n=(N.FOX_Janrain_Page_Type)?N.FOX_Janrain_Page_Type:false;switch(n){case"logout":o="logoutFlow";break;case"email-verification":o="emailFlow";break;case"edit-profile":o="profileFlow";break;case"password-reset":o="passwordFlow";break;case"public-profile":o="publicFlow";break;default:o="authFlow";break;}return o;}());var j=[["tools",W,F],["dom",R,C],["require",Y,K],["backplane",J,c],["janrain",b,M],["livefyre",f,Q],["badgeville",I,a],["events",H,Z],["ureport",O,g],["user",S,D],["omniture",T,E],["whatcounts",B,U],["idms",d,P]];var l=new X(j),m;N.auth_fox=l;var k=function(){l.require.loadTemplate();l.events.accountDisplayBehaviour();l.events.accountFuncBehaviour();};if(typeof l.dom.setDomReady==="object"){m=l.dom.setDomReady;k();}else{m=l.dom.setDomReady(function(n){R.setDomReady=n;k();});}if(l.require.janrainFlow==="publicFlow"){l.livefyre.activityTab.tabActivity();auth_fox.livefyre.activityTab.hashTagGatherer().getPhotosAndId();auth_fox.ureport.uReportIdLookupAndDisplay(location.href.split("#")[1]);}};i.prototype.setDependencies=function(){N.AUTH_Manager=new FOX_DependencyManager();AUTH_Manager.addInstance("janrain",["janrain"]);AUTH_Manager.addInstance("capture",["janrain","capture"]);AUTH_Manager.addInstance("livefyre",["janrain","backplane","livefyre"]);AUTH_Manager.addInstance("backplane",["backplane"]);G.loadAttempt(60,500,function(){return(N.fyre&&G("#livefyre_comment_stream .fyre-widget").size()>0)?true:false;},function(){AUTH_Manager.fireReady("livefyre");});AUTH_Manager.onReady("livefyre",function(){L("********** LIVEFYRE IS READY !!! **********");});AUTH_Manager.onReady("janrain",function(){L("********** JANRAIN IS READY !!! **********");});AUTH_Manager.onReady("backplane",function(){L("********** BACKPLANE IS READY !!! **********");});AUTH_Manager.onReady("capture",function(){L("********** CAPTURE IS READY !!! **********");});if(N.CallStackTrigger){N.AUTH_LoginState=new CallStackTrigger();AUTH_LoginState.bind("onLogin",function(){L("[AUTH_LoginState] 'onLogin' triggered.");});AUTH_LoginState.bind("onLogout",function(){L("[AUTH_LoginState] 'onLogout' triggered.");});}};return i;}());if(!G.loadAttempt){(function(){function j(k){return typeof k==="function"?!0:!1;}var i=function(){var p,k=arguments;if(k.length===0){return !1;}var l={attempt:0,timeout:500};if(k.length===1&&typeof k[0]==="object"){for(p in k[0]){l[p]=k[0][p];}if(l.callback){p=l.callback;}else{return !1;}if(!p.check||!p.success){return !1;}else{l._check=p.check,l._success=p.success;}if(p.timedOut){l._timeout=p.timedOut;}}else{if(!isNaN(k[0])&&!isNaN(k[1])&&j(k[2])&&j(k[3])){l.attempt=k[0];l.timeout=k[1];l._check=k[2];l._success=k[3];if(k[4]){l._timeout=k[4];}if(k[5]){l._abort=k[5];}}else{if(j(k[0])&&j(k[1])){l._check=k[0];l._success=k[1];if(k[2]){l._timeout=k[2];}if(k[3]){l._abort=k[3];}}else{return !1;}}}if(!j(l._check)||!j(l._success)){return !1;}if(!j(l._timeout)){l._timeout=function(){};}if(isNaN(l.timeout)){return !1;}else{l.timeout=parseInt(l.timeout,10);}if(isNaN(l.attempt)){return !1;}else{l.attempt=parseInt(l.attempt,10);}var o=!1,m=!1;if(l.attempt&&l.timeout){var n=function(){m?clearTimeout(o):l._check()?(l._success(),clearTimeout(o)):l.attempt>0?o=setTimeout(function(){n();},l.timeout):l._timeout();l.attempt--;};n();}else{o=setInterval(function(){m?clearInterval(o):l._check()&&(l._success(),clearInterval(o));},l.timeout);}return{abort:function(){m=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:i});}else{if(!N.loadAttempt){N.loadAttempt=i;}}})();}function V(m,l){m=m||2;var i=new Date();l=i.getMilliseconds()||"";var n=i.getFullYear().toString()+(i.getMonth()+1).toString()+i.getDate().toString()+l,k=i.getHours()+1,j=i.getMinutes();n+=k.toString()+((m&&!isNaN(m))?(Math.floor(j/parseInt(m,10))).toString():"");return n;}return A;})(jQuery,window);(function(D,C){D(document).ready(function(){var G=(C.auth_fox&&C.auth_fox.whatcounts&&C.auth_fox.whatcounts.janrainNewsAlerts)?true:false;if(!G){return false;}D("#newsletter_form, #rss_newsletter_form").each(function(){var H=D(this);H.find('input[name="submit"]').click(function(){var J=(H.find("#newsletter_input").size()>-1)?H.find("#newsletter_input").val():H.find("#newsletter_email").val();if(D('input:[name="propID_terms"]').size()>0){var I=[];H.find(".option").each(function(){if(D(this).find('input:[name="propID_terms"]').is(":checked")){I.push(D(this).find('input:[name="slid"]').val());}});}else{var I=H.find("#newsletter_slid").val(),J=H.find("#newsletter_email").val();}auth_fox.whatcounts.janrainNewsAlerts(I,J);});});D(function(){D("#newsAlertsEmailSignup.component").each(function(){var H=D(this);FNHPtoSLIDS={BreakingNews:"C2F278094FACCEA62391025B7A52D8EB",BusinessNews:"5C84B893BD6D939E84FAE1A8E6E9525A",GretaWire:"D98A625593049BD23B5BE4FDF9C2351F",DailyNewsletter:"3DC725E303A24F8DA102192D9D5143D9",BestOfBusiness:"3DC725E303A24F8D39740C7B45D15F45",TopHeadlines:"3DC725E303A24F8DB05092D232355E43",MonthlyPolitics:"3DC725E303A24F8D836CEAE9B885C87D",LeisureLedger:"3DC725E303A24F8D02B1F9D9AAF16982",Fox411:"3DC725E303A24F8D9C92271F5026F381",BestOfOpinion:"3DC725E303A24F8D39740C7B45D15F45",SciTechGeekSheet:"3DC725E303A24F8DAB69E1C048904762"},H.find('input[name="submit"]').click(function(){var J=H.find('input:[name="email"]').val();if(D('input:[name="propID_terms"]').size()>-1){var I=[];H.find(".option").each(function(){var K=D(this).find('input:[name="propID_terms"]');if(K.is(":checked")){I.push(FNHPtoSLIDS[K.attr("id")]);}});}auth_fox.whatcounts.janrainNewsAlerts(I,J);});});});});var F,A,E;C.janrainShareOnload=function(){C.janrainShareLoaded=true;D(C).trigger("janrainShareModuleInit");};var B={domain:function(){return false;},meta:function(G,H){if(H==="prop"){H="property";}return D("meta["+H+'="'+G+'"]').attr("content");},metadata:function(K){var G=K.split("::"),I=G[0],J=G[1],H=G[2];return(B.meta(J,I)===H)?true:false;},trim:function(H,G){if(H.length>G){H=H.substring(0,G)+" ...";}return H;},isDevice:function(){var G=false;G=("createTouch" in document)?true:false;G=(!G&&navigator.userAgent.match(/BlackBerry/i))?true:G;return G;}};A=function(){var G=this;this.ready=false;if(C.janrainShareLoaded){this.init();}else{D(C).bind("janrainShareModuleInit",function(){G.init();});}};A.prototype={init:function(){this.ready=true;this.janrain=C.janrain;this.setCallbacks();this.setTemplates();this.articleObj={};},setCallbacks:function(){var I=this.janrain,H=this.resetEmail,G=this;G.responseProvider=null;I.events.onShareLoginStart.addHandler(H);I.events.onShareLoginCancel.addHandler(H);I.events.onShareLoginError.addHandler(H);I.events.onShareSendStart.addHandler(function(J){if(C.auth_fox){if(J.provider==="facebook"){C.auth_fox.omniture.networkShareSuccess();G.responseProvider="facebook";}else{if(J.provider==="twitter"){C.auth_fox.omniture.networkShareSuccess();G.responseProvider="twitter";}else{if(J.provider==="linkedin"){C.auth_fox.omniture.networkShareSuccess();G.responseProvider="linkedin";}else{if(J.mode!=="email"){C.auth_fox.omniture.networkShareSuccess();}else{if(J.mode==="email"){C.auth_fox.omniture.emailShareSuccess();G.responseProvider="email";}}}}}}});I.events.onShareSendComplete.addHandler(function(J){switch(G.responseProvider){case"facebook":D("#janrain-share-providerpage-facebook").find("span.janrain-share-login-button-text").text("Shared on Facebook");break;case"twitter":D("#janrain-share-providerpage-twitter").find("span.janrain-share-login-button-text").text("Shared on Twitter");break;case"linkedin":D("#janrain-share-providerpage-linkedin").find("span.janrain-share-login-button-text").text("Shared on LinkedIn");break;default:D("#janrain-share-providerpage-email").find("span.janrain-share-login-button-text").text("Shared by Email");break;}auth_fox.badgeville.trigger("contentShare",G.articleObj.title);auth_fox.janrain.API.update("entity.update",auth_fox.janrain.API.updateAPI("share"));});},setTemplates:function(){D(".janrain-share-input").attr("placeholder","Write your message");D(".janrain-share-contactadd-input-placeholder").attr("placeholder","Add a contact");D(".janrain-share-contact-input-placeholder").attr("placeholder","Type contact name");D(".janrain-share-bubble").remove();D(".janrain-share-login-prefs-name").remove();D(".janrain_modal_closebutton").attr("href","javascript:;");this.resetEmail();},show:function(J,I,G){var L=this.janrain;var H=I.provider;var K=I.data;this.articleObj=I.data;L.engage.share.show();L.engage.share.setOrientation("landscape");L.engage.share.setTitle(K.title);L.engage.share.setUrl(K.linkBack);L.engage.share.setActionLink({name:"Read more",link:K.actLink});L.engage.share.setImage(K.image);L.engage.share.setDescription(K.desc);L.engage.share.showProvider(H);this.formatPreviewText({title:K.title,desc:K.desc,url:K.actLink});},resetEmail:function(){D(".janrain-share-login-messageemail, .janrain-share-login-messageemailshort").remove();D("#janrain-share-login-button-contact-email-yahoo .janrain-share-login-button-text").text("Yahoo");D("#janrain-share-login-button-contact-email-google .janrain-share-login-button-text").text("Google");},formatPreviewText:function(G){D(".janrain-share-preview-title").text(B.trim(G.title,70));D(".janrain-share-preview-url").text(B.trim(G.url,40));D(".janrain-share-preview-description").text(B.trim(G.desc,130));}};F=function(G){this.cfg=G;this.plugin=G.plugin;};F.prototype={set:function(J,I,G){var H=this,J=D(J);if(B.isDevice()){return J.hide();}J.unbind("click").bind("click",function(K){H.show(K,I,G);return false;});},reset:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").bind("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},setLive:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").live("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},show:function(J,I,G){var H=this.plugin;if(I.provider==="email"){C.auth_fox.omniture.emailShareStart();}else{C.auth_fox.omniture.networkShareStart();}H.show(J,I,G);return false;},showShare:function(H){var G=this.plugin;if(H.provider==="email"){C.auth_fox.omniture.emailShareStart();}else{C.auth_fox.omniture.networkShareStart();}G.show(null,H,null);return false;},hide:function(I,H,G){}};E=function(){var I={},H=B.meta,G=function(J,K){I[J]=K;};G("v8-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=D((C.vcmArticleInfo&&vcmArticleInfo.summary)?vcmArticleInfo.summary:"<div></div>").text()||H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("recipe-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-front",function(){return function(K){var P,N,O,L,M;var J=D(K.currentTarget).parentsUntil("li");J.find("img.m-1").each(function(){N=("http://"+C.location.host+D(this).attr("src"))||H("og:image","prop");});J.find(".a-3").each(function(){var Q=D(this);P=D(this).text();O="America's Talking - All Opinions Welcome. Let your voice be heard @ FoxNation.com.";L=M=Q.attr("href");});return{title:P,image:unescape(N),desc:O,userMessage:"",actLink:L,linkBack:M};};});G("drupal6-shows-article",function(){var M=D("#content-main h3 a").text()||H("dc.title","name")||H("og:title","name");var L=(function(){var N="";var O=D("#content-main .deck > p, #content-main .transcript > p").each(function(){var P=D(this);if(P.html().indexOf("<script")<0&&P.html().indexOf("<object")<0){if(N.length<360){N+=P.text();}}});if(N.length>360){N=N.substring(0,357)+"...";}return N;}());var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N||H("og:url","prop");}());var K=(function(){var N=D("#content-main .photo > img, #content-main img.alignleft, #content-main img.alignright").attr("src");return(N?("http://"+C.location.host+N):H("og:image","prop"));}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("drupal7-shows-blog",function(){return function(O){var N=D(O.currentTarget),P=N,J=(D(".post").size()>0)?".post":"#post-detail",R=P.parentsUntil(".content",J);var Q=R.find(".twitter-tweet-rendered .entry-title").text()||R.find("h2").text()||R.find(".post-content > p").text()||R.find("#twtr-widget > p").text()||R.find("p:first").text()||D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var M=R.find(".twitter-tweet-rendered .entry-title").text()||R.find(".post-content > p").text()||H("description","name")||H("dc.description","name");var S=linkBack=(function(){var U=R.find("h2");var V=R.find(".comments");var T=H("dc.type","name");if(T&&(T==="Text.Article"||T==="InteractiveResource"||T==="MovingImage")){return H("og:url","prop");}if(H("prism.subsection1","name")==="fox-files"||H("prism.subsection1","name")==="foxfriendsfirst"){return H("og:url","prop");}if(U.length>0&&H("prism.subsection1","name")==="willisreport"){return"http://"+C.location.host+U.find("a").attr("href");}if(U.length>0){return"http://"+C.location.host+U.find("a").attr("href");}if(R.length>0){return V.find("a").attr("href");}})();var K=D("link[rel='image_src']").attr("href")||H("og:image","prop");try{if(S.match(/http/)){S=(S.match(/[http\:\/\/].*?\.com(.*)/))[1];S="http://"+C.location.host+S;}}catch(L){}return{title:Q,image:unescape(K),desc:M,userMessage:"",actLink:S,linkBack:linkBack};};});G("trending-fbn",function(){return function(M){var J=D(M.currentTarget),L=J.find("span"),K=L.attr("data-url"),N=L.attr("data-title");return{title:N,image:unescape("http://global.fncstatic.com/static/v/all/img/fb_128x128.png"),desc:N,userMessage:"",actLink:K,linkBack:K};};});G("trending-fnc",function(){return function(M){var J=D(M.currentTarget),L=J.find("span"),K=L.attr("data-url"),N=L.attr("data-title");return{title:N,image:unescape("http://global.fncstatic.com/static/v/all/img/fn_128x128.png"),desc:N,userMessage:"",actLink:K,linkBack:K};};});G("classification-front",function(){return function(K){var P,N,O,L,M;var J=D(K.currentTarget).parentsUntil("ul");N=J.find(".m img").attr("src")||"";P=J.find("h3").text()||"";O=J.find(".summary").text()||"";L=M=J.find("h3 a").attr("href")||"";return{title:P,image:unescape(N),desc:O,userMessage:"",actLink:L,linkBack:M};};});return function(K){var J={};try{J=I[K]();}catch(L){}return J;};};D(function(){var N=new A();var O=new F({plugin:N});var H=new E();var K=B.metadata;C.FOX_ShareMedia=O;var G,M,L,I;var J=function(P){var Q=H(P+"-article");O.set(".share",{provider:"facebook",data:Q});O.set(".email",{provider:"email",data:Q});};G=function(){if(K("name::prism.section::nation")){var P=K;if(P("name::prism.aggregationType::root")||P("name::prism.aggregationType::front")){var S=H("nation-front");O.setLive(".fbook-1",{provider:"facebook",data:S});O.setLive(".twtr-1",{provider:"twitter",data:S});}else{if(P("name::prism.aggregationType::subsection")){var S=H("nation-article");O.set(".fbook-1",{provider:"facebook",data:S});O.set(".twtr-1",{provider:"twitter",data:S});}}}else{if(K("name::prism.aggregationType::topics")){var S=H("classification-front");O.setLive(".trending-fbk",{provider:"facebook",data:S});O.setLive(".trending-twt",{provider:"twitter",data:S});}else{if(K("name::prism.section::shows")){if(K("property::og:type::article")&&(!K("name::prism.subsection1::specialreport")&&!K("name::prism.subsection1::foxnewssunday")&&!K("name::prism.subsection1::fox-files")&&!K("name::prism.subsection1::foxfriendsfirst"))){var S=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:S});O.set(".email",{provider:"email",data:S});}if(K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday")||K("name::prism.subsection1::fox-files")||K("name::prism.subsection1::foxfriendsfirst")){var S=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:S});O.reset(".date li a.twitter",{provider:"twitter",data:S});if(K("name::prism.subsection1::fox-files")){O.reset("#post-detail a.share",{provider:"facebook",data:S});}}if(K("name::prism.subsection1::foxfriendsfirst")){O.reset(".post-detail a.trending-fbk",{provider:"facebook",data:S});O.reset(".post-detail a.trending-twt",{provider:"twitter",data:S});}if((K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday"))&&K("name::prism.subsection2::transcript")){J("v8");}}else{if(K("name::prism.subsection1::trend")){var Q=function(){D(".fbkshares").css("visibility","hidden");D(".twtshares").css("visibility","hidden");var T=H("trending-fnc");O.reset(".fbkshares",{provider:"facebook",data:T});O.reset(".twtshares",{provider:"twitter",data:T});setTimeout(function(){D(".fbkshares").css("visibility","visible").hide().fadeIn(120);D(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};C.setupSharingLinks=function(){try{Q();}catch(T){}};try{Q();}catch(R){}}else{if(K("name::prism.section::community")&&K("name::prism.subsection1::newsletter")){C.excludeNewsletterShare=true;}else{if(K("name::prism.section::politics")&&K("name::prism.subsection1::blogs")){J("v8");}else{if(K("property::og:type::article")){J("v8");}else{if(K("name::prism.aggregationType::recipe")){J("recipe");}}}}}}}}};M=function(){if(K("property::og:type::article")&&(!K("name::prism.subsection1::willisreport"))){var R=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:R});O.set(".email",{provider:"email",data:R});}if(K("name::prism.subsection1::willisreport")){var R=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:R});O.reset(".date li a.twitter",{provider:"twitter",data:R});}else{if(K("name::prism.subsection1::trend")){var P=function(){D(".fbkshares").css("visibility","hidden");D(".twtshares").css("visibility","hidden");var S=H("trending-fbn");O.reset(".fbkshares",{provider:"facebook",data:S});O.reset(".twtshares",{provider:"twitter",data:S});setTimeout(function(){D(".fbkshares").css("visibility","visible").hide().fadeIn(120);D(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};C.setupSharingLinks=function(){try{P();}catch(S){}};try{P();}catch(Q){}}else{if(K("property::og:type::article")){J("v8");}}}};L=function(){if(K("property::og:type::article")){J("v8");}};I=function(){if(K("property::og:type::article")){J("v8");}};if(K("name::prism.channel::fnc")){G();}if(K("name::prism.channel::fbn")){M();}if(K("name::prism.channel::fnl")){L();}if(K("name::prism.channel::fsb")){I();}});})(jQuery,window);(function(E){var D=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1020";(function(){var S=function(W){W=W||false;var T=new Date(),X=T.getFullYear().toString()+(T.getMonth()+1).toString()+T.getDate().toString(),V=T.getHours()+1,U=T.getMinutes();X+=V.toString()+((W&&!isNaN(W))?(Math.floor(U/parseInt(W,10))).toString():"");return X;};document.write('<script type="text/javascript" src="http://global.fncstatic.com/static/v/all/js/geo.js?cb='+S(1)+'"><\/script>');}());var Q=(function(){var T="fn",V=window.location,U=V.host||V.hostname;var S=function(W){return(U.indexOf(W)>-1)?true:false;};if(S("foxnews.com")){if(S("latino.foxnews.com")){T="fn-latino";}else{T="fn";}}else{if(S("foxbusiness.com")){if(S("smallbusiness.foxbusiness.com")){T="sbc";}else{T="fb";}}}return T;}());var P={feed:{whatsHotLive:{feedFunction:"FeedSource_WhatsHotWatchLive",url:"http://www.foxnews.com/js/whatshot.js",rotate:3,show:{hot:false,live:2},fade:{use:true,delay:900}},onAir:{feedFunction:"FeedSource_FNCTV",url:"http://www.foxnews.com/js/onair.js",descCharLimit:35,imageDomainLoc:""},onAirCarousel:{feedFunction:"FOX_FN_OnAir_Data",url:"http://global.fncstatic.com/static/managed/json/onair-feed-data.js"}},onAir:{hideDelay:200},authentication:{use:"render",domain:"foxnews.com",check:"/authentication/registration/validate/"}};window.FOX_Auth_Use_Janrain=(function(){var S=true;S=(window.location.search.indexOf("_authj=n")>-1)?false:S;return S;}());var B=function(){this.headObj={};};B.prototype={init:function(U){var S=this;if(E("body").data("HasHeaderInit")){return false;}E("body").data("HasHeaderInit",true);var V;for(V in U){if(U.hasOwnProperty(V)){this["_"+V]=U[V];}}this.setHolders();var T=function(){var W=false;W=("createTouch" in document)?true:false;W=(!W&&navigator.userAgent.match(/BlackBerry/i))?true:W;return W;};if(T()||!window.FOX_Auth_Use_Janrain||!window.AuthenticationService_Janrain){window.FOX_Auth_Use_Janrain=false;if(T()){E("#account").css("visibility","hidden");}else{this.authentication=new R(this);}}else{this.authentication=new I(this);}this.feeds=new O(this);this.onAir=new J(this);switch(Q){case"fn":S.whatsHot=new K(this);break;case"fb":S.whatsHot=new G(this);break;}this.searchAutocomplete=new A(this);},setHolders:function(){this.headObj={headlines:E("#headlines-primary"),primaryNav:E("#nav-primary"),onAir:E("#section-head .slide.slide-1"),authentication:E("#account")};this.setListeners();},setListeners:function(){var S=function(Y){var W=false,V=Y.split("/")[2]||false,X=window.location.hostname||window.location.host;if(V&&V.length>1){V=V.replace("www.","");if(X.indexOf(V)>-1){W=true;}}return W;};var T=E("#util dl dd");var U=function(){T.find("> a").removeClass("active");};T.each(function(){var X=E(this),V=X.find("> a"),W=V.attr("href");if(S(W)){U();V.addClass("active");}});}};var R=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.authentication.size()===0){return false;}function T(){var a=document.location.hostname,Z=a.split("."),X=Z.length,Y=Z[X-2]+"."+Z[X-1];P.authentication.domain=Y;}function W(){T();if(typeof V[P.authentication.use]==="function"){V[P.authentication.use]();}else{V.render();}}if(typeof AuthService!=="undefined"){W();}else{E(document).ready(function(){if(typeof AuthService!=="undefined"){W();}else{H("[head.authentication] Authentication Service not found.");}});}this.setHolders();},setHolders:function(){var T=this.root.helper.getQueryStr("usr");if(T){E(".login-fields > .field > input[name='userName']").attr("value",T);}},render:function(){var Y=this.root,W=Y.headObj.authentication,V=(W.hasClass("alt-style"))?true:false,a=false,U=false;W.show();if(!V){a=W.find(".user-options > p:first");U=W.find("> .username > .encapsulate");var T=W.find("> .username"),b=E("body");U.hover(function(){E(this).addClass("hover");},function(){E(this).removeClass("hover");});U.click(function(){if(W.hasClass("active")){W.addClass("inactive").removeClass("active");}else{W.addClass("active").removeClass("inactive");}});T.hover(function(){window.FXAuthClickIsOver=true;},function(){if(window.FXAuthClickIsOver){window.FXAuthClickIsOver=false;}});if(!b.data("FXAuthClick")){b.data("FXAuthClick",true);b.mousedown(function(){if(!window.FXAuthClickIsOver&&W.hasClass("active")){W.removeClass("active").addClass("inactive");}});}}else{W=E("#authentication").parent();a=W.find(".username");}function X(e){e=e||"Profile";var c="",d="";if(P.authentication.domain!=="foxnews.com"){c=' target="_blank"';if(typeof E.cookie!=="undefined"&&E.cookie("p_DN")){d="?usr="+E.cookie("p_DN");}}return"<a"+c+' href="http://www.foxnews.com/community/user/profile'+d+'">'+e+"</a>";}var Z=window.authentication_service=new AuthService({domain:P.authentication.domain});Z.extend({createLoginLogout:function(g){var d=this,f=[],e=W.find("#authentication");if(d.isLoggedIn()){if(V){e=e.children(":first");e.each(function(){if(!d.isThirdParty()){E(this).html(X());}else{E(this).css({display:"none"});}});e.next().each(function(){var h=E('<a href="#">Log Out</a>');h.click(function(){try{d.logout(d.domain);}catch(i){H("[head.authentication] Logout - An error occured: "+i);}return false;});E(this).html(h);});a.html('<img src="http://global.fncstatic.com/static/v/all/img/head/profile.png" alt="" /> Welcome, <strong>'+d.getDisplayName()+"</strong>");a.css({display:"inline"});}else{e=W.find(".user-options > ul").children(":first");e.each(function(){if(!d.isThirdParty()){E(this).html(X(E(this).text()));}else{e.css({display:"none"});}});e.next().find("a").click(function(){try{d.logout(d.domain);}catch(h){H("[head.authentication] Logout - An error occured: "+h);}return false;});W.addClass("inactive");var c=(function(){var j=d.getDisplayName(),i=j,k="",h="<span${title}>${name}</span>";if(j.length>13){i=j.slice(0,13)+"...";k=' title="'+j+'"';}return h.replace("${title}",k).replace("${name}",i);}());a.html("You're logged in as "+c);}}else{e.children().find("a").each(function(){var h=E(this),i=h.text().toLowerCase();if(i.indexOf("register")>-1){h.click(function(){try{d.registrationOverlay(d.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(j){H("[head.authentication] Register - An error occured: "+j);}return false;});}else{if(i.indexOf("login")>-1){h.click(function(){try{d.providerOverlay(d.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(j){H("[head.authentication] Login - An error occured: "+j);}return false;});}}});if(V){e.css({display:"inline"});}else{a.html("Please login.");}}},onSuccessLogin:function(){var c=this;c.createLoginLogout();c.closeOverlay("login-provider");},callback:function(c){var d=this,e=d.createObjFromJSON(c);if(e.authentication.status==="ok"){if(d.thirdPartyAPI){d.thirdPartyAPI.disqus.login(e,function(){d.thirdPartyAPI.idms.login(e,function(){d.thirdPartyAPI.fileMobile.login(e,function(){window.FOX_TP_Reload=setTimeout(function(){window.location.reload();},1000);});});});}}d.closeOverlay("login-provider");}});Z.init();Z.createLoginLogout();}};return S;}());var I=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){if(window.AuthenticationService_Janrain){E("p.login-link").hide();var T=window.authentication_service_v3=new AuthenticationService_Janrain();}else{H("[head.Authentication] Fatal Error: Janrain service not found.");}}};return S;}());var J=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var U=this,T=this.root;if(T.headObj.onAir.size()===0){return false;}window[P.feed.onAir.feedFunction]=function(V){U.renderOnAirNow(V);};window[P.feed.onAirCarousel.feedFunction]=function(V){U.renderOnAirCarousel(V,function(){U.carousel();U.setCarouselListeners();});};T.feeds.onAir();T.feeds.onAirCarousel();},renderOnAirNow:function(o){var c=this,k=this.root,Z=o.schedules.today,W=o.schedules.tomorrow,d=E("#show-data"),l=d.children("ul:first");if(d.size()===0){return false;}function h(p){p=E.trim(p);return(p.split(":"))[0]+p.charAt(p.length-2)+"<span>et</span>";}function f(q){var p=P.feed.onAir.descCharLimit;return(q.length>p)?q.substring(0,p)+"...":q;}function U(s,t){t=t||false;var v,w=[],r=(t)?s:s+1,p=E("#section-head").hasClass("fn"),u=0;var y=function(z){u++;if(p){w.push("<li"+((u===1)?' class="first"':"")+">");w.push('<p class="media"><a href="'+z.link+'"><img src="'+P.feed.onAir.imageDomainLoc+z.img+'" alt="" /></a></p>');w.push('<p class="time">'+h(z.time)+"</p>");w.push('<div class="info">');w.push('<p class="summary"><a href="'+z.link+'" title="'+z.dek+'">'+z.title+"</a></p>");w.push('<p class="relation">'+f(z.dek)+"</p>");if(u===1){w.push('<a class="watch-now-link" href="http://watch.foxnews.com/"><img src="http://global.fncstatic.com/static/all/img/watch-icon.gif"></a>');}w.push("</div>");w.push("</li>");}else{w.push("<li"+((u===1)?' class="first"':"")+">");w.push('<p class="media"><a href="'+z.link+'"><img src="'+P.feed.onAir.imageDomainLoc+z.img+'" alt="" /></a></p>');w.push('<div class="info">');w.push('<p class="relation">'+z.title+"</p>");w.push('<p class="summary"><a href="'+z.link+'" title="'+z.dek+'">'+f(z.dek)+"</a></p></div>");w.push('<p class="time">'+h(z.time)+"</p></li>");}};for(v=s;v<=r;v++){var q=Z[v];y(q);}if(t&&W[0]){y(W[0]);}l.html(w.join(""));}var g,j=new Date(o.now.date+" "+o.now.time),e=parseInt(j.getHours()+""+((j.getMinutes()<10)?"0"+j.getMinutes():j.getMinutes()),10);for(g=0;g<Z.length;g++){var m=Z[g],i=(Z[g+1])?Z[g+1]:false;try{var X=E.trim(m.time).toLowerCase();X=(X.charAt(X.indexOf("m")-2)!==" ")?X.replace("pm"," pm").replace("am"," am"):X;var a=new Date(o.now.date+" "+X),n=parseInt(a.getHours()+""+((a.getMinutes()<10)?"0"+a.getMinutes():a.getMinutes()),10);if(i){var Y=E.trim(i.time).toLowerCase();Y=(Y.charAt(Y.indexOf("m")-2)!==" ")?Y.replace("pm"," pm").replace("am"," am"):Y;var V=new Date(o.now.date+" "+Y),T=parseInt(V.getHours()+""+((V.getMinutes()<10)?"0"+V.getMinutes():V.getMinutes()),10);if(e>=n&&e<T){U(g);break;}}else{U(g,true);break;}}catch(b){H("[head.onAir] Error: "+b);}}},renderOnAirCarousel:function(Y,X){var U=this,T=this.root,V=Y;var W=function(){var g=T.headObj.onAir.find("> .content > .slideshow");var c=[],b=V.length;for(var a=0;a<b;a++){var f=V[a],Z=(a===0)?true:false,e=(a+1===b)?true:false,d=(Z)?" section-first":(e)?" section-last":"";c.push('<li class="section'+d+'">');c.push('<p class="media"><a href="'+f.link+'"><img alt="'+f.title+'" pre-src="'+f.img+'" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></a></p>');c.push('<h3><a href="'+f.link+'">'+f.title+"</a></h3>");c.push('<p class="time"><span>'+f.day+"</span> "+f.time+"</p></li>");}g.html("<ul>"+c.join("")+"</ul>");};W();if(typeof X==="function"){X();}},carousel:function(){var U=this.root,V=U.headObj.onAir.children(".content");var T={elm:V,slide:"horizontal",scroll:5,speed:1200,show:5,rotate:false};function W(Z){var X,Y=[];for(X=1;X<=Z.batch.max;X++){Y.push('<li><a href="#">&nbsp;</a></li>');}return Y.join("");}T.elm.each(function(Z){var Y=0,b=E(this);if(b.data("carousel_initialized")){return false;}var a=b.find("ol");var c={prev:b.find(".prev"),next:b.find(".next"),first:b.find(".first-page"),last:b.find(".last-page")};var X={auto:{set:false,speed:3000},slide:T.slide,scroll:T.scroll,show:T.show,speed:T.speed,rotate:T.rotate,eventCallback:function(d){if(d.event==="init"){Y=d.batch.max;a.html(W(d));a.children(":first").addClass("active");b.data("carousel_initialized",true);}else{a.children().each(function(e){E(this).toggleClass("active",function(){return(e+1===d.batch.current)?true:false;});});}if(d.batch.current===1){c.prev.addClass("inactive-prev");c.first.addClass("inactive-first");}else{c.prev.removeClass("inactive-prev");c.first.removeClass("inactive-first");}if(d.batch.current===d.batch.max){c.next.addClass("inactive-next");c.last.addClass("inactive-last");}else{c.next.removeClass("inactive-next");c.last.removeClass("inactive-last");}},controlsCallback:function(d){a.children().find("a").each(function(e){E(this).click(function(){d.stopAutoScroll();d.scrollToBatch(e+1);return false;});});c.first.click(function(){d.stopAutoScroll();d.scrollToItem(1);return false;});c.prev.click(function(){d.stopAutoScroll();d.slide("prev");return false;});c.next.click(function(){d.stopAutoScroll();d.slide("next");return false;});c.last.click(function(){d.stopAutoScroll();d.scrollToItem(Y);return false;});}};if(typeof E.fn.jfoxCarousel!=="undefined"){b.jfoxCarousel(X);}else{E(document).ready(function(){b.jfoxCarousel(X);});}});},setCarouselListeners:function(){var a=this.root,U=a.headObj.primaryNav,T=U.children("ul:first").children("li.on-air"),W=a.headObj.onAir,c=W.css("height").replace("px",""),V=P.onAir.hideDelay;var Z={close:T.find("img").filter(function(){return(E(this).attr("src").indexOf("close.png")>-1)?true:false;}),open:T.find("img").filter(function(){return(E(this).attr("src").indexOf("plus.png")>-1)?true:false;})};function Y(){var d=W.find(".slideshow > ul > li");d.each(function(){var f=E(this),h=f.find("> .media img"),g=h.attr("pre-src"),e=new Image();if(g&&!h.data("preloaded")){e.onload=function(){h.attr("src",g);};e.src=g;h.data("preloaded",true);}});}function X(){W.data("isRendering",true);W.data("hidden",true);W.animate({height:"0px",opacity:"0"},V,"swing",function(){W.css({display:"none"}).data("isRendering",false);});Z.close.hide();Z.open.show();T.removeClass("active");}function b(){if(!W.data("initToFirst")){W.data("initToFirst",true);W.find("p.controls > a.prev").click();}W.data("isRendering",true);W.data("hidden",false);W.css("display","block");W.animate({height:c,opacity:"1"},V,"swing",function(){W.data("isRendering",false);});Z.close.show();Z.open.hide();T.addClass("active");}Z.close.hide();W.css({height:"0px",opacity:"0"}).data("hidden",true);T.find("a").click(function(){Y();if(W.data("isRendering")){return false;}if(W.data("hidden")){b();}else{X();}return false;});}};return S;}());var K=(function(){var S=function(U){this.root=U;this.render=new T(this);this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.headlines.size()===0){return false;}window[P.feed.whatsHotLive.feedFunction]=function(W){V.render.set(W);};U.feeds.whatsHotLive();}};var T=function(U){this.main=this;this.root=U.root;};T.prototype={set:function(a){var W=this.root,V=W.headObj.headlines;var Y=this.hot({title:"Full Coverage",feed:a.whatshot,len:P.feed.whatsHotLive.show.hot});var b=this.live({title:"Watch Live",feed:a.watchlive,len:P.feed.whatsHotLive.show.live});if(typeof a.whatshot!=="undefined"){if(a.whatshot.length===0){return false;}var X=E('<dl class="first"></dl>');X.append(Y).children("dd:first").addClass("first");V.html(X);}if(typeof a.watchlive!=="undefined"){if(a.watchlive.length===0){return false;}var Z=E("<dl></dl>");Z.append(b).children("dd:first").addClass("first");V.append(Z);var U=V.children("dl:nth-child(2)");if(a.watchlive.length>P.feed.whatsHotLive.show.live){this.rotate(U);}else{U.children("dd").css("display","inline");}}},hot:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},live:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},rotate:function(Z){var a=Z.children("dd"),b=Z.children("dt:first"),V=a.size(),Y=P.feed.whatsHotLive.fade;if(V===0){return false;}var U=P.feed.whatsHotLive.rotate*1000;if(Y.use){U=U+Y.delay;}var W=false;a.each(function(d){var e=E(this);e.addClass("first");e.css("display",(d===0)?"inline":"none");if(d===0){e.data("rotateNumber",d+1);}});if(!Z.data("rotateNumber")){Z.data("rotateNumber",1);}function X(e){e=e||false;var d=Z.data("rotateNumber")+1;d=(d>V)?1:d;Z.data("rotateNumber",d);a.each(function(f){var h=E(this),g=f+1;if(!Y.use||e==="click"){h.css("display",(g===d)?"inline":"none");}else{if(g===d){h.fadeIn(Y.delay);}else{h.hide();}}});}function c(){clearInterval(W);W=setInterval(function(){X();},U);}c();b.css("cursor","pointer").click(function(){X("click");});Z.hover(function(){clearInterval(W);},function(){c();});}};return S;}());var G=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var T=this;E("#headlines .dv-list:first").each(function(){T.trigger(E(this));});},trigger:function(W){var T=this,V="fox_header_whatshot",U="http://global.fncstatic.com/static/all/generated/js/fb2-whatshot.js";window[V]=function(X){T.render(X,W);};(function(){var Y=document,X=Y.createElement("script");X.src=U;X.async=true;(Y.getElementsByTagName("head")[0]||Y.getElementsByTagName("body")[0]).appendChild(X);}());},render:function(Y,Z){if(!Y&&!Y.length){return false;}var V,U=[],T=Y.length;U.push("<h2>What's Hot</h2><ul>");for(V=0;V<T;V++){var X=Y[V],W=(V===0)?" dv-item-first":(V===T-1)?" dv-item-last":"";U.push('<li class="dv-item'+W+'">');U.push('<a href="'+X.link+'">'+X.title+"</a>");U.push("</li>");}U.push("</ul>");Z.html(U.join(""));}};return S;}());var O=(function(){var S=function(T){this.root=T;};S.prototype={whatsHotLive:function(){this.get.append({url:P.feed.whatsHotLive.url});},onAir:function(){this.get.append({url:P.feed.onAir.url});},onAirCarousel:function(){this.get.append({url:P.feed.onAirCarousel.url});},get:{append:function(T){(function(){var U=document.createElement("script");U.src=T.url;U.async=true;E("head").get(0).appendChild(U);}());},json:function(T){E.ajax({type:"GET",url:T.url,data:T.query,success:function(U){if(T.callback){T.callback(U);}}});}}};return S;}());var A=(function(){var T=function(U){this.root=U;this.set();};T.prototype={set:function(){var U=this;switch(Q){case"fb":S();break;}}};var S=function(){var U=E("form#searchArea");if(U.size()===0){U=E("#search-site").parent();}U.each(function(){var X=E(this);var V=X.find("input[type='text']");var Y=X.find("input[type='image'],input[type='submit']");var W=V.attr("value");V.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var Z=E(this);var a=(Z.attr("value").length>0)?Z.attr("value"):W;Z.attr("value",a);}).focus(function(){var Z=E(this);var a=(Z.attr("value").indexOf(W)>-1)?"":Z.attr("value");Z.attr("value",a);});IDC_quoteComplete.init();});};return T;}());B.prototype.helper={getQueryStr:function(X){var V=(window.location.search).substr(1);if(V.length>0){var S,W=V.split("&"),T={};for(S=0;S<W.length;S++){var U=W[S].split("=");T[U[0]]=U[1];}return(T[X])?T[X]:false;}return false;}};var H=function(S){if(window.console&&window.console.log){console.log(S);}};var M={isIE:function(){return E.browser.msie;},animate:function(T,S){if(!this.isIE()){if(!S.speed){S.speed=300;}if(!S.type){S.type="swing";}T.animate(S.css,S.speed,S.type,function(){if(S.callback){S.callback();}});}else{T.css(S.css);T.css("opacity","");if(S.callback){S.callback();}}},hide:function(V,S){if(!V){return false;}var T,U={opacity:"0"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);},show:function(V,S){if(!V){return false;}var T,U={opacity:"1"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);}};var C=new B();(function(){var T=function(){E(document).ready(function(){C.init();});};try{if(window.FOX&&FOX.site&&typeof FOX.site.bottomInit==="function"){var S=FOX.site.bottomInit;FOX.site.bottomInit=function(){C.init();S();};}else{if(window.FOX_HP&&FOX_HP.site.OnPageReady){FOX_HP.site.OnPageReady(function(){C.init();});}else{T();}}}catch(U){T();}}());var N=window.siteStreamFlashPlayer=function(T,S){var b=(typeof T==="undefined")?1:T,Y=(typeof S==="undefined")?"foxnews":S,a=850,W=506,U=(screen.width-a)/2,Z=(screen.height-W)/2,V="height="+W+",width="+a+",top="+Z+",left="+U+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",X=window.open("http://interactive."+Y+".com/livestream/live.html?chanId="+b+"&openAIR=true","livePlayer",V);X.focus();};var F=window.siteStreamLivePlayer=function(X){var S=914,T=419,W=(screen.width-S)/2,V=(screen.height-T)/2;url="http://video.foxnews.com/video-live-streaming.html",settings="height="+T+",width="+S+",top="+V+",left="+W+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",url=url+((X&&!isNaN(X))?"?video_id="+X:"");var U=window.open(url,"LivePlayer",settings);U.focus();};var L=window.FOX_isMnt=function(){var S=false,U=window.CONST_Akamai_TIME||false;try{if(U.yr==="2011"&&U.mm==="11"&&(U.dd==="05"||U.dd==="06")){S=true;}else{if(U.yr==="2011"&&U.mm==="11"&&U.dd==="04"&&parseInt(U.hr,10)>=17){S=true;}}}catch(T){}return S;};}(jQuery));(function(A){A(document).ready(function(){var B=A("#section-footer a[rel*='external']");if(window.FOX&&FOX.utils&&FOX.utils.extLink){FOX.utils.extLink.set(B);}else{B.each(function(){var D=A(this),E=A.trim(D.attr("href")||""),C=A.trim(D.attr("rel")||"");if(E.length>0&&E!=="#"){C=(C.indexOf("external")>-1)?C:[C,"external"].join(" ");C=A.trim([C,"ext-linked"].join(" "));D.attr("rel",C);D.click(function(){window.open(E,"_blank");return false;});if(!D.attr("target")){D.attr("target","_blank");}}});}});}(jQuery));window.IDC_quoteComplete=(function(B){var A={index:-1,totalResults:0,results:false,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){B("."+A.resultsDiv).html("");A.results=false;A.index=-1;},init:function(){B(A.field).focus(function(){if(B(this).val()===A.defaultText){B(this).val("");}A.reset();});B(A.field).blur(function(D){if(B(this).val()===""){B(this).val(A.defaultText);}setTimeout(function(){A.reset();},500);});B(A.field).parents("form").submit(function(){if(A.index>-1){B(A.field).val(B("#search_drop_overlay ul li:eq("+A.index+") a span.ticker").text());}if(A.index>-1){A.action=A.quoteUrl;}A.action+=encodeURIComponent(B(A.field).val());if(A.index>-1){A.reset();}document.location=A.action;return false;});var C="FOX_IDC_QuoteResponse";window[C]=function(D){A.response(D);};B(A.field).keyup(function(D){if((D.keyCode>=65&&D.keyCode<=90)||(D.keyCode>=97&&D.keyCode<=122)||D.keyCode===8){A.index=-1;var E=B(A.field).val();B("."+A.resultsDiv).html("");if(E!==""){B.getJSON(A.url+"?q="+E+"&callback="+C+"&jsonp=?");A.results=true;}else{A.results=false;}}else{if(D.keyCode===40||D.keyCode===38){if(A.results){B("#search_drop_overlay ul li:eq("+A.index+")").removeClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").removeClass("selected");if(D.keyCode===40){if(A.index<(A.totalResults-1)){A.index++;}else{A.index=0;}}else{if(A.index>0){A.index--;}else{A.index=A.totalResults-1;}}B("#search_drop_overlay ul li:eq("+A.index+")").addClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").addClass("selected");}}else{if(D.keyCode===27){A.reset();}}}});B(A.field).parents("form").after('<div class="'+A.resultsDiv+'"></div>');},response:function(D){var C="";var E=B(A.field).val();if(D!==""){A.totalResults=B(D).size();C+="<ul>";B.each(D,function(I,M){var J=new RegExp(E,"i");var L=this.s.search(J);var F=this.n.search(J);var G=L>-1?this.s.replace(J,"<strong>"+this.s.slice(L,(L+E.length))+"</strong>"):this.s;var H=F>-1?this.n.replace(J,"<strong>"+this.n.slice(F,(F+E.length))+"</strong>"):this.n;var K=this.s;C+='<li><a href="'+A.quoteUrl+K+'"><span class="ticker">'+G+'</span><span class="corporation">'+H+"</span></a></li>";});C+="</ul>";}else{A.totalResults=0;C="<p>No suggestions available</p>";}B("."+A.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+C+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+A.action+E+'">Search for News &amp; Videos "<strong>'+E.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>');A.initMouseEvents();},initMouseEvents:function(){B("."+A.resultsDiv+" ul li").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li").mouseout(function(){B(this).removeClass("selected");});B("."+A.resultsDiv+" ul li a").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li a:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li a").mouseout(function(){B(this).removeClass("selected");});}};return A;})(jQuery);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var d="undefined",R="object",s="Shockwave Flash",w="ShockwaveFlash.ShockwaveFlash",Q="application/x-shockwave-flash",r="SWFObjectExprInst",X="onreadystatechange",o=window,J=document,T=navigator,t=false,u=[H],O=[],n=[],i=[],L,q,e,b,j=false,A=false,N,g,M=true,m=function(){var AB=typeof J.getElementById!=d&&typeof J.getElementsByTagName!=d&&typeof J.createElement!=d,AI=T.userAgent.toLowerCase(),z=T.platform.toLowerCase(),AF=z?/win/.test(z):/win/.test(AI),AD=z?/mac/.test(z):/mac/.test(AI),AG=/webkit/.test(AI)?parseFloat(AI.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,y=!+"\v1",AH=[0,0,0],AC=null;if(typeof T.plugins!=d&&typeof T.plugins[s]==R){AC=T.plugins[s].description;if(AC&&!(typeof T.mimeTypes!=d&&T.mimeTypes[Q]&&!T.mimeTypes[Q].enabledPlugin)){t=true;y=false;AC=AC.replace(/^.*\s+(\S+\s+\S+$)/,"$1");AH[0]=parseInt(AC.replace(/^(.*)\..*$/,"$1"),10);AH[1]=parseInt(AC.replace(/^.*\.(.*)\s.*$/,"$1"),10);AH[2]=/[a-zA-Z]/.test(AC)?parseInt(AC.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof o.ActiveXObject!=d){try{var AE=new ActiveXObject(w);if(AE){AC=AE.GetVariable("$version");if(AC){y=true;AC=AC.split(" ")[1].split(",");AH=[parseInt(AC[0],10),parseInt(AC[1],10),parseInt(AC[2],10)];}}}catch(AA){}}}return{w3:AB,pv:AH,wk:AG,ie:y,win:AF,mac:AD};}(),K=function(){if(!m.w3){return ;}if((typeof J.readyState!=d&&J.readyState=="complete")||(typeof J.readyState==d&&(J.getElementsByTagName("body")[0]||J.body))){F();}if(!j){if(typeof J.addEventListener!=d){J.addEventListener("DOMContentLoaded",F,false);}if(m.ie&&m.win){J.attachEvent(X,function(){if(J.readyState=="complete"){J.detachEvent(X,arguments.callee);F();}});if(o==top){(function(){if(j){return ;}try{J.documentElement.doScroll("left");}catch(y){setTimeout(arguments.callee,0);return ;}F();})();}}if(m.wk){(function(){if(j){return ;}if(!/loaded|complete/.test(J.readyState)){setTimeout(arguments.callee,0);return ;}F();})();}S(F);}}();function F(){if(j){return ;}try{var AA=J.getElementsByTagName("body")[0].appendChild(c("span"));AA.parentNode.removeChild(AA);}catch(AB){return ;}j=true;var y=u.length;for(var z=0;z<y;z++){u[z]();}}function k(y){if(j){y();}else{u[u.length]=y;}}function S(z){if(typeof o.addEventListener!=d){o.addEventListener("load",z,false);}else{if(typeof J.addEventListener!=d){J.addEventListener("load",z,false);}else{if(typeof o.attachEvent!=d){I(o,"onload",z);}else{if(typeof o.onload=="function"){var y=o.onload;o.onload=function(){y();z();};}else{o.onload=z;}}}}}function H(){if(t){v();}else{h();}}function v(){var y=J.getElementsByTagName("body")[0];var AB=c(R);AB.setAttribute("type",Q);var AA=y.appendChild(AB);if(AA){var z=0;(function(){if(typeof AA.GetVariable!=d){var AC=AA.GetVariable("$version");if(AC){AC=AC.split(" ")[1].split(",");m.pv=[parseInt(AC[0],10),parseInt(AC[1],10),parseInt(AC[2],10)];}}else{if(z<10){z++;setTimeout(arguments.callee,10);return ;}}y.removeChild(AB);AA=null;h();})();}else{h();}}function h(){var AH=O.length;if(AH>0){for(var AG=0;AG<AH;AG++){var z=O[AG].id;var AC=O[AG].callbackFn;var AB={success:false,id:z};if(m.pv[0]>0){var AF=C(z);if(AF){if(f(O[AG].swfVersion)&&!(m.wk&&m.wk<312)){W(z,true);if(AC){AB.success=true;AB.ref=Z(z);AC(AB);}}else{if(O[AG].expressInstall&&a()){var AJ={};AJ.data=O[AG].expressInstall;AJ.width=AF.getAttribute("width")||"0";AJ.height=AF.getAttribute("height")||"0";if(AF.getAttribute("class")){AJ.styleclass=AF.getAttribute("class");}if(AF.getAttribute("align")){AJ.align=AF.getAttribute("align");}var AI={};var y=AF.getElementsByTagName("param");var AD=y.length;for(var AE=0;AE<AD;AE++){if(y[AE].getAttribute("name").toLowerCase()!="movie"){AI[y[AE].getAttribute("name")]=y[AE].getAttribute("value");}}p(AJ,AI,z,AC);}else{P(AF);if(AC){AC(AB);}}}}}else{W(z,true);if(AC){var AA=Z(z);if(AA&&typeof AA.SetVariable!=d){AB.success=true;AB.ref=AA;}AC(AB);}}}}}function Z(AB){var y=null;var z=C(AB);if(z&&z.nodeName=="OBJECT"){if(typeof z.SetVariable!=d){y=z;}else{var AA=z.getElementsByTagName(R)[0];if(AA){y=AA;}}}return y;}function a(){return !A&&f("6.0.65")&&(m.win||m.mac)&&!(m.wk&&m.wk<312);}function p(AB,AC,y,AA){A=true;e=AA||null;b={success:false,id:y};var AF=C(y);if(AF){if(AF.nodeName=="OBJECT"){L=G(AF);q=null;}else{L=AF;q=y;}AB.id=r;if(typeof AB.width==d||(!/%$/.test(AB.width)&&parseInt(AB.width,10)<310)){AB.width="310";}if(typeof AB.height==d||(!/%$/.test(AB.height)&&parseInt(AB.height,10)<137)){AB.height="137";}J.title=J.title.slice(0,47)+" - Flash Player Installation";var AE=m.ie&&m.win?"ActiveX":"PlugIn",AD="MMredirectURL="+o.location.toString().replace(/&/g,"%26")+"&MMplayerType="+AE+"&MMdoctitle="+J.title;if(typeof AC.flashvars!=d){AC.flashvars+="&"+AD;}else{AC.flashvars=AD;}if(m.ie&&m.win&&AF.readyState!=4){var z=c("div");y+="SWFObjectNew";z.setAttribute("id",y);AF.parentNode.insertBefore(z,AF);AF.style.display="none";(function(){if(AF.readyState==4){AF.parentNode.removeChild(AF);}else{setTimeout(arguments.callee,10);}})();}U(AB,AC,y);}}function P(z){if(m.ie&&m.win&&z.readyState!=4){var y=c("div");z.parentNode.insertBefore(y,z);y.parentNode.replaceChild(G(z),y);z.style.display="none";(function(){if(z.readyState==4){z.parentNode.removeChild(z);}else{setTimeout(arguments.callee,10);}})();}else{z.parentNode.replaceChild(G(z),z);}}function G(AC){var AB=c("div");if(m.win&&m.ie){AB.innerHTML=AC.innerHTML;}else{var z=AC.getElementsByTagName(R)[0];if(z){var AD=z.childNodes;if(AD){var y=AD.length;for(var AA=0;AA<y;AA++){if(!(AD[AA].nodeType==1&&AD[AA].nodeName=="PARAM")&&!(AD[AA].nodeType==8)){AB.appendChild(AD[AA].cloneNode(true));}}}}}return AB;}function U(AJ,AH,z){var y,AB=C(z);if(m.wk&&m.wk<312){return y;}if(AB){if(typeof AJ.id==d){AJ.id=z;}if(m.ie&&m.win){var AI="";for(var AF in AJ){if(AJ[AF]!=Object.prototype[AF]){if(AF.toLowerCase()=="data"){AH.movie=AJ[AF];}else{if(AF.toLowerCase()=="styleclass"){AI+=' class="'+AJ[AF]+'"';}else{if(AF.toLowerCase()!="classid"){AI+=" "+AF+'="'+AJ[AF]+'"';}}}}}var AG="";for(var AE in AH){if(AH[AE]!=Object.prototype[AE]){AG+='<param name="'+AE+'" value="'+AH[AE]+'" />';}}AB.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AI+">"+AG+"</object>";n[n.length]=AJ.id;y=C(AJ.id);}else{var AA=c(R);AA.setAttribute("type",Q);for(var AD in AJ){if(AJ[AD]!=Object.prototype[AD]){if(AD.toLowerCase()=="styleclass"){AA.setAttribute("class",AJ[AD]);}else{if(AD.toLowerCase()!="classid"){AA.setAttribute(AD,AJ[AD]);}}}}for(var AC in AH){if(AH[AC]!=Object.prototype[AC]&&AC.toLowerCase()!="movie"){E(AA,AC,AH[AC]);}}AB.parentNode.replaceChild(AA,AB);y=AA;}}return y;}function E(AA,y,z){var AB=c("param");AB.setAttribute("name",y);AB.setAttribute("value",z);AA.appendChild(AB);}function Y(z){var y=C(z);if(y&&y.nodeName=="OBJECT"){if(m.ie&&m.win){y.style.display="none";(function(){if(y.readyState==4){B(z);}else{setTimeout(arguments.callee,10);}})();}else{y.parentNode.removeChild(y);}}}function B(AA){var z=C(AA);if(z){for(var y in z){if(typeof z[y]=="function"){z[y]=null;}}z.parentNode.removeChild(z);}}function C(AA){var y=null;try{y=J.getElementById(AA);}catch(z){}return y;}function c(y){return J.createElement(y);}function I(AA,y,z){AA.attachEvent(y,z);i[i.length]=[AA,y,z];}function f(AA){var z=m.pv,y=AA.split(".");y[0]=parseInt(y[0],10);y[1]=parseInt(y[1],10)||0;y[2]=parseInt(y[2],10)||0;return(z[0]>y[0]||(z[0]==y[0]&&z[1]>y[1])||(z[0]==y[0]&&z[1]==y[1]&&z[2]>=y[2]))?true:false;}function V(AE,z,AF,AD){if(m.ie&&m.mac){return ;}var AB=J.getElementsByTagName("head")[0];if(!AB){return ;}var y=(AF&&typeof AF=="string")?AF:"screen";if(AD){N=null;g=null;}if(!N||g!=y){var AA=c("style");AA.setAttribute("type","text/css");AA.setAttribute("media",y);N=AB.appendChild(AA);if(m.ie&&m.win&&typeof J.styleSheets!=d&&J.styleSheets.length>0){N=J.styleSheets[J.styleSheets.length-1];}g=y;}if(m.ie&&m.win){try{AE=AE.replace(/\:/g,"\\:");N.addRule(AE,z);}catch(AC){try{N.addRule(AE,z);}catch(AC){}}}else{if(N&&typeof J.createTextNode!=d){N.appendChild(J.createTextNode(AE+" {"+z+"}"));}}}function W(AA,y){if(!M){return ;}var z=y?"visible":"hidden";if(j&&C(AA)){C(AA).style.visibility=z;}else{V("#"+AA,"visibility:"+z);}}function l(z){var AA=/[\\\"<>\.;]/;var y=AA.exec(z)!=null;return y&&typeof encodeURIComponent!=d?encodeURIComponent(z):z;}var D=function(){if(m.ie&&m.win){window.attachEvent("onunload",function(){var AD=i.length;for(var AC=0;AC<AD;AC++){i[AC][0].detachEvent(i[AC][1],i[AC][2]);}var AA=n.length;for(var AB=0;AB<AA;AB++){Y(n[AB]);}for(var z in m){m[z]=null;}m=null;for(var y in swfobject){swfobject[y]=null;}swfobject=null;});}}();return{registerObject:function(AC,y,AB,AA){if(m.w3&&AC&&y){var z={};z.id=AC;z.swfVersion=y;z.expressInstall=AB;z.callbackFn=AA;O[O.length]=z;W(AC,false);}else{if(AA){AA({success:false,id:AC});}}},getObjectById:function(y){if(m.w3){return Z(y);}},embedSWF:function(AC,AI,AF,AH,z,AB,AA,AE,AG,AD){var y={success:false,id:AI};if(m.w3&&!(m.wk&&m.wk<312)&&AC&&AI&&AF&&AH&&z){W(AI,false);k(function(){AF+="";AH+="";var AK={};if(AG&&typeof AG===R){for(var AM in AG){AK[AM]=AG[AM];}}AK.data=AC;AK.width=AF;AK.height=AH;var AN={};if(AE&&typeof AE===R){for(var AL in AE){AN[AL]=AE[AL];}}if(AA&&typeof AA===R){for(var AJ in AA){if(typeof AN.flashvars!=d){AN.flashvars+="&"+AJ+"="+AA[AJ];}else{AN.flashvars=AJ+"="+AA[AJ];}}}if(f(z)){var AO=U(AK,AN,AI);if(AK.id==AI){W(AI,true);}y.success=true;y.ref=AO;}else{if(AB&&a()){AK.data=AB;p(AK,AN,AI,AD);return ;}else{W(AI,true);}}if(AD){AD(y);}});}else{if(AD){AD(y);}}},switchOffAutoHideShow:function(){M=false;},ua:m,getFlashPlayerVersion:function(){return{major:m.pv[0],minor:m.pv[1],release:m.pv[2]};},hasFlashPlayerVersion:f,createSWF:function(AA,z,y){if(m.w3){return U(AA,z,y);}else{return undefined;}},showExpressInstall:function(AA,AB,y,z){if(m.w3&&a()){p(AA,AB,y,z);}},removeSWF:function(y){if(m.w3){Y(y);}},createCSS:function(AB,AA,z,y){if(m.w3){V(AB,AA,z,y);}},addDomLoadEvent:k,addLoadEvent:S,getQueryParamValue:function(AB){var AA=J.location.search||J.location.hash;if(AA){if(/\?/.test(AA)){AA=AA.split("?")[1];}if(AB==null){return l(AA);}var z=AA.split("&");for(var y=0;y<z.length;y++){if(z[y].substring(0,z[y].indexOf("="))==AB){return l(z[y].substring((z[y].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(A){var y=C(r);if(y&&L){y.parentNode.replaceChild(L,y);if(q){W(q,true);if(m.ie&&m.win){L.style.display="block";}}if(e){e(b);}}A=false;}}};}();(function(D){var L={yume_ad_domain_code:{fn2:"109RXfmeHtS",fb2:"109DLWefYRt",fb:"109RXfmeHtS","fn-latino":"109RXfmeHtS"},settings_url:{fn2:"http://video.foxnews.com/assets/akamai/resources/conf/config.xml",fb2:"http://video.foxbusiness.com/assets/akamai/resources/conf/config-fb.xml",fb:"http://video.foxbusiness.com/assets/akamai/resources/conf/config-sbc.xml","fn-latino":"http://video.foxnews.com/assets/akamai/resources/conf/config-latino.xml"},auditude_code:{defaultAssetId:"fnd_default_asset",adDomain:"auditude.com",zoneId:{fn2:"52522",fb2:"52523",fb:"52526","fn-latino":"52522"}}};window.MvPlayer=function(){this.version="1.2.9.5";this._namespace=null;this._config={};this._videoDomain="video.foxnews.com";this._callbacksObj={};this._autoEmbed=true;this.holder={};this.playerIds=[];this.playerMap={};this.idSeparator=":";this.instanceId=["videoid","videolink","playlistid"];this.feedFolder={video:"/v/feed/video/",playlist:"/v/feed/playlist/"};this.itemType={videoid:"video",playlistid:"playlist"};this.feedQueryString={template:"fox"};this.playTimeout={};this.dataObj={};this.holderObj={};this.overlayObj={defaultImg:"http://global.fncstatic.com/static/v/all/img/vp-overlay.png",blankImg:"http://global.fncstatic.com/static/v/all/img/clear.gif"};};MvPlayer.prototype={init:function(O){var P,S,Q=this;for(P in O){Q["_"+P]=O[P];}Q.embed.root=Q.feed.root=Q.video.root=Q.format.root=Q.controls.root=Q.thirdParty.root=Q.feedParser.root=Q._helper.root=this;var R={},M=Q._config;if(M.player.feedSettings){if(M.player.feedSettings.videoFolder){R.video=M.player.feedSettings.videoFolder;}if(M.player.feedSettings.playlistFolder){R.playlist=M.player.feedSettings.playlistFolder;}}if(M.player.isLivePlayer){this.itemType.videoid="live";R.video=R.video.replace("/video/","/live/");}if(O.callbacks){if(typeof O.callbacks==="object"&&!E(O.callbacks)){for(S in O.callbacks){if(Q._callbacksObj[S]){for(P in O.callbacks){Q._callbacksObj[S][P]=O.callbacks[S][P];}}else{Q._callbacksObj[S]=O.callbacks[S];}}}}this.videoTypeLinks={videoid:"http://"+Q._videoDomain+((R.video)?R.video:Q.feedFolder.video),playlistid:"http://"+Q._videoDomain+((R.playlist)?R.playlist:Q.feedFolder.playlist)};Q._isPandora=false;if(typeof I!=="undefined"){var N=new I(Q);if(N.init()){Q._isPandora=true;C("[videoPlayer.init] Using Pandora.");Q.pandora=N;Q.pandora.init();}}if(typeof O.onInit==="function"){O.onInit(Q);}if(!Q._autoEmbed){return false;}Q.holder.videoObj=D(".video,.video-ct");Q.embed.players();},render:function(Q){if(!Q){return false;}if(!Q.id||!Q.holder){return false;}var S,U=this,T=U.idSeparator,M=Q.id,O=U._helper;if(Q.callbacks){if(U._callbacksObj[M]){for(S in Q.callbacks){U._callbacksObj[M][S]=Q.callbacks[S];}}else{U._callbacksObj[M]=Q.callbacks;}}C("[videoPlayer.render] Render function executed... ");if(!Q.autoplay||typeof Q.autoplay!=="boolean"){Q.autoplay=false;}if(Q.holder.data("currentId")===M){return false;}function P(){var W=false;if(Q.holder.find("[id^='videoHolder:']").size()>0){var V=Q.holder.find("[id^='videoHolder:']:first").attr("id");U.setPlayerMap({type:"set",vId:M,domId:V});W=U.setPlayerMap({type:"get",vId:M});}else{W=U.setPlayerMap({type:"create",vId:M});}var X=D("<div></div>").attr({id:W});if(Q.cssClass){X.addClass(Q.cssClass);}if(U.pandora){X.data("pandora",true);X.data("autoplay",Q.autoplay);}Q.holder.html(X);}var N=Q.holder.find("> object");if(N.size()>0){try{if(O.isPlayFileReady(N.get(0))){U.setPlayerMap({type:"set",vId:M,domId:N.attr("id")});if(Q.cssClass){N.addClass(Q.cssClass);}}else{P();}}catch(R){P();}}else{P();}if(U.embed.validate(Q.holder,Q.holder.children().filter(":first"),M.substring(0,M.indexOf(T)),T)){Q.holder.data("currentId",M);U.feed.get({id:M,autoplay:Q.autoplay,method:"render"});}},getFeed:function(M){if(!M){return false;}if(!M.id||!M.callback){return false;}var N=this;N.feed.get({id:M.id,method:"getFeed",raw:true,processed:(!M.processed)?false:true,callback:M.callback});},setPlayerMap:function(S){if(!S){return false;}var P=this,O="videoHolder:";switch(S.type){case"create":function R(){return O+A();}var Q=R();while(P.playerMap[Q]){Q=R();}P.playerMap[Q]=S.vId;P.playerMap[S.vId]=Q;return Q;case"set":var N,M=false;for(N in P.playerMap){if(N===S.domId){M=P.playerMap[N];break;}}if(!M){delete P.playerMap[M];}P.playerMap[S.domId]=S.vId;P.playerMap[S.vId]=S.domId;break;case"get":if(S.vId){return(P.playerMap[S.vId])?P.playerMap[S.vId]:false;}else{if(S.domId){return(P.playerMap[S.domId])?P.playerMap[S.domId]:false;}}return false;}},setCustomFlashVars:function(R,P){var O=this;if(O._config.display.customFlashVars){var N=O._config.display.customFlashVars;if(N[P]){var M,Q={};for(M in N[P]){Q[M]=N[P][M];}O.holderObj[R].customFlashVars=Q;}}}};MvPlayer.prototype.controls={pause:function(P){if(!this.validate(P)){return false;}var M=this.root,N=M.holderObj[P];try{if(!N.data("pandora")){document.getElementById(P).pause();}else{M.pandora.CONTROLS.pause(P);}}catch(O){B("[videoPlayer.controls.pause] Error caught:"+O);}},play:function(P){if(!this.validate(P)){return false;}var M=this.root,N=M.holderObj[P];try{if(!N.data("pandora")){document.getElementById(P).unpause();}else{M.pandora.CONTROLS.play(P);}}catch(O){B("[videoPlayer.controls.play] Error caught:"+O);}},jumpToTime:function(Q,P){if(!this.validate(Q)){return false;}var M=this.root,O=M.holderObj[Q].elm,N=M.playerMap[Q]||false;if(!N){return false;}if(!O.data("pandora")){document.getElementById(N).jumpToTime(P);}else{M.pandora.CONTROLS.jumpTo(N,P);}},validate:function(N){if(!N){return false;}var M=this.root;N="videoid"+M.idSeparator+"g"+N;if(!M.dataObj[N]){return false;}return true;}};MvPlayer.prototype.embed={validate:function(U,V,Q,P){var R,S=this,T=this.root,M=T._config.display.allow;if(typeof T.format[Q]==="undefined"){return false;}for(R in M){if(V.hasClass(R)){var W=T.format[Q](V,Q,P),O=M[R];var N=(function(){var X,b=false,Z=V.attr("class").split(" ");for(X=0;X<Z.length;X++){var Y=Z[X];if(Y.indexOf("vid-")===0){var a=Y.split("-");a.shift();switch(a.join("-")){case"fn2":b="video.foxnews.com";break;case"fb2":b="video.foxbusiness.com";break;case"fb":b="video.foxbusiness.com";break;case"fn-latino":b="video.latino.foxnews.com";break;}}}return{domain:b,site:a};}());T.holderObj[W]={id:W,parentElm:U,elm:V,dim:M[R],format:R};if(N.domain){T.holderObj[W].domain=N.domain;T.holderObj[W].xSite=N.site;T.holderObj[W].xDomain=true;}else{T.holderObj[W].domain=T._videoDomain;}T.setCustomFlashVars(W,R);if(T.pandora){T.holderObj[W].elm.data("pandora",true);}return W;}}return false;},players:function(){var O=this,M=this.root,N=(typeof M._config.display.clickThruImage==="undefined")?false:(typeof M._config.display.clickThruImage!=="object")?M._config.display.clickThruImage:M._config.display.clickThruImage.render,P=M.idSeparator;if(N&&M._isPandora&&!window.useLegacyHTML5){N=false;}M.holder.videoObj.each(function(){var Q,S=D(this),R=false;function T(V){S.find("div[id^='"+V+P+"']").each(function(){var W=D(this),X=M.setPlayerMap({type:"create",vId:W.attr("id")});W.attr("id",X);R=O.validate(S,W,V,P);});}for(Q=0;Q<M.instanceId.length;Q++){var U=M.instanceId[Q];T(U);}if(R){if(M.holderObj[R].elm.data("pandora")){C("[videoPlayer.players] Loading via Pandora.");M.pandora.load(R);}else{M.feed.get(R);}S.children().filter("div.img").hide();}});},player:function(V){if(!V){return false;}var R=this,Y=this.root,T=Y.holderObj[V],M=Y._helper,d=Y._config.player;if(T.elm.data("videoLoaded")){return false;}Y.playerIds.push(V);if(T.elm.data("pandora")){if(!T.elm.data("pandoraLoaded")){var W={id:V,format:T.format,width:H(T.dim[0])?T.dim[0]:T.dim[0]+"px",height:H(T.dim[1])?T.dim[1]:T.dim[1]+"px"};if(Y._config.player.flashVars.autoplay==="true"){W.autoplay=true;}T.elm.data("pandora",true);T.elm.data("pandoraLoaded",true);T.elm.data("videoLoaded",true);Y.holderObj[V].vAttr=W;}Y.pandora.load(V);}else{if(typeof swfobject==="undefined"){B("[videoPlayer.embed.player] swfobject not found.");return false;}var Q=function(e){if(Y._callbacksObj[V]&&Y._callbacksObj[V].videoLoadStart){Y._callbacksObj[V].videoLoadStart({data:Y.dataObj[V]});}if(!e){Y.video.load(V);}};if(!T.elm.data("swfLoaded")){var P=Y.setPlayerMap({type:"get",vId:V});if(!M.isPlayFileReady(document.getElementById(P))){Y.thirdParty.akamai(V,true);var Z,c=Y._config.player.flashVars,N={};for(Z in c){N[Z]=c[Z];}if(T.customFlashVars){for(Z in T.customFlashVars){N[Z]=T.customFlashVars[Z];}}var b=T.domain,X=T.xDomain,U=T.xSite,a=(!d.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(d.environment==="beta")?"beta.":"";currentDomain=(c.location)?c.location:N.settings_url.split("/")[2];if(currentDomain==="video.latino.foxnews.com"&&b==="video.foxnews.com"){b="video.latino.foxnews.com";U=["fn-latino"];}var O=function(e){var f=(a.length>0&&e.indexOf(a)<0)?a+b:b;return e.replace(e.split("/")[2],f);};if(X){if(L.yume_ad_domain_code[U]){N.yume_ad_domain_code=L.yume_ad_domain_code[U];}if(L.settings_url[U]){N.settings_url=L.settings_url[U];}}N.settings_url=O(N.settings_url);N.core_yume_ad_library_url=O(N.core_yume_ad_library_url);N.core_yume_player_url=O(N.core_yume_player_url);N.data_feed_url=O(N.data_feed_url);d.location=O(d.location);if(Y._config.player.tokenCallback){Y._config.player.tokenCallback(P);}if(Y._config.player.pip){var S=R.setPinP(d,N);N=S.flashVars;d=S.info;}swfobject.embedSWF(d.location,P,T.dim[0],T.dim[1],d.flashVersion,d.expressInstall,N,Y._config.player.params);T.elm.data("swfLoaded",true);T.elm.data("videoLoaded",true);if(Y._config.player.token){Y.dataObj[V]=Y.feedParser.setToken(Y.dataObj[V],Y._config.player.token);D.loadAttempt(50,800,function(){return M.isPlayFileReady(document.getElementById(P));},function(){setTimeout(function(){Q();B("[videoPlayer.player] Token: "+Y._config.player.token);},500);});}else{Q(true);}}else{Q();}}else{Q();}}},setPinP:function(N,O){if(N.location&&O.settings_url){N.location=N.location.replace("FoxNewsPlayer.swf","FoxNewsPlayerMulti.swf");var M=O.settings_url;O.settings_url=(function(Q){var R=Q.split("/"),P=R.length-1;if(R[P].indexOf("config-multi")===-1){R[P]="config-multi.xml";}return R.join("/");}(M));}return{info:N,flashVars:O};},clickthru:function(S,T){var R=this,M=this.root,P=M.holderObj[T],Q=M.overlayObj.blankImg;P.elm.parent().css({width:H(P.dim[0])?P.dim[0]:P.dim[0]+"px",minHeight:H(P.dim[1])?P.dim[1]:P.dim[1]+"px"});P.elm.html('<a href="#"><img src="'+Q+'" /></a>');var O=P.elm.find("img");O.css({width:H(P.dim[0])?P.dim[0]:P.dim[0]+"px",height:H(P.dim[1])?P.dim[1]:P.dim[1]+"px",opacity:"0"});(function(){var X=function(d){O.attr("src",d).animate({opacity:"1"},400,"swing");};var U=function(h){var f=h.split("/"),e=f.length,g=f[e-3],d=f[e-2];f[e-3]=(!isNaN(g))?P.dim[0]:g;f[e-2]=(!isNaN(d))?P.dim[1]:d;return f.join("/");};var c=false,Y=P.parentElm;var b=Y.children("div.img"),a=Y.find(".m-controller img:first"),Z=Y.parent().children("div.m-controller img:first");if(b.attr("src")&&D.trim(b.attr("src")).length>0){X(D.trim(b.attr("src")));F.set({elm:P.elm,dim:P.dim,position:"bottom right"});}else{if(a.attr("src")&&D.trim(a.attr("src")).length>0){X(D.trim(a.attr("src")));F.set({elm:P.elm,dim:P.dim,position:"bottom right"});}else{if(Z.attr("src")&&D.trim(Z.attr("src")).length>0){X(D.trim(Z.attr("src")));F.set({elm:P.elm,dim:P.dim,position:"bottom right"});}else{var W=new Image(),V=U(S.thumbnail);W.onload=function(){X(V);F.set({elm:P.elm,dim:P.dim,position:"bottom right"});};W.src=V;}}}}());var N=P.elm.find("a");N.css({display:"block",visibility:"visible",padding:"0"}).click(function(){var U=function(){if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}R.player(T);};try{M._config.display.clickThruImage.callbackFn({runPlayer:U});return false;}catch(V){}U();return false;});}};MvPlayer.prototype.thirdParty={akamaiMediaAnalytics:function(N){if(!N||typeof AKAMAI_MEDIA_ANALYTICS_JS_SRC==="undefined"||typeof AKAMAI_MEDIA_ANALYTICS_CALLBACK==="undefined"){return false;}if(!D(document).data("AkamaiH5Analytics")){var M=document.createElement("script");M.type="text/javascript";M.async=true;M.src=AKAMAI_MEDIA_ANALYTICS_JS_SRC;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(M);}D.loadAttempt({maxAttempts:30,timeout:500,callback:{check:function(){return(typeof setAkamaiMediaAnalyticsData!=="undefined")?true:false;},success:function(){AKAMAI_MEDIA_ANALYTICS_CALLBACK(N);}}});},akamai:function(N){var U=this,W=this.root,P=W._config.player,V=W.holderObj[N],Y=N.split(":")[1].replace(/[a-zA-z]/gi,""),T=W.itemType[W.dataObj[N].itemType];if(W.dataObj[N]&&W.dataObj[N].isMavenFeed){Y=W.dataObj[N].guid;}W._config.player.flashVars.video_id=Y;W._config.player.flashVars.data_feed_url="http://"+W._videoDomain+"/v/feed/"+T+"/"+Y+".js?template=fox";function M(a,b){var Z;for(Z=0;Z<a.length;Z++){if(V.elm.hasClass(a[Z])){switch(b){case"share":W._config.player.flashVars.show_sharing_overlay="false";break;case"email":W._config.player.flashVars.show_email_overlay="false";break;}return true;}}return false;}if(typeof W._config.display!=="undefined"){var X=W._config.display;if(typeof X.restrict!=="undefined"){if(X.restrict.sharingOverlay){M(X.restrict.sharingOverlay,"share");}if(X.restrict.emailOverlay){M(X.restrict.emailOverlay,"email");}}}if(T.toLowerCase().indexOf("playlist")>-1){try{var S=W.dataObj[N].PLVideos,O=S[0]["media-content"],R=O["mvn-assetUUID"];W._config.player.flashVars.video_id=R;W._config.player.flashVars.data_feed_url="http://"+W._videoDomain+"/v/feed/video/"+R+".js?template=fox";}catch(Q){B("[videoPlayer.thirdparty.akamai] Failed to load first video from playlist feed: "+Q,true);}}},baynote:function(M){var U=this,W=this.root,X=W.dataObj[M],V=W.holderObj[M],N=W._helper,O=(X.thumbnail)?X.thumbnail:false,P=(X.title)?X.title:false;var Q=(function(){var b=(X.duration)?X.duration:false;if(!b&&isNaN(b)){return false;}return b;}());var Y=(function(){var c=N.cleanTitle(X.title),d="http://"+W._videoDomain,b=X.guid;d+="/v/"+b+"/"+c+"/";return d;}());function T(){if(typeof baynote_track_video_attribute!=="undefined"){if(O&&Q&&P&&Y){baynote_track_video_attribute(O,Q,P,Y);B("[videoPlayer.thirdparty.baynote] Successful baynote call: baynote_track_video_attribute(thumbnailUrl,duration,linkText)");B("[videoPlayer.thirdparty.baynote] thumbnailUrl = "+O);B("[videoPlayer.thirdparty.baynote] duration = "+Q);B("[videoPlayer.thirdparty.baynote] linkText = "+P);B("[videoPlayer.thirdparty.baynote] url = "+Y);return true;}B("[videoPlayer.thirdparty.baynote] Baynote track function not triggered. insufficient video data for: thumbnail url / duration / link text / url.");return true;}B("[videoPlayer.thirdparty.baynote] Baynote track function not defined.");return false;}var a=30,Z=0,S=false;function R(){if(typeof baynote_track_video_attribute!=="undefined"){T();clearTimeout(S);}else{if(Z>a){B("[videoPlayer.thirdparty.baynote] Baynote track function call attempts maxed out... ");T();clearTimeout(S);}else{Z++;S=setTimeout(function(){B("[videoPlayer.thirdparty.baynote] Attempting to call Baynote track function... attempt: "+Z);R();},500);}}}if(typeof baynote_track_video_attribute!=="undefined"){T();}else{D(document).ready(function(){R();});}}};MvPlayer.prototype.video={load:function(T){var R=this,N=this.root,P=N._helper,Q=N._config.player.flashVars.autoplay,S=N.setPlayerMap({type:"get",vId:T}),M=document.getElementById(S);C("[videoPlayer.load] Loading player...");if(P.isPlayFileReady(M)){var O=(typeof N._config.display.clickThruImage==="undefined")?false:(typeof N._config.display.clickThruImage!=="object")?N._config.display.clickThruImage:N._config.display.clickThruImage.render;if(O&&N._isPandora&&!window.useLegacyHTML5){O=false;}if(N.dataObj[T]){Q=(O)?true:(N._config.player.flashVars.autoplay)?true:false;if(!N._config.player.pip){M.playFile(N.dataObj[T].rawData,Q);}else{B("[videoPlayer.load] PlayFile disabled for PIP.");}}else{N.feed.get({id:T,autoplay:Q});}clearTimeout(N.playTimeout[T]);}else{N.playTimeout[T]=setTimeout(function(){R.load(T);},100);}}};MvPlayer.prototype.feed={get:function(){var V,f,W=this,e=this.root,O=e.idSeparator,N=arguments[0],Z={},T=false;if(typeof N==="object"){for(f in N){Z[f]=N[f];}}else{Z.id=N;}if(!Z.id){B("[videoPlayer.feed.get] Error: no id passed");return false;}var b="parse_"+e._helper.formatVideoId(Z.id,true,true)+((Z.raw)?"_getraw":""),S=e._namespace+".feed."+b,h=false;h=(function(){var j;for(j in e.videoTypeLinks){if(Z.id.indexOf(j)>-1){return{prefix:e.videoTypeLinks[j],type:j};}}return false;}());if(!h){B("[videoPlayer.feed.get] Error: no feed link: "+Z.id);return false;}function M(){return(h.type==="playlistid")?true:false;}var a=Z.id.substr(h.type.length+O.length),R=h.prefix;if(a.charAt(0).toLowerCase()!=="g"){if(h.type==="videoid"){R=R.replace("/v/","/");T=true;}}else{a=a.substr(1);}var P=R+a+".js",U=[],g={};U.push("callback="+S);if(e.feedQueryString){var d=e.feedQueryString;for(f in d){if(f==="template"){if(!M()){U.push(f+"="+d[f]);}}else{U.push(f+"="+d[f]);}}}for(V=0;V<U.length;V++){var c=U[V].split("=");g[c[0]]=c[1];}U.push("jsonp=?");var Q="?"+U.join("&"),X=(Z.method)?((Z.method==="render")?true:false):false;if(!e.feed[b]||X){e.feed[b]=function(l){if(e.holderObj[Z.id]){e.holderObj[Z.id].ajaxComplete=true;}var i=(M())?e.feedParser.legacy(l):e.feedParser.fox(l);if(Z.raw){if(Z.callback){Z.callback((Z.processed)?i:l);}}else{var k=e.holderObj[Z.id],j=(typeof e._config.display.clickThruImage==="undefined")?false:(typeof e._config.display.clickThruImage!=="object")?e._config.display.clickThruImage:e._config.display.clickThruImage.render;if(j&&e._isPandora&&!window.useLegacyHTML5){j=false;}e.dataObj[Z.id]=i;e.dataObj[Z.id].rawData=l;e.dataObj[Z.id].itemType=h.type;e.dataObj[Z.id].isMavenFeed=T;if(Z.autoplay){e._config.player.flashVars.autoplay="true";}if(i){if(j&&!Z.autoplay){e.embed.clickthru(i,Z.id);}else{e.embed.player(Z.id);}if(e._callbacksObj[Z.id]){if(e._callbacksObj[Z.id].feedLoaded){e._callbacksObj[Z.id].feedLoaded(i);}}}else{B("[videoPlayer.feed.get] Warning: no data found!");}}};}g.cb=e._helper.cacheBuster();function Y(){P=(function(k){var j=k;if(e.holderObj[Z.id]&&e.holderObj[Z.id].domain){var i=e.holderObj[Z.id].domain,m=k.split("http://"),l=m[1].split("/");if(l[0]!==i){l[0]=i;}m[1]=l.join("/");j=m.join("http://");}return j;}(P));D.ajax({url:P,data:g,dataType:"script",async:true,cache:true});}Y();}};MvPlayer.prototype.format={videoid:function(Q,N,P){var M=this.root,O=M.setPlayerMap({type:"get",domId:Q.attr("id")});if(!O){return false;}var R=O.substr(N.length+1);return"videoid"+P+R;},videolink:function(R,T,S){var W=this.root,P=R.attr("id"),N=W.setPlayerMap({type:"get",domId:P}),O="playlist",Y="playlistid"+S;if(N.indexOf("?"+O)===-1){return false;}var X,V=N.substr(N.indexOf("?")+1),U=V.split("&");for(X=0;X<U.length;X++){var Q=U[X].split("=");if(Q[0].toLowerCase()==="playlist_id"){var M=Y+Q[1];W.setPlayerMap({type:"set",vId:M,domId:P});return M;}}},playlistid:function(Q,O,P){var M=this.root,N=M.setPlayerMap({type:"get",domId:Q.attr("id")});if(!N){return false;}var R=N.substr(O.length+1);return"playlistid"+P+R;}};MvPlayer.prototype.feedParser={setToken:function(Q,O){var M,N=this.root,P=N._helper;return Q;},fox:function(b){var R,W=this.root,M=W._helper;if(typeof b.channel.item==="undefined"){return false;}var h=b.channel,d=b.channel.item,Q=[];if(d instanceof Array){for(R=0;R<d.length;R++){Q.push(d[R]);}d=b.channel.item[0];}if(!d["media-group"]){return false;}var a=d["media-group"];function V(){var c=a["media-thumbnail"]||false;if(!c){return"";}if(E(c)&&c[0]&&c[0]["@attributes"]){return c[0]["@attributes"].url||"";}else{if(c&&c["@attributes"]){return c["@attributes"].url||"";}}return"";}function g(){try{return a["media-content"][0]["@attributes"].duration;}catch(c){B("[videoPlayer.feedParser.grab] Get Duration error: "+c);return"0";}}var S={url:d.link,title:d.title,description:d.description,shortDescription:d.description,keywords:"",thumbnail:V(),guid:d.guid,channel:"",playlist:"",personality:"",format:"",show:"",category:h.category,creationDate:M.convertGrabDate(d.pubDate),loc:"http://"+window.location.host+window.location.pathname,duration:g()};var N=a["media-content"]||false;if(N){var Y,U,X={},Z=false,f=false,P=false;var T=function(i,c){return(i.indexOf(c)>-1)?true:false;};for(R=0;R<N.length;R++){var e=N[R]["@attributes"],O=e.url;if(e.type==="video/mp4"){if(!Z){Z=true;P=e;}if(T(O,"_LOW")){X.LOW=e;f=e;}else{if(T(O,"_MED")){X.MED=e;}else{if(T(O,"_HIGH")){X.HI=e;}}}}else{if(e.type==="application/x-mpegURL"&&T(O,".m3u8")){X.STREAM=e;}}}if(Z){if(!X.LOW){X.LOW=(X.MED)?X.MED:(X.HI)?X.HI:P;}if(!X.MED){X.MED=(X.LOW)?X.LOW:(X.HI)?X.HI:P;}if(!X.HI){X.HI=(X.LOW)?X.LOW:(X.MED)?X.MED:P;}}U=0;for(Y in X){U++;break;}X=(U>0)?X:false;S.htmlFive=X;}if(Q.length>0){S.PLVideos=Q;}return S;},grab:function(V){var S,R=this.root,N=R._helper;if(typeof V.channel.item==="undefined"){return false;}var U=V.channel.item,O=[];if(U instanceof Array){for(S=0;S<U.length;S++){O.push(U[S]);}U=V.channel.item[0];}if(!U["media-group"]){return false;}var M=U["media-group"];function Q(){if(typeof M["media-thumbnail"][0]!=="undefined"){var W=M["media-thumbnail"][0];return(W["@attributes"].url)?W["@attributes"].url:"";}return"";}function T(){try{return M["media-content"][0]["@attributes"].duration;}catch(W){B("[videoPlayer.feedParser.grab] Get Duration error: "+W);return"0";}}var P={url:U.link,title:U.title,description:U.description,shortDescription:U["grab-short_description"],keywords:M["media-keywords"],thumbnail:Q(),guid:U.guid,channel:U["grab-channel"],playlist:U["grab-playlist"],personality:U["grab-personality"],format:U["grab-format"],show:U["grab-show"],category:M["media-category"],creationDate:N.convertGrabDate(U.pubDate),loc:"http://"+window.location.host+window.location.pathname,duration:T()};if(O.length>0){P.PLVideos=O;}return P;},legacy:function(U){var S,R=this.root,N=R._helper;if(typeof U.channel.item==="undefined"){return false;}var T=U.channel.item,P=[];if(T instanceof Array){for(S=0;S<T.length;S++){P.push(T[S]);}T=U.channel.item[0];}if(!T["media-content"]){return false;}var M=T["media-content"];if(!M["media-credit"]){return false;}var O=M["media-credit"];var Q={url:M["@attributes"].url,title:T.title,description:M["media-description"],keywords:M["media-keywords"],thumbnail:M["media-thumbnail"],guid:M["mvn-assetUUID"],mavenid:M["mvn-mavenId"],channel:(M["mvn-fnc_channel"])?M["mvn-fnc_channel"]:M["mvn-fbn_channel"],playlist:M["mvn-fnc_default_playlist"],personality:(M["mvn-fnc_personality"])?M["mvn-fnc_personality"]:M["mvn-fbn_personality"],format:(M["mvn-fnc_format"])?M["mvn-fnc_format"]:M["mvn-fbn_format"],show:(M["mvn-fnc_show"])?M["mvn-fnc_show"]:M["mvn-fbn_show"],category:(M["mvn-fnc_category"])?M["mvn-fnc_category"]:M["mvn-fbn_category"],creationDate:N.convertDate(M["mvn-creationDate"]),shortDescription:M["mvn-shortDescription"],loc:"http://"+window.location.host+window.location.pathname,duration:(M["mvn-duration"])?M["mvn-duration"]:(M["mvn-videoSeconds"])?M["mvn-videoSeconds"]:0};if(P.length>0){Q.PLVideos=P;}return Q;}};MvPlayer.prototype._helper={cacheBuster:function(N){N=N||false;var M=new Date(),O=M.getFullYear().toString()+(M.getMonth()+1).toString()+M.getDate().toString();switch(N){case"h":O+=(M.getHours()+1).toString();break;case"30m":O+=(M.getHours()+1).toString()+((M.getMinutes()%30===0)?"1":"0");break;default:O+=(M.getHours()+1).toString();}return O;},isPlayFileReady:function(M){M=M||false;if(!M){return false;}return(typeof M.playFile!=="undefined")?true:false;},formatVideoId:function(O,M,N){M=M||false;N=N||false;if(N){O=O.split("").reverse().join("");}if(M){return O.replace(/\:/gi,"_");}else{return O.replace(/\_/gi,":");}},convertGrabDate:function(O){O=O||false;if(!O){return"";}var N=new Date(O),M=["January","February","March","April","May","June","July","August","September","October","November","December"];if(isNaN(N.getTime())){return"";}return M[N.getMonth()]+" "+N.getDate()+", "+N.getFullYear();},convertDate:function(O){if(typeof O!=="undefined"){var M=["January","February","March","April","May","June","July","August","September","October","November","December"],N=O.toString().split("T");N=N[0].split("-");N=new Date(N[0],(N[1]-1),N[2]);return M[N.getMonth()]+" "+N.getDate()+", "+N.getFullYear();}else{return"";}},extractVideoId:function(N){var M=N.replace(/^(http:\/\/)?[a-zA-Z0-9\.]+/,"");M=(M.indexOf("#")===0)?M.substring(2):M.substring(1);return M.substring(0,M.indexOf("/"));},extractCategoryId:function(M){return M.split("category_id=")[1];},cleanTitle:function(M){M=M.replace(/\s+/g,"-").toLowerCase();return M.replace(/[^a-z0-9\-]/g,"");},cleanHref:function(M){return M.replace(/^(http:\/\/)?[a-zA-Z0-9\.]+/,"");},cleanImageUrl:function(M){return M.replace("http://media2.foxnews.com","");},convertTime:function(N){var O=Math.floor(N/60),M=Math.floor(N%60);M=(M<10)?"0"+M:M;return O+":"+M;},videoObjectJSON:function(M){return this.root.feedParser.legacy(M);}};function A(N,P){N=N||999999;P=P||25;function O(){return(Math.floor(Math.random()*N)%2===1)?true:false;}function R(){var T=(O())?97:65;return String.fromCharCode(T+Math.round(Math.random()*25));}function Q(){return Math.floor(Math.random()*10);}function S(){return(O())?R():Q();}function M(){var U,T=[];for(U=0;U<(P-1);U++){T.push(S());}T.sort(function(){return 0.5-Math.random();});return R()+T.join("");}return M();}var I=(function(){var N={dm:"Agent",vcm:"i",ox:"vt"};var R=function(V){this.main=V;this.video={};this.prefix={controls:"player-controls-",playPause:"playpause-",fullScreen:"fullscreen-",loadPct:"load-counter-"};this.prefix.time={current:"time-current",duration:"time-duration"};this.controlsHTML='<strong>listeners:</strong>  <a id="'+this.prefix.playPause+'${id}" href="#">${playState}</a> | Current Time: <span id="'+this.prefix.time.current+'${id}">00:00</span> | Duration Time: <span id="'+this.prefix.time.duration+'${id}">00:00</span>';N.ol={arg:"P",lmp:"COM",rd:"USER"};this.listeners=new S(this);this.TYPE=new Q(this);this.EVENTS=new P(this);this.PROPERTIES=new U(this);this.STATES=new T(this);this.CONTROLS=new M(this);this.ADS=new O(this);};R.prototype={init:function(V){V=V||false;if(V){var W;for(W in V){this["_"+W]=V[W];}}if(!this.compatible()){return false;}if(this.helper.getQuery("html5")==="legacy"){window.useLegacyHTML5=true;}return true;},compatible:function(){var V=false;if(this.helper.getQuery("_"+N.ox+N.ol.lmp.toLowerCase()+N.ol.arg.toLowerCase())==="y"){this._forced=true;V=K();}else{V=(K()&&G())?true:false;}return V;},check:function(V){return this.compatible();},create:function(V){},load:function(W,X){var f=this,a=this.main;if(!this.check(W)){return false;}C("[videoPlayer.pandora] Loading....");var d=function(){a.holderObj[W].elm.data("pandora",false);a.holderObj[W].elm.data("pandoraLoaded",false);if(G()){if(a._callbacksObj[W]){if(a._callbacksObj[W].deviceRenderFailed){a._callbacksObj[W].deviceRenderFailed();}}}else{a.embed.player(W);}};if(a.dataObj[W]){var b=a.dataObj[W],Y=a.holderObj[W];X=(typeof X==="undefined")?Y.vAttr.autoplay:X;var c=(Z||window.useLegacyHTML5)?false:true;if(c){C("[videoPlayer.pandora] Loading HTML5 Akamai video player...");f.TYPE.AKAMAI(b,W,false,X);}else{if(!b.htmlFive){C("[videoPlayer.pandora] Rendering failed. No html5 data.");d();}else{var V=G(),Z=(typeof V==="string"&&V==="legacy")?true:false;var e=(function(){var g=false;if(b.htmlFive.STREAM&&!f._forced&&!Z){g=b.htmlFive.STREAM.url;}else{if(b.htmlFive.LOW){g=b.htmlFive.LOW.url;}else{if(b.htmlFive.MED){g=b.htmlFive.MED.url;}else{if(b.htmlFive.HI){g=b.htmlFive.HI.url;}}}}return g;}());if(!e){C("[videoPlayer.pandora] Rendering failed. no html5 video url.");d();return false;}C("[videoPlayer.pandora] Loading HTML5 Legacy video player...");f.TYPE.LEGACY(b,W,e,X);}}}else{a.feed.get({id:W,autoplay:X});}}};R.prototype.helper={replaceStr:function(Y,W,X){var V=Y.indexOf(W);while(V!==-1){Y=Y.replace(W,X);V=Y.indexOf(W);}return Y;},formatTime:function(Y){Y=parseInt(Y,10);var X=Math.floor(Y/360),W=Math.floor(Y/60),V=Y%60;function Z(a){return(a<10)?"0"+a:a;}return((X>0)?Z(X):"")+Z(W)+":"+Z(V);},getQuery:function(Y){var V,X=(window.location.search).substr(1),Z=X.split("&");for(V=0;V<Z.length;V++){var W=Z[V].split("=");if(W[0]===Y){return W[1];}}return false;}};var Q=(function(){var V=function(W){this.root=W;};V.prototype.LEGACY=function(d,X,g,Z){var h=this,e=this.root,b=e.main,a=b.holderObj[X],c=a.elm,Y=(typeof b._config.display.clickThruImage==="undefined")?false:(typeof b._config.display.clickThruImage!=="object")?b._config.display.clickThruImage:b._config.display.clickThruImage.render;if(Y&&e._isPandora&&!window.useLegacyHTML5){Y=false;}C("[videoPlayer.pandora] Using Legacy HTML5 video player.");if(!c.data("pandoraLoaded")){b.embed.player(X);}else{var W=(function(){var i=true,k=(b._config.player.flashVars&&b._config.player.flashVars.core_ads_enabled!=="undefined")?b._config.player.flashVars.core_ads_enabled:false,l=(a.customFlashVars&&typeof a.customFlashVars.core_ads_enabled!=="undefined")?a.customFlashVars.core_ads_enabled:false;var j=function(n){var m;if(typeof n==="string"&&n.toLowerCase()==="true"){m=true;}else{if(typeof n==="boolean"){m=true;}else{m=false;}}return m;};if(e.helper.getQuery("_vtads")==="n"){i=false;}else{if(l){i=j(l);}else{if(k){i=j(k);}}}return i;}());var f=function(){var l,m=(a.elm.data("autoplay"))?true:false,k=a.elm.parent(),j=[],n=[],q="width|height";for(l in a.vAttr){if(l==="format"){j.push('class="'+a.vAttr[l]+' pandora-player"');}else{if(l==="id"){var p=b.setPlayerMap({type:"get",vId:a.vAttr[l]});b.setPlayerMap({type:"set",vId:X,domId:p});j.push('id="'+p+'"');}else{if(q.indexOf(l)>-1){n.push(l+":"+a.vAttr[l]+";");}}}}C("[videoPlayer.pandora.LEGACY] Video Source: "+g);var o=n.join(" ");newVideo='<video controls="" '+j.join(" ")+' src="'+g+'" style="'+o+'"></video>';k.get(0).innerHTML=newVideo;k.find("video:first").each(function(){var i=D(this);i.data("pandora",true);i.data("pandoraLoaded",true);i.data("autoplay",m);e.video[X]={elm:i,nativeElm:i.get(0)};e.listeners.init(X);if(b._callbacksObj[X]){if(b._callbacksObj[X].dataChanged){b._callbacksObj[X].dataChanged(d);}}if(Y||m){e.CONTROLS.play(X);}b.thirdParty.akamaiMediaAnalytics(i.attr("id"));C("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((W)?"TRUE":"FALSE"));if(W){e.ADS.set({id:X,elm:k,url:g,dim:a.dim});}});};C("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((W)?"TRUE":"FALSE"));if(W){e.ADS.load(function(){f();});}else{f();}}};V.prototype.AKAMAI=function(s,j,Y,e){var g=this,n=g.root,a=n.main;var b=function(t){return t.replace(/[^0-9]/gi,"");};var p=a.holderObj[j],c=b(j),Z=(p.elm.data("autoplay"))?true:false,d=(a._config.player.variable)?true:false,i=p.elm.parent(),m=p.vAttr,k=H(m.width)?m.width:b(m.width),h=H(m.height)?m.height:b(m.height),W=a._config.player,o=(!W.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(W.environment==="beta")?"beta.":"",r=(n.helper.getQuery("_"+N.ox+N.ol.lmp.toLowerCase()+N.ol.arg.toLowerCase())==="y")?true:false,q=o+a._videoDomain,l="http://"+q,X=[];C("[videoPlayer.pandora] Using AKAMAI HTML5 video player.");if(e){X.push("autoplay=true");}if(r){X.push("_vtcomp=y");}X=(X.length>0)?"&"+X.join("&"):"";var f;if(!d){f='<iframe src="'+l+"/v/html5-embed.html?video_id="+b(j)+"&w="+k+"&h="+h+X+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+k+'" height="'+h+'" style="border:0;width:'+m.width+";height:"+m.height+'"></iframe>';}else{f='<iframe src="'+l+"/v/html5-embed.html?video_id="+b(j)+'&w=1&h=1" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="100%" height="100%" style="border:0;width:100%;height:100%"></iframe>';f='<div id="fox-html5-frame" style="width:'+m.width+";height:"+m.height+'">'+f+"</div>";}i.get(0).innerHTML=f;};return V;}());var O=(function(){var V=function(W){this.root=W;this.zoneIdVal=(function(){var Y=L.auditude_code.zoneId,X=Y.fn2;switch(W._videoDomain){case"video.foxnews.com":X=Y.fn2;break;case"video.foxbusiness.com":X=Y.fb2;break;case"video.foxbusiness.com":X=Y.fb;break;}return X;}());};V.prototype={set:function(p){if(!p){return false;}var e=this,h=this.root,f=(h.main.dataObj[p.id]&&h.main.dataObj[p.id].guid)?h.main.dataObj[p.id].guid:false,Y=p.elm,j=p.url,k=p.dim,X=(p.userData)?p.userData:{};var g=function(s){var q="p-click-"+f;try{D("body").append('<a href="#" id="'+q+'" style="display:none;">Click Me</a>');D("#"+q).click(function(){s.play();return false;});setTimeout(function(){D("#"+q).click().remove();},250);}catch(r){C("[videoPlayer.auditude] No play() function for html5 video element. (Err: "+r+")");}};var m,Z,b,a,i=window.FN_AUDITUDE||{};m=(i.adVideoId)?i.adVideoId:f;Z=(i.adDomain)?i.adDomain:L.auditude_code.adDomain;b=(i.zoneId)?i.zoneId:e.zoneIdVal;a=(i.defaultAssetId)?i.defaultAssetId:L.auditude_code.defaultAssetId;m=(m)?[m,a]:a;X.mobile=(function(){var q=J();return(q)?q.dev:"false";}());B("mobile platform:"+X.mobile);X=(function(){var q=[];for(var r in X){q.push(r+"="+X[r]);}return q.join(";");}());var c=Y.get(0),o=Y.find("video:first"),n=o.get(0),W=false;var d={controls:true,style:{backgroundColor:"#000",width:o.width(),height:o.height()},handlers:{}};var l=aud.html5.AdPlayer(n,c,Z,b,d);l.subscribe(aud.events.init_complete,function(r,q){C("[videoPlayer.auditude] Init Complete event");q.publish(aud.notifications.break_begin);}).subscribe(aud.events.break_begin,function(r,q){C("[videoPlayer.auditude] Break Begin event");}).subscribe(aud.events.break_end,function(r,q){C("[videoPlayer.auditude] Break End event");if(!W){n.src=j;n.load();g(n);}}).subscribe(aud.events.linear_ad_begin,function(s,r,q){C("[videoPlayer.auditude] Linear Ad Begin event");}).subscribe(aud.events.linear_ad_end,function(s,r,q){C("[videoPlayer.auditude] Linear Ad End event");}).subscribe(aud.events.non_linear_ad_begin,function(s,r,q){C("[videoPlayer.auditude] Non-Linear Ad Begin event");}).subscribe(aud.events.non_linear_ad_end,function(s,r,q){C("[videoPlayer.auditude] Non-Linear Ad End event");}).subscribe(aud.events.pause_playback,function(s,r,q){C("[videoPlayer.auditude] Pause playback event");n.pause();}).subscribe(aud.events.resume_playback,function(s,r,q){C("[videoPlayer.auditude] Resume playback event");g(n);}).init(m,{userData:X});},load:function(Y){var X=this;if(!window.aud){var W=document.createElement("script");W.type="text/javascript";W.async=true;W.src="http://adunit.cdn.auditude.com:80/player/js/lib/plugin/1.2/aud.html5player.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(W);}D.loadAttempt(50,250,function(){return(window.aud&&aud.html5)?true:false;},function(){if(typeof Y==="function"){Y();}});}};return V;}());var S=(function(){var V=function(W){this.root=W;};V.prototype={init:function(W){this.events(W);this.custom(W);},events:function(Y){var X=this.root,W=X.main;X.video[Y].elm.bind("loadstart",function(){if(W._callbacksObj[Y]){if(W._callbacksObj[Y].videoLoadStart){W._callbacksObj[Y].videoLoadStart();}}D.removeData(X.video[Y].elm,"Event_ended");X.EVENTS.loadStart(Y);});X.video[Y].elm.bind("progress",function(){X.EVENTS.progress(Y);});X.video[Y].elm.bind("loadedmetadata",function(){if(W._callbacksObj[Y]){if(W._callbacksObj[Y].videoMedaLoaded){W._callbacksObj[Y].videoMetaLoaded();}}X.EVENTS.loadedMetaData(Y);});X.video[Y].elm.bind("ended",function(){if(W._callbacksObj[Y]){if(W._callbacksObj[Y].videoEnded){W._callbacksObj[Y].videoEnded(X.CONTROLS);}}X.video[Y].elm.data("Event_ended",true);X.EVENTS.ended(Y);});X.video[Y].elm.bind("playing",function(){if(W._callbacksObj[Y]){if(W._callbacksObj[Y].videoPlaying){W._callbacksObj[Y].videoPlaying();}}X.EVENTS.playing(Y);});X.video[Y].elm.bind("pause",function(){if(W._callbacksObj[Y]){if(W._callbacksObj[Y].videoPause){W._callbacksObj[Y].videoPause();}}X.EVENTS.pause(Y);});X.video[Y].elm.bind("timeupdate",function(){if(W._callbacksObj[Y]){if(W._callbacksObj[Y].videoTimeUpdate){W._callbacksObj[Y].videoTimeUpdate();}}X.EVENTS.timeUpdate(Y);});},custom:function(W){}};return V;}());var M=(function(){var V=function(W){this.root=W;};V.prototype={play:function(Z){var X=this.root,W=X.main,Y=W.setPlayerMap({type:"get",vId:Z});if(typeof document.getElementById(Y)!=="undefined"){document.getElementById(Y).play();}},pause:function(Z){var X=this.root,W=X.main,Y=W.setPlayerMap({type:"get",vId:Z});if(typeof document.getElementById(Y)!=="undefined"){document.getElementById(Y).pause();}},load:function(W){},canPlayType:function(W){},jumpTo:function(a,Z){if(isNaN(Z)){return false;}var X=this.root,W=X.main,Y=W.setPlayerMap({type:"get",vId:a});if(typeof document.getElementById(Y)!=="undefined"){document.getElementById(Y).currentTime=Z;}}};return V;}());var P=(function(){var V=function(W){this.root=W;};V.prototype={loadStart:function(Z){var X=this.root,W=X.main,Y=W.setPlayerMap({type:"get",vId:Z});},progress:function(Z){var W=this.root,Y=W.STATES.buffered(Z,{range:"end",val:0}),X=parseInt((Y/W.STATES.duration(Z))*100,10);},loadedMetaData:function(W){},timeUpdate:function(W){},ended:function(W){},playing:function(W){},pause:function(W){}};return V;}());var U=(function(){var V=function(W){this.root=W;};V.prototype={currentTime:function(b,X){X=X||false;var W=this.root,a=Math.round(W.video[b].nativeElm.currentTime);if(!X){var Z=W.helper.formatTime(a),Y=W.STATES.duration(b,true);return(Z>Y)?Y:Z;}return a;}};return V;}());var T=(function(){var V=function(W){this.root=W;};V.prototype={duration:function(b,Y){Y=Y||false;var X=this.root,W=X.main,a=W.setPlayerMap({type:"get",vId:b});if(typeof document.getElementById(a)==="undefined"){return 0;}var Z=Math.round(document.getElementById(a).duration);if(!Y){return X.helper.formatTime(Z);}return Z;},buffered:function(b,Y){Y=Y||false;if(!Y){return false;}var X=this.root,W=X.main,a=W.setPlayerMap({type:"get",vId:b});if(typeof document.getElementById(a)!=="undefined"){try{switch(Y.range){case"length":return document.getElementById(a).buffered.length;case"start":return document.getElementById(a).buffered.start(Y.val);case"end":return document.getElementById(a).buffered.end(Y.val);}}catch(Z){C("[videoPlayer.pandora.states] Warning: "+Z);}}return false;}};return V;}());return R;}());var F={set:function(){var M,P,N=this,O=arguments,Q={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(O.length===1&&typeof O[0]==="object"){for(P in O[0]){Q[P]=O[0][P];}}else{for(M=0;M<O.length;M++){switch(M){case 0:Q.elm=O[0];break;case 1:Q.ratio=O[1];break;case 2:Q.dim=O[2];break;case 3:Q.position=O[3];break;case 4:Q.size=O[4];break;case 5:Q.useAltImg=O[5];break;case 6:Q.altHover=O[6];break;}}}Q.elm.each(function(){var S=D(this),R=new Image(),T=Q;T.elm=S;if(T.dim){N.setOverlay(T);}else{R.onload=function(){T.dim=[R.width,R.height];N.setOverlay(T);};R.src=S.find("img").attr("src");}});},useAbsImg:function(Q,N){var U,M=["118","96","64","48","32","24","16"],T=false;if(!isNaN(Q)){if(Q>=M[0]){T=M[0];}else{for(U=0;U<M.length;U++){var O=M[U],S=(M[U+1])?M[U+1]:0,R=Math.abs(O-Q),P=Math.abs(O-S);if(Q<=O&&Q>S){T=(R>P)?S:O;break;}}}}return(T)?T:false;},setOverlay:function(N){var M=this,U=N.elm,V=N.ratio||0.35,O=N.dim,P=N.position||"center",c=N.size||118,Q=N.useAltImg,b=N.altHover||false,T=true,Y=false;var W="http://global.fncstatic.com/static/v/all/img/vp-overlay${dim}${hover}.png";function X(d){return Math.floor(d);}function a(d){return d+"px";}function R(e){e=(b)?((e)?false:true):e;var d;if(T&&Y){d=Y;}d=(d)?("-"+d):"";return W.replace("${dim}",d).replace("${hover}",(e)?"-hover":"");}function Z(){var p=(O[1]<O[0])?O[1]:O[0],e=p*V;e=(e>c)?c:e;var m=e,g=m,n=false,j=false,i=false,d=false,l=0.03,f=0.05;l=X(O[0]*l);f=X(O[1]*f);switch(P){case"top right":j=l;i=f;break;case"bottom right":j=l;d=f;break;case"top left":n=l;i=f;break;case"bottom left":n=l;d=f;break;default:n=Math.floor((O[0]*0.5)-(m*0.5));i=Math.floor((O[1]*0.5)-(g*0.5));}var k={};if(j){k.right=a(j);}if(n){k.left=a(n);}if(i){k.top=a(i);}if(d){k.bottom=a(d);}if(T&&M.useAbsImg(m)){m=M.useAbsImg(m);g=m;Y=m;}k.width=a(m);k.minHeight=a(g);var h=D('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+R()+'"/></span>'),o=U.parent().find("> h3:first");h.find("img").css(k);U.find("a").css({position:"relative"});U.find("img").each(function(){var r=D(this),q=r.parent(),u=false;q.css({display:"block",padding:"0"}).prepend(h);var t=q.find(".vid-overlay"),v=t.find("img");function s(w){if(w&&!u){u=true;v.attr("src",R(true));}else{if(u){u=false;v.attr("src",R());}}}o.hover(function(){s(true);},function(){s();});q.hover(function(){s(true);},function(){s();});});}var S=new Image();S.src=R(true);Z();}};function G(){var M=false,N=navigator.userAgent;var O=function(P){return(N.toLowerCase().indexOf(P)>-1)?true:false;};if(O("silk")&&!O("silk/1.0")){M="legacy";}else{if(O("android")&&!O("silk")){M="legacy";}else{if(O("blackberry")){M=true;}else{if(O("iemobile")){M="legacy";}else{if("createTouch" in document){M=true;}}}}}return M;}function K(){var M=document.createElement("video");return(M.play)?true:false;}function E(M){M=M||false;return Object.prototype.toString.call(M)==="[object Array]";}function J(){var M={};if(navigator.userAgent.match(/iPhone/i)){M.mobile="ios";M.dev="iPhone";}else{if(navigator.userAgent.match(/iPod/i)){M.mobile="ios";M.dev="iPod";}else{if(navigator.userAgent.match(/iPad/i)){M.mobile="ios";M.dev="iPad";}else{if(navigator.userAgent.match(/Silk/i)){M.mobile="android";M.dev="Kindle";}else{M=false;}}}}return M;}function H(M){return(typeof M==="string"&&M.indexOf("%")===M.length-1)?true:false;}if(!window.console){window.console={log:function(){},error:function(){}};}function C(){var N=false;N=(!N&&(window.location.search.indexOf("stc=y")>-1))?true:N;if(!window.console){window.console={log:function(){},error:function(){}};}if(N&&window.console){try{return console.log.apply(console,arguments);}catch(M){console.log(arguments);}}}var B=C;(function(){var N=function(){var V,P,S=this,T=arguments;if(T.length===0){return false;}var R={attempt:0,timeout:500};if(T.length===1&&typeof T[0]==="object"){for(V in T[0]){R[V]=T[0][V];}if(!R.callback){return false;}else{P=R.callback;}if(!P.check||!P.success){return false;}else{R._check=P.check;R._success=P.success;}if(P.timedOut){R._timeout=P.timedOut;}}else{if(!isNaN(T[0])&&!isNaN(T[1])&&M(T[2])&&M(T[3])){R.attempt=T[0];R.timeout=T[1];R._check=T[2];R._success=T[3];if(T[4]){R._timeout=T[4];}if(T[5]){R._abort=T[5];}}else{if(M(T[0])&&M(T[1])){R._check=T[0];R._success=T[1];if(T[2]){R._timeout=T[2];}if(T[3]){R._abort=T[3];}}else{return false;}}}if(!M(R._check)||!M(R._success)){return false;}if(!M(R._timeout)){R._timeout=function(){};}if(isNaN(R.timeout)){return false;}else{R.timeout=O(R.timeout);}if(isNaN(R.attempt)){return false;}else{R.attempt=O(R.attempt);}var W=false,Q=false;if(R.attempt&&R.timeout){var U=function(){if(Q){clearTimeout(W);}else{if(R._check()){R._success();clearTimeout(W);}else{if(R.attempt>0){W=setTimeout(function(){U();},R.timeout);}else{R._timeout();}}}R.attempt--;};U();}else{W=setInterval(function(){if(Q){clearInterval(W);}else{if(R._check()){R._success();clearInterval(W);}}},R.timeout);}return{abort:function(){Q=true;}};};function O(P){return parseInt(P,10);}function M(P){return(typeof P==="function")?true:false;}if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:N});}else{if(!window.loadAttempt){window.loadAttempt=N;}}}());}(jQuery));(function(D){function E(){this.listenersArr=[];this.version="03.31.2010";}E.prototype={append:function(H){H=H||false;if(!H||!H.elm){return false;}var I=this,J=new G();J.init(H);this.listenersArr.push({fn:J,config:H});this.trigger(J);},trigger:function(I){I=I||false;var K=this;if(I){I.trigger();}else{var H;for(H=0;H<K.listenersArr.length;H++){var J=K.listenersArr[H].fn;K.helper.removeListener(J._elm,I.thisEventList);J.trigger();}}},reTriggerListener:function(){var H=this;D(document).ready(function(){var M=500,I=10000,K=0,L=D("iframe").size();function J(){if(L!==K){K=L;}else{M=Math.floor(M/3)+M;}if(M<I){H.trigger();setTimeout(function(){J();},M);}}J();});}};E.prototype.helper={removeListener:function(I,H){I.each(function(){var J,K=D(this);if(A(H)){for(J=0;J<H.length;J++){K.unbind(H[J]);}}else{K.unbind(H);}});}};function G(){this._elm=false;this._eventsCallback={};this._moveSensitivity=15;this.properties={scale:{},move:{origin:{},current:{},diff:{}}};this.thisEventList=["touchstart","touchend","touchmove","gesturestart","gestureend"];}G.prototype={init:function(H){var I;for(I in H){this["_"+I]=H[I];}this.testElm={coords:D("#coords"),start:D("#start"),diff:D("#diff")};this.logger=new B();this.logger.init();},trigger:function(){var H=this;this._elm.each(function(){H.setListeners(D(this));});},setListeners:function(I){I=I||false;if(!I){return false;}var H=this,K=I.get(0);I.bind("touchstart",function(L){var M=L.originalEvent;H._elm.data("EVENT_touchstart.trigger",true);H._elm.data("EVENT_touchmove.setOrigin",false);H._elm.data("EVENT_touchmove.directionalOnce",false);if(H._eventsCallback.touchstart){H._eventsCallback.touchstart(M);}});I.bind("touchend",function(L){var M=L.originalEvent;H._elm.data("EVENT_touchstart.trigger",false);H._elm.data("EVENT_touchmove.directionalOnce",false);if(H._eventsCallback.touchend){H._eventsCallback.touchend(M);}});I.bind("touchmove",function(N){var Q=N.originalEvent,P=Q.touches[0].pageX,O=Q.touches[0].pageY;H.properties.move.current={x:P,y:O};if(!H._elm.data("EVENT_touchmove.setOrigin")){H.properties.move.origin.x=P;H.properties.move.origin.y=O;H._elm.data("EVENT_touchmove.setOrigin",true);}var L={x:H.properties.move.origin.x,y:H.properties.move.origin.y};H.properties.move.diff={x:P-L.x,y:O-L.y};if(H._eventsCallback.touchmoveRaw){H._eventsCallback.touchmoveRaw(H.properties.move,Q);}function M(){var S=H._moveSensitivity,T=[];function R(){H._elm.data("EVENT_touchmove.directionalOnce",true);}if(P>=L.x+S){T.push("right");H.logger.log("going right");}else{if(P<=L.x-S){T.push("left");H.logger.log("going left");}}if(O<=L.y-S){T.push("up");H.logger.log("going up");}else{if(O>=L.y+S){T.push("down");H.logger.log("going down");}}if(H._eventsCallback.touchmoveMoveOnce){H._eventsCallback.touchmoveMoveOnce(T,H.properties.move,Q);}if(T.length>0){R();}}if(!H._elm.data("EVENT_touchmove.directionalOnce")){M();}});I.bind("gesturestart",function(L){var M=L.originalEvent,N=H.helper.setScale(M.scale);H.properties.scale.current=H.properties.scale.current||N;if(H._eventsCallback.gesturestart){H._eventsCallback.gesturestart(M);}H.properties.scale.changed=false;});I.bind("gestureend",function(L){var M=L.originalEvent,N=H.helper.setScale(M.scale);if(H._eventsCallback.gestureend){H._eventsCallback.gestureend(M);}if(H.properties.scale.current!==N){H.properties.scale.current=N;H.properties.scale.changed=true;H.logger.log("Scale changed to: "+N);if(H._eventsCallback.scaleChange){H._eventsCallback.scaleChange(N,M);}}});var J=D(window);if(!J.data("EVENT_orientationchange")){J.bind("orientationchange",function(L){var M=L.originalEvent;H.logger.log("Orientation change: "+H.helper.orientation(window.orientation,M));});J.data("EVENT_orientationchange",true);}if(H._eventsCallback.orientationchange){J.bind("orientationchange",function(L){var M=L.originalEvent;H._eventsCallback.orientationchange(H.helper.orientation(window.orientation,M));});}}};G.prototype.helper={setScale:function(H){if(!isNaN(H)){return Math.round(H*100)/100;}},orientation:function(I){if(!isNaN(I)){var H=Math.abs(I);return(H===0||H===180)?"vertical":"horizontal";}}};function C(H){if(typeof window.console==="object"){console.log(H);}}function A(H){H=H||false;return Object.prototype.toString.call(H)==="[object Array]";}var B=function(){};B.prototype={init:function(){this.elm=D("#console ul:first");},log:function(H){if(this.getQuery("log")!=="y"){return false;}if(this.elm.size()>0){H="<li>"+H+"</li>";this.elm.append(H);}else{C(H);}},getQuery:function(L){var H,J=(window.location.search).substr(1),K=J.split("&");for(H=0;H<K.length;H++){var I=K[H].split("=");if(I[0]===L){return I[1];}}return false;}};var F=window.touchEventListener=new E();}(jQuery));window.ClientStorageManager=(function(F){var C={},K={_namespace:"ClientStorageManager",_prefix:"FoxCSM_",_cookiePrefix:"FXcsm",_cookiePersistence:30,_showConsole:false,_frameSrc:"/static/v/all/html/IEStore.html",_splitVars:"|#|"};var E=function(){this.dataObj=null;this.initialized=false;this.type=null;this.customType=false;this.control=new B(this);this.init();};E.prototype={init:function(){var L=this,M=A();L.setProperties();L.storageInstance=new H(L,{namespace:K._namespace,prefix:K._prefix,type:M});L.type=M;L.initialized=true;D("[init] Initialized: "+L.type);if(L.type.toLowerCase().indexOf("cookie")>-1){D("[init] Warning: cookie storage maxes out at 4kb only!");}},setProperties:function(){var M,P=(F.location.search).substr(1),Q=P.split("&"),L=Q.length,N={};for(M=0;M<L;M++){var O=Q[M].split("=");N[O[0]]=decodeURIComponent(O[1]);}if(N.showConsole){K._showConsole=true;}},set:function(){var N,L=this,M=arguments,O;var P=function(T){switch(T.key){case"type":var S=T.value;switch(S){case"session":S=(F.sessionStorage)?"sessionStorage":"sessionCookie";break;case"cookie":S="cookie";break;case"sessionCookie":S="sessionCookie";break;default:D("[set] Getting default storage..");S=A();}if(S===L.type){D("[set] Type already: "+S);break;}if(L.type==="MSIEStorage"){L.MSIEStorageInstance=L.storageInstance;}var R={namespace:K._namespace,prefix:K._prefix,type:S,prevType:L.type};var Q=(R.type==="MSIEStorage")?L.MSIEStorageInstance:new H(L,R);if(Q.initialized){G();I(CS,{customType:true,storageInstance:Q,type:R.type});L.control.root=CS;D("[set] Storage changed: "+R.prevType+" -> "+R.type);if(L.type.toLowerCase().indexOf("cookie")>-1){D("[set] Warning: cookie storage maxes out at 4kb only!");}}else{D("[set] Error setting type: "+S);}break;default:D("[set] Invalid property key: "+T.key);}};if(typeof M[0]==="object"){for(N in M[0]){P({key:N,value:M[0][N]});}}else{P({key:M[0],value:M[1]});}},saveItem:function(){var L=arguments,M=(L.length===1&&typeof L[0]==="object")?L[0]:{key:L[0],value:L[1]};this.control.saveItem(M);},deleteItem:function(L,M){var N={key:L};if(M){N.fn=M;}this.control.deleteItem(N);},getItem:function(M,N,L){this.control.getItem({key:M,fn:N,raw:L||false});},getAll:function(L){this.control.getAllItems(L);},clearAll:function(L){this.control.clearAll(L);}};var B=(function(){var M=function(N){this.root=N;};M.prototype={saveItem:function(P){var O=this,N=this.root;if(P.key&&P.value){var Q=L.formatValue(P.value);if(Q&&Q.length>0){N.storageInstance.save({key:O.setPrefix(P.key),value:Q,expire:(P.expire)?P.expire:0});if(typeof P.success!=="undefined"){O.attempts=0;O.checkData(P);}}}else{if(P.error){P.error("No Key or Value entered");}}},deleteItem:function(Q){var O=this,N=this.root,P=this.setPrefix(Q.key);var R=function(){N.storageInstance.deleteItem(P);D("[control] Storage Event: Delete");};if(Q.fn){Q.fn(R());}else{R();}},getItem:function(N){N.key=this.setPrefix(N.key);this.root.storageInstance.load(N);},getAllItems:function(N){this.root.storageInstance.getAll(N);},clearAll:function(P){var O=this,N=this.root;N.storageInstance.clearAll();D("[control] Storage Event: Clear All");if(typeof P==="function"){P();}},checkData:function(P){var O=this,N=this.root;O.getItem({key:P.key,raw:false,fn:function(R){if(R!==null){P.success({key:P.key,value:R,type:N.storageInstance.type});D("[control] Storage Event: Save");}else{var Q="[control] Error saving key: "+P.key;P.success=false;P.error(Q);D(Q);return null;}}});},setPrefix:function(N){var O="MSIEStorage|cookie|sessionCookie";return(O.indexOf(this.root.type)>-1)?N:L.addPrefix(K._prefix,N);}};var L={addPrefix:function(O,N){return O+this.trim(N);},removePrefix:function(O,N){return N.substr(O.length);},formatValue:function(N){return this.trim(N.toString());},trim:function(N){return N.replace(/^\s+|\s+$/g,"");}};return M;}());var H=(function(){var L=function(R,S){this.root=R;this.sessionStorage=new Q(this);this.localStorage=new N(this);this.globalStorage=new O(this);this.MSIEStorage=new M(this);this.cookieStorage=new P(this);return(this.init(S));};L.prototype={init:function(S){var R=this,T;R.initialzed=true;switch(S.type){case"MSIEStorage":I(S,{div:{id:"IEStorageSource",store:"xmldomstore"},frame:{src:K._frameSrc,id:"IEStorageSource",name:"DOMPersistentSource",store:"xmldomstore"}});T="MSIEStorage";break;case"cookie":I(S,{cookieName:K._cookiePrefix,sessionCookie:false});T="cookieStorage";break;case"sessionCookie":I(S,{cookieName:K._cookiePrefix+"s",sessionCookie:true});T="cookieStorage";break;default:T=S.type;}R[T].init(S);return R[T];}};var Q=function(R){this.root=R.root;this.main=R;};Q.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.initialized=true;},save:function(S){try{F.sessionStorage.setItem(S.key,S.value);}catch(R){D("[sessionStorage save] Error Saving: "+R);}},load:function(){var R=arguments;function S(T){return F.sessionStorage.getItem(T);}if(R.length===1&&typeof R[0]==="object"){R[0].fn(S(R[0].key));}else{return S(R[0]);}},deleteItem:function(R){F.sessionStorage.removeItem(R);},getAll:function(V){var S,T={},W=0,X=F.sessionStorage,R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.sessionStorage,R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;}};var N=function(R){this.root=R.root;this.main=R;};N.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(T){var R="";if(T.expire){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}try{F.localStorage.setItem(T.key,T.value.toString()+R);}catch(S){D("[localStorage save] Error Saving: "+S);}},load:function(){var R=this,S=arguments;function T(V,U){var W=F.localStorage.getItem(V);if(W){if(R.expire.isStale(W)){R.deleteItem(V);}else{return(!U)?R.expire.removeExpireStr(W):W;}}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(R){F.localStorage.removeItem(R);},getAll:function(V){var S,T={},W=0,X=F.localStorage,R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.localStorage,R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;},removeExpired:function(){var S,U,V=[],W=F.localStorage,R=W.length;for(S=0;S<R;S++){V.push(W.key(S));}var T=V.length;for(U=0;U<T;U++){if(V[U].indexOf(this.prefix)===0&&this.expire.isStale(W[V[U]])){this.deleteItem(V[U]);}}}};var O=function(R){this.root=R.root;this.main=R;};O.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(T){var R="";if(T.expire){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}try{F.globalStorage[document.domain][T.key]=T.value.toString()+R;}catch(S){D("[globalStorage save] Error Saving: "+S);}},load:function(){var R=this,S=arguments;function T(V,U){if(typeof F.globalStorage[document.domain][V]==="undefined"){return null;}var W=F.globalStorage[document.domain][V].value;if(R.expire.isStale(W)){R.deleteItem(V);}else{return(!U)?R.expire.removeExpireStr(W):W;}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(R){delete F.globalStorage[document.domain][R];},getAll:function(V){var S,T={},W=0,X=F.globalStorage[document.domain],R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}return V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.globalStorage[document.domain],R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;},removeExpired:function(){var R;for(R in globalStorage[document.domain]){if(R.indexOf(this.prefix)===0&&this.expire.isStale(globalStorage[document.domain][R].value)){this.deleteItem(R);}}}};var M=function(R){this.root=R.root;this.main=R;};M.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=false;this.isDocReady=false;var T=document.createElement("iframe");T.setAttribute("src",this.frame.src+"?n="+R.namespace+"&s="+this.frame.store);T.setAttribute("id",this.frame.id);T.setAttribute("name",this.frame.name);T.setAttribute("width","5");T.setAttribute("height","5");T.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-9999px;");this.iframe=T;this.setFrame();},save:function(T){if(!this.initialized){return false;}if(!this.dataObj){this.dataObj={};}var R="";if(typeof T.expire!=="undefined"){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}this.dataObj[T.key]=T.value.toString()+R;try{this.dataStorage.reloadIEStorage();return true;}catch(S){D("[IEStorage save] Error Saving: "+S);return false;}},load:function(){var R=this,S=arguments;function W(Y,X){if(!R.initialized){return null;}var a=R.dataObj;if(a[Y]){var Z=a[Y];if(R.expire.isStale(Z)){R.deleteItem(Y);}else{return(!X)?R.expire.removeExpireStr(Z):Z;}}return null;}if(S.length===1&&typeof S[0]==="object"){var U=0,V=S[0];var T=function(){if(R.initialized){clearTimeout(C.IELoad);if(R.dataObj){var X=V.raw||false;V.fn(W(V.key,X));}else{V.fn(null);}}else{C.IELoad=setTimeout(function(){T();},50);}};T();}else{return W(S[0],S[1]||false);}},deleteItem:function(R){if(this.initialized){delete this.dataObj[R];this.dataStorage.reloadIEStorage();}},getAll:function(T){var R=this,U=0;function S(){if(R.initialized){clearTimeout(C.IEGetAll);if(typeof R.dataObj!=="undefined"){var V,Y={},W=0;for(V in R.dataObj){var X=R.load(V);if(X){Y[V]=X;W++;}}return T((W>0)?Y:null);}return T(null);}else{if(U>=2){clearTimeout(C.IEGetAll);return T(null);}else{U++;C.IEGetAll=setTimeout(function(){S();},50);}}}S();},clearAll:function(){if(this.initialized){delete this.dataObj;this.dataStorage.reloadIEStorage();}},removeExpired:function(){if(this.initialized){var R,S=this.dataObj;for(R in S){if(this.expire.isStale(S[R])){delete S[R];}}this.dataObj=S;this.dataStorage.reloadIEStorage();}},loadClientData:function(R){this.dataObj=this.processStrToObj(R);},processStrToObj:function(V){var S,W={},U=V.split(K._splitVars),R=U.length;for(S=0;S<R;S++){var T=U[S].split("=");W[T[0]]=decodeURIComponent(T[1]);}return W;},processObjToStr:function(T){var R,S=[];if(T){for(R in T){S.push(R+"="+encodeURIComponent(T[R]));}}return(S.length>0)?S.join(K._splitVars):"";},setFrame:function(){var R=this;document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);S();}});if(document.documentElement.doScroll&&F===F.top){(function(){if(R.isDocReady){return ;}try{document.documentElement.doScroll("left");}catch(T){setTimeout(arguments.callee,50);return ;}S();}());}function S(){if(!document.getElementById(R.frameId)){document.documentElement.appendChild(thisObj.iframe);}thisObj.isDocReady=true;thisObj.removeExpired();}}};var P=function(R){this.root=R.root;this.main=R;};P.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(S){var W=this.getStorageCookie(),U,R="";if(S.expire&&!this.sessionCookie){if(this.expire.setToExpire(S.expire)){R=this.expire.set(S.expire,"cookieValue");}}var T=encodeURIComponent(S.value.toString())+R;if(W){var V=this.processStrToObj(W);V[S.key]=T;U=this.processObjToStr(V);}else{U=S.key+"="+T;}if(U){this.saveCookie(U);return true;}},saveCookie:function(U){var R=(!this.sessionCookie)?("; expires="+this.expire.set(K._cookiePersistence,"cookie")):"",S=this.cookieName+"="+K._splitVars+U+R+"; path=/";try{document.cookie=S;}catch(T){D("[Cookie save] Error Saving: "+T);}},load:function(){var R=this,S=arguments;function T(W,V){var U=R.getStorageCookie();if(U){var Y=R.processStrToObj(U);if(Y[W]){var X=Y[W];if(R.expire.isStale(X)){R.deleteItem(W);}return(!V)?R.expire.removeExpireStr(X):X;}}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(S){var R=this.getStorageCookie();if(R){var T=this.processStrToObj(R);if(T[S]){delete T[S];}this.saveCookie(this.processObjToStr(T));}},getAll:function(T){var R=this.getStorageCookie(),V={},U=0;if(R){var S,W=this.processStrToObj(R);for(S in W){if(W[S]){if(this.expire.isStale(W[S])){delete W[S];}else{V[S]=W[S];U++;}}}return T((U>0)?V:null);}return T(null);},clearAll:function(){this.saveCookie("");},removeExpired:function(){var R=this.getStorageCookie();if(R){var S,T=this.processStrToObj(R);for(S in T){if(T[S]){if(this.expire.isStale(T[S])){delete T[S];}}}this.saveCookie(this.processObjToStr(T));}},getStorageCookie:function(){var S,V,U=document.cookie.split(";"),R=U.length;for(S=0;S<R;S++){var T=U[S].replace(/^\s+|\s+$/g,"");if(T.substring(0,this.cookieName.length+1)===this.cookieName+"="){return decodeURIComponent(T.substring(this.cookieName.length+1));}}return null;},processStrToObj:function(V){var S,W={},U=V.split(K._splitVars),R=U.length;for(S=0;S<R;S++){var T=U[S].split("=");if(T[1]){W[T[0]]=T[1];}}return W;},processObjToStr:function(T){var R,S=[];for(R in T){if(R.length>0){S.push(R+"="+T[R]);}}return S.join(K._splitVars);}};return L;}());var A=function(){if(F.localStorage){return"localStorage";}else{if(F.globalStorage){return"globalStorage";}else{return"cookie";}}};var I=function(N,L){var M;for(M in L){N[M]=L[M];}return N;};var G=function(){var L;for(L in C){clearTimeout(C[L]);}};var D=function(L){if(typeof F.console==="object"&&K._showConsole){console.log(L);}};var J=function(){this.defaultExpire=14;this.expireStr="<!#[${value}]>";this.expireRegex=/\<!#\[(.+)\]>/;};J.prototype={now:function(){return(new Date());},set:function(L,M){L=L||this.defaultExpire;M=M||null;addTime=(L*24*3600000);var N=new Date(this.now().getTime()+addTime);switch(M){case"cookie":L=N.toUTCString();break;default:L=this.expireToStr(this.simpleDateStr(N));}return L;},simpleDateStr:function(L){var N=(L.getUTCMonth()+1)+"/"+L.getUTCDate()+"/"+L.getUTCFullYear(),M=L.getHours()+":"+L.getMinutes();return N+" "+M;},setToExpire:function(L){L=L||0;if(typeof L==="number"&&L>0){return true;}return false;},getExpire:function(N,M){var L=N.match(this.expireRegex);if(L){return(M)?L[0]:L[1];}return false;},isStale:function(M){var L=this.getExpire(M);if(L){return(this.hasExpired(L))?true:false;}return false;},hasExpired:function(M){var L=this.convert(M);return(this.now()>L)?true:false;},convert:function(M){var L=new Date(M);if(typeof M==="string"&&L.toString()==="Invalid Date"){L=new Date(parseInt(M,10));}return(L);},expireToStr:function(L){return this.expireStr.replace("${value}",L);},removeExpireStr:function(L){return L.replace(this.expireRegex,"");}};return(new E());}(window));(function(B){window.FoxISATracker=function(){this.dataObj={trigger:{pageLoad:false}};this.initialized=false;};FoxISATracker.prototype={init:function(C){if(!C){return false;}if(this.initialized){A("[ISA Tracker] Already Initialized");return false;}this.initialized=true;this.control.root=this;this.set(C);},set:function(E){if(!E){return false;}if(!this.initialized){this.init(E);}var D;for(D in E){var F,C=E[D];for(F in C){if(!this.dataObj.trigger[F]){this.dataObj.trigger[F]={};}this.dataObj.trigger[F][D]=C[F];}}},track:function(F,G){this.control.count(F);var C=this.dataObj.trigger;if(!C[F]){A("[ISA Tracker] No event specified for: "+F);return false;}var D,E=C[F];for(D in E){this.control.execTrigger({event:F,trigger:E[D],data:G,count:E._count});}}};FoxISATracker.prototype.control={count:function(F){F=F||false;if(!F){return false;}var C=this.root,D=C.dataObj.trigger;if(!D[F]){return false;}var E=((!isNaN(D[F]._count))?D[F]._count:0)+1;C.dataObj.trigger[F]._count=E;},execTrigger:function(F){if(typeof F!=="object"){return false;}if(!F.trigger){return false;}var C=F.event||false,D=F.trigger.frequency||false,J=F.trigger.callback||false,G=F.data||false,E=F.trigger||false,H=F.count||false;if(!C||isNaN(D)||!E){return false;}var K=this,I=this.root;if(typeof J==="function"){if(C==="pageLoad"&&H===1){J(G);}else{if(C.indexOf("click")===0){J(G);}else{if(H>1&&H%D===0){J(G);}}}}}};function A(D){try{FOX.utils.debug(D);}catch(C){if(typeof window.console==="object"&&window.location.search.indexOf("stc=y")){console.log(D);}}}}(jQuery));window.LocationLookup=(function(){var A={map:[{z:99500,s:"AK"},{z:98000,s:"WA"},{z:97000,s:"OR"},{z:96900,s:"XX"},{z:96700,s:"HI"},{z:96200,s:"AP"},{z:90000,s:"CA"},{z:89000,s:"NV"},{z:88500,s:"TX"},{z:87000,s:"NM"},{z:85000,s:"AZ"},{z:84000,s:"UT"},{z:83200,s:"ID"},{z:82000,s:"WY"},{z:80000,s:"CO"},{z:75000,s:"TX"},{z:73000,s:"OK"},{z:71600,s:"AR"},{z:70000,s:"LA"},{z:68000,s:"NE"},{z:66000,s:"KS"},{z:63000,s:"MO"},{z:60000,s:"IL"},{z:59000,s:"MT"},{z:58000,s:"ND"},{z:57000,s:"SD"},{z:56900,s:"DC"},{z:55000,s:"MN"},{z:53000,s:"WI"},{z:50000,s:"IA"},{z:48000,s:"MI"},{z:46000,s:"IN"},{z:43000,s:"OH"},{z:40000,s:"KY"},{z:38600,s:"MS"},{z:37000,s:"TN"},{z:35000,s:"AL"},{z:34000,s:"AA"},{z:32000,s:"FL"},{z:30000,s:"GA"},{z:29000,s:"SC"},{z:27000,s:"NC"},{z:24700,s:"WV"},{z:22000,s:"VA"},{z:20600,s:"MD"},{z:20000,s:"DC"},{z:19700,s:"DE"},{z:15000,s:"PA"},{z:10000,s:"NY"},{z:7000,s:"NJ"},{z:6000,s:"CT"},{z:5000,s:"VT"},{z:3900,s:"ME"},{z:3000,s:"NH"},{z:2800,s:"RI"},{z:1000,s:"MA"},{z:600,s:"PR"},{z:500,s:"NY"}],mapOneOff:{AK:98791,NY:6390,TN:42223,AM:96799},region:{Mountain:"AZ,CO,ID,MT,NM,NV,UT,WY",Northeast:"CT,DE,DC,MA,ME,MD,NJ,NH,NY,VT,PA,RI",West:"CA,AK,HI,OR,WA",Midwest:"IA,IL,IN,KS,MI,MN,ND,NE,OH,WI,SD,KY",South:"MO,AL,AR,LA,KT,MS,TN,TX,OK",Southeast:"VA,NC,SC,GA,FL,WV"},dma:{feed:"/feeds/json/zip-dma/Get_AFFDMA/${zip}/all",cb:"Get_AFFDMA"}};var C=function(F){if(typeof F==="object"&&F.region){A.region=F.region;}};C.prototype={getByZip:function(G){var F=G;G=(/(^\d{5}$)/.test(G))?parseInt(G,10):false;if(!G){return false;}var H=B(G),I=E(H);return({zip:F,state:H,region:I});},getByState:function(G){if(typeof G!=="string"){return false;}G=G.toUpperCase();var F,H=false;for(F in A.region){if(A.region[F].indexOf(G)>-1){H=E(G);break;}}return(H)?({state:G,region:H}):false;},getByDMA:function(H,G){if(typeof G!=="function"){return false;}var F=H;H=(/(^\d{5}$)/.test(H))?H:false;if(!H){return false;}D(H,function(I){if(!I){G(false);}G((I.dma&&I.region&&I.city)?({zip:F,state:I.region,region:I.city,dma:I.dma}):false);});}};var B=function(H){var G,J=A.map,F=A.mapOneOff;for(G in F){if(H===F[G]){return G;}}for(G=0;G<J.length;G++){var I=J[G];if(H>=I.z){return I.s;}}return false;};var E=function(G){var F,H=A.region;for(F in H){if(H[F].indexOf(G)>-1){return F;}}return false;};var D=function(H,G){window[A.dma.cb]=G;var F=A.dma.feed;F=F.replace("${zip}",H);$.ajax({url:F,dataType:"script",async:true,cache:true});};return C;}());window.FOX_DependencyManager=(function(G){var B={prefix:"___"};var E=function(){this._TYPES=[];};E.prototype.addInstance=function(I,J){if(typeof I!=="string"&&I.length<1){return false;}var H=this;if(!H[A(I)]){H._TYPES.push(I);H[A(I)]=new C(I,this);if(G.isArray(J)){H.setDependency(I,J);}}else{D("[DependencyManager.addDependency] '"+I+"' already exists.");}};E.prototype.onReady=function(I,J){if(typeof I!=="string"||typeof J!=="function"){return false;}var H=this;G.loadAttempt(60,500,function(){return(H[A(I)])?true:false;},function(){H[A(I)].onReady(function(K){J(K);});},function(){D("[DependencyManager.onReady] Max attempts to check for the instance of '"+I+"' reached.");});};E.prototype.setDependency=function(I,J){if(typeof I!=="string"||!G.isArray(J)){return false;}var H=this,I=A(I);if(!H[I]){return false;}H[I].setDependency(J);};E.prototype.fireReady=function(I,J){if(typeof I!=="string"){return false;}var H=this,I=A(I);if(H[I]){H[I].EVENT.fireReady(J);}};var C=(function(){var H=function(K,J){this.root=J;this._TYPE=K;this._DEPENDENCY=false;this._IS_READY=false;this._pooler={};this.EVENT=new F(this);};H.prototype.setDependency=function(K){var J=this;if(J._DEPENDENCY){return false;}if(G.isArray(K)&&I(K)){J._DEPENDENCY=K;J.isReady();D("[DependencyManager."+J._TYPE+".setDependency] Dependency set.");}else{D("[DependencyManager."+J._TYPE+".setDependency] Invalid setting.");}};H.prototype.isReady=function(){var M=this,L=this.root;if(!M._DEPENDENCY){return false;}if(M._IS_READY&&!M._pooler.isReady){return M._IS_READY;}M._pooler.isReady=true;var K=function(){var Q,R=M._DEPENDENCY,T=true;for(Q=0;Q<R.length;Q++){var S=A(R[Q]);if(L[S]&&!L[S].EVENT.inquire()){T=false;break;}}return T;};var O=false,N=0,J=360;var P=function(){N++;if(!O){O=K();}if(!O){if(N>J){D("[DependencyManager."+M._TYPE+".isReady] Max attempts reached to check ready state.");}else{setTimeout(function(){P();},500);}}else{M._IS_READY=true;M._pooler.isReady=false;}};P();};H.prototype.onReady=function(K){if(typeof K!=="function"){return false;}var J=this;G.loadAttempt(360,500,function(){return(J._IS_READY)?true:false;},function(){K(J._READY_DATA);});};var I=function(J){return true;};return H;}());var F=(function(){var H=function(I){this.root=I.root;this.main=I;this._IS_READY=false;this._READY_DATA=null;};H.prototype.fireReady=function(J){var I=this;if(!I._IS_READY){I._IS_READY=true;if(J){I._READY_DATA=J;}}};H.prototype.inquire=function(){var I=this;return I._IS_READY;};return H;}());var D=function(H){if(window.console&&window.console.log){console.log(H);}};var A=function(H){return(B.prefix+H);};return E;}(jQuery));window.MultiFeedParser=(function(I){var O={logName:"[Feed Parser]",jsonpParam:"callback",minRefreshRate:0.5};var G=function(T){T=T||{};var S=this;S.__vars={};var R=S.__vars;R._config=T;R._fn={};R._data={};R._xhr={};R._callStack={};R._initExe={};R._refreshObj={};S.event=new M(S);R._fn.log=(R._config.logging)?H:function(){};var V=(typeof R._config.initOnLoad==="boolean"&&!R._config.initOnLoad)?false:true;var U,Q=(R._config&&R._config.feeds)?R._config.feeds:false;if(V&&Q){for(U in Q){P(R,U);if(Q[U].refresh){B(S,U,Q[U]);}}}};var M=(function(){var Q=function(R){this.__vars={};var S=this.__vars;S.root=R;};Q.prototype.reload=function(V){var S,X,T=false,Z=this,W=Z.__vars.root,Y=W.__vars,a=(Y._config&&Y._config.feeds)?Y._config.feeds:false,U=[];if(!a){return false;}var R=function(b){if(!Y._refreshObj[b]){B(W,b,a[b]);}};if(typeof V==="string"){V=(A(V)).replace(/\s+/g," ");U=V.split(" ");}if(U.length>0){for(X=0;X<U.length;X++){if(a[U[X]]){Y._fn.log(O.logName+" Reloading {type}: '"+U[X]+"'");P(Y,U[X]);R(U[X]);T=true;}}}else{Y._fn.log(O.logName+" Reloading all feed {type}");for(S in a){P(Y,S);R(S);}T=true;}};Q.prototype.addFeed=function(){var V=this,T=V.__vars.root,U=T.__vars,R=(U._config&&U._config.feeds)?U._config.feeds:{},X=arguments;var W={type:false,url:false};if(typeof X[0]==="string"&&typeof X[1]==="string"){W.type=X[0];W.url=X[1];}else{if(typeof X[0]==="object"&&X[0].type&&X[0].url){W=X[0];}}if(!W.type||!W.url){U._fn.log(O.logName+" Cannot fire event.addFeed(). Missing config {type} or {url}.");return false;}else{if(R[W.type]){U._fn.log(O.logName+" Cannot fire event.addFeed() for {type}: '"+W.type+"'. This type already exists.");return false;}}var Y,S={};for(Y in W){if(Y!=="type"){S[Y]=W[Y];}}T.__vars._config.feeds[W.type]=S;P(U,W.type);if(W.refresh){B(T,W.type,S);}};Q.prototype.removeFeed=function(V){var U=this,S=U.__vars.root,T=S.__vars,Y=(S.__vars._config&&S.__vars._config.feeds)?true:false;if(!Y||typeof V!=="string"){return false;}var X=function(a){if(!S.__vars._config.feeds[a]){return false;}S.__vars._config.feeds[a]=null;S.__vars._initExe[a]=null;S.__vars._callStack[a]=null;S.__vars._refreshObj[a]=null;try{delete S.__vars._config.feeds[a];delete S.__vars._initExe[a];delete S.__vars._callStack[a];delete S.__vars._refreshObj[a];}catch(Z){}T._fn.log(O.logName+" Notice: Feed removed for {type}: '"+a+"'");};V=(A(V)).replace(/\s+/g," ");var R=[],W=V.split(" ");};Q.prototype.onLoad=function(){var U=this,S=U.__vars.root,T=S.__vars,R=(T._config&&T._config.feeds)?T._config.feeds:{},V=C(arguments);if(!V.type||!V.callback||!R[V.type]){return false;}var W=V.type,X=V.callback;if(!T._callStack[W]){T._callStack[W]=[];}T._callStack[W].push(X);if(T._initExe[W]){X(T._data[W]);}};Q.prototype.getData=function(){var a=this,W=a.__vars.root,Y=W.__vars,b=(Y._config&&Y._config.feeds)?Y._config.feeds:{},T=C(arguments);if(!T.type||!T.callback){return false;}var U=T.type,Z=T.callback;var X=0,V=20,R;var S=function(){if(typeof Y._data[U]!=="undefined"){Z(Y._data[U]);}else{if(X<=V){clearTimeout(R);R=setTimeout(function(){S();},250);X++;}}};S();};return Q;}());var B=function(Q,S,T){var R=(!isNaN(T.refresh)&&parseFloat(T.refresh)>=O.minRefreshRate)?(T.refresh).toFixed(2):false;if(!R){H(O.logName+" Warning: Cannot set refresh for {type}: '"+S+"' refresh rate less than minimum rate allowed.");return false;}R=R*60000;clearInterval(Q.__vars._refreshObj[S]);Q.__vars._refreshObj[S]=setInterval(function(){if(Q.event&&typeof Q.event.reload==="function"){Q.event.reload(S);}else{H(O.logName+" Warning: Cannot find event.reload(). Reload for {type}: '"+S+"' not fired.");}},R);};var P=function(T,V){var a=T._config.feeds,R=a[V]||false;if(!R){return false;}var Q=(function(){var b=false;if(typeof R==="string"){b=R;}else{if(R.url){b=R.url;}}return b;}());if(!Q){H(O.logName+" URL not defined for feed {type}: '"+V+"'");return false;}var X=(function(){var b="json",c=E(Q);if(typeof R.jsonpCallback==="string"||c){b="jsonp";}else{if(R.type&&F(R.type)){b=R.type;}}b=b.toLowerCase();return b;}());var Y={};switch(X){case"json":Y={dataType:"json",cache:true,async:true,success:function(b){W(b);}};break;case"jsonp":var U=E(Q),Z=L(V,((typeof R.jsonpCallback==="string")?R.jsonpCallback:false),U);window[Z.name]=function(b){W(b);};Y={dataType:"script",async:true,cache:true};if(!U){Y.data={};Y.data[Z.param]=Z.name;}break;case"xml":break;case"script":break;case"text":break;}Y.url=Q;(function(){var b=(T._config.cacheTime&&!isNaN(T._config.cacheTime))?parseFloat(T._config.cacheTime):false;if(b){if(!Y.data){Y.data={};}Y.data.cb=D(b);}}());if(X!=="jsonp"&&T._xhr[V]){try{if(typeof T._xhr[V].abort==="function"){T._xhr[V].abort();}}catch(S){}}T._xhr[V]=I.ajax(Y);function W(c){var b=N(R.normalize,a),d=(b)?b(c):c;T._data[V]=d;if(!T._initExe[V]){T._initExe[V]=true;}J(T._callStack[V],T._data[V]);}};var J=function(R,S){if(!K(R)){return false;}for(var Q=0;Q<R.length;Q++){if(typeof R[Q]==="function"){R[Q](S);}}};var C=function(R){var S=false,Q=false;if(typeof R[0]==="string"){S=R[0];}else{if(typeof R[0]==="object"&&!K(R[0])){S=(R[0].type)?R[0].type:false;}}if(typeof R[1]==="function"){Q=R[1];}var T={type:S,callback:Q};return T;};var N=function(T,Q){var S,R=false;if(typeof T==="function"){R=T;}else{if(typeof T==="string"){for(S in Q){if(T===S&&typeof Q[S].normalize==="function"){R=Q[S].normalize;break;}}}}return R;};var L=function(S,T,R){var Q={param:"callback"};if(T&&T.split("=").length===2){var U=T.split("=");Q.param=U[0];Q.name=U[1];}else{if(T){Q.name=T;}else{if(R){Q.name=R;}else{Q.name="jsonp"+S;}}}return Q;};var F=function(T){var Q,R=false,S=["jsonp","json","xml","html","text","script"];for(Q=0;Q<S.length;Q++){if(S[Q]===T.toLowerCase()){R=true;break;}}};var E=function(T){var R,S=false,V=T.split("?"),U=V[1];if(U){var Q=((U.toLowerCase()).indexOf(O.jsonpParam+"=")>-1)?U.split("&"):[];for(R=0;R<Q.length;R++){var W=Q[R].split("=");if(W[0].toLowerCase()===O.jsonpParam){S=decodeURI(W[1]);break;}}}return S;};var H=function(){var R=true;if(R&&window.console){try{return console.log.apply(console,arguments);}catch(Q){console.log(arguments);}}};var D=function(T){T=T||false;var Q=new Date(),U=Q.getFullYear().toString()+(Q.getMonth()+1).toString()+Q.getDate().toString(),S=Q.getHours()+1,R=Q.getMinutes();U+=S.toString()+((T&&!isNaN(T))?(Math.floor(R/parseFloat(T))).toString():"");return U;};var K=function(Q){Q=Q||false;return Object.prototype.toString.call(Q)==="[object Array]";};var A=function(Q){Q=(Q||"").replace(/^\s+|\s+$/g,"");return Q;};return G;}(jQuery));var CallStackTrigger=(function(){var B=function(){this.__vars={};var C=this.__vars;C._stack={};C._trigger=false;C._data=null;};B.prototype.trigger=function(E,F){var D=this,C=D.__vars;C._trigger=E;C._data=(typeof F!=="undefined")?F:null;if(C._stack[E]){A(D,E);}};B.prototype.bind=function(F,G){var E=this,D=E.__vars,C=D._stack;if(typeof G!=="function"){return false;}if(!C[F]){C[F]=[];}C[F].push(G);if(F===D._trigger){if(D._data===null){G();}else{G(D._data);}}};var A=function(F,G){var E=F.__vars,D=E._stack,H=E._data;if(D[G]){var C=D[G];for(x=0;x<C.length;x++){if(typeof C[x]==="function"){C[x](H);}}}};return B;}());window.FOX_MediaIconOverlay=(function($){var CONST={classType:{"video-ct":{type:"video",image:"/static/v/all/img/vd-overlay_${dim}.png"},"slideshow-ct":{type:"slideshow",image:"/static/v/all/img/ss-overlay_${dim}.png"},"interactive-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"freeform-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"magnify-ct":{type:"magnify",image:"/static/v/all/img/mg-overlay_${dim}.png"},"listpage-ct":{type:"listpage",image:"/static/v/all/img/lp-overlay_${dim}.png"}}};var App=function(){};App.prototype.set=function(obj){var self=this;if(!obj){return false;}obj.type=(function(type){var ret=false;ret=self.getMediaType(obj.elm);return(ret)?ret:type;}(obj.type||false));if(!obj.type){return false;}obj.elm.find("span.type").hide();obj.container=obj.elm;obj.elm=obj.elm.find(".m");var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});};App.prototype.getMediaType=function(elm){var i,ret=false,type=CONST.classType;for(i in type){if(elm.hasClass(i)){ret=type[i].type;break;}}return ret;};var setAbsImg=function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;};var setOverlay=function(obj){var elm=obj.elm,path="",ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",edge=obj.edge||[0.03,0.05],size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false,type=obj.type||"video",hoverElm=obj.hoverElm||false;for(var i in CONST.classType){if(CONST.classType[i].type===type){path=CONST.classType[i].image;break;}}elm.find(".media-overlay").remove();var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=edge[0],edgeH=edge[1];edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&setAbsImg(imgW)){imgW=setAbsImg(imgW);imgH=imgW;absDim=imgW;}var overlaySrc=(function(){var dim,ret="http://global.fncstatic.com"+path;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?dim:"";return ret.replace("${dim}",dim);}());var hoverImg=new Image();hoverImg.src=overlaySrc;css.width=px(imgW);css.minHeight=px(imgH);css.background='url("'+overlaySrc+'") no-repeat 0px 0px';var overlay=$('<div class="media-overlay" style="position:absolute;"></div>'),titleLink=elm.parent().find("> h3:first");overlay.css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false;parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".media-overlay");function hoverOver(over){if(over&&!isHover){isHover=true;overlayElm.css("background-position","0px "+px("-"+imgH));}else{if(isHover){isHover=false;overlayElm.css("background-position","0px 0px");}}}if(parent.parent().find("> .credit").size()>0){overlayElm.css({bottom:"21px"});}if(hoverElm){hoverElm.hover(function(){hoverOver(true);},function(){hoverOver();});}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});};var mFloor=function(val){var ret=Math.floor(val);return ret;};var px=function(val){var ret=val+"px";return ret;};return(new App());}(jQuery));window.OutbrainWidgetConnector=(function(){var A={OBVar:"OB_elements",src:"http://widgets.outbrain.com/outbrain.js",legacySrc:"http://widgets.outbrain.com/outbrainWidget.js"};var D=function(F){if(!F){return false;}this.addWidget(F);};D.prototype.addWidget=function(I,J){var F,G=this;if(!I){return false;}if(!window[A.OBVar]){window[A.OBVar]=[];}var H=C(I);for(F=0;F<H.length;F++){window[A.OBVar].push(H[F]);}E(J);};D.prototype.refreshWidgets=function(F){if(!window.OBR){return ;}F=F||window.location.href;try{OBR.extern.refreshWidget(F);}catch(G){}};D.prototype.addWidgetLegacy=function(F,G){F=(B(F))?F[0]:F;window.OB_permalink=F.permalink;window.OB_widgetId=F.widgetId;window.OB_Template=F.Template;window.OB_langJS=F.langJS;window.OB_isLateStarter=true;E(G,true);};var E=function(J,F){J=(typeof J==="function")?J:function(){};if(window.OB_Script&&window.OutbrainStart){try{window.OutbrainStart();J();}catch(I){log("[Outbrain.Connector] Error: "+I);}}else{var H=document.getElementsByTagName("script")[0],G=document.createElement("script");G.type="text/javascript";G.onreadystatechange=G.onload=function(){window.OB_Script=true;J();};G.async=true;G.src=(F)?A.legacySrc:A.src;H.parentNode.insertBefore(G,H);}};var C=function(F){if(F&&!B(F)){F=[F];}return F;};var B=function(F){F=F||false;return Object.prototype.toString.call(F)==="[object Array]";};return D;}());var DateTime=(function(){var A=function(C,F){F=F||null;var E;var D={month:C.getUTCMonth(),day:C.getDay(),year:C.getFullYear(),date:C.getDate(),hour:C.getHours(),minutes:C.getMinutes(),seconds:C.getSeconds(),ampm:((C.getHours()<12)?"am":"pm"),fullStr:C.toString()};var K=function(N){N=N||"";N=N.toString();if(N.length<1){return N;}var L="",M=parseInt(N.charAt(N.length-1),10);switch(M){case 1:L="st";break;case 2:L="nd";break;case 3:L="rd";break;default:L="th";break;}return(N+L);};var I=function(O,M){M=M||"full";var N=["January","February","March","April","May","June","July","August","September","October","November","December"],L=N[O]||"";if(M==="short"){L=L.slice(0,3);}return L;};var G=function(L){L=(!isNaN(L))?L:"";return L.toString();};var H=function(O,N){N=N||"full";var L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=L[O];if(N==="short"){M=M.slice(0,3);}return M;};var B={"${mm}":(D.month+1),"${month}":I(D.month),"${month:short}":I(D.month,"short"),"${day}":H(D.day),"${day:short}":H(D.day,"short"),"${yr}":D.year,"${yr:short}":G(D.year).substr(2),"${dd}":((D.date<10)?("0"+G(D.date)):G(D.date)),"${ddTH}":K(D.date),"${hr}":((D.hour>12)?D.hour-12:D.hour),"${hr:mil}":((D.hour<10)?("0"+G(D.hour)):G(D.hour)),"${min}":((D.minutes<10)?("0"+G(D.minutes)):G(D.minutes)),"${sec}":((D.seconds<10)?("0"+G(D.seconds)):G(D.seconds)),"${ampm}":D.ampm,"${AMPM}":(D.ampm).toUpperCase(),"${AmPm}":((D.ampm).charAt(0)).toUpperCase()+(D.ampm).charAt(1)};for(E in B){var J=F.indexOf(E);while(J!==-1){F=F.replace(E,B[E]);J=F.indexOf(E);}}return F;};return A;}());window.WatchNow=(function(H){var M={feeds:{FN:{"sched-tool":"http://www.foxnews.com/feeds/schedule/channel/foxnewscom-live/feed/json",playlist:"http://video.foxnews.com/v/feed/playlist/1621774019001.js?template=fox"},FB:{"sched-tool":"http://www.foxbusiness.com/feeds/watch/show-schedule/feed/json/",playlist:"http://video.foxbusiness.com/v/feed/playlist/87187.js?template=fox"}},imageDimension:[132,74]};var C=function(P){if(!window.MultiFeedParser||!window.AKAMAI_TIME_HELPER){return false;}var O=this;O.__vars={};var N=O.__vars;N.data={};P=(typeof P==="object"&&!H.isArray(P))?P:{};N._config=P;var S=M.feeds.FN;if(P.site==="foxbusiness"){S=M.feeds.FB;}var Q=false;if(P.refresh&&!isNaN(P.refresh)){Q=parseInt(P.refresh,10);}var R={};R.feeds={};R.logging=true;R.initOnLoad=true;if(Q){R.cacheTime=Q;}R.feeds.playlist={url:S.playlist,jsonpCallback:"FOX_WatchNowPlaylist",normalize:function(U){var T=U;if(U){T=B(P,U);}return T;}};R.feeds["sched-tool"]={url:S["sched-tool"],jsonpCallback:"FOX_WatchNowSchedTool",normalize:function(V){var T=V,U=(P.fullSchedule)?true:false;if(V){T=I(P,V,U);}return T;}};N._parser=new MultiFeedParser(R);};C.prototype.getData=function(N){var P=this,O=P.__vars;if(typeof N!=="function"){return false;}O._parser.event.onLoad("sched-tool",function(Q){O.data["sched-tool"]=Q;O._parser.event.getData("playlist",function(R){O.data.playlist=R;var S=A(Q,R);N(S);});});};C.prototype.getScheduleFeed=function(N){var P=this,O=P.__vars;if(typeof N!=="function"){return false;}O._parser.event.onLoad("sched-tool",function(Q){O.data["sched-tool"]=Q;N(Q);});};C.prototype.getPlaylistFeed=function(N){var P=this,O=P.__vars;if(typeof N!=="function"){return false;}O._parser.event.onLoad("playlist",function(Q){O.data.playlist=Q;N(Q);});};var A=function(Q,S){var P=999,O=(S.length>P)?P:S.length,N=[];if(Q){O--;N.push(Q);}var R=0,T=[];while(R<S.length){if(S[R]&&S[R].isLive){T.push(S[R]);S.splice(R,1);}else{R+=1;}}S.reverse();T.reverse();S=S.concat(T);S.reverse();for(x=0;x<O;x+=1){N.push(S[x]);}return N;};var B=function(O,P){var N=(P&&P.channel&&P.channel.item)?P.channel.item:false;if(!N){return false;}N=((!H.isArray(N))?[N]:N);var U,R=[],S=N.length,Q=(O.imageDimension)?O.imageDimension:M.imageDimension;var T=function(Y){var W=false;if(Y){Y=(!H.isArray(Y))?[Y]:Y;for(var X=0;X<Y.length;X+=1){if(Y[X].indexOf("live_stream")>-1){W=true;break;}}}return W;};var V=function(X){var W=J(X["media-group"]["media-thumbnail"]["@attributes"].url,Q);var Y={isLive:T(X.category),title:X.title,link:X.link,guid:X.guid,img:W,raw:X};return Y;};for(U=0;U<S;U+=1){R.push(V(N[U]));}return R;};var I=function(O,Q,T){var Y,U,S=[],P=[],X=false,V=Q.day,Z=window.AKAMAI_TIME_HELPER.getCurrent();var W=function(c,a,b){b=b||false;P.push({current:b,show:c,index:a});};var R=function(c){var d,b=c.show||[];b=(H.isArray(b))?b:[b];for(d=0;d<b.length;d+=1){var a=b[d];a.start=G(a.start);a.end=G(a.end);a.description=(typeof a.description!=="string")?"":H(a.description).text();a.showImg=(function(i,h){i=(typeof i==="string")?H.trim(i):"";var g="http://global.fncstatic.com/static/v/all/img/clear.gif",j=(O.imageDimension)?O.imageDimension:M.imageDimension;if(h){g=L(h,j);}else{if(i.length>0){var e="http://global.fncstatic.com";if(O.imagePattern){var f=O.imagePattern;f=f.replace("${machineTitle}",i);e+=f;}else{e+="/static/p/live.foxnews.com/img/schedule/144x81-live-"+i+".jpg";}g=L(e,j);}}return g;}(a["machine-title"],a.image));S.push(a);a.start_early=new Date(a.start.getTime()-(60000*5));if(!X&&a.start_early<=Z&&a.end>=Z){P=[];W(a,(S.length-1),true);X=true;}else{if(P.length<3&&X){W(a,(S.length-1));}else{if(P.length<3&&a.start>=Z){W(a,(S.length-1));}}}}};for(Y=0;Y<V.length;Y+=1){R(V[Y]);}U={latest:P,normalized:S,raw:Q};var N={},P=(U&&U.latest[0]&&U.latest[0].current)?U.latest[0].show:false;if(P){N={title:P.title,img:P.showImg,isLive:true,link:P.link,guid:P["machine-title"],webShow:true,raw:P,rawDump:U};U=N;}else{if(T){N={rawDump:U};U=N;}else{U=P;}}return U;};var J=function(Q,S){if(!S){return Q;}var P=Q.split("/"),O=P.length,R=P[O-3],N=P[O-2];P[O-3]=(!isNaN(R))?S[0]:R;P[O-2]=(!isNaN(N))?S[1]:N;return P.join("/");};var L=function(Q,R){if(!R){return Q;}var T="http://a57.foxnews.com/",S=Q.replace("http://",""),O=S.split("/"),N=O.length;O[N-1]=R.join("/")+"/"+O[N-1];var P=T+O.join("/");return P;};var D=function(R,N){R=new Date(R);N=new Date(N);var Q=[],P=DateTime(R,"${hr}:${min}"),O=DateTime(N,"${hr}:${min} ${ampm}");Q=[P,O].join(" - ");return Q;};var G=function(R){var O,P=R.split("T"),N=P[0],Q=P[1].split("-")[0];N=N.split("-");N=[N[1],N[2],N[0]].join("/");O=new Date([N,Q].join(" "));return O;};var F=function(R){R=new Date(R);if(Object.prototype.toString.call(R)==="[object Date]"&&!isNaN(R.getTime())){var N=R.getDay(),P=R.getHours(),O=R.getMinutes(),Q=(P*100)+O;return(N===3&&Q>=1500&&Q<=1930)?true:false;}else{return false;}};var K=function(S){S=new Date(S);var O=false;if(Object.prototype.toString.call(S)==="[object Date]"&&!isNaN(S.getTime())){var N=S.getDay(),Q=S.getHours(),P=S.getMinutes(),R=(Q*100)+P;if(N>=1&&N<=5&&R>=2000&&R<=2359){O=true;}else{if(N>=2&&N<=6&&R===0){O=true;}}}else{O=false;}return O;};var E=function(N){if(typeof window.console==="object"&&console.log){console.log(N);}};return C;}(jQuery));window.HashListener=(function(D){var A={timer:500};var C=function(){this.__vars={};var F=this.__vars;F._callStack=[];F._stackReady=true;F._hashData={curr:false,stored:false};this.event=new B(this);E(this,function(I){if(F._callStack.length<1){return false;}if(F._stackReady){F._stackReady=false;var H={str:I.curr};for(var G=0;G<F._callStack.length;G++){F._callStack[G](H);}F._stackReady=true;}});};C.prototype.getValue=function(){var G=this,F=G.__vars;return F._hashData.curr;};var B=(function(){var F=function(G){this.__vars={};var H=this.__vars;H.root=G;};F.prototype.onChange=function(I){var H=this,G=H.__vars.root;if(typeof I!=="function"){return false;}G.__vars._callStack.push(I);};return F;}());var E=function(J,L){var G,K=A.timer,F=J.__vars,I=F._hashData;var H=function(){I.curr=window.location.hash;if(typeof I.stored!=="string"&&I.curr.length>0){I.stored=I.curr;L(I);}else{if(I.curr!==I.stored&&F._stackReady){I.stored=I.curr;L(I);}}};H();setInterval(function(){H();},K);};return C;}(jQuery));window.Akamai_ExtCallbackHandler=(function(D){var A={callbackName:"jsCallbackHandler"};var C=function(){this.__vars={};var F=this,E=F.__vars;E._callStack={};if(window.AEP&&typeof window.AEP[A.callbackName]==="function"){var G=window.AEP[A.callbackName];window.AEP[A.callbackName]=function(){B(F,arguments);G.apply(this,arguments);};}else{if(window.AEP){window.AEP[A.callbackName]=function(){B(F,arguments);};}else{window.AEP={};window.AEP[A.callbackName]=function(){B(F,arguments);};}}};C.prototype.onEvent=function(G,H){var F=this,E=F.__vars;if(!E._callStack[G]){E._callStack[G]=[];}E._callStack[G].push(H);};var B=function(J,K){var G,I=J.__vars,L=K[0],H=K[1],F=K[2];if(H&&I._callStack[H]){var E=I._callStack[H];for(G=0;G<E.length;G++){E[G]({id:L,eventName:H,body:F,raw:K});}}};return C;}(jQuery));
/*Tue Feb 05 17:34:04 EST 2013*/
