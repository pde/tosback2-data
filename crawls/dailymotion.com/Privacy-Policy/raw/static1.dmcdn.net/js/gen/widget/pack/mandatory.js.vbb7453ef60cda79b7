var DM_Hash={};DM_Hash["widget/pack/extras.js"]="95b1aa6d62b65e0b";DM_Hash["widget/pack/popup.js"]="b064a998205dd827";DM_Hash["widget/pageitem/video/charts.js"]="e29a09645791c1f4";DM_Hash["views/shared/video/charts.js"]="401d10742a7e01e2";DM_Hash["widget/pageitem/video/embedcode.js"]="ddaafb93d15e09b4";DM_Hash["widget/groupandcontestfeaturing.js"]="730db63e8ecb3160";DM_Hash["lib/protofarbastic/protofarbtastic.js"]="192d68f1130ac11a";DM_Hash["widget/pack/scrollbar.js"]="50f3fcc12f0050fb";DM_Hash["lib/essential_extension.js"]="a30a54becdf926fd";DM_Hash["lib/feature_promotion.js"]="108c0dfa3dae7278";DM_Hash["lib/player_light_and_expander.js"]="59ec13bff85c90a7";DM_Hash["lib/sockjs.js"]="58a7890111ad15b1";DM_Hash["lib/audience-meter.js"]="8506c2ae66fe6c5b";DM_Hash["lib/search_videos.js"]="213204569a00f92c";DM_Hash["lib/masscast/buzzpackplayer.js"]="41fa0c1cb5e7ed8d";DM_Hash["lib/masscast/masthead.js"]="6d1d51ad4582ecb8";(function(e){var f={},d=function(){};d.prototype={subscribe:function(a,b,g){(f[a]=f[a]||[]).push([g||e,b])},unsubscribe:function(a,b){for(var j=(f[a]||[]).length,h=j-1;h>=0;h--){if(b===f[a][h][1]){f[a].splice(h,1)}}},publish:function(a){for(var b=0,g=(f[a]||[]).length;b<g;b++){f[a][b][1].apply(f[a][b][0],Array.prototype.slice.call(arguments,1))}}};e.PubSub=e.PubSub||new d()})(window);(function(f){var h=[],j={},g=function(){},k=function(){try{console.log.apply(console,arguments)}catch(a){try{opera.postError.apply(opera,arguments)}catch(a){alert(Array.prototype.join.call(arguments," "))}}};g.prototype={show:function(a){for(var b=0,d=h.length;b<d;b++){if(!a){k.apply(f,h[b]);continue}if(a&&h[b][1]==a){k.apply(f,h[b])}}},setDebug:function(b,a){j[a||"---"]=b},log:function(b){var e=b,d=1;if(arguments.length<=1){e=arguments.length<=1?"---":b;d=0}var a=[new Date(),e].concat(Array.prototype.slice.call(arguments,d));if(j[e]||j["---"]){k.apply(f,a)}return h.push(a)}};if(f.log){return}dmlog=new g();f.log=dmlog.log;f.showlog=dmlog.show;f.debuglog=dmlog.setDebug})(window);var Prototype={Version:"1.7",Browser:(function(){var d=navigator.userAgent;var e=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!e,Opera:e,WebKit:d.indexOf("AppleWebKit/")>-1,Gecko:d.indexOf("Gecko")>-1&&d.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile/.test(d)}})(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:(function(){var b=window.Element||window.HTMLElement;return !!(b&&b.prototype)})(),SpecificElementExtensions:(function(){if(typeof window.HTMLDivElement!=="undefined"){return true}var f=document.createElement("div"),d=document.createElement("form"),e=false;if(f.__proto__&&(f.__proto__!==d.__proto__)){e=true}f=d=null;return e})()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(b){return b}};if(Prototype.Browser.MobileSafari){Prototype.BrowserFeatures.SpecificElementExtensions=false}var Abstract={};var Try={these:function(){var k;for(var e=0,j=arguments.length;e<j;e++){var g=arguments[e];try{k=g();break}catch(h){}}return k}};var Class=(function(){var g=(function(){for(var a in {toString:1}){if(a==="toString"){return false}}return true})();function f(){}function e(){var b=null,d=$A(arguments);if(Object.isFunction(d[0])){b=d.shift()}function l(){this.initialize.apply(this,arguments)}Object.extend(l,Class.Methods);l.superclass=b;l.subclasses=[];if(b){f.prototype=b.prototype;l.prototype=new f;b.subclasses.push(l)}for(var k=0,a=d.length;k<a;k++){l.addMethods(d[k])}if(!l.prototype.initialize){l.prototype.initialize=Prototype.emptyFunction}l.prototype.constructor=l;return l}function h(b){var p=this.superclass&&this.superclass.prototype,q=Object.keys(b);if(g){if(b.toString!=Object.prototype.toString){q.push("toString")}if(b.valueOf!=Object.prototype.valueOf){q.push("valueOf")}}for(var r=0,o=q.length;r<o;r++){var d=q[r],n=b[d];if(p&&Object.isFunction(n)&&n.argumentNames()[0]=="$super"){var a=n;n=(function(j){return function(){return p[j].apply(this,arguments)}})(d).wrap(a);n.valueOf=a.valueOf.bind(a);n.toString=a.toString.bind(a)}this.prototype[d]=n}return this}return{create:e,Methods:{addMethods:h}}})();(function(){var W=Object.prototype.toString,Y="Null",ab="Undefined",O="Boolean",ak="Number",U="String",M="Object",S="[object Function]",J="[object Boolean]",aj="[object Number]",ae="[object String]",ai="[object Array]",K="[object Date]",ah=window.JSON&&typeof JSON.stringify==="function"&&JSON.stringify(0)==="0"&&typeof JSON.stringify(Prototype.K)==="undefined";function af(a){switch(a){case null:return Y;case (void 0):return ab}var b=typeof a;switch(b){case"boolean":return O;case"number":return ak;case"string":return U}return M}function I(d,a){for(var b in a){d[b]=a[b]}return d}function N(b){try{if(an(b)){return"undefined"}if(b===null){return"null"}return b.inspect?b.inspect():String(b)}catch(a){if(a instanceof RangeError){return"..."}throw a}}function T(a){return Q("",{"":a},[])}function Q(b,f,e){var d=f[b],g=typeof d;if(af(d)===M&&typeof d.toJSON==="function"){d=d.toJSON(b)}var k=W.call(d);switch(k){case aj:case J:case ae:d=d.valueOf()}switch(d){case null:return"null";case true:return"true";case false:return"false"}g=typeof d;switch(g){case"string":return d.inspect(true);case"number":return isFinite(d)?String(d):"null";case"object":for(var l=0,m=e.length;l<m;l++){if(e[l]===d){throw new TypeError()}}e.push(d);var h=[];if(k===ai){for(var l=0,m=d.length;l<m;l++){var j=Q(l,d,e);h.push(typeof j==="undefined"?"null":j)}h="["+h.join(",")+"]"}else{var a=Object.keys(d);for(var l=0,m=a.length;l<m;l++){var b=a[l],j=Q(b,d,e);if(typeof j!=="undefined"){h.push(b.inspect(true)+":"+j)}}h="{"+h.join(",")+"}"}e.pop();return h}}function L(a){return JSON.stringify(a)}function ag(a){return $H(a).toQueryString()}function aa(a){return a&&a.toHTML?a.toHTML():String.interpret(a)}function V(d){if(af(d)!==M){throw new TypeError()}var b=[];for(var a in d){if(d.hasOwnProperty(a)){b.push(a)}}return b}function am(d){var b=[];for(var a in d){b.push(d[a])}return b}function Z(a){return I({},a)}function P(a){return !!(a&&a.nodeType==1)}function ad(a){return W.call(a)===ai}var ao=(typeof Array.isArray=="function")&&Array.isArray([])&&!Array.isArray({});if(ao){ad=Array.isArray}function al(a){return a instanceof Hash}function ap(a){return W.call(a)===S}function ac(a){return W.call(a)===ae}function X(a){return W.call(a)===aj}function R(a){return W.call(a)===K}function an(a){return typeof a==="undefined"}I(Object,{extend:I,inspect:N,toJSON:ah?L:T,toQueryString:ag,toHTML:aa,keys:Object.keys||V,values:am,clone:Z,isElement:P,isArray:ad,isHash:al,isFunction:ap,isString:ac,isNumber:X,isDate:R,isUndefined:an})})();Object.extend(Function.prototype,(function(){var l=Array.prototype.slice;function s(d,b){var e=d.length,a=b.length;while(a--){d[e+a]=b[a]}return d}function n(a,b){a=l.call(a,0);return s(a,b)}function p(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return a.length==1&&!a[0]?[]:a}function o(d){if(arguments.length<2&&Object.isUndefined(arguments[0])){return this}var b=this,a=l.call(arguments,1);return function(){var e=n(a,arguments);return b.apply(d,e)}}function q(d){var b=this,a=l.call(arguments,1);return function(e){var f=s([e||window.event],a);return b.apply(d,f)}}function m(){if(!arguments.length){return this}var b=this,a=l.call(arguments,0);return function(){var d=n(a,arguments);return b.apply(this,d)}}function r(d){var b=this,a=l.call(arguments,1);d=d*1000;return window.setTimeout(function(){return b.apply(b,a)},d)}function v(){var a=s([0.01],arguments);return this.delay.apply(this,a)}function t(a){var b=this;return function(){var d=s([b.bind(this)],arguments);return a.apply(this,d)}}function u(){if(this._methodized){return this._methodized}var a=this;return this._methodized=function(){var b=s([this],arguments);return a.apply(null,b)}}return{argumentNames:p,bind:o,bindAsEventListener:q,curry:m,delay:r,defer:v,wrap:t,methodize:u}})());(function(f){function d(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function e(){return this.toISOString()}if(!f.toISOString){f.toISOString=d}if(!f.toJSON){f.toJSON=e}})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;RegExp.escape=function(b){return String(b).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(d,e){this.callback=d;this.frequency=e;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},execute:function(){this.callback(this)},stop:function(){if(!this.timer){return}clearInterval(this.timer);this.timer=null},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.execute();this.currentlyExecuting=false}catch(b){this.currentlyExecuting=false;throw b}}}});Object.extend(String,{interpret:function(b){return b==null?"":String(b)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});Object.extend(String.prototype,(function(){var NATIVE_JSON_PARSE_SUPPORT=window.JSON&&typeof JSON.parse==="function"&&JSON.parse('{"test": true}').test;function prepareReplacement(replacement){if(Object.isFunction(replacement)){return replacement}var template=new Template(replacement);return function(match){return template.evaluate(match)}}function gsub(pattern,replacement){var result="",source=this,match;replacement=prepareReplacement(replacement);if(Object.isString(pattern)){pattern=RegExp.escape(pattern)}if(!(pattern.length||pattern.source)){replacement=replacement("");return replacement+source.split("").join(replacement)+replacement}while(source.length>0){if(match=source.match(pattern)){result+=source.slice(0,match.index);result+=String.interpret(replacement(match));source=source.slice(match.index+match[0].length)}else{result+=source,source=""}}return result}function sub(pattern,replacement,count){replacement=prepareReplacement(replacement);count=Object.isUndefined(count)?1:count;return this.gsub(pattern,function(match){if(--count<0){return match[0]}return replacement(match)})}function scan(pattern,iterator){this.gsub(pattern,iterator);return String(this)}function truncate(length,truncation){length=length||30;truncation=Object.isUndefined(truncation)?"...":truncation;return this.length>length?this.slice(0,length-truncation.length)+truncation:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var matchAll=new RegExp(Prototype.ScriptFragment,"img"),matchOne=new RegExp(Prototype.ScriptFragment,"im");return(this.match(matchAll)||[]).map(function(scriptTag){return(scriptTag.match(matchOne)||["",""])[1]})}function evalScripts(){return this.extractScripts().map(function(script){return eval(script)})}function escapeHTML(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function toQueryParams(separator){var match=this.strip().match(/([^?#]*)(#.*)?$/);if(!match){return{}}return match[1].split(separator||"&").inject({},function(hash,pair){if((pair=pair.split("="))[0]){var key=decodeURIComponent(pair.shift()),value=pair.length>1?pair.join("="):pair[0];if(value!=undefined){value=decodeURIComponent(value)}if(key in hash){if(!Object.isArray(hash[key])){hash[key]=[hash[key]]}hash[key].push(value)}else{hash[key]=value}}return hash})}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(count){return count<1?"":new Array(count+1).join(this)}function camelize(){return this.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(useDoubleQuotes){var escapedString=this.replace(/[\x00-\x1f\\]/g,function(character){if(character in String.specialChar){return String.specialChar[character]}return"\\u00"+character.charCodeAt().toPaddedString(2,16)});if(useDoubleQuotes){return'"'+escapedString.replace(/"/g,'\\"')+'"'}return"'"+escapedString.replace(/'/g,"\\'")+"'"}function unfilterJSON(filter){return this.replace(filter||Prototype.JSONFilter,"$1")}function isJSON(){var str=this;if(str.blank()){return false}str=str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");str=str.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");str=str.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return(/^[\],:{}\s]*$/).test(str)}function evalJSON(sanitize){var json=this.unfilterJSON(),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(cx.test(json)){json=json.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}try{if(!sanitize||json.isJSON()){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function parseJSON(){var json=this.unfilterJSON();return JSON.parse(json)}function include(pattern){return this.indexOf(pattern)>-1}function startsWith(pattern){return this.lastIndexOf(pattern,0)===0}function endsWith(pattern){var d=this.length-pattern.length;return d>=0&&this.indexOf(pattern,d)===d}function empty(){return this==""}function blank(){return/^\s*$/.test(this)}function interpolate(object,pattern){return new Template(this,pattern).evaluate(object)}return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim||strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,underscore:underscore,dasherize:dasherize,inspect:inspect,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:NATIVE_JSON_PARSE_SUPPORT?parseJSON:evalJSON,include:include,startsWith:startsWith,endsWith:endsWith,empty:empty,blank:blank,interpolate:interpolate}})());var Template=Class.create({initialize:function(e,d){this.template=e.toString();this.pattern=d||Template.Pattern},evaluate:function(b){if(b&&Object.isFunction(b.toTemplateReplacements)){b=b.toTemplateReplacements()}return this.template.gsub(this.pattern,function(l){if(b==null){return(l[1]+"")}var j=l[1]||"";if(j=="\\"){return l[2]}var a=b,h=l[3],k=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;l=k.exec(h);if(l==null){return j}while(l!=null){var m=l[1].startsWith("[")?l[2].replace(/\\\\]/g,"]"):l[1];a=a[m];if(null==a||""==l[3]){break}h=h.substring("["==l[3]?l[1].length:l[0].length);l=k.exec(h)}return j+String.interpret(a)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={};var Enumerable=(function(){function P(e,a){var b=0;try{this._each(function(f){e.call(a,f,b++)})}catch(d){if(d!=$break){throw d}}return this}function A(e,g,b){var d=-e,a=[],f=this.toArray();if(e<1){return f}while((d+=e)<f.length){a.push(f.slice(d,d+e))}return a.collect(g,b)}function Q(d,a){d=d||Prototype.K;var b=true;this.each(function(e,f){b=b&&!!d.call(a,e,f);if(!b){throw $break}});return b}function J(d,a){d=d||Prototype.K;var b=false;this.each(function(e,f){if(b=!!d.call(a,e,f)){throw $break}});return b}function I(d,a){d=d||Prototype.K;var b=[];this.each(function(e,f){b.push(d.call(a,e,f))});return b}function y(d,a){var b;this.each(function(e,f){if(d.call(a,e,f)){b=e;throw $break}});return b}function K(d,a){var b=[];this.each(function(e,f){if(d.call(a,e,f)){b.push(e)}});return b}function L(d,e,a){e=e||Prototype.K;var b=[];if(Object.isString(d)){d=new RegExp(RegExp.escape(d))}this.each(function(g,f){if(d.match(g)){b.push(e.call(a,g,f))}});return b}function R(b){if(Object.isFunction(this.indexOf)){if(this.indexOf(b)!=-1){return true}}var a=false;this.each(function(d){if(d==b){a=true;throw $break}});return a}function B(a,b){b=Object.isUndefined(b)?null:b;return this.eachSlice(a,function(d){while(d.length<a){d.push(b)}return d})}function G(b,d,a){this.each(function(e,f){b=d.call(a,b,e,f)});return b}function w(a){var b=$A(arguments).slice(1);return this.map(function(d){return d[a].apply(d,b)})}function C(d,a){d=d||Prototype.K;var b;this.each(function(e,f){e=d.call(a,e,f);if(b==null||e>=b){b=e}});return b}function E(d,a){d=d||Prototype.K;var b;this.each(function(e,f){e=d.call(a,e,f);if(b==null||e<b){b=e}});return b}function N(d,a){d=d||Prototype.K;var e=[],b=[];this.each(function(g,f){(d.call(a,g,f)?e:b).push(g)});return[e,b]}function M(a){var b=[];this.each(function(d){b.push(d[a])});return b}function O(d,a){var b=[];this.each(function(e,f){if(!d.call(a,e,f)){b.push(e)}});return b}function F(a,b){return this.map(function(d,e){return{value:d,criteria:a.call(b,d,e)}}).sort(function(g,d){var e=g.criteria,f=d.criteria;return e<f?-1:e>f?1:0}).pluck("value")}function D(){return this.map()}function z(){var a=Prototype.K,b=$A(arguments);if(Object.isFunction(b.last())){a=b.pop()}var d=[this].concat(b).map($A);return this.map(function(e,f){return a(d.pluck(f))})}function H(){return this.toArray().length}function x(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:P,eachSlice:A,all:Q,every:Q,any:J,some:J,collect:I,map:I,detect:y,findAll:K,select:K,filter:K,grep:L,include:R,member:R,inGroupsOf:B,inject:G,invoke:w,max:C,min:E,partition:N,pluck:M,reject:O,sortBy:F,toArray:D,entries:D,zip:z,size:H,inspect:x,find:y}})();function $A(f){if(!f){return[]}if("toArray" in Object(f)){return f.toArray()}var d=f.length||0,e=new Array(d);while(d--){e[d]=f[d]}return e}function $w(b){if(!Object.isString(b)){return[]}b=b.strip();return b?b.split(/\s+/):[]}Array.from=$A;(function(){var w=Array.prototype,B=w.slice,z=w.forEach;function M(b,d){for(var e=0,a=this.length>>>0;e<a;e++){if(e in this){b.call(d,this[e],e,this)}}}if(!z){z=M}function C(){this.length=0;return this}function K(){return this[0]}function H(){return this[this.length-1]}function F(){return this.select(function(a){return a!=null})}function u(){return this.inject([],function(a,b){if(Object.isArray(b)){return a.concat(b.flatten())}a.push(b);return a})}function G(){var a=B.call(arguments,0);return this.select(function(b){return !a.include(b)})}function I(a){return(a===false?this.toArray():this)._reverse()}function D(a){return this.inject([],function(b,d,e){if(0==e||(a?b.last()!=d:!b.include(d))){b.push(d)}return b})}function y(a){return this.uniq().findAll(function(b){return a.detect(function(d){return b===d})})}function x(){return B.call(this,0)}function E(){return this.length}function v(){return"["+this.map(Object.inspect).join(", ")+"]"}function N(a,d){d||(d=0);var b=this.length;if(d<0){d=b+d}for(;d<b;d++){if(this[d]===a){return d}}return -1}function A(b,d){d=isNaN(d)?this.length:(d<0?this.length+d:d)+1;var a=this.slice(0,d).reverse().indexOf(b);return(a<0)?a:d-a-1}function L(){var f=B.call(this,0),a;for(var d=0,b=arguments.length;d<b;d++){a=arguments[d];if(Object.isArray(a)&&!("callee" in a)){for(var e=0,g=a.length;e<g;e++){f.push(a[e])}}else{f.push(a)}}return f}Object.extend(w,Enumerable);if(!w._reverse){w._reverse=w.reverse}Object.extend(w,{_each:z,clear:C,first:K,last:H,compact:F,flatten:u,without:G,reverse:I,uniq:D,intersect:y,clone:x,toArray:x,size:E,inspect:v});var J=(function(){return[].concat(arguments)[0][0]!==1})(1,2);if(J){w.concat=L}if(!w.indexOf){w.indexOf=N}if(!w.lastIndexOf){w.lastIndexOf=A}})();function $H(b){return new Hash(b)}var Hash=Class.create(Enumerable,(function(){function z(a){this._object=Object.isHash(a)?a.toObject():Object.clone(a)}function y(d){for(var e in this._object){var b=this._object[e],a=[e,b];a.key=e;a.value=b;d(a)}}function u(b,a){return this._object[b]=a}function B(a){if(this._object[a]!==Object.prototype[a]){return this._object[a]}}function r(b){var a=this._object[b];delete this._object[b];return a}function p(){return Object.clone(this._object)}function q(){return this.pluck("key")}function s(){return this.pluck("value")}function x(a){var b=this.detect(function(d){return d.value===a});return b&&b.key}function v(a){return this.clone().update(a)}function A(a){return new Hash(a).inject(this,function(d,b){d.set(b.key,b.value);return d})}function C(b,a){if(Object.isUndefined(a)){return b}return b+"="+encodeURIComponent(String.interpret(a))}function D(){return this.inject([],function(e,a){var f=encodeURIComponent(a.key),h=a.value;if(h&&typeof h=="object"){if(Object.isArray(h)){var b=[];for(var g=0,j=h.length,d;g<j;g++){d=h[g];b.push(C(f,d))}return e.concat(b)}}else{e.push(C(f,h))}return e}).join("&")}function t(){return"#<Hash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}>"}function w(){return new Hash(this)}return{initialize:z,_each:y,set:u,get:B,unset:r,toObject:p,toTemplateReplacements:p,keys:q,values:s,index:x,merge:v,update:A,toQueryString:D,inspect:t,toJSON:p,clone:w}})());Hash.from=$H;Object.extend(Number.prototype,(function(){function p(){return this.toPaddedString(2,16)}function j(){return this+1}function l(a,b){$R(0,this,true).each(a,b);return this}function m(a,b){var d=this.toString(b||10);return"0".times(a-d.length)+d}function k(){return Math.abs(this)}function q(){return Math.round(this)}function o(){return Math.ceil(this)}function n(){return Math.floor(this)}return{toColorPart:p,succ:j,times:l,toPaddedString:m,abs:k,round:q,ceil:o,floor:n}})());function $R(f,e,d){return new ObjectRange(f,e,d)}var ObjectRange=Class.create(Enumerable,(function(){function d(a,g,b){this.start=a;this.end=g;this.exclusive=b}function f(b){var a=this.start;while(this.include(a)){b(a);a=a.succ()}}function e(a){if(a<this.start){return false}if(this.exclusive){return a<this.end}return a<=this.end}return{initialize:d,_each:f,include:e}})());var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(b){this.responders._each(b)},register:function(b){if(!this.include(b)){this.responders.push(b)}},unregister:function(b){this.responders=this.responders.without(b)},dispatch:function(g,e,h,f){this.each(function(b){if(Object.isFunction(b[g])){try{b[g].apply(b,[e,h,f])}catch(a){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(b){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,b||{});this.options.method=this.options.method.toLowerCase();if(Object.isHash(this.options.parameters)){this.options.parameters=this.options.parameters.toObject()}}});Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,d,e){$super(e);this.transport=Ajax.getTransport();this.request(d)},request:function(e){this.url=e;this.method=this.options.method;var g=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);if(!["get","post"].include(this.method)){g+=(g?"&":"")+"_method="+this.method;this.method="post"}if(g&&this.method==="get"){this.url+=(this.url.include("?")?"&":"?")+g}this.parameters=g.toQueryParams();try{var f=new Ajax.Response(this);if(this.options.onCreate){this.options.onCreate(f)}Ajax.Responders.dispatch("onCreate",this,f);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){this.respondToReadyState.bind(this).defer(1)}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?(this.options.postBody||g):null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange()}}catch(h){this.dispatchException(h)}},onStateChange:function(){var b=this.transport.readyState;if(b>1&&!((b==4)&&this._complete)){this.respondToReadyState(this.transport.readyState)}},setRequestHeaders:function(){var h={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){h["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){h.Connection="close"}}if(typeof this.options.requestHeaders=="object"){var k=this.options.requestHeaders;if(Object.isFunction(k.push)){for(var f=0,j=k.length;f<j;f+=2){h[k[f]]=k[f+1]}}else{$H(k).each(function(a){h[a.key]=a.value})}}for(var g in h){this.transport.setRequestHeader(g,h[g])}},success:function(){var b=this.getStatus();return !b||(b>=200&&b<300)||b==304},getStatus:function(){try{if(this.transport.status===1223){return 204}return this.transport.status||0}catch(b){return 0}},respondToReadyState:function(g){var k=Ajax.Request.Events[g],e=new Ajax.Response(this);if(k=="Complete"){try{this._complete=true;(this.options["on"+e.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(e,e.headerJSON)}catch(j){this.dispatchException(j)}var h=e.getHeader("Content-type");if(this.options.evalJS=="force"||(this.options.evalJS&&this.isSameOrigin()&&h&&h.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))){this.evalResponse()}}try{(this.options["on"+k]||Prototype.emptyFunction)(e,e.headerJSON);Ajax.Responders.dispatch("on"+k,this,e,e.headerJSON)}catch(j){this.dispatchException(j)}if(k=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction}},isSameOrigin:function(){var b=this.url.match(/^\s*https?:\/\/[^\/]*/);return !b||(b[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""}))},getHeader:function(e){try{return this.transport.getResponseHeader(e)||null}catch(d){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(b){(this.options.onException||Prototype.emptyFunction)(this,b);Ajax.Responders.dispatch("onException",this,b)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Response=Class.create({initialize:function(h){this.request=h;var g=this.transport=h.transport,f=this.readyState=g.readyState;if((f>2&&!Prototype.Browser.IE)||f==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(g.responseText);this.headerJSON=this._getHeaderJSON()}if(f==4){var e=g.responseXML;this.responseXML=Object.isUndefined(e)?null:e;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(b){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(b){return null}},getResponseHeader:function(b){return this.transport.getResponseHeader(b)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var e=this.getHeader("X-JSON");if(!e){return null}e=decodeURIComponent(escape(e));try{return e.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(d){this.request.dispatchException(d)}},_getResponseJSON:function(){var e=this.request.options;if(!e.evalJSON||(e.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json"))||this.responseText.blank()){return null}try{return this.responseText.evalJSON(e.sanitizeJSON||!this.request.isSameOrigin())}catch(d){this.request.dispatchException(d)}}});Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,f,h,e){this.container={success:(f.success||f),failure:(f.failure||(f.success?null:f))};e=Object.clone(e);var g=e.onComplete;e.onComplete=(function(b,a){this.updateContent(b.responseText);if(Object.isFunction(g)){g(b,a)}}).bind(this);$super(h,e)},updateContent:function(g){var h=this.container[this.success()?"success":"failure"],f=this.options;if(!f.evalScripts){g=g.stripScripts()}if(h=$(h)){if(f.insertion){if(Object.isString(f.insertion)){var e={};e[f.insertion]=g;h.insert(e)}else{f.insertion(h,g)}}else{h.update(g)}}}});Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,e,f,d){$super(d);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=e;this.url=f;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(b){if(this.options.decay){this.decay=(b.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=b.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});function $(e){if(arguments.length>1){for(var f=0,g=[],h=arguments.length;f<h;f++){g.push($(arguments[f]))}return g}if(Object.isString(e)){e=document.getElementById(e)}return Element.extend(e)}if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(j,h){var m=[];var k=document.evaluate(j,$(h)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var g=0,l=k.snapshotLength;g<l;g++){m.push(Element.extend(k.snapshotItem(g)))}return m}}if(!Node){var Node={}}if(!Node.ELEMENT_NODE){Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12})}(function(h){function g(a,b){if(a==="select"){return false}if("type" in b){return false}return true}var e=(function(){try{var b=document.createElement('<input name="x">');return b.tagName.toLowerCase()==="input"&&b.name==="x"}catch(a){return false}})();var f=h.Element;h.Element=function(b,d){d=d||{};b=b.toLowerCase();var j=Element.cache;if(e&&d.name){b="<"+b+' name="'+d.name+'">';delete d.name;return Element.writeAttribute(document.createElement(b),d)}if(!j[b]){j[b]=Element.extend(document.createElement(b))}var a=g(b,d)?j[b].cloneNode(false):document.createElement(b);return Element.writeAttribute(a,d)};Object.extend(h.Element,f||{});if(f){h.Element.prototype=f.prototype}})(this);Element.idCounter=1;Element.cache={};Element._purgeElement=function(d){var e=d._prototypeUID;if(e){Element.stopObserving(d);d._prototypeUID=void 0;delete Element.Storage[e]}};Element.Methods={visible:function(b){return $(b).style.display!="none"},toggle:function(b){b=$(b);Element[Element.visible(b)?"hide":"show"](b);return b},hide:function(b){b=$(b);b.style.display="none";return b},show:function(b){b=$(b);b.style.display="";return b},remove:function(b){b=$(b);b.parentNode.removeChild(b);return b},update:(function(){var l=(function(){var b=document.createElement("select"),a=true;b.innerHTML='<option value="test">test</option>';if(b.options&&b.options[0]){a=b.options[0].nodeName.toUpperCase()!=="OPTION"}b=null;return a})();var g=(function(){try{var d=document.createElement("table");if(d&&d.tBodies){d.innerHTML="<tbody><tr><td>test</td></tr></tbody>";var a=typeof d.tBodies[0]=="undefined";d=null;return a}}catch(b){return true}})();var h=(function(){try{var d=document.createElement("div");d.innerHTML="<link>";var a=(d.childNodes.length===0);d=null;return a}catch(b){return true}})();var m=l||g||h;var j=(function(){var d=document.createElement("script"),a=false;try{d.appendChild(document.createTextNode(""));a=!d.firstChild||d.firstChild&&d.firstChild.nodeType!==3}catch(b){a=true}d=null;return a})();function k(b,a){b=$(b);var o=Element._purgeElement;var p=b.getElementsByTagName("*"),d=p.length;while(d--){o(p[d])}if(a&&a.toElement){a=a.toElement()}if(Object.isElement(a)){return b.update().insert(a)}a=Object.toHTML(a);var e=b.tagName.toUpperCase();if(e==="SCRIPT"&&j){b.text=a;return b}if(m){if(e in Element._insertionTranslations.tags){while(b.firstChild){b.removeChild(b.firstChild)}Element._getContentFromAnonymousElement(e,a.stripScripts()).each(function(n){b.appendChild(n)})}else{if(h&&Object.isString(a)&&a.indexOf("<link")>-1){while(b.firstChild){b.removeChild(b.firstChild)}var f=Element._getContentFromAnonymousElement(e,a.stripScripts(),true);f.each(function(n){b.appendChild(n)})}else{b.innerHTML=a.stripScripts()}}}else{b.innerHTML=a.stripScripts()}a.evalScripts.bind(a).defer();return b}return k})(),replace:function(d,f){d=$(d);if(f&&f.toElement){f=f.toElement()}else{if(!Object.isElement(f)){f=Object.toHTML(f);var e=d.ownerDocument.createRange();e.selectNode(d);f.evalScripts.bind(f).defer();f=e.createContextualFragment(f.stripScripts())}}d.parentNode.replaceChild(f,d);return d},insert:function(o,m){o=$(o);if(Object.isString(m)||Object.isNumber(m)||Object.isElement(m)||(m&&(m.toElement||m.toHTML))){m={bottom:m}}var n,l,h,k;for(var j in m){n=m[j];j=j.toLowerCase();l=Element._insertionTranslations[j];if(n&&n.toElement){n=n.toElement()}if(Object.isElement(n)){l(o,n);continue}n=Object.toHTML(n);h=((j=="before"||j=="after")?o.parentNode:o).tagName.toUpperCase();k=Element._getContentFromAnonymousElement(h,n.stripScripts());if(j=="top"||j=="after"){k.reverse()}k.each(l.curry(o));n.evalScripts.bind(n).defer()}return o},wrap:function(d,f,e){d=$(d);if(Object.isElement(f)){$(f).writeAttribute(e||{})}else{if(Object.isString(f)){f=new Element(f,e)}else{f=new Element("div",f)}}if(d.parentNode){d.parentNode.replaceChild(f,d)}f.appendChild(d);return f},inspect:function(d){d=$(d);var e="<"+d.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(a){var b=a.first(),h=a.last(),g=(d[b]||"").toString();if(g){e+=" "+h+"="+g.inspect(true)}});return e+">"},recursivelyCollect:function(f,h,g){f=$(f);g=g||-1;var e=[];while(f=f[h]){if(f.nodeType==1){e.push(Element.extend(f))}if(e.length==g){break}}return e},ancestors:function(b){return Element.recursivelyCollect(b,"parentNode")},descendants:function(b){return Element.select(b,"*")},firstDescendant:function(b){b=$(b).firstChild;while(b&&b.nodeType!=1){b=b.nextSibling}return $(b)},immediateDescendants:function(d){var e=[],f=$(d).firstChild;while(f){if(f.nodeType===1){e.push(Element.extend(f))}f=f.nextSibling}return e},previousSiblings:function(e,d){return Element.recursivelyCollect(e,"previousSibling")},nextSiblings:function(b){return Element.recursivelyCollect(b,"nextSibling")},siblings:function(b){b=$(b);return Element.previousSiblings(b).reverse().concat(Element.nextSiblings(b))},match:function(d,e){d=$(d);if(Object.isString(e)){return Prototype.Selector.match(d,e)}return e.match(d)},up:function(e,g,f){e=$(e);if(arguments.length==1){return $(e.parentNode)}var h=Element.ancestors(e);return Object.isNumber(g)?h[g]:Prototype.Selector.find(h,g,f)},down:function(d,f,e){d=$(d);if(arguments.length==1){return Element.firstDescendant(d)}return Object.isNumber(f)?Element.descendants(d)[f]:Element.select(d,f)[e||0]},previous:function(d,f,e){d=$(d);if(Object.isNumber(f)){e=f,f=false}if(!Object.isNumber(e)){e=0}if(f){return Prototype.Selector.find(d.previousSiblings(),f,e)}else{return d.recursivelyCollect("previousSibling",e+1)[e]}},next:function(e,g,f){e=$(e);if(Object.isNumber(g)){f=g,g=false}if(!Object.isNumber(f)){f=0}if(g){return Prototype.Selector.find(e.nextSiblings(),g,f)}else{var h=Object.isNumber(f)?f+1:1;return e.recursivelyCollect("nextSibling",f+1)[f]}},select:function(e){e=$(e);var d=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(d,e)},adjacent:function(e){e=$(e);var d=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(d,e.parentNode).without(e)},identify:function(e){e=$(e);var d=Element.readAttribute(e,"id");if(d){return d}do{d="anonymous_element_"+Element.idCounter++}while($(d));Element.writeAttribute(e,"id",d);return d},readAttribute:function(f,e){f=$(f);if(Prototype.Browser.IE){var d=Element._attributeTranslations.read;if(d.values[e]){return d.values[e](f,e)}if(d.names[e]){e=d.names[e]}if(e.include(":")){return(!f.attributes||!f.attributes[e])?null:f.attributes[e].value}}return f.getAttribute(e)},writeAttribute:function(k,m,j){k=$(k);var g={},l=Element._attributeTranslations.write;if(typeof m=="object"){g=m}else{g[m]=Object.isUndefined(j)?true:j}for(var h in g){m=l.names[h]||h;j=g[h];if(l.values[h]){m=l.values[h](k,j)}if(j===false||j===null){k.removeAttribute(m)}else{if(j===true){k.setAttribute(m,m)}else{k.setAttribute(m,j)}}}return k},getHeight:function(b){return Element.getDimensions(b).height},getWidth:function(b){return Element.getDimensions(b).width},classNames:function(b){return new Element.ClassNames(b)},hasClassName:function(e,d){if(!(e=$(e))){return}var f=e.className;return(f.length>0&&(f==d||new RegExp("(^|\\s)"+d+"(\\s|$)").test(f)))},addClassName:function(e,d){if(!(e=$(e))){return}if(!Element.hasClassName(e,d)){e.className+=(e.className?" ":"")+d}return e},removeClassName:function(e,d){if(!(e=$(e))){return}e.className=e.className.replace(new RegExp("(^|\\s+)"+d+"(\\s+|$)")," ").strip();return e},toggleClassName:function(e,d){if(!(e=$(e))){return}return Element[Element.hasClassName(e,d)?"removeClassName":"addClassName"](e,d)},cleanWhitespace:function(d){d=$(d);var f=d.firstChild;while(f){var e=f.nextSibling;if(f.nodeType==3&&!/\S/.test(f.nodeValue)){d.removeChild(f)}f=e}return d},empty:function(b){return $(b).innerHTML.blank()},descendantOf:function(d,e){d=$(d),e=$(e);if(d.compareDocumentPosition){return(d.compareDocumentPosition(e)&8)===8}if(e.contains){return e.contains(d)&&e!==d}while(d=d.parentNode){if(d==e){return true}}return false},scrollTo:function(e){e=$(e);var d=Element.cumulativeOffset(e);window.scrollTo(d[0],d[1]);return e},getStyle:function(e,h){e=$(e);h=h=="float"?"cssFloat":h.camelize();var g=e.style[h];if(!g||g=="auto"){var f=document.defaultView.getComputedStyle(e,null);g=f?f[h]:null}if(h=="opacity"){return g?parseFloat(g):1}return g=="auto"?null:g},getOpacity:function(b){return $(b).getStyle("opacity")},setStyle:function(f,k){f=$(f);var h=f.style,g;if(Object.isString(k)){f.style.cssText+=";"+k;return k.include("opacity")?f.setOpacity(k.match(/opacity:\s*(\d?\.?\d*)/)[1]):f}for(var j in k){if(j=="opacity"){f.setOpacity(k[j])}else{h[(j=="float"||j=="cssFloat")?(Object.isUndefined(h.styleFloat)?"cssFloat":"styleFloat"):j]=k[j]}}return f},setOpacity:function(e,d){e=$(e);e.style.opacity=(d==1||d==="")?"":(d<0.00001)?0:d;return e},makePositioned:function(e){e=$(e);var d=Element.getStyle(e,"position");if(d=="static"||!d){e._madePositioned=true;e.style.position="relative";if(Prototype.Browser.Opera){e.style.top=0;e.style.left=0}}return e},undoPositioned:function(b){b=$(b);if(b._madePositioned){b._madePositioned=undefined;b.style.position=b.style.top=b.style.left=b.style.bottom=b.style.right=""}return b},makeClipping:function(b){b=$(b);if(b._overflow){return b}b._overflow=Element.getStyle(b,"overflow")||"auto";if(b._overflow!=="hidden"){b.style.overflow="hidden"}return b},undoClipping:function(b){b=$(b);if(!b._overflow){return b}b.style.overflow=b._overflow=="auto"?"":b._overflow;b._overflow=null;return b},clonePosition:function(g,l){var h=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});l=$(l);var k=Element.viewportOffset(l),j=[0,0],m=null;g=$(g);if(Element.getStyle(g,"position")=="absolute"){m=Element.getOffsetParent(g);j=Element.viewportOffset(m)}if(m==document.body){j[0]-=document.body.offsetLeft;j[1]-=document.body.offsetTop}if(h.setLeft){g.style.left=(k[0]-j[0]+h.offsetLeft)+"px"}if(h.setTop){g.style.top=(k[1]-j[1]+h.offsetTop)+"px"}if(h.setWidth){g.style.width=l.offsetWidth+"px"}if(h.setHeight){g.style.height=l.offsetHeight+"px"}return g}};Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};if(Prototype.Browser.Opera){Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(j,f,k){switch(k){case"height":case"width":if(!Element.visible(f)){return null}var h=parseInt(j(f,k),10);if(h!==f["offset"+k.capitalize()]){return h+"px"}var g;if(k==="height"){g=["border-top-width","padding-top","padding-bottom","border-bottom-width"]}else{g=["border-left-width","padding-left","padding-right","border-right-width"]}return g.inject(h,function(d,b){var a=j(f,b);return a===null?d:d-parseInt(a,10)})+"px";default:return j(f,k)}});Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(f,e,d){if(d==="title"){return e.title}return f(e,d)})}else{if(Prototype.Browser.IE){Element.Methods.getStyle=function(e,d){e=$(e);d=(d=="float"||d=="cssFloat")?"styleFloat":d.camelize();var f=e.style[d];if(!f&&e.currentStyle){f=e.currentStyle[d]}if(d=="opacity"){if(f=(e.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/)){if(f[1]){return parseFloat(f[1])/100}}return 1}if(f=="auto"){if((d=="width"||d=="height")&&(e.getStyle("display")!="none")){return e["offset"+d.capitalize()]+"px"}return null}return f};Element.Methods.setOpacity=function(g,k){function j(a){return a.replace(/alpha\([^\)]*\)/gi,"")}g=$(g);var h=g.currentStyle;if((h&&!h.hasLayout)||(!h&&g.style.zoom=="normal")){g.style.zoom=1}var l=g.getStyle("filter"),m=g.style;if(k==1||k===""){(l=j(l))?m.filter=l:m.removeAttribute("filter");return g}else{if(k<0.00001){k=0}}m.filter=j(l)+"alpha(opacity="+(k*100)+")";return g};Element._attributeTranslations=(function(){var d="className",e="for",f=document.createElement("div");f.setAttribute(d,"x");if(f.className!=="x"){f.setAttribute("class","x");if(f.className==="x"){d="class"}}f=null;f=document.createElement("label");f.setAttribute(e,"x");if(f.htmlFor!=="x"){f.setAttribute("htmlFor","x");if(f.htmlFor==="x"){e="htmlFor"}}f=null;return{read:{names:{"class":d,className:d,"for":e,htmlFor:e},values:{_getAttr:function(b,a){return b.getAttribute(a)},_getAttr2:function(b,a){return b.getAttribute(a,2)},_getAttrNode:function(g,a){var b=g.getAttributeNode(a);return b?b.value:""},_getEv:(function(){var h=document.createElement("div"),a;h.onclick=Prototype.emptyFunction;var b=h.getAttribute("onclick");if(String(b).indexOf("{")>-1){a=function(j,g){g=j.getAttribute(g);if(!g){return null}g=g.toString();g=g.split("{")[1];g=g.split("}")[0];return g.strip()}}else{if(b===""){a=function(j,g){g=j.getAttribute(g);if(!g){return null}return g.strip()}}}h=null;return a})(),_flag:function(b,a){return $(b).hasAttribute(a)?a:null},style:function(a){return a.style.cssText.toLowerCase()},title:function(a){return a.title}}}}})();Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(e,d){e.checked=!!d},style:function(e,d){e.style.cssText=d?d:""}}};Element._attributeTranslations.has={};$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(b){Element._attributeTranslations.write.names[b.toLowerCase()]=b;Element._attributeTranslations.has[b.toLowerCase()]=b});(function(b){Object.extend(b,{href:b._getAttr2,src:b._getAttr2,type:b._getAttr,action:b._getAttrNode,disabled:b._flag,checked:b._flag,readonly:b._flag,multiple:b._flag,onload:b._getEv,onunload:b._getEv,onclick:b._getEv,ondblclick:b._getEv,onmousedown:b._getEv,onmouseup:b._getEv,onmouseover:b._getEv,onmousemove:b._getEv,onmouseout:b._getEv,onfocus:b._getEv,onblur:b._getEv,onkeypress:b._getEv,onkeydown:b._getEv,onkeyup:b._getEv,onsubmit:b._getEv,onreset:b._getEv,onselect:b._getEv,onchange:b._getEv})})(Element._attributeTranslations.read.values);if(Prototype.BrowserFeatures.ElementExtensions){(function(){function b(h){var a=h.getElementsByTagName("*"),j=[];for(var k=0,g;g=a[k];k++){if(g.tagName!=="!"){j.push(g)}}return j}Element.Methods.down=function(f,e,a){f=$(f);if(arguments.length==1){return f.firstDescendant()}return Object.isNumber(e)?b(f)[e]:Element.select(f,e)[a||0]}})()}}else{if(Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)){Element.Methods.setOpacity=function(e,d){e=$(e);e.style.opacity=(d==1)?0.999999:(d==="")?"":(d<0.00001)?0:d;return e}}else{if(Prototype.Browser.WebKit){Element.Methods.setOpacity=function(f,e){f=$(f);f.style.opacity=(e==1||e==="")?"":(e<0.00001)?0:e;if(e==1){if(f.tagName.toUpperCase()=="IMG"&&f.width){f.width++;f.width--}else{try{var g=document.createTextNode(" ");f.appendChild(g);f.removeChild(g)}catch(h){}}}return f}}}}}if("outerHTML" in document.documentElement){Element.Methods.replace=function(m,k){m=$(m);if(k&&k.toElement){k=k.toElement()}if(Object.isElement(k)){m.parentNode.replaceChild(k,m);return m}k=Object.toHTML(k);var l=m.parentNode,g=l.tagName.toUpperCase();if(Element._insertionTranslations.tags[g]){var j=m.next(),h=Element._getContentFromAnonymousElement(g,k.stripScripts());l.removeChild(m);if(j){h.each(function(a){l.insertBefore(a,j)})}else{h.each(function(a){l.appendChild(a)})}}else{m.outerHTML=k.stripScripts()}k.evalScripts.bind(k).defer();return m}}Element._returnOffset=function(d,f){var e=[d,f];e.left=d;e.top=f;return e};Element._getContentFromAnonymousElement=function(m,n,l){var k=new Element("div"),o=Element._insertionTranslations.tags[m];var j=false;if(o){j=true}else{if(l){j=true;o=["","",0]}}if(j){k.innerHTML="&nbsp;"+o[0]+n+o[1];k.removeChild(k.firstChild);for(var h=o[2];h--;){k=k.firstChild}}else{k.innerHTML=n}return $A(k.childNodes)};Element._insertionTranslations={before:function(e,d){e.parentNode.insertBefore(d,e)},top:function(e,d){e.insertBefore(d,e.firstChild)},bottom:function(e,d){e.appendChild(d)},after:function(e,d){e.parentNode.insertBefore(d,e.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};(function(){var b=Element._insertionTranslations.tags;Object.extend(b,{THEAD:b.TBODY,TFOOT:b.TBODY,TH:b.TD})})();Element.Methods.Simulated={hasAttribute:function(e,f){f=Element._attributeTranslations.has[f]||f;var d=$(e).getAttributeNode(f);return !!(d&&d.specified)}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);(function(b){if(!Prototype.BrowserFeatures.ElementExtensions&&b.__proto__){window.HTMLElement={};window.HTMLElement.prototype=b.__proto__;Prototype.BrowserFeatures.ElementExtensions=true}b=null})(document.createElement("div"));Element.extend=(function(){function m(f){if(typeof window.Element!="undefined"){var d=window.Element.prototype;if(d){var a="_"+(Math.random()+"").slice(2),e=document.createElement(f);d[a]="x";var b=(e[a]!=="x");delete d[a];e=null;return b}}return false}function g(d,e){for(var a in e){var b=e[a];if(Object.isFunction(b)&&!(a in d)){d[a]=b.methodize()}}}var l=m("object");if(Prototype.BrowserFeatures.SpecificElementExtensions){if(l){return function(a){if(a&&typeof a._extendedByPrototype=="undefined"){var b=a.tagName;if(b&&(/^(?:object|applet|embed)$/i.test(b))){g(a,Element.Methods);g(a,Element.Methods.Simulated);g(a,Element.Methods.ByTag[b.toUpperCase()])}}return a}}return Prototype.K}var h={},k=Element.Methods.ByTag;var j=Object.extend(function(a){if(!a||typeof a._extendedByPrototype!="undefined"||a.nodeType!=1||a==window){return a}var d=Object.clone(h),b=a.tagName.toUpperCase();if(k[b]){Object.extend(d,k[b])}g(a,d);a._extendedByPrototype=Prototype.emptyFunction;return a},{refresh:function(){if(!Prototype.BrowserFeatures.ElementExtensions){Object.extend(h,Element.Methods);Object.extend(h,Element.Methods.Simulated)}}});j.refresh();return j})();if(document.documentElement.hasAttribute){Element.hasAttribute=function(e,d){return e.hasAttribute(d)}}else{Element.hasAttribute=Element.Methods.Simulated.hasAttribute}Element.addMethods=function(r){var l=Prototype.BrowserFeatures,q=Element.Methods.ByTag;if(!r){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)})}if(arguments.length==2){var s=r;r=arguments[1]}if(!s){Object.extend(Element.Methods,r||{})}else{if(Object.isArray(s)){s.each(n)}else{n(s)}}function n(a){a=a.toUpperCase();if(!Element.Methods.ByTag[a]){Element.Methods.ByTag[a]={}}Object.extend(Element.Methods.ByTag[a],r)}function t(a,b,d){d=d||false;for(var e in a){var f=a[e];if(!Object.isFunction(f)){continue}if(!d||!(e in b)){b[e]=f.methodize()}}}function p(f){var d;var a={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(a[f]){d="HTML"+a[f]+"Element"}if(window[d]){return window[d]}d="HTML"+f+"Element";if(window[d]){return window[d]}d="HTML"+f.capitalize()+"Element";if(window[d]){return window[d]}var b=document.createElement(f),e=b.__proto__||b.constructor.prototype;b=null;return e}var m=window.HTMLElement?HTMLElement.prototype:Element.prototype;if(l.ElementExtensions){t(Element.Methods,m);t(Element.Methods.Simulated,m,true)}if(l.SpecificElementExtensions){for(var k in Element.Methods.ByTag){var o=p(k);if(Object.isUndefined(o)){continue}t(q[k],o.prototype)}}Object.extend(Element,Element.Methods);delete Element.ByTag;if(Element.extend.refresh){Element.extend.refresh()}Element.cache={}};document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};(function(h){var k=Prototype.Browser,m=document,o,n={};function j(){if(k.WebKit&&!m.evaluate){return document}if(k.Opera&&window.parseFloat(window.opera.version())<9.5){return document.body}return document.documentElement}function l(a){if(!o){o=j()}n[a]="client"+a;h["get"+a]=function(){return o[n[a]]};return h["get"+a]()}h.getWidth=l.curry("Width");h.getHeight=l.curry("Height")})(document.viewport);Element.Storage={UID:1};Element.addMethods({getStorage:function(d){if(!(d=$(d))){return}var e;if(d===window){e=0}else{if(typeof d._prototypeUID==="undefined"){d._prototypeUID=Element.Storage.UID++}e=d._prototypeUID}if(!Element.Storage[e]){Element.Storage[e]=$H()}return Element.Storage[e]},store:function(d,e,f){if(!(d=$(d))){return}if(arguments.length===2){Element.getStorage(d).update(e)}else{Element.getStorage(d).set(e,f)}return d},retrieve:function(k,f,g){if(!(k=$(k))){return}var h=Element.getStorage(k),j=h.get(f);if(Object.isUndefined(j)){h.set(f,g);j=g}return j},clone:function(k,g){if(!(k=$(k))){return}var h=k.cloneNode(g);h._prototypeUID=void 0;if(g){var j=Element.select(h,"*"),f=j.length;while(f--){j[f]._prototypeUID=void 0}}return Element.extend(h)},purge:function(h){if(!(h=$(h))){return}var f=Element._purgeElement;f(h);var g=h.getElementsByTagName("*"),e=g.length;while(e--){f(g[e])}return null}});(function(){function G(a){var b=a.match(/^(\d+)%?$/i);if(!b){return null}return(Number(b[1])/100)}function z(n,l,k){var g=null;if(Object.isElement(n)){g=n;n=g.getStyle(l)}if(n===null){return null}if((/^(?:-)?\d+(\.\d+)?(px)?$/i).test(n)){return window.parseFloat(n)}var e=n.include("%"),j=(k===document.viewport);if(/\d/.test(n)&&g&&g.runtimeStyle&&!(e&&j)){var m=g.style.left,o=g.runtimeStyle.left;g.runtimeStyle.left=g.currentStyle.left;g.style.left=n||0;n=g.style.pixelLeft;g.style.left=m;g.runtimeStyle.left=o;return n}if(g&&e){k=k||g.parentNode;var h=G(n);var d=null;var f=g.getStyle("position");var a=l.include("left")||l.include("right")||l.include("width");var b=l.include("top")||l.include("bottom")||l.include("height");if(k===document.viewport){if(a){d=document.viewport.getWidth()}else{if(b){d=document.viewport.getHeight()}}}else{if(a){d=$(k).measure("width")}else{if(b){d=$(k).measure("height")}}}return(d===null)?0:d*h}return 0}function H(a){if(Object.isString(a)&&a.endsWith("px")){return a}return a+"px"}function E(b){var d=b;while(b&&b.parentNode){var a=b.getStyle("display");if(a==="none"){return false}b=$(b.parentNode)}return true}var K=Prototype.K;if("currentStyle" in document.documentElement){K=function(a){if(!a.currentStyle.hasLayout){a.style.zoom=1}return a}}function I(a){if(a.include("border")){a=a+"-width"}return a.camelize()}Element.Layout=Class.create(Hash,{initialize:function($super,a,b){$super();this.element=$(a);Element.Layout.PROPERTIES.each(function(d){this._set(d,null)},this);if(b){this._preComputing=true;this._begin();Element.Layout.PROPERTIES.each(this._compute,this);this._end();this._preComputing=false}},_set:function(a,b){return Hash.prototype.set.call(this,a,b)},set:function(a,b){throw"Properties of Element.Layout are read-only."},get:function($super,a){var b=$super(a);return b===null?this._compute(a):b},_begin:function(){if(this._prepared){return}var f=this.element;if(E(f)){this._prepared=true;return}var d={position:f.style.position||"",width:f.style.width||"",visibility:f.style.visibility||"",display:f.style.display||""};f.store("prototype_original_styles",d);var b=f.getStyle("position"),k=f.getStyle("width");if(k==="0px"||k===null){f.style.display="block";k=f.getStyle("width")}var j=(b==="fixed")?document.viewport:f.parentNode;f.setStyle({position:"absolute",visibility:"hidden",display:"block"});var h=f.getStyle("width");var g;if(k&&(h===k)){g=z(f,"width",j)}else{if(b==="absolute"||b==="fixed"){g=z(f,"width",j)}else{var a=f.parentNode,e=$(a).getLayout();g=e.get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right")}}f.setStyle({width:g+"px"});this._prepared=true},_end:function(){var a=this.element;var b=a.retrieve("prototype_original_styles");a.store("prototype_original_styles",null);a.setStyle(b);this._prepared=false},_compute:function(a){var b=Element.Layout.COMPUTATIONS;if(!(a in b)){throw"Property not found."}return this._set(a,b[a].call(this,this.element))},toObject:function(){var d=$A(arguments);var b=(d.length===0)?Element.Layout.PROPERTIES:d.join(" ").split(" ");var a={};b.each(function(e){if(!Element.Layout.PROPERTIES.include(e)){return}var f=this.get(e);if(f!=null){a[e]=f}},this);return a},toHash:function(){var a=this.toObject.apply(this,arguments);return new Hash(a)},toCSS:function(){var d=$A(arguments);var a=(d.length===0)?Element.Layout.PROPERTIES:d.join(" ").split(" ");var b={};a.each(function(e){if(!Element.Layout.PROPERTIES.include(e)){return}if(Element.Layout.COMPOSITE_PROPERTIES.include(e)){return}var f=this.get(e);if(f!=null){b[I(e)]=f+"px"}},this);return b},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(b){if(!this._preComputing){this._begin()}var e=this.get("border-box-height");if(e<=0){if(!this._preComputing){this._end()}return 0}var a=this.get("border-top"),d=this.get("border-bottom");var f=this.get("padding-top"),g=this.get("padding-bottom");if(!this._preComputing){this._end()}return e-a-d-f-g},width:function(b){if(!this._preComputing){this._begin()}var d=this.get("border-box-width");if(d<=0){if(!this._preComputing){this._end()}return 0}var f=this.get("border-left"),e=this.get("border-right");var a=this.get("padding-left"),g=this.get("padding-right");if(!this._preComputing){this._end()}return d-f-e-a-g},"padding-box-height":function(d){var e=this.get("height"),a=this.get("padding-top"),b=this.get("padding-bottom");return e+a+b},"padding-box-width":function(e){var d=this.get("width"),b=this.get("padding-left"),a=this.get("padding-right");return d+b+a},"border-box-height":function(a){if(!this._preComputing){this._begin()}var b=a.offsetHeight;if(!this._preComputing){this._end()}return b},"border-box-width":function(b){if(!this._preComputing){this._begin()}var a=b.offsetWidth;if(!this._preComputing){this._end()}return a},"margin-box-height":function(d){var e=this.get("border-box-height"),b=this.get("margin-top"),a=this.get("margin-bottom");if(e<=0){return 0}return e+b+a},"margin-box-width":function(b){var d=this.get("border-box-width"),a=this.get("margin-left"),e=this.get("margin-right");if(d<=0){return 0}return d+a+e},top:function(b){var a=b.positionedOffset();return a.top},bottom:function(e){var a=e.positionedOffset(),d=e.getOffsetParent(),b=d.measure("height");var f=this.get("border-box-height");return b-f-a.top},left:function(b){var a=b.positionedOffset();return a.left},right:function(b){var f=b.positionedOffset(),a=b.getOffsetParent(),e=a.measure("width");var d=this.get("border-box-width");return e-d-f.left},"padding-top":function(a){return z(a,"paddingTop")},"padding-bottom":function(a){return z(a,"paddingBottom")},"padding-left":function(a){return z(a,"paddingLeft")},"padding-right":function(a){return z(a,"paddingRight")},"border-top":function(a){return z(a,"borderTopWidth")},"border-bottom":function(a){return z(a,"borderBottomWidth")},"border-left":function(a){return z(a,"borderLeftWidth")},"border-right":function(a){return z(a,"borderRightWidth")},"margin-top":function(a){return z(a,"marginTop")},"margin-bottom":function(a){return z(a,"marginBottom")},"margin-left":function(a){return z(a,"marginLeft")},"margin-right":function(a){return z(a,"marginRight")}}});if("getBoundingClientRect" in document.documentElement){Object.extend(Element.Layout.COMPUTATIONS,{right:function(d){var b=K(d.getOffsetParent());var a=d.getBoundingClientRect(),e=b.getBoundingClientRect();return(e.right-a.right).round()},bottom:function(d){var b=K(d.getOffsetParent());var a=d.getBoundingClientRect(),e=b.getBoundingClientRect();return(e.bottom-a.bottom).round()}})}Element.Offset=Class.create({initialize:function(a,b){this.left=a.round();this.top=b.round();this[0]=this.left;this[1]=this.top},relativeTo:function(a){return new Element.Offset(this.left-a.left,this.top-a.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});function w(a,b){return new Element.Layout(a,b)}function M(b,a){return $(b).getLayout().get(a)}function A(d){d=$(d);var f=Element.getStyle(d,"display");if(f&&f!=="none"){return{width:d.offsetWidth,height:d.offsetHeight}}var b=d.style;var e={visibility:b.visibility,position:b.position,display:b.display};var g={visibility:"hidden",display:"block"};if(e.position!=="fixed"){g.position="absolute"}Element.setStyle(d,g);var a={width:d.offsetWidth,height:d.offsetHeight};Element.setStyle(d,e);return a}function C(b){b=$(b);if(J(b)||L(b)||B(b)||D(b)){return $(document.body)}var a=(Element.getStyle(b,"display")==="inline");if(!a&&b.offsetParent){return $(b.offsetParent)}while((b=b.parentNode)&&b!==document.body){if(Element.getStyle(b,"position")!=="static"){return D(b)?$(document.body):$(b)}}return $(document.body)}function u(b){b=$(b);var d=0,a=0;if(b.parentNode){do{d+=b.offsetTop||0;a+=b.offsetLeft||0;b=b.offsetParent}while(b)}return new Element.Offset(a,d)}function y(d){d=$(d);var b=d.getLayout();var e=0,f=0;do{e+=d.offsetTop||0;f+=d.offsetLeft||0;d=d.offsetParent;if(d){if(B(d)){break}var a=Element.getStyle(d,"position");if(a!=="static"){break}}}while(d);f-=b.get("margin-top");e-=b.get("margin-left");return new Element.Offset(f,e)}function N(b){var d=0,a=0;do{d+=b.scrollTop||0;a+=b.scrollLeft||0;b=b.parentNode}while(b);return new Element.Offset(a,d)}function v(f){d=$(d);var e=0,a=0,b=document.body;var d=f;do{e+=d.offsetTop||0;a+=d.offsetLeft||0;if(d.offsetParent==b&&Element.getStyle(d,"position")=="absolute"){break}}while(d=d.offsetParent);d=f;do{if(d!=b){e-=d.scrollTop||0;a-=d.scrollLeft||0}}while(d=d.parentNode);return new Element.Offset(a,e)}function x(e){e=$(e);if(Element.getStyle(e,"position")==="absolute"){return e}var g=C(e);var a=e.viewportOffset(),d=g.viewportOffset();var f=a.relativeTo(d);var b=e.getLayout();e.store("prototype_absolutize_original_styles",{left:e.getStyle("left"),top:e.getStyle("top"),width:e.getStyle("width"),height:e.getStyle("height")});e.setStyle({position:"absolute",top:f.top+"px",left:f.left+"px",width:b.get("width")+"px",height:b.get("height")+"px"});return e}function F(a){a=$(a);if(Element.getStyle(a,"position")==="relative"){return a}var b=a.retrieve("prototype_absolutize_original_styles");if(b){a.setStyle(b)}return a}if(Prototype.Browser.IE){C=C.wrap(function(b,d){d=$(d);if(J(d)||L(d)||B(d)||D(d)){return $(document.body)}var e=d.getStyle("position");if(e!=="static"){return b(d)}d.setStyle({position:"relative"});var a=b(d);d.setStyle({position:e});return a});y=y.wrap(function(a,d){d=$(d);if(!d.parentNode){return new Element.Offset(0,0)}var e=d.getStyle("position");if(e!=="static"){return a(d)}var b=d.getOffsetParent();if(b&&b.getStyle("position")==="fixed"){K(b)}d.setStyle({position:"relative"});var f=a(d);d.setStyle({position:e});return f})}else{if(Prototype.Browser.Webkit){u=function(b){b=$(b);var d=0,a=0;do{d+=b.offsetTop||0;a+=b.offsetLeft||0;if(b.offsetParent==document.body){if(Element.getStyle(b,"position")=="absolute"){break}}b=b.offsetParent}while(b);return new Element.Offset(a,d)}}}Element.addMethods({getLayout:w,measure:M,getDimensions:A,getOffsetParent:C,cumulativeOffset:u,positionedOffset:y,cumulativeScrollOffset:N,viewportOffset:v,absolutize:x,relativize:F});function B(a){return a.nodeName.toUpperCase()==="BODY"}function D(a){return a.nodeName.toUpperCase()==="HTML"}function J(a){return a.nodeType===Node.DOCUMENT_NODE}function L(a){return a!==document.body&&!Element.descendantOf(a,document.body)}if("getBoundingClientRect" in document.documentElement){Element.addMethods({viewportOffset:function(d){d=$(d);if(L(d)){return new Element.Offset(0,0)}var b=d.getBoundingClientRect(),a=document.documentElement;return new Element.Offset(b.left-a.clientLeft,b.top-a.clientTop)}})}})();window.$$=function(){var b=$A(arguments).join(", ");return Prototype.Selector.select(b,document)};Prototype.Selector=(function(){function g(){throw new Error('Method "Prototype.Selector.select" must be defined.')}function k(){throw new Error('Method "Prototype.Selector.match" must be defined.')}function j(b,a,n){n=n||0;var o=Prototype.Selector.match,d=b.length,p=0,e;for(e=0;e<d;e++){if(o(b[e],a)&&n==p++){return Element.extend(b[e])}}}function h(a){for(var d=0,b=a.length;d<b;d++){Element.extend(a[d])}return a}var f=Prototype.K;return{select:g,match:k,find:j,extendElements:(Element.extend===f)?f:h,extendElement:Element.extend}})();Prototype._original_property=window.Sizzle;
/*!
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var s=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,z=0,E=Object.prototype.toString,u=false,A=true;[0,0].sort(function(){A=false;return 0});var G=function(o,n,L,j){L=L||[];var N=n=n||document;if(n.nodeType!==1&&n.nodeType!==9){return[]}if(!o||typeof o!=="string"){return L}var K=[],r,a,f,h,M,p,q=true,g=t(n),k=o;while((s.exec(""),r=s.exec(k))!==null){k=r[3];K.push(r[1]);if(r[2]){p=r[3];break}}if(K.length>1&&y.exec(o)){if(K.length===2&&D.relative[K[0]]){a=C(K[0]+K[1],n)}else{a=D.relative[K[0]]?[n]:G(K.shift(),n);while(K.length){o=K.shift();if(D.relative[o]){o+=K.shift()}a=C(o,a)}}}else{if(!j&&K.length>1&&n.nodeType===9&&!g&&D.match.ID.test(K[0])&&!D.match.ID.test(K[K.length-1])){var d=G.find(K.shift(),n,g);n=d.expr?G.filter(d.expr,d.set)[0]:d.set[0]}if(n){var d=j?{expr:K.pop(),set:H(j)}:G.find(K.pop(),K.length===1&&(K[0]==="~"||K[0]==="+")&&n.parentNode?n.parentNode:n,g);a=d.expr?G.filter(d.expr,d.set):d.set;if(K.length>0){f=H(a)}else{q=false}while(K.length){var l=K.pop(),b=l;if(!D.relative[l]){l=""}else{b=K.pop()}if(b==null){b=n}D.relative[l](f,b,g)}}else{f=K=[]}}if(!f){f=a}if(!f){throw"Syntax error, unrecognized expression: "+(l||o)}if(E.call(f)==="[object Array]"){if(!q){L.push.apply(L,f)}else{if(n&&n.nodeType===1){for(var m=0;f[m]!=null;m++){if(f[m]&&(f[m]===true||f[m].nodeType===1&&B(n,f[m]))){L.push(a[m])}}}else{for(var m=0;f[m]!=null;m++){if(f[m]&&f[m].nodeType===1){L.push(a[m])}}}}}else{H(f,L)}if(p){G(p,N,L,j);G.uniqueSort(L)}return L};G.uniqueSort=function(a){if(F){u=A;a.sort(F);if(u){for(var b=1;b<a.length;b++){if(a[b]===a[b-1]){a.splice(b--,1)}}}}return a};G.matches=function(b,a){return G(b,null,null,a)};G.find=function(d,a,b){var f,h;if(!d){return[]}for(var j=0,k=D.order.length;j<k;j++){var g=D.order[j],h;if((h=D.leftMatch[g].exec(d))){var l=h[1];h.splice(1,1);if(l.substr(l.length-1)!=="\\"){h[1]=(h[1]||"").replace(/\\/g,"");f=D.find[g](h,a,b);if(f!=null){d=d.replace(D.match[g],"");break}}}}if(!f){f=a.getElementsByTagName("*")}return{set:f,expr:d}};G.filter=function(d,f,I,o){var q=d,n=[],j=f,l,g,k=f&&f[0]&&t(f[0]);while(d&&f.length){for(var h in D.filter){if((l=D.match[h].exec(d))!=null){var r=D.filter[h],p,a;g=false;if(j==n){n=[]}if(D.preFilter[h]){l=D.preFilter[h](l,j,I,n,o,k);if(!l){g=p=true}else{if(l===true){continue}}}if(l){for(var m=0;(a=j[m])!=null;m++){if(a){p=r(a,l,m,j);var b=o^!!p;if(I&&p!=null){if(b){g=true}else{j[m]=false}}else{if(b){n.push(a);g=true}}}}}if(p!==undefined){if(!I){j=n}d=d.replace(D.match[h],"");if(!g){return[]}break}}}if(d==q){if(g==null){throw"Syntax error, unrecognized expression: "+d}else{break}}q=d}return j};var D=G.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(d,a,f){var h=typeof a==="string",b=h&&!/\W/.test(a),g=h&&!b;if(b&&!f){a=a.toUpperCase()}for(var j=0,k=d.length,l;j<k;j++){if((l=d[j])){while((l=l.previousSibling)&&l.nodeType!==1){}d[j]=g||l&&l.nodeName===a?l||false:l===a}}if(g){G.filter(a,d,true)}},">":function(a,h,k){var d=typeof h==="string";if(d&&!/\W/.test(h)){h=k?h:h.toUpperCase();for(var g=0,j=a.length;g<j;g++){var b=a[g];if(b){var f=b.parentNode;a[g]=f.nodeName===h?f:false}}}else{for(var g=0,j=a.length;g<j;g++){var b=a[g];if(b){a[g]=d?b.parentNode:b.parentNode===h}}if(d){G.filter(h,a,true)}}},"":function(d,g,a){var f=z++,h=e;if(!/\W/.test(g)){var b=g=a?g:g.toUpperCase();h=v}h("parentNode",g,f,d,b,a)},"~":function(d,g,a){var f=z++,h=e;if(typeof g==="string"&&!/\W/.test(g)){var b=g=a?g:g.toUpperCase();h=v}h("previousSibling",g,f,d,b,a)}},find:{ID:function(d,b,a){if(typeof b.getElementById!=="undefined"&&!a){var f=b.getElementById(d[1]);return f?[f]:[]}},NAME:function(g,b,a){if(typeof b.getElementsByName!=="undefined"){var h=[],d=b.getElementsByName(g[1]);for(var f=0,j=d.length;f<j;f++){if(d[f].getAttribute("name")===g[1]){h.push(d[f])}}return h.length===0?null:h}},TAG:function(b,a){return a.getElementsByTagName(b[1])}},preFilter:{CLASS:function(f,h,g,j,a,k){f=" "+f[1].replace(/\\/g,"")+" ";if(k){return f}for(var d=0,b;(b=h[d])!=null;d++){if(b){if(a^(b.className&&(" "+b.className+" ").indexOf(f)>=0)){if(!g){j.push(b)}}else{if(g){h[d]=false}}}}return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(b,d){for(var a=0;d[a]===false;a++){}return d[a]&&t(d[a])?b[1]:b[1].toUpperCase()},CHILD:function(b){if(b[1]=="nth"){var a=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(b[2]=="even"&&"2n"||b[2]=="odd"&&"2n+1"||!/\D/.test(b[2])&&"0n+"+b[2]||b[2]);b[2]=(a[1]+(a[2]||1))-0;b[3]=a[3]-0}b[0]=z++;return b},ATTR:function(d,h,g,j,b,a){var f=d[1].replace(/\\/g,"");if(!a&&D.attrMap[f]){d[1]=D.attrMap[f]}if(d[2]==="~="){d[4]=" "+d[4]+" "}return d},PSEUDO:function(b,g,f,h,a){if(b[1]==="not"){if((s.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=G(b[3],null,null,g)}else{var d=G.filter(b[3],g,f,true^a);if(!f){h.push.apply(h,d)}return false}}else{if(D.match.POS.test(b[0])||D.match.CHILD.test(b[0])){return true}}return b},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===true},checked:function(a){return a.checked===true},selected:function(a){a.parentNode.selectedIndex;return a.selected===true},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,d){return !!G(d[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toUpperCase()==="BUTTON"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(b,d,f,a){return d===a.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,d){return b<d[3]-0},gt:function(a,b,d){return b>d[3]-0},nth:function(a,b,d){return d[3]-0==b},eq:function(a,b,d){return d[3]-0==b}},filter:{PSEUDO:function(a,g,f,k){var h=g[1],d=D.filters[h];if(d){return d(a,f,g,k)}else{if(h==="contains"){return(a.textContent||a.innerText||"").indexOf(g[3])>=0}else{if(h==="not"){var b=g[3];for(var f=0,j=b.length;f<j;f++){if(b[f]===a){return false}}return true}}}},CHILD:function(b,k){var g=k[1],m=b;switch(g){case"only":case"first":while((m=m.previousSibling)){if(m.nodeType===1){return false}}if(g=="first"){return true}m=b;case"last":while((m=m.nextSibling)){if(m.nodeType===1){return false}}return true;case"nth":var l=k[2],a=k[3];if(l==1&&a==0){return true}var h=k[0],d=b.parentNode;if(d&&(d.sizcache!==h||!b.nodeIndex)){var j=0;for(m=d.firstChild;m;m=m.nextSibling){if(m.nodeType===1){m.nodeIndex=++j}}d.sizcache=h}var f=b.nodeIndex-a;if(l==0){return f==0}else{return(f%l==0&&f/l>=0)}}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return(b==="*"&&a.nodeType===1)||a.nodeName===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(b,f){var g=f[1],j=D.attrHandle[g]?D.attrHandle[g](b):b[g]!=null?b[g]:b.getAttribute(g),a=j+"",d=f[2],h=f[4];return j==null?d==="!=":d==="="?a===h:d==="*="?a.indexOf(h)>=0:d==="~="?(" "+a+" ").indexOf(h)>=0:!h?a&&j!==false:d==="!="?a!=h:d==="^="?a.indexOf(h)===0:d==="$="?a.substr(a.length-h.length)===h:d==="|="?a===h||a.substr(0,h.length+1)===h+"-":false},POS:function(b,g,f,a){var h=g[2],d=D.setFilters[h];if(d){return d(b,f,g,a)}}}};var y=D.match.POS;for(var w in D.match){D.match[w]=new RegExp(D.match[w].source+/(?![^\[]*\])(?![^\(]*\))/.source);D.leftMatch[w]=new RegExp(/(^(?:.|\r|\n)*?)/.source+D.match[w].source)}var H=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(x){H=function(a,b){var f=b||[];if(E.call(a)==="[object Array]"){Array.prototype.push.apply(f,a)}else{if(typeof a.length==="number"){for(var d=0,g=a.length;d<g;d++){f.push(a[d])}}else{for(var d=0;a[d];d++){f.push(a[d])}}}return f}}var F;if(document.documentElement.compareDocumentPosition){F=function(b,d){if(!b.compareDocumentPosition||!d.compareDocumentPosition){if(b==d){u=true}return 0}var a=b.compareDocumentPosition(d)&4?-1:b===d?0:1;if(a===0){u=true}return a}}else{if("sourceIndex" in document.documentElement){F=function(b,d){if(!b.sourceIndex||!d.sourceIndex){if(b==d){u=true}return 0}var a=b.sourceIndex-d.sourceIndex;if(a===0){u=true}return a}}else{if(document.createRange){F=function(b,f){if(!b.ownerDocument||!f.ownerDocument){if(b==f){u=true}return 0}var d=b.ownerDocument.createRange(),g=f.ownerDocument.createRange();d.setStart(b,0);d.setEnd(b,0);g.setStart(f,0);g.setEnd(f,0);var a=d.compareBoundaryPoints(Range.START_TO_END,g);if(a===0){u=true}return a}}}}(function(){var b=document.createElement("div"),a="script"+(new Date).getTime();b.innerHTML="<a name='"+a+"'/>";var d=document.documentElement;d.insertBefore(b,d.firstChild);if(!!document.getElementById(a)){D.find.ID=function(h,g,f){if(typeof g.getElementById!=="undefined"&&!f){var j=g.getElementById(h[1]);return j?j.id===h[1]||typeof j.getAttributeNode!=="undefined"&&j.getAttributeNode("id").nodeValue===h[1]?[j]:undefined:[]}};D.filter.ID=function(f,h){var g=typeof f.getAttributeNode!=="undefined"&&f.getAttributeNode("id");return f.nodeType===1&&g&&g.nodeValue===h}}d.removeChild(b);d=b=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0){D.find.TAG=function(h,b){var d=b.getElementsByTagName(h[1]);if(h[1]==="*"){var f=[];for(var g=0;d[g];g++){if(d[g].nodeType===1){f.push(d[g])}}d=f}return d}}a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#"){D.attrHandle.href=function(b){return b.getAttribute("href",2)}}a=null})();if(document.querySelectorAll){(function(){var d=G,a=document.createElement("div");a.innerHTML="<p class='TEST'></p>";if(a.querySelectorAll&&a.querySelectorAll(".TEST").length===0){return}G=function(f,g,j,h){g=g||document;if(!h&&g.nodeType===9&&!t(g)){try{return H(g.querySelectorAll(f),j)}catch(k){}}return d(f,g,j,h)};for(var b in d){G[b]=d[b]}a=null})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName("e").length===0){return}a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}D.order.splice(1,0,"CLASS");D.find.CLASS=function(f,d,b){if(typeof d.getElementsByClassName!=="undefined"&&!b){return d.getElementsByClassName(f[1])}};a=null})()}function v(n,h,j,a,g,b){var f=n=="previousSibling"&&!b;for(var l=0,m=a.length;l<m;l++){var d=a[l];if(d){if(f&&d.nodeType===1){d.sizcache=j;d.sizset=l}d=d[n];var k=false;while(d){if(d.sizcache===j){k=a[d.sizset];break}if(d.nodeType===1&&!b){d.sizcache=j;d.sizset=l}if(d.nodeName===h){k=d;break}d=d[n]}a[l]=k}}}function e(n,h,j,a,g,b){var f=n=="previousSibling"&&!b;for(var l=0,m=a.length;l<m;l++){var d=a[l];if(d){if(f&&d.nodeType===1){d.sizcache=j;d.sizset=l}d=d[n];var k=false;while(d){if(d.sizcache===j){k=a[d.sizset];break}if(d.nodeType===1){if(!b){d.sizcache=j;d.sizset=l}if(typeof h!=="string"){if(d===h){k=true;break}}else{if(G.filter(h,[d]).length>0){k=d;break}}}d=d[n]}a[l]=k}}}var B=document.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};var t=function(a){return a.nodeType===9&&a.documentElement.nodeName!=="HTML"||!!a.ownerDocument&&a.ownerDocument.documentElement.nodeName!=="HTML"};var C=function(j,k){var f=[],d="",b,g=k.nodeType?[k]:k;while((b=D.match.PSEUDO.exec(j))){d+=b[0];j=j.replace(D.match.PSEUDO,"")}j=D.relative[j]?j+"*":j;for(var a=0,h=g.length;a<h;a++){G(j,g[a],f)}return G.filter(d,f)};window.Sizzle=G})();(function(h){var g=Prototype.Selector.extendElements;function f(b,a){return g(h(b,a||document))}function e(a,b){return h.matches(b,[a]).length==1}Prototype.Selector.engine=h;Prototype.Selector.select=f;Prototype.Selector.match=e})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;var Form={reset:function(b){b=$(b);b.reset();return b},serializeElements:function(l,p){if(typeof p!="object"){p={hash:!!p}}else{if(Object.isUndefined(p.hash)){p.hash=true}}var o,m,k=false,n=p.submit,j,q;if(p.hash){q={};j=function(d,b,a){if(b in d){if(!Object.isArray(d[b])){d[b]=[d[b]]}d[b].push(a)}else{d[b]=a}return d}}else{q="";j=function(d,b,a){return d+(d?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)}}return l.inject(q,function(b,a){if(!a.disabled&&a.name){o=a.name;m=$(a).getValue();if(m!=null&&a.type!="file"&&(a.type!="submit"||(!k&&n!==false&&(!n||o==n)&&(k=true)))){b=j(b,o,m)}}return b})}};Form.Methods={serialize:function(d,e){return Form.serializeElements(Form.getElements(d),e)},getElements:function(k){var j=$(k).getElementsByTagName("*"),l,h=[],m=Form.Element.Serializers;for(var g=0;l=j[g];g++){h.push(l)}return h.inject([],function(b,a){if(m[a.tagName.toLowerCase()]){b.push(Element.extend(a))}return b})},getInputs:function(m,q,p){m=$(m);var k=m.getElementsByTagName("input");if(!q&&!p){return $A(k).map(Element.extend)}for(var o=0,l=[],n=k.length;o<n;o++){var j=k[o];if((q&&j.type!=q)||(p&&j.name!=p)){continue}l.push(Element.extend(j))}return l},disable:function(b){b=$(b);Form.getElements(b).invoke("disable");return b},enable:function(b){b=$(b);Form.getElements(b).invoke("enable");return b},findFirstElement:function(d){var f=$(d).getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled});var e=f.findAll(function(a){return a.hasAttribute("tabIndex")&&a.tabIndex>=0}).sortBy(function(a){return a.tabIndex}).first();return e?e:f.find(function(a){return/^(?:input|select|textarea)$/i.test(a.tagName)})},focusFirstElement:function(d){d=$(d);var e=d.findFirstElement();if(e){e.activate()}return d},request:function(e,f){e=$(e),f=Object.clone(f||{});var g=f.parameters,h=e.readAttribute("action")||"";if(h.blank()){h=window.location.href}f.parameters=e.serialize(true);if(g){if(Object.isString(g)){g=g.toQueryParams()}Object.extend(f.parameters,g)}if(e.hasAttribute("method")&&!f.method){f.method=e.method}return new Ajax.Request(h,f)}};Form.Element={focus:function(b){$(b).focus();return b},select:function(b){$(b).select();return b}};Form.Element.Methods={serialize:function(e){e=$(e);if(!e.disabled&&e.name){var d=e.getValue();if(d!=undefined){var f={};f[e.name]=d;return Object.toQueryString(f)}}return""},getValue:function(e){e=$(e);var d=e.tagName.toLowerCase();return Form.Element.Serializers[d](e)},setValue:function(e,d){e=$(e);var f=e.tagName.toLowerCase();Form.Element.Serializers[f](e,d);return e},clear:function(b){$(b).value="";return b},present:function(b){return $(b).value!=""},activate:function(e){e=$(e);try{e.focus();if(e.select&&(e.tagName.toLowerCase()!="input"||!(/^(?:button|reset|submit)$/i.test(e.type)))){e.select()}}catch(d){}return e},disable:function(b){b=$(b);b.disabled=true;return b},enable:function(b){b=$(b);b.disabled=false;return b}};var Field=Form.Element;var $F=Form.Element.Methods.getValue;Form.Element.Serializers=(function(){function h(b,a){switch(b.type.toLowerCase()){case"checkbox":case"radio":return l(b,a);default:return m(b,a)}}function l(b,a){if(Object.isUndefined(a)){return b.checked?b.value:null}else{b.checked=!!a}}function m(b,a){if(Object.isUndefined(a)){return b.value}else{b.value=a}}function j(d,p){if(Object.isUndefined(p)){return(d.type==="select-one"?o:n)(d)}var e,b,g=!Object.isArray(p);for(var f=0,a=d.length;f<a;f++){e=d.options[f];b=this.optionValue(e);if(g){if(b==p){e.selected=true;return}}else{e.selected=p.include(b)}}}function o(a){var b=a.selectedIndex;return b>=0?k(a.options[b]):null}function n(b){var f,a=b.length;if(!a){return null}for(var d=0,f=[];d<a;d++){var e=b.options[d];if(e.selected){f.push(k(e))}}return f}function k(a){return Element.hasAttribute(a,"value")?a.value:a.text}return{input:h,inputSelector:l,textarea:m,select:j,selectOne:o,selectMany:n,optionValue:k,button:m}})();Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,e,d,f){$super(f,d);this.element=$(e);this.lastValue=this.getValue()},execute:function(){var b=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(b)?this.lastValue!=b:String(this.lastValue)!=String(b)){this.callback(this.element,b);this.lastValue=b}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=Class.create({initialize:function(e,d){this.element=$(e);this.callback=d;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks()}else{this.registerCallback(this.element)}},onElementEvent:function(){var b=this.getValue();if(this.lastValue!=b){this.callback(this.element,b);this.lastValue=b}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(b){if(b.type){switch(b.type.toLowerCase()){case"checkbox":case"radio":Event.observe(b,"click",this.onElementEvent.bind(this));break;default:Event.observe(b,"change",this.onElementEvent.bind(this));break}}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});(function(){var N={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}};var ac=document.documentElement;var M="onmouseenter" in ac&&"onmouseleave" in ac;var ah=function(a){return false};if(window.attachEvent){if(window.addEventListener){ah=function(a){return !(a instanceof window.Event)}}else{ah=function(a){return true}}}var O;function R(a,b){return a.which?(a.which===b+1):(a.button===b)}var T={0:1,1:4,2:2};function F(a,b){return a.button===T[b]}function Q(a,b){switch(b){case 0:return a.which==1&&!a.metaKey;case 1:return a.which==2||(a.which==1&&a.metaKey);case 2:return a.which==3;default:return false}}if(window.attachEvent){if(!window.addEventListener){O=F}else{O=function(a,b){return ah(a)?F(a,b):R(a,b)}}}else{if(Prototype.Browser.WebKit){O=Q}else{O=R}}function I(a){return O(a,0)}function K(a){return O(a,1)}function U(a){return O(a,2)}function ae(b){b=N.extend(b);var d=b.target,e=b.type,a=b.currentTarget;if(a&&a.tagName){if(e==="load"||e==="error"||(e==="click"&&a.tagName.toLowerCase()==="input"&&a.type==="radio")){d=a}}if(d.nodeType==Node.TEXT_NODE){d=d.parentNode}return Element.extend(d)}function S(b,a){var d=N.element(b);if(!a){return d}while(d){if(Object.isElement(d)&&Prototype.Selector.match(d,a)){return Element.extend(d)}d=d.parentNode}}function L(a){return{x:af(a),y:ag(a)}}function af(a){var b=document.documentElement,d=document.body||{scrollLeft:0};return a.pageX||(a.clientX+(b.scrollLeft||d.scrollLeft)-(b.clientLeft||0))}function ag(a){var b=document.documentElement,d=document.body||{scrollTop:0};return a.pageY||(a.clientY+(b.scrollTop||d.scrollTop)-(b.clientTop||0))}function P(a){N.extend(a);a.preventDefault();a.stopPropagation();a.stopped=true}N.Methods={isLeftClick:I,isMiddleClick:K,isRightClick:U,element:ae,findElement:S,pointer:L,pointerX:af,pointerY:ag,stop:P};var G=Object.keys(N.Methods).inject({},function(b,a){b[a]=N.Methods[a].methodize();return b});if(window.attachEvent){function Z(a){var b;switch(a.type){case"mouseover":case"mouseenter":b=a.fromElement;break;case"mouseout":case"mouseleave":b=a.toElement;break;default:return null}return Element.extend(b)}var J={stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}};N.extend=function(b,d){if(!b){return false}if(!ah(b)){return b}if(b._extendedByPrototype){return b}b._extendedByPrototype=Prototype.emptyFunction;var a=N.pointer(b);Object.extend(b,{target:b.srcElement||d,relatedTarget:Z(b),pageX:a.x,pageY:a.y});Object.extend(b,G);Object.extend(b,J);return b}}else{N.extend=Prototype.K}if(window.addEventListener){N.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(N.prototype,G)}function V(b,d,a){var e=Element.retrieve(b,"prototype_event_registry");if(Object.isUndefined(e)){ad.push(b);e=Element.retrieve(b,"prototype_event_registry",$H())}var g=e.get(d);if(Object.isUndefined(g)){g=[];e.set(d,g)}if(g.pluck("handler").include(a)){return false}var f;if(d.include(":")){f=function(h){if(Object.isUndefined(h.eventName)){return false}if(h.eventName!==d){return false}N.extend(h,b);a.call(b,h)}}else{if(!M&&(d==="mouseenter"||d==="mouseleave")){if(d==="mouseenter"||d==="mouseleave"){f=function(h){N.extend(h,b);var j=h.relatedTarget;while(j&&j!==b){try{j=j.parentNode}catch(k){j=b}}if(j===b){return}a.call(b,h)}}}else{f=function(h){N.extend(h,b);a.call(b,h)}}}f.handler=a;g.push(f);return f}function aa(){for(var b=0,a=ad.length;b<a;b++){N.stopObserving(ad[b]);ad[b]=null}}var ad=[];if(Prototype.Browser.IE){window.attachEvent("onunload",aa)}if(Prototype.Browser.WebKit){window.addEventListener("unload",Prototype.emptyFunction,false)}var W=Prototype.K,ab={mouseenter:"mouseover",mouseleave:"mouseout"};if(!M){W=function(a){return(ab[a]||a)}}function H(b,d,a){b=$(b);var e=V(b,d,a);if(!e){return b}if(d.include(":")){if(b.addEventListener){b.addEventListener("dataavailable",e,false)}else{b.attachEvent("ondataavailable",e);b.attachEvent("onlosecapture",e)}}else{var f=W(d);if(b.addEventListener){b.addEventListener(f,e,false)}else{b.attachEvent("on"+f,e)}}return b}function X(b,f,a){b=$(b);var g=Element.retrieve(b,"prototype_event_registry");if(!g){return b}if(!f){g.each(function(k){var l=k.key;X(b,l)});return b}var e=g.get(f);if(!e){return b}if(!a){e.each(function(k){X(b,f,k.handler)});return b}var d=e.length,h;while(d--){if(e[d].handler===a){h=e[d];break}}if(!h){return b}if(f.include(":")){if(b.removeEventListener){b.removeEventListener("dataavailable",h,false)}else{b.detachEvent("ondataavailable",h);b.detachEvent("onlosecapture",h)}}else{var j=W(f);if(b.removeEventListener){b.removeEventListener(j,h,false)}else{b.detachEvent("on"+j,h)}}g.set(f,e.without(h));return b}function E(b,d,e,f){b=$(b);if(Object.isUndefined(f)){f=true}if(b==document&&document.createEvent&&!b.dispatchEvent){b=document.documentElement}var a;if(document.createEvent){a=document.createEvent("HTMLEvents");a.initEvent("dataavailable",f,true)}else{a=document.createEventObject();a.eventType=f?"ondataavailable":"onlosecapture"}a.eventName=d;a.memo=e||{};if(document.createEvent){b.dispatchEvent(a)}else{b.fireEvent(a.eventType,a)}return N.extend(a)}N.Handler=Class.create({initialize:function(b,d,e,a){this.element=$(b);this.eventName=d;this.selector=e;this.callback=a;this.handler=this.handleEvent.bind(this)},start:function(){N.observe(this.element,this.eventName,this.handler);return this},stop:function(){N.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(a){var b=N.findElement(a,this.selector);if(b){this.callback.call(this.element,a,b)}}});function Y(b,d,e,a){b=$(b);if(Object.isFunction(e)&&Object.isUndefined(a)){a=e,e=null}return new N.Handler(b,d,e,a).start()}Object.extend(N,N.Methods);Object.extend(N,{fire:E,observe:H,stopObserving:X,on:Y});Element.addMethods({fire:E,observe:H,stopObserving:X,on:Y});Object.extend(document,{fire:E.methodize(),observe:H.methodize(),stopObserving:X.methodize(),on:Y.methodize(),loaded:false});if(window.Event){Object.extend(window.Event,N)}else{window.Event=N}})();(function(){var g;function f(){if(document.loaded){return}if(g){window.clearTimeout(g)}document.loaded=true;document.fire("dom:loaded")}function h(){if(document.readyState==="complete"){document.stopObserving("readystatechange",h);f()}}function e(){try{document.documentElement.doScroll("left")}catch(a){g=e.defer();return}f()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",f,false)}else{document.observe("readystatechange",h);if(window==top){g=e.defer()}}Event.observe(window,"load",f)})();Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(e,d){return Element.insert(e,{before:d})},Top:function(e,d){return Element.insert(e,{top:d})},Bottom:function(e,d){return Element.insert(e,{bottom:d})},After:function(e,d){return Element.insert(e,{after:d})}};var $continue=new Error('"throw $continue" is deprecated, use "return" instead');var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(d,e,f){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(d,e,f)}this.xcomp=e;this.ycomp=f;this.offset=Element.cumulativeOffset(d);return(f>=this.offset[1]&&f<this.offset[1]+d.offsetHeight&&e>=this.offset[0]&&e<this.offset[0]+d.offsetWidth)},withinIncludingScrolloffsets:function(e,f,g){var h=Element.cumulativeScrollOffset(e);this.xcomp=f+h[0]-this.deltaX;this.ycomp=g+h[1]-this.deltaY;this.offset=Element.cumulativeOffset(e);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+e.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+e.offsetWidth)},overlap:function(d,e){if(!d){return 0}if(d=="vertical"){return((this.offset[1]+e.offsetHeight)-this.ycomp)/e.offsetHeight}if(d=="horizontal"){return((this.offset[0]+e.offsetWidth)-this.xcomp)/e.offsetWidth}},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(b){Position.prepare();return Element.absolutize(b)},relativize:function(b){Position.prepare();return Element.relativize(b)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(d,f,e){e=e||{};return Element.clonePosition(f,d,e)}};if(!document.getElementsByClassName){document.getElementsByClassName=function(d){function e(a){return a.blank()?null:"[contains(concat(' ', @class, ' '), ' "+a+" ')]"}d.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(f,a){a=a.toString().strip();var b=/\s/.test(a)?$w(a).map(e).join(""):e(a);return b?document._getElementsByXPath(".//*"+b,f):[]}:function(o,n){n=n.toString().strip();var m=[],l=(/\s/.test(n)?$w(n):null);if(!l&&!n){return m}var q=$(o).getElementsByTagName("*");n=" "+n+" ";for(var p=0,a,b;a=q[p];p++){if(a.className&&(b=" "+a.className+" ")&&(b.include(n)||(l&&l.all(function(f){return !f.toString().blank()&&b.include(" "+f+" ")})))){m.push(Element.extend(a))}}return m};return function(a,b){return $(b||document.body).getElementsByClassName(a)}}(Element.Methods)}Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(b){this.element=$(b)},_each:function(b){this.element.className.split(/\s+/).select(function(a){return a.length>0})._each(b)},set:function(b){this.element.className=b},add:function(b){if(this.include(b)){return}this.set($A(this).concat(b).join(" "))},remove:function(b){if(!this.include(b)){return}this.set($A(this).without(b).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);(function(){window.Selector=Class.create({initialize:function(b){this.expression=b.strip()},findElements:function(b){return Prototype.Selector.select(this.expression,b)},match:function(b){return Prototype.Selector.match(b,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(l,k){var j=Prototype.Selector.match,n=[];for(var o=0,m=l.length;o<m;o++){var h=l[o];if(j(h,k)){n.push(Element.extend(h))}}return n},findElement:function(l,k,h){h=h||0;var j=0,n;for(var o=0,m=l.length;o<m;o++){n=l[o];if(Prototype.Selector.match(n,k)&&h===j++){return Element.extend(n)}}},findChildElements:function(d,f){var e=f.toArray().join(", ");return Prototype.Selector.select(e,d||document)}})})();Ajax.JSONRequest=Class.create(Ajax.Base,(function(){var d=0,e=document.getElementsByTagName("head")[0]||document.body;return{initialize:function($super,a,b){$super(b);this.options.url=a;this.options.callbackParamName=this.options.callbackParamName||"callback";this.options.timeout=this.options.timeout||10;this.options.invokeImmediately=(!Object.isUndefined(this.options.invokeImmediately))?this.options.invokeImmediately:true;if(!Object.isUndefined(this.options.parameters)&&Object.isString(this.options.parameters)){this.options.parameters=this.options.parameters.toQueryParams()}if(this.options.invokeImmediately){this.request()}},_cleanup:function(){if(this.timeout){clearTimeout(this.timeout);this.timeout=null}if(this.transport&&Object.isElement(this.transport)){this.transport.remove();this.transport=null}},request:function(){var j=new Ajax.JSONResponse(this);var a=this.options.callbackParamName,b="_prototypeJSONPCallback_"+(d++),k=function(){if(Object.isFunction(this.options.onComplete)){this.options.onComplete.call(this,j)}Ajax.Responders.dispatch("onComplete",this,j)}.bind(this);if(this.options.parameters[a]!==undefined){b=this.options.parameters[a]}else{this.options.parameters[a]=b}this.options.parameters[a]=b;var h=this.options.url+((this.options.url.include("?")?"&":"?")+Object.toQueryString(this.options.parameters));window[b]=function(f){this._cleanup();window[b]=undefined;j.status=200;j.statusText="OK";j.setResponseContent(f);if(Object.isFunction(this.options.onSuccess)){this.options.onSuccess.call(this,j)}Ajax.Responders.dispatch("onSuccess",this,j);k()}.bind(this);this.transport=new Element("script",{type:"text/javascript",src:h});if(Object.isFunction(this.options.onCreate)){this.options.onCreate.call(this,j)}Ajax.Responders.dispatch("onCreate",this);e.appendChild(this.transport);this.timeout=setTimeout(function(){this._cleanup();window[b]=Prototype.emptyFunction;if(Object.isFunction(this.options.onFailure)){j.status=504;j.statusText="Gateway Timeout";this.options.onFailure.call(this,j)}k()}.bind(this),this.options.timeout*1000)},toString:function(){return"[object Ajax.JSONRequest]"}}})());Ajax.JSONResponse=Class.create({initialize:function(b){this.request=b},request:undefined,status:0,statusText:"",responseJSON:undefined,responseText:undefined,setResponseContent:function(b){this.responseJSON=b;this.responseText=Object.toJSON(b)},getTransport:function(){if(this.request){return this.request.transport}},toString:function(){return"[object Ajax.JSONResponse]"}});Object.extend(Element.Methods,{show:function(b){b.style.display="block";return b},getHeight:function(e){try{var f=$(e).getDimensions().height}catch(g){var f=$(e).offsetHeight}return f},getWidth:function(f){try{var e=$(f).getDimensions().width}catch(g){var e=$(f).offsetWidth}return e},findIdInClass:function(f){var g=/id_([0-9a-z_-]+)/;var e=g.exec(f.className);return e[1]},findParamInClass:function(h,j){try{var l=new RegExp(j+"_([A-Za-z0-9/:?&-._]+)");var e=l.exec(h.className);if(e){return e[1]}}catch(k){dbg("erreur");dbg(k)}return false},findParamsInClass:function(p,l){try{var k=[];var n=new RegExp(l+"_([A-Za-z0-9/:?&-._]+)","g");var o=p.className.match(n);if(o){for(var e=0;e<o.length;e++){k.push(o[e].replace(l+"_",""))}return k}}catch(m){dbg("erreur");dbg(m)}return false},getInlineOpacity:function(b){return $(b).style.opacity||""},forceRerendering:function(f){try{f=$(f);var g=document.createTextNode(" ");f.appendChild(g);f.removeChild(g)}catch(e){}}});Object.extend(String.prototype,{escapeUtf8:function(){if(this==""||this==null){return""}var p="";for(var m=0;m<this.length;m++){var j=this.charCodeAt(m);var n=new Array();if(j>65536){n[0]=240|((j&1835008)>>>18);n[1]=128|((j&258048)>>>12);n[2]=128|((j&4032)>>>6);n[3]=128|(j&63)}else{if(j>2048){n[0]=224|((j&61440)>>>12);n[1]=128|((j&4032)>>>6);n[2]=128|(j&63)}else{if(j>128){n[0]=192|((j&1984)>>>6);n[1]=128|(j&63)}else{n[0]=j}}}chars="0123456789ABCDEF";for(var o=0;o<n.length;o++){var b=n[o];var l=chars.charAt((b&240)>>>4)+chars.charAt(b&15);p+="%"+l}}return p},querySeparator:function(){return this.indexOf("?")>=0?"&":"?"},htmlentity_decode:function(){return this.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&circ;/g,"^").replace(/&lsquo;/g,"").replace(/&rsquo;/g,"").replace(/&ldquo;/g,"").replace(/&rdquo;/g,"").replace(/&bull;/g,"").replace(/&ndash;/g,"").replace(/&mdash;/g,"").replace(/&tilde;/g,"").replace(/&trade;/g,"").replace(/&scaron;/g,"").replace(/&rsaquo;/g,"").replace(/&oelig;/g,"").replace(/&#357;/g,"").replace(/&#382;/g,"").replace(/&Yuml;/g,"").replace(/&nbsp;/g," ").replace(/&iexcl;/g,"").replace(/&cent;/g,"").replace(/&pound;/g,"").replace(/&curren;/g," ").replace(/&yen;/g,"").replace(/&brvbar;/g,"").replace(/&sect;/g,"").replace(/&uml;/g,"").replace(/&copy;/g,"").replace(/&ordf;/g,"").replace(/&laquo;/g,"").replace(/&not;/g,"").replace(/&shy;/g,"").replace(/&reg;/g,"").replace(/&macr;/g,"").replace(/&deg;/g,"").replace(/&plusmn;/g,"").replace(/&sup2;/g,"").replace(/&sup3;/g,"").replace(/&acute;/g,"").replace(/&micro;/g,"").replace(/&para/g,"").replace(/&middot;/g,"").replace(/&cedil;/g,"").replace(/&sup1;/g,"").replace(/&ordm;/g,"").replace(/&raquo;/g,"").replace(/&frac14;/g,"").replace(/&frac12;/g,"").replace(/&frac34;/g,"").replace(/&iquest;/g,"").replace(/&Agrave;/g,"").replace(/&Aacute;/g,"").replace(/&Acirc;/g,"").replace(/&Atilde;/g,"").replace(/&Auml;/g,"").replace(/&Aring;/g,"").replace(/&AElig;/g,"").replace(/&Ccedil;/g,"").replace(/&Egrave;/g,"").replace(/&Eacute;/g,"").replace(/&Ecirc;/g,"").replace(/&Euml;/g,"").replace(/&Igrave;/g,"").replace(/&Iacute;/g,"").replace(/&Icirc;/g,"").replace(/&Iuml;/g,"").replace(/&ETH;/g,"").replace(/&Ntilde;/g,"").replace(/&Ograve;/g,"").replace(/&Oacute;/g,"").replace(/&Ocirc;/g,"").replace(/&Otilde;/g,"").replace(/&Ouml;/g,"").replace(/&times;/g,"").replace(/&Oslash;/g,"").replace(/&Ugrave;/g,"").replace(/&Uacute;/g,"").replace(/&Ucirc;/g,"").replace(/&Uuml;/g,"").replace(/&Yacute;/g,"").replace(/&THORN;/g,"").replace(/&szlig;/g,"").replace(/&agrave;/g,"").replace(/&aacute;/g,"").replace(/&acirc;/g,"").replace(/&atilde;/g,"").replace(/&auml;/g,"").replace(/&aring;/g,"").replace(/&aelig;/g,"").replace(/&ccedil;/g,"").replace(/&egrave;/g,"").replace(/&eacute;/g,"").replace(/&ecirc;/g,"").replace(/&euml;/g,"").replace(/&igrave;/g,"").replace(/&iacute;/g,"").replace(/&icirc;/g,"").replace(/&iuml;/g,"").replace(/&eth;/g,"").replace(/&ntilde;/g,"").replace(/&ograve;/g,"").replace(/&oacute;/g,"").replace(/&ocirc;/g,"").replace(/&otilde;/g,"").replace(/&ouml;/g,"").replace(/&divide;/g,"").replace(/&oslash;/g,"").replace(/&ugrave;/g,"").replace(/&uacute;/g,"").replace(/&ucirc;/g,"").replace(/&uuml;/g,"").replace(/&yacute;/g,"").replace(/&thorn;/g,"").replace(/&yuml;/g,"")}});function dbg(){try{console.log.apply(console,arguments)}catch(b){try{opera.postError.apply(opera,arguments)}catch(b){alert(Array.prototype.join.call(arguments," "))}}}function setCookie(l,k,j){var h="";if(j){var g=new Date();g.setTime(g.getTime()+(j*24*60*60*1000));h="; expires="+g.toGMTString()}document.cookie=l+"="+k+h+"; path=/"}function setCookieWithFormat(n,m,k,l){var j="";if(k){if(l=="d"){millisec=24*60*60*1000}else{if(l=="h"){millisec=60*60*1000}else{if(l=="m"){millisec=60*1000}}}var h=new Date();h.setTime(h.getTime()+(k*millisec));j="; expires="+h.toGMTString()}document.cookie=n+"="+m+j+"; path=/"}function getCookie(g){var k=g+"=";var h=document.cookie.split(";");for(var l=0;l<h.length;l++){var j=h[l];while(j.charAt(0)==" "){j=j.substring(1,j.length)}if(j.indexOf(k)==0){return j.substring(k.length,j.length)}}return null}function deleteCookie(b){setCookie(b,"",-1)}function str2hex(h){var j="";var f=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");for(var g=0;g<h.length;g++){j+=f[h.charCodeAt(g)>>4]+f[h.charCodeAt(g)&15]}return j}function hex2str(j){var g=j.length;var h=new String;var f=0;for(f=0;f<g;f+=2){h+=String.fromCharCode("0x"+j.substr(f,2))}return h}function toggleElement(j,g,k){var h=$(j);if(!h){return}var l=Element.getStyle(h,"display");if(!k){k="none"}if(!l){l=k}if(g){if(g=="show"){h.style.display="block"}else{if(g=="hide"){h.style.display="none"}}}else{if(l=="none"){toggleElement(j,"show")}else{toggleElement(j,"hide")}}return h.style.display}function encodeURIComponentWrapped(b){if(typeof encodeURIComponent=="function"){return encodeURIComponent(b)}else{return b}}function ajax_call(){var args=ajax_call.arguments;var callback=args[args.length-1];var url="/ajax/"+args[0];var querystring="";querystring="ajax_function="+args[1];for(var i=2;i<args.length-1;i++){querystring+="&ajax_arg[]="+encodeURIComponentWrapped(args[i])}querystring+="&ajax_rnd="+new Date().getTime();querystring+="&from_request="+encodeURIComponent(window.location.pathname);var ajax=new Ajax.Request(url,{method:"post",postBody:querystring,onSuccess:function(request){if(request.responseText.charAt(0)=="-"){alert("Error: "+request.responseText.substring(2))}else{if(callback!=null){callback(request.responseText.substring(2))}}var json=ajax.getHeader("X-JSON");json=eval(json);if(json){var curLen=json.length;for(var j=0;j<curLen;j++){try{eval(json[j])}catch(e){}}}},on404:function(request){alert('Error 404: location "'+request.statusText+'" was not found.')},onFailure:function(request){alert("Error "+request.status+": "+request.statusText)}})}function findIdInClass(e){try{var j=/id_([0-9a-z_-]+)/;var g=j.exec(e.className);if(g){return g[1]}}catch(h){}return false}function findParamInClass(j,e){try{var l=new RegExp("(?:^| )"+j+"_([A-Za-z0-9/:?&-._]+)");var h=l.exec(e.className);if(h){return h[1]}}catch(k){}return false}function timeFormat(g){var e=Math.floor(g/3600);var f="";if(e>0){f=pad(e,2,"0")+":"}f+=pad(Math.floor(g/60),2,"0")+":"+pad(Math.floor(g%60),2,"0");return f}function pad(h,g,j){var f=h.toString();while(f.length<g){f=j+f}return f}function shuffleArray(h){for(var f,g,j=h.length;j;f=parseInt(Math.random()*j),g=h[--j],h[j]=h[f],h[f]=g){}return h}function ping(e){if($("vstag_img")){$("vstag_img").writeAttribute("src",e)}else{var d=new Element("img",{src:e,id:"vstag_img",style:"display: none;"});if($("bodyall")){$("bodyall").insert(d)}else{if($$("body")[0]){$$("body")[0].insert(d)}}}}function clearTempStorage(){window.name=""}function getTempStorage(f){var g={};try{g=window.name.evalJSON()}catch(e){}if(typeof g[f]!="undefined"){return g[f]}return null}function setTempStorage(g,e){var h={};try{h=window.name.evalJSON()}catch(j){}h[g]=e;window.name=Object.toJSON(h)}function onScrollOrResize(b){Event.observe(window,"scroll",b);Event.observe(window,"resize",b)}function unregisterOnScrollOrResize(b){Event.stopObserving(window,"scroll",b);Event.stopObserving(window,"resize",b)}function getElementViewportOffset(g){var f=null;if(g){var e=0;if(Prototype.Browser.Opera){e=document.viewport.getScrollOffsets()["top"]}f=g.viewportOffset()[1]-e}return f}if(Prototype.Browser.IE){window.IEVersion=parseFloat(navigator.appVersion.split(";")[1].strip().split(" ")[1])}Element.addMethods(Element.Methods);function getEnvironment(){var e="";var d=document.location.href;if(d.match(/\.dev\./)){return"dev"}else{if(d.match(/(\.)?stage\./)){return"stage"}else{if(d.match(/(\.)?preprod\./)){return"preprod"}}}return"prod"}function urlencode(b){b=(b+"").toString();return encodeURIComponent(b).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+").replace(/~/g,"%7E")}function urldecode(b){return decodeURIComponent((b+"").replace(/\+/g,"%20"))}function extractParamFromUri(j,n){if(!j){return}var j=j.split("#")[0];var o=j.split("?");if(o.length==1){return}var p=decodeURI(o[1]);n+="=";var l=p.split("&");for(var k=0,m;m=l[k];++k){if(m.indexOf(n)===0){return unescape(m.split("=")[1])}}}function globalEval(b){(window.execScript||function(a){window["eval"].call(window,a)})(b)}function outerHTML(b){return b.outerHTML||(function(f){var g=document.createElement("div"),a;g.appendChild(f.cloneNode(true));a=g.innerHTML;g=null;return a})(b)}(function(p){var h=function(a){return p.indexOf(a)>-1},m="gecko",q="webkit",n="safari",g="opera",o=document.documentElement,b=[(!(/opera|webtv/i.test(p))&&/msie\s(\d)/.test(p))?("ie ie"+RegExp.$1):h("firefox/2")?m+" ff2":h("firefox/3.5")?m+" ff3 ff3_5":h("firefox/3")?m+" ff3":h("gecko/")?m:h("opera")?g+(/version\/(\d+)/.test(p)?" "+g+RegExp.$1:(/opera(\s|\/)(\d+)/.test(p)?" "+g+RegExp.$2:"")):h("konqueror")?"konqueror":h("chrome")?q+" chrome":h("iron")?q+" iron":h("applewebkit/")?q+" "+n+(/version\/(\d+)/.test(p)?" "+n+RegExp.$1:""):h("mozilla/")?m:"",h("j2me")?"mobile":h("iphone")?"iphone":h("ipod")?"ipod":h("mac")?"mac":h("darwin")?"mac":h("webtv")?"webtv":h("win")?"win":h("freebsd")?"freebsd":(h("x11")||h("linux"))?"linux":"","js"];c=b.join(" ");o.className+=" "+c;return c})(navigator.userAgent.toLowerCase());DM_Environment=getEnvironment();(function(){window.DM_ENV={};window.importEnv=function(b){if(window.DM_ENV[b]){for(env_key in window.DM_ENV[b]){if(window.DM_ENV[b].hasOwnProperty(env_key)){window[b][env_key]=window.DM_ENV[b][env_key]}}}};window.getEnv=function(l){var j=(l||"").split("."),k=window.DM_ENV[j[0]];for(var g=1,h=j.length;g<h&&k;g++){k=k[j[g]]}return k}})();dom_is_ready=false;Object.extend(Event,{_domReady:function(){dom_is_ready=true;if(arguments.callee.done){return}arguments.callee.done=true;this._readyCallbacks.each(function(e){try{e()}catch(d){}});this._readyCallbacks=null},onDOMReady:function(d){if(!dom_is_ready){if(!this._readyCallbacks){var e=this._domReady.bind(this);document.observe("dom:loaded",e);Event._readyCallbacks=[]}Event._readyCallbacks.push(d)}else{try{d()}catch(f){}}}});var DM_API={initialised:false,ready:false,callbacks:[],unqueueCallbacks:function(){for(var b=0;b<this.callbacks.length;b++){this.callbacks[b]();this.callbacks.splice(b--,1)}},onReady:function(f){if(!this.initialised){if(window.dmAsyncInit){console.log("window.dmAsyncInit already exist and will be overriden!")}this.initialised=true;window.dmAsyncInit=function(){DM_API.unqueueCallbacks();DM_API.ready=true};var d=document.createElement("script"),e=document.getElementsByTagName("script")[0];d.async=true;d.src=document.location.protocol+"//api.dmcdn.net/all.js";e.parentNode.insertBefore(d,e)}if(this.ready){f()}else{this.callbacks.push(f)}return this}};var DM_LazyLoad={observing:false,vpHeight:null,vpScrollOffTop:null,groups:{},groupsCount:0,isMobileDevice:!!navigator.userAgent.match(/iPhone|iPod|iPad|Android|Windows Phone OS/i),findAll:function(b){$$((b||"")+" img[data-src]").each(function(a){var d=a.getAttribute("data-lg");if(!DM_LazyLoad.groups[d]){DM_LazyLoad.groups[d]=[];DM_LazyLoad.groupsCount++}DM_LazyLoad.groups[d].push(a)})},findInContextAndlLoad:function(b){DM_LazyLoad.findAll(b);DM_LazyLoad.loadVisible();DM_LazyLoad.initObservers()},foreachGroup:function(b){for(groupName in DM_LazyLoad.groups){b(groupName)}},loadImg:function(e){var d=e.getAttribute("data-src");if(d){e.src=e.getAttribute("data-src");e.removeAttribute("data-src");e.removeAttribute("data-lg")}},loadVisible:function(b){if(DM_LazyLoad.isMobileDevice){return DM_LazyLoad.foreachGroup(function(e){for(var a=DM_LazyLoad.groups[e].length,f=0;f<a;f++){DM_LazyLoad.loadImg(DM_LazyLoad.groups[e][f])}})}DM_LazyLoad.foreachGroup(function(a){var l=DM_LazyLoad.groups[a],r=0,n=l[r],p=getElementViewportOffset(n),q=0,s=l.length,m=p<0||DM_LazyLoad.vpScrollOffTop+p-100<=DM_LazyLoad.vpScrollOffTop+DM_LazyLoad.vpHeight;if(m){do{for(var o=0;o<4&&q+o<s;o++){DM_LazyLoad.loadImg(l[q+o])}q+=o;r+=4;n=l[r];p=getElementViewportOffset(n);m=p<0||DM_LazyLoad.vpScrollOffTop+p-100<=DM_LazyLoad.vpScrollOffTop+DM_LazyLoad.vpHeight}while(m&&r<DM_LazyLoad.groups[a].length);if(!(DM_LazyLoad.groups[a].length-q)||q<=1){delete (DM_LazyLoad.groups[a]);DM_LazyLoad.groupsCount--}else{DM_LazyLoad.groups[a]=DM_LazyLoad.groups[a].slice(q)}}});if(!DM_LazyLoad.groupsCount){DM_LazyLoad.stopObservers()}},scroll:function(){if(arguments.callee.lock){return}arguments.callee.lock=true;DM_LazyLoad.scrollTimeout=setTimeout(DM_LazyLoad.scrollCallback,250)},scrollCallback:function(){DM_LazyLoad.vpScrollOffTop=document.viewport.getScrollOffsets()["top"];DM_LazyLoad.loadVisible();DM_LazyLoad.scroll.lock=false},resize:function(){if(arguments.callee.lock){return}arguments.callee.lock=true;setTimeout(DM_LazyLoad.resizeCallback,250)},resizeCallback:function(){DM_LazyLoad.vpHeight=document.viewport.getHeight();DM_LazyLoad.loadVisible();DM_LazyLoad.resize.lock=false},initObservers:function(){if(DM_LazyLoad.isMobileDevice||DM_LazyLoad.observing||!DM_LazyLoad.groupsCount){return}Event.observe(window,"scroll",DM_LazyLoad.scroll);Event.observe(window,"resize",DM_LazyLoad.resize);DM_LazyLoad.observing=true},stopObservers:function(){Event.stopObserving(window,"scroll",DM_LazyLoad.scroll);Event.stopObserving(window,"resize",DM_LazyLoad.resize);DM_LazyLoad.observing=false},initialize:function(){Event.onDOMReady(function(){DM_LazyLoad.vpHeight=document.viewport.getHeight();DM_LazyLoad.vpScrollOffTop=document.viewport.getScrollOffsets()["top"];DM_LazyLoad.findInContextAndlLoad()})}};DM_LazyLoad.initialize();if(typeof deconcept=="undefined"){var deconcept=new Object()}if(typeof deconcept.util=="undefined"){deconcept.util=new Object()}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object()}deconcept.SWFObject=function(u,w,o,t,r,p,h,s,y,v){if(!document.getElementById){return}this.DETECT_KEY=v?v:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(u){this.setAttribute("swf",u)}if(w){this.setAttribute("id",w)}if(o){this.setAttribute("width",o)}if(t){this.setAttribute("height",t)}if(r){this.setAttribute("version",new deconcept.PlayerVersion(r.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true}if(p){this.addParam("bgcolor",p)}var x=h?h:"high";this.addParam("quality",x);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var q=(s)?s:window.location;this.setAttribute("xiRedirectUrl",q);this.setAttribute("redirectUrl","");if(y){this.setAttribute("redirectUrl",y)}};deconcept.SWFObject.prototype={useExpressInstall:function(b){this.xiSWFPath=!b?"expressinstall.swf":b;this.setAttribute("useExpressInstall",true)},setAttribute:function(e,d){this.attributes[e]=d},getAttribute:function(b){return this.attributes[b]},addParam:function(e,d){this.params[e]=d},getParams:function(){return this.params},addVariable:function(e,d){this.variables[e]=d},getVariable:function(b){return this.variables[b]},getVariables:function(){return this.variables},getVariablePairs:function(){var e=new Array();var d;var f=this.getVariables();for(d in f){e[e.length]=d+"="+f[d]}return e},getSWFHTML:function(){var g="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}g='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';g+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var h=this.getParams();for(var f in h){g+=[f]+'="'+h[f]+'" '}var e=this.getVariablePairs().join("&");if(e.length>0){g+='flashvars="'+e+'"'}g+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}g='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';g+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var h=this.getParams();for(var f in h){g+='<param name="'+f+'" value="'+h[f]+'" />'}var e=this.getVariablePairs().join("&");if(e.length>0){g+='<param name="flashvars" value="'+e+'" />'}g+="</object>"}return g},write:function(e){if(this.getAttribute("useExpressInstall")){var d=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(d)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var f=(typeof e=="string")?document.getElementById(e):e;f.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var k=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var g=navigator.plugins["Shockwave Flash"];if(g&&g.description){k=new deconcept.PlayerVersion(g.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var j=1;var e=3;while(j){try{e++;j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e);k=new deconcept.PlayerVersion([e,0,0])}catch(h){j=null}}}else{try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(h){try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");k=new deconcept.PlayerVersion([6,0,21]);j.AllowScriptAccess="always"}catch(h){if(k.major==6){return k}}try{j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(h){}}if(j!=null){k=new deconcept.PlayerVersion(j.GetVariable("$version").split(" ")[1].split(","))}}}return k};deconcept.PlayerVersion=function(b){this.major=b[0]!=null?parseInt(b[0]):0;this.minor=b[1]!=null?parseInt(b[1]):0;this.rev=b[2]!=null?parseInt(b[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(b){if(this.major<b.major){return false}if(this.major>b.major){return true}if(this.minor<b.minor){return false}if(this.minor>b.minor){return true}if(this.rev<b.rev){return false}return true};deconcept.util={getRequestParameter:function(g){var h=document.location.search||document.location.hash;if(g==null){return h}if(h){var e=h.substring(1).split("&");for(var f=0;f<e.length;f++){if(e[f].substring(0,e[f].indexOf("="))==g){return e[f].substring((e[f].indexOf("=")+1))}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var f=document.getElementsByTagName("OBJECT");for(var d=f.length-1;d>=0;d--){f[d].style.display="none";for(var e in f[d]){if(typeof f[d][e]=="function"){f[d][e]=function(){}}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(!document.getElementById&&document.all){document.getElementById=function(b){return document.all[b]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;var swfobject=function(){var n="undefined",V="object",C="Shockwave Flash",f="ShockwaveFlash.ShockwaveFlash",U="application/x-shockwave-flash",B="SWFObjectExprInst",g="onreadystatechange",y=window,N=document,aa=navigator,D=false,a=[L],S=[],x=[],s=[],P,A,o,l,t=false,E=false,R,q,Q=true,w=function(){var aj=typeof N.getElementById!=n&&typeof N.getElementsByTagName!=n&&typeof N.createElement!=n,af=aa.userAgent.toLowerCase(),ah=aa.platform.toLowerCase(),ac=ah?/win/.test(ah):/win/.test(af),Y=ah?/mac/.test(ah):/mac/.test(af),ad=/webkit/.test(af)?parseFloat(af.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ag=!+"\v1",ae=[0,0,0],X=null;if(typeof aa.plugins!=n&&typeof aa.plugins[C]==V){X=aa.plugins[C].description;if(X&&!(typeof aa.mimeTypes!=n&&aa.mimeTypes[U]&&!aa.mimeTypes[U].enabledPlugin)){D=true;ag=false;X=X.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ae[0]=parseInt(X.replace(/^(.*)\..*$/,"$1"),10);ae[1]=parseInt(X.replace(/^.*\.(.*)\s.*$/,"$1"),10);ae[2]=/[a-zA-Z]/.test(X)?parseInt(X.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof y.ActiveXObject!=n){try{var Z=new ActiveXObject(f);if(Z){X=Z.GetVariable("$version");if(X){ag=true;X=X.split(" ")[1].split(",");ae=[parseInt(X[0],10),parseInt(X[1],10),parseInt(X[2],10)]}}}catch(ai){}}}return{w3:aj,pv:ae,wk:ad,ie:ag,win:ac,mac:Y}}(),O=function(){if(!w.w3){return}if((typeof N.readyState!=n&&N.readyState=="complete")||(typeof N.readyState==n&&(N.getElementsByTagName("body")[0]||N.body))){J()}if(!t){if(typeof N.addEventListener!=n){N.addEventListener("DOMContentLoaded",J,false)}if(w.ie&&w.win){N.attachEvent(g,function(){if(N.readyState=="complete"){N.detachEvent(g,arguments.callee);J()}});if(y==top){(function(){if(t){return}try{N.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}J()})()}}if(w.wk){(function(){if(t){return}if(!/loaded|complete/.test(N.readyState)){setTimeout(arguments.callee,0);return}J()})()}W(J)}}();function J(){if(t){return}try{var X=N.getElementsByTagName("body")[0].appendChild(m("span"));X.parentNode.removeChild(X)}catch(Y){return}t=true;var Z=a.length;for(var ac=0;ac<Z;ac++){a[ac]()}}function u(X){if(t){X()}else{a[a.length]=X}}function W(Y){if(typeof y.addEventListener!=n){y.addEventListener("load",Y,false)}else{if(typeof N.addEventListener!=n){N.addEventListener("load",Y,false)}else{if(typeof y.attachEvent!=n){M(y,"onload",Y)}else{if(typeof y.onload=="function"){var X=y.onload;y.onload=function(){X();Y()}}else{y.onload=Y}}}}}function L(){if(D){d()}else{r()}}function d(){var Z=N.getElementsByTagName("body")[0];var X=m(V);X.setAttribute("type",U);var Y=Z.appendChild(X);if(Y){var ac=0;(function(){if(typeof Y.GetVariable!=n){var ad=Y.GetVariable("$version");if(ad){ad=ad.split(" ")[1].split(",");w.pv=[parseInt(ad[0],10),parseInt(ad[1],10),parseInt(ad[2],10)]}}else{if(ac<10){ac++;setTimeout(arguments.callee,10);return}}Z.removeChild(X);Y=null;r()})()}else{r()}}function r(){var ae=S.length;if(ae>0){for(var ad=0;ad<ae;ad++){var ai=S[ad].id;var X=S[ad].callbackFn;var ak={success:false,id:ai};if(w.pv[0]>0){var ac=G(ai);if(ac){if(p(S[ad].swfVersion)&&!(w.wk&&w.wk<312)){e(ai,true);if(X){ak.success=true;ak.ref=j(ai);X(ak)}}else{if(S[ad].expressInstall&&k()){var ag={};ag.data=S[ad].expressInstall;ag.width=ac.getAttribute("width")||"0";ag.height=ac.getAttribute("height")||"0";if(ac.getAttribute("class")){ag.styleclass=ac.getAttribute("class")}if(ac.getAttribute("align")){ag.align=ac.getAttribute("align")}var af={};var ah=ac.getElementsByTagName("param");var Y=ah.length;for(var Z=0;Z<Y;Z++){if(ah[Z].getAttribute("name").toLowerCase()!="movie"){af[ah[Z].getAttribute("name")]=ah[Z].getAttribute("value")}}z(ag,af,ai,X)}else{T(ac);if(X){X(ak)}}}}}else{e(ai,true);if(X){var aj=j(ai);if(aj&&typeof aj.SetVariable!=n){ak.success=true;ak.ref=aj}X(ak)}}}}}function j(X){var Z=null;var ac=G(X);if(ac&&ac.nodeName=="OBJECT"){if(typeof ac.SetVariable!=n){Z=ac}else{var Y=ac.getElementsByTagName(V)[0];if(Y){Z=Y}}}return Z}function k(){return !E&&p("6.0.65")&&(w.win||w.mac)&&!(w.wk&&w.wk<312)}function z(ad,af,Z,ae){E=true;o=ae||null;l={success:false,id:Z};var Y=G(Z);if(Y){if(Y.nodeName=="OBJECT"){P=K(Y);A=null}else{P=Y;A=Z}ad.id=B;if(typeof ad.width==n||(!/%$/.test(ad.width)&&parseInt(ad.width,10)<310)){ad.width="310"}if(typeof ad.height==n||(!/%$/.test(ad.height)&&parseInt(ad.height,10)<137)){ad.height="137"}N.title=N.title.slice(0,47)+" - Flash Player Installation";var X=w.ie&&w.win?"ActiveX":"PlugIn",ag="MMredirectURL="+y.location.toString().replace(/&/g,"%26")+"&MMplayerType="+X+"&MMdoctitle="+N.title;if(typeof af.flashvars!=n){af.flashvars+="&"+ag}else{af.flashvars=ag}if(w.ie&&w.win&&Y.readyState!=4){var ac=m("div");Z+="SWFObjectNew";ac.setAttribute("id",Z);Y.parentNode.insertBefore(ac,Y);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}ab(ad,af,Z)}}function T(Y){if(w.ie&&w.win&&Y.readyState!=4){var X=m("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(K(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(K(Y),Y)}}function K(X){var ad=m("div");if(w.win&&w.ie){ad.innerHTML=X.innerHTML}else{var ac=X.getElementsByTagName(V)[0];if(ac){var Y=ac.childNodes;if(Y){var Z=Y.length;for(var ae=0;ae<Z;ae++){if(!(Y[ae].nodeType==1&&Y[ae].nodeName=="PARAM")&&!(Y[ae].nodeType==8)){ad.appendChild(Y[ae].cloneNode(true))}}}}}return ad}function ab(ag,ae,ai){var ah,ak=G(ai);if(w.wk&&w.wk<312){return ah}if(ak){if(typeof ag.id==n){ag.id=ai}if(w.ie&&w.win){var af="";for(var ac in ag){if(ag[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="data"){ae.movie=ag[ac]}else{if(ac.toLowerCase()=="styleclass"){af+=' class="'+ag[ac]+'"'}else{if(ac.toLowerCase()!="classid"){af+=" "+ac+'="'+ag[ac]+'"'}}}}}var ad="";for(var Z in ae){if(ae[Z]!=Object.prototype[Z]){ad+='<param name="'+Z+'" value="'+ae[Z]+'" />'}}ak.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+af+">"+ad+"</object>";x[x.length]=ag.id;ah=G(ag.id)}else{var aj=m(V);aj.setAttribute("type",U);for(var Y in ag){if(ag[Y]!=Object.prototype[Y]){if(Y.toLowerCase()=="styleclass"){aj.setAttribute("class",ag[Y])}else{if(Y.toLowerCase()!="classid"){aj.setAttribute(Y,ag[Y])}}}}for(var X in ae){if(ae[X]!=Object.prototype[X]&&X.toLowerCase()!="movie"){I(aj,X,ae[X])}}ak.parentNode.replaceChild(aj,ak);ah=aj}}return ah}function I(X,Z,ac){var Y=m("param");Y.setAttribute("name",Z);Y.setAttribute("value",ac);X.appendChild(Y)}function h(Y){var X=G(Y);if(X&&X.nodeName=="OBJECT"){if(w.ie&&w.win){X.style.display="none";(function(){if(X.readyState==4){F(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function F(Y){var X=G(Y);if(X){for(var Z in X){if(typeof X[Z]=="function"){X[Z]=null}}X.parentNode.removeChild(X)}}function G(Y){var Z=null;try{Z=N.getElementById(Y)}catch(X){}return Z}function m(X){return N.createElement(X)}function M(Y,Z,X){Y.attachEvent(Z,X);s[s.length]=[Y,Z,X]}function p(Y){var X=w.pv,Z=Y.split(".");Z[0]=parseInt(Z[0],10);Z[1]=parseInt(Z[1],10)||0;Z[2]=parseInt(Z[2],10)||0;return(X[0]>Z[0]||(X[0]==Z[0]&&X[1]>Z[1])||(X[0]==Z[0]&&X[1]==Z[1]&&X[2]>=Z[2]))?true:false}function b(X,ac,Y,af){if(w.ie&&w.mac){return}var ad=N.getElementsByTagName("head")[0];if(!ad){return}var Z=(Y&&typeof Y=="string")?Y:"screen";if(af){R=null;q=null}if(!R||q!=Z){var ae=m("style");ae.setAttribute("type","text/css");ae.setAttribute("media",Z);R=ad.appendChild(ae);if(w.ie&&w.win&&typeof N.styleSheets!=n&&N.styleSheets.length>0){R=N.styleSheets[N.styleSheets.length-1]}q=Z}if(w.ie&&w.win){if(R&&typeof R.addRule==V){R.addRule(X,ac)}}else{if(R&&typeof N.createTextNode!=n){R.appendChild(N.createTextNode(X+" {"+ac+"}"))}}}function e(Y,Z){if(!Q){return}var X=Z?"visible":"hidden";if(t&&G(Y)){G(Y).style.visibility=X}else{b("#"+Y,"visibility:"+X)}}function v(X){var Y=/[\\\"<>\.;]/;var Z=Y.exec(X)!=null;return Z&&typeof encodeURIComponent!=n?encodeURIComponent(X):X}var H=function(){if(w.ie&&w.win){window.attachEvent("onunload",function(){var Y=s.length;for(var X=0;X<Y;X++){s[X][0].detachEvent(s[X][1],s[X][2])}var ad=x.length;for(var ae=0;ae<ad;ae++){h(x[ae])}for(var ac in w){w[ac]=null}w=null;for(var Z in swfobject){swfobject[Z]=null}swfobject=null})}}();return{registerObject:function(Y,Z,ad,X){if(w.w3&&Y&&Z){var ac={};ac.id=Y;ac.swfVersion=Z;ac.expressInstall=ad;ac.callbackFn=X;S[S.length]=ac;e(Y,false)}else{if(X){X({success:false,id:Y})}}},getObjectById:function(X){if(w.w3){return j(X)}},embedSWF:function(X,af,ac,ae,ah,aj,ai,Z,ad,Y){var ag={success:false,id:af};if(w.w3&&!(w.wk&&w.wk<312)&&X&&af&&ac&&ae&&ah){e(af,false);u(function(){ac+="";ae+="";var am={};if(ad&&typeof ad===V){for(var ao in ad){am[ao]=ad[ao]}}am.data=X;am.width=ac;am.height=ae;var ap={};if(Z&&typeof Z===V){for(var an in Z){ap[an]=Z[an]}}if(ai&&typeof ai===V){for(var al in ai){if(typeof ap.flashvars!=n){ap.flashvars+="&"+al+"="+ai[al]}else{ap.flashvars=al+"="+ai[al]}}}if(p(ah)){var ak=ab(am,ap,af);if(am.id==af){e(af,true)}ag.success=true;ag.ref=ak}else{if(aj&&k()){am.data=aj;z(am,ap,af,Y);return}else{e(af,true)}}if(Y){Y(ag)}})}else{if(Y){Y(ag)}}},switchOffAutoHideShow:function(){Q=false},ua:w,getFlashPlayerVersion:function(){return{major:w.pv[0],minor:w.pv[1],release:w.pv[2]}},hasFlashPlayerVersion:p,createSWF:function(Y,X,Z){if(w.w3){return ab(Y,X,Z)}else{return undefined}},showExpressInstall:function(X,Y,Z,ac){if(w.w3&&k()){z(X,Y,Z,ac)}},removeSWF:function(X){if(w.w3){h(X)}},createCSS:function(X,Y,ac,Z){if(w.w3){b(X,Y,ac,Z)}},addDomLoadEvent:u,addLoadEvent:W,getQueryParamValue:function(X){var Y=N.location.search||N.location.hash;if(Y){if(/\?/.test(Y)){Y=Y.split("?")[1]}if(X==null){return v(Y)}var ac=Y.split("&");for(var Z=0;Z<ac.length;Z++){if(ac[Z].substring(0,ac[Z].indexOf("="))==X){return v(ac[Z].substring((ac[Z].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(E){var X=G(B);if(X&&P){X.parentNode.replaceChild(P,X);if(A){e(A,true);if(w.ie&&w.win){P.style.display="block"}}if(o){o(l)}}E=false}}}}();DM_Player={onDailymotionPlayerReadyCallbacks:[],domReady:false,allowDebug:false,playerIds:[],players:[],playerLogs:[],lazyPreviews:[],logContainer:null,logFilter:null,launchCallbacks:function(){if(DM_Player.domReady===true){var f=null;while((f=DM_Player.playerIds.pop())){for(var e=0;e<DM_Player.onDailymotionPlayerReadyCallbacks.length;e++){try{DM_Player.onDailymotionPlayerReadyCallbacks[e](f)}catch(d){console.log(d)}}}}},addReadyCallback:function(e){try{DM_Player.onDailymotionPlayerReadyCallbacks.push(e)}catch(d){console.log(d)}},initLogs:function(){DM_Player.logContainer=$("dmplayerv4log");DM_Player.logFilter=$("dmplayerv4logfilter");for(var b=0;b<DM_Player.playerLogs.length;b++){DM_Player.log(DM_Player.playerLogs[b])}},log:function(d){if(DM_Player.domReady===true&&DM_Player.logContainer){if(DM_Player.logFilter&&DM_Player.logFilter.value!==""){var e=new RegExp(DM_Player.logFilter.value);if(!e.match(d)){return}}DM_Player.logContainer.insert(d.replace(/^\[(.+)\](.+)$/g,'<div class="$1"><strong>[$1]</strong>$2</div>'));DM_Player.logContainer.scrollTop=DM_Player.logContainer.scrollHeight}try{console.log(d)}catch(f){}},getHtml5Player:function(){return'<div class="dmpi_video_playerv4"><video  src="http://snapshot.opera.com/resources/BigBuckBunny.ogv" autoplay></video><div id="controls">toto</div></div>'},playLazyPlayer:function(id){var so=eval("so_"+id);so.write("container_"+id)},setLazyPreview:function(d,e){this.lazyPreviews.push({id:d,previewURL:e})},loadLazyPreviews:function(){for(var e=0;e<this.lazyPreviews.length;e++){var d=new Element("img",{src:this.lazyPreviews[e].previewURL});this.loadImage(d,$(this.lazyPreviews[e].id+"_lazy_preview"))}},loadImage:function(e,d){if(!e.complete||(typeof e.naturalWidth!="undefined"&&e.naturalWidth===0)){setTimeout(function(){this.loadImage(e,d)}.bind(this),50)}else{d.insert(e);this.adjusteImage(e,d)}},adjusteImage:function(l,j){var k=l.getWidth();var o=l.getHeight();var p=j.getWidth();var m=j.getHeight();if(k!=p||o!=m){var n=0;var q=0;if(k/o>p/m){n=m;q=Math.round(m*(k/o))}else{q=p;n=Math.round(p*(o/k))}l.setStyle({width:q+"px",height:n+"px",left:"-"+Math.round((q-p)/2)+"px",top:"-"+Math.round((n-m)/2)+"px"})}},hideAllPlayers:function(){var e=function(a){if(!$(a.id).up("#popupContent")){a.previousState=a.object.getPlayerState();a.object.up().addClassName("hidden");a.object.setStyle({visibility:"hidden"});DM_Player.pausePlayer(a)}};try{if(this.players.length){this.players.each(e)}else{DM_Player.addReadyCallback(function(a){e({object:$(a),id:a})})}$$(".dmpi_video_partnerplayer").each(function(a){a.up().addClassName("hidden");a.setStyle({visibility:"hidden"})})}catch(d){}},showAllPlayers:function(){try{this.players.each(function(d){clearTimeout(d.pauseTimeout);d.object.up().removeClassName("hidden");d.object.setStyle({visibility:"visible"});var a=d.object.getAPICustomParams();if(d.previousState==1||(d.previousState==-1&&a.autoplay)||d.previousState==3){d.object.playVideo()}});$$(".dmpi_video_partnerplayer").each(function(a){a.up().removeClassName("hidden");a.setStyle({visibility:"visible"})})}catch(b){}},pausePlayer:function(e){clearTimeout(e.pauseTimeout);var d=e.object.getPlayerState();if(d==-1||d==3||d>100){e.pauseTimeout=setTimeout(function(){DM_Player.pausePlayer(e)}.bind(this),500)}else{if(d==1){e.object.pauseVideo()}}},showWarning:function(j,h,l){var g=new Element("div").addClassName("warning");var k=new Element("p");k.addClassName("title");k.update(h);var m=new Element("p");m.addClassName("message");m.update(l);g.insert(k);g.insert(m);$("container_"+j).addClassName("notice");$("container_"+j).update(g)}};function onDailymotionPlayerReady(b){DM_Player.playerIds.push(b);DM_Player.players.push({object:$(b),id:b,previousState:0,pauseTimeout:0});DM_Player.launchCallbacks();DM_Player.initLogs()}function dailymotionPlayerLog(b){if(DM_Player.allowDebug){DM_Player.playerLogs.push(b);DM_Player.log(b)}}Event.onDOMReady(function(){DM_Player.domReady=true;DM_Player.launchCallbacks();DM_Player.loadLazyPreviews();DM_Player.initLogs()});var DM_JS={loaded:{},templatePath:null,internalScriptHost:null,features:{Extras:"/js/gen/widget/pack/extras.js",DM_Widget_Popup:"/js/gen/widget/pack/popup.js",DM_PlayerLightAndExpander:"/js/gen/lib/player_light_and_expander.js",SearchVideos:"/js/gen/lib/search_videos.js"},empty:function(){},get:function(e,d){if(DM_JS.features[e]){DM_JS.load(DM_JS.features[e],e,d)}},getRealPath:function(g){var e=(Prototype.Browser.IE?("?dmr="+(new Date()).getTime()):""),h=g.match(/\.v[a-f0-9]+$/),f=DM_Hash[g.replace(/\/js\/gen\//,"")];if(!h&&!f){dbg('Wrong "file to hash" mapping with '+g)}return(!g.match(/^http/)?DM_JS.getInternalScriptHost():"")+g+(h?"":(".v"+f+e))},getInternalScriptHost:function(){if(!DM_JS.internalScriptHost){var e=$$("script");for(var f=0,d=e.size();f<d;f++){if(e[f].src.match(/\/pack\/mandatory.js/)){DM_JS.internalScriptHost=e[f].src.replace(/\/js.*/,"");break}}e=undefined}return DM_JS.internalScriptHost},load:function(m,j,l,k){var o=!!window[j];if(!o&&!DM_JS.loaded[j]){var p=$$("head")[0]||document.documentElement,q=document.createElement("script");q.async="async";q.setAttribute("type","text/javascript");if(!m.match(/\/js\//)&&!m.match(new RegExp(DM_JS.getInternalScriptHost()+"/js/"))){var n=(Prototype.Browser.IE?("?dmr="+(new Date()).getTime()):"");q.onload=q.onreadystatechange=function(){if(!q.readyState||/loaded|complete/.test(q.readyState)){q.onload=q.onreadystatechange=null;if(p&&q.parentNode){p.removeChild(q)}q=undefined;if(DM_JS.loaded[j]){DM_JS.loaded[j]()}}};q.setAttribute("src",m+n)}else{q.setAttribute("src",DM_JS.getRealPath(m))}p.insertBefore(q,p.firstChild)}DM_JS.loaded[j]=(k&&!o?DM_JS.empty:l)||DM_JS.empty;if(o){DM_JS.loaded[j]()}},isLoaded:function(b){if(DM_JS.loaded[b]){DM_JS.loaded[b]()}else{DM_JS.loaded[b]=DM_JS.empty}}};var DM_Widget_PageItem_Masscast={allowDebug:false,enableCrossFade:false,enableRotateAd:false,debugLogs:[],crossFadeDuration:1,allowedDerivated:["Middle","Middle1","Middle2","Top","Right","Right1","Right2","Right3","BottomLeft","x28","x30","Bottom","BottomRight"],allowedPosition:["Middle","Middle1","Middle2","Top","Top3","Right","Right1","Right2","Right3","BottomLeft","Preroll","Midroll","Postroll","Frame1","x11","x13","x28","x30","x69","x70","Bottom","BottomRight"],positionMinHeight:{Middle:250,Middle1:75,Middle2:75,Top:90,Right1:100,Right2:100,Right3:100,BottomLeft:133,x30:250,Bottom:90},positionCalled:[],positionOlded:[],defaultReloadTime:{},reloadTime:{},reloadMaxDuration:{},reloadTimeout:{},positionCode:{},initDate:new Date(),OAS_RICH:null,call:null,canCallOAS:true,richedOAS:false,noFrame:false,playerFirstPlay:true,playerOptions:[],isInIframe:false,auditudeRunning:false,auditudeReady:false,domeIsReady:false,mandatoryJS:"",baseJS:"",baseSkin:"",player:null,buzzpackPlayer:null,bodyLink:"",bodyLinkBlank:true,topBannerLink:false,debug:function(j){var f=new Date();var g=(f.getHours()<10)?"0"+f.getHours():f.getHours();var k=(f.getMinutes()<10)?"0"+f.getMinutes():f.getMinutes();var h=(f.getSeconds()<10)?"0"+f.getSeconds():f.getSeconds();if(this.isInIframe){j=g+":"+k+":"+h+" - (from iframe) - "+j}else{j=g+":"+k+":"+h+" - (from site) - "+j}DM_Widget_PageItem_Masscast.debugLogs.push(j);if(this.allowDebug&&typeof console!="undefined"){console.log(j)}},showDebug:function(){$A(DM_Widget_PageItem_Masscast.debugLogs).each(function(b){console.log(b)})},callOAS:function(d){if(this.canCallOAS===false){return}this.canCallOAS=false;DM_Widget_PageItem_Masscast.debug("Calling OAS ...");this.call=d;var e=new Element("script",{src:this.call,id:"oas_call",type:"text/javascript"});$$("head")[0].insert(e)},richOAS:function(){if(typeof OAS_RICH!="function"||this.richedOAS===true){return}this.richedOAS=true;DM_Widget_PageItem_Masscast.debug("Looking for data from OAS");var d=document.write;var f;document.write=function(a){f=f+a};for(var e=0;e<this.allowedPosition.length;e++){f="";OAS_RICH(this.allowedPosition[e]);this.positionCode[this.allowedPosition[e]]=f}document.write=d;this.getPageSkin()},onAdHasMiddle:function(){if(window.masscast_async_call){return}this.debug("AUDITUDE has middle");this.positionCode.Middle="// Default ad";this.positionOlded.push("Middle")},onAdHasTop:function(){if(window.masscast_async_call){return}this.debug("AUDITUDE has top");this.positionCode.Top="// Default ad";this.positionOlded.push("Top")},onAdReady:function(){if(window.masscast_async_call){return}this.debug("AUDITUDE ready");if(!this.auditudeReady&&this.domeIsReady&&this.auditudeRunning){this.renderAllPosition()}this.auditudeReady=true},onAdDisplayBanner:function(e){if(window.masscast_async_call){return}var h=e.width;var f=e.height;var g=e.data;this.debug("AUDITUDE displayBaneer "+h+"x"+f+" : "+g);if(h==728&&f==90&&$("mc_Top")){$("mc_Top").show();if(g.substr(0,7)=="http://"){g=g.replace(/\/\/ad.auditude.com/i,"//auditude.dailymotion.com");$("mc_Top").update(new Element("iframe",{src:g,width:h+"px",height:f+"px",scrolling:"no",frameBorder:"0",allowTransparency:"true","class":"masscast"}))}else{$("mc_Top").update(g)}}else{if(h==300&&f==250&&$("mc_Middle")){$("mc_Middle").show();if(g.substr(0,7)=="http://"){g=g.replace(/\/\/ad.auditude.com/i,"//auditude.dailymotion.com");$("mc_Middle").update(new Element("iframe",{src:g,width:h+"px",height:f+"px",scrolling:"no",frameBorder:"0",allowTransparency:"true","class":"masscast"}))}else{$("mc_Middle").update(g)}}}},forceDomain:function(){document.domain="dailymotion.com"},getBuzzableVideoId:function(){var code=eval(this.positionCode.x11);if(typeof code!="undefined"&&typeof code.videoId!="undefined"){return code.videoId}return false},getBuzzableTitle:function(){var code=eval(this.positionCode.x11);if(typeof code!="undefined"&&typeof code.title!="undefined"){return code.title}return false},getBuzzableVideoTitle:function(){var code=eval(this.positionCode.x11);if(typeof code!="undefined"&&typeof code.videotitle!="undefined"){return code.videotitle}return false},getBuzzableVideoClickCount:function(){var code=eval(this.positionCode.x11);if(typeof code!="undefined"&&typeof code.clickCount!="undefined"){return code.clickCount}return false},getBuzzableVideoRedirectUrl:function(){var code=eval(this.positionCode.x11);if(typeof code!="undefined"&&typeof code.redirectUrl!="undefined"){return code.redirectUrl}return false},redirectAfterClickCount:function(f,d){var e=document.createElement("img");e.src=f;$("bodyall").appendChild(e);setTimeout(function(){document.location.href=d},500);return false},render:function(k,h){if(!h){var h="buzzpack"}switch(h){case"masthead":var j=970;var f=250;var g="Top";break;case"buzzpack":var j=300;var f=250;var g="Middle";break}playerOptions={masthead_clickURL:"",masthead_clickTarget:"_blank",masthead_clickTag:"",masthead_backgroundURL:"",masthead_playerX:530,masthead_playerY:10,masthead_playerWidth:420,masthead_playerHeight:260,start:1,end:10,preview:0,skin:"",VSTag:"",videoURI:"",related:1,animatedTitle:"",autoPlay:0,autoMute:1,hideInfos:0,chromeless:0,expandVideo:0,auditude:0,hideVideoActions:0,startOnRollOver:0,animatedTitle:"",clickThroughURL:"",clickThroughTarget:"_blank",clickThroughTag:"",forcedQuality:"",clickThroughHotspot:1,complete_0:"",complete_25:"",complete_50:"",complete_75:"",complete_100:"",linkLabel:"",linkURL:"",linkTarget:"",repeat:""};for(attribute in k){playerOptions[attribute]=k[attribute]}if(h=="buzzpack"&&(playerOptions.autoPlay||playerOptions.preview==1)){h="static_buzzpack"}if(DM_Widget_PageItem_Masscast.noFrame===true){document.write('<div style="width: '+j+"px; height: "+f+'px;"></div>')}else{Element.extend(document.body);document.body.update(new Element("div").setStyle({width:j+"px",height:f+"px"}))}ajax_call("masscast","get_"+h+"_player",Object.toJSON($H(playerOptions)),function(b){if(DM_Widget_PageItem_Masscast.noFrame===true){if(h=="masthead"){$("wrapper").setStyle({padding:"0px"})}$("mc_"+g).update(b);if(h=="buzzpack"){$("mc_"+g).insert({top:'<a id="buzzpack_play_button" href="javascript:void(0)" onclick="DM_Widget_PageItem_Masscast.playBuzzpackVideo(); return false;">Play</a>'})}}else{if(h=="masthead"){window.parent.$("wrapper").setStyle({padding:"0px"})}document.body.down().update(b);if(h=="buzzpack"){document.body.down().insert({top:'<a id="buzzpack_play_button" href="javascript:void(0)" onclick="DM_Widget_PageItem_Masscast.playBuzzpackVideo(); return false;">Play</a>'});$("buzzpack_play_button").setStyle({display:"block",height:"250px",left:"0",position:"absolute",textIndent:"-9000px",top:"0",width:"300px",zIndex:"10",backgroundImage:"url(/images/masscast/play_button.png)",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})}}if(window.parent!=window){try{window.parent.DM_Widget_PageItem_Masscast.adjustPositionSize(g,$("bodyall").getHeight())}catch(a){DM_Widget_PageItem_Masscast.debug("ERROR: "+a)}}})},renderSponsoredVideo:function(b){if(typeof b.videoId=="undefined"){return}ajax_call("masscast","get_sponsored_video",Object.toJSON($H(b)),function(a){if(DM_Widget_PageItem_Masscast.noFrame===true){if($("mc_Middle1")){$("mc_Middle1").update(a)}else{if($("mc_Middle2")){$("mc_Middle2").update(a)}}}else{var d=new Element("div").update(a);d.select("a").each(function(e){e.writeAttribute("target","_parent")});document.body.update(d.firstDescendant())}if(typeof b.clickCount!=="undefined"&&$$("div.dmpi_video_itemrelated.sponsored_video").length>0){$$("div.dmpi_video_itemrelated.sponsored_video").shift().select("a").each(function(e){e.observe("click",DM_Widget_PageItem_Masscast.redirectAfterClickCount.curry(b.clickCount,e.href));e.writeAttribute("href","javascript:void(0);")})}})},renderMiniPreview:function(q){var o=["right1","right2","right3"].indexOf(q.position)!=-1?$("mc_R"+q.position.substring(1)):null;if(!o){return}var n=q.position.substring(5),j="mini_preview_"+n,l=q.expandTimeout||200;if(q.type=="image"){var p='<img id="'+j+'" src='+q.miniPreview+' border="0" width="300" height="100" />';o.insert(p)}else{if(q.type=="flash"){var m=new SWFObject(q.miniPreview,j,300,100,"9");o.insert('<div id="'+j+'"></div>');m.addParam("wmode","transparent");m.write($(j))}}var k=function(){DM_Widget_PageItem_Masscast.buildingRight=n;if(DM_Widget_PageItem_Masscast.activeRight){DM_Widget_PageItem_Masscast.removeRightPlayer()}DM_Widget_PageItem_Masscast.activeRight=DM_Widget_PageItem_Masscast.buildingRight;var a=o.identify();ajax_call("masscast","get_static_buzzpack_player",Object.toJSON($H(q)),function(d){var b='<div id="'+a+'_player" class="mc_right_player_box">';b+='<div class="mc_right_player_close_cont background top_border">';b+='<a href="javascript:void(0);" id="'+a+'_player_close" class="dmco_simplelink" onclick="DM_Widget_PageItem_Masscast.removeRightPlayer(true)">';b+=DM_CloseLabel;b+="</a></div>"+d.replace(/dmpi_video_playerv4/,"dmpi_video_playerv4 background bottom_border");b+="</div>";(/dmpi_masscast/.test(o.className)?o:o.up()).hide().insert({after:b});DM_Widget_PageItem_Masscast.buildingRight=null})};o.observe("mouseover",function(){if(!DM_Widget_PageItem_Masscast.buildingRight&&!DM_Widget_PageItem_Masscast.mouseOverRightLock){DM_Widget_PageItem_Masscast.rightPlayerTimeout=setTimeout(k,l)}});o.observe("mouseout",function(){clearTimeout(DM_Widget_PageItem_Masscast.rightPlayerTimeout);DM_Widget_PageItem_Masscast.rightPlayerTimeout=DM_Widget_PageItem_Masscast.mouseOverRightLock=false});if(q.autoExpand){k()}},removeRightPlayer:function(d){var e=$("mc_Right"+DM_Widget_PageItem_Masscast.activeRight+"_player");if(e){e.previous().show().next().update("").remove();DM_Widget_PageItem_Masscast.activeRight=null;if(d){DM_Widget_PageItem_Masscast.mouseOverRightLock=true}}},getCustomCode:function(){if(this.issetPositionCode("x69")){DM_Widget_PageItem_Masscast.debug("Position code FOUND : x69");eval(this.getPositionCode("x69"))}if(this.issetPositionCode("x70")){DM_Widget_PageItem_Masscast.debug("Position code FOUND : x70");eval(this.getPositionCode("x70"))}},getPageSkin:function(){if(this.issetPositionCode("Top3")){var b=this.positionCode.Top3;DM_Skin.render_skin(b)}},render_skin:function(b){DM_Skin.render_skin(b)},getPlayerSkin:function(b){if(this.issetPositionCode("x13")){return this.getPositionCode("x13")}return b},getPositionCode:function(b){if(this.issetPositionCode(b)){return this.positionCode[b]}},issetPositionCode:function(b){if(!this.positionCode[b]||this.positionCode[b].indexOf("// Default ad")>=0){return false}return true},isPositionCalled:function(b){if(this.positionCalled.indexOf(b)!=-1){return true}return false},isPositionOlded:function(b){if(this.positionOlded.indexOf(b)!=-1){return true}return false},renderAllPosition:function(){DM_Widget_PageItem_Masscast.debug("Render all positions");for(var b=0;b<this.allowedDerivated.length;b++){if(this.isPositionCalled(this.allowedDerivated[b])&&this.issetPositionCode(this.allowedDerivated[b])){DM_Widget_PageItem_Masscast.debug("Position code FOUND : "+this.allowedDerivated[b]);this.renderPosition(this.allowedDerivated[b])}else{if(this.isPositionOlded(this.allowedDerivated[b])){DM_Widget_PageItem_Masscast.debug("Position code olded : "+this.allowedDerivated[b])}else{if(this.isPositionCalled(this.allowedDerivated[b])){if($("mc_"+this.allowedDerivated[b])){$("mc_"+this.allowedDerivated[b]).remove()}DM_Widget_PageItem_Masscast.debug("Position code not found : "+this.allowedDerivated[b])}}}}},buildPosition:function(b){if(!DM_Widget_PageItem_Masscast.noFrame){return}document.write('<script type="text/javascript">');if(typeof OAS_RICH!="undefined"){if(b=="Middle"){if(!this.getPositionCode("Middle")){document.write("if($$('.dm_page_html_channel')[0]){$$('.masscast_box_Middle')[0].setStyle({ display:'none' });$$('.column_right')[0].setStyle({ marginTop: '22px'});}else if($$('.dm_page_html_home')[0]){$$('.masscast_box')[0].setStyle({ display: 'none' });$('home_right_col').setStyle({ marginTop: '-349px' });}else if($$('.dm_page_html_playlists')[0] || $$('.dm_page_html_groups')[0]){$$('.masscast_middle_box')[0].setStyle({ display: 'none'});}else if($$('.pg_ligue1')[0]){$('mc_Middle').setStyle({ display: 'none'});}")}else{OAS_RICH(b)}}else{if(!this.getPositionCode(b)){$("mc_"+b).hide()}else{OAS_RICH(b)}}}document.write("<\/script>");if(typeof reloadTime!="undefined"){DM_Widget_PageItem_Masscast.reloadTime[b]=reloadTime}else{DM_Widget_PageItem_Masscast.reloadTime[b]=false}reloadTime=null},renderPosition:function(k,n){var j=$("mc_"+k);if(!j){DM_Widget_PageItem_Masscast.debug("Position placeholder not found : "+k);return}window.clearTimeout(this.reloadTimeout[k]);var l=$H({position:k,mandatoryJS:DM_Widget_PageItem_Masscast.mandatoryJS,baseJS:DM_Widget_PageItem_Masscast.baseJS,baseSkin:DM_Widget_PageItem_Masscast.baseSkin});if(typeof n!="undefined"){l.set("call",n)}var o=new Element("iframe",{src:"/middle?"+l.toQueryString(),scrolling:"no",frameBorder:"0",allowTransparency:"true","class":"masscast"});if(this.enableCrossFade){var m=j.childElements();var p=m[0];for(var q=1;q<m.length;q++){m[q].remove()}if(p){p.absolutize().remove()}o.hide();$("mc_"+k).insert(o);o.show()}else{$("mc_"+k).update(o)}},adjustPositionSize:function(d,e){e=e-(e%10);if(e!==0&&e<this.positionMinHeight[d]){e=this.positionMinHeight[d]}if(e==0){e=250}if(d=="Middle1"){e=this.positionMinHeight.Middle1}else{if(d=="Middle2"){e=this.positionMinHeight.Middle2}}$("mc_"+d).setStyle({height:e+"px"});var f=$("mc_"+d).down("iframe");if(f){f.setStyle({height:e+"px"})}},overridePosition:function(e,d){if(DM_Widget_PageItem_Masscast.isPositionCalled(e)){DM_Widget_PageItem_Masscast.positionCode[e]=d;DM_Widget_PageItem_Masscast.renderPosition(e)}},forceSetReload:function(){for(var b=0;b<this.allowedDerivated.length;b++){if(this.positionCalled.indexOf(this.allowedDerivated[b])!=-1){this.setReload(this.allowedDerivated[b])}}},setReload:function(e){if(this.enableRotateAd===false){DM_Widget_PageItem_Masscast.debug(e+" is Fixed (rotate ad not enable)");return}var f=new Date().getTime();var d=null;d=null;if(typeof this.reloadMaxDuration[e]!="undefined"&&this.reloadMaxDuration[e]!==false&&this.reloadMaxDuration[e]>0){if(f-this.initDate.getTime()>this.reloadMaxDuration[e]*1000){DM_Widget_PageItem_Masscast.debug("Fix "+e+" (no reload time forced by MAXDURATION)");return}}if(typeof this.reloadTime[e]!="undefined"&&this.reloadTime[e]!==false){if(this.reloadTime[e]>0){d=this.reloadTime[e];DM_Widget_PageItem_Masscast.debug("Reload "+e+" in "+d+"sc (forced by OAS)")}else{DM_Widget_PageItem_Masscast.debug("Fix "+e+" (no reload time forced by OAS)");return}}else{if(typeof this.defaultReloadTime[e]!="undefined"&&this.defaultReloadTime[e]!==false){if(this.defaultReloadTime[e]>0){d=this.defaultReloadTime[e];DM_Widget_PageItem_Masscast.debug("Reload "+e+" in "+d+"sc (forced by CONF)")}else{DM_Widget_PageItem_Masscast.debug("Fix "+e+" (no reload time forced by CONF)");return}}else{DM_Widget_PageItem_Masscast.debug("Fix "+e+" (no reload time was set)");return}}window.clearTimeout(this.reloadTimeout[e]);this.reloadTimeout[e]=window.setTimeout(this.reload.bind(this,e),d*1000);return},reload:function(){var e=arguments[0];var d=this.call;d=d.replace(/masscast\/[0-9]/g,"masscast/2");d=d.replace(/@([^?]+)?/g,"@"+e);d=d.replace(/\/[0-9]*@/g,"/"+Math.floor(Math.random()*100000)+"@");if(e=="Middle"){if(typeof crtg_content=="undefined"||crtg_content==""){d=d.replace("&criteofrhp=1","")}}this.renderPosition(e,d)},moveHomeSlot5and6:function(){document.observe("dom:loaded",function(){var e=$$(".dm_page_html_home .dmpi_subbox.channels");if(e.size()){e[0].remove()}var d=$$(".dm_page_html_home .dmpi_slotitem_video");if(d.size()){d[3].insert({after:'<div class="dmpi_slotitem dmpi_slotitem_video column span-2 edition"><!--ie comment--></div><div class="dmpi_slotitem dmpi_slotitem_video column span-2 last edition"><!--ie comment--></div>'});[d[5],d[9],d[11]].invoke("toggleClassName","last")}})},onDailymotionPlayerReady:function(b){if(b=="video_packbuzz_player"){this.buzzpackPlayer=$(b);this.buzzpackPlayer.playVideo();this.buzzpackPlayer.addEventListener("onVideoProgress","DM_Widget_PageItem_Masscast.repeatBuzzpackVideo")}else{this.player=$(b);this.player.addEventListener("onStateChange","DM_Widget_PageItem_Masscast.playerStateChangeHandler");this.player.addEventListener("onAdReady","DM_Widget_PageItem_Masscast.onAdReady");this.player.addEventListener("onAdDisplayBanner","DM_Widget_PageItem_Masscast.onAdDisplayBanner");this.player.addEventListener("onAdHasMiddle","DM_Widget_PageItem_Masscast.onAdHasMiddle");this.player.addEventListener("onAdHasTop","DM_Widget_PageItem_Masscast.onAdHasTop")}},playerStateChangeHandler:function(b){if(b==5&&this.auditudeRunning){this.onAuditudeReady()}},repeatBuzzpackVideo:function(b){if(b.mediaTime>playerOptions.end){this.buzzpackPlayer.pauseVideo();this.buzzpackPlayer.seekTo(playerOptions.start);this.buzzpackPlayer.playVideo()}},playBuzzpackVideo:function(){this.buzzpackPlayer.removeEventListener("onVideoProgress","DM_Widget_PageItem_Masscast.repeatBuzzpackVideo");$("buzzpack_play_button").remove();var e=playerOptions.videoURI.split("/")[2];var d=new Object;this.buzzpackPlayer.loadVideo(e,"full",{auditude:0,autoPlay:1,chromeless:0,skin:playerOptions.skin,related:playerOptions.related,animatedTitle:playerOptions.animatedTitle,autoMute:playerOptions.autoMute,hideInfos:playerOptions.hideInfos,expandVideo:playerOptions.expandVideo,hideVideoActions:playerOptions.hideVideoActions,clickThroughURL:playerOptions.clickThroughURL,clickThroughTarget:playerOptions.clickThroughURLTarget,clickThroughURLTag:playerOptions.clickThroughTag,clickThroughHotspot:0,isAd:playerOptions.isAd,linkLabel:playerOptions.linkLabel,linkURL:playerOptions.linkURL,linkTarget:playerOptions.linkTarget,repeat:playerOptions.repeat,forcedQuality:playerOptions.forcedQuality,completeURLS:JSON.stringify({complete_0:[playerOptions.complete_0],complete_25:[playerOptions.complete_25],complete_50:[playerOptions.complete_50],complete_75:[playerOptions.complete_75],complete_100:[playerOptions.complete_100]})})},initialize:function(){if(window.DM_Widget_PageItem_Masscast_READERISOWNER){return}DM_Player.addReadyCallback(this.onDailymotionPlayerReady.bind(this));Event.onDOMReady(function(){if(this.isInIframe){return}DM_Widget_PageItem_Masscast.debug("DOM is Ready");this.richOAS();if(this.noFrame===true){DM_Widget_PageItem_Masscast.debug("noFrame is true => Ads are NOT rendered in an iframe the first time.");this.forceSetReload()}else{DM_Widget_PageItem_Masscast.debug("noFrame is false => Ads are rendered in an iframe the first time.");if((this.auditudeRunning&&this.auditudeReady)||!this.auditudeRunning){this.renderAllPosition()}}this.domeIsReady=true;this.getCustomCode()}.bind(this))}};if(!window.masscast_async_call){DM_Widget_PageItem_Masscast.initialize();var DM_MassCast=DM_Widget_PageItem_Masscast}var DM_Ajax={defaultLocation:null,debugCallBack:true,debug:false,init:function(){this.initLoading();this.ajaxify(document)},debug:function(b){if(DM_Ajax.debug){dbg(b)}},initLoading:function(){if(!Ajax.clicked_obj){Ajax.clicked_obj=new Array;Ajax.loading_cnt=0}},ajaxify:function(f,h){if(typeof(f)=="undefined"){var f=document.body}f=f==document?$(document.body):$(f);try{if(f.tagName=="A"&&f.hasClassName("ajax")){DM_Ajax.ajaxifyLink(f);return}}catch(g){}f.select('a[name="ajax"]').each(function(a){DM_Ajax.ajaxifyLink(a)});var e=[];if(f.tagName&&f.tagName.toLowerCase()=="form"){e=new Array(f)}else{e=Object.isElement(f)?f.select("form.ajax"):$$("form.ajax")}e.each(function(a){DM_Ajax.addAjaxForm(a)})},needAjaxify:function(b){return b.name=="ajax"},addAjaxForm:function(b){b=$(b);if(typeof(b.alreadyObserved)=="undefined"){b.alreadyObserved=true;this.parseAction(b)}},parseAction:function(node){var actionRegex=new RegExp("action:(replace|insert|top|bottom|before|after|fade|hide|popup|redirect|update|toggleOrUpdate|cleanOrUpdate)");var i=0,args=[],action=null,formAction=null,doAjaxCall=true,href=node.href?node.href:($(node).readAttribute("data-href")||null);if(node.nodeName=="FORM"&&!node.className.match(/form_edit_in_place/)){formAction="replace"}if(!formAction&&href&&node.className.match(/dmgetjsparam/)){var newArg=eval(hex2str($(node).findParamInClass("dmgetjsparam")));if(typeof newArg=="string"&&newArg.blank()){return false}node.writeAttribute(node.href?"href":"data-href",href.replace(/jsparam.*jsparam/,"jsparam"+encodeURIComponent(newArg)+"jsparam"))}if(formAction||(action=node.className.match(actionRegex))){var actionToPerform=null;if(formAction){actionToPerform=formAction}else{actionToPerform=action[1]}while(arg=node.className.match(new RegExp("action:arg"+i+":([^ ]+)"))){args[args.length]=arg[1].sub("--"," ");i++}var targetElements=[node];if(args.length>0){if(args[0]=="parent"){targetElements=[node.parentNode]}else{targetElements=$$(args[0])}}switch(actionToPerform){case"top":case"bottom":case"before":case"after":var method=function(targetElement,callback){var options={};options[actionToPerform]=Ajax.XHR.responseText;targetElement.insert(options);if(callback){callback()}};break;case"fade":var method=function(targetElement,callback){DM_JS.get("Extras",function(){Effect.Fade(targetElement);if(callback){callback()}}.curry(targetElement,callback))};break;case"hide":var method=function(targetElement,callback){targetElement.hide();if(callback){callback()}};break;case"remove":var method=function(targetElement,callback){targetElement.remove();if(callback){callback()}};break;case"replace":var method=function(targetElement,callback){Element.replace(targetElement,Ajax.XHR.responseText);if(callback){callback()}};break;case"update":var method=function(targetElement,callback){Element.update(targetElement,Ajax.XHR.responseText);if(callback){callback()}};break;case"toggleOrUpdate":case"cleanOrUpdate":if(targetElements.length){targetElement=targetElements[0];if(targetElement.innerHTML.blank()){var method=function(targetElement,callback){Element.update(targetElement,Ajax.XHR.responseText).show();if(callback){callback()}$(document).fire("dm:toggled",targetElement)}}else{doAjaxCall=false;if(actionToPerform=="toggleOrUpdate"){var method=function(targetElement,callback){targetElement.toggle();if(callback){callback()}$(document).fire("dm:toggled",targetElement)}}else{var method=function(targetElement,callback){targetElement.update("").hide();if(callback){callback()}$(document).fire("dm:toggled",targetElement)}}}}break;case"redirect":var method=function(targetElement,callback){Request.redirect(hex2str(findParamInClass("urlback",targetElement)));if(callback){callback()}};break;case"insert":var method=function(targetElement,callback){targetElement.update(Ajax.XHR.responseText);if(callback){callback()}};break;case"popup":var method=function(targetElement,callback){DM_JS.get("DM_Widget_Popup",function(){var options={};var customWidth=null;if(Prototype.Browser.IE&&targetElement.hasClassName("popup_ie_width")){customWidth=options.custom_width=targetElement.findParamInClass("width")+"px"}if(Ajax.XHR.responseText){var popup=DM_Widget_Popup.getInstance();if(popup){if(popup.readyForUpdate()){popup.setCustomWidth(customWidth);popup.update(Ajax.XHR.responseText)}else{popup.close();popup=new DM_Widget_Popup(options);popup.update(Ajax.XHR.responseText);popup.open()}}else{popup=new DM_Widget_Popup(options);popup.update(Ajax.XHR.responseText);popup.open();if(window.IEVersion&&$("dimmer")){var height=$("dimmer").getHeight();$("dimmer").setStyle({height:"100%"});var newHeight=$("dimmer").getHeight();$("dimmer").setStyle({height:((height*100)/newHeight).toFixed(2)+"%"})}}}if(callback){callback()}}.bind(this,targetElement,callback))};break}if(method){node.jsAction=function(callbackJsAction){var targetElements=[node];if(args.length>0){if(args[0]=="parent"){targetElements=[node.parentNode]}else{if(args[0]=="parent.parent"){targetElements=[node.parentNode.parentNode]}else{targetElements=$$(args[0])}}}if(targetElements.length>1){targetElements.each(function(targetElement,index){if(index==targetElements.length-1){method(targetElement,callbackJsAction)}})}else{method(targetElements.first(),callbackJsAction)}}}}return doAjaxCall},ajaxifyLink:function(b){b=$(b);if(typeof(b.alreadyObserved)=="undefined"){DM_Ajax.parseAction(b);b.alreadyObserved=true;b.onclick=function(){return DM_Ajax.clickWithOnClick(b)};b.ajaxlink=b.href}},lockClickedObj:function(b){b.ajaxLock=true},isLockedClickedObj:function(b){return b.ajaxLock==true?true:false},unlockClickedObj:function(b){b.ajaxLock=false},getElementUniqueId:function(b){return $(b).identify()},clickWithOnClick:function(j,k){if(typeof j=="undefined"){j=this}var h=DM_Ajax.getElementUniqueId(j);Ajax.clicked_obj[h]=j;if(!DM_Ajax.isLockedClickedObj(j)){DM_Ajax.lockClickedObj(j);var f=findParamInClass("confirm",Ajax.clicked_obj[h]);if(f&&!confirm(hex2str(f).htmlentity_decode())){DM_Ajax.unlockClickedObj(j);return false}if(k){if(Ajax.clicked_obj[h].nodeName.match(/A|BUTTON/)&&!Ajax.clicked_obj[h].hasClassName("no_icon_loading")){var g=j;if(g.down(".icon")){g=g.down(".icon")}if(g.down(".button_icon")){g=g.down(".button_icon")}g.addClassName("icon_loading")}DM_Ajax.request(Ajax.clicked_obj[h].ajaxlink,h)}else{if(Ajax.clicked_obj[h].jsAction){Ajax.clicked_obj[h].jsAction()}DM_Ajax.unlockClickedObj(j)}}return false},saveClientBodyHeight:function(){var b=document.getElementsByTagName("body");b[0].oldHeight=b[0].style.height;b[0].style.height=b[0].clientHeight+"px"},resetClientBodyHeight:function(){var b=document.getElementsByTagName("body");b[0].style.height=b[0].oldHeight},request:function(e,d){Ajax.loading_cnt++;new Ajax.Request(e,{method:"get",parameters:{from_request:window.location.pathname+window.location.search+window.location.hash},onComplete:this.ajaxCallback.bind(this,d)})},ajaxCallback:function(d,e,f){Ajax.XHR=e;DM_Ajax.saveClientBodyHeight();DM_Ajax.tmpUniqueID=d;DM_Ajax.resetClientBodyHeight();if(Ajax.clicked_obj[d].jsAction){Ajax.clicked_obj[d].jsAction(function(){DM_Ajax.executeJSONS(f,d)})}else{DM_Ajax.executeJSONS(f,d)}},executeJSONS:function(eJSON,uniqueID){try{if(eJSON){if(typeof eJSON=="object"){if(!Object.isArray(eJSON)){eJSON=Object.values(eJSON)}var curLen=eJSON.length;for(var j=0;j<curLen;j++){try{eval(eJSON[j])}catch(e){if(DM_Ajax.debugCallBack){dbg("ajaxCallback error catched: "+e.message+" in "+eJSON[j])}}}}}DM_Ajax.afterAjaxCallBack(uniqueID)}catch(e){if(DM_Ajax.debugCallBack){dbg("CallBackError: "+e.message)}DM_Ajax.afterAjaxCallBack(uniqueID)}},afterAjaxCallBack:function(d){DM_Ajax.unlockClickedObj(Ajax.clicked_obj[d]);if(Ajax.clicked_obj[d]&&Ajax.clicked_obj[d].submited){Ajax.clicked_obj[d].submited=false}if(Ajax.loading_cnt>0){Ajax.loading_cnt--}if(Ajax.loading_cnt==0){var e=Ajax.clicked_obj[d];if(e.down(".icon")){e=e.down(".icon")}if(e.down(".button_icon")){e=e.down(".button_icon")}e.removeClassName("icon_loading");if(loading=e.down("div.loading")){loading.hide()}}},submitForm:function(e){var e=$(e);var f=DM_Ajax.getElementUniqueId(e);e.submited=true;Ajax.clicked_obj[f]=e;var d=e.down(".loading");if(d){d.show()}e.request({parameters:{from_request:document.location.pathname+document.location.search},onComplete:this.ajaxCallback.bind(this,f),onException:function(a,b){}})},checkFormSubmit:function(d,e){Event.stop(d);e=$(e);if((!d.keyCode||d.keyCode==Event.KEY_RETURN)&&!e.submited){this.submitForm(e)}},link:function(j){DM_Ajax.initLoading();var k=DM_Ajax.parseAction(j),g=$(j),f=g.href?g.href:(g.readAttribute("data-href")||null),h=(f.indexOf("?")===-1)?"?":"&";g.ajaxlink=f+h+"ajax_rnd="+new Date().getTime();DM_Ajax.clickWithOnClick(g,k)}};Event.onDOMReady(function(){DM_Ajax.init()});var su_mode=false;var headerLoginDebug=false;var headerLoginDebugMsg=[];function kill(b){if(!$("header_login_menu").visible()){return}if(!b.findElement("#header_login_menu")&&!b.findElement("#header_user_menu")){$("header_login_menu").hide();$$(".sd_header .header_login_info .arrow").shift().removeClassName("focus no_radius_bottom_right");$("bodyall").stopObserving("click",addUserMenuSettings);if(document.body.className.match(/\bdm_page_html_user\b/)){DM_Player.showAllPlayers()}document.stopObserving("click",kill)}}function HLDebug(b){if(headerLoginDebug){if(typeof b=="string"){b="HL DEBUG : "+b}else{dbg("HL DEBUG : <object_debug>")}dbg(b)}else{headerLoginDebugMsg.push(b)}}function showFBButtonIfNeeded(){if(!$("fb_login_id")&&$("fb_login")){HLDebug("Show FB login button");$("fb_login").show()}}function updateHeaderDMWay(){HLDebug('Call "updateHeaderDMWay"');try{var h=decodeURIComponent(getCookie(DM_LoginCookie)).evalJSON().login;var e="";if(window.HitMapLoginAnchor){e=' data-vszone="'+HitMapLoginAnchor+'"'}$("login_infos").remove();var f='<div class="dmco_html dmpi_facebook_connect dm_fb_button fb_no_infos" id="login_infos"><a onclick="DM_Widget_PageItem_Facebook_Connect.onLoginFacebook(); return false;" href="javascript:void(0);" class="fake_fb_login_button icon_facebook_short no_icon_loading"></a></div>';$$(".header_login_info").first().insert({bottom:'<a class="dmco_simplelink dm_login_info dmco_simplelink dmco_link linkable" href="/'+h+'"'+e+">"+h+"</a>"}).insert({after:f})}catch(g){}}function updateHeaderFBWay(){HLDebug('Call "updateHeaderFBWay"');var g=decodeURIComponent(getCookie("facebook_infos"));HLDebug('Cookie "facebook_infos" value : '+g);if($("header")&&g&&g!="null"&&DM_Widget_PageItem_Facebook_Connect_READER_URI){HLDebug('Cookie "facebook_infos" has VALID infos, INSERT them in header');g=g.split("***");var k=g[0].length>21?g[0].substr(0,21)+"...":g[0];var h=g[2];var j='<div class="fb_profile_pic_cont">';j+='<a href="'+DM_Widget_PageItem_Facebook_Connect_READER_URI+'">';j+='<img src="'+g[1]+'" height="22"/>';j+="</a>";j+="</div>";j+='<a id="fb_login_id" href="'+DM_Widget_PageItem_Facebook_Connect_READER_URI+'" class="fb_id">'+k+"</a> ";$("login_infos").removeClassName("fb_no_infos").removeClassName("dm_fb_button").update(j);var f=$$(".header_login_info").shift();f.down(".dm_login_info").remove();f.insert({top:$("login_infos").setStyle({visibility:"visible"}).remove()});HLDebug("Facebook infos inserted in header")}else{showFBButtonIfNeeded()}}function insertFBUserInfosInHeader(b){HLDebug('Call "insertFBUserInfosInHeader"');if(!su_mode){HLDebug('Not in "SU mode"');if(b){HLDebug("Check FB user login satus");FB.getLoginStatus(function(a){if(!a.authResponse){HLDebug('User NOT logged on FB or NOT linked with "Daily FB Connect App"');showFBButtonIfNeeded();return}else{HLDebug('User logged on FB and linked with "Daily FB Connect App"');HLDebug(a.authResponse);HLDebug("Try to UPDATE header");updateHeaderFBWay()}})}else{HLDebug("Do NOT check FB user login satus, try to UPDATE header");updateHeaderFBWay()}}else{HLDebug('Currently in "SU mode", NO header UPDATE')}}function loadLogin(){function e(j){HLDebug('Call "updateLoginInfo"');var l="";var k="";if(window.HitMapLoginAnchor){l=' data-vszone="'+HitMapLoginAnchor+'"'}j=decodeURIComponent(j).evalJSON();j.screenLogin=j.login.length>24?j.login.substr(0,21)+"...":j.login;j.vszone=l;if(facebook_enabled){var k='<div id="login_infos" class="dmpi_facebook_connect dm_fb_button fb_no_infos" style="visibility:hidden;"></div>'}j.displayLogin=j.login.length>24?j.login.substr(0,21)+"...":j.login;if(typeof j.email!="undefined"){j.displayLogin=j.email.length>24?j.email.substr(0,24)+"...":j.email}var a='<span class="header_login_info">'+usernameLink+'<div id="fb_login"><a class="fake_fb_login_button icon_facebook_short no_icon_loading" href="javascript:void(0);" onclick="DM_Widget_PageItem_Facebook_Connect.onLoginFacebook(); return false;"></a></div><a class="dm_login_info linkable" href="/#{login}"#{vszone}>#{displayLogin}</a></span><ul id="header_login_menu" style="display: none;"></ul></span>'+k;loginInfoTemplate=new Template(a);$("login_info").update(loginInfoTemplate.evaluate(j));if(getCookie("facebook_infos")){document.observe("click",function(g){if(g.target.id=="header_logout"){setCookie("fb_autologin_disabled",1,30*6)}})}document.observe("dm:toggled",function(g){if(!g.memo||g.memo.id!="header_login_menu"){return}addUserMenuSettings(g)});HLDebug("Header filled with DM user infos");if(facebook_enabled){HLDebug("DM FB Connect is enabled");DM_Widget_PageItem_Facebook_Connect_READER_URI="/"+j.login;DM_Widget_PageItem_Facebook_Connect_DM_USER_FUID=j.fbuid;var b=decodeURIComponent(getCookie("facebook_infos"));if(!b||b=="null"){HLDebug("No cookie facebook_infos, SET DM_Widget_PageItem_Facebook_Connect_REQUIRE_UPDATE to true");DM_Widget_PageItem_Facebook_Connect_REQUIRE_UPDATE=true}else{HLDebug('cookie "facebook_infos" is filled');if(!j.su_mode){HLDebug('Not in "SU mode"');insertFBUserInfosInHeader()}else{HLDebug('Currently in "SU mode"');su_mode=true}}}}var d=null;if(getCookie("sid")){if(d=getCookie(DM_LoginCookie)){HLDebug("Has cookie "+DM_LoginCookie+' : call "updateLoginInfo"');e(d)}else{HLDebug("No cookie "+DM_LoginCookie+" : do ajax call to /pageitem/user/login_info");var f="/pageitem/user/login_info?"+Math.floor(1000000*Math.random());new Ajax.Request(f,{method:"get",onSuccess:function(a){HLDebug("Ajax /pageitem/user/login_info SUCCEED");if(a.responseText!=""){HLDebug("Set cookie "+DM_LoginCookie+" with response Ajax : ");HLDebug(a.responseText);setCookie(DM_LoginCookie,a.responseText);HLDebug('Ajax response not empty, call "updateLoginInfo"');e(a.responseText)}}});delete (f)}}else{deleteCookie(DM_LoginCookie)}}function addUserMenuSettings(d){var e=$("header_login_menu");if(e){if(e.visible()){$$(".sd_header .header_login_info .arrow").shift().addClassName("focus no_radius_bottom_right");if(document.body.className.match(/\bdm_page_html_user\b/)){DM_Player.hideAllPlayers()}document.observe("click",kill);if($$(".header_login_info")[0].getWidth()>=140&&parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5))!=7){e.clonePosition($$(".header_login_info")[0],{setTop:false,setLeft:false,setHeight:false})}else{e.style.width="140px"}}else{$$(".sd_header .header_login_info .arrow").shift().removeClassName("focus no_radius_bottom_right");if(document.body.className.match(/\bdm_page_html_user\b/)){DM_Player.showAllPlayers()}$("bodyall").stopObserving("click",arguments.callee);document.stopObserving("click",kill)}}}DM_Widget_PageItem_Adsense={titleTemplate:new Template('<span class="title foreground2 background">#{title}</span>'),itemTemplate:new Template('<div class="item">  <a class="video_title" href="#{google_ads_url}" target="_blank">#{google_ads_line1}</a> <br />  <span class="foreground2">#{google_ads_line2} #{google_ads_line3}</span> <br />  <a class="name" href="#{google_ads_url}" target="_blank">#{google_ads_visible_url}</a></div>')};function google_ad_request_done(x){if(x.length==0){return}var n="";var p="";var t="";var s=$("adsense_on_player_page");var y=$("adsense_intercalated");var o=$("adsense_bottom");var q=DM_Widget_PageItem_Adsense.titleTemplate.evaluate(DM_Widget_PageItem_Adsense);var w=window.location.search.toQueryParams();for(var v=0;v<x.length;v++){DM_Widget_PageItem_Adsense.google_ads_url=x[v].url;DM_Widget_PageItem_Adsense.google_ads_visible_url=x[v].visible_url;DM_Widget_PageItem_Adsense.google_ads_line1=x[v].line1;DM_Widget_PageItem_Adsense.google_ads_line2=x[v].line2;DM_Widget_PageItem_Adsense.google_ads_line3=x[v].line3;if(y&&o&&!s){if(v<2){p+=DM_Widget_PageItem_Adsense.itemTemplate.evaluate(DM_Widget_PageItem_Adsense)}else{t+=DM_Widget_PageItem_Adsense.itemTemplate.evaluate(DM_Widget_PageItem_Adsense)}}else{if(s&&!o&&!y){n+=DM_Widget_PageItem_Adsense.itemTemplate.evaluate(DM_Widget_PageItem_Adsense)}}}if(s&&n.length>0){s.innerHTML=q+n;s.show()}if(y&&p.length>0){y.innerHTML=q+p+'<div class="dmco_clear"></div>';var r=$("dual_list");var u=r.select("div.dmpi_video_item");if(u.size()){(u[3]||u.last()).insert({after:y.remove()})}else{r.insert({before:y.remove()})}y.show()}if(o&&t.length>0){o.innerHTML=q+t+'<div class="dmco_clear"></div>';var u=$("dual_list").select("div.dmpi_video_item");if(u.size()){if(u[11]){u[11].insert({after:o.remove()})}else{if($$("#dual_list .dmpi_video_item").last().next("#adsense_intercalated")){y.insert({after:o.remove()})}else{$$("#dual_list .dmpi_video_item").last().insert({after:o.remove()})}}}else{y.insert({after:o.remove()})}o.show()}return}function google_afs_request_done(b){google_ad_request_done(b)}var google_afs=(function(){var d=window.google_afs_request_done;var e={_is_container_ready:false,_curried_render_ads:null,renderAds:function(a){e._curried_render_ads=function(){d(a)};e.is_container_ready&&e._curried_render_ads()},containerReady:function(){e.is_container_ready=true;e._curried_render_ads&&e._curried_render_ads()}};window.google_afs_request_done=e.renderAds;return e})();var DM_Skin={skin:{},debug:false,skinData:[],name:"",loadingOasSkin:false,translateV1ParamstoV2:function(g){var e={skinName:"name",trackingTag:"tracking_tag",bodyClickUrl:"redirect_url",topBannerLink:"redirect_url",bodyClickUrlThroughTag:"click_count_urls",topBannerLinkThroughTag:"click_count_urls",countingPixel:"display_count_urls",countingPixelAlt:"display_count_urls"};var f={};for(i in e){if(g[i]!=""){if(typeof e[i]!="undefined"){var h=e[i];if(i=="bodyClickUrl"&&g[i]!=""){f.body_redirect_enabled=true}if(h.match(/urls/)){if(!f[h]){f[h]=[]}f[h].push(g[i])}else{f[h]=g[i]}}}}DM_Skin.log(f);return f},log:function(b){if(DM_Skin.debug){console.log(b);if($("skin_debug")){$("skin_debug").insert({bottom:"<div>"+b+"<div>"})}}},render_skin:function(skinData){DM_Skin.log("render_skin from OAS");DM_Skin.log(skinData);try{DM_Skin.skinData=eval("("+skinData+")");if(typeof DM_Skin.skinData=="object"){DM_Skin.skinData=DM_Skin.translateV1ParamstoV2(DM_Skin.skinData);DM_Skin.skinData.from_oas=true;DM_Skin.loadingOasSkin=true;ajax_call("masscast","get_skin",DM_Skin.skinData.name,this.callbackSelectSkin)}}catch(e){DM_Skin.log(e.message);DM_Skin.log("error while loading skin");DM_Skin.log("skinData:");DM_Skin.log(skinData)}},getParameter:function(d){var e=null;if(typeof DM_Skin.skin[d]!="undefined"&&DM_Skin.skin[d]!=""){e=DM_Skin.skin[d]}if(typeof DM_Skin.skinData!="undefined"&&typeof DM_Skin.skinData[d]!="undefined"&&DM_Skin.skinData[d]!=""){e=DM_Skin.skinData[d]}return e},applySkin:function(){DM_Skin.log("applying skin params");if(!DM_Skin.getParameter("from_oas")&&DM_Skin.getParameter("disable_chrome")){DM_Skin.removeSkin()}else{if(!DM_Skin.loadingOasSkin&&DM_Skin.getParameter("name")){DM_Skin.setSkinCss()}}if(!DM_Skin.loadingOasSkin){DM_Skin.setBanner("top");DM_Skin.setBanner("bottom");DM_Skin.setBodyLink();DM_Skin.callUrls(DM_Skin.getParameter("display_count_urls"));DM_Skin.setTrackingTag()}},callbackSelectSkin:function(b){DM_Skin.loadingOasSkin=false;if(b.blank()){return}DM_Skin.skin=b.evalJSON(true);DM_Skin.applySkin()},removeSkin:function(){if($("css_skin")){$("css_skin").remove()}$$("#top_banner, #bottom_banner").invoke("update","")},setSkinCss:function(){DM_Skin.log("set skin css "+DM_Skin.skin.css_path);if($("css_skin")){$("css_skin").setAttribute("href",DM_Skin.skin.css_path)}else{$$("head").shift().appendChild(new Element("link",{href:DM_Skin.skin.css_path,rel:"stylesheet",id:"css_skin"}))}},countClickAndRedirect:function(){DM_Skin.callUrls(DM_Skin.getParameter("click_count_urls"));if(DM_Skin.getParameter("redirect_url")){if(DM_Skin.getParameter("redirect_target")=="_self"){location.href=DM_Skin.getParameter("redirect_url")}else{window.open(DM_Skin.getParameter("redirect_url"))}}},setBodyLink:function(){if(this.getParameter("redirect_url")&&this.getParameter("body_redirect_enabled")){DM_Skin.log("set body click ok");var d=new Element("div",{id:"body_clicker"});d.setStyle({position:"absolute",width:"100%",height:"100%",top:0,left:0,zIndex:0,cursor:"pointer"});if(Prototype.Browser.IE){var e=$$(".sd_header").first().getHeight();d.setStyle({top:e+"px"})}$("wrapper").insert({top:d});d.observe("click",DM_Skin.countClickAndRedirect)}else{if($("body_clicker")){DM_Skin.log("remove body click ok");$$("#body_clicker").invoke("remove")}}},setBanner:function(g){var k=g+"_banner_image";var h=$(g+"_banner");var j=this.getParameter(k);if(j&&j!=""&&h){var l=j.match(/\.swf/)?"swf":j.match(/^http:\/\//)?"iframe":"image";DM_Skin.log("update "+g+" with "+l+" "+j);switch(l){case"swf":var m=(new Date()).getTime();j=this.getParameter("skin_root")+"/"+j+this.getParameter("version");h.update('<div class="flash_clicker"></div><object width="100%" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="allowScriptAccess" value="always"/><param name="allowFullscreen" value="true"/><param name="movie" value="'+j+'"/><param name="quality" value="high"/><param name="wmode" value="Transparent"/><embed width="100%" pluginspage="http://www.adobe.com/go/getflashplayer" type="application/x-shockwave-flash" allowScriptAccess="always" allowFullscreen="true" wmode="Transparent" quality="high" swliveconnect="true" src="'+j+"?"+m+'" id="pub_Flash2372720" name="pub_Flash2372720"/></object>');break;case"iframe":h.update('<iframe style="overflow:hidden; margin:0; padding:0; width: 100%;" scrolling="no" width="100%" align="center" frameborder="0" marginwidth="0" marginheight="0" src="'+j+'"></iframe>');break}}if(h&&this.getParameter("redirect_url")){h.setStyle({cursor:"pointer"});h.observe("click",DM_Skin.countClickAndRedirect)}if($("top_banner")&&$("top_banner").hasAttribute("style")&&$("content").down("div.dmpi_bigbox")){$("wrapper").setStyle({padding:"0"})}},ping:function(b){b=b.replace("_random_",Math.round((Math.random()*10000000)));DM_Skin.log("ping url: "+b);$$("body")[0].insert({bottom:'<img style="display: none" class="pixel_count" src="'+b+'">'})},callUrls:function(b){if(b){DM_Skin.log("list of urls to ping : "+b.join(", "));b.each(function(a){DM_Skin.ping(a)})}},setDisplayCountUrls:function(){var b=DM_Skin.getParameter("display_count_urls");if(b){b.each(function(a){DM_Skin.log("append display_count_url"+a);$$("body")[0].insert({bottom:'<img style="display: none" class="cpt_pixel" src="'+a+'">'})})}},callAdTagUrls:function(b){if(b){b.each(function(h){try{var a=h+"?time="+(new Date()).getTime();var g=new Image();g.src=a}catch(e){dbg("Error while loading ad tag => "+h)}})}},setTrackingTag:function(){if(DM_Skin.getParameter("tracking_tag")){try{DM_Skin.documentWriteBackup=document.write;$$("body")[0].insert({bottom:new Element("div",{id:"skin_tracking_tag"})});DM_Skin.documentWrite=function(a){$("skin_tracking_tag").insert({bottom:a})};script=DM_Skin.getParameter("tracking_tag").replace(/document.write/g,"DM_Skin.documentWrite");$("skin_tracking_tag").update(script.stripScripts());script.extractScripts().map(function(a){return globalEval(a)});DM_Skin.log("set tracking tag ok")}catch(b){console.log("fsadfsa")}}},onAdSkinLoading:function(){DM_Skin.loadingOasSkin=true},onAdSkinLoaded:function(b){DM_Skin.loadingOasSkin=false;DM_Skin.skin=b;DM_Skin.applySkin()}};PubSub.subscribe("masscast:loading_top3",DM_Skin.onAdSkinLoading);PubSub.subscribe("masscast:loaded_top3",DM_Skin.onAdSkinLoaded);var DM_WidgetV3={loadedCSS:{},addCss:function(a){if(!DM_WidgetV3.loadedCSS[a]){var b=document.createElement("link");b.setAttribute("href",a);b.setAttribute("rel","stylesheet");$$("head").shift().appendChild(b);DM_WidgetV3.loadedCSS[a]=1}},addScript:function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);$$("head")[0].appendChild(b)},getUrlFromClass:function(b){var a=b.replace(/\.dmpi_/,"/pageitem/");a=a.replace(/_/g,"/");return a},redirect:function(a){if(typeof(a)=="string"&&a.length>0){document.location=a}else{document.location.reload()}},findClass:function(a){if(a){return"."+a.className.match(/dmpi_[a-z0-9_]+/)}else{return null}},reload:function(a,e,d,b){classname=DM_WidgetV3.findClass($$(a).shift());if(!e){e=Request.getRequestURI()}if(classname){DM_WidgetV3.get(DM_WidgetV3.getUrlFromClass(classname),a,e,d,b)}},get:function(widgetUrl,selector,requestUrl,options,callbackMethod){if(!requestUrl){requestUrl=Request.getRequestURI()}var params=$H({request:requestUrl,t:Math.random(),from_request:window.location.pathname});if(/(&|\?)request=/.test(widgetUrl)){params.unset("request")}if(options){params.update(options)}new Ajax.Request(widgetUrl,{method:"get",parameters:params,onComplete:function(ajaxObject){var toReplace=$$(selector).shift();if(toReplace){toReplace.replace(ajaxObject.responseText)}for(i in ajaxObject.headerJSON){if(ajaxObject.headerJSON.hasOwnProperty(i)){eval(ajaxObject.headerJSON[i])}}var newElement=$$(selector).shift();if(newElement){DM_Ajax.ajaxify(newElement)}if(callbackMethod){if(Object.isString(callbackMethod)){eval(callbackMethod)}else{if(Object.isFunction(callbackMethod)){callbackMethod(ajaxObject)}}}}})},UID:0,runningAjaxCalls:{},registerAjaxCall:function(f,d,a){for(var b in d){if(d.hasOwnProperty(b)){var e=f+"."+b;if(!DM_WidgetV3.runningAjaxCalls[e]){DM_WidgetV3.runningAjaxCalls[e]={}}DM_WidgetV3.runningAjaxCalls[e][a]=true}}},unregisterAjaxCall:function(b,a){if(a&&DM_WidgetV3.runningAjaxCalls[b]){return delete (DM_WidgetV3.runningAjaxCalls[b][a])}for(var a in DM_WidgetV3.runningAjaxCalls[b]){if(DM_WidgetV3.runningAjaxCalls[b].hasOwnProperty(a)){delete (DM_WidgetV3.runningAjaxCalls[b][a])}}},multiGet:function(page,requestUrl,config,globalCallback){if(!requestUrl){requestUrl=Request.getRequestURI()}var callParams=$H({request:requestUrl,t:Math.random(),from_request:window.location.pathname,config:Object.toJSON(config)}),ajaxCallUID=DM_WidgetV3.UID++;DM_WidgetV3.registerAjaxCall(page,config,ajaxCallUID);new Ajax.Request("/widget_chunks/"+page,{method:"get",parameters:callParams,onComplete:function(response){response.ajaxCallUID=ajaxCallUID;if(!window.dom_is_ready&&!arguments.callee.delayed){arguments.callee.delayed=true;var args=arguments,recall=function(){args.callee.apply(this,args)};document.observe("dom:loaded",recall);return}var jsonResponse=response.responseText.evalJSON();for(var component in config){if(typeof jsonResponse[component]!="undefined"){var ajaxCallKey=page+"."+component;if(!DM_WidgetV3.runningAjaxCalls[ajaxCallKey][ajaxCallUID]){if(config[component].canceled){config[component].canceled()}return}var selector=config[component].replace||config[component].update;if(selector){var cont=$$(selector).first();if(cont){config[component].replace&&cont.replace(jsonResponse[component]);config[component].update&&cont.update(jsonResponse[component])}}if(config[component].callback){config[component].callback(response)}}DM_WidgetV3.unregisterAjaxCall(ajaxCallKey,ajaxCallUID)}for(i in response.headerJSON){if(response.headerJSON.hasOwnProperty(i)){eval(response.headerJSON[i])}}if(globalCallback){if(Object.isString(globalCallback)){eval(globalCallback)}else{if(Object.isFunction(globalCallback)){globalCallback(response)}}}}});return ajaxCallUID}};var DM_Widget_PageItem_LayoutPreload={switchView:function(e){var d=$("dual_list");if(e=="grid"){d.removeClassName("list_view").addClassName("grid_view");if(window.DM_Widget_PageItem_Layout){DM_Widget_PageItem_Layout.selectLayoutButton("grid")}setCookie("duallist_video"+DM_Widget_PageItem_Layout_page_type,"grid",365,"/");if(window.DM_Widget_PageItem_Video_Preview){DM_Widget_PageItem_Video_Preview.activateFlyout()}DM_LazyLoad.findInContextAndlLoad("#layout")}else{if(e=="list"){d.removeClassName("grid_view").addClassName("list_view");if(window.DM_Widget_PageItem_Layout){DM_Widget_PageItem_Layout.selectLayoutButton("list")}setCookie("duallist_video"+DM_Widget_PageItem_Layout_page_type,"list",365,"/");if(window.DM_Widget_PageItem_Video_Preview){DM_Widget_PageItem_Video_Preview.deactivateFlyout()}}}d.setStyle({visibility:"visible"})}};